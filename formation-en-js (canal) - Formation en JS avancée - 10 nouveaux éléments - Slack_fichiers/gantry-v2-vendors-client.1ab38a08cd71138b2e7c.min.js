(()=>{var nv=Object.defineProperty;var s=(x,l)=>nv(x,"name",{value:l,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-single-channel-client","gantry-v2-vendors-workflow-builder"],{7492298763:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},3778408185:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1514424064),h=d(285364620),m=d(5625132121),p=d(5640133965),a=d(5283324899),r=d(5368312762);l.addClsInstrumentationHandler=c.addClsInstrumentationHandler,l.addFidInstrumentationHandler=c.addFidInstrumentationHandler,l.addLcpInstrumentationHandler=c.addLcpInstrumentationHandler,l.addPerformanceInstrumentationHandler=c.addPerformanceInstrumentationHandler,l.addTtfbInstrumentationHandler=c.addTtfbInstrumentationHandler,l.addPerformanceEntries=h.addPerformanceEntries,l.startTrackingInteractions=h.startTrackingInteractions,l.startTrackingLongTasks=h.startTrackingLongTasks,l.startTrackingWebVitals=h.startTrackingWebVitals,l.addClickKeypressInstrumentationHandler=m.addClickKeypressInstrumentationHandler,l.addHistoryInstrumentationHandler=p.addHistoryInstrumentationHandler,l.SENTRY_XHR_DATA_KEY=a.SENTRY_XHR_DATA_KEY,l.addXhrInstrumentationHandler=a.addXhrInstrumentationHandler,l.startTrackingINP=r.startTrackingINP},5625132121:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(6496036490),m=1e3;let p,a,r;function n(g){const S="dom";c.addHandler(S,g),c.maybeInstrument(S,e)}s(n,"addClickKeypressInstrumentationHandler");function e(){if(!h.WINDOW.document)return;const g=c.triggerHandlers.bind(null,"dom"),S=o(g,!0);h.WINDOW.document.addEventListener("click",S,!1),h.WINDOW.document.addEventListener("keypress",S,!1),["EventTarget","Node"].forEach(u=>{const v=h.WINDOW[u]&&h.WINDOW[u].prototype;!v||!v.hasOwnProperty||!v.hasOwnProperty("addEventListener")||(c.fill(v,"addEventListener",function(y){return function(_,C,T){if(_==="click"||_=="keypress")try{const A=this,O=A.__sentry_instrumentation_handlers__=A.__sentry_instrumentation_handlers__||{},D=O[_]=O[_]||{refCount:0};if(!D.handler){const M=o(g);D.handler=M,y.call(this,_,M,T)}D.refCount++}catch{}return y.call(this,_,C,T)}}),c.fill(v,"removeEventListener",function(y){return function(_,C,T){if(_==="click"||_=="keypress")try{const A=this,O=A.__sentry_instrumentation_handlers__||{},D=O[_];D&&(D.refCount--,D.refCount<=0&&(y.call(this,_,D.handler,T),D.handler=void 0,delete O[_]),Object.keys(O).length===0&&delete A.__sentry_instrumentation_handlers__)}catch{}return y.call(this,_,C,T)}}))})}s(e,"instrumentDOM");function t(g){if(g.type!==a)return!1;try{if(!g.target||g.target._sentryId!==r)return!1}catch{}return!0}s(t,"isSimilarToLastCapturedEvent");function i(g,S){return g!=="keypress"?!1:!S||!S.tagName?!0:!(S.tagName==="INPUT"||S.tagName==="TEXTAREA"||S.isContentEditable)}s(i,"shouldSkipDOMEvent");function o(g,S=!1){return u=>{if(!u||u._sentryCaptured)return;const v=f(u);if(i(u.type,v))return;c.addNonEnumerableProperty(u,"_sentryCaptured",!0),v&&!v._sentryId&&c.addNonEnumerableProperty(v,"_sentryId",c.uuid4());const y=u.type==="keypress"?"input":u.type;t(u)||(g({event:u,name:y,global:S}),a=u.type,r=v?v._sentryId:void 0),clearTimeout(p),p=h.WINDOW.setTimeout(()=>{r=void 0,a=void 0},m)}}s(o,"makeDOMEventHandler");function f(g){try{return g.target}catch{return null}}s(f,"getEventTarget"),l.addClickKeypressInstrumentationHandler=n,l.instrumentDOM=e},5640133965:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(6496036490);let m;function p(r){const n="history";c.addHandler(n,r),c.maybeInstrument(n,a)}s(p,"addHistoryInstrumentationHandler");function a(){if(!c.supportsHistory())return;const r=h.WINDOW.onpopstate;h.WINDOW.onpopstate=function(...e){const t=h.WINDOW.location.href,i=m;m=t;const o={from:i,to:t};if(c.triggerHandlers("history",o),r)try{return r.apply(this,e)}catch{}};function n(e){return function(...t){const i=t.length>2?t[2]:void 0;if(i){const o=m,f=String(i);m=f;const g={from:o,to:f};c.triggerHandlers("history",g)}return e.apply(this,t)}}s(n,"historyReplacementFunction"),c.fill(h.WINDOW.history,"pushState",n),c.fill(h.WINDOW.history,"replaceState",n)}s(a,"instrumentHistory"),l.addHistoryInstrumentationHandler=p},5283324899:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(6496036490),m="__sentry_xhr_v3__";function p(n){const e="xhr";c.addHandler(e,n),c.maybeInstrument(e,a)}s(p,"addXhrInstrumentationHandler");function a(){if(!h.WINDOW.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;c.fill(n,"open",function(e){return function(...t){const i=c.timestampInSeconds()*1e3,o=c.isString(t[0])?t[0].toUpperCase():void 0,f=r(t[1]);if(!o||!f)return e.apply(this,t);this[m]={method:o,url:f,request_headers:{}},o==="POST"&&f.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const g=s(()=>{const S=this[m];if(S&&this.readyState===4){try{S.status_code=this.status}catch{}const u={endTimestamp:c.timestampInSeconds()*1e3,startTimestamp:i,xhr:this};c.triggerHandlers("xhr",u)}},"onreadystatechangeHandler");return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?c.fill(this,"onreadystatechange",function(S){return function(...u){return g(),S.apply(this,u)}}):this.addEventListener("readystatechange",g),c.fill(this,"setRequestHeader",function(S){return function(...u){const[v,y]=u,_=this[m];return _&&c.isString(v)&&c.isString(y)&&(_.request_headers[v.toLowerCase()]=y),S.apply(this,u)}}),e.apply(this,t)}}),c.fill(n,"send",function(e){return function(...t){const i=this[m];if(!i)return e.apply(this,t);t[0]!==void 0&&(i.body=t[0]);const o={startTimestamp:c.timestampInSeconds()*1e3,xhr:this};return c.triggerHandlers("xhr",o),e.apply(this,t)}})}s(a,"instrumentXHR");function r(n){if(c.isString(n))return n;try{return n.toString()}catch{}}s(r,"parseUrl"),l.SENTRY_XHR_DATA_KEY=m,l.addXhrInstrumentationHandler=p,l.instrumentXHR=a},285364620:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(7492298763),p=d(1514424064),a=d(6496036490),r=d(2929564606),n=d(2273798110),e=d(8451898068),t=2147483647;let i=0,o={},f,g;function S(){const ne=r.getBrowserPerformanceAPI();if(ne&&h.browserPerformanceTimeOrigin){ne.mark&&a.WINDOW.performance.mark("sentry-tracing-init");const ie=C(),pe=y(),Ee=_(),Be=T();return()=>{ie(),pe(),Ee(),Be()}}return()=>{}}s(S,"startTrackingWebVitals");function u(){p.addPerformanceInstrumentationHandler("longtask",({entries:ne})=>{for(const ie of ne){if(!c.getActiveSpan())return;const pe=r.msToSec(h.browserPerformanceTimeOrigin+ie.startTime),Ee=r.msToSec(ie.duration),Be=c.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:pe,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});Be&&Be.end(pe+Ee)}})}s(u,"startTrackingLongTasks");function v(){p.addPerformanceInstrumentationHandler("event",({entries:ne})=>{for(const ie of ne){if(!c.getActiveSpan())return;if(ie.name==="click"){const pe=r.msToSec(h.browserPerformanceTimeOrigin+ie.startTime),Ee=r.msToSec(ie.duration),Be={name:h.htmlTreeAsString(ie.target),op:`ui.interaction.${ie.name}`,startTime:pe,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},it=h.getComponentName(ie.target);it&&(Be.attributes["ui.component_name"]=it);const Ce=c.startInactiveSpan(Be);Ce&&Ce.end(pe+Ee)}}})}s(v,"startTrackingInteractions");function y(){return p.addClsInstrumentationHandler(({metric:ne})=>{const ie=ne.entries[ne.entries.length-1];ie&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding CLS"),o.cls={value:ne.value,unit:""},g=ie)},!0)}s(y,"_trackCLS");function _(){return p.addLcpInstrumentationHandler(({metric:ne})=>{const ie=ne.entries[ne.entries.length-1];ie&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding LCP"),o.lcp={value:ne.value,unit:"millisecond"},f=ie)},!0)}s(_,"_trackLCP");function C(){return p.addFidInstrumentationHandler(({metric:ne})=>{const ie=ne.entries[ne.entries.length-1];if(!ie)return;const pe=r.msToSec(h.browserPerformanceTimeOrigin),Ee=r.msToSec(ie.startTime);m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FID"),o.fid={value:ne.value,unit:"millisecond"},o["mark.fid"]={value:pe+Ee,unit:"second"}})}s(C,"_trackFID");function T(){return p.addTtfbInstrumentationHandler(({metric:ne})=>{ne.entries[ne.entries.length-1]&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding TTFB"),o.ttfb={value:ne.value,unit:"millisecond"})})}s(T,"_trackTtfb");function A(ne){const ie=r.getBrowserPerformanceAPI();if(!ie||!a.WINDOW.performance.getEntries||!h.browserPerformanceTimeOrigin)return;m.DEBUG_BUILD&&h.logger.log("[Tracing] Adding & adjusting spans using Performance API");const pe=r.msToSec(h.browserPerformanceTimeOrigin),Ee=ie.getEntries(),{op:Be,start_timestamp:it}=c.spanToJSON(ne);if(Ee.slice(i).forEach(Ce=>{const Me=r.msToSec(Ce.startTime),je=r.msToSec(Ce.duration);if(!(Be==="navigation"&&it&&pe+Me<it))switch(Ce.entryType){case"navigation":{D(ne,Ce,pe);break}case"mark":case"paint":case"measure":{O(ne,Ce,Me,je,pe);const We=e.getVisibilityWatcher(),Ze=Ce.startTime<We.firstHiddenTime;Ce.name==="first-paint"&&Ze&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FP"),o.fp={value:Ce.startTime,unit:"millisecond"}),Ce.name==="first-contentful-paint"&&Ze&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FCP"),o.fcp={value:Ce.startTime,unit:"millisecond"});break}case"resource":{F(ne,Ce,Ce.name,Me,je,pe);break}}}),i=Math.max(Ee.length-1,0),V(ne),Be==="pageload"){Y(o),["fcp","fp","lcp"].forEach(Me=>{if(!o[Me]||!it||pe>=it)return;const je=o[Me].value,We=pe+r.msToSec(je),Ze=Math.abs((We-it)*1e3),ft=Ze-je;m.DEBUG_BUILD&&h.logger.log(`[Measurements] Normalized ${Me} from ${je} to ${Ze} (${ft})`),o[Me].value=Ze});const Ce=o["mark.fid"];Ce&&o.fid&&(r.startAndEndSpan(ne,Ce.value,Ce.value+r.msToSec(o.fid.value),{name:"first input delay",op:"ui.action",attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete o["mark.fid"]),"fcp"in o||delete o.cls,Object.keys(o).forEach(Me=>{c.setMeasurement(Me,o[Me].value,o[Me].unit)}),$(ne)}f=void 0,g=void 0,o={}}s(A,"addPerformanceEntries");function O(ne,ie,pe,Ee,Be){const it=Be+pe,Ce=it+Ee;return r.startAndEndSpan(ne,it,Ce,{name:ie.name,op:ie.entryType,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"}}),it}s(O,"_addMeasureSpans");function D(ne,ie,pe){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(Ee=>{M(ne,ie,Ee,pe)}),M(ne,ie,"secureConnection",pe,"TLS/SSL","connectEnd"),M(ne,ie,"fetch",pe,"cache","domainLookupStart"),M(ne,ie,"domainLookup",pe,"DNS"),R(ne,ie,pe)}s(D,"_addNavigationSpans");function M(ne,ie,pe,Ee,Be,it){const Ce=it?ie[it]:ie[`${pe}End`],Me=ie[`${pe}Start`];!Me||!Ce||r.startAndEndSpan(ne,Ee+r.msToSec(Me),Ee+r.msToSec(Ce),{op:"browser",name:Be||pe,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}s(M,"_addPerformanceNavigationTiming");function R(ne,ie,pe){ie.responseEnd&&(r.startAndEndSpan(ne,pe+r.msToSec(ie.requestStart),pe+r.msToSec(ie.responseEnd),{op:"browser",name:"request",attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),r.startAndEndSpan(ne,pe+r.msToSec(ie.responseStart),pe+r.msToSec(ie.responseEnd),{op:"browser",name:"response",attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}s(R,"_addRequest");function F(ne,ie,pe,Ee,Be,it){if(ie.initiatorType==="xmlhttprequest"||ie.initiatorType==="fetch")return;const Ce=h.parseUrl(pe),Me={[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};X(Me,ie,"transferSize","http.response_transfer_size"),X(Me,ie,"encodedBodySize","http.response_content_length"),X(Me,ie,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in ie&&(Me["resource.render_blocking_status"]=ie.renderBlockingStatus),Ce.protocol&&(Me["url.scheme"]=Ce.protocol.split(":").pop()),Ce.host&&(Me["server.address"]=Ce.host),Me["url.same_origin"]=pe.includes(a.WINDOW.location.origin);const je=it+Ee,We=je+Be;r.startAndEndSpan(ne,je,We,{name:pe.replace(a.WINDOW.location.origin,""),op:ie.initiatorType?`resource.${ie.initiatorType}`:"resource.other",attributes:Me})}s(F,"_addResourceSpans");function V(ne){const ie=a.WINDOW.navigator;if(!ie)return;const pe=ie.connection;pe&&(pe.effectiveType&&ne.setAttribute("effectiveConnectionType",pe.effectiveType),pe.type&&ne.setAttribute("connectionType",pe.type),r.isMeasurementValue(pe.rtt)&&(o["connection.rtt"]={value:pe.rtt,unit:"millisecond"})),r.isMeasurementValue(ie.deviceMemory)&&ne.setAttribute("deviceMemory",`${ie.deviceMemory} GB`),r.isMeasurementValue(ie.hardwareConcurrency)&&ne.setAttribute("hardwareConcurrency",String(ie.hardwareConcurrency))}s(V,"_trackNavigator");function $(ne){f&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding LCP Data"),f.element&&ne.setAttribute("lcp.element",h.htmlTreeAsString(f.element)),f.id&&ne.setAttribute("lcp.id",f.id),f.url&&ne.setAttribute("lcp.url",f.url.trim().slice(0,200)),ne.setAttribute("lcp.size",f.size)),g&&g.sources&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding CLS Data"),g.sources.forEach((ie,pe)=>ne.setAttribute(`cls.source.${pe+1}`,h.htmlTreeAsString(ie.node))))}s($,"_tagMetricInfo");function X(ne,ie,pe,Ee){const Be=ie[pe];Be!=null&&Be<t&&(ne[Ee]=Be)}s(X,"setResourceEntrySizeData");function Y(ne){const ie=n.getNavigationEntry();if(!ie)return;const{responseStart:pe,requestStart:Ee}=ie;Ee<=pe&&(m.DEBUG_BUILD&&h.logger.log("[Measurements] Adding TTFB Request Time"),ne["ttfb.requestTime"]={value:pe-Ee,unit:"millisecond"})}s(Y,"_addTtfbRequestTimeToMeasurements"),l._addMeasureSpans=O,l._addResourceSpans=F,l.addPerformanceEntries=A,l.startTrackingInteractions=v,l.startTrackingLongTasks=u,l.startTrackingWebVitals=S},5368312762:(x,l,d)=>{var{_optionalChain:c}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const h=d(8482989710),m=d(7563271614),p=d(1514424064),a=d(2929564606);function r(){if(a.getBrowserPerformanceAPI()&&m.browserPerformanceTimeOrigin){const i=e();return()=>{i()}}return()=>{}}s(r,"startTrackingINP");const n={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function e(){return p.addInpInstrumentationHandler(({metric:t})=>{const i=h.getClient();if(!i||t.value==null)return;const o=t.entries.find($=>$.duration===t.value&&n[$.name]);if(!o)return;const f=n[o.name],g=i.getOptions(),S=a.msToSec(m.browserPerformanceTimeOrigin+o.startTime),u=a.msToSec(t.value),v=h.getCurrentScope(),y=h.getActiveSpan(),_=y?h.getRootSpan(y):void 0,C=_?h.spanToJSON(_).description:void 0,T=v.getUser(),A=i.getIntegrationByName("Replay"),O=A&&A.getReplayId(),D=T!==void 0?T.email||T.id||T.ip_address:void 0,M=c([v,"access",$=>$.getScopeData,"call",$=>$(),"access",$=>$.contexts,"optionalAccess",$=>$.profile,"optionalAccess",$=>$.profile_id]),R=m.htmlTreeAsString(o.target),F=m.dropUndefinedKeys({release:g.release,environment:g.environment,transaction:C,[h.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.value,user:D||void 0,profile_id:M||void 0,replay_id:O||void 0}),V=h.startInactiveSpan({name:R,op:`ui.interaction.${f}`,attributes:F,startTime:S,experimental:{standalone:!0}});V.addEvent("inp",{[h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t.value}),V.end(S+u)})}s(e,"_trackINP"),l.startTrackingINP=r},1514424064:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(7492298763),m=d(8724048708),p=d(5639023535),a=d(2086611485),r=d(5927711655),n=d(9526061972),e=d(1514170081),t={},i={};let o,f,g,S,u;function v(ie,pe=!1){return $("cls",ie,D,o,pe)}s(v,"addClsInstrumentationHandler");function y(ie,pe=!1){return $("lcp",ie,R,g,pe)}s(y,"addLcpInstrumentationHandler");function _(ie){return $("fid",ie,M,f)}s(_,"addFidInstrumentationHandler");function C(ie){return $("ttfb",ie,F,S)}s(C,"addTtfbInstrumentationHandler");function T(ie){return $("inp",ie,V,u)}s(T,"addInpInstrumentationHandler");function A(ie,pe){return Y(ie,pe),i[ie]||(X(ie),i[ie]=!0),ne(ie,pe)}s(A,"addPerformanceInstrumentationHandler");function O(ie,pe){const Ee=t[ie];if(!(!Ee||!Ee.length))for(const Be of Ee)try{Be(pe)}catch(it){h.DEBUG_BUILD&&c.logger.error(`Error while triggering instrumentation handler.
Type: ${ie}
Name: ${c.getFunctionName(Be)}
Error:`,it)}}s(O,"triggerHandlers");function D(){return m.onCLS(ie=>{O("cls",{metric:ie}),o=ie},{reportAllChanges:!0})}s(D,"instrumentCls");function M(){return p.onFID(ie=>{O("fid",{metric:ie}),f=ie})}s(M,"instrumentFid");function R(){return r.onLCP(ie=>{O("lcp",{metric:ie}),g=ie})}s(R,"instrumentLcp");function F(){return e.onTTFB(ie=>{O("ttfb",{metric:ie}),S=ie})}s(F,"instrumentTtfb");function V(){return a.onINP(ie=>{O("inp",{metric:ie}),u=ie})}s(V,"instrumentInp");function $(ie,pe,Ee,Be,it=!1){Y(ie,pe);let Ce;return i[ie]||(Ce=Ee(),i[ie]=!0),Be&&pe({metric:Be}),ne(ie,pe,it?Ce:void 0)}s($,"addMetricObserver");function X(ie){const pe={};ie==="event"&&(pe.durationThreshold=0),n.observe(ie,Ee=>{O(ie,{entries:Ee})},pe)}s(X,"instrumentPerformanceObserver");function Y(ie,pe){t[ie]=t[ie]||[],t[ie].push(pe)}s(Y,"addHandler");function ne(ie,pe,Ee){return()=>{Ee&&Ee();const Be=t[ie];if(!Be)return;const it=Be.indexOf(pe);it!==-1&&Be.splice(it,1)}}s(ne,"getCleanupCallback"),l.addClsInstrumentationHandler=v,l.addFidInstrumentationHandler=_,l.addInpInstrumentationHandler=T,l.addLcpInstrumentationHandler=y,l.addPerformanceInstrumentationHandler=A,l.addTtfbInstrumentationHandler=C},6496036490:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const h=d(7563271614).GLOBAL_OBJ;l.WINDOW=h},2929564606:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(6496036490);function m(n){return typeof n=="number"&&isFinite(n)}s(m,"isMeasurementValue");function p(n,e,t,{...i}){const o=c.spanToJSON(n).start_timestamp;return o&&o>e&&typeof n.updateStartTime=="function"&&n.updateStartTime(e),c.withActiveSpan(n,()=>{const f=c.startInactiveSpan({startTime:e,...i});return f&&f.end(t),f})}s(p,"startAndEndSpan");function a(){return h.WINDOW&&h.WINDOW.addEventListener&&h.WINDOW.performance}s(a,"getBrowserPerformanceAPI");function r(n){return n/1e3}s(r,"msToSec"),l.getBrowserPerformanceAPI=a,l.isMeasurementValue=m,l.msToSec=r,l.startAndEndSpan=p},8724048708:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9035861842),h=d(4479988250),m=d(9526061972),p=d(7603883117),a=d(7841494492),r=d(2741739498),n=[.1,.25],e=s((t,i={})=>{r.onFCP(a.runOnce(()=>{const o=h.initMetric("CLS",0);let f,g=0,S=[];const u=s(y=>{y.forEach(_=>{if(!_.hadRecentInput){const C=S[0],T=S[S.length-1];g&&_.startTime-T.startTime<1e3&&_.startTime-C.startTime<5e3?(g+=_.value,S.push(_)):(g=_.value,S=[_])}}),g>o.value&&(o.value=g,o.entries=S,f())},"handleEntries"),v=m.observe("layout-shift",u);v&&(f=c.bindReporter(t,o,n,i.reportAllChanges),p.onHidden(()=>{u(v.takeRecords()),f(!0)}),setTimeout(f,0))}))},"onCLS");l.CLSThresholds=n,l.onCLS=e},5639023535:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9035861842),h=d(8451898068),m=d(4479988250),p=d(9526061972),a=d(7603883117),r=d(7841494492),n=d(3420582863),e=[100,300],t=s((i,o={})=>{n.whenActivated(()=>{const f=h.getVisibilityWatcher(),g=m.initMetric("FID");let S;const u=s(_=>{_.startTime<f.firstHiddenTime&&(g.value=_.processingStart-_.startTime,g.entries.push(_),S(!0))},"handleEntry"),v=s(_=>{_.forEach(u)},"handleEntries"),y=p.observe("first-input",v);S=c.bindReporter(i,g,e,o.reportAllChanges),y&&a.onHidden(r.runOnce(()=>{v(y.takeRecords()),y.disconnect()}))})},"onFID");l.FIDThresholds=e,l.onFID=t},2086611485:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=d(9035861842),m=d(4479988250),p=d(9526061972),a=d(7603883117),r=d(6842089089),n=d(3420582863),e=[200,500],t=0,i=s(()=>r.getInteractionCount()-t,"getInteractionCountForNavigation"),o=10,f=[],g={},S=s(y=>{const _=f[f.length-1],C=g[y.interactionId];if(C||f.length<o||y.duration>_.latency){if(C)C.entries.push(y),C.latency=Math.max(C.latency,y.duration);else{const T={id:y.interactionId,latency:y.duration,entries:[y]};g[T.id]=T,f.push(T)}f.sort((T,A)=>A.latency-T.latency),f.splice(o).forEach(T=>{delete g[T.id]})}},"processEntry"),u=s(()=>{const y=Math.min(f.length-1,Math.floor(i()/50));return f[y]},"estimateP98LongestInteraction"),v=s((y,_={})=>{n.whenActivated(()=>{r.initInteractionCountPolyfill();const C=m.initMetric("INP");let T;const A=s(D=>{D.forEach(R=>{R.interactionId&&S(R),R.entryType==="first-input"&&!f.some(V=>V.entries.some($=>R.duration===$.duration&&R.startTime===$.startTime))&&S(R)});const M=u();M&&M.latency!==C.value&&(C.value=M.latency,C.entries=M.entries,T())},"handleEntries"),O=p.observe("event",A,{durationThreshold:_.durationThreshold!=null?_.durationThreshold:40});T=h.bindReporter(y,C,e,_.reportAllChanges),O&&("PerformanceEventTiming"in c.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&O.observe({type:"first-input",buffered:!0}),a.onHidden(()=>{A(O.takeRecords()),C.value<0&&i()>0&&(C.value=0,C.entries=[]),T(!0)}))})},"onINP");l.INPThresholds=e,l.onINP=v},5927711655:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=d(9035861842),m=d(2520992508),p=d(8451898068),a=d(4479988250),r=d(9526061972),n=d(7603883117),e=d(7841494492),t=d(3420582863),i=[2500,4e3],o={},f=s((g,S={})=>{t.whenActivated(()=>{const u=p.getVisibilityWatcher(),v=a.initMetric("LCP");let y;const _=s(T=>{const A=T[T.length-1];A&&A.startTime<u.firstHiddenTime&&(v.value=Math.max(A.startTime-m.getActivationStart(),0),v.entries=[A],y())},"handleEntries"),C=r.observe("largest-contentful-paint",_);if(C){y=h.bindReporter(g,v,i,S.reportAllChanges);const T=e.runOnce(()=>{o[v.id]||(_(C.takeRecords()),C.disconnect(),o[v.id]=!0,y(!0))});["keydown","click"].forEach(A=>{c.WINDOW.document&&addEventListener(A,()=>setTimeout(T,0),!0)}),n.onHidden(T)}})},"onLCP");l.LCPThresholds=i,l.onLCP=f},9035861842:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=s((h,m)=>h>m[1]?"poor":h>m[0]?"needs-improvement":"good","getRating"),c=s((h,m,p,a)=>{let r,n;return e=>{m.value>=0&&(e||a)&&(n=m.value-(r||0),(n||r===void 0)&&(r=m.value,m.delta=n,m.rating=d(m.value,p),h(m)))}},"bindReporter");l.bindReporter=c},8117347597:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=s(()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,"generateUniqueID");l.generateUniqueID=d},2520992508:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(2273798110),h=s(()=>{const m=c.getNavigationEntry();return m&&m.activationStart||0},"getActivationStart");l.getActivationStart=h},2273798110:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=s(()=>c.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],"getNavigationEntry");l.getNavigationEntry=h},8451898068:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490);let h=-1;const m=s(()=>{h=c.WINDOW.document.visibilityState==="hidden"&&!c.WINDOW.document.prerendering?0:1/0},"initHiddenTime"),p=s(n=>{c.WINDOW.document.visibilityState==="hidden"&&h>-1&&(h=n.type==="visibilitychange"?n.timeStamp:0,removeEventListener("visibilitychange",p,!0),removeEventListener("prerenderingchange",p,!0))},"onVisibilityUpdate"),a=s(()=>{addEventListener("visibilitychange",p,!0),addEventListener("prerenderingchange",p,!0)},"addChangeListeners"),r=s(()=>(c.WINDOW.document&&h<0&&(m(),a()),{get firstHiddenTime(){return h}}),"getVisibilityWatcher");l.getVisibilityWatcher=r},4479988250:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=d(8117347597),m=d(2520992508),p=d(2273798110),a=s((r,n)=>{const e=p.getNavigationEntry();let t="navigate";return e&&(c.WINDOW.document&&c.WINDOW.document.prerendering||m.getActivationStart()>0?t="prerender":c.WINDOW.document&&c.WINDOW.document.wasDiscarded?t="restore":e.type&&(t=e.type.replace(/_/g,"-"))),{name:r,value:typeof n>"u"?-1:n,rating:"good",delta:0,entries:[],id:h.generateUniqueID(),navigationType:t}},"initMetric");l.initMetric=a},9526061972:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=s((c,h,m)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(c)){const p=new PerformanceObserver(a=>{Promise.resolve().then(()=>{h(a.getEntries())})});return p.observe(Object.assign({type:c,buffered:!0},m||{})),p}}catch{}},"observe");l.observe=d},7603883117:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=s(m=>{const p=s(a=>{(a.type==="pagehide"||c.WINDOW.document&&c.WINDOW.document.visibilityState==="hidden")&&m(a)},"onHiddenOrPageHide");c.WINDOW.document&&(addEventListener("visibilitychange",p,!0),addEventListener("pagehide",p,!0))},"onHidden");l.onHidden=h},6842089089:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9526061972);let h=0,m=1/0,p=0;const a=s(t=>{t.forEach(i=>{i.interactionId&&(m=Math.min(m,i.interactionId),p=Math.max(p,i.interactionId),h=p?(p-m)/7+1:0)})},"updateEstimate");let r;const n=s(()=>r?h:performance.interactionCount||0,"getInteractionCount"),e=s(()=>{"interactionCount"in performance||r||(r=c.observe("event",a,{type:"event",buffered:!0,durationThreshold:0}))},"initInteractionCountPolyfill");l.getInteractionCount=n,l.initInteractionCountPolyfill=e},7841494492:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=s(c=>{let h=!1;return m=>{h||(c(m),h=!0)}},"runOnce");l.runOnce=d},3420582863:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=s(m=>{c.WINDOW.document&&c.WINDOW.document.prerendering?addEventListener("prerenderingchange",()=>m(),!0):m()},"whenActivated");l.whenActivated=h},2741739498:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9035861842),h=d(2520992508),m=d(8451898068),p=d(4479988250),a=d(9526061972),r=d(3420582863),n=[1800,3e3],e=s((t,i={})=>{r.whenActivated(()=>{const o=m.getVisibilityWatcher(),f=p.initMetric("FCP");let g;const S=s(v=>{v.forEach(y=>{y.name==="first-contentful-paint"&&(u.disconnect(),y.startTime<o.firstHiddenTime&&(f.value=Math.max(y.startTime-h.getActivationStart(),0),f.entries.push(y),g(!0)))})},"handleEntries"),u=a.observe("paint",S);u&&(g=c.bindReporter(t,f,n,i.reportAllChanges))})},"onFCP");l.FCPThresholds=n,l.onFCP=e},1514170081:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6496036490),h=d(9035861842),m=d(2520992508),p=d(2273798110),a=d(4479988250),r=d(3420582863),n=[800,1800],e=s(i=>{c.WINDOW.document&&c.WINDOW.document.prerendering?r.whenActivated(()=>e(i)):c.WINDOW.document&&c.WINDOW.document.readyState!=="complete"?addEventListener("load",()=>e(i),!0):setTimeout(i,0)},"whenReady"),t=s((i,o={})=>{const f=a.initMetric("TTFB"),g=h.bindReporter(i,f,n,o.reportAllChanges);e(()=>{const S=p.getNavigationEntry();if(S){const u=S.responseStart;if(u<=0||u>performance.now())return;f.value=Math.max(u-m.getActivationStart(),0),f.entries=[S],g(!0)}})},"onTTFB");l.TTFBThresholds=n,l.onTTFB=t},6049995776:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=h.GLOBAL_OBJ,p=m.document,a=m.navigator,r="Report a Bug",n="Cancel",e="Send Bug Report",t="Confirm",i="Report a Bug",o="your.email@example.org",f="Email",g="What's the bug? What did you expect?",S="Description",u="Your Name",v="Name",y="Thank you for your report!",_="(required)",C="Add a screenshot",T="Remove screenshot",A="widget",O="api",D=5e3,M=s((le,ve={includeReplay:!0})=>{if(!le.message)throw new Error("Unable to submit feedback with empty message");const Oe=c.getClient();if(!Oe)throw new Error("No client setup, cannot send feedback.");const qe=c.captureFeedback({source:O,url:h.getLocationHref(),...le},ve);return new Promise((dt,ct)=>{const Bt=setTimeout(()=>ct("Unable to determine if Feedback was correctly sent."),5e3);Oe.on("afterSendEvent",(en,nn)=>{if(en.event_id===qe){if(clearTimeout(Bt),nn&&typeof nn.statusCode=="number"&&(nn.statusCode<200||nn.statusCode>=300))return nn.statusCode===0?ct("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):ct("Unable to send Feedback. Invalid response from server.");dt(qe)}})})},"sendFeedback"),R=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function F(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.userAgent)||!isSecureContext)}s(F,"isScreenshotSupported");function V(le,ve){return{...le,...ve,onFormOpen:()=>{ve.onFormOpen&&ve.onFormOpen(),le.onFormOpen&&le.onFormOpen()},onFormClose:()=>{ve.onFormClose&&ve.onFormClose(),le.onFormClose&&le.onFormClose()},onSubmitSuccess:Oe=>{ve.onSubmitSuccess&&ve.onSubmitSuccess(Oe),le.onSubmitSuccess&&le.onSubmitSuccess(Oe)},onSubmitError:Oe=>{ve.onSubmitError&&ve.onSubmitError(Oe),le.onSubmitError&&le.onSubmitError(Oe)},onFormSubmitted:()=>{ve.onFormSubmitted&&ve.onFormSubmitted(),le.onFormSubmitted&&le.onFormSubmitted()},themeDark:{...le.themeDark,...ve.themeDark},themeLight:{...le.themeLight,...ve.themeLight}}}s(V,"mergeOptions");function $(){const le=p.createElement("style");return le.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,le}s($,"createActorStyles");function X(le,ve){return Object.entries(ve).forEach(([Oe,qe])=>{le.setAttributeNS(null,Oe,qe)}),le}s(X,"setAttributesNS");const Y=20,ne="http://www.w3.org/2000/svg";function ie(){const le=s(en=>m.document.createElementNS(ne,en),"createElementNS"),ve=X(le("svg"),{width:`${Y}`,height:`${Y}`,viewBox:`0 0 ${Y} ${Y}`,fill:"var(--foreground)"}),Oe=X(le("g"),{clipPath:"url(#clip0_57_80)"}),qe=X(le("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});ve.appendChild(Oe).appendChild(qe);const dt=le("defs"),ct=X(le("clipPath"),{id:"clip0_57_80"}),Bt=X(le("rect"),{width:`${Y}`,height:`${Y}`,fill:"white"});return ct.appendChild(Bt),dt.appendChild(ct),ve.appendChild(dt).appendChild(ct).appendChild(Bt),ve}s(ie,"FeedbackIcon");function pe({triggerLabel:le,shadow:ve}){const Oe=p.createElement("button");if(Oe.type="button",Oe.className="widget__actor",Oe.ariaHidden="false",Oe.ariaLabel=le,Oe.appendChild(ie()),le){const dt=p.createElement("span");dt.appendChild(p.createTextNode(le)),Oe.appendChild(dt)}const qe=$();return{el:Oe,appendToDom(){ve.appendChild(qe),ve.appendChild(Oe)},removeFromDom(){ve.removeChild(Oe),ve.removeChild(qe)},show(){Oe.ariaHidden="false"},hide(){Oe.ariaHidden="true"}}}s(pe,"Actor");const Ee="rgba(88, 74, 192, 1)",Be={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Ee,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},it={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Ee,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(41, 35, 47, 0.5)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Ce(le){return`
  --foreground: ${le.foreground};
  --background: ${le.background};
  --accent-foreground: ${le.accentForeground};
  --accent-background: ${le.accentBackground};
  --success-color: ${le.successColor};
  --error-color: ${le.errorColor};
  --border: ${le.border};
  --box-shadow: ${le.boxShadow};
  --outline: ${le.outline};
  --interactive-filter: ${le.interactiveFilter};
  `}s(Ce,"getThemedCssVariables");function Me({colorScheme:le,themeDark:ve,themeLight:Oe}){const qe=p.createElement("style");return qe.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${Ce(le==="dark"?{...it,...ve}:{...Be,...Oe})}
}

${le==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Ce({...it,...ve})}
  }
}`:""}
}
`,qe}s(Me,"createMainStyles");const je=s(({lazyLoadIntegration:le,getModalIntegration:ve,getScreenshotIntegration:Oe})=>s(({id:dt="sentry-feedback",showBranding:ct=!0,autoInject:Bt=!0,showEmail:en=!0,showName:nn=!0,enableScreenshot:Ut=!0,useSentryUser:Nn={email:"email",name:"username"},isNameRequired:bt=!1,isEmailRequired:Wn=!1,colorScheme:fn="system",themeLight:ii={},themeDark:Ui={},addScreenshotButtonLabel:pi=C,cancelButtonLabel:cn=n,confirmButtonLabel:En=t,emailLabel:Un=f,emailPlaceholder:Yn=o,formTitle:Vi=i,isRequiredLabel:qi=_,messageLabel:Bn=S,messagePlaceholder:gr=g,nameLabel:mi=v,namePlaceholder:Ki=u,removeScreenshotButtonLabel:Ur=T,submitButtonLabel:Yr=e,successMessageText:oo=y,triggerLabel:so=r,onFormOpen:Pr,onFormClose:Vr,onSubmitSuccess:er,onSubmitError:Or,onFormSubmitted:Hr}={})=>{const Hi={id:dt,autoInject:Bt,showBranding:ct,isEmailRequired:Wn,isNameRequired:bt,showEmail:en,showName:nn,enableScreenshot:Ut,useSentryUser:Nn,colorScheme:fn,themeDark:Ui,themeLight:ii,triggerLabel:so,cancelButtonLabel:cn,submitButtonLabel:Yr,confirmButtonLabel:En,formTitle:Vi,emailLabel:Un,emailPlaceholder:Yn,messageLabel:Bn,messagePlaceholder:gr,nameLabel:mi,namePlaceholder:Ki,successMessageText:oo,isRequiredLabel:qi,addScreenshotButtonLabel:pi,removeScreenshotButtonLabel:Ur,onFormClose:Vr,onFormOpen:Pr,onSubmitError:Or,onSubmitSuccess:er,onFormSubmitted:Hr};let yr=null,Xr=[];const Ai=s(Ci=>{if(!yr){const Ji=p.createElement("div");Ji.id=String(Ci.id),p.body.appendChild(Ji),yr=Ji.attachShadow({mode:"open"}),yr.appendChild(Me(Ci))}return yr},"_createShadow"),Eo=s(async(Ci,Ji,Xi)=>{const dr=c.getClient(),tr=dr&&dr.getIntegrationByName(Ci);if(tr)return tr;const Wr=(Ji&&Ji()||await le(Xi))();return dr&&dr.addIntegration(Wr),Wr},"_findIntegration"),Go=s(async Ci=>{const Ji=Ci.enableScreenshot&&F(),[Xi,dr]=await Promise.all([Eo("FeedbackModal",ve,"feedbackModalIntegration"),Ji?Eo("FeedbackScreenshot",Oe,"feedbackScreenshotIntegration"):void 0]);if(!Xi)throw R&&h.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");return Ji&&!dr&&R&&h.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),Xi.createDialog({options:Ci,screenshotIntegration:Ji?dr:void 0,sendFeedback:M,shadow:Ai(Ci)})},"_loadAndRenderDialog"),jo=s((Ci,Ji={})=>{const Xi=V(Hi,Ji),dr=typeof Ci=="string"?p.querySelector(Ci):typeof Ci.addEventListener=="function"?Ci:null;if(!dr)throw R&&h.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let tr=null;const ao=s(async()=>{tr||(tr=await Go({...Xi,onFormClose:()=>{tr&&tr.close(),Xi.onFormClose&&Xi.onFormClose()},onFormSubmitted:()=>{tr&&tr.removeFromDom(),Xi.onFormSubmitted&&Xi.onFormSubmitted()}})),tr.appendToDom(),tr.open()},"handleClick");dr.addEventListener("click",ao);const Wr=s(()=>{Xr=Xr.filter(Ar=>Ar!==Wr),tr&&tr.removeFromDom(),tr=null,dr.removeEventListener("click",ao)},"unsubscribe");return Xr.push(Wr),Wr},"_attachTo"),bo=s((Ci={})=>{const Ji=Ai(Hi),Xi=pe({triggerLabel:Hi.triggerLabel,shadow:Ji}),dr=V(Hi,{...Ci,onFormOpen(){Xi.hide()},onFormClose(){Xi.show()},onFormSubmitted(){Xi.show()}});return jo(Xi.el,dr),Xi},"_createActor");return{name:"Feedback",setupOnce(){!h.isBrowser()||!Hi.autoInject||bo().appendToDom()},attachTo:jo,createWidget(Ci={}){const Ji=bo(V(Hi,Ci));return Ji.appendToDom(),Ji},async createForm(Ci={}){return Go(V(Hi,Ci))},remove(){yr&&(yr.parentElement&&yr.parentElement.remove(),yr=null),Xr.forEach(Ci=>Ci()),Xr=[]}}},"feedbackIntegration"),"buildFeedbackIntegration");function We(){const le=c.getClient();return le&&le.getIntegrationByName("Feedback")}s(We,"getFeedback");var Ze,ft,vt,De,Pe,Ke,Ye,xe={},Ct=[],At=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Lt=Array.isArray;function Ft(le,ve){for(var Oe in ve)le[Oe]=ve[Oe];return le}s(Ft,"v$1");function Jt(le){var ve=le.parentNode;ve&&ve.removeChild(le)}s(Jt,"p$1");function It(le,ve,Oe){var qe,dt,ct,Bt={};for(ct in ve)ct=="key"?qe=ve[ct]:ct=="ref"?dt=ve[ct]:Bt[ct]=ve[ct];if(arguments.length>2&&(Bt.children=arguments.length>3?Ze.call(arguments,2):Oe),typeof le=="function"&&le.defaultProps!=null)for(ct in le.defaultProps)Bt[ct]===void 0&&(Bt[ct]=le.defaultProps[ct]);return ln(le,Bt,qe,dt,null)}s(It,"y$1");function ln(le,ve,Oe,qe,dt){var ct={type:le,props:ve,key:Oe,ref:qe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:dt??++vt,__i:-1,__u:0};return dt==null&&ft.vnode!=null&&ft.vnode(ct),ct}s(ln,"d$1");function $n(le){return le.children}s($n,"g");function yn(le,ve){this.props=le,this.context=ve}s(yn,"b");function zt(le,ve){if(ve==null)return le.__?zt(le.__,le.__i+1):null;for(var Oe;ve<le.__k.length;ve++)if((Oe=le.__k[ve])!=null&&Oe.__e!=null)return Oe.__e;return typeof le.type=="function"?zt(le):null}s(zt,"m$1");function Yt(le,ve,Oe){var qe,dt=le.__v,ct=dt.__e,Bt=le.__P;if(Bt)return(qe=Ft({},dt)).__v=dt.__v+1,ft.vnode&&ft.vnode(qe),ae(Bt,qe,dt,le.__n,Bt.ownerSVGElement!==void 0,32&dt.__u?[ct]:null,ve,ct??zt(dt),!!(32&dt.__u),Oe),qe.__.__k[qe.__i]=qe,qe.__d=void 0,qe.__e!=ct&&Mt(qe),qe}s(Yt,"w$1");function Mt(le){var ve,Oe;if((le=le.__)!=null&&le.__c!=null){for(le.__e=le.__c.base=null,ve=0;ve<le.__k.length;ve++)if((Oe=le.__k[ve])!=null&&Oe.__e!=null){le.__e=le.__c.base=Oe.__e;break}return Mt(le)}}s(Mt,"k$1");function Vt(le){(!le.__d&&(le.__d=!0)&&De.push(le)&&!$t.__r++||Pe!==ft.debounceRendering)&&((Pe=ft.debounceRendering)||Ke)($t)}s(Vt,"x$1");function $t(){var le,ve,Oe,qe=[],dt=[];for(De.sort(Ye);le=De.shift();)le.__d&&(Oe=De.length,ve=Yt(le,qe,dt)||ve,Oe===0||De.length>Oe?(Le(qe,ve,dt),dt.length=qe.length=0,ve=void 0,De.sort(Ye)):ve&&ft.__c&&ft.__c(ve,Ct));ve&&Le(qe,ve,dt),$t.__r=0}s($t,"C$1");function xt(le,ve,Oe,qe,dt,ct,Bt,en,nn,Ut,Nn){var bt,Wn,fn,ii,Ui,pi=qe&&qe.__k||Ct,cn=ve.length;for(Oe.__d=nn,jt(Oe,ve,pi),nn=Oe.__d,bt=0;bt<cn;bt++)(fn=Oe.__k[bt])!=null&&typeof fn!="boolean"&&typeof fn!="function"&&(Wn=fn.__i===-1?xe:pi[fn.__i]||xe,fn.__i=bt,ae(le,fn,Wn,dt,ct,Bt,en,nn,Ut,Nn),ii=fn.__e,fn.ref&&Wn.ref!=fn.ref&&(Wn.ref&&Z(Wn.ref,null,fn),Nn.push(fn.ref,fn.__c||ii,fn)),Ui==null&&ii!=null&&(Ui=ii),65536&fn.__u||Wn.__k===fn.__k?nn=J(fn,nn,le):typeof fn.type=="function"&&fn.__d!==void 0?nn=fn.__d:ii&&(nn=ii.nextSibling),fn.__d=void 0,fn.__u&=-196609);Oe.__d=nn,Oe.__e=Ui}s(xt,"P");function jt(le,ve,Oe){var qe,dt,ct,Bt,en,nn=ve.length,Ut=Oe.length,Nn=Ut,bt=0;for(le.__k=[],qe=0;qe<nn;qe++)(dt=le.__k[qe]=(dt=ve[qe])==null||typeof dt=="boolean"||typeof dt=="function"?null:typeof dt=="string"||typeof dt=="number"||typeof dt=="bigint"||dt.constructor==String?ln(null,dt,null,null,dt):Lt(dt)?ln($n,{children:dt},null,null,null):dt.constructor===void 0&&dt.__b>0?ln(dt.type,dt.props,dt.key,dt.ref?dt.ref:null,dt.__v):dt)!=null?(dt.__=le,dt.__b=le.__b+1,en=Fe(dt,Oe,Bt=qe+bt,Nn),dt.__i=en,ct=null,en!==-1&&(Nn--,(ct=Oe[en])&&(ct.__u|=131072)),ct==null||ct.__v===null?(en==-1&&bt--,typeof dt.type!="function"&&(dt.__u|=65536)):en!==Bt&&(en===Bt+1?bt++:en>Bt?Nn>nn-Bt?bt+=en-Bt:bt--:bt=en<Bt&&en==Bt-1?en-Bt:0,en!==qe+bt&&(dt.__u|=65536))):(ct=Oe[qe])&&ct.key==null&&ct.__e&&(ct.__e==le.__d&&(le.__d=zt(ct)),me(ct,ct,!1),Oe[qe]=null,Nn--);if(Nn)for(qe=0;qe<Ut;qe++)(ct=Oe[qe])!=null&&!(131072&ct.__u)&&(ct.__e==le.__d&&(le.__d=zt(ct)),me(ct,ct))}s(jt,"S");function J(le,ve,Oe){var qe,dt;if(typeof le.type=="function"){for(qe=le.__k,dt=0;qe&&dt<qe.length;dt++)qe[dt]&&(qe[dt].__=le,ve=J(qe[dt],ve,Oe));return ve}le.__e!=ve&&(Oe.insertBefore(le.__e,ve||null),ve=le.__e);do ve=ve&&ve.nextSibling;while(ve!=null&&ve.nodeType===8);return ve}s(J,"$");function Fe(le,ve,Oe,qe){var dt=le.key,ct=le.type,Bt=Oe-1,en=Oe+1,nn=ve[Oe];if(nn===null||nn&&dt==nn.key&&ct===nn.type)return Oe;if(qe>(nn!=null&&!(131072&nn.__u)?1:0))for(;Bt>=0||en<ve.length;){if(Bt>=0){if((nn=ve[Bt])&&!(131072&nn.__u)&&dt==nn.key&&ct===nn.type)return Bt;Bt--}if(en<ve.length){if((nn=ve[en])&&!(131072&nn.__u)&&dt==nn.key&&ct===nn.type)return en;en++}}return-1}s(Fe,"I");function ke(le,ve,Oe){ve[0]==="-"?le.setProperty(ve,Oe??""):le[ve]=Oe==null?"":typeof Oe!="number"||At.test(ve)?Oe:Oe+"px"}s(ke,"T");function Ge(le,ve,Oe,qe,dt){var ct;e:if(ve==="style")if(typeof Oe=="string")le.style.cssText=Oe;else{if(typeof qe=="string"&&(le.style.cssText=qe=""),qe)for(ve in qe)Oe&&ve in Oe||ke(le.style,ve,"");if(Oe)for(ve in Oe)qe&&Oe[ve]===qe[ve]||ke(le.style,ve,Oe[ve])}else if(ve[0]==="o"&&ve[1]==="n")ct=ve!==(ve=ve.replace(/(PointerCapture)$|Capture$/i,"$1")),ve=ve.toLowerCase()in le?ve.toLowerCase().slice(2):ve.slice(2),le.l||(le.l={}),le.l[ve+ct]=Oe,Oe?qe?Oe.u=qe.u:(Oe.u=Date.now(),le.addEventListener(ve,ct?at:gt,ct)):le.removeEventListener(ve,ct?at:gt,ct);else{if(dt)ve=ve.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(ve!=="width"&&ve!=="height"&&ve!=="href"&&ve!=="list"&&ve!=="form"&&ve!=="tabIndex"&&ve!=="download"&&ve!=="rowSpan"&&ve!=="colSpan"&&ve!=="role"&&ve in le)try{le[ve]=Oe??"";break e}catch{}typeof Oe=="function"||(Oe==null||Oe===!1&&ve[4]!=="-"?le.removeAttribute(ve):le.setAttribute(ve,Oe))}}s(Ge,"A");function gt(le){if(this.l){var ve=this.l[le.type+!1];if(le.t){if(le.t<=ve.u)return}else le.t=Date.now();return ve(ft.event?ft.event(le):le)}}s(gt,"D$1");function at(le){if(this.l)return this.l[le.type+!0](ft.event?ft.event(le):le)}s(at,"L");function ae(le,ve,Oe,qe,dt,ct,Bt,en,nn,Ut){var Nn,bt,Wn,fn,ii,Ui,pi,cn,En,Un,Yn,Vi,qi,Bn,gr,mi=ve.type;if(ve.constructor!==void 0)return null;128&Oe.__u&&(nn=!!(32&Oe.__u),ct=[en=ve.__e=Oe.__e]),(Nn=ft.__b)&&Nn(ve);e:if(typeof mi=="function")try{if(cn=ve.props,En=(Nn=mi.contextType)&&qe[Nn.__c],Un=Nn?En?En.props.value:Nn.__:qe,Oe.__c?pi=(bt=ve.__c=Oe.__c).__=bt.__E:("prototype"in mi&&mi.prototype.render?ve.__c=bt=new mi(cn,Un):(ve.__c=bt=new yn(cn,Un),bt.constructor=mi,bt.render=ge),En&&En.sub(bt),bt.props=cn,bt.state||(bt.state={}),bt.context=Un,bt.__n=qe,Wn=bt.__d=!0,bt.__h=[],bt._sb=[]),bt.__s==null&&(bt.__s=bt.state),mi.getDerivedStateFromProps!=null&&(bt.__s==bt.state&&(bt.__s=Ft({},bt.__s)),Ft(bt.__s,mi.getDerivedStateFromProps(cn,bt.__s))),fn=bt.props,ii=bt.state,bt.__v=ve,Wn)mi.getDerivedStateFromProps==null&&bt.componentWillMount!=null&&bt.componentWillMount(),bt.componentDidMount!=null&&bt.__h.push(bt.componentDidMount);else{if(mi.getDerivedStateFromProps==null&&cn!==fn&&bt.componentWillReceiveProps!=null&&bt.componentWillReceiveProps(cn,Un),!bt.__e&&(bt.shouldComponentUpdate!=null&&bt.shouldComponentUpdate(cn,bt.__s,Un)===!1||ve.__v===Oe.__v)){for(ve.__v!==Oe.__v&&(bt.props=cn,bt.state=bt.__s,bt.__d=!1),ve.__e=Oe.__e,ve.__k=Oe.__k,ve.__k.forEach(function(Ki){Ki&&(Ki.__=ve)}),Yn=0;Yn<bt._sb.length;Yn++)bt.__h.push(bt._sb[Yn]);bt._sb=[],bt.__h.length&&Bt.push(bt);break e}bt.componentWillUpdate!=null&&bt.componentWillUpdate(cn,bt.__s,Un),bt.componentDidUpdate!=null&&bt.__h.push(function(){bt.componentDidUpdate(fn,ii,Ui)})}if(bt.context=Un,bt.props=cn,bt.__P=le,bt.__e=!1,Vi=ft.__r,qi=0,"prototype"in mi&&mi.prototype.render){for(bt.state=bt.__s,bt.__d=!1,Vi&&Vi(ve),Nn=bt.render(bt.props,bt.state,bt.context),Bn=0;Bn<bt._sb.length;Bn++)bt.__h.push(bt._sb[Bn]);bt._sb=[]}else do bt.__d=!1,Vi&&Vi(ve),Nn=bt.render(bt.props,bt.state,bt.context),bt.state=bt.__s;while(bt.__d&&++qi<25);bt.state=bt.__s,bt.getChildContext!=null&&(qe=Ft(Ft({},qe),bt.getChildContext())),Wn||bt.getSnapshotBeforeUpdate==null||(Ui=bt.getSnapshotBeforeUpdate(fn,ii)),xt(le,Lt(gr=Nn!=null&&Nn.type===$n&&Nn.key==null?Nn.props.children:Nn)?gr:[gr],ve,Oe,qe,dt,ct,Bt,en,nn,Ut),bt.base=ve.__e,ve.__u&=-161,bt.__h.length&&Bt.push(bt),pi&&(bt.__E=bt.__=null)}catch(Ki){ve.__v=null,nn||ct!=null?(ve.__e=en,ve.__u|=nn?160:32,ct[ct.indexOf(en)]=null):(ve.__e=Oe.__e,ve.__k=Oe.__k),ft.__e(Ki,ve,Oe)}else ct==null&&ve.__v===Oe.__v?(ve.__k=Oe.__k,ve.__e=Oe.__e):ve.__e=G(Oe.__e,ve,Oe,qe,dt,ct,Bt,nn,Ut);(Nn=ft.diffed)&&Nn(ve)}s(ae,"M");function Le(le,ve,Oe){for(var qe=0;qe<Oe.length;qe++)Z(Oe[qe],Oe[++qe],Oe[++qe]);ft.__c&&ft.__c(ve,le),le.some(function(dt){try{le=dt.__h,dt.__h=[],le.some(function(ct){ct.call(dt)})}catch(ct){ft.__e(ct,dt.__v)}})}s(Le,"j$1");function G(le,ve,Oe,qe,dt,ct,Bt,en,nn){var Ut,Nn,bt,Wn,fn,ii,Ui,pi=Oe.props,cn=ve.props,En=ve.type;if(En==="svg"&&(dt=!0),ct!=null){for(Ut=0;Ut<ct.length;Ut++)if((fn=ct[Ut])&&"setAttribute"in fn==!!En&&(En?fn.localName===En:fn.nodeType===3)){le=fn,ct[Ut]=null;break}}if(le==null){if(En===null)return document.createTextNode(cn);le=dt?document.createElementNS("http://www.w3.org/2000/svg",En):document.createElement(En,cn.is&&cn),ct=null,en=!1}if(En===null)pi===cn||en&&le.data===cn||(le.data=cn);else{if(ct=ct&&Ze.call(le.childNodes),pi=Oe.props||xe,!en&&ct!=null)for(pi={},Ut=0;Ut<le.attributes.length;Ut++)pi[(fn=le.attributes[Ut]).name]=fn.value;for(Ut in pi)fn=pi[Ut],Ut=="children"||(Ut=="dangerouslySetInnerHTML"?bt=fn:Ut==="key"||Ut in cn||Ge(le,Ut,null,fn,dt));for(Ut in cn)fn=cn[Ut],Ut=="children"?Wn=fn:Ut=="dangerouslySetInnerHTML"?Nn=fn:Ut=="value"?ii=fn:Ut=="checked"?Ui=fn:Ut==="key"||en&&typeof fn!="function"||pi[Ut]===fn||Ge(le,Ut,fn,pi[Ut],dt);if(Nn)en||bt&&(Nn.__html===bt.__html||Nn.__html===le.innerHTML)||(le.innerHTML=Nn.__html),ve.__k=[];else if(bt&&(le.innerHTML=""),xt(le,Lt(Wn)?Wn:[Wn],ve,Oe,qe,dt&&En!=="foreignObject",ct,Bt,ct?ct[0]:Oe.__k&&zt(Oe,0),en,nn),ct!=null)for(Ut=ct.length;Ut--;)ct[Ut]!=null&&Jt(ct[Ut]);en||(Ut="value",ii!==void 0&&(ii!==le[Ut]||En==="progress"&&!ii||En==="option"&&ii!==pi[Ut])&&Ge(le,Ut,ii,pi[Ut],!1),Ut="checked",Ui!==void 0&&Ui!==le[Ut]&&Ge(le,Ut,Ui,pi[Ut],!1))}return le}s(G,"z$1");function Z(le,ve,Oe){try{typeof le=="function"?le(ve):le.current=ve}catch(qe){ft.__e(qe,Oe)}}s(Z,"N");function me(le,ve,Oe){var qe,dt;if(ft.unmount&&ft.unmount(le),(qe=le.ref)&&(qe.current&&qe.current!==le.__e||Z(qe,null,ve)),(qe=le.__c)!=null){if(qe.componentWillUnmount)try{qe.componentWillUnmount()}catch(ct){ft.__e(ct,ve)}qe.base=qe.__P=null,le.__c=void 0}if(qe=le.__k)for(dt=0;dt<qe.length;dt++)qe[dt]&&me(qe[dt],ve,Oe||typeof le.type!="function");Oe||le.__e==null||Jt(le.__e),le.__=le.__e=le.__d=void 0}s(me,"O");function ge(le,ve,Oe){return this.constructor(le,Oe)}s(ge,"q$1");function rt(le,ve,Oe){var qe,dt,ct,Bt;ft.__&&ft.__(le,ve),dt=(qe=typeof Oe=="function")?null:Oe&&Oe.__k||ve.__k,ct=[],Bt=[],ae(ve,le=(!qe&&Oe||ve).__k=It($n,null,[le]),dt||xe,xe,ve.ownerSVGElement!==void 0,!qe&&Oe?[Oe]:dt?null:ve.firstChild?Ze.call(ve.childNodes):null,ct,!qe&&Oe?Oe:dt?dt.__e:ve.firstChild,qe,Bt),le.__d=void 0,Le(ct,le,Bt)}s(rt,"B$1"),Ze=Ct.slice,ft={__e:function(le,ve,Oe,qe){for(var dt,ct,Bt;ve=ve.__;)if((dt=ve.__c)&&!dt.__)try{if((ct=dt.constructor)&&ct.getDerivedStateFromError!=null&&(dt.setState(ct.getDerivedStateFromError(le)),Bt=dt.__d),dt.componentDidCatch!=null&&(dt.componentDidCatch(le,qe||{}),Bt=dt.__d),Bt)return dt.__E=dt}catch(en){le=en}throw le}},vt=0,yn.prototype.setState=function(le,ve){var Oe;Oe=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ft({},this.state),typeof le=="function"&&(le=le(Ft({},Oe),this.props)),le&&Ft(Oe,le),le!=null&&this.__v&&(ve&&this._sb.push(ve),Vt(this))},yn.prototype.forceUpdate=function(le){this.__v&&(this.__e=!0,le&&this.__h.push(le),Vt(this))},yn.prototype.render=$n,De=[],Ke=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ye=s(function(le,ve){return le.__v.__b-ve.__v.__b},"f$1"),$t.__r=0;var Ue,Xe,fe,Te,k=0,he=[],Se=[],be=ft,te=be.__b,Nt=be.__r,nt=be.diffed,mt=be.__c,pn=be.unmount,Pt=be.__;function Mi(le,ve){be.__h&&be.__h(Xe,le,k||ve),k=0;var Oe=Xe.__H||(Xe.__H={__:[],__h:[]});return le>=Oe.__.length&&Oe.__.push({__V:Se}),Oe.__[le]}s(Mi,"h");function ai(le){return k=1,un(Qn,le)}s(ai,"p");function un(le,ve,Oe){var qe=Mi(Ue++,2);if(qe.t=le,!qe.__c&&(qe.__=[Oe?Oe(ve):Qn(void 0,ve),function(en){var nn=qe.__N?qe.__N[0]:qe.__[0],Ut=qe.t(nn,en);nn!==Ut&&(qe.__N=[Ut,qe.__[1]],qe.__c.setState({}))}],qe.__c=Xe,!Xe.u)){var dt=s(function(en,nn,Ut){if(!qe.__c.__H)return!0;var Nn=qe.__c.__H.__.filter(function(Wn){return!!Wn.__c});if(Nn.every(function(Wn){return!Wn.__N}))return!ct||ct.call(this,en,nn,Ut);var bt=!1;return Nn.forEach(function(Wn){if(Wn.__N){var fn=Wn.__[0];Wn.__=Wn.__N,Wn.__N=void 0,fn!==Wn.__[0]&&(bt=!0)}}),!(!bt&&qe.__c.props===en)&&(!ct||ct.call(this,en,nn,Ut))},"f");Xe.u=!0;var ct=Xe.shouldComponentUpdate,Bt=Xe.componentWillUpdate;Xe.componentWillUpdate=function(en,nn,Ut){if(this.__e){var Nn=ct;ct=void 0,dt(en,nn,Ut),ct=Nn}Bt&&Bt.call(this,en,nn,Ut)},Xe.shouldComponentUpdate=dt}return qe.__N||qe.__}s(un,"y");function Hn(le,ve){var Oe=Mi(Ue++,3);!be.__s&&In(Oe.__H,ve)&&(Oe.__=le,Oe.i=ve,Xe.__H.__h.push(Oe))}s(Hn,"_");function mn(le){return k=5,li(function(){return{current:le}},[])}s(mn,"F");function li(le,ve){var Oe=Mi(Ue++,7);return In(Oe.__H,ve)?(Oe.__V=le(),Oe.i=ve,Oe.__h=le,Oe.__V):Oe.__}s(li,"q");function Kn(le,ve){return k=8,li(function(){return le},ve)}s(Kn,"x");function lr(){for(var le;le=he.shift();)if(le.__P&&le.__H)try{le.__H.__h.forEach(Tn),le.__H.__h.forEach(gn),le.__H.__h=[]}catch(ve){le.__H.__h=[],be.__e(ve,le.__v)}}s(lr,"j"),be.__b=function(le){Xe=null,te&&te(le)},be.__=function(le,ve){ve.__k&&ve.__k.__m&&(le.__m=ve.__k.__m),Pt&&Pt(le,ve)},be.__r=function(le){Nt&&Nt(le),Ue=0;var ve=(Xe=le.__c).__H;ve&&(fe===Xe?(ve.__h=[],Xe.__h=[],ve.__.forEach(function(Oe){Oe.__N&&(Oe.__=Oe.__N),Oe.__V=Se,Oe.__N=Oe.i=void 0})):(ve.__h.forEach(Tn),ve.__h.forEach(gn),ve.__h=[],Ue=0)),fe=Xe},be.diffed=function(le){nt&&nt(le);var ve=le.__c;ve&&ve.__H&&(ve.__H.__h.length&&(he.push(ve)!==1&&Te===be.requestAnimationFrame||((Te=be.requestAnimationFrame)||Et)(lr)),ve.__H.__.forEach(function(Oe){Oe.i&&(Oe.__H=Oe.i),Oe.__V!==Se&&(Oe.__=Oe.__V),Oe.i=void 0,Oe.__V=Se})),fe=Xe=null},be.__c=function(le,ve){ve.some(function(Oe){try{Oe.__h.forEach(Tn),Oe.__h=Oe.__h.filter(function(qe){return!qe.__||gn(qe)})}catch(qe){ve.some(function(dt){dt.__h&&(dt.__h=[])}),ve=[],be.__e(qe,Oe.__v)}}),mt&&mt(le,ve)},be.unmount=function(le){pn&&pn(le);var ve,Oe=le.__c;Oe&&Oe.__H&&(Oe.__H.__.forEach(function(qe){try{Tn(qe)}catch(dt){ve=dt}}),Oe.__H=void 0,ve&&be.__e(ve,Oe.__v))};var kt=typeof requestAnimationFrame=="function";function Et(le){var ve,Oe=s(function(){clearTimeout(qe),kt&&cancelAnimationFrame(ve),setTimeout(le)},"r"),qe=setTimeout(Oe,100);kt&&(ve=requestAnimationFrame(Oe))}s(Et,"w");function Tn(le){var ve=Xe,Oe=le.__c;typeof Oe=="function"&&(le.__c=void 0,Oe()),Xe=ve}s(Tn,"z");function gn(le){var ve=Xe;le.__c=le.__(),Xe=ve}s(gn,"B");function In(le,ve){return!le||le.length!==ve.length||ve.some(function(Oe,qe){return Oe!==le[qe]})}s(In,"C");function Qn(le,ve){return typeof ve=="function"?ve(le):ve}s(Qn,"D");const qn="http://www.w3.org/2000/svg";function Vn(){const le=s(qe=>p.createElementNS(qn,qe),"createElementNS"),ve=X(le("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),Oe=X(le("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return ve.appendChild(Oe),ve}s(Vn,"SentryLogo");const Xn="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function yi({options:le}){const ve=li(()=>({__html:Vn().outerHTML}),[]);return It("h2",{class:"dialog__header",__self:this,__source:{fileName:Xn,lineNumber:16}},le.formTitle,le.showBranding?It("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:ve,__self:this,__source:{fileName:Xn,lineNumber:19}}):null)}s(yi,"DialogHeader");function Si(le,ve){const Oe=[];return ve.isNameRequired&&!le.name&&Oe.push(ve.nameLabel),ve.isEmailRequired&&!le.email&&Oe.push(ve.emailLabel),le.message||Oe.push(ve.messageLabel),Oe}s(Si,"getMissingFields");const Fn="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function xi(le,ve){const Oe=le.get(ve);return typeof Oe=="string"?Oe.trim():""}s(xi,"retrieveStringValue");function hi({options:le,defaultEmail:ve,defaultName:Oe,onFormClose:qe,onSubmit:dt,onSubmitSuccess:ct,onSubmitError:Bt,showEmail:en,showName:nn,screenshotInput:Ut}){const{addScreenshotButtonLabel:Nn,removeScreenshotButtonLabel:bt,cancelButtonLabel:Wn,emailLabel:fn,emailPlaceholder:ii,isEmailRequired:Ui,isNameRequired:pi,messageLabel:cn,messagePlaceholder:En,nameLabel:Un,namePlaceholder:Yn,submitButtonLabel:Vi,isRequiredLabel:qi}=le,[Bn,gr]=ai(null),[mi,Ki]=ai(!1),Ur=Ut&&Ut.input,[Yr,oo]=ai(null),so=Kn(er=>{oo(er),Ki(!1)},[]),Pr=Kn(er=>{const Or=Si(er,{emailLabel:fn,isEmailRequired:Ui,isNameRequired:pi,messageLabel:cn,nameLabel:Un});return Or.length>0?gr(`Please enter in the following required fields: ${Or.join(", ")}`):gr(null),Or.length===0},[fn,Ui,pi,cn,Un]),Vr=Kn(async er=>{try{if(er.preventDefault(),!(er.target instanceof HTMLFormElement))return;const Or=new FormData(er.target),Hr=await(Ut&&mi?Ut.value():void 0),Hi={name:xi(Or,"name"),email:xi(Or,"email"),message:xi(Or,"message"),attachments:Hr?[Hr]:void 0};if(!Pr(Hi))return;try{await dt({name:Hi.name,email:Hi.email,message:Hi.message,source:A},{attachments:Hi.attachments}),ct(Hi)}catch(yr){R&&h.logger.error(yr),gr("There was a problem submitting feedback, please wait and try again."),Bt(yr)}}catch{}},[Ut&&mi,ct,Bt]);return It("form",{class:"form",onSubmit:Vr,__self:this,__source:{fileName:Fn,lineNumber:142}},Ur&&mi?It(Ur,{onError:so,__self:this,__source:{fileName:Fn,lineNumber:144}}):null,It("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:Fn,lineNumber:147}},It("div",{class:"form__top",__self:this,__source:{fileName:Fn,lineNumber:148}},Bn?It("div",{class:"form__error-container",__self:this,__source:{fileName:Fn,lineNumber:149}},Bn):null,nn?It("label",{for:"name",class:"form__label",__self:this,__source:{fileName:Fn,lineNumber:152}},It(Yi,{label:Un,isRequiredLabel:qi,isRequired:pi,__self:this,__source:{fileName:Fn,lineNumber:153}}),It("input",{class:"form__input",defaultValue:Oe,id:"name",name:"name",placeholder:Yn,required:pi,type:"text",__self:this,__source:{fileName:Fn,lineNumber:154}})):It("input",{"aria-hidden":!0,value:Oe,name:"name",type:"hidden",__self:this,__source:{fileName:Fn,lineNumber:165}}),en?It("label",{for:"email",class:"form__label",__self:this,__source:{fileName:Fn,lineNumber:169}},It(Yi,{label:fn,isRequiredLabel:qi,isRequired:Ui,__self:this,__source:{fileName:Fn,lineNumber:170}}),It("input",{class:"form__input",defaultValue:ve,id:"email",name:"email",placeholder:ii,required:Ui,type:"email",__self:this,__source:{fileName:Fn,lineNumber:171}})):It("input",{"aria-hidden":!0,value:ve,name:"email",type:"hidden",__self:this,__source:{fileName:Fn,lineNumber:182}}),It("label",{for:"message",class:"form__label",__self:this,__source:{fileName:Fn,lineNumber:185}},It(Yi,{label:cn,isRequiredLabel:qi,isRequired:!0,__self:this,__source:{fileName:Fn,lineNumber:186}}),It("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:En,required:!0,rows:5,__self:this,__source:{fileName:Fn,lineNumber:187}})),Ur?It("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:Fn,lineNumber:199}},It("button",{class:"btn btn--default",type:"button",onClick:()=>{oo(null),Ki(er=>!er)},__self:this,__source:{fileName:Fn,lineNumber:200}},mi?bt:Nn),Yr?It("div",{class:"form__error-container",__self:this,__source:{fileName:Fn,lineNumber:210}},Yr.message):null):null),It("div",{class:"btn-group",__self:this,__source:{fileName:Fn,lineNumber:214}},It("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:Fn,lineNumber:215}},Vi),It("button",{class:"btn btn--default",type:"button",onClick:qe,__self:this,__source:{fileName:Fn,lineNumber:218}},Wn))))}s(hi,"Form");function Yi({label:le,isRequired:ve,isRequiredLabel:Oe}){return It("span",{class:"form__label__text",__self:this,__source:{fileName:Fn,lineNumber:233}},le,ve&&It("span",{class:"form__label__text--required",__self:this,__source:{fileName:Fn,lineNumber:235}},Oe))}s(Yi,"LabelText");const L=16,re=17,we="http://www.w3.org/2000/svg";function $e(){const le=s(nn=>m.document.createElementNS(we,nn),"createElementNS"),ve=X(le("svg"),{width:`${L}`,height:`${re}`,viewBox:`0 0 ${L} ${re}`,fill:"inherit"}),Oe=X(le("g"),{clipPath:"url(#clip0_57_156)"}),qe=X(le("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),dt=X(le("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});ve.appendChild(Oe).append(dt,qe);const ct=le("defs"),Bt=X(le("clipPath"),{id:"clip0_57_156"}),en=X(le("rect"),{width:`${L}`,height:`${L}`,fill:"white",transform:"translate(0 0.5)"});return Bt.appendChild(en),ct.appendChild(Bt),ve.appendChild(ct).appendChild(Bt).appendChild(en),ve}s($e,"SuccessIcon");const yt="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function Xt({open:le,onFormSubmitted:ve,...Oe}){const qe=Oe.options,dt=li(()=>({__html:$e().outerHTML}),[]),[ct,Bt]=ai(null),en=Kn(()=>{ct&&(clearTimeout(ct),Bt(null)),ve()},[ct]),nn=Kn(Ut=>{Oe.onSubmitSuccess(Ut),Bt(setTimeout(()=>{ve(),Bt(null)},D))},[ve]);return It($n,{__self:this,__source:{fileName:yt,lineNumber:47}},ct?It("div",{class:"success__position",onClick:en,__self:this,__source:{fileName:yt,lineNumber:49}},It("div",{class:"success__content",__self:this,__source:{fileName:yt,lineNumber:50}},qe.successMessageText,It("span",{class:"success__icon",dangerouslySetInnerHTML:dt,__self:this,__source:{fileName:yt,lineNumber:52}}))):It("dialog",{class:"dialog",onClick:qe.onFormClose,open:le,__self:this,__source:{fileName:yt,lineNumber:56}},It("div",{class:"dialog__position",__self:this,__source:{fileName:yt,lineNumber:57}},It("div",{class:"dialog__content",onClick:Ut=>{Ut.stopPropagation()},__self:this,__source:{fileName:yt,lineNumber:58}},It(yi,{options:qe,__self:this,__source:{fileName:yt,lineNumber:65}}),It(hi,{...Oe,onSubmitSuccess:nn,__self:this,__source:{fileName:yt,lineNumber:66}})))))}s(Xt,"Dialog");const dn=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,Zt=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,qt=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  flex: 1 0 auto;
}

@media (max-width: 600px) {
  .form__right {
    width: auto;
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-foreground);
  fill: var(--error-foreground);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,on=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,wn=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Zn(){const le=p.createElement("style");return le.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${dn}
${Zt}
${qt}
${on}
${wn}
`,le}s(Zn,"createDialogStyles");const Jn="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function Ei(){const le=c.getCurrentScope().getUser(),ve=c.getIsolationScope().getUser(),Oe=c.getGlobalScope().getUser();return le&&Object.keys(le).length?le:ve&&Object.keys(ve).length?ve:Oe}s(Ei,"getUser");const $i=s(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:le,screenshotIntegration:ve,sendFeedback:Oe,shadow:qe})=>{const dt=qe,ct=le.useSentryUser,Bt=Ei(),en=p.createElement("div"),nn=Zn();let Ut="";const Nn={get el(){return en},appendToDom(){!dt.contains(nn)&&!dt.contains(en)&&(dt.appendChild(nn),dt.appendChild(en))},removeFromDom(){dt.removeChild(en),dt.removeChild(nn)},open(){Wn(!0),le.onFormOpen&&le.onFormOpen(),Ut=p.body.style.overflow,p.body.style.overflow="hidden"},close(){Wn(!1),p.body.style.overflow=Ut}},bt=ve&&ve.createInput(It,Nn,le),Wn=s(fn=>{rt(It(Xt,{options:le,screenshotInput:bt,showName:le.showName||le.isNameRequired,showEmail:le.showEmail||le.isEmailRequired,defaultName:ct&&Bt&&Bt[ct.name]||"",defaultEmail:ct&&Bt&&Bt[ct.email]||"",onFormClose:()=>{Wn(!1),le.onFormClose&&le.onFormClose()},onSubmit:Oe,onSubmitSuccess:ii=>{Wn(!1),le.onSubmitSuccess&&le.onSubmitSuccess(ii)},onSubmitError:ii=>{le.onSubmitError&&le.onSubmitError(ii)},onFormSubmitted:()=>{le.onFormSubmitted&&le.onFormSubmitted()},open:fn,__self:void 0,__source:{fileName:Jn,lineNumber:72}}),en)},"renderContent");return Nn}}),"feedbackModalIntegration");function Qi(){const le=p.createElement("style"),ve="#1A141F",Oe="#302735";return le.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${ve};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${ve} 8px,
      ${ve} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${Oe} 15px,
      ${Oe} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.editor__canvas-container canvas {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,le}s(Qi,"createScreenshotInputStyles");const Sr=s(({onBeforeScreenshot:le,onScreenshot:ve,onAfterScreenshot:Oe,onError:qe})=>{Hn(()=>{s(async()=>{le();const ct=await a.mediaDevices.getDisplayMedia({video:{width:m.innerWidth*m.devicePixelRatio,height:m.innerHeight*m.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),Bt=p.createElement("video");await new Promise((en,nn)=>{Bt.srcObject=ct,Bt.onloadedmetadata=()=>{ve(Bt),ct.getTracks().forEach(Ut=>Ut.stop()),en()},Bt.play().catch(nn)}),Oe()},"takeScreenshot")().catch(qe)},[])},"useTakeScreenshot"),On="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",Ri=30,ci=3,ki=Ri+ci,rn=m.devicePixelRatio,cr=s(le=>({x:Math.min(le.startX,le.endX),y:Math.min(le.startY,le.endY),width:Math.abs(le.startX-le.endX),height:Math.abs(le.startY-le.endY)}),"constructRect"),Sn=s(le=>{const ve=le.clientHeight,Oe=le.clientWidth,qe=le.width/le.height;let dt=ve*qe,ct=ve;dt>Oe&&(dt=Oe,ct=Oe/qe);const Bt=(Oe-dt)/2,en=(ve-ct)/2;return{startX:Bt,startY:en,endX:dt+Bt,endY:ct+en}},"getContainedSize");function Zi({imageBuffer:le,dialog:ve,options:Oe}){return s(function({onError:dt}){const ct=li(()=>({__html:Qi().innerText}),[]),Bt=mn(null),en=mn(null),nn=mn(null),[Ut,Nn]=ai({startX:0,startY:0,endX:0,endY:0}),[bt,Wn]=ai(!1);Hn(()=>{m.addEventListener("resize",fn,!1)},[]);function fn(){const cn=nn.current,En=cr(Sn(le));if(cn){cn.width=En.width*rn,cn.height=En.height*rn,cn.style.width=`${En.width}px`,cn.style.height=`${En.height}px`;const Yn=cn.getContext("2d");Yn&&Yn.scale(rn,rn)}const Un=en.current;Un&&(Un.style.width=`${En.width}px`,Un.style.height=`${En.height}px`,Un.style.left=`${En.x}px`,Un.style.top=`${En.y}px`),Nn({startX:0,startY:0,endX:En.width,endY:En.height})}s(fn,"resizeCropper"),Hn(()=>{const cn=nn.current;if(!cn)return;const En=cn.getContext("2d");if(!En)return;const Un=cr(Sn(le)),Yn=cr(Ut);En.clearRect(0,0,Un.width,Un.height),En.fillStyle="rgba(0, 0, 0, 0.5)",En.fillRect(0,0,Un.width,Un.height),En.clearRect(Yn.x,Yn.y,Yn.width,Yn.height),En.strokeStyle="#ffffff",En.lineWidth=3,En.strokeRect(Yn.x+1,Yn.y+1,Yn.width-2,Yn.height-2),En.strokeStyle="#000000",En.lineWidth=1,En.strokeRect(Yn.x+3,Yn.y+3,Yn.width-6,Yn.height-6)},[Ut]);function ii(cn,En){Wn(!1);const Un=Ui(En),Yn=s(()=>{p.removeEventListener("mousemove",Un),p.removeEventListener("mouseup",Yn),Wn(!0)},"handleMouseUp");p.addEventListener("mouseup",Yn),p.addEventListener("mousemove",Un)}s(ii,"onGrabButton");const Ui=Kn(cn=>function(En){if(!nn.current)return;const Un=nn.current,Yn=Un.getBoundingClientRect(),Vi=En.clientX-Yn.x,qi=En.clientY-Yn.y;switch(cn){case"top-left":Nn(Bn=>({...Bn,startX:Math.min(Math.max(0,Vi),Bn.endX-ki),startY:Math.min(Math.max(0,qi),Bn.endY-ki)}));break;case"top-right":Nn(Bn=>({...Bn,endX:Math.max(Math.min(Vi,Un.width/rn),Bn.startX+ki),startY:Math.min(Math.max(0,qi),Bn.endY-ki)}));break;case"bottom-left":Nn(Bn=>({...Bn,startX:Math.min(Math.max(0,Vi),Bn.endX-ki),endY:Math.max(Math.min(qi,Un.height/rn),Bn.startY+ki)}));break;case"bottom-right":Nn(Bn=>({...Bn,endX:Math.max(Math.min(Vi,Un.width/rn),Bn.startX+ki),endY:Math.max(Math.min(qi,Un.height/rn),Bn.startY+ki)}));break}},[]);function pi(){const cn=p.createElement("canvas"),En=cr(Sn(le)),Un=cr(Ut);cn.width=Un.width,cn.height=Un.height;const Yn=cn.getContext("2d");Yn&&le&&Yn.drawImage(le,Un.x/En.width*le.width,Un.y/En.height*le.height,Un.width/En.width*le.width,Un.height/En.height*le.height,0,0,Un.width,Un.height);const Vi=le.getContext("2d");Vi&&(Vi.clearRect(0,0,le.width,le.height),le.width=cn.width,le.height=cn.height,Vi.drawImage(cn,0,0),fn())}return s(pi,"submit"),Sr({onBeforeScreenshot:Kn(()=>{ve.el.style.display="none"},[]),onScreenshot:Kn(cn=>{const En=le.getContext("2d");if(!En)throw new Error("Could not get canvas context");le.width=cn.videoWidth,le.height=cn.videoHeight,En.drawImage(cn,0,0)},[le]),onAfterScreenshot:Kn(()=>{ve.el.style.display="block";const cn=Bt.current;cn&&cn.appendChild(le),fn()},[]),onError:Kn(cn=>{ve.el.style.display="block",dt(cn)},[])}),It("div",{class:"editor",__self:this,__source:{fileName:On,lineNumber:249}},It("style",{dangerouslySetInnerHTML:ct,__self:this,__source:{fileName:On,lineNumber:250}}),It("div",{class:"editor__canvas-container",ref:Bt,__self:this,__source:{fileName:On,lineNumber:251}},It("div",{class:"editor__crop-container",style:{position:"absolute"},ref:en,__self:this,__source:{fileName:On,lineNumber:252}},It("canvas",{style:{position:"absolute"},ref:nn,__self:this,__source:{fileName:On,lineNumber:253}}),It(vr,{left:Ut.startX-ci,top:Ut.startY-ci,onGrabButton:ii,corner:"top-left",__self:this,__source:{fileName:On,lineNumber:254}}),It(vr,{left:Ut.endX-Ri+ci,top:Ut.startY-ci,onGrabButton:ii,corner:"top-right",__self:this,__source:{fileName:On,lineNumber:260}}),It(vr,{left:Ut.startX-ci,top:Ut.endY-Ri+ci,onGrabButton:ii,corner:"bottom-left",__self:this,__source:{fileName:On,lineNumber:266}}),It(vr,{left:Ut.endX-Ri+ci,top:Ut.endY-Ri+ci,onGrabButton:ii,corner:"bottom-right",__self:this,__source:{fileName:On,lineNumber:272}}),It("div",{style:{left:Math.max(0,Ut.endX-191),top:Math.max(0,Ut.endY+8),display:bt?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:On,lineNumber:278}},It("button",{onClick:cn=>{cn.preventDefault(),nn.current&&Nn({startX:0,startY:0,endX:nn.current.width/rn,endY:nn.current.height/rn}),Wn(!1)},class:"btn btn--default",__self:this,__source:{fileName:On,lineNumber:286}},Oe.cancelButtonLabel),It("button",{onClick:cn=>{cn.preventDefault(),pi(),Wn(!1)},class:"btn btn--primary",__self:this,__source:{fileName:On,lineNumber:303}},Oe.confirmButtonLabel)))))},"ScreenshotEditor")}s(Zi,"makeScreenshotEditorComponent");function vr({top:le,left:ve,corner:Oe,onGrabButton:qe}){return It("button",{class:`editor__crop-corner editor__crop-corner--${Oe} `,style:{top:le,left:ve},onMouseDown:dt=>{dt.preventDefault(),qe(dt,Oe)},onClick:dt=>{dt.preventDefault()},__self:this,__source:{fileName:On,lineNumber:333}})}s(vr,"CropCorner");const Rr=s(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:(le,ve,Oe)=>{const qe=p.createElement("canvas");return{input:Zi({h:le,imageBuffer:qe,dialog:ve,options:Oe}),value:async()=>{const dt=await new Promise(ct=>{qe.toBlob(ct,"image/png")});if(dt)return{data:new Uint8Array(await dt.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),"feedbackScreenshotIntegration");l.buildFeedbackIntegration=je,l.feedbackModalIntegration=$i,l.feedbackScreenshotIntegration=Rr,l.getFeedback=We,l.sendFeedback=M},4947629935:(x,l,d)=>{var{_optionalChain:c}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const h=d(8482989710);var m;(function(De){De[De.Document=0]="Document",De[De.DocumentType=1]="DocumentType",De[De.Element=2]="Element",De[De.Text=3]="Text",De[De.CDATA=4]="CDATA",De[De.Comment=5]="Comment"})(m||(m={}));function p(De,Pe){for(let Ke=De.classList.length;Ke--;){const Ye=De.classList[Ke];if(Pe.test(Ye))return!0}return!1}s(p,"elementClassMatchesRegex");function a(De,Pe,Ke=1/0,Ye=0){return!De||De.nodeType!==De.ELEMENT_NODE||Ye>Ke?-1:Pe(De)?Ye:a(De.parentNode,Pe,Ke,Ye+1)}s(a,"distanceToMatch");function r(De,Pe){return Ke=>{const Ye=Ke;if(Ye===null)return!1;try{if(De){if(typeof De=="string"){if(Ye.matches(`.${De}`))return!0}else if(p(Ye,De))return!0}return!!(Pe&&Ye.matches(Pe))}catch{return!1}}}s(r,"createMatchPredicate");const n=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let e={map:{},getId(){return console.error(n),-1},getNode(){return console.error(n),null},removeNodeFromMap(){console.error(n)},has(){return console.error(n),!1},reset(){console.error(n)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(e=new Proxy(e,{get(De,Pe,Ke){return Pe==="map"&&console.error(n),Reflect.get(De,Pe,Ke)}}));function t(De,Pe,Ke,Ye,xe=window){const Ct=xe.Object.getOwnPropertyDescriptor(De,Pe);return xe.Object.defineProperty(De,Pe,Ye?Ke:{set(At){v(()=>{Ke.set.call(this,At)},0),Ct&&Ct.set&&Ct.set.call(this,At)}}),()=>t(De,Pe,Ct||{},!0)}s(t,"hookSetter");function i(De,Pe,Ke){try{if(!(Pe in De))return()=>{};const Ye=De[Pe],xe=Ke(Ye);return typeof xe=="function"&&(xe.prototype=xe.prototype||{},Object.defineProperties(xe,{__rrweb_original__:{enumerable:!1,value:Ye}})),De[Pe]=xe,()=>{De[Pe]=Ye}}catch{return()=>{}}}s(i,"patch"),/[1-9][0-9]{12}/.test(Date.now().toString());function o(De){return De?De.nodeType===De.ELEMENT_NODE?De:De.parentElement:null}s(o,"closestElementOfNode");function f(De,Pe,Ke,Ye,xe){if(!De)return!1;const Ct=o(De);if(!Ct)return!1;const At=r(Pe,Ke);if(!xe){const Jt=Ye&&Ct.matches(Ye);return At(Ct)&&!Jt}const Lt=a(Ct,At);let Ft=-1;return Lt<0?!1:(Ye&&(Ft=a(Ct,r(null,Ye))),Lt>-1&&Ft<0?!0:Lt<Ft)}s(f,"isBlocked");const g={};function S(De){const Pe=g[De];if(Pe)return Pe;const Ke=window.document;let Ye=window[De];if(Ke&&typeof Ke.createElement=="function")try{const xe=Ke.createElement("iframe");xe.hidden=!0,Ke.head.appendChild(xe);const Ct=xe.contentWindow;Ct&&Ct[De]&&(Ye=Ct[De]),Ke.head.removeChild(xe)}catch{}return g[De]=Ye.bind(window)}s(S,"getImplementation");function u(...De){return S("requestAnimationFrame")(...De)}s(u,"onRequestAnimationFrame");function v(...De){return S("setTimeout")(...De)}s(v,"setTimeout");var y=(De=>(De[De["2D"]=0]="2D",De[De.WebGL=1]="WebGL",De[De.WebGL2=2]="WebGL2",De))(y||{});let _;function C(De){_=De}s(C,"registerErrorHandler");const T=s(De=>_?s((...Ke)=>{try{return De(...Ke)}catch(Ye){if(_&&_(Ye)===!0)return()=>{};throw Ye}},"rrwebWrapped"):De,"callbackWrapper");for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=typeof Uint8Array>"u"?[]:new Uint8Array(256),D=0;D<A.length;D++)O[A.charCodeAt(D)]=D;var M=s(function(De){var Pe=new Uint8Array(De),Ke,Ye=Pe.length,xe="";for(Ke=0;Ke<Ye;Ke+=3)xe+=A[Pe[Ke]>>2],xe+=A[(Pe[Ke]&3)<<4|Pe[Ke+1]>>4],xe+=A[(Pe[Ke+1]&15)<<2|Pe[Ke+2]>>6],xe+=A[Pe[Ke+2]&63];return Ye%3===2?xe=xe.substring(0,xe.length-1)+"=":Ye%3===1&&(xe=xe.substring(0,xe.length-2)+"=="),xe},"encode");const R=new Map;function F(De,Pe){let Ke=R.get(De);return Ke||(Ke=new Map,R.set(De,Ke)),Ke.has(Pe)||Ke.set(Pe,[]),Ke.get(Pe)}s(F,"variableListFor");const V=s((De,Pe,Ke)=>{if(!De||!(Y(De,Pe)||typeof De=="object"))return;const Ye=De.constructor.name,xe=F(Ke,Ye);let Ct=xe.indexOf(De);return Ct===-1&&(Ct=xe.length,xe.push(De)),Ct},"saveWebGLVar");function $(De,Pe,Ke){if(De instanceof Array)return De.map(Ye=>$(Ye,Pe,Ke));if(De===null)return De;if(De instanceof Float32Array||De instanceof Float64Array||De instanceof Int32Array||De instanceof Uint32Array||De instanceof Uint8Array||De instanceof Uint16Array||De instanceof Int16Array||De instanceof Int8Array||De instanceof Uint8ClampedArray)return{rr_type:De.constructor.name,args:[Object.values(De)]};if(De instanceof ArrayBuffer){const Ye=De.constructor.name,xe=M(De);return{rr_type:Ye,base64:xe}}else{if(De instanceof DataView)return{rr_type:De.constructor.name,args:[$(De.buffer,Pe,Ke),De.byteOffset,De.byteLength]};if(De instanceof HTMLImageElement){const Ye=De.constructor.name,{src:xe}=De;return{rr_type:Ye,src:xe}}else if(De instanceof HTMLCanvasElement){const Ye="HTMLImageElement",xe=De.toDataURL();return{rr_type:Ye,src:xe}}else{if(De instanceof ImageData)return{rr_type:De.constructor.name,args:[$(De.data,Pe,Ke),De.width,De.height]};if(Y(De,Pe)||typeof De=="object"){const Ye=De.constructor.name,xe=V(De,Pe,Ke);return{rr_type:Ye,index:xe}}}}return De}s($,"serializeArg");const X=s((De,Pe,Ke)=>De.map(Ye=>$(Ye,Pe,Ke)),"serializeArgs"),Y=s((De,Pe)=>{const Ye=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(xe=>typeof Pe[xe]=="function");return Boolean(Ye.find(xe=>De instanceof Pe[xe]))},"isInstanceOfWebGLObject");function ne(De,Pe,Ke,Ye,xe){const Ct=[],At=Object.getOwnPropertyNames(Pe.CanvasRenderingContext2D.prototype);for(const Lt of At)try{if(typeof Pe.CanvasRenderingContext2D.prototype[Lt]!="function")continue;const Ft=i(Pe.CanvasRenderingContext2D.prototype,Lt,function(Jt){return function(...It){return f(this.canvas,Ke,Ye,xe,!0)||v(()=>{const ln=X(It,Pe,this);De(this.canvas,{type:y["2D"],property:Lt,args:ln})},0),Jt.apply(this,It)}});Ct.push(Ft)}catch{const Jt=t(Pe.CanvasRenderingContext2D.prototype,Lt,{set(It){De(this.canvas,{type:y["2D"],property:Lt,args:[It],setter:!0})}});Ct.push(Jt)}return()=>{Ct.forEach(Lt=>Lt())}}s(ne,"initCanvas2DMutationObserver");function ie(De){return De==="experimental-webgl"?"webgl":De}s(ie,"getNormalizedContextName");function pe(De,Pe,Ke,Ye,xe){const Ct=[];try{const At=i(De.HTMLCanvasElement.prototype,"getContext",function(Lt){return function(Ft,...Jt){if(!f(this,Pe,Ke,Ye,!0)){const It=ie(Ft);if("__context"in this||(this.__context=It),xe&&["webgl","webgl2"].includes(It))if(Jt[0]&&typeof Jt[0]=="object"){const ln=Jt[0];ln.preserveDrawingBuffer||(ln.preserveDrawingBuffer=!0)}else Jt.splice(0,1,{preserveDrawingBuffer:!0})}return Lt.apply(this,[Ft,...Jt])}});Ct.push(At)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{Ct.forEach(At=>At())}}s(pe,"initCanvasContextObserver");function Ee(De,Pe,Ke,Ye,xe,Ct,At,Lt){const Ft=[],Jt=Object.getOwnPropertyNames(De);for(const It of Jt)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(It))try{if(typeof De[It]!="function")continue;const ln=i(De,It,function($n){return function(...yn){const zt=$n.apply(this,yn);if(V(zt,Lt,this),"tagName"in this.canvas&&!f(this.canvas,Ye,xe,Ct,!0)){const Yt=X(yn,Lt,this),Mt={type:Pe,property:It,args:Yt};Ke(this.canvas,Mt)}return zt}});Ft.push(ln)}catch{const $n=t(De,It,{set(yn){Ke(this.canvas,{type:Pe,property:It,args:[yn],setter:!0})}});Ft.push($n)}return Ft}s(Ee,"patchGLPrototype");function Be(De,Pe,Ke,Ye,xe,Ct){const At=[];return At.push(...Ee(Pe.WebGLRenderingContext.prototype,y.WebGL,De,Ke,Ye,xe,Ct,Pe)),typeof Pe.WebGL2RenderingContext<"u"&&At.push(...Ee(Pe.WebGL2RenderingContext.prototype,y.WebGL2,De,Ke,Ye,xe,Ct,Pe)),()=>{At.forEach(Lt=>Lt())}}s(Be,"initCanvasWebGLMutationObserver");var it='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Ce(){const De=new Blob([it]);return URL.createObjectURL(De)}s(Ce,"t");class Me{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(Pe){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(ln,$n)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(ln)||this.pendingCanvasMutations.set(ln,[]),this.pendingCanvasMutations.get(ln).push($n)};const{sampling:Ke="all",win:Ye,blockClass:xe,blockSelector:Ct,unblockSelector:At,maxCanvasSize:Lt,recordCanvas:Ft,dataURLOptions:Jt,errorHandler:It}=Pe;this.mutationCb=Pe.mutationCb,this.mirror=Pe.mirror,this.options=Pe,It&&C(It),!Pe.enableManualSnapshot&&T(()=>{Ft&&Ke==="all"&&this.initCanvasMutationObserver(Ye,xe,Ct,At),Ft&&typeof Ke=="number"&&this.initCanvasFPSObserver(Ke,Ye,xe,Ct,At,Lt,{dataURLOptions:Jt})})()}initCanvasFPSObserver(Pe,Ke,Ye,xe,Ct,At,Lt){const Ft=pe(Ke,Ye,xe,Ct,!0),Jt=this.takeSnapshot(!1,Pe,Ke,Ye,xe,Ct,At,Lt.dataURLOptions);this.resetObservers=()=>{Ft(),cancelAnimationFrame(Jt)}}initCanvasMutationObserver(Pe,Ke,Ye,xe){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const Ct=pe(Pe,Ke,Ye,xe,!1),At=ne(this.processMutation.bind(this),Pe,Ke,Ye,xe),Lt=Be(this.processMutation.bind(this),Pe,Ke,Ye,xe,this.mirror);this.resetObservers=()=>{Ct(),At(),Lt()}}snapshot(Pe){const{options:Ke}=this,Ye=this.takeSnapshot(!0,Ke.sampling==="all"?2:Ke.sampling||2,Ke.win,Ke.blockClass,Ke.blockSelector,Ke.unblockSelector,Ke.maxCanvasSize,Ke.dataURLOptions,Pe);this.resetObservers=()=>{cancelAnimationFrame(Ye)}}takeSnapshot(Pe,Ke,Ye,xe,Ct,At,Lt,Ft,Jt){const It=new Map,ln=new Worker(Ce());ln.onmessage=Vt=>{const $t=Vt.data,{id:xt}=$t;if(It.set(xt,!1),!("base64"in $t))return;const{base64:jt,type:J,width:Fe,height:ke}=$t;this.mutationCb({id:xt,type:y["2D"],commands:[{property:"clearRect",args:[0,0,Fe,ke]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:jt}],type:J}]},0,0,Fe,ke]}]})};const $n=1e3/Ke;let yn=0,zt;const Yt=s(Vt=>{if(Vt)return[Vt];const $t=[];return Ye.document.querySelectorAll("canvas").forEach(xt=>{f(xt,xe,Ct,At,!0)||$t.push(xt)}),$t},"getCanvas"),Mt=s(Vt=>{if(yn&&Vt-yn<$n){zt=u(Mt);return}yn=Vt,Yt(Jt).forEach($t=>{const xt=this.mirror.getId($t);if(!It.get(xt)&&!(!$t.width||!$t.height)){if(It.set(xt,!0),!Pe&&["webgl","webgl2"].includes($t.__context)){const jt=$t.getContext($t.__context);c([jt,"optionalAccess",J=>J.getContextAttributes,"call",J=>J(),"optionalAccess",J=>J.preserveDrawingBuffer])===!1&&jt.clear(jt.COLOR_BUFFER_BIT)}createImageBitmap($t).then(jt=>{ln.postMessage({id:xt,bitmap:jt,width:$t.width,height:$t.height,dataURLOptions:Ft,maxCanvasSize:Lt},[jt])}).catch(jt=>{T(()=>{throw jt})()})}}),zt=u(Mt)},"takeCanvasSnapshots");return zt=u(Mt),zt}startPendingCanvasMutationFlusher(){u(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const Pe=s(Ke=>{this.rafStamps.latestId=Ke,u(Pe)},"setLatestRAFTimestamp");u(Pe)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((Pe,Ke)=>{const Ye=this.mirror.getId(Ke);this.flushPendingCanvasMutationFor(Ke,Ye)}),u(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(Pe,Ke){if(this.frozen||this.locked)return;const Ye=this.pendingCanvasMutations.get(Pe);if(!Ye||Ke===-1)return;const xe=Ye.map(At=>{const{type:Lt,...Ft}=At;return Ft}),{type:Ct}=Ye[0];this.mutationCb({id:Ke,type:Ct,commands:xe}),this.pendingCanvasMutations.delete(Pe)}}s(Me,"CanvasManager");const je={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},We="ReplayCanvas",Ze=1280,ft=s((De={})=>{const[Pe,Ke]=De.maxCanvasSize||[],Ye={quality:De.quality||"medium",enableManualSnapshot:De.enableManualSnapshot,maxCanvasSize:[Pe?Math.min(Pe,Ze):Ze,Ke?Math.min(Ke,Ze):Ze]};let xe;const Ct=new Promise(At=>xe=At);return{name:We,getOptions(){const{quality:At,enableManualSnapshot:Lt,maxCanvasSize:Ft}=Ye;return{enableManualSnapshot:Lt,recordCanvas:!0,getCanvasManager:Jt=>{const It=new Me({...Jt,enableManualSnapshot:Lt,maxCanvasSize:Ft,errorHandler:ln=>{try{typeof ln=="object"&&(ln.__rrweb__=!0)}catch{}}});return xe(It),It},...je[At||"medium"]||je.medium}},async snapshot(At){(await Ct).snapshot(At)}}},"_replayCanvasIntegration"),vt=h.defineIntegration(ft);l.replayCanvasIntegration=vt},6979168052:(x,l,d)=>{var{_nullishCoalesce:c,_optionalChain:h}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const m=d(8482989710),p=d(7563271614),a=d(3778408185),r=p.GLOBAL_OBJ,n="sentryReplaySession",e="replay_event",t="Unable to send Replay",i=3e5,o=9e5,f=5e3,g=5500,S=6e4,u=5e3,v=3,y=15e4,_=5e3,C=3e3,T=300,A=2e7,O=4999,D=15e3,M=36e5;function R(P,B){return P??B()}s(R,"_nullishCoalesce$1");function F(P){let B,W=P[0],q=1;for(;q<P.length;){const de=P[q],_e=P[q+1];if(q+=2,(de==="optionalAccess"||de==="optionalCall")&&W==null)return;de==="access"||de==="optionalAccess"?(B=W,W=_e(W)):(de==="call"||de==="optionalCall")&&(W=_e((...He)=>W.call(B,...He)),B=void 0)}return W}s(F,"_optionalChain$5");var V;(function(P){P[P.Document=0]="Document",P[P.DocumentType=1]="DocumentType",P[P.Element=2]="Element",P[P.Text=3]="Text",P[P.CDATA=4]="CDATA",P[P.Comment=5]="Comment"})(V||(V={}));function $(P){return P.nodeType===P.ELEMENT_NODE}s($,"isElement$1");function X(P){const B=F([P,"optionalAccess",W=>W.host]);return Boolean(F([B,"optionalAccess",W=>W.shadowRoot])===P)}s(X,"isShadowRoot");function Y(P){return Object.prototype.toString.call(P)==="[object ShadowRoot]"}s(Y,"isNativeShadowDom");function ne(P){return P.includes(" background-clip: text;")&&!P.includes(" -webkit-background-clip: text;")&&(P=P.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),P}s(ne,"fixBrowserCompatibilityIssuesInCSS");function ie(P){const{cssText:B}=P;if(B.split('"').length<3)return B;const W=["@import",`url(${JSON.stringify(P.href)})`];return P.layerName===""?W.push("layer"):P.layerName&&W.push(`layer(${P.layerName})`),P.supportsText&&W.push(`supports(${P.supportsText})`),P.media.length&&W.push(P.media.mediaText),W.join(" ")+";"}s(ie,"escapeImportStatement");function pe(P){try{const B=P.rules||P.cssRules;return B?ne(Array.from(B,Ee).join("")):null}catch{return null}}s(pe,"stringifyStylesheet");function Ee(P){let B;if(it(P))try{B=pe(P.styleSheet)||ie(P)}catch{}else if(Ce(P)&&P.selectorText.includes(":"))return Be(P.cssText);return B||P.cssText}s(Ee,"stringifyRule");function Be(P){const B=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return P.replace(B,"$1\\$2")}s(Be,"fixSafariColons");function it(P){return"styleSheet"in P}s(it,"isCSSImportRule");function Ce(P){return"selectorText"in P}s(Ce,"isCSSStyleRule");class Me{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(B){if(!B)return-1;const W=F([this,"access",q=>q.getMeta,"call",q=>q(B),"optionalAccess",q=>q.id]);return R(W,()=>-1)}getNode(B){return this.idNodeMap.get(B)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(B){return this.nodeMetaMap.get(B)||null}removeNodeFromMap(B){const W=this.getId(B);this.idNodeMap.delete(W),B.childNodes&&B.childNodes.forEach(q=>this.removeNodeFromMap(q))}has(B){return this.idNodeMap.has(B)}hasNode(B){return this.nodeMetaMap.has(B)}add(B,W){const q=W.id;this.idNodeMap.set(q,B),this.nodeMetaMap.set(B,W)}replace(B,W){const q=this.getNode(B);if(q){const de=this.nodeMetaMap.get(q);de&&this.nodeMetaMap.set(W,de)}this.idNodeMap.set(B,W)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}s(Me,"Mirror");function je(){return new Me}s(je,"createMirror");function We({maskInputOptions:P,tagName:B,type:W}){return B==="OPTION"&&(B="SELECT"),Boolean(P[B.toLowerCase()]||W&&P[W]||W==="password"||B==="INPUT"&&!W&&P.text)}s(We,"shouldMaskInput");function Ze({isMasked:P,element:B,value:W,maskInputFn:q}){let de=W||"";return P?(q&&(de=q(de,B)),"*".repeat(de.length)):de}s(Ze,"maskInputValue");function ft(P){return P.toLowerCase()}s(ft,"toLowerCase");function vt(P){return P.toUpperCase()}s(vt,"toUpperCase");const De="__rrweb_original__";function Pe(P){const B=P.getContext("2d");if(!B)return!0;const W=50;for(let q=0;q<P.width;q+=W)for(let de=0;de<P.height;de+=W){const _e=B.getImageData,He=De in _e?_e[De]:_e;if(new Uint32Array(He.call(B,q,de,Math.min(W,P.width-q),Math.min(W,P.height-de)).data.buffer).some(ze=>ze!==0))return!1}return!0}s(Pe,"is2DCanvasBlank");function Ke(P){const B=P.type;return P.hasAttribute("data-rr-is-password")?"password":B?ft(B):null}s(Ke,"getInputType");function Ye(P,B,W){return B==="INPUT"&&(W==="radio"||W==="checkbox")?P.getAttribute("value")||"":P.value}s(Ye,"getInputValue");let xe=1;const Ct=new RegExp("[^a-z0-9-_:]"),At=-2;function Lt(){return xe++}s(Lt,"genId");function Ft(P){if(P instanceof HTMLFormElement)return"form";const B=ft(P.tagName);return Ct.test(B)?"div":B}s(Ft,"getValidTagName");function Jt(P){let B="";return P.indexOf("//")>-1?B=P.split("/").slice(0,3).join("/"):B=P.split("/")[0],B=B.split("?")[0],B}s(Jt,"extractOrigin");let It,ln;const $n=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,yn=/^(?:[a-z+]+:)?\/\//i,zt=/^www\..*/i,Yt=/^(data:)([^,]*),(.*)/i;function Mt(P,B){return(P||"").replace($n,(W,q,de,_e,He,et)=>{const ze=de||He||et,St=q||_e||"";if(!ze)return W;if(yn.test(ze)||zt.test(ze))return`url(${St}${ze}${St})`;if(Yt.test(ze))return`url(${St}${ze}${St})`;if(ze[0]==="/")return`url(${St}${Jt(B)+ze}${St})`;const wt=B.split("/"),ot=ze.split("/");wt.pop();for(const Rt of ot)Rt!=="."&&(Rt===".."?wt.pop():wt.push(Rt));return`url(${St}${wt.join("/")}${St})`})}s(Mt,"absoluteToStylesheet");const Vt=/^[^ \t\n\r\u000c]+/,$t=/^[, \t\n\r\u000c]+/;function xt(P,B){if(B.trim()==="")return B;let W=0;function q(_e){let He;const et=_e.exec(B.substring(W));return et?(He=et[0],W+=He.length,He):""}s(q,"collectCharacters");const de=[];for(;q($t),!(W>=B.length);){let _e=q(Vt);if(_e.slice(-1)===",")_e=jt(P,_e.substring(0,_e.length-1)),de.push(_e);else{let He="";_e=jt(P,_e);let et=!1;for(;;){const ze=B.charAt(W);if(ze===""){de.push((_e+He).trim());break}else if(et)ze===")"&&(et=!1);else if(ze===","){W+=1,de.push((_e+He).trim());break}else ze==="("&&(et=!0);He+=ze,W+=1}}}return de.join(", ")}s(xt,"getAbsoluteSrcsetString");function jt(P,B){if(!B||B.trim()==="")return B;const W=P.createElement("a");return W.href=B,W.href}s(jt,"absoluteToDoc");function J(P){return Boolean(P.tagName==="svg"||P.ownerSVGElement)}s(J,"isSVGElement");function Fe(){const P=document.createElement("a");return P.href="",P.href}s(Fe,"getHref");function ke(P,B,W,q,de,_e){return q&&(W==="src"||W==="href"&&!(B==="use"&&q[0]==="#")||W==="xlink:href"&&q[0]!=="#"||W==="background"&&(B==="table"||B==="td"||B==="th")?jt(P,q):W==="srcset"?xt(P,q):W==="style"?Mt(q,Fe()):B==="object"&&W==="data"?jt(P,q):typeof _e=="function"?_e(W,q,de):q)}s(ke,"transformAttribute");function Ge(P,B,W){return(P==="video"||P==="audio")&&B==="autoplay"}s(Ge,"ignoreAttribute");function gt(P,B,W,q){try{if(q&&P.matches(q))return!1;if(typeof B=="string"){if(P.classList.contains(B))return!0}else for(let de=P.classList.length;de--;){const _e=P.classList[de];if(B.test(_e))return!0}if(W)return P.matches(W)}catch{}return!1}s(gt,"_isBlockedElement");function at(P,B){for(let W=P.classList.length;W--;){const q=P.classList[W];if(B.test(q))return!0}return!1}s(at,"elementClassMatchesRegex");function ae(P,B,W=1/0,q=0){return!P||P.nodeType!==P.ELEMENT_NODE||q>W?-1:B(P)?q:ae(P.parentNode,B,W,q+1)}s(ae,"distanceToMatch");function Le(P,B){return W=>{const q=W;if(q===null)return!1;try{if(P){if(typeof P=="string"){if(q.matches(`.${P}`))return!0}else if(at(q,P))return!0}return!!(B&&q.matches(B))}catch{return!1}}}s(Le,"createMatchPredicate");function G(P,B,W,q,de,_e){try{const He=P.nodeType===P.ELEMENT_NODE?P:P.parentElement;if(He===null)return!1;if(He.tagName==="INPUT"){const St=He.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(St))return!0}let et=-1,ze=-1;if(_e){if(ze=ae(He,Le(q,de)),ze<0)return!0;et=ae(He,Le(B,W),ze>=0?ze:1/0)}else{if(et=ae(He,Le(B,W)),et<0)return!1;ze=ae(He,Le(q,de),et>=0?et:1/0)}return et>=0?ze>=0?et<=ze:!0:ze>=0?!1:!!_e}catch{}return!!_e}s(G,"needMaskingText");function Z(P,B,W){const q=P.contentWindow;if(!q)return;let de=!1,_e;try{_e=q.document.readyState}catch{return}if(_e!=="complete"){const et=setTimeout(()=>{de||(B(),de=!0)},W);P.addEventListener("load",()=>{clearTimeout(et),de=!0,B()});return}const He="about:blank";if(q.location.href!==He||P.src===He||P.src==="")return setTimeout(B,0),P.addEventListener("load",B);P.addEventListener("load",B)}s(Z,"onceIframeLoaded");function me(P,B,W){let q=!1,de;try{de=P.sheet}catch{return}if(de)return;const _e=setTimeout(()=>{q||(B(),q=!0)},W);P.addEventListener("load",()=>{clearTimeout(_e),q=!0,B()})}s(me,"onceStylesheetLoaded");function ge(P,B){const{doc:W,mirror:q,blockClass:de,blockSelector:_e,unblockSelector:He,maskAllText:et,maskAttributeFn:ze,maskTextClass:St,unmaskTextClass:wt,maskTextSelector:ot,unmaskTextSelector:Rt,inlineStylesheet:Qt,maskInputOptions:Wt={},maskTextFn:_n,maskInputFn:jn,dataURLOptions:Pn={},inlineImages:ri,recordCanvas:Ni,keepIframeSrcFn:gi,newlyAddedElement:Gi=!1}=B,ei=rt(W,q);switch(P.nodeType){case P.DOCUMENT_NODE:return P.compatMode!=="CSS1Compat"?{type:V.Document,childNodes:[],compatMode:P.compatMode}:{type:V.Document,childNodes:[]};case P.DOCUMENT_TYPE_NODE:return{type:V.DocumentType,name:P.name,publicId:P.publicId,systemId:P.systemId,rootId:ei};case P.ELEMENT_NODE:return Xe(P,{doc:W,blockClass:de,blockSelector:_e,unblockSelector:He,inlineStylesheet:Qt,maskAttributeFn:ze,maskInputOptions:Wt,maskInputFn:jn,dataURLOptions:Pn,inlineImages:ri,recordCanvas:Ni,keepIframeSrcFn:gi,newlyAddedElement:Gi,rootId:ei,maskAllText:et,maskTextClass:St,unmaskTextClass:wt,maskTextSelector:ot,unmaskTextSelector:Rt});case P.TEXT_NODE:return Ue(P,{maskAllText:et,maskTextClass:St,unmaskTextClass:wt,maskTextSelector:ot,unmaskTextSelector:Rt,maskTextFn:_n,maskInputOptions:Wt,maskInputFn:jn,rootId:ei});case P.CDATA_SECTION_NODE:return{type:V.CDATA,textContent:"",rootId:ei};case P.COMMENT_NODE:return{type:V.Comment,textContent:P.textContent||"",rootId:ei};default:return!1}}s(ge,"serializeNode");function rt(P,B){if(!B.hasNode(P))return;const W=B.getId(P);return W===1?void 0:W}s(rt,"getRootId");function Ue(P,B){const{maskAllText:W,maskTextClass:q,unmaskTextClass:de,maskTextSelector:_e,unmaskTextSelector:He,maskTextFn:et,maskInputOptions:ze,maskInputFn:St,rootId:wt}=B,ot=P.parentNode&&P.parentNode.tagName;let Rt=P.textContent;const Qt=ot==="STYLE"?!0:void 0,Wt=ot==="SCRIPT"?!0:void 0,_n=ot==="TEXTAREA"?!0:void 0;if(Qt&&Rt){try{P.nextSibling||P.previousSibling||F([P,"access",Pn=>Pn.parentNode,"access",Pn=>Pn.sheet,"optionalAccess",Pn=>Pn.cssRules])&&(Rt=pe(P.parentNode.sheet))}catch(Pn){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${Pn}`,P)}Rt=Mt(Rt,Fe())}Wt&&(Rt="SCRIPT_PLACEHOLDER");const jn=G(P,q,_e,de,He,W);if(!Qt&&!Wt&&!_n&&Rt&&jn&&(Rt=et?et(Rt,P.parentElement):Rt.replace(/[\S]/g,"*")),_n&&Rt&&(ze.textarea||jn)&&(Rt=St?St(Rt,P.parentNode):Rt.replace(/[\S]/g,"*")),ot==="OPTION"&&Rt){const Pn=We({type:null,tagName:ot,maskInputOptions:ze});Rt=Ze({isMasked:G(P,q,_e,de,He,Pn),element:P,value:Rt,maskInputFn:St})}return{type:V.Text,textContent:Rt||"",isStyle:Qt,rootId:wt}}s(Ue,"serializeTextNode");function Xe(P,B){const{doc:W,blockClass:q,blockSelector:de,unblockSelector:_e,inlineStylesheet:He,maskInputOptions:et={},maskAttributeFn:ze,maskInputFn:St,dataURLOptions:wt={},inlineImages:ot,recordCanvas:Rt,keepIframeSrcFn:Qt,newlyAddedElement:Wt=!1,rootId:_n,maskAllText:jn,maskTextClass:Pn,unmaskTextClass:ri,maskTextSelector:Ni,unmaskTextSelector:gi}=B,Gi=gt(P,q,de,_e),ei=Ft(P);let Mn={};const vi=P.attributes.length;for(let Rn=0;Rn<vi;Rn++){const ni=P.attributes[Rn];ni.name&&!Ge(ei,ni.name,ni.value)&&(Mn[ni.name]=ke(W,ei,ft(ni.name),ni.value,P,ze))}if(ei==="link"&&He){const Rn=Array.from(W.styleSheets).find(ji=>ji.href===P.href);let ni=null;Rn&&(ni=pe(Rn)),ni&&(delete Mn.rel,delete Mn.href,Mn._cssText=Mt(ni,Rn.href))}if(ei==="style"&&P.sheet&&!(P.innerText||P.textContent||"").trim().length){const Rn=pe(P.sheet);Rn&&(Mn._cssText=Mt(Rn,Fe()))}if(ei==="input"||ei==="textarea"||ei==="select"||ei==="option"){const Rn=P,ni=Ke(Rn),ji=Ye(Rn,vt(ei),ni),fr=Rn.checked;if(ni!=="submit"&&ni!=="button"&&ji){const rr=G(Rn,Pn,Ni,ri,gi,We({type:ni,tagName:vt(ei),maskInputOptions:et}));Mn.value=Ze({isMasked:rr,element:Rn,value:ji,maskInputFn:St})}fr&&(Mn.checked=fr)}if(ei==="option"&&(P.selected&&!et.select?Mn.selected=!0:delete Mn.selected),ei==="canvas"&&Rt){if(P.__context==="2d")Pe(P)||(Mn.rr_dataURL=P.toDataURL(wt.type,wt.quality));else if(!("__context"in P)){const Rn=P.toDataURL(wt.type,wt.quality),ni=document.createElement("canvas");ni.width=P.width,ni.height=P.height;const ji=ni.toDataURL(wt.type,wt.quality);Rn!==ji&&(Mn.rr_dataURL=Rn)}}if(ei==="img"&&ot){It||(It=W.createElement("canvas"),ln=It.getContext("2d"));const Rn=P,ni=Rn.crossOrigin;Rn.crossOrigin="anonymous";const ji=s(()=>{Rn.removeEventListener("load",ji);try{It.width=Rn.naturalWidth,It.height=Rn.naturalHeight,ln.drawImage(Rn,0,0),Mn.rr_dataURL=It.toDataURL(wt.type,wt.quality)}catch(fr){console.warn(`Cannot inline img src=${Rn.currentSrc}! Error: ${fr}`)}ni?Mn.crossOrigin=ni:Rn.removeAttribute("crossorigin")},"recordInlineImage");Rn.complete&&Rn.naturalWidth!==0?ji():Rn.addEventListener("load",ji)}if((ei==="audio"||ei==="video")&&(Mn.rr_mediaState=P.paused?"paused":"played",Mn.rr_mediaCurrentTime=P.currentTime),Wt||(P.scrollLeft&&(Mn.rr_scrollLeft=P.scrollLeft),P.scrollTop&&(Mn.rr_scrollTop=P.scrollTop)),Gi){const{width:Rn,height:ni}=P.getBoundingClientRect();Mn={class:Mn.class,rr_width:`${Rn}px`,rr_height:`${ni}px`}}ei==="iframe"&&!Qt(Mn.src)&&(P.contentDocument||(Mn.rr_src=Mn.src),delete Mn.src);let ir;try{customElements.get(ei)&&(ir=!0)}catch{}return{type:V.Element,tagName:ei,attributes:Mn,childNodes:[],isSVG:J(P)||void 0,needBlock:Gi,rootId:_n,isCustom:ir}}s(Xe,"serializeElementNode");function fe(P){return P==null?"":P.toLowerCase()}s(fe,"lowerIfExists");function Te(P,B){if(B.comment&&P.type===V.Comment)return!0;if(P.type===V.Element){if(B.script&&(P.tagName==="script"||P.tagName==="link"&&(P.attributes.rel==="preload"||P.attributes.rel==="modulepreload")&&P.attributes.as==="script"||P.tagName==="link"&&P.attributes.rel==="prefetch"&&typeof P.attributes.href=="string"&&P.attributes.href.endsWith(".js")))return!0;if(B.headFavicon&&(P.tagName==="link"&&P.attributes.rel==="shortcut icon"||P.tagName==="meta"&&(fe(P.attributes.name).match(/^msapplication-tile(image|color)$/)||fe(P.attributes.name)==="application-name"||fe(P.attributes.rel)==="icon"||fe(P.attributes.rel)==="apple-touch-icon"||fe(P.attributes.rel)==="shortcut icon")))return!0;if(P.tagName==="meta"){if(B.headMetaDescKeywords&&fe(P.attributes.name).match(/^description|keywords$/))return!0;if(B.headMetaSocial&&(fe(P.attributes.property).match(/^(og|twitter|fb):/)||fe(P.attributes.name).match(/^(og|twitter):/)||fe(P.attributes.name)==="pinterest"))return!0;if(B.headMetaRobots&&(fe(P.attributes.name)==="robots"||fe(P.attributes.name)==="googlebot"||fe(P.attributes.name)==="bingbot"))return!0;if(B.headMetaHttpEquiv&&P.attributes["http-equiv"]!==void 0)return!0;if(B.headMetaAuthorship&&(fe(P.attributes.name)==="author"||fe(P.attributes.name)==="generator"||fe(P.attributes.name)==="framework"||fe(P.attributes.name)==="publisher"||fe(P.attributes.name)==="progid"||fe(P.attributes.property).match(/^article:/)||fe(P.attributes.property).match(/^product:/)))return!0;if(B.headMetaVerification&&(fe(P.attributes.name)==="google-site-verification"||fe(P.attributes.name)==="yandex-verification"||fe(P.attributes.name)==="csrf-token"||fe(P.attributes.name)==="p:domain_verify"||fe(P.attributes.name)==="verify-v1"||fe(P.attributes.name)==="verification"||fe(P.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}s(Te,"slimDOMExcluded");function k(P,B){const{doc:W,mirror:q,blockClass:de,blockSelector:_e,unblockSelector:He,maskAllText:et,maskTextClass:ze,unmaskTextClass:St,maskTextSelector:wt,unmaskTextSelector:ot,skipChild:Rt=!1,inlineStylesheet:Qt=!0,maskInputOptions:Wt={},maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,slimDOMOptions:ri,dataURLOptions:Ni={},inlineImages:gi=!1,recordCanvas:Gi=!1,onSerialize:ei,onIframeLoad:Mn,iframeLoadTimeout:vi=5e3,onStylesheetLoad:ir,stylesheetLoadTimeout:Rn=5e3,keepIframeSrcFn:ni=s(()=>!1,"keepIframeSrcFn"),newlyAddedElement:ji=!1}=B;let{preserveWhiteSpace:fr=!0}=B;const rr=ge(P,{doc:W,mirror:q,blockClass:de,blockSelector:_e,maskAllText:et,unblockSelector:He,maskTextClass:ze,unmaskTextClass:St,maskTextSelector:wt,unmaskTextSelector:ot,inlineStylesheet:Qt,maskInputOptions:Wt,maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,dataURLOptions:Ni,inlineImages:gi,recordCanvas:Gi,keepIframeSrcFn:ni,newlyAddedElement:ji});if(!rr)return console.warn(P,"not serialized"),null;let kr;q.hasNode(P)?kr=q.getId(P):Te(rr,ri)||!fr&&rr.type===V.Text&&!rr.isStyle&&!rr.textContent.replace(/^\s+|\s+$/gm,"").length?kr=At:kr=Lt();const Li=Object.assign(rr,{id:kr});if(q.add(P,Li),kr===At)return null;ei&&ei(P);let jr=!Rt;if(Li.type===V.Element){jr=jr&&!Li.needBlock,delete Li.needBlock;const or=P.shadowRoot;or&&Y(or)&&(Li.isShadowHost=!0)}if((Li.type===V.Document||Li.type===V.Element)&&jr){ri.headWhitespace&&Li.type===V.Element&&Li.tagName==="head"&&(fr=!1);const or={doc:W,mirror:q,blockClass:de,blockSelector:_e,maskAllText:et,unblockSelector:He,maskTextClass:ze,unmaskTextClass:St,maskTextSelector:wt,unmaskTextSelector:ot,skipChild:Rt,inlineStylesheet:Qt,maskInputOptions:Wt,maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,slimDOMOptions:ri,dataURLOptions:Ni,inlineImages:gi,recordCanvas:Gi,preserveWhiteSpace:fr,onSerialize:ei,onIframeLoad:Mn,iframeLoadTimeout:vi,onStylesheetLoad:ir,stylesheetLoadTimeout:Rn,keepIframeSrcFn:ni};for(const zr of Array.from(P.childNodes)){const Bo=k(zr,or);Bo&&Li.childNodes.push(Bo)}if($(P)&&P.shadowRoot)for(const zr of Array.from(P.shadowRoot.childNodes)){const Bo=k(zr,or);Bo&&(Y(P.shadowRoot)&&(Bo.isShadow=!0),Li.childNodes.push(Bo))}}return P.parentNode&&X(P.parentNode)&&Y(P.parentNode)&&(Li.isShadow=!0),Li.type===V.Element&&Li.tagName==="iframe"&&Z(P,()=>{const or=P.contentDocument;if(or&&Mn){const zr=k(or,{doc:or,mirror:q,blockClass:de,blockSelector:_e,unblockSelector:He,maskAllText:et,maskTextClass:ze,unmaskTextClass:St,maskTextSelector:wt,unmaskTextSelector:ot,skipChild:!1,inlineStylesheet:Qt,maskInputOptions:Wt,maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,slimDOMOptions:ri,dataURLOptions:Ni,inlineImages:gi,recordCanvas:Gi,preserveWhiteSpace:fr,onSerialize:ei,onIframeLoad:Mn,iframeLoadTimeout:vi,onStylesheetLoad:ir,stylesheetLoadTimeout:Rn,keepIframeSrcFn:ni});zr&&Mn(P,zr)}},vi),Li.type===V.Element&&Li.tagName==="link"&&Li.attributes.rel==="stylesheet"&&me(P,()=>{if(ir){const or=k(P,{doc:W,mirror:q,blockClass:de,blockSelector:_e,unblockSelector:He,maskAllText:et,maskTextClass:ze,unmaskTextClass:St,maskTextSelector:wt,unmaskTextSelector:ot,skipChild:!1,inlineStylesheet:Qt,maskInputOptions:Wt,maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,slimDOMOptions:ri,dataURLOptions:Ni,inlineImages:gi,recordCanvas:Gi,preserveWhiteSpace:fr,onSerialize:ei,onIframeLoad:Mn,iframeLoadTimeout:vi,onStylesheetLoad:ir,stylesheetLoadTimeout:Rn,keepIframeSrcFn:ni});or&&ir(P,or)}},Rn),Li}s(k,"serializeNodeWithId");function he(P,B){const{mirror:W=new Me,blockClass:q="rr-block",blockSelector:de=null,unblockSelector:_e=null,maskAllText:He=!1,maskTextClass:et="rr-mask",unmaskTextClass:ze=null,maskTextSelector:St=null,unmaskTextSelector:wt=null,inlineStylesheet:ot=!0,inlineImages:Rt=!1,recordCanvas:Qt=!1,maskAllInputs:Wt=!1,maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,slimDOM:ri=!1,dataURLOptions:Ni,preserveWhiteSpace:gi,onSerialize:Gi,onIframeLoad:ei,iframeLoadTimeout:Mn,onStylesheetLoad:vi,stylesheetLoadTimeout:ir,keepIframeSrcFn:Rn=s(()=>!1,"keepIframeSrcFn")}=B||{};return k(P,{doc:P,mirror:W,blockClass:q,blockSelector:de,unblockSelector:_e,maskAllText:He,maskTextClass:et,unmaskTextClass:ze,maskTextSelector:St,unmaskTextSelector:wt,skipChild:!1,inlineStylesheet:ot,maskInputOptions:Wt===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:Wt===!1?{}:Wt,maskAttributeFn:_n,maskTextFn:jn,maskInputFn:Pn,slimDOMOptions:ri===!0||ri==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:ri==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:ri===!1?{}:ri,dataURLOptions:Ni,inlineImages:Rt,recordCanvas:Qt,preserveWhiteSpace:gi,onSerialize:Gi,onIframeLoad:ei,iframeLoadTimeout:Mn,onStylesheetLoad:vi,stylesheetLoadTimeout:ir,keepIframeSrcFn:Rn,newlyAddedElement:!1})}s(he,"snapshot");function Se(P){let B,W=P[0],q=1;for(;q<P.length;){const de=P[q],_e=P[q+1];if(q+=2,(de==="optionalAccess"||de==="optionalCall")&&W==null)return;de==="access"||de==="optionalAccess"?(B=W,W=_e(W)):(de==="call"||de==="optionalCall")&&(W=_e((...He)=>W.call(B,...He)),B=void 0)}return W}s(Se,"_optionalChain$4");function be(P,B,W=document){const q={capture:!0,passive:!0};return W.addEventListener(P,B,q),()=>W.removeEventListener(P,B,q)}s(be,"on");const te=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Nt={map:{},getId(){return console.error(te),-1},getNode(){return console.error(te),null},removeNodeFromMap(){console.error(te)},has(){return console.error(te),!1},reset(){console.error(te)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Nt=new Proxy(Nt,{get(P,B,W){return B==="map"&&console.error(te),Reflect.get(P,B,W)}}));function nt(P,B,W={}){let q=null,de=0;return function(..._e){const He=Date.now();!de&&W.leading===!1&&(de=He);const et=B-(He-de),ze=this;et<=0||et>B?(q&&(Yi(q),q=null),de=He,P.apply(ze,_e)):!q&&W.trailing!==!1&&(q=hi(()=>{de=W.leading===!1?0:Date.now(),q=null,P.apply(ze,_e)},et))}}s(nt,"throttle$1");function mt(P,B,W,q,de=window){const _e=de.Object.getOwnPropertyDescriptor(P,B);return de.Object.defineProperty(P,B,q?W:{set(He){hi(()=>{W.set.call(this,He)},0),_e&&_e.set&&_e.set.call(this,He)}}),()=>mt(P,B,_e||{},!0)}s(mt,"hookSetter");function pn(P,B,W){try{if(!(B in P))return()=>{};const q=P[B],de=W(q);return typeof de=="function"&&(de.prototype=de.prototype||{},Object.defineProperties(de,{__rrweb_original__:{enumerable:!1,value:q}})),P[B]=de,()=>{P[B]=q}}catch{return()=>{}}}s(pn,"patch");let Pt=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Pt=s(()=>new Date().getTime(),"nowTimestamp"));function Mi(P){const B=P.document;return{left:B.scrollingElement?B.scrollingElement.scrollLeft:P.pageXOffset!==void 0?P.pageXOffset:Se([B,"optionalAccess",W=>W.documentElement,"access",W=>W.scrollLeft])||Se([B,"optionalAccess",W=>W.body,"optionalAccess",W=>W.parentElement,"optionalAccess",W=>W.scrollLeft])||Se([B,"optionalAccess",W=>W.body,"optionalAccess",W=>W.scrollLeft])||0,top:B.scrollingElement?B.scrollingElement.scrollTop:P.pageYOffset!==void 0?P.pageYOffset:Se([B,"optionalAccess",W=>W.documentElement,"access",W=>W.scrollTop])||Se([B,"optionalAccess",W=>W.body,"optionalAccess",W=>W.parentElement,"optionalAccess",W=>W.scrollTop])||Se([B,"optionalAccess",W=>W.body,"optionalAccess",W=>W.scrollTop])||0}}s(Mi,"getWindowScroll");function ai(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}s(ai,"getWindowHeight");function un(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}s(un,"getWindowWidth");function Hn(P){return P?P.nodeType===P.ELEMENT_NODE?P:P.parentElement:null}s(Hn,"closestElementOfNode");function mn(P,B,W,q,de){if(!P)return!1;const _e=Hn(P);if(!_e)return!1;const He=Le(B,W);if(!de){const St=q&&_e.matches(q);return He(_e)&&!St}const et=ae(_e,He);let ze=-1;return et<0?!1:(q&&(ze=ae(_e,Le(null,q))),et>-1&&ze<0?!0:et<ze)}s(mn,"isBlocked");function li(P,B){return B.getId(P)!==-1}s(li,"isSerialized");function Kn(P,B){return B.getId(P)===At}s(Kn,"isIgnored");function lr(P,B){if(X(P))return!1;const W=B.getId(P);return B.has(W)?P.parentNode&&P.parentNode.nodeType===P.DOCUMENT_NODE?!1:P.parentNode?lr(P.parentNode,B):!0:!0}s(lr,"isAncestorRemoved");function kt(P){return Boolean(P.changedTouches)}s(kt,"legacy_isTouchEvent");function Et(P=window){"NodeList"in P&&!P.NodeList.prototype.forEach&&(P.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in P&&!P.DOMTokenList.prototype.forEach&&(P.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...B)=>{let W=B[0];if(!(0 in B))throw new TypeError("1 argument is required");do if(this===W)return!0;while(W=W&&W.parentNode);return!1})}s(Et,"polyfill");function Tn(P,B){return Boolean(P.nodeName==="IFRAME"&&B.getMeta(P))}s(Tn,"isSerializedIframe");function gn(P,B){return Boolean(P.nodeName==="LINK"&&P.nodeType===P.ELEMENT_NODE&&P.getAttribute&&P.getAttribute("rel")==="stylesheet"&&B.getMeta(P))}s(gn,"isSerializedStylesheet");function In(P){return Boolean(Se([P,"optionalAccess",B=>B.shadowRoot]))}s(In,"hasShadowRoot");class Qn{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(B){return c(this.styleIDMap.get(B),()=>-1)}has(B){return this.styleIDMap.has(B)}add(B,W){if(this.has(B))return this.getId(B);let q;return W===void 0?q=this.id++:q=W,this.styleIDMap.set(B,q),this.idStyleMap.set(q,B),q}getStyle(B){return this.idStyleMap.get(B)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}s(Qn,"StyleSheetMirror");function qn(P){let B=null;return Se([P,"access",W=>W.getRootNode,"optionalCall",W=>W(),"optionalAccess",W=>W.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&P.getRootNode().host&&(B=P.getRootNode().host),B}s(qn,"getShadowHost");function Vn(P){let B=P,W;for(;W=qn(B);)B=W;return B}s(Vn,"getRootShadowHost");function Xn(P){const B=P.ownerDocument;if(!B)return!1;const W=Vn(P);return B.contains(W)}s(Xn,"shadowHostInDom");function yi(P){const B=P.ownerDocument;return B?B.contains(P)||Xn(P):!1}s(yi,"inDom");const Si={};function Fn(P){const B=Si[P];if(B)return B;const W=window.document;let q=window[P];if(W&&typeof W.createElement=="function")try{const de=W.createElement("iframe");de.hidden=!0,W.head.appendChild(de);const _e=de.contentWindow;_e&&_e[P]&&(q=_e[P]),W.head.removeChild(de)}catch{}return Si[P]=q.bind(window)}s(Fn,"getImplementation");function xi(...P){return Fn("requestAnimationFrame")(...P)}s(xi,"onRequestAnimationFrame");function hi(...P){return Fn("setTimeout")(...P)}s(hi,"setTimeout$1");function Yi(...P){return Fn("clearTimeout")(...P)}s(Yi,"clearTimeout$1");var L=(P=>(P[P.DomContentLoaded=0]="DomContentLoaded",P[P.Load=1]="Load",P[P.FullSnapshot=2]="FullSnapshot",P[P.IncrementalSnapshot=3]="IncrementalSnapshot",P[P.Meta=4]="Meta",P[P.Custom=5]="Custom",P[P.Plugin=6]="Plugin",P))(L||{}),re=(P=>(P[P.Mutation=0]="Mutation",P[P.MouseMove=1]="MouseMove",P[P.MouseInteraction=2]="MouseInteraction",P[P.Scroll=3]="Scroll",P[P.ViewportResize=4]="ViewportResize",P[P.Input=5]="Input",P[P.TouchMove=6]="TouchMove",P[P.MediaInteraction=7]="MediaInteraction",P[P.StyleSheetRule=8]="StyleSheetRule",P[P.CanvasMutation=9]="CanvasMutation",P[P.Font=10]="Font",P[P.Log=11]="Log",P[P.Drag=12]="Drag",P[P.StyleDeclaration=13]="StyleDeclaration",P[P.Selection=14]="Selection",P[P.AdoptedStyleSheet=15]="AdoptedStyleSheet",P[P.CustomElement=16]="CustomElement",P))(re||{}),we=(P=>(P[P.MouseUp=0]="MouseUp",P[P.MouseDown=1]="MouseDown",P[P.Click=2]="Click",P[P.ContextMenu=3]="ContextMenu",P[P.DblClick=4]="DblClick",P[P.Focus=5]="Focus",P[P.Blur=6]="Blur",P[P.TouchStart=7]="TouchStart",P[P.TouchMove_Departed=8]="TouchMove_Departed",P[P.TouchEnd=9]="TouchEnd",P[P.TouchCancel=10]="TouchCancel",P))(we||{}),$e=(P=>(P[P.Mouse=0]="Mouse",P[P.Pen=1]="Pen",P[P.Touch=2]="Touch",P))($e||{});function yt(P){let B,W=P[0],q=1;for(;q<P.length;){const de=P[q],_e=P[q+1];if(q+=2,(de==="optionalAccess"||de==="optionalCall")&&W==null)return;de==="access"||de==="optionalAccess"?(B=W,W=_e(W)):(de==="call"||de==="optionalCall")&&(W=_e((...He)=>W.call(B,...He)),B=void 0)}return W}s(yt,"_optionalChain$3");function Xt(P){return"__ln"in P}s(Xt,"isNodeInLinkedList");class dn{constructor(){this.length=0,this.head=null,this.tail=null}get(B){if(B>=this.length)throw new Error("Position outside of list range");let W=this.head;for(let q=0;q<B;q++)W=yt([W,"optionalAccess",de=>de.next])||null;return W}addNode(B){const W={value:B,previous:null,next:null};if(B.__ln=W,B.previousSibling&&Xt(B.previousSibling)){const q=B.previousSibling.__ln.next;W.next=q,W.previous=B.previousSibling.__ln,B.previousSibling.__ln.next=W,q&&(q.previous=W)}else if(B.nextSibling&&Xt(B.nextSibling)&&B.nextSibling.__ln.previous){const q=B.nextSibling.__ln.previous;W.previous=q,W.next=B.nextSibling.__ln,B.nextSibling.__ln.previous=W,q&&(q.next=W)}else this.head&&(this.head.previous=W),W.next=this.head,this.head=W;W.next===null&&(this.tail=W),this.length++}removeNode(B){const W=B.__ln;this.head&&(W.previous?(W.previous.next=W.next,W.next?W.next.previous=W.previous:this.tail=W.previous):(this.head=W.next,this.head?this.head.previous=null:this.tail=null),B.__ln&&delete B.__ln,this.length--)}}s(dn,"DoubleLinkedList");const Zt=s((P,B)=>`${P}@${B}`,"moveKey");class qt{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=B=>{B.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const B=[],W=new Set,q=new dn,de=s(ze=>{let St=ze,wt=At;for(;wt===At;)St=St&&St.nextSibling,wt=St&&this.mirror.getId(St);return wt},"getNextId"),_e=s(ze=>{if(!ze.parentNode||!yi(ze))return;const St=X(ze.parentNode)?this.mirror.getId(qn(ze)):this.mirror.getId(ze.parentNode),wt=de(ze);if(St===-1||wt===-1)return q.addNode(ze);const ot=k(ze,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:Rt=>{Tn(Rt,this.mirror)&&this.iframeManager.addIframe(Rt),gn(Rt,this.mirror)&&this.stylesheetManager.trackLinkElement(Rt),In(ze)&&this.shadowDomManager.addShadowRoot(ze.shadowRoot,this.doc)},onIframeLoad:(Rt,Qt)=>{this.iframeManager.attachIframe(Rt,Qt),this.shadowDomManager.observeAttachShadow(Rt)},onStylesheetLoad:(Rt,Qt)=>{this.stylesheetManager.attachLinkElement(Rt,Qt)}});ot&&(B.push({parentId:St,nextId:wt,node:ot}),W.add(ot.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const ze of this.movedSet)wn(this.removes,ze,this.mirror)&&!this.movedSet.has(ze.parentNode)||_e(ze);for(const ze of this.addedSet)!Jn(this.droppedSet,ze)&&!wn(this.removes,ze,this.mirror)||Jn(this.movedSet,ze)?_e(ze):this.droppedSet.add(ze);let He=null;for(;q.length;){let ze=null;if(He){const St=this.mirror.getId(He.value.parentNode),wt=de(He.value);St!==-1&&wt!==-1&&(ze=He)}if(!ze){let St=q.tail;for(;St;){const wt=St;if(St=St.previous,wt){const ot=this.mirror.getId(wt.value.parentNode);if(de(wt.value)===-1)continue;if(ot!==-1){ze=wt;break}else{const Qt=wt.value;if(Qt.parentNode&&Qt.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const Wt=Qt.parentNode.host;if(this.mirror.getId(Wt)!==-1){ze=wt;break}}}}}}if(!ze){for(;q.head;)q.removeNode(q.head.value);break}He=ze.previous,q.removeNode(ze.value),_e(ze.value)}const et={texts:this.texts.map(ze=>({id:this.mirror.getId(ze.node),value:ze.value})).filter(ze=>!W.has(ze.id)).filter(ze=>this.mirror.has(ze.id)),attributes:this.attributes.map(ze=>{const{attributes:St}=ze;if(typeof St.style=="string"){const wt=JSON.stringify(ze.styleDiff),ot=JSON.stringify(ze._unchangedStyles);wt.length<St.style.length&&(wt+ot).split("var(").length===St.style.split("var(").length&&(St.style=ze.styleDiff)}return{id:this.mirror.getId(ze.node),attributes:St}}).filter(ze=>!W.has(ze.id)).filter(ze=>this.mirror.has(ze.id)),removes:this.removes,adds:B};!et.texts.length&&!et.attributes.length&&!et.removes.length&&!et.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(et))},this.processMutation=B=>{if(!Kn(B.target,this.mirror))switch(B.type){case"characterData":{const W=B.target.textContent;!mn(B.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&W!==B.oldValue&&this.texts.push({value:G(B.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&W?this.maskTextFn?this.maskTextFn(W,Hn(B.target)):W.replace(/[\S]/g,"*"):W,node:B.target});break}case"attributes":{const W=B.target;let q=B.attributeName,de=B.target.getAttribute(q);if(q==="value"){const He=Ke(W),et=W.tagName;de=Ye(W,et,He);const ze=We({maskInputOptions:this.maskInputOptions,tagName:et,type:He}),St=G(B.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,ze);de=Ze({isMasked:St,element:W,value:de,maskInputFn:this.maskInputFn})}if(mn(B.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||de===B.oldValue)return;let _e=this.attributeMap.get(B.target);if(W.tagName==="IFRAME"&&q==="src"&&!this.keepIframeSrcFn(de))if(!W.contentDocument)q="rr_src";else return;if(_e||(_e={node:B.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(_e),this.attributeMap.set(B.target,_e)),q==="type"&&W.tagName==="INPUT"&&(B.oldValue||"").toLowerCase()==="password"&&W.setAttribute("data-rr-is-password","true"),!Ge(W.tagName,q)&&(_e.attributes[q]=ke(this.doc,ft(W.tagName),ft(q),de,W,this.maskAttributeFn),q==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const He=this.unattachedDoc.createElement("span");B.oldValue&&He.setAttribute("style",B.oldValue);for(const et of Array.from(W.style)){const ze=W.style.getPropertyValue(et),St=W.style.getPropertyPriority(et);ze!==He.style.getPropertyValue(et)||St!==He.style.getPropertyPriority(et)?St===""?_e.styleDiff[et]=ze:_e.styleDiff[et]=[ze,St]:_e._unchangedStyles[et]=[ze,St]}for(const et of Array.from(He.style))W.style.getPropertyValue(et)===""&&(_e.styleDiff[et]=!1)}break}case"childList":{if(mn(B.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;B.addedNodes.forEach(W=>this.genAdds(W,B.target)),B.removedNodes.forEach(W=>{const q=this.mirror.getId(W),de=X(B.target)?this.mirror.getId(B.target.host):this.mirror.getId(B.target);mn(B.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Kn(W,this.mirror)||!li(W,this.mirror)||(this.addedSet.has(W)?(on(this.addedSet,W),this.droppedSet.add(W)):this.addedSet.has(B.target)&&q===-1||lr(B.target,this.mirror)||(this.movedSet.has(W)&&this.movedMap[Zt(q,de)]?on(this.movedSet,W):this.removes.push({parentId:de,id:q,isShadow:X(B.target)&&Y(B.target)?!0:void 0})),this.mapRemoves.push(W))});break}}},this.genAdds=(B,W)=>{if(!this.processedNodeManager.inOtherBuffer(B,this)&&!(this.addedSet.has(B)||this.movedSet.has(B))){if(this.mirror.hasNode(B)){if(Kn(B,this.mirror))return;this.movedSet.add(B);let q=null;W&&this.mirror.hasNode(W)&&(q=this.mirror.getId(W)),q&&q!==-1&&(this.movedMap[Zt(this.mirror.getId(B),q)]=!0)}else this.addedSet.add(B),this.droppedSet.delete(B);mn(B,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(B.childNodes.forEach(q=>this.genAdds(q)),In(B)&&B.shadowRoot.childNodes.forEach(q=>{this.processedNodeManager.add(q,this),this.genAdds(q,B)}))}}}init(B){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(W=>{this[W]=B[W]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}s(qt,"MutationBuffer");function on(P,B){P.delete(B),B.childNodes.forEach(W=>on(P,W))}s(on,"deepDelete");function wn(P,B,W){return P.length===0?!1:Zn(P,B,W)}s(wn,"isParentRemoved");function Zn(P,B,W){const{parentNode:q}=B;if(!q)return!1;const de=W.getId(q);return P.some(_e=>_e.id===de)?!0:Zn(P,q,W)}s(Zn,"_isParentRemoved");function Jn(P,B){return P.size===0?!1:Ei(P,B)}s(Jn,"isAncestorInSet");function Ei(P,B){const{parentNode:W}=B;return W?P.has(W)?!0:Ei(P,W):!1}s(Ei,"_isAncestorInSet");let $i;function Qi(P){$i=P}s(Qi,"registerErrorHandler");function Sr(){$i=void 0}s(Sr,"unregisterErrorHandler");const On=s(P=>$i?s((...W)=>{try{return P(...W)}catch(q){if($i&&$i(q)===!0)return()=>{};throw q}},"rrwebWrapped"):P,"callbackWrapper");function Ri(P){let B,W=P[0],q=1;for(;q<P.length;){const de=P[q],_e=P[q+1];if(q+=2,(de==="optionalAccess"||de==="optionalCall")&&W==null)return;de==="access"||de==="optionalAccess"?(B=W,W=_e(W)):(de==="call"||de==="optionalCall")&&(W=_e((...He)=>W.call(B,...He)),B=void 0)}return W}s(Ri,"_optionalChain$2");const ci=[];function ki(P){try{if("composedPath"in P){const B=P.composedPath();if(B.length)return B[0]}else if("path"in P&&P.path.length)return P.path[0]}catch{}return P&&P.target}s(ki,"getEventTarget");function rn(P,B){const W=new qt;ci.push(W),W.init(P);let q=window.MutationObserver||window.__rrMutationObserver;const de=Ri([window,"optionalAccess",He=>He.Zone,"optionalAccess",He=>He.__symbol__,"optionalCall",He=>He("MutationObserver")]);de&&window[de]&&(q=window[de]);const _e=new q(On(He=>{P.onMutation&&P.onMutation(He)===!1||W.processMutations.bind(W)(He)}));return _e.observe(B,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),_e}s(rn,"initMutationObserver");function cr({mousemoveCb:P,sampling:B,doc:W,mirror:q}){if(B.mousemove===!1)return()=>{};const de=typeof B.mousemove=="number"?B.mousemove:50,_e=typeof B.mousemoveCallback=="number"?B.mousemoveCallback:500;let He=[],et;const ze=nt(On(ot=>{const Rt=Date.now()-et;P(He.map(Qt=>(Qt.timeOffset-=Rt,Qt)),ot),He=[],et=null}),_e),St=On(nt(On(ot=>{const Rt=ki(ot),{clientX:Qt,clientY:Wt}=kt(ot)?ot.changedTouches[0]:ot;et||(et=Pt()),He.push({x:Qt,y:Wt,id:q.getId(Rt),timeOffset:Pt()-et}),ze(typeof DragEvent<"u"&&ot instanceof DragEvent?re.Drag:ot instanceof MouseEvent?re.MouseMove:re.TouchMove)}),de,{trailing:!1})),wt=[be("mousemove",St,W),be("touchmove",St,W),be("drag",St,W)];return On(()=>{wt.forEach(ot=>ot())})}s(cr,"initMoveObserver");function Sn({mouseInteractionCb:P,doc:B,mirror:W,blockClass:q,blockSelector:de,unblockSelector:_e,sampling:He}){if(He.mouseInteraction===!1)return()=>{};const et=He.mouseInteraction===!0||He.mouseInteraction===void 0?{}:He.mouseInteraction,ze=[];let St=null;const wt=s(ot=>Rt=>{const Qt=ki(Rt);if(mn(Qt,q,de,_e,!0))return;let Wt=null,_n=ot;if("pointerType"in Rt){switch(Rt.pointerType){case"mouse":Wt=$e.Mouse;break;case"touch":Wt=$e.Touch;break;case"pen":Wt=$e.Pen;break}Wt===$e.Touch?we[ot]===we.MouseDown?_n="TouchStart":we[ot]===we.MouseUp&&(_n="TouchEnd"):$e.Pen}else kt(Rt)&&(Wt=$e.Touch);Wt!==null?(St=Wt,(_n.startsWith("Touch")&&Wt===$e.Touch||_n.startsWith("Mouse")&&Wt===$e.Mouse)&&(Wt=null)):we[ot]===we.Click&&(Wt=St,St=null);const jn=kt(Rt)?Rt.changedTouches[0]:Rt;if(!jn)return;const Pn=W.getId(Qt),{clientX:ri,clientY:Ni}=jn;On(P)({type:we[_n],id:Pn,x:ri,y:Ni,...Wt!==null&&{pointerType:Wt}})},"getHandler");return Object.keys(we).filter(ot=>Number.isNaN(Number(ot))&&!ot.endsWith("_Departed")&&et[ot]!==!1).forEach(ot=>{let Rt=ft(ot);const Qt=wt(ot);if(window.PointerEvent)switch(we[ot]){case we.MouseDown:case we.MouseUp:Rt=Rt.replace("mouse","pointer");break;case we.TouchStart:case we.TouchEnd:return}ze.push(be(Rt,Qt,B))}),On(()=>{ze.forEach(ot=>ot())})}s(Sn,"initMouseInteractionObserver");function Zi({scrollCb:P,doc:B,mirror:W,blockClass:q,blockSelector:de,unblockSelector:_e,sampling:He}){const et=On(nt(On(ze=>{const St=ki(ze);if(!St||mn(St,q,de,_e,!0))return;const wt=W.getId(St);if(St===B&&B.defaultView){const ot=Mi(B.defaultView);P({id:wt,x:ot.left,y:ot.top})}else P({id:wt,x:St.scrollLeft,y:St.scrollTop})}),He.scroll||100));return be("scroll",et,B)}s(Zi,"initScrollObserver");function vr({viewportResizeCb:P},{win:B}){let W=-1,q=-1;const de=On(nt(On(()=>{const _e=ai(),He=un();(W!==_e||q!==He)&&(P({width:Number(He),height:Number(_e)}),W=_e,q=He)}),200));return be("resize",de,B)}s(vr,"initViewportResizeObserver");const Rr=["INPUT","TEXTAREA","SELECT"],le=new WeakMap;function ve({inputCb:P,doc:B,mirror:W,blockClass:q,blockSelector:de,unblockSelector:_e,ignoreClass:He,ignoreSelector:et,maskInputOptions:ze,maskInputFn:St,sampling:wt,userTriggeredOnInput:ot,maskTextClass:Rt,unmaskTextClass:Qt,maskTextSelector:Wt,unmaskTextSelector:_n}){function jn(Mn){let vi=ki(Mn);const ir=Mn.isTrusted,Rn=vi&&vt(vi.tagName);if(Rn==="OPTION"&&(vi=vi.parentElement),!vi||!Rn||Rr.indexOf(Rn)<0||mn(vi,q,de,_e,!0))return;const ni=vi;if(ni.classList.contains(He)||et&&ni.matches(et))return;const ji=Ke(vi);let fr=Ye(ni,Rn,ji),rr=!1;const kr=We({maskInputOptions:ze,tagName:Rn,type:ji}),Li=G(vi,Rt,Wt,Qt,_n,kr);(ji==="radio"||ji==="checkbox")&&(rr=vi.checked),fr=Ze({isMasked:Li,element:vi,value:fr,maskInputFn:St}),Pn(vi,ot?{text:fr,isChecked:rr,userTriggered:ir}:{text:fr,isChecked:rr});const jr=vi.name;ji==="radio"&&jr&&rr&&B.querySelectorAll(`input[type="radio"][name="${jr}"]`).forEach(or=>{if(or!==vi){const zr=Ze({isMasked:Li,element:or,value:Ye(or,Rn,ji),maskInputFn:St});Pn(or,ot?{text:zr,isChecked:!rr,userTriggered:!1}:{text:zr,isChecked:!rr})}})}s(jn,"eventHandler");function Pn(Mn,vi){const ir=le.get(Mn);if(!ir||ir.text!==vi.text||ir.isChecked!==vi.isChecked){le.set(Mn,vi);const Rn=W.getId(Mn);On(P)({...vi,id:Rn})}}s(Pn,"cbWithDedup");const Ni=(wt.input==="last"?["change"]:["input","change"]).map(Mn=>be(Mn,On(jn),B)),gi=B.defaultView;if(!gi)return()=>{Ni.forEach(Mn=>Mn())};const Gi=gi.Object.getOwnPropertyDescriptor(gi.HTMLInputElement.prototype,"value"),ei=[[gi.HTMLInputElement.prototype,"value"],[gi.HTMLInputElement.prototype,"checked"],[gi.HTMLSelectElement.prototype,"value"],[gi.HTMLTextAreaElement.prototype,"value"],[gi.HTMLSelectElement.prototype,"selectedIndex"],[gi.HTMLOptionElement.prototype,"selected"]];return Gi&&Gi.set&&Ni.push(...ei.map(Mn=>mt(Mn[0],Mn[1],{set(){On(jn)({target:this,isTrusted:!1})}},!1,gi))),On(()=>{Ni.forEach(Mn=>Mn())})}s(ve,"initInputObserver");function Oe(P){const B=[];function W(q,de){if(Wn("CSSGroupingRule")&&q.parentRule instanceof CSSGroupingRule||Wn("CSSMediaRule")&&q.parentRule instanceof CSSMediaRule||Wn("CSSSupportsRule")&&q.parentRule instanceof CSSSupportsRule||Wn("CSSConditionRule")&&q.parentRule instanceof CSSConditionRule){const He=Array.from(q.parentRule.cssRules).indexOf(q);de.unshift(He)}else if(q.parentStyleSheet){const He=Array.from(q.parentStyleSheet.cssRules).indexOf(q);de.unshift(He)}return de}return s(W,"recurse"),W(P,B)}s(Oe,"getNestedCSSRulePositions");function qe(P,B,W){let q,de;return P?(P.ownerNode?q=B.getId(P.ownerNode):de=W.getId(P),{styleId:de,id:q}):{}}s(qe,"getIdAndStyleId");function dt({styleSheetRuleCb:P,mirror:B,stylesheetManager:W},{win:q}){if(!q.CSSStyleSheet||!q.CSSStyleSheet.prototype)return()=>{};const de=q.CSSStyleSheet.prototype.insertRule;q.CSSStyleSheet.prototype.insertRule=new Proxy(de,{apply:On((wt,ot,Rt)=>{const[Qt,Wt]=Rt,{id:_n,styleId:jn}=qe(ot,B,W.styleMirror);return(_n&&_n!==-1||jn&&jn!==-1)&&P({id:_n,styleId:jn,adds:[{rule:Qt,index:Wt}]}),wt.apply(ot,Rt)})});const _e=q.CSSStyleSheet.prototype.deleteRule;q.CSSStyleSheet.prototype.deleteRule=new Proxy(_e,{apply:On((wt,ot,Rt)=>{const[Qt]=Rt,{id:Wt,styleId:_n}=qe(ot,B,W.styleMirror);return(Wt&&Wt!==-1||_n&&_n!==-1)&&P({id:Wt,styleId:_n,removes:[{index:Qt}]}),wt.apply(ot,Rt)})});let He;q.CSSStyleSheet.prototype.replace&&(He=q.CSSStyleSheet.prototype.replace,q.CSSStyleSheet.prototype.replace=new Proxy(He,{apply:On((wt,ot,Rt)=>{const[Qt]=Rt,{id:Wt,styleId:_n}=qe(ot,B,W.styleMirror);return(Wt&&Wt!==-1||_n&&_n!==-1)&&P({id:Wt,styleId:_n,replace:Qt}),wt.apply(ot,Rt)})}));let et;q.CSSStyleSheet.prototype.replaceSync&&(et=q.CSSStyleSheet.prototype.replaceSync,q.CSSStyleSheet.prototype.replaceSync=new Proxy(et,{apply:On((wt,ot,Rt)=>{const[Qt]=Rt,{id:Wt,styleId:_n}=qe(ot,B,W.styleMirror);return(Wt&&Wt!==-1||_n&&_n!==-1)&&P({id:Wt,styleId:_n,replaceSync:Qt}),wt.apply(ot,Rt)})}));const ze={};fn("CSSGroupingRule")?ze.CSSGroupingRule=q.CSSGroupingRule:(fn("CSSMediaRule")&&(ze.CSSMediaRule=q.CSSMediaRule),fn("CSSConditionRule")&&(ze.CSSConditionRule=q.CSSConditionRule),fn("CSSSupportsRule")&&(ze.CSSSupportsRule=q.CSSSupportsRule));const St={};return Object.entries(ze).forEach(([wt,ot])=>{St[wt]={insertRule:ot.prototype.insertRule,deleteRule:ot.prototype.deleteRule},ot.prototype.insertRule=new Proxy(St[wt].insertRule,{apply:On((Rt,Qt,Wt)=>{const[_n,jn]=Wt,{id:Pn,styleId:ri}=qe(Qt.parentStyleSheet,B,W.styleMirror);return(Pn&&Pn!==-1||ri&&ri!==-1)&&P({id:Pn,styleId:ri,adds:[{rule:_n,index:[...Oe(Qt),jn||0]}]}),Rt.apply(Qt,Wt)})}),ot.prototype.deleteRule=new Proxy(St[wt].deleteRule,{apply:On((Rt,Qt,Wt)=>{const[_n]=Wt,{id:jn,styleId:Pn}=qe(Qt.parentStyleSheet,B,W.styleMirror);return(jn&&jn!==-1||Pn&&Pn!==-1)&&P({id:jn,styleId:Pn,removes:[{index:[...Oe(Qt),_n]}]}),Rt.apply(Qt,Wt)})})}),On(()=>{q.CSSStyleSheet.prototype.insertRule=de,q.CSSStyleSheet.prototype.deleteRule=_e,He&&(q.CSSStyleSheet.prototype.replace=He),et&&(q.CSSStyleSheet.prototype.replaceSync=et),Object.entries(ze).forEach(([wt,ot])=>{ot.prototype.insertRule=St[wt].insertRule,ot.prototype.deleteRule=St[wt].deleteRule})})}s(dt,"initStyleSheetObserver");function ct({mirror:P,stylesheetManager:B},W){let q=null;W.nodeName==="#document"?q=P.getId(W):q=P.getId(W.host);const de=W.nodeName==="#document"?Ri([W,"access",He=>He.defaultView,"optionalAccess",He=>He.Document]):Ri([W,"access",He=>He.ownerDocument,"optionalAccess",He=>He.defaultView,"optionalAccess",He=>He.ShadowRoot]),_e=Ri([de,"optionalAccess",He=>He.prototype])?Object.getOwnPropertyDescriptor(Ri([de,"optionalAccess",He=>He.prototype]),"adoptedStyleSheets"):void 0;return q===null||q===-1||!de||!_e?()=>{}:(Object.defineProperty(W,"adoptedStyleSheets",{configurable:_e.configurable,enumerable:_e.enumerable,get(){return Ri([_e,"access",He=>He.get,"optionalAccess",He=>He.call,"call",He=>He(this)])},set(He){const et=Ri([_e,"access",ze=>ze.set,"optionalAccess",ze=>ze.call,"call",ze=>ze(this,He)]);if(q!==null&&q!==-1)try{B.adoptStyleSheets(He,q)}catch{}return et}}),On(()=>{Object.defineProperty(W,"adoptedStyleSheets",{configurable:_e.configurable,enumerable:_e.enumerable,get:_e.get,set:_e.set})}))}s(ct,"initAdoptedStyleSheetObserver");function Bt({styleDeclarationCb:P,mirror:B,ignoreCSSAttributes:W,stylesheetManager:q},{win:de}){const _e=de.CSSStyleDeclaration.prototype.setProperty;de.CSSStyleDeclaration.prototype.setProperty=new Proxy(_e,{apply:On((et,ze,St)=>{const[wt,ot,Rt]=St;if(W.has(wt))return _e.apply(ze,[wt,ot,Rt]);const{id:Qt,styleId:Wt}=qe(Ri([ze,"access",_n=>_n.parentRule,"optionalAccess",_n=>_n.parentStyleSheet]),B,q.styleMirror);return(Qt&&Qt!==-1||Wt&&Wt!==-1)&&P({id:Qt,styleId:Wt,set:{property:wt,value:ot,priority:Rt},index:Oe(ze.parentRule)}),et.apply(ze,St)})});const He=de.CSSStyleDeclaration.prototype.removeProperty;return de.CSSStyleDeclaration.prototype.removeProperty=new Proxy(He,{apply:On((et,ze,St)=>{const[wt]=St;if(W.has(wt))return He.apply(ze,[wt]);const{id:ot,styleId:Rt}=qe(Ri([ze,"access",Qt=>Qt.parentRule,"optionalAccess",Qt=>Qt.parentStyleSheet]),B,q.styleMirror);return(ot&&ot!==-1||Rt&&Rt!==-1)&&P({id:ot,styleId:Rt,remove:{property:wt},index:Oe(ze.parentRule)}),et.apply(ze,St)})}),On(()=>{de.CSSStyleDeclaration.prototype.setProperty=_e,de.CSSStyleDeclaration.prototype.removeProperty=He})}s(Bt,"initStyleDeclarationObserver");function en({mediaInteractionCb:P,blockClass:B,blockSelector:W,unblockSelector:q,mirror:de,sampling:_e,doc:He}){const et=On(St=>nt(On(wt=>{const ot=ki(wt);if(!ot||mn(ot,B,W,q,!0))return;const{currentTime:Rt,volume:Qt,muted:Wt,playbackRate:_n}=ot;P({type:St,id:de.getId(ot),currentTime:Rt,volume:Qt,muted:Wt,playbackRate:_n})}),_e.media||500)),ze=[be("play",et(0),He),be("pause",et(1),He),be("seeked",et(2),He),be("volumechange",et(3),He),be("ratechange",et(4),He)];return On(()=>{ze.forEach(St=>St())})}s(en,"initMediaInteractionObserver");function nn({fontCb:P,doc:B}){const W=B.defaultView;if(!W)return()=>{};const q=[],de=new WeakMap,_e=W.FontFace;W.FontFace=s(function(ze,St,wt){const ot=new _e(ze,St,wt);return de.set(ot,{family:ze,buffer:typeof St!="string",descriptors:wt,fontSource:typeof St=="string"?St:JSON.stringify(Array.from(new Uint8Array(St)))}),ot},"FontFace");const He=pn(B.fonts,"add",function(et){return function(ze){return hi(On(()=>{const St=de.get(ze);St&&(P(St),de.delete(ze))}),0),et.apply(this,[ze])}});return q.push(()=>{W.FontFace=_e}),q.push(He),On(()=>{q.forEach(et=>et())})}s(nn,"initFontObserver");function Ut(P){const{doc:B,mirror:W,blockClass:q,blockSelector:de,unblockSelector:_e,selectionCb:He}=P;let et=!0;const ze=On(()=>{const St=B.getSelection();if(!St||et&&Ri([St,"optionalAccess",Rt=>Rt.isCollapsed]))return;et=St.isCollapsed||!1;const wt=[],ot=St.rangeCount||0;for(let Rt=0;Rt<ot;Rt++){const Qt=St.getRangeAt(Rt),{startContainer:Wt,startOffset:_n,endContainer:jn,endOffset:Pn}=Qt;mn(Wt,q,de,_e,!0)||mn(jn,q,de,_e,!0)||wt.push({start:W.getId(Wt),startOffset:_n,end:W.getId(jn),endOffset:Pn})}He({ranges:wt})});return ze(),be("selectionchange",ze)}s(Ut,"initSelectionObserver");function Nn({doc:P,customElementCb:B}){const W=P.defaultView;return!W||!W.customElements?()=>{}:pn(W.customElements,"define",function(de){return function(_e,He,et){try{B({define:{name:_e}})}catch{}return de.apply(this,[_e,He,et])}})}s(Nn,"initCustomElementObserver");function bt(P,B={}){const W=P.doc.defaultView;if(!W)return()=>{};const q=rn(P,P.doc),de=cr(P),_e=Sn(P),He=Zi(P),et=vr(P,{win:W}),ze=ve(P),St=en(P),wt=dt(P,{win:W}),ot=ct(P,P.doc),Rt=Bt(P,{win:W}),Qt=P.collectFonts?nn(P):()=>{},Wt=Ut(P),_n=Nn(P),jn=[];for(const Pn of P.plugins)jn.push(Pn.observer(Pn.callback,W,Pn.options));return On(()=>{ci.forEach(Pn=>Pn.reset()),q.disconnect(),de(),_e(),He(),et(),ze(),St(),wt(),ot(),Rt(),Qt(),Wt(),_n(),jn.forEach(Pn=>Pn())})}s(bt,"initObservers");function Wn(P){return typeof window[P]<"u"}s(Wn,"hasNestedCSSRule");function fn(P){return Boolean(typeof window[P]<"u"&&window[P].prototype&&"insertRule"in window[P].prototype&&"deleteRule"in window[P].prototype)}s(fn,"canMonkeyPatchNestedCSSRule");class ii{constructor(B){this.generateIdFn=B,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(B,W,q,de){const _e=q||this.getIdToRemoteIdMap(B),He=de||this.getRemoteIdToIdMap(B);let et=_e.get(W);return et||(et=this.generateIdFn(),_e.set(W,et),He.set(et,W)),et}getIds(B,W){const q=this.getIdToRemoteIdMap(B),de=this.getRemoteIdToIdMap(B);return W.map(_e=>this.getId(B,_e,q,de))}getRemoteId(B,W,q){const de=q||this.getRemoteIdToIdMap(B);if(typeof W!="number")return W;const _e=de.get(W);return _e||-1}getRemoteIds(B,W){const q=this.getRemoteIdToIdMap(B);return W.map(de=>this.getRemoteId(B,de,q))}reset(B){if(!B){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(B),this.iframeRemoteIdToIdMap.delete(B)}getIdToRemoteIdMap(B){let W=this.iframeIdToRemoteIdMap.get(B);return W||(W=new Map,this.iframeIdToRemoteIdMap.set(B,W)),W}getRemoteIdToIdMap(B){let W=this.iframeRemoteIdToIdMap.get(B);return W||(W=new Map,this.iframeRemoteIdToIdMap.set(B,W)),W}}s(ii,"CrossOriginIframeMirror");function Ui(P){let B,W=P[0],q=1;for(;q<P.length;){const de=P[q],_e=P[q+1];if(q+=2,(de==="optionalAccess"||de==="optionalCall")&&W==null)return;de==="access"||de==="optionalAccess"?(B=W,W=_e(W)):(de==="call"||de==="optionalCall")&&(W=_e((...He)=>W.call(B,...He)),B=void 0)}return W}s(Ui,"_optionalChain$1");class pi{constructor(){this.crossOriginIframeMirror=new ii(Lt),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}s(pi,"IframeManagerNoop");class cn{constructor(B){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ii(Lt),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=B.mutationCb,this.wrappedEmit=B.wrappedEmit,this.stylesheetManager=B.stylesheetManager,this.recordCrossOriginIframes=B.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ii(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=B.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(B){this.iframes.set(B,!0),B.contentWindow&&this.crossOriginIframeMap.set(B.contentWindow,B)}addLoadListener(B){this.loadListener=B}attachIframe(B,W){this.mutationCb({adds:[{parentId:this.mirror.getId(B),nextId:null,node:W}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Ui([this,"access",q=>q.loadListener,"optionalCall",q=>q(B)]),B.contentDocument&&B.contentDocument.adoptedStyleSheets&&B.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(B.contentDocument.adoptedStyleSheets,this.mirror.getId(B.contentDocument))}handleMessage(B){const W=B;if(W.data.type!=="rrweb"||W.origin!==W.data.origin||!B.source)return;const de=this.crossOriginIframeMap.get(B.source);if(!de)return;const _e=this.transformCrossOriginEvent(de,W.data.event);_e&&this.wrappedEmit(_e,W.data.isCheckout)}transformCrossOriginEvent(B,W){switch(W.type){case L.FullSnapshot:{this.crossOriginIframeMirror.reset(B),this.crossOriginIframeStyleMirror.reset(B),this.replaceIdOnNode(W.data.node,B);const q=W.data.node.id;return this.crossOriginIframeRootIdMap.set(B,q),this.patchRootIdOnNode(W.data.node,q),{timestamp:W.timestamp,type:L.IncrementalSnapshot,data:{source:re.Mutation,adds:[{parentId:this.mirror.getId(B),nextId:null,node:W.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case L.Meta:case L.Load:case L.DomContentLoaded:return!1;case L.Plugin:return W;case L.Custom:return this.replaceIds(W.data.payload,B,["id","parentId","previousId","nextId"]),W;case L.IncrementalSnapshot:switch(W.data.source){case re.Mutation:return W.data.adds.forEach(q=>{this.replaceIds(q,B,["parentId","nextId","previousId"]),this.replaceIdOnNode(q.node,B);const de=this.crossOriginIframeRootIdMap.get(B);de&&this.patchRootIdOnNode(q.node,de)}),W.data.removes.forEach(q=>{this.replaceIds(q,B,["parentId","id"])}),W.data.attributes.forEach(q=>{this.replaceIds(q,B,["id"])}),W.data.texts.forEach(q=>{this.replaceIds(q,B,["id"])}),W;case re.Drag:case re.TouchMove:case re.MouseMove:return W.data.positions.forEach(q=>{this.replaceIds(q,B,["id"])}),W;case re.ViewportResize:return!1;case re.MediaInteraction:case re.MouseInteraction:case re.Scroll:case re.CanvasMutation:case re.Input:return this.replaceIds(W.data,B,["id"]),W;case re.StyleSheetRule:case re.StyleDeclaration:return this.replaceIds(W.data,B,["id"]),this.replaceStyleIds(W.data,B,["styleId"]),W;case re.Font:return W;case re.Selection:return W.data.ranges.forEach(q=>{this.replaceIds(q,B,["start","end"])}),W;case re.AdoptedStyleSheet:return this.replaceIds(W.data,B,["id"]),this.replaceStyleIds(W.data,B,["styleIds"]),Ui([W,"access",q=>q.data,"access",q=>q.styles,"optionalAccess",q=>q.forEach,"call",q=>q(de=>{this.replaceStyleIds(de,B,["styleId"])})]),W}}return!1}replace(B,W,q,de){for(const _e of de)!Array.isArray(W[_e])&&typeof W[_e]!="number"||(Array.isArray(W[_e])?W[_e]=B.getIds(q,W[_e]):W[_e]=B.getId(q,W[_e]));return W}replaceIds(B,W,q){return this.replace(this.crossOriginIframeMirror,B,W,q)}replaceStyleIds(B,W,q){return this.replace(this.crossOriginIframeStyleMirror,B,W,q)}replaceIdOnNode(B,W){this.replaceIds(B,W,["id","rootId"]),"childNodes"in B&&B.childNodes.forEach(q=>{this.replaceIdOnNode(q,W)})}patchRootIdOnNode(B,W){B.type!==V.Document&&!B.rootId&&(B.rootId=W),"childNodes"in B&&B.childNodes.forEach(q=>{this.patchRootIdOnNode(q,W)})}}s(cn,"IframeManager");class En{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}s(En,"ShadowDomManagerNoop");class Un{constructor(B){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=B.mutationCb,this.scrollCb=B.scrollCb,this.bypassOptions=B.bypassOptions,this.mirror=B.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(B,W){if(!Y(B)||this.shadowDoms.has(B))return;this.shadowDoms.add(B);const q=rn({...this.bypassOptions,doc:W,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},B);this.restoreHandlers.push(()=>q.disconnect()),this.restoreHandlers.push(Zi({...this.bypassOptions,scrollCb:this.scrollCb,doc:B,mirror:this.mirror})),hi(()=>{B.adoptedStyleSheets&&B.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(B.adoptedStyleSheets,this.mirror.getId(B.host)),this.restoreHandlers.push(ct({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},B))},0)}observeAttachShadow(B){!B.contentWindow||!B.contentDocument||this.patchAttachShadow(B.contentWindow.Element,B.contentDocument)}patchAttachShadow(B,W){const q=this;this.restoreHandlers.push(pn(B.prototype,"attachShadow",function(de){return function(_e){const He=de.call(this,_e);return this.shadowRoot&&yi(this)&&q.addShadowRoot(this.shadowRoot,W),He}}))}reset(){this.restoreHandlers.forEach(B=>{try{B()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}s(Un,"ShadowDomManager");class Yn{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}s(Yn,"CanvasManagerNoop");class Vi{constructor(B){this.trackedLinkElements=new WeakSet,this.styleMirror=new Qn,this.mutationCb=B.mutationCb,this.adoptedStyleSheetCb=B.adoptedStyleSheetCb}attachLinkElement(B,W){"_cssText"in W.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:W.id,attributes:W.attributes}]}),this.trackLinkElement(B)}trackLinkElement(B){this.trackedLinkElements.has(B)||(this.trackedLinkElements.add(B),this.trackStylesheetInLinkElement(B))}adoptStyleSheets(B,W){if(B.length===0)return;const q={id:W,styleIds:[]},de=[];for(const _e of B){let He;this.styleMirror.has(_e)?He=this.styleMirror.getId(_e):(He=this.styleMirror.add(_e),de.push({styleId:He,rules:Array.from(_e.rules||CSSRule,(et,ze)=>({rule:Ee(et),index:ze}))})),q.styleIds.push(He)}de.length>0&&(q.styles=de),this.adoptedStyleSheetCb(q)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(B){}}s(Vi,"StylesheetManager");class qi{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){xi(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(B,W){const q=this.nodeMap.get(B);return q&&Array.from(q).some(de=>de!==W)}add(B,W){this.nodeMap.set(B,(this.nodeMap.get(B)||new Set).add(W))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}s(qi,"ProcessedNodeManager");let Bn,gr;const mi=je();function Ki(P={}){const{emit:B,checkoutEveryNms:W,checkoutEveryNth:q,blockClass:de="rr-block",blockSelector:_e=null,unblockSelector:He=null,ignoreClass:et="rr-ignore",ignoreSelector:ze=null,maskAllText:St=!1,maskTextClass:wt="rr-mask",unmaskTextClass:ot=null,maskTextSelector:Rt=null,unmaskTextSelector:Qt=null,inlineStylesheet:Wt=!0,maskAllInputs:_n,maskInputOptions:jn,slimDOMOptions:Pn,maskAttributeFn:ri,maskInputFn:Ni,maskTextFn:gi,maxCanvasSize:Gi=null,packFn:ei,sampling:Mn={},dataURLOptions:vi={},mousemoveWait:ir,recordCanvas:Rn=!1,recordCrossOriginIframes:ni=!1,recordAfter:ji=P.recordAfter==="DOMContentLoaded"?P.recordAfter:"load",userTriggeredOnInput:fr=!1,collectFonts:rr=!1,inlineImages:kr=!1,plugins:Li,keepIframeSrcFn:jr=s(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:or=new Set([]),errorHandler:zr,onMutation:Bo,getCanvasManager:bd}=P;Qi(zr);const $a=ni?window.parent===window:!0;let Qs=!1;if(!$a)try{window.parent.document&&(Qs=!1)}catch{Qs=!0}if($a&&!B)throw new Error("emit function is required");ir!==void 0&&Mn.mousemove===void 0&&(Mn.mousemove=ir),mi.reset();const fc=_n===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:jn!==void 0?jn:{},Ds=Pn===!0||Pn==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:Pn==="all",headMetaDescKeywords:Pn==="all"}:Pn||{};Et();let hc,Ka=0;const pc=s(Oi=>{for(const to of Li||[])to.eventProcessor&&(Oi=to.eventProcessor(Oi));return ei&&!Qs&&(Oi=ei(Oi)),Oi},"eventProcessor");Bn=s((Oi,to)=>{const bi=Oi;if(bi.timestamp=Pt(),h([ci,"access",zi=>zi[0],"optionalAccess",zi=>zi.isFrozen,"call",zi=>zi()])&&bi.type!==L.FullSnapshot&&!(bi.type===L.IncrementalSnapshot&&bi.data.source===re.Mutation)&&ci.forEach(zi=>zi.unfreeze()),$a)h([B,"optionalCall",zi=>zi(pc(bi),to)]);else if(Qs){const zi={type:"rrweb",event:pc(bi),origin:window.location.origin,isCheckout:to};window.parent.postMessage(zi,"*")}if(bi.type===L.FullSnapshot)hc=bi,Ka=0;else if(bi.type===L.IncrementalSnapshot){if(bi.data.source===re.Mutation&&bi.data.isAttachIframe)return;Ka++;const zi=q&&Ka>=q,Ti=W&&hc&&bi.timestamp-hc.timestamp>W;(zi||Ti)&&qs(!0)}},"wrappedEmit");const Zs=s(Oi=>{Bn({type:L.IncrementalSnapshot,data:{source:re.Mutation,...Oi}})},"wrappedMutationEmit"),Ja=s(Oi=>Bn({type:L.IncrementalSnapshot,data:{source:re.Scroll,...Oi}}),"wrappedScrollEmit"),_d=s(Oi=>Bn({type:L.IncrementalSnapshot,data:{source:re.CanvasMutation,...Oi}}),"wrappedCanvasMutationEmit"),hs=s(Oi=>Bn({type:L.IncrementalSnapshot,data:{source:re.AdoptedStyleSheet,...Oi}}),"wrappedAdoptedStyleSheetEmit"),po=new Vi({mutationCb:Zs,adoptedStyleSheetCb:hs}),To=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new pi:new cn({mirror:mi,mutationCb:Zs,stylesheetManager:po,recordCrossOriginIframes:ni,wrappedEmit:Bn});for(const Oi of Li||[])Oi.getMirror&&Oi.getMirror({nodeMirror:mi,crossOriginIframeMirror:To.crossOriginIframeMirror,crossOriginIframeStyleMirror:To.crossOriginIframeStyleMirror});const Ya=new qi,Cd=Yr(bd,{mirror:mi,win:window,mutationCb:Oi=>Bn({type:L.IncrementalSnapshot,data:{source:re.CanvasMutation,...Oi}}),recordCanvas:Rn,blockClass:de,blockSelector:_e,unblockSelector:He,maxCanvasSize:Gi,sampling:Mn.canvas,dataURLOptions:vi,errorHandler:zr}),As=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new En:new Un({mutationCb:Zs,scrollCb:Ja,bypassOptions:{onMutation:Bo,blockClass:de,blockSelector:_e,unblockSelector:He,maskAllText:St,maskTextClass:wt,unmaskTextClass:ot,maskTextSelector:Rt,unmaskTextSelector:Qt,inlineStylesheet:Wt,maskInputOptions:fc,dataURLOptions:vi,maskAttributeFn:ri,maskTextFn:gi,maskInputFn:Ni,recordCanvas:Rn,inlineImages:kr,sampling:Mn,slimDOMOptions:Ds,iframeManager:To,stylesheetManager:po,canvasManager:Cd,keepIframeSrcFn:jr,processedNodeManager:Ya},mirror:mi}),qs=s((Oi=!1)=>{Bn({type:L.Meta,data:{href:window.location.href,width:un(),height:ai()}},Oi),po.reset(),As.init(),ci.forEach(bi=>bi.lock());const to=he(document,{mirror:mi,blockClass:de,blockSelector:_e,unblockSelector:He,maskAllText:St,maskTextClass:wt,unmaskTextClass:ot,maskTextSelector:Rt,unmaskTextSelector:Qt,inlineStylesheet:Wt,maskAllInputs:fc,maskAttributeFn:ri,maskInputFn:Ni,maskTextFn:gi,slimDOM:Ds,dataURLOptions:vi,recordCanvas:Rn,inlineImages:kr,onSerialize:bi=>{Tn(bi,mi)&&To.addIframe(bi),gn(bi,mi)&&po.trackLinkElement(bi),In(bi)&&As.addShadowRoot(bi.shadowRoot,document)},onIframeLoad:(bi,zi)=>{To.attachIframe(bi,zi),As.observeAttachShadow(bi)},onStylesheetLoad:(bi,zi)=>{po.attachLinkElement(bi,zi)},keepIframeSrcFn:jr});if(!to)return console.warn("Failed to snapshot the document");Bn({type:L.FullSnapshot,data:{node:to,initialOffset:Mi(window)}}),ci.forEach(bi=>bi.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&po.adoptStyleSheets(document.adoptedStyleSheets,mi.getId(document))},"takeFullSnapshot");gr=qs;try{const Oi=[],to=s(zi=>On(bt)({onMutation:Bo,mutationCb:Zs,mousemoveCb:(Ti,Ko)=>Bn({type:L.IncrementalSnapshot,data:{source:Ko,positions:Ti}}),mouseInteractionCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.MouseInteraction,...Ti}}),scrollCb:Ja,viewportResizeCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.ViewportResize,...Ti}}),inputCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.Input,...Ti}}),mediaInteractionCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.MediaInteraction,...Ti}}),styleSheetRuleCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.StyleSheetRule,...Ti}}),styleDeclarationCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.StyleDeclaration,...Ti}}),canvasMutationCb:_d,fontCb:Ti=>Bn({type:L.IncrementalSnapshot,data:{source:re.Font,...Ti}}),selectionCb:Ti=>{Bn({type:L.IncrementalSnapshot,data:{source:re.Selection,...Ti}})},customElementCb:Ti=>{Bn({type:L.IncrementalSnapshot,data:{source:re.CustomElement,...Ti}})},blockClass:de,ignoreClass:et,ignoreSelector:ze,maskAllText:St,maskTextClass:wt,unmaskTextClass:ot,maskTextSelector:Rt,unmaskTextSelector:Qt,maskInputOptions:fc,inlineStylesheet:Wt,sampling:Mn,recordCanvas:Rn,inlineImages:kr,userTriggeredOnInput:fr,collectFonts:rr,doc:zi,maskAttributeFn:ri,maskInputFn:Ni,maskTextFn:gi,keepIframeSrcFn:jr,blockSelector:_e,unblockSelector:He,slimDOMOptions:Ds,dataURLOptions:vi,mirror:mi,iframeManager:To,stylesheetManager:po,shadowDomManager:As,processedNodeManager:Ya,canvasManager:Cd,ignoreCSSAttributes:or,plugins:h([Li,"optionalAccess",Ti=>Ti.filter,"call",Ti=>Ti(Ko=>Ko.observer),"optionalAccess",Ti=>Ti.map,"call",Ti=>Ti(Ko=>({observer:Ko.observer,options:Ko.options,callback:ea=>Bn({type:L.Plugin,data:{plugin:Ko.name,payload:ea}})}))])||[]},{}),"observe");To.addLoadListener(zi=>{try{Oi.push(to(zi.contentDocument))}catch(Ti){console.warn(Ti)}});const bi=s(()=>{qs(),Oi.push(to(document))},"init");return document.readyState==="interactive"||document.readyState==="complete"?bi():(Oi.push(be("DOMContentLoaded",()=>{Bn({type:L.DomContentLoaded,data:{}}),ji==="DOMContentLoaded"&&bi()})),Oi.push(be("load",()=>{Bn({type:L.Load,data:{}}),ji==="load"&&bi()},window))),()=>{Oi.forEach(zi=>zi()),Ya.destroy(),gr=void 0,Sr()}}catch(Oi){console.warn(Oi)}}s(Ki,"record");function Ur(P){if(!gr)throw new Error("please take full snapshot after start recording");gr(P)}s(Ur,"takeFullSnapshot"),Ki.mirror=mi,Ki.takeFullSnapshot=Ur;function Yr(P,B){try{return P?P(B):new Yn}catch{return console.warn("Unable to initialize CanvasManager"),new Yn}}s(Yr,"_getCanvasManager");const oo=3,so=5;function Pr(P){return P>9999999999?P:P*1e3}s(Pr,"timestampToMs");function Vr(P){return P>9999999999?P/1e3:P}s(Vr,"timestampToS");function er(P,B){B.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(B.category)?P.triggerUserActivity():P.checkAndHandleExpiredSession(),P.addUpdate(()=>(P.throttledAddEvent({type:L.Custom,timestamp:(B.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:p.normalize(B,10,1e3)}}),B.category==="console")))}s(er,"addBreadcrumbEvent");const Or="button,a";function Hr(P){return P.closest(Or)||P}s(Hr,"getClosestInteractive");function Hi(P){const B=yr(P);return!B||!(B instanceof Element)?B:Hr(B)}s(Hi,"getClickTargetNode");function yr(P){return Xr(P)?P.target:P}s(yr,"getTargetNode");function Xr(P){return typeof P=="object"&&!!P&&"target"in P}s(Xr,"isEventWithTarget");let Ai;function Eo(P){return Ai||(Ai=[],Go()),Ai.push(P),()=>{const B=Ai?Ai.indexOf(P):-1;B>-1&&Ai.splice(B,1)}}s(Eo,"onWindowOpen");function Go(){p.fill(r,"open",function(P){return function(...B){if(Ai)try{Ai.forEach(W=>W())}catch{}return P.apply(r,B)}})}s(Go,"monkeyPatchWindowOpen");function jo(P,B,W){P.handleClick(B,W)}s(jo,"handleClick");class bo{constructor(B,W,q=er){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=W.timeout/1e3,this._threshold=W.threshold/1e3,this._scollTimeout=W.scrollTimeout/1e3,this._replay=B,this._ignoreSelector=W.ignoreSelector,this._addBreadcrumbEvent=q}addListeners(){const B=Eo(()=>{this._lastMutation=dr()});this._teardown=()=>{B(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(B,W){if(Ji(W,this._ignoreSelector)||!Xi(B))return;const q={timestamp:Vr(B.timestamp),clickBreadcrumb:B,clickCount:0,node:W};this._clicks.some(de=>de.node===q.node&&Math.abs(de.timestamp-q.timestamp)<1)||(this._clicks.push(q),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(B=Date.now()){this._lastMutation=Vr(B)}registerScroll(B=Date.now()){this._lastScroll=Vr(B)}registerClick(B){const W=Hr(B);this._handleMultiClick(W)}_handleMultiClick(B){this._getClicks(B).forEach(W=>{W.clickCount++})}_getClicks(B){return this._clicks.filter(W=>W.node===B)}_checkClicks(){const B=[],W=dr();this._clicks.forEach(q=>{!q.mutationAfter&&this._lastMutation&&(q.mutationAfter=q.timestamp<=this._lastMutation?this._lastMutation-q.timestamp:void 0),!q.scrollAfter&&this._lastScroll&&(q.scrollAfter=q.timestamp<=this._lastScroll?this._lastScroll-q.timestamp:void 0),q.timestamp+this._timeout<=W&&B.push(q)});for(const q of B){const de=this._clicks.indexOf(q);de>-1&&(this._generateBreadcrumbs(q),this._clicks.splice(de,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(B){const W=this._replay,q=B.scrollAfter&&B.scrollAfter<=this._scollTimeout,de=B.mutationAfter&&B.mutationAfter<=this._threshold,_e=!q&&!de,{clickCount:He,clickBreadcrumb:et}=B;if(_e){const ze=Math.min(B.mutationAfter||this._timeout,this._timeout)*1e3,St=ze<this._timeout*1e3?"mutation":"timeout",wt={type:"default",message:et.message,timestamp:et.timestamp,category:"ui.slowClickDetected",data:{...et.data,url:r.location.href,route:W.getCurrentRoute(),timeAfterClickMs:ze,endReason:St,clickCount:He||1}};this._addBreadcrumbEvent(W,wt);return}if(He>1){const ze={type:"default",message:et.message,timestamp:et.timestamp,category:"ui.multiClick",data:{...et.data,url:r.location.href,route:W.getCurrentRoute(),clickCount:He,metric:!0}};this._addBreadcrumbEvent(W,ze)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}s(bo,"ClickDetector");const Ci=["A","BUTTON","INPUT"];function Ji(P,B){return!!(!Ci.includes(P.tagName)||P.tagName==="INPUT"&&!["submit","button"].includes(P.getAttribute("type")||"")||P.tagName==="A"&&(P.hasAttribute("download")||P.hasAttribute("target")&&P.getAttribute("target")!=="_self")||B&&P.matches(B))}s(Ji,"ignoreElement");function Xi(P){return!!(P.data&&typeof P.data.nodeId=="number"&&P.timestamp)}s(Xi,"isClickBreadcrumb");function dr(){return Date.now()/1e3}s(dr,"nowInSeconds");function tr(P,B){try{if(!ao(B))return;const{source:W}=B.data;if(W===re.Mutation&&P.registerMutation(B.timestamp),W===re.Scroll&&P.registerScroll(B.timestamp),Wr(B)){const{type:q,id:de}=B.data,_e=Ki.mirror.getNode(de);_e instanceof HTMLElement&&q===we.Click&&P.registerClick(_e)}}catch{}}s(tr,"updateClickDetectorForRecordingEvent");function ao(P){return P.type===oo}s(ao,"isIncrementalEvent");function Wr(P){return P.data.source===re.MouseInteraction}s(Wr,"isIncrementalMouseInteraction");function Ar(P){return{timestamp:Date.now()/1e3,type:"default",...P}}s(Ar,"createBreadcrumb");var _o;(function(P){P[P.Document=0]="Document",P[P.DocumentType=1]="DocumentType",P[P.Element=2]="Element",P[P.Text=3]="Text",P[P.CDATA=4]="CDATA",P[P.Comment=5]="Comment"})(_o||(_o={}));const os=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Gs(P){const B={};!P["data-sentry-component"]&&P["data-sentry-element"]&&(P["data-sentry-component"]=P["data-sentry-element"]);for(const W in P)if(os.has(W)){let q=W;(W==="data-testid"||W==="data-test-id")&&(q="testId"),B[q]=P[W]}return B}s(Gs,"getAttributesToRecord");const vs=s(P=>B=>{if(!P.isEnabled())return;const W=ys(B);if(!W)return;const q=B.name==="click",de=q?B.event:void 0;q&&P.clickDetector&&de&&de.target&&!de.altKey&&!de.metaKey&&!de.ctrlKey&&!de.shiftKey&&jo(P.clickDetector,W,Hi(B.event)),er(P,W)},"handleDomListener");function ss(P,B){const W=Ki.mirror.getId(P),q=W&&Ki.mirror.getNode(W),de=q&&Ki.mirror.getMeta(q),_e=de&&Es(de)?de:null;return{message:B,data:_e?{nodeId:W,node:{id:W,tagName:_e.tagName,textContent:Array.from(_e.childNodes).map(He=>He.type===_o.Text&&He.textContent).filter(Boolean).map(He=>He.trim()).join(""),attributes:Gs(_e.attributes)}}:{}}}s(ss,"getBaseDomBreadcrumb");function ys(P){const{target:B,message:W}=js(P);return Ar({category:`ui.${P.name}`,...ss(B,W)})}s(ys,"handleDom");function js(P){const B=P.name==="click";let W,q=null;try{q=B?Hi(P.event):yr(P.event),W=p.htmlTreeAsString(q,{maxStringLength:200})||"<unknown>"}catch{W="<unknown>"}return{target:q,message:W}}s(js,"getDomTarget");function Es(P){return P.type===_o.Element}s(Es,"isElement");function bs(P,B){if(!P.isEnabled())return;P.updateUserActivity();const W=zs(B);W&&er(P,W)}s(bs,"handleKeyboardEvent");function zs(P){const{metaKey:B,shiftKey:W,ctrlKey:q,altKey:de,key:_e,target:He}=P;if(!He||Qr(He)||!_e)return null;const et=B||q||de,ze=_e.length===1;if(!et&&ze)return null;const St=p.htmlTreeAsString(He,{maxStringLength:200})||"<unknown>",wt=ss(He,St);return Ar({category:"ui.keyDown",message:St,data:{...wt.data,metaKey:B,shiftKey:W,ctrlKey:q,altKey:de,key:_e}})}s(zs,"getKeyboardBreadcrumb");function Qr(P){return P.tagName==="INPUT"||P.tagName==="TEXTAREA"||P.isContentEditable}s(Qr,"isInputElement");const Br={resource:lo,paint:zo,navigation:Gr};function Ro(P){return P.map(as).filter(Boolean)}s(Ro,"createPerformanceEntries");function as(P){return Br[P.entryType]?Br[P.entryType](P):null}s(as,"createPerformanceEntry");function Zr(P){return((p.browserPerformanceTimeOrigin||r.performance.timeOrigin)+P)/1e3}s(Zr,"getAbsoluteTime");function zo(P){const{duration:B,entryType:W,name:q,startTime:de}=P,_e=Zr(de);return{type:W,name:q,start:_e,end:_e+B,data:void 0}}s(zo,"createPaintEntry");function Gr(P){const{entryType:B,name:W,decodedBodySize:q,duration:de,domComplete:_e,encodedBodySize:He,domContentLoadedEventStart:et,domContentLoadedEventEnd:ze,domInteractive:St,loadEventStart:wt,loadEventEnd:ot,redirectCount:Rt,startTime:Qt,transferSize:Wt,type:_n}=P;return de===0?null:{type:`${B}.${_n}`,start:Zr(Qt),end:Zr(_e),name:W,data:{size:Wt,decodedBodySize:q,encodedBodySize:He,duration:de,domInteractive:St,domContentLoadedEventStart:et,domContentLoadedEventEnd:ze,loadEventStart:wt,loadEventEnd:ot,domComplete:_e,redirectCount:Rt}}}s(Gr,"createNavigationEntry");function lo(P){const{entryType:B,initiatorType:W,name:q,responseEnd:de,startTime:_e,decodedBodySize:He,encodedBodySize:et,responseStatus:ze,transferSize:St}=P;return["fetch","xmlhttprequest"].includes(W)?null:{type:`${B}.${W}`,start:Zr(_e),end:Zr(de),name:q,data:{size:St,statusCode:ze,decodedBodySize:He,encodedBodySize:et}}}s(lo,"createResourceEntry");function co(P){const B=P.entries,W=B[B.length-1],q=W?W.element:void 0,de=P.value,_e=Zr(de);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:_e,end:_e,data:{value:de,size:de,nodeId:q?Ki.mirror.getId(q):void 0}}}s(co,"getLargestContentfulPaint");function Co(P){function B(de){P.performanceEntries.includes(de)||P.performanceEntries.push(de)}s(B,"addPerformanceEntry");function W({entries:de}){de.forEach(B)}s(W,"onEntries");const q=[];return["navigation","paint","resource"].forEach(de=>{q.push(a.addPerformanceInstrumentationHandler(de,W))}),q.push(a.addLcpInstrumentationHandler(({metric:de})=>{P.replayPerformanceEntries.push(co(de))})),()=>{q.forEach(de=>de())}}s(Co,"setupPerformanceObserver");const wi=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$o='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function uo(){const P=new Blob([$o]);return URL.createObjectURL(P)}s(uo,"e");function Wi(P,B){wi&&(p.logger.info(P),B&&ls(P))}s(Wi,"logInfo");function qr(P,B){wi&&(p.logger.info(P),B&&setTimeout(()=>{ls(P)},0))}s(qr,"logInfoNextTick");function ls(P){m.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:P},{level:"info"})}s(ls,"addLogBreadcrumb");class Po extends Error{constructor(){super(`Event buffer exceeded maximum size of ${A}.`)}}s(Po,"EventBufferSizeExceededError");class ur{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(B){const W=JSON.stringify(B).length;if(this._totalSize+=W,this._totalSize>A)throw new Po;this.events.push(B)}finish(){return new Promise(B=>{const W=this.events;this.clear(),B(JSON.stringify(W))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const B=this.events.map(W=>W.timestamp).sort()[0];return B?Pr(B):null}}s(ur,"EventBufferArray");class ko{constructor(B){this._worker=B,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((B,W)=>{this._worker.addEventListener("message",({data:q})=>{q.success?B():W()},{once:!0}),this._worker.addEventListener("error",q=>{W(q)},{once:!0})}),this._ensureReadyPromise)}destroy(){Wi("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(B,W){const q=this._getAndIncrementId();return new Promise((de,_e)=>{const He=s(({data:et})=>{const ze=et;if(ze.method===B&&ze.id===q){if(this._worker.removeEventListener("message",He),!ze.success){wi&&p.logger.error("[Replay]",ze.response),_e(new Error("Error in compression worker"));return}de(ze.response)}},"listener");this._worker.addEventListener("message",He),this._worker.postMessage({id:q,method:B,arg:W})})}_getAndIncrementId(){return this._id++}}s(ko,"WorkerHandler");class Jl{constructor(B){this._worker=new ko(B),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(B){const W=Pr(B.timestamp);(!this._earliestTimestamp||W<this._earliestTimestamp)&&(this._earliestTimestamp=W);const q=JSON.stringify(B);return this._totalSize+=q.length,this._totalSize>A?Promise.reject(new Po):this._sendEventToWorker(q)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,B=>{wi&&p.logger.warn('[Replay] Sending "clear" message to worker failed',B)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(B){return this._worker.postMessage("addEvent",B)}async _finishRequest(){const B=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,B}}s(Jl,"EventBufferCompressionWorker");class Yl{constructor(B){this._fallback=new ur,this._compression=new Jl(B),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(B){this._used.hasCheckout=B}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(B){return this._used.addEvent(B)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{Wi("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:B,hasCheckout:W}=this._fallback,q=[];for(const de of B)q.push(this._compression.addEvent(de));this._compression.hasCheckout=W,this._used=this._compression;try{await Promise.all(q)}catch(de){wi&&p.logger.warn("[Replay] Failed to add events when switching buffers.",de)}}}s(Yl,"EventBufferProxy");function Fc({useCompression:P,workerUrl:B}){if(P&&window.Worker){const W=Oa(B);if(W)return W}return Wi("[Replay] Using simple buffer"),new ur}s(Fc,"createEventBuffer");function Oa(P){try{const B=P||$s();if(!B)return;Wi(`[Replay] Using compression worker${P?` from ${P}`:""}`);const W=new Worker(B);return new Yl(W)}catch{Wi("[Replay] Failed to create compression worker")}}s(Oa,"_loadWorker");function $s(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?uo():""}s($s,"_getWorkerUrl");function Ma(){try{return"sessionStorage"in r&&!!r.sessionStorage}catch{return!1}}s(Ma,"hasSessionStorage");function Bc(P){xc(),P.session=void 0}s(Bc,"clearSession");function xc(){if(Ma())try{r.sessionStorage.removeItem(n)}catch{}}s(xc,"deleteSession");function Xl(P){return P===void 0?!1:Math.random()<P}s(Xl,"isSampled");function Ra(P){const B=Date.now(),W=P.id||p.uuid4(),q=P.started||B,de=P.lastActivity||B,_e=P.segmentId||0,He=P.sampled,et=P.previousSessionId;return{id:W,started:q,lastActivity:de,segmentId:_e,sampled:He,previousSessionId:et}}s(Ra,"makeSession");function _s(P){if(Ma())try{r.sessionStorage.setItem(n,JSON.stringify(P))}catch{}}s(_s,"saveSession");function Uc(P,B){return Xl(P)?"session":B?"buffer":!1}s(Uc,"getSessionSampleType");function No({sessionSampleRate:P,allowBuffering:B,stickySession:W=!1},{previousSessionId:q}={}){const de=Uc(P,B),_e=Ra({sampled:de,previousSessionId:q});return W&&_s(_e),_e}s(No,"createSession");function Ql(P){if(!Ma())return null;try{const B=r.sessionStorage.getItem(n);if(!B)return null;const W=JSON.parse(B);return qr("[Replay] Loading existing session",P),Ra(W)}catch{return null}}s(Ql,"fetchSession");function Zl(P,B,W=+new Date){return P===null||B===void 0||B<0?!0:B===0?!1:P+B<=W}s(Zl,"isExpired");function Pa(P,{maxReplayDuration:B,sessionIdleExpire:W,targetTime:q=Date.now()}){return Zl(P.started,B,q)||Zl(P.lastActivity,W,q)}s(Pa,"isSessionExpired");function xr(P,{sessionIdleExpire:B,maxReplayDuration:W}){return!(!Pa(P,{sessionIdleExpire:B,maxReplayDuration:W})||P.sampled==="buffer"&&P.segmentId===0)}s(xr,"shouldRefreshSession");function kn({traceInternals:P,sessionIdleExpire:B,maxReplayDuration:W,previousSessionId:q},de){const _e=de.stickySession&&Ql(P);return _e?xr(_e,{sessionIdleExpire:B,maxReplayDuration:W})?(qr("[Replay] Session in sessionStorage is expired, creating new one..."),No(de,{previousSessionId:_e.id})):_e:(qr("[Replay] Creating new session",P),No(de,{previousSessionId:q}))}s(kn,"loadOrCreateSession");function ql(P){return P.type===L.Custom}s(ql,"isCustomEvent");function vn(P,B,W){return ka(P,B)?(Hc(P,B,W),!0):!1}s(vn,"addEventSync");function Vc(P,B,W){return ka(P,B)?Hc(P,B,W):Promise.resolve(null)}s(Vc,"addEvent");async function Hc(P,B,W){if(!P.eventBuffer)return null;try{W&&P.recordingMode==="buffer"&&P.eventBuffer.clear(),W&&(P.eventBuffer.hasCheckout=!0);const q=P.getOptions(),de=nr(B,q.beforeAddRecordingEvent);return de?await P.eventBuffer.addEvent(de):void 0}catch(q){const de=q&&q instanceof Po?"addEventSizeExceeded":"addEvent";wi&&p.logger.error(q),await P.stop({reason:de});const _e=m.getClient();_e&&_e.recordDroppedEvent("internal_sdk_error","replay")}}s(Hc,"_addEvent");function ka(P,B){if(!P.eventBuffer||P.isPaused()||!P.isEnabled())return!1;const W=Pr(B.timestamp);return W+P.timeouts.sessionIdlePause<Date.now()?!1:W>P.getContext().initialTimestamp+P.getOptions().maxReplayDuration?(Wi(`[Replay] Skipping event with timestamp ${W} because it is after maxReplayDuration`,P.getOptions()._experiments.traceInternals),!1):!0}s(ka,"shouldAddEvent");function nr(P,B){try{if(typeof B=="function"&&ql(P))return B(P)}catch(W){return wi&&p.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",W),null}return P}s(nr,"maybeApplyCallback");function Na(P){return!P.type}s(Na,"isErrorEvent");function Cs(P){return P.type==="transaction"}s(Cs,"isTransactionEvent");function La(P){return P.type==="replay_event"}s(La,"isReplayEvent");function Wc(P){return P.type==="feedback"}s(Wc,"isFeedbackEvent");function ec(P){return(B,W)=>{if(!P.isEnabled()||!Na(B)&&!Cs(B))return;const q=W&&W.statusCode;if(!(!q||q<200||q>=300)){if(Cs(B)){tc(P,B);return}nc(P,B)}}}s(ec,"handleAfterSendEvent");function tc(P,B){const W=P.getContext();B.contexts&&B.contexts.trace&&B.contexts.trace.trace_id&&W.traceIds.size<100&&W.traceIds.add(B.contexts.trace.trace_id)}s(tc,"handleTransactionEvent");function nc(P,B){const W=P.getContext();if(B.event_id&&W.errorIds.size<100&&W.errorIds.add(B.event_id),P.recordingMode!=="buffer"||!B.tags||!B.tags.replayId)return;const{beforeErrorSampling:q}=P.getOptions();typeof q=="function"&&!q(B)||setTimeout(()=>{P.sendBufferedReplayOrFlush()})}s(nc,"handleErrorEvent");function Fa(P){return B=>{!P.isEnabled()||!Na(B)||Gc(P,B)}}s(Fa,"handleBeforeSendEvent");function Gc(P,B){const W=B.exception&&B.exception.values&&B.exception.values[0].value;if(typeof W=="string"&&(W.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||W.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const q=Ar({category:"replay.hydrate-error"});er(P,q)}}s(Gc,"handleHydrationError");function bn(P){const B=m.getClient();B&&B.on("beforeAddBreadcrumb",W=>ti(P,W))}s(bn,"handleBreadcrumbs");function ti(P,B){if(!P.isEnabled()||!ic(B))return;const W=Ht(B);W&&er(P,W)}s(ti,"beforeAddBreadcrumb");function Ht(P){return!ic(P)||["fetch","xhr","sentry.event","sentry.transaction"].includes(P.category)||P.category.startsWith("ui.")?null:P.category==="console"?bu(P):Ar(P)}s(Ht,"normalizeBreadcrumb");function bu(P){const B=P.data&&P.data.arguments;if(!Array.isArray(B)||B.length===0)return Ar(P);let W=!1;const q=B.map(de=>{if(!de)return de;if(typeof de=="string")return de.length>_?(W=!0,`${de.slice(0,_)}\u2026`):de;if(typeof de=="object")try{const _e=p.normalize(de,7);return JSON.stringify(_e).length>_?(W=!0,`${JSON.stringify(_e,null,2).slice(0,_)}\u2026`):_e}catch{}return de});return Ar({...P,data:{...P.data,arguments:q,...W?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}s(bu,"normalizeConsoleBreadcrumb");function ic(P){return!!P.category}s(ic,"isBreadcrumbWithCategory");function _u(P,B){return P.type||!P.exception||!P.exception.values||!P.exception.values.length?!1:!!(B.originalException&&B.originalException.__rrweb__)}s(_u,"isRrwebError");function Cu(P,B){P.triggerUserActivity(),P.addUpdate(()=>B.timestamp?(P.throttledAddEvent({type:L.Custom,timestamp:B.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:B.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:B.event_id}}}}),!1):!0)}s(Cu,"addFeedbackBreadcrumb");function jc(P,B){return P.recordingMode!=="buffer"||B.message===t||!B.exception||B.type?!1:Xl(P.getOptions().errorSampleRate)}s(jc,"shouldSampleForBufferEvent");function cs(P){return Object.assign((B,W)=>P.isEnabled()?La(B)?(delete B.breadcrumbs,B):!Na(B)&&!Cs(B)&&!Wc(B)||!P.checkAndHandleExpiredSession()?B:Wc(B)?(P.flush(),B.contexts.feedback.replay_id=P.getSessionId(),Cu(P,B),B):_u(B,W)&&!P.getOptions()._experiments.captureExceptions?(wi&&p.logger.log("[Replay] Ignoring error from rrweb internals",B),null):((jc(P,B)||P.recordingMode==="session")&&(B.tags={...B.tags,replayId:P.getSessionId()}),B):B,{id:"Replay"})}s(cs,"handleGlobalEventListener");function Ba(P,B){return B.map(({type:W,start:q,end:de,name:_e,data:He})=>{const et=P.throttledAddEvent({type:L.Custom,timestamp:q,data:{tag:"performanceSpan",payload:{op:W,description:_e,startTimestamp:q,endTimestamp:de,data:He}}});return typeof et=="string"?Promise.resolve(null):et})}s(Ba,"createPerformanceSpans");function Tu(P){const{from:B,to:W}=P,q=Date.now()/1e3;return{type:"navigation.push",start:q,end:q,name:W,data:{previous:B}}}s(Tu,"handleHistory");function Iu(P){return B=>{if(!P.isEnabled())return;const W=Tu(B);W!==null&&(P.getContext().urls.push(W.name),P.triggerUserActivity(),P.addUpdate(()=>(Ba(P,[W]),!1)))}}s(Iu,"handleHistorySpanListener");function Du(P,B){return wi&&P.getOptions()._experiments.traceInternals?!1:m.isSentryRequestUrl(B,m.getClient())}s(Du,"shouldFilterRequest");function xa(P,B){P.isEnabled()&&B!==null&&(Du(P,B.name)||P.addUpdate(()=>(Ba(P,[B]),!0)))}s(xa,"addNetworkBreadcrumb");function Ua(P){if(!P)return;const B=new TextEncoder;try{if(typeof P=="string")return B.encode(P).length;if(P instanceof URLSearchParams)return B.encode(P.toString()).length;if(P instanceof FormData){const W=Ks(P);return B.encode(W).length}if(P instanceof Blob)return P.size;if(P instanceof ArrayBuffer)return P.byteLength}catch{}}s(Ua,"getBodySize");function zc(P){if(!P)return;const B=parseInt(P,10);return isNaN(B)?void 0:B}s(zc,"parseContentLengthHeader");function $c(P){try{if(typeof P=="string")return[P];if(P instanceof URLSearchParams)return[P.toString()];if(P instanceof FormData)return[Ks(P)];if(!P)return[void 0]}catch{return wi&&p.logger.warn("[Replay] Failed to serialize body",P),[void 0,"BODY_PARSE_ERROR"]}return wi&&p.logger.info("[Replay] Skipping network body because of body type",P),[void 0,"UNPARSEABLE_BODY_TYPE"]}s($c,"getBodyString");function Va(P,B){if(!P)return{headers:{},size:void 0,_meta:{warnings:[B]}};const W={...P._meta},q=W.warnings||[];return W.warnings=[...q,B],P._meta=W,P}s(Va,"mergeWarning");function Kc(P,B){if(!B)return null;const{startTimestamp:W,endTimestamp:q,url:de,method:_e,statusCode:He,request:et,response:ze}=B;return{type:P,start:W/1e3,end:q/1e3,name:de,data:p.dropUndefinedKeys({method:_e,statusCode:He,request:et,response:ze})}}s(Kc,"makeNetworkReplayBreadcrumb");function Lo(P){return{headers:{},size:P,_meta:{warnings:["URL_SKIPPED"]}}}s(Lo,"buildSkippedNetworkRequestOrResponse");function eo(P,B,W){if(!B&&Object.keys(P).length===0)return;if(!B)return{headers:P};if(!W)return{headers:P,size:B};const q={headers:P,size:B},{body:de,warnings:_e}=Au(W);return q.body=de,_e&&_e.length>0&&(q._meta={warnings:_e}),q}s(eo,"buildNetworkRequestOrResponse");function Ha(P,B){return Object.keys(P).reduce((W,q)=>{const de=q.toLowerCase();return B.includes(de)&&P[q]&&(W[de]=P[q]),W},{})}s(Ha,"getAllowedHeaders");function Ks(P){return new URLSearchParams(P).toString()}s(Ks,"_serializeFormData");function Au(P){if(!P||typeof P!="string")return{body:P};const B=P.length>y,W=Jc(P);if(B){const q=P.slice(0,y);return W?{body:q,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${q}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(W)try{return{body:JSON.parse(P)}}catch{}return{body:P}}s(Au,"normalizeNetworkBody");function Jc(P){const B=P[0],W=P[P.length-1];return B==="["&&W==="]"||B==="{"&&W==="}"}s(Jc,"_strIsProbablyJson");function Wa(P,B){const W=Yc(P);return p.stringMatchesSomePattern(W,B)}s(Wa,"urlMatches");function Yc(P,B=r.document.baseURI){if(P.startsWith("http://")||P.startsWith("https://")||P.startsWith(r.location.origin))return P;const W=new URL(P,B);if(W.origin!==new URL(B).origin)return P;const q=W.href;return!P.endsWith("/")&&q.endsWith("/")?q.slice(0,-1):q}s(Yc,"getFullUrl");async function wu(P,B,W){try{const q=await Qc(P,B,W),de=Kc("resource.fetch",q);xa(W.replay,de)}catch(q){wi&&p.logger.error("[Replay] Failed to capture fetch breadcrumb",q)}}s(wu,"captureFetchBreadcrumbToReplay");function Xc(P,B){const{input:W,response:q}=B,de=W?rc(W):void 0,_e=Ua(de),He=q?zc(q.headers.get("content-length")):void 0;_e!==void 0&&(P.data.request_body_size=_e),He!==void 0&&(P.data.response_body_size=He)}s(Xc,"enrichFetchBreadcrumb");async function Qc(P,B,W){const q=Date.now(),{startTimestamp:de=q,endTimestamp:_e=q}=B,{url:He,method:et,status_code:ze=0,request_body_size:St,response_body_size:wt}=P.data,ot=Wa(He,W.networkDetailAllowUrls)&&!Wa(He,W.networkDetailDenyUrls),Rt=ot?Zc(W,B.input,St):Lo(St),Qt=await Ou(ot,W,B.response,wt);return{startTimestamp:de,endTimestamp:_e,url:He,method:et,statusCode:ze,request:Rt,response:Qt}}s(Qc,"_prepareFetchData");function Zc({networkCaptureBodies:P,networkRequestHeaders:B},W,q){const de=W?qc(W,B):{};if(!P)return eo(de,q,void 0);const _e=rc(W),[He,et]=$c(_e),ze=eo(de,q,He);return et?Va(ze,et):ze}s(Zc,"_getRequestInfo");async function Ou(P,{networkCaptureBodies:B,networkResponseHeaders:W},q,de){if(!P&&de!==void 0)return Lo(de);const _e=q?oc(q.headers,W):{};if(!q||!B&&de!==void 0)return eo(_e,de,void 0);const[He,et]=await Ts(q),ze=Cr(He,{networkCaptureBodies:B,responseBodySize:de,captureDetails:P,headers:_e});return et?Va(ze,et):ze}s(Ou,"_getResponseInfo");function Cr(P,{networkCaptureBodies:B,responseBodySize:W,captureDetails:q,headers:de}){try{const _e=P&&P.length&&W===void 0?Ua(P):W;return q?B?eo(de,_e,P):eo(de,_e,void 0):Lo(_e)}catch(_e){return wi&&p.logger.warn("[Replay] Failed to serialize response body",_e),eo(de,W,void 0)}}s(Cr,"getResponseData");async function Ts(P){const B=ed(P);if(!B)return[void 0,"BODY_PARSE_ERROR"];try{return[await td(B)]}catch(W){return wi&&p.logger.warn("[Replay] Failed to get text body from response",W),[void 0,"BODY_PARSE_ERROR"]}}s(Ts,"_parseFetchResponseBody");function rc(P=[]){if(!(P.length!==2||typeof P[1]!="object"))return P[1].body}s(rc,"_getFetchRequestArgBody");function oc(P,B){const W={};return B.forEach(q=>{P.get(q)&&(W[q]=P.get(q))}),W}s(oc,"getAllHeaders");function qc(P,B){return P.length===1&&typeof P[0]!="string"?Js(P[0],B):P.length===2?Js(P[1],B):{}}s(qc,"getRequestHeaders");function Js(P,B){if(!P)return{};const W=P.headers;return W?W instanceof Headers?oc(W,B):Array.isArray(W)?{}:Ha(W,B):{}}s(Js,"getHeadersFromOptions");function ed(P){try{return P.clone()}catch(B){wi&&p.logger.warn("[Replay] Failed to clone response body",B)}}s(ed,"_tryCloneResponse");function td(P){return new Promise((B,W)=>{const q=setTimeout(()=>W(new Error("Timeout while trying to read response body")),500);nd(P).then(de=>B(de),de=>W(de)).finally(()=>clearTimeout(q))})}s(td,"_tryGetResponseText");async function nd(P){return await P.text()}s(nd,"_getResponseText");async function fo(P,B,W){try{const q=rd(P,B,W),de=Kc("resource.xhr",q);xa(W.replay,de)}catch(q){wi&&p.logger.error("[Replay] Failed to capture xhr breadcrumb",q)}}s(fo,"captureXhrBreadcrumbToReplay");function id(P,B){const{xhr:W,input:q}=B;if(!W)return;const de=Ua(q),_e=W.getResponseHeader("content-length")?zc(W.getResponseHeader("content-length")):od(W.response,W.responseType);de!==void 0&&(P.data.request_body_size=de),_e!==void 0&&(P.data.response_body_size=_e)}s(id,"enrichXhrBreadcrumb");function rd(P,B,W){const q=Date.now(),{startTimestamp:de=q,endTimestamp:_e=q,input:He,xhr:et}=B,{url:ze,method:St,status_code:wt=0,request_body_size:ot,response_body_size:Rt}=P.data;if(!ze)return null;if(!et||!Wa(ze,W.networkDetailAllowUrls)||Wa(ze,W.networkDetailDenyUrls)){const ei=Lo(ot),Mn=Lo(Rt);return{startTimestamp:de,endTimestamp:_e,url:ze,method:St,statusCode:wt,request:ei,response:Mn}}const Qt=et[a.SENTRY_XHR_DATA_KEY],Wt=Qt?Ha(Qt.request_headers,W.networkRequestHeaders):{},_n=Ha(ds(et),W.networkResponseHeaders),[jn,Pn]=W.networkCaptureBodies?$c(He):[void 0],[ri,Ni]=W.networkCaptureBodies?Ys(et):[void 0],gi=eo(Wt,ot,jn),Gi=eo(_n,Rt,ri);return{startTimestamp:de,endTimestamp:_e,url:ze,method:St,statusCode:wt,request:Pn?Va(gi,Pn):gi,response:Ni?Va(Gi,Ni):Gi}}s(rd,"_prepareXhrData");function ds(P){const B=P.getAllResponseHeaders();return B?B.split(`\r
`).reduce((W,q)=>{const[de,_e]=q.split(": ");return W[de.toLowerCase()]=_e,W},{}):{}}s(ds,"getResponseHeaders");function Ys(P){const B=[];try{return[P.responseText]}catch(W){B.push(W)}try{return ho(P.response,P.responseType)}catch(W){B.push(W)}return wi&&p.logger.warn("[Replay] Failed to get xhr response body",...B),[void 0]}s(Ys,"_getXhrResponseBody");function ho(P,B){try{if(typeof P=="string")return[P];if(P instanceof Document)return[P.body.outerHTML];if(B==="json"&&P&&typeof P=="object")return[JSON.stringify(P)];if(!P)return[void 0]}catch{return wi&&p.logger.warn("[Replay] Failed to serialize body",P),[void 0,"BODY_PARSE_ERROR"]}return wi&&p.logger.info("[Replay] Skipping network body because of body type",P),[void 0,"UNPARSEABLE_BODY_TYPE"]}s(ho,"_parseXhrResponse");function od(P,B){try{const W=B==="json"&&P&&typeof P=="object"?JSON.stringify(P):P;return Ua(W)}catch{return}}s(od,"_getBodySize");function sd(P){const B=m.getClient();try{const{networkDetailAllowUrls:W,networkDetailDenyUrls:q,networkCaptureBodies:de,networkRequestHeaders:_e,networkResponseHeaders:He}=P.getOptions(),et={replay:P,networkDetailAllowUrls:W,networkDetailDenyUrls:q,networkCaptureBodies:de,networkRequestHeaders:_e,networkResponseHeaders:He};B&&B.on("beforeAddBreadcrumb",(ze,St)=>ad(et,ze,St))}catch{}}s(sd,"handleNetworkBreadcrumbs");function ad(P,B,W){if(B.data)try{ld(B)&&dd(W)&&(id(B,W),fo(B,W,P)),cd(B)&&ud(W)&&(Xc(B,W),wu(B,W,P))}catch{wi&&p.logger.warn("Error when enriching network breadcrumb")}}s(ad,"beforeAddNetworkBreadcrumb");function ld(P){return P.category==="xhr"}s(ld,"_isXhrBreadcrumb");function cd(P){return P.category==="fetch"}s(cd,"_isFetchBreadcrumb");function dd(P){return P&&P.xhr}s(dd,"_isXhrHint");function ud(P){return P&&P.response}s(ud,"_isFetchHint");function fd(P){const B=m.getClient();a.addClickKeypressInstrumentationHandler(vs(P)),a.addHistoryInstrumentationHandler(Iu(P)),bn(P),sd(P);const W=cs(P);m.addEventProcessor(W),B&&(B.on("beforeSendEvent",Fa(P)),B.on("afterSendEvent",ec(P)),B.on("createDsc",q=>{const de=P.getSessionId();de&&P.isEnabled()&&P.recordingMode==="session"&&P.checkAndHandleExpiredSession()&&(q.replay_id=de)}),B.on("spanStart",q=>{P.lastActiveSpan=q}),B.on("spanEnd",q=>{P.lastActiveSpan=q}),B.on("beforeSendFeedback",(q,de)=>{const _e=P.getSessionId();de&&de.includeReplay&&P.isEnabled()&&_e&&q.contexts&&q.contexts.feedback&&(q.contexts.feedback.replay_id=_e)}))}s(fd,"addGlobalListeners");async function hd(P){try{return Promise.all(Ba(P,[Mu(r.performance.memory)]))}catch{return[]}}s(hd,"addMemoryEntry");function Mu(P){const{jsHeapSizeLimit:B,totalJSHeapSize:W,usedJSHeapSize:q}=P,de=Date.now()/1e3;return{type:"memory",name:"memory",start:de,end:de,data:{memory:{jsHeapSizeLimit:B,totalJSHeapSize:W,usedJSHeapSize:q}}}}s(Mu,"createMemoryEntry");function pd(P,B,W){let q,de,_e;const He=W&&W.maxWait?Math.max(W.maxWait,B):0;function et(){return ze(),q=P(),q}s(et,"invokeFunc");function ze(){de!==void 0&&clearTimeout(de),_e!==void 0&&clearTimeout(_e),de=_e=void 0}s(ze,"cancelTimers");function St(){return de!==void 0||_e!==void 0?et():q}s(St,"flush");function wt(){return de&&clearTimeout(de),de=setTimeout(et,B),He&&_e===void 0&&(_e=setTimeout(et,He)),q}return s(wt,"debounced"),wt.cancel=ze,wt.flush=St,wt}s(pd,"debounce");function ui(P){let B=!1;return(W,q)=>{if(!P.checkAndHandleExpiredSession()){wi&&p.logger.warn("[Replay] Received replay event after session expired.");return}const de=q||!B;B=!0,P.clickDetector&&tr(P.clickDetector,W),P.addUpdate(()=>{if(P.recordingMode==="buffer"&&de&&P.setInitialState(),!vn(P,W,de))return!0;if(!de)return!1;if(Is(P,de),P.session&&P.session.previousSessionId)return!0;if(P.recordingMode==="buffer"&&P.session&&P.eventBuffer){const _e=P.eventBuffer.getEarliestTimestamp();_e&&(Wi(`[Replay] Updating session start time to earliest event in buffer to ${new Date(_e)}`,P.getOptions()._experiments.traceInternals),P.session.started=_e,P.getOptions().stickySession&&_s(P.session))}return P.recordingMode==="session"&&P.flush(),!0})}}s(ui,"getHandleRecordingEmit");function Ga(P){const B=P.getOptions();return{type:L.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:P.isRecordingCanvas(),sessionSampleRate:B.sessionSampleRate,errorSampleRate:B.errorSampleRate,useCompressionOption:B.useCompression,blockAllMedia:B.blockAllMedia,maskAllText:B.maskAllText,maskAllInputs:B.maskAllInputs,useCompression:P.eventBuffer?P.eventBuffer.type==="worker":!1,networkDetailHasUrls:B.networkDetailAllowUrls.length>0,networkCaptureBodies:B.networkCaptureBodies,networkRequestHasHeaders:B.networkRequestHeaders.length>0,networkResponseHasHeaders:B.networkResponseHeaders.length>0}}}}s(Ga,"createOptionsEvent");function Is(P,B){!B||!P.session||P.session.segmentId!==0||vn(P,Ga(P),!1)}s(Is,"addSettingsEvent");function ja(P,B,W,q){return p.createEnvelope(p.createEventEnvelopeHeaders(P,p.getSdkMetadataForEnvelopeHeader(P),q,W),[[{type:"replay_event"},P],[{type:"replay_recording",length:typeof B=="string"?new TextEncoder().encode(B).length:B.length},B]])}s(ja,"createReplayEnvelope");function _t({recordingData:P,headers:B}){let W;const q=`${JSON.stringify(B)}
`;if(typeof P=="string")W=`${q}${P}`;else{const _e=new TextEncoder().encode(q);W=new Uint8Array(_e.length+P.length),W.set(_e),W.set(P,_e.length)}return W}s(_t,"prepareRecordingData");async function Ru({client:P,scope:B,replayId:W,event:q}){const de=typeof P._integrations=="object"&&P._integrations!==null&&!Array.isArray(P._integrations)?Object.keys(P._integrations):void 0,_e={event_id:W,integrations:de};P.emit("preprocessEvent",q,_e);const He=await m.prepareEvent(P.getOptions(),q,_e,B,P,m.getIsolationScope());if(!He)return null;He.platform=He.platform||"javascript";const et=P.getSdkMetadata(),{name:ze,version:St}=et&&et.sdk||{};return He.sdk={...He.sdk,name:ze||"sentry.javascript.unknown",version:St||"0.0.0"},He}s(Ru,"prepareReplayEvent");async function tn({recordingData:P,replayId:B,segmentId:W,eventContext:q,timestamp:de,session:_e}){const He=_t({recordingData:P,headers:{segment_id:W}}),{urls:et,errorIds:ze,traceIds:St,initialTimestamp:wt}=q,ot=m.getClient(),Rt=m.getCurrentScope(),Qt=ot&&ot.getTransport(),Wt=ot&&ot.getDsn();if(!ot||!Qt||!Wt||!_e.sampled)return p.resolvedSyncPromise({});const _n={type:e,replay_start_timestamp:wt/1e3,timestamp:de/1e3,error_ids:ze,trace_ids:St,urls:et,replay_id:B,segment_id:W,replay_type:_e.sampled},jn=await Ru({scope:Rt,client:ot,replayId:B,event:_n});if(!jn)return ot.recordDroppedEvent("event_processor","replay",_n),Wi("An event processor returned `null`, will not send event."),p.resolvedSyncPromise({});delete jn.sdkProcessingMetadata;const Pn=ja(jn,He,Wt,ot.getOptions().tunnel);let ri;try{ri=await Qt.send(Pn)}catch(gi){const Gi=new Error(t);try{Gi.cause=gi}catch{}throw Gi}if(typeof ri.statusCode=="number"&&(ri.statusCode<200||ri.statusCode>=300))throw new za(ri.statusCode);const Ni=p.updateRateLimits({},ri);if(p.isRateLimited(Ni,"replay"))throw new Xs(Ni);return ri}s(tn,"sendReplayRequest");class za extends Error{constructor(B){super(`Transport returned status code ${B}`)}}s(za,"TransportStatusCodeError");class Xs extends Error{constructor(B){super("Rate limit hit"),this.rateLimits=B}}s(Xs,"RateLimitError");async function sc(P,B={count:0,interval:u}){const{recordingData:W,options:q}=P;if(W.length)try{return await tn(P),!0}catch(de){if(de instanceof za||de instanceof Xs)throw de;if(m.setContext("Replays",{_retryCount:B.count}),wi&&q._experiments&&q._experiments.captureExceptions&&m.captureException(de),B.count>=v){const _e=new Error(`${t} - max retries exceeded`);try{_e.cause=de}catch{}throw _e}return B.interval*=++B.count,new Promise((_e,He)=>{setTimeout(async()=>{try{await sc(P,B),_e(!0)}catch(et){He(et)}},B.interval)})}}s(sc,"sendReplay");const ac="__THROTTLED",lc="__SKIPPED";function md(P,B,W){const q=new Map,de=s(et=>{const ze=et-W;q.forEach((St,wt)=>{wt<ze&&q.delete(wt)})},"_cleanup"),_e=s(()=>[...q.values()].reduce((et,ze)=>et+ze,0),"_getTotalCount");let He=!1;return(...et)=>{const ze=Math.floor(Date.now()/1e3);if(de(ze),_e()>=B){const wt=He;return He=!0,wt?lc:ac}He=!1;const St=q.get(ze)||0;return q.set(ze,St+1),P(...et)}}s(md,"throttle");class Fo{constructor({options:B,recordingOptions:W}){Fo.prototype.__init.call(this),Fo.prototype.__init2.call(this),Fo.prototype.__init3.call(this),Fo.prototype.__init4.call(this),Fo.prototype.__init5.call(this),Fo.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:i,sessionIdleExpire:o},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=W,this._options=B,this._debouncedFlush=pd(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=md((He,et)=>Vc(this,He,et),300,5);const{slowClickTimeout:q,slowClickIgnoreSelectors:de}=this.getOptions(),_e=q?{threshold:Math.min(C,q),timeout:q,scrollTimeout:T,ignoreSelector:de?de.join(","):""}:void 0;_e&&(this.clickDetector=new bo(this,_e))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(B){const{errorSampleRate:W,sessionSampleRate:q}=this._options;if(!(W<=0&&q<=0)){if(this._initializeSessionForSampling(B),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",qr(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");qr("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const B=kn({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=B,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");qr("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const B=kn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=B,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const B=this._canvas;this._stopRecording=Ki({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:S},emit:ui(this),onMutation:this._onMutationHandler,...B?{recordCanvas:B.recordCanvas,getCanvasManager:B.getCanvasManager,sampling:B.sampling,dataURLOptions:B.dataURLOptions}:{}})}catch(B){this._handleException(B)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(B){return this._handleException(B),!1}}async stop({forceFlush:B=!1,reason:W}={}){if(this._isEnabled){this._isEnabled=!1;try{Wi(`[Replay] Stopping Replay${W?` triggered by ${W}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),B&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Bc(this)}catch(q){this._handleException(q)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Wi("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Wi("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:B=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const W=Date.now();Wi("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const q=this.stopRecording();!B||!q||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(W),this._updateSessionActivity(W),this._maybeSaveSession()),this.startRecording())}addUpdate(B){const W=B();this.recordingMode!=="buffer"&&W!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Zl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const B=`${r.location.pathname}${r.location.hash}${r.location.search}`,W=`${r.location.origin}${B}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=W,this._context.initialTimestamp=Date.now(),this._context.urls.push(W)}throttledAddEvent(B,W){const q=this._throttledAddEvent(B,W);if(q===ac){const de=Ar({category:"replay.throttled"});this.addUpdate(()=>!vn(this,{type:so,timestamp:de.timestamp||0,data:{tag:"breadcrumb",payload:de,metric:!0}}))}return q}getCurrentRoute(){const B=this.lastActiveSpan||m.getActiveSpan(),W=B&&m.getRootSpan(B),de=(W&&m.spanToJSON(W).data||{})[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(!(!W||!de||!["route","custom"].includes(de)))return m.spanToJSON(W).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Fc({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(B){wi&&p.logger.error("[Replay]",B),wi&&this._options._experiments&&this._options._experiments.captureExceptions&&m.captureException(B)}_initializeSessionForSampling(B){const W=this._options.errorSampleRate>0,q=kn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:B},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:W});this.session=q}_checkSession(){if(!this.session)return!1;const B=this.session;return xr(B,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(B),!1):!0}async _refreshSession(B){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(B.id))}_addListeners(){try{r.document.addEventListener("visibilitychange",this._handleVisibilityChange),r.addEventListener("blur",this._handleWindowBlur),r.addEventListener("focus",this._handleWindowFocus),r.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(fd(this),this._hasInitializedCoreListeners=!0)}catch(B){this._handleException(B)}this._performanceCleanupCallback=Co(this)}_removeListeners(){try{r.document.removeEventListener("visibilitychange",this._handleVisibilityChange),r.removeEventListener("blur",this._handleWindowBlur),r.removeEventListener("focus",this._handleWindowFocus),r.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(B){this._handleException(B)}}__init(){this._handleVisibilityChange=()=>{r.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const B=Ar({category:"ui.blur"});this._doChangeToBackgroundTasks(B)}}__init3(){this._handleWindowFocus=()=>{const B=Ar({category:"ui.focus"});this._doChangeToForegroundTasks(B)}}__init4(){this._handleKeyboardEvent=B=>{bs(this,B)}}_doChangeToBackgroundTasks(B){!this.session||Pa(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(B&&this._createCustomBreadcrumb(B),this.conditionalFlush())}_doChangeToForegroundTasks(B){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Wi("[Replay] Document has become active, but session has expired");return}B&&this._createCustomBreadcrumb(B)}_updateUserActivity(B=Date.now()){this._lastActivity=B}_updateSessionActivity(B=Date.now()){this.session&&(this.session.lastActivity=B,this._maybeSaveSession())}_createCustomBreadcrumb(B){this.addUpdate(()=>{this.throttledAddEvent({type:L.Custom,timestamp:B.timestamp||0,data:{tag:"breadcrumb",payload:B}})})}_addPerformanceEntries(){const B=Ro(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Ba(this,B))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:B,eventBuffer:W}=this;if(!B||!W||B.segmentId)return;const q=W.getEarliestTimestamp();q&&q<this._context.initialTimestamp&&(this._context.initialTimestamp=q)}_popEventContext(){const B={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),B}async _runFlush(){const B=this.getSessionId();if(!this.session||!this.eventBuffer||!B){wi&&p.logger.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await hd(this),!!this.eventBuffer&&B===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const W=Date.now();if(W-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const q=this._popEventContext(),de=this.session.segmentId++;this._maybeSaveSession();const _e=await this.eventBuffer.finish();await sc({replayId:B,recordingData:_e,segmentId:de,eventContext:q,session:this.session,options:this.getOptions(),timestamp:W})}catch(W){this._handleException(W),this.stop({reason:"sendReplay"});const q=m.getClient();q&&q.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:B=!1}={})=>{if(!this._isEnabled&&!B)return;if(!this.checkAndHandleExpiredSession()){wi&&p.logger.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const W=this.session.started,de=Date.now()-W;this._debouncedFlush.cancel();const _e=de<this._options.minReplayDuration,He=de>this._options.maxReplayDuration+5e3;if(_e||He){Wi(`[Replay] Session duration (${Math.floor(de/1e3)}s) is too ${_e?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),_e&&this._debouncedFlush();return}const et=this.eventBuffer;if(et&&this.session.segmentId===0&&!et.hasCheckout&&Wi("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(ze){wi&&p.logger.error(ze)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&_s(this.session)}__init6(){this._onMutationHandler=B=>{const W=B.length,q=this._options.mutationLimit,de=this._options.mutationBreadcrumbLimit,_e=q&&W>q;if(W>de||_e){const He=Ar({category:"replay.mutations",data:{count:W,limit:_e}});this._createCustomBreadcrumb(He)}return _e?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}s(Fo,"ReplayContainer");function us(P,B){return[...P,...B].join(",")}s(us,"getOption");function Dn({mask:P,unmask:B,block:W,unblock:q,ignore:de}){const _e=['base[href="/"]'],He=us(P,[".sentry-mask","[data-sentry-mask]"]),et=us(B,[]);return{maskTextSelector:He,unmaskTextSelector:et,blockSelector:us(W,[".sentry-block","[data-sentry-block]",..._e]),unblockSelector:us(q,[]),ignoreSelector:us(de,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}s(Dn,"getPrivacyOptions");function gd({el:P,key:B,maskAttributes:W,maskAllText:q,privacyOptions:de,value:_e}){return!q||de.unmaskTextSelector&&P.matches(de.unmaskTextSelector)?_e:W.includes(B)||B==="value"&&P.tagName==="INPUT"&&["submit","button"].includes(P.getAttribute("type")||"")?_e.replace(/[\S]/g,"*"):_e}s(gd,"maskAttribute");const cc='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Sd=["content-length","content-type","accept"];let dc=!1;const vd=s(P=>new fs(P),"replayIntegration");class fs{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:B=f,flushMaxDelay:W=g,minReplayDuration:q=O,maxReplayDuration:de=M,stickySession:_e=!0,useCompression:He=!0,workerUrl:et,_experiments:ze={},maskAllText:St=!0,maskAllInputs:wt=!0,blockAllMedia:ot=!0,mutationBreadcrumbLimit:Rt=750,mutationLimit:Qt=1e4,slowClickTimeout:Wt=7e3,slowClickIgnoreSelectors:_n=[],networkDetailAllowUrls:jn=[],networkDetailDenyUrls:Pn=[],networkCaptureBodies:ri=!0,networkRequestHeaders:Ni=[],networkResponseHeaders:gi=[],mask:Gi=[],maskAttributes:ei=["title","placeholder"],unmask:Mn=[],block:vi=[],unblock:ir=[],ignore:Rn=[],maskFn:ni,beforeAddRecordingEvent:ji,beforeErrorSampling:fr}={}){this.name=fs.id;const rr=Dn({mask:Gi,unmask:Mn,block:vi,unblock:ir,ignore:Rn});if(this._recordingOptions={maskAllInputs:wt,maskAllText:St,maskInputOptions:{password:!0},maskTextFn:ni,maskInputFn:ni,maskAttributeFn:(kr,Li,jr)=>gd({maskAttributes:ei,maskAllText:St,privacyOptions:rr,key:kr,value:Li,el:jr}),...rr,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:kr=>{try{kr.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:B,flushMaxDelay:W,minReplayDuration:Math.min(q,D),maxReplayDuration:Math.min(de,M),stickySession:_e,useCompression:He,workerUrl:et,blockAllMedia:ot,maskAllInputs:wt,maskAllText:St,mutationBreadcrumbLimit:Rt,mutationLimit:Qt,slowClickTimeout:Wt,slowClickIgnoreSelectors:_n,networkDetailAllowUrls:jn,networkDetailDenyUrls:Pn,networkCaptureBodies:ri,networkRequestHeaders:uc(Ni),networkResponseHeaders:uc(gi),beforeAddRecordingEvent:ji,beforeErrorSampling:fr,_experiments:ze},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${cc}`:cc),this._isInitialized&&p.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return dc}set _isInitialized(B){dc=B}setupOnce(){p.isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(B){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(B)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const B=yd(this._initialOptions);this._replay=new Fo({options:B,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const W=m.getClient().getIntegrationByName("ReplayCanvas");if(!W)return;this._replay._canvas=W.getOptions()}catch{}}}s(fs,"Replay"),fs.__initStatic();function yd(P){const B=m.getClient(),W=B&&B.getOptions(),q={sessionSampleRate:0,errorSampleRate:0,...p.dropUndefinedKeys(P)};if(!W)return p.consoleSandbox(()=>{console.warn("SDK client is not available.")}),q;const de=m.parseSampleRate(W.replaysSessionSampleRate),_e=m.parseSampleRate(W.replaysOnErrorSampleRate);return de==null&&_e==null&&p.consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),de!=null&&(q.sessionSampleRate=de),_e!=null&&(q.errorSampleRate=_e),q}s(yd,"loadReplayOptionsFromClient");function uc(P){return[...Sd,...P.map(B=>B.toLowerCase())]}s(uc,"_getMergedNetworkHeaders");function Ed(){const P=m.getClient();return P&&P.getIntegrationByName("Replay")}s(Ed,"getReplay"),l.getReplay=Ed,l.replayIntegration=vd},8151162894:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3345899401),p=d(375537670),a=d(9046403702),r=d(7738910413);class n extends c.BaseClient{constructor(t){const i={parentSpanIsAlwaysRootSpan:!0,...t},o=a.WINDOW.SENTRY_SDK_SOURCE||h.getSDKSource();c.applySdkMetadata(i,"browser",["browser"],o),super(i),i.sendClientReports&&a.WINDOW.document&&a.WINDOW.document.addEventListener("visibilitychange",()=>{a.WINDOW.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,i){return p.eventFromException(this._options.stackParser,t,i,this._options.attachStacktrace)}eventFromMessage(t,i="info",o){return p.eventFromMessage(this._options.stackParser,t,i,o,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){m.DEBUG_BUILD&&h.logger.warn("SDK not enabled, will not capture user feedback.");return}const i=r.createUserFeedbackEnvelope(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(i)}_prepareEvent(t,i,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,i,o)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){m.DEBUG_BUILD&&h.logger.log("No outcomes to send");return}if(!this._dsn){m.DEBUG_BUILD&&h.logger.log("No dsn provided, will not send outcomes");return}m.DEBUG_BUILD&&h.logger.log("Sending outcomes:",t);const i=h.createClientReportEnvelope(t,this._options.tunnel&&h.dsnToString(this._dsn));this.sendEnvelope(i)}}s(n,"BrowserClient"),l.BrowserClient=n},3345899401:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},375537670:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614);function m(_,C){const T=r(_,C),A={type:C&&C.name,value:i(C)};return T.length&&(A.stacktrace={frames:T}),A.type===void 0&&A.value===""&&(A.value="Unrecoverable error caught"),A}s(m,"exceptionFromError");function p(_,C,T,A){const O=c.getClient(),D=O&&O.getOptions().normalizeDepth,M=y(C),R={__serialized__:h.normalizeToSize(C,D)};if(M)return{exception:{values:[m(_,M)]},extra:R};const F={exception:{values:[{type:h.isEvent(C)?C.constructor.name:A?"UnhandledRejection":"Error",value:u(C,{isUnhandledRejection:A})}]},extra:R};if(T){const V=r(_,T);V.length&&(F.exception.values[0].stacktrace={frames:V})}return F}s(p,"eventFromPlainObject");function a(_,C){return{exception:{values:[m(_,C)]}}}s(a,"eventFromError");function r(_,C){const T=C.stacktrace||C.stack||"",A=e(C),O=t(C);try{return _(T,A,O)}catch{}return[]}s(r,"parseStackFrames");const n=/Minified React error #\d+;/i;function e(_){return _&&n.test(_.message)?1:0}s(e,"getSkipFirstStackStringLines");function t(_){return typeof _.framesToPop=="number"?_.framesToPop:0}s(t,"getPopFirstTopFrames");function i(_){const C=_&&_.message;return C?C.error&&typeof C.error.message=="string"?C.error.message:C:"No error message"}s(i,"extractMessage");function o(_,C,T,A){const O=T&&T.syntheticException||void 0,D=g(_,C,O,A);return h.addExceptionMechanism(D),D.level="error",T&&T.event_id&&(D.event_id=T.event_id),h.resolvedSyncPromise(D)}s(o,"eventFromException");function f(_,C,T="info",A,O){const D=A&&A.syntheticException||void 0,M=S(_,C,D,O);return M.level=T,A&&A.event_id&&(M.event_id=A.event_id),h.resolvedSyncPromise(M)}s(f,"eventFromMessage");function g(_,C,T,A,O){let D;if(h.isErrorEvent(C)&&C.error)return a(_,C.error);if(h.isDOMError(C)||h.isDOMException(C)){const M=C;if("stack"in C)D=a(_,C);else{const R=M.name||(h.isDOMError(M)?"DOMError":"DOMException"),F=M.message?`${R}: ${M.message}`:R;D=S(_,F,T,A),h.addExceptionTypeValue(D,F)}return"code"in M&&(D.tags={...D.tags,"DOMException.code":`${M.code}`}),D}return h.isError(C)?a(_,C):h.isPlainObject(C)||h.isEvent(C)?(D=p(_,C,T,O),h.addExceptionMechanism(D,{synthetic:!0}),D):(D=S(_,C,T,A),h.addExceptionTypeValue(D,`${C}`,void 0),h.addExceptionMechanism(D,{synthetic:!0}),D)}s(g,"eventFromUnknownInput");function S(_,C,T,A){const O={};if(A&&T){const D=r(_,T);D.length&&(O.exception={values:[{value:C,stacktrace:{frames:D}}]})}if(h.isParameterizedString(C)){const{__sentry_template_string__:D,__sentry_template_values__:M}=C;return O.logentry={message:D,params:M},O}return O.message=C,O}s(S,"eventFromString");function u(_,{isUnhandledRejection:C}){const T=h.extractExceptionKeysForMessage(_),A=C?"promise rejection":"exception";return h.isErrorEvent(_)?`Event \`ErrorEvent\` captured as ${A} with message \`${_.message}\``:h.isEvent(_)?`Event \`${v(_)}\` (type=${_.type}) captured as ${A}`:`Object captured as ${A} with keys: ${T}`}s(u,"getNonErrorObjectExceptionValue");function v(_){try{const C=Object.getPrototypeOf(_);return C?C.constructor.name:void 0}catch{}}s(v,"getObjectClassName");function y(_){for(const C in _)if(Object.prototype.hasOwnProperty.call(_,C)){const T=_[C];if(T instanceof Error)return T}}s(y,"getErrorPropertyFromObject"),l.eventFromException=o,l.eventFromMessage=f,l.eventFromUnknownInput=g,l.exceptionFromError=m},2915497046:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6049995776),h=d(1076637753),m=c.buildFeedbackIntegration({lazyLoadIntegration:h.lazyLoadIntegration});l.feedbackAsyncIntegration=m},9038494489:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6049995776),h=d(1076637753),m=c.buildFeedbackIntegration({lazyLoadIntegration:h.lazyLoadIntegration,getModalIntegration:()=>c.feedbackModalIntegration,getScreenshotIntegration:()=>c.feedbackScreenshotIntegration});l.feedbackSyncIntegration=m},9046403702:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=h.GLOBAL_OBJ;let p=0;function a(){return p>0}s(a,"shouldIgnoreOnError");function r(){p++,setTimeout(()=>{p--})}s(r,"ignoreNextOnError");function n(e,t={},i){if(typeof e!="function")return e;try{const f=e.__sentry_wrapped__;if(f)return f;if(h.getOriginalFunction(e))return e}catch{return e}const o=s(function(){const f=Array.prototype.slice.call(arguments);try{i&&typeof i=="function"&&i.apply(this,arguments);const g=f.map(S=>n(S,t));return e.apply(this,g)}catch(g){throw r(),c.withScope(S=>{S.addEventProcessor(u=>(t.mechanism&&(h.addExceptionTypeValue(u,void 0,void 0),h.addExceptionMechanism(u,t.mechanism)),u.extra={...u.extra,arguments:f},u)),c.captureException(g)}),g}},"sentryWrapped");try{for(const f in e)Object.prototype.hasOwnProperty.call(e,f)&&(o[f]=e[f])}catch{}h.markFunctionWrapped(o,e),h.addNonEnumerableProperty(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get(){return e.name}})}catch{}return o}s(n,"wrap"),l.WINDOW=m,l.ignoreNextOnError=r,l.shouldIgnoreOnError=a,l.wrap=n},8904626639:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(1114790286),m=d(9046403702),p=d(8151162894),a=d(8685600704),r=d(4795369790),n=d(375537670),e=d(7738910413),t=d(7672786771),i=d(3985552739),o=d(2334015581),f=d(7098914998),g=d(4305747877),S=d(9919948800),u=d(1076637753),v=d(918703877),y=d(328044736),_=d(4269444637),C=d(6979168052),T=d(4947629935),A=d(2915497046),O=d(9038494489),D=d(6049995776),M=d(6520656099),R=d(5559796378),F=d(7824548363),V=d(5380267868);l.SDK_VERSION=c.SDK_VERSION,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=c.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=c.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.Scope=c.Scope,l.addBreadcrumb=c.addBreadcrumb,l.addEventProcessor=c.addEventProcessor,l.addIntegration=c.addIntegration,l.addTracingExtensions=c.addTracingExtensions,l.captureConsoleIntegration=c.captureConsoleIntegration,l.captureEvent=c.captureEvent,l.captureException=c.captureException,l.captureFeedback=c.captureFeedback,l.captureMessage=c.captureMessage,l.captureSession=c.captureSession,l.close=c.close,l.continueTrace=c.continueTrace,l.createTransport=c.createTransport,l.debugIntegration=c.debugIntegration,l.dedupeIntegration=c.dedupeIntegration,l.endSession=c.endSession,l.extraErrorDataIntegration=c.extraErrorDataIntegration,l.flush=c.flush,l.functionToStringIntegration=c.functionToStringIntegration,l.getActiveSpan=c.getActiveSpan,l.getClient=c.getClient,l.getCurrentHub=c.getCurrentHub,l.getCurrentScope=c.getCurrentScope,l.getGlobalScope=c.getGlobalScope,l.getIsolationScope=c.getIsolationScope,l.getRootSpan=c.getRootSpan,l.getSpanDescendants=c.getSpanDescendants,l.getSpanStatusFromHttpCode=c.getSpanStatusFromHttpCode,l.inboundFiltersIntegration=c.inboundFiltersIntegration,l.isInitialized=c.isInitialized,l.lastEventId=c.lastEventId,l.makeMultiplexedTransport=c.makeMultiplexedTransport,l.moduleMetadataIntegration=c.moduleMetadataIntegration,l.parameterize=c.parameterize,l.registerSpanErrorInstrumentation=c.registerSpanErrorInstrumentation,l.rewriteFramesIntegration=c.rewriteFramesIntegration,l.sessionTimingIntegration=c.sessionTimingIntegration,l.setContext=c.setContext,l.setCurrentClient=c.setCurrentClient,l.setExtra=c.setExtra,l.setExtras=c.setExtras,l.setHttpStatus=c.setHttpStatus,l.setMeasurement=c.setMeasurement,l.setTag=c.setTag,l.setTags=c.setTags,l.setUser=c.setUser,l.spanToBaggageHeader=c.spanToBaggageHeader,l.spanToJSON=c.spanToJSON,l.spanToTraceHeader=c.spanToTraceHeader,l.startInactiveSpan=c.startInactiveSpan,l.startSession=c.startSession,l.startSpan=c.startSpan,l.startSpanManual=c.startSpanManual,l.withActiveSpan=c.withActiveSpan,l.withIsolationScope=c.withIsolationScope,l.withScope=c.withScope,l.zodErrorsIntegration=c.zodErrorsIntegration,l.metrics=h.metrics,l.WINDOW=m.WINDOW,l.BrowserClient=p.BrowserClient,l.makeFetchTransport=a.makeFetchTransport,l.chromeStackLineParser=r.chromeStackLineParser,l.defaultStackLineParsers=r.defaultStackLineParsers,l.defaultStackParser=r.defaultStackParser,l.geckoStackLineParser=r.geckoStackLineParser,l.opera10StackLineParser=r.opera10StackLineParser,l.opera11StackLineParser=r.opera11StackLineParser,l.winjsStackLineParser=r.winjsStackLineParser,l.eventFromException=n.eventFromException,l.eventFromMessage=n.eventFromMessage,l.exceptionFromError=n.exceptionFromError,l.createUserFeedbackEnvelope=e.createUserFeedbackEnvelope,l.captureUserFeedback=t.captureUserFeedback,l.forceLoad=t.forceLoad,l.getDefaultIntegrations=t.getDefaultIntegrations,l.init=t.init,l.onLoad=t.onLoad,l.showReportDialog=t.showReportDialog,l.breadcrumbsIntegration=i.breadcrumbsIntegration,l.globalHandlersIntegration=o.globalHandlersIntegration,l.httpContextIntegration=f.httpContextIntegration,l.linkedErrorsIntegration=g.linkedErrorsIntegration,l.browserApiErrorsIntegration=S.browserApiErrorsIntegration,l.lazyLoadIntegration=u.lazyLoadIntegration,l.reportingObserverIntegration=v.reportingObserverIntegration,l.httpClientIntegration=y.httpClientIntegration,l.contextLinesIntegration=_.contextLinesIntegration,l.getReplay=C.getReplay,l.replayIntegration=C.replayIntegration,l.replayCanvasIntegration=T.replayCanvasIntegration,l.feedbackAsyncIntegration=A.feedbackAsyncIntegration,l.feedbackIntegration=O.feedbackSyncIntegration,l.feedbackSyncIntegration=O.feedbackSyncIntegration,l.getFeedback=D.getFeedback,l.sendFeedback=D.sendFeedback,l.defaultRequestInstrumentationOptions=M.defaultRequestInstrumentationOptions,l.instrumentOutgoingRequests=M.instrumentOutgoingRequests,l.browserTracingIntegration=R.browserTracingIntegration,l.startBrowserTracingNavigationSpan=R.startBrowserTracingNavigationSpan,l.startBrowserTracingPageLoadSpan=R.startBrowserTracingPageLoadSpan,l.makeBrowserOfflineTransport=F.makeBrowserOfflineTransport,l.browserProfilingIntegration=V.browserProfilingIntegration},3985552739:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(3778408185),h=d(8482989710),m=d(7563271614),p=d(3345899401),a=d(9046403702),r=1024,n="Breadcrumbs",e=s((y={})=>{const _={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...y};return{name:n,setup(C){_.console&&m.addConsoleInstrumentationHandler(f(C)),_.dom&&c.addClickKeypressInstrumentationHandler(o(C,_.dom)),_.xhr&&c.addXhrInstrumentationHandler(g(C)),_.fetch&&m.addFetchInstrumentationHandler(S(C)),_.history&&c.addHistoryInstrumentationHandler(u(C)),_.sentry&&C.on("beforeSendEvent",i(C))}}},"_breadcrumbsIntegration"),t=h.defineIntegration(e);function i(y){return s(function(C){h.getClient()===y&&h.addBreadcrumb({category:`sentry.${C.type==="transaction"?"transaction":"event"}`,event_id:C.event_id,level:C.level,message:m.getEventDescription(C)},{event:C})},"addSentryBreadcrumb")}s(i,"_getSentryBreadcrumbHandler");function o(y,_){return s(function(T){if(h.getClient()!==y)return;let A,O,D=typeof _=="object"?_.serializeAttribute:void 0,M=typeof _=="object"&&typeof _.maxStringLength=="number"?_.maxStringLength:void 0;M&&M>r&&(p.DEBUG_BUILD&&m.logger.warn(`\`dom.maxStringLength\` cannot exceed ${r}, but a value of ${M} was configured. Sentry will use ${r} instead.`),M=r),typeof D=="string"&&(D=[D]);try{const F=T.event,V=v(F)?F.target:F;A=m.htmlTreeAsString(V,{keyAttrs:D,maxStringLength:M}),O=m.getComponentName(V)}catch{A="<unknown>"}if(A.length===0)return;const R={category:`ui.${T.name}`,message:A};O&&(R.data={"ui.component_name":O}),h.addBreadcrumb(R,{event:T.event,name:T.name,global:T.global})},"_innerDomBreadcrumb")}s(o,"_getDomBreadcrumbHandler");function f(y){return s(function(C){if(h.getClient()!==y)return;const T={category:"console",data:{arguments:C.args,logger:"console"},level:m.severityLevelFromString(C.level),message:m.safeJoin(C.args," ")};if(C.level==="assert")if(C.args[0]===!1)T.message=`Assertion failed: ${m.safeJoin(C.args.slice(1)," ")||"console.assert"}`,T.data.arguments=C.args.slice(1);else return;h.addBreadcrumb(T,{input:C.args,level:C.level})},"_consoleBreadcrumb")}s(f,"_getConsoleBreadcrumbHandler");function g(y){return s(function(C){if(h.getClient()!==y)return;const{startTimestamp:T,endTimestamp:A}=C,O=C.xhr[c.SENTRY_XHR_DATA_KEY];if(!T||!A||!O)return;const{method:D,url:M,status_code:R,body:F}=O,V={method:D,url:M,status_code:R},$={xhr:C.xhr,input:F,startTimestamp:T,endTimestamp:A};h.addBreadcrumb({category:"xhr",data:V,type:"http"},$)},"_xhrBreadcrumb")}s(g,"_getXhrBreadcrumbHandler");function S(y){return s(function(C){if(h.getClient()!==y)return;const{startTimestamp:T,endTimestamp:A}=C;if(A&&!(C.fetchData.url.match(/sentry_key/)&&C.fetchData.method==="POST"))if(C.error){const O=C.fetchData,D={data:C.error,input:C.args,startTimestamp:T,endTimestamp:A};h.addBreadcrumb({category:"fetch",data:O,level:"error",type:"http"},D)}else{const O=C.response,D={...C.fetchData,status_code:O&&O.status},M={input:C.args,response:O,startTimestamp:T,endTimestamp:A};h.addBreadcrumb({category:"fetch",data:D,type:"http"},M)}},"_fetchBreadcrumb")}s(S,"_getFetchBreadcrumbHandler");function u(y){return s(function(C){if(h.getClient()!==y)return;let T=C.from,A=C.to;const O=m.parseUrl(a.WINDOW.location.href);let D=T?m.parseUrl(T):void 0;const M=m.parseUrl(A);(!D||!D.path)&&(D=O),O.protocol===M.protocol&&O.host===M.host&&(A=M.relative),O.protocol===D.protocol&&O.host===D.host&&(T=D.relative),h.addBreadcrumb({category:"navigation",data:{from:T,to:A}})},"_historyBreadcrumb")}s(u,"_getHistoryBreadcrumbHandler");function v(y){return!!y&&!!y.target}s(v,"_isEvent"),l.breadcrumbsIntegration=t},9919948800:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(9046403702),p=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a="BrowserApiErrors",r=s((f={})=>{const g={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...f};return{name:a,setupOnce(){g.setTimeout&&h.fill(m.WINDOW,"setTimeout",e),g.setInterval&&h.fill(m.WINDOW,"setInterval",e),g.requestAnimationFrame&&h.fill(m.WINDOW,"requestAnimationFrame",t),g.XMLHttpRequest&&"XMLHttpRequest"in m.WINDOW&&h.fill(XMLHttpRequest.prototype,"send",i);const S=g.eventTarget;S&&(Array.isArray(S)?S:p).forEach(o)}}},"_browserApiErrorsIntegration"),n=c.defineIntegration(r);function e(f){return function(...g){const S=g[0];return g[0]=m.wrap(S,{mechanism:{data:{function:h.getFunctionName(f)},handled:!1,type:"instrument"}}),f.apply(this,g)}}s(e,"_wrapTimeFunction");function t(f){return function(g){return f.apply(this,[m.wrap(g,{mechanism:{data:{function:"requestAnimationFrame",handler:h.getFunctionName(f)},handled:!1,type:"instrument"}})])}}s(t,"_wrapRAF");function i(f){return function(...g){const S=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(v=>{v in S&&typeof S[v]=="function"&&h.fill(S,v,function(y){const _={mechanism:{data:{function:v,handler:h.getFunctionName(y)},handled:!1,type:"instrument"}},C=h.getOriginalFunction(y);return C&&(_.mechanism.data.handler=h.getFunctionName(C)),m.wrap(y,_)})}),f.apply(this,g)}}s(i,"_wrapXHR");function o(f){const g=m.WINDOW,S=g[f]&&g[f].prototype;!S||!S.hasOwnProperty||!S.hasOwnProperty("addEventListener")||(h.fill(S,"addEventListener",function(u){return function(v,y,_){try{typeof y.handleEvent=="function"&&(y.handleEvent=m.wrap(y.handleEvent,{mechanism:{data:{function:"handleEvent",handler:h.getFunctionName(y),target:f},handled:!1,type:"instrument"}}))}catch{}return u.apply(this,[v,m.wrap(y,{mechanism:{data:{function:"addEventListener",handler:h.getFunctionName(y),target:f},handled:!1,type:"instrument"}}),_])}}),h.fill(S,"removeEventListener",function(u){return function(v,y,_){const C=y;try{const T=C&&C.__sentry_wrapped__;T&&u.call(this,v,T,_)}catch{}return u.call(this,v,C,_)}}))}s(o,"_wrapEventTarget"),l.browserApiErrorsIntegration=n},4269444637:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=h.GLOBAL_OBJ,p=7,a="ContextLines",r=s((i={})=>{const o=i.frameContextLines!=null?i.frameContextLines:p;return{name:a,processEvent(f){return e(f,o)}}},"_contextLinesIntegration"),n=c.defineIntegration(r);function e(i,o){const f=m.document,g=m.location&&h.stripUrlQueryAndFragment(m.location.href);if(!f||!g)return i;const S=i.exception&&i.exception.values;if(!S||!S.length)return i;const u=f.documentElement.innerHTML;if(!u)return i;const v=["<!DOCTYPE html>","<html>",...u.split(`
`),"</html>"];return S.forEach(y=>{const _=y.stacktrace;_&&_.frames&&(_.frames=_.frames.map(C=>t(C,v,g,o)))}),i}s(e,"addSourceContext");function t(i,o,f,g){return i.filename!==f||!i.lineno||!o.length||h.addContextToFrame(o,i,g),i}s(t,"applySourceContextToFrame"),l.applySourceContextToFrame=t,l.contextLinesIntegration=n},2334015581:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3345899401),p=d(375537670),a=d(9046403702),r="GlobalHandlers",n=s((v={})=>{const y={onerror:!0,onunhandledrejection:!0,...v};return{name:r,setupOnce(){Error.stackTraceLimit=50},setup(_){y.onerror&&(t(_),S("onerror")),y.onunhandledrejection&&(i(_),S("onunhandledrejection"))}}},"_globalHandlersIntegration"),e=c.defineIntegration(n);function t(v){h.addGlobalErrorInstrumentationHandler(y=>{const{stackParser:_,attachStacktrace:C}=u();if(c.getClient()!==v||a.shouldIgnoreOnError())return;const{msg:T,url:A,line:O,column:D,error:M}=y,R=g(p.eventFromUnknownInput(_,M||T,void 0,C,!1),A,O,D);R.level="error",c.captureEvent(R,{originalException:M,mechanism:{handled:!1,type:"onerror"}})})}s(t,"_installGlobalOnErrorHandler");function i(v){h.addGlobalUnhandledRejectionInstrumentationHandler(y=>{const{stackParser:_,attachStacktrace:C}=u();if(c.getClient()!==v||a.shouldIgnoreOnError())return;const T=o(y),A=h.isPrimitive(T)?f(T):p.eventFromUnknownInput(_,T,void 0,C,!0);A.level="error",c.captureEvent(A,{originalException:T,mechanism:{handled:!1,type:"onunhandledrejection"}})})}s(i,"_installGlobalOnUnhandledRejectionHandler");function o(v){if(h.isPrimitive(v))return v;try{if("reason"in v)return v.reason;if("detail"in v&&"reason"in v.detail)return v.detail.reason}catch{}return v}s(o,"_getUnhandledRejectionError");function f(v){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(v)}`}]}}}s(f,"_eventFromRejectionWithPrimitive");function g(v,y,_,C){const T=v.exception=v.exception||{},A=T.values=T.values||[],O=A[0]=A[0]||{},D=O.stacktrace=O.stacktrace||{},M=D.frames=D.frames||[],R=isNaN(parseInt(C,10))?void 0:C,F=isNaN(parseInt(_,10))?void 0:_,V=h.isString(y)&&y.length>0?y:h.getLocationHref();return M.length===0&&M.push({colno:R,filename:V,function:h.UNKNOWN_FUNCTION,in_app:!0,lineno:F}),v}s(g,"_enhanceEventWithInitialFrame");function S(v){m.DEBUG_BUILD&&h.logger.log(`Global Handler attached: ${v}`)}s(S,"globalHandlerLog");function u(){const v=c.getClient();return v&&v.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}s(u,"getOptions"),l.globalHandlersIntegration=e},328044736:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(3778408185),h=d(8482989710),m=d(7563271614),p=d(3345899401),a="HttpClient",r=s((O={})=>{const D={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...O};return{name:a,setup(M){v(M,D),y(M,D)}}},"_httpClientIntegration"),n=h.defineIntegration(r);function e(O,D,M,R){if(_(O,M.status,M.url)){const F=T(D,R);let V,$,X,Y;A()&&([{headers:V,cookies:X},{headers:$,cookies:Y}]=[{cookieHeader:"Cookie",obj:F},{cookieHeader:"Set-Cookie",obj:M}].map(({cookieHeader:ie,obj:pe})=>{const Ee=f(pe.headers);let Be;try{const it=Ee[ie]||Ee[ie.toLowerCase()]||void 0;it&&(Be=o(it))}catch{p.DEBUG_BUILD&&m.logger.log(`Could not extract cookies from header ${ie}`)}return{headers:Ee,cookies:Be}}));const ne=C({url:F.url,method:F.method,status:M.status,requestHeaders:V,responseHeaders:$,requestCookies:X,responseCookies:Y});h.captureEvent(ne)}}s(e,"_fetchResponseHandler");function t(O,D,M,R){if(_(O,D.status,D.responseURL)){let F,V,$;if(A()){try{const Y=D.getResponseHeader("Set-Cookie")||D.getResponseHeader("set-cookie")||void 0;Y&&(V=o(Y))}catch{p.DEBUG_BUILD&&m.logger.log("Could not extract cookies from response headers")}try{$=g(D)}catch{p.DEBUG_BUILD&&m.logger.log("Could not extract headers from response")}F=R}const X=C({url:D.responseURL,method:M,status:D.status,requestHeaders:F,responseHeaders:$,responseCookies:V});h.captureEvent(X)}}s(t,"_xhrResponseHandler");function i(O){if(O){const D=O["Content-Length"]||O["content-length"];if(D)return parseInt(D,10)}}s(i,"_getResponseSizeFromHeaders");function o(O){return O.split("; ").reduce((D,M)=>{const[R,F]=M.split("=");return D[R]=F,D},{})}s(o,"_parseCookieString");function f(O){const D={};return O.forEach((M,R)=>{D[R]=M}),D}s(f,"_extractFetchHeaders");function g(O){const D=O.getAllResponseHeaders();return D?D.split(`\r
`).reduce((M,R)=>{const[F,V]=R.split(": ");return M[F]=V,M},{}):{}}s(g,"_getXHRResponseHeaders");function S(O,D){return O.some(M=>typeof M=="string"?D.includes(M):M.test(D))}s(S,"_isInGivenRequestTargets");function u(O,D){return O.some(M=>typeof M=="number"?M===D:D>=M[0]&&D<=M[1])}s(u,"_isInGivenStatusRanges");function v(O,D){m.supportsNativeFetch()&&m.addFetchInstrumentationHandler(M=>{if(h.getClient()!==O)return;const{response:R,args:F}=M,[V,$]=F;R&&e(D,V,R,$)})}s(v,"_wrapFetch");function y(O,D){"XMLHttpRequest"in m.GLOBAL_OBJ&&c.addXhrInstrumentationHandler(M=>{if(h.getClient()!==O)return;const R=M.xhr,F=R[c.SENTRY_XHR_DATA_KEY];if(!F)return;const{method:V,request_headers:$}=F;try{t(D,R,V,$)}catch(X){p.DEBUG_BUILD&&m.logger.warn("Error while extracting response event form XHR response",X)}})}s(y,"_wrapXHR");function _(O,D,M){return u(O.failedRequestStatusCodes,D)&&S(O.failedRequestTargets,M)&&!h.isSentryRequestUrl(M,h.getClient())}s(_,"_shouldCaptureResponse");function C(O){const D=`HTTP Client Error with status code: ${O.status}`,M={message:D,exception:{values:[{type:"Error",value:D}]},request:{url:O.url,method:O.method,headers:O.requestHeaders,cookies:O.requestCookies},contexts:{response:{status_code:O.status,headers:O.responseHeaders,cookies:O.responseCookies,body_size:i(O.responseHeaders)}}};return m.addExceptionMechanism(M,{type:"http.client",handled:!1}),M}s(C,"_createEvent");function T(O,D){return!D&&O instanceof Request||O instanceof Request&&O.bodyUsed?O:new Request(O,D)}s(T,"_getRequest");function A(){const O=h.getClient();return O?Boolean(O.getOptions().sendDefaultPii):!1}s(A,"_shouldSendDefaultPii"),l.httpClientIntegration=n},7098914998:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(9046403702),m=c.defineIntegration(()=>({name:"HttpContext",preprocessEvent(p){if(!h.WINDOW.navigator&&!h.WINDOW.location&&!h.WINDOW.document)return;const a=p.request&&p.request.url||h.WINDOW.location&&h.WINDOW.location.href,{referrer:r}=h.WINDOW.document||{},{userAgent:n}=h.WINDOW.navigator||{},e={...p.request&&p.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},t={...p.request,...a&&{url:a},headers:e};p.request=t}}));l.httpContextIntegration=m},4305747877:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(375537670),p="cause",a=5,r="LinkedErrors",n=s((t={})=>{const i=t.limit||a,o=t.key||p;return{name:r,preprocessEvent(f,g,S){const u=S.getOptions();h.applyAggregateErrorsToEvent(m.exceptionFromError,u.stackParser,u.maxValueLength,o,i,f,g)}}},"_linkedErrorsIntegration"),e=c.defineIntegration(n);l.linkedErrorsIntegration=e},918703877:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=h.GLOBAL_OBJ,p="ReportingObserver",a=new WeakMap,r=s((e={})=>{const t=e.types||["crash","deprecation","intervention"];function i(o){if(a.has(c.getClient()))for(const f of o)c.withScope(g=>{g.setExtra("url",f.url);const S=`ReportingObserver [${f.type}]`;let u="No details available";if(f.body){const v={};for(const y in f.body)v[y]=f.body[y];if(g.setExtra("body",v),f.type==="crash"){const y=f.body;u=[y.crashId||"",y.reason||""].join(" ").trim()||u}else u=f.body.message||u}c.captureMessage(`${S}: ${u}`)})}return s(i,"handler"),{name:p,setupOnce(){if(!h.supportsReportingObserver())return;new m.ReportingObserver(i,{buffered:!0,types:t}).observe()},setup(o){a.set(o,!0)}}},"_reportingObserverIntegration"),n=c.defineIntegration(r);l.reportingObserverIntegration=n},1114790286:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710);function h(n,e=1,t){c.metrics.increment(c.BrowserMetricsAggregator,n,e,t)}s(h,"increment");function m(n,e,t){c.metrics.distribution(c.BrowserMetricsAggregator,n,e,t)}s(m,"distribution");function p(n,e,t){c.metrics.set(c.BrowserMetricsAggregator,n,e,t)}s(p,"set");function a(n,e,t){c.metrics.gauge(c.BrowserMetricsAggregator,n,e,t)}s(a,"gauge");const r={increment:h,distribution:m,set:p,gauge:a};l.metrics=r},5380267868:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3345899401),p=d(3423034766),a=d(9596377211),r="BrowserProfiling",n=s(()=>({name:r,setup(t){const i=c.getActiveSpan(),o=i&&c.getRootSpan(i);o&&a.isAutomatedPageLoadSpan(o)&&a.shouldProfileSpan(o)&&p.startProfileForSpan(o),t.on("spanStart",f=>{f===c.getRootSpan(f)&&a.shouldProfileSpan(f)&&p.startProfileForSpan(f)}),t.on("beforeEnvelope",f=>{if(!a.getActiveProfilesCount())return;const g=a.findProfiledTransactionsFromEnvelope(f);if(!g.length)return;const S=[];for(const u of g){const v=u&&u.contexts,y=v&&v.profile&&v.profile.profile_id,_=v&&v.profile&&v.profile.start_timestamp;if(typeof y!="string"){m.DEBUG_BUILD&&h.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!y){m.DEBUG_BUILD&&h.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}v&&v.profile&&delete v.profile;const C=a.takeProfileFromGlobalCache(y);if(!C){m.DEBUG_BUILD&&h.logger.log(`[Profiling] Could not retrieve profile for span: ${y}`);continue}const T=a.createProfilingEvent(y,_,C,u);T&&S.push(T)}a.addProfilesToEnvelope(f,S)})}}),"_browserProfilingIntegration"),e=c.defineIntegration(n);l.browserProfilingIntegration=e},3423034766:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3345899401),p=d(9046403702),a=d(9596377211);function r(n){let e;a.isAutomatedPageLoadSpan(n)&&(e=h.timestampInSeconds()*1e3);const t=a.startJSSelfProfile();if(!t)return;m.DEBUG_BUILD&&h.logger.log(`[Profiling] started profiling span: ${c.spanToJSON(n).description}`);const i=h.uuid4();c.getCurrentScope().setContext("profile",{profile_id:i,start_timestamp:e});async function o(){if(n&&t)return t.stop().then(u=>{if(f&&(p.WINDOW.clearTimeout(f),f=void 0),m.DEBUG_BUILD&&h.logger.log(`[Profiling] stopped profiling of span: ${c.spanToJSON(n).description}`),!u){m.DEBUG_BUILD&&h.logger.log(`[Profiling] profiler returned null profile for: ${c.spanToJSON(n).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}a.addProfileToGlobalCache(i,u)}).catch(u=>{m.DEBUG_BUILD&&h.logger.log("[Profiling] error while stopping profiler:",u)})}s(o,"onProfileHandler");let f=p.WINDOW.setTimeout(()=>{m.DEBUG_BUILD&&h.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",c.spanToJSON(n).description),o()},a.MAX_PROFILE_DURATION_MS);const g=n.end.bind(n);function S(){return n?(o().then(()=>{g()},()=>{g()}),n):g()}s(S,"profilingWrappedSpanEnd"),n.end=S}s(r,"startProfileForSpan"),l.startProfileForSpan=r},9596377211:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3345899401),p=d(9046403702),a=1e6,r=String(0),n="main";let e="",t="",i="",o=p.WINDOW.navigator&&p.WINDOW.navigator.userAgent||"",f="";const g=p.WINDOW.navigator&&p.WINDOW.navigator.language||p.WINDOW.navigator&&p.WINDOW.navigator.languages&&p.WINDOW.navigator.languages[0]||"";function S(Me){return typeof Me=="object"&&Me!==null&&"getHighEntropyValues"in Me}s(S,"isUserAgentData");const u=p.WINDOW.navigator&&p.WINDOW.navigator.userAgentData;S(u)&&u.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(Me=>{if(e=Me.platform||"",i=Me.architecture||"",f=Me.model||"",t=Me.platformVersion||"",Me.fullVersionList&&Me.fullVersionList.length>0){const je=Me.fullVersionList[Me.fullVersionList.length-1];o=`${je.brand} ${je.version}`}}).catch(Me=>{});function v(Me){return!("thread_metadata"in Me)}s(v,"isProcessedJSSelfProfile");function y(Me){return v(Me)?A(Me):Me}s(y,"enrichWithThreadInformation");function _(Me){const je=Me&&Me.contexts&&Me.contexts.trace&&Me.contexts.trace.trace_id;return typeof je=="string"&&je.length!==32&&m.DEBUG_BUILD&&h.logger.log(`[Profiling] Invalid traceId: ${je} on profiled event`),typeof je!="string"?"":je}s(_,"getTraceId");function C(Me,je,We,Ze){if(Ze.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(We==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${We} instead.`);const ft=_(Ze),vt=y(We),De=je||(typeof Ze.start_timestamp=="number"?Ze.start_timestamp*1e3:h.timestampInSeconds()*1e3),Pe=typeof Ze.timestamp=="number"?Ze.timestamp*1e3:h.timestampInSeconds()*1e3;return{event_id:Me,timestamp:new Date(De).toISOString(),platform:"javascript",version:"1",release:Ze.release||"",environment:Ze.environment||c.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:p.WINDOW.navigator.userAgent},os:{name:e,version:t,build_number:o},device:{locale:g,model:f,manufacturer:o,architecture:i,is_emulator:!1},debug_meta:{images:R(We.resources)},profile:vt,transactions:[{name:Ze.transaction||"",id:Ze.event_id||h.uuid4(),trace_id:ft,active_thread_id:r,relative_start_ns:"0",relative_end_ns:((Pe-De)*1e6).toFixed(0)}]}}s(C,"createProfilePayload");function T(Me){return c.spanToJSON(Me).op==="pageload"}s(T,"isAutomatedPageLoadSpan");function A(Me){let je,We=0;const Ze={samples:[],stacks:[],frames:[],thread_metadata:{[r]:{name:n}}};if(!Me.samples.length)return Ze;const ft=Me.samples[0].timestamp,vt=typeof performance.timeOrigin=="number"?performance.timeOrigin:h.browserPerformanceTimeOrigin||0,De=vt-(h.browserPerformanceTimeOrigin||vt);for(let Pe=0;Pe<Me.samples.length;Pe++){const Ke=Me.samples[Pe];if(Ke.stackId===void 0){je===void 0&&(je=We,Ze.stacks[je]=[],We++),Ze.samples[Pe]={elapsed_since_start_ns:((Ke.timestamp+De-ft)*a).toFixed(0),stack_id:je,thread_id:r};continue}let Ye=Me.stacks[Ke.stackId];const xe=[];for(;Ye;){xe.push(Ye.frameId);const At=Me.frames[Ye.frameId];Ze.frames[Ye.frameId]===void 0&&(Ze.frames[Ye.frameId]={function:At.name,abs_path:typeof At.resourceId=="number"?Me.resources[At.resourceId]:void 0,lineno:At.line,colno:At.column}),Ye=Ye.parentId===void 0?void 0:Me.stacks[Ye.parentId]}const Ct={elapsed_since_start_ns:((Ke.timestamp+De-ft)*a).toFixed(0),stack_id:We,thread_id:r};Ze.stacks[We]=xe,Ze.samples[Pe]=Ct,We++}return Ze}s(A,"convertJSSelfProfileToSampledFormat");function O(Me,je){if(!je.length)return Me;for(const We of je)Me[1].push([{type:"profile"},We]);return Me}s(O,"addProfilesToEnvelope");function D(Me){const je=[];return h.forEachEnvelopeItem(Me,(We,Ze)=>{if(Ze==="transaction")for(let ft=1;ft<We.length;ft++){const vt=We[ft];vt&&vt.contexts&&vt.contexts.profile&&vt.contexts.profile.profile_id&&je.push(We[ft])}}),je}s(D,"findProfiledTransactionsFromEnvelope");const M=new WeakMap;function R(Me){const je=h.GLOBAL_OBJ._sentryDebugIds;if(!je)return[];const We=c.getClient(),Ze=We&&We.getOptions(),ft=Ze&&Ze.stackParser;if(!ft)return[];let vt;const De=M.get(ft);De?vt=De:(vt=new Map,M.set(ft,vt));const Pe=Object.keys(je).reduce((Ye,xe)=>{let Ct;const At=vt.get(xe);At?Ct=At:(Ct=ft(xe),vt.set(xe,Ct));for(let Lt=Ct.length-1;Lt>=0;Lt--){const Ft=Ct[Lt],Jt=Ft&&Ft.filename;if(Ft&&Jt){Ye[Jt]=je[xe];break}}return Ye},{}),Ke=[];for(const Ye of Me)Ye&&Pe[Ye]&&Ke.push({type:"sourcemap",code_file:Ye,debug_id:Pe[Ye]});return Ke}s(R,"applyDebugMetadata");function F(Me){return typeof Me!="number"&&typeof Me!="boolean"||typeof Me=="number"&&isNaN(Me)?(m.DEBUG_BUILD&&h.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Me)} of type ${JSON.stringify(typeof Me)}.`),!1):Me===!0||Me===!1?!0:Me<0||Me>1?(m.DEBUG_BUILD&&h.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${Me}.`),!1):!0}s(F,"isValidSampleRate");function V(Me){return Me.samples.length<2?(m.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):Me.frames.length?!0:(m.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}s(V,"isValidProfile");let $=!1;const X=3e4;function Y(Me){return typeof Me=="function"}s(Y,"isJSProfilerSupported");function ne(){const Me=p.WINDOW.Profiler;if(!Y(Me)){m.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const je=10,We=Math.floor(X/je);try{return new Me({sampleInterval:je,maxBufferSize:We})}catch{m.DEBUG_BUILD&&(h.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.logger.log("[Profiling] Disabling profiling for current user session.")),$=!0}}s(ne,"startJSSelfProfile");function ie(Me){if($)return m.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!Me.isRecording())return m.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const je=c.getClient(),We=je&&je.getOptions();if(!We)return m.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling disabled, no options found."),!1;const Ze=We.profilesSampleRate;return F(Ze)?Ze?(Ze===!0?!0:Math.random()<Ze)?!0:(m.DEBUG_BUILD&&h.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(Ze)})`),!1):(m.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(m.DEBUG_BUILD&&h.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}s(ie,"shouldProfileSpan");function pe(Me,je,We,Ze){return V(We)?C(Me,je,We,Ze):null}s(pe,"createProfilingEvent");const Ee=new Map;function Be(){return Ee.size}s(Be,"getActiveProfilesCount");function it(Me){const je=Ee.get(Me);return je&&Ee.delete(Me),je}s(it,"takeProfileFromGlobalCache");function Ce(Me,je){if(Ee.set(Me,je),Ee.size>30){const We=Ee.keys().next().value;Ee.delete(We)}}s(Ce,"addProfileToGlobalCache"),l.MAX_PROFILE_DURATION_MS=X,l.addProfileToGlobalCache=Ce,l.addProfilesToEnvelope=O,l.applyDebugMetadata=R,l.convertJSSelfProfileToSampledFormat=A,l.createProfilePayload=C,l.createProfilingEvent=pe,l.enrichWithThreadInformation=y,l.findProfiledTransactionsFromEnvelope=D,l.getActiveProfilesCount=Be,l.isAutomatedPageLoadSpan=T,l.isValidSampleRate=F,l.shouldProfileSpan=ie,l.startJSSelfProfile=ne,l.takeProfileFromGlobalCache=it},7672786771:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3778408185),p=d(8151162894),a=d(3345899401),r=d(9046403702),n=d(3985552739),e=d(9919948800),t=d(2334015581),i=d(7098914998),o=d(4305747877),f=d(4795369790),g=d(8685600704);function S(D){return[c.inboundFiltersIntegration(),c.functionToStringIntegration(),e.browserApiErrorsIntegration(),n.breadcrumbsIntegration(),t.globalHandlersIntegration(),o.linkedErrorsIntegration(),c.dedupeIntegration(),i.httpContextIntegration()]}s(S,"getDefaultIntegrations");function u(D={}){return{...{defaultIntegrations:S(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:r.WINDOW.SENTRY_RELEASE&&r.WINDOW.SENTRY_RELEASE.id?r.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...D}}s(u,"applyDefaultOptions");function v(){const D=r.WINDOW,M=D&&D.chrome&&D.chrome.runtime&&D.chrome.runtime.id,R=r.WINDOW;return!!(R&&R.browser&&R.browser.runtime&&R.browser.runtime.id)||!!M}s(v,"shouldShowBrowserExtensionError");function y(D={}){const M=u(D);if(v()){h.consoleSandbox(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}a.DEBUG_BUILD&&(h.supportsFetch()||h.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const R={...M,stackParser:h.stackParserFromStackParserOptions(M.stackParser||f.defaultStackParser),integrations:c.getIntegrationsToSetup(M),transport:M.transport||g.makeFetchTransport};c.initAndBind(p.BrowserClient,R),M.autoSessionTracking&&A()}s(y,"init");function _(D={}){if(!r.WINDOW.document){a.DEBUG_BUILD&&h.logger.error("Global document not defined in showReportDialog call");return}const M=c.getCurrentScope(),R=M.getClient(),F=R&&R.getDsn();if(!F){a.DEBUG_BUILD&&h.logger.error("DSN not configured for showReportDialog call");return}if(M&&(D.user={...M.getUser(),...D.user}),!D.eventId){const Y=c.lastEventId();Y&&(D.eventId=Y)}const V=r.WINDOW.document.createElement("script");V.async=!0,V.crossOrigin="anonymous",V.src=c.getReportDialogEndpoint(F,D),D.onLoad&&(V.onload=D.onLoad);const{onClose:$}=D;if($){const Y=s(ne=>{if(ne.data==="__sentry_reportdialog_closed__")try{$()}finally{r.WINDOW.removeEventListener("message",Y)}},"reportDialogClosedMessageHandler");r.WINDOW.addEventListener("message",Y)}const X=r.WINDOW.document.head||r.WINDOW.document.body;X?X.appendChild(V):a.DEBUG_BUILD&&h.logger.error("Not injecting report dialog. No injection point found in HTML")}s(_,"showReportDialog");function C(){}s(C,"forceLoad");function T(D){D()}s(T,"onLoad");function A(){if(typeof r.WINDOW.document>"u"){a.DEBUG_BUILD&&h.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}c.startSession({ignoreDuration:!0}),c.captureSession(),m.addHistoryInstrumentationHandler(({from:D,to:M})=>{D!==void 0&&D!==M&&(c.startSession({ignoreDuration:!0}),c.captureSession())})}s(A,"startSessionTracking");function O(D){const M=c.getClient();M&&M.captureUserFeedback(D)}s(O,"captureUserFeedback"),l.captureUserFeedback=O,l.forceLoad=C,l.getDefaultIntegrations=S,l.init=y,l.onLoad=T,l.showReportDialog=_},4795369790:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=10,m=20,p=30,a=40,r=50;function n($,X,Y,ne){const ie={filename:$,function:X==="<anonymous>"?c.UNKNOWN_FUNCTION:X,in_app:!0};return Y!==void 0&&(ie.lineno=Y),ne!==void 0&&(ie.colno=ne),ie}s(n,"createFrame");const e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=[p,s($=>{const X=e.exec($);if(X){if(X[2]&&X[2].indexOf("eval")===0){const pe=t.exec(X[2]);pe&&(X[2]=pe[1],X[3]=pe[2],X[4]=pe[3])}const[ne,ie]=V(X[1]||c.UNKNOWN_FUNCTION,X[2]);return n(ie,ne,X[3]?+X[3]:void 0,X[4]?+X[4]:void 0)}},"chromeStackParserFn")],f=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,g=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=[r,s($=>{const X=f.exec($);if(X){if(X[3]&&X[3].indexOf(" > eval")>-1){const pe=g.exec(X[3]);pe&&(X[1]=X[1]||"eval",X[3]=pe[1],X[4]=pe[2],X[5]="")}let ne=X[3],ie=X[1]||c.UNKNOWN_FUNCTION;return[ie,ne]=V(ie,ne),n(ne,ie,X[4]?+X[4]:void 0,X[5]?+X[5]:void 0)}},"gecko")],v=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,_=[a,s($=>{const X=v.exec($);return X?n(X[2],X[1]||c.UNKNOWN_FUNCTION,+X[3],X[4]?+X[4]:void 0):void 0},"winjs")],C=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,A=[h,s($=>{const X=C.exec($);return X?n(X[2],X[3]||c.UNKNOWN_FUNCTION,+X[1]):void 0},"opera10")],O=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,M=[m,s($=>{const X=O.exec($);return X?n(X[5],X[3]||X[4]||c.UNKNOWN_FUNCTION,+X[1],+X[2]):void 0},"opera11")],R=[o,u],F=c.createStackParser(...R),V=s(($,X)=>{const Y=$.indexOf("safari-extension")!==-1,ne=$.indexOf("safari-web-extension")!==-1;return Y||ne?[$.indexOf("@")!==-1?$.split("@")[0]:c.UNKNOWN_FUNCTION,Y?`safari-extension:${X}`:`safari-web-extension:${X}`]:[$,X]},"extractSafariExtensionDetails");l.chromeStackLineParser=o,l.defaultStackLineParsers=R,l.defaultStackParser=F,l.geckoStackLineParser=u,l.opera10StackLineParser=A,l.opera11StackLineParser=M,l.winjsStackLineParser=_},3372334685:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(3345899401),p=d(9046403702);function a(){p.WINDOW&&p.WINDOW.document?p.WINDOW.document.addEventListener("visibilitychange",()=>{const r=c.getActiveSpan();if(!r)return;const n=c.getRootSpan(r);if(p.WINDOW.document.hidden&&n){const e="cancelled",{op:t,status:i}=c.spanToJSON(n);m.DEBUG_BUILD&&h.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t}`),i||n.setStatus({code:c.SPAN_STATUS_ERROR,message:e}),n.setAttribute("sentry.cancellation_reason","document.hidden"),n.end()}}):m.DEBUG_BUILD&&h.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}s(a,"registerBackgroundTabDetection"),l.registerBackgroundTabDetection=a},5559796378:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(3778408185),h=d(8482989710),m=d(7563271614),p=d(3345899401),a=d(9046403702),r=d(3372334685),n=d(6520656099),e="BrowserTracing",t={...h.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...n.defaultRequestInstrumentationOptions},i=s((v={})=>{h.registerSpanErrorInstrumentation();const{enableInp:y,enableLongTask:_,_experiments:{enableInteractions:C},beforeStartSpan:T,idleTimeout:A,finalTimeout:O,childSpanTimeout:D,markBackgroundSpan:M,traceFetch:R,traceXHR:F,shouldCreateSpanForRequest:V,enableHTTPTimings:$,instrumentPageLoad:X,instrumentNavigation:Y}={...t,...v},ne=c.startTrackingWebVitals();y&&c.startTrackingINP(),_&&c.startTrackingLongTasks(),C&&c.startTrackingInteractions();const ie={name:void 0,source:void 0};function pe(Ee,Be){const it=Be.op==="pageload",Ce=T?T(Be):Be,Me=Ce.attributes||{};Be.name!==Ce.name&&(Me[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",Ce.attributes=Me),ie.name=Ce.name,ie.source=Me[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const je=h.startIdleSpan(Ce,{idleTimeout:A,finalTimeout:O,childSpanTimeout:D,disableAutoFinish:it,beforeSpanEnd:Ze=>{ne(),c.addPerformanceEntries(Ze)}});function We(){["interactive","complete"].includes(a.WINDOW.document.readyState)&&Ee.emit("idleSpanEnableAutoFinish",je)}return s(We,"emitFinish"),it&&a.WINDOW.document&&(a.WINDOW.document.addEventListener("readystatechange",()=>{We()}),We()),je}return s(pe,"_createRouteSpan"),{name:e,afterAllSetup(Ee){let Be,it=a.WINDOW.location&&a.WINDOW.location.href;Ee.on("startNavigationSpan",Ce=>{h.getClient()===Ee&&(Be&&(p.DEBUG_BUILD&&m.logger.log(`[Tracing] Finishing current root span with op: ${h.spanToJSON(Be).op}`),Be.end()),Be=pe(Ee,{op:"navigation",...Ce}))}),Ee.on("startPageLoadSpan",(Ce,Me={})=>{if(h.getClient()!==Ee)return;Be&&(p.DEBUG_BUILD&&m.logger.log(`[Tracing] Finishing current root span with op: ${h.spanToJSON(Be).op}`),Be.end());const je=Me.sentryTrace||g("sentry-trace"),We=Me.baggage||g("baggage"),Ze=m.propagationContextFromHeaders(je,We);h.getCurrentScope().setPropagationContext(Ze),Be=pe(Ee,{op:"pageload",...Ce})}),Ee.on("spanEnd",Ce=>{const Me=h.spanToJSON(Ce).op;if(Ce!==h.getRootSpan(Ce)||Me!=="navigation"&&Me!=="pageload")return;const je=h.getCurrentScope(),We=je.getPropagationContext();je.setPropagationContext({...We,sampled:We.sampled!==void 0?We.sampled:h.spanIsSampled(Ce),dsc:We.dsc||h.getDynamicSamplingContextFromSpan(Ce)})}),a.WINDOW.location&&(X&&o(Ee,{name:a.WINDOW.location.pathname,startTime:m.browserPerformanceTimeOrigin?m.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),Y&&c.addHistoryInstrumentationHandler(({to:Ce,from:Me})=>{if(Me===void 0&&it&&it.indexOf(Ce)!==-1){it=void 0;return}Me!==Ce&&(it=void 0,f(Ee,{name:a.WINDOW.location.pathname,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))})),M&&r.registerBackgroundTabDetection(),C&&S(A,O,D,ie),n.instrumentOutgoingRequests({traceFetch:R,traceXHR:F,tracePropagationTargets:Ee.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:V,enableHTTPTimings:$})}}},"browserTracingIntegration");function o(v,y,_){v.emit("startPageLoadSpan",y,_),h.getCurrentScope().setTransactionName(y.name);const C=h.getActiveSpan();return(C&&h.spanToJSON(C).op)==="pageload"?C:void 0}s(o,"startBrowserTracingPageLoadSpan");function f(v,y){h.getCurrentScope().setPropagationContext(u()),h.getIsolationScope().setPropagationContext(u()),v.emit("startNavigationSpan",y),h.getCurrentScope().setTransactionName(y.name);const _=h.getActiveSpan();return(_&&h.spanToJSON(_).op)==="navigation"?_:void 0}s(f,"startBrowserTracingNavigationSpan");function g(v){const y=m.getDomElement(`meta[name=${v}]`);return y?y.getAttribute("content"):void 0}s(g,"getMetaContent");function S(v,y,_,C){let T;const A=s(()=>{const O="ui.action.click",D=h.getActiveSpan(),M=D&&h.getRootSpan(D);if(M){const R=h.spanToJSON(M).op;if(["navigation","pageload"].includes(R)){p.DEBUG_BUILD&&m.logger.warn(`[Tracing] Did not create ${O} span because a pageload or navigation span is in progress.`);return}}if(T&&(T.setAttribute(h.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),T.end(),T=void 0),!C.name){p.DEBUG_BUILD&&m.logger.warn(`[Tracing] Did not create ${O} transaction because _latestRouteName is missing.`);return}T=h.startIdleSpan({name:C.name,op:O,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:C.source||"url"}},{idleTimeout:v,finalTimeout:y,childSpanTimeout:_})},"registerInteractionTransaction");a.WINDOW.document&&addEventListener("click",A,{once:!1,capture:!0})}s(S,"registerInteractionListener");function u(){return{traceId:m.uuid4(),spanId:m.uuid4().substring(16)}}s(u,"generatePropagationContext"),l.BROWSER_TRACING_INTEGRATION_ID=e,l.browserTracingIntegration=i,l.getMetaContent=g,l.startBrowserTracingNavigationSpan=f,l.startBrowserTracingPageLoadSpan=o},6520656099:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(3778408185),h=d(8482989710),m=d(7563271614),p=d(9046403702),a={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function r(y){const{traceFetch:_,traceXHR:C,shouldCreateSpanForRequest:T,enableHTTPTimings:A,tracePropagationTargets:O}={traceFetch:a.traceFetch,traceXHR:a.traceXHR,...y},D=typeof T=="function"?T:F=>!0,M=s(F=>f(F,O),"shouldAttachHeadersWithTargets"),R={};_&&m.addFetchInstrumentationHandler(F=>{const V=h.instrumentFetchRequest(F,D,M,R);if(V){const $=v(F.fetchData.url),X=$?m.parseUrl($).host:void 0;V.setAttributes({"http.url":$,"server.address":X})}A&&V&&e(V)}),C&&c.addXhrInstrumentationHandler(F=>{const V=g(F,D,M,R);A&&V&&e(V)})}s(r,"instrumentOutgoingRequests");function n(y){return y.entryType==="resource"&&"initiatorType"in y&&typeof y.nextHopProtocol=="string"&&(y.initiatorType==="fetch"||y.initiatorType==="xmlhttprequest")}s(n,"isPerformanceResourceTiming");function e(y){const{url:_}=h.spanToJSON(y).data||{};if(!_||typeof _!="string")return;const C=c.addPerformanceInstrumentationHandler("resource",({entries:T})=>{T.forEach(A=>{n(A)&&A.name.endsWith(_)&&(o(A).forEach(D=>y.setAttribute(...D)),setTimeout(C))})})}s(e,"addHTTPTimings");function t(y){let _="unknown",C="unknown",T="";for(const A of y){if(A==="/"){[_,C]=y.split("/");break}if(!isNaN(Number(A))){_=T==="h"?"http":T,C=y.split(T)[1];break}T+=A}return T===y&&(_=T),{name:_,version:C}}s(t,"extractNetworkProtocol");function i(y=0){return((m.browserPerformanceTimeOrigin||performance.timeOrigin)+y)/1e3}s(i,"getAbsoluteTime");function o(y){const{name:_,version:C}=t(y.nextHopProtocol),T=[];return T.push(["network.protocol.version",C],["network.protocol.name",_]),m.browserPerformanceTimeOrigin?[...T,["http.request.redirect_start",i(y.redirectStart)],["http.request.fetch_start",i(y.fetchStart)],["http.request.domain_lookup_start",i(y.domainLookupStart)],["http.request.domain_lookup_end",i(y.domainLookupEnd)],["http.request.connect_start",i(y.connectStart)],["http.request.secure_connection_start",i(y.secureConnectionStart)],["http.request.connection_end",i(y.connectEnd)],["http.request.request_start",i(y.requestStart)],["http.request.response_start",i(y.responseStart)],["http.request.response_end",i(y.responseEnd)]]:T}s(o,"resourceTimingEntryToSpanData");function f(y,_){const C=p.WINDOW.location&&p.WINDOW.location.href;if(C){let T,A;try{T=new URL(y,C),A=new URL(C).origin}catch{return!1}const O=T.origin===A;return _?m.stringMatchesSomePattern(T.toString(),_)||O&&m.stringMatchesSomePattern(T.pathname,_):O}else{const T=!!y.match(/^\/(?!\/)/);return _?m.stringMatchesSomePattern(y,_):T}}s(f,"shouldAttachHeaders");function g(y,_,C,T){const A=y.xhr,O=A&&A[c.SENTRY_XHR_DATA_KEY];if(!A||A.__sentry_own_request__||!O)return;const D=h.hasTracingEnabled()&&_(O.url);if(y.endTimestamp&&D){const X=A.__sentry_xhr_span_id__;if(!X)return;const Y=T[X];Y&&O.status_code!==void 0&&(h.setHttpStatus(Y,O.status_code),Y.end(),delete T[X]);return}const M=v(O.url),R=M?m.parseUrl(M).host:void 0,F=!!h.getActiveSpan(),V=D&&F?h.startInactiveSpan({name:`${O.method} ${O.url}`,attributes:{type:"xhr","http.method":O.method,"http.url":M,url:O.url,"server.address":R,[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[h.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new h.SentryNonRecordingSpan;A.__sentry_xhr_span_id__=V.spanContext().spanId,T[A.__sentry_xhr_span_id__]=V;const $=h.getClient();return A.setRequestHeader&&C(O.url)&&$&&S(A,$,h.hasTracingEnabled()&&F?V:void 0),V}s(g,"xhrCallback");function S(y,_,C){const T=h.getCurrentScope(),A=h.getIsolationScope(),{traceId:O,spanId:D,sampled:M,dsc:R}={...A.getPropagationContext(),...T.getPropagationContext()},F=C&&h.hasTracingEnabled()?h.spanToTraceHeader(C):m.generateSentryTraceHeader(O,D,M),V=m.dynamicSamplingContextToSentryBaggageHeader(R||(C?h.getDynamicSamplingContextFromSpan(C):h.getDynamicSamplingContextFromClient(O,_)));u(y,F,V)}s(S,"addTracingHeadersToXhrRequest");function u(y,_,C){try{y.setRequestHeader("sentry-trace",_),C&&y.setRequestHeader(m.BAGGAGE_HEADER_NAME,C)}catch{}}s(u,"setHeaderOnXhr");function v(y){try{return new URL(y,p.WINDOW.location.origin).href}catch{return}}s(v,"getFullURL"),l.defaultRequestInstrumentationOptions=a,l.extractNetworkProtocol=t,l.instrumentOutgoingRequests=r,l.shouldAttachHeaders=f,l.xhrCallback=g},8685600704:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(8475594045);function p(a,r=m.getNativeFetchImplementation()){let n=0,e=0;function t(i){const o=i.body.length;n+=o,e++;const f={body:i.body,method:"POST",referrerPolicy:"origin",headers:a.headers,keepalive:n<=6e4&&e<15,...a.fetchOptions};if(!r)return m.clearCachedFetchImplementation(),h.rejectedSyncPromise("No fetch implementation available");try{return r(a.url,f).then(g=>(n-=o,e--,{statusCode:g.status,headers:{"x-sentry-rate-limits":g.headers.get("X-Sentry-Rate-Limits"),"retry-after":g.headers.get("Retry-After")}}))}catch(g){return m.clearCachedFetchImplementation(),n-=o,e--,h.rejectedSyncPromise(g)}}return s(t,"makeRequest"),c.createTransport(a,t)}s(p,"makeFetchTransport"),l.makeFetchTransport=p},7824548363:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(7563271614),m=d(8685600704);function p(g){return new Promise((S,u)=>{g.oncomplete=g.onsuccess=()=>S(g.result),g.onabort=g.onerror=()=>u(g.error)})}s(p,"promisifyRequest");function a(g,S){const u=indexedDB.open(g);u.onupgradeneeded=()=>u.result.createObjectStore(S);const v=p(u);return y=>v.then(_=>y(_.transaction(S,"readwrite").objectStore(S)))}s(a,"createStore");function r(g){return p(g.getAllKeys())}s(r,"keys");function n(g,S,u){return g(v=>r(v).then(y=>{if(!(y.length>=u))return v.put(S,Math.max(...y,0)+1),p(v.transaction)}))}s(n,"push");function e(g,S,u){return g(v=>r(v).then(y=>{if(!(y.length>=u))return v.put(S,Math.min(...y,0)-1),p(v.transaction)}))}s(e,"unshift");function t(g){return g(S=>r(S).then(u=>{if(u.length!==0)return p(S.get(u[0])).then(v=>(S.delete(u[0]),p(S.transaction).then(()=>v)))}))}s(t,"shift");function i(g){let S;function u(){return S==null&&(S=a(g.dbName||"sentry-offline",g.storeName||"queue")),S}return s(u,"getStore"),{push:async v=>{try{const y=await h.serializeEnvelope(v);await n(u(),y,g.maxQueueSize||30)}catch{}},unshift:async v=>{try{const y=await h.serializeEnvelope(v);await e(u(),y,g.maxQueueSize||30)}catch{}},shift:async()=>{try{const v=await t(u());if(v)return h.parseEnvelope(v)}catch{}}}}s(i,"createIndexedDbStore");function o(g){return S=>g({...S,createStore:i})}s(o,"makeIndexedDbOfflineTransport");function f(g=m.makeFetchTransport){return o(c.makeOfflineTransport(g))}s(f,"makeBrowserOfflineTransport"),l.createStore=a,l.makeBrowserOfflineTransport=f,l.push=n,l.shift=t,l.unshift=e},8475594045:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(3345899401),m=d(9046403702);let p;function a(){if(p)return p;if(c.isNativeFetch(m.WINDOW.fetch))return p=m.WINDOW.fetch.bind(m.WINDOW);const n=m.WINDOW.document;let e=m.WINDOW.fetch;if(n&&typeof n.createElement=="function")try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i.fetch&&(e=i.fetch),n.head.removeChild(t)}catch(t){h.DEBUG_BUILD&&c.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}try{return p=e.bind(m.WINDOW)}catch{}}s(a,"getNativeFetchImplementation");function r(){p=void 0}s(r,"clearCachedFetchImplementation"),l.clearCachedFetchImplementation=r,l.getNativeFetchImplementation=a},7738910413:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);function h(p,{metadata:a,tunnel:r,dsn:n}){const e={event_id:p.event_id,sent_at:new Date().toISOString(),...a&&a.sdk&&{sdk:{name:a.sdk.name,version:a.sdk.version}},...!!r&&!!n&&{dsn:c.dsnToString(n)}},t=m(p);return c.createEnvelope(e,[t])}s(h,"createUserFeedbackEnvelope");function m(p){return[{type:"user_report"},p]}s(m,"createUserFeedbackEnvelopeItem"),l.createUserFeedbackEnvelope=h},1076637753:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8482989710),h=d(9046403702),m={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming"},p=h.WINDOW;async function a(n){const e=m[n],t=p.Sentry=p.Sentry||{};if(!e)throw new Error(`Cannot lazy load integration: ${n}`);const i=t[n];if(typeof i=="function")return i;const o=r(e),f=h.WINDOW.document.createElement("script");f.src=o,f.crossOrigin="anonymous";const g=new Promise((u,v)=>{f.addEventListener("load",()=>u()),f.addEventListener("error",v)});h.WINDOW.document.body.appendChild(f);try{await g}catch{throw new Error(`Error when loading integration: ${n}`)}const S=t[n];if(typeof S!="function")throw new Error(`Could not load integration: ${n}`);return S}s(a,"lazyLoadIntegration");function r(n){const e=c.getClient(),t=e&&e.getOptions(),i=t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${c.SDK_VERSION}/${n}.min.js`,i).toString()}s(r,"getScriptURL"),l.lazyLoadIntegration=a},9857059330:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h="7";function m(e){const t=e.protocol?`${e.protocol}:`:"",i=e.port?`:${e.port}`:"";return`${t}//${e.host}${i}${e.path?`/${e.path}`:""}/api/`}s(m,"getBaseApiEndpoint");function p(e){return`${m(e)}${e.projectId}/envelope/`}s(p,"_getIngestEndpoint");function a(e,t){return c.urlEncode({sentry_key:e.publicKey,sentry_version:h,...t&&{sentry_client:`${t.name}/${t.version}`}})}s(a,"_encodedAuth");function r(e,t,i){return t||`${p(e)}?${a(e,i)}`}s(r,"getEnvelopeEndpointWithUrlEncodedAuth");function n(e,t){const i=c.makeDsn(e);if(!i)return"";const o=`${m(i)}embed/error-page/`;let f=`dsn=${c.dsnToString(i)}`;for(const g in t)if(g!=="dsn"&&g!=="onClose")if(g==="user"){const S=t.user;if(!S)continue;S.name&&(f+=`&name=${encodeURIComponent(S.name)}`),S.email&&(f+=`&email=${encodeURIComponent(S.email)}`)}else f+=`&${encodeURIComponent(g)}=${encodeURIComponent(t[g])}`;return`${o}?${f}`}s(n,"getReportDialogEndpoint"),l.getEnvelopeEndpointWithUrlEncodedAuth=r,l.getReportDialogEndpoint=n},897859094:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(2685322190),h=d(3752312155);function m(a){const r=c.getMainCarrier(),n=c.getSentryCarrier(r);n.acs=a}s(m,"setAsyncContextStrategy");function p(a){const r=c.getSentryCarrier(a);return r.acs?r.acs:h.getStackAsyncContextStrategy()}s(p,"getAsyncContextStrategy"),l.getAsyncContextStrategy=p,l.setAsyncContextStrategy=m},3752312155:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(2158524366),p=d(2685322190);class a{constructor(f,g){let S;f?S=f:S=new m.Scope;let u;g?u=g:u=new m.Scope,this._stack=[{scope:S}],this._isolationScope=u}withScope(f){const g=this._pushScope();let S;try{S=f(g)}catch(u){throw this._popScope(),u}return c.isThenable(S)?S.then(u=>(this._popScope(),u),u=>{throw this._popScope(),u}):(this._popScope(),S)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const f=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:f}),f}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}s(a,"AsyncContextStack");function r(){const o=p.getMainCarrier(),f=p.getSentryCarrier(o);return f.hub||(f.hub=new a(h.getDefaultCurrentScope(),h.getDefaultIsolationScope())),f.hub}s(r,"getAsyncContextStack");function n(o){return r().withScope(o)}s(n,"withScope");function e(o,f){const g=r();return g.withScope(()=>(g.getStackTop().scope=o,f(o)))}s(e,"withSetScope");function t(o){return r().withScope(()=>o(r().getIsolationScope()))}s(t,"withIsolationScope");function i(){return{withIsolationScope:t,withScope:n,withSetScope:e,withSetIsolationScope:(o,f)=>t(f),getCurrentScope:()=>r().getScope(),getIsolationScope:()=>r().getIsolationScope()}}s(i,"getStackAsyncContextStrategy"),l.AsyncContextStack=a,l.getStackAsyncContextStrategy=i},4936960144:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(9857059330),m=d(8438156026),p=d(8844511336),a=d(5297268390),r=d(1927145604),n=d(5234873710),e=d(9064881818),t=d(1119532287),i=d(9877103701),o="Not capturing exception because it's already been captured.";class f{constructor(_){if(this._options=_,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],_.dsn?this._dsn=c.makeDsn(_.dsn):p.DEBUG_BUILD&&c.logger.warn("No DSN provided, client will not send events."),this._dsn){const C=h.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,_.tunnel,_._metadata?_._metadata.sdk:void 0);this._transport=_.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),..._.transportOptions,url:C})}}captureException(_,C,T){const A=c.uuid4();if(c.checkOrSetAlreadyCaught(_))return p.DEBUG_BUILD&&c.logger.log(o),A;const O={event_id:A,...C};return this._process(this.eventFromException(_,O).then(D=>this._captureEvent(D,O,T))),O.event_id}captureMessage(_,C,T,A){const O={event_id:c.uuid4(),...T},D=c.isParameterizedString(_)?_:String(_),M=c.isPrimitive(_)?this.eventFromMessage(D,C,O):this.eventFromException(_,O);return this._process(M.then(R=>this._captureEvent(R,O,A))),O.event_id}captureEvent(_,C,T){const A=c.uuid4();if(C&&C.originalException&&c.checkOrSetAlreadyCaught(C.originalException))return p.DEBUG_BUILD&&c.logger.log(o),A;const O={event_id:A,...C},M=(_.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(_,O,M||T)),O.event_id}captureSession(_){typeof _.release!="string"?p.DEBUG_BUILD&&c.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(_),n.updateSession(_,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(_){const C=this._transport;return C?(this.emit("flush"),this._isClientDoneProcessing(_).then(T=>C.flush(_).then(A=>T&&A))):c.resolvedSyncPromise(!0)}close(_){return this.flush(_).then(C=>(this.getOptions().enabled=!1,this.emit("close"),C))}getEventProcessors(){return this._eventProcessors}addEventProcessor(_){this._eventProcessors.push(_)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(_){return this._integrations[_]}addIntegration(_){const C=this._integrations[_.name];r.setupIntegration(this,_,this._integrations),C||r.afterSetupIntegrations(this,[_])}sendEvent(_,C={}){this.emit("beforeSendEvent",_,C);let T=a.createEventEnvelope(_,this._dsn,this._options._metadata,this._options.tunnel);for(const O of C.attachments||[])T=c.addItemToEnvelope(T,c.createAttachmentEnvelopeItem(O));const A=this.sendEnvelope(T);A&&A.then(O=>this.emit("afterSendEvent",_,O),null)}sendSession(_){const C=a.createSessionEnvelope(_,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(C)}recordDroppedEvent(_,C,T){if(this._options.sendClientReports){const A=`${_}:${C}`;p.DEBUG_BUILD&&c.logger.log(`Adding outcome: "${A}"`),this._outcomes[A]=this._outcomes[A]+1||1}}on(_,C){this._hooks[_]||(this._hooks[_]=[]),this._hooks[_].push(C)}emit(_,...C){this._hooks[_]&&this._hooks[_].forEach(T=>T(...C))}sendEnvelope(_){return this.emit("beforeEnvelope",_),this._isEnabled()&&this._transport?this._transport.send(_).then(null,C=>(p.DEBUG_BUILD&&c.logger.error("Error while sending event:",C),C)):(p.DEBUG_BUILD&&c.logger.error("Transport disabled"),c.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:_}=this._options;this._integrations=r.setupIntegrations(this,_),r.afterSetupIntegrations(this,_)}_updateSessionFromEvent(_,C){let T=!1,A=!1;const O=C.exception&&C.exception.values;if(O){A=!0;for(const R of O){const F=R.mechanism;if(F&&F.handled===!1){T=!0;break}}}const D=_.status==="ok";(D&&_.errors===0||D&&T)&&(n.updateSession(_,{...T&&{status:"crashed"},errors:_.errors||Number(A||T)}),this.captureSession(_))}_isClientDoneProcessing(_){return new c.SyncPromise(C=>{let T=0;const A=1,O=setInterval(()=>{this._numProcessing==0?(clearInterval(O),C(!0)):(T+=A,_&&T>=_&&(clearInterval(O),C(!1)))},A)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(_,C,T,A=m.getIsolationScope()){const O=this.getOptions(),D=Object.keys(this._integrations);return!C.integrations&&D.length>0&&(C.integrations=D),this.emit("preprocessEvent",_,C),_.type||A.setLastEventId(_.event_id||C.event_id),i.prepareEvent(O,_,C,T,this,A).then(M=>{if(M===null)return M;const R={...A.getPropagationContext(),...T?T.getPropagationContext():void 0};if(!(M.contexts&&M.contexts.trace)&&R){const{traceId:V,spanId:$,parentSpanId:X,dsc:Y}=R;M.contexts={trace:c.dropUndefinedKeys({trace_id:V,span_id:$,parent_span_id:X}),...M.contexts};const ne=Y||e.getDynamicSamplingContextFromClient(V,this);M.sdkProcessingMetadata={dynamicSamplingContext:ne,...M.sdkProcessingMetadata}}return M})}_captureEvent(_,C={},T){return this._processEvent(_,C,T).then(A=>A.event_id,A=>{if(p.DEBUG_BUILD){const O=A;O.logLevel==="log"?c.logger.log(O.message):c.logger.warn(O)}})}_processEvent(_,C,T){const A=this.getOptions(),{sampleRate:O}=A,D=v(_),M=u(_),R=_.type||"error",F=`before send for type \`${R}\``,V=typeof O>"u"?void 0:t.parseSampleRate(O);if(M&&typeof V=="number"&&Math.random()>V)return this.recordDroppedEvent("sample_rate","error",_),c.rejectedSyncPromise(new c.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${O})`,"log"));const $=R==="replay_event"?"replay":R,Y=(_.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(_,C,T,Y).then(ne=>{if(ne===null)throw this.recordDroppedEvent("event_processor",$,_),new c.SentryError("An event processor returned `null`, will not send event.","log");if(C.data&&C.data.__sentry__===!0)return ne;const pe=S(A,ne,C);return g(pe,F)}).then(ne=>{if(ne===null)throw this.recordDroppedEvent("before_send",$,_),new c.SentryError(`${F} returned \`null\`, will not send event.`,"log");const ie=T&&T.getSession();!D&&ie&&this._updateSessionFromEvent(ie,ne);const pe=ne.transaction_info;if(D&&pe&&ne.transaction!==_.transaction){const Ee="custom";ne.transaction_info={...pe,source:Ee}}return this.sendEvent(ne,C),ne}).then(null,ne=>{throw ne instanceof c.SentryError?ne:(this.captureException(ne,{data:{__sentry__:!0},originalException:ne}),new c.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${ne}`))})}_process(_){this._numProcessing++,_.then(C=>(this._numProcessing--,C),C=>(this._numProcessing--,C))}_clearOutcomes(){const _=this._outcomes;return this._outcomes={},Object.keys(_).map(C=>{const[T,A]=C.split(":");return{reason:T,category:A,quantity:_[C]}})}}s(f,"BaseClient");function g(y,_){const C=`${_} must return \`null\` or a valid event.`;if(c.isThenable(y))return y.then(T=>{if(!c.isPlainObject(T)&&T!==null)throw new c.SentryError(C);return T},T=>{throw new c.SentryError(`${_} rejected with ${T}`)});if(!c.isPlainObject(y)&&y!==null)throw new c.SentryError(C);return y}s(g,"_validateBeforeSendResult");function S(y,_,C){const{beforeSend:T,beforeSendTransaction:A,beforeSendSpan:O}=y;if(u(_)&&T)return T(_,C);if(v(_)){if(_.spans&&O){const D=[];for(const M of _.spans){const R=O(M);R&&D.push(R)}_.spans=D}if(A)return A(_,C)}return _}s(S,"processBeforeSend");function u(y){return y.type===void 0}s(u,"isErrorEvent");function v(y){return y.type==="transaction"}s(v,"isTransactionEvent"),l.BaseClient=f},4433801832:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=100;function p(a,r){const n=h.getClient(),e=h.getIsolationScope();if(!n)return;const{beforeBreadcrumb:t=null,maxBreadcrumbs:i=m}=n.getOptions();if(i<=0)return;const f={timestamp:c.dateTimestampInSeconds(),...a},g=t?c.consoleSandbox(()=>t(f,r)):f;g!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",g,r),e.addBreadcrumb(g,i))}s(p,"addBreadcrumb"),l.addBreadcrumb=p},2685322190:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);function h(){return m(c.GLOBAL_OBJ),c.GLOBAL_OBJ}s(h,"getMainCarrier");function m(p){return p.__SENTRY__||(p.__SENTRY__={extensions:{}}),p.__SENTRY__}s(m,"getSentryCarrier"),l.getMainCarrier=h,l.getSentryCarrier=m},7584701501:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);function h(p,a,r,n,e){const t={sent_at:new Date().toISOString()};r&&r.sdk&&(t.sdk={name:r.sdk.name,version:r.sdk.version}),n&&e&&(t.dsn=c.dsnToString(e)),a&&(t.trace=c.dropUndefinedKeys(a));const i=m(p);return c.createEnvelope(t,[i])}s(h,"createCheckInEnvelope");function m(p){return[{type:"check_in"},p]}s(m,"createCheckInEnvelopeItem"),l.createCheckInEnvelope=h},4834620523:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="production";l.DEFAULT_ENVIRONMENT=d},8438156026:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(897859094),m=d(2685322190),p=d(2158524366);function a(){return c.getGlobalSingleton("defaultCurrentScope",()=>new p.Scope)}s(a,"getDefaultCurrentScope");function r(){return c.getGlobalSingleton("defaultIsolationScope",()=>new p.Scope)}s(r,"getDefaultIsolationScope");function n(){const g=m.getMainCarrier();return h.getAsyncContextStrategy(g).getCurrentScope()}s(n,"getCurrentScope");function e(){const g=m.getMainCarrier();return h.getAsyncContextStrategy(g).getIsolationScope()}s(e,"getIsolationScope");function t(){return c.getGlobalSingleton("globalScope",()=>new p.Scope)}s(t,"getGlobalScope");function i(...g){const S=m.getMainCarrier(),u=h.getAsyncContextStrategy(S);if(g.length===2){const[v,y]=g;return v?u.withSetScope(v,y):u.withScope(y)}return u.withScope(g[0])}s(i,"withScope");function o(...g){const S=m.getMainCarrier(),u=h.getAsyncContextStrategy(S);if(g.length===2){const[v,y]=g;return v?u.withSetIsolationScope(v,y):u.withIsolationScope(y)}return u.withIsolationScope(g[0])}s(o,"withIsolationScope");function f(){return n().getClient()}s(f,"getClient"),l.getClient=f,l.getCurrentScope=n,l.getDefaultCurrentScope=a,l.getDefaultIsolationScope=r,l.getGlobalScope=t,l.getIsolationScope=e,l.withIsolationScope=o,l.withScope=i},8844511336:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},5297268390:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);d(2206474662),d(8844511336);const h=d(5475300505),m=d(9064881818);function p(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}s(p,"enhanceEventWithSdkInfo");function a(e,t,i,o){const f=c.getSdkMetadataForEnvelopeHeader(i),g={sent_at:new Date().toISOString(),...f&&{sdk:f},...!!o&&t&&{dsn:c.dsnToString(t)}},S="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return c.createEnvelope(g,[S])}s(a,"createSessionEnvelope");function r(e,t,i,o){const f=c.getSdkMetadataForEnvelopeHeader(i),g=e.type&&e.type!=="replay_event"?e.type:"event";p(e,i&&i.sdk);const S=c.createEventEnvelopeHeaders(e,f,o,t);delete e.sdkProcessingMetadata;const u=[{type:g},e];return c.createEnvelope(S,[u])}s(r,"createEventEnvelope");function n(e,t){function i(v){return!!v.trace_id&&!!v.public_key}s(i,"dscHasRequiredProps");const o=m.getDynamicSamplingContextFromSpan(e[0]),f={sent_at:new Date().toISOString(),...i(o)&&{trace:o}},g=t&&t.getOptions().beforeSendSpan,S=g?v=>g(h.spanToJSON(v)):v=>h.spanToJSON(v),u=[];for(const v of e){const y=S(v);y&&u.push(c.createSpanEnvelopeItem(y))}return c.createEnvelope(f,u)}s(n,"createSpanEnvelope"),l.createEventEnvelope=r,l.createSessionEnvelope=a,l.createSpanEnvelope=n},5911348835:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336);function m(p,a,r,n=0){return new c.SyncPromise((e,t)=>{const i=p[n];if(a===null||typeof i!="function")e(a);else{const o=i({...a},r);h.DEBUG_BUILD&&i.id&&o===null&&c.logger.log(`Event processor "${i.id}" dropped event`),c.isThenable(o)?o.then(f=>m(p,f,r,n+1).then(e)).then(null,t):m(p,o,r,n+1).then(e).then(null,t)}})}s(m,"notifyEventProcessors"),l.notifyEventProcessors=m},5015065869:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(4834620523),m=d(8438156026),p=d(8844511336),a=d(5234873710),r=d(9877103701);function n($,X){return m.getCurrentScope().captureException($,r.parseEventHintOrCaptureContext(X))}s(n,"captureException");function e($,X){const Y=typeof X=="string"?X:void 0,ne=typeof X!="string"?{captureContext:X}:void 0;return m.getCurrentScope().captureMessage($,Y,ne)}s(e,"captureMessage");function t($,X){return m.getCurrentScope().captureEvent($,X)}s(t,"captureEvent");function i($,X){m.getIsolationScope().setContext($,X)}s(i,"setContext");function o($){m.getIsolationScope().setExtras($)}s(o,"setExtras");function f($,X){m.getIsolationScope().setExtra($,X)}s(f,"setExtra");function g($){m.getIsolationScope().setTags($)}s(g,"setTags");function S($,X){m.getIsolationScope().setTag($,X)}s(S,"setTag");function u($){m.getIsolationScope().setUser($)}s(u,"setUser");function v(){return m.getIsolationScope().lastEventId()}s(v,"lastEventId");function y($,X){const Y=m.getCurrentScope(),ne=m.getClient();if(!ne)p.DEBUG_BUILD&&c.logger.warn("Cannot capture check-in. No client defined.");else if(!ne.captureCheckIn)p.DEBUG_BUILD&&c.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return ne.captureCheckIn($,X,Y);return c.uuid4()}s(y,"captureCheckIn");function _($,X,Y){const ne=y({monitorSlug:$,status:"in_progress"},Y),ie=c.timestampInSeconds();function pe(Ee){y({monitorSlug:$,status:Ee,checkInId:ne,duration:c.timestampInSeconds()-ie})}return s(pe,"finishCheckIn"),m.withIsolationScope(()=>{let Ee;try{Ee=X()}catch(Be){throw pe("error"),Be}return c.isThenable(Ee)?Promise.resolve(Ee).then(()=>{pe("ok")},()=>{pe("error")}):pe("ok"),Ee})}s(_,"withMonitor");async function C($){const X=m.getClient();return X?X.flush($):(p.DEBUG_BUILD&&c.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}s(C,"flush");async function T($){const X=m.getClient();return X?X.close($):(p.DEBUG_BUILD&&c.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}s(T,"close");function A(){return!!m.getClient()}s(A,"isInitialized");function O(){const $=m.getClient();return!!$&&$.getOptions().enabled!==!1&&!!$.getTransport()}s(O,"isEnabled");function D($){m.getIsolationScope().addEventProcessor($)}s(D,"addEventProcessor");function M($){const X=m.getClient(),Y=m.getIsolationScope(),ne=m.getCurrentScope(),{release:ie,environment:pe=h.DEFAULT_ENVIRONMENT}=X&&X.getOptions()||{},{userAgent:Ee}=c.GLOBAL_OBJ.navigator||{},Be=a.makeSession({release:ie,environment:pe,user:ne.getUser()||Y.getUser(),...Ee&&{userAgent:Ee},...$}),it=Y.getSession();return it&&it.status==="ok"&&a.updateSession(it,{status:"exited"}),R(),Y.setSession(Be),ne.setSession(Be),Be}s(M,"startSession");function R(){const $=m.getIsolationScope(),X=m.getCurrentScope(),Y=X.getSession()||$.getSession();Y&&a.closeSession(Y),F(),$.setSession(),X.setSession()}s(R,"endSession");function F(){const $=m.getIsolationScope(),X=m.getCurrentScope(),Y=m.getClient(),ne=X.getSession()||$.getSession();ne&&Y&&Y.captureSession(ne)}s(F,"_sendSessionUpdate");function V($=!1){if($){R();return}F()}s(V,"captureSession"),l.addEventProcessor=D,l.captureCheckIn=y,l.captureEvent=t,l.captureException=n,l.captureMessage=e,l.captureSession=V,l.close=T,l.endSession=R,l.flush=C,l.isEnabled=O,l.isInitialized=A,l.lastEventId=v,l.setContext=i,l.setExtra=f,l.setExtras=o,l.setTag=S,l.setTags=g,l.setUser=u,l.startSession=M,l.withMonitor=_},7983636933:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026);function m(p,a={}){const{message:r,name:n,email:e,url:t,source:i,associatedEventId:o}=p,f=h.getClient(),g={contexts:{feedback:c.dropUndefinedKeys({contact_email:e,name:n,message:r,url:t,source:i,associated_event_id:o})},type:"feedback",level:"info"};return f&&f.emit("beforeSendFeedback",g,a),h.getCurrentScope().captureEvent(g,a)}s(m,"captureFeedback"),l.captureFeedback=m},296812610:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(2332127203);d(2206474662),d(8844511336);const p=d(8645141291),a=d(5475300505),r=d(8167549304),n=d(1150305139),e=d(4530391782),t=d(9064881818);function i(S,u,v,y,_="auto.http.browser"){if(!S.fetchData)return;const C=p.hasTracingEnabled()&&u(S.fetchData.url);if(S.endTimestamp&&C){const $=S.fetchData.__span;if(!$)return;const X=y[$];X&&(g(X,S),delete y[$]);return}const T=h.getCurrentScope(),A=h.getClient(),{method:O,url:D}=S.fetchData,M=f(D),R=M?c.parseUrl(M).host:void 0,F=!!a.getActiveSpan(),V=C&&F?e.startInactiveSpan({name:`${O} ${D}`,attributes:{url:D,type:"fetch","http.method":O,"http.url":M,"server.address":R,[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:_,[m.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new r.SentryNonRecordingSpan;if(S.fetchData.__span=V.spanContext().spanId,y[V.spanContext().spanId]=V,v(S.fetchData.url)&&A){const $=S.args[0];S.args[1]=S.args[1]||{};const X=S.args[1];X.headers=o($,A,T,X,p.hasTracingEnabled()&&F?V:void 0)}return V}s(i,"instrumentFetchRequest");function o(S,u,v,y,_){const C=h.getIsolationScope(),{traceId:T,spanId:A,sampled:O,dsc:D}={...C.getPropagationContext(),...v.getPropagationContext()},M=_?a.spanToTraceHeader(_):c.generateSentryTraceHeader(T,A,O),R=c.dynamicSamplingContextToSentryBaggageHeader(D||(_?t.getDynamicSamplingContextFromSpan(_):t.getDynamicSamplingContextFromClient(T,u))),F=y.headers||(typeof Request<"u"&&c.isInstanceOf(S,Request)?S.headers:void 0);if(F)if(typeof Headers<"u"&&c.isInstanceOf(F,Headers)){const V=new Headers(F);return V.append("sentry-trace",M),R&&V.append(c.BAGGAGE_HEADER_NAME,R),V}else if(Array.isArray(F)){const V=[...F,["sentry-trace",M]];return R&&V.push([c.BAGGAGE_HEADER_NAME,R]),V}else{const V="baggage"in F?F.baggage:void 0,$=[];return Array.isArray(V)?$.push(...V):V&&$.push(V),R&&$.push(R),{...F,"sentry-trace":M,baggage:$.length>0?$.join(","):void 0}}else return{"sentry-trace":M,baggage:R}}s(o,"addTracingHeadersToFetchRequest");function f(S){try{return new URL(S).href}catch{return}}s(f,"getFullURL");function g(S,u){if(u.response){n.setHttpStatus(S,u.response.status);const v=u.response&&u.response.headers&&u.response.headers.get("content-length");if(v){const y=parseInt(v);y>0&&S.setAttribute("http.response_content_length",y)}}else u.error&&S.setStatus({code:n.SPAN_STATUS_ERROR,message:"internal_error"});S.end()}s(g,"endSpan"),l.addTracingHeadersToFetchRequest=o,l.instrumentFetchRequest=i},6649284951:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(4433801832),h=d(8438156026),m=d(5015065869);function p(){return{bindClient(n){h.getCurrentScope().setClient(n)},withScope:h.withScope,getClient:()=>h.getClient(),getScope:h.getCurrentScope,getIsolationScope:h.getIsolationScope,captureException:(n,e)=>h.getCurrentScope().captureException(n,e),captureMessage:(n,e,t)=>h.getCurrentScope().captureMessage(n,e,t),captureEvent:m.captureEvent,addBreadcrumb:c.addBreadcrumb,setUser:m.setUser,setTags:m.setTags,setTag:m.setTag,setExtra:m.setExtra,setExtras:m.setExtras,setContext:m.setContext,getIntegration(n){const e=h.getClient();return e&&e.getIntegrationByName(n.id)||null},startSession:m.startSession,endSession:m.endSession,captureSession(n){if(n)return m.endSession();r()}}}s(p,"getCurrentHubShim");const a=p;function r(){const n=h.getCurrentScope(),e=h.getClient(),t=n.getSession();e&&t&&e.captureSession(t)}s(r,"_sendSessionUpdate"),l.getCurrentHub=a,l.getCurrentHubShim=p},8482989710:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(2206474662),h=d(9578383602),m=d(5618891990),p=d(7265722327),a=d(6720678066),r=d(8167549304),n=d(1150305139),e=d(4530391782),t=d(9064881818),i=d(3345259075),o=d(6939919536),f=d(8482601586),g=d(2332127203),S=d(5297268390),u=d(5015065869),v=d(8438156026),y=d(897859094),_=d(2685322190),C=d(5234873710),T=d(7083316483),A=d(2158524366),O=d(5911348835),D=d(9857059330),M=d(4936960144),R=d(1817668688),F=d(9483783910),V=d(306863924),$=d(3178226440),X=d(2843166954),Y=d(639277478),ne=d(1927145604),ie=d(8969228363),pe=d(9877103701),Ee=d(7584701501),Be=d(8645141291),it=d(175966809),Ce=d(5800525242),Me=d(4718881455),je=d(5475300505),We=d(1119532287),Ze=d(3433863337),ft=d(4834620523),vt=d(4433801832),De=d(3620727810),Pe=d(3514394122),Ke=d(8947681608),Ye=d(2133507327),xe=d(4474256835),Ct=d(8953708405),At=d(1072936841),Lt=d(1794376169),Ft=d(6437106406),Jt=d(8435832800),It=d(3496361636),ln=d(3005223956),$n=d(6342793611),yn=d(6431460707),zt=d(5988719990),Yt=d(1243296801),Mt=d(296812610),Vt=d(2117263085),$t=d(7983636933),xt=d(6649284951);l.registerSpanErrorInstrumentation=c.registerSpanErrorInstrumentation,l.getCapturedScopesOnSpan=h.getCapturedScopesOnSpan,l.setCapturedScopesOnSpan=h.setCapturedScopesOnSpan,l.addTracingExtensions=m.addTracingExtensions,l.TRACING_DEFAULTS=p.TRACING_DEFAULTS,l.startIdleSpan=p.startIdleSpan,l.SentrySpan=a.SentrySpan,l.SentryNonRecordingSpan=r.SentryNonRecordingSpan,l.SPAN_STATUS_ERROR=n.SPAN_STATUS_ERROR,l.SPAN_STATUS_OK=n.SPAN_STATUS_OK,l.SPAN_STATUS_UNSET=n.SPAN_STATUS_UNSET,l.getSpanStatusFromHttpCode=n.getSpanStatusFromHttpCode,l.setHttpStatus=n.setHttpStatus,l.continueTrace=e.continueTrace,l.startInactiveSpan=e.startInactiveSpan,l.startSpan=e.startSpan,l.startSpanManual=e.startSpanManual,l.suppressTracing=e.suppressTracing,l.withActiveSpan=e.withActiveSpan,l.getDynamicSamplingContextFromClient=t.getDynamicSamplingContextFromClient,l.getDynamicSamplingContextFromSpan=t.getDynamicSamplingContextFromSpan,l.setMeasurement=i.setMeasurement,l.timedEventsToMeasurements=i.timedEventsToMeasurements,l.sampleSpan=o.sampleSpan,l.logSpanEnd=f.logSpanEnd,l.logSpanStart=f.logSpanStart,l.SEMANTIC_ATTRIBUTE_CACHE_HIT=g.SEMANTIC_ATTRIBUTE_CACHE_HIT,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=g.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=g.SEMANTIC_ATTRIBUTE_CACHE_KEY,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=g.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=g.SEMANTIC_ATTRIBUTE_PROFILE_ID,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=g.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.createEventEnvelope=S.createEventEnvelope,l.createSessionEnvelope=S.createSessionEnvelope,l.createSpanEnvelope=S.createSpanEnvelope,l.addEventProcessor=u.addEventProcessor,l.captureCheckIn=u.captureCheckIn,l.captureEvent=u.captureEvent,l.captureException=u.captureException,l.captureMessage=u.captureMessage,l.captureSession=u.captureSession,l.close=u.close,l.endSession=u.endSession,l.flush=u.flush,l.isEnabled=u.isEnabled,l.isInitialized=u.isInitialized,l.lastEventId=u.lastEventId,l.setContext=u.setContext,l.setExtra=u.setExtra,l.setExtras=u.setExtras,l.setTag=u.setTag,l.setTags=u.setTags,l.setUser=u.setUser,l.startSession=u.startSession,l.withMonitor=u.withMonitor,l.getClient=v.getClient,l.getCurrentScope=v.getCurrentScope,l.getDefaultCurrentScope=v.getDefaultCurrentScope,l.getDefaultIsolationScope=v.getDefaultIsolationScope,l.getGlobalScope=v.getGlobalScope,l.getIsolationScope=v.getIsolationScope,l.withIsolationScope=v.withIsolationScope,l.withScope=v.withScope,l.setAsyncContextStrategy=y.setAsyncContextStrategy,l.getMainCarrier=_.getMainCarrier,l.closeSession=C.closeSession,l.makeSession=C.makeSession,l.updateSession=C.updateSession,l.SessionFlusher=T.SessionFlusher,l.Scope=A.Scope,l.notifyEventProcessors=O.notifyEventProcessors,l.getEnvelopeEndpointWithUrlEncodedAuth=D.getEnvelopeEndpointWithUrlEncodedAuth,l.getReportDialogEndpoint=D.getReportDialogEndpoint,l.BaseClient=M.BaseClient,l.ServerRuntimeClient=R.ServerRuntimeClient,l.initAndBind=F.initAndBind,l.setCurrentClient=F.setCurrentClient,l.createTransport=V.createTransport,l.makeOfflineTransport=$.makeOfflineTransport,l.makeMultiplexedTransport=X.makeMultiplexedTransport,l.SDK_VERSION=Y.SDK_VERSION,l.addIntegration=ne.addIntegration,l.defineIntegration=ne.defineIntegration,l.getIntegrationsToSetup=ne.getIntegrationsToSetup,l.applyScopeDataToEvent=ie.applyScopeDataToEvent,l.mergeScopeData=ie.mergeScopeData,l.prepareEvent=pe.prepareEvent,l.createCheckInEnvelope=Ee.createCheckInEnvelope,l.hasTracingEnabled=Be.hasTracingEnabled,l.isSentryRequestUrl=it.isSentryRequestUrl,l.handleCallbackErrors=Ce.handleCallbackErrors,l.parameterize=Me.parameterize,l.addChildSpanToSpan=je.addChildSpanToSpan,l.getActiveSpan=je.getActiveSpan,l.getRootSpan=je.getRootSpan,l.getSpanDescendants=je.getSpanDescendants,l.getStatusMessage=je.getStatusMessage,l.spanIsSampled=je.spanIsSampled,l.spanToBaggageHeader=je.spanToBaggageHeader,l.spanToJSON=je.spanToJSON,l.spanToTraceContext=je.spanToTraceContext,l.spanToTraceHeader=je.spanToTraceHeader,l.parseSampleRate=We.parseSampleRate,l.applySdkMetadata=Ze.applySdkMetadata,l.DEFAULT_ENVIRONMENT=ft.DEFAULT_ENVIRONMENT,l.addBreadcrumb=vt.addBreadcrumb,l.functionToStringIntegration=De.functionToStringIntegration,l.inboundFiltersIntegration=Pe.inboundFiltersIntegration,l.linkedErrorsIntegration=Ke.linkedErrorsIntegration,l.moduleMetadataIntegration=Ye.moduleMetadataIntegration,l.requestDataIntegration=xe.requestDataIntegration,l.captureConsoleIntegration=Ct.captureConsoleIntegration,l.debugIntegration=At.debugIntegration,l.dedupeIntegration=Lt.dedupeIntegration,l.extraErrorDataIntegration=Ft.extraErrorDataIntegration,l.rewriteFramesIntegration=Jt.rewriteFramesIntegration,l.sessionTimingIntegration=It.sessionTimingIntegration,l.zodErrorsIntegration=ln.zodErrorsIntegration,l.metrics=$n.metrics,l.metricsDefault=yn.metricsDefault,l.BrowserMetricsAggregator=zt.BrowserMetricsAggregator,l.getMetricSummaryJsonForSpan=Yt.getMetricSummaryJsonForSpan,l.addTracingHeadersToFetchRequest=Mt.addTracingHeadersToFetchRequest,l.instrumentFetchRequest=Mt.instrumentFetchRequest,l.trpcMiddleware=Vt.trpcMiddleware,l.captureFeedback=$t.captureFeedback,l.getCurrentHub=xt.getCurrentHub,l.getCurrentHubShim=xt.getCurrentHubShim},1927145604:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(8844511336),p=[];function a(g){const S={};return g.forEach(u=>{const{name:v}=u,y=S[v];y&&!y.isDefaultInstance&&u.isDefaultInstance||(S[v]=u)}),Object.keys(S).map(u=>S[u])}s(a,"filterDuplicates");function r(g){const S=g.defaultIntegrations||[],u=g.integrations;S.forEach(C=>{C.isDefaultInstance=!0});let v;Array.isArray(u)?v=[...S,...u]:typeof u=="function"?v=c.arrayify(u(S)):v=S;const y=a(v),_=o(y,C=>C.name==="Debug");if(_!==-1){const[C]=y.splice(_,1);y.push(C)}return y}s(r,"getIntegrationsToSetup");function n(g,S){const u={};return S.forEach(v=>{v&&t(g,v,u)}),u}s(n,"setupIntegrations");function e(g,S){for(const u of S)u&&u.afterAllSetup&&u.afterAllSetup(g)}s(e,"afterSetupIntegrations");function t(g,S,u){if(u[S.name]){m.DEBUG_BUILD&&c.logger.log(`Integration skipped because it was already installed: ${S.name}`);return}if(u[S.name]=S,p.indexOf(S.name)===-1&&typeof S.setupOnce=="function"&&(S.setupOnce(),p.push(S.name)),S.setup&&typeof S.setup=="function"&&S.setup(g),typeof S.preprocessEvent=="function"){const v=S.preprocessEvent.bind(S);g.on("preprocessEvent",(y,_)=>v(y,_,g))}if(typeof S.processEvent=="function"){const v=S.processEvent.bind(S),y=Object.assign((_,C)=>v(_,C,g),{id:S.name});g.addEventProcessor(y)}m.DEBUG_BUILD&&c.logger.log(`Integration installed: ${S.name}`)}s(t,"setupIntegration");function i(g){const S=h.getClient();if(!S){m.DEBUG_BUILD&&c.logger.warn(`Cannot add integration "${g.name}" because no SDK Client is available.`);return}S.addIntegration(g)}s(i,"addIntegration");function o(g,S){for(let u=0;u<g.length;u++)if(S(g[u])===!0)return u;return-1}s(o,"findIndex");function f(g){return g}s(f,"defineIntegration"),l.addIntegration=i,l.afterSetupIntegrations=e,l.defineIntegration=f,l.getIntegrationsToSetup=r,l.installedIntegrations=p,l.setupIntegration=t,l.setupIntegrations=n},8953708405:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(5015065869),p=d(1927145604),a="CaptureConsole",r=s((t={})=>{const i=t.levels||c.CONSOLE_LEVELS;return{name:a,setup(o){"console"in c.GLOBAL_OBJ&&c.addConsoleInstrumentationHandler(({args:f,level:g})=>{h.getClient()!==o||!i.includes(g)||e(f,g)})}}},"_captureConsoleIntegration"),n=p.defineIntegration(r);function e(t,i){const o={level:c.severityLevelFromString(i),extra:{arguments:t}};h.withScope(f=>{if(f.addEventProcessor(u=>(u.logger="console",c.addExceptionMechanism(u,{handled:!1,type:"console"}),u)),i==="assert"){if(!t[0]){const u=`Assertion failed: ${c.safeJoin(t.slice(1)," ")||"console.assert"}`;f.setExtra("arguments",t.slice(1)),m.captureMessage(u,o)}return}const g=t.find(u=>u instanceof Error);if(g){m.captureException(g,o);return}const S=c.safeJoin(t," ");m.captureMessage(S,o)})}s(e,"consoleHandler"),l.captureConsoleIntegration=n},1072936841:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m="Debug",p=s((r={})=>{const n={debugger:!1,stringify:!1,...r};return{name:m,setup(e){e.on("beforeSendEvent",(t,i)=>{if(n.debugger)debugger;c.consoleSandbox(()=>{n.stringify?(console.log(JSON.stringify(t,null,2)),i&&Object.keys(i).length&&console.log(JSON.stringify(i,null,2))):(console.log(t),i&&Object.keys(i).length&&console.log(i))})})}}},"_debugIntegration"),a=h.defineIntegration(p);l.debugIntegration=a},1794376169:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m=d(8844511336),p="Dedupe",a=s(()=>{let S;return{name:p,processEvent(u){if(u.type)return u;try{if(n(u,S))return m.DEBUG_BUILD&&c.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return S=u}}},"_dedupeIntegration"),r=h.defineIntegration(a);function n(S,u){return u?!!(e(S,u)||t(S,u)):!1}s(n,"_shouldDropEvent");function e(S,u){const v=S.message,y=u.message;return!(!v&&!y||v&&!y||!v&&y||v!==y||!o(S,u)||!i(S,u))}s(e,"_isSameMessageEvent");function t(S,u){const v=f(u),y=f(S);return!(!v||!y||v.type!==y.type||v.value!==y.value||!o(S,u)||!i(S,u))}s(t,"_isSameExceptionEvent");function i(S,u){let v=g(S),y=g(u);if(!v&&!y)return!0;if(v&&!y||!v&&y||(v=v,y=y,y.length!==v.length))return!1;for(let _=0;_<y.length;_++){const C=y[_],T=v[_];if(C.filename!==T.filename||C.lineno!==T.lineno||C.colno!==T.colno||C.function!==T.function)return!1}return!0}s(i,"_isSameStacktrace");function o(S,u){let v=S.fingerprint,y=u.fingerprint;if(!v&&!y)return!0;if(v&&!y||!v&&y)return!1;v=v,y=y;try{return v.join("")===y.join("")}catch{return!1}}s(o,"_isSameFingerprint");function f(S){return S.exception&&S.exception.values&&S.exception.values[0]}s(f,"_getExceptionFromEvent");function g(S){const u=S.exception;if(u)try{return u.values[0].stacktrace.frames}catch{return}}s(g,"_getFramesFromEvent"),l._shouldDropEvent=n,l.dedupeIntegration=r},6437106406:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m=d(8844511336),p="ExtraErrorData",a=s((t={})=>{const{depth:i=3,captureErrorCause:o=!0}=t;return{name:p,processEvent(f,g){return n(f,g,i,o)}}},"_extraErrorDataIntegration"),r=h.defineIntegration(a);function n(t,i={},o,f){if(!i.originalException||!c.isError(i.originalException))return t;const g=i.originalException.name||i.originalException.constructor.name,S=e(i.originalException,f);if(S){const u={...t.contexts},v=c.normalize(S,o);return c.isPlainObject(v)&&(c.addNonEnumerableProperty(v,"__sentry_skip_normalization__",!0),u[g]=v),{...t,contexts:u}}return t}s(n,"_enhanceEventWithErrorData");function e(t,i){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],f={};for(const g of Object.keys(t)){if(o.indexOf(g)!==-1)continue;const S=t[g];f[g]=c.isError(S)?S.toString():S}if(i&&t.cause!==void 0&&(f.cause=c.isError(t.cause)?t.cause.toString():t.cause),typeof t.toJSON=="function"){const g=t.toJSON();for(const S of Object.keys(g)){const u=g[S];f[S]=c.isError(u)?u.toString():u}}return f}catch(o){m.DEBUG_BUILD&&c.logger.error("Unable to extract extra data from the Error object:",o)}return null}s(e,"_extractErrorData"),l.extraErrorDataIntegration=r},3620727810:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(1927145604);let p;const a="FunctionToString",r=new WeakMap,n=s(()=>({name:a,setupOnce(){p=Function.prototype.toString;try{Function.prototype.toString=function(...t){const i=c.getOriginalFunction(this),o=r.has(h.getClient())&&i!==void 0?i:this;return p.apply(o,t)}}catch{}},setup(t){r.set(t,!0)}}),"_functionToStringIntegration"),e=m.defineIntegration(n);l.functionToStringIntegration=e},3514394122:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336),m=d(1927145604),p=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],a="InboundFilters",r=s((_={})=>({name:a,processEvent(C,T,A){const O=A.getOptions(),D=e(_,O);return t(C,D)?null:C}}),"_inboundFiltersIntegration"),n=m.defineIntegration(r);function e(_={},C={}){return{allowUrls:[..._.allowUrls||[],...C.allowUrls||[]],denyUrls:[..._.denyUrls||[],...C.denyUrls||[]],ignoreErrors:[..._.ignoreErrors||[],...C.ignoreErrors||[],..._.disableErrorDefaults?[]:p],ignoreTransactions:[..._.ignoreTransactions||[],...C.ignoreTransactions||[]],ignoreInternal:_.ignoreInternal!==void 0?_.ignoreInternal:!0}}s(e,"_mergeOptions");function t(_,C){return C.ignoreInternal&&u(_)?(h.DEBUG_BUILD&&c.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${c.getEventDescription(_)}`),!0):i(_,C.ignoreErrors)?(h.DEBUG_BUILD&&c.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${c.getEventDescription(_)}`),!0):o(_,C.ignoreTransactions)?(h.DEBUG_BUILD&&c.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${c.getEventDescription(_)}`),!0):f(_,C.denyUrls)?(h.DEBUG_BUILD&&c.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${c.getEventDescription(_)}.
Url: ${y(_)}`),!0):g(_,C.allowUrls)?!1:(h.DEBUG_BUILD&&c.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${c.getEventDescription(_)}.
Url: ${y(_)}`),!0)}s(t,"_shouldDropEvent");function i(_,C){return _.type||!C||!C.length?!1:S(_).some(T=>c.stringMatchesSomePattern(T,C))}s(i,"_isIgnoredError");function o(_,C){if(_.type!=="transaction"||!C||!C.length)return!1;const T=_.transaction;return T?c.stringMatchesSomePattern(T,C):!1}s(o,"_isIgnoredTransaction");function f(_,C){if(!C||!C.length)return!1;const T=y(_);return T?c.stringMatchesSomePattern(T,C):!1}s(f,"_isDeniedUrl");function g(_,C){if(!C||!C.length)return!0;const T=y(_);return T?c.stringMatchesSomePattern(T,C):!0}s(g,"_isAllowedUrl");function S(_){const C=[];_.message&&C.push(_.message);let T;try{T=_.exception.values[_.exception.values.length-1]}catch{}return T&&T.value&&(C.push(T.value),T.type&&C.push(`${T.type}: ${T.value}`)),C}s(S,"_getPossibleEventMessages");function u(_){try{return _.exception.values[0].type==="SentryError"}catch{}return!1}s(u,"_isSentryError");function v(_=[]){for(let C=_.length-1;C>=0;C--){const T=_[C];if(T&&T.filename!=="<anonymous>"&&T.filename!=="[native code]")return T.filename||null}return null}s(v,"_getLastValidUrl");function y(_){try{let C;try{C=_.exception.values[0].stacktrace.frames}catch{}return C?v(C):null}catch{return h.DEBUG_BUILD&&c.logger.error(`Cannot extract url for event ${c.getEventDescription(_)}`),null}}s(y,"_getEventFilterUrl"),l.inboundFiltersIntegration=n},8947681608:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m="cause",p=5,a="LinkedErrors",r=s((e={})=>{const t=e.limit||p,i=e.key||m;return{name:a,preprocessEvent(o,f,g){const S=g.getOptions();c.applyAggregateErrorsToEvent(c.exceptionFromError,S.stackParser,S.maxValueLength,i,t,o,f)}}},"_linkedErrorsIntegration"),n=h.defineIntegration(r);l.linkedErrorsIntegration=n},2133507327:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m=d(2247716195),p="ModuleMetadata",a=s(()=>({name:p,setup(n){n.on("beforeEnvelope",e=>{c.forEachEnvelopeItem(e,(t,i)=>{if(i==="event"){const o=Array.isArray(t)?t[1]:void 0;o&&(m.stripMetadataFromStackFrames(o),t[1]=o)}})})},processEvent(n,e,t){const i=t.getOptions().stackParser;return m.addMetadataToStackFrames(i,n),n}}),"_moduleMetadataIntegration"),r=h.defineIntegration(a);l.moduleMetadataIntegration=r},4474256835:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},p="RequestData",a=s((e={})=>{const t={...m,...e,include:{...m.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...m.include.user,...(e.include||{}).user}}};return{name:p,processEvent(i){const{sdkProcessingMetadata:o={}}=i,f=o.request;if(!f)return i;const g=n(t);return c.addRequestDataToEvent(i,f,g)}}},"_requestDataIntegration"),r=h.defineIntegration(a);function n(e){const{transactionNamingScheme:t,include:{ip:i,user:o,...f}}=e,g=["method"];for(const[u,v]of Object.entries(f))v&&g.push(u);let S;if(o===void 0)S=!0;else if(typeof o=="boolean")S=o;else{const u=[];for(const[v,y]of Object.entries(o))y&&u.push(v);S=u}return{include:{ip:i,user:S,request:g.length!==0?g:void 0,transaction:t}}}s(n,"convertReqDataIntegrationOptsToAddReqDataOpts"),l.requestDataIntegration=r},8435832800:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m="RewriteFrames",p=h.defineIntegration((r={})=>{const n=r.root,e=r.prefix||"app:///",t="window"in c.GLOBAL_OBJ&&c.GLOBAL_OBJ.window!==void 0,i=r.iteratee||a({isBrowser:t,root:n,prefix:e});function o(g){try{return{...g,exception:{...g.exception,values:g.exception.values.map(S=>({...S,...S.stacktrace&&{stacktrace:f(S.stacktrace)}}))}}}catch{return g}}s(o,"_processExceptionsEvent");function f(g){return{...g,frames:g&&g.frames&&g.frames.map(S=>i(S))}}return s(f,"_processStacktrace"),{name:m,processEvent(g){let S=g;return g.exception&&Array.isArray(g.exception.values)&&(S=o(S)),S}}});function a({isBrowser:r,root:n,prefix:e}){return t=>{if(!t.filename)return t;const i=/^[a-zA-Z]:\\/.test(t.filename)||t.filename.includes("\\")&&!t.filename.includes("/"),o=/^\//.test(t.filename);if(r){if(n){const f=t.filename;f.indexOf(n)===0&&(t.filename=f.replace(n,e))}}else if(i||o){const f=i?t.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t.filename,g=n?c.relative(n,f):c.basename(f);t.filename=`${e}${g}`}return t}}s(a,"generateIteratee"),l.generateIteratee=a,l.rewriteFramesIntegration=p},3496361636:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m="SessionTiming",p=s(()=>{const r=c.timestampInSeconds()*1e3;return{name:m,processEvent(n){const e=c.timestampInSeconds()*1e3;return{...n,extra:{...n.extra,["session:start"]:r,["session:duration"]:e-r,["session:end"]:e}}}}},"_sessionTimingIntegration"),a=h.defineIntegration(p);l.sessionTimingIntegration=a},3005223956:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(1927145604),m=10,p="ZodErrors";function a(o){return c.isError(o)&&o.name==="ZodError"&&Array.isArray(o.errors)}s(a,"originalExceptionIsZodError");function r(o){return{...o,path:"path"in o&&Array.isArray(o.path)?o.path.join("."):void 0,keys:"keys"in o?JSON.stringify(o.keys):void 0,unionErrors:"unionErrors"in o?JSON.stringify(o.unionErrors):void 0}}s(r,"formatIssueTitle");function n(o){const f=new Set;for(const S of o.issues)S.path&&f.add(S.path[0]);const g=Array.from(f);return`Failed to validate keys: ${c.truncate(g.join(", "),100)}`}s(n,"formatIssueMessage");function e(o,f,g){return!f.exception||!f.exception.values||!g||!g.originalException||!a(g.originalException)||g.originalException.issues.length===0?f:{...f,exception:{...f.exception,values:[{...f.exception.values[0],value:n(g.originalException)},...f.exception.values.slice(1)]},extra:{...f.extra,"zoderror.issues":g.originalException.errors.slice(0,o).map(r)}}}s(e,"applyZodErrorsToEvent");const t=s((o={})=>{const f=o.limit||m;return{name:p,processEvent(g,S){return e(f,g,S)}}},"_zodErrorsIntegration"),i=h.defineIntegration(t);l.applyZodErrorsToEvent=e,l.zodErrorsIntegration=i},2247716195:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=new Map,m=new Set;function p(e){if(c.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(c.GLOBAL_OBJ._sentryModuleMetadata)){const i=c.GLOBAL_OBJ._sentryModuleMetadata[t];if(m.has(t))continue;m.add(t);const o=e(t);for(const f of o.reverse())if(f.filename){h.set(f.filename,i);break}}}s(p,"ensureMetadataStacksAreParsed");function a(e,t){return p(e),h.get(t)}s(a,"getMetadataForUrl");function r(e,t){try{t.exception.values.forEach(i=>{if(i.stacktrace)for(const o of i.stacktrace.frames||[]){if(!o.filename)continue;const f=a(e,o.filename);f&&(o.module_metadata=f)}})}catch{}}s(r,"addMetadataToStackFrames");function n(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const i of t.stacktrace.frames||[])delete i.module_metadata})}catch{}}s(n,"stripMetadataFromStackFrames"),l.addMetadataToStackFrames=r,l.getMetadataForUrl=a,l.stripMetadataFromStackFrames=n},7604170301:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(5475300505),m=d(9622876717),p=d(5663957480),a=d(8672240743),r=d(5227316865);class n{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),m.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*m.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(t,i,o,f="none",g={},S=c.timestampInSeconds()){const u=Math.floor(S),v=r.sanitizeMetricKey(i),y=r.sanitizeTags(g),_=r.sanitizeUnit(f),C=r.getBucketKey(t,v,_,y);let T=this._buckets.get(C);const A=T&&t===m.SET_METRIC_TYPE?T.metric.weight:0;T?(T.metric.add(o),T.timestamp<u&&(T.timestamp=u)):(T={metric:new a.METRIC_MAP[t](o),timestamp:u,metricType:t,name:v,unit:_,tags:y},this._buckets.set(C,T));const O=typeof o=="string"?T.metric.weight-A:o;h.updateMetricSummaryOnActiveSpan(t,v,O,_,g,C),this._bucketsTotalWeight+=T.metric.weight,this._bucketsTotalWeight>=m.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}const t=Math.floor(c.timestampInSeconds())-m.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,i=new Map;for(const[o,f]of this._buckets)f.timestamp<=t&&(i.set(o,f),this._bucketsTotalWeight-=f.metric.weight);for(const[o]of i)this._buckets.delete(o);this._captureMetrics(i)}_captureMetrics(t){if(t.size>0){const i=Array.from(t).map(([,o])=>o);p.captureAggregateMetrics(this._client,i)}}}s(n,"MetricsAggregator"),l.MetricsAggregator=n},5988719990:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(5475300505),m=d(9622876717),p=d(5663957480),a=d(8672240743),r=d(5227316865);class n{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),m.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(t,i,o,f="none",g={},S=c.timestampInSeconds()){const u=Math.floor(S),v=r.sanitizeMetricKey(i),y=r.sanitizeTags(g),_=r.sanitizeUnit(f),C=r.getBucketKey(t,v,_,y);let T=this._buckets.get(C);const A=T&&t===m.SET_METRIC_TYPE?T.metric.weight:0;T?(T.metric.add(o),T.timestamp<u&&(T.timestamp=u)):(T={metric:new a.METRIC_MAP[t](o),timestamp:u,metricType:t,name:v,unit:_,tags:y},this._buckets.set(C,T));const O=typeof o=="string"?T.metric.weight-A:o;h.updateMetricSummaryOnActiveSpan(t,v,O,_,g,C)}flush(){if(this._buckets.size===0)return;const t=Array.from(this._buckets.values());p.captureAggregateMetrics(this._client,t),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}s(n,"BrowserMetricsAggregator"),l.BrowserMetricsAggregator=n},9622876717:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="c",c="g",h="s",m="d",p=5e3,a=1e4,r=1e4;l.COUNTER_METRIC_TYPE=d,l.DEFAULT_BROWSER_FLUSH_INTERVAL=p,l.DEFAULT_FLUSH_INTERVAL=a,l.DISTRIBUTION_METRIC_TYPE=m,l.GAUGE_METRIC_TYPE=c,l.MAX_WEIGHT=r,l.SET_METRIC_TYPE=h},5663957480:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(5227316865);function m(r,n){c.logger.log(`Flushing aggregated metrics, number of metrics: ${n.length}`);const e=r.getDsn(),t=r.getSdkMetadata(),i=r.getOptions().tunnel,o=p(n,e,t,i);r.sendEnvelope(o)}s(m,"captureAggregateMetrics");function p(r,n,e,t){const i={sent_at:new Date().toISOString()};e&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),t&&n&&(i.dsn=c.dsnToString(n));const o=a(r);return c.createEnvelope(i,[o])}s(p,"createMetricEnvelope");function a(r){const n=h.serializeMetricBuckets(r);return[{type:"statsd",length:n.length},n]}s(a,"createMetricEnvelopeItem"),l.captureAggregateMetrics=m,l.createMetricEnvelope=p},6431460707:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7604170301),h=d(6342793611);function m(t,i=1,o){h.metrics.increment(c.MetricsAggregator,t,i,o)}s(m,"increment");function p(t,i,o){h.metrics.distribution(c.MetricsAggregator,t,i,o)}s(p,"distribution");function a(t,i,o){h.metrics.set(c.MetricsAggregator,t,i,o)}s(a,"set");function r(t,i,o){h.metrics.gauge(c.MetricsAggregator,t,i,o)}s(r,"gauge");function n(t){return h.metrics.getMetricsAggregatorForClient(t,c.MetricsAggregator)}s(n,"getMetricsAggregatorForClient");const e={increment:m,distribution:p,set:a,gauge:r,getMetricsAggregatorForClient:n};l.metricsDefault=e},6342793611:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(8844511336),p=d(5475300505),a=d(9622876717);function r(g,S){const u=c.getGlobalSingleton("globalMetricsAggregators",()=>new WeakMap),v=u.get(g);if(v)return v;const y=new S(g);return g.on("flush",()=>y.flush()),g.on("close",()=>y.close()),u.set(g,y),y}s(r,"getMetricsAggregatorForClient");function n(g,S,u,v,y={}){const _=y.client||h.getClient();if(!_)return;const C=p.getActiveSpan(),T=C?p.getRootSpan(C):void 0,{unit:A,tags:O,timestamp:D}=y,{release:M,environment:R}=_.getOptions(),F={};M&&(F.release=M),R&&(F.environment=R),T&&(F.transaction=p.spanToJSON(T).description||""),m.DEBUG_BUILD&&c.logger.log(`Adding value of ${v} to ${S} metric ${u}`),r(_,g).add(S,u,v,A,{...F,...O},D)}s(n,"addToMetricsAggregator");function e(g,S,u=1,v){n(g,a.COUNTER_METRIC_TYPE,S,u,v)}s(e,"increment");function t(g,S,u,v){n(g,a.DISTRIBUTION_METRIC_TYPE,S,u,v)}s(t,"distribution");function i(g,S,u,v){n(g,a.SET_METRIC_TYPE,S,u,v)}s(i,"set");function o(g,S,u,v){n(g,a.GAUGE_METRIC_TYPE,S,u,v)}s(o,"gauge");const f={increment:e,distribution:t,set:i,gauge:o,getMetricsAggregatorForClient:r};l.metrics=f},8672240743:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9622876717),h=d(5227316865);class m{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}s(m,"CounterMetric");class p{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}s(p,"GaugeMetric");class a{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}s(a,"DistributionMetric");class r{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?h.simpleHash(t):t).join(":")}}s(r,"SetMetric");const n={[c.COUNTER_METRIC_TYPE]:m,[c.GAUGE_METRIC_TYPE]:p,[c.DISTRIBUTION_METRIC_TYPE]:a,[c.SET_METRIC_TYPE]:r};l.CounterMetric=m,l.DistributionMetric=a,l.GaugeMetric=p,l.METRIC_MAP=n,l.SetMetric=r},1243296801:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);let h;function m(r){return h?h.get(r):void 0}s(m,"getMetricStorageForSpan");function p(r){const n=m(r);if(!n)return;const e={};for(const[,[t,i]]of n)e[t]||(e[t]=[]),e[t].push(c.dropUndefinedKeys(i));return e}s(p,"getMetricSummaryJsonForSpan");function a(r,n,e,t,i,o,f){const g=m(r)||new Map,S=`${n}:${e}@${i}`,u=g.get(f);if(u){const[,v]=u;g.set(f,[S,{min:Math.min(v.min,t),max:Math.max(v.max,t),count:v.count+=1,sum:v.sum+=t,tags:v.tags}])}else g.set(f,[S,{min:t,max:t,count:1,sum:t,tags:o}]);h||(h=new WeakMap),h.set(r,g)}s(a,"updateMetricSummaryOnSpan"),l.getMetricSummaryJsonForSpan=p,l.updateMetricSummaryOnSpan=a},5227316865:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);function h(f,g,S,u){const v=Object.entries(c.dropUndefinedKeys(u)).sort((y,_)=>y[0].localeCompare(_[0]));return`${f}${g}${S}${v}`}s(h,"getBucketKey");function m(f){let g=0;for(let S=0;S<f.length;S++){const u=f.charCodeAt(S);g=(g<<5)-g+u,g&=g}return g>>>0}s(m,"simpleHash");function p(f){let g="";for(const S of f){const u=Object.entries(S.tags),v=u.length>0?`|#${u.map(([y,_])=>`${y}:${_}`).join(",")}`:"";g+=`${S.name}@${S.unit}:${S.metric}|${S.metricType}${v}|T${S.timestamp}
`}return g}s(p,"serializeMetricBuckets");function a(f){return f.replace(/[^\w]+/gi,"_")}s(a,"sanitizeUnit");function r(f){return f.replace(/[^\w\-.]+/gi,"_")}s(r,"sanitizeMetricKey");function n(f){return f.replace(/[^\w\-./]+/gi,"")}s(n,"sanitizeTagKey");const e=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function t(f){for(const[g,S]of e)if(f===g)return S;return f}s(t,"getCharOrReplacement");function i(f){return[...f].reduce((g,S)=>g+t(S),"")}s(i,"sanitizeTagValue");function o(f){const g={};for(const S in f)if(Object.prototype.hasOwnProperty.call(f,S)){const u=n(S);g[u]=i(String(f[S]))}return g}s(o,"sanitizeTags"),l.getBucketKey=h,l.sanitizeMetricKey=r,l.sanitizeTags=o,l.sanitizeUnit=a,l.serializeMetricBuckets=p,l.simpleHash=m},2158524366:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(5234873710),m=d(9972015035),p=100;class a{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=n()}clone(){const t=new a;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,m._setSpanForScope(t,m._getSpanForScope(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&h.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,i){return this._tags={...this._tags,[t]:i},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,i){return this._extra={...this._extra,[t]:i},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,i){return i===null?delete this._contexts[t]:this._contexts[t]=i,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const i=typeof t=="function"?t(this):t,[o,f]=i instanceof r?[i.getScopeData(),i.getRequestSession()]:c.isPlainObject(i)?[t,t.requestSession]:[],{tags:g,extra:S,user:u,contexts:v,level:y,fingerprint:_=[],propagationContext:C}=o||{};return this._tags={...this._tags,...g},this._extra={...this._extra,...S},this._contexts={...this._contexts,...v},u&&Object.keys(u).length&&(this._user=u),y&&(this._level=y),_.length&&(this._fingerprint=_),C&&(this._propagationContext=C),f&&(this._requestSession=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,m._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=n(),this._notifyScopeListeners(),this}addBreadcrumb(t,i){const o=typeof i=="number"?i:p;if(o<=0)return this;const f={timestamp:c.dateTimestampInSeconds(),...t},g=this._breadcrumbs;return g.push(f),this._breadcrumbs=g.length>o?g.slice(-o):g,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:m._getSpanForScope(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,i){const o=i&&i.event_id?i.event_id:c.uuid4();if(!this._client)return c.logger.warn("No client configured on scope - will not capture exception!"),o;const f=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:f,...i,event_id:o},this),o}captureMessage(t,i,o){const f=o&&o.event_id?o.event_id:c.uuid4();if(!this._client)return c.logger.warn("No client configured on scope - will not capture message!"),f;const g=new Error(t);return this._client.captureMessage(t,i,{originalException:t,syntheticException:g,...o,event_id:f},this),f}captureEvent(t,i){const o=i&&i.event_id?i.event_id:c.uuid4();return this._client?(this._client.captureEvent(t,{...i,event_id:o},this),o):(c.logger.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}s(a,"ScopeClass");const r=a;function n(){return{traceId:c.uuid4(),spanId:c.uuid4().substring(16)}}s(n,"generatePropagationContext"),l.Scope=r},9483783910:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(2685322190),p=d(8844511336);function a(e,t){t.debug===!0&&(p.DEBUG_BUILD?c.logger.enable():c.consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),h.getCurrentScope().update(t.initialScope);const o=new e(t);r(o),o.init()}s(a,"initAndBind");function r(e){h.getCurrentScope().setClient(e),n(e)}s(r,"setCurrentClient");function n(e){const t=m.getSentryCarrier(m.getMainCarrier());t.hub&&typeof t.hub.getStackTop=="function"&&(t.hub.getStackTop().client=e)}s(n,"registerClientOnGlobalHub"),l.initAndBind=a,l.setCurrentClient=r},2332127203:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="sentry.source",c="sentry.sample_rate",h="sentry.op",m="sentry.origin",p="sentry.idle_span_finish_reason",a="sentry.measurement_unit",r="sentry.measurement_value",n="sentry.profile_id",e="sentry.exclusive_time",t="cache.hit",i="cache.key",o="cache.item_size";l.SEMANTIC_ATTRIBUTE_CACHE_HIT=t,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=o,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=i,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=e,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=n,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=p,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=a,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=r,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=h,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=m,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=c,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=d},1817668688:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(4936960144),m=d(7584701501),p=d(8438156026),a=d(8844511336),r=d(7083316483),n=d(2206474662),e=d(9972015035),t=d(5475300505),i=d(9064881818);class o extends h.BaseClient{constructor(g){n.registerSpanErrorInstrumentation(),super(g)}eventFromException(g,S){return c.resolvedSyncPromise(c.eventFromUnknownInput(this,this._options.stackParser,g,S))}eventFromMessage(g,S="info",u){return c.resolvedSyncPromise(c.eventFromMessage(this._options.stackParser,g,S,u,this._options.attachStacktrace))}captureException(g,S,u){if(this._options.autoSessionTracking&&this._sessionFlusher){const v=p.getIsolationScope().getRequestSession();v&&v.status==="ok"&&(v.status="errored")}return super.captureException(g,S,u)}captureEvent(g,S,u){if(this._options.autoSessionTracking&&this._sessionFlusher&&(g.type||"exception")==="exception"&&g.exception&&g.exception.values&&g.exception.values.length>0){const _=p.getIsolationScope().getRequestSession();_&&_.status==="ok"&&(_.status="errored")}return super.captureEvent(g,S,u)}close(g){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(g)}initSessionFlusher(){const{release:g,environment:S}=this._options;g?this._sessionFlusher=new r.SessionFlusher(this,{release:g,environment:S}):a.DEBUG_BUILD&&c.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(g,S,u){const v="checkInId"in g&&g.checkInId?g.checkInId:c.uuid4();if(!this._isEnabled())return a.DEBUG_BUILD&&c.logger.warn("SDK not enabled, will not capture checkin."),v;const y=this.getOptions(),{release:_,environment:C,tunnel:T}=y,A={check_in_id:v,monitor_slug:g.monitorSlug,status:g.status,release:_,environment:C};"duration"in g&&(A.duration=g.duration),S&&(A.monitor_config={schedule:S.schedule,checkin_margin:S.checkinMargin,max_runtime:S.maxRuntime,timezone:S.timezone});const[O,D]=this._getTraceInfoFromScope(u);D&&(A.contexts={trace:D});const M=m.createCheckInEnvelope(A,O,this.getSdkMetadata(),T,this.getDsn());return a.DEBUG_BUILD&&c.logger.info("Sending checkin:",g.monitorSlug,g.status),this.sendEnvelope(M),v}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():a.DEBUG_BUILD&&c.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(g,S,u,v){return this._options.platform&&(g.platform=g.platform||this._options.platform),this._options.runtime&&(g.contexts={...g.contexts,runtime:(g.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(g.server_name=g.server_name||this._options.serverName),super._prepareEvent(g,S,u,v)}_getTraceInfoFromScope(g){if(!g)return[void 0,void 0];const S=e._getSpanForScope(g);if(S){const T=t.getRootSpan(S);return[i.getDynamicSamplingContextFromSpan(T),t.spanToTraceContext(T)]}const{traceId:u,spanId:v,parentSpanId:y,dsc:_}=g.getPropagationContext(),C={trace_id:u,span_id:v,parent_span_id:y};return _?[_,C]:[i.getDynamicSamplingContextFromClient(u,this),C]}}s(o,"ServerRuntimeClient"),l.ServerRuntimeClient=o},5234873710:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);function h(r){const n=c.timestampInSeconds(),e={sid:c.uuid4(),init:!0,timestamp:n,started:n,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>a(e)};return r&&m(e,r),e}s(h,"makeSession");function m(r,n={}){if(n.user&&(!r.ipAddress&&n.user.ip_address&&(r.ipAddress=n.user.ip_address),!r.did&&!n.did&&(r.did=n.user.id||n.user.email||n.user.username)),r.timestamp=n.timestamp||c.timestampInSeconds(),n.abnormal_mechanism&&(r.abnormal_mechanism=n.abnormal_mechanism),n.ignoreDuration&&(r.ignoreDuration=n.ignoreDuration),n.sid&&(r.sid=n.sid.length===32?n.sid:c.uuid4()),n.init!==void 0&&(r.init=n.init),!r.did&&n.did&&(r.did=`${n.did}`),typeof n.started=="number"&&(r.started=n.started),r.ignoreDuration)r.duration=void 0;else if(typeof n.duration=="number")r.duration=n.duration;else{const e=r.timestamp-r.started;r.duration=e>=0?e:0}n.release&&(r.release=n.release),n.environment&&(r.environment=n.environment),!r.ipAddress&&n.ipAddress&&(r.ipAddress=n.ipAddress),!r.userAgent&&n.userAgent&&(r.userAgent=n.userAgent),typeof n.errors=="number"&&(r.errors=n.errors),n.status&&(r.status=n.status)}s(m,"updateSession");function p(r,n){let e={};n?e={status:n}:r.status==="ok"&&(e={status:"exited"}),m(r,e)}s(p,"closeSession");function a(r){return c.dropUndefinedKeys({sid:`${r.sid}`,init:r.init,started:new Date(r.started*1e3).toISOString(),timestamp:new Date(r.timestamp*1e3).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}s(a,"sessionToJSON"),l.closeSession=p,l.makeSession=h,l.updateSession=m},7083316483:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026);class m{constructor(a,r){this._client=a,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=r}flush(){const a=this.getSessionAggregates();a.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(a))}getSessionAggregates(){const a=Object.keys(this._pendingAggregates).map(n=>this._pendingAggregates[parseInt(n)]),r={attrs:this._sessionAttrs,aggregates:a};return c.dropUndefinedKeys(r)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const a=h.getIsolationScope(),r=a.getRequestSession();r&&r.status&&(this._incrementSessionStatusCount(r.status,new Date),a.setRequestSession(void 0))}_incrementSessionStatusCount(a,r){const n=new Date(r).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};const e=this._pendingAggregates[n];switch(e.started||(e.started=new Date(n).toISOString()),a){case"errored":return e.errored=(e.errored||0)+1,e.errored;case"ok":return e.exited=(e.exited||0)+1,e.exited;default:return e.crashed=(e.crashed||0)+1,e.crashed}}}s(m,"SessionFlusher"),l.SessionFlusher=m},9064881818:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(4834620523),m=d(8438156026),p=d(2332127203),a=d(5475300505),r="_frozenDsc";function n(i,o){const f=i;c.addNonEnumerableProperty(f,r,o)}s(n,"freezeDscOnSpan");function e(i,o){const f=o.getOptions(),{publicKey:g}=o.getDsn()||{},S=c.dropUndefinedKeys({environment:f.environment||h.DEFAULT_ENVIRONMENT,release:f.release,public_key:g,trace_id:i});return o.emit("createDsc",S),S}s(e,"getDynamicSamplingContextFromClient");function t(i){const o=m.getClient();if(!o)return{};const f=e(a.spanToJSON(i).trace_id||"",o),g=a.getRootSpan(i);if(!g)return f;const S=g[r];if(S)return S;const u=a.spanToJSON(g),v=u.data||{},y=v[p.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];y!=null&&(f.sample_rate=`${y}`);const _=v[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];return _&&_!=="url"&&(f.transaction=u.description),f.sampled=String(a.spanIsSampled(g)),o.emit("createDsc",f),f}s(t,"getDynamicSamplingContextFromSpan"),l.freezeDscOnSpan=n,l.getDynamicSamplingContextFromClient=e,l.getDynamicSamplingContextFromSpan=t},2206474662:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336),m=d(5475300505),p=d(1150305139);let a=!1;function r(){a||(a=!0,c.addGlobalErrorInstrumentationHandler(n),c.addGlobalUnhandledRejectionInstrumentationHandler(n))}s(r,"registerSpanErrorInstrumentation");function n(){const e=m.getActiveSpan(),t=e&&m.getRootSpan(e);if(t){const i="internal_error";h.DEBUG_BUILD&&c.logger.log(`[Tracing] Root span: ${i} -> Global error occured`),t.setStatus({code:p.SPAN_STATUS_ERROR,message:i})}}s(n,"errorCallback"),n.tag="sentry_tracingErrorCallback",l.registerSpanErrorInstrumentation=r},5618891990:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(2206474662);function h(){c.registerSpanErrorInstrumentation()}s(h,"addTracingExtensions"),l.addTracingExtensions=h},7265722327:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(8844511336),p=d(2332127203),a=d(8645141291),r=d(9972015035),n=d(5475300505),e=d(8167549304),t=d(1150305139),i=d(4530391782),o={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},f="heartbeatFailed",g="idleTimeout",S="finalTimeout",u="externalFinish";function v(_,C={}){const T=new Map;let A=!1,O,D=u,M=!C.disableAutoFinish;const{idleTimeout:R=o.idleTimeout,finalTimeout:F=o.finalTimeout,childSpanTimeout:V=o.childSpanTimeout,beforeSpanEnd:$}=C,X=h.getClient();if(!X||!a.hasTracingEnabled())return new e.SentryNonRecordingSpan;const Y=h.getCurrentScope(),ne=n.getActiveSpan(),ie=y(_);function pe(We=c.timestampInSeconds()){const Ze=n.getSpanDescendants(ie).filter(Ye=>Ye!==ie);if(!Ze.length){ie.end(We);return}const ft=Ze.map(Ye=>n.spanToJSON(Ye).timestamp).filter(Ye=>!!Ye),vt=ft.length?Math.max(...ft):void 0,De=n.spanTimeInputToSeconds(We),Pe=n.spanToJSON(ie).start_timestamp,Ke=Math.min(Pe?Pe+F/1e3:1/0,Math.max(Pe||-1/0,Math.min(De,vt||1/0)));ie.end(Ke)}s(pe,"_endSpan");function Ee(){O&&(clearTimeout(O),O=void 0)}s(Ee,"_cancelIdleTimeout");function Be(We){Ee(),O=setTimeout(()=>{!A&&T.size===0&&M&&(D=g,pe(We))},R)}s(Be,"_restartIdleTimeout");function it(We){O=setTimeout(()=>{!A&&M&&(D=f,pe(We))},V)}s(it,"_restartChildSpanTimeout");function Ce(We){Ee(),T.set(We,!0);const Ze=c.timestampInSeconds();it(Ze+V/1e3)}s(Ce,"_pushActivity");function Me(We){if(T.has(We)&&T.delete(We),T.size===0){const Ze=c.timestampInSeconds();Be(Ze+R/1e3)}}s(Me,"_popActivity");function je(){A=!0,T.clear(),$&&$(ie),r._setSpanForScope(Y,ne);const We=n.spanToJSON(ie),{timestamp:Ze,start_timestamp:ft}=We;if(!Ze||!ft)return;(We.data||{})[p.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||ie.setAttribute(p.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,D),c.logger.log(`[Tracing] Idle span "${We.op}" finished`);const De=n.getSpanDescendants(ie).filter(Ke=>Ke!==ie);let Pe=0;De.forEach(Ke=>{Ke.isRecording()&&(Ke.setStatus({code:t.SPAN_STATUS_ERROR,message:"cancelled"}),Ke.end(Ze),m.DEBUG_BUILD&&c.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(Ke,void 0,2)));const Ye=n.spanToJSON(Ke),{timestamp:xe=0,start_timestamp:Ct=0}=Ye,At=Ct<=Ze,Lt=(F+R)/1e3,Ft=xe-Ct<Lt;if(m.DEBUG_BUILD){const Jt=JSON.stringify(Ke,void 0,2);At?Ft||c.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",Jt):c.logger.log("[Tracing] Discarding span since it happened after idle span was finished",Jt)}(!Ft||!At)&&(n.removeChildSpanFromSpan(ie,Ke),Pe++)}),Pe>0&&ie.setAttribute("sentry.idle_span_discarded_spans",Pe)}return s(je,"onIdleSpanEnded"),X.on("spanStart",We=>{if(A||We===ie||n.spanToJSON(We).timestamp)return;n.getSpanDescendants(ie).includes(We)&&Ce(We.spanContext().spanId)}),X.on("spanEnd",We=>{A||(Me(We.spanContext().spanId),We===ie&&je())}),X.on("idleSpanEnableAutoFinish",We=>{We===ie&&(M=!0,Be(),T.size&&it())}),C.disableAutoFinish||Be(),setTimeout(()=>{A||(ie.setStatus({code:t.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),D=S,pe())},F),ie}s(v,"startIdleSpan");function y(_){const C=i.startInactiveSpan(_);return r._setSpanForScope(h.getCurrentScope(),C),m.DEBUG_BUILD&&c.logger.log("[Tracing] Started span is an idle span"),C}s(y,"_startIdleSpan"),l.TRACING_DEFAULTS=o,l.startIdleSpan=v},8482601586:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336),m=d(5475300505);function p(r){if(!h.DEBUG_BUILD)return;const{description:n="< unknown name >",op:e="< unknown op >",parent_span_id:t}=m.spanToJSON(r),{spanId:i}=r.spanContext(),o=m.spanIsSampled(r),f=m.getRootSpan(r),g=f===r,S=`[Tracing] Starting ${o?"sampled":"unsampled"} ${g?"root ":""}span`,u=[`op: ${e}`,`name: ${n}`,`ID: ${i}`];if(t&&u.push(`parent ID: ${t}`),!g){const{op:v,description:y}=m.spanToJSON(f);u.push(`root ID: ${f.spanContext().spanId}`),v&&u.push(`root op: ${v}`),y&&u.push(`root description: ${y}`)}c.logger.log(`${S}
  ${u.join(`
  `)}`)}s(p,"logSpanStart");function a(r){if(!h.DEBUG_BUILD)return;const{description:n="< unknown name >",op:e="< unknown op >"}=m.spanToJSON(r),{spanId:t}=r.spanContext(),o=m.getRootSpan(r)===r,f=`[Tracing] Finishing "${e}" ${o?"root ":""}span "${n}" with ID ${t}`;c.logger.log(f)}s(a,"logSpanEnd"),l.logSpanEnd=a,l.logSpanStart=p},3345259075:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(2332127203),h=d(5475300505);function m(a,r,n){const e=h.getActiveSpan(),t=e&&h.getRootSpan(e);t&&t.addEvent(a,{[c.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:r,[c.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:n})}s(m,"setMeasurement");function p(a){if(!a||a.length===0)return;const r={};return a.forEach(n=>{const e=n.attributes||{},t=e[c.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],i=e[c.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];typeof t=="string"&&typeof i=="number"&&(r[n.name]={value:i,unit:t})}),r}s(p,"timedEventsToMeasurements"),l.setMeasurement=m,l.timedEventsToMeasurements=p},6939919536:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336),m=d(8645141291),p=d(1119532287);function a(r,n){if(!m.hasTracingEnabled(r))return[!1];let e;typeof r.tracesSampler=="function"?e=r.tracesSampler(n):n.parentSampled!==void 0?e=n.parentSampled:typeof r.tracesSampleRate<"u"?e=r.tracesSampleRate:e=1;const t=p.parseSampleRate(e);return t===void 0?(h.DEBUG_BUILD&&c.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):t?Math.random()<t?[!0,t]:(h.DEBUG_BUILD&&c.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,t]):(h.DEBUG_BUILD&&c.logger.log(`[Tracing] Discarding transaction because ${typeof r.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,t])}s(a,"sampleSpan"),l.sampleSpan=a},8167549304:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(5475300505);class m{constructor(a={}){this._traceId=a.traceId||c.uuid4(),this._spanId=a.spanId||c.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:h.TRACE_FLAG_NONE}}end(a){}setAttribute(a,r){return this}setAttributes(a){return this}setStatus(a){return this}updateName(a){return this}isRecording(){return!1}addEvent(a,r,n){return this}}s(m,"SentryNonRecordingSpan"),l.SentryNonRecordingSpan=m},6720678066:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(8844511336),p=d(5297268390),a=d(1243296801),r=d(2332127203),n=d(5475300505),e=d(9064881818),t=d(8482601586),i=d(3345259075),o=d(9578383602);class f{constructor(_={}){this._traceId=_.traceId||c.uuid4(),this._spanId=_.spanId||c.uuid4().substring(16),this._startTime=_.startTimestamp||c.timestampInSeconds(),this._attributes={},this.setAttributes({[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[r.SEMANTIC_ATTRIBUTE_SENTRY_OP]:_.op,..._.attributes}),this._name=_.name,_.parentSpanId&&(this._parentSpanId=_.parentSpanId),"sampled"in _&&(this._sampled=_.sampled),_.endTimestamp&&(this._endTime=_.endTimestamp),this._events=[],this._isStandaloneSpan=_.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:_,_traceId:C,_sampled:T}=this;return{spanId:_,traceId:C,traceFlags:T?n.TRACE_FLAG_SAMPLED:n.TRACE_FLAG_NONE}}setAttribute(_,C){C===void 0?delete this._attributes[_]:this._attributes[_]=C}setAttributes(_){Object.keys(_).forEach(C=>this.setAttribute(C,_[C]))}updateStartTime(_){this._startTime=n.spanTimeInputToSeconds(_)}setStatus(_){return this._status=_,this}updateName(_){return this._name=_,this}end(_){this._endTime||(this._endTime=n.spanTimeInputToSeconds(_),t.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return c.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[r.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:n.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[r.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[r.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:i.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&n.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?n.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(_,C,T){m.DEBUG_BUILD&&c.logger.log("[Tracing] Adding an event to span:",_);const A=g(C)?C:T||c.timestampInSeconds(),O=g(C)?{}:C||{},D={name:_,time:n.spanTimeInputToSeconds(A),attributes:O};return this._events.push(D),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const _=h.getClient();if(_&&_.emit("spanEnd",this),!(this._isStandaloneSpan||this===n.getRootSpan(this)))return;if(this._isStandaloneSpan){v(p.createSpanEnvelope([this],_));return}const T=this._convertSpanToTransaction();T&&(o.getCapturedScopesOnSpan(this).scope||h.getCurrentScope()).captureEvent(T)}_convertSpanToTransaction(){if(!S(n.spanToJSON(this)))return;this._name||(m.DEBUG_BUILD&&c.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:_,isolationScope:C}=o.getCapturedScopesOnSpan(this),A=(_||h.getCurrentScope()).getClient()||h.getClient();if(this._sampled!==!0){m.DEBUG_BUILD&&c.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),A&&A.recordDroppedEvent("sample_rate","transaction");return}const D=n.getSpanDescendants(this).filter($=>$!==this&&!u($)).map($=>n.spanToJSON($)).filter(S),M=this._attributes[r.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],R={contexts:{trace:n.spanToTransactionTraceContext(this)},spans:D,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:_,capturedSpanIsolationScope:C,...c.dropUndefinedKeys({dynamicSamplingContext:e.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:a.getMetricSummaryJsonForSpan(this),...M&&{transaction_info:{source:M}}},F=i.timedEventsToMeasurements(this._events);return F&&Object.keys(F).length&&(m.DEBUG_BUILD&&c.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(F,void 0,2)),R.measurements=F),R}}s(f,"SentrySpan");function g(y){return y&&typeof y=="number"||y instanceof Date||Array.isArray(y)}s(g,"isSpanTimeInput");function S(y){return!!y.start_timestamp&&!!y.timestamp&&!!y.span_id&&!!y.trace_id}s(S,"isFullFinishedSpan");function u(y){return y instanceof f&&y.isStandaloneSpan()}s(u,"isStandaloneSpan");function v(y){const _=h.getClient();if(!_)return;const C=y[1];if(!C||C.length===0){_.recordDroppedEvent("before_send","span");return}const T=_.getTransport();T&&T.send(y).then(null,A=>{m.DEBUG_BUILD&&c.logger.error("Error while sending span:",A)})}s(v,"sendSpanEnvelope"),l.SentrySpan=f},1150305139:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=0,c=1,h=2;function m(a){if(a<400&&a>=100)return{code:c};if(a>=400&&a<500)switch(a){case 401:return{code:h,message:"unauthenticated"};case 403:return{code:h,message:"permission_denied"};case 404:return{code:h,message:"not_found"};case 409:return{code:h,message:"already_exists"};case 413:return{code:h,message:"failed_precondition"};case 429:return{code:h,message:"resource_exhausted"};case 499:return{code:h,message:"cancelled"};default:return{code:h,message:"invalid_argument"}}if(a>=500&&a<600)switch(a){case 501:return{code:h,message:"unimplemented"};case 503:return{code:h,message:"unavailable"};case 504:return{code:h,message:"deadline_exceeded"};default:return{code:h,message:"internal_error"}}return{code:h,message:"unknown_error"}}s(m,"getSpanStatusFromHttpCode");function p(a,r){a.setAttribute("http.response.status_code",r);const n=m(r);n.message!=="unknown_error"&&a.setStatus(n)}s(p,"setHttpStatus"),l.SPAN_STATUS_ERROR=h,l.SPAN_STATUS_OK=c,l.SPAN_STATUS_UNSET=d,l.getSpanStatusFromHttpCode=m,l.setHttpStatus=p},4530391782:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(2685322190),m=d(8438156026),p=d(897859094),a=d(2332127203),r=d(5800525242),n=d(8645141291),e=d(9972015035),t=d(5475300505),i=d(9064881818),o=d(8482601586),f=d(6939919536),g=d(8167549304),S=d(6720678066),u=d(1150305139),v=d(9578383602),y="__SENTRY_SUPPRESS_TRACING__";function _(Y,ne){const ie=F();if(ie.startSpan)return ie.startSpan(Y,ne);const pe=R(Y);return m.withScope(Y.scope,Ee=>{const Be=X(Ee),Ce=Y.onlyIfParent&&!Be?new g.SentryNonRecordingSpan:M({parentSpan:Be,spanContext:pe,forceTransaction:Y.forceTransaction,scope:Ee});return e._setSpanForScope(Ee,Ce),r.handleCallbackErrors(()=>ne(Ce),()=>{const{status:Me}=t.spanToJSON(Ce);Ce.isRecording()&&(!Me||Me==="ok")&&Ce.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"})},()=>Ce.end())})}s(_,"startSpan");function C(Y,ne){const ie=F();if(ie.startSpanManual)return ie.startSpanManual(Y,ne);const pe=R(Y);return m.withScope(Y.scope,Ee=>{const Be=X(Ee),Ce=Y.onlyIfParent&&!Be?new g.SentryNonRecordingSpan:M({parentSpan:Be,spanContext:pe,forceTransaction:Y.forceTransaction,scope:Ee});e._setSpanForScope(Ee,Ce);function Me(){Ce.end()}return s(Me,"finishAndSetSpan"),r.handleCallbackErrors(()=>ne(Ce,Me),()=>{const{status:je}=t.spanToJSON(Ce);Ce.isRecording()&&(!je||je==="ok")&&Ce.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"})})})}s(C,"startSpanManual");function T(Y){const ne=F();if(ne.startInactiveSpan)return ne.startInactiveSpan(Y);const ie=R(Y),pe=Y.scope||m.getCurrentScope(),Ee=X(pe);return Y.onlyIfParent&&!Ee?new g.SentryNonRecordingSpan:M({parentSpan:Ee,spanContext:ie,forceTransaction:Y.forceTransaction,scope:pe})}s(T,"startInactiveSpan");const A=s(({sentryTrace:Y,baggage:ne},ie)=>m.withScope(pe=>{const Ee=c.propagationContextFromHeaders(Y,ne);return pe.setPropagationContext(Ee),ie()}),"continueTrace");function O(Y,ne){const ie=F();return ie.withActiveSpan?ie.withActiveSpan(Y,ne):m.withScope(pe=>(e._setSpanForScope(pe,Y||void 0),ne(pe)))}s(O,"withActiveSpan");function D(Y){const ne=F();return ne.suppressTracing?ne.suppressTracing(Y):m.withScope(ie=>(ie.setSDKProcessingMetadata({[y]:!0}),Y()))}s(D,"suppressTracing");function M({parentSpan:Y,spanContext:ne,forceTransaction:ie,scope:pe}){if(!n.hasTracingEnabled())return new g.SentryNonRecordingSpan;const Ee=m.getIsolationScope();let Be;if(Y&&!ie)Be=$(Y,pe,ne),t.addChildSpanToSpan(Y,Be);else if(Y){const it=i.getDynamicSamplingContextFromSpan(Y),{traceId:Ce,spanId:Me}=Y.spanContext(),je=t.spanIsSampled(Y);Be=V({traceId:Ce,parentSpanId:Me,...ne},pe,je),i.freezeDscOnSpan(Be,it)}else{const{traceId:it,dsc:Ce,parentSpanId:Me,sampled:je}={...Ee.getPropagationContext(),...pe.getPropagationContext()};Be=V({traceId:it,parentSpanId:Me,...ne},pe,je),Ce&&i.freezeDscOnSpan(Be,Ce)}return o.logSpanStart(Be),v.setCapturedScopesOnSpan(Be,pe,Ee),Be}s(M,"createChildOrRootSpan");function R(Y){const ie={isStandalone:(Y.experimental||{}).standalone,...Y};if(Y.startTime){const pe={...ie};return pe.startTimestamp=t.spanTimeInputToSeconds(Y.startTime),delete pe.startTime,pe}return ie}s(R,"normalizeContext");function F(){const Y=h.getMainCarrier();return p.getAsyncContextStrategy(Y)}s(F,"getAcs");function V(Y,ne,ie){const pe=m.getClient(),Ee=pe&&pe.getOptions()||{},{name:Be="",attributes:it}=Y,[Ce,Me]=ne.getScopeData().sdkProcessingMetadata[y]?[!1]:f.sampleSpan(Ee,{name:Be,parentSampled:ie,attributes:it,transactionContext:{name:Be,parentSampled:ie}}),je=new S.SentrySpan({...Y,attributes:{[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...Y.attributes},sampled:Ce});return Me!==void 0&&je.setAttribute(a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Me),pe&&pe.emit("spanStart",je),je}s(V,"_startRootSpan");function $(Y,ne,ie){const{spanId:pe,traceId:Ee}=Y.spanContext(),Be=ne.getScopeData().sdkProcessingMetadata[y]?!1:t.spanIsSampled(Y),it=Be?new S.SentrySpan({...ie,parentSpanId:pe,traceId:Ee,sampled:Be}):new g.SentryNonRecordingSpan({traceId:Ee});t.addChildSpanToSpan(Y,it);const Ce=m.getClient();return Ce&&(Ce.emit("spanStart",it),ie.endTimestamp&&Ce.emit("spanEnd",it)),it}s($,"_startChildSpan");function X(Y){const ne=e._getSpanForScope(Y);if(!ne)return;const ie=m.getClient();return(ie?ie.getOptions():{}).parentSpanIsAlwaysRootSpan?t.getRootSpan(ne):ne}s(X,"getParentSpan"),l.continueTrace=A,l.startInactiveSpan=T,l.startSpan=_,l.startSpanManual=C,l.suppressTracing=D,l.withActiveSpan=O},9578383602:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h="_sentryScope",m="_sentryIsolationScope";function p(r,n,e){r&&(c.addNonEnumerableProperty(r,m,e),c.addNonEnumerableProperty(r,h,n))}s(p,"setCapturedScopesOnSpan");function a(r){return{scope:r[h],isolationScope:r[m]}}s(a,"getCapturedScopesOnSpan"),l.stripUrlQueryAndFragment=c.stripUrlQueryAndFragment,l.getCapturedScopesOnSpan=a,l.setCapturedScopesOnSpan=p},306863924:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336),m=64;function p(r,n,e=c.makePromiseBuffer(r.bufferSize||m)){let t={};const i=s(f=>e.drain(f),"flush");function o(f){const g=[];if(c.forEachEnvelopeItem(f,(y,_)=>{const C=c.envelopeItemTypeToDataCategory(_);if(c.isRateLimited(t,C)){const T=a(y,_);r.recordDroppedEvent("ratelimit_backoff",C,T)}else g.push(y)}),g.length===0)return c.resolvedSyncPromise({});const S=c.createEnvelope(f[0],g),u=s(y=>{c.forEachEnvelopeItem(S,(_,C)=>{const T=a(_,C);r.recordDroppedEvent(y,c.envelopeItemTypeToDataCategory(C),T)})},"recordEnvelopeLoss"),v=s(()=>n({body:c.serializeEnvelope(S)}).then(y=>(y.statusCode!==void 0&&(y.statusCode<200||y.statusCode>=300)&&h.DEBUG_BUILD&&c.logger.warn(`Sentry responded with status code ${y.statusCode} to sent event.`),t=c.updateRateLimits(t,y),y),y=>{throw u("network_error"),y}),"requestTask");return e.add(v).then(y=>y,y=>{if(y instanceof c.SentryError)return h.DEBUG_BUILD&&c.logger.error("Skipped sending event because buffer is full."),u("queue_overflow"),c.resolvedSyncPromise({});throw y})}return s(o,"send"),{send:o,flush:i}}s(p,"createTransport");function a(r,n){if(!(n!=="event"&&n!=="transaction"))return Array.isArray(r)?r[1]:void 0}s(a,"getEventForEnvelopeItem"),l.DEFAULT_TRANSPORT_BUFFER_SIZE=m,l.createTransport=p},2843166954:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(9857059330);function m(n,e){let t;return c.forEachEnvelopeItem(n,(i,o)=>(e.includes(o)&&(t=Array.isArray(i)?i[1]:void 0),!!t)),t}s(m,"eventFromEnvelope");function p(n,e){return t=>{const i=n(t);return{...i,send:async o=>{const f=m(o,["event","transaction","profile","replay_event"]);return f&&(f.release=e),i.send(o)}}}}s(p,"makeOverrideReleaseTransport");function a(n,e){return c.createEnvelope(e?{...n[0],dsn:e}:n[0],n[1])}s(a,"overrideDsn");function r(n,e){return t=>{const i=n(t),o=new Map;function f(u,v){const y=v?`${u}:${v}`:u;let _=o.get(y);if(!_){const C=c.dsnFromString(u);if(!C)return;const T=h.getEnvelopeEndpointWithUrlEncodedAuth(C,t.tunnel);_=v?p(n,v)({...t,url:T}):n({...t,url:T}),o.set(y,_)}return[u,_]}s(f,"getTransport");async function g(u){function v(C){const T=C&&C.length?C:["event"];return m(u,T)}s(v,"getEvent");const y=e({envelope:u,getEvent:v}).map(C=>typeof C=="string"?f(C,void 0):f(C.dsn,C.release)).filter(C=>!!C);return y.length===0&&y.push(["",i]),(await Promise.all(y.map(([C,T])=>T.send(a(u,C)))))[0]}s(g,"send");async function S(u){const v=[...o.values(),i];return(await Promise.all(v.map(_=>_.flush(u)))).every(_=>_)}return s(S,"flush"),{send:g,flush:S}}}s(r,"makeMultiplexedTransport"),l.eventFromEnvelope=m,l.makeMultiplexedTransport=r},3178226440:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336),m=100,p=5e3,a=36e5;function r(n){function e(...t){h.DEBUG_BUILD&&c.logger.info("[Offline]:",...t)}return s(e,"log"),t=>{const i=n(t);if(!t.createStore)throw new Error("No `createStore` function was provided");const o=t.createStore(t);let f=p,g;function S(_,C,T){return c.envelopeContainsItemType(_,["client_report"])?!1:t.shouldStore?t.shouldStore(_,C,T):!0}s(S,"shouldQueue");function u(_){g&&clearTimeout(g),g=setTimeout(async()=>{g=void 0;const C=await o.shift();C&&(e("Attempting to send previously queued event"),C[0].sent_at=new Date().toISOString(),y(C,!0).catch(T=>{e("Failed to retry sending",T)}))},_),typeof g!="number"&&g.unref&&g.unref()}s(u,"flushIn");function v(){g||(u(f),f=Math.min(f*2,a))}s(v,"flushWithBackOff");async function y(_,C=!1){if(!C&&c.envelopeContainsItemType(_,["replay_event","replay_recording"]))return await o.push(_),u(m),{};try{const T=await i.send(_);let A=m;if(T){if(T.headers&&T.headers["retry-after"])A=c.parseRetryAfterHeader(T.headers["retry-after"]);else if(T.headers&&T.headers["x-sentry-rate-limits"])A=6e4;else if((T.statusCode||0)>=400)return T}return u(A),f=p,T}catch(T){if(await S(_,T,f))return C?await o.unshift(_):await o.push(_),v(),e("Error sending. Event queued.",T),{};throw T}}return s(y,"send"),t.flushAtStartup&&v(),{send:y,flush:_=>i.flush(_)}}}s(r,"makeOfflineTransport"),l.MIN_DELAY=m,l.START_DELAY=p,l.makeOfflineTransport=r},2117263085:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8438156026),m=d(5015065869),p=d(2332127203);d(2206474662),d(8844511336);const a=d(4530391782),r={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};function n(e={}){return function(t){const{path:i,type:o,next:f,rawInput:g}=t,S=h.getClient(),u=S&&S.getOptions(),v={procedure_type:o};(e.attachRpcInput!==void 0?e.attachRpcInput:u&&u.sendDefaultPii)&&(v.input=c.normalize(g)),m.setContext("trpc",v);function y(_){typeof _=="object"&&_!==null&&"ok"in _&&!_.ok&&"error"in _&&m.captureException(_.error,r)}return s(y,"captureIfError"),a.startSpanManual({name:`trpc/${i}`,op:"rpc.server",attributes:{[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[p.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},_=>{let C;try{C=f()}catch(T){throw m.captureException(T,r),_.end(),T}return c.isThenable(C)?C.then(T=>(y(T),_.end(),T),T=>{throw m.captureException(T,r),_.end(),T}):(y(C),_.end(),C)})}}s(n,"trpcMiddleware"),l.trpcMiddleware=n},8969228363:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(9064881818),m=d(5475300505);function p(f,g){const{fingerprint:S,span:u,breadcrumbs:v,sdkProcessingMetadata:y}=g;n(f,g),u&&i(f,u),o(f,S),e(f,v),t(f,y)}s(p,"applyScopeDataToEvent");function a(f,g){const{extra:S,tags:u,user:v,contexts:y,level:_,sdkProcessingMetadata:C,breadcrumbs:T,fingerprint:A,eventProcessors:O,attachments:D,propagationContext:M,transactionName:R,span:F}=g;r(f,"extra",S),r(f,"tags",u),r(f,"user",v),r(f,"contexts",y),r(f,"sdkProcessingMetadata",C),_&&(f.level=_),R&&(f.transactionName=R),F&&(f.span=F),T.length&&(f.breadcrumbs=[...f.breadcrumbs,...T]),A.length&&(f.fingerprint=[...f.fingerprint,...A]),O.length&&(f.eventProcessors=[...f.eventProcessors,...O]),D.length&&(f.attachments=[...f.attachments,...D]),f.propagationContext={...f.propagationContext,...M}}s(a,"mergeScopeData");function r(f,g,S){if(S&&Object.keys(S).length){f[g]={...f[g]};for(const u in S)Object.prototype.hasOwnProperty.call(S,u)&&(f[g][u]=S[u])}}s(r,"mergeAndOverwriteScopeData");function n(f,g){const{extra:S,tags:u,user:v,contexts:y,level:_,transactionName:C}=g,T=c.dropUndefinedKeys(S);T&&Object.keys(T).length&&(f.extra={...T,...f.extra});const A=c.dropUndefinedKeys(u);A&&Object.keys(A).length&&(f.tags={...A,...f.tags});const O=c.dropUndefinedKeys(v);O&&Object.keys(O).length&&(f.user={...O,...f.user});const D=c.dropUndefinedKeys(y);D&&Object.keys(D).length&&(f.contexts={...D,...f.contexts}),_&&(f.level=_),C&&f.type!=="transaction"&&(f.transaction=C)}s(n,"applyDataToEvent");function e(f,g){const S=[...f.breadcrumbs||[],...g];f.breadcrumbs=S.length?S:void 0}s(e,"applyBreadcrumbsToEvent");function t(f,g){f.sdkProcessingMetadata={...f.sdkProcessingMetadata,...g}}s(t,"applySdkMetadataToEvent");function i(f,g){f.contexts={trace:m.spanToTraceContext(g),...f.contexts},f.sdkProcessingMetadata={dynamicSamplingContext:h.getDynamicSamplingContextFromSpan(g),...f.sdkProcessingMetadata};const S=m.getRootSpan(g),u=m.spanToJSON(S).description;u&&!f.transaction&&f.type==="transaction"&&(f.transaction=u)}s(i,"applySpanToEvent");function o(f,g){f.fingerprint=f.fingerprint?c.arrayify(f.fingerprint):[],g&&(f.fingerprint=f.fingerprint.concat(g)),f.fingerprint&&!f.fingerprint.length&&delete f.fingerprint}s(o,"applyFingerprintToEvent"),l.applyScopeDataToEvent=p,l.mergeAndOverwriteScopeData=r,l.mergeScopeData=a},5800525242:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614);function h(p,a,r=()=>{}){let n;try{n=p()}catch(e){throw a(e),r(),e}return m(n,a,r)}s(h,"handleCallbackErrors");function m(p,a,r){return c.isThenable(p)?p.then(n=>(r(),n),n=>{throw a(n),r(),n}):(r(),p)}s(m,"maybeHandlePromiseRejection"),l.handleCallbackErrors=h},8645141291:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8438156026);function h(p){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const a=p||m();return!!a&&(a.enableTracing||"tracesSampleRate"in a||"tracesSampler"in a)}s(h,"hasTracingEnabled");function m(){const p=c.getClient();return p&&p.getOptions()}s(m,"getClientOptions"),l.hasTracingEnabled=h},175966809:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(p,a){const r=a&&a.getDsn(),n=a&&a.getOptions().tunnel;return h(p,r)||c(p,n)}s(d,"isSentryRequestUrl");function c(p,a){return a?m(p)===m(a):!1}s(c,"checkTunnel");function h(p,a){return a?p.includes(a.host):!1}s(h,"checkDsn");function m(p){return p[p.length-1]==="/"?p.slice(0,-1):p}s(m,"removeTrailingSlash"),l.isSentryRequestUrl=d},4718881455:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(c,...h){const m=new String(String.raw(c,...h));return m.__sentry_template_string__=c.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),m.__sentry_template_values__=h,m}s(d,"parameterize"),l.parameterize=d},1119532287:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(8844511336);function m(p){if(typeof p=="boolean")return Number(p);const a=typeof p=="string"?parseFloat(p):p;if(typeof a!="number"||isNaN(a)||a<0||a>1){h.DEBUG_BUILD&&c.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(p)} of type ${JSON.stringify(typeof p)}.`);return}return a}s(m,"parseSampleRate"),l.parseSampleRate=m},9877103701:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(4834620523),m=d(8438156026),p=d(5911348835),a=d(2158524366),r=d(8969228363);function n(C,T,A,O,D,M){const{normalizeDepth:R=3,normalizeMaxBreadth:F=1e3}=C,V={...T,event_id:T.event_id||A.event_id||c.uuid4(),timestamp:T.timestamp||c.dateTimestampInSeconds()},$=A.integrations||C.integrations.map(Be=>Be.name);e(V,C),f(V,$),T.type===void 0&&i(V,C.stackParser);const X=S(O,A.captureContext);A.mechanism&&c.addExceptionMechanism(V,A.mechanism);const Y=D?D.getEventProcessors():[],ne=m.getGlobalScope().getScopeData();if(M){const Be=M.getScopeData();r.mergeScopeData(ne,Be)}if(X){const Be=X.getScopeData();r.mergeScopeData(ne,Be)}const ie=[...A.attachments||[],...ne.attachments];ie.length&&(A.attachments=ie),r.applyScopeDataToEvent(V,ne);const pe=[...Y,...ne.eventProcessors];return p.notifyEventProcessors(pe,V,A).then(Be=>(Be&&o(Be),typeof R=="number"&&R>0?g(Be,R,F):Be))}s(n,"prepareEvent");function e(C,T){const{environment:A,release:O,dist:D,maxValueLength:M=250}=T;"environment"in C||(C.environment="environment"in T?A:h.DEFAULT_ENVIRONMENT),C.release===void 0&&O!==void 0&&(C.release=O),C.dist===void 0&&D!==void 0&&(C.dist=D),C.message&&(C.message=c.truncate(C.message,M));const R=C.exception&&C.exception.values&&C.exception.values[0];R&&R.value&&(R.value=c.truncate(R.value,M));const F=C.request;F&&F.url&&(F.url=c.truncate(F.url,M))}s(e,"applyClientOptions");const t=new WeakMap;function i(C,T){const A=c.GLOBAL_OBJ._sentryDebugIds;if(!A)return;let O;const D=t.get(T);D?O=D:(O=new Map,t.set(T,O));const M=Object.keys(A).reduce((R,F)=>{let V;const $=O.get(F);$?V=$:(V=T(F),O.set(F,V));for(let X=V.length-1;X>=0;X--){const Y=V[X];if(Y.filename){R[Y.filename]=A[F];break}}return R},{});try{C.exception.values.forEach(R=>{R.stacktrace.frames.forEach(F=>{F.filename&&(F.debug_id=M[F.filename])})})}catch{}}s(i,"applyDebugIds");function o(C){const T={};try{C.exception.values.forEach(O=>{O.stacktrace.frames.forEach(D=>{D.debug_id&&(D.abs_path?T[D.abs_path]=D.debug_id:D.filename&&(T[D.filename]=D.debug_id),delete D.debug_id)})})}catch{}if(Object.keys(T).length===0)return;C.debug_meta=C.debug_meta||{},C.debug_meta.images=C.debug_meta.images||[];const A=C.debug_meta.images;Object.keys(T).forEach(O=>{A.push({type:"sourcemap",code_file:O,debug_id:T[O]})})}s(o,"applyDebugMeta");function f(C,T){T.length>0&&(C.sdk=C.sdk||{},C.sdk.integrations=[...C.sdk.integrations||[],...T])}s(f,"applyIntegrationsMetadata");function g(C,T,A){if(!C)return null;const O={...C,...C.breadcrumbs&&{breadcrumbs:C.breadcrumbs.map(D=>({...D,...D.data&&{data:c.normalize(D.data,T,A)}}))},...C.user&&{user:c.normalize(C.user,T,A)},...C.contexts&&{contexts:c.normalize(C.contexts,T,A)},...C.extra&&{extra:c.normalize(C.extra,T,A)}};return C.contexts&&C.contexts.trace&&O.contexts&&(O.contexts.trace=C.contexts.trace,C.contexts.trace.data&&(O.contexts.trace.data=c.normalize(C.contexts.trace.data,T,A))),C.spans&&(O.spans=C.spans.map(D=>({...D,...D.data&&{data:c.normalize(D.data,T,A)}}))),O}s(g,"normalizeEvent");function S(C,T){if(!T)return C;const A=C?C.clone():new a.Scope;return A.update(T),A}s(S,"getFinalScope");function u(C){if(C)return v(C)?{captureContext:C}:_(C)?{captureContext:C}:C}s(u,"parseEventHintOrCaptureContext");function v(C){return C instanceof a.Scope||typeof C=="function"}s(v,"hintIsScopeOrFunction");const y=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function _(C){return Object.keys(C).some(T=>y.includes(T))}s(_,"hintIsScopeContext"),l.applyDebugIds=i,l.applyDebugMeta=o,l.parseEventHintOrCaptureContext=u,l.prepareEvent=n},3433863337:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(639277478);function h(m,p,a=[p],r="npm"){const n=m._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${p}`,packages:a.map(e=>({name:`${r}:@sentry/${e}`,version:c.SDK_VERSION})),version:c.SDK_VERSION}),m._metadata=n}s(h,"applySdkMetadata"),l.applySdkMetadata=h},9972015035:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h="_sentrySpan";function m(a,r){r?c.addNonEnumerableProperty(a,h,r):delete a[h]}s(m,"_setSpanForScope");function p(a){return a[h]}s(p,"_getSpanForScope"),l._getSpanForScope=p,l._setSpanForScope=m},5475300505:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(7563271614),h=d(897859094),m=d(2685322190),p=d(8438156026),a=d(1243296801),r=d(2332127203);d(2206474662),d(8844511336);const n=d(9972015035),e=d(1150305139),t=d(9064881818),i=0,o=1;function f(ne){const{spanId:ie,traceId:pe}=ne.spanContext(),{data:Ee,op:Be,parent_span_id:it,status:Ce,origin:Me}=_(ne);return c.dropUndefinedKeys({parent_span_id:it,span_id:ie,trace_id:pe,data:Ee,op:Be,status:Ce,origin:Me})}s(f,"spanToTransactionTraceContext");function g(ne){const{spanId:ie,traceId:pe}=ne.spanContext(),{parent_span_id:Ee}=_(ne);return c.dropUndefinedKeys({parent_span_id:Ee,span_id:ie,trace_id:pe})}s(g,"spanToTraceContext");function S(ne){const{traceId:ie,spanId:pe}=ne.spanContext(),Ee=A(ne);return c.generateSentryTraceHeader(ie,pe,Ee)}s(S,"spanToTraceHeader");function u(ne){const ie=t.getDynamicSamplingContextFromSpan(ne);return c.dynamicSamplingContextToSentryBaggageHeader(ie)}s(u,"spanToBaggageHeader");function v(ne){return typeof ne=="number"?y(ne):Array.isArray(ne)?ne[0]+ne[1]/1e9:ne instanceof Date?y(ne.getTime()):c.timestampInSeconds()}s(v,"spanTimeInputToSeconds");function y(ne){return ne>9999999999?ne/1e3:ne}s(y,"ensureTimestampInSeconds");function _(ne){if(T(ne))return ne.getSpanJSON();try{const{spanId:ie,traceId:pe}=ne.spanContext();if(C(ne)){const{attributes:Ee,startTime:Be,name:it,endTime:Ce,parentSpanId:Me,status:je}=ne;return c.dropUndefinedKeys({span_id:ie,trace_id:pe,data:Ee,description:it,parent_span_id:Me,start_timestamp:v(Be),timestamp:v(Ce)||void 0,status:O(je),op:Ee[r.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:Ee[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(ne)})}return{span_id:ie,trace_id:pe}}catch{return{}}}s(_,"spanToJSON");function C(ne){const ie=ne;return!!ie.attributes&&!!ie.startTime&&!!ie.name&&!!ie.endTime&&!!ie.status}s(C,"spanIsOpenTelemetrySdkTraceBaseSpan");function T(ne){return typeof ne.getSpanJSON=="function"}s(T,"spanIsSentrySpan");function A(ne){const{traceFlags:ie}=ne.spanContext();return ie===o}s(A,"spanIsSampled");function O(ne){if(!(!ne||ne.code===e.SPAN_STATUS_UNSET))return ne.code===e.SPAN_STATUS_OK?"ok":ne.message||"unknown_error"}s(O,"getStatusMessage");const D="_sentryChildSpans",M="_sentryRootSpan";function R(ne,ie){const pe=ne[M]||ne;c.addNonEnumerableProperty(ie,M,pe),ne[D]&&ne[D].size<1e3?ne[D].add(ie):c.addNonEnumerableProperty(ne,D,new Set([ie]))}s(R,"addChildSpanToSpan");function F(ne,ie){ne[D]&&ne[D].delete(ie)}s(F,"removeChildSpanFromSpan");function V(ne){const ie=new Set;function pe(Ee){if(!ie.has(Ee)&&A(Ee)){ie.add(Ee);const Be=Ee[D]?Array.from(Ee[D]):[];for(const it of Be)pe(it)}}return s(pe,"addSpanChildren"),pe(ne),Array.from(ie)}s(V,"getSpanDescendants");function $(ne){return ne[M]||ne}s($,"getRootSpan");function X(){const ne=m.getMainCarrier(),ie=h.getAsyncContextStrategy(ne);return ie.getActiveSpan?ie.getActiveSpan():n._getSpanForScope(p.getCurrentScope())}s(X,"getActiveSpan");function Y(ne,ie,pe,Ee,Be,it){const Ce=X();Ce&&a.updateMetricSummaryOnSpan(Ce,ne,ie,pe,Ee,Be,it)}s(Y,"updateMetricSummaryOnActiveSpan"),l.TRACE_FLAG_NONE=i,l.TRACE_FLAG_SAMPLED=o,l.addChildSpanToSpan=R,l.getActiveSpan=X,l.getRootSpan=$,l.getSpanDescendants=V,l.getStatusMessage=O,l.removeChildSpanFromSpan=F,l.spanIsSampled=A,l.spanTimeInputToSeconds=v,l.spanToBaggageHeader=u,l.spanToJSON=_,l.spanToTraceContext=g,l.spanToTraceHeader=S,l.spanToTransactionTraceContext=f,l.updateMetricSummaryOnActiveSpan=Y},639277478:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="8.2.1";l.SDK_VERSION=d},4916261515:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5330804994),h=d(9996838991);function m(e,t,i=250,o,f,g,S){if(!g.exception||!g.exception.values||!S||!c.isInstanceOf(S.originalException,Error))return;const u=g.exception.values.length>0?g.exception.values[g.exception.values.length-1]:void 0;u&&(g.exception.values=n(p(e,t,f,S.originalException,o,g.exception.values,u,0),i))}s(m,"applyAggregateErrorsToEvent");function p(e,t,i,o,f,g,S,u){if(g.length>=i+1)return g;let v=[...g];if(c.isInstanceOf(o[f],Error)){a(S,u);const y=e(t,o[f]),_=v.length;r(y,f,_,u),v=p(e,t,i,o[f],f,[y,...v],y,_)}return Array.isArray(o.errors)&&o.errors.forEach((y,_)=>{if(c.isInstanceOf(y,Error)){a(S,u);const C=e(t,y),T=v.length;r(C,`errors[${_}]`,T,u),v=p(e,t,i,y,f,[C,...v],C,T)}}),v}s(p,"aggregateExceptionsFromError");function a(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}s(a,"applyExceptionGroupFieldsForParentException");function r(e,t,i,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:i,parent_id:o}}s(r,"applyExceptionGroupFieldsForChildException");function n(e,t){return e.map(i=>(i.value&&(i.value=h.truncate(i.value,t)),i))}s(n,"truncateAggregateExceptions"),l.applyAggregateErrorsToEvent=m},999571021:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6005876151),h=d(5247061117),m=d(9955566551);function p(r,n,e,t){const i=r();let o=!1,f=!0;return setInterval(()=>{const g=i.getTimeMs();o===!1&&g>n+e&&(o=!0,f&&t()),g<n+e&&(o=!1)},20),{poll:()=>{i.reset()},enabled:g=>{f=g}}}s(p,"watchdogTimer");function a(r,n,e){const t=n?n.replace(/^file:\/\//,""):void 0,i=r.location.columnNumber?r.location.columnNumber+1:void 0,o=r.location.lineNumber?r.location.lineNumber+1:void 0;return h.dropUndefinedKeys({filename:t,module:e(t),function:r.functionName||m.UNKNOWN_FUNCTION,colno:i,lineno:o,in_app:t?c.filenameIsInApp(t):void 0})}s(a,"callFrameToStackFrame"),l.callFrameToStackFrame=a,l.watchdogTimer=p},8666696284:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1795624184),h=d(5330804994),m=d(3610150206),p="baggage",a="sentry-",r=/^sentry-/,n=8192;function e(g){const S=i(g);if(!S)return;const u=Object.entries(S).reduce((v,[y,_])=>{if(y.match(r)){const C=y.slice(a.length);v[C]=_}return v},{});if(Object.keys(u).length>0)return u}s(e,"baggageHeaderToDynamicSamplingContext");function t(g){if(!g)return;const S=Object.entries(g).reduce((u,[v,y])=>(y&&(u[`${a}${v}`]=y),u),{});return f(S)}s(t,"dynamicSamplingContextToSentryBaggageHeader");function i(g){if(!(!g||!h.isString(g)&&!Array.isArray(g)))return Array.isArray(g)?g.reduce((S,u)=>{const v=o(u);for(const y of Object.keys(v))S[y]=v[y];return S},{}):o(g)}s(i,"parseBaggageHeader");function o(g){return g.split(",").map(S=>S.split("=").map(u=>decodeURIComponent(u.trim()))).reduce((S,[u,v])=>(S[u]=v,S),{})}s(o,"baggageHeaderToObject");function f(g){if(Object.keys(g).length!==0)return Object.entries(g).reduce((S,[u,v],y)=>{const _=`${encodeURIComponent(u)}=${encodeURIComponent(v)}`,C=y===0?_:`${S},${_}`;return C.length>n?(c.DEBUG_BUILD&&m.logger.warn(`Not adding key: ${u} with val: ${v} to baggage header due to exceeding baggage size limits.`),S):C},"")}s(f,"objectToBaggageHeader"),l.BAGGAGE_HEADER_NAME=p,l.MAX_BAGGAGE_STRING_LENGTH=n,l.SENTRY_BAGGAGE_KEY_PREFIX=a,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=r,l.baggageHeaderToDynamicSamplingContext=e,l.dynamicSamplingContextToSentryBaggageHeader=t,l.parseBaggageHeader=i},9550996546:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5330804994),m=d(1108286465).GLOBAL_OBJ,p=80;function a(i,o={}){if(!i)return"<unknown>";try{let f=i;const g=5,S=[];let u=0,v=0;const y=" > ",_=y.length;let C;const T=Array.isArray(o)?o:o.keyAttrs,A=!Array.isArray(o)&&o.maxStringLength||p;for(;f&&u++<g&&(C=r(f,T),!(C==="html"||u>1&&v+S.length*_+C.length>=A));)S.push(C),v+=C.length,f=f.parentNode;return S.reverse().join(y)}catch{return"<unknown>"}}s(a,"htmlTreeAsString");function r(i,o){const f=i,g=[];let S,u,v,y,_;if(!f||!f.tagName)return"";if(m.HTMLElement&&f instanceof HTMLElement&&f.dataset){if(f.dataset.sentryComponent)return f.dataset.sentryComponent;if(f.dataset.sentryElement)return f.dataset.sentryElement}g.push(f.tagName.toLowerCase());const C=o&&o.length?o.filter(A=>f.getAttribute(A)).map(A=>[A,f.getAttribute(A)]):null;if(C&&C.length)C.forEach(A=>{g.push(`[${A[0]}="${A[1]}"]`)});else if(f.id&&g.push(`#${f.id}`),S=f.className,S&&c.isString(S))for(u=S.split(/\s+/),_=0;_<u.length;_++)g.push(`.${u[_]}`);const T=["aria-label","type","name","title","alt"];for(_=0;_<T.length;_++)v=T[_],y=f.getAttribute(v),y&&g.push(`[${v}="${y}"]`);return g.join("")}s(r,"_htmlElementAsString");function n(){try{return m.document.location.href}catch{return""}}s(n,"getLocationHref");function e(i){return m.document&&m.document.querySelector?m.document.querySelector(i):null}s(e,"getDomElement");function t(i){if(!m.HTMLElement)return null;let o=i;const f=5;for(let g=0;g<f;g++){if(!o)return null;if(o instanceof HTMLElement){if(o.dataset.sentryComponent)return o.dataset.sentryComponent;if(o.dataset.sentryElement)return o.dataset.sentryElement}o=o.parentNode}return null}s(t,"getComponentName"),l.getComponentName=t,l.getDomElement=e,l.getLocationHref=n,l.htmlTreeAsString=a},7961093924:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9137969200);async function h(m,p){return c._nullishCoalesce(m,p)}s(h,"_asyncNullishCoalesce"),l._asyncNullishCoalesce=h},6639909989:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});async function d(c){let h,m=c[0],p=1;for(;p<c.length;){const a=c[p],r=c[p+1];if(p+=2,(a==="optionalAccess"||a==="optionalCall")&&m==null)return;a==="access"||a==="optionalAccess"?(h=m,m=await r(m)):(a==="call"||a==="optionalCall")&&(m=await r((...n)=>m.call(h,...n)),h=void 0)}return m}s(d,"_asyncOptionalChain"),l._asyncOptionalChain=d},8823822214:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(6639909989);async function h(m){const p=await c._asyncOptionalChain(m);return p??!0}s(h,"_asyncOptionalChainDelete"),l._asyncOptionalChainDelete=h},9137969200:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(c,h){return c??h()}s(d,"_nullishCoalesce"),l._nullishCoalesce=d},3683597617:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(c){let h,m=c[0],p=1;for(;p<c.length;){const a=c[p],r=c[p+1];if(p+=2,(a==="optionalAccess"||a==="optionalCall")&&m==null)return;a==="access"||a==="optionalAccess"?(h=m,m=r(m)):(a==="call"||a==="optionalCall")&&(m=r((...n)=>m.call(h,...n)),h=void 0)}return m}s(d,"_optionalChain"),l._optionalChain=d},2677927218:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(3683597617);function h(m){const p=c._optionalChain(m);return p??!0}s(h,"_optionalChainDelete"),l._optionalChainDelete=h},4308130348:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(c){let h=[],m={};return{add(p,a){for(;h.length>=c;){const r=h.shift();r!==void 0&&delete m[r]}m[p]&&this.delete(p),h.push(p),m[p]=a},clear(){m={},h=[]},get(p){return m[p]},size(){return h.length},delete(p){if(!m[p])return!1;delete m[p];for(let a=0;a<h.length;a++)if(h[a]===p){h.splice(a,1);break}return!0}}}s(d,"makeFifoCache"),l.makeFifoCache=d},738620759:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(688958166),h=d(2174399055);function m(p,a,r){const n=[{type:"client_report"},{timestamp:r||h.dateTimestampInSeconds(),discarded_events:p}];return c.createEnvelope(a?{dsn:a}:{},[n])}s(m,"createClientReportEnvelope"),l.createClientReportEnvelope=m},9687986872:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(c){const h={};let m=0;for(;m<c.length;){const p=c.indexOf("=",m);if(p===-1)break;let a=c.indexOf(";",m);if(a===-1)a=c.length;else if(a<p){m=c.lastIndexOf(";",p-1)+1;continue}const r=c.slice(m,p).trim();if(h[r]===void 0){let n=c.slice(p+1,a).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));try{h[r]=n.indexOf("%")!==-1?decodeURIComponent(n):n}catch{h[r]=n}}m=a+1}return h}s(d,"parseCookie"),l.parseCookie=d},1795624184:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},8314282351:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1795624184),h=d(3610150206),m=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function p(i){return i==="http"||i==="https"}s(p,"isValidProtocol");function a(i,o=!1){const{host:f,path:g,pass:S,port:u,projectId:v,protocol:y,publicKey:_}=i;return`${y}://${_}${o&&S?`:${S}`:""}@${f}${u?`:${u}`:""}/${g&&`${g}/`}${v}`}s(a,"dsnToString");function r(i){const o=m.exec(i);if(!o){h.consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${i}`)});return}const[f,g,S="",u,v="",y]=o.slice(1);let _="",C=y;const T=C.split("/");if(T.length>1&&(_=T.slice(0,-1).join("/"),C=T.pop()),C){const A=C.match(/^\d+/);A&&(C=A[0])}return n({host:u,pass:S,path:_,projectId:C,port:v,protocol:f,publicKey:g})}s(r,"dsnFromString");function n(i){return{protocol:i.protocol,publicKey:i.publicKey||"",pass:i.pass||"",host:i.host,port:i.port||"",path:i.path||"",projectId:i.projectId}}s(n,"dsnFromComponents");function e(i){if(!c.DEBUG_BUILD)return!0;const{port:o,projectId:f,protocol:g}=i;return["protocol","publicKey","host","projectId"].find(v=>i[v]?!1:(h.logger.error(`Invalid Sentry Dsn: ${v} missing`),!0))?!1:f.match(/^\d+$/)?p(g)?o&&isNaN(parseInt(o,10))?(h.logger.error(`Invalid Sentry Dsn: Invalid port ${o}`),!1):!0:(h.logger.error(`Invalid Sentry Dsn: Invalid protocol ${g}`),!1):(h.logger.error(`Invalid Sentry Dsn: Invalid projectId ${f}`),!1)}s(e,"validateDsn");function t(i){const o=typeof i=="string"?r(i):n(i);if(!(!o||!e(o)))return o}s(t,"makeDsn"),l.dsnFromString=r,l.dsnToString=a,l.makeDsn=t},1390308333:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}s(d,"isBrowserBundle");function c(){return"npm"}s(c,"getSDKSource"),l.getSDKSource=c,l.isBrowserBundle=d},688958166:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8314282351),h=d(6371465633),m=d(5247061117),p=d(1108286465);function a(T,A=[]){return[T,A]}s(a,"createEnvelope");function r(T,A){const[O,D]=T;return[O,[...D,A]]}s(r,"addItemToEnvelope");function n(T,A){const O=T[1];for(const D of O){const M=D[0].type;if(A(D,M))return!0}return!1}s(n,"forEachEnvelopeItem");function e(T,A){return n(T,(O,D)=>A.includes(D))}s(e,"envelopeContainsItemType");function t(T){return p.GLOBAL_OBJ.__SENTRY__&&p.GLOBAL_OBJ.__SENTRY__.encodePolyfill?p.GLOBAL_OBJ.__SENTRY__.encodePolyfill(T):new TextEncoder().encode(T)}s(t,"encodeUTF8");function i(T){return p.GLOBAL_OBJ.__SENTRY__&&p.GLOBAL_OBJ.__SENTRY__.decodePolyfill?p.GLOBAL_OBJ.__SENTRY__.decodePolyfill(T):new TextDecoder().decode(T)}s(i,"decodeUTF8");function o(T){const[A,O]=T;let D=JSON.stringify(A);function M(R){typeof D=="string"?D=typeof R=="string"?D+R:[t(D),R]:D.push(typeof R=="string"?t(R):R)}s(M,"append");for(const R of O){const[F,V]=R;if(M(`
${JSON.stringify(F)}
`),typeof V=="string"||V instanceof Uint8Array)M(V);else{let $;try{$=JSON.stringify(V)}catch{$=JSON.stringify(h.normalize(V))}M($)}}return typeof D=="string"?D:f(D)}s(o,"serializeEnvelope");function f(T){const A=T.reduce((M,R)=>M+R.length,0),O=new Uint8Array(A);let D=0;for(const M of T)O.set(M,D),D+=M.length;return O}s(f,"concatBuffers");function g(T){let A=typeof T=="string"?t(T):T;function O(F){const V=A.subarray(0,F);return A=A.subarray(F+1),V}s(O,"readBinary");function D(){let F=A.indexOf(10);return F<0&&(F=A.length),JSON.parse(i(O(F)))}s(D,"readJson");const M=D(),R=[];for(;A.length;){const F=D(),V=typeof F.length=="number"?F.length:void 0;R.push([F,V?O(V):D()])}return[M,R]}s(g,"parseEnvelope");function S(T){return[{type:"span"},T]}s(S,"createSpanEnvelopeItem");function u(T){const A=typeof T.data=="string"?t(T.data):T.data;return[m.dropUndefinedKeys({type:"attachment",length:A.length,filename:T.filename,content_type:T.contentType,attachment_type:T.attachmentType}),A]}s(u,"createAttachmentEnvelopeItem");const v={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function y(T){return v[T]}s(y,"envelopeItemTypeToDataCategory");function _(T){if(!T||!T.sdk)return;const{name:A,version:O}=T.sdk;return{name:A,version:O}}s(_,"getSdkMetadataForEnvelopeHeader");function C(T,A,O,D){const M=T.sdkProcessingMetadata&&T.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:T.event_id,sent_at:new Date().toISOString(),...A&&{sdk:A},...!!O&&D&&{dsn:c.dsnToString(D)},...M&&{trace:m.dropUndefinedKeys({...M})}}}s(C,"createEventEnvelopeHeaders"),l.addItemToEnvelope=r,l.createAttachmentEnvelopeItem=u,l.createEnvelope=a,l.createEventEnvelopeHeaders=C,l.createSpanEnvelopeItem=S,l.envelopeContainsItemType=e,l.envelopeItemTypeToDataCategory=y,l.forEachEnvelopeItem=n,l.getSdkMetadataForEnvelopeHeader=_,l.parseEnvelope=g,l.serializeEnvelope=o},4759164024:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class d extends Error{constructor(h,m="warn"){super(h),this.message=h,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=m}}s(d,"SentryError"),l.SentryError=d},1705974933:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5330804994),h=d(4360077466),m=d(6371465633),p=d(5247061117);function a(g,S){return g(S.stack||"",1)}s(a,"parseStackFrames");function r(g,S){const u={type:S.name||S.constructor.name,value:S.message},v=a(g,S);return v.length&&(u.stacktrace={frames:v}),u}s(r,"exceptionFromError");function n(g){for(const S in g)if(Object.prototype.hasOwnProperty.call(g,S)){const u=g[S];if(u instanceof Error)return u}}s(n,"getErrorPropertyFromObject");function e(g){if("name"in g&&typeof g.name=="string"){let v=`'${g.name}' captured as exception`;return"message"in g&&typeof g.message=="string"&&(v+=` with message '${g.message}'`),v}else if("message"in g&&typeof g.message=="string")return g.message;const S=p.extractExceptionKeysForMessage(g);if(c.isErrorEvent(g))return`Event \`ErrorEvent\` captured as exception with message \`${g.message}\``;const u=t(g);return`${u&&u!=="Object"?`'${u}'`:"Object"} captured as exception with keys: ${S}`}s(e,"getMessageForObject");function t(g){try{const S=Object.getPrototypeOf(g);return S?S.constructor.name:void 0}catch{}}s(t,"getObjectClassName");function i(g,S,u,v){if(c.isError(u))return[u,void 0];if(S.synthetic=!0,c.isPlainObject(u)){const _=g&&g.getOptions().normalizeDepth,C={__serialized__:m.normalizeToSize(u,_)},T=n(u);if(T)return[T,C];const A=e(u),O=v&&v.syntheticException||new Error(A);return O.message=A,[O,C]}const y=v&&v.syntheticException||new Error(u);return y.message=`${u}`,[y,void 0]}s(i,"getException");function o(g,S,u,v){const _=v&&v.data&&v.data.mechanism||{handled:!0,type:"generic"},[C,T]=i(g,_,u,v),A={exception:{values:[r(S,C)]}};return T&&(A.extra=T),h.addExceptionTypeValue(A,void 0,void 0),h.addExceptionMechanism(A,_),{...A,event_id:v&&v.event_id}}s(o,"eventFromUnknownInput");function f(g,S,u="info",v,y){const _={event_id:v&&v.event_id,level:u};if(y&&v&&v.syntheticException){const C=a(g,v.syntheticException);C.length&&(_.exception={values:[{value:S,stacktrace:{frames:C}}]})}if(c.isParameterizedString(S)){const{__sentry_template_string__:C,__sentry_template_values__:T}=S;return _.logentry={message:C,params:T},_}return _.message=S,_}s(f,"eventFromMessage"),l.eventFromMessage=f,l.eventFromUnknownInput=o,l.exceptionFromError=r,l.parseStackFrames=a},7563271614:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(4916261515),h=d(9550996546),m=d(8314282351),p=d(4759164024),a=d(1108286465),r=d(3619233697),n=d(3178410512),e=d(5878142463),t=d(5817852989),i=d(7839211009),o=d(5330804994),f=d(4304701770),g=d(3610150206),S=d(47787884),u=d(4360077466),v=d(1552363198),y=d(6371465633),_=d(5247061117),C=d(4764604189),T=d(3193811597),A=d(4846555271),O=d(5043703765),D=d(9955566551),M=d(6005876151),R=d(9996838991),F=d(8265793926),V=d(2435760602),$=d(2174399055),X=d(6123212092),Y=d(1390308333),ne=d(688958166),ie=d(738620759),pe=d(277240735),Ee=d(8666696284),Be=d(7216756807),it=d(4308130348),Ce=d(1705974933),Me=d(999571021),je=d(6852308275),We=d(7961093924),Ze=d(6639909989),ft=d(8823822214),vt=d(9137969200),De=d(3683597617),Pe=d(2677927218),Ke=d(6250807085),Ye=d(7384544743);l.applyAggregateErrorsToEvent=c.applyAggregateErrorsToEvent,l.getComponentName=h.getComponentName,l.getDomElement=h.getDomElement,l.getLocationHref=h.getLocationHref,l.htmlTreeAsString=h.htmlTreeAsString,l.dsnFromString=m.dsnFromString,l.dsnToString=m.dsnToString,l.makeDsn=m.makeDsn,l.SentryError=p.SentryError,l.GLOBAL_OBJ=a.GLOBAL_OBJ,l.getGlobalSingleton=a.getGlobalSingleton,l.addConsoleInstrumentationHandler=r.addConsoleInstrumentationHandler,l.addFetchInstrumentationHandler=n.addFetchInstrumentationHandler,l.addGlobalErrorInstrumentationHandler=e.addGlobalErrorInstrumentationHandler,l.addGlobalUnhandledRejectionInstrumentationHandler=t.addGlobalUnhandledRejectionInstrumentationHandler,l.addHandler=i.addHandler,l.maybeInstrument=i.maybeInstrument,l.resetInstrumentationHandlers=i.resetInstrumentationHandlers,l.triggerHandlers=i.triggerHandlers,l.isDOMError=o.isDOMError,l.isDOMException=o.isDOMException,l.isElement=o.isElement,l.isError=o.isError,l.isErrorEvent=o.isErrorEvent,l.isEvent=o.isEvent,l.isInstanceOf=o.isInstanceOf,l.isParameterizedString=o.isParameterizedString,l.isPlainObject=o.isPlainObject,l.isPrimitive=o.isPrimitive,l.isRegExp=o.isRegExp,l.isString=o.isString,l.isSyntheticEvent=o.isSyntheticEvent,l.isThenable=o.isThenable,l.isVueViewModel=o.isVueViewModel,l.isBrowser=f.isBrowser,l.CONSOLE_LEVELS=g.CONSOLE_LEVELS,l.consoleSandbox=g.consoleSandbox,l.logger=g.logger,l.originalConsoleMethods=g.originalConsoleMethods,l.memoBuilder=S.memoBuilder,l.addContextToFrame=u.addContextToFrame,l.addExceptionMechanism=u.addExceptionMechanism,l.addExceptionTypeValue=u.addExceptionTypeValue,l.arrayify=u.arrayify,l.checkOrSetAlreadyCaught=u.checkOrSetAlreadyCaught,l.getEventDescription=u.getEventDescription,l.parseSemver=u.parseSemver,l.uuid4=u.uuid4,l.dynamicRequire=v.dynamicRequire,l.isNodeEnv=v.isNodeEnv,l.loadModule=v.loadModule,l.normalize=y.normalize,l.normalizeToSize=y.normalizeToSize,l.normalizeUrlToBase=y.normalizeUrlToBase,l.addNonEnumerableProperty=_.addNonEnumerableProperty,l.convertToPlainObject=_.convertToPlainObject,l.dropUndefinedKeys=_.dropUndefinedKeys,l.extractExceptionKeysForMessage=_.extractExceptionKeysForMessage,l.fill=_.fill,l.getOriginalFunction=_.getOriginalFunction,l.markFunctionWrapped=_.markFunctionWrapped,l.objectify=_.objectify,l.urlEncode=_.urlEncode,l.basename=C.basename,l.dirname=C.dirname,l.isAbsolute=C.isAbsolute,l.join=C.join,l.normalizePath=C.normalizePath,l.relative=C.relative,l.resolve=C.resolve,l.makePromiseBuffer=T.makePromiseBuffer,l.DEFAULT_USER_INCLUDES=A.DEFAULT_USER_INCLUDES,l.addRequestDataToEvent=A.addRequestDataToEvent,l.extractPathForTransaction=A.extractPathForTransaction,l.extractRequestData=A.extractRequestData,l.winterCGHeadersToDict=A.winterCGHeadersToDict,l.winterCGRequestToRequestData=A.winterCGRequestToRequestData,l.severityLevelFromString=O.severityLevelFromString,l.validSeverityLevels=O.validSeverityLevels,l.UNKNOWN_FUNCTION=D.UNKNOWN_FUNCTION,l.createStackParser=D.createStackParser,l.getFunctionName=D.getFunctionName,l.stackParserFromStackParserOptions=D.stackParserFromStackParserOptions,l.stripSentryFramesAndReverse=D.stripSentryFramesAndReverse,l.filenameIsInApp=M.filenameIsInApp,l.node=M.node,l.nodeStackLineParser=M.nodeStackLineParser,l.isMatchingPattern=R.isMatchingPattern,l.safeJoin=R.safeJoin,l.snipLine=R.snipLine,l.stringMatchesSomePattern=R.stringMatchesSomePattern,l.truncate=R.truncate,l.isNativeFetch=F.isNativeFetch,l.supportsDOMError=F.supportsDOMError,l.supportsDOMException=F.supportsDOMException,l.supportsErrorEvent=F.supportsErrorEvent,l.supportsFetch=F.supportsFetch,l.supportsNativeFetch=F.supportsNativeFetch,l.supportsReferrerPolicy=F.supportsReferrerPolicy,l.supportsReportingObserver=F.supportsReportingObserver,l.SyncPromise=V.SyncPromise,l.rejectedSyncPromise=V.rejectedSyncPromise,l.resolvedSyncPromise=V.resolvedSyncPromise,Object.defineProperty(l,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>$._browserPerformanceTimeOriginMode}),l.browserPerformanceTimeOrigin=$.browserPerformanceTimeOrigin,l.dateTimestampInSeconds=$.dateTimestampInSeconds,l.timestampInSeconds=$.timestampInSeconds,l.TRACEPARENT_REGEXP=X.TRACEPARENT_REGEXP,l.extractTraceparentData=X.extractTraceparentData,l.generateSentryTraceHeader=X.generateSentryTraceHeader,l.propagationContextFromHeaders=X.propagationContextFromHeaders,l.getSDKSource=Y.getSDKSource,l.isBrowserBundle=Y.isBrowserBundle,l.addItemToEnvelope=ne.addItemToEnvelope,l.createAttachmentEnvelopeItem=ne.createAttachmentEnvelopeItem,l.createEnvelope=ne.createEnvelope,l.createEventEnvelopeHeaders=ne.createEventEnvelopeHeaders,l.createSpanEnvelopeItem=ne.createSpanEnvelopeItem,l.envelopeContainsItemType=ne.envelopeContainsItemType,l.envelopeItemTypeToDataCategory=ne.envelopeItemTypeToDataCategory,l.forEachEnvelopeItem=ne.forEachEnvelopeItem,l.getSdkMetadataForEnvelopeHeader=ne.getSdkMetadataForEnvelopeHeader,l.parseEnvelope=ne.parseEnvelope,l.serializeEnvelope=ne.serializeEnvelope,l.createClientReportEnvelope=ie.createClientReportEnvelope,l.DEFAULT_RETRY_AFTER=pe.DEFAULT_RETRY_AFTER,l.disabledUntil=pe.disabledUntil,l.isRateLimited=pe.isRateLimited,l.parseRetryAfterHeader=pe.parseRetryAfterHeader,l.updateRateLimits=pe.updateRateLimits,l.BAGGAGE_HEADER_NAME=Ee.BAGGAGE_HEADER_NAME,l.MAX_BAGGAGE_STRING_LENGTH=Ee.MAX_BAGGAGE_STRING_LENGTH,l.SENTRY_BAGGAGE_KEY_PREFIX=Ee.SENTRY_BAGGAGE_KEY_PREFIX,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=Ee.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,l.baggageHeaderToDynamicSamplingContext=Ee.baggageHeaderToDynamicSamplingContext,l.dynamicSamplingContextToSentryBaggageHeader=Ee.dynamicSamplingContextToSentryBaggageHeader,l.parseBaggageHeader=Ee.parseBaggageHeader,l.getNumberOfUrlSegments=Be.getNumberOfUrlSegments,l.getSanitizedUrlString=Be.getSanitizedUrlString,l.parseUrl=Be.parseUrl,l.stripUrlQueryAndFragment=Be.stripUrlQueryAndFragment,l.makeFifoCache=it.makeFifoCache,l.eventFromMessage=Ce.eventFromMessage,l.eventFromUnknownInput=Ce.eventFromUnknownInput,l.exceptionFromError=Ce.exceptionFromError,l.parseStackFrames=Ce.parseStackFrames,l.callFrameToStackFrame=Me.callFrameToStackFrame,l.watchdogTimer=Me.watchdogTimer,l.LRUMap=je.LRUMap,l._asyncNullishCoalesce=We._asyncNullishCoalesce,l._asyncOptionalChain=Ze._asyncOptionalChain,l._asyncOptionalChainDelete=ft._asyncOptionalChainDelete,l._nullishCoalesce=vt._nullishCoalesce,l._optionalChain=De._optionalChain,l._optionalChainDelete=Pe._optionalChainDelete,l.escapeStringForRegex=Ke.escapeStringForRegex,l.supportsHistory=Ye.supportsHistory},3619233697:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(3610150206),h=d(5247061117),m=d(1108286465),p=d(7839211009);function a(n){const e="console";p.addHandler(e,n),p.maybeInstrument(e,r)}s(a,"addConsoleInstrumentationHandler");function r(){"console"in m.GLOBAL_OBJ&&c.CONSOLE_LEVELS.forEach(function(n){n in m.GLOBAL_OBJ.console&&h.fill(m.GLOBAL_OBJ.console,n,function(e){return c.originalConsoleMethods[n]=e,function(...t){const i={args:t,level:n};p.triggerHandlers("console",i);const o=c.originalConsoleMethods[n];o&&o.apply(m.GLOBAL_OBJ.console,t)}})})}s(r,"instrumentConsole"),l.addConsoleInstrumentationHandler=a},3178410512:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5247061117),h=d(8265793926),m=d(2174399055),p=d(1108286465),a=d(7839211009);function r(o){const f="fetch";a.addHandler(f,o),a.maybeInstrument(f,n)}s(r,"addFetchInstrumentationHandler");function n(){h.supportsNativeFetch()&&c.fill(p.GLOBAL_OBJ,"fetch",function(o){return function(...f){const{method:g,url:S}=i(f),u={args:f,fetchData:{method:g,url:S},startTimestamp:m.timestampInSeconds()*1e3};return a.triggerHandlers("fetch",{...u}),o.apply(p.GLOBAL_OBJ,f).then(v=>{const y={...u,endTimestamp:m.timestampInSeconds()*1e3,response:v};return a.triggerHandlers("fetch",y),v},v=>{const y={...u,endTimestamp:m.timestampInSeconds()*1e3,error:v};throw a.triggerHandlers("fetch",y),v})}})}s(n,"instrumentFetch");function e(o,f){return!!o&&typeof o=="object"&&!!o[f]}s(e,"hasProp");function t(o){return typeof o=="string"?o:o?e(o,"url")?o.url:o.toString?o.toString():"":""}s(t,"getUrlFromResource");function i(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[g,S]=o;return{url:t(g),method:e(S,"method")?String(S.method).toUpperCase():"GET"}}const f=o[0];return{url:t(f),method:e(f,"method")?String(f.method).toUpperCase():"GET"}}s(i,"parseFetchArgs"),l.addFetchInstrumentationHandler=r,l.parseFetchArgs=i},5878142463:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1108286465),h=d(7839211009);let m=null;function p(r){const n="error";h.addHandler(n,r),h.maybeInstrument(n,a)}s(p,"addGlobalErrorInstrumentationHandler");function a(){m=c.GLOBAL_OBJ.onerror,c.GLOBAL_OBJ.onerror=function(r,n,e,t,i){const o={column:t,error:i,line:e,msg:r,url:n};return h.triggerHandlers("error",o),m&&!m.__SENTRY_LOADER__?m.apply(this,arguments):!1},c.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}s(a,"instrumentError"),l.addGlobalErrorInstrumentationHandler=p},5817852989:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1108286465),h=d(7839211009);let m=null;function p(r){const n="unhandledrejection";h.addHandler(n,r),h.maybeInstrument(n,a)}s(p,"addGlobalUnhandledRejectionInstrumentationHandler");function a(){m=c.GLOBAL_OBJ.onunhandledrejection,c.GLOBAL_OBJ.onunhandledrejection=function(r){const n=r;return h.triggerHandlers("unhandledrejection",n),m&&!m.__SENTRY_LOADER__?m.apply(this,arguments):!0},c.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}s(a,"instrumentUnhandledRejection"),l.addGlobalUnhandledRejectionInstrumentationHandler=p},7839211009:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1795624184),h=d(3610150206),m=d(9955566551),p={},a={};function r(i,o){p[i]=p[i]||[],p[i].push(o)}s(r,"addHandler");function n(){Object.keys(p).forEach(i=>{p[i]=void 0})}s(n,"resetInstrumentationHandlers");function e(i,o){a[i]||(o(),a[i]=!0)}s(e,"maybeInstrument");function t(i,o){const f=i&&p[i];if(f)for(const g of f)try{g(o)}catch(S){c.DEBUG_BUILD&&h.logger.error(`Error while triggering instrumentation handler.
Type: ${i}
Name: ${m.getFunctionName(g)}
Error:`,S)}}s(t,"triggerHandlers"),l.addHandler=r,l.maybeInstrument=e,l.resetInstrumentationHandlers=n,l.triggerHandlers=t},5330804994:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=Object.prototype.toString;function c(y){switch(d.call(y)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return u(y,Error)}}s(c,"isError");function h(y,_){return d.call(y)===`[object ${_}]`}s(h,"isBuiltin");function m(y){return h(y,"ErrorEvent")}s(m,"isErrorEvent");function p(y){return h(y,"DOMError")}s(p,"isDOMError");function a(y){return h(y,"DOMException")}s(a,"isDOMException");function r(y){return h(y,"String")}s(r,"isString");function n(y){return typeof y=="object"&&y!==null&&"__sentry_template_string__"in y&&"__sentry_template_values__"in y}s(n,"isParameterizedString");function e(y){return y===null||n(y)||typeof y!="object"&&typeof y!="function"}s(e,"isPrimitive");function t(y){return h(y,"Object")}s(t,"isPlainObject");function i(y){return typeof Event<"u"&&u(y,Event)}s(i,"isEvent");function o(y){return typeof Element<"u"&&u(y,Element)}s(o,"isElement");function f(y){return h(y,"RegExp")}s(f,"isRegExp");function g(y){return Boolean(y&&y.then&&typeof y.then=="function")}s(g,"isThenable");function S(y){return t(y)&&"nativeEvent"in y&&"preventDefault"in y&&"stopPropagation"in y}s(S,"isSyntheticEvent");function u(y,_){try{return y instanceof _}catch{return!1}}s(u,"isInstanceOf");function v(y){return!!(typeof y=="object"&&y!==null&&(y.__isVue||y._isVue))}s(v,"isVueViewModel"),l.isDOMError=p,l.isDOMException=a,l.isElement=o,l.isError=c,l.isErrorEvent=m,l.isEvent=i,l.isInstanceOf=u,l.isParameterizedString=n,l.isPlainObject=t,l.isPrimitive=e,l.isRegExp=f,l.isString=r,l.isSyntheticEvent=S,l.isThenable=g,l.isVueViewModel=v},4304701770:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1552363198),h=d(1108286465);function m(){return typeof window<"u"&&(!c.isNodeEnv()||p())}s(m,"isBrowser");function p(){return h.GLOBAL_OBJ.process!==void 0&&h.GLOBAL_OBJ.process.type==="renderer"}s(p,"isElectronNodeRenderer"),l.isBrowser=m},3610150206:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1795624184),h=d(1108286465),m="Sentry Logger ",p=["debug","info","warn","error","log","assert","trace"],a={};function r(t){if(!("console"in h.GLOBAL_OBJ))return t();const i=h.GLOBAL_OBJ.console,o={},f=Object.keys(a);f.forEach(g=>{const S=a[g];o[g]=i[g],i[g]=S});try{return t()}finally{f.forEach(g=>{i[g]=o[g]})}}s(r,"consoleSandbox");function n(){let t=!1;const i={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return c.DEBUG_BUILD?p.forEach(o=>{i[o]=(...f)=>{t&&r(()=>{h.GLOBAL_OBJ.console[o](`${m}[${o}]:`,...f)})}}):p.forEach(o=>{i[o]=()=>{}}),i}s(n,"makeLogger");const e=n();l.CONSOLE_LEVELS=p,l.consoleSandbox=r,l.logger=e,l.originalConsoleMethods=a},6852308275:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class d{constructor(h){this._maxSize=h,this._cache=new Map}get size(){return this._cache.size}get(h){const m=this._cache.get(h);if(m!==void 0)return this._cache.delete(h),this._cache.set(h,m),m}set(h,m){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(h,m)}remove(h){const m=this._cache.get(h);return m&&this._cache.delete(h),m}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const h=[];return this._cache.forEach(m=>h.push(m)),h}}s(d,"LRUMap"),l.LRUMap=d},47787884:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(){const c=typeof WeakSet=="function",h=c?new WeakSet:[];function m(a){if(c)return h.has(a)?!0:(h.add(a),!1);for(let r=0;r<h.length;r++)if(h[r]===a)return!0;return h.push(a),!1}s(m,"memoize");function p(a){if(c)h.delete(a);else for(let r=0;r<h.length;r++)if(h[r]===a){h.splice(r,1);break}}return s(p,"unmemoize"),[m,p]}s(d,"memoBuilder"),l.memoBuilder=d},4360077466:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5247061117),h=d(9996838991),m=d(1108286465);function p(){const S=m.GLOBAL_OBJ,u=S.crypto||S.msCrypto;let v=s(()=>Math.random()*16,"getRandomByte");try{if(u&&u.randomUUID)return u.randomUUID().replace(/-/g,"");u&&u.getRandomValues&&(v=s(()=>{const y=new Uint8Array(1);return u.getRandomValues(y),y[0]},"getRandomByte"))}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,y=>(y^(v()&15)>>y/4).toString(16))}s(p,"uuid4");function a(S){return S.exception&&S.exception.values?S.exception.values[0]:void 0}s(a,"getFirstException");function r(S){const{message:u,event_id:v}=S;if(u)return u;const y=a(S);return y?y.type&&y.value?`${y.type}: ${y.value}`:y.type||y.value||v||"<unknown>":v||"<unknown>"}s(r,"getEventDescription");function n(S,u,v){const y=S.exception=S.exception||{},_=y.values=y.values||[],C=_[0]=_[0]||{};C.value||(C.value=u||""),C.type||(C.type=v||"Error")}s(n,"addExceptionTypeValue");function e(S,u){const v=a(S);if(!v)return;const y={type:"generic",handled:!0},_=v.mechanism;if(v.mechanism={...y,..._,...u},u&&"data"in u){const C={..._&&_.data,...u.data};v.mechanism.data=C}}s(e,"addExceptionMechanism");const t=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function i(S){const u=S.match(t)||[],v=parseInt(u[1],10),y=parseInt(u[2],10),_=parseInt(u[3],10);return{buildmetadata:u[5],major:isNaN(v)?void 0:v,minor:isNaN(y)?void 0:y,patch:isNaN(_)?void 0:_,prerelease:u[4]}}s(i,"parseSemver");function o(S,u,v=5){if(u.lineno===void 0)return;const y=S.length,_=Math.max(Math.min(y-1,u.lineno-1),0);u.pre_context=S.slice(Math.max(0,_-v),_).map(C=>h.snipLine(C,0)),u.context_line=h.snipLine(S[Math.min(y-1,_)],u.colno||0),u.post_context=S.slice(Math.min(_+1,y),_+1+v).map(C=>h.snipLine(C,0))}s(o,"addContextToFrame");function f(S){if(S&&S.__sentry_captured__)return!0;try{c.addNonEnumerableProperty(S,"__sentry_captured__",!0)}catch{}return!1}s(f,"checkOrSetAlreadyCaught");function g(S){return Array.isArray(S)?S:[S]}s(g,"arrayify"),l.addContextToFrame=o,l.addExceptionMechanism=e,l.addExceptionTypeValue=n,l.arrayify=g,l.checkOrSetAlreadyCaught=f,l.getEventDescription=r,l.parseSemver=i,l.uuid4=p},6005876151:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9955566551);function h(a,r=!1){return!(r||a&&!a.startsWith("/")&&!a.match(/^[A-Z]:/)&&!a.startsWith(".")&&!a.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&a!==void 0&&!a.includes("node_modules/")}s(h,"filenameIsInApp");function m(a){const r=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return e=>{const t=e.match(n);if(t){let i,o,f,g,S;if(t[1]){f=t[1];let y=f.lastIndexOf(".");if(f[y-1]==="."&&y--,y>0){i=f.slice(0,y),o=f.slice(y+1);const _=i.indexOf(".Module");_>0&&(f=f.slice(_+1),i=i.slice(0,_))}g=void 0}o&&(g=i,S=o),o==="<anonymous>"&&(S=void 0,f=void 0),f===void 0&&(S=S||c.UNKNOWN_FUNCTION,f=g?`${g}.${S}`:S);let u=t[2]&&t[2].startsWith("file://")?t[2].slice(7):t[2];const v=t[5]==="native";return u&&u.match(/\/[A-Z]:/)&&(u=u.slice(1)),!u&&t[5]&&!v&&(u=t[5]),{filename:u,module:a?a(u):void 0,function:f,lineno:parseInt(t[3],10)||void 0,colno:parseInt(t[4],10)||void 0,in_app:h(u,v)}}if(e.match(r))return{filename:e}}}s(m,"node");function p(a){return[90,m(a)]}s(p,"nodeStackLineParser"),l.filenameIsInApp=h,l.node=m,l.nodeStackLineParser=p},1552363198:(x,l,d)=>{x=d.nmd(x),Object.defineProperty(l,"__esModule",{value:!0});const c=d(1390308333);function h(){return!c.isBrowserBundle()&&Object.prototype.toString.call(0)==="[object process]"}s(h,"isNodeEnv");function m(a,r){return a.require(r)}s(m,"dynamicRequire");function p(a){let r;try{r=m(x,a)}catch{}try{const{cwd:n}=m(x,"process");r=m(x,`${n()}/node_modules/${a}`)}catch{}return r}s(p,"loadModule"),l.dynamicRequire=m,l.isNodeEnv=h,l.loadModule=p},6371465633:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5330804994),h=d(47787884),m=d(5247061117),p=d(9955566551);function a(g,S=100,u=1/0){try{return n("",g,S,u)}catch(v){return{ERROR:`**non-serializable** (${v})`}}}s(a,"normalize");function r(g,S=3,u=100*1024){const v=a(g,S);return o(v)>u?r(g,S-1,u):v}s(r,"normalizeToSize");function n(g,S,u=1/0,v=1/0,y=h.memoBuilder()){const[_,C]=y;if(S==null||["number","boolean","string"].includes(typeof S)&&!Number.isNaN(S))return S;const T=e(g,S);if(!T.startsWith("[object "))return T;if(S.__sentry_skip_normalization__)return S;const A=typeof S.__sentry_override_normalization_depth__=="number"?S.__sentry_override_normalization_depth__:u;if(A===0)return T.replace("object ","");if(_(S))return"[Circular ~]";const O=S;if(O&&typeof O.toJSON=="function")try{const F=O.toJSON();return n("",F,A-1,v,y)}catch{}const D=Array.isArray(S)?[]:{};let M=0;const R=m.convertToPlainObject(S);for(const F in R){if(!Object.prototype.hasOwnProperty.call(R,F))continue;if(M>=v){D[F]="[MaxProperties ~]";break}const V=R[F];D[F]=n(F,V,A-1,v,y),M++}return C(S),D}s(n,"visit");function e(g,S){try{if(g==="domain"&&S&&typeof S=="object"&&S._events)return"[Domain]";if(g==="domainEmitter")return"[DomainEmitter]";if(typeof d.g<"u"&&S===d.g)return"[Global]";if(typeof window<"u"&&S===window)return"[Window]";if(typeof document<"u"&&S===document)return"[Document]";if(c.isVueViewModel(S))return"[VueViewModel]";if(c.isSyntheticEvent(S))return"[SyntheticEvent]";if(typeof S=="number"&&S!==S)return"[NaN]";if(typeof S=="function")return`[Function: ${p.getFunctionName(S)}]`;if(typeof S=="symbol")return`[${String(S)}]`;if(typeof S=="bigint")return`[BigInt: ${String(S)}]`;const u=t(S);return/^HTML(\w*)Element$/.test(u)?`[HTMLElement: ${u}]`:`[object ${u}]`}catch(u){return`**non-serializable** (${u})`}}s(e,"stringifyValue");function t(g){const S=Object.getPrototypeOf(g);return S?S.constructor.name:"null prototype"}s(t,"getConstructorName");function i(g){return~-encodeURI(g).split(/%..|./).length}s(i,"utf8Length");function o(g){return i(JSON.stringify(g))}s(o,"jsonSize");function f(g,S){const u=S.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let v=g;try{v=decodeURI(g)}catch{}return v.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${u}/*`,"ig"),"app:///")}s(f,"normalizeUrlToBase"),l.normalize=a,l.normalizeToSize=r,l.normalizeUrlToBase=f},5247061117:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9550996546),h=d(1795624184),m=d(5330804994),p=d(3610150206),a=d(9996838991);function r(C,T,A){if(!(T in C))return;const O=C[T],D=A(O);typeof D=="function"&&e(D,O),C[T]=D}s(r,"fill");function n(C,T,A){try{Object.defineProperty(C,T,{value:A,writable:!0,configurable:!0})}catch{h.DEBUG_BUILD&&p.logger.log(`Failed to add non-enumerable property "${T}" to object`,C)}}s(n,"addNonEnumerableProperty");function e(C,T){try{const A=T.prototype||{};C.prototype=T.prototype=A,n(C,"__sentry_original__",T)}catch{}}s(e,"markFunctionWrapped");function t(C){return C.__sentry_original__}s(t,"getOriginalFunction");function i(C){return Object.keys(C).map(T=>`${encodeURIComponent(T)}=${encodeURIComponent(C[T])}`).join("&")}s(i,"urlEncode");function o(C){if(m.isError(C))return{message:C.message,name:C.name,stack:C.stack,...g(C)};if(m.isEvent(C)){const T={type:C.type,target:f(C.target),currentTarget:f(C.currentTarget),...g(C)};return typeof CustomEvent<"u"&&m.isInstanceOf(C,CustomEvent)&&(T.detail=C.detail),T}else return C}s(o,"convertToPlainObject");function f(C){try{return m.isElement(C)?c.htmlTreeAsString(C):Object.prototype.toString.call(C)}catch{return"<unknown>"}}s(f,"serializeEventTarget");function g(C){if(typeof C=="object"&&C!==null){const T={};for(const A in C)Object.prototype.hasOwnProperty.call(C,A)&&(T[A]=C[A]);return T}else return{}}s(g,"getOwnProperties");function S(C,T=40){const A=Object.keys(o(C));if(A.sort(),!A.length)return"[object has no keys]";if(A[0].length>=T)return a.truncate(A[0],T);for(let O=A.length;O>0;O--){const D=A.slice(0,O).join(", ");if(!(D.length>T))return O===A.length?D:a.truncate(D,T)}return""}s(S,"extractExceptionKeysForMessage");function u(C){return v(C,new Map)}s(u,"dropUndefinedKeys");function v(C,T){if(y(C)){const A=T.get(C);if(A!==void 0)return A;const O={};T.set(C,O);for(const D of Object.keys(C))typeof C[D]<"u"&&(O[D]=v(C[D],T));return O}if(Array.isArray(C)){const A=T.get(C);if(A!==void 0)return A;const O=[];return T.set(C,O),C.forEach(D=>{O.push(v(D,T))}),O}return C}s(v,"_dropUndefinedKeys");function y(C){if(!m.isPlainObject(C))return!1;try{const T=Object.getPrototypeOf(C).constructor.name;return!T||T==="Object"}catch{return!0}}s(y,"isPojo");function _(C){let T;switch(!0){case C==null:T=new String(C);break;case(typeof C=="symbol"||typeof C=="bigint"):T=Object(C);break;case m.isPrimitive(C):T=new C.constructor(C);break;default:T=C;break}return T}s(_,"objectify"),l.addNonEnumerableProperty=n,l.convertToPlainObject=o,l.dropUndefinedKeys=u,l.extractExceptionKeysForMessage=S,l.fill=r,l.getOriginalFunction=t,l.markFunctionWrapped=e,l.objectify=_,l.urlEncode=i},4764604189:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(o,f){let g=0;for(let S=o.length-1;S>=0;S--){const u=o[S];u==="."?o.splice(S,1):u===".."?(o.splice(S,1),g++):g&&(o.splice(S,1),g--)}if(f)for(;g--;g)o.unshift("..");return o}s(d,"normalizeArray");const c=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function h(o){const f=o.length>1024?`<truncated>${o.slice(-1024)}`:o,g=c.exec(f);return g?g.slice(1):[]}s(h,"splitPath");function m(...o){let f="",g=!1;for(let S=o.length-1;S>=-1&&!g;S--){const u=S>=0?o[S]:"/";u&&(f=`${u}/${f}`,g=u.charAt(0)==="/")}return f=d(f.split("/").filter(S=>!!S),!g).join("/"),(g?"/":"")+f||"."}s(m,"resolve");function p(o){let f=0;for(;f<o.length&&o[f]==="";f++);let g=o.length-1;for(;g>=0&&o[g]==="";g--);return f>g?[]:o.slice(f,g-f+1)}s(p,"trim");function a(o,f){o=m(o).slice(1),f=m(f).slice(1);const g=p(o.split("/")),S=p(f.split("/")),u=Math.min(g.length,S.length);let v=u;for(let _=0;_<u;_++)if(g[_]!==S[_]){v=_;break}let y=[];for(let _=v;_<g.length;_++)y.push("..");return y=y.concat(S.slice(v)),y.join("/")}s(a,"relative");function r(o){const f=n(o),g=o.slice(-1)==="/";let S=d(o.split("/").filter(u=>!!u),!f).join("/");return!S&&!f&&(S="."),S&&g&&(S+="/"),(f?"/":"")+S}s(r,"normalizePath");function n(o){return o.charAt(0)==="/"}s(n,"isAbsolute");function e(...o){return r(o.join("/"))}s(e,"join");function t(o){const f=h(o),g=f[0];let S=f[1];return!g&&!S?".":(S&&(S=S.slice(0,S.length-1)),g+S)}s(t,"dirname");function i(o,f){let g=h(o)[2];return f&&g.slice(f.length*-1)===f&&(g=g.slice(0,g.length-f.length)),g}s(i,"basename"),l.basename=i,l.dirname=t,l.isAbsolute=n,l.join=e,l.normalizePath=r,l.relative=a,l.resolve=m},3193811597:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(4759164024),h=d(2435760602);function m(p){const a=[];function r(){return p===void 0||a.length<p}s(r,"isReady");function n(i){return a.splice(a.indexOf(i),1)[0]}s(n,"remove");function e(i){if(!r())return h.rejectedSyncPromise(new c.SentryError("Not adding Promise because buffer limit was reached."));const o=i();return a.indexOf(o)===-1&&a.push(o),o.then(()=>n(o)).then(null,()=>n(o).then(null,()=>{})),o}s(e,"add");function t(i){return new h.SyncPromise((o,f)=>{let g=a.length;if(!g)return o(!0);const S=setTimeout(()=>{i&&i>0&&o(!1)},i);a.forEach(u=>{h.resolvedSyncPromise(u).then(()=>{--g||(clearTimeout(S),o(!0))},f)})})}return s(t,"drain"),{$:a,add:e,drain:t}}s(m,"makePromiseBuffer"),l.makePromiseBuffer=m},277240735:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=60*1e3;function c(a,r=Date.now()){const n=parseInt(`${a}`,10);if(!isNaN(n))return n*1e3;const e=Date.parse(`${a}`);return isNaN(e)?d:e-r}s(c,"parseRetryAfterHeader");function h(a,r){return a[r]||a.all||0}s(h,"disabledUntil");function m(a,r,n=Date.now()){return h(a,r)>n}s(m,"isRateLimited");function p(a,{statusCode:r,headers:n},e=Date.now()){const t={...a},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const f of i.trim().split(",")){const[g,S,,,u]=f.split(":",5),v=parseInt(g,10),y=(isNaN(v)?60:v)*1e3;if(!S)t.all=e+y;else for(const _ of S.split(";"))_==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(t[_]=e+y):t[_]=e+y}else o?t.all=e+c(o,e):r===429&&(t.all=e+60*1e3);return t}s(p,"updateRateLimits"),l.DEFAULT_RETRY_AFTER=d,l.disabledUntil=h,l.isRateLimited=m,l.parseRetryAfterHeader=c,l.updateRateLimits=p},4846555271:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(9687986872),h=d(1795624184),m=d(5330804994),p=d(3610150206),a=d(6371465633),r=d(7216756807),n={ip:!1,request:!0,transaction:!0,user:!0},e=["cookies","data","headers","method","query_string","url"],t=["id","username","email"];function i(_,C={}){const T=_.method&&_.method.toUpperCase();let A="",O="url";C.customRoute||_.route?(A=C.customRoute||`${_.baseUrl||""}${_.route&&_.route.path}`,O="route"):(_.originalUrl||_.url)&&(A=r.stripUrlQueryAndFragment(_.originalUrl||_.url||""));let D="";return C.method&&T&&(D+=T),C.method&&C.path&&(D+=" "),C.path&&A&&(D+=A),[D,O]}s(i,"extractPathForTransaction");function o(_,C){switch(C){case"path":return i(_,{path:!0})[0];case"handler":return _.route&&_.route.stack&&_.route.stack[0]&&_.route.stack[0].name||"<anonymous>";case"methodPath":default:{const T=_._reconstructedRoute?_._reconstructedRoute:void 0;return i(_,{path:!0,method:!0,customRoute:T})[0]}}}s(o,"extractTransaction");function f(_,C){const T={};return(Array.isArray(C)?C:t).forEach(O=>{_&&O in _&&(T[O]=_[O])}),T}s(f,"extractUserData");function g(_,C){const{include:T=e}=C||{},A={},O=_.headers||{},D=_.method,M=O.host||_.hostname||_.host||"<no host>",R=_.protocol==="https"||_.socket&&_.socket.encrypted?"https":"http",F=_.originalUrl||_.url||"",V=F.startsWith(R)?F:`${R}://${M}${F}`;return T.forEach($=>{switch($){case"headers":{A.headers=O,T.includes("cookies")||delete A.headers.cookie;break}case"method":{A.method=D;break}case"url":{A.url=V;break}case"cookies":{A.cookies=_.cookies||O.cookie&&c.parseCookie(O.cookie)||{};break}case"query_string":{A.query_string=u(_);break}case"data":{if(D==="GET"||D==="HEAD")break;_.body!==void 0&&(A.data=m.isString(_.body)?_.body:JSON.stringify(a.normalize(_.body)));break}default:({}).hasOwnProperty.call(_,$)&&(A[$]=_[$])}}),A}s(g,"extractRequestData");function S(_,C,T){const A={...n,...T&&T.include};if(A.request){const O=Array.isArray(A.request)?g(C,{include:A.request}):g(C);_.request={..._.request,...O}}if(A.user){const O=C.user&&m.isPlainObject(C.user)?f(C.user,A.user):{};Object.keys(O).length&&(_.user={..._.user,...O})}if(A.ip){const O=C.ip||C.socket&&C.socket.remoteAddress;O&&(_.user={..._.user,ip_address:O})}return A.transaction&&!_.transaction&&_.type==="transaction"&&(_.transaction=o(C,A.transaction)),_}s(S,"addRequestDataToEvent");function u(_){let C=_.originalUrl||_.url||"";if(C){C.startsWith("/")&&(C=`http://dogs.are.great${C}`);try{const T=_.query||new URL(C).search.slice(1);return T.length?T:void 0}catch{return}}}s(u,"extractQueryParams");function v(_){const C={};try{_.forEach((T,A)=>{typeof T=="string"&&(C[A]=T)})}catch{h.DEBUG_BUILD&&p.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return C}s(v,"winterCGHeadersToDict");function y(_){const C=v(_.headers);return{method:_.method,url:_.url,headers:C}}s(y,"winterCGRequestToRequestData"),l.DEFAULT_USER_INCLUDES=t,l.addRequestDataToEvent=S,l.extractPathForTransaction=i,l.extractRequestData=g,l.winterCGHeadersToDict=v,l.winterCGRequestToRequestData=y},5043703765:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=["fatal","error","warning","log","info","debug"];function c(h){return h==="warn"?"warning":d.includes(h)?h:"log"}s(c,"severityLevelFromString"),l.severityLevelFromString=c,l.validSeverityLevels=d},9955566551:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=50,c="?",h=/\(error: (.*)\)/,m=/captureMessage|captureException/;function p(...t){const i=t.sort((o,f)=>o[0]-f[0]).map(o=>o[1]);return(o,f=0,g=0)=>{const S=[],u=o.split(`
`);for(let v=f;v<u.length;v++){const y=u[v];if(y.length>1024)continue;const _=h.test(y)?y.replace(h,"$1"):y;if(!_.match(/\S*Error: /)){for(const C of i){const T=C(_);if(T){S.push(T);break}}if(S.length>=d+g)break}}return r(S.slice(g))}}s(p,"createStackParser");function a(t){return Array.isArray(t)?p(...t):t}s(a,"stackParserFromStackParserOptions");function r(t){if(!t.length)return[];const i=Array.from(t);return/sentryWrapped/.test(i[i.length-1].function||"")&&i.pop(),i.reverse(),m.test(i[i.length-1].function||"")&&(i.pop(),m.test(i[i.length-1].function||"")&&i.pop()),i.slice(0,d).map(o=>({...o,filename:o.filename||i[i.length-1].filename,function:o.function||c}))}s(r,"stripSentryFramesAndReverse");const n="<anonymous>";function e(t){try{return!t||typeof t!="function"?n:t.name||n}catch{return n}}s(e,"getFunctionName"),l.UNKNOWN_FUNCTION=c,l.createStackParser=p,l.getFunctionName=e,l.stackParserFromStackParserOptions=a,l.stripSentryFramesAndReverse=r},9996838991:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5330804994);function h(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.slice(0,e)}...`}s(h,"truncate");function m(n,e){let t=n;const i=t.length;if(i<=150)return t;e>i&&(e=i);let o=Math.max(e-60,0);o<5&&(o=0);let f=Math.min(o+140,i);return f>i-5&&(f=i),f===i&&(o=Math.max(f-140,0)),t=t.slice(o,f),o>0&&(t=`'{snip} ${t}`),f<i&&(t+=" {snip}"),t}s(m,"snipLine");function p(n,e){if(!Array.isArray(n))return"";const t=[];for(let i=0;i<n.length;i++){const o=n[i];try{c.isVueViewModel(o)?t.push("[VueViewModel]"):t.push(String(o))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}s(p,"safeJoin");function a(n,e,t=!1){return c.isString(n)?c.isRegExp(e)?e.test(n):c.isString(e)?t?n===e:n.includes(e):!1:!1}s(a,"isMatchingPattern");function r(n,e=[],t=!1){return e.some(i=>a(n,i,t))}s(r,"stringMatchesSomePattern"),l.isMatchingPattern=a,l.safeJoin=p,l.snipLine=m,l.stringMatchesSomePattern=r,l.truncate=h},8265793926:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1795624184),h=d(3610150206),p=d(1108286465).GLOBAL_OBJ;function a(){try{return new ErrorEvent(""),!0}catch{return!1}}s(a,"supportsErrorEvent");function r(){try{return new DOMError(""),!0}catch{return!1}}s(r,"supportsDOMError");function n(){try{return new DOMException(""),!0}catch{return!1}}s(n,"supportsDOMException");function e(){if(!("fetch"in p))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}s(e,"supportsFetch");function t(g){return g&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(g.toString())}s(t,"isNativeFetch");function i(){if(typeof EdgeRuntime=="string")return!0;if(!e())return!1;if(t(p.fetch))return!0;let g=!1;const S=p.document;if(S&&typeof S.createElement=="function")try{const u=S.createElement("iframe");u.hidden=!0,S.head.appendChild(u),u.contentWindow&&u.contentWindow.fetch&&(g=t(u.contentWindow.fetch)),S.head.removeChild(u)}catch(u){c.DEBUG_BUILD&&h.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",u)}return g}s(i,"supportsNativeFetch");function o(){return"ReportingObserver"in p}s(o,"supportsReportingObserver");function f(){if(!e())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}s(f,"supportsReferrerPolicy"),l.isNativeFetch=t,l.supportsDOMError=r,l.supportsDOMException=n,l.supportsErrorEvent=a,l.supportsFetch=e,l.supportsNativeFetch=i,l.supportsReferrerPolicy=f,l.supportsReportingObserver=o},2435760602:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(5330804994);var h;(function(r){r[r.PENDING=0]="PENDING";const e=1;r[r.RESOLVED=e]="RESOLVED";const t=2;r[r.REJECTED=t]="REJECTED"})(h||(h={}));function m(r){return new a(n=>{n(r)})}s(m,"resolvedSyncPromise");function p(r){return new a((n,e)=>{e(r)})}s(p,"rejectedSyncPromise");class a{constructor(n){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),this._state=h.PENDING,this._handlers=[];try{n(this._resolve,this._reject)}catch(e){this._reject(e)}}then(n,e){return new a((t,i)=>{this._handlers.push([!1,o=>{if(!n)t(o);else try{t(n(o))}catch(f){i(f)}},o=>{if(!e)i(o);else try{t(e(o))}catch(f){i(f)}}]),this._executeHandlers()})}catch(n){return this.then(e=>e,n)}finally(n){return new a((e,t)=>{let i,o;return this.then(f=>{o=!1,i=f,n&&n()},f=>{o=!0,i=f,n&&n()}).then(()=>{if(o){t(i);return}e(i)})})}__init(){this._resolve=n=>{this._setResult(h.RESOLVED,n)}}__init2(){this._reject=n=>{this._setResult(h.REJECTED,n)}}__init3(){this._setResult=(n,e)=>{if(this._state===h.PENDING){if(c.isThenable(e)){e.then(this._resolve,this._reject);return}this._state=n,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===h.PENDING)return;const n=this._handlers.slice();this._handlers=[],n.forEach(e=>{e[0]||(this._state===h.RESOLVED&&e[1](this._value),this._state===h.REJECTED&&e[2](this._value),e[0]=!0)})}}}s(a,"SyncPromise"),l.SyncPromise=a,l.rejectedSyncPromise=p,l.resolvedSyncPromise=m},2174399055:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(1108286465),h=1e3;function m(){return Date.now()/h}s(m,"dateTimestampInSeconds");function p(){const{performance:n}=c.GLOBAL_OBJ;if(!n||!n.now)return m;const e=Date.now()-n.now(),t=n.timeOrigin==null?e:n.timeOrigin;return()=>(t+n.now())/h}s(p,"createUnixTimestampInSecondsFunc");const a=p();l._browserPerformanceTimeOriginMode=void 0;const r=(()=>{const{performance:n}=c.GLOBAL_OBJ;if(!n||!n.now){l._browserPerformanceTimeOriginMode="none";return}const e=3600*1e3,t=n.now(),i=Date.now(),o=n.timeOrigin?Math.abs(n.timeOrigin+t-i):e,f=o<e,g=n.timing&&n.timing.navigationStart,u=typeof g=="number"?Math.abs(g+t-i):e,v=u<e;return f||v?o<=u?(l._browserPerformanceTimeOriginMode="timeOrigin",n.timeOrigin):(l._browserPerformanceTimeOriginMode="navigationStart",g):(l._browserPerformanceTimeOriginMode="dateNow",i)})();l.browserPerformanceTimeOrigin=r,l.dateTimestampInSeconds=m,l.timestampInSeconds=a},6123212092:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=d(8666696284),h=d(4360077466),m=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function p(n){if(!n)return;const e=n.match(m);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}s(p,"extractTraceparentData");function a(n,e){const t=p(n),i=c.baggageHeaderToDynamicSamplingContext(e),{traceId:o,parentSpanId:f,parentSampled:g}=t||{};return t?{traceId:o||h.uuid4(),parentSpanId:f||h.uuid4().substring(16),spanId:h.uuid4().substring(16),sampled:g,dsc:i||{}}:{traceId:o||h.uuid4(),spanId:h.uuid4().substring(16)}}s(a,"propagationContextFromHeaders");function r(n=h.uuid4(),e=h.uuid4().substring(16),t){let i="";return t!==void 0&&(i=t?"-1":"-0"),`${n}-${e}${i}`}s(r,"generateSentryTraceHeader"),l.TRACEPARENT_REGEXP=m,l.extractTraceparentData=p,l.generateSentryTraceHeader=r,l.propagationContextFromHeaders=a},7216756807:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(p){if(!p)return{};const a=p.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!a)return{};const r=a[6]||"",n=a[8]||"";return{host:a[4],path:a[5],protocol:a[2],search:r,hash:n,relative:a[5]+r+n}}s(d,"parseUrl");function c(p){return p.split(/[\?#]/,1)[0]}s(c,"stripUrlQueryAndFragment");function h(p){return p.split(/\\?\//).filter(a=>a.length>0&&a!==",").length}s(h,"getNumberOfUrlSegments");function m(p){const{protocol:a,host:r,path:n}=p,e=r&&r.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${a?`${a}://`:""}${e}${n}`}s(m,"getSanitizedUrlString"),l.getNumberOfUrlSegments=h,l.getSanitizedUrlString=m,l.parseUrl=d,l.stripUrlQueryAndFragment=c},6250807085:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(c){return c.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}s(d,"escapeStringForRegex"),l.escapeStringForRegex=d},7384544743:(x,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const h=d(1108286465).GLOBAL_OBJ;function m(){const p=h.chrome,a=p&&p.app&&p.app.runtime,r="history"in h&&!!h.history.pushState&&!!h.history.replaceState;return!a&&r}s(m,"supportsHistory"),l.supportsHistory=m},1108286465:(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=globalThis;function c(h,m,p){const a=p||d,r=a.__SENTRY__=a.__SENTRY__||{};return r[h]||(r[h]=m())}s(c,"getGlobalSingleton"),l.GLOBAL_OBJ=d,l.getGlobalSingleton=c},2844658640:(x,l,d)=>{var c,h,m;x.exports=function(z){var a={},r={exports:a},n=z.AbortController,e=z.AbortSignal,t=z.addEventListener,i=z.alert,o=z.AnalyserNode,f=z.Animation,g=z.AnimationEffectReadOnly,S=z.AnimationEffectTiming,u=z.AnimationEffectTimingReadOnly,v=z.AnimationEvent,y=z.AnimationPlaybackEvent,_=z.AnimationTimeline,C=z.applicationCache,T=z.ApplicationCache,A=z.ApplicationCacheErrorEvent,O=z.atob,D=z.Attr,M=z.Audio,R=z.AudioBuffer,F=z.AudioBufferSourceNode,V=z.AudioContext,$=z.AudioDestinationNode,X=z.AudioListener,Y=z.AudioNode,ne=z.AudioParam,ie=z.AudioProcessingEvent,pe=z.AudioScheduledSourceNode,Ee=z.AudioWorkletGlobalScope,Be=z.AudioWorkletNode,it=z.AudioWorkletProcessor,Ce=z.BarProp,Me=z.BaseAudioContext,je=z.BatteryManager,We=z.BeforeUnloadEvent,Ze=z.BiquadFilterNode,ft=z.Blob,vt=z.BlobEvent,De=z.blur,Pe=z.BroadcastChannel,Ke=z.btoa,Ye=z.BudgetService,xe=z.ByteLengthQueuingStrategy,Ct=z.Cache,At=z.CacheStorage,Lt=z.cancelAnimationFrame,Ft=z.cancelIdleCallback,Jt=z.CanvasCaptureMediaStreamTrack,It=z.CanvasGradient,ln=z.CanvasPattern,$n=z.CanvasRenderingContext2D,yn=z.ChannelMergerNode,zt=z.ChannelSplitterNode,Yt=z.CharacterData,Mt=z.clearInterval,Vt=z.clearTimeout,$t=z.clientInformation,xt=z.ClipboardEvent,jt=z.close,J=z.closed,Fe=z.CloseEvent,ke=z.Comment,Ge=z.CompositionEvent,gt=z.confirm,at=z.console,ae=z.ConstantSourceNode,Le=z.ConvolverNode,G=z.CountQueuingStrategy,Z=z.createImageBitmap,me=z.Credential,ge=z.CredentialsContainer,rt=z.crypto,Ue=z.Crypto,Xe=z.CryptoKey,fe=z.CSS,Te=z.CSSConditionRule,k=z.CSSFontFaceRule,he=z.CSSGroupingRule,Se=z.CSSImportRule,be=z.CSSKeyframeRule,te=z.CSSKeyframesRule,Nt=z.CSSMatrixComponent,nt=z.CSSMediaRule,mt=z.CSSNamespaceRule,pn=z.CSSPageRule,Pt=z.CSSPerspective,Mi=z.CSSRotate,ai=z.CSSRule,un=z.CSSRuleList,Hn=z.CSSScale,mn=z.CSSSkew,li=z.CSSSkewX,Kn=z.CSSSkewY,lr=z.CSSStyleDeclaration,kt=z.CSSStyleRule,Et=z.CSSStyleSheet,Tn=z.CSSSupportsRule,gn=z.CSSTransformValue,In=z.CSSTranslate,Qn=z.CustomElementRegistry,qn=z.customElements,Vn=z.CustomEvent,Xn=z.DataTransfer,yi=z.DataTransferItem,Si=z.DataTransferItemList,Fn=z.defaultstatus,xi=z.defaultStatus,hi=z.DelayNode,Yi=z.DeviceMotionEvent,L=z.DeviceOrientationEvent,re=z.devicePixelRatio,we=z.dispatchEvent,$e=z.document,yt=z.Document,Xt=z.DocumentFragment,dn=z.DocumentType,Zt=z.DOMError,qt=z.DOMException,on=z.DOMImplementation,wn=z.DOMMatrix,Zn=z.DOMMatrixReadOnly,Jn=z.DOMParser,Ei=z.DOMPoint,$i=z.DOMPointReadOnly,Qi=z.DOMQuad,Sr=z.DOMRect,On=z.DOMRectList,Ri=z.DOMRectReadOnly,ci=z.DOMStringList,ki=z.DOMStringMap,rn=z.DOMTokenList,cr=z.DragEvent,Sn=z.DynamicsCompressorNode,Zi=z.Element,vr=z.ErrorEvent,Rr=z.event,le=z.Event,ve=z.EventSource,Oe=z.EventTarget,qe=z.external,dt=z.fetch,ct=z.File,Bt=z.FileList,en=z.FileReader,nn=z.find,Ut=z.focus,Nn=z.FocusEvent,bt=z.FontFace,Wn=z.FontFaceSetLoadEvent,fn=z.FormData,ii=z.frameElement,Ui=z.frames,pi=z.GainNode,cn=z.Gamepad,En=z.GamepadButton,Un=z.GamepadEvent,Yn=z.getComputedStyle,Vi=z.getSelection,qi=z.HashChangeEvent,Bn=z.Headers,gr=z.history,mi=z.History,Ki=z.HTMLAllCollection,Ur=z.HTMLAnchorElement,Yr=z.HTMLAreaElement,oo=z.HTMLAudioElement,so=z.HTMLBaseElement,Pr=z.HTMLBodyElement,Vr=z.HTMLBRElement,er=z.HTMLButtonElement,Or=z.HTMLCanvasElement,Hr=z.HTMLCollection,Hi=z.HTMLContentElement,yr=z.HTMLDataElement,Xr=z.HTMLDataListElement,Ai=z.HTMLDetailsElement,Eo=z.HTMLDialogElement,Go=z.HTMLDirectoryElement,jo=z.HTMLDivElement,bo=z.HTMLDListElement,Ci=z.HTMLDocument,Ji=z.HTMLElement,Xi=z.HTMLEmbedElement,dr=z.HTMLFieldSetElement,tr=z.HTMLFontElement,ao=z.HTMLFormControlsCollection,Wr=z.HTMLFormElement,Ar=z.HTMLFrameElement,_o=z.HTMLFrameSetElement,os=z.HTMLHeadElement,Gs=z.HTMLHeadingElement,vs=z.HTMLHRElement,ss=z.HTMLHtmlElement,ys=z.HTMLIFrameElement,js=z.HTMLImageElement,Es=z.HTMLInputElement,bs=z.HTMLLabelElement,zs=z.HTMLLegendElement,Qr=z.HTMLLIElement,Br=z.HTMLLinkElement,Ro=z.HTMLMapElement,as=z.HTMLMarqueeElement,Zr=z.HTMLMediaElement,zo=z.HTMLMenuElement,Gr=z.HTMLMetaElement,lo=z.HTMLMeterElement,co=z.HTMLModElement,Co=z.HTMLObjectElement,wi=z.HTMLOListElement,$o=z.HTMLOptGroupElement,uo=z.HTMLOptionElement,Wi=z.HTMLOptionsCollection,qr=z.HTMLOutputElement,ls=z.HTMLParagraphElement,Po=z.HTMLParamElement,ur=z.HTMLPictureElement,ko=z.HTMLPreElement,Jl=z.HTMLProgressElement,Yl=z.HTMLQuoteElement,Fc=z.HTMLScriptElement,Oa=z.HTMLSelectElement,$s=z.HTMLShadowElement,Ma=z.HTMLSlotElement,Bc=z.HTMLSourceElement,xc=z.HTMLSpanElement,Xl=z.HTMLStyleElement,Ra=z.HTMLTableCaptionElement,_s=z.HTMLTableCellElement,Uc=z.HTMLTableColElement,No=z.HTMLTableElement,Ql=z.HTMLTableRowElement,Zl=z.HTMLTableSectionElement,Pa=z.HTMLTemplateElement,xr=z.HTMLTextAreaElement,kn=z.HTMLTimeElement,ql=z.HTMLTitleElement,vn=z.HTMLTrackElement,Vc=z.HTMLUListElement,Hc=z.HTMLUnknownElement,ka=z.HTMLVideoElement,nr=z.IDBCursor,Na=z.IDBCursorWithValue,Cs=z.IDBDatabase,La=z.IDBFactory,Wc=z.IDBIndex,ec=z.IDBKeyRange,tc=z.IDBObjectStore,nc=z.IDBOpenDBRequest,Fa=z.IDBRequest,Gc=z.IDBTransaction,bn=z.IDBVersionChangeEvent,ti=z.IdleDeadline,Ht=z.IIRFilterNode,bu=z.Image,ic=z.ImageBitmap,_u=z.ImageBitmapRenderingContext,Cu=z.ImageCapture,jc=z.ImageData,cs=z.indexedDB,Ba=z.innerHeight,Tu=z.innerWidth,Iu=z.InputEvent,Du=z.IntersectionObserver,xa=z.IntersectionObserverEntry,Ua=z.Intl,zc=z.isSecureContext,$c=z.KeyboardEvent,Va=z.KeyframeEffect,Kc=z.KeyframeEffectReadOnly,Lo=z.length,eo=z.localStorage,Ha=z.location,Ks=z.Location,Au=z.locationbar,Jc=z.matchMedia,Wa=z.MediaDeviceInfo,Yc=z.MediaDevices,wu=z.MediaElementAudioSourceNode,Xc=z.MediaEncryptedEvent,Qc=z.MediaError,Zc=z.MediaKeyMessageEvent,Ou=z.MediaKeySession,Cr=z.MediaKeyStatusMap,Ts=z.MediaKeySystemAccess,rc=z.MediaList,oc=z.MediaMetadata,qc=z.MediaQueryList,Js=z.MediaQueryListEvent,ed=z.MediaRecorder,td=z.MediaSettingsRange,nd=z.MediaSource,fo=z.MediaStream,id=z.MediaStreamAudioDestinationNode,rd=z.MediaStreamAudioSourceNode,ds=z.MediaStreamEvent,Ys=z.MediaStreamTrack,ho=z.MediaStreamTrackEvent,od=z.menubar,sd=z.MessageChannel,ad=z.MessageEvent,ld=z.MessagePort,cd=z.MIDIAccess,dd=z.MIDIConnectionEvent,ud=z.MIDIInput,fd=z.MIDIInputMap,hd=z.MIDIMessageEvent,Mu=z.MIDIOutput,pd=z.MIDIOutputMap,ui=z.MIDIPort,Ga=z.MimeType,Is=z.MimeTypeArray,ja=z.MouseEvent,_t=z.moveBy,Ru=z.moveTo,tn=z.MutationEvent,za=z.MutationObserver,Xs=z.MutationRecord,sc=z.name,ac=z.NamedNodeMap,lc=z.NavigationPreloadManager,md=z.navigator,Fo=z.Navigator,us=z.NetworkInformation,Dn=z.Node,gd=z.NodeFilter,cc=z.NodeIterator,Sd=z.NodeList,dc=z.Notification,vd=z.OfflineAudioCompletionEvent,fs=z.OfflineAudioContext,yd=z.offscreenBuffering,uc=z.OffscreenCanvas,Ed=z.OffscreenCanvasRenderingContext2D,P=z.onabort,B=z.onafterprint,W=z.onanimationend,q=z.onanimationiteration,de=z.onanimationstart,_e=z.onappinstalled,He=z.onauxclick,et=z.onbeforeinstallprompt,ze=z.onbeforeprint,St=z.onbeforeunload,wt=z.onblur,ot=z.oncancel,Rt=z.oncanplay,Qt=z.oncanplaythrough,Wt=z.onchange,_n=z.onclick,jn=z.onclose,Pn=z.oncontextmenu,ri=z.oncuechange,Ni=z.ondblclick,gi=z.ondevicemotion,Gi=z.ondeviceorientation,ei=z.ondeviceorientationabsolute,Mn=z.ondrag,vi=z.ondragend,ir=z.ondragenter,Rn=z.ondragleave,ni=z.ondragover,ji=z.ondragstart,fr=z.ondrop,rr=z.ondurationchange,kr=z.onemptied,Li=z.onended,jr=z.onerror,or=z.onfocus,zr=z.ongotpointercapture,Bo=z.onhashchange,bd=z.oninput,$a=z.oninvalid,Qs=z.onkeydown,fc=z.onkeypress,Ds=z.onkeyup,hc=z.onlanguagechange,Ka=z.onload,pc=z.onloadeddata,Zs=z.onloadedmetadata,Ja=z.onloadstart,_d=z.onlostpointercapture,hs=z.onmessage,po=z.onmessageerror,To=z.onmousedown,Ya=z.onmouseenter,Cd=z.onmouseleave,As=z.onmousemove,qs=z.onmouseout,Oi=z.onmouseover,to=z.onmouseup,bi=z.onmousewheel,zi=z.onoffline,Ti=z.ononline,Ko=z.onpagehide,ea=z.onpageshow,Pu=z.onpause,Yh=z.onplay,US=z.onplaying,VS=z.onpointercancel,Xh=z.onpointerdown,ku=z.onpointerenter,Qh=z.onpointerleave,Zh=z.onpointermove,Td=z.onpointerout,mc=z.onpointerover,Nu=z.onpointerup,qh=z.onpopstate,HS=z.onprogress,ep=z.onratechange,tp=z.onrejectionhandled,np=z.onreset,ip=z.onresize,rp=z.onscroll,Gn=z.onsearch,op=z.onseeked,sp=z.onseeking,ap=z.onselect,lp=z.onstalled,Xa=z.onstorage,Id=z.onsubmit,Lu=z.onsuspend,Fu=z.ontimeupdate,cp=z.ontoggle,dp=z.ontransitionend,gc=z.onunhandledrejection,up=z.onunload,Dd=z.onvolumechange,fp=z.onwaiting,Ad=z.onwheel,hp=z.open,pp=z.openDatabase,mp=z.opener,WS=z.Option,GS=z.origin,jS=z.OscillatorNode,zS=z.outerHeight,gp=z.outerWidth,Bu=z.OverconstrainedError,xu=z.PageTransitionEvent,wd=z.pageXOffset,Sp=z.pageYOffset,Od=z.PannerNode,Uu=z.parent,vp=z.Path2D,yp=z.PaymentAddress,Ep=z.PaymentRequest,Qa=z.PaymentRequestUpdateEvent,bp=z.PaymentResponse,_p=z.performance,Cp=z.Performance,Tp=z.PerformanceEntry,Ip=z.PerformanceLongTaskTiming,Dp=z.PerformanceMark,Ap=z.PerformanceMeasure,wp=z.PerformanceNavigation,Op=z.PerformanceNavigationTiming,Mp=z.PerformanceObserver,Rp=z.PerformanceObserverEntryList,Pp=z.PerformancePaintTiming,kp=z.PerformanceResourceTiming,$S=z.PerformanceTiming,mo=z.PeriodicWave,Np=z.Permissions,Lp=z.PermissionStatus,Fp=z.personalbar,Bp=z.PhotoCapabilities,Sc=z.Plugin,xp=z.PluginArray,Up=z.PointerEvent,Vp=z.PopStateEvent,Hp=z.postMessage,Wp=z.Presentation,Vu=z.PresentationAvailability,KS=z.PresentationConnection,Gp=z.PresentationConnectionAvailableEvent,jp=z.PresentationConnectionCloseEvent,Hu=z.PresentationConnectionList,zp=z.PresentationReceiver,$p=z.PresentationRequest,Wu=z.print,Kp=z.ProcessingInstruction,Gu=z.ProgressEvent,Md=z.PromiseRejectionEvent,ju=z.prompt,Jp=z.PushManager,zu=z.PushSubscription,Za=z.PushSubscriptionOptions,Yp=z.queueMicrotask,$u=z.RadioNodeList,JS=z.Range,Ku=z.ReadableStream,xo=z.registerProcessor,Uo=z.RemotePlayback,ta=z.removeEventListener,Ju=z.Request,Yu=z.requestAnimationFrame,qa=z.requestIdleCallback,na=z.resizeBy,el=z.ResizeObserver,Jo=z.ResizeObserverEntry,Rd=z.resizeTo,Xu=z.Response,Qu=z.RTCCertificate,Zu=z.RTCDataChannel,qu=z.RTCDataChannelEvent,ef=z.RTCDtlsTransport,Vo=z.RTCIceCandidate,tf=z.RTCIceGatherer,nf=z.RTCIceTransport,rf=z.RTCPeerConnection,of=z.RTCPeerConnectionIceEvent,sf=z.RTCRtpContributingSource,YS=z.RTCRtpReceiver,Xp=z.RTCRtpSender,Qp=z.RTCSctpTransport,Zp=z.RTCSessionDescription,qp=z.RTCStatsReport,tl=z.RTCTrackEvent,Pd=z.screen,kd=z.Screen,XS=z.screenLeft,em=z.ScreenOrientation,tm=z.screenTop,nm=z.screenX,im=z.screenY,rm=z.ScriptProcessorNode,om=z.scroll,sm=z.scrollbars,am=z.scrollBy,lm=z.scrollTo,QS=z.scrollX,ZS=z.scrollY,qS=z.SecurityPolicyViolationEvent,cm=z.Selection,nl=z.self,vc=z.ServiceWorker,dm=z.ServiceWorkerContainer,$r=z.ServiceWorkerRegistration,um=z.sessionStorage,oi=z.setInterval,af=z.setTimeout,fm=z.ShadowRoot,Kr=z.SharedWorker,hm=z.SourceBuffer,pm=z.SourceBufferList,mm=z.speechSynthesis,il=z.SpeechSynthesisEvent,rl=z.SpeechSynthesisUtterance,ol=z.StaticRange,sl=z.status,al=z.statusbar,ll=z.StereoPannerNode,cl=z.stop,dl=z.Storage,ul=z.StorageEvent,gm=z.StorageManager,Sm=z.styleMedia,vm=z.StyleSheet,ym=z.StyleSheetList,Em=z.SubtleCrypto,bm=z.SVGAElement,_m=z.SVGAngle,Cm=z.SVGAnimatedAngle,Tm=z.SVGAnimatedBoolean,Im=z.SVGAnimatedEnumeration,Dm=z.SVGAnimatedInteger,Am=z.SVGAnimatedLength,wm=z.SVGAnimatedLengthList,Er=z.SVGAnimatedNumber,lf=z.SVGAnimatedNumberList,cf=z.SVGAnimatedPreserveAspectRatio,df=z.SVGAnimatedRect,uf=z.SVGAnimatedString,ff=z.SVGAnimatedTransformList,hf=z.SVGAnimateElement,fl=z.SVGAnimateMotionElement,pf=z.SVGAnimateTransformElement,hl=z.SVGAnimationElement,Nd=z.SVGCircleElement,mf=z.SVGClipPathElement,gf=z.SVGComponentTransferFunctionElement,Sf=z.SVGDefsElement,vf=z.SVGDescElement,pl=z.SVGDiscardElement,Ld=z.SVGElement,yf=z.SVGEllipseElement,yc=z.SVGFEBlendElement,Ef=z.SVGFEColorMatrixElement,bf=z.SVGFEComponentTransferElement,_f=z.SVGFECompositeElement,Fd=z.SVGFEConvolveMatrixElement,Cf=z.SVGFEDiffuseLightingElement,Tf=z.SVGFEDisplacementMapElement,ml=z.SVGFEDistantLightElement,If=z.SVGFEDropShadowElement,Df=z.SVGFEFloodElement,Af=z.SVGFEFuncAElement,wf=z.SVGFEFuncBElement,Of=z.SVGFEFuncGElement,Mf=z.SVGFEFuncRElement,Rf=z.SVGFEGaussianBlurElement,Pf=z.SVGFEImageElement,kf=z.SVGFEMergeElement,Nf=z.SVGFEMergeNodeElement,Lf=z.SVGFEMorphologyElement,Ff=z.SVGFEOffsetElement,Bf=z.SVGFEPointLightElement,xf=z.SVGFESpecularLightingElement,Uf=z.SVGFESpotLightElement,Vf=z.SVGFETileElement,Hf=z.SVGFETurbulenceElement,Wf=z.SVGFilterElement,Gf=z.SVGForeignObjectElement,jf=z.SVGGElement,zf=z.SVGGeometryElement,$f=z.SVGGradientElement,Kf=z.SVGGraphicsElement,Jf=z.SVGImageElement,Yf=z.SVGLength,Xf=z.SVGLengthList,Qf=z.SVGLinearGradientElement,Zf=z.SVGLineElement,qf=z.SVGMarkerElement,eh=z.SVGMaskElement,th=z.SVGMatrix,nh=z.SVGMetadataElement,ih=z.SVGMPathElement,rh=z.SVGNumber,oh=z.SVGNumberList,sh=z.SVGPathElement,ah=z.SVGPatternElement,lh=z.SVGPoint,ch=z.SVGPointList,dh=z.SVGPolygonElement,uh=z.SVGPolylineElement,fh=z.SVGPreserveAspectRatio,hh=z.SVGRadialGradientElement,ph=z.SVGRect,mh=z.SVGRectElement,Om=z.SVGScriptElement,Mm=z.SVGSetElement,Rm=z.SVGStopElement,Pm=z.SVGStringList,km=z.SVGStyleElement,Nm=z.SVGSVGElement,Lm=z.SVGSwitchElement,Fm=z.SVGSymbolElement,Bm=z.SVGTextContentElement,xm=z.SVGTextElement,Um=z.SVGTextPathElement,Vm=z.SVGTextPositioningElement,Hm=z.SVGTitleElement,Wm=z.SVGTransform,Gm=z.SVGTransformList,jm=z.SVGTSpanElement,zm=z.SVGUnitTypes,$m=z.SVGUseElement,Km=z.SVGViewElement,Jm=z.TaskAttributionTiming,Ym=z.Text,Xm=z.TextDecoder,Qm=z.TextEncoder,Zm=z.TextEvent,qm=z.TextMetrics,eg=z.TextTrack,tg=z.TextTrackCue,ng=z.TextTrackCueList,ig=z.TextTrackList,rg=z.TimeRanges,og=z.toolbar,sg=z.top,ag=z.Touch,lg=z.TouchEvent,cg=z.TouchList,dg=z.TrackEvent,ug=z.TransitionEvent,fg=z.TreeWalker,gh=z.trustedTypes,hg=z.UIEvent,pg=z.URL,mg=z.URLSearchParams,gg=z.ValidityState,Sg=z.visualViewport,vg=z.VisualViewport,yg=z.VTTCue,Eg=z.WaveShaperNode,bg=z.WebAssembly,_g=z.WebGL2RenderingContext,Cg=z.WebGLActiveInfo,Tg=z.WebGLBuffer,Ig=z.WebGLContextEvent,Dg=z.WebGLFramebuffer,Ag=z.WebGLProgram,wg=z.WebGLQuery,Og=z.WebGLRenderbuffer,Mg=z.WebGLRenderingContext,Rg=z.WebGLSampler,Pg=z.WebGLShader,kg=z.WebGLShaderPrecisionFormat,Ng=z.WebGLSync,Lg=z.WebGLTexture,Fg=z.WebGLTransformFeedback,Bg=z.WebGLUniformLocation,xg=z.WebGLVertexArrayObject,Ug=z.WebSocket,Vg=z.WheelEvent,z=z.window,Hg=z.Window,Wg=z.Worker,Gg=z.WritableStream,jg=z.XMLDocument,zg=z.XMLHttpRequest,$g=z.XMLHttpRequestEventTarget,Kg=z.XMLHttpRequestUpload,Jg=z.XMLSerializer,Yg=z.XPathEvaluator,Xg=z.XPathExpression,Qg=z.XPathResult,Zg=z.XSLTProcessor;return function(Fi,Ln){typeof a=="object"&&typeof r<"u"?Ln(a,d(3134334389),d(4332857818)):(h=[a,d(3134334389),d(4332857818)],c=Ln,m=typeof c=="function"?c.apply(a,h):c,m!==void 0&&(r.exports=m))}(this,function(Fi,Ln,Ec){"use strict";var Bd=s(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function sr(ee,N){if(!(ee instanceof N))throw new TypeError("Cannot call a class as a function")}s(sr,"_classCallCheck");function xd(ee,N){for(var U=0;U<N.length;U++){var K=N[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(ee,K.key,K)}}s(xd,"_defineProperties");function hr(ee,N,U){return N&&xd(ee.prototype,N),U&&xd(ee,U),ee}s(hr,"_createClass");function ut(ee,N,U){return N in ee?Object.defineProperty(ee,N,{value:U,enumerable:!0,configurable:!0,writable:!0}):ee[N]=U,ee}s(ut,"_defineProperty");function go(){return(go=Object.assign||function(ee){for(var N=1;N<arguments.length;N++){var U=arguments[N];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(ee[K]=U[K])}return ee}).apply(this,arguments)}s(go,"_extends");function Ud(ee,N){var U=Object.keys(ee);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(ee);N&&(K=K.filter(function(oe){return Object.getOwnPropertyDescriptor(ee,oe).enumerable})),U.push.apply(U,K)}return U}s(Ud,"ownKeys");function _i(ee){for(var N=1;N<arguments.length;N++){var U=arguments[N]!=null?arguments[N]:{};N%2?Ud(U,!0).forEach(function(K){ut(ee,K,U[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(U)):Ud(U).forEach(function(K){Object.defineProperty(ee,K,Object.getOwnPropertyDescriptor(U,K))})}return ee}s(_i,"_objectSpread2");function Nr(ee,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(N&&N.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),N&&Vd(ee,N)}s(Nr,"_inherits");function Mr(ee){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(ee)}s(Mr,"_getPrototypeOf");function Vd(ee,N){return(Vd=Object.setPrototypeOf||function(U,K){return U.__proto__=K,U})(ee,N)}s(Vd,"_setPrototypeOf");function ia(ee,N){if(ee==null)return{};var U,K,oe=function(se,ye){if(se==null)return{};var Ae,Ie,Ve={},tt=Object.keys(se);for(Ie=0;Ie<tt.length;Ie++)Ae=tt[Ie],0<=ye.indexOf(Ae)||(Ve[Ae]=se[Ae]);return Ve}(ee,N);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(ee);for(K=0;K<ue.length;K++)U=ue[K],0<=N.indexOf(U)||Object.prototype.propertyIsEnumerable.call(ee,U)&&(oe[U]=ee[U])}return oe}s(ia,"_objectWithoutProperties");function Ot(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}s(Ot,"_assertThisInitialized");function Lr(ee,N){return!N||typeof N!="object"&&typeof N!="function"?Ot(ee):N}s(Lr,"_possibleConstructorReturn");function Sh(ee,N){return function(U){if(Array.isArray(U))return U}(ee)||function(U,K){if(Symbol.iterator in Object(U)||Object.prototype.toString.call(U)==="[object Arguments]"){var oe=[],ue=!0,se=!1,ye=void 0;try{for(var Ae,Ie=U[Symbol.iterator]();!(ue=(Ae=Ie.next()).done)&&(oe.push(Ae.value),!K||oe.length!==K);ue=!0);}catch(Ve){se=!0,ye=Ve}finally{try{ue||Ie.return==null||Ie.return()}finally{if(se)throw ye}}return oe}}(ee,N)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s(Sh,"_slicedToArray");function vh(ee){return function(N){if(Array.isArray(N)){for(var U=0,K=new Array(N.length);U<N.length;U++)K[U]=N[U];return K}}(ee)||function(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s(vh,"_toConsumableArray");function Hd(){var ee=this.constructor.getDerivedStateFromProps(this.props,this.state);ee!=null&&this.setState(ee)}s(Hd,"componentWillMount");function Wd(ee){this.setState(function(N){var U=this.constructor.getDerivedStateFromProps(ee,N);return U??null}.bind(this))}s(Wd,"componentWillReceiveProps");function Gd(ee,N){try{var U=this.props,K=this.state;this.props=ee,this.state=N,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(U,K)}finally{this.props=U,this.state=K}}s(Gd,"componentWillUpdate");function xn(ee){var N=ee.prototype;if(!N||!N.isReactComponent)throw new Error("Can only polyfill class components");if(typeof ee.getDerivedStateFromProps!="function"&&typeof N.getSnapshotBeforeUpdate!="function")return ee;var U=null,K=null,oe=null;if(typeof N.componentWillMount=="function"?U="componentWillMount":typeof N.UNSAFE_componentWillMount=="function"&&(U="UNSAFE_componentWillMount"),typeof N.componentWillReceiveProps=="function"?K="componentWillReceiveProps":typeof N.UNSAFE_componentWillReceiveProps=="function"&&(K="UNSAFE_componentWillReceiveProps"),typeof N.componentWillUpdate=="function"?oe="componentWillUpdate":typeof N.UNSAFE_componentWillUpdate=="function"&&(oe="UNSAFE_componentWillUpdate"),U!==null||K!==null||oe!==null){var ue=ee.displayName||ee.name,se=typeof ee.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+ue+" uses "+se+" but also contains the following legacy lifecycles:"+(U!==null?`
  `+U:"")+(K!==null?`
  `+K:"")+(oe!==null?`
  `+oe:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof ee.getDerivedStateFromProps=="function"&&(N.componentWillMount=Hd,N.componentWillReceiveProps=Wd),typeof N.getSnapshotBeforeUpdate=="function"){if(typeof N.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");N.componentWillUpdate=Gd;var ye=N.componentDidUpdate;N.componentDidUpdate=function(Ae,Ie,Ve){var tt=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Ve;ye.call(this,Ae,Ie,tt)}}return ee}s(xn,"polyfill"),Gd.__suppressDeprecationWarning=Wd.__suppressDeprecationWarning=Hd.__suppressDeprecationWarning=!0;var bc=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),ut(Ot(U),"_columnStartIndex",0),ut(Ot(U),"_columnStopIndex",0),ut(Ot(U),"_rowStartIndex",0),ut(Ot(U),"_rowStopIndex",0),ut(Ot(U),"_onKeyDown",function(se){var ye=U.props,Ae=ye.columnCount,Ie=ye.disabled,Ve=ye.mode,tt=ye.rowCount;if(!Ie){var lt=U._getScrollState(),Dt=lt.scrollToColumn,ht=lt.scrollToRow,b=U._getScrollState(),E=b.scrollToColumn,w=b.scrollToRow;switch(se.key){case"ArrowDown":w=Math.min(Ve==="cells"?w+1:U._rowStopIndex+1,tt-1);break;case"ArrowLeft":E=Math.max(Ve==="cells"?E-1:U._columnStartIndex-1,0);break;case"ArrowRight":E=Math.min(Ve==="cells"?E+1:U._columnStopIndex+1,Ae-1);break;case"ArrowUp":w=Math.max(Ve==="cells"?w-1:U._rowStartIndex-1,0)}E===Dt&&w===ht||(se.preventDefault(),U._updateScrollState({scrollToColumn:E,scrollToRow:w}))}}),ut(Ot(U),"_onSectionRendered",function(se){var ye=se.columnStartIndex,Ae=se.columnStopIndex,Ie=se.rowStartIndex,Ve=se.rowStopIndex;U._columnStartIndex=ye,U._columnStopIndex=Ae,U._rowStartIndex=Ie,U._rowStopIndex=Ve}),U}return s(ee,"ArrowKeyStepper"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"setScrollIndexes",value:function(N){var U=N.scrollToColumn,K=N.scrollToRow;this.setState({scrollToRow:K,scrollToColumn:U})}},{key:"render",value:function(){var N=this.props,U=N.className,K=N.children,oe=this._getScrollState(),ue=oe.scrollToColumn,se=oe.scrollToRow;return Ln.createElement("div",{className:U,onKeyDown:this._onKeyDown},K({onSectionRendered:this._onSectionRendered,scrollToColumn:ue,scrollToRow:se}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(N){var U=N.scrollToColumn,K=N.scrollToRow,oe=this.props,ue=oe.isControlled,se=oe.onScrollToChange;typeof se=="function"&&se({scrollToColumn:U,scrollToRow:K}),ue||this.setState({scrollToColumn:U,scrollToRow:K})}}],[{key:"getDerivedStateFromProps",value:function(N,U){return N.isControlled?{}:N.scrollToColumn!==U.instanceProps.prevScrollToColumn||N.scrollToRow!==U.instanceProps.prevScrollToRow?_i({},U,{scrollToColumn:N.scrollToColumn,scrollToRow:N.scrollToRow,instanceProps:{prevScrollToColumn:N.scrollToColumn,prevScrollToRow:N.scrollToRow}}):{}}}]),ee}();function jd(ee,N){var U,K,oe,ue=(U=N!==void 0?N:typeof z<"u"?z:typeof nl<"u"?nl:d.g).document!==void 0&&U.document.attachEvent;if(!ue){var se=(oe=U.requestAnimationFrame||U.mozRequestAnimationFrame||U.webkitRequestAnimationFrame||function(j){return U.setTimeout(j,20)},function(j){return oe(j)}),ye=(K=U.cancelAnimationFrame||U.mozCancelAnimationFrame||U.webkitCancelAnimationFrame||U.clearTimeout,function(j){return K(j)}),Ae=s(function(j){var Q=j.__resizeTriggers__,ce=Q.firstElementChild,Re=Q.lastElementChild,Ne=ce.firstElementChild;Re.scrollLeft=Re.scrollWidth,Re.scrollTop=Re.scrollHeight,Ne.style.width=ce.offsetWidth+1+"px",Ne.style.height=ce.offsetHeight+1+"px",ce.scrollLeft=ce.scrollWidth,ce.scrollTop=ce.scrollHeight},"resetTriggers"),Ie=s(function(j){if(!(j.target.className&&typeof j.target.className.indexOf=="function"&&j.target.className.indexOf("contract-trigger")<0&&j.target.className.indexOf("expand-trigger")<0)){var Q=this;Ae(this),this.__resizeRAF__&&ye(this.__resizeRAF__),this.__resizeRAF__=se(function(){!function(ce){return ce.offsetWidth!=ce.__resizeLast__.width||ce.offsetHeight!=ce.__resizeLast__.height}(Q)||(Q.__resizeLast__.width=Q.offsetWidth,Q.__resizeLast__.height=Q.offsetHeight,Q.__resizeListeners__.forEach(function(ce){ce.call(Q,j)}))})}},"scrollListener"),Ve=!1,tt="",lt="animationstart",Dt="Webkit Moz O ms".split(" "),ht="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),b=U.document.createElement("fakeelement");if(b.style.animationName!==void 0&&(Ve=!0),Ve===!1){for(var E=0;E<Dt.length;E++)if(b.style[Dt[E]+"AnimationName"]!==void 0){tt="-"+Dt[E].toLowerCase()+"-",lt=ht[E],Ve=!0;break}}var w="resizeanim",I="@"+tt+"keyframes "+w+" { from { opacity: 0; } to { opacity: 0; } } ",H=tt+"animation: 1ms "+w+"; "}return{addResizeListener:function(j,Q){if(ue)j.attachEvent("onresize",Q);else{if(!j.__resizeTriggers__){var ce=j.ownerDocument,Re=U.getComputedStyle(j);if(Re&&Re.position=="static"&&(j.style.position="relative"),function(Qe){if(!Qe.getElementById("detectElementResize")){var Je=(I||"")+".resize-triggers { "+(H||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',st=Qe.head||Qe.getElementsByTagName("head")[0],pt=Qe.createElement("style");pt.id="detectElementResize",pt.type="text/css",ee!=null&&pt.setAttribute("nonce",ee),pt.styleSheet?pt.styleSheet.cssText=Je:pt.appendChild(Qe.createTextNode(Je)),st.appendChild(pt)}}(ce),j.__resizeLast__={},j.__resizeListeners__=[],(j.__resizeTriggers__=ce.createElement("div")).className="resize-triggers",z.trustedTypes){var Ne=gh.createPolicy("react-virtualized-auto-sizer",{createHTML:Bd});j.__resizeTriggers__.innerHTML=Ne.createHTML("")}else j.__resizeTriggers__.innerHTML=Bd();j.appendChild(j.__resizeTriggers__),Ae(j),j.addEventListener("scroll",Ie,!0),lt&&(j.__resizeTriggers__.__animationListener__=function(Qe){Qe.animationName==w&&Ae(j)},j.__resizeTriggers__.addEventListener(lt,j.__resizeTriggers__.__animationListener__))}j.__resizeListeners__.push(Q)}},removeResizeListener:function(j,Q){if(ue)j.detachEvent("onresize",Q);else if(j.__resizeListeners__.splice(j.__resizeListeners__.indexOf(Q),1),!j.__resizeListeners__.length){j.removeEventListener("scroll",Ie,!0),j.__resizeTriggers__.__animationListener__&&(j.__resizeTriggers__.removeEventListener(lt,j.__resizeTriggers__.__animationListener__),j.__resizeTriggers__.__animationListener__=null);try{j.__resizeTriggers__=!j.removeChild(j.__resizeTriggers__)}catch{}}}}}s(jd,"createDetectElementResize"),ut(bc,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),xn(bc);var zd=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"state",{height:U.props.defaultHeight||0,width:U.props.defaultWidth||0}),ut(Ot(U),"_parentNode",void 0),ut(Ot(U),"_autoSizer",void 0),ut(Ot(U),"_window",void 0),ut(Ot(U),"_detectElementResize",void 0),ut(Ot(U),"_onResize",function(){var se=U.props,ye=se.disableHeight,Ae=se.disableWidth,Ie=se.onResize;if(U._parentNode){var Ve=U._parentNode.offsetHeight||0,tt=U._parentNode.offsetWidth||0,lt=(U._window||z).getComputedStyle(U._parentNode)||{},Dt=parseInt(lt.paddingLeft,10)||0,ht=parseInt(lt.paddingRight,10)||0,b=parseInt(lt.paddingTop,10)||0,E=parseInt(lt.paddingBottom,10)||0,w=Ve-b-E,I=tt-Dt-ht;(!ye&&U.state.height!==w||!Ae&&U.state.width!==I)&&(U.setState({height:Ve-b-E,width:tt-Dt-ht}),Ie({height:Ve,width:tt}))}}),ut(Ot(U),"_setRef",function(se){U._autoSizer=se}),U}return s(ee,"AutoSizer"),Nr(ee,Ln.Component),hr(ee,[{key:"componentDidMount",value:function(){var N=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=jd(N,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var N=this.props,U=N.children,K=N.className,oe=N.disableHeight,ue=N.disableWidth,se=N.style,ye=this.state,Ae=ye.height,Ie=ye.width,Ve={overflow:"visible"},tt={};return oe||(Ve.height=0,tt.height=Ae),ue||(Ve.width=0,tt.width=Ie),Ln.createElement("div",{className:K,ref:this._setRef,style:_i({},Ve,{},se)},U(tt))}}]),ee}();ut(zd,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var _c=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"_child",void 0),ut(Ot(U),"_measure",function(){var se=U.props,ye=se.cache,Ae=se.columnIndex,Ie=Ae===void 0?0:Ae,Ve=se.parent,tt=se.rowIndex,lt=tt===void 0?U.props.index||0:tt,Dt=U._getCellMeasurements(),ht=Dt.height,b=Dt.width;ht===ye.getHeight(lt,Ie)&&b===ye.getWidth(lt,Ie)||(ye.set(lt,Ie,b,ht),Ve&&typeof Ve.recomputeGridSize=="function"&&Ve.recomputeGridSize({columnIndex:Ie,rowIndex:lt}))}),ut(Ot(U),"_registerChild",function(se){!se||se instanceof Zi||at.warn("CellMeasurer registerChild expects to be passed Element or null"),(U._child=se)&&U._maybeMeasureCell()}),U}return s(ee,"CellMeasurer"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var N=this.props.children;return typeof N=="function"?N({measure:this._measure,registerChild:this._registerChild}):N}},{key:"_getCellMeasurements",value:function(){var N=this.props.cache,U=this._child||Ec.findDOMNode(this);if(U&&U.ownerDocument&&U.ownerDocument.defaultView&&U instanceof U.ownerDocument.defaultView.HTMLElement){var K=U.style.width,oe=U.style.height;N.hasFixedWidth()||(U.style.width="auto"),N.hasFixedHeight()||(U.style.height="auto");var ue=Math.ceil(U.offsetHeight),se=Math.ceil(U.offsetWidth);return K&&(U.style.width=K),oe&&(U.style.height=oe),{height:ue,width:se}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var N=this.props,U=N.cache,K=N.columnIndex,oe=K===void 0?0:K,ue=N.parent,se=N.rowIndex,ye=se===void 0?this.props.index||0:se;if(!U.has(ye,oe)){var Ae=this._getCellMeasurements(),Ie=Ae.height,Ve=Ae.width;U.set(ye,oe,Ve,Ie),ue&&typeof ue.invalidateCellSizeAfterRender=="function"&&ue.invalidateCellSizeAfterRender({columnIndex:oe,rowIndex:ye})}}}]),ee}();ut(_c,"__internalCellMeasurerFlag",!1),_c.__internalCellMeasurerFlag=!0;var yh=function(){function ee(){var N=this,U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};sr(this,ee),ut(this,"_cellHeightCache",{}),ut(this,"_cellWidthCache",{}),ut(this,"_columnWidthCache",{}),ut(this,"_rowHeightCache",{}),ut(this,"_defaultHeight",void 0),ut(this,"_defaultWidth",void 0),ut(this,"_minHeight",void 0),ut(this,"_minWidth",void 0),ut(this,"_keyMapper",void 0),ut(this,"_hasFixedHeight",void 0),ut(this,"_hasFixedWidth",void 0),ut(this,"_columnCount",0),ut(this,"_rowCount",0),ut(this,"columnWidth",function(Ve){var tt=Ve.index,lt=N._keyMapper(0,tt);return N._columnWidthCache[lt]!==void 0?N._columnWidthCache[lt]:N._defaultWidth}),ut(this,"rowHeight",function(Ve){var tt=Ve.index,lt=N._keyMapper(tt,0);return N._rowHeightCache[lt]!==void 0?N._rowHeightCache[lt]:N._defaultHeight});var K=U.defaultHeight,oe=U.defaultWidth,ue=U.fixedHeight,se=U.fixedWidth,ye=U.keyMapper,Ae=U.minHeight,Ie=U.minWidth;this._hasFixedHeight=ue===!0,this._hasFixedWidth=se===!0,this._minHeight=Ae||0,this._minWidth=Ie||0,this._keyMapper=ye||Eh,this._defaultHeight=Math.max(this._minHeight,typeof K=="number"?K:30),this._defaultWidth=Math.max(this._minWidth,typeof oe=="number"?oe:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&at.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&at.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&at.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return s(ee,"CellMeasurerCache"),hr(ee,[{key:"clear",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0,oe=this._keyMapper(N,K);delete this._cellHeightCache[oe],delete this._cellWidthCache[oe],this._updateCachedColumnAndRowSizes(N,K)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0;if(this._hasFixedHeight)return this._defaultHeight;var oe=this._keyMapper(N,K);return this._cellHeightCache[oe]!==void 0?Math.max(this._minHeight,this._cellHeightCache[oe]):this._defaultHeight}},{key:"getWidth",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0;if(this._hasFixedWidth)return this._defaultWidth;var oe=this._keyMapper(N,K);return this._cellWidthCache[oe]!==void 0?Math.max(this._minWidth,this._cellWidthCache[oe]):this._defaultWidth}},{key:"has",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0,oe=this._keyMapper(N,K);return this._cellHeightCache[oe]!==void 0}},{key:"set",value:function(N,U,K,oe){var ue=this._keyMapper(N,U);U>=this._columnCount&&(this._columnCount=U+1),N>=this._rowCount&&(this._rowCount=N+1),this._cellHeightCache[ue]=oe,this._cellWidthCache[ue]=K,this._updateCachedColumnAndRowSizes(N,U)}},{key:"_updateCachedColumnAndRowSizes",value:function(N,U){if(!this._hasFixedWidth){for(var K=0,oe=0;oe<this._rowCount;oe++)K=Math.max(K,this.getWidth(oe,U));var ue=this._keyMapper(0,U);this._columnWidthCache[ue]=K}if(!this._hasFixedHeight){for(var se=0,ye=0;ye<this._columnCount;ye++)se=Math.max(se,this.getHeight(N,ye));var Ae=this._keyMapper(N,0);this._rowHeightCache[Ae]=se}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),ee}();function Eh(ee,N){return"".concat(ee,"-").concat(N)}s(Eh,"defaultKeyMapper");function $d(ee){return ee&&ee.__esModule&&Object.prototype.hasOwnProperty.call(ee,"default")?ee.default:ee}s($d,"unwrapExports");function gl(ee,N){return ee(N={exports:{}},N.exports),N.exports}s(gl,"createCommonjsModule");var Bi=gl(function(ee,N){Object.defineProperty(N,"__esModule",{value:!0});var U=typeof Symbol=="function"&&Symbol.for,K=U?Symbol.for("react.element"):60103,oe=U?Symbol.for("react.portal"):60106,ue=U?Symbol.for("react.fragment"):60107,se=U?Symbol.for("react.strict_mode"):60108,ye=U?Symbol.for("react.profiler"):60114,Ae=U?Symbol.for("react.provider"):60109,Ie=U?Symbol.for("react.context"):60110,Ve=U?Symbol.for("react.async_mode"):60111,tt=U?Symbol.for("react.concurrent_mode"):60111,lt=U?Symbol.for("react.forward_ref"):60112,Dt=U?Symbol.for("react.suspense"):60113,ht=U?Symbol.for("react.suspense_list"):60120,b=U?Symbol.for("react.memo"):60115,E=U?Symbol.for("react.lazy"):60116,w=U?Symbol.for("react.fundamental"):60117,I=U?Symbol.for("react.responder"):60118,H=U?Symbol.for("react.scope"):60119;function j(ce){if(typeof ce=="object"&&ce!==null){var Re=ce.$$typeof;switch(Re){case K:switch(ce=ce.type){case Ve:case tt:case ue:case ye:case se:case Dt:return ce;default:switch(ce=ce&&ce.$$typeof){case Ie:case lt:case Ae:return ce;default:return Re}}case E:case b:case oe:return Re}}}s(j,"y");function Q(ce){return j(ce)===tt}s(Q,"z"),N.typeOf=j,N.AsyncMode=Ve,N.ConcurrentMode=tt,N.ContextConsumer=Ie,N.ContextProvider=Ae,N.Element=K,N.ForwardRef=lt,N.Fragment=ue,N.Lazy=E,N.Memo=b,N.Portal=oe,N.Profiler=ye,N.StrictMode=se,N.Suspense=Dt,N.isValidElementType=function(ce){return typeof ce=="string"||typeof ce=="function"||ce===ue||ce===tt||ce===ye||ce===se||ce===Dt||ce===ht||typeof ce=="object"&&ce!==null&&(ce.$$typeof===E||ce.$$typeof===b||ce.$$typeof===Ae||ce.$$typeof===Ie||ce.$$typeof===lt||ce.$$typeof===w||ce.$$typeof===I||ce.$$typeof===H)},N.isAsyncMode=function(ce){return Q(ce)||j(ce)===Ve},N.isConcurrentMode=Q,N.isContextConsumer=function(ce){return j(ce)===Ie},N.isContextProvider=function(ce){return j(ce)===Ae},N.isElement=function(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===K},N.isForwardRef=function(ce){return j(ce)===lt},N.isFragment=function(ce){return j(ce)===ue},N.isLazy=function(ce){return j(ce)===E},N.isMemo=function(ce){return j(ce)===b},N.isPortal=function(ce){return j(ce)===oe},N.isProfiler=function(ce){return j(ce)===ye},N.isStrictMode=function(ce){return j(ce)===se},N.isSuspense=function(ce){return j(ce)===Dt}});$d(Bi),Bi.typeOf,Bi.AsyncMode,Bi.ConcurrentMode,Bi.ContextConsumer,Bi.ContextProvider,Bi.Element,Bi.ForwardRef,Bi.Fragment,Bi.Lazy,Bi.Memo,Bi.Portal,Bi.Profiler,Bi.StrictMode,Bi.Suspense,Bi.isValidElementType,Bi.isAsyncMode,Bi.isConcurrentMode,Bi.isContextConsumer,Bi.isContextProvider,Bi.isElement,Bi.isForwardRef,Bi.isFragment,Bi.isLazy,Bi.isMemo,Bi.isPortal,Bi.isProfiler,Bi.isStrictMode,Bi.isSuspense;var Pi=gl(function(ee,N){(function(){Object.defineProperty(N,"__esModule",{value:!0});var U=typeof Symbol=="function"&&Symbol.for,K=U?Symbol.for("react.element"):60103,oe=U?Symbol.for("react.portal"):60106,ue=U?Symbol.for("react.fragment"):60107,se=U?Symbol.for("react.strict_mode"):60108,ye=U?Symbol.for("react.profiler"):60114,Ae=U?Symbol.for("react.provider"):60109,Ie=U?Symbol.for("react.context"):60110,Ve=U?Symbol.for("react.async_mode"):60111,tt=U?Symbol.for("react.concurrent_mode"):60111,lt=U?Symbol.for("react.forward_ref"):60112,Dt=U?Symbol.for("react.suspense"):60113,ht=U?Symbol.for("react.suspense_list"):60120,b=U?Symbol.for("react.memo"):60115,E=U?Symbol.for("react.lazy"):60116,w=U?Symbol.for("react.fundamental"):60117,I=U?Symbol.for("react.responder"):60118,H=U?Symbol.for("react.scope"):60119,j=s(function(An,es){if(es===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!An){for(var xs=arguments.length,Oc=new Array(2<xs?xs-2:0),ou=2;ou<xs;ou++)Oc[ou-2]=arguments[ou];(function(ev){for(var Mh=arguments.length,qg=new Array(1<Mh?Mh-1:0),su=1;su<Mh;su++)qg[su-1]=arguments[su];var tv=0,eS="Warning: "+ev.replace(/%s/g,function(){return qg[tv++]});typeof at<"u"&&at.warn(eS);try{throw new Error(eS)}catch{}}).apply(void 0,[es].concat(Oc))}},"lowPriorityWarningWithoutStack$1");function Q(An){if(typeof An=="object"&&An!==null){var es=An.$$typeof;switch(es){case K:var xs=An.type;switch(xs){case Ve:case tt:case ue:case ye:case se:case Dt:return xs;default:var Oc=xs&&xs.$$typeof;switch(Oc){case Ie:case lt:case Ae:return Oc;default:return es}}case E:case b:case oe:return es}}}s(Q,"typeOf");var ce=Ve,Re=tt,Ne=Ie,Qe=Ae,Je=K,st=lt,pt=ue,Kt=E,Cn=b,Gt=oe,zn=ye,si=se,wr=Dt,ar=!1;function Jr(An){return Q(An)===tt}s(Jr,"isConcurrentMode"),N.typeOf=Q,N.AsyncMode=ce,N.ConcurrentMode=Re,N.ContextConsumer=Ne,N.ContextProvider=Qe,N.Element=Je,N.ForwardRef=st,N.Fragment=pt,N.Lazy=Kt,N.Memo=Cn,N.Portal=Gt,N.Profiler=zn,N.StrictMode=si,N.Suspense=wr,N.isValidElementType=function(An){return typeof An=="string"||typeof An=="function"||An===ue||An===tt||An===ye||An===se||An===Dt||An===ht||typeof An=="object"&&An!==null&&(An.$$typeof===E||An.$$typeof===b||An.$$typeof===Ae||An.$$typeof===Ie||An.$$typeof===lt||An.$$typeof===w||An.$$typeof===I||An.$$typeof===H)},N.isAsyncMode=function(An){return ar||j(!(ar=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),Jr(An)||Q(An)===Ve},N.isConcurrentMode=Jr,N.isContextConsumer=function(An){return Q(An)===Ie},N.isContextProvider=function(An){return Q(An)===Ae},N.isElement=function(An){return typeof An=="object"&&An!==null&&An.$$typeof===K},N.isForwardRef=function(An){return Q(An)===lt},N.isFragment=function(An){return Q(An)===ue},N.isLazy=function(An){return Q(An)===E},N.isMemo=function(An){return Q(An)===b},N.isPortal=function(An){return Q(An)===oe},N.isProfiler=function(An){return Q(An)===ye},N.isStrictMode=function(An){return Q(An)===se},N.isSuspense=function(An){return Q(An)===Dt}})()});$d(Pi),Pi.typeOf,Pi.AsyncMode,Pi.ConcurrentMode,Pi.ContextConsumer,Pi.ContextProvider,Pi.Element,Pi.ForwardRef,Pi.Fragment,Pi.Lazy,Pi.Memo,Pi.Portal,Pi.Profiler,Pi.StrictMode,Pi.Suspense,Pi.isValidElementType,Pi.isAsyncMode,Pi.isConcurrentMode,Pi.isContextConsumer,Pi.isContextProvider,Pi.isElement,Pi.isForwardRef,Pi.isFragment,Pi.isLazy,Pi.isMemo,Pi.isPortal,Pi.isProfiler,Pi.isStrictMode,Pi.isSuspense;var Kd=gl(function(ee){ee.exports=Pi}),Jd=Object.getOwnPropertySymbols,bh=Object.prototype.hasOwnProperty,_h=Object.prototype.propertyIsEnumerable,Cc,Yd=function(){try{if(!Object.assign)return!1;var ee=new String("abc");if(ee[5]="de",Object.getOwnPropertyNames(ee)[0]==="5")return!1;for(var N={},U=0;U<10;U++)N["_"+String.fromCharCode(U)]=U;if(Object.getOwnPropertyNames(N).map(function(oe){return N[oe]}).join("")!=="0123456789")return!1;var K={};return"abcdefghijklmnopqrst".split("").forEach(function(oe){K[oe]=oe}),Object.keys(Object.assign({},K)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(ee,N){for(var U,K,oe=function(Ae){if(Ae==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Ae)}(ee),ue=1;ue<arguments.length;ue++){for(var se in U=Object(arguments[ue]))bh.call(U,se)&&(oe[se]=U[se]);if(Jd){K=Jd(U);for(var ye=0;ye<K.length;ye++)_h.call(U,K[ye])&&(oe[K[ye]]=U[K[ye]])}}return oe},ws="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tc={},Ch=Function.call.bind(Object.prototype.hasOwnProperty);function Xd(ee,N,U,K,oe){for(var ue in ee)if(Ch(ee,ue)){var se;try{if(typeof ee[ue]!="function"){var ye=Error((K||"React class")+": "+U+" type `"+ue+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ee[ue]+"`.");throw ye.name="Invariant Violation",ye}se=ee[ue](N,ue,K,U,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ie){se=Ie}if(!se||se instanceof Error||Cc((K||"React class")+": type specification of "+U+" `"+ue+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof se+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),se instanceof Error&&!(se.message in Tc)){Tc[se.message]=!0;var Ae=oe?oe():"";Cc("Failed "+U+" type: "+se.message+(Ae??""))}}}s(Xd,"checkPropTypes"),Cc=s(function(ee){var N="Warning: "+ee;typeof at<"u"&&at.error(N);try{throw new Error(N)}catch{}},"printWarning"),Xd.resetWarningCache=function(){Tc={}};var Os,Qd=Xd,Th=Function.call.bind(Object.prototype.hasOwnProperty);function Ms(){return null}s(Ms,"emptyFunctionThatReturnsNull"),Os=s(function(ee){var N="Warning: "+ee;typeof at<"u"&&at.error(N);try{throw new Error(N)}catch{}},"printWarning$1");function Zd(ee,N){var U=typeof Symbol=="function"&&Symbol.iterator,K="@@iterator",oe="<<anonymous>>",ue={array:Ie("array"),bool:Ie("boolean"),func:Ie("function"),number:Ie("number"),object:Ie("object"),string:Ie("string"),symbol:Ie("symbol"),any:Ae(Ms),arrayOf:function(ht){return Ae(function(b,E,w,I,H){if(typeof ht!="function")return new ye("Property `"+H+"` of component `"+w+"` has invalid PropType notation inside arrayOf.");var j=b[E];if(!Array.isArray(j))return new ye("Invalid "+I+" `"+H+"` of type `"+tt(j)+"` supplied to `"+w+"`, expected an array.");for(var Q=0;Q<j.length;Q++){var ce=ht(j,Q,w,I,H+"["+Q+"]",ws);if(ce instanceof Error)return ce}return null})},element:Ae(function(ht,b,E,w,I){var H=ht[b];return ee(H)?null:new ye("Invalid "+w+" `"+I+"` of type `"+tt(H)+"` supplied to `"+E+"`, expected a single ReactElement.")}),elementType:Ae(function(ht,b,E,w,I){var H=ht[b];return Kd.isValidElementType(H)?null:new ye("Invalid "+w+" `"+I+"` of type `"+tt(H)+"` supplied to `"+E+"`, expected a single ReactElement type.")}),instanceOf:function(ht){return Ae(function(b,E,w,I,H){if(b[E]instanceof ht)return null;var j=ht.name||oe;return new ye("Invalid "+I+" `"+H+"` of type `"+function(Q){return Q.constructor&&Q.constructor.name?Q.constructor.name:oe}(b[E])+"` supplied to `"+w+"`, expected instance of `"+j+"`.")})},node:Ae(function(ht,b,E,w,I){return Ve(ht[b])?null:new ye("Invalid "+w+" `"+I+"` supplied to `"+E+"`, expected a ReactNode.")}),objectOf:function(ht){return Ae(function(b,E,w,I,H){if(typeof ht!="function")return new ye("Property `"+H+"` of component `"+w+"` has invalid PropType notation inside objectOf.");var j=b[E],Q=tt(j);if(Q!=="object")return new ye("Invalid "+I+" `"+H+"` of type `"+Q+"` supplied to `"+w+"`, expected an object.");for(var ce in j)if(Th(j,ce)){var Re=ht(j,ce,w,I,H+"."+ce,ws);if(Re instanceof Error)return Re}return null})},oneOf:function(ht){return Array.isArray(ht)?Ae(function(b,E,w,I,H){for(var j=b[E],Q=0;Q<ht.length;Q++)if(se(j,ht[Q]))return null;var ce=JSON.stringify(ht,function(Re,Ne){return lt(Ne)==="symbol"?String(Ne):Ne});return new ye("Invalid "+I+" `"+H+"` of value `"+String(j)+"` supplied to `"+w+"`, expected one of "+ce+".")}):(Os(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Ms)},oneOfType:function(ht){if(!Array.isArray(ht))return Os("Invalid argument supplied to oneOfType, expected an instance of array."),Ms;for(var b=0;b<ht.length;b++){var E=ht[b];if(typeof E!="function")return Os("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Dt(E)+" at index "+b+"."),Ms}return Ae(function(w,I,H,j,Q){for(var ce=0;ce<ht.length;ce++)if((0,ht[ce])(w,I,H,j,Q,ws)==null)return null;return new ye("Invalid "+j+" `"+Q+"` supplied to `"+H+"`.")})},shape:function(ht){return Ae(function(b,E,w,I,H){var j=b[E],Q=tt(j);if(Q!=="object")return new ye("Invalid "+I+" `"+H+"` of type `"+Q+"` supplied to `"+w+"`, expected `object`.");for(var ce in ht){var Re=ht[ce];if(Re){var Ne=Re(j,ce,w,I,H+"."+ce,ws);if(Ne)return Ne}}return null})},exact:function(ht){return Ae(function(b,E,w,I,H){var j=b[E],Q=tt(j);if(Q!=="object")return new ye("Invalid "+I+" `"+H+"` of type `"+Q+"` supplied to `"+w+"`, expected `object`.");var ce=Yd({},b[E],ht);for(var Re in ce){var Ne=ht[Re];if(!Ne)return new ye("Invalid "+I+" `"+H+"` key `"+Re+"` supplied to `"+w+"`.\nBad object: "+JSON.stringify(b[E],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ht),null,"  "));var Qe=Ne(j,Re,w,I,H+"."+Re,ws);if(Qe)return Qe}return null})}};function se(ht,b){return ht===b?ht!==0||1/ht==1/b:ht!=ht&&b!=b}s(se,"is");function ye(ht){this.message=ht,this.stack=""}s(ye,"PropTypeError");function Ae(ht){var b={},E=0;function w(H,j,Q,ce,Re,Ne,Qe){if(ce=ce||oe,Ne=Ne||Q,Qe!==ws){if(N){var Je=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Je.name="Invariant Violation",Je}if(typeof at<"u"){var st=ce+":"+Q;!b[st]&&E<3&&(Os("You are manually calling a React.PropTypes validation function for the `"+Ne+"` prop on `"+ce+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),b[st]=!0,E++)}}return j[Q]==null?H?j[Q]===null?new ye("The "+Re+" `"+Ne+"` is marked as required in `"+ce+"`, but its value is `null`."):new ye("The "+Re+" `"+Ne+"` is marked as required in `"+ce+"`, but its value is `undefined`."):null:ht(j,Q,ce,Re,Ne)}s(w,"checkType");var I=w.bind(null,!1);return I.isRequired=w.bind(null,!0),I}s(Ae,"createChainableTypeChecker");function Ie(ht){return Ae(function(b,E,w,I,H,j){var Q=b[E];return tt(Q)===ht?null:new ye("Invalid "+I+" `"+H+"` of type `"+lt(Q)+"` supplied to `"+w+"`, expected `"+ht+"`.")})}s(Ie,"createPrimitiveTypeChecker");function Ve(ht){switch(typeof ht){case"number":case"string":case"undefined":return!0;case"boolean":return!ht;case"object":if(Array.isArray(ht))return ht.every(Ve);if(ht===null||ee(ht))return!0;var b=function(H){var j=H&&(U&&H[U]||H[K]);if(typeof j=="function")return j}(ht);if(!b)return!1;var E,w=b.call(ht);if(b!==ht.entries){for(;!(E=w.next()).done;)if(!Ve(E.value))return!1}else for(;!(E=w.next()).done;){var I=E.value;if(I&&!Ve(I[1]))return!1}return!0;default:return!1}}s(Ve,"isNode");function tt(ht){var b=typeof ht;return Array.isArray(ht)?"array":ht instanceof RegExp?"object":function(E,w){return E==="symbol"||!!w&&(w["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&w instanceof Symbol)}(b,ht)?"symbol":b}s(tt,"getPropType");function lt(ht){if(ht==null)return""+ht;var b=tt(ht);if(b==="object"){if(ht instanceof Date)return"date";if(ht instanceof RegExp)return"regexp"}return b}s(lt,"getPreciseType");function Dt(ht){var b=lt(ht);switch(b){case"array":case"object":return"an "+b;case"boolean":case"date":case"regexp":return"a "+b;default:return b}}return s(Dt,"getPostfixForTypeWarning"),ye.prototype=Error.prototype,ue.checkPropTypes=Qd,ue.resetWarningCache=Qd.resetWarningCache,ue.PropTypes=ue}s(Zd,"factoryWithTypeCheckers");var Tt=gl(function(ee){var N=Kd;ee.exports=Zd(N.isElement,!0)});function ra(ee){var N,U,K="";if(ee)if(typeof ee=="object")if(ee.push)for(N=0;N<ee.length;N++)ee[N]&&(U=ra(ee[N]))&&(K&&(K+=" "),K+=U);else for(N in ee)ee[N]&&(U=ra(N))&&(K&&(K+=" "),K+=U);else typeof ee=="boolean"||ee.call||(K&&(K+=" "),K+=ee);return K}s(ra,"toVal");function hn(){for(var ee,N=0,U="";N<arguments.length;)(ee=ra(arguments[N++]))&&(U&&(U+=" "),U+=ee);return U}s(hn,"clsx");function oa(ee){var N=!(0<arguments.length&&ee!==void 0)||ee,U={};return function(K){var oe=K.callback,ue=K.indices,se=Object.keys(ue),ye=!N||se.every(function(Ie){var Ve=ue[Ie];return Array.isArray(Ve)?0<Ve.length:0<=Ve}),Ae=se.length!==Object.keys(U).length||se.some(function(Ie){var Ve=U[Ie],tt=ue[Ie];return Array.isArray(tt)?Ve.join(",")!==tt.join(","):Ve!==tt});U=ue,ye&&Ae&&oe(ue)}}s(oa,"createCallbackMemoizer");var sa,Sl=!(typeof z>"u"||!z.document||!z.document.createElement);function di(ee){if((!sa&&sa!==0||ee)&&Sl){var N=$e.createElement("div");N.style.position="absolute",N.style.top="-9999px",N.style.width="50px",N.style.height="50px",N.style.overflow="scroll",$e.body.appendChild(N),sa=N.offsetWidth-N.clientWidth,$e.body.removeChild(N)}return sa}s(di,"scrollbarSize");var Ih="observed",Fr="requested",vl=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),ut(Ot(U),"_calculateSizeAndPositionDataOnNextUpdate",!1),ut(Ot(U),"_onSectionRenderedMemoizer",oa()),ut(Ot(U),"_onScrollMemoizer",oa(!1)),ut(Ot(U),"_invokeOnSectionRenderedHelper",function(){var se=U.props,ye=se.cellLayoutManager,Ae=se.onSectionRendered;U._onSectionRenderedMemoizer({callback:Ae,indices:{indices:ye.getLastRenderedIndices()}})}),ut(Ot(U),"_setScrollingContainerRef",function(se){U._scrollingContainer=se}),ut(Ot(U),"_updateScrollPositionForScrollToCell",function(){var se=U.props,ye=se.cellLayoutManager,Ae=se.height,Ie=se.scrollToAlignment,Ve=se.scrollToCell,tt=se.width,lt=U.state,Dt=lt.scrollLeft,ht=lt.scrollTop;if(0<=Ve){var b=ye.getScrollPositionForCell({align:Ie,cellIndex:Ve,height:Ae,scrollLeft:Dt,scrollTop:ht,width:tt});b.scrollLeft===Dt&&b.scrollTop===ht||U._setScrollPosition(b)}}),ut(Ot(U),"_onScroll",function(se){if(se.target===U._scrollingContainer){U._enablePointerEventsAfterDelay();var ye=U.props,Ae=ye.cellLayoutManager,Ie=ye.height,Ve=ye.isScrollingChange,tt=ye.width,lt=U._scrollbarSize,Dt=Ae.getTotalSize(),ht=Dt.height,b=Dt.width,E=Math.max(0,Math.min(b-tt+lt,se.target.scrollLeft)),w=Math.max(0,Math.min(ht-Ie+lt,se.target.scrollTop));if(U.state.scrollLeft!==E||U.state.scrollTop!==w){var I=se.cancelable?Ih:Fr;U.state.isScrolling||Ve(!0),U.setState({isScrolling:!0,scrollLeft:E,scrollPositionChangeReason:I,scrollTop:w})}U._invokeOnScrollMemoizer({scrollLeft:E,scrollTop:w,totalWidth:b,totalHeight:ht})}}),U._scrollbarSize=di(),U._scrollbarSize===void 0?(U._scrollbarSizeMeasured=!1,U._scrollbarSize=0):U._scrollbarSizeMeasured=!0,U}return s(ee,"CollectionView"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var N=this.props,U=N.cellLayoutManager,K=N.scrollLeft,oe=N.scrollToCell,ue=N.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=di(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=oe?this._updateScrollPositionForScrollToCell():(0<=K||0<=ue)&&this._setScrollPosition({scrollLeft:K,scrollTop:ue}),this._invokeOnSectionRenderedHelper();var se=U.getTotalSize(),ye=se.height,Ae=se.width;this._invokeOnScrollMemoizer({scrollLeft:K||0,scrollTop:ue||0,totalHeight:ye,totalWidth:Ae})}},{key:"componentDidUpdate",value:function(N,U){var K=this.props,oe=K.height,ue=K.scrollToAlignment,se=K.scrollToCell,ye=K.width,Ae=this.state,Ie=Ae.scrollLeft,Ve=Ae.scrollPositionChangeReason,tt=Ae.scrollTop;Ve===Fr&&(0<=Ie&&Ie!==U.scrollLeft&&Ie!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=Ie),0<=tt&&tt!==U.scrollTop&&tt!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=tt)),oe===N.height&&ue===N.scrollToAlignment&&se===N.scrollToCell&&ye===N.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Vt(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var N=this.props,U=N.autoHeight,K=N.cellCount,oe=N.cellLayoutManager,ue=N.className,se=N.height,ye=N.horizontalOverscanSize,Ae=N.id,Ie=N.noContentRenderer,Ve=N.style,tt=N.verticalOverscanSize,lt=N.width,Dt=this.state,ht=Dt.isScrolling,b=Dt.scrollLeft,E=Dt.scrollTop;this._lastRenderedCellCount===K&&this._lastRenderedCellLayoutManager===oe&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=K,this._lastRenderedCellLayoutManager=oe,this._calculateSizeAndPositionDataOnNextUpdate=!1,oe.calculateSizeAndPositionData());var w=oe.getTotalSize(),I=w.height,H=w.width,j=Math.max(0,b-ye),Q=Math.max(0,E-tt),ce=Math.min(H,b+lt+ye),Re=Math.min(I,E+se+tt),Ne=0<se&&0<lt?oe.cellRenderers({height:Re-Q,isScrolling:ht,width:ce-j,x:j,y:Q}):[],Qe={boxSizing:"border-box",direction:"ltr",height:U?"auto":se,position:"relative",WebkitOverflowScrolling:"touch",width:lt,willChange:"transform"},Je=se<I?this._scrollbarSize:0,st=lt<H?this._scrollbarSize:0;return Qe.overflowX=H+Je<=lt?"hidden":"auto",Qe.overflowY=I+st<=se?"hidden":"auto",Ln.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:hn("ReactVirtualized__Collection",ue),id:Ae,onScroll:this._onScroll,role:"grid",style:_i({},Qe,{},Ve),tabIndex:0},0<K&&Ln.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:I,maxHeight:I,maxWidth:H,overflow:"hidden",pointerEvents:ht?"none":"",width:H}},Ne),K===0&&Ie())}},{key:"_enablePointerEventsAfterDelay",value:function(){var N=this;this._disablePointerEventsTimeoutId&&Vt(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=af(function(){(0,N.props.isScrollingChange)(!1),N._disablePointerEventsTimeoutId=null,N.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(N){var U=this,K=N.scrollLeft,oe=N.scrollTop,ue=N.totalHeight,se=N.totalWidth;this._onScrollMemoizer({callback:function(ye){var Ae=ye.scrollLeft,Ie=ye.scrollTop,Ve=U.props,tt=Ve.height;(0,Ve.onScroll)({clientHeight:tt,clientWidth:Ve.width,scrollHeight:ue,scrollLeft:Ae,scrollTop:Ie,scrollWidth:se})},indices:{scrollLeft:K,scrollTop:oe}})}},{key:"_setScrollPosition",value:function(N){var U=N.scrollLeft,K=N.scrollTop,oe={scrollPositionChangeReason:Fr};0<=U&&(oe.scrollLeft=U),0<=K&&(oe.scrollTop=K),(0<=U&&U!==this.state.scrollLeft||0<=K&&K!==this.state.scrollTop)&&this.setState(oe)}}],[{key:"getDerivedStateFromProps",value:function(N,U){return N.cellCount!==0||U.scrollLeft===0&&U.scrollTop===0?N.scrollLeft!==U.scrollLeft||N.scrollTop!==U.scrollTop?{scrollLeft:N.scrollLeft!=null?N.scrollLeft:U.scrollLeft,scrollTop:N.scrollTop!=null?N.scrollTop:U.scrollTop,scrollPositionChangeReason:Fr}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Fr}}}]),ee}();ut(vl,"propTypes",{"aria-label":Tt.string,autoHeight:Tt.bool,cellCount:Tt.number.isRequired,cellLayoutManager:Tt.object.isRequired,className:Tt.string,height:Tt.number.isRequired,id:Tt.string,horizontalOverscanSize:Tt.number.isRequired,isScrollingChange:Tt.func,noContentRenderer:Tt.func.isRequired,onScroll:Tt.func.isRequired,onSectionRendered:Tt.func.isRequired,scrollLeft:Tt.number,scrollToAlignment:Tt.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:Tt.number.isRequired,scrollTop:Tt.number,style:Tt.object,verticalOverscanSize:Tt.number.isRequired,width:Tt.number.isRequired}),ut(vl,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),xn(vl);var Dh=function(){function ee(N){var U=N.height,K=N.width,oe=N.x,ue=N.y;sr(this,ee),this.height=U,this.width=K,this.x=oe,this.y=ue,this._indexMap={},this._indices=[]}return s(ee,"Section"),hr(ee,[{key:"addCellIndex",value:function(N){var U=N.index;this._indexMap[U]||(this._indexMap[U]=!0,this._indices.push(U))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),ee}(),So=function(){function ee(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;sr(this,ee),this._sectionSize=N,this._cellMetadata=[],this._sections={}}return s(ee,"SectionManager"),hr(ee,[{key:"getCellIndices",value:function(N){var U=N.height,K=N.width,oe=N.x,ue=N.y,se={};return this.getSections({height:U,width:K,x:oe,y:ue}).forEach(function(ye){return ye.getCellIndices().forEach(function(Ae){se[Ae]=Ae})}),Object.keys(se).map(function(ye){return se[ye]})}},{key:"getCellMetadata",value:function(N){var U=N.index;return this._cellMetadata[U]}},{key:"getSections",value:function(N){for(var U=N.height,K=N.width,oe=N.x,ue=N.y,se=Math.floor(oe/this._sectionSize),ye=Math.floor((oe+K-1)/this._sectionSize),Ae=Math.floor(ue/this._sectionSize),Ie=Math.floor((ue+U-1)/this._sectionSize),Ve=[],tt=se;tt<=ye;tt++)for(var lt=Ae;lt<=Ie;lt++){var Dt="".concat(tt,".").concat(lt);this._sections[Dt]||(this._sections[Dt]=new Dh({height:this._sectionSize,width:this._sectionSize,x:tt*this._sectionSize,y:lt*this._sectionSize})),Ve.push(this._sections[Dt])}return Ve}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var N=this;return Object.keys(this._sections).map(function(U){return N._sections[U].toString()})}},{key:"registerCell",value:function(N){var U=N.cellMetadatum,K=N.index;this._cellMetadata[K]=U,this.getSections(U).forEach(function(oe){return oe.addCellIndex({index:K})})}}]),ee}();function qd(ee){var N=ee.align,U=N===void 0?"auto":N,K=ee.cellOffset,oe=ee.cellSize,ue=ee.containerSize,se=ee.currentOffset,ye=K,Ae=ye-ue+oe;switch(U){case"start":return ye;case"end":return Ae;case"center":return ye-(ue-oe)/2;default:return Math.max(Ae,Math.min(ye,se))}}s(qd,"getUpdatedOffsetForIndex");var Ic=function(){function ee(N,U){var K;return sr(this,ee),(K=Lr(this,Mr(ee).call(this,N,U)))._cellMetadata=[],K._lastRenderedCellIndices=[],K._cellCache=[],K._isScrollingChange=K._isScrollingChange.bind(Ot(K)),K._setCollectionViewRef=K._setCollectionViewRef.bind(Ot(K)),K}return s(ee,"Collection"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var N=go({},this.props);return Ln.createElement(vl,go({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},N))}},{key:"calculateSizeAndPositionData",value:function(){var N=this.props,U=function(K){for(var oe=K.cellCount,ue=K.cellSizeAndPositionGetter,se=K.sectionSize,ye=[],Ae=new So(se),Ie=0,Ve=0,tt=0;tt<oe;tt++){var lt=ue({index:tt});if(lt.height==null||isNaN(lt.height)||lt.width==null||isNaN(lt.width)||lt.x==null||isNaN(lt.x)||lt.y==null||isNaN(lt.y))throw Error("Invalid metadata returned for cell ".concat(tt,`:
        x:`).concat(lt.x,", y:").concat(lt.y,", width:").concat(lt.width,", height:").concat(lt.height));Ie=Math.max(Ie,lt.y+lt.height),Ve=Math.max(Ve,lt.x+lt.width),ye[tt]=lt,Ae.registerCell({cellMetadatum:lt,index:tt})}return{cellMetadata:ye,height:Ie,sectionManager:Ae,width:Ve}}({cellCount:N.cellCount,cellSizeAndPositionGetter:N.cellSizeAndPositionGetter,sectionSize:N.sectionSize});this._cellMetadata=U.cellMetadata,this._sectionManager=U.sectionManager,this._height=U.height,this._width=U.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(N){var U=N.align,K=N.cellIndex,oe=N.height,ue=N.scrollLeft,se=N.scrollTop,ye=N.width,Ae=this.props.cellCount;if(0<=K&&K<Ae){var Ie=this._cellMetadata[K];ue=qd({align:U,cellOffset:Ie.x,cellSize:Ie.width,containerSize:ye,currentOffset:ue,targetIndex:K}),se=qd({align:U,cellOffset:Ie.y,cellSize:Ie.height,containerSize:oe,currentOffset:se,targetIndex:K})}return{scrollLeft:ue,scrollTop:se}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(N){var U=this,K=N.height,oe=N.isScrolling,ue=N.width,se=N.x,ye=N.y,Ae=this.props,Ie=Ae.cellGroupRenderer,Ve=Ae.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:K,width:ue,x:se,y:ye}),Ie({cellCache:this._cellCache,cellRenderer:Ve,cellSizeAndPositionGetter:function(tt){var lt=tt.index;return U._sectionManager.getCellMetadata({index:lt})},indices:this._lastRenderedCellIndices,isScrolling:oe})}},{key:"_isScrollingChange",value:function(N){N||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(N){this._collectionView=N}}]),ee}();ut(Ic,"propTypes",{"aria-label":Tt.string,cellCount:Tt.number.isRequired,cellGroupRenderer:Tt.func.isRequired,cellRenderer:Tt.func.isRequired,cellSizeAndPositionGetter:Tt.func.isRequired,sectionSize:Tt.number}),ut(Ic,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(ee){var N=ee.cellCache,U=ee.cellRenderer,K=ee.cellSizeAndPositionGetter,oe=ee.indices,ue=ee.isScrolling;return oe.map(function(se){var ye=K({index:se}),Ae={index:se,isScrolling:ue,key:se,style:{height:ye.height,left:ye.x,position:"absolute",top:ye.y,width:ye.width}};return ue?(se in N||(N[se]=U(Ae)),N[se]):U(Ae)}).filter(function(se){return!!se})}});var Yo=function(){function ee(N,U){var K;return sr(this,ee),(K=Lr(this,Mr(ee).call(this,N,U)))._registerChild=K._registerChild.bind(Ot(K)),K}return s(ee,"ColumnSizer"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"componentDidUpdate",value:function(N){var U=this.props,K=U.columnMaxWidth,oe=U.columnMinWidth,ue=U.columnCount,se=U.width;K===N.columnMaxWidth&&oe===N.columnMinWidth&&ue===N.columnCount&&se===N.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var N=this.props,U=N.children,K=N.columnMaxWidth,oe=N.columnMinWidth,ue=N.columnCount,se=N.width,ye=oe||1,Ae=K?Math.min(K,se):se,Ie=se/ue;return Ie=Math.max(ye,Ie),Ie=Math.min(Ae,Ie),Ie=Math.floor(Ie),U({adjustedWidth:Math.min(se,Ie*ue),columnWidth:Ie,getColumnWidth:function(){return Ie},registerChild:this._registerChild})}},{key:"_registerChild",value:function(N){if(N&&typeof N.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=N,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),ee}();function eu(ee){var N=ee.cellCount,U=ee.cellSize,K=ee.computeMetadataCallback,oe=ee.computeMetadataCallbackProps,ue=ee.nextCellsCount,se=ee.nextCellSize,ye=ee.nextScrollToIndex,Ae=ee.scrollToIndex,Ie=ee.updateScrollOffsetForScrollToIndex;N===ue&&(typeof U!="number"&&typeof se!="number"||U===se)||(K(oe),0<=Ae&&Ae===ye&&Ie())}s(eu,"calculateSizeAndPositionDataAndUpdateScrollOffset"),ut(Yo,"propTypes",{children:Tt.func.isRequired,columnMaxWidth:Tt.number,columnMinWidth:Tt.number,columnCount:Tt.number.isRequired,width:Tt.number.isRequired});var no,Ah=function(){function ee(N){var U=N.cellCount,K=N.cellSizeGetter,oe=N.estimatedCellSize;sr(this,ee),ut(this,"_cellSizeAndPositionData",{}),ut(this,"_lastMeasuredIndex",-1),ut(this,"_lastBatchedIndex",-1),ut(this,"_cellCount",void 0),ut(this,"_cellSizeGetter",void 0),ut(this,"_estimatedCellSize",void 0),this._cellSizeGetter=K,this._cellCount=U,this._estimatedCellSize=oe}return s(ee,"CellSizeAndPositionManager"),hr(ee,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(N){var U=N.cellCount,K=N.estimatedCellSize,oe=N.cellSizeGetter;this._cellCount=U,this._estimatedCellSize=K,this._cellSizeGetter=oe}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(N){if(N<0||N>=this._cellCount)throw Error("Requested index ".concat(N," is outside of range 0..").concat(this._cellCount));if(N>this._lastMeasuredIndex)for(var U=this.getSizeAndPositionOfLastMeasuredCell(),K=U.offset+U.size,oe=this._lastMeasuredIndex+1;oe<=N;oe++){var ue=this._cellSizeGetter({index:oe});if(ue===void 0||isNaN(ue))throw Error("Invalid size returned for cell ".concat(oe," of value ").concat(ue));ue===null?(this._cellSizeAndPositionData[oe]={offset:K,size:0},this._lastBatchedIndex=N):(this._cellSizeAndPositionData[oe]={offset:K,size:ue},K+=ue,this._lastMeasuredIndex=N)}return this._cellSizeAndPositionData[N]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var N=this.getSizeAndPositionOfLastMeasuredCell();return N.offset+N.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(N){var U=N.align,K=U===void 0?"auto":U,oe=N.containerSize,ue=N.currentOffset,se=N.targetIndex;if(oe<=0)return 0;var ye,Ae=this.getSizeAndPositionOfCell(se),Ie=Ae.offset,Ve=Ie-oe+Ae.size;switch(K){case"start":ye=Ie;break;case"end":ye=Ve;break;case"center":ye=Ie-(oe-Ae.size)/2;break;default:ye=Math.max(Ve,Math.min(Ie,ue))}var tt=this.getTotalSize();return Math.max(0,Math.min(tt-oe,ye))}},{key:"getVisibleCellRange",value:function(N){var U=N.containerSize,K=N.offset;if(this.getTotalSize()===0)return{};var oe=K+U,ue=this._findNearestCell(K),se=this.getSizeAndPositionOfCell(ue);K=se.offset+se.size;for(var ye=ue;K<oe&&ye<this._cellCount-1;)ye++,K+=this.getSizeAndPositionOfCell(ye).size;return{start:ue,stop:ye}}},{key:"resetCell",value:function(N){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,N-1)}},{key:"_binarySearch",value:function(N,U,K){for(;U<=N;){var oe=U+Math.floor((N-U)/2),ue=this.getSizeAndPositionOfCell(oe).offset;if(ue===K)return oe;ue<K?U=oe+1:K<ue&&(N=oe-1)}return 0<U?U-1:0}},{key:"_exponentialSearch",value:function(N,U){for(var K=1;N<this._cellCount&&this.getSizeAndPositionOfCell(N).offset<U;)N+=K,K*=2;return this._binarySearch(Math.min(N,this._cellCount-1),Math.floor(N/2),U)}},{key:"_findNearestCell",value:function(N){if(isNaN(N))throw Error("Invalid offset ".concat(N," specified"));N=Math.max(0,N);var U=this.getSizeAndPositionOfLastMeasuredCell(),K=Math.max(0,this._lastMeasuredIndex);return U.offset>=N?this._binarySearch(K,0,N):this._exponentialSearch(K,N)}}]),ee}(),tu=s(function(){return typeof z<"u"&&z.chrome?16777100:15e5},"getMaxElementSize"),aa=function(){function ee(N){var U=N.maxScrollSize,K=U===void 0?tu():U,oe=ia(N,["maxScrollSize"]);sr(this,ee),ut(this,"_cellSizeAndPositionManager",void 0),ut(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Ah(oe),this._maxScrollSize=K}return s(ee,"ScalingCellSizeAndPositionManager"),hr(ee,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(N){this._cellSizeAndPositionManager.configure(N)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(N){var U=N.containerSize,K=N.offset,oe=this._cellSizeAndPositionManager.getTotalSize(),ue=this.getTotalSize(),se=this._getOffsetPercentage({containerSize:U,offset:K,totalSize:ue});return Math.round(se*(ue-oe))}},{key:"getSizeAndPositionOfCell",value:function(N){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(N)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(N){var U=N.align,K=U===void 0?"auto":U,oe=N.containerSize,ue=N.currentOffset,se=N.targetIndex;ue=this._safeOffsetToOffset({containerSize:oe,offset:ue});var ye=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:K,containerSize:oe,currentOffset:ue,targetIndex:se});return this._offsetToSafeOffset({containerSize:oe,offset:ye})}},{key:"getVisibleCellRange",value:function(N){var U=N.containerSize,K=N.offset;return K=this._safeOffsetToOffset({containerSize:U,offset:K}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:U,offset:K})}},{key:"resetCell",value:function(N){this._cellSizeAndPositionManager.resetCell(N)}},{key:"_getOffsetPercentage",value:function(N){var U=N.containerSize,K=N.offset,oe=N.totalSize;return oe<=U?0:K/(oe-U)}},{key:"_offsetToSafeOffset",value:function(N){var U=N.containerSize,K=N.offset,oe=this._cellSizeAndPositionManager.getTotalSize(),ue=this.getTotalSize();if(oe===ue)return K;var se=this._getOffsetPercentage({containerSize:U,offset:K,totalSize:oe});return Math.round(se*(ue-U))}},{key:"_safeOffsetToOffset",value:function(N){var U=N.containerSize,K=N.offset,oe=this._cellSizeAndPositionManager.getTotalSize(),ue=this.getTotalSize();if(oe===ue)return K;var se=this._getOffsetPercentage({containerSize:U,offset:K,totalSize:ue});return Math.round(se*(oe-U))}}]),ee}();function nu(ee){var N=ee.cellCount,U=ee.overscanCellsCount,K=ee.scrollDirection,oe=ee.startIndex,ue=ee.stopIndex;return K===1?{overscanStartIndex:Math.max(0,oe),overscanStopIndex:Math.min(N-1,ue+U)}:{overscanStartIndex:Math.max(0,oe-U),overscanStopIndex:Math.min(N-1,ue)}}s(nu,"defaultOverscanIndicesGetter");function io(ee){var N=ee.cellSize,U=ee.cellSizeAndPositionManager,K=ee.previousCellsCount,oe=ee.previousCellSize,ue=ee.previousScrollToAlignment,se=ee.previousScrollToIndex,ye=ee.previousSize,Ae=ee.scrollOffset,Ie=ee.scrollToAlignment,Ve=ee.scrollToIndex,tt=ee.size,lt=ee.sizeJustIncreasedFromZero,Dt=ee.updateScrollIndexCallback,ht=U.getCellCount(),b=0<=Ve&&Ve<ht;b&&(tt!==ye||lt||!oe||typeof N=="number"&&N!==oe||Ie!==ue||Ve!==se)?Dt(Ve):!b&&0<ht&&(tt<ye||ht<K)&&Ae>U.getTotalSize()-tt&&Dt(ht-1)}s(io,"updateScrollIndexHelper");function iu(ee){for(var N=ee.cellCache,U=ee.cellRenderer,K=ee.columnSizeAndPositionManager,oe=ee.columnStartIndex,ue=ee.columnStopIndex,se=ee.deferredMeasurementCache,ye=ee.horizontalOffsetAdjustment,Ae=ee.isScrolling,Ie=ee.isScrollingOptOut,Ve=ee.parent,tt=ee.rowSizeAndPositionManager,lt=ee.rowStartIndex,Dt=ee.rowStopIndex,ht=ee.styleCache,b=ee.verticalOffsetAdjustment,E=ee.visibleColumnIndices,w=ee.visibleRowIndices,I=[],H=K.areOffsetsAdjusted()||tt.areOffsetsAdjusted(),j=!Ae&&!H,Q=lt;Q<=Dt;Q++)for(var ce=tt.getSizeAndPositionOfCell(Q),Re=oe;Re<=ue;Re++){var Ne=K.getSizeAndPositionOfCell(Re),Qe=Re>=E.start&&Re<=E.stop&&Q>=w.start&&Q<=w.stop,Je="".concat(Q,"-").concat(Re),st=void 0;j&&ht[Je]?st=ht[Je]:se&&!se.has(Q,Re)?st={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(st={height:ce.size,left:Ne.offset+ye,position:"absolute",top:ce.offset+b,width:Ne.size},ht[Je]=st);var pt={columnIndex:Re,isScrolling:Ae,isVisible:Qe,key:Je,parent:Ve,rowIndex:Q,style:st},Kt=void 0;(Kt=!Ie&&!Ae||ye||b?U(pt):(N[Je]||(N[Je]=U(pt)),N[Je]))!=null&&Kt!==!1&&(wh(Ve,Kt),I.push(Kt))}return I}s(iu,"defaultCellRangeRenderer");function wh(ee,N){N&&(N.type&&N.type.__internalCellMeasurerFlag&&(N=N.props.children),N&&N.props&&N.props.style===void 0&&ee.__warnedAboutMissingStyle!==!0&&(ee.__warnedAboutMissingStyle=!0,at.warn("Rendered cell should include style property for positioning.")))}s(wh,"warnAboutMissingStyle");var vo=(no=typeof z<"u"?z:typeof nl<"u"?nl:{}).requestAnimationFrame||no.webkitRequestAnimationFrame||no.mozRequestAnimationFrame||no.oRequestAnimationFrame||no.msRequestAnimationFrame||function(ee){return no.setTimeout(ee,1e3/60)},Rs=no.cancelAnimationFrame||no.webkitCancelAnimationFrame||no.mozCancelAnimationFrame||no.oCancelAnimationFrame||no.msCancelAnimationFrame||function(ee){no.clearTimeout(ee)},ru=vo,Ps=Rs,ro=s(function(ee){return Ps(ee.id)},"cancelAnimationTimeout"),Dc=s(function(ee,N){var U;Promise.resolve().then(function(){U=Date.now()});var K={id:ru(s(function oe(){Date.now()-U>=N?ee.call():K.id=ru(oe)},"timeout"))};return K},"requestAnimationTimeout"),Oh="observed",fi="requested",yo=function(){function ee(N){var U;sr(this,ee),ut(Ot(U=Lr(this,Mr(ee).call(this,N))),"_onGridRenderedMemoizer",oa()),ut(Ot(U),"_onScrollMemoizer",oa(!1)),ut(Ot(U),"_deferredInvalidateColumnIndex",null),ut(Ot(U),"_deferredInvalidateRowIndex",null),ut(Ot(U),"_recomputeScrollLeftFlag",!1),ut(Ot(U),"_recomputeScrollTopFlag",!1),ut(Ot(U),"_horizontalScrollBarSize",0),ut(Ot(U),"_verticalScrollBarSize",0),ut(Ot(U),"_scrollbarPresenceChanged",!1),ut(Ot(U),"_scrollingContainer",void 0),ut(Ot(U),"_childrenToDisplay",void 0),ut(Ot(U),"_columnStartIndex",void 0),ut(Ot(U),"_columnStopIndex",void 0),ut(Ot(U),"_rowStartIndex",void 0),ut(Ot(U),"_rowStopIndex",void 0),ut(Ot(U),"_renderedColumnStartIndex",0),ut(Ot(U),"_renderedColumnStopIndex",0),ut(Ot(U),"_renderedRowStartIndex",0),ut(Ot(U),"_renderedRowStopIndex",0),ut(Ot(U),"_initialScrollTop",void 0),ut(Ot(U),"_initialScrollLeft",void 0),ut(Ot(U),"_disablePointerEventsTimeoutId",void 0),ut(Ot(U),"_styleCache",{}),ut(Ot(U),"_cellCache",{}),ut(Ot(U),"_debounceScrollEndedCallback",function(){U._disablePointerEventsTimeoutId=null,U.setState({isScrolling:!1,needToResetStyleCache:!1})}),ut(Ot(U),"_invokeOnGridRenderedHelper",function(){var ue=U.props.onSectionRendered;U._onGridRenderedMemoizer({callback:ue,indices:{columnOverscanStartIndex:U._columnStartIndex,columnOverscanStopIndex:U._columnStopIndex,columnStartIndex:U._renderedColumnStartIndex,columnStopIndex:U._renderedColumnStopIndex,rowOverscanStartIndex:U._rowStartIndex,rowOverscanStopIndex:U._rowStopIndex,rowStartIndex:U._renderedRowStartIndex,rowStopIndex:U._renderedRowStopIndex}})}),ut(Ot(U),"_setScrollingContainerRef",function(ue){U._scrollingContainer=ue}),ut(Ot(U),"_onScroll",function(ue){ue.target===U._scrollingContainer&&U.handleScrollEvent(ue.target)});var K=new aa({cellCount:N.columnCount,cellSizeGetter:function(ue){return ee._wrapSizeGetter(N.columnWidth)(ue)},estimatedCellSize:ee._getEstimatedColumnSize(N)}),oe=new aa({cellCount:N.rowCount,cellSizeGetter:function(ue){return ee._wrapSizeGetter(N.rowHeight)(ue)},estimatedCellSize:ee._getEstimatedRowSize(N)});return U.state={instanceProps:{columnSizeAndPositionManager:K,rowSizeAndPositionManager:oe,prevColumnWidth:N.columnWidth,prevRowHeight:N.rowHeight,prevColumnCount:N.columnCount,prevRowCount:N.rowCount,prevIsScrolling:N.isScrolling===!0,prevScrollToColumn:N.scrollToColumn,prevScrollToRow:N.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<N.scrollToRow&&(U._initialScrollTop=U._getCalculatedScrollTop(N,U.state)),0<N.scrollToColumn&&(U._initialScrollLeft=U._getCalculatedScrollLeft(N,U.state)),U}return s(ee,"Grid"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"getOffsetForCell",value:function(N){var U=0<arguments.length&&N!==void 0?N:{},K=U.alignment,oe=K===void 0?this.props.scrollToAlignment:K,ue=U.columnIndex,se=ue===void 0?this.props.scrollToColumn:ue,ye=U.rowIndex,Ae=ye===void 0?this.props.scrollToRow:ye,Ie=_i({},this.props,{scrollToAlignment:oe,scrollToColumn:se,scrollToRow:Ae});return{scrollLeft:this._getCalculatedScrollLeft(Ie),scrollTop:this._getCalculatedScrollTop(Ie)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(N){var U=N.scrollLeft,K=U===void 0?0:U,oe=N.scrollTop,ue=oe===void 0?0:oe;if(!(ue<0)){this._debounceScrollEnded();var se=this.props,ye=se.autoHeight,Ae=se.autoWidth,Ie=se.height,Ve=se.width,tt=this.state.instanceProps,lt=tt.scrollbarSize,Dt=tt.rowSizeAndPositionManager.getTotalSize(),ht=tt.columnSizeAndPositionManager.getTotalSize(),b=Math.min(Math.max(0,ht-Ve+lt),K),E=Math.min(Math.max(0,Dt-Ie+lt),ue);if(this.state.scrollLeft!==b||this.state.scrollTop!==E){var w={isScrolling:!0,scrollDirectionHorizontal:b!==this.state.scrollLeft?b>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:E!==this.state.scrollTop?E>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:Oh};ye||(w.scrollTop=E),Ae||(w.scrollLeft=b),w.needToResetStyleCache=!1,this.setState(w)}this._invokeOnScrollMemoizer({scrollLeft:b,scrollTop:E,totalColumnsWidth:ht,totalRowsHeight:Dt})}}},{key:"invalidateCellSizeAfterRender",value:function(N){var U=N.columnIndex,K=N.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,U):U,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,K):K}},{key:"measureAllCells",value:function(){var N=this.props,U=N.columnCount,K=N.rowCount,oe=this.state.instanceProps;oe.columnSizeAndPositionManager.getSizeAndPositionOfCell(U-1),oe.rowSizeAndPositionManager.getSizeAndPositionOfCell(K-1)}},{key:"recomputeGridSize",value:function(N){var U=0<arguments.length&&N!==void 0?N:{},K=U.columnIndex,oe=K===void 0?0:K,ue=U.rowIndex,se=ue===void 0?0:ue,ye=this.props,Ae=ye.scrollToColumn,Ie=ye.scrollToRow,Ve=this.state.instanceProps;Ve.columnSizeAndPositionManager.resetCell(oe),Ve.rowSizeAndPositionManager.resetCell(se),this._recomputeScrollLeftFlag=0<=Ae&&(this.state.scrollDirectionHorizontal===1?oe<=Ae:Ae<=oe),this._recomputeScrollTopFlag=0<=Ie&&(this.state.scrollDirectionVertical===1?se<=Ie:Ie<=se),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(N){var U=N.columnIndex,K=N.rowIndex,oe=this.props.columnCount,ue=this.props;1<oe&&U!==void 0&&this._updateScrollLeftForScrollToColumn(_i({},ue,{scrollToColumn:U})),K!==void 0&&this._updateScrollTopForScrollToRow(_i({},ue,{scrollToRow:K}))}},{key:"componentDidMount",value:function(){var N=this.props,U=N.getScrollbarSize,K=N.height,oe=N.scrollLeft,ue=N.scrollToColumn,se=N.scrollTop,ye=N.scrollToRow,Ae=N.width,Ie=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),Ie.scrollbarSizeMeasured||this.setState(function(lt){var Dt=_i({},lt,{needToResetStyleCache:!1});return Dt.instanceProps.scrollbarSize=U(),Dt.instanceProps.scrollbarSizeMeasured=!0,Dt}),typeof oe=="number"&&0<=oe||typeof se=="number"&&0<=se){var Ve=ee._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:oe,scrollTop:se});Ve&&(Ve.needToResetStyleCache=!1,this.setState(Ve))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var tt=0<K&&0<Ae;0<=ue&&tt&&this._updateScrollLeftForScrollToColumn(),0<=ye&&tt&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:oe||0,scrollTop:se||0,totalColumnsWidth:Ie.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:Ie.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(N,U){var K=this,oe=this.props,ue=oe.autoHeight,se=oe.autoWidth,ye=oe.columnCount,Ae=oe.height,Ie=oe.rowCount,Ve=oe.scrollToAlignment,tt=oe.scrollToColumn,lt=oe.scrollToRow,Dt=oe.width,ht=this.state,b=ht.scrollLeft,E=ht.scrollPositionChangeReason,w=ht.scrollTop,I=ht.instanceProps;this._handleInvalidatedGridSize();var H=0<ye&&N.columnCount===0||0<Ie&&N.rowCount===0;E===fi&&(!se&&0<=b&&(b!==this._scrollingContainer.scrollLeft||H)&&(this._scrollingContainer.scrollLeft=b),!ue&&0<=w&&(w!==this._scrollingContainer.scrollTop||H)&&(this._scrollingContainer.scrollTop=w));var j=(N.width===0||N.height===0)&&0<Ae&&0<Dt;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):io({cellSizeAndPositionManager:I.columnSizeAndPositionManager,previousCellsCount:N.columnCount,previousCellSize:N.columnWidth,previousScrollToAlignment:N.scrollToAlignment,previousScrollToIndex:N.scrollToColumn,previousSize:N.width,scrollOffset:b,scrollToAlignment:Ve,scrollToIndex:tt,size:Dt,sizeJustIncreasedFromZero:j,updateScrollIndexCallback:function(){return K._updateScrollLeftForScrollToColumn(K.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):io({cellSizeAndPositionManager:I.rowSizeAndPositionManager,previousCellsCount:N.rowCount,previousCellSize:N.rowHeight,previousScrollToAlignment:N.scrollToAlignment,previousScrollToIndex:N.scrollToRow,previousSize:N.height,scrollOffset:w,scrollToAlignment:Ve,scrollToIndex:lt,size:Ae,sizeJustIncreasedFromZero:j,updateScrollIndexCallback:function(){return K._updateScrollTopForScrollToRow(K.props)}}),this._invokeOnGridRenderedHelper(),b!==U.scrollLeft||w!==U.scrollTop){var Q=I.rowSizeAndPositionManager.getTotalSize(),ce=I.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:b,scrollTop:w,totalColumnsWidth:ce,totalRowsHeight:Q})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&ro(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var N=this.props,U=N.autoContainerWidth,K=N.autoHeight,oe=N.autoWidth,ue=N.className,se=N.containerProps,ye=N.containerRole,Ae=N.containerStyle,Ie=N.height,Ve=N.id,tt=N.noContentRenderer,lt=N.role,Dt=N.style,ht=N.tabIndex,b=N.width,E=this.state,w=E.instanceProps,I=E.needToResetStyleCache,H=this._isScrolling(),j={boxSizing:"border-box",direction:"ltr",height:K?"auto":Ie,position:"relative",width:oe?"auto":b,WebkitOverflowScrolling:"touch",willChange:"transform"};I&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var Q=w.columnSizeAndPositionManager.getTotalSize(),ce=w.rowSizeAndPositionManager.getTotalSize(),Re=Ie<ce?w.scrollbarSize:0,Ne=b<Q?w.scrollbarSize:0;Ne===this._horizontalScrollBarSize&&Re===this._verticalScrollBarSize||(this._horizontalScrollBarSize=Ne,this._verticalScrollBarSize=Re,this._scrollbarPresenceChanged=!0),j.overflowX=Q+Re<=b?"hidden":"auto",j.overflowY=ce+Ne<=Ie?"hidden":"auto";var Qe=this._childrenToDisplay,Je=Qe.length===0&&0<Ie&&0<b;return Ln.createElement("div",go({ref:this._setScrollingContainerRef},se,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:hn("ReactVirtualized__Grid",ue),id:Ve,onScroll:this._onScroll,role:lt,style:_i({},j,{},Dt),tabIndex:ht}),0<Qe.length&&Ln.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:ye,style:_i({width:U?"auto":Q,height:ce,maxWidth:Q,maxHeight:ce,overflow:"hidden",pointerEvents:H?"none":"",position:"relative"},Ae)},Qe),Je&&tt())}},{key:"_calculateChildrenToRender",value:function(N,U){var K=0<arguments.length&&N!==void 0?N:this.props,oe=1<arguments.length&&U!==void 0?U:this.state,ue=K.cellRenderer,se=K.cellRangeRenderer,ye=K.columnCount,Ae=K.deferredMeasurementCache,Ie=K.height,Ve=K.overscanColumnCount,tt=K.overscanIndicesGetter,lt=K.overscanRowCount,Dt=K.rowCount,ht=K.width,b=K.isScrollingOptOut,E=oe.scrollDirectionHorizontal,w=oe.scrollDirectionVertical,I=oe.instanceProps,H=0<this._initialScrollTop?this._initialScrollTop:oe.scrollTop,j=0<this._initialScrollLeft?this._initialScrollLeft:oe.scrollLeft,Q=this._isScrolling(K,oe);if(this._childrenToDisplay=[],0<Ie&&0<ht){var ce=I.columnSizeAndPositionManager.getVisibleCellRange({containerSize:ht,offset:j}),Re=I.rowSizeAndPositionManager.getVisibleCellRange({containerSize:Ie,offset:H}),Ne=I.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:ht,offset:j}),Qe=I.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:Ie,offset:H});this._renderedColumnStartIndex=ce.start,this._renderedColumnStopIndex=ce.stop,this._renderedRowStartIndex=Re.start,this._renderedRowStopIndex=Re.stop;var Je=tt({direction:"horizontal",cellCount:ye,overscanCellsCount:Ve,scrollDirection:E,startIndex:typeof ce.start=="number"?ce.start:0,stopIndex:typeof ce.stop=="number"?ce.stop:-1}),st=tt({direction:"vertical",cellCount:Dt,overscanCellsCount:lt,scrollDirection:w,startIndex:typeof Re.start=="number"?Re.start:0,stopIndex:typeof Re.stop=="number"?Re.stop:-1}),pt=Je.overscanStartIndex,Kt=Je.overscanStopIndex,Cn=st.overscanStartIndex,Gt=st.overscanStopIndex;if(Ae){if(!Ae.hasFixedHeight()){for(var zn=Cn;zn<=Gt;zn++)if(!Ae.has(zn,0)){pt=0,Kt=ye-1;break}}if(!Ae.hasFixedWidth()){for(var si=pt;si<=Kt;si++)if(!Ae.has(0,si)){Cn=0,Gt=Dt-1;break}}}this._childrenToDisplay=se({cellCache:this._cellCache,cellRenderer:ue,columnSizeAndPositionManager:I.columnSizeAndPositionManager,columnStartIndex:pt,columnStopIndex:Kt,deferredMeasurementCache:Ae,horizontalOffsetAdjustment:Ne,isScrolling:Q,isScrollingOptOut:b,parent:this,rowSizeAndPositionManager:I.rowSizeAndPositionManager,rowStartIndex:Cn,rowStopIndex:Gt,scrollLeft:j,scrollTop:H,styleCache:this._styleCache,verticalOffsetAdjustment:Qe,visibleColumnIndices:ce,visibleRowIndices:Re}),this._columnStartIndex=pt,this._columnStopIndex=Kt,this._rowStartIndex=Cn,this._rowStopIndex=Gt}}},{key:"_debounceScrollEnded",value:function(){var N=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&ro(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Dc(this._debounceScrollEndedCallback,N)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var N=this._deferredInvalidateColumnIndex,U=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:N,rowIndex:U})}}},{key:"_invokeOnScrollMemoizer",value:function(N){var U=this,K=N.scrollLeft,oe=N.scrollTop,ue=N.totalColumnsWidth,se=N.totalRowsHeight;this._onScrollMemoizer({callback:function(ye){var Ae=ye.scrollLeft,Ie=ye.scrollTop,Ve=U.props,tt=Ve.height;(0,Ve.onScroll)({clientHeight:tt,clientWidth:Ve.width,scrollHeight:se,scrollLeft:Ae,scrollTop:Ie,scrollWidth:ue})},indices:{scrollLeft:K,scrollTop:oe}})}},{key:"_isScrolling",value:function(N,U){var K=0<arguments.length&&N!==void 0?N:this.props,oe=1<arguments.length&&U!==void 0?U:this.state;return Object.hasOwnProperty.call(K,"isScrolling")?Boolean(K.isScrolling):Boolean(oe.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var N=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,N({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(N){var U=N.scrollLeft,K=N.scrollTop,oe=ee._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:U,scrollTop:K});oe&&(oe.needToResetStyleCache=!1,this.setState(oe))}},{key:"_getCalculatedScrollLeft",value:function(N,U){var K=0<arguments.length&&N!==void 0?N:this.props,oe=1<arguments.length&&U!==void 0?U:this.state;return ee._getCalculatedScrollLeft(K,oe)}},{key:"_updateScrollLeftForScrollToColumn",value:function(N,U){var K=0<arguments.length&&N!==void 0?N:this.props,oe=1<arguments.length&&U!==void 0?U:this.state,ue=ee._getScrollLeftForScrollToColumnStateUpdate(K,oe);ue&&(ue.needToResetStyleCache=!1,this.setState(ue))}},{key:"_getCalculatedScrollTop",value:function(N,U){var K=0<arguments.length&&N!==void 0?N:this.props,oe=1<arguments.length&&U!==void 0?U:this.state;return ee._getCalculatedScrollTop(K,oe)}},{key:"_resetStyleCache",value:function(){var N=this._styleCache,U=this._cellCache,K=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var oe=this._rowStartIndex;oe<=this._rowStopIndex;oe++)for(var ue=this._columnStartIndex;ue<=this._columnStopIndex;ue++){var se="".concat(oe,"-").concat(ue);this._styleCache[se]=N[se],K&&(this._cellCache[se]=U[se])}}},{key:"_updateScrollTopForScrollToRow",value:function(N,U){var K=0<arguments.length&&N!==void 0?N:this.props,oe=1<arguments.length&&U!==void 0?U:this.state,ue=ee._getScrollTopForScrollToRowStateUpdate(K,oe);ue&&(ue.needToResetStyleCache=!1,this.setState(ue))}}],[{key:"getDerivedStateFromProps",value:function(N,U){var K={};N.columnCount===0&&U.scrollLeft!==0||N.rowCount===0&&U.scrollTop!==0?(K.scrollLeft=0,K.scrollTop=0):(N.scrollLeft!==U.scrollLeft&&N.scrollToColumn<0||N.scrollTop!==U.scrollTop&&N.scrollToRow<0)&&Object.assign(K,ee._getScrollToPositionStateUpdate({prevState:U,scrollLeft:N.scrollLeft,scrollTop:N.scrollTop}));var oe,ue,se=U.instanceProps;return K.needToResetStyleCache=!1,N.columnWidth===se.prevColumnWidth&&N.rowHeight===se.prevRowHeight||(K.needToResetStyleCache=!0),se.columnSizeAndPositionManager.configure({cellCount:N.columnCount,estimatedCellSize:ee._getEstimatedColumnSize(N),cellSizeGetter:ee._wrapSizeGetter(N.columnWidth)}),se.rowSizeAndPositionManager.configure({cellCount:N.rowCount,estimatedCellSize:ee._getEstimatedRowSize(N),cellSizeGetter:ee._wrapSizeGetter(N.rowHeight)}),se.prevColumnCount!==0&&se.prevRowCount!==0||(se.prevColumnCount=0,se.prevRowCount=0),N.autoHeight&&N.isScrolling===!1&&se.prevIsScrolling===!0&&Object.assign(K,{isScrolling:!1}),eu({cellCount:se.prevColumnCount,cellSize:typeof se.prevColumnWidth=="number"?se.prevColumnWidth:null,computeMetadataCallback:function(){return se.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:N,nextCellsCount:N.columnCount,nextCellSize:typeof N.columnWidth=="number"?N.columnWidth:null,nextScrollToIndex:N.scrollToColumn,scrollToIndex:se.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){oe=ee._getScrollLeftForScrollToColumnStateUpdate(N,U)}}),eu({cellCount:se.prevRowCount,cellSize:typeof se.prevRowHeight=="number"?se.prevRowHeight:null,computeMetadataCallback:function(){return se.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:N,nextCellsCount:N.rowCount,nextCellSize:typeof N.rowHeight=="number"?N.rowHeight:null,nextScrollToIndex:N.scrollToRow,scrollToIndex:se.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){ue=ee._getScrollTopForScrollToRowStateUpdate(N,U)}}),se.prevColumnCount=N.columnCount,se.prevColumnWidth=N.columnWidth,se.prevIsScrolling=N.isScrolling===!0,se.prevRowCount=N.rowCount,se.prevRowHeight=N.rowHeight,se.prevScrollToColumn=N.scrollToColumn,se.prevScrollToRow=N.scrollToRow,se.scrollbarSize=N.getScrollbarSize(),se.scrollbarSize===void 0?(se.scrollbarSizeMeasured=!1,se.scrollbarSize=0):se.scrollbarSizeMeasured=!0,K.instanceProps=se,_i({},K,{},oe,{},ue)}},{key:"_getEstimatedColumnSize",value:function(N){return typeof N.columnWidth=="number"?N.columnWidth:N.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(N){return typeof N.rowHeight=="number"?N.rowHeight:N.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(N){var U=N.prevState,K=N.scrollLeft,oe=N.scrollTop,ue={scrollPositionChangeReason:fi};return typeof K=="number"&&0<=K&&(ue.scrollDirectionHorizontal=K>U.scrollLeft?1:-1,ue.scrollLeft=K),typeof oe=="number"&&0<=oe&&(ue.scrollDirectionVertical=oe>U.scrollTop?1:-1,ue.scrollTop=oe),typeof K=="number"&&0<=K&&K!==U.scrollLeft||typeof oe=="number"&&0<=oe&&oe!==U.scrollTop?ue:{}}},{key:"_wrapSizeGetter",value:function(N){return typeof N=="function"?N:function(){return N}}},{key:"_getCalculatedScrollLeft",value:function(N,U){var K=N.columnCount,oe=N.height,ue=N.scrollToAlignment,se=N.scrollToColumn,ye=N.width,Ae=U.scrollLeft,Ie=U.instanceProps;if(0<K){var Ve=K-1,tt=se<0?Ve:Math.min(Ve,se),lt=Ie.rowSizeAndPositionManager.getTotalSize(),Dt=Ie.scrollbarSizeMeasured&&oe<lt?Ie.scrollbarSize:0;return Ie.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:ue,containerSize:ye-Dt,currentOffset:Ae,targetIndex:tt})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(N,U){var K=U.scrollLeft,oe=ee._getCalculatedScrollLeft(N,U);return typeof oe=="number"&&0<=oe&&K!==oe?ee._getScrollToPositionStateUpdate({prevState:U,scrollLeft:oe,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(N,U){var K=N.height,oe=N.rowCount,ue=N.scrollToAlignment,se=N.scrollToRow,ye=N.width,Ae=U.scrollTop,Ie=U.instanceProps;if(0<oe){var Ve=oe-1,tt=se<0?Ve:Math.min(Ve,se),lt=Ie.columnSizeAndPositionManager.getTotalSize(),Dt=Ie.scrollbarSizeMeasured&&ye<lt?Ie.scrollbarSize:0;return Ie.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:ue,containerSize:K-Dt,currentOffset:Ae,targetIndex:tt})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(N,U){var K=U.scrollTop,oe=ee._getCalculatedScrollTop(N,U);return typeof oe=="number"&&0<=oe&&K!==oe?ee._getScrollToPositionStateUpdate({prevState:U,scrollLeft:-1,scrollTop:oe}):{}}}]),ee}();ut(yo,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:iu,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:di,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:nu,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),xn(yo);function la(ee){var N=ee.cellCount,U=ee.overscanCellsCount,K=ee.scrollDirection,oe=ee.startIndex,ue=ee.stopIndex;return U=Math.max(1,U),K===1?{overscanStartIndex:Math.max(0,oe-1),overscanStopIndex:Math.min(N-1,ue+U)}:{overscanStartIndex:Math.max(0,oe-U),overscanStopIndex:Math.min(N-1,ue+1)}}s(la,"defaultOverscanIndicesGetter$1");var ca=function(){function ee(N,U){var K;return sr(this,ee),(K=Lr(this,Mr(ee).call(this,N,U)))._loadMoreRowsMemoizer=oa(),K._onRowsRendered=K._onRowsRendered.bind(Ot(K)),K._registerChild=K._registerChild.bind(Ot(K)),K}return s(ee,"InfiniteLoader"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"resetLoadMoreRowsCache",value:function(N){this._loadMoreRowsMemoizer=oa(),N&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(N){var U=this,K=this.props.loadMoreRows;N.forEach(function(oe){var ue=K(oe);ue&&ue.then(function(){(function(se){var ye=se.lastRenderedStartIndex,Ae=se.lastRenderedStopIndex,Ie=se.startIndex,Ve=se.stopIndex;return!(Ae<Ie||Ve<ye)})({lastRenderedStartIndex:U._lastRenderedStartIndex,lastRenderedStopIndex:U._lastRenderedStopIndex,startIndex:oe.startIndex,stopIndex:oe.stopIndex})&&U._registeredChild&&function(se){var ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Ae=typeof se.recomputeGridSize=="function"?se.recomputeGridSize:se.recomputeRowHeights;Ae?Ae.call(se,ye):se.forceUpdate()}(U._registeredChild,U._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(N){var U=N.startIndex,K=N.stopIndex;this._lastRenderedStartIndex=U,this._lastRenderedStopIndex=K,this._doStuff(U,K)}},{key:"_doStuff",value:function(N,U){var K,oe=this,ue=this.props,se=ue.isRowLoaded,ye=ue.minimumBatchSize,Ae=ue.rowCount,Ie=ue.threshold,Ve=function(lt){for(var Dt=lt.isRowLoaded,ht=lt.minimumBatchSize,b=lt.rowCount,E=lt.startIndex,w=lt.stopIndex,I=[],H=null,j=null,Q=E;Q<=w;Q++)Dt({index:Q})?j!==null&&(I.push({startIndex:H,stopIndex:j}),H=j=null):(j=Q,H===null&&(H=Q));if(j!==null){for(var ce=Math.min(Math.max(j,H+ht-1),b-1),Re=j+1;Re<=ce&&!Dt({index:Re});Re++)j=Re;I.push({startIndex:H,stopIndex:j})}if(I.length)for(var Ne=I[0];Ne.stopIndex-Ne.startIndex+1<ht&&0<Ne.startIndex;){var Qe=Ne.startIndex-1;if(Dt({index:Qe}))break;Ne.startIndex=Qe}return I}({isRowLoaded:se,minimumBatchSize:ye,rowCount:Ae,startIndex:Math.max(0,N-Ie),stopIndex:Math.min(Ae-1,U+Ie)}),tt=(K=[]).concat.apply(K,vh(Ve.map(function(lt){return[lt.startIndex,lt.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){oe._loadUnloadedRanges(Ve)},indices:{squashedUnloadedRanges:tt}})}},{key:"_registerChild",value:function(N){this._registeredChild=N}}]),ee}();ut(ca,"propTypes",{children:Tt.func.isRequired,isRowLoaded:Tt.func.isRequired,loadMoreRows:Tt.func.isRequired,minimumBatchSize:Tt.number.isRequired,rowCount:Tt.number.isRequired,threshold:Tt.number.isRequired}),ut(ca,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var yl=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"Grid",void 0),ut(Ot(U),"_cellRenderer",function(se){var ye=se.parent,Ae=se.rowIndex,Ie=se.style,Ve=se.isScrolling,tt=se.isVisible,lt=se.key,Dt=U.props.rowRenderer,ht=Object.getOwnPropertyDescriptor(Ie,"width");return ht&&ht.writable&&(Ie.width="100%"),Dt({index:Ae,style:Ie,isScrolling:Ve,isVisible:tt,key:lt,parent:ye})}),ut(Ot(U),"_setRef",function(se){U.Grid=se}),ut(Ot(U),"_onScroll",function(se){var ye=se.clientHeight,Ae=se.scrollHeight,Ie=se.scrollTop;(0,U.props.onScroll)({clientHeight:ye,scrollHeight:Ae,scrollTop:Ie})}),ut(Ot(U),"_onSectionRendered",function(se){var ye=se.rowOverscanStartIndex,Ae=se.rowOverscanStopIndex,Ie=se.rowStartIndex,Ve=se.rowStopIndex;(0,U.props.onRowsRendered)({overscanStartIndex:ye,overscanStopIndex:Ae,startIndex:Ie,stopIndex:Ve})}),U}return s(ee,"List"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(N){var U=N.alignment,K=N.index;return this.Grid?this.Grid.getOffsetForCell({alignment:U,rowIndex:K,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(N){var U=N.columnIndex,K=N.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:K,columnIndex:U})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(N){var U=0<arguments.length&&N!==void 0?N:{},K=U.columnIndex,oe=K===void 0?0:K,ue=U.rowIndex,se=ue===void 0?0:ue;this.Grid&&this.Grid.recomputeGridSize({rowIndex:se,columnIndex:oe})}},{key:"recomputeRowHeights",value:function(N){var U=0<arguments.length&&N!==void 0?N:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:U,columnIndex:0})}},{key:"scrollToPosition",value:function(N){var U=0<arguments.length&&N!==void 0?N:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:U})}},{key:"scrollToRow",value:function(N){var U=0<arguments.length&&N!==void 0?N:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:U})}},{key:"render",value:function(){var N=this.props,U=N.className,K=N.noRowsRenderer,oe=N.scrollToIndex,ue=N.width,se=hn("ReactVirtualized__List",U);return Ln.createElement(yo,go({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:se,columnWidth:ue,columnCount:1,noContentRenderer:K,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:oe}))}}]),ee}();ut(yl,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:la,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var ks={ge:function(ee,N,U,K,oe){return typeof U=="function"?function(ue,se,ye,Ae,Ie){for(var Ve=ye+1;se<=ye;){var tt=se+ye>>>1;0<=Ie(ue[tt],Ae)?ye=(Ve=tt)-1:se=1+tt}return Ve}(ee,K===void 0?0:0|K,oe===void 0?ee.length-1:0|oe,N,U):function(ue,se,ye,Ae){for(var Ie=ye+1;se<=ye;){var Ve=se+ye>>>1;Ae<=ue[Ve]?ye=(Ie=Ve)-1:se=1+Ve}return Ie}(ee,U===void 0?0:0|U,K===void 0?ee.length-1:0|K,N)},gt:function(ee,N,U,K,oe){return typeof U=="function"?function(ue,se,ye,Ae,Ie){for(var Ve=ye+1;se<=ye;){var tt=se+ye>>>1;0<Ie(ue[tt],Ae)?ye=(Ve=tt)-1:se=1+tt}return Ve}(ee,K===void 0?0:0|K,oe===void 0?ee.length-1:0|oe,N,U):function(ue,se,ye,Ae){for(var Ie=ye+1;se<=ye;){var Ve=se+ye>>>1;Ae<ue[Ve]?ye=(Ie=Ve)-1:se=1+Ve}return Ie}(ee,U===void 0?0:0|U,K===void 0?ee.length-1:0|K,N)},lt:function(ee,N,U,K,oe){return typeof U=="function"?function(ue,se,ye,Ae,Ie){for(var Ve=se-1;se<=ye;){var tt=se+ye>>>1;Ie(ue[tt],Ae)<0?se=1+(Ve=tt):ye=tt-1}return Ve}(ee,K===void 0?0:0|K,oe===void 0?ee.length-1:0|oe,N,U):function(ue,se,ye,Ae){for(var Ie=se-1;se<=ye;){var Ve=se+ye>>>1;ue[Ve]<Ae?se=1+(Ie=Ve):ye=Ve-1}return Ie}(ee,U===void 0?0:0|U,K===void 0?ee.length-1:0|K,N)},le:function(ee,N,U,K,oe){return typeof U=="function"?function(ue,se,ye,Ae,Ie){for(var Ve=se-1;se<=ye;){var tt=se+ye>>>1;Ie(ue[tt],Ae)<=0?se=1+(Ve=tt):ye=tt-1}return Ve}(ee,K===void 0?0:0|K,oe===void 0?ee.length-1:0|oe,N,U):function(ue,se,ye,Ae){for(var Ie=se-1;se<=ye;){var Ve=se+ye>>>1;ue[Ve]<=Ae?se=1+(Ie=Ve):ye=Ve-1}return Ie}(ee,U===void 0?0:0|U,K===void 0?ee.length-1:0|K,N)},eq:function(ee,N,U,K,oe){return typeof U=="function"?function(ue,se,ye,Ae,Ie){for(;se<=ye;){var Ve=se+ye>>>1,tt=Ie(ue[Ve],Ae);if(tt===0)return Ve;tt<=0?se=1+Ve:ye=Ve-1}return-1}(ee,K===void 0?0:0|K,oe===void 0?ee.length-1:0|oe,N,U):function(ue,se,ye,Ae){for(;se<=ye;){var Ie=se+ye>>>1,Ve=ue[Ie];if(Ve===Ae)return Ie;Ve<=Ae?se=1+Ie:ye=Ie-1}return-1}(ee,U===void 0?0:0|U,K===void 0?ee.length-1:0|K,N)}};function da(ee,N,U,K,oe){this.mid=ee,this.left=N,this.right=U,this.leftPoints=K,this.rightPoints=oe,this.count=(N?N.count:0)+(U?U.count:0)+K.length}s(da,"IntervalTreeNode");var ps=da.prototype;function ua(ee,N){ee.mid=N.mid,ee.left=N.left,ee.right=N.right,ee.leftPoints=N.leftPoints,ee.rightPoints=N.rightPoints,ee.count=N.count}s(ua,"copy");function El(ee,N){var U=Xo(N);ee.mid=U.mid,ee.left=U.left,ee.right=U.right,ee.leftPoints=U.leftPoints,ee.rightPoints=U.rightPoints,ee.count=U.count}s(El,"rebuild");function bl(ee,N){var U=ee.intervals([]);U.push(N),El(ee,U)}s(bl,"rebuildWithInterval");function _l(ee,N){var U=ee.intervals([]),K=U.indexOf(N);return K<0?0:(U.splice(K,1),El(ee,U),1)}s(_l,"rebuildWithoutInterval");function Cl(ee,N,U){for(var K=0;K<ee.length&&ee[K][0]<=N;++K){var oe=U(ee[K]);if(oe)return oe}}s(Cl,"reportLeftRange");function Tl(ee,N,U){for(var K=ee.length-1;0<=K&&ee[K][1]>=N;--K){var oe=U(ee[K]);if(oe)return oe}}s(Tl,"reportRightRange");function Il(ee,N){for(var U=0;U<ee.length;++U){var K=N(ee[U]);if(K)return K}}s(Il,"reportRange");function Ac(ee,N){return ee-N}s(Ac,"compareNumbers");function fa(ee,N){var U=ee[0]-N[0];return U||ee[1]-N[1]}s(fa,"compareBegin");function ha(ee,N){var U=ee[1]-N[1];return U||ee[0]-N[0]}s(ha,"compareEnd");function Xo(ee){if(ee.length===0)return null;for(var N=[],U=0;U<ee.length;++U)N.push(ee[U][0],ee[U][1]);N.sort(Ac);var K=N[N.length>>1],oe=[],ue=[],se=[];for(U=0;U<ee.length;++U){var ye=ee[U];ye[1]<K?oe.push(ye):K<ye[0]?ue.push(ye):se.push(ye)}var Ae=se,Ie=se.slice();return Ae.sort(fa),Ie.sort(ha),new da(K,Xo(oe),Xo(ue),Ae,Ie)}s(Xo,"createIntervalTree");function pa(ee){this.root=ee}s(pa,"IntervalTree"),ps.intervals=function(ee){return ee.push.apply(ee,this.leftPoints),this.left&&this.left.intervals(ee),this.right&&this.right.intervals(ee),ee},ps.insert=function(ee){var N=this.count-this.leftPoints.length;if(this.count+=1,ee[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+N)?bl(this,ee):this.left.insert(ee):this.left=Xo([ee]);else if(ee[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+N)?bl(this,ee):this.right.insert(ee):this.right=Xo([ee]);else{var U=ks.ge(this.leftPoints,ee,fa),K=ks.ge(this.rightPoints,ee,ha);this.leftPoints.splice(U,0,ee),this.rightPoints.splice(K,0,ee)}},ps.remove=function(ee){var N=this.count-this.leftPoints;if(ee[1]<this.mid)return this.left?3*(N-1)<4*(this.right?this.right.count:0)?_l(this,ee):(ue=this.left.remove(ee))===2?(this.left=null,this.count-=1,1):(ue===1&&(this.count-=1),ue):0;if(ee[0]>this.mid)return this.right?3*(N-1)<4*(this.left?this.left.count:0)?_l(this,ee):(ue=this.right.remove(ee))===2?(this.right=null,this.count-=1,1):(ue===1&&(this.count-=1),ue):0;if(this.count===1)return this.leftPoints[0]===ee?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===ee){if(this.left&&this.right){for(var U=this,K=this.left;K.right;)K=(U=K).right;if(U===this)K.right=this.right;else{var oe=this.left;ue=this.right,U.count-=K.count,U.right=K.left,K.left=oe,K.right=ue}ua(this,K),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?ua(this,this.left):ua(this,this.right);return 1}for(oe=ks.ge(this.leftPoints,ee,fa);oe<this.leftPoints.length&&this.leftPoints[oe][0]===ee[0];++oe)if(this.leftPoints[oe]===ee){for(this.count-=1,this.leftPoints.splice(oe,1),ue=ks.ge(this.rightPoints,ee,ha);ue<this.rightPoints.length&&this.rightPoints[ue][1]===ee[1];++ue)if(this.rightPoints[ue]===ee)return this.rightPoints.splice(ue,1),1}return 0;var ue},ps.queryPoint=function(ee,N){if(ee<this.mid)return this.left&&(U=this.left.queryPoint(ee,N))?U:Cl(this.leftPoints,ee,N);if(ee>this.mid){var U;return this.right&&(U=this.right.queryPoint(ee,N))?U:Tl(this.rightPoints,ee,N)}return Il(this.leftPoints,N)},ps.queryInterval=function(ee,N,U){var K;return ee<this.mid&&this.left&&(K=this.left.queryInterval(ee,N,U))||N>this.mid&&this.right&&(K=this.right.queryInterval(ee,N,U))?K:N<this.mid?Cl(this.leftPoints,N,U):ee>this.mid?Tl(this.rightPoints,ee,U):Il(this.leftPoints,U)};var Qo=pa.prototype;Qo.insert=function(ee){this.root?this.root.insert(ee):this.root=new da(ee[0],null,null,[ee],[ee])},Qo.remove=function(ee){if(this.root){var N=this.root.remove(ee);return N===2&&(this.root=null),N!==0}return!1},Qo.queryPoint=function(ee,N){if(this.root)return this.root.queryPoint(ee,N)},Qo.queryInterval=function(ee,N,U){if(ee<=N&&this.root)return this.root.queryInterval(ee,N,U)},Object.defineProperty(Qo,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Qo,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var ma=function(){function ee(){sr(this,ee),ut(this,"_columnSizeMap",{}),ut(this,"_intervalTree",function(N){return N&&N.length!==0?new pa(Xo(N)):new pa(null)}()),ut(this,"_leftMap",{})}return s(ee,"PositionCache"),hr(ee,[{key:"estimateTotalHeight",value:function(N,U,K){var oe=N-this.count;return this.tallestColumnSize+Math.ceil(oe/U)*K}},{key:"range",value:function(N,U,K){var oe=this;this._intervalTree.queryInterval(N,N+U,function(ue){var se=Sh(ue,3),ye=se[0],Ae=(se[1],se[2]);return K(Ae,oe._leftMap[Ae],ye)})}},{key:"setPosition",value:function(N,U,K,oe){this._intervalTree.insert([K,K+oe,N]),this._leftMap[N]=U;var ue=this._columnSizeMap,se=ue[U];ue[U]=se===void 0?K+oe:Math.max(se,K+oe)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var N=this._columnSizeMap,U=0;for(var K in N){var oe=N[K];U=U===0?oe:Math.min(U,oe)}return U}},{key:"tallestColumnSize",get:function(){var N=this._columnSizeMap,U=0;for(var K in N){var oe=N[K];U=Math.max(U,oe)}return U}}]),ee}(),ga=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"state",{isScrolling:!1,scrollTop:0}),ut(Ot(U),"_debounceResetIsScrollingId",void 0),ut(Ot(U),"_invalidateOnUpdateStartIndex",null),ut(Ot(U),"_invalidateOnUpdateStopIndex",null),ut(Ot(U),"_positionCache",new ma),ut(Ot(U),"_startIndex",null),ut(Ot(U),"_startIndexMemoized",null),ut(Ot(U),"_stopIndex",null),ut(Ot(U),"_stopIndexMemoized",null),ut(Ot(U),"_debounceResetIsScrollingCallback",function(){U.setState({isScrolling:!1})}),ut(Ot(U),"_setScrollingContainerRef",function(se){U._scrollingContainer=se}),ut(Ot(U),"_onScroll",function(se){var ye=U.props.height,Ae=se.currentTarget.scrollTop,Ie=Math.min(Math.max(0,U._getEstimatedTotalHeight()-ye),Ae);Ae===Ie&&(U._debounceResetIsScrolling(),U.state.scrollTop!==Ie&&U.setState({isScrolling:!0,scrollTop:Ie}))}),U}return s(ee,"Masonry"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"clearCellPositions",value:function(){this._positionCache=new ma,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(N){var U=N.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=U,this._invalidateOnUpdateStopIndex=U):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,U),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,U))}},{key:"recomputeCellPositions",value:function(){var N=this._positionCache.count-1;this._positionCache=new ma,this._populatePositionCache(0,N),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(N){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==N.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&ro(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var N,U=this,K=this.props,oe=K.autoHeight,ue=K.cellCount,se=K.cellMeasurerCache,ye=K.cellRenderer,Ae=K.className,Ie=K.height,Ve=K.id,tt=K.keyMapper,lt=K.overscanByPixels,Dt=K.role,ht=K.style,b=K.tabIndex,E=K.width,w=K.rowDirection,I=this.state,H=I.isScrolling,j=I.scrollTop,Q=[],ce=this._getEstimatedTotalHeight(),Re=this._positionCache.shortestColumnSize,Ne=this._positionCache.count,Qe=0;if(this._positionCache.range(Math.max(0,j-lt),Ie+2*lt,function(pt,Kt,Cn){var Gt;N=N===void 0?Qe=pt:(Qe=Math.min(Qe,pt),Math.max(N,pt)),Q.push(ye({index:pt,isScrolling:H,key:tt(pt),parent:U,style:(Gt={height:se.getHeight(pt)},ut(Gt,w==="ltr"?"left":"right",Kt),ut(Gt,"position","absolute"),ut(Gt,"top",Cn),ut(Gt,"width",se.getWidth(pt)),Gt)}))}),Re<j+Ie+lt&&Ne<ue)for(var Je=Math.min(ue-Ne,Math.ceil((j+Ie+lt-Re)/se.defaultHeight*E/se.defaultWidth)),st=Ne;st<Ne+Je;st++)N=st,Q.push(ye({index:st,isScrolling:H,key:tt(st),parent:this,style:{width:se.getWidth(st)}}));return this._startIndex=Qe,this._stopIndex=N,Ln.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:hn("ReactVirtualized__Masonry",Ae),id:Ve,onScroll:this._onScroll,role:Dt,style:_i({boxSizing:"border-box",direction:"ltr",height:oe?"auto":Ie,overflowX:"hidden",overflowY:ce<Ie?"hidden":"auto",position:"relative",width:E,WebkitOverflowScrolling:"touch",willChange:"transform"},ht),tabIndex:b},Ln.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:ce,maxWidth:"100%",maxHeight:ce,overflow:"hidden",pointerEvents:H?"none":"",position:"relative"}},Q))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var N=this._invalidateOnUpdateStartIndex,U=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(N,U),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var N=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&ro(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Dc(this._debounceResetIsScrollingCallback,N)}},{key:"_getEstimatedTotalHeight",value:function(){var N=this.props,U=N.cellCount,K=N.cellMeasurerCache,oe=N.width,ue=Math.max(1,Math.floor(oe/K.defaultWidth));return this._positionCache.estimateTotalHeight(U,ue,K.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var N=this.props,U=N.height,K=N.onScroll,oe=this.state.scrollTop;this._onScrollMemoized!==oe&&(K({clientHeight:U,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:oe}),this._onScrollMemoized=oe)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(N,U){for(var K=this.props,oe=K.cellMeasurerCache,ue=K.cellPositioner,se=N;se<=U;se++){var ye=ue(se),Ae=ye.left,Ie=ye.top;this._positionCache.setPosition(se,Ae,Ie,oe.getHeight(se))}}}],[{key:"getDerivedStateFromProps",value:function(N,U){return N.scrollTop!==void 0&&U.scrollTop!==N.scrollTop?{isScrolling:!0,scrollTop:N.scrollTop}:null}}]),ee}();function Dl(){}s(Dl,"noop"),ut(ga,"defaultProps",{autoHeight:!1,keyMapper:function(ee){return ee},onCellsRendered:Dl,onScroll:Dl,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),xn(ga);var Sa=function(){function ee(){var N=this,U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};sr(this,ee),ut(this,"_cellMeasurerCache",void 0),ut(this,"_columnIndexOffset",void 0),ut(this,"_rowIndexOffset",void 0),ut(this,"columnWidth",function(Ae){var Ie=Ae.index;N._cellMeasurerCache.columnWidth({index:Ie+N._columnIndexOffset})}),ut(this,"rowHeight",function(Ae){var Ie=Ae.index;N._cellMeasurerCache.rowHeight({index:Ie+N._rowIndexOffset})});var K=U.cellMeasurerCache,oe=U.columnIndexOffset,ue=oe===void 0?0:oe,se=U.rowIndexOffset,ye=se===void 0?0:se;this._cellMeasurerCache=K,this._columnIndexOffset=ue,this._rowIndexOffset=ye}return s(ee,"CellMeasurerCacheDecorator"),hr(ee,[{key:"clear",value:function(N,U){this._cellMeasurerCache.clear(N+this._rowIndexOffset,U+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0;return this._cellMeasurerCache.getHeight(N+this._rowIndexOffset,K+this._columnIndexOffset)}},{key:"getWidth",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0;return this._cellMeasurerCache.getWidth(N+this._rowIndexOffset,K+this._columnIndexOffset)}},{key:"has",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:0;return this._cellMeasurerCache.has(N+this._rowIndexOffset,K+this._columnIndexOffset)}},{key:"set",value:function(N,U,K,oe){this._cellMeasurerCache.set(N+this._rowIndexOffset,U+this._columnIndexOffset,K,oe)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),ee}(),Ns=function(){function ee(N,U){var K;sr(this,ee),ut(Ot(K=Lr(this,Mr(ee).call(this,N,U))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),ut(Ot(K),"_deferredInvalidateColumnIndex",null),ut(Ot(K),"_deferredInvalidateRowIndex",null),ut(Ot(K),"_bottomLeftGridRef",function(ye){K._bottomLeftGrid=ye}),ut(Ot(K),"_bottomRightGridRef",function(ye){K._bottomRightGrid=ye}),ut(Ot(K),"_cellRendererBottomLeftGrid",function(ye){var Ae=ye.rowIndex,Ie=ia(ye,["rowIndex"]),Ve=K.props,tt=Ve.cellRenderer,lt=Ve.fixedRowCount;return Ae===Ve.rowCount-lt?Ln.createElement("div",{key:Ie.key,style:_i({},Ie.style,{height:20})}):tt(_i({},Ie,{parent:Ot(K),rowIndex:Ae+lt}))}),ut(Ot(K),"_cellRendererBottomRightGrid",function(ye){var Ae=ye.columnIndex,Ie=ye.rowIndex,Ve=ia(ye,["columnIndex","rowIndex"]),tt=K.props,lt=tt.cellRenderer,Dt=tt.fixedColumnCount,ht=tt.fixedRowCount;return lt(_i({},Ve,{columnIndex:Ae+Dt,parent:Ot(K),rowIndex:Ie+ht}))}),ut(Ot(K),"_cellRendererTopRightGrid",function(ye){var Ae=ye.columnIndex,Ie=ia(ye,["columnIndex"]),Ve=K.props,tt=Ve.cellRenderer,lt=Ve.columnCount,Dt=Ve.fixedColumnCount;return Ae===lt-Dt?Ln.createElement("div",{key:Ie.key,style:_i({},Ie.style,{width:20})}):tt(_i({},Ie,{columnIndex:Ae+Dt,parent:Ot(K)}))}),ut(Ot(K),"_columnWidthRightGrid",function(ye){var Ae=ye.index,Ie=K.props,Ve=Ie.columnCount,tt=Ie.fixedColumnCount,lt=Ie.columnWidth,Dt=K.state,ht=Dt.scrollbarSize;return Dt.showHorizontalScrollbar&&Ae===Ve-tt?ht:typeof lt=="function"?lt({index:Ae+tt}):lt}),ut(Ot(K),"_onScroll",function(ye){var Ae=ye.scrollLeft,Ie=ye.scrollTop;K.setState({scrollLeft:Ae,scrollTop:Ie});var Ve=K.props.onScroll;Ve&&Ve(ye)}),ut(Ot(K),"_onScrollbarPresenceChange",function(ye){var Ae=ye.horizontal,Ie=ye.size,Ve=ye.vertical,tt=K.state,lt=tt.showHorizontalScrollbar,Dt=tt.showVerticalScrollbar;if(Ae!==lt||Ve!==Dt){K.setState({scrollbarSize:Ie,showHorizontalScrollbar:Ae,showVerticalScrollbar:Ve});var ht=K.props.onScrollbarPresenceChange;typeof ht=="function"&&ht({horizontal:Ae,size:Ie,vertical:Ve})}}),ut(Ot(K),"_onScrollLeft",function(ye){var Ae=ye.scrollLeft;K._onScroll({scrollLeft:Ae,scrollTop:K.state.scrollTop})}),ut(Ot(K),"_onScrollTop",function(ye){var Ae=ye.scrollTop;K._onScroll({scrollTop:Ae,scrollLeft:K.state.scrollLeft})}),ut(Ot(K),"_rowHeightBottomGrid",function(ye){var Ae=ye.index,Ie=K.props,Ve=Ie.fixedRowCount,tt=Ie.rowCount,lt=Ie.rowHeight,Dt=K.state,ht=Dt.scrollbarSize;return Dt.showVerticalScrollbar&&Ae===tt-Ve?ht:typeof lt=="function"?lt({index:Ae+Ve}):lt}),ut(Ot(K),"_topLeftGridRef",function(ye){K._topLeftGrid=ye}),ut(Ot(K),"_topRightGridRef",function(ye){K._topRightGrid=ye});var oe=N.deferredMeasurementCache,ue=N.fixedColumnCount,se=N.fixedRowCount;return K._maybeCalculateCachedStyles(!0),oe&&(K._deferredMeasurementCacheBottomLeftGrid=0<se?new Sa({cellMeasurerCache:oe,columnIndexOffset:0,rowIndexOffset:se}):oe,K._deferredMeasurementCacheBottomRightGrid=0<ue||0<se?new Sa({cellMeasurerCache:oe,columnIndexOffset:ue,rowIndexOffset:se}):oe,K._deferredMeasurementCacheTopRightGrid=0<ue?new Sa({cellMeasurerCache:oe,columnIndexOffset:ue,rowIndexOffset:0}):oe),K}return s(ee,"MultiGrid"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(N){var U=0<arguments.length&&N!==void 0?N:{},K=U.columnIndex,oe=K===void 0?0:K,ue=U.rowIndex,se=ue===void 0?0:ue;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,oe):oe,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,se):se}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(N){var U=0<arguments.length&&N!==void 0?N:{},K=U.columnIndex,oe=K===void 0?0:K,ue=U.rowIndex,se=ue===void 0?0:ue,ye=this.props,Ae=ye.fixedColumnCount,Ie=ye.fixedRowCount,Ve=Math.max(0,oe-Ae),tt=Math.max(0,se-Ie);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:oe,rowIndex:tt}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:Ve,rowIndex:tt}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:oe,rowIndex:se}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:Ve,rowIndex:se}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var N=this.props,U=N.scrollLeft,K=N.scrollTop;if(0<U||0<K){var oe={};0<U&&(oe.scrollLeft=U),0<K&&(oe.scrollTop=K),this.setState(oe)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var N=this.props,U=N.onScroll,K=N.onSectionRendered,oe=(N.onScrollbarPresenceChange,N.scrollLeft,N.scrollToColumn),ue=(N.scrollTop,N.scrollToRow),se=ia(N,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var ye=this.state,Ae=ye.scrollLeft,Ie=ye.scrollTop;return Ln.createElement("div",{style:this._containerOuterStyle},Ln.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(se),this._renderTopRightGrid(_i({},se,{onScroll:U,scrollLeft:Ae}))),Ln.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(_i({},se,{onScroll:U,scrollTop:Ie})),this._renderBottomRightGrid(_i({},se,{onScroll:U,onSectionRendered:K,scrollLeft:Ae,scrollToColumn:oe,scrollToRow:ue,scrollTop:Ie}))))}},{key:"_getBottomGridHeight",value:function(N){return N.height-this._getTopGridHeight(N)}},{key:"_getLeftGridWidth",value:function(N){var U=N.fixedColumnCount,K=N.columnWidth;if(this._leftGridWidth==null)if(typeof K=="function"){for(var oe=0,ue=0;ue<U;ue++)oe+=K({index:ue});this._leftGridWidth=oe}else this._leftGridWidth=K*U;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(N){return N.width-this._getLeftGridWidth(N)}},{key:"_getTopGridHeight",value:function(N){var U=N.fixedRowCount,K=N.rowHeight;if(this._topGridHeight==null)if(typeof K=="function"){for(var oe=0,ue=0;ue<U;ue++)oe+=K({index:ue});this._topGridHeight=oe}else this._topGridHeight=K*U;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var N=this._deferredInvalidateColumnIndex,U=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:N,rowIndex:U}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(N){var U=this.props,K=U.columnWidth,oe=U.enableFixedColumnScroll,ue=U.enableFixedRowScroll,se=U.height,ye=U.fixedColumnCount,Ae=U.fixedRowCount,Ie=U.rowHeight,Ve=U.style,tt=U.styleBottomLeftGrid,lt=U.styleBottomRightGrid,Dt=U.styleTopLeftGrid,ht=U.styleTopRightGrid,b=U.width,E=N||se!==this._lastRenderedHeight||b!==this._lastRenderedWidth,w=N||K!==this._lastRenderedColumnWidth||ye!==this._lastRenderedFixedColumnCount,I=N||Ae!==this._lastRenderedFixedRowCount||Ie!==this._lastRenderedRowHeight;(N||E||Ve!==this._lastRenderedStyle)&&(this._containerOuterStyle=_i({height:se,overflow:"visible",width:b},Ve)),(N||E||I)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:b},this._containerBottomStyle={height:se-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:b}),!N&&tt===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=_i({left:0,overflowX:"hidden",overflowY:oe?"auto":"hidden",position:"absolute"},tt)),(N||w||lt!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=_i({left:this._getLeftGridWidth(this.props),position:"absolute"},lt)),!N&&Dt===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=_i({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},Dt)),(N||w||ht!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=_i({left:this._getLeftGridWidth(this.props),overflowX:ue?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},ht)),this._lastRenderedColumnWidth=K,this._lastRenderedFixedColumnCount=ye,this._lastRenderedFixedRowCount=Ae,this._lastRenderedHeight=se,this._lastRenderedRowHeight=Ie,this._lastRenderedStyle=Ve,this._lastRenderedStyleBottomLeftGrid=tt,this._lastRenderedStyleBottomRightGrid=lt,this._lastRenderedStyleTopLeftGrid=Dt,this._lastRenderedStyleTopRightGrid=ht,this._lastRenderedWidth=b}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(N){var U=N.enableFixedColumnScroll,K=N.fixedColumnCount,oe=N.fixedRowCount,ue=N.rowCount,se=N.hideBottomLeftGridScrollbar,ye=this.state.showVerticalScrollbar;if(!K)return null;var Ae=ye?1:0,Ie=this._getBottomGridHeight(N),Ve=this._getLeftGridWidth(N),tt=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,lt=se?Ve+tt:Ve,Dt=Ln.createElement(yo,go({},N,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:K,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:Ie,onScroll:U?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,ue-oe)+Ae,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:lt}));return se?Ln.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:_i({},this._bottomLeftGridStyle,{height:Ie,width:Ve,overflowY:"hidden"})},Dt):Dt}},{key:"_renderBottomRightGrid",value:function(N){var U=N.columnCount,K=N.fixedColumnCount,oe=N.fixedRowCount,ue=N.rowCount,se=N.scrollToColumn,ye=N.scrollToRow;return Ln.createElement(yo,go({},N,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,U-K),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(N),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,ue-oe),rowHeight:this._rowHeightBottomGrid,scrollToColumn:se-K,scrollToRow:ye-oe,style:this._bottomRightGridStyle,width:this._getRightGridWidth(N)}))}},{key:"_renderTopLeftGrid",value:function(N){var U=N.fixedColumnCount,K=N.fixedRowCount;return U&&K?Ln.createElement(yo,go({},N,{className:this.props.classNameTopLeftGrid,columnCount:U,height:this._getTopGridHeight(N),ref:this._topLeftGridRef,rowCount:K,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(N)})):null}},{key:"_renderTopRightGrid",value:function(N){var U=N.columnCount,K=N.enableFixedRowScroll,oe=N.fixedColumnCount,ue=N.fixedRowCount,se=N.scrollLeft,ye=N.hideTopRightGridScrollbar,Ae=this.state,Ie=Ae.showHorizontalScrollbar,Ve=Ae.scrollbarSize;if(!ue)return null;var tt=Ie?1:0,lt=this._getTopGridHeight(N),Dt=this._getRightGridWidth(N),ht=Ie?Ve:0,b=lt,E=this._topRightGridStyle;ye&&(b=lt+ht,E=_i({},this._topRightGridStyle,{left:0}));var w=Ln.createElement(yo,go({},N,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,U-oe)+tt,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:b,onScroll:K?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:ue,scrollLeft:se,style:E,tabIndex:null,width:Dt}));return ye?Ln.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:_i({},this._topRightGridStyle,{height:lt,width:Dt,overflowX:"hidden"})},w):w}}],[{key:"getDerivedStateFromProps",value:function(N,U){return N.scrollLeft!==U.scrollLeft||N.scrollTop!==U.scrollTop?{scrollLeft:N.scrollLeft!=null&&0<=N.scrollLeft?N.scrollLeft:U.scrollLeft,scrollTop:N.scrollTop!=null&&0<=N.scrollTop?N.scrollTop:U.scrollTop}:null}}]),ee}();ut(Ns,"propTypes",{classNameBottomLeftGrid:Tt.string.isRequired,classNameBottomRightGrid:Tt.string.isRequired,classNameTopLeftGrid:Tt.string.isRequired,classNameTopRightGrid:Tt.string.isRequired,enableFixedColumnScroll:Tt.bool.isRequired,enableFixedRowScroll:Tt.bool.isRequired,fixedColumnCount:Tt.number.isRequired,fixedRowCount:Tt.number.isRequired,onScrollbarPresenceChange:Tt.func,style:Tt.object.isRequired,styleBottomLeftGrid:Tt.object.isRequired,styleBottomRightGrid:Tt.object.isRequired,styleTopLeftGrid:Tt.object.isRequired,styleTopRightGrid:Tt.object.isRequired,hideTopRightGridScrollbar:Tt.bool,hideBottomLeftGridScrollbar:Tt.bool}),ut(Ns,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),xn(Ns);var Al=function(){function ee(N,U){var K;return sr(this,ee),(K=Lr(this,Mr(ee).call(this,N,U))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},K._onScroll=K._onScroll.bind(Ot(K)),K}return s(ee,"ScrollSync"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"render",value:function(){var N=this.props.children,U=this.state,K=U.clientHeight,oe=U.clientWidth,ue=U.scrollHeight,se=U.scrollLeft,ye=U.scrollTop,Ae=U.scrollWidth;return N({clientHeight:K,clientWidth:oe,onScroll:this._onScroll,scrollHeight:ue,scrollLeft:se,scrollTop:ye,scrollWidth:Ae})}},{key:"_onScroll",value:function(N){var U=N.clientHeight,K=N.clientWidth,oe=N.scrollHeight,ue=N.scrollLeft,se=N.scrollTop,ye=N.scrollWidth;this.setState({clientHeight:U,clientWidth:K,scrollHeight:oe,scrollLeft:ue,scrollTop:se,scrollWidth:ye})}}]),ee}();function wl(ee){var N=ee.dataKey,U=ee.rowData;return typeof U.get=="function"?U.get(N):U[N]}s(wl,"defaultCellDataGetter");function Ol(ee){var N=ee.cellData;return N==null?"":String(N)}s(Ol,"defaultCellRenderer");function va(ee){var N=ee.className,U=ee.columns,K=ee.style;return Ln.createElement("div",{className:N,role:"row",style:K},U)}s(va,"defaultHeaderRowRenderer"),ut(Al,"propTypes",{children:Tt.func.isRequired});var Tr={ASC:"ASC",DESC:"DESC"};function Ls(ee){var N=ee.sortDirection,U=hn("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":N===Tr.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":N===Tr.DESC});return Ln.createElement("svg",{className:U,width:18,height:18,viewBox:"0 0 24 24"},N===Tr.ASC?Ln.createElement("path",{d:"M7 14l5-5 5 5z"}):Ln.createElement("path",{d:"M7 10l5 5 5-5z"}),Ln.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}s(Ls,"SortIndicator");function ya(ee){var N=ee.dataKey,U=ee.label,K=ee.sortBy,oe=ee.sortDirection,ue=K===N,se=[Ln.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof U=="string"?U:null},U)];return ue&&se.push(Ln.createElement(Ls,{key:"SortIndicator",sortDirection:oe})),se}s(ya,"defaultHeaderRenderer");function Ea(ee){var N=ee.className,U=ee.columns,K=ee.index,oe=ee.key,ue=ee.onRowClick,se=ee.onRowDoubleClick,ye=ee.onRowMouseOut,Ae=ee.onRowMouseOver,Ie=ee.onRowRightClick,Ve=ee.rowData,tt=ee.style,lt={"aria-rowindex":K+1};return(ue||se||ye||Ae||Ie)&&(lt["aria-label"]="row",lt.tabIndex=0,ue&&(lt.onClick=function(Dt){return ue({event:Dt,index:K,rowData:Ve})}),se&&(lt.onDoubleClick=function(Dt){return se({event:Dt,index:K,rowData:Ve})}),ye&&(lt.onMouseOut=function(Dt){return ye({event:Dt,index:K,rowData:Ve})}),Ae&&(lt.onMouseOver=function(Dt){return Ae({event:Dt,index:K,rowData:Ve})}),Ie&&(lt.onContextMenu=function(Dt){return Ie({event:Dt,index:K,rowData:Ve})})),Ln.createElement("div",go({},lt,{className:N,key:oe,role:"row",style:tt}),U)}s(Ea,"defaultRowRenderer"),Ls.propTypes={sortDirection:Tt.oneOf([Tr.ASC,Tr.DESC])};var Zo=function(){function ee(){return sr(this,ee),Lr(this,Mr(ee).apply(this,arguments))}return s(ee,"Column"),Nr(ee,Ln.Component),ee}();ut(Zo,"propTypes",{"aria-label":Tt.string,cellDataGetter:Tt.func,cellRenderer:Tt.func,className:Tt.string,columnData:Tt.object,dataKey:Tt.any.isRequired,defaultSortDirection:Tt.oneOf([Tr.ASC,Tr.DESC]),disableSort:Tt.bool,flexGrow:Tt.number,flexShrink:Tt.number,headerClassName:Tt.string,headerRenderer:Tt.func.isRequired,headerStyle:Tt.object,id:Tt.string,label:Tt.node,maxWidth:Tt.number,minWidth:Tt.number,style:Tt.object,width:Tt.number.isRequired}),ut(Zo,"defaultProps",{cellDataGetter:wl,cellRenderer:Ol,defaultSortDirection:Tr.ASC,flexGrow:0,flexShrink:1,headerRenderer:ya,style:{}});var Fs=function(){function ee(N){var U;return sr(this,ee),(U=Lr(this,Mr(ee).call(this,N))).state={scrollbarWidth:0},U._createColumn=U._createColumn.bind(Ot(U)),U._createRow=U._createRow.bind(Ot(U)),U._onScroll=U._onScroll.bind(Ot(U)),U._onSectionRendered=U._onSectionRendered.bind(Ot(U)),U._setRef=U._setRef.bind(Ot(U)),U}return s(ee,"Table"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(N){var U=N.alignment,K=N.index;return this.Grid?this.Grid.getOffsetForCell({alignment:U,rowIndex:K}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(N){var U=N.columnIndex,K=N.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:K,columnIndex:U})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(N){var U=0<arguments.length&&N!==void 0?N:{},K=U.columnIndex,oe=K===void 0?0:K,ue=U.rowIndex,se=ue===void 0?0:ue;this.Grid&&this.Grid.recomputeGridSize({rowIndex:se,columnIndex:oe})}},{key:"recomputeRowHeights",value:function(N){var U=0<arguments.length&&N!==void 0?N:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:U})}},{key:"scrollToPosition",value:function(N){var U=0<arguments.length&&N!==void 0?N:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:U})}},{key:"scrollToRow",value:function(N){var U=0<arguments.length&&N!==void 0?N:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:U})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var N=Ec.findDOMNode(this.Grid),U=N.clientWidth||0;return(N.offsetWidth||0)-U}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var N=this,U=this.props,K=U.children,oe=U.className,ue=U.disableHeader,se=U.gridClassName,ye=U.gridStyle,Ae=U.headerHeight,Ie=U.headerRowRenderer,Ve=U.height,tt=U.id,lt=U.noRowsRenderer,Dt=U.rowClassName,ht=U.rowStyle,b=U.scrollToIndex,E=U.style,w=U.width,I=this.state.scrollbarWidth,H=ue?Ve:Ve-Ae,j=typeof Dt=="function"?Dt({index:-1}):Dt,Q=typeof ht=="function"?ht({index:-1}):ht;return this._cachedColumnStyles=[],Ln.Children.toArray(K).forEach(function(ce,Re){var Ne=N._getFlexStyleForColumn(ce,ce.props.style);N._cachedColumnStyles[Re]=_i({overflow:"hidden"},Ne)}),Ln.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":Ln.Children.toArray(K).length,"aria-rowcount":this.props.rowCount,className:hn("ReactVirtualized__Table",oe),id:tt,role:"grid",style:E},!ue&&Ie({className:hn("ReactVirtualized__Table__headerRow",j),columns:this._getHeaderColumns(),style:_i({height:Ae,overflow:"hidden",paddingRight:I,width:w},Q)}),Ln.createElement(yo,go({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:hn("ReactVirtualized__Table__Grid",se),cellRenderer:this._createRow,columnWidth:w,columnCount:1,height:H,id:void 0,noContentRenderer:lt,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:I,scrollToRow:b,style:_i({},ye,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(N){var U=N.column,K=N.columnIndex,oe=N.isScrolling,ue=N.parent,se=N.rowData,ye=N.rowIndex,Ae=this.props.onColumnClick,Ie=U.props,Ve=Ie.cellDataGetter,tt=Ie.cellRenderer,lt=Ie.className,Dt=Ie.columnData,ht=Ie.dataKey,b=Ie.id,E=tt({cellData:Ve({columnData:Dt,dataKey:ht,rowData:se}),columnData:Dt,columnIndex:K,dataKey:ht,isScrolling:oe,parent:ue,rowData:se,rowIndex:ye}),w=this._cachedColumnStyles[K],I=typeof E=="string"?E:null;return Ln.createElement("div",{"aria-colindex":K+1,"aria-describedby":b,className:hn("ReactVirtualized__Table__rowColumn",lt),key:"Row"+ye+"-Col"+K,onClick:function(H){Ae&&Ae({columnData:Dt,dataKey:ht,event:H})},role:"gridcell",style:w,title:I},E)}},{key:"_createHeader",value:function(N){var U,K,oe,ue,se,ye=N.column,Ae=N.index,Ie=this.props,Ve=Ie.headerClassName,tt=Ie.headerStyle,lt=Ie.onHeaderClick,Dt=Ie.sort,ht=Ie.sortBy,b=Ie.sortDirection,E=ye.props,w=E.columnData,I=E.dataKey,H=E.defaultSortDirection,j=E.disableSort,Q=E.headerRenderer,ce=E.id,Re=E.label,Ne=!j&&Dt,Qe=hn("ReactVirtualized__Table__headerColumn",Ve,ye.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:Ne}),Je=this._getFlexStyleForColumn(ye,_i({},tt,{},ye.props.headerStyle)),st=Q({columnData:w,dataKey:I,disableSort:j,label:Re,sortBy:ht,sortDirection:b});if(Ne||lt){var pt=ht!==I?H:b===Tr.DESC?Tr.ASC:Tr.DESC,Kt=s(function(Cn){Ne&&Dt({defaultSortDirection:H,event:Cn,sortBy:I,sortDirection:pt}),lt&&lt({columnData:w,dataKey:I,event:Cn})},"onClick");se=ye.props["aria-label"]||Re||I,ue="none",oe=0,U=Kt,K=s(function(Cn){Cn.key!=="Enter"&&Cn.key!==" "||Kt(Cn)},"headerOnKeyDown")}return ht===I&&(ue=b===Tr.ASC?"ascending":"descending"),Ln.createElement("div",{"aria-label":se,"aria-sort":ue,className:Qe,id:ce,key:"Header-Col"+Ae,onClick:U,onKeyDown:K,role:"columnheader",style:Je,tabIndex:oe},st)}},{key:"_createRow",value:function(N){var U=this,K=N.rowIndex,oe=N.isScrolling,ue=N.key,se=N.parent,ye=N.style,Ae=this.props,Ie=Ae.children,Ve=Ae.onRowClick,tt=Ae.onRowDoubleClick,lt=Ae.onRowRightClick,Dt=Ae.onRowMouseOver,ht=Ae.onRowMouseOut,b=Ae.rowClassName,E=Ae.rowGetter,w=Ae.rowRenderer,I=Ae.rowStyle,H=this.state.scrollbarWidth,j=typeof b=="function"?b({index:K}):b,Q=typeof I=="function"?I({index:K}):I,ce=E({index:K}),Re=Ln.Children.toArray(Ie).map(function(Je,st){return U._createColumn({column:Je,columnIndex:st,isScrolling:oe,parent:se,rowData:ce,rowIndex:K,scrollbarWidth:H})}),Ne=hn("ReactVirtualized__Table__row",j),Qe=_i({},ye,{height:this._getRowHeight(K),overflow:"hidden",paddingRight:H},Q);return w({className:Ne,columns:Re,index:K,isScrolling:oe,key:ue,onRowClick:Ve,onRowDoubleClick:tt,onRowRightClick:lt,onRowMouseOver:Dt,onRowMouseOut:ht,rowData:ce,style:Qe})}},{key:"_getFlexStyleForColumn",value:function(N,U){var K=1<arguments.length&&U!==void 0?U:{},oe="".concat(N.props.flexGrow," ").concat(N.props.flexShrink," ").concat(N.props.width,"px"),ue=_i({},K,{flex:oe,msFlex:oe,WebkitFlex:oe});return N.props.maxWidth&&(ue.maxWidth=N.props.maxWidth),N.props.minWidth&&(ue.minWidth=N.props.minWidth),ue}},{key:"_getHeaderColumns",value:function(){var N=this,U=this.props,K=U.children;return(U.disableHeader?[]:Ln.Children.toArray(K)).map(function(oe,ue){return N._createHeader({column:oe,index:ue})})}},{key:"_getRowHeight",value:function(N){var U=this.props.rowHeight;return typeof U=="function"?U({index:N}):U}},{key:"_onScroll",value:function(N){var U=N.clientHeight,K=N.scrollHeight,oe=N.scrollTop;(0,this.props.onScroll)({clientHeight:U,scrollHeight:K,scrollTop:oe})}},{key:"_onSectionRendered",value:function(N){var U=N.rowOverscanStartIndex,K=N.rowOverscanStopIndex,oe=N.rowStartIndex,ue=N.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:U,overscanStopIndex:K,startIndex:oe,stopIndex:ue})}},{key:"_setRef",value:function(N){this.Grid=N}},{key:"_setScrollbarWidth",value:function(){var N=this.getScrollbarWidth();this.setState({scrollbarWidth:N})}}]),ee}();ut(Fs,"propTypes",{"aria-label":Tt.string,"aria-labelledby":Tt.string,autoHeight:Tt.bool,children:function(ee){for(var N=Ln.Children.toArray(ee.children),U=0;U<N.length;U++){var K=N[U].type;if(K!==Zo&&!(K.prototype instanceof Zo))return new Error("Table only accepts children of type Column")}},className:Tt.string,disableHeader:Tt.bool,estimatedRowSize:Tt.number.isRequired,gridClassName:Tt.string,gridStyle:Tt.object,headerClassName:Tt.string,headerHeight:Tt.number.isRequired,headerRowRenderer:Tt.func,headerStyle:Tt.object,height:Tt.number.isRequired,id:Tt.string,noRowsRenderer:Tt.func,onColumnClick:Tt.func,onHeaderClick:Tt.func,onRowClick:Tt.func,onRowDoubleClick:Tt.func,onRowMouseOut:Tt.func,onRowMouseOver:Tt.func,onRowRightClick:Tt.func,onRowsRendered:Tt.func,onScroll:Tt.func.isRequired,overscanIndicesGetter:Tt.func.isRequired,overscanRowCount:Tt.number.isRequired,rowClassName:Tt.oneOfType([Tt.string,Tt.func]),rowGetter:Tt.func.isRequired,rowHeight:Tt.oneOfType([Tt.number,Tt.func]).isRequired,rowCount:Tt.number.isRequired,rowRenderer:Tt.func,rowStyle:Tt.oneOfType([Tt.object,Tt.func]).isRequired,scrollToAlignment:Tt.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:Tt.number.isRequired,scrollTop:Tt.number,sort:Tt.func,sortBy:Tt.string,sortDirection:Tt.oneOf([Tr.ASC,Tr.DESC]),style:Tt.object,tabIndex:Tt.number,width:Tt.number.isRequired}),ut(Fs,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:la,overscanRowCount:10,rowRenderer:Ea,headerRowRenderer:va,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Io=[],qo=null,Do=null;function Ml(){Do&&(Do=null,$e.body&&qo!=null&&($e.body.style.pointerEvents=qo),qo=null)}s(Ml,"enablePointerEventsIfDisabled");function wc(){Ml(),Io.forEach(function(ee){return ee.__resetIsScrolling()})}s(wc,"enablePointerEventsAfterDelayCallback");function Rl(ee){ee.currentTarget===z&&qo==null&&$e.body&&(qo=$e.body.style.pointerEvents,$e.body.style.pointerEvents="none"),function(){Do&&ro(Do);var N=0;Io.forEach(function(U){N=Math.max(N,U.props.scrollingResetTimeInterval)}),Do=Dc(wc,N)}(),Io.forEach(function(N){N.props.scrollElement===ee.currentTarget&&N.__handleWindowScrollEvent()})}s(Rl,"onScrollWindow");function Pl(ee,N){Io.some(function(U){return U.props.scrollElement===N})||N.addEventListener("scroll",Rl),Io.push(ee)}s(Pl,"registerScrollListener");function kl(ee,N){(Io=Io.filter(function(U){return U!==ee})).length||(N.removeEventListener("scroll",Rl),Do&&(ro(Do),Ml()))}s(kl,"unregisterScrollListener");var Bs=s(function(ee){return ee===z},"isWindow"),ms=s(function(ee){return ee.getBoundingClientRect()},"getBoundingBox");function Nl(ee,N){if(ee){if(Bs(ee)){var U=z,K=U.innerHeight,oe=U.innerWidth;return{height:typeof K=="number"?K:0,width:typeof oe=="number"?oe:0}}return ms(ee)}return{height:N.serverHeight,width:N.serverWidth}}s(Nl,"getDimensions");function Ll(ee){return Bs(ee)&&$e.documentElement?{top:"scrollY"in z?z.scrollY:$e.documentElement.scrollTop,left:"scrollX"in z?z.scrollX:$e.documentElement.scrollLeft}:{top:ee.scrollTop,left:ee.scrollLeft}}s(Ll,"getScrollOffset");var Fl=s(function(){return typeof z<"u"?z:void 0},"getWindow"),Bl=function(){function ee(){var N,U;sr(this,ee);for(var K=arguments.length,oe=new Array(K),ue=0;ue<K;ue++)oe[ue]=arguments[ue];return ut(Ot(U=Lr(this,(N=Mr(ee)).call.apply(N,[this].concat(oe)))),"_window",Fl()),ut(Ot(U),"_isMounted",!1),ut(Ot(U),"_positionFromTop",0),ut(Ot(U),"_positionFromLeft",0),ut(Ot(U),"_detectElementResize",void 0),ut(Ot(U),"_child",void 0),ut(Ot(U),"state",_i({},Nl(U.props.scrollElement,U.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),ut(Ot(U),"_registerChild",function(se){!se||se instanceof Zi||at.warn("WindowScroller registerChild expects to be passed Element or null"),U._child=se,U.updatePosition()}),ut(Ot(U),"_onChildScroll",function(se){var ye=se.scrollTop;if(U.state.scrollTop!==ye){var Ae=U.props.scrollElement;Ae&&(typeof Ae.scrollTo=="function"?Ae.scrollTo(0,ye+U._positionFromTop):Ae.scrollTop=ye+U._positionFromTop)}}),ut(Ot(U),"_registerResizeListener",function(se){se===z?z.addEventListener("resize",U._onResize,!1):U._detectElementResize.addResizeListener(se,U._onResize)}),ut(Ot(U),"_unregisterResizeListener",function(se){se===z?z.removeEventListener("resize",U._onResize,!1):se&&U._detectElementResize.removeResizeListener(se,U._onResize)}),ut(Ot(U),"_onResize",function(){U.updatePosition()}),ut(Ot(U),"__handleWindowScrollEvent",function(){if(U._isMounted){var se=U.props.onScroll,ye=U.props.scrollElement;if(ye){var Ae=Ll(ye),Ie=Math.max(0,Ae.left-U._positionFromLeft),Ve=Math.max(0,Ae.top-U._positionFromTop);U.setState({isScrolling:!0,scrollLeft:Ie,scrollTop:Ve}),se({scrollLeft:Ie,scrollTop:Ve})}}}),ut(Ot(U),"__resetIsScrolling",function(){U.setState({isScrolling:!1})}),U}return s(ee,"WindowScroller"),Nr(ee,Ln.PureComponent),hr(ee,[{key:"updatePosition",value:function(N){var U=0<arguments.length&&N!==void 0?N:this.props.scrollElement,K=this.props.onResize,oe=this.state,ue=oe.height,se=oe.width,ye=this._child||Ec.findDOMNode(this);if(ye instanceof Zi&&U){var Ae=function(Ve,tt){if(Bs(tt)&&$e.documentElement){var lt=$e.documentElement,Dt=ms(Ve),ht=ms(lt);return{top:Dt.top-ht.top,left:Dt.left-ht.left}}var b=Ll(tt),E=ms(Ve),w=ms(tt);return{top:E.top+b.top-w.top,left:E.left+b.left-w.left}}(ye,U);this._positionFromTop=Ae.top,this._positionFromLeft=Ae.left}var Ie=Nl(U,this.props);ue===Ie.height&&se===Ie.width||(this.setState({height:Ie.height,width:Ie.width}),K({height:Ie.height,width:Ie.width}))}},{key:"componentDidMount",value:function(){var N=this.props.scrollElement;this._detectElementResize=jd(),this.updatePosition(N),N&&(Pl(this,N),this._registerResizeListener(N)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(N){var U=this.props.scrollElement,K=N.scrollElement;K!==U&&K!=null&&U!=null&&(this.updatePosition(U),kl(this,K),Pl(this,U),this._unregisterResizeListener(K),this._registerResizeListener(U))}},{key:"componentWillUnmount",value:function(){var N=this.props.scrollElement;N&&(kl(this,N),this._unregisterResizeListener(N)),this._isMounted=!1}},{key:"render",value:function(){var N=this.props.children,U=this.state,K=U.isScrolling,oe=U.scrollTop,ue=U.scrollLeft,se=U.height,ye=U.width;return N({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:se,isScrolling:K,scrollLeft:ue,scrollTop:oe,width:ye})}}]),ee}();ut(Bl,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:Fl(),serverHeight:0,serverWidth:0}),Fi.ArrowKeyStepper=bc,Fi.AutoSizer=zd,Fi.CellMeasurer=_c,Fi.CellMeasurerCache=yh,Fi.Collection=Ic,Fi.Column=Zo,Fi.ColumnSizer=Yo,Fi.Grid=yo,Fi.InfiniteLoader=ca,Fi.List=yl,Fi.Masonry=ga,Fi.MultiGrid=Ns,Fi.ScrollSync=Al,Fi.SortDirection=Tr,Fi.SortIndicator=Ls,Fi.Table=Fs,Fi.WindowScroller=Bl,Fi.accessibilityOverscanIndicesGetter=la,Fi.createMasonryCellPositioner=function(ee){var N,U=ee.cellMeasurerCache,K=ee.columnCount,oe=ee.columnWidth,ue=ee.spacer,se=ue===void 0?0:ue;function ye(Ie){for(var Ve=0,tt=1;tt<N.length;tt++)N[tt]<N[Ve]&&(Ve=tt);var lt=Ve*(oe+se),Dt=N[Ve]||0;return N[Ve]=Dt+U.getHeight(Ie)+se,{left:lt,top:Dt}}s(ye,"cellPositioner");function Ae(){N=[];for(var Ie=0;Ie<K;Ie++)N[Ie]=0}return s(Ae,"initOrResetDerivedValues"),Ae(),ye.reset=function(Ie){K=Ie.columnCount,oe=Ie.columnWidth,se=Ie.spacer,Ae()},ye},Fi.createTableMultiSort=function(ee){var N=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},U=N.defaultSortBy,K=N.defaultSortDirection,oe=K===void 0?{}:K;if(!ee)throw Error('Required parameter "sortCallback" not specified');var ue=U||[],se={};return ue.forEach(function(ye){se[ye]=oe[ye]!==void 0?oe[ye]:"ASC"}),{sort:function(ye){var Ae=ye.defaultSortDirection,Ie=ye.event,Ve=ye.sortBy;if(Ie.shiftKey)se[Ve]!==void 0?se[Ve]=se[Ve]==="ASC"?"DESC":"ASC":(se[Ve]=Ae,ue.push(Ve));else if(Ie.ctrlKey||Ie.metaKey){var tt=ue.indexOf(Ve);0<=tt&&(ue.splice(tt,1),delete se[Ve])}else ue.length=0,ue.push(Ve),Object.keys(se).forEach(function(lt){lt!==Ve&&delete se[lt]}),se[Ve]!==void 0?se[Ve]=se[Ve]==="ASC"?"DESC":"ASC":se[Ve]=Ae;ee({sortBy:ue,sortDirection:se})},sortBy:ue,sortDirection:se}},Fi.defaultCellRangeRenderer=iu,Fi.defaultOverscanIndicesGetter=nu,Fi.defaultTableCellDataGetter=wl,Fi.defaultTableCellRenderer=Ol,Fi.defaultTableHeaderRenderer=ya,Fi.defaultTableHeaderRowRenderer=va,Fi.defaultTableRowRenderer=Ea,Object.defineProperty(Fi,"__esModule",{value:!0})}),r.exports}},3262078016:(x,l,d)=>{"use strict";d.r(l),d.d(l,{AiActionType:()=>mn,AutocompleteActions:()=>Se,CalloutBackgroundColor:()=>Yi,CalloutModificationProperty:()=>Hn,CollabApi:()=>Yt,CollabPopoverDismissSource:()=>Xe,CollabUrlType:()=>kt,CommentFocusTarget:()=>yi,CommentLevel:()=>qn,CommentUIContext:()=>Si,DialogContext:()=>Ue,DocBlockStyle:()=>G,DocInlineStyle:()=>Le,EmbeddedMoveDirection:()=>pn,EmbeddedObjectType:()=>Nt,EmbeddedUIAttributes:()=>li,EmbeddedUiAction:()=>Kn,EmbeddedUiContext:()=>Xn,ErrorSource:()=>In,Feature:()=>fe,FullTableModification:()=>un,GetSlackObjectFailureReason:()=>he,GrafterUrls:()=>n,InlineFormattingType:()=>me,NavigationTypeMetric:()=>ae,PlaceholderInsertionType:()=>gn,RichTextMessageAction:()=>hi,SectionInsertionType:()=>Tn,ShortcutModifier:()=>Te,SlackListContentRenderType:()=>nt,SlackObjectActionType:()=>Vn,SlackObjectType:()=>k,SlackShortcutCommandType:()=>be,SlackShortcutMetricSource:()=>te,SlackUnfurlContentRenderType:()=>mt,TablePart:()=>Pt,TablePartModificationType:()=>Mi,TableSelectionAction:()=>lr,TableSelectionModification:()=>ai,TemplateControlAction:()=>xi,TemplateType:()=>Fn,ToastMessageContext:()=>rt,UnfurlType:()=>Et});class c{constructor(){this.o=!1,this._=[]}run(){this.o=!0;const re=this._;this._=[];for(let we=0;we<re.length;we++)re[we]()}add(re){this.o?re():this._.push(re)}}s(c,"t");var h,m;(function(L){var re;(re=L.Op||(L.Op={}))[re.DID_INITIALIZE=8]="DID_INITIALIZE",re[re.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(h||(h={})),function(L){var re;(re=L.Op||(L.Op={}))[re.INIT=0]="INIT"}(m||(m={}));class p{constructor(re){this.l=new Map,this.T=null,this.destinationFn=re}setTransportHook(re){this.T=re}tearDown(){}addHandler(re,we){this.l.has(re)&&this.logError(`Already had handler for op ${re} will overwrite.`),this.l.set(re,we)}getHandler(re){const we=this.l.get(re);return we?this.T?($e,yt)=>{var Xt;return(Xt=this.T)===null||Xt===void 0||Xt.call(this,re,$e,r.INCOMING),we($e,dn=>{var Zt;return(Zt=this.T)===null||Zt===void 0||Zt.call(this,re,dn,r.OUTGOING_REPLY),yt(dn)})}:we:null}invoke(re,we,$e){var yt;if((yt=this.T)===null||yt===void 0||yt.call(this,re,we,r.OUTGOING),this.T&&$e){const Zt=$e;$e=s(qt=>{var on;(on=this.T)===null||on===void 0||on.call(this,re,qt,r.INCOMING_REPLY),Zt(qt)},"i")}const Xt=this.destinationFn().getHandler(re);if(!Xt)return void this.logError(`Bridge transport doesn't have handler for op ${re}`);let dn;try{dn=Xt(we,Zt=>{$e?$e(Zt):this.logError(`Invoke response received without callback for op ${re}`)})}catch{a(re,we)}dn instanceof Promise&&dn.catch(Zt=>a(re,we))}logError(re){}}s(p,"s");let a=s((L,re,we)=>{let $e="";try{$e=JSON.stringify(re)}catch{$e="(Unserializable message)"}},"n");var r,n,e;function t(L){return L?`${function(){var re;const we=(re=new URLSearchParams(location.search).get("quip_js_path"))!==null&&re!==void 0?re:void 0;return we&&/^remote-dev\d{4}$/.test(we)?`https://app.${we.split("-")[1]}.slack.com`:location.origin}()}${n.RDEVS_CONTROLLER_JS_PATH}`:n.CONTROLLER_JS}s(t,"_");function i(L){if(!L)return!1;const re=L.indexOf(location.origin+"/")!=0,we=L.includes("/canvas-rdev/collab/");return re&&we}s(i,"l"),function(L){L[L.INCOMING=1]="INCOMING",L[L.INCOMING_REPLY=2]="INCOMING_REPLY",L[L.OUTGOING=3]="OUTGOING",L[L.OUTGOING_REPLY=4]="OUTGOING_REPLY"}(r||(r={})),function(L){L.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",L.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",L.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded",L.RDEVS_EMBEDDED_JS_PATH="/canvas-rdev/collab/grafted/embedded?grafted=True&resource_bundle_name=collab_embedded",L.RDEVS_CONTROLLER_CSS_PATH="/canvas-rdev/collab/grafted/style?retina=True&mode=normal&less=collab%2Fcontroller.less",L.RDEVS_CONTROLLER_JS_PATH="/canvas-rdev/collab/canvas-remote-dev-vite?path=ts/src/collab/controller/bundle.ts"}(n||(n={})),function(L){L.BRIDGE_TRANSPORT_SET="bridge-transport-set",L.BRIDGE_TRANSPORT_READY="bridge-transport-ready",L.HANDLER_REGISTERED="handler-registered",L.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",L.MESSAGE_SENT="message_sent",L.MESSAGE_HANDLED="message-handled",L.INIT_SENT="init_sent",L.INIT_RECEIVED="init_received",L.DID_INIT_SENT="did_init_sent",L.DID_INIT_RECEIVED="did_init_received",L.BRIDGE_OPEN="bridge-open",L.ERROR="error",L.SYSTEMJS_LOADED="systemjs-loaded",L.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",L.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",L.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",L.PROBE="probe",L.OTHER="misc"}(e||(e={}));class o{constructor(re){this.u=re,this.A=[],this.S=[],this.O=[],this.N=[],this.I=[],this.L=Date.now(),this.onlyBefore("Handler registered late",e.HANDLER_REGISTERED,[e.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",e.MESSAGE_SENT,[e.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",e.MESSAGE_HANDLED,[e.BRIDGE_OPEN])}getTimeoutForPromise(){return o.TIMEOUT_FOR_PROMISE}fireEvent(re,we=null){if(this.S.filter(yt=>yt.beforeEvent==re).forEach(yt=>{yt.afterEvents.some(Xt=>this.A.includes(Xt))&&yt.message&&this.C(`${this.u}: ${yt.message}`)}),this.O.filter(yt=>yt.afterEvent==re).forEach(yt=>{yt.beforeEvents.some(Xt=>!this.A.includes(Xt))&&yt.message&&this.C(`${this.u}: ${yt.message}`)}),re!=e.HANDLER_REGISTERED&&this.C(we?Promise.resolve(we).then(yt=>`${re}: ${yt}`):re),this.A.includes(re))return;this.A.push(re);const $e=[];this.N=this.N.filter(yt=>!yt.events.every(Xt=>this.A.includes(Xt))||($e.push(yt),!1)),$e.forEach(yt=>{yt.description&&this.C(`${re} -> ${yt.description}`),yt.callback()})}after(re,we,$e=null){re.every(yt=>this.A.includes(yt))?we():($e&&this.C(`${$e} deferred`),this.N.push({events:re,description:$e,callback:we}))}onlyBefore(re,we,$e){this.S.push({beforeEvent:we,afterEvents:$e,message:re})}onlyAfter(re,we,$e){this.O.push({beforeEvents:$e,afterEvent:we,message:re})}C(re){if(this.I.length>o.MAX_INIT_LOG)return;const we=Date.now()-this.L,$e=Promise.resolve(re);this.I.push({timestamp:we,message:$e}),$e.then(yt=>{console.debug(`${this.u}: ${yt}`)})}getInitLog(re){const we=(re?this.I.slice(0,re):this.I).map(async $e=>({t:$e.timestamp,e:await $e.message}));return Promise.all(we).then($e=>({id:this.u,log:$e}))}}s(o,"c"),o.MAX_INIT_LOG=50,o.TIMEOUT_FOR_PROMISE=3e4;function f(L,{logCallback:re=s(()=>{},"e"),timeoutMillis:we=3e4,name:$e="Unnamed",context:yt=""}={}){return new Promise((Xt,dn)=>{let Zt=window.setTimeout(()=>{Zt=null,re(`${$e} promise timed out: ${yt}`),dn(new Error(`${$e} promise timed out`))},we);const qt=s(()=>{Zt&&(clearTimeout(Zt),Zt=null)},"_");L.then(on=>{Zt?(qt(),Xt(on)):re(`${$e} promise resolved after timeout: ${yt}`)}).catch(on=>{Zt?(qt(),dn(on)):re(`${$e} promise rejected after timeout: ${yt}`)})})}s(f,"a");function g(L,re,we,$e,yt){const{span:Xt,closeSpanFn:dn}=$e.createBasicTraceSpan(yt,we,{[Ge.URL]:L}),{closeSpanFn:Zt}=$e.createBasicTraceSpan(Xt,ke.HTTP_FETCH_HEADER),qt=new AbortController,on=setTimeout(()=>{qt.abort()},$e.bridgeInit.getTimeoutForPromise());return fetch(L,Object.assign({signal:qt.signal},re)).catch(wn=>{throw Zt(wn),Error(`${we} fetch failed: ${wn}`)}).then(wn=>{if(clearTimeout(on),!wn.ok)return Zt(new Error(`returned ${wn.status}`)),u($e,we,wn,Xt).then(Jn=>{throw Error(Jn)});Zt();const{closeSpanFn:Zn}=$e.createBasicTraceSpan(Xt,ke.HTTP_FETCH_CONTENT,{[Ge.URL]:L});return wn.text().catch(Jn=>{throw Zn(Jn),Jn}).then(Jn=>{Zn();const{closeSpanFn:Ei}=$e.createBasicTraceSpan(Xt,ke.JSON_PARSE);try{const $i=JSON.parse(Jn);return Ei(),$i}catch($i){throw Ei(new Error(`${$i}`)),$e.bridgeInit.fireEvent(e.ERROR,u($e,we,wn,null)),$i}})}).finally(()=>{dn()})}s(g,"h");function S(L,re,we,$e,yt=!1){const Xt=new AbortController,dn=setTimeout(()=>{Xt.abort()},we.bridgeInit.getTimeoutForPromise());we.bridgeInit.fireEvent(e.OTHER,`${re} prefetch start`);const{span:Zt,closeSpanFn:qt}=we.createBasicTraceSpan($e,ke.MODULE_PREFETCH,{[Ge.URL]:L}),{closeSpanFn:on}=we.createBasicTraceSpan(Zt,ke.HTTP_FETCH_HEADER),wn={method:"GET",mode:"cors",cache:"default",signal:Xt.signal};return yt&&(wn.credentials="include"),fetch(L,wn).catch(Zn=>{throw on(Zn),Error(`${re} fetch failed: ${Zn}`)}).then(Zn=>{if(!Zn.ok)return on(new Error(`Returned ${Zn.status}`)),u(we,re,Zn,Zt).then(Ei=>{throw Error(Ei)});on();const{closeSpanFn:Jn}=we.createBasicTraceSpan(Zt,ke.HTTP_FETCH_CONTENT);return Zn.text().then(()=>{Jn(),we.bridgeInit.fireEvent(e.OTHER,`${re} prefetch ok`)}).catch(Ei=>{throw Jn(Ei),Ei})}).finally(()=>{qt(),clearTimeout(dn)})}s(S,"d");function u(L,re,we,$e){const{closeSpanFn:yt}=L.createBasicTraceSpan($e,ke.HTTP_FETCH_CONTENT);return we.text().then(Xt=>{const dn=function(qt){if(!qt||qt.trim().length==0)return"response body empty";try{const on=new DOMParser().parseFromString(qt,"text/html").documentElement.textContent;if(on&&on.trim().length>0)return on.trim().replace(/\s+/g," ").slice(0,50)}catch{}return qt.trim().slice(0,50)}(Xt),Zt=`${re} fetch returned ${we.status}: ${dn}`;return yt(new Error(Zt)),Zt}).catch(Xt=>{const dn=`${re} fetch returned ${we.status}: response body unavailable (${Xt})`;return yt(new Error(dn)),dn})}s(u,"T");function v(L,re,we){let $e=null;const{id:yt,promise:Xt}=function(qt){const on=Symbol(),wn=new Promise(Zn=>{$.push({id:on,callback:Jn=>{qt(),Zn(Jn)}})});return X||(X=!0,window._collabInit=Zn=>{var Jn;(Jn=$.shift())===null||Jn===void 0||Jn.callback(Zn)}),{promise:wn,id:on}}(()=>{var qt,on;(on=(qt=L==null?void 0:L.platformDelegate)===null||qt===void 0?void 0:qt.endTraceOrSpan)===null||on===void 0||on.call(qt,$e)}),dn=Xt.then(qt=>(L.bridgeInit.fireEvent(e.OTHER,"_collabInit called"),qt));return function(qt,on,wn){return on.then(Zn=>{if(Zn.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:Jn,closeSpanFn:Ei}=qt.createBasicTraceSpan(wn,ke.LOAD_CONTROLLER),$i=qt.config.useGraftedMode?t(qt.config.isRemoteGraftingMode):Zn.controller_entry_module_url;return function(Qi,Sr,On,Ri){On&&(V=On);const ci=Qi.bridgeInit;if(O){const cr=A;return ci.fireEvent(e.OTHER,`Collab ${cr} is loading systemjs, reusing the promise`),O.then(()=>{ci.fireEvent(e.OTHER,`Systemjs promise reused from collab ${cr} succeeded`)}).catch(Sn=>{throw ci.fireEvent(e.ERROR,`Systemjs promise reused from collab ${cr} failed: ${Sn}`),Sn})}let ki,rn=null;if(D())ci.fireEvent(e.OTHER,"systemjs already loaded, running prepareImport"),rn="System.prepareImport() promise resolved",ki=f(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:ci.getTimeoutForPromise()});else{ci.fireEvent(e.OTHER,"No SystemJS found, loading it");const{span:cr,closeSpanFn:Sn}=Qi.createBasicTraceSpan(Ri,ke.LOAD_SYSTEMJS,{[Ge.JS_PREFETCH_ENABLED]:"true",[Ge.URL]:Sr});rn="systemjs script tag onload fired",ki=function(Zi,vr,Rr){return S(vr,"systemjs-module-loader",Zi,Rr,i(vr)).then(()=>{const le=document.createElement("script");return new Promise((ve,Oe)=>{const{closeSpanFn:qe}=Zi.createBasicTraceSpan(Rr,ke.SCRIPT_TAG);le.src=vr,le.defer=!0,le.crossOrigin="anonymous",le.onload=()=>{qe(),ve()},le.onerror=dt=>{const ct=Error(`systemjs onerror called: ${dt}`);qe(ct),Oe(ct)},document.body.appendChild(le)}).then(()=>{if(!D())throw Error("SystemJS not found after it was loaded")}).catch(ve=>{throw typeof System=="object"&&(delete window.System,Zi.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs global object")),le.onload=null,le.onerror=null,le.parentNode&&(le.parentNode.removeChild(le),Zi.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs loader script tag")),ve})})}(Qi,Sr,cr).finally(()=>{Sn()})}return A=Qi.id,O=ki.then(()=>{ci.fireEvent(e.SYSTEMJS_LOADED,rn)}).finally(()=>{O=null,A=null}),O}(qt,Zn.module_loader_url,Zn.import_map,Jn).then(()=>{var Qi,Sr;return C($i,(Sr=(Qi=Zn.import_map)===null||Qi===void 0?void 0:Qi.imports)!==null&&Sr!==void 0?Sr:{},qt,Jn)}).finally(()=>{Ei()})})}(L,re,we).then(()=>{var qt,on,wn;return $e=(wn=(on=(qt=L==null?void 0:L.platformDelegate)===null||qt===void 0?void 0:qt.startSpan)===null||on===void 0?void 0:on.call(qt,we,ke.AWAIT_CALLBACK))!==null&&wn!==void 0?wn:null,f(dn,{name:"_collabInit callback",timeoutMillis:L.bridgeInit.getTimeoutForPromise()}).catch(Zn=>{var Jn,Ei;throw(Ei=(Jn=L==null?void 0:L.platformDelegate)===null||Jn===void 0?void 0:Jn.endTraceOrSpan)===null||Ei===void 0||Ei.call(Jn,$e,{[Ge.ERROR]:`${Zn}`}),Zn})}).catch(qt=>{var on;throw on=yt,$=$.filter(wn=>wn.id!==on),qt})}s(v,"u");let y=null,_=null;function C(L,re,we,$e){const yt=we.bridgeInit;if(_){const qt=y;return yt.fireEvent(e.OTHER,`Collab ${qt} is loading the controller, waiting for it to finish...`),_.then(()=>(yt.fireEvent(e.OTHER,`Collab ${qt} module loading complete`),C(L,re,we,$e))).catch(on=>(yt.fireEvent(e.OTHER,`Collab ${qt} module loading failed`),C(L,re,we,$e)))}if(yt.fireEvent(e.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(we.config.useSystemJsSharedFork&&!F){const qt=Object.keys(re).filter(([on])=>on.endsWith("-ancillary.js"));F=qt.length>0?System.sharedFork(qt,re):null}const Xt=System.fork(re,F);yt.fireEvent(e.OTHER,`controller module${System.isAlreadyLoaded(L)?" ":" not "}in systemjs cache`);const{span:dn,closeSpanFn:Zt}=we.createBasicTraceSpan($e,ke.LOAD_CONTROLLER_MODULE,{[Ge.JS_PREFETCH_ENABLED]:"true",[Ge.URL]:L});return _=S(L,"controller-module",we,dn,i(L)).then(()=>{const{closeSpanFn:qt}=we.createBasicTraceSpan(dn,ke.SYSTEMJS_IMPORT_MODULE,{[Ge.URL]:L}),on=[],wn=new MutationObserver(Zn=>{on.push(...T(Zn))});return wn.observe(document.head,{childList:!0}),Xt.import(L).then(()=>{qt(),yt.fireEvent(e.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(Zn=>{qt(Zn),on.push(...T(wn.takeRecords()));let Jn=0;throw on.forEach(Ei=>{Ei.onload=null,Ei.onerror=null,Ei.parentNode&&(Ei.parentNode.removeChild(Ei),Jn++)}),Jn>0&&yt.fireEvent(e.OTHER,`Cleaned up ${Jn} SystemJS script tags`),System.resetInstantiationCache()&&yt.fireEvent(e.OTHER,"SystemJS cache cleared"),Zn}).finally(()=>{wn.disconnect()})}).finally(()=>{Zt(),y=null,_=null}),y=we.id,_}s(C,"O");function T(L){const re=[];return L.forEach(we=>{we.addedNodes.forEach($e=>{$e instanceof HTMLScriptElement&&$e.getAttribute("systemjs")==="1"&&re.push($e)})}),re}s(T,"N");let A=null,O=null;function D(){return typeof System=="object"&&typeof System.register=="function"}s(D,"C");function M(){if(!V)return console.warn("No import map data found"),[];const L=V.imports;return!L||typeof L!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(L).filter(re=>typeof re=="string"||re instanceof String)}s(M,"R");const R={};let F,V,$=[],X=!1,Y=null;class ne extends p{constructor(re,we){super(we),this.R=re,this.D=re.bridgeInit,this.m()}tearDown(){super.tearDown()}M(re){var we,$e;console.error("EmbeddedSameOriginBridgeTransport did not load",re),re&&console.error(re.stack),this.D.fireEvent(e.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${re}`),($e=(we=this.R.config.delegate)===null||we===void 0?void 0:we.didFailToInitialize)===null||$e===void 0||$e.call(we,"exception",re)}m(){var re,we,$e;const yt=($e=(we=(re=this.R.platformDelegate)===null||re===void 0?void 0:re.startTrace)===null||we===void 0?void 0:we.call(re,ke.COLLAB_INIT,{[Ge.CONTROLLER_ID]:`${this.R.id}`}))!==null&&$e!==void 0?$e:null,Xt=function(Zt,qt){const on=new FormData,{authToken:wn,userJwt:Zn,getSlackToken:Jn,isGov:Ei,isPreload:$i}=Zt.config;wn&&on.append("oauth_token",wn),Zn&&on.append("user_jwt",Zn),Jn&&on.append("token",Jn()),$i&&on.append("canvas_loadshed_priority","low");const Qi=Zt.config.xhrWithCredentials===!0?"include":void 0,Sr=g(`${Fe(Zt)}/collab/controller-init?format=map`,{method:"POST",body:on,credentials:Qi},ke.CONTROLLER_INIT,Zt,qt).then(ci=>(Zt.bridgeInit.fireEvent(e.CONTROLLER_INIT_DATA_FETCHED),ci)),On=window.QUIP_VERSION_NAME||"server",Ri=new URLSearchParams([["version-name",On]]);return Zt.config.language&&Ri.append("language-code",Zt.config.language),Ri.append("cdn_fallback",`${Zt.getAttemptNumber()}`),Ei&&Ri.append("serve_gov","1"),Y=g(`${Fe(Zt)}/collab/controller-resources?${Ri.toString()}`,{method:"GET",credentials:Qi},ke.CONTROLLER_RESORCES,Zt,qt).then(ci=>(Zt.bridgeInit.fireEvent(e.CONTROLLER_RESOURCE_DATA_FETCHED),ci)).catch(ci=>(Y=null,Zt.bridgeInit.fireEvent(e.ERROR,`controller-resources request failed: ${ci}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null,resources_version:""})),Promise.all([Sr,Y]).then(ci=>{const[ki,rn]=ci;return Object.assign(Object.assign({},ki),rn)})}(this.R,yt),dn=v(this.R,Xt,yt);Promise.all([dn,Xt]).then(Zt=>{var qt;const on=Zt[0],wn=Zt[1];on.main(wn.init_options,wn.preserialized,this.R.config.getSlackToken?null:wn.oauth_token,this.R.config.getSlackToken?null:wn.oauth_token_expiry,(qt=this.R.config.getSlackToken)!==null&&qt!==void 0?qt:null,Fe(this.R),this.destinationFn(),wn.js_initializer,wn.user_id,this.R.config.xhrWithCredentials,this.R.config.enableWebCaching?wn.web_cache_key:void 0,this.R.config.enableWebCaching?wn.web_cache_key_version:void 0,this.R.config.requestsAreCors,wn.body_classes,wn.css_url,!!this.R.config.useGraftedMode,this.R.config.pathRewriteHook,!!this.R.config.isRemoteGraftingMode,wn.resources_version),this.D.fireEvent(e.BRIDGE_TRANSPORT_READY)}).catch(Zt=>this.M(Zt)).finally(()=>{var Zt,qt;(qt=(Zt=this.R.platformDelegate)===null||Zt===void 0?void 0:Zt.endTraceOrSpan)===null||qt===void 0||qt.call(Zt,yt)})}logError(re){this.D.fireEvent(e.ERROR,re)}}s(ne,"P");class ie{constructor(re){this.embeddedSide=new ne(re,()=>this.controllerSide),this.controllerSide=new p(()=>this.embeddedSide)}}s(ie,"U");function pe(L,re){let we=null;for(const $e of function(yt){const Xt=[];for(const dn of Object.keys(yt))isNaN(Number(dn))&&Xt.push(dn);return Xt}(L))L[$e]===re&&(we=$e);return we||(we=String(re)),we+=` (${re})`,we}s(pe,"g");const Ee={[r.INCOMING]:"ToEmbedded",[r.OUTGOING]:"FromEmbedded",[r.INCOMING_REPLY]:"ReplyToEmbedded",[r.OUTGOING_REPLY]:"ReplyFromEmbedded"},Be=[h.Op.DID_INITIALIZE,h.Op.DID_FAIL_TO_INITIALIZE],it=[];class Ce{constructor(re,we){this.p=re,this.v=we,this.I=[],this.P=[],this.U={[Ee[r.INCOMING]]:{},[Ee[r.OUTGOING_REPLY]]:{},[Ee[r.OUTGOING]]:{},[Ee[r.INCOMING_REPLY]]:{}}}getHook(){const re=this.I,we=this.P,$e=this.U;return(yt,Xt,dn)=>{var Zt,qt;const on={ts:Date.now(),op:yt,message:Xt,type:dn},wn=je(dn,yt);if((Zt=(qt=$e[Ee[dn]])[wn])!==null&&Zt!==void 0||(qt[wn]=0),$e[Ee[dn]][wn]+=1,re.length>=30)for(we.push(on);we.length>20;)we.shift();else re.push(on)}}getReport(re=!0){var we;return{collabInstanceId:this.p,collabInstanceTeamId:(we=this.v)!==null&&we!==void 0?we:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:Me(this.I,re),recentLog:Me(this.P,re)}}}s(Ce,"B");function Me(L,re=!0){return L.map(we=>{const $e={op:je(we.type,we.op),type:Ee[we.type]};var yt,Xt;return re&&(yt=we.type,Xt=we.op,!([r.INCOMING,r.OUTGOING_REPLY].includes(yt)?Be.includes(Xt):it.includes(Xt)))||($e.message=we.message),re||($e.ts=we.ts),$e})}s(Me,"F");function je(L,re){return[r.INCOMING,r.OUTGOING_REPLY].includes(L)?pe(h.Op,re):pe(m.Op,re)}s(je,"H");class We{constructor(re){this.D=re.bridgeInit,this.G=function(we){return new ie(we).embeddedSide}(re),this.B=new Ce(re.id,re.config.teamId),this.D.fireEvent(e.BRIDGE_TRANSPORT_SET),this.G.setTransportHook(this.B.getHook())}init(re){this.D.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(m.Op.INIT,re),this.D.fireEvent(e.INIT_SENT)})}tearDown(){this.G.tearDown()}invoke(re,we){const $e=re==m.Op.INIT,yt=s(()=>{this.G.invoke(re,we),$e||this.D.fireEvent(e.MESSAGE_SENT,`Op ${re}`)},"n");$e?yt():this.D.after([e.BRIDGE_OPEN],yt,`Send op ${re}`)}addHandler(re,we){this.G.addHandler(re,re===h.Op.DID_INITIALIZE?we:$e=>{this.D.after([e.BRIDGE_OPEN],()=>{we($e),this.D.fireEvent(e.MESSAGE_HANDLED,`Op ${re}`)},`Handle op ${re}`)})}getDebugReport(re=!0){return this.B.getReport(re)}}s(We,"V");class Ze{constructor(re,we){this.F=new WeakMap,this.H=re,this.V=we}get(){const re=this.H.get();return this.K(re)}getAsync(){return this.H.getAsync().then(re=>this.K(re))}listen(re){let we=this.F.get(re);we||(we=s(($e,yt)=>{re(this.K($e),this.V(yt))},"e"),this.F.set(re,we)),this.H.listen(we)}once(re){let we=this.F.get(re);we||(we=s(($e,yt)=>{re(this.K($e),this.V(yt))},"e"),this.F.set(re,we)),this.H.once(we)}unlisten(re){const we=this.F.get(re);we&&this.H.unlisten(we)}K(re){if(re!==void 0)return this.V(re)}}s(Ze,"y");class ft{constructor(re,we){this.H=re,this.$=we}get(){return this.H.get()}getAsync(){const re=this.H.getAsync();return new Promise((we,$e)=>{re.then(yt=>{yt?we(yt):this.H.once((Xt,dn)=>{we(dn??this.$)})}).catch($e)})}listen(re){this.H.listen(re)}unlisten(re){this.H.unlisten(re)}once(re){this.H.once(re)}}s(ft,"K");var vt;(function(L){L[L.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",L[L.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",L[L.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",L[L.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",L[L.SECTION_SNIPPET=4]="SECTION_SNIPPET",L[L.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",L[L.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",L[L.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",L[L.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",L[L.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",L[L.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",L[L.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",L[L.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",L[L.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",L[L.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",L[L.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",L[L.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE",L[L.PLACEHOLDERS_INFO=18]="PLACEHOLDERS_INFO"})(vt||(vt={}));const De=new WeakMap;class Pe{constructor(re={}){this.Y=new Set,this.W=re}add(re,we){if(!this.Y.has(re)&&(this.Y.add(re),we&&De.set(re,we),this.Y.size===1)){const{didStartHavingListeners:$e}=this.W;$e&&$e()}}addOneShot(re,we){const $e=s((...yt)=>{this.remove($e),re.apply(window,yt)},"i");this.add($e,we)}remove(re){if(this.Y.delete(re)&&this.Y.size===0){const{didStopHavingListeners:we}=this.W;we&&we()}}removeAll(){this.Y.forEach(re=>this.remove(re))}empty(){return this.Y.size===0}notify(...re){if(this.Y.size===0)return;const{notifyDecorator:we,catchError:$e}=this.W;let yt;we&&(yt=we());const Xt=Array.from(this.Y);for(let dn=0;dn<Xt.length;dn++)if($e)try{Xt[dn].apply(window,re)}catch(Zt){$e(Zt)}else Xt[dn].apply(window,re);yt&&yt.clear()}debugGetDescriptions(){return Array.from(this.Y,(re,we)=>De.get(re)||`<anonymous-${we}>`)}}s(Pe,"Y");class Ke{constructor(re,we,$e,yt=!1){this.X=re,this.J=we,this.Z=$e,this.q=yt;const Xt=s((dn,Zt)=>{this.Y.notify(dn,Zt)},"n");this.Y=new Pe({didStartHavingListeners:()=>this.Z.addListener(re,we,Xt),didStopHavingListeners:()=>{this.Z.removeListener(re,we,Xt),this.q||this.Z.cleanupStorage(re,we)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(re){this.Y.add(re)}unlisten(re){this.Y.remove(re)}unlistenAll(){this.Y.removeAll()}once(re){this.Y.addOneShot(re)}}s(Ke,"j");class Ye{constructor(re){this.Y=new Pe,this.tt=re}set(re){const we=this.tt;this.tt=re,this.Y.notify(we,re)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(re){this.Y.add(re)}unlisten(re){this.Y.remove(re)}once(re){this.Y.addOneShot(re)}}s(Ye,"W");class xe{constructor(re){this.et=new Map,this.R=re}didCreateDoc(re,we){const $e=this.et.get(re);$e?(this.et.set(we,$e),$e.idInternal.set(we)):console.warn(`Could not find doc mapped to ID ${re}`)}didDeleteDoc(re){const we=this.et.get(re);we==null||we.deletedInternal.set(!0)}didTryToLoadWithTempId(re){const we=this.et.get(re);we==null||we.didTryToLoadWithTempIdInternal.set(!0)}create(re={}){const{title:we,cannedDoc:$e,context:yt,usesOnlyInlineTextComments:Xt,content:dn}=re;return this.controllerAccess.docs.createDoc(we,$e,yt,Xt,dn).then(Zt=>this.get(Zt))}get(re){let we=this.et.get(re);return we||(we=new Ct(re,this.R),this.et.set(re,we)),we}get controllerAccess(){return this.R.controllerAccess}setEditsDisabled(re,we){for(const $e of Lt.values())$e.doc().id.get()===re&&$e.docEditor.setEditsDisabled(we);this.controllerAccess.docs.reloadThread(re)}getBlockKitThumbnail(re,we=!0,$e){const yt=$t(this.R),Xt=$e?`${re}/${$e}`:re;return new ft(new Ke(vt.DOC_BLOCK_KIT_THUMBNAIL,Xt,yt,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(dn=>(we&&dn.blocks.length>0&&dn.blocks.shift(),dn))}getCannedDocName(re){const we=$t(this.R);return new ft(new Ke(vt.CANNED_DOC_NAME,re,we,!0),"").getAsync().then($e=>$e.length===0?null:$e)}getSectionSnippet(re){const we=$t(this.R);return new ft(new Ke(vt.SECTION_SNIPPET,re,we,!0),"").getAsync()}setDebugOption(re,we){this.controllerAccess.docs.setDebugOption(re,we)}findSlackObject(re,we,$e){return this.controllerAccess.docs.findSlackObject(re,we,$e)}insertSlackObject(re,we,$e,yt,Xt){return this.controllerAccess.docs.insertSlackObject(re,we,$e,yt,Xt)}editLink(re,we,$e){this.controllerAccess.docs.editLink(re,we,$e)}loadData(re,we){return this.controllerAccess.docs.loadData([re],we)}it(){return Mt(this.R)}}s(xe,"X");class Ct{constructor(re,we){this.st=null,this.id=this.idInternal=new Ye(re),this.R=we;const $e=$t(this.R);this.title=new Ke(vt.DOC_DISPLAY_TITLE,re,$e),this.lastUpdated=new Ze(new Ke(vt.DOC_UPDATED_USEC,re,$e,!0),yt=>new Date(yt/1e3)),this.lastUpdatedUsec=new Ke(vt.DOC_UPDATED_USEC,re,$e,!0),this.lastUpdatedSlackUserId=new Ke(vt.DOC_LAST_UPDATED_USER_ID,re,$e,!0),this.deleted=this.deletedInternal=new Ye(!1),this.isEmpty=new Ke(vt.DOC_IS_EMPTY,re,$e,!0),this.hasPerformedEditingAction=new Ye(!1),this.hasFileUnfurls=new Ke(vt.DOC_HAS_FILE_UNFURLS,re,$e,!0),this.templateControlsInfo=new Ke(vt.TEMPLATE_CONTROLS_BE,re,$e,!0),this.lastNewSectionUpdated=new Ze(new Ke(vt.DOC_NEW_SECTION_USEC,re,$e,!0),yt=>new Date(yt/1e3)),this.hasHeaderImage=new Ke(vt.DOC_HAS_HEADER_IMAGE,re,$e,!0),this.didTryToLoadWithTempIdInternal=new Ye(!1),this.placeholdersInfo=new Ke(vt.PLACEHOLDERS_INFO,re,$e,!0)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const re=$t(this.R);this.st=new Ze(new Ke(vt.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),re,!0),JSON.parse)}return this.st}embed(re,we={mode:"editor"}){let $e=At.get(re);return $e||($e=new Jt(this,re,we,this.R),At.set(re,$e),$e.mount()),$e.doc()!==this&&console.error("There was a different document embedded in the container",re),$e}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}s(Ct,"J");const At=new WeakMap,Lt=new Map,Ft={mode:"editor"};class Jt{constructor(re,we,$e,yt){this.rendered=new Ye(!1),this.incrementalRendered=new Ye(!1),this.failedToLoad=new Ye(!1),this.loadInfo=new Ye(void 0),this.editingActionPerformed=new Ye(!1),this.loadError=new Ye(void 0),this.editorContainer=new Ye(void 0),this.nt=!1,this.ot=!1,this.rt=[],this.Et=re,this._t=we,this.W=Object.assign(Object.assign({},Ft),$e),this.R=yt,this.lt=`${ln}-${this.R.id}-${$n++}`,this.ct=function(){const Xt=document.createElement("div");return Xt.classList.add("collab-root"),Xt}(),this.at(vt.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.at(vt.DOC_EMBED_SCROLL_POSITION),this.focusState=this.at(vt.DOC_EMBED_FOCUS_STATE),this.selectionState=this.at(vt.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.at(vt.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.at(vt.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.ht(vt.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.at(vt.DOC_HAS_HEADER_IMAGE),this.placeholdersInfo=this.at(vt.PLACEHOLDERS_INFO),this.title=this.Et.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this.lt)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.R.controllerAccess}at(re){const we=$t(this.R),$e=new Ke(re,this.lt,we,!1);return this.rt.push($e),$e}ht(re,we){return new ft(this.at(re),we)}onEditorLoadError(re){console.info("[QUIP] Editor load error",re),this.failedToLoad.set(!0),this.loadError.set(re),this.Tt()}didLoadModel(re){this.loadInfo.set(re)}didRender(re){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(re)}didFinishIncrementalRender(){this.incrementalRendered.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this.Et}docId(){return this.Et.id.get()}containerElement(){return this._t}frameName(){return this.lt}mount(){if(Lt.set(this.lt,this),!this.ot){const re=this.ct;re.style.visibility="hidden",this._t.appendChild(re);let we=re.ownerDocument.defaultView;we||(console.warn(`Mounting ${this.lt} into element with no window`),we=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(re)}),re.style.visibility="visible",this.ot&&this.ut(),this.ot=!0}this.nt&&this.ut()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this.lt}. Frame loaded ${this.nt}`),this.nt&&(this.Tt(),this.rendered.set(!1),this.incrementalRendered.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.ot&&(At.delete(this._t),this.ct.remove(),this.ot=!1),this.rt.forEach(re=>re.unlistenAll()),Lt.delete(this.lt)}catch(re){console.warn("[Quip] Error thrown in unmount",re)}}it(){return Mt(this.R)}ut(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this.Et.id.get(),this.W)})}Tt(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(re){this.commentsUiProvider=re,re==null||re.setDelegate(this.docEditor)}setAutocompleteUiProvider(re){this.autocompleteUiProvider=re,re==null||re.setDelegate(this.docEditor)}setPermalinkUiProvider(re){this.permalinkUiProvider=re}setEmbeddedUiProvider(re){this.embeddedUiProvider=re}setErrorUiProvider(re){this.errorUiProvider=re}setEditorUiConnector(re){this.editorUiConnector=re,re==null||re.setDelegate(this.docEditor)}}s(Jt,"Q");class It{constructor(re){this.At=re}getFrameByName(re){return this.At.get(re)}withFrame(re,we){const $e=this.getFrameByName(re);$e||console.warn(`Could not find a frame with name ${re}.`),we($e)}}s(It,"z");const ln=`collab-doc-${(1e3*Math.random()).toString(36)}`;let $n=0;class yn{constructor(){this.St=[],this.Ot=!1}get docs(){return this.Nt}get settings(){return this.It}get providers(){return this.Lt}run(re){this.Ot?re():this.St.push(re)}setObjects({docs:re,settings:we,providers:$e}){this.Ot=!0,this.Nt=re,this.It=we,this.Lt=$e;for(const yt of this.St)yt();this.St=[]}}s(yn,"it");let zt=0;class Yt{constructor(re){this.id=zt++,this.o=!1,this.Ct=!1,this.config=re,this.platformDelegate=re.delegate,this.bridgeInit=Yt.Rt(`embedded ${this.id}`);const we=new We(this);Vt.set(this,we),this.controllerAccess=new yn,this.docs=new xe(this),this.failedToInitialize=new Ye(!1),this.initializationError=new Ye(void 0),this.Dt()}Dt(){if(this.o)return void this.bridgeInit.fireEvent(e.ERROR,"Collab instance initialized more than once");const{appearance:re,language:we,delegate:$e,commentsDataProvider:yt,bookmarksDataProvider:Xt,fileDataProvider:dn,slackListDataProvider:Zt,slackObjectProvider:qt,features:on,documentEventProvider:wn,underlineAllLinks:Zn,enableAnimations:Jn,displayEmojiAsPlainText:Ei,spellcheckEnabled:$i,embeddedConfigProvider:Qi,embeddedUiProvider:Sr,topLevelTeamId:On,anchorLinkProvider:Ri,slackObjectUIProvider:ci,slackTextyHtmlConversionProvider:ki,useSmartQuotesAndDashes:rn,atomStorageProvider:cr}=this.config,Sn=this.it();Sn.init({features:on,delegate:$e,anchorLinkProvider:Ri,bookmarksDataProvider:Xt,commentsDataProvider:yt,documentEventProvider:wn,fileDataProvider:dn,slackListDataProvider:Zt,slackObjectProvider:qt,slackObjectUIProvider:ci,slackTextyHtmlConversionProvider:ki,mountedFrameProvider:new It(Lt),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(cr)});const Zi=new c;var vr,Rr;Zi.add(()=>{re&&this.Mt(re),we&&this.ft(we),Zn!==void 0&&this.setUnderlineAllLinks(Zn),Jn!==void 0&&this.setEnableAnimations(Jn),Ei!==void 0&&this.setDisplayEmojiAsPlainText(Ei),$i!==void 0&&this.setSpellcheckEnabled($i),On&&this.vt(On),rn!==void 0&&this.setUseSmartQuotesAndDashes(rn)}),function(le,ve,Oe){if(!Oe)return;const qe=Oe.supportedAutocompleteTypes;qe&&ve.add(()=>{le.providers.registerAutocompleteTypes(qe)}),le.run(()=>Oe.setDelegate(le.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,Zi,qt),function(le,ve={},Oe,qe,dt=ct=>{}){le.addHandler(h.Op.DID_INITIALIZE,()=>{var ct;(ct=ve.didInitialize)===null||ct===void 0||ct.call(ve),Oe.run(),qe.fireEvent(e.DID_INIT_RECEIVED)}),le.addHandler(h.Op.DID_FAIL_TO_INITIALIZE,({initError:ct})=>{var Bt;dt(ct),(Bt=ve.didFailToInitialize)===null||Bt===void 0||Bt.call(ve,ct)})}(Sn,$e,Zi,this.bridgeInit,le=>{this.Pt(!0,le)}),vr=this.controllerAccess,Rr=yt,vr.run(()=>{Rr==null||Rr.setDelegate(vr.providers.getCommentsDataProviderDelegate())}),function(le,ve){le.run(()=>{ve==null||ve.setDelegate(le.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,Xt),function(le,ve){le.run(()=>ve==null?void 0:ve.setDelegate(le.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,wn),function(le,ve,Oe){Oe&&ve.add(()=>{le.providers.registerEmbeddedUiProvider(Oe.config())})}(this.controllerAccess,Zi,Qi||Sr),this.o=!0,this.bridgeInit.fireEvent(e.HANDLER_REGISTRATION_FINISHED)}Pt(re,we){const $e=this.failedToInitialize,yt=this.initializationError;$e.set(re),yt.set(we)}static Rt(re){const we=new o(re);return we.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.INIT_SENT,e.DID_INIT_RECEIVED,e.HANDLER_REGISTRATION_FINISHED],()=>{we.fireEvent(e.BRIDGE_OPEN)}),we}controllerModuleUrls(){return M()}preload(){return!this.Ct&&(M().forEach(re=>{if(!R[re]){const we=document.createElement("link");we.rel="preload",we.as="script",we.href=re,we.crossOrigin="anonymous",R[re]=we,document.head.appendChild(we)}}),this.Ct=!0,!0)}tearDown(){this.it().tearDown(),Vt.delete(this),this.Pt(!1),this.o=!1}createBasicTraceSpan(re,we,$e){var yt,Xt,dn;const Zt=(dn=(Xt=(yt=this.platformDelegate)===null||yt===void 0?void 0:yt.startSpan)===null||Xt===void 0?void 0:Xt.call(yt,re,we,$e))!==null&&dn!==void 0?dn:null;return Zt?{span:Zt,closeSpanFn:qt=>{var on,wn;(wn=(on=this.platformDelegate)===null||on===void 0?void 0:on.endTraceOrSpan)===null||wn===void 0||wn.call(on,Zt,qt?{[Ge.ERROR]:`${qt}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var re;return(re=this.config.attemptNumber)!==null&&re!==void 0?re:0}preloadThreads(re,we){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(re,we))}setAppearance(re){this.config.appearance=re,this.Mt(re)}setLanguage(re){this.config.language=re}setAppKeyboardFocusModeEnabled(re,we){this.Ut(re,we)}Mt(re){this.controllerAccess.settings.setAppearance(re)}ft(re){this.controllerAccess.settings.setLanguage(re)}Ut(re,we){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(re,we)}vt(re){this.controllerAccess.settings.setDefaultTeamId(re)}setUnderlineAllLinks(re){this.controllerAccess.settings.setUnderlineLinks(re)}setEnableAnimations(re){this.controllerAccess.settings.setEnableAnimations(re)}setDisplayEmojiAsPlainText(re){this.controllerAccess.settings.setDisplayEmojiAsPlainText(re)}setSpellcheckEnabled(re){this.controllerAccess.settings.setSpellcheckEnabled(re)}setUseSmartQuotesAndDashes(re){this.controllerAccess.settings.setUseSmartQuotesAndDashes(re)}async getInitLog(re){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(re)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(re){for(let we=o.MAX_INIT_LOG;we>=0;we--){const $e=JSON.stringify(await this.getInitLog(we));if($e.length<=re)return $e}return"Failed to generate"}getDebugReport(re){return this.getBridgeDebugReport(re)}getBridgeDebugReport(re=!0){return this.it().getDebugReport(re)}it(){return Vt.get(this)}}s(Yt,"nt");function Mt(L){return Vt.get(L)}s(Mt,"ot");const Vt=new Map;function $t(L){return L.atomClient}s($t,"Et");const xt=document.querySelector("script[src*='/collab/embedded.js']"),jt=xt==null?void 0:xt.src,J=jt?new URL(jt).origin:"https://prod.slack.quip.systems";function Fe(L){return L.config.origin||J}s(Fe,"at");var ke,Ge;(function(L){L.COLLAB_INIT="collab-init",L.CONTROLLER_INIT="controller-init",L.CONTROLLER_RESORCES="controller-resources",L.HTTP_FETCH_HEADER="http-fetch-header",L.HTTP_FETCH_CONTENT="http-fetch-content",L.JSON_PARSE="json-parse",L.LOAD_CONTROLLER="load-controller",L.AWAIT_CALLBACK="await-callback",L.LOAD_SYSTEMJS="load-systemjs",L.MODULE_PREFETCH="module-prefetch",L.SCRIPT_TAG="script-tag",L.LOAD_CONTROLLER_MODULE="load-controller-module",L.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(ke||(ke={})),function(L){L.CONTROLLER_ID="controller-id",L.ERROR="error",L.JS_PREFETCH_ENABLED="js-prefetch-enabled",L.URL="url"}(Ge||(Ge={}));const gt=(()=>{if(typeof d.g=="object")return d.g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function at(L,re,we){const $e=L.split(".");let yt=we||gt;for(let Xt=0;Xt<$e.length;Xt++){const dn=$e[Xt];Xt===$e.length-1?yt[dn]=re:(dn in yt||(yt[dn]={}),yt=yt[dn])}}s(at,"ut");var ae,Le,G,Z,me,ge,rt,Ue,Xe,fe,Te,k,he,Se,be,te,Nt,nt,mt,pn,Pt,Mi,ai,un,Hn,mn,li,Kn,lr,kt,Et,Tn,gn,In,Qn,qn,Vn,Xn,yi,Si,Fn,xi,hi,Yi;(function(L){L[L.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",L[L.PERMALINK=1]="PERMALINK",L[L.POPOUT=2]="POPOUT"})(ae||(ae={})),function(L){L.BOLD="bold",L.ITALIC="italic",L.UNDERLINE="underline",L.STRIKETHROUGH="strikethrough",L.CODE="code",L.SUBSCRIPT="subscript",L.SUPERSCRIPT="superscript",L.LINK="link"}(Le||(Le={})),function(L){L.PLAIN="plain",L.H1="h1",L.H2="h2",L.H3="h3",L.CODE="code",L.BLOCKQUOTE="blockquote",L.LIST_BULLET="list_bullet",L.LIST_NUMBERED="list_numbered",L.LIST_CHECKLIST="list_checklist"}(G||(G={})),function(L){L.CACHE="cache",L.MEMORY="memory",L.NETWORK="network"}(Z||(Z={})),function(L){L.LINK="link",L.COMMENT="comment",L.REACTION="reaction"}(me||(me={})),function(L){L.NONE="none",L.SCROLL_TO_SECTION="scroll_to_section",L.FOCUS_SECTION="focus_section"}(ge||(ge={})),function(L){L[L.LINK_COPIED=0]="LINK_COPIED",L[L.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",L[L.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(rt||(rt={})),function(L){L[L.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(Ue||(Ue={})),function(L){L[L.ANY=1]="ANY",L[L.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(Xe||(Xe={})),function(L){L[L.COMMENTS=0]="COMMENTS",L[L.FILE_UPLOADS=1]="FILE_UPLOADS",L[L.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",L[L.SPREADSHEETS=3]="SPREADSHEETS",L[L.HOVERCARDS=4]="HOVERCARDS",L[L.LINK_UNFURL=5]="LINK_UNFURL",L[L.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",L[L.REMINDERS=7]="REMINDERS",L[L.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",L[L.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",L[L.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",L[L.DOPE_TABLE=11]="DOPE_TABLE",L[L.UI_PARITY=12]="UI_PARITY",L[L.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",L[L.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",L[L.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",L[L.ANCHOR_LINKS=16]="ANCHOR_LINKS",L[L.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",L[L.IMAGE_CAPTION=18]="IMAGE_CAPTION",L[L.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",L[L.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",L[L.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",L[L.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",L[L.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",L[L.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",L[L.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",L[L.MENTIONS_SHARE=30]="MENTIONS_SHARE",L[L.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",L[L.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",L[L.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",L[L.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",L[L.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",L[L.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",L[L.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",L[L.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",L[L.INLINE_COMMENTS=40]="INLINE_COMMENTS",L[L.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",L[L.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",L[L.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",L[L.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",L[L.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",L[L.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",L[L.A11Y_CARET=47]="A11Y_CARET",L[L.BOOKMARKS=48]="BOOKMARKS",L[L.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",L[L.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",L[L.LENIENT_STARTUP=52]="LENIENT_STARTUP",L[L.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",L[L.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",L[L.STATIC_TITLES=55]="STATIC_TITLES",L[L.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",L[L.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",L[L.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",L[L.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",L[L.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",L[L.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",L[L.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",L[L.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",L[L.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",L[L.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",L[L.PADDING_RESIZING=66]="PADDING_RESIZING",L[L.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",L[L.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",L[L.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",L[L.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",L[L.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",L[L.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",L[L.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",L[L.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",L[L.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",L[L.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",L[L.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",L[L.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",L[L.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",L[L.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",L[L.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",L[L.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",L[L.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",L[L.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",L[L.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",L[L.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",L[L.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",L[L.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",L[L.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",L[L.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",L[L.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",L[L.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",L[L.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",L[L.SIMPLE_TABLES=97]="SIMPLE_TABLES",L[L.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",L[L.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",L[L.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",L[L.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",L[L.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",L[L.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",L[L.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",L[L.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",L[L.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",L[L.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",L[L.IMAGE_RESIZING=108]="IMAGE_RESIZING",L[L.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",L[L.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",L[L.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",L[L.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",L[L.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",L[L.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",L[L.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",L[L.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",L[L.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",L[L.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",L[L.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",L[L.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",L[L.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",L[L.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",L[L.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",L[L.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",L[L.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",L[L.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",L[L.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",L[L.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",L[L.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",L[L.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",L[L.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",L[L.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",L[L.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",L[L.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",L[L.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",L[L.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",L[L.UNFURL_EMBED=138]="UNFURL_EMBED",L[L.SLACK_REACT_17=139]="SLACK_REACT_17",L[L.ENABLE_REACT_18=140]="ENABLE_REACT_18",L[L.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",L[L.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",L[L.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS",L[L.CANVAS_LISTS_GA=144]="CANVAS_LISTS_GA",L[L.DOCUMENT_AUTOCOMPLETE=145]="DOCUMENT_AUTOCOMPLETE",L[L.CANVAS_DYNAMIC_LISTS=146]="CANVAS_DYNAMIC_LISTS",L[L.CANVAS_LISTS_CARDS=147]="CANVAS_LISTS_CARDS",L[L.MULTI_SECTION_DRAG=148]="MULTI_SECTION_DRAG",L[L.SMOOTHER_MARGIN_SELECTION=149]="SMOOTHER_MARGIN_SELECTION",L[L.WFB_BACK_TO_BASIC_APRIL_RELEASE=150]="WFB_BACK_TO_BASIC_APRIL_RELEASE",L[L.CANVAS_HEADER_IMAGE=151]="CANVAS_HEADER_IMAGE",L[L.AUTOSLUG_SLACK_CHANNELS=152]="AUTOSLUG_SLACK_CHANNELS",L[L.CANVAS_TITLE_UNFURL_DEFAULT=153]="CANVAS_TITLE_UNFURL_DEFAULT",L[L.CURSOR_AWARENESS=154]="CURSOR_AWARENESS",L[L.CANVAS_LISTS_EMBEDS=155]="CANVAS_LISTS_EMBEDS",L[L.CANVAS_DATE_MENTIONS=156]="CANVAS_DATE_MENTIONS",L[L.CANVAS_MOBILE_GENERIC_PLACEHOLDERS=157]="CANVAS_MOBILE_GENERIC_PLACEHOLDERS",L[L.SELECTION_AWARENESS=158]="SELECTION_AWARENESS",L[L.CANVAS_GROUP_MENTIONS=159]="CANVAS_GROUP_MENTIONS",L[L.CANVAS_SALES_TEMPLATES=160]="CANVAS_SALES_TEMPLATES",L[L.CALLOUTS=161]="CALLOUTS",L[L.CANVAS_LINK_HOVERCARD=162]="CANVAS_LINK_HOVERCARD",L[L.CANVAS_NATIVE_LIST_EMBED=163]="CANVAS_NATIVE_LIST_EMBED",L[L.MESSAGE_TO_CANVAS_BUTTON=165]="MESSAGE_TO_CANVAS_BUTTON",L[L.CANVAS_DYNAMIC_GUTTER=166]="CANVAS_DYNAMIC_GUTTER",L[L.TRANSIENT_SECTION_ENHANCEMENTS=167]="TRANSIENT_SECTION_ENHANCEMENTS",L[L.CANVAS_DATE_HOVERCARD=168]="CANVAS_DATE_HOVERCARD",L[L.MOBILE_COMMENT_ICON_UPDATE=169]="MOBILE_COMMENT_ICON_UPDATE",L[L.CRDTS_CLIENT=170]="CRDTS_CLIENT",L[L.MOBILE_CONTENT_REACTIONS=171]="MOBILE_CONTENT_REACTIONS",L[L.CANVAS_ANNOTATION_AUTO_HIGHLIGHTING=172]="CANVAS_ANNOTATION_AUTO_HIGHLIGHTING",L[L.CANVAS_REQUIRE_EXACT_MATCH_TO_OPEN_COMMENT_THREAD=173]="CANVAS_REQUIRE_EXACT_MATCH_TO_OPEN_COMMENT_THREAD",L[L.MOBILE_ADD_COMMENT_BOTTOM_SHEET=174]="MOBILE_ADD_COMMENT_BOTTOM_SHEET",L[L.CANVAS_GHOST_TEXT_ON_STYLED_SECTIONS=175]="CANVAS_GHOST_TEXT_ON_STYLED_SECTIONS",L[L.MOBILE_CONTENT_REACTIONS_AND_COMMENTS=176]="MOBILE_CONTENT_REACTIONS_AND_COMMENTS",L[L.CONTENT_REACTIONS_AND_COMMENTS=177]="CONTENT_REACTIONS_AND_COMMENTS",L[L.CANVAS_CHECKBOX_ANIMATIONS=178]="CANVAS_CHECKBOX_ANIMATIONS",L[L.MOBILE_SET_IN_CANVAS=179]="MOBILE_SET_IN_CANVAS",L[L.MOBILE_CANVAS_LEFT_PADDING=180]="MOBILE_CANVAS_LEFT_PADDING"}(fe||(fe={})),function(L){L[L.NONE=0]="NONE",L[L.SHIFT=1]="SHIFT",L[L.ALT=2]="ALT",L[L.META=4]="META",L[L.CTRL=8]="CTRL",L[L.MOD=16]="MOD"}(Te||(Te={})),function(L){L[L.CHANNEL=0]="CHANNEL",L[L.USER=1]="USER",L[L.EMOJI=2]="EMOJI",L[L.FILE=4]="FILE",L[L.UNFURL=5]="UNFURL",L[L.DOCUMENT=6]="DOCUMENT",L[L.LINK=7]="LINK",L[L.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",L[L.PENDING_URL=10]="PENDING_URL",L[L.GENERIC=11]="GENERIC",L[L.TEMPLATE=12]="TEMPLATE",L[L.BACKGROUND=13]="BACKGROUND",L[L.WIDGET=14]="WIDGET",L[L.LIST=15]="LIST",L[L.LIST_RECORD=16]="LIST_RECORD",L[L.HEADER_IMAGE=17]="HEADER_IMAGE",L[L.SALESFORCE_RECORD=18]="SALESFORCE_RECORD",L[L.GROUP_MEMBERSHIP=19]="GROUP_MEMBERSHIP"}(k||(k={})),function(L){L[L.NOT_FOUND=0]="NOT_FOUND"}(he||(he={})),function(L){L[L.CLOSE=0]="CLOSE",L[L.SELECT=1]="SELECT",L[L.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",L[L.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(Se||(Se={})),function(L){L.CANVAS="insert-canvas",L.AUDIO="insert-audio",L.VIDEO="insert-video",L.FILE="insert-file",L.WORKFLOW="insert-workflow",L.PROFILE="insert-profile",L.LIST="insert-list",L.CALLOUT="insert-callout",L.CODE="inline-code",L.CHANNEL="ac-trigger-channel",L.CODEBLOCK="insert-codeblock",L.BLOCKQUOTE="insert-blockquote",L.PLAIN="insert-plain",L.H1="insert-h1",L.H2="insert-h2",L.H3="insert-h3",L.IMAGE="insert-image",L.TABLE="insert-table",L.CHECKLIST="insert-checklist",L.BULLET_LIST="insert-bullet-list",L.ORDERED_LIST="insert-ordered-list",L.DIVIDER="insert-divider",L.TWO_COLUMNS="layout-two-columns",L.THREE_COLUMNS="layout-three-columns",L.DATE_GENERIC="date-generic",L.DATE_TODAY="date-today",L.DATE_TOMORROW="date-tomorrow",L.DATE_YESTERDAY="date-yesterday",L.AI_ASSISTANT="ai-assistant"}(be||(be={})),function(L){L.DEFAULT_SOURCE="canvas-shortcut-command"}(te||(te={})),function(L){L[L.SLACK_OBJECT=0]="SLACK_OBJECT",L[L.LINK=1]="LINK",L[L.HEADER=2]="HEADER",L[L.TEXT=3]="TEXT",L[L.DIVIDER=4]="DIVIDER",L[L.HYPERLINK=5]="HYPERLINK",L[L.TITLE=6]="TITLE",L[L.TABLE=7]="TABLE",L[L.DRAG_OVERLAY=8]="DRAG_OVERLAY",L[L.COMMENT_METADATA=9]="COMMENT_METADATA",L[L.INVITED_USER=10]="INVITED_USER",L[L.DATE=11]="DATE",L[L.BACKDROP=12]="BACKDROP",L[L.CALLOUT=13]="CALLOUT",L[L.AI_ASSISTANT=14]="AI_ASSISTANT"}(Nt||(Nt={})),function(L){L.STATIC="list-static",L.EMBED="list-embed"}(nt||(nt={})),function(L){L.STATIC="unfurl-static",L.EMBED="unfurl-embed",L.BUTTON="unfurl-button"}(mt||(mt={})),function(L){L[L.PREVIOUS=0]="PREVIOUS",L[L.NEXT=1]="NEXT"}(pn||(pn={})),function(L){L.ROW="row",L.COLUMN="column"}(Pt||(Pt={})),function(L){L.INSERT_BEFORE="insert_before",L.INSERT_AFTER="insert_after",L.DELETE="delete"}(Mi||(Mi={})),function(L){L.CLEAR_CONTENTS="clear_contents",L.MERGE_CELLS="merge_cells",L.UNMERGE_CELLS="unmerge_cells"}(ai||(ai={})),function(L){L.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",L.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",L.DISTRIBUTE_COLUMNS="distribute_columns",L.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(un||(un={})),function(L){L.BACKGROUND_COLOR="background_color"}(Hn||(Hn={})),function(L){L.INSERT_CONTENT="insert_content",L.ACCEPT_DRAFT="accept_draft",L.CANCEL_DRAFT="cancel_draft"}(mn||(mn={})),function(L){L.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",L.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",L.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",L.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(li||(li={})),function(L){L[L.DISMISS_POPOVER=0]="DISMISS_POPOVER",L[L.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",L[L.COPY_OBJECT=2]="COPY_OBJECT",L[L.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",L[L.REPLACE_FILE=4]="REPLACE_FILE",L[L.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",L[L.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",L[L.SYNC_METADATA=7]="SYNC_METADATA",L[L.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",L[L.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",L[L.ADD_COLUMN=10]="ADD_COLUMN",L[L.MOVE_LINE=11]="MOVE_LINE",L[L.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",L[L.CHECK_ALL=13]="CHECK_ALL",L[L.UNCHECK_ALL=14]="UNCHECK_ALL",L[L.REMOVE_CHECKED=15]="REMOVE_CHECKED",L[L.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",L[L.SORT_ALPHA=17]="SORT_ALPHA",L[L.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",L[L.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",L[L.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",L[L.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",L[L.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",L[L.UNFURL_URL=23]="UNFURL_URL",L[L.MODIFY_TABLE=24]="MODIFY_TABLE",L[L.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",L[L.OPEN_POPOVER=26]="OPEN_POPOVER",L[L.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",L[L.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",L[L.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",L[L.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",L[L.UNFURL_URLS=31]="UNFURL_URLS",L[L.ADD_INVITED_USER_CARDS=32]="ADD_INVITED_USER_CARDS",L[L.SYNC_CONTENT_WIDTH=33]="SYNC_CONTENT_WIDTH",L[L.SET_DATE_MS=34]="SET_DATE_MS",L[L.SWITCH_LIST_VIEW=35]="SWITCH_LIST_VIEW",L[L.CONVERT_TABLE_TO_LIST=36]="CONVERT_TABLE_TO_LIST",L[L.HANDLE_MODAL_STATE_CHANGE=37]="HANDLE_MODAL_STATE_CHANGE",L[L.MODIFY_CALLOUT=38]="MODIFY_CALLOUT",L[L.AI_INSERTION_ACTION=40]="AI_INSERTION_ACTION",L[L.CREATE_OR_VIEW_REACTION=41]="CREATE_OR_VIEW_REACTION"}(Kn||(Kn={})),function(L){L.MERGE="merge",L.UNMERGE="unmerge",L.CLEAR_CONTENTS="clear_contents"}(lr||(lr={})),function(L){L[L.SLACK_MESSAGE=0]="SLACK_MESSAGE",L[L.SLACK_FILE=1]="SLACK_FILE",L[L.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",L[L.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",L[L.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",L[L.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",L[L.SLACK_USER=5]="SLACK_USER",L[L.SLACK_CHANNEL=6]="SLACK_CHANNEL",L[L.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",L[L.SLACK_WIDGET=9]="SLACK_WIDGET",L[L.SLACK_EMBED=10]="SLACK_EMBED",L[L.SLACK_LIST=11]="SLACK_LIST",L[L.SLACK_LIST_RECORD=12]="SLACK_LIST_RECORD",L[L.SLACK_SALESFORCE_RECORD=13]="SLACK_SALESFORCE_RECORD"}(kt||(kt={})),function(L){L[L.CARD=0]="CARD",L[L.INLINE=1]="INLINE",L[L.LINK=2]="LINK",L[L.WIDGET=3]="WIDGET"}(Et||(Et={})),function(L){L.IMAGE="image",L.HORIZONTAL_RULE="horizontal-rule",L.CHECKLIST="checklist",L.NUMBERED_LIST="numbered-list",L.BULLETED_LIST="bullet-list",L.TABLE="table",L.CODE="code",L.TEXT_H1_STYLE="large-heading",L.TEXT_H2_STYLE="medium-heading",L.TEXT_H3_STYLE="small-heading",L.TEXT_PLAIN_STYLE="plain",L.BLOCKQUOTE="blockquote",L.LAYOUT="layout",L.EMOJI="emoji",L.DATE_MENTION="date-mention",L.CALLOUT="callout"}(Tn||(Tn={})),function(L){L.PROFILE="profile",L.WORKFLOW="workflow",L.LINK="link",L.IMAGE="image",L.CANVAS="canvas",L.VIDEO="video",L.AUDIO="audio",L.FILE="file",L.LIST="list",L.SALESFORCE_RECORD="sfrecord"}(gn||(gn={})),function(L){L[L.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",L[L.IO=2]="IO",L[L.LISTENER=3]="LISTENER",L[L.ELEMENT=4]="ELEMENT"}(In||(In={})),function(L){L[L.NONE=0]="NONE",L[L.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",L[L.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",L[L.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",L[L.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",L[L.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",L[L.SESSION_EXPIRED=6]="SESSION_EXPIRED",L[L.THREAD_CLOSED=7]="THREAD_CLOSED",L[L.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",L[L.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES",L[L.DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY=10]="DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY"}(Qn||(Qn={})),function(L){L[L.WRITE=0]="WRITE",L[L.READ=1]="READ",L[L.NONE=2]="NONE"}(qn||(qn={})),function(L){L.DOWNLOAD="download",L.EDIT_FILE="edit-file",L.OPEN_IN_NEW_WINDOW="open-in-new-window",L.PREVIEW_FILE="preview-file",L.VIEW_FULL_SCREEN="view-full-screen",L.SHARE="share"}(Vn||(Vn={})),function(L){L[L.HOVERCARD=0]="HOVERCARD",L[L.CARD=1]="CARD",L[L.HEADER=2]="HEADER",L[L.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",L[L.SECTION_MENU=4]="SECTION_MENU",L[L.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",L[L.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",L[L.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",L[L.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",L[L.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",L[L.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",L[L.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",L[L.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",L[L.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",L[L.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER",L[L.DATE_PICKER=15]="DATE_PICKER",L[L.MODAL_STATE_OBSERVER=16]="MODAL_STATE_OBSERVER",L[L.AI_ASSISTANT_OVERLAY=17]="AI_ASSISTANT_OVERLAY",L[L.EMOJI_PICKER=18]="EMOJI_PICKER"}(Xn||(Xn={})),function(L){L.NONE="none",L.THREAD_ROOT="thread_root",L.THREAD_COMPOSER="thread_composer"}(yi||(yi={})),function(L){L[L.COMMENT=1]="COMMENT",L[L.REACTION=2]="REACTION"}(Si||(Si={})),function(L){L.TEXT="text",L.USER="user",L.CHANNEL="channel",L.DATE="date"}(Fn||(Fn={})),function(L){L.INSERT="insert",L.EDIT="edit",L.REMOVE="remove",L.SHOW_CREATION_POPOVER="show_creation_popover",L.HIGHLIGHT="highlight"}(xi||(xi={})),function(L){L.INSERT="insert",L.INITIATE_DRAG="initiate_drag"}(hi||(hi={})),function(L){L.GREEN="green",L.JADE="jade",L.BLUE="blue",L.INDIGO="indigo",L.PURPLE="purple",L.PINK="pink",L.ORANGE="orange",L.BROWN="brown",L.GRAY="gray"}(Yi||(Yi={})),at("Collab",Yt),at("dumpCollabDebugReport",function(){Vt.forEach((L,re)=>{re.getInitLog().then(we=>{console.log(`Collab instance ${re.id} debug report:`,re.getBridgeDebugReport(!1),we)})})}),window.JS_CLIENT_HASH="AL3VdqNkFVaDW5IdQhLzHQ",window.QUIP_VERSION_NAME="quipbuild_2024_11_22T21_35_02bdb04"},1874409785:function(x){(function(l,d){x.exports=d()})(this,function(){return function(l){var d={};function c(h){if(d[h])return d[h].exports;var m=d[h]={i:h,l:!1,exports:{}};return l[h].call(m.exports,m,m.exports,c),m.l=!0,m.exports}return s(c,"r"),c.m=l,c.c=d,c.d=function(h,m,p){c.o(h,m)||Object.defineProperty(h,m,{enumerable:!0,get:p})},c.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},c.t=function(h,m){if(1&m&&(h=c(h)),8&m||4&m&&typeof h=="object"&&h&&h.__esModule)return h;var p=Object.create(null);if(c.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:h}),2&m&&typeof h!="string")for(var a in h)c.d(p,a,function(r){return h[r]}.bind(null,a));return p},c.n=function(h){var m=h&&h.__esModule?function(){return h.default}:function(){return h};return c.d(m,"a",m),m},c.o=function(h,m){return Object.prototype.hasOwnProperty.call(h,m)},c.p="",c(c.s=90)}({17:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h=c(18),m=function(){function p(){}return s(p,"e"),p.getFirstMatch=function(a,r){var n=r.match(a);return n&&n.length>0&&n[1]||""},p.getSecondMatch=function(a,r){var n=r.match(a);return n&&n.length>1&&n[2]||""},p.matchAndReturnConst=function(a,r,n){if(a.test(r))return n},p.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},p.getMacOSVersionName=function(a){var r=a.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},p.getAndroidVersionName=function(a){var r=a.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(r.push(0),!(r[0]===1&&r[1]<5))return r[0]===1&&r[1]<6?"Cupcake":r[0]===1&&r[1]>=6?"Donut":r[0]===2&&r[1]<2?"Eclair":r[0]===2&&r[1]===2?"Froyo":r[0]===2&&r[1]>2?"Gingerbread":r[0]===3?"Honeycomb":r[0]===4&&r[1]<1?"Ice Cream Sandwich":r[0]===4&&r[1]<4?"Jelly Bean":r[0]===4&&r[1]>=4?"KitKat":r[0]===5?"Lollipop":r[0]===6?"Marshmallow":r[0]===7?"Nougat":r[0]===8?"Oreo":r[0]===9?"Pie":void 0},p.getVersionPrecision=function(a){return a.split(".").length},p.compareVersions=function(a,r,n){n===void 0&&(n=!1);var e=p.getVersionPrecision(a),t=p.getVersionPrecision(r),i=Math.max(e,t),o=0,f=p.map([a,r],function(g){var S=i-p.getVersionPrecision(g),u=g+new Array(S+1).join(".0");return p.map(u.split("."),function(v){return new Array(20-v.length).join("0")+v}).reverse()});for(n&&(o=i-Math.min(e,t)),i-=1;i>=o;){if(f[0][i]>f[1][i])return 1;if(f[0][i]===f[1][i]){if(i===o)return 0;i-=1}else if(f[0][i]<f[1][i])return-1}},p.map=function(a,r){var n,e=[];if(Array.prototype.map)return Array.prototype.map.call(a,r);for(n=0;n<a.length;n+=1)e.push(r(a[n]));return e},p.find=function(a,r){var n,e;if(Array.prototype.find)return Array.prototype.find.call(a,r);for(n=0,e=a.length;n<e;n+=1){var t=a[n];if(r(t,n))return t}},p.assign=function(a){for(var r,n,e=a,t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[a].concat(i));var f=s(function(){var g=i[r];typeof g=="object"&&g!==null&&Object.keys(g).forEach(function(S){e[S]=g[S]})},"o");for(r=0,n=i.length;r<n;r+=1)f();return a},p.getBrowserAlias=function(a){return h.BROWSER_ALIASES_MAP[a]},p.getBrowserTypeByAlias=function(a){return h.BROWSER_MAP[a]||""},p}();d.default=m,l.exports=d.default},18:function(l,d,c){"use strict";d.__esModule=!0,d.ENGINE_MAP=d.OS_MAP=d.PLATFORMS_MAP=d.BROWSER_MAP=d.BROWSER_ALIASES_MAP=void 0,d.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},d.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},d.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},d.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},d.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h,m=(h=c(91))&&h.__esModule?h:{default:h},p=c(18);function a(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}s(a,"a");var r=function(){function n(){}s(n,"e");var e,t,i;return n.getParser=function(o,f){if(f===void 0&&(f=!1),typeof o!="string")throw new Error("UserAgent should be a string");return new m.default(o,f)},n.parse=function(o){return new m.default(o).getResult()},e=n,i=[{key:"BROWSER_MAP",get:function(){return p.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return p.ENGINE_MAP}},{key:"OS_MAP",get:function(){return p.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return p.PLATFORMS_MAP}}],(t=null)&&a(e.prototype,t),i&&a(e,i),n}();d.default=r,l.exports=d.default},91:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h=n(c(92)),m=n(c(93)),p=n(c(94)),a=n(c(95)),r=n(c(17));function n(t){return t&&t.__esModule?t:{default:t}}s(n,"u");var e=function(){function t(o,f){if(f===void 0&&(f=!1),o==null||o==="")throw new Error("UserAgent parameter can't be empty");this._ua=o,this.parsedResult={},f!==!0&&this.parse()}s(t,"e");var i=t.prototype;return i.getUA=function(){return this._ua},i.test=function(o){return o.test(this._ua)},i.parseBrowser=function(){var o=this;this.parsedResult.browser={};var f=r.default.find(h.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},i.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},i.getBrowserName=function(o){return o?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},i.getBrowserVersion=function(){return this.getBrowser().version},i.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},i.parseOS=function(){var o=this;this.parsedResult.os={};var f=r.default.find(m.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},i.getOSName=function(o){var f=this.getOS().name;return o?String(f).toLowerCase()||"":f||""},i.getOSVersion=function(){return this.getOS().version},i.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},i.getPlatformType=function(o){o===void 0&&(o=!1);var f=this.getPlatform().type;return o?String(f).toLowerCase()||"":f||""},i.parsePlatform=function(){var o=this;this.parsedResult.platform={};var f=r.default.find(p.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},i.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},i.getEngineName=function(o){return o?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},i.parseEngine=function(){var o=this;this.parsedResult.engine={};var f=r.default.find(a.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},i.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},i.getResult=function(){return r.default.assign({},this.parsedResult)},i.satisfies=function(o){var f=this,g={},S=0,u={},v=0;if(Object.keys(o).forEach(function(M){var R=o[M];typeof R=="string"?(u[M]=R,v+=1):typeof R=="object"&&(g[M]=R,S+=1)}),S>0){var y=Object.keys(g),_=r.default.find(y,function(M){return f.isOS(M)});if(_){var C=this.satisfies(g[_]);if(C!==void 0)return C}var T=r.default.find(y,function(M){return f.isPlatform(M)});if(T){var A=this.satisfies(g[T]);if(A!==void 0)return A}}if(v>0){var O=Object.keys(u),D=r.default.find(O,function(M){return f.isBrowser(M,!0)});if(D!==void 0)return this.compareVersion(u[D])}},i.isBrowser=function(o,f){f===void 0&&(f=!1);var g=this.getBrowserName().toLowerCase(),S=o.toLowerCase(),u=r.default.getBrowserTypeByAlias(S);return f&&u&&(S=u.toLowerCase()),S===g},i.compareVersion=function(o){var f=[0],g=o,S=!1,u=this.getBrowserVersion();if(typeof u=="string")return o[0]===">"||o[0]==="<"?(g=o.substr(1),o[1]==="="?(S=!0,g=o.substr(2)):f=[],o[0]===">"?f.push(1):f.push(-1)):o[0]==="="?g=o.substr(1):o[0]==="~"&&(S=!0,g=o.substr(1)),f.indexOf(r.default.compareVersions(u,g,S))>-1},i.isOS=function(o){return this.getOSName(!0)===String(o).toLowerCase()},i.isPlatform=function(o){return this.getPlatformType(!0)===String(o).toLowerCase()},i.isEngine=function(o){return this.getEngineName(!0)===String(o).toLowerCase()},i.is=function(o,f){return f===void 0&&(f=!1),this.isBrowser(o,f)||this.isOS(o)||this.isPlatform(o)},i.some=function(o){var f=this;return o===void 0&&(o=[]),o.some(function(g){return f.is(g)})},t}();d.default=e,l.exports=d.default},92:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h,m=(h=c(17))&&h.__esModule?h:{default:h},p=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(r){var n={name:"Googlebot"},e=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/opera/i],describe:function(r){var n={name:"Opera"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/opr\/|opios/i],describe:function(r){var n={name:"Opera"},e=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/SamsungBrowser/i],describe:function(r){var n={name:"Samsung Internet for Android"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/Whale/i],describe:function(r){var n={name:"NAVER Whale Browser"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/MZBrowser/i],describe:function(r){var n={name:"MZ Browser"},e=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/focus/i],describe:function(r){var n={name:"Focus"},e=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/swing/i],describe:function(r){var n={name:"Swing"},e=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/coast/i],describe:function(r){var n={name:"Opera Coast"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(r){var n={name:"Opera Touch"},e=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/yabrowser/i],describe:function(r){var n={name:"Yandex Browser"},e=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/ucbrowser/i],describe:function(r){var n={name:"UC Browser"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/Maxthon|mxios/i],describe:function(r){var n={name:"Maxthon"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/epiphany/i],describe:function(r){var n={name:"Epiphany"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/puffin/i],describe:function(r){var n={name:"Puffin"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/sleipnir/i],describe:function(r){var n={name:"Sleipnir"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/k-meleon/i],describe:function(r){var n={name:"K-Meleon"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/micromessenger/i],describe:function(r){var n={name:"WeChat"},e=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/qqbrowser/i],describe:function(r){var n={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},e=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/msie|trident/i],describe:function(r){var n={name:"Internet Explorer"},e=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/\sedg\//i],describe:function(r){var n={name:"Microsoft Edge"},e=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/edg([ea]|ios)/i],describe:function(r){var n={name:"Microsoft Edge"},e=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/vivaldi/i],describe:function(r){var n={name:"Vivaldi"},e=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/seamonkey/i],describe:function(r){var n={name:"SeaMonkey"},e=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/sailfish/i],describe:function(r){var n={name:"Sailfish"},e=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return e&&(n.version=e),n}},{test:[/silk/i],describe:function(r){var n={name:"Amazon Silk"},e=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/phantom/i],describe:function(r){var n={name:"PhantomJS"},e=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/slimerjs/i],describe:function(r){var n={name:"SlimerJS"},e=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(r){var n={name:"BlackBerry"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/(web|hpw)[o0]s/i],describe:function(r){var n={name:"WebOS Browser"},e=m.default.getFirstMatch(p,r)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/bada/i],describe:function(r){var n={name:"Bada"},e=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/tizen/i],describe:function(r){var n={name:"Tizen"},e=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/qupzilla/i],describe:function(r){var n={name:"QupZilla"},e=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/firefox|iceweasel|fxios/i],describe:function(r){var n={name:"Firefox"},e=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/electron/i],describe:function(r){var n={name:"Electron"},e=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/MiuiBrowser/i],describe:function(r){var n={name:"Miui"},e=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/chromium/i],describe:function(r){var n={name:"Chromium"},e=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/chrome|crios|crmo/i],describe:function(r){var n={name:"Chrome"},e=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/GSA/i],describe:function(r){var n={name:"Google Search"},e=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){var n=!r.test(/like android/i),e=r.test(/android/i);return n&&e},describe:function(r){var n={name:"Android Browser"},e=m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/playstation 4/i],describe:function(r){var n={name:"PlayStation 4"},e=m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/safari|applewebkit/i],describe:function(r){var n={name:"Safari"},e=m.default.getFirstMatch(p,r);return e&&(n.version=e),n}},{test:[/.*/i],describe:function(r){var n=r.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(n,r),version:m.default.getSecondMatch(n,r)}}}];d.default=a,l.exports=d.default},93:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h,m=(h=c(17))&&h.__esModule?h:{default:h},p=c(18),a=[{test:[/Roku\/DVP/],describe:function(r){var n=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:p.OS_MAP.Roku,version:n}}},{test:[/windows phone/i],describe:function(r){var n=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:p.OS_MAP.WindowsPhone,version:n}}},{test:[/windows /i],describe:function(r){var n=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),e=m.default.getWindowsVersionName(n);return{name:p.OS_MAP.Windows,version:n,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(r){var n={name:p.OS_MAP.iOS},e=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return e&&(n.version=e),n}},{test:[/macintosh/i],describe:function(r){var n=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),e=m.default.getMacOSVersionName(n),t={name:p.OS_MAP.MacOS,version:n};return e&&(t.versionName=e),t}},{test:[/(ipod|iphone|ipad)/i],describe:function(r){var n=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:p.OS_MAP.iOS,version:n}}},{test:function(r){var n=!r.test(/like android/i),e=r.test(/android/i);return n&&e},describe:function(r){var n=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),e=m.default.getAndroidVersionName(n),t={name:p.OS_MAP.Android,version:n};return e&&(t.versionName=e),t}},{test:[/(web|hpw)[o0]s/i],describe:function(r){var n=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),e={name:p.OS_MAP.WebOS};return n&&n.length&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(r){var n=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||m.default.getFirstMatch(/\bbb(\d+)/i,r);return{name:p.OS_MAP.BlackBerry,version:n}}},{test:[/bada/i],describe:function(r){var n=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:p.OS_MAP.Bada,version:n}}},{test:[/tizen/i],describe:function(r){var n=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:p.OS_MAP.Tizen,version:n}}},{test:[/linux/i],describe:function(){return{name:p.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:p.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(r){var n=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:p.OS_MAP.PlayStation4,version:n}}}];d.default=a,l.exports=d.default},94:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h,m=(h=c(17))&&h.__esModule?h:{default:h},p=c(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(r){var n=m.default.getFirstMatch(/(can-l01)/i,r)&&"Nova",e={type:p.PLATFORMS_MAP.mobile,vendor:"Huawei"};return n&&(e.model=n),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(r){var n=r.test(/ipod|iphone/i),e=r.test(/like (ipod|iphone)/i);return n&&!e},describe:function(r){var n=m.default.getFirstMatch(/(ipod|iphone)/i,r);return{type:p.PLATFORMS_MAP.mobile,vendor:"Apple",model:n}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getBrowserName(!0)==="blackberry"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(r){return r.getBrowserName(!0)==="bada"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getBrowserName()==="windows phone"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(r){var n=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&n>=3},describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(r){return r.getOSName(!0)==="android"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getOSName(!0)==="macos"},describe:function(){return{type:p.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(r){return r.getOSName(!0)==="windows"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(r){return r.getOSName(!0)==="linux"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(r){return r.getOSName(!0)==="playstation 4"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}},{test:function(r){return r.getOSName(!0)==="roku"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}}];d.default=a,l.exports=d.default},95:function(l,d,c){"use strict";d.__esModule=!0,d.default=void 0;var h,m=(h=c(17))&&h.__esModule?h:{default:h},p=c(18),a=[{test:function(r){return r.getBrowserName(!0)==="microsoft edge"},describe:function(r){if(/\sedg\//i.test(r))return{name:p.ENGINE_MAP.Blink};var n=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:p.ENGINE_MAP.EdgeHTML,version:n}}},{test:[/trident/i],describe:function(r){var n={name:p.ENGINE_MAP.Trident},e=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){return r.test(/presto/i)},describe:function(r){var n={name:p.ENGINE_MAP.Presto},e=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){var n=r.test(/gecko/i),e=r.test(/like gecko/i);return n&&!e},describe:function(r){var n={name:p.ENGINE_MAP.Gecko},e=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:p.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(r){var n={name:p.ENGINE_MAP.WebKit},e=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}}];d.default=a,l.exports=d.default}})})},585669709:(x,l,d)=>{"use strict";d.r(l),d.d(l,{BotInfo:()=>a,BrowserInfo:()=>h,NodeInfo:()=>m,ReactNativeInfo:()=>r,SearchBotDeviceInfo:()=>p,browserName:()=>S,detect:()=>f,detectOS:()=>v,getNodeVersion:()=>y,parseUserAgent:()=>u});var c=function(C,T,A){if(A||arguments.length===2)for(var O=0,D=T.length,M;O<D;O++)(M||!(O in T))&&(M||(M=Array.prototype.slice.call(T,0,O)),M[O]=T[O]);return C.concat(M||Array.prototype.slice.call(T))},h=function(){function C(T,A,O){this.name=T,this.version=A,this.os=O,this.type="browser"}return s(C,"BrowserInfo"),C}(),m=function(){function C(T){this.version=T,this.type="node",this.name="node",this.os=(void 0).platform}return s(C,"NodeInfo"),C}(),p=function(){function C(T,A,O,D){this.name=T,this.version=A,this.os=O,this.bot=D,this.type="bot-device"}return s(C,"SearchBotDeviceInfo"),C}(),a=function(){function C(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return s(C,"BotInfo"),C}(),r=function(){function C(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return s(C,"ReactNativeInfo"),C}(),n=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t=3,i=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",n]],o=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(C){return C?u(C):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new r:typeof navigator<"u"?u(navigator.userAgent):y()}s(f,"detect");function g(C){return C!==""&&i.reduce(function(T,A){var O=A[0],D=A[1];if(T)return T;var M=D.exec(C);return!!M&&[O,M]},!1)}s(g,"matchUserAgent");function S(C){var T=g(C);return T?T[0]:null}s(S,"browserName");function u(C){var T=g(C);if(!T)return null;var A=T[0],O=T[1];if(A==="searchbot")return new a;var D=O[1]&&O[1].split(".").join("_").split("_").slice(0,3);D?D.length<t&&(D=c(c([],D,!0),_(t-D.length),!0)):D=[];var M=D.join("."),R=v(C),F=e.exec(C);return F&&F[1]?new p(A,M,R,F[1]):new h(A,M,R)}s(u,"parseUserAgent");function v(C){for(var T=0,A=o.length;T<A;T++){var O=o[T],D=O[0],M=O[1],R=M.exec(C);if(R)return D}return null}s(v,"detectOS");function y(){var C=!1;return C?new m((void 0).version.slice(1)):null}s(y,"getNodeVersion");function _(C){for(var T=[],A=0;A<C;A++)T.push("0");return T}s(_,"createVersionParts")},434544446:x=>{"use strict";x.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},7763652800:(x,l,d)=>{"use strict";d.d(l,{P:()=>h});function c(p){return s(({dispatch:r,getState:n})=>e=>t=>typeof t=="function"?t(r,n,p):e(t),"middleware")}s(c,"createThunkMiddleware");var h=c(),m=null},4473827453:()=>{(function(){var x=["user-blocking","user-visible","background"];class l{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=n=>this.onMessageReceived_(n)}queueCallback(n){var e=this.nextMessageHandle_++;return this.messages_[e]=n,this.sendPort_.postMessage(e),e}cancelCallback(n){delete this.messages_[n]}onMessageReceived_(n){var e=n.data;if(e in this.messages_){var t=this.messages_[e];delete this.messages_[e],t()}}}s(l,"t");function d(){return d.instance_||(d.instance_=new l),d.instance_}s(d,"i");class c{constructor(n,e,t){t===void 0&&(t=0),this.callback_=n,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(e,t)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:d().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(n,e){if(e&&e>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},e));if(!x.includes(n))throw new TypeError("Invalid task priority : "+n);return n==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=d().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}s(c,"s");var h=0;class m{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(n){if(typeof n!="object")throw new TypeError("Task must be an Object");n.tq_sequence_=h++,this.isEmpty()?(n.tq_prev_=null,this.head_=n):(n.tq_prev_=this.tail_,this.tail_.tq_next_=n),n.tq_next_=null,this.tail_=n}takeNextTask(){if(this.isEmpty())return null;var n=this.head_;return this.remove_(n),n}merge(n,e){if(typeof e!="function")throw new TypeError("Must provide a selector function.");if(n==null)throw new Error("sourceQueue cannot be null");for(var t=this.head_,i=null,o=n.head_;o;){var f=o;if(o=o.tq_next_,e(f)){for(n.remove_(f);t&&t.tq_sequence_<f.tq_sequence_;)i=t,t=t.tq_next_;this.insert_(f,i),i=f}}}toArray(){for(var n=this.head_,e=[];n!==null;)e.push(n),n=n.tq_next_;return e}insert_(n,e){if(e!=this.tail_){var t=e?e.tq_next_:this.head_;n.tq_next_=t,t.tq_prev_=n,n.tq_prev_=e,e!=null?e.tq_next_=n:this.head_=n}else this.push(n)}remove_(n){if(n==null)throw new Error("Expected task to be non-null");n===this.head_&&(this.head_=n.tq_next_),n===this.tail_&&(this.tail_=this.tail_.tq_prev_),n.tq_next_&&(n.tq_next_.tq_prev_=n.tq_prev_),n.tq_prev_&&(n.tq_prev_.tq_next_=n.tq_next_)}}s(m,"a");class p extends Event{constructor(n,e){if(!e||!x.includes(e.previousPriority))throw new TypeError("Invalid task priority: '"+e.previousPriority+"'");super(n),this.previousPriority=e.previousPriority}}s(p,"n");class a extends AbortController{constructor(n){if(n===void 0&&(n={}),super(),n==null&&(n={}),typeof n!="object")throw new TypeError("'init' is not an object");var e,t,i=n.priority===void 0?"user-visible":n.priority;if(!x.includes(i))throw new TypeError("Invalid task priority: '"+i+"'");this.priority_=i,this.isPriorityChanging_=!1,t=(e=this).signal,Object.defineProperties(t,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),t.addEventListener("prioritychange",o=>{t.onprioritychange&&t.onprioritychange(o)})}setPriority(n){if(!x.includes(n))throw new TypeError("Invalid task priority: "+n);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==n){this.isPriorityChanging_=!0;var e=this.priority_;this.priority_=n;var t=new p("prioritychange",{previousPriority:e});this.signal.dispatchEvent(t),this.isPriorityChanging_=!1}}}s(a,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},x.forEach(r=>{this.queues_[r]=new m}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(r,n){if((n=Object.assign({},n)).signal!==void 0){if(n.signal===null||!("aborted"in n.signal)||typeof n.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(n.signal&&n.signal.priority&&!x.includes(n.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+n.signal.priority+"'"))}if(n.priority!==void 0&&(n.priority===null||!x.includes(n.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+n.priority+"'"));if(n.delay===void 0&&(n.delay=0),n.delay=Number(n.delay),n.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var e={callback:r,options:n,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},t=new Promise((i,o)=>{e.resolve=i,e.reject=o});return this.schedule_(e),t}schedule_(r){var n=r.options.signal;if(n){if(n.aborted)return void r.reject(n.reason);r.abortCallback=()=>{r.onTaskAborted()},n.addEventListener("abort",r.abortCallback)}r.options.delay>0?r.hostCallback=new c(()=>{r.hostCallback=null,this.onTaskDelayExpired_(r)},null,r.options.delay):(this.pushTask_(r),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(r){this.pushTask_(r),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(r){var n=this.signals_.get(r);if(n===void 0)throw new Error("Attempting to change priority on an unregistered signal");n!==r.priority&&(this.queues_[r.priority].merge(this.queues_[n],e=>e.options.signal===r),this.signals_.set(r,r.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var r=this.nextTaskPriority_();r!=null&&(r!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new c(()=>{this.schedulerEntryCallback_()},r,0)))}pushTask_(r){var n;if(!x.includes(n=r.options.priority?r.options.priority:r.options.signal&&r.options.signal.priority?r.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+n);if(r.options.signal&&r.options.signal.priority){var e=r.options.signal;this.signals_.has(e)||(e.addEventListener("prioritychange",()=>{this.onPriorityChange_(e)}),this.signals_.set(e,e.priority))}this.queues_[n].push(r)}runNextTask_(){var r=null;do{var n=this.nextTaskPriority_();if(n==null)return;r=this.queues_[n].takeNextTask()}while(r.isAborted());try{var e=r.callback();r.resolve(e)}catch(t){r.reject(t)}finally{r.onTaskCompleted()}}nextTaskPriority_(){for(var r=0;r<x.length;r++){var n=x[r];if(!this.queues_[n].isEmpty())return n}return null}},self.TaskController=a,self.TaskPriorityChangeEvent=p)})()},8274921051:(x,l,d)=>{"use strict";d.d(l,{Q:()=>c,c:()=>h});var c;(function(m){m[m.ID=25]="ID",m[m.FRECENCY=0]="FRECENCY",m[m.RAW_FRECENCY=65]="RAW_FRECENCY",m[m.FRECENCY_BONUS=76]="FRECENCY_BONUS",m[m.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",m[m.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",m[m.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",m[m.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",m[m.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",m[m.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",m[m.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",m[m.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",m[m.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",m[m.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",m[m.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",m[m.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",m[m.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",m[m.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",m[m.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",m[m.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",m[m.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",m[m.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",m[m.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",m[m.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",m[m.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",m[m.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",m[m.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",m[m.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",m[m.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",m[m.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",m[m.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",m[m.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",m[m.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",m[m.TYPE_QUERY=6]="TYPE_QUERY",m[m.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",m[m.TYPE_EMOJI=178]="TYPE_EMOJI",m[m.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",m[m.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",m[m.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",m[m.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",m[m.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",m[m.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",m[m.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",m[m.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",m[m.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",m[m.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",m[m.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",m[m.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",m[m.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",m[m.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",m[m.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",m[m.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",m[m.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",m[m.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",m[m.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",m[m.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",m[m.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",m[m.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",m[m.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",m[m.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",m[m.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",m[m.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",m[m.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",m[m.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",m[m.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",m[m.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",m[m.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",m[m.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",m[m.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",m[m.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",m[m.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",m[m.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",m[m.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",m[m.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",m[m.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",m[m.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",m[m.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",m[m.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",m[m.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",m[m.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",m[m.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",m[m.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",m[m.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",m[m.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",m[m.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",m[m.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",m[m.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",m[m.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",m[m.QUERY_LENGTH=61]="QUERY_LENGTH",m[m.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",m[m.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",m[m.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",m[m.MPIM_PRIORITY=66]="MPIM_PRIORITY",m[m.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",m[m.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",m[m.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",m[m.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",m[m.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",m[m.FUZZY_SCORE=73]="FUZZY_SCORE",m[m.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",m[m.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",m[m.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",m[m.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",m[m.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",m[m.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",m[m.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",m[m.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",m[m.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",m[m.USER_PRIORITY=89]="USER_PRIORITY",m[m.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",m[m.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",m[m.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",m[m.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",m[m.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",m[m.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",m[m.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",m[m.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",m[m.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",m[m.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",m[m.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",m[m.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",m[m.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",m[m.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",m[m.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",m[m.HERE_KEYWORD=131]="HERE_KEYWORD",m[m.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",m[m.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",m[m.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",m[m.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",m[m.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",m[m.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",m[m.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",m[m.QUERY_IS_SELF=193]="QUERY_IS_SELF",m[m.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",m[m.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",m[m.USER_SAME_TEAM=235]="USER_SAME_TEAM",m[m.USER_IS_BOT=254]="USER_IS_BOT",m[m.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",m[m.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",m[m.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",m[m.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",m[m.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",m[m.HISTORY_POSITION=232]="HISTORY_POSITION",m[m.USER_DM_NULL=179]="USER_DM_NULL",m[m.USER_DM_EMPTY=180]="USER_DM_EMPTY",m[m.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",m[m.USER_DM_OPEN=182]="USER_DM_OPEN",m[m.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",m[m.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",m[m.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",m[m.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",m[m.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",m[m.USER_HAS_DMED=284]="USER_HAS_DMED",m[m.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",m[m.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",m[m.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",m[m.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",m[m.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",m[m.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",m[m.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",m[m.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",m[m.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",m[m.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",m[m.MPIM_MEMBERS=166]="MPIM_MEMBERS",m[m.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",m[m.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",m[m.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",m[m.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",m[m.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",m[m.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",m[m.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",m[m.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",m[m.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",m[m.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",m[m.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",m[m.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",m[m.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",m[m.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",m[m.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",m[m.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",m[m.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",m[m.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",m[m.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",m[m.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",m[m.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",m[m.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",m[m.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",m[m.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",m[m.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",m[m.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",m[m.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",m[m.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",m[m.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",m[m.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",m[m.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",m[m.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",m[m.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",m[m.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",m[m.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",m[m.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",m[m.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",m[m.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",m[m.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",m[m.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",m[m.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",m[m.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",m[m.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",m[m.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",m[m.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",m[m.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",m[m.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",m[m.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",m[m.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",m[m.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",m[m.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",m[m.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",m[m.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",m[m.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",m[m.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",m[m.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",m[m.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",m[m.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",m[m.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",m[m.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",m[m.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",m[m.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",m[m.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",m[m.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",m[m.NUM_RESULTS=192]="NUM_RESULTS",m[m.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",m[m.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",m[m.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",m[m.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",m[m.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",m[m.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",m[m.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",m[m.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",m[m.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",m[m.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",m[m.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",m[m.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",m[m.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",m[m.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",m[m.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",m[m.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",m[m.FILE_USER_CTR=211]="FILE_USER_CTR",m[m.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",m[m.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",m[m.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",m[m.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",m[m.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",m[m.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",m[m.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",m[m.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",m[m.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",m[m.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",m[m.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",m[m.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",m[m.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",m[m.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",m[m.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",m[m.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",m[m.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",m[m.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",m[m.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",m[m.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",m[m.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",m[m.OS_APP_ACTION=228]="OS_APP_ACTION",m[m.TYPE_APP=216]="TYPE_APP",m[m.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",m[m.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",m[m.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",m[m.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",m[m.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",m[m.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",m[m.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",m[m.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",m[m.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",m[m.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",m[m.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",m[m.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",m[m.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",m[m.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",m[m.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",m[m.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",m[m.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",m[m.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",m[m.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",m[m.TEST_FEATURE_2=1001]="TEST_FEATURE_2",m[m.TEST_FEATURE_3=1002]="TEST_FEATURE_3",m[m.TEST_FEATURE_4=1003]="TEST_FEATURE_4",m[m.TEST_FEATURE_5=1004]="TEST_FEATURE_5",m[m.TEST_FEATURE_6=1005]="TEST_FEATURE_6",m[m.TEST_FEATURE_7=1006]="TEST_FEATURE_7",m[m.TEST_FEATURE_8=1007]="TEST_FEATURE_8",m[m.TEST_FEATURE_9=1008]="TEST_FEATURE_9",m[m.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(c||(c={}));var h;(function(m){m[m.NUMERICAL=1]="NUMERICAL",m[m.BINARY=2]="BINARY",m[m.TEXT=3]="TEXT"})(h||(h={}))},9372409576:(x,l,d)=>{"use strict";d.d(l,{$:()=>n});var c=d(4224187311),h=d.n(c);const m=c.Reader,p=c.Writer,a=c.util,r=c.roots.default||(c.roots.default={}),n=r.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const i={};return i.RecvMedia=function(){function o(g){if(g)for(let S=Object.keys(g),u=0;u<S.length;++u)g[S[u]]!=null&&(this[S[u]]=g[S[u]])}s(o,"RecvMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.fractionLost=0,o.prototype.jitter=0,o.prototype.packetsLost=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.userId="",o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let f;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(f=["audioStats","videoStats"]),set:a.oneOfSetter(f)}),o.create=s(function(S){return new o(S)},"create"),o.encode=s(function(S,u){return u||(u=p.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&u.uint32(8).uint64(S.peerId),S.bytesReceived!=null&&Object.hasOwnProperty.call(S,"bytesReceived")&&u.uint32(16).uint64(S.bytesReceived),S.packetsReceived!=null&&Object.hasOwnProperty.call(S,"packetsReceived")&&u.uint32(24).uint64(S.packetsReceived),S.fractionLost!=null&&Object.hasOwnProperty.call(S,"fractionLost")&&u.uint32(33).double(S.fractionLost),S.jitter!=null&&Object.hasOwnProperty.call(S,"jitter")&&u.uint32(41).double(S.jitter),S.packetsLost!=null&&Object.hasOwnProperty.call(S,"packetsLost")&&u.uint32(48).uint64(S.packetsLost),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&u.uint32(56).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&r.slack.calls.analytics.RecvMedia.Audio.encode(S.audioStats,u.uint32(66).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&r.slack.calls.analytics.RecvMedia.Video.encode(S.videoStats,u.uint32(74).fork()).ldelim(),S.userId!=null&&Object.hasOwnProperty.call(S,"userId")&&u.uint32(82).string(S.userId),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&u.uint32(90).string(S.peerIdString),u},"encode"),o.encodeDelimited=s(function(S,u){return this.encode(S,u).ldelim()},"encodeDelimited"),o.decode=s(function(S,u){S instanceof m||(S=m.create(S));let v=u===void 0?S.len:S.pos+u,y=new r.slack.calls.analytics.RecvMedia;for(;S.pos<v;){let _=S.uint32();switch(_>>>3){case 1:{y.peerId=S.uint64();break}case 2:{y.bytesReceived=S.uint64();break}case 3:{y.packetsReceived=S.uint64();break}case 4:{y.fractionLost=S.double();break}case 5:{y.jitter=S.double();break}case 6:{y.packetsLost=S.uint64();break}case 7:{y.codec=S.int32();break}case 10:{y.userId=S.string();break}case 11:{y.peerIdString=S.string();break}case 8:{y.audioStats=r.slack.calls.analytics.RecvMedia.Audio.decode(S,S.uint32());break}case 9:{y.videoStats=r.slack.calls.analytics.RecvMedia.Video.decode(S,S.uint32());break}default:S.skipType(_&7);break}}return y},"decode"),o.decodeDelimited=s(function(S){return S instanceof m||(S=new m(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=s(function(S){if(typeof S!="object"||S===null)return"object expected";let u={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&!a.isInteger(S.bytesReceived)&&!(S.bytesReceived&&a.isInteger(S.bytesReceived.low)&&a.isInteger(S.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&!a.isInteger(S.packetsReceived)&&!(S.packetsReceived&&a.isInteger(S.packetsReceived.low)&&a.isInteger(S.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&typeof S.fractionLost!="number")return"fractionLost: number expected";if(S.jitter!=null&&S.hasOwnProperty("jitter")&&typeof S.jitter!="number")return"jitter: number expected";if(S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&!a.isInteger(S.packetsLost)&&!(S.packetsLost&&a.isInteger(S.packetsLost.low)&&a.isInteger(S.packetsLost.high)))return"packetsLost: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.userId!=null&&S.hasOwnProperty("userId")&&!a.isString(S.userId))return"userId: string expected";if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){u.mediaType=1;{let v=r.slack.calls.analytics.RecvMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(u.mediaType===1)return"mediaType: multiple values";u.mediaType=1;{let v=r.slack.calls.analytics.RecvMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=s(function(S){if(S instanceof r.slack.calls.analytics.RecvMedia)return S;let u=new r.slack.calls.analytics.RecvMedia;switch(S.peerId!=null&&(a.Long?(u.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?u.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?u.peerId=S.peerId:typeof S.peerId=="object"&&(u.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesReceived!=null&&(a.Long?(u.bytesReceived=a.Long.fromValue(S.bytesReceived)).unsigned=!0:typeof S.bytesReceived=="string"?u.bytesReceived=parseInt(S.bytesReceived,10):typeof S.bytesReceived=="number"?u.bytesReceived=S.bytesReceived:typeof S.bytesReceived=="object"&&(u.bytesReceived=new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0))),S.packetsReceived!=null&&(a.Long?(u.packetsReceived=a.Long.fromValue(S.packetsReceived)).unsigned=!0:typeof S.packetsReceived=="string"?u.packetsReceived=parseInt(S.packetsReceived,10):typeof S.packetsReceived=="number"?u.packetsReceived=S.packetsReceived:typeof S.packetsReceived=="object"&&(u.packetsReceived=new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0))),S.fractionLost!=null&&(u.fractionLost=Number(S.fractionLost)),S.jitter!=null&&(u.jitter=Number(S.jitter)),S.packetsLost!=null&&(a.Long?(u.packetsLost=a.Long.fromValue(S.packetsLost)).unsigned=!0:typeof S.packetsLost=="string"?u.packetsLost=parseInt(S.packetsLost,10):typeof S.packetsLost=="number"?u.packetsLost=S.packetsLost:typeof S.packetsLost=="object"&&(u.packetsLost=new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){u.codec=S.codec;break}break;case"UNKNOWN":case 0:u.codec=0;break;case"OPUS":case 1:u.codec=1;break;case"VP8":case 2:u.codec=2;break;case"VP9":case 3:u.codec=3;break;case"H264":case 4:u.codec=4;break}if(S.userId!=null&&(u.userId=String(S.userId)),S.peerIdString!=null&&(u.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");u.audioStats=r.slack.calls.analytics.RecvMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");u.videoStats=r.slack.calls.analytics.RecvMedia.Video.fromObject(S.videoStats)}return u},"fromObject"),o.toObject=s(function(S,u){u||(u={});let v={};if(u.defaults){if(a.Long){let y=new a.Long(0,0,!0);v.peerId=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.peerId=u.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);v.bytesReceived=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.bytesReceived=u.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);v.packetsReceived=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.packetsReceived=u.longs===String?"0":0;if(v.fractionLost=0,v.jitter=0,a.Long){let y=new a.Long(0,0,!0);v.packetsLost=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.packetsLost=u.longs===String?"0":0;v.codec=u.enums===String?"UNKNOWN":0,v.userId="",v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=u.longs===String?String(S.peerId):S.peerId:v.peerId=u.longs===String?a.Long.prototype.toString.call(S.peerId):u.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&(typeof S.bytesReceived=="number"?v.bytesReceived=u.longs===String?String(S.bytesReceived):S.bytesReceived:v.bytesReceived=u.longs===String?a.Long.prototype.toString.call(S.bytesReceived):u.longs===Number?new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0):S.bytesReceived),S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&(typeof S.packetsReceived=="number"?v.packetsReceived=u.longs===String?String(S.packetsReceived):S.packetsReceived:v.packetsReceived=u.longs===String?a.Long.prototype.toString.call(S.packetsReceived):u.longs===Number?new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0):S.packetsReceived),S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&(v.fractionLost=u.json&&!isFinite(S.fractionLost)?String(S.fractionLost):S.fractionLost),S.jitter!=null&&S.hasOwnProperty("jitter")&&(v.jitter=u.json&&!isFinite(S.jitter)?String(S.jitter):S.jitter),S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&(typeof S.packetsLost=="number"?v.packetsLost=u.longs===String?String(S.packetsLost):S.packetsLost:v.packetsLost=u.longs===String?a.Long.prototype.toString.call(S.packetsLost):u.longs===Number?new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0):S.packetsLost),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=u.enums===String?r.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:r.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=r.slack.calls.analytics.RecvMedia.Audio.toObject(S.audioStats,u),u.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=r.slack.calls.analytics.RecvMedia.Video.toObject(S.videoStats,u),u.oneofs&&(v.mediaType="videoStats")),S.userId!=null&&S.hasOwnProperty("userId")&&(v.userId=S.userId),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),o.Audio=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return s(g,"Audio"),g.prototype.audioLevel=0,g.prototype.jitterBufferDelay=0,g.prototype.concealmentEvents=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.concealedSamples=a.Long?a.Long.fromBits(0,0,!0):0,g.create=s(function(u){return new g(u)},"create"),g.encode=s(function(u,v){return v||(v=p.create()),u.audioLevel!=null&&Object.hasOwnProperty.call(u,"audioLevel")&&v.uint32(9).double(u.audioLevel),u.jitterBufferDelay!=null&&Object.hasOwnProperty.call(u,"jitterBufferDelay")&&v.uint32(17).double(u.jitterBufferDelay),u.concealmentEvents!=null&&Object.hasOwnProperty.call(u,"concealmentEvents")&&v.uint32(24).uint64(u.concealmentEvents),u.concealedSamples!=null&&Object.hasOwnProperty.call(u,"concealedSamples")&&v.uint32(32).uint64(u.concealedSamples),v},"encode"),g.encodeDelimited=s(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=s(function(u,v){u instanceof m||(u=m.create(u));let y=v===void 0?u.len:u.pos+v,_=new r.slack.calls.analytics.RecvMedia.Audio;for(;u.pos<y;){let C=u.uint32();switch(C>>>3){case 1:{_.audioLevel=u.double();break}case 2:{_.jitterBufferDelay=u.double();break}case 3:{_.concealmentEvents=u.uint64();break}case 4:{_.concealedSamples=u.uint64();break}default:u.skipType(C&7);break}}return _},"decode"),g.decodeDelimited=s(function(u){return u instanceof m||(u=new m(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=s(function(u){return typeof u!="object"||u===null?"object expected":u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&typeof u.audioLevel!="number"?"audioLevel: number expected":u.jitterBufferDelay!=null&&u.hasOwnProperty("jitterBufferDelay")&&typeof u.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":u.concealmentEvents!=null&&u.hasOwnProperty("concealmentEvents")&&!a.isInteger(u.concealmentEvents)&&!(u.concealmentEvents&&a.isInteger(u.concealmentEvents.low)&&a.isInteger(u.concealmentEvents.high))?"concealmentEvents: integer|Long expected":u.concealedSamples!=null&&u.hasOwnProperty("concealedSamples")&&!a.isInteger(u.concealedSamples)&&!(u.concealedSamples&&a.isInteger(u.concealedSamples.low)&&a.isInteger(u.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),g.fromObject=s(function(u){if(u instanceof r.slack.calls.analytics.RecvMedia.Audio)return u;let v=new r.slack.calls.analytics.RecvMedia.Audio;return u.audioLevel!=null&&(v.audioLevel=Number(u.audioLevel)),u.jitterBufferDelay!=null&&(v.jitterBufferDelay=Number(u.jitterBufferDelay)),u.concealmentEvents!=null&&(a.Long?(v.concealmentEvents=a.Long.fromValue(u.concealmentEvents)).unsigned=!0:typeof u.concealmentEvents=="string"?v.concealmentEvents=parseInt(u.concealmentEvents,10):typeof u.concealmentEvents=="number"?v.concealmentEvents=u.concealmentEvents:typeof u.concealmentEvents=="object"&&(v.concealmentEvents=new a.LongBits(u.concealmentEvents.low>>>0,u.concealmentEvents.high>>>0).toNumber(!0))),u.concealedSamples!=null&&(a.Long?(v.concealedSamples=a.Long.fromValue(u.concealedSamples)).unsigned=!0:typeof u.concealedSamples=="string"?v.concealedSamples=parseInt(u.concealedSamples,10):typeof u.concealedSamples=="number"?v.concealedSamples=u.concealedSamples:typeof u.concealedSamples=="object"&&(v.concealedSamples=new a.LongBits(u.concealedSamples.low>>>0,u.concealedSamples.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=s(function(u,v){v||(v={});let y={};if(v.defaults){if(y.audioLevel=0,y.jitterBufferDelay=0,a.Long){let _=new a.Long(0,0,!0);y.concealmentEvents=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.concealmentEvents=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.concealedSamples=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.concealedSamples=v.longs===String?"0":0}return u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&(y.audioLevel=v.json&&!isFinite(u.audioLevel)?String(u.audioLevel):u.audioLevel),u.jitterBufferDelay!=null&&u.hasOwnProperty("jitterBufferDelay")&&(y.jitterBufferDelay=v.json&&!isFinite(u.jitterBufferDelay)?String(u.jitterBufferDelay):u.jitterBufferDelay),u.concealmentEvents!=null&&u.hasOwnProperty("concealmentEvents")&&(typeof u.concealmentEvents=="number"?y.concealmentEvents=v.longs===String?String(u.concealmentEvents):u.concealmentEvents:y.concealmentEvents=v.longs===String?a.Long.prototype.toString.call(u.concealmentEvents):v.longs===Number?new a.LongBits(u.concealmentEvents.low>>>0,u.concealmentEvents.high>>>0).toNumber(!0):u.concealmentEvents),u.concealedSamples!=null&&u.hasOwnProperty("concealedSamples")&&(typeof u.concealedSamples=="number"?y.concealedSamples=v.longs===String?String(u.concealedSamples):u.concealedSamples:y.concealedSamples=v.longs===String?a.Long.prototype.toString.call(u.concealedSamples):v.longs===Number?new a.LongBits(u.concealedSamples.low>>>0,u.concealedSamples.high>>>0).toNumber(!0):u.concealedSamples),y},"toObject"),g.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),g.getTypeUrl=s(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),g}(),o.Video=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return s(g,"Video"),g.prototype.firCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.nackCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.pliCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.sliCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesPerSecond=0,g.prototype.framesCorrupted=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesDecoded=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesDropped=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesReceived=a.Long?a.Long.fromBits(0,0,!0):0,g.create=s(function(u){return new g(u)},"create"),g.encode=s(function(u,v){return v||(v=p.create()),u.firCount!=null&&Object.hasOwnProperty.call(u,"firCount")&&v.uint32(8).uint64(u.firCount),u.nackCount!=null&&Object.hasOwnProperty.call(u,"nackCount")&&v.uint32(16).uint64(u.nackCount),u.pliCount!=null&&Object.hasOwnProperty.call(u,"pliCount")&&v.uint32(24).uint64(u.pliCount),u.sliCount!=null&&Object.hasOwnProperty.call(u,"sliCount")&&v.uint32(32).uint64(u.sliCount),u.frameHeight!=null&&Object.hasOwnProperty.call(u,"frameHeight")&&v.uint32(40).uint64(u.frameHeight),u.frameWidth!=null&&Object.hasOwnProperty.call(u,"frameWidth")&&v.uint32(48).uint64(u.frameWidth),u.framesPerSecond!=null&&Object.hasOwnProperty.call(u,"framesPerSecond")&&v.uint32(57).double(u.framesPerSecond),u.framesCorrupted!=null&&Object.hasOwnProperty.call(u,"framesCorrupted")&&v.uint32(64).uint64(u.framesCorrupted),u.framesDecoded!=null&&Object.hasOwnProperty.call(u,"framesDecoded")&&v.uint32(72).uint64(u.framesDecoded),u.framesDropped!=null&&Object.hasOwnProperty.call(u,"framesDropped")&&v.uint32(80).uint64(u.framesDropped),u.framesReceived!=null&&Object.hasOwnProperty.call(u,"framesReceived")&&v.uint32(88).uint64(u.framesReceived),v},"encode"),g.encodeDelimited=s(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=s(function(u,v){u instanceof m||(u=m.create(u));let y=v===void 0?u.len:u.pos+v,_=new r.slack.calls.analytics.RecvMedia.Video;for(;u.pos<y;){let C=u.uint32();switch(C>>>3){case 1:{_.firCount=u.uint64();break}case 2:{_.nackCount=u.uint64();break}case 3:{_.pliCount=u.uint64();break}case 4:{_.sliCount=u.uint64();break}case 5:{_.frameHeight=u.uint64();break}case 6:{_.frameWidth=u.uint64();break}case 7:{_.framesPerSecond=u.double();break}case 8:{_.framesCorrupted=u.uint64();break}case 9:{_.framesDecoded=u.uint64();break}case 10:{_.framesDropped=u.uint64();break}case 11:{_.framesReceived=u.uint64();break}default:u.skipType(C&7);break}}return _},"decode"),g.decodeDelimited=s(function(u){return u instanceof m||(u=new m(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=s(function(u){return typeof u!="object"||u===null?"object expected":u.firCount!=null&&u.hasOwnProperty("firCount")&&!a.isInteger(u.firCount)&&!(u.firCount&&a.isInteger(u.firCount.low)&&a.isInteger(u.firCount.high))?"firCount: integer|Long expected":u.nackCount!=null&&u.hasOwnProperty("nackCount")&&!a.isInteger(u.nackCount)&&!(u.nackCount&&a.isInteger(u.nackCount.low)&&a.isInteger(u.nackCount.high))?"nackCount: integer|Long expected":u.pliCount!=null&&u.hasOwnProperty("pliCount")&&!a.isInteger(u.pliCount)&&!(u.pliCount&&a.isInteger(u.pliCount.low)&&a.isInteger(u.pliCount.high))?"pliCount: integer|Long expected":u.sliCount!=null&&u.hasOwnProperty("sliCount")&&!a.isInteger(u.sliCount)&&!(u.sliCount&&a.isInteger(u.sliCount.low)&&a.isInteger(u.sliCount.high))?"sliCount: integer|Long expected":u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&!a.isInteger(u.frameHeight)&&!(u.frameHeight&&a.isInteger(u.frameHeight.low)&&a.isInteger(u.frameHeight.high))?"frameHeight: integer|Long expected":u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&!a.isInteger(u.frameWidth)&&!(u.frameWidth&&a.isInteger(u.frameWidth.low)&&a.isInteger(u.frameWidth.high))?"frameWidth: integer|Long expected":u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&typeof u.framesPerSecond!="number"?"framesPerSecond: number expected":u.framesCorrupted!=null&&u.hasOwnProperty("framesCorrupted")&&!a.isInteger(u.framesCorrupted)&&!(u.framesCorrupted&&a.isInteger(u.framesCorrupted.low)&&a.isInteger(u.framesCorrupted.high))?"framesCorrupted: integer|Long expected":u.framesDecoded!=null&&u.hasOwnProperty("framesDecoded")&&!a.isInteger(u.framesDecoded)&&!(u.framesDecoded&&a.isInteger(u.framesDecoded.low)&&a.isInteger(u.framesDecoded.high))?"framesDecoded: integer|Long expected":u.framesDropped!=null&&u.hasOwnProperty("framesDropped")&&!a.isInteger(u.framesDropped)&&!(u.framesDropped&&a.isInteger(u.framesDropped.low)&&a.isInteger(u.framesDropped.high))?"framesDropped: integer|Long expected":u.framesReceived!=null&&u.hasOwnProperty("framesReceived")&&!a.isInteger(u.framesReceived)&&!(u.framesReceived&&a.isInteger(u.framesReceived.low)&&a.isInteger(u.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),g.fromObject=s(function(u){if(u instanceof r.slack.calls.analytics.RecvMedia.Video)return u;let v=new r.slack.calls.analytics.RecvMedia.Video;return u.firCount!=null&&(a.Long?(v.firCount=a.Long.fromValue(u.firCount)).unsigned=!0:typeof u.firCount=="string"?v.firCount=parseInt(u.firCount,10):typeof u.firCount=="number"?v.firCount=u.firCount:typeof u.firCount=="object"&&(v.firCount=new a.LongBits(u.firCount.low>>>0,u.firCount.high>>>0).toNumber(!0))),u.nackCount!=null&&(a.Long?(v.nackCount=a.Long.fromValue(u.nackCount)).unsigned=!0:typeof u.nackCount=="string"?v.nackCount=parseInt(u.nackCount,10):typeof u.nackCount=="number"?v.nackCount=u.nackCount:typeof u.nackCount=="object"&&(v.nackCount=new a.LongBits(u.nackCount.low>>>0,u.nackCount.high>>>0).toNumber(!0))),u.pliCount!=null&&(a.Long?(v.pliCount=a.Long.fromValue(u.pliCount)).unsigned=!0:typeof u.pliCount=="string"?v.pliCount=parseInt(u.pliCount,10):typeof u.pliCount=="number"?v.pliCount=u.pliCount:typeof u.pliCount=="object"&&(v.pliCount=new a.LongBits(u.pliCount.low>>>0,u.pliCount.high>>>0).toNumber(!0))),u.sliCount!=null&&(a.Long?(v.sliCount=a.Long.fromValue(u.sliCount)).unsigned=!0:typeof u.sliCount=="string"?v.sliCount=parseInt(u.sliCount,10):typeof u.sliCount=="number"?v.sliCount=u.sliCount:typeof u.sliCount=="object"&&(v.sliCount=new a.LongBits(u.sliCount.low>>>0,u.sliCount.high>>>0).toNumber(!0))),u.frameHeight!=null&&(a.Long?(v.frameHeight=a.Long.fromValue(u.frameHeight)).unsigned=!0:typeof u.frameHeight=="string"?v.frameHeight=parseInt(u.frameHeight,10):typeof u.frameHeight=="number"?v.frameHeight=u.frameHeight:typeof u.frameHeight=="object"&&(v.frameHeight=new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0))),u.frameWidth!=null&&(a.Long?(v.frameWidth=a.Long.fromValue(u.frameWidth)).unsigned=!0:typeof u.frameWidth=="string"?v.frameWidth=parseInt(u.frameWidth,10):typeof u.frameWidth=="number"?v.frameWidth=u.frameWidth:typeof u.frameWidth=="object"&&(v.frameWidth=new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0))),u.framesPerSecond!=null&&(v.framesPerSecond=Number(u.framesPerSecond)),u.framesCorrupted!=null&&(a.Long?(v.framesCorrupted=a.Long.fromValue(u.framesCorrupted)).unsigned=!0:typeof u.framesCorrupted=="string"?v.framesCorrupted=parseInt(u.framesCorrupted,10):typeof u.framesCorrupted=="number"?v.framesCorrupted=u.framesCorrupted:typeof u.framesCorrupted=="object"&&(v.framesCorrupted=new a.LongBits(u.framesCorrupted.low>>>0,u.framesCorrupted.high>>>0).toNumber(!0))),u.framesDecoded!=null&&(a.Long?(v.framesDecoded=a.Long.fromValue(u.framesDecoded)).unsigned=!0:typeof u.framesDecoded=="string"?v.framesDecoded=parseInt(u.framesDecoded,10):typeof u.framesDecoded=="number"?v.framesDecoded=u.framesDecoded:typeof u.framesDecoded=="object"&&(v.framesDecoded=new a.LongBits(u.framesDecoded.low>>>0,u.framesDecoded.high>>>0).toNumber(!0))),u.framesDropped!=null&&(a.Long?(v.framesDropped=a.Long.fromValue(u.framesDropped)).unsigned=!0:typeof u.framesDropped=="string"?v.framesDropped=parseInt(u.framesDropped,10):typeof u.framesDropped=="number"?v.framesDropped=u.framesDropped:typeof u.framesDropped=="object"&&(v.framesDropped=new a.LongBits(u.framesDropped.low>>>0,u.framesDropped.high>>>0).toNumber(!0))),u.framesReceived!=null&&(a.Long?(v.framesReceived=a.Long.fromValue(u.framesReceived)).unsigned=!0:typeof u.framesReceived=="string"?v.framesReceived=parseInt(u.framesReceived,10):typeof u.framesReceived=="number"?v.framesReceived=u.framesReceived:typeof u.framesReceived=="object"&&(v.framesReceived=new a.LongBits(u.framesReceived.low>>>0,u.framesReceived.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=s(function(u,v){v||(v={});let y={};if(v.defaults){if(a.Long){let _=new a.Long(0,0,!0);y.firCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.firCount=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.nackCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.nackCount=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.pliCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.pliCount=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.sliCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.sliCount=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.frameHeight=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.frameHeight=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.frameWidth=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.frameWidth=v.longs===String?"0":0;if(y.framesPerSecond=0,a.Long){let _=new a.Long(0,0,!0);y.framesCorrupted=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.framesCorrupted=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.framesDecoded=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.framesDecoded=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.framesDropped=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.framesDropped=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.framesReceived=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.framesReceived=v.longs===String?"0":0}return u.firCount!=null&&u.hasOwnProperty("firCount")&&(typeof u.firCount=="number"?y.firCount=v.longs===String?String(u.firCount):u.firCount:y.firCount=v.longs===String?a.Long.prototype.toString.call(u.firCount):v.longs===Number?new a.LongBits(u.firCount.low>>>0,u.firCount.high>>>0).toNumber(!0):u.firCount),u.nackCount!=null&&u.hasOwnProperty("nackCount")&&(typeof u.nackCount=="number"?y.nackCount=v.longs===String?String(u.nackCount):u.nackCount:y.nackCount=v.longs===String?a.Long.prototype.toString.call(u.nackCount):v.longs===Number?new a.LongBits(u.nackCount.low>>>0,u.nackCount.high>>>0).toNumber(!0):u.nackCount),u.pliCount!=null&&u.hasOwnProperty("pliCount")&&(typeof u.pliCount=="number"?y.pliCount=v.longs===String?String(u.pliCount):u.pliCount:y.pliCount=v.longs===String?a.Long.prototype.toString.call(u.pliCount):v.longs===Number?new a.LongBits(u.pliCount.low>>>0,u.pliCount.high>>>0).toNumber(!0):u.pliCount),u.sliCount!=null&&u.hasOwnProperty("sliCount")&&(typeof u.sliCount=="number"?y.sliCount=v.longs===String?String(u.sliCount):u.sliCount:y.sliCount=v.longs===String?a.Long.prototype.toString.call(u.sliCount):v.longs===Number?new a.LongBits(u.sliCount.low>>>0,u.sliCount.high>>>0).toNumber(!0):u.sliCount),u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&(typeof u.frameHeight=="number"?y.frameHeight=v.longs===String?String(u.frameHeight):u.frameHeight:y.frameHeight=v.longs===String?a.Long.prototype.toString.call(u.frameHeight):v.longs===Number?new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0):u.frameHeight),u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&(typeof u.frameWidth=="number"?y.frameWidth=v.longs===String?String(u.frameWidth):u.frameWidth:y.frameWidth=v.longs===String?a.Long.prototype.toString.call(u.frameWidth):v.longs===Number?new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0):u.frameWidth),u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&(y.framesPerSecond=v.json&&!isFinite(u.framesPerSecond)?String(u.framesPerSecond):u.framesPerSecond),u.framesCorrupted!=null&&u.hasOwnProperty("framesCorrupted")&&(typeof u.framesCorrupted=="number"?y.framesCorrupted=v.longs===String?String(u.framesCorrupted):u.framesCorrupted:y.framesCorrupted=v.longs===String?a.Long.prototype.toString.call(u.framesCorrupted):v.longs===Number?new a.LongBits(u.framesCorrupted.low>>>0,u.framesCorrupted.high>>>0).toNumber(!0):u.framesCorrupted),u.framesDecoded!=null&&u.hasOwnProperty("framesDecoded")&&(typeof u.framesDecoded=="number"?y.framesDecoded=v.longs===String?String(u.framesDecoded):u.framesDecoded:y.framesDecoded=v.longs===String?a.Long.prototype.toString.call(u.framesDecoded):v.longs===Number?new a.LongBits(u.framesDecoded.low>>>0,u.framesDecoded.high>>>0).toNumber(!0):u.framesDecoded),u.framesDropped!=null&&u.hasOwnProperty("framesDropped")&&(typeof u.framesDropped=="number"?y.framesDropped=v.longs===String?String(u.framesDropped):u.framesDropped:y.framesDropped=v.longs===String?a.Long.prototype.toString.call(u.framesDropped):v.longs===Number?new a.LongBits(u.framesDropped.low>>>0,u.framesDropped.high>>>0).toNumber(!0):u.framesDropped),u.framesReceived!=null&&u.hasOwnProperty("framesReceived")&&(typeof u.framesReceived=="number"?y.framesReceived=v.longs===String?String(u.framesReceived):u.framesReceived:y.framesReceived=v.longs===String?a.Long.prototype.toString.call(u.framesReceived):v.longs===Number?new a.LongBits(u.framesReceived.low>>>0,u.framesReceived.high>>>0).toNumber(!0):u.framesReceived),y},"toObject"),g.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),g.getTypeUrl=s(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),g}(),o}(),i.SendMedia=function(){function o(g){if(g)for(let S=Object.keys(g),u=0;u<S.length;++u)g[S[u]]!=null&&(this[S[u]]=g[S[u]])}s(o,"SendMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let f;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(f=["audioStats","videoStats"]),set:a.oneOfSetter(f)}),o.create=s(function(S){return new o(S)},"create"),o.encode=s(function(S,u){return u||(u=p.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&u.uint32(8).uint64(S.peerId),S.bytesSent!=null&&Object.hasOwnProperty.call(S,"bytesSent")&&u.uint32(16).uint64(S.bytesSent),S.packetsSent!=null&&Object.hasOwnProperty.call(S,"packetsSent")&&u.uint32(24).uint64(S.packetsSent),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&u.uint32(32).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&r.slack.calls.analytics.SendMedia.Audio.encode(S.audioStats,u.uint32(42).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&r.slack.calls.analytics.SendMedia.Video.encode(S.videoStats,u.uint32(50).fork()).ldelim(),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&u.uint32(58).string(S.peerIdString),u},"encode"),o.encodeDelimited=s(function(S,u){return this.encode(S,u).ldelim()},"encodeDelimited"),o.decode=s(function(S,u){S instanceof m||(S=m.create(S));let v=u===void 0?S.len:S.pos+u,y=new r.slack.calls.analytics.SendMedia;for(;S.pos<v;){let _=S.uint32();switch(_>>>3){case 1:{y.peerId=S.uint64();break}case 2:{y.bytesSent=S.uint64();break}case 3:{y.packetsSent=S.uint64();break}case 4:{y.codec=S.int32();break}case 7:{y.peerIdString=S.string();break}case 5:{y.audioStats=r.slack.calls.analytics.SendMedia.Audio.decode(S,S.uint32());break}case 6:{y.videoStats=r.slack.calls.analytics.SendMedia.Video.decode(S,S.uint32());break}default:S.skipType(_&7);break}}return y},"decode"),o.decodeDelimited=s(function(S){return S instanceof m||(S=new m(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=s(function(S){if(typeof S!="object"||S===null)return"object expected";let u={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&!a.isInteger(S.bytesSent)&&!(S.bytesSent&&a.isInteger(S.bytesSent.low)&&a.isInteger(S.bytesSent.high)))return"bytesSent: integer|Long expected";if(S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&!a.isInteger(S.packetsSent)&&!(S.packetsSent&&a.isInteger(S.packetsSent.low)&&a.isInteger(S.packetsSent.high)))return"packetsSent: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){u.mediaType=1;{let v=r.slack.calls.analytics.SendMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(u.mediaType===1)return"mediaType: multiple values";u.mediaType=1;{let v=r.slack.calls.analytics.SendMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=s(function(S){if(S instanceof r.slack.calls.analytics.SendMedia)return S;let u=new r.slack.calls.analytics.SendMedia;switch(S.peerId!=null&&(a.Long?(u.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?u.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?u.peerId=S.peerId:typeof S.peerId=="object"&&(u.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesSent!=null&&(a.Long?(u.bytesSent=a.Long.fromValue(S.bytesSent)).unsigned=!0:typeof S.bytesSent=="string"?u.bytesSent=parseInt(S.bytesSent,10):typeof S.bytesSent=="number"?u.bytesSent=S.bytesSent:typeof S.bytesSent=="object"&&(u.bytesSent=new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0))),S.packetsSent!=null&&(a.Long?(u.packetsSent=a.Long.fromValue(S.packetsSent)).unsigned=!0:typeof S.packetsSent=="string"?u.packetsSent=parseInt(S.packetsSent,10):typeof S.packetsSent=="number"?u.packetsSent=S.packetsSent:typeof S.packetsSent=="object"&&(u.packetsSent=new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){u.codec=S.codec;break}break;case"UNKNOWN":case 0:u.codec=0;break;case"OPUS":case 1:u.codec=1;break;case"VP8":case 2:u.codec=2;break;case"VP9":case 3:u.codec=3;break;case"H264":case 4:u.codec=4;break}if(S.peerIdString!=null&&(u.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");u.audioStats=r.slack.calls.analytics.SendMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");u.videoStats=r.slack.calls.analytics.SendMedia.Video.fromObject(S.videoStats)}return u},"fromObject"),o.toObject=s(function(S,u){u||(u={});let v={};if(u.defaults){if(a.Long){let y=new a.Long(0,0,!0);v.peerId=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.peerId=u.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);v.bytesSent=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.bytesSent=u.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);v.packetsSent=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else v.packetsSent=u.longs===String?"0":0;v.codec=u.enums===String?"UNKNOWN":0,v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=u.longs===String?String(S.peerId):S.peerId:v.peerId=u.longs===String?a.Long.prototype.toString.call(S.peerId):u.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&(typeof S.bytesSent=="number"?v.bytesSent=u.longs===String?String(S.bytesSent):S.bytesSent:v.bytesSent=u.longs===String?a.Long.prototype.toString.call(S.bytesSent):u.longs===Number?new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0):S.bytesSent),S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&(typeof S.packetsSent=="number"?v.packetsSent=u.longs===String?String(S.packetsSent):S.packetsSent:v.packetsSent=u.longs===String?a.Long.prototype.toString.call(S.packetsSent):u.longs===Number?new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0):S.packetsSent),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=u.enums===String?r.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:r.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=r.slack.calls.analytics.SendMedia.Audio.toObject(S.audioStats,u),u.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=r.slack.calls.analytics.SendMedia.Video.toObject(S.videoStats,u),u.oneofs&&(v.mediaType="videoStats")),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),o.Audio=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return s(g,"Audio"),g.prototype.audioLevel=0,g.prototype.echoReturnLoss=0,g.prototype.echoReturnLossEnhancement=0,g.prototype.totalAudioEnergy=0,g.prototype.totalSamplesDuration=0,g.create=s(function(u){return new g(u)},"create"),g.encode=s(function(u,v){return v||(v=p.create()),u.audioLevel!=null&&Object.hasOwnProperty.call(u,"audioLevel")&&v.uint32(9).double(u.audioLevel),u.echoReturnLoss!=null&&Object.hasOwnProperty.call(u,"echoReturnLoss")&&v.uint32(17).double(u.echoReturnLoss),u.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(u,"echoReturnLossEnhancement")&&v.uint32(25).double(u.echoReturnLossEnhancement),u.totalAudioEnergy!=null&&Object.hasOwnProperty.call(u,"totalAudioEnergy")&&v.uint32(33).double(u.totalAudioEnergy),u.totalSamplesDuration!=null&&Object.hasOwnProperty.call(u,"totalSamplesDuration")&&v.uint32(41).double(u.totalSamplesDuration),v},"encode"),g.encodeDelimited=s(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=s(function(u,v){u instanceof m||(u=m.create(u));let y=v===void 0?u.len:u.pos+v,_=new r.slack.calls.analytics.SendMedia.Audio;for(;u.pos<y;){let C=u.uint32();switch(C>>>3){case 1:{_.audioLevel=u.double();break}case 2:{_.echoReturnLoss=u.double();break}case 3:{_.echoReturnLossEnhancement=u.double();break}case 4:{_.totalAudioEnergy=u.double();break}case 5:{_.totalSamplesDuration=u.double();break}default:u.skipType(C&7);break}}return _},"decode"),g.decodeDelimited=s(function(u){return u instanceof m||(u=new m(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=s(function(u){return typeof u!="object"||u===null?"object expected":u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&typeof u.audioLevel!="number"?"audioLevel: number expected":u.echoReturnLoss!=null&&u.hasOwnProperty("echoReturnLoss")&&typeof u.echoReturnLoss!="number"?"echoReturnLoss: number expected":u.echoReturnLossEnhancement!=null&&u.hasOwnProperty("echoReturnLossEnhancement")&&typeof u.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":u.totalAudioEnergy!=null&&u.hasOwnProperty("totalAudioEnergy")&&typeof u.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":u.totalSamplesDuration!=null&&u.hasOwnProperty("totalSamplesDuration")&&typeof u.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),g.fromObject=s(function(u){if(u instanceof r.slack.calls.analytics.SendMedia.Audio)return u;let v=new r.slack.calls.analytics.SendMedia.Audio;return u.audioLevel!=null&&(v.audioLevel=Number(u.audioLevel)),u.echoReturnLoss!=null&&(v.echoReturnLoss=Number(u.echoReturnLoss)),u.echoReturnLossEnhancement!=null&&(v.echoReturnLossEnhancement=Number(u.echoReturnLossEnhancement)),u.totalAudioEnergy!=null&&(v.totalAudioEnergy=Number(u.totalAudioEnergy)),u.totalSamplesDuration!=null&&(v.totalSamplesDuration=Number(u.totalSamplesDuration)),v},"fromObject"),g.toObject=s(function(u,v){v||(v={});let y={};return v.defaults&&(y.audioLevel=0,y.echoReturnLoss=0,y.echoReturnLossEnhancement=0,y.totalAudioEnergy=0,y.totalSamplesDuration=0),u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&(y.audioLevel=v.json&&!isFinite(u.audioLevel)?String(u.audioLevel):u.audioLevel),u.echoReturnLoss!=null&&u.hasOwnProperty("echoReturnLoss")&&(y.echoReturnLoss=v.json&&!isFinite(u.echoReturnLoss)?String(u.echoReturnLoss):u.echoReturnLoss),u.echoReturnLossEnhancement!=null&&u.hasOwnProperty("echoReturnLossEnhancement")&&(y.echoReturnLossEnhancement=v.json&&!isFinite(u.echoReturnLossEnhancement)?String(u.echoReturnLossEnhancement):u.echoReturnLossEnhancement),u.totalAudioEnergy!=null&&u.hasOwnProperty("totalAudioEnergy")&&(y.totalAudioEnergy=v.json&&!isFinite(u.totalAudioEnergy)?String(u.totalAudioEnergy):u.totalAudioEnergy),u.totalSamplesDuration!=null&&u.hasOwnProperty("totalSamplesDuration")&&(y.totalSamplesDuration=v.json&&!isFinite(u.totalSamplesDuration)?String(u.totalSamplesDuration):u.totalSamplesDuration),y},"toObject"),g.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),g.getTypeUrl=s(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),g}(),o.Video=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return s(g,"Video"),g.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesPerSecond=0,g.prototype.framesSent=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesEncoded=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.hugeFramesSent=a.Long?a.Long.fromBits(0,0,!0):0,g.create=s(function(u){return new g(u)},"create"),g.encode=s(function(u,v){return v||(v=p.create()),u.frameHeight!=null&&Object.hasOwnProperty.call(u,"frameHeight")&&v.uint32(8).uint64(u.frameHeight),u.frameWidth!=null&&Object.hasOwnProperty.call(u,"frameWidth")&&v.uint32(16).uint64(u.frameWidth),u.framesPerSecond!=null&&Object.hasOwnProperty.call(u,"framesPerSecond")&&v.uint32(25).double(u.framesPerSecond),u.framesSent!=null&&Object.hasOwnProperty.call(u,"framesSent")&&v.uint32(32).uint64(u.framesSent),u.framesEncoded!=null&&Object.hasOwnProperty.call(u,"framesEncoded")&&v.uint32(40).uint64(u.framesEncoded),u.hugeFramesSent!=null&&Object.hasOwnProperty.call(u,"hugeFramesSent")&&v.uint32(48).uint64(u.hugeFramesSent),v},"encode"),g.encodeDelimited=s(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=s(function(u,v){u instanceof m||(u=m.create(u));let y=v===void 0?u.len:u.pos+v,_=new r.slack.calls.analytics.SendMedia.Video;for(;u.pos<y;){let C=u.uint32();switch(C>>>3){case 1:{_.frameHeight=u.uint64();break}case 2:{_.frameWidth=u.uint64();break}case 3:{_.framesPerSecond=u.double();break}case 4:{_.framesSent=u.uint64();break}case 5:{_.framesEncoded=u.uint64();break}case 6:{_.hugeFramesSent=u.uint64();break}default:u.skipType(C&7);break}}return _},"decode"),g.decodeDelimited=s(function(u){return u instanceof m||(u=new m(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=s(function(u){return typeof u!="object"||u===null?"object expected":u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&!a.isInteger(u.frameHeight)&&!(u.frameHeight&&a.isInteger(u.frameHeight.low)&&a.isInteger(u.frameHeight.high))?"frameHeight: integer|Long expected":u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&!a.isInteger(u.frameWidth)&&!(u.frameWidth&&a.isInteger(u.frameWidth.low)&&a.isInteger(u.frameWidth.high))?"frameWidth: integer|Long expected":u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&typeof u.framesPerSecond!="number"?"framesPerSecond: number expected":u.framesSent!=null&&u.hasOwnProperty("framesSent")&&!a.isInteger(u.framesSent)&&!(u.framesSent&&a.isInteger(u.framesSent.low)&&a.isInteger(u.framesSent.high))?"framesSent: integer|Long expected":u.framesEncoded!=null&&u.hasOwnProperty("framesEncoded")&&!a.isInteger(u.framesEncoded)&&!(u.framesEncoded&&a.isInteger(u.framesEncoded.low)&&a.isInteger(u.framesEncoded.high))?"framesEncoded: integer|Long expected":u.hugeFramesSent!=null&&u.hasOwnProperty("hugeFramesSent")&&!a.isInteger(u.hugeFramesSent)&&!(u.hugeFramesSent&&a.isInteger(u.hugeFramesSent.low)&&a.isInteger(u.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),g.fromObject=s(function(u){if(u instanceof r.slack.calls.analytics.SendMedia.Video)return u;let v=new r.slack.calls.analytics.SendMedia.Video;return u.frameHeight!=null&&(a.Long?(v.frameHeight=a.Long.fromValue(u.frameHeight)).unsigned=!0:typeof u.frameHeight=="string"?v.frameHeight=parseInt(u.frameHeight,10):typeof u.frameHeight=="number"?v.frameHeight=u.frameHeight:typeof u.frameHeight=="object"&&(v.frameHeight=new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0))),u.frameWidth!=null&&(a.Long?(v.frameWidth=a.Long.fromValue(u.frameWidth)).unsigned=!0:typeof u.frameWidth=="string"?v.frameWidth=parseInt(u.frameWidth,10):typeof u.frameWidth=="number"?v.frameWidth=u.frameWidth:typeof u.frameWidth=="object"&&(v.frameWidth=new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0))),u.framesPerSecond!=null&&(v.framesPerSecond=Number(u.framesPerSecond)),u.framesSent!=null&&(a.Long?(v.framesSent=a.Long.fromValue(u.framesSent)).unsigned=!0:typeof u.framesSent=="string"?v.framesSent=parseInt(u.framesSent,10):typeof u.framesSent=="number"?v.framesSent=u.framesSent:typeof u.framesSent=="object"&&(v.framesSent=new a.LongBits(u.framesSent.low>>>0,u.framesSent.high>>>0).toNumber(!0))),u.framesEncoded!=null&&(a.Long?(v.framesEncoded=a.Long.fromValue(u.framesEncoded)).unsigned=!0:typeof u.framesEncoded=="string"?v.framesEncoded=parseInt(u.framesEncoded,10):typeof u.framesEncoded=="number"?v.framesEncoded=u.framesEncoded:typeof u.framesEncoded=="object"&&(v.framesEncoded=new a.LongBits(u.framesEncoded.low>>>0,u.framesEncoded.high>>>0).toNumber(!0))),u.hugeFramesSent!=null&&(a.Long?(v.hugeFramesSent=a.Long.fromValue(u.hugeFramesSent)).unsigned=!0:typeof u.hugeFramesSent=="string"?v.hugeFramesSent=parseInt(u.hugeFramesSent,10):typeof u.hugeFramesSent=="number"?v.hugeFramesSent=u.hugeFramesSent:typeof u.hugeFramesSent=="object"&&(v.hugeFramesSent=new a.LongBits(u.hugeFramesSent.low>>>0,u.hugeFramesSent.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=s(function(u,v){v||(v={});let y={};if(v.defaults){if(a.Long){let _=new a.Long(0,0,!0);y.frameHeight=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.frameHeight=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.frameWidth=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.frameWidth=v.longs===String?"0":0;if(y.framesPerSecond=0,a.Long){let _=new a.Long(0,0,!0);y.framesSent=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.framesSent=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.framesEncoded=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.framesEncoded=v.longs===String?"0":0;if(a.Long){let _=new a.Long(0,0,!0);y.hugeFramesSent=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else y.hugeFramesSent=v.longs===String?"0":0}return u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&(typeof u.frameHeight=="number"?y.frameHeight=v.longs===String?String(u.frameHeight):u.frameHeight:y.frameHeight=v.longs===String?a.Long.prototype.toString.call(u.frameHeight):v.longs===Number?new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0):u.frameHeight),u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&(typeof u.frameWidth=="number"?y.frameWidth=v.longs===String?String(u.frameWidth):u.frameWidth:y.frameWidth=v.longs===String?a.Long.prototype.toString.call(u.frameWidth):v.longs===Number?new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0):u.frameWidth),u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&(y.framesPerSecond=v.json&&!isFinite(u.framesPerSecond)?String(u.framesPerSecond):u.framesPerSecond),u.framesSent!=null&&u.hasOwnProperty("framesSent")&&(typeof u.framesSent=="number"?y.framesSent=v.longs===String?String(u.framesSent):u.framesSent:y.framesSent=v.longs===String?a.Long.prototype.toString.call(u.framesSent):v.longs===Number?new a.LongBits(u.framesSent.low>>>0,u.framesSent.high>>>0).toNumber(!0):u.framesSent),u.framesEncoded!=null&&u.hasOwnProperty("framesEncoded")&&(typeof u.framesEncoded=="number"?y.framesEncoded=v.longs===String?String(u.framesEncoded):u.framesEncoded:y.framesEncoded=v.longs===String?a.Long.prototype.toString.call(u.framesEncoded):v.longs===Number?new a.LongBits(u.framesEncoded.low>>>0,u.framesEncoded.high>>>0).toNumber(!0):u.framesEncoded),u.hugeFramesSent!=null&&u.hasOwnProperty("hugeFramesSent")&&(typeof u.hugeFramesSent=="number"?y.hugeFramesSent=v.longs===String?String(u.hugeFramesSent):u.hugeFramesSent:y.hugeFramesSent=v.longs===String?a.Long.prototype.toString.call(u.hugeFramesSent):v.longs===Number?new a.LongBits(u.hugeFramesSent.low>>>0,u.hugeFramesSent.high>>>0).toNumber(!0):u.hugeFramesSent),y},"toObject"),g.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),g.getTypeUrl=s(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),g}(),o}(),i.MemoryInfo=function(){function o(f){if(f)for(let g=Object.keys(f),S=0;S<g.length;++S)f[g[S]]!=null&&(this[g[S]]=f[g[S]])}return s(o,"MemoryInfo"),o.prototype.workingSetSize=0,o.prototype.peakWorkingSetSize=0,o.create=s(function(g){return new o(g)},"create"),o.encode=s(function(g,S){return S||(S=p.create()),g.workingSetSize!=null&&Object.hasOwnProperty.call(g,"workingSetSize")&&S.uint32(9).double(g.workingSetSize),g.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(g,"peakWorkingSetSize")&&S.uint32(17).double(g.peakWorkingSetSize),S},"encode"),o.encodeDelimited=s(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=s(function(g,S){g instanceof m||(g=m.create(g));let u=S===void 0?g.len:g.pos+S,v=new r.slack.calls.analytics.MemoryInfo;for(;g.pos<u;){let y=g.uint32();switch(y>>>3){case 1:{v.workingSetSize=g.double();break}case 2:{v.peakWorkingSetSize=g.double();break}default:g.skipType(y&7);break}}return v},"decode"),o.decodeDelimited=s(function(g){return g instanceof m||(g=new m(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=s(function(g){return typeof g!="object"||g===null?"object expected":g.workingSetSize!=null&&g.hasOwnProperty("workingSetSize")&&typeof g.workingSetSize!="number"?"workingSetSize: number expected":g.peakWorkingSetSize!=null&&g.hasOwnProperty("peakWorkingSetSize")&&typeof g.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),o.fromObject=s(function(g){if(g instanceof r.slack.calls.analytics.MemoryInfo)return g;let S=new r.slack.calls.analytics.MemoryInfo;return g.workingSetSize!=null&&(S.workingSetSize=Number(g.workingSetSize)),g.peakWorkingSetSize!=null&&(S.peakWorkingSetSize=Number(g.peakWorkingSetSize)),S},"fromObject"),o.toObject=s(function(g,S){S||(S={});let u={};return S.defaults&&(u.workingSetSize=0,u.peakWorkingSetSize=0),g.workingSetSize!=null&&g.hasOwnProperty("workingSetSize")&&(u.workingSetSize=S.json&&!isFinite(g.workingSetSize)?String(g.workingSetSize):g.workingSetSize),g.peakWorkingSetSize!=null&&g.hasOwnProperty("peakWorkingSetSize")&&(u.peakWorkingSetSize=S.json&&!isFinite(g.peakWorkingSetSize)?String(g.peakWorkingSetSize):g.peakWorkingSetSize),u},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),o}(),i.AppMetrics=function(){function o(f){if(f)for(let g=Object.keys(f),S=0;S<g.length;++S)f[g[S]]!=null&&(this[g[S]]=f[g[S]])}return s(o,"AppMetrics"),o.prototype.cpu=0,o.prototype.memory=null,o.create=s(function(g){return new o(g)},"create"),o.encode=s(function(g,S){return S||(S=p.create()),g.cpu!=null&&Object.hasOwnProperty.call(g,"cpu")&&S.uint32(9).double(g.cpu),g.memory!=null&&Object.hasOwnProperty.call(g,"memory")&&r.slack.calls.analytics.MemoryInfo.encode(g.memory,S.uint32(18).fork()).ldelim(),S},"encode"),o.encodeDelimited=s(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=s(function(g,S){g instanceof m||(g=m.create(g));let u=S===void 0?g.len:g.pos+S,v=new r.slack.calls.analytics.AppMetrics;for(;g.pos<u;){let y=g.uint32();switch(y>>>3){case 1:{v.cpu=g.double();break}case 2:{v.memory=r.slack.calls.analytics.MemoryInfo.decode(g,g.uint32());break}default:g.skipType(y&7);break}}return v},"decode"),o.decodeDelimited=s(function(g){return g instanceof m||(g=new m(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=s(function(g){if(typeof g!="object"||g===null)return"object expected";if(g.cpu!=null&&g.hasOwnProperty("cpu")&&typeof g.cpu!="number")return"cpu: number expected";if(g.memory!=null&&g.hasOwnProperty("memory")){let S=r.slack.calls.analytics.MemoryInfo.verify(g.memory);if(S)return"memory."+S}return null},"verify"),o.fromObject=s(function(g){if(g instanceof r.slack.calls.analytics.AppMetrics)return g;let S=new r.slack.calls.analytics.AppMetrics;if(g.cpu!=null&&(S.cpu=Number(g.cpu)),g.memory!=null){if(typeof g.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");S.memory=r.slack.calls.analytics.MemoryInfo.fromObject(g.memory)}return S},"fromObject"),o.toObject=s(function(g,S){S||(S={});let u={};return S.defaults&&(u.cpu=0,u.memory=null),g.cpu!=null&&g.hasOwnProperty("cpu")&&(u.cpu=S.json&&!isFinite(g.cpu)?String(g.cpu):g.cpu),g.memory!=null&&g.hasOwnProperty("memory")&&(u.memory=r.slack.calls.analytics.MemoryInfo.toObject(g.memory,S)),u},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),o}(),i.Codec=function(){const o={},f=Object.create(o);return f[o[0]="UNKNOWN"]=0,f[o[1]="OPUS"]=1,f[o[2]="VP8"]=2,f[o[3]="VP9"]=3,f[o[4]="H264"]=4,f}(),i.Protocol=function(){const o={},f=Object.create(o);return f[o[0]="UDP"]=0,f[o[1]="TCP"]=1,f}(),i.PathType=function(){const o={},f=Object.create(o);return f[o[0]="DIRECT"]=0,f[o[1]="RELAY"]=1,f}(),i.Report=function(){function o(f){if(this.recv=[],this.send=[],f)for(let g=Object.keys(f),S=0;S<g.length;++S)f[g[S]]!=null&&(this[g[S]]=f[g[S]])}return s(o,"Report"),o.prototype.totalBytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalBytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalRoundTripTime=0,o.prototype.currentRoundTripTime=0,o.prototype.availableOutgoingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.protocol=0,o.prototype.pathType=0,o.prototype.recv=a.emptyArray,o.prototype.send=a.emptyArray,o.prototype.clientTime=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.availableIncomingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.appMetrics=null,o.create=s(function(g){return new o(g)},"create"),o.encode=s(function(g,S){if(S||(S=p.create()),g.totalBytesSent!=null&&Object.hasOwnProperty.call(g,"totalBytesSent")&&S.uint32(8).uint64(g.totalBytesSent),g.totalBytesReceived!=null&&Object.hasOwnProperty.call(g,"totalBytesReceived")&&S.uint32(16).uint64(g.totalBytesReceived),g.totalRoundTripTime!=null&&Object.hasOwnProperty.call(g,"totalRoundTripTime")&&S.uint32(25).double(g.totalRoundTripTime),g.currentRoundTripTime!=null&&Object.hasOwnProperty.call(g,"currentRoundTripTime")&&S.uint32(33).double(g.currentRoundTripTime),g.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(g,"availableOutgoingBitrate")&&S.uint32(40).uint64(g.availableOutgoingBitrate),g.protocol!=null&&Object.hasOwnProperty.call(g,"protocol")&&S.uint32(48).int32(g.protocol),g.pathType!=null&&Object.hasOwnProperty.call(g,"pathType")&&S.uint32(56).int32(g.pathType),g.recv!=null&&g.recv.length)for(let u=0;u<g.recv.length;++u)r.slack.calls.analytics.RecvMedia.encode(g.recv[u],S.uint32(66).fork()).ldelim();if(g.send!=null&&g.send.length)for(let u=0;u<g.send.length;++u)r.slack.calls.analytics.SendMedia.encode(g.send[u],S.uint32(74).fork()).ldelim();return g.clientTime!=null&&Object.hasOwnProperty.call(g,"clientTime")&&S.uint32(80).uint64(g.clientTime),g.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(g,"availableIncomingBitrate")&&S.uint32(88).uint64(g.availableIncomingBitrate),g.appMetrics!=null&&Object.hasOwnProperty.call(g,"appMetrics")&&r.slack.calls.analytics.AppMetrics.encode(g.appMetrics,S.uint32(98).fork()).ldelim(),S},"encode"),o.encodeDelimited=s(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=s(function(g,S){g instanceof m||(g=m.create(g));let u=S===void 0?g.len:g.pos+S,v=new r.slack.calls.analytics.Report;for(;g.pos<u;){let y=g.uint32();switch(y>>>3){case 1:{v.totalBytesSent=g.uint64();break}case 2:{v.totalBytesReceived=g.uint64();break}case 3:{v.totalRoundTripTime=g.double();break}case 4:{v.currentRoundTripTime=g.double();break}case 5:{v.availableOutgoingBitrate=g.uint64();break}case 6:{v.protocol=g.int32();break}case 7:{v.pathType=g.int32();break}case 8:{v.recv&&v.recv.length||(v.recv=[]),v.recv.push(r.slack.calls.analytics.RecvMedia.decode(g,g.uint32()));break}case 9:{v.send&&v.send.length||(v.send=[]),v.send.push(r.slack.calls.analytics.SendMedia.decode(g,g.uint32()));break}case 10:{v.clientTime=g.uint64();break}case 11:{v.availableIncomingBitrate=g.uint64();break}case 12:{v.appMetrics=r.slack.calls.analytics.AppMetrics.decode(g,g.uint32());break}default:g.skipType(y&7);break}}return v},"decode"),o.decodeDelimited=s(function(g){return g instanceof m||(g=new m(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=s(function(g){if(typeof g!="object"||g===null)return"object expected";if(g.totalBytesSent!=null&&g.hasOwnProperty("totalBytesSent")&&!a.isInteger(g.totalBytesSent)&&!(g.totalBytesSent&&a.isInteger(g.totalBytesSent.low)&&a.isInteger(g.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(g.totalBytesReceived!=null&&g.hasOwnProperty("totalBytesReceived")&&!a.isInteger(g.totalBytesReceived)&&!(g.totalBytesReceived&&a.isInteger(g.totalBytesReceived.low)&&a.isInteger(g.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(g.totalRoundTripTime!=null&&g.hasOwnProperty("totalRoundTripTime")&&typeof g.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(g.currentRoundTripTime!=null&&g.hasOwnProperty("currentRoundTripTime")&&typeof g.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(g.availableOutgoingBitrate!=null&&g.hasOwnProperty("availableOutgoingBitrate")&&!a.isInteger(g.availableOutgoingBitrate)&&!(g.availableOutgoingBitrate&&a.isInteger(g.availableOutgoingBitrate.low)&&a.isInteger(g.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(g.protocol!=null&&g.hasOwnProperty("protocol"))switch(g.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(g.pathType!=null&&g.hasOwnProperty("pathType"))switch(g.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(g.recv!=null&&g.hasOwnProperty("recv")){if(!Array.isArray(g.recv))return"recv: array expected";for(let S=0;S<g.recv.length;++S){let u=r.slack.calls.analytics.RecvMedia.verify(g.recv[S]);if(u)return"recv."+u}}if(g.send!=null&&g.hasOwnProperty("send")){if(!Array.isArray(g.send))return"send: array expected";for(let S=0;S<g.send.length;++S){let u=r.slack.calls.analytics.SendMedia.verify(g.send[S]);if(u)return"send."+u}}if(g.clientTime!=null&&g.hasOwnProperty("clientTime")&&!a.isInteger(g.clientTime)&&!(g.clientTime&&a.isInteger(g.clientTime.low)&&a.isInteger(g.clientTime.high)))return"clientTime: integer|Long expected";if(g.availableIncomingBitrate!=null&&g.hasOwnProperty("availableIncomingBitrate")&&!a.isInteger(g.availableIncomingBitrate)&&!(g.availableIncomingBitrate&&a.isInteger(g.availableIncomingBitrate.low)&&a.isInteger(g.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(g.appMetrics!=null&&g.hasOwnProperty("appMetrics")){let S=r.slack.calls.analytics.AppMetrics.verify(g.appMetrics);if(S)return"appMetrics."+S}return null},"verify"),o.fromObject=s(function(g){if(g instanceof r.slack.calls.analytics.Report)return g;let S=new r.slack.calls.analytics.Report;switch(g.totalBytesSent!=null&&(a.Long?(S.totalBytesSent=a.Long.fromValue(g.totalBytesSent)).unsigned=!0:typeof g.totalBytesSent=="string"?S.totalBytesSent=parseInt(g.totalBytesSent,10):typeof g.totalBytesSent=="number"?S.totalBytesSent=g.totalBytesSent:typeof g.totalBytesSent=="object"&&(S.totalBytesSent=new a.LongBits(g.totalBytesSent.low>>>0,g.totalBytesSent.high>>>0).toNumber(!0))),g.totalBytesReceived!=null&&(a.Long?(S.totalBytesReceived=a.Long.fromValue(g.totalBytesReceived)).unsigned=!0:typeof g.totalBytesReceived=="string"?S.totalBytesReceived=parseInt(g.totalBytesReceived,10):typeof g.totalBytesReceived=="number"?S.totalBytesReceived=g.totalBytesReceived:typeof g.totalBytesReceived=="object"&&(S.totalBytesReceived=new a.LongBits(g.totalBytesReceived.low>>>0,g.totalBytesReceived.high>>>0).toNumber(!0))),g.totalRoundTripTime!=null&&(S.totalRoundTripTime=Number(g.totalRoundTripTime)),g.currentRoundTripTime!=null&&(S.currentRoundTripTime=Number(g.currentRoundTripTime)),g.availableOutgoingBitrate!=null&&(a.Long?(S.availableOutgoingBitrate=a.Long.fromValue(g.availableOutgoingBitrate)).unsigned=!0:typeof g.availableOutgoingBitrate=="string"?S.availableOutgoingBitrate=parseInt(g.availableOutgoingBitrate,10):typeof g.availableOutgoingBitrate=="number"?S.availableOutgoingBitrate=g.availableOutgoingBitrate:typeof g.availableOutgoingBitrate=="object"&&(S.availableOutgoingBitrate=new a.LongBits(g.availableOutgoingBitrate.low>>>0,g.availableOutgoingBitrate.high>>>0).toNumber(!0))),g.protocol){default:if(typeof g.protocol=="number"){S.protocol=g.protocol;break}break;case"UDP":case 0:S.protocol=0;break;case"TCP":case 1:S.protocol=1;break}switch(g.pathType){default:if(typeof g.pathType=="number"){S.pathType=g.pathType;break}break;case"DIRECT":case 0:S.pathType=0;break;case"RELAY":case 1:S.pathType=1;break}if(g.recv){if(!Array.isArray(g.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");S.recv=[];for(let u=0;u<g.recv.length;++u){if(typeof g.recv[u]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");S.recv[u]=r.slack.calls.analytics.RecvMedia.fromObject(g.recv[u])}}if(g.send){if(!Array.isArray(g.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");S.send=[];for(let u=0;u<g.send.length;++u){if(typeof g.send[u]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");S.send[u]=r.slack.calls.analytics.SendMedia.fromObject(g.send[u])}}if(g.clientTime!=null&&(a.Long?(S.clientTime=a.Long.fromValue(g.clientTime)).unsigned=!0:typeof g.clientTime=="string"?S.clientTime=parseInt(g.clientTime,10):typeof g.clientTime=="number"?S.clientTime=g.clientTime:typeof g.clientTime=="object"&&(S.clientTime=new a.LongBits(g.clientTime.low>>>0,g.clientTime.high>>>0).toNumber(!0))),g.availableIncomingBitrate!=null&&(a.Long?(S.availableIncomingBitrate=a.Long.fromValue(g.availableIncomingBitrate)).unsigned=!0:typeof g.availableIncomingBitrate=="string"?S.availableIncomingBitrate=parseInt(g.availableIncomingBitrate,10):typeof g.availableIncomingBitrate=="number"?S.availableIncomingBitrate=g.availableIncomingBitrate:typeof g.availableIncomingBitrate=="object"&&(S.availableIncomingBitrate=new a.LongBits(g.availableIncomingBitrate.low>>>0,g.availableIncomingBitrate.high>>>0).toNumber(!0))),g.appMetrics!=null){if(typeof g.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");S.appMetrics=r.slack.calls.analytics.AppMetrics.fromObject(g.appMetrics)}return S},"fromObject"),o.toObject=s(function(g,S){S||(S={});let u={};if((S.arrays||S.defaults)&&(u.recv=[],u.send=[]),S.defaults){if(a.Long){let v=new a.Long(0,0,!0);u.totalBytesSent=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.totalBytesSent=S.longs===String?"0":0;if(a.Long){let v=new a.Long(0,0,!0);u.totalBytesReceived=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.totalBytesReceived=S.longs===String?"0":0;if(u.totalRoundTripTime=0,u.currentRoundTripTime=0,a.Long){let v=new a.Long(0,0,!0);u.availableOutgoingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.availableOutgoingBitrate=S.longs===String?"0":0;if(u.protocol=S.enums===String?"UDP":0,u.pathType=S.enums===String?"DIRECT":0,a.Long){let v=new a.Long(0,0,!0);u.clientTime=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.clientTime=S.longs===String?"0":0;if(a.Long){let v=new a.Long(0,0,!0);u.availableIncomingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.availableIncomingBitrate=S.longs===String?"0":0;u.appMetrics=null}if(g.totalBytesSent!=null&&g.hasOwnProperty("totalBytesSent")&&(typeof g.totalBytesSent=="number"?u.totalBytesSent=S.longs===String?String(g.totalBytesSent):g.totalBytesSent:u.totalBytesSent=S.longs===String?a.Long.prototype.toString.call(g.totalBytesSent):S.longs===Number?new a.LongBits(g.totalBytesSent.low>>>0,g.totalBytesSent.high>>>0).toNumber(!0):g.totalBytesSent),g.totalBytesReceived!=null&&g.hasOwnProperty("totalBytesReceived")&&(typeof g.totalBytesReceived=="number"?u.totalBytesReceived=S.longs===String?String(g.totalBytesReceived):g.totalBytesReceived:u.totalBytesReceived=S.longs===String?a.Long.prototype.toString.call(g.totalBytesReceived):S.longs===Number?new a.LongBits(g.totalBytesReceived.low>>>0,g.totalBytesReceived.high>>>0).toNumber(!0):g.totalBytesReceived),g.totalRoundTripTime!=null&&g.hasOwnProperty("totalRoundTripTime")&&(u.totalRoundTripTime=S.json&&!isFinite(g.totalRoundTripTime)?String(g.totalRoundTripTime):g.totalRoundTripTime),g.currentRoundTripTime!=null&&g.hasOwnProperty("currentRoundTripTime")&&(u.currentRoundTripTime=S.json&&!isFinite(g.currentRoundTripTime)?String(g.currentRoundTripTime):g.currentRoundTripTime),g.availableOutgoingBitrate!=null&&g.hasOwnProperty("availableOutgoingBitrate")&&(typeof g.availableOutgoingBitrate=="number"?u.availableOutgoingBitrate=S.longs===String?String(g.availableOutgoingBitrate):g.availableOutgoingBitrate:u.availableOutgoingBitrate=S.longs===String?a.Long.prototype.toString.call(g.availableOutgoingBitrate):S.longs===Number?new a.LongBits(g.availableOutgoingBitrate.low>>>0,g.availableOutgoingBitrate.high>>>0).toNumber(!0):g.availableOutgoingBitrate),g.protocol!=null&&g.hasOwnProperty("protocol")&&(u.protocol=S.enums===String?r.slack.calls.analytics.Protocol[g.protocol]===void 0?g.protocol:r.slack.calls.analytics.Protocol[g.protocol]:g.protocol),g.pathType!=null&&g.hasOwnProperty("pathType")&&(u.pathType=S.enums===String?r.slack.calls.analytics.PathType[g.pathType]===void 0?g.pathType:r.slack.calls.analytics.PathType[g.pathType]:g.pathType),g.recv&&g.recv.length){u.recv=[];for(let v=0;v<g.recv.length;++v)u.recv[v]=r.slack.calls.analytics.RecvMedia.toObject(g.recv[v],S)}if(g.send&&g.send.length){u.send=[];for(let v=0;v<g.send.length;++v)u.send[v]=r.slack.calls.analytics.SendMedia.toObject(g.send[v],S)}return g.clientTime!=null&&g.hasOwnProperty("clientTime")&&(typeof g.clientTime=="number"?u.clientTime=S.longs===String?String(g.clientTime):g.clientTime:u.clientTime=S.longs===String?a.Long.prototype.toString.call(g.clientTime):S.longs===Number?new a.LongBits(g.clientTime.low>>>0,g.clientTime.high>>>0).toNumber(!0):g.clientTime),g.availableIncomingBitrate!=null&&g.hasOwnProperty("availableIncomingBitrate")&&(typeof g.availableIncomingBitrate=="number"?u.availableIncomingBitrate=S.longs===String?String(g.availableIncomingBitrate):g.availableIncomingBitrate:u.availableIncomingBitrate=S.longs===String?a.Long.prototype.toString.call(g.availableIncomingBitrate):S.longs===Number?new a.LongBits(g.availableIncomingBitrate.low>>>0,g.availableIncomingBitrate.high>>>0).toNumber(!0):g.availableIncomingBitrate),g.appMetrics!=null&&g.hasOwnProperty("appMetrics")&&(u.appMetrics=r.slack.calls.analytics.AppMetrics.toObject(g.appMetrics,S)),u},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.Report"},"getTypeUrl"),o}(),i}(),t}(),e})()},9240258658:(x,l,d)=>{"use strict";d.d(l,{Y:()=>n});var c=d(4224187311),h=d.n(c);const m=c.Reader,p=c.Writer,a=c.util,r=c.roots.default||(c.roots.default={}),n=r.PeerMessage=(()=>{function e(t){if(t)for(let i=Object.keys(t),o=0;o<i.length;++o)t[i[o]]!=null&&(this[i[o]]=t[i[o]])}return s(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.prototype.recordingStartNotification=null,e.create=s(function(i){return new e(i)},"create"),e.encode=s(function(i,o){return o||(o=p.create()),i.reacji!=null&&Object.hasOwnProperty.call(i,"reacji")&&r.PeerMessage.Reacji.encode(i.reacji,o.uint32(10).fork()).ldelim(),i.draw!=null&&Object.hasOwnProperty.call(i,"draw")&&r.PeerMessage.Draw.encode(i.draw,o.uint32(18).fork()).ldelim(),i.fromPeerId!=null&&Object.hasOwnProperty.call(i,"fromPeerId")&&o.uint32(24).uint64(i.fromPeerId),i.fromPeerIdString!=null&&Object.hasOwnProperty.call(i,"fromPeerIdString")&&o.uint32(34).string(i.fromPeerIdString),i.capabilities!=null&&Object.hasOwnProperty.call(i,"capabilities")&&r.PeerMessage.Capabilities.encode(i.capabilities,o.uint32(42).fork()).ldelim(),i.background!=null&&Object.hasOwnProperty.call(i,"background")&&r.PeerMessage.Background.encode(i.background,o.uint32(50).fork()).ldelim(),i.muteRequest!=null&&Object.hasOwnProperty.call(i,"muteRequest")&&r.PeerMessage.MuteRequest.encode(i.muteRequest,o.uint32(82).fork()).ldelim(),i.awarenessBroadcast!=null&&Object.hasOwnProperty.call(i,"awarenessBroadcast")&&r.PeerMessage.AwarenessBroadcast.encode(i.awarenessBroadcast,o.uint32(90).fork()).ldelim(),i.awarenessQuery!=null&&Object.hasOwnProperty.call(i,"awarenessQuery")&&r.PeerMessage.AwarenessQuery.encode(i.awarenessQuery,o.uint32(98).fork()).ldelim(),i.awarenessClose!=null&&Object.hasOwnProperty.call(i,"awarenessClose")&&r.PeerMessage.AwarenessClose.encode(i.awarenessClose,o.uint32(106).fork()).ldelim(),i.jukeboxRequest!=null&&Object.hasOwnProperty.call(i,"jukeboxRequest")&&r.PeerMessage.JukeboxRequest.encode(i.jukeboxRequest,o.uint32(114).fork()).ldelim(),i.contentShareDetails!=null&&Object.hasOwnProperty.call(i,"contentShareDetails")&&r.PeerMessage.ContentShareDetails.encode(i.contentShareDetails,o.uint32(122).fork()).ldelim(),i.recordingStartNotification!=null&&Object.hasOwnProperty.call(i,"recordingStartNotification")&&r.PeerMessage.RecordingStartNotification.encode(i.recordingStartNotification,o.uint32(130).fork()).ldelim(),o},"encode"),e.encodeDelimited=s(function(i,o){return this.encode(i,o).ldelim()},"encodeDelimited"),e.decode=s(function(i,o){i instanceof m||(i=m.create(i));let f=o===void 0?i.len:i.pos+o,g=new r.PeerMessage;for(;i.pos<f;){let S=i.uint32();switch(S>>>3){case 1:{g.reacji=r.PeerMessage.Reacji.decode(i,i.uint32());break}case 2:{g.draw=r.PeerMessage.Draw.decode(i,i.uint32());break}case 3:{g.fromPeerId=i.uint64();break}case 4:{g.fromPeerIdString=i.string();break}case 5:{g.capabilities=r.PeerMessage.Capabilities.decode(i,i.uint32());break}case 6:{g.background=r.PeerMessage.Background.decode(i,i.uint32());break}case 10:{g.muteRequest=r.PeerMessage.MuteRequest.decode(i,i.uint32());break}case 11:{g.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.decode(i,i.uint32());break}case 12:{g.awarenessQuery=r.PeerMessage.AwarenessQuery.decode(i,i.uint32());break}case 13:{g.awarenessClose=r.PeerMessage.AwarenessClose.decode(i,i.uint32());break}case 14:{g.jukeboxRequest=r.PeerMessage.JukeboxRequest.decode(i,i.uint32());break}case 15:{g.contentShareDetails=r.PeerMessage.ContentShareDetails.decode(i,i.uint32());break}case 16:{g.recordingStartNotification=r.PeerMessage.RecordingStartNotification.decode(i,i.uint32());break}default:i.skipType(S&7);break}}return g},"decode"),e.decodeDelimited=s(function(i){return i instanceof m||(i=new m(i)),this.decode(i,i.uint32())},"decodeDelimited"),e.verify=s(function(i){if(typeof i!="object"||i===null)return"object expected";if(i.reacji!=null&&i.hasOwnProperty("reacji")){let o=r.PeerMessage.Reacji.verify(i.reacji);if(o)return"reacji."+o}if(i.draw!=null&&i.hasOwnProperty("draw")){let o=r.PeerMessage.Draw.verify(i.draw);if(o)return"draw."+o}if(i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&!a.isInteger(i.fromPeerId)&&!(i.fromPeerId&&a.isInteger(i.fromPeerId.low)&&a.isInteger(i.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&!a.isString(i.fromPeerIdString))return"fromPeerIdString: string expected";if(i.capabilities!=null&&i.hasOwnProperty("capabilities")){let o=r.PeerMessage.Capabilities.verify(i.capabilities);if(o)return"capabilities."+o}if(i.background!=null&&i.hasOwnProperty("background")){let o=r.PeerMessage.Background.verify(i.background);if(o)return"background."+o}if(i.muteRequest!=null&&i.hasOwnProperty("muteRequest")){let o=r.PeerMessage.MuteRequest.verify(i.muteRequest);if(o)return"muteRequest."+o}if(i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")){let o=r.PeerMessage.AwarenessBroadcast.verify(i.awarenessBroadcast);if(o)return"awarenessBroadcast."+o}if(i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")){let o=r.PeerMessage.AwarenessQuery.verify(i.awarenessQuery);if(o)return"awarenessQuery."+o}if(i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")){let o=r.PeerMessage.AwarenessClose.verify(i.awarenessClose);if(o)return"awarenessClose."+o}if(i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")){let o=r.PeerMessage.JukeboxRequest.verify(i.jukeboxRequest);if(o)return"jukeboxRequest."+o}if(i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")){let o=r.PeerMessage.ContentShareDetails.verify(i.contentShareDetails);if(o)return"contentShareDetails."+o}if(i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")){let o=r.PeerMessage.RecordingStartNotification.verify(i.recordingStartNotification);if(o)return"recordingStartNotification."+o}return null},"verify"),e.fromObject=s(function(i){if(i instanceof r.PeerMessage)return i;let o=new r.PeerMessage;if(i.reacji!=null){if(typeof i.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");o.reacji=r.PeerMessage.Reacji.fromObject(i.reacji)}if(i.draw!=null){if(typeof i.draw!="object")throw TypeError(".PeerMessage.draw: object expected");o.draw=r.PeerMessage.Draw.fromObject(i.draw)}if(i.fromPeerId!=null&&(a.Long?(o.fromPeerId=a.Long.fromValue(i.fromPeerId)).unsigned=!0:typeof i.fromPeerId=="string"?o.fromPeerId=parseInt(i.fromPeerId,10):typeof i.fromPeerId=="number"?o.fromPeerId=i.fromPeerId:typeof i.fromPeerId=="object"&&(o.fromPeerId=new a.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0))),i.fromPeerIdString!=null&&(o.fromPeerIdString=String(i.fromPeerIdString)),i.capabilities!=null){if(typeof i.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");o.capabilities=r.PeerMessage.Capabilities.fromObject(i.capabilities)}if(i.background!=null){if(typeof i.background!="object")throw TypeError(".PeerMessage.background: object expected");o.background=r.PeerMessage.Background.fromObject(i.background)}if(i.muteRequest!=null){if(typeof i.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");o.muteRequest=r.PeerMessage.MuteRequest.fromObject(i.muteRequest)}if(i.awarenessBroadcast!=null){if(typeof i.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");o.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.fromObject(i.awarenessBroadcast)}if(i.awarenessQuery!=null){if(typeof i.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");o.awarenessQuery=r.PeerMessage.AwarenessQuery.fromObject(i.awarenessQuery)}if(i.awarenessClose!=null){if(typeof i.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");o.awarenessClose=r.PeerMessage.AwarenessClose.fromObject(i.awarenessClose)}if(i.jukeboxRequest!=null){if(typeof i.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");o.jukeboxRequest=r.PeerMessage.JukeboxRequest.fromObject(i.jukeboxRequest)}if(i.contentShareDetails!=null){if(typeof i.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");o.contentShareDetails=r.PeerMessage.ContentShareDetails.fromObject(i.contentShareDetails)}if(i.recordingStartNotification!=null){if(typeof i.recordingStartNotification!="object")throw TypeError(".PeerMessage.recordingStartNotification: object expected");o.recordingStartNotification=r.PeerMessage.RecordingStartNotification.fromObject(i.recordingStartNotification)}return o},"fromObject"),e.toObject=s(function(i,o){o||(o={});let f={};if(o.defaults){if(f.reacji=null,f.draw=null,a.Long){let g=new a.Long(0,0,!0);f.fromPeerId=o.longs===String?g.toString():o.longs===Number?g.toNumber():g}else f.fromPeerId=o.longs===String?"0":0;f.fromPeerIdString="",f.capabilities=null,f.background=null,f.muteRequest=null,f.awarenessBroadcast=null,f.awarenessQuery=null,f.awarenessClose=null,f.jukeboxRequest=null,f.contentShareDetails=null,f.recordingStartNotification=null}return i.reacji!=null&&i.hasOwnProperty("reacji")&&(f.reacji=r.PeerMessage.Reacji.toObject(i.reacji,o)),i.draw!=null&&i.hasOwnProperty("draw")&&(f.draw=r.PeerMessage.Draw.toObject(i.draw,o)),i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&(typeof i.fromPeerId=="number"?f.fromPeerId=o.longs===String?String(i.fromPeerId):i.fromPeerId:f.fromPeerId=o.longs===String?a.Long.prototype.toString.call(i.fromPeerId):o.longs===Number?new a.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0):i.fromPeerId),i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&(f.fromPeerIdString=i.fromPeerIdString),i.capabilities!=null&&i.hasOwnProperty("capabilities")&&(f.capabilities=r.PeerMessage.Capabilities.toObject(i.capabilities,o)),i.background!=null&&i.hasOwnProperty("background")&&(f.background=r.PeerMessage.Background.toObject(i.background,o)),i.muteRequest!=null&&i.hasOwnProperty("muteRequest")&&(f.muteRequest=r.PeerMessage.MuteRequest.toObject(i.muteRequest,o)),i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")&&(f.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.toObject(i.awarenessBroadcast,o)),i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")&&(f.awarenessQuery=r.PeerMessage.AwarenessQuery.toObject(i.awarenessQuery,o)),i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")&&(f.awarenessClose=r.PeerMessage.AwarenessClose.toObject(i.awarenessClose,o)),i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")&&(f.jukeboxRequest=r.PeerMessage.JukeboxRequest.toObject(i.jukeboxRequest,o)),i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")&&(f.contentShareDetails=r.PeerMessage.ContentShareDetails.toObject(i.contentShareDetails,o)),i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")&&(f.recordingStartNotification=r.PeerMessage.RecordingStartNotification.toObject(i.recordingStartNotification,o)),f},"toObject"),e.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),e.getTypeUrl=s(function(i){return i===void 0&&(i="type.googleapis.com"),i+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.prototype.emojiUrl="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.emoji!=null&&Object.hasOwnProperty.call(o,"emoji")&&f.uint32(10).string(o.emoji),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(16).int32(o.type),o.emojiUrl!=null&&Object.hasOwnProperty.call(o,"emojiUrl")&&f.uint32(26).string(o.emojiUrl),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.Reacji;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.emoji=o.string();break}case 2:{S.type=o.int32();break}case 3:{S.emojiUrl=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.emoji!=null&&o.hasOwnProperty("emoji")&&!a.isString(o.emoji))return"emoji: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}return o.emojiUrl!=null&&o.hasOwnProperty("emojiUrl")&&!a.isString(o.emojiUrl)?"emojiUrl: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Reacji)return o;let f=new r.PeerMessage.Reacji;switch(o.emoji!=null&&(f.emoji=String(o.emoji)),o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"Unknown_reaction_type":case 0:f.type=0;break;case"Effect":case 1:f.type=1;break;case"Standard":case 2:f.type=2;break;case"Gif":case 3:f.type=3;break}return o.emojiUrl!=null&&(f.emojiUrl=String(o.emojiUrl)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.emoji="",g.type=f.enums===String?"Unknown_reaction_type":0,g.emojiUrl=""),o.emoji!=null&&o.hasOwnProperty("emoji")&&(g.emoji=o.emoji),o.type!=null&&o.hasOwnProperty("type")&&(g.type=f.enums===String?r.PeerMessage.Reacji.Type[o.type]===void 0?o.type:r.PeerMessage.Reacji.Type[o.type]:o.type),o.emojiUrl!=null&&o.hasOwnProperty("emojiUrl")&&(g.emojiUrl=o.emojiUrl),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="Unknown_reaction_type"]=0,o[i[1]="Effect"]=1,o[i[2]="Standard"]=2,o[i[3]="Gif"]=3,o}(),t}(),e.Point=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&f.uint32(9).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&f.uint32(17).double(o.y),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.Point;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.x=o.double();break}case 2:{S.y=o.double();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Point)return o;let f=new r.PeerMessage.Point;return o.x!=null&&(f.x=Number(o.x)),o.y!=null&&(f.y=Number(o.y)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.x=0,g.y=0),o.x!=null&&o.hasOwnProperty("x")&&(g.x=f.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(g.y=f.json&&!isFinite(o.y)?String(o.y):o.y),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.a!=null&&Object.hasOwnProperty.call(o,"a")&&r.PeerMessage.Point.encode(o.a,f.uint32(10).fork()).ldelim(),o.b!=null&&Object.hasOwnProperty.call(o,"b")&&r.PeerMessage.Point.encode(o.b,f.uint32(18).fork()).ldelim(),o.c!=null&&Object.hasOwnProperty.call(o,"c")&&r.PeerMessage.Point.encode(o.c,f.uint32(26).fork()).ldelim(),o.d!=null&&Object.hasOwnProperty.call(o,"d")&&r.PeerMessage.Point.encode(o.d,f.uint32(34).fork()).ldelim(),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.Segment;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.a=r.PeerMessage.Point.decode(o,o.uint32());break}case 2:{S.b=r.PeerMessage.Point.decode(o,o.uint32());break}case 3:{S.c=r.PeerMessage.Point.decode(o,o.uint32());break}case 4:{S.d=r.PeerMessage.Point.decode(o,o.uint32());break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.a!=null&&o.hasOwnProperty("a")){let f=r.PeerMessage.Point.verify(o.a);if(f)return"a."+f}if(o.b!=null&&o.hasOwnProperty("b")){let f=r.PeerMessage.Point.verify(o.b);if(f)return"b."+f}if(o.c!=null&&o.hasOwnProperty("c")){let f=r.PeerMessage.Point.verify(o.c);if(f)return"c."+f}if(o.d!=null&&o.hasOwnProperty("d")){let f=r.PeerMessage.Point.verify(o.d);if(f)return"d."+f}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Segment)return o;let f=new r.PeerMessage.Segment;if(o.a!=null){if(typeof o.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");f.a=r.PeerMessage.Point.fromObject(o.a)}if(o.b!=null){if(typeof o.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");f.b=r.PeerMessage.Point.fromObject(o.b)}if(o.c!=null){if(typeof o.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");f.c=r.PeerMessage.Point.fromObject(o.c)}if(o.d!=null){if(typeof o.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");f.d=r.PeerMessage.Point.fromObject(o.d)}return f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.a=null,g.b=null,g.c=null,g.d=null),o.a!=null&&o.hasOwnProperty("a")&&(g.a=r.PeerMessage.Point.toObject(o.a,f)),o.b!=null&&o.hasOwnProperty("b")&&(g.b=r.PeerMessage.Point.toObject(o.b,f)),o.c!=null&&o.hasOwnProperty("c")&&(g.c=r.PeerMessage.Point.toObject(o.c,f)),o.d!=null&&o.hasOwnProperty("d")&&(g.d=r.PeerMessage.Point.toObject(o.d,f)),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(8).int32(o.type),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&r.PeerMessage.Segment.encode(o.segment,f.uint32(18).fork()).ldelim(),o.hue!=null&&Object.hasOwnProperty.call(o,"hue")&&f.uint32(24).int32(o.hue),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&f.uint32(34).string(o.itemId),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&f.uint32(41).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&f.uint32(49).double(o.y),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.Draw;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.type=o.int32();break}case 2:{S.segment=r.PeerMessage.Segment.decode(o,o.uint32());break}case 3:{S.hue=o.int32();break}case 4:{S.itemId=o.string();break}case 5:{S.x=o.double();break}case 6:{S.y=o.double();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.segment!=null&&o.hasOwnProperty("segment")){let f=r.PeerMessage.Segment.verify(o.segment);if(f)return"segment."+f}return o.hue!=null&&o.hasOwnProperty("hue")&&!a.isInteger(o.hue)?"hue: integer expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Draw)return o;let f=new r.PeerMessage.Draw;switch(o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:f.type=0;break;case"NEW":case 1:f.type=1;break;case"EDIT":case 2:f.type=2;break;case"END":case 3:f.type=3;break;case"CHANGE_HUE":case 4:f.type=4;break;case"POSITION":case 5:f.type=5;break}if(o.segment!=null){if(typeof o.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");f.segment=r.PeerMessage.Segment.fromObject(o.segment)}return o.hue!=null&&(f.hue=o.hue|0),o.itemId!=null&&(f.itemId=String(o.itemId)),o.x!=null&&(f.x=Number(o.x)),o.y!=null&&(f.y=Number(o.y)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.type=f.enums===String?"UNKNOWN_DRAW_TYPE":0,g.segment=null,g.hue=0,g.itemId="",g.x=0,g.y=0),o.type!=null&&o.hasOwnProperty("type")&&(g.type=f.enums===String?r.PeerMessage.Draw.Type[o.type]===void 0?o.type:r.PeerMessage.Draw.Type[o.type]:o.type),o.segment!=null&&o.hasOwnProperty("segment")&&(g.segment=r.PeerMessage.Segment.toObject(o.segment,f)),o.hue!=null&&o.hasOwnProperty("hue")&&(g.hue=o.hue),o.itemId!=null&&o.hasOwnProperty("itemId")&&(g.itemId=o.itemId),o.x!=null&&o.hasOwnProperty("x")&&(g.x=f.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(g.y=f.json&&!isFinite(o.y)?String(o.y):o.y),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_DRAW_TYPE"]=0,o[i[1]="NEW"]=1,o[i[2]="EDIT"]=2,o[i[3]="END"]=3,o[i[4]="CHANGE_HUE"]=4,o[i[5]="POSITION"]=5,o}(),t}(),e.Capabilities=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.isDrawEnabled!=null&&Object.hasOwnProperty.call(o,"isDrawEnabled")&&f.uint32(8).bool(o.isDrawEnabled),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.Capabilities;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.isDrawEnabled=o.bool();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&typeof o.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Capabilities)return o;let f=new r.PeerMessage.Capabilities;return o.isDrawEnabled!=null&&(f.isDrawEnabled=Boolean(o.isDrawEnabled)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.isDrawEnabled=!1),o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&(g.isDrawEnabled=o.isDrawEnabled),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.sourceType!=null&&Object.hasOwnProperty.call(o,"sourceType")&&f.uint32(10).string(o.sourceType),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&f.uint32(18).string(o.itemId),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.ContentShareDetails;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.sourceType=o.string();break}case 2:{S.itemId=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.sourceType!=null&&o.hasOwnProperty("sourceType")&&!a.isString(o.sourceType)?"sourceType: string expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.ContentShareDetails)return o;let f=new r.PeerMessage.ContentShareDetails;return o.sourceType!=null&&(f.sourceType=String(o.sourceType)),o.itemId!=null&&(f.itemId=String(o.itemId)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.sourceType="",g.itemId=""),o.sourceType!=null&&o.hasOwnProperty("sourceType")&&(g.sourceType=o.sourceType),o.itemId!=null&&o.hasOwnProperty("itemId")&&(g.itemId=o.itemId),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"Background"),t.prototype.url="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.url!=null&&Object.hasOwnProperty.call(o,"url")&&f.uint32(10).string(o.url),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.Background;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.url=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.url!=null&&o.hasOwnProperty("url")&&!a.isString(o.url)?"url: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Background)return o;let f=new r.PeerMessage.Background;return o.url!=null&&(f.url=String(o.url)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.url=""),o.url!=null&&o.hasOwnProperty("url")&&(g.url=o.url),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"MuteRequest"),t.prototype.peerId="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.peerId!=null&&Object.hasOwnProperty.call(o,"peerId")&&f.uint32(10).string(o.peerId),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.MuteRequest;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.peerId=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.peerId!=null&&o.hasOwnProperty("peerId")&&!a.isString(o.peerId)?"peerId: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.MuteRequest)return o;let f=new r.PeerMessage.MuteRequest;return o.peerId!=null&&(f.peerId=String(o.peerId)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.peerId=""),o.peerId!=null&&o.hasOwnProperty("peerId")&&(g.peerId=o.peerId),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.songKey!=null&&Object.hasOwnProperty.call(o,"songKey")&&f.uint32(10).string(o.songKey),o.stop!=null&&Object.hasOwnProperty.call(o,"stop")&&f.uint32(16).bool(o.stop),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.JukeboxRequest;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.songKey=o.string();break}case 2:{S.stop=o.bool();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.songKey!=null&&o.hasOwnProperty("songKey")&&!a.isString(o.songKey)?"songKey: string expected":o.stop!=null&&o.hasOwnProperty("stop")&&typeof o.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.JukeboxRequest)return o;let f=new r.PeerMessage.JukeboxRequest;return o.songKey!=null&&(f.songKey=String(o.songKey)),o.stop!=null&&(f.stop=Boolean(o.stop)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.songKey="",g.stop=!1),o.songKey!=null&&o.hasOwnProperty("songKey")&&(g.songKey=o.songKey),o.stop!=null&&o.hasOwnProperty("stop")&&(g.stop=o.stop),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.RecordingStartNotification=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"RecordingStartNotification"),t.prototype.type=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(8).int32(o.type),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.RecordingStartNotification;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.type=o.int32();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:break}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.RecordingStartNotification)return o;let f=new r.PeerMessage.RecordingStartNotification;switch(o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"UNKNOWN_TYPE":case 0:f.type=0;break;case"SUMMARY":case 1:f.type=1;break}return f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.type=f.enums===String?"UNKNOWN_TYPE":0),o.type!=null&&o.hasOwnProperty("type")&&(g.type=f.enums===String?r.PeerMessage.RecordingStartNotification.Type[o.type]===void 0?o.type:r.PeerMessage.RecordingStartNotification.Type[o.type]:o.type),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.RecordingStartNotification"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_TYPE"]=0,o[i[1]="SUMMARY"]=1,o}(),t}(),e.AwarenessPayload=function(){function t(o){if(o)for(let f=Object.keys(o),g=0;g<f.length;++g)o[f[g]]!=null&&(this[f[g]]=o[f[g]])}s(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let i;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:a.oneOfGetter(i=["fieldTimestampMs"]),set:a.oneOfSetter(i)}),t.create=s(function(f){return new t(f)},"create"),t.encode=s(function(f,g){return g||(g=p.create()),f.fieldName!=null&&Object.hasOwnProperty.call(f,"fieldName")&&g.uint32(10).string(f.fieldName),f.fieldValue!=null&&Object.hasOwnProperty.call(f,"fieldValue")&&g.uint32(18).string(f.fieldValue),f.fieldTimestampMs!=null&&Object.hasOwnProperty.call(f,"fieldTimestampMs")&&g.uint32(24).int64(f.fieldTimestampMs),g},"encode"),t.encodeDelimited=s(function(f,g){return this.encode(f,g).ldelim()},"encodeDelimited"),t.decode=s(function(f,g){f instanceof m||(f=m.create(f));let S=g===void 0?f.len:f.pos+g,u=new r.PeerMessage.AwarenessPayload;for(;f.pos<S;){let v=f.uint32();switch(v>>>3){case 1:{u.fieldName=f.string();break}case 2:{u.fieldValue=f.string();break}case 3:{u.fieldTimestampMs=f.int64();break}default:f.skipType(v&7);break}}return u},"decode"),t.decodeDelimited=s(function(f){return f instanceof m||(f=new m(f)),this.decode(f,f.uint32())},"decodeDelimited"),t.verify=s(function(f){if(typeof f!="object"||f===null)return"object expected";let g={};return f.fieldName!=null&&f.hasOwnProperty("fieldName")&&!a.isString(f.fieldName)?"fieldName: string expected":f.fieldValue!=null&&f.hasOwnProperty("fieldValue")&&!a.isString(f.fieldValue)?"fieldValue: string expected":f.fieldTimestampMs!=null&&f.hasOwnProperty("fieldTimestampMs")&&(g._fieldTimestampMs=1,!a.isInteger(f.fieldTimestampMs)&&!(f.fieldTimestampMs&&a.isInteger(f.fieldTimestampMs.low)&&a.isInteger(f.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=s(function(f){if(f instanceof r.PeerMessage.AwarenessPayload)return f;let g=new r.PeerMessage.AwarenessPayload;return f.fieldName!=null&&(g.fieldName=String(f.fieldName)),f.fieldValue!=null&&(g.fieldValue=String(f.fieldValue)),f.fieldTimestampMs!=null&&(a.Long?(g.fieldTimestampMs=a.Long.fromValue(f.fieldTimestampMs)).unsigned=!1:typeof f.fieldTimestampMs=="string"?g.fieldTimestampMs=parseInt(f.fieldTimestampMs,10):typeof f.fieldTimestampMs=="number"?g.fieldTimestampMs=f.fieldTimestampMs:typeof f.fieldTimestampMs=="object"&&(g.fieldTimestampMs=new a.LongBits(f.fieldTimestampMs.low>>>0,f.fieldTimestampMs.high>>>0).toNumber())),g},"fromObject"),t.toObject=s(function(f,g){g||(g={});let S={};return g.defaults&&(S.fieldName="",S.fieldValue=""),f.fieldName!=null&&f.hasOwnProperty("fieldName")&&(S.fieldName=f.fieldName),f.fieldValue!=null&&f.hasOwnProperty("fieldValue")&&(S.fieldValue=f.fieldValue),f.fieldTimestampMs!=null&&f.hasOwnProperty("fieldTimestampMs")&&(typeof f.fieldTimestampMs=="number"?S.fieldTimestampMs=g.longs===String?String(f.fieldTimestampMs):f.fieldTimestampMs:S.fieldTimestampMs=g.longs===String?a.Long.prototype.toString.call(f.fieldTimestampMs):g.longs===Number?new a.LongBits(f.fieldTimestampMs.low>>>0,f.fieldTimestampMs.high>>>0).toNumber():f.fieldTimestampMs,g.oneofs&&(S._fieldTimestampMs="fieldTimestampMs")),S},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(i){if(this.awarenessState=[],i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=a.emptyArray,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){if(f||(f=p.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),o.awarenessState!=null&&o.awarenessState.length)for(let g=0;g<o.awarenessState.length;++g)r.PeerMessage.AwarenessPayload.encode(o.awarenessState[g],f.uint32(26).fork()).ldelim();return f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.AwarenessBroadcast;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}case 3:{S.awarenessState&&S.awarenessState.length||(S.awarenessState=[]),S.awarenessState.push(r.PeerMessage.AwarenessPayload.decode(o,o.uint32()));break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel))return"channel: string expected";if(o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user))return"user: string expected";if(o.awarenessState!=null&&o.hasOwnProperty("awarenessState")){if(!Array.isArray(o.awarenessState))return"awarenessState: array expected";for(let f=0;f<o.awarenessState.length;++f){let g=r.PeerMessage.AwarenessPayload.verify(o.awarenessState[f]);if(g)return"awarenessState."+g}}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessBroadcast)return o;let f=new r.PeerMessage.AwarenessBroadcast;if(o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),o.awarenessState){if(!Array.isArray(o.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");f.awarenessState=[];for(let g=0;g<o.awarenessState.length;++g){if(typeof o.awarenessState[g]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");f.awarenessState[g]=r.PeerMessage.AwarenessPayload.fromObject(o.awarenessState[g])}}return f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};if((f.arrays||f.defaults)&&(g.awarenessState=[]),f.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),o.awarenessState&&o.awarenessState.length){g.awarenessState=[];for(let S=0;S<o.awarenessState.length;++S)g.awarenessState[S]=r.PeerMessage.AwarenessPayload.toObject(o.awarenessState[S],f)}return g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.AwarenessQuery;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessQuery)return o;let f=new r.PeerMessage.AwarenessQuery;return o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(i){if(i)for(let o=Object.keys(i),f=0;f<o.length;++f)i[o[f]]!=null&&(this[o[f]]=i[o[f]])}return s(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,f){return f||(f=p.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),f},"encode"),t.encodeDelimited=s(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=s(function(o,f){o instanceof m||(o=m.create(o));let g=f===void 0?o.len:o.pos+f,S=new r.PeerMessage.AwarenessClose;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessClose)return o;let f=new r.PeerMessage.AwarenessClose;return o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),f},"fromObject"),t.toObject=s(function(o,f){f||(f={});let g={};return f.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),g},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},9648131521:(x,l,d)=>{"use strict";d.d(l,{X:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InvalidCursor:"invalid_cursor",InvalidArguments:"invalid_arguments"},n=(0,m.A)("activity.feed generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"activity.feed",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to activity.feed
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcheractivityFeedFetcher",description:"activity.feed generated fetcher"}},1605540670:(x,l,d)=>{"use strict";d.d(l,{O:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},n=(0,m.A)("connectInvites.list generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"connectInvites.list",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to connectInvites.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},1614054140:(x,l,d)=>{"use strict";d.d(l,{T:()=>r,W:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},n=(0,m.A)("conversations.acceptSharedInvite generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.acceptSharedInvite",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to conversations.acceptSharedInvite
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},6639221719:(x,l,d)=>{"use strict";d.d(l,{U:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={FeatureNotEnabled:"feature_not_enabled",ChannelNotFound:"channel_not_found",ErrorFetchingChannelPrefs:"error_fetching_channel_prefs"},n=(0,m.A)("conversations.listPrefs generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.listPrefs",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to conversations.listPrefs
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsListPrefsFetcher",description:"conversations.listPrefs generated fetcher"}},1783582283:(x,l,d)=>{"use strict";d.d(l,{i:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",FileNotFound:"file_not_found",TabNotFound:"tab_not_found"},n=(0,m.A)("conversations.moveTab generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.moveTab",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to conversations.moveTab
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsMoveTabFetcher",description:"conversations.moveTab generated fetcher"}},4347488242:(x,l,d)=>{"use strict";d.d(l,{D:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found"},n=(0,m.A)("conversations.setProperties generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.setProperties",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to conversations.setProperties
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsSetPropertiesFetcher",description:"conversations.setProperties generated fetcher"}},4349526263:(x,l,d)=>{"use strict";d.d(l,{Sv:()=>r,a0:()=>e,jB:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},n={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",DomainClaimed:"domain_claimed"},e=(0,m.A)("conversations.sharedInviteAcceptanceEligibility generated fetcher",(t,i,o)=>new c.S((f,g)=>{const{reason:S,...u}=o,v=(0,a.VA)(u);t((0,h.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:v,reason:S})).then(y=>{f(y)}).catch(y=>{(0,p.Ay)({getState:i}).error(`API call to conversations.sharedInviteAcceptanceEligibility
						with reason ${S} failed, initiated by generated fetcher`),g(y)})}));e.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},7056498591:(x,l,d)=>{"use strict";d.d(l,{k:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",TabNotFound:"tab_not_found",FileNotFound:"file_not_found",TooManyTabs:"too_many_tabs",TabLabelTooLong:"tab_label_too_long"},n=(0,m.A)("conversations.updateTab generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.updateTab",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to conversations.updateTab
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsUpdateTabFetcher",description:"conversations.updateTab generated fetcher"}},3456937405:(x,l,d)=>{"use strict";d.d(l,{W:()=>r,l:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorLowerCaseNamesOnly:"error_lower_case_names_only",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",FailedToAddEmoji:"failed_to_add_emoji",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},n=(0,m.A)("emoji.add generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"emoji.add",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to emoji.add
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},5216556985:(x,l,d)=>{"use strict";d.d(l,{D:()=>n,G:()=>r});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={FeatureNotEnabled:"feature_not_enabled",InviteNotFound:"invite_not_found",WorkspaceNotFound:"workspace_not_found",OperationNotAllowed:"operation_not_allowed",ExternalWorkspaceLimitReached:"external_workspace_limit_reached",FailedToFetchTermsOfService:"failed_to_fetch_terms_of_service",TermsOfServiceNotAccepted:"terms_of_service_not_accepted",GuestUserNotAllowed:"guest_user_not_allowed",EmailDoesNotMatch:"email_does_not_match",InvalidRecipientTeam:"invalid_recipient_team",DomainClaimed:"domain_claimed",NotPaid:"not_paid"},n=(0,m.A)("externalWorkspaces.invites.accept generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"externalWorkspaces.invites.accept",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to externalWorkspaces.invites.accept
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesAcceptFetcher",description:"externalWorkspaces.invites.accept generated fetcher"}},8485081141:(x,l,d)=>{"use strict";d.d(l,{I:()=>r,l:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InviteNotFound:"invite_not_found",InviteInvalid:"invite_invalid",RateLimited:"rate_limited",InviteUsed:"invite_used",FailedGeneratingInviteOutput:"failed_generating_invite_output"},n=(0,m.A)("externalWorkspaces.invites.info generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"externalWorkspaces.invites.info",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to externalWorkspaces.invites.info
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesInfoFetcher",description:"externalWorkspaces.invites.info generated fetcher"}},8726791251:(x,l,d)=>{"use strict";d.d(l,{I:()=>r});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r=(0,m.A)("help.issues.ticketStats generated fetcher",(n,e,t)=>new c.S((i,o)=>{const{reason:f,...g}=t,S=(0,a.VA)(g);n((0,h.apiCall)({method:"help.issues.ticketStats",args:S,reason:f})).then(u=>{i(u)}).catch(u=>{(0,p.Ay)({getState:e}).error(`API call to help.issues.ticketStats
						with reason ${f} failed, initiated by generated fetcher`),o(u)})}));r.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},930270247:(x,l,d)=>{"use strict";d.d(l,{l:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={},n=(0,m.A)("help.productHelpCard.list generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"help.productHelpCard.list",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to help.productHelpCard.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},138202077:(x,l,d)=>{"use strict";d.d(l,{H:()=>r});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r=(0,m.A)("help.getRecommendedArticles generated fetcher",(n,e,t)=>new c.S((i,o)=>{const{reason:f,...g}=t,S=(0,a.VA)(g);n((0,h.apiCall)({method:"help.getRecommendedArticles",args:S,reason:f})).then(u=>{i(u)}).catch(u=>{(0,p.Ay)({getState:e}).error(`API call to help.getRecommendedArticles
						with reason ${f} failed, initiated by generated fetcher`),o(u)})}));r.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},6936450040:(x,l,d)=>{"use strict";d.d(l,{G:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},n=(0,m.A)("helpdesk.categories generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.categories",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to helpdesk.categories
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},3593297427:(x,l,d)=>{"use strict";d.d(l,{w:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={CouldNotFindArticle:"could_not_find_article"},n=(0,m.A)("helpdesk.getArticle generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.getArticle",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to helpdesk.getArticle
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},8745755260:(x,l,d)=>{"use strict";d.d(l,{h:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={CouldNotFetchSections:"could_not_fetch_sections"},n=(0,m.A)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},9532047472:(x,l,d)=>{"use strict";d.d(l,{a:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},n=(0,m.A)("helpdesk.get generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.get",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to helpdesk.get
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},2694081143:(x,l,d)=>{"use strict";d.d(l,{Q:()=>r,T:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={ListNotFound:"list_not_found",RecordNotFound:"record_not_found",RecordDeleted:"record_deleted",TeamNotFound:"team_not_found",UserNotFound:"user_not_found"},n=(0,m.A)("lists.records.info generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"lists.records.info",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to lists.records.info
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherlistsRecordsInfoFetcher",description:"lists.records.info generated fetcher"}},444762595:(x,l,d)=>{"use strict";d.d(l,{z:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor",SortsNotSupported:"sorts_not_supported",FiltersNotSupported:"filters_not_supported",ArchiveNotSupported:"archive_not_supported"},n=(0,m.A)("lists.records.list generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"lists.records.list",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to lists.records.list
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},6485511687:(x,l,d)=>{"use strict";d.d(l,{a:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},n=(0,m.A)("megaphone.setNotificationAsSeen generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"megaphone.setNotificationAsSeen",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to megaphone.setNotificationAsSeen
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},3048437087:(x,l,d)=>{"use strict";d.d(l,{n:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={NotImplemented:"not_implemented",NoProductSelected:"no_product_selected",InvalidRequest:"invalid_request",UnableToSetProductId:"unable_to_set_product_id",UnableToSetAddonIds:"unable_to_set_addon_ids",InvalidProductId:"invalid_product_id",AddonListTooLong:"addon_list_too_long",InvalidAddonIdInList:"invalid_addon_id_in_list",MultipleAddonsWithSameType:"multiple_addons_with_same_type"},n=(0,m.A)("payments.checkout.config generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"payments.checkout.config",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to payments.checkout.config
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherpaymentsCheckoutConfigFetcher",description:"payments.checkout.config generated fetcher"}},5170073955:(x,l,d)=>{"use strict";d.d(l,{Q:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},n=(0,m.A)("rooms.inviteResponse generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.inviteResponse",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to rooms.inviteResponse
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},5142752606:(x,l,d)=>{"use strict";d.d(l,{g:()=>r});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InvalidUser:"invalid_user",ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id",PermissionDenied:"permission_denied",CannotInviteExternal:"cannot_invite_external",InviteFailed:"invite_failed",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",MaxPotentialParticipants:"max_potential_participants",RecipientHuddlesDisabled:"recipient_huddles_disabled",FreemiumMaxParticipants:"freemium_max_participants"},n=(0,m.A)("rooms.notifyMember generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.notifyMember",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to rooms.notifyMember
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsNotifyMemberFetcher",description:"rooms.notifyMember generated fetcher"}},727128009:(x,l,d)=>{"use strict";d.d(l,{i:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied",InvalidLocale:"invalid_locale"},n=(0,m.A)("rooms.startTranscription generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.startTranscription",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to rooms.startTranscription
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},580220061:(x,l,d)=>{"use strict";d.d(l,{W:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},n=(0,m.A)("rooms.stopTranscription generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.stopTranscription",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to rooms.stopTranscription
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},5276466411:(x,l,d)=>{"use strict";d.d(l,{z:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={},n=(0,m.A)("search.autocomplete.topEngagedFiles generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"search.autocomplete.topEngagedFiles",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to search.autocomplete.topEngagedFiles
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTopEngagedFilesFetcher",description:"search.autocomplete.topEngagedFiles generated fetcher"}},6494470131:(x,l,d)=>{"use strict";d.d(l,{v:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={AuthError:"auth_error"},n=(0,m.A)("search.autocomplete.triggers generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"search.autocomplete.triggers",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to search.autocomplete.triggers
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},6515569951:(x,l,d)=>{"use strict";d.d(l,{Z:()=>n,q:()=>r});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"},n=(0,m.A)("sharedInvites.accept generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"sharedInvites.accept",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to sharedInvites.accept
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},9291336591:(x,l,d)=>{"use strict";d.d(l,{k:()=>r,n:()=>n});var c=d(6422693406),h=d(5109269968),m=d(5257368278),p=d(796111729),a=d(28129577);const r={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken"},n=(0,m.A)("users.profile.set generated fetcher",(e,t,i)=>new c.S((o,f)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"users.profile.set",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,p.Ay)({getState:t}).error(`API call to users.profile.set
						with reason ${g} failed, initiated by generated fetcher`),f(v)})}));n.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},4097827290:(x,l,d)=>{"use strict";d.d(l,{p:()=>c,t:()=>h});const c={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"},h={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"}},2164700852:(x,l,d)=>{"use strict";d.d(l,{k:()=>c});const c={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"}},2543682196:(x,l,d)=>{"use strict";d.r(l),d.d(l,{$Command:()=>kn,AllowNotifications:()=>hm,AssociateChannelFlowCommand:()=>yo,BadRequestException:()=>il,BatchChannelMembershipsFilterSensitiveLog:()=>lf,BatchCreateChannelMembershipCommand:()=>la,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>cf,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>uf,ChannelBanFilterSensitiveLog:()=>ff,ChannelBanSummaryFilterSensitiveLog:()=>hf,ChannelFilterSensitiveLog:()=>df,ChannelFlowCallbackCommand:()=>ca,ChannelFlowCallbackRequestFilterSensitiveLog:()=>gf,ChannelFlowFilterSensitiveLog:()=>pf,ChannelFlowSummaryFilterSensitiveLog:()=>Sf,ChannelMembershipFilterSensitiveLog:()=>vf,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>Ld,ChannelMembershipPreferencesFilterSensitiveLog:()=>yc,ChannelMembershipSummaryFilterSensitiveLog:()=>Ef,ChannelMembershipType:()=>pm,ChannelMessageCallbackFilterSensitiveLog:()=>mf,ChannelMessageFilterSensitiveLog:()=>bf,ChannelMessagePersistenceType:()=>_m,ChannelMessageStatus:()=>Cm,ChannelMessageSummaryFilterSensitiveLog:()=>_f,ChannelMessageType:()=>Tm,ChannelMode:()=>Sm,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>Fd,ChannelModeratorFilterSensitiveLog:()=>Cf,ChannelModeratorSummaryFilterSensitiveLog:()=>Tf,ChannelPrivacy:()=>vm,ChannelSummaryFilterSensitiveLog:()=>pl,ChimeSDKMessaging:()=>K,ChimeSDKMessagingClient:()=>$r,ChimeSDKMessagingServiceException:()=>Kr,ConflictException:()=>rl,CreateChannelBanCommand:()=>yl,CreateChannelBanResponseFilterSensitiveLog:()=>Df,CreateChannelCommand:()=>ks,CreateChannelFlowCommand:()=>da,CreateChannelFlowRequestFilterSensitiveLog:()=>Af,CreateChannelMembershipCommand:()=>ps,CreateChannelMembershipResponseFilterSensitiveLog:()=>wf,CreateChannelModeratorCommand:()=>ua,CreateChannelModeratorResponseFilterSensitiveLog:()=>Of,CreateChannelRequestFilterSensitiveLog:()=>If,DeleteChannelBanCommand:()=>El,DeleteChannelCommand:()=>bl,DeleteChannelFlowCommand:()=>_l,DeleteChannelMembershipCommand:()=>Cl,DeleteChannelMessageCommand:()=>Tl,DeleteChannelModeratorCommand:()=>Il,DeleteMessagingStreamingConfigurationsCommand:()=>Ac,DescribeChannelBanCommand:()=>fa,DescribeChannelBanResponseFilterSensitiveLog:()=>Rf,DescribeChannelCommand:()=>ha,DescribeChannelFlowCommand:()=>Xo,DescribeChannelFlowResponseFilterSensitiveLog:()=>Pf,DescribeChannelMembershipCommand:()=>pa,DescribeChannelMembershipForAppInstanceUserCommand:()=>Qo,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>Nf,DescribeChannelMembershipResponseFilterSensitiveLog:()=>kf,DescribeChannelModeratedByAppInstanceUserCommand:()=>ma,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>Lf,DescribeChannelModeratorCommand:()=>ga,DescribeChannelModeratorResponseFilterSensitiveLog:()=>Ff,DescribeChannelResponseFilterSensitiveLog:()=>Mf,DisassociateChannelFlowCommand:()=>Dl,ErrorCode:()=>mm,ExpirationCriterion:()=>gm,FallbackAction:()=>Em,ForbiddenException:()=>ol,GetChannelMembershipPreferencesCommand:()=>Sa,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>Bf,GetChannelMessageCommand:()=>Ns,GetChannelMessageResponseFilterSensitiveLog:()=>xf,GetChannelMessageStatusCommand:()=>Al,GetMessagingSessionEndpointCommand:()=>wl,GetMessagingStreamingConfigurationsCommand:()=>Ol,IdentityFilterSensitiveLog:()=>Er,InvocationType:()=>ym,ListChannelBansCommand:()=>va,ListChannelBansRequestFilterSensitiveLog:()=>Uf,ListChannelBansResponseFilterSensitiveLog:()=>Vf,ListChannelFlowsCommand:()=>Tr,ListChannelFlowsRequestFilterSensitiveLog:()=>Hf,ListChannelFlowsResponseFilterSensitiveLog:()=>Wf,ListChannelMembershipsCommand:()=>Ls,ListChannelMembershipsForAppInstanceUserCommand:()=>ya,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>zf,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>$f,ListChannelMembershipsRequestFilterSensitiveLog:()=>Gf,ListChannelMembershipsResponseFilterSensitiveLog:()=>jf,ListChannelMessagesCommand:()=>Ea,ListChannelMessagesRequestFilterSensitiveLog:()=>Kf,ListChannelMessagesResponseFilterSensitiveLog:()=>Jf,ListChannelModeratorsCommand:()=>Zo,ListChannelModeratorsRequestFilterSensitiveLog:()=>Yf,ListChannelModeratorsResponseFilterSensitiveLog:()=>Xf,ListChannelsAssociatedWithChannelFlowCommand:()=>Fs,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>qf,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>eh,ListChannelsCommand:()=>Io,ListChannelsModeratedByAppInstanceUserCommand:()=>qo,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>th,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>nh,ListChannelsRequestFilterSensitiveLog:()=>Qf,ListChannelsResponseFilterSensitiveLog:()=>Zf,ListSubChannelsCommand:()=>Do,ListSubChannelsRequestFilterSensitiveLog:()=>ih,ListSubChannelsResponseFilterSensitiveLog:()=>rh,ListTagsForResourceCommand:()=>Ml,ListTagsForResourceResponseFilterSensitiveLog:()=>oh,MessageAttributeValueFilterSensitiveLog:()=>hl,MessagingDataType:()=>Im,NotFoundException:()=>sl,ProcessorFilterSensitiveLog:()=>fl,PushNotificationConfigurationFilterSensitiveLog:()=>Nd,PushNotificationPreferencesFilterSensitiveLog:()=>yf,PushNotificationType:()=>bm,PutChannelExpirationSettingsCommand:()=>wc,PutChannelMembershipPreferencesCommand:()=>Rl,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>sh,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>ah,PutMessagingStreamingConfigurationsCommand:()=>Pl,RedactChannelMessageCommand:()=>kl,ResourceLimitExceededException:()=>ul,SearchChannelsCommand:()=>Bs,SearchChannelsRequestFilterSensitiveLog:()=>lh,SearchChannelsResponseFilterSensitiveLog:()=>ch,SearchFieldKey:()=>Am,SearchFieldOperator:()=>wm,SendChannelMessageCommand:()=>ms,SendChannelMessageRequestFilterSensitiveLog:()=>dh,ServiceFailureException:()=>al,ServiceUnavailableException:()=>ll,SortOrder:()=>Dm,TagFilterSensitiveLog:()=>ml,TagResourceCommand:()=>Nl,TagResourceRequestFilterSensitiveLog:()=>uh,ThrottledClientException:()=>cl,UnauthorizedClientException:()=>dl,UntagResourceCommand:()=>Ll,UntagResourceRequestFilterSensitiveLog:()=>fh,UpdateChannelCommand:()=>Fl,UpdateChannelFlowCommand:()=>Bl,UpdateChannelFlowRequestFilterSensitiveLog:()=>ph,UpdateChannelMessageCommand:()=>ee,UpdateChannelMessageRequestFilterSensitiveLog:()=>mh,UpdateChannelReadMarkerCommand:()=>N,UpdateChannelRequestFilterSensitiveLog:()=>hh,__Client:()=>zo,paginateListChannelBans:()=>oe,paginateListChannelFlows:()=>ue,paginateListChannelMemberships:()=>ye,paginateListChannelMembershipsForAppInstanceUser:()=>se,paginateListChannelMessages:()=>Ae,paginateListChannelModerators:()=>Ie,paginateListChannels:()=>lt,paginateListChannelsAssociatedWithChannelFlow:()=>Ve,paginateListChannelsModeratedByAppInstanceUser:()=>tt,paginateListSubChannels:()=>Dt,paginateSearchChannels:()=>ht});var c=d(9706240641);const h=s(b=>{let E=b.httpHandler;return{setHttpHandler(w){E=w},httpHandler(){return E},updateHttpClientConfig(w,I){E.updateHttpClientConfig(w,I)},httpHandlerConfigs(){return E.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),m=s(b=>({httpHandler:b.httpHandler()}),"resolveHttpHandlerRuntimeConfig");var p;(function(b){b.HEADER="header",b.QUERY="query"})(p||(p={}));var a;(function(b){b.HEADER="header",b.QUERY="query"})(a||(a={}));var r;(function(b){b.HTTP="http",b.HTTPS="https"})(r||(r={}));var n;(function(b){b.MD5="md5",b.CRC32="crc32",b.CRC32C="crc32c",b.SHA1="sha1",b.SHA256="sha256"})(n||(n={}));const e=s(b=>{const E=[];return b.sha256!==void 0&&E.push({algorithmId:()=>n.SHA256,checksumConstructor:()=>b.sha256}),b.md5!=null&&E.push({algorithmId:()=>n.MD5,checksumConstructor:()=>b.md5}),{_checksumAlgorithms:E,addChecksumAlgorithm(w){this._checksumAlgorithms.push(w)},checksumAlgorithms(){return this._checksumAlgorithms}}},"checksum_getChecksumConfiguration"),t=s(b=>{const E={};return b.checksumAlgorithms().forEach(w=>{E[w.algorithmId()]=w.checksumConstructor()}),E},"checksum_resolveChecksumRuntimeConfig"),i=s(b=>({...getChecksumConfiguration(b)}),"getDefaultClientConfiguration"),o=s(b=>({...resolveChecksumRuntimeConfig(b)}),"resolveDefaultRuntimeConfig");var f;(function(b){b[b.HEADER=0]="HEADER",b[b.TRAILER=1]="TRAILER"})(f||(f={}));const g="__smithy_context";var S;(function(b){b.PROFILE="profile",b.SSO_SESSION="sso-session",b.SERVICES="services"})(S||(S={}));var u;(function(b){b.HTTP_0_9="http/0.9",b.HTTP_1_0="http/1.0",b.TDS_8_0="tds/8.0"})(u||(u={}));class v{constructor({name:E,kind:w=FieldPosition.HEADER,values:I=[]}){this.name=E,this.kind=w,this.values=I}add(E){this.values.push(E)}set(E){this.values=E}remove(E){this.values=this.values.filter(w=>w!==E)}toString(){return this.values.map(E=>E.includes(",")||E.includes(" ")?`"${E}"`:E).join(", ")}get(){return this.values}}s(v,"Field");class y{constructor(E){this.method=E.method||"GET",this.hostname=E.hostname||"localhost",this.port=E.port,this.query=E.query||{},this.headers=E.headers||{},this.body=E.body,this.protocol=E.protocol?E.protocol.slice(-1)!==":"?`${E.protocol}:`:E.protocol:"https:",this.path=E.path?E.path.charAt(0)!=="/"?`/${E.path}`:E.path:"/",this.username=E.username,this.password=E.password,this.fragment=E.fragment}static clone(E){const w=new y({...E,headers:{...E.headers}});return w.query&&(w.query=_(w.query)),w}static isInstance(E){if(!E)return!1;const w=E;return"method"in w&&"protocol"in w&&"hostname"in w&&"path"in w&&typeof w.query=="object"&&typeof w.headers=="object"}clone(){return y.clone(this)}}s(y,"httpRequest_HttpRequest");function _(b){return Object.keys(b).reduce((E,w)=>{const I=b[w];return{...E,[w]:Array.isArray(I)?[...I]:I}},{})}s(_,"cloneQuery");class C{constructor(E){this.statusCode=E.statusCode,this.reason=E.reason,this.headers=E.headers||{},this.body=E.body}static isInstance(E){if(!E)return!1;const w=E;return typeof w.statusCode=="number"&&typeof w.headers=="object"}}s(C,"HttpResponse");function T(b){return b}s(T,"resolveHostHeaderConfig");const A=s(b=>E=>function(){var w=(0,c.coroutine)(function*(I){if(!y.isInstance(I.request))return E(I);const{request:H}=I,{handlerProtocol:j=""}=b.requestHandler.metadata||{};if(j.indexOf("h2")>=0&&!H.headers[":authority"])delete H.headers.host,H.headers[":authority"]=H.hostname+(H.port?":"+H.port:"");else if(!H.headers.host){let Q=H.hostname;H.port!=null&&(Q+=`:${H.port}`),H.headers.host=Q}return E(I)});return function(I){return w.apply(this,arguments)}}(),"hostHeaderMiddleware"),O={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},D=s(b=>({applyToStack:E=>{E.add(A(b),O)}}),"getHostHeaderPlugin"),M=s(()=>(b,E)=>function(){var w=(0,c.coroutine)(function*(I){try{var H;const Q=yield b(I),{clientName:ce,commandName:Re,logger:Ne,dynamoDbDocumentClientOptions:Qe={}}=E,{overrideInputFilterSensitiveLog:Je,overrideOutputFilterSensitiveLog:st}=Qe,pt=Je??E.inputFilterSensitiveLog,Kt=st??E.outputFilterSensitiveLog,{$metadata:Cn,...Gt}=Q.output;return Ne==null||(H=Ne.info)===null||H===void 0||H.call(Ne,{clientName:ce,commandName:Re,input:pt(I.input),output:Kt(Gt),metadata:Cn}),Q}catch(Q){var j;const{clientName:ce,commandName:Re,logger:Ne,dynamoDbDocumentClientOptions:Qe={}}=E,{overrideInputFilterSensitiveLog:Je}=Qe,st=Je??E.inputFilterSensitiveLog;throw Ne==null||(j=Ne.error)===null||j===void 0||j.call(Ne,{clientName:ce,commandName:Re,input:st(I.input),error:Q,metadata:Q.$metadata}),Q}});return function(I){return w.apply(this,arguments)}}(),"loggerMiddleware"),R={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},F=s(b=>({applyToStack:E=>{E.add(M(),R)}}),"getLoggerPlugin"),V="X-Amzn-Trace-Id",$="AWS_LAMBDA_FUNCTION_NAME",X="_X_AMZN_TRACE_ID",Y=s(b=>E=>function(){var w=(0,c.coroutine)(function*(I){const{request:H}=I;if(!y.isInstance(H)||b.runtime!=="node"||H.headers.hasOwnProperty(V))return E(I);const j={NODE_ENV:"production"}[$],Q={NODE_ENV:"production"}[X],ce=s(Re=>typeof Re=="string"&&Re.length>0,"nonEmptyString");return ce(j)&&ce(Q)&&(H.headers[V]=Q),E({...I,request:H})});return function(I){return w.apply(this,arguments)}}(),"recursionDetectionMiddleware"),ne={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ie=s(b=>({applyToStack:E=>{E.add(Y(b),ne)}}),"getRecursionDetectionPlugin");function pe(b){return{...b,customUserAgent:typeof b.customUserAgent=="string"?[[b.customUserAgent]]:b.customUserAgent}}s(pe,"resolveUserAgentConfig");class Ee{constructor({size:E,params:w}){this.data=new Map,this.parameters=[],this.capacity=E??50,w&&(this.parameters=w)}get(E,w){const I=this.hash(E);if(I===!1)return w();if(!this.data.has(I)){if(this.data.size>this.capacity+10){const H=this.data.keys();let j=0;for(;;){const{value:Q,done:ce}=H.next();if(this.data.delete(Q),ce||++j>10)break}}this.data.set(I,w())}return this.data.get(I)}size(){return this.data.size}hash(E){let w="";const{parameters:I}=this;if(I.length===0)return!1;for(const H of I){const j=String(E[H]??"");if(j.includes("|;"))return!1;w+=j+"|;"}return w}}s(Ee,"EndpointCache");const Be=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),it=s(b=>Be.test(b)||b.startsWith("[")&&b.endsWith("]"),"isIpAddress"),Ce=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Me=s((b,E=!1)=>{if(!E)return Ce.test(b);const w=b.split(".");for(const I of w)if(!Me(I))return!1;return!0},"isValidHostLabel"),je={},We="endpoints";function Ze(b){return typeof b!="object"||b==null?b:"ref"in b?`$${Ze(b.ref)}`:"fn"in b?`${b.fn}(${(b.argv||[]).map(Ze).join(", ")})`:JSON.stringify(b,null,2)}s(Ze,"toDebugString");class ft extends Error{constructor(E){super(E),this.name="EndpointError"}}s(ft,"EndpointError");const vt=s((b,E)=>b===E,"booleanEquals"),De=s(b=>{const E=b.split("."),w=[];for(const I of E){const H=I.indexOf("[");if(H!==-1){if(I.indexOf("]")!==I.length-1)throw new ft(`Path: '${b}' does not end with ']'`);const j=I.slice(H+1,-1);if(Number.isNaN(parseInt(j)))throw new ft(`Invalid array index: '${j}' in path: '${b}'`);H!==0&&w.push(I.slice(0,H)),w.push(j)}else w.push(I)}return w},"getAttrPathList"),Pe=s((b,E)=>De(E).reduce((w,I)=>{if(typeof w!="object")throw new ft(`Index '${I}' in '${E}' not found in '${JSON.stringify(b)}'`);return Array.isArray(w)?w[parseInt(I)]:w[I]},b),"getAttr"),Ke=s(b=>b!=null,"isSet"),Ye=s(b=>!b,"not"),xe={[r.HTTP]:80,[r.HTTPS]:443},Jt={booleanEquals:vt,getAttr:Pe,isSet:Ke,isValidHostLabel:Me,not:Ye,parseURL:s(b=>{const E=(()=>{try{if(b instanceof URL)return b;if(typeof b=="object"&&"hostname"in b){const{hostname:st,port:pt,protocol:Kt="",path:Cn="",query:Gt={}}=b,zn=new URL(`${Kt}//${st}${pt?`:${pt}`:""}${Cn}`);return zn.search=Object.entries(Gt).map(([si,wr])=>`${si}=${wr}`).join("&"),zn}return new URL(b)}catch{return null}})();if(!E)return console.error(`Unable to parse ${JSON.stringify(b)} as a whatwg URL.`),null;const w=E.href,{host:I,hostname:H,pathname:j,protocol:Q,search:ce}=E;if(ce)return null;const Re=Q.slice(0,-1);if(!Object.values(r).includes(Re))return null;const Ne=it(H),Qe=w.includes(`${I}:${xe[Re]}`)||typeof b=="string"&&b.includes(`${I}:${xe[Re]}`),Je=`${I}${Qe?`:${xe[Re]}`:""}`;return{scheme:Re,authority:Je,path:j,normalizedPath:j.endsWith("/")?j:`${j}/`,isIp:Ne}},"parseURL"),stringEquals:s((b,E)=>b===E,"stringEquals"),substring:s((b,E,w,I)=>E>=w||b.length<w?null:I?b.substring(b.length-w,b.length-E):b.substring(E,w),"substring"),uriEncode:s(b=>encodeURIComponent(b).replace(/[!*'()]/g,E=>`%${E.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode")},It=s((b,E)=>{const w=[],I={...E.endpointParams,...E.referenceRecord};let H=0;for(;H<b.length;){const j=b.indexOf("{",H);if(j===-1){w.push(b.slice(H));break}w.push(b.slice(H,j));const Q=b.indexOf("}",j);if(Q===-1){w.push(b.slice(j));break}b[j+1]==="{"&&b[Q+1]==="}"&&(w.push(b.slice(j+1,Q)),H=Q+2);const ce=b.substring(j+1,Q);if(ce.includes("#")){const[Re,Ne]=ce.split("#");w.push(Pe(I[Re],Ne))}else w.push(I[ce]);H=Q+1}return w.join("")},"evaluateTemplate"),ln=s(({ref:b},E)=>({...E.endpointParams,...E.referenceRecord})[b],"getReferenceValue"),$n=s((b,E,w)=>{if(typeof b=="string")return It(b,w);if(b.fn)return yn(b,w);if(b.ref)return ln(b,w);throw new ft(`'${E}': ${String(b)} is not a string, function or reference.`)},"evaluateExpression"),yn=s(({fn:b,argv:E},w)=>{const I=E.map(j=>["boolean","number"].includes(typeof j)?j:$n(j,"arg",w)),H=b.split(".");return H[0]in je&&H[1]!=null?je[H[0]][H[1]](...I):Jt[b](...I)},"callFunction"),zt=s(({assign:b,...E},w)=>{var H,j;if(b&&b in w.referenceRecord)throw new ft(`'${b}' is already defined in Reference Record.`);const I=yn(E,w);return(j=(H=w.logger)==null?void 0:H.debug)==null||j.call(H,`${We} evaluateCondition: ${Ze(E)} = ${Ze(I)}`),{result:I===""?!0:!!I,...b!=null&&{toAssign:{name:b,value:I}}}},"evaluateCondition"),Yt=s((b=[],E)=>{var I,H;const w={};for(const j of b){const{result:Q,toAssign:ce}=zt(j,{...E,referenceRecord:{...E.referenceRecord,...w}});if(!Q)return{result:Q};ce&&(w[ce.name]=ce.value,(H=(I=E.logger)==null?void 0:I.debug)==null||H.call(I,`${We} assign: ${ce.name} := ${Ze(ce.value)}`))}return{result:!0,referenceRecord:w}},"evaluateConditions"),Mt=s((b,E)=>Object.entries(b).reduce((w,[I,H])=>({...w,[I]:H.map(j=>{const Q=$n(j,"Header value entry",E);if(typeof Q!="string")throw new ft(`Header '${I}' value '${Q}' is not a string`);return Q})}),{}),"getEndpointHeaders"),Vt=s((b,E)=>{if(Array.isArray(b))return b.map(w=>Vt(w,E));switch(typeof b){case"string":return It(b,E);case"object":if(b===null)throw new ft(`Unexpected endpoint property: ${b}`);return $t(b,E);case"boolean":return b;default:throw new ft(`Unexpected endpoint property type: ${typeof b}`)}},"getEndpointProperty"),$t=s((b,E)=>Object.entries(b).reduce((w,[I,H])=>({...w,[I]:Vt(H,E)}),{}),"getEndpointProperties"),xt=s((b,E)=>{const w=$n(b,"Endpoint URL",E);if(typeof w=="string")try{return new URL(w)}catch(I){throw console.error(`Failed to construct URL with ${w}`,I),I}throw new ft(`Endpoint URL must be a string, got ${typeof w}`)},"getEndpointUrl"),jt=s((b,E)=>{var Qe,Je;const{conditions:w,endpoint:I}=b,{result:H,referenceRecord:j}=Yt(w,E);if(!H)return;const Q={...E,referenceRecord:{...E.referenceRecord,...j}},{url:ce,properties:Re,headers:Ne}=I;return(Je=(Qe=E.logger)==null?void 0:Qe.debug)==null||Je.call(Qe,`${We} Resolving endpoint from template: ${Ze(I)}`),{...Ne!=null&&{headers:Mt(Ne,Q)},...Re!=null&&{properties:$t(Re,Q)},url:xt(ce,Q)}},"evaluateEndpointRule"),J=s((b,E)=>{const{conditions:w,error:I}=b,{result:H,referenceRecord:j}=Yt(w,E);if(H)throw new ft($n(I,"Error",{...E,referenceRecord:{...E.referenceRecord,...j}}))},"evaluateErrorRule"),Fe=s((b,E)=>{const{conditions:w,rules:I}=b,{result:H,referenceRecord:j}=Yt(w,E);if(H)return ke(I,{...E,referenceRecord:{...E.referenceRecord,...j}})},"evaluateTreeRule"),ke=s((b,E)=>{for(const w of b)if(w.type==="endpoint"){const I=jt(w,E);if(I)return I}else if(w.type==="error")J(w,E);else if(w.type==="tree"){const I=Fe(w,E);if(I)return I}else throw new ft(`Unknown endpoint rule: ${w}`);throw new ft("Rules evaluation failed")},"evaluateRules"),Ge=s((b,E)=>{var Ne,Qe,Je,st;const{endpointParams:w,logger:I}=E,{parameters:H,rules:j}=b;(Qe=(Ne=E.logger)==null?void 0:Ne.debug)==null||Qe.call(Ne,`${We} Initial EndpointParams: ${Ze(w)}`);const Q=Object.entries(H).filter(([,pt])=>pt.default!=null).map(([pt,Kt])=>[pt,Kt.default]);if(Q.length>0)for(const[pt,Kt]of Q)w[pt]=w[pt]??Kt;const ce=Object.entries(H).filter(([,pt])=>pt.required).map(([pt])=>pt);for(const pt of ce)if(w[pt]==null)throw new ft(`Missing required parameter: '${pt}'`);const Re=ke(j,{endpointParams:w,logger:I,referenceRecord:{}});return(st=(Je=E.logger)==null?void 0:Je.debug)==null||st.call(Je,`${We} Resolved endpoint: ${Ze(Re)}`),Re},"resolveEndpoint"),gt=s(function(b){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const w of b.split("."))if(!gt(w))return!1;return!0}return!(!Me(b)||b.length<3||b.length>63||b!==b.toLowerCase()||it(b))},"isVirtualHostableS3Bucket"),at=":",ae="/",Le=s(b=>{const E=b.split(at);if(E.length<6)return null;const[w,I,H,j,Q,...ce]=E;if(w!=="arn"||I===""||H===""||ce.join(at)==="")return null;const Re=ce.map(Ne=>Ne.split(ae)).flat();return{partition:I,service:H,region:j,accountId:Q,resourceId:Re}},"parseArn");var G=d(1209174152),Z=d.n(G);let me=Z(),ge="";const rt=s(b=>{const{partitions:E}=me;for(const I of E){const{regions:H,outputs:j}=I;for(const[Q,ce]of Object.entries(H))if(Q===b)return{...j,...ce}}for(const I of E){const{regionRegex:H,outputs:j}=I;if(new RegExp(H).test(b))return{...j}}const w=E.find(I=>I.id==="aws");if(!w)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...w.outputs}},"partition"),Ue=s(function(b){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";me=b,ge=E},"setPartitionInfo"),Xe=s(()=>{Ue(partitionsInfo,"")},"useDefaultPartitionInfo"),fe=s(()=>ge,"getUserAgentPrefix"),Te={isVirtualHostableS3Bucket:gt,parseArn:Le,partition:rt};je.aws=Te;const k="user-agent",he="x-amz-user-agent",Se=" ",be="/",te=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Nt=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,nt="-",mt=s(b=>(E,w)=>function(){var I=(0,c.coroutine)(function*(H){var j,Q;const{request:ce}=H;if(!y.isInstance(ce))return E(H);const{headers:Re}=ce,Ne=(w==null||(j=w.userAgent)===null||j===void 0?void 0:j.map(pn))||[],Qe=(yield b.defaultUserAgentProvider()).map(pn),Je=(b==null||(Q=b.customUserAgent)===null||Q===void 0?void 0:Q.map(pn))||[],st=fe(),pt=(st?[st]:[]).concat([...Qe,...Ne,...Je]).join(Se),Kt=[...Qe.filter(Cn=>Cn.startsWith("aws-sdk-")),...Je].join(Se);return b.runtime!=="browser"?(Kt&&(Re[he]=Re[he]?`${Re[k]} ${Kt}`:Kt),Re[k]=pt):Re[he]=pt,E({...H,request:ce})});return function(H){return I.apply(this,arguments)}}(),"userAgentMiddleware"),pn=s(b=>{var E;const w=b[0].split(be).map(ce=>ce.replace(te,nt)).join(be),I=(E=b[1])===null||E===void 0?void 0:E.replace(Nt,nt),H=w.indexOf(be),j=w.substring(0,H);let Q=w.substring(H+1);return j==="api"&&(Q=Q.toLowerCase()),[j,Q,I].filter(ce=>ce&&ce.length>0).reduce((ce,Re,Ne)=>{switch(Ne){case 0:return Re;case 1:return`${ce}/${Re}`;default:return`${ce}#${Re}`}},"")},"escapeUserAgent"),Pt={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Mi=s(b=>({applyToStack:E=>{E.add(mt(b),Pt)}}),"getUserAgentPlugin"),ai=s((b,E,w)=>{if(E in b){if(b[E]==="true")return!0;if(b[E]==="false")return!1;throw new Error(`Cannot load ${w} "${E}". Expected "true" or "false", got ${b[E]}.`)}},"booleanSelector");var un;(function(b){b.ENV="env",b.CONFIG="shared config entry"})(un||(un={}));const Hn="AWS_USE_DUALSTACK_ENDPOINT",mn="use_dualstack_endpoint",li=!1,Kn={environmentVariableSelector:b=>ai(b,Hn,un.ENV),configFileSelector:b=>ai(b,mn,un.CONFIG),default:!1},lr="AWS_USE_FIPS_ENDPOINT",kt="use_fips_endpoint",Et=!1,Tn={environmentVariableSelector:b=>ai(b,lr,un.ENV),configFileSelector:b=>ai(b,kt,un.CONFIG),default:!1},gn=s(b=>b[g]||(b[g]={}),"getSmithyContext"),In=s(b=>{if(typeof b=="function")return b;const E=Promise.resolve(b);return()=>E},"normalizeProvider_normalizeProvider"),Qn=s(b=>{const{endpoint:E,urlParser:w}=b;return{...b,tls:b.tls??!0,endpoint:normalizeProvider(typeof E=="string"?w(E):E),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(b.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),qn=s(b=>{const E=normalizeProvider(b.useDualstackEndpoint??!1),{endpoint:w,useFipsEndpoint:I,urlParser:H}=b;return{...b,tls:b.tls??!0,endpoint:w?normalizeProvider(typeof w=="string"?H(w):w):()=>getEndpointFromRegion({...b,useDualstackEndpoint:E,useFipsEndpoint:I}),isCustomEndpoint:!!w,useDualstackEndpoint:E}},"resolveEndpointsConfig"),Vn="AWS_REGION",Xn="region",yi={environmentVariableSelector:b=>b[Vn],configFileSelector:b=>b[Xn],default:()=>{throw new Error("Region is missing")}},Si={preferredFile:"credentials"},Fn=s(b=>typeof b=="string"&&(b.startsWith("fips-")||b.endsWith("-fips")),"isFipsRegion_isFipsRegion"),xi=s(b=>Fn(b)?["fips-aws-global","aws-fips"].includes(b)?"us-east-1":b.replace(/fips-(dkr-|prod-)?|-fips/,""):b,"getRealRegion_getRealRegion"),hi=s(b=>{const{region:E,useFipsEndpoint:w}=b;if(!E)throw new Error("Region is missing");return{...b,region:async()=>{if(typeof E=="string")return xi(E);const I=await E();return xi(I)},useFipsEndpoint:async()=>{const I=typeof E=="string"?E:await E();return Fn(I)?!0:typeof w!="function"?Promise.resolve(!!w):w()}}},"resolveRegionConfig");function Yi(b){const E=new Map;for(const w of b)E.set(w.schemeId,w);return E}s(Yi,"convertHttpAuthSchemesToMap");const L=s((b,E)=>(w,I)=>async H=>{var Ne;const j=b.httpAuthSchemeProvider(await E.httpAuthSchemeParametersProvider(b,I,H.input)),Q=Yi(b.httpAuthSchemes),ce=gn(I),Re=[];for(const Qe of j){const Je=Q.get(Qe.schemeId);if(!Je){Re.push(`HttpAuthScheme \`${Qe.schemeId}\` was not enabled for this service.`);continue}const st=Je.identityProvider(await E.identityProviderConfigProvider(b));if(!st){Re.push(`HttpAuthScheme \`${Qe.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:pt={},signingProperties:Kt={}}=((Ne=Qe.propertiesExtractor)==null?void 0:Ne.call(Qe,b,I))||{};Qe.identityProperties=Object.assign(Qe.identityProperties||{},pt),Qe.signingProperties=Object.assign(Qe.signingProperties||{},Kt),ce.selectedHttpAuthScheme={httpAuthOption:Qe,identity:await st(Qe.identityProperties),signer:Je.signer};break}if(!ce.selectedHttpAuthScheme)throw new Error(Re.join(`
`));return w(H)},"httpAuthSchemeMiddleware_httpAuthSchemeMiddleware"),re=s(async b=>{const E=(b==null?void 0:b.Bucket)||"";if(typeof b.Bucket=="string"&&(b.Bucket=E.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),qt(E)){if(b.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Zt(E)||E.indexOf(".")!==-1&&!String(b.Endpoint).startsWith("http:")||E.toLowerCase()!==E||E.length<3)&&(b.ForcePathStyle=!0);return b.DisableMultiRegionAccessPoints&&(b.disableMultiRegionAccessPoints=!0,b.DisableMRAP=!0),b},"resolveParamsForS3"),we=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,$e=/(\d+\.){3}\d+/,yt=/\.\./,Xt=/\./,dn=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Zt=s(b=>we.test(b)&&!$e.test(b)&&!yt.test(b),"isDnsCompatibleBucketName"),qt=s(b=>{const[E,w,I,,,H]=b.split(":"),j=E==="arn"&&b.split(":").length>=6,Q=Boolean(j&&w&&I&&H);if(j&&!Q)throw new Error(`Invalid ARN: ${b} was an invalid ARN.`);return Q},"isArnBucketName"),on=s((b,E,w)=>{const I=s(async()=>{const H=w[b]??w[E];return typeof H=="function"?H():H},"configProvider");return b==="credentialScope"||E==="CredentialScope"?async()=>{const H=typeof w.credentials=="function"?await w.credentials():w.credentials;return(H==null?void 0:H.credentialScope)??(H==null?void 0:H.CredentialScope)}:b==="accountId"||E==="AccountId"?async()=>{const H=typeof w.credentials=="function"?await w.credentials():w.credentials;return(H==null?void 0:H.accountId)??(H==null?void 0:H.AccountId)}:b==="endpoint"||E==="endpoint"?async()=>{const H=await I();if(H&&typeof H=="object"){if("url"in H)return H.url.href;if("hostname"in H){const{protocol:j,hostname:Q,port:ce,path:Re}=H;return`${j}//${Q}${ce?":"+ce:""}${Re}`}}return H}:I},"createConfigValueProvider"),wn=s(async b=>{},"getEndpointFromConfig");function Zn(b){const E={};if(b=b.replace(/^\?/,""),b)for(const w of b.split("&")){let[I,H=null]=w.split("=");I=decodeURIComponent(I),H&&(H=decodeURIComponent(H)),I in E?Array.isArray(E[I])?E[I].push(H):E[I]=[E[I],H]:E[I]=H}return E}s(Zn,"parseQueryString");const Jn=s(b=>{if(typeof b=="string")return Jn(new URL(b));const{hostname:E,pathname:w,port:I,protocol:H,search:j}=b;let Q;return j&&(Q=Zn(j)),{hostname:E,port:I?parseInt(I):void 0,protocol:H,path:w,query:Q}},"parseUrl"),Ei=s(b=>typeof b=="object"?"url"in b?Jn(b.url):b:Jn(b),"toEndpointV1"),$i=s(async(b,E,w,I)=>{if(!w.endpoint){let Q;w.serviceConfiguredEndpoint?Q=await w.serviceConfiguredEndpoint():Q=await wn(w.serviceId),Q&&(w.endpoint=()=>Promise.resolve(Ei(Q)))}const H=await Qi(b,E,w);if(typeof w.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return w.endpointProvider(H,I)},"getEndpointFromInstructions"),Qi=s(async(b,E,w)=>{var j;const I={},H=((j=E==null?void 0:E.getEndpointParameterInstructions)==null?void 0:j.call(E))||{};for(const[Q,ce]of Object.entries(H))switch(ce.type){case"staticContextParams":I[Q]=ce.value;break;case"contextParams":I[Q]=b[ce.name];break;case"clientContextParams":case"builtInParams":I[Q]=await on(ce.name,Q,w)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(ce))}return Object.keys(H).length===0&&Object.assign(I,w),String(w.serviceId).toLowerCase()==="s3"&&await re(I),I},"resolveParams"),Sr=s(({config:b,instructions:E})=>(w,I)=>async H=>{var ce,Re,Ne;const j=await $i(H.input,{getEndpointParameterInstructions(){return E}},{...b},I);I.endpointV2=j,I.authSchemes=(ce=j.properties)==null?void 0:ce.authSchemes;const Q=(Re=I.authSchemes)==null?void 0:Re[0];if(Q){I.signing_region=Q.signingRegion,I.signing_service=Q.signingName;const Qe=gn(I),Je=(Ne=Qe==null?void 0:Qe.selectedHttpAuthScheme)==null?void 0:Ne.httpAuthOption;Je&&(Je.signingProperties=Object.assign(Je.signingProperties||{},{signing_region:Q.signingRegion,signingRegion:Q.signingRegion,signing_service:Q.signingName,signingName:Q.signingName,signingRegionSet:Q.signingRegionSet},Q.properties))}return w({...H})},"endpointMiddleware"),On=s((b,E)=>w=>async I=>{const{response:H}=await w(I);try{const j=await E(H,b);return{response:H,output:j}}catch(j){if(Object.defineProperty(j,"$response",{value:H}),!("$metadata"in j)){const Q="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";j.message+=`
  `+Q,typeof j.$responseBodyText<"u"&&j.$response&&(j.$response.body=j.$responseBodyText)}throw j}},"deserializerMiddleware"),Ri=s((b,E)=>(w,I)=>async H=>{var ce;const j=(ce=I.endpointV2)!=null&&ce.url&&b.urlParser?async()=>b.urlParser(I.endpointV2.url):b.endpoint;if(!j)throw new Error("No valid endpoint provider available.");const Q=await E(H.input,{...b,endpoint:j});return w({...H,request:Q})},"serializerMiddleware"),ci={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ki={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function rn(b,E,w){return{applyToStack:I=>{I.add(On(b,w),ci),I.add(Ri(b,E),ki)}}}s(rn,"getSerdePlugin");const cr={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ki.name},Sn=s((b,E)=>({applyToStack:w=>{w.addRelativeTo(Sr({config:b,instructions:E}),cr)}}),"getEndpointPlugin"),Zi=s(b=>{const E=b.tls??!0,{endpoint:w}=b,I=w!=null?async()=>Ei(await In(w)()):void 0,j={...b,endpoint:I,tls:E,isCustomEndpoint:!!w,useDualstackEndpoint:In(b.useDualstackEndpoint??!1),useFipsEndpoint:In(b.useFipsEndpoint??!1)};let Q;return j.serviceConfiguredEndpoint=async()=>(b.serviceId&&!Q&&(Q=wn(b.serviceId)),Q),j},"resolveEndpointConfig"),vr={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:cr.name},Rr=s((b,{httpAuthSchemeParametersProvider:E,identityProviderConfigProvider:w})=>({applyToStack:I=>{I.addRelativeTo(L(b,{httpAuthSchemeParametersProvider:E,identityProviderConfigProvider:w}),vr)}}),"getHttpAuthSchemeEndpointRuleSetPlugin"),le={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:ki.name},ve=s((b,{httpAuthSchemeParametersProvider:E,identityProviderConfigProvider:w})=>({applyToStack:I=>{I.addRelativeTo(httpAuthSchemeMiddleware(b,{httpAuthSchemeParametersProvider:E,identityProviderConfigProvider:w}),le)}}),"getHttpAuthSchemePlugin"),Oe=s(b=>E=>{throw E},"defaultErrorHandler"),qe=s((b,E)=>{},"defaultSuccessHandler"),dt=s(b=>(E,w)=>async I=>{if(!y.isInstance(I.request))return E(I);const j=gn(w).selectedHttpAuthScheme;if(!j)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:Q={}},identity:ce,signer:Re}=j,Ne=await E({...I,request:await Re.sign(I.request,ce,Q)}).catch((Re.errorHandler||Oe)(Q));return(Re.successHandler||qe)(Ne.response,Q),Ne},"httpSigningMiddleware");var ct;(function(b){b.STANDARD="standard",b.ADAPTIVE="adaptive"})(ct||(ct={}));const Bt=3,en=ct.STANDARD,nn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Ut=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Nn=["TimeoutError","RequestTimeout","RequestTimeoutException"],bt=[500,502,503,504],Wn=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],fn=s(b=>b.$retryable!==void 0,"isRetryableByTrait"),ii=s(b=>nn.includes(b.name),"isClockSkewError"),Ui=s(b=>{var E;return(E=b.$metadata)==null?void 0:E.clockSkewCorrected},"isClockSkewCorrectedError"),pi=s(b=>{var E,w;return((E=b.$metadata)==null?void 0:E.httpStatusCode)===429||Ut.includes(b.name)||((w=b.$retryable)==null?void 0:w.throttling)==!0},"isThrottlingError"),cn=s(b=>{var E;return Ui(b)||Nn.includes(b.name)||Wn.includes((b==null?void 0:b.code)||"")||bt.includes(((E=b.$metadata)==null?void 0:E.httpStatusCode)||0)},"isTransientError"),En=s(b=>{var E;if(((E=b.$metadata)==null?void 0:E.httpStatusCode)!==void 0){const w=b.$metadata.httpStatusCode;return 500<=w&&w<=599&&!cn(b)}return!1},"isServerError");class Un{constructor(E){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(E==null?void 0:E.beta)??.7,this.minCapacity=(E==null?void 0:E.minCapacity)??1,this.minFillRate=(E==null?void 0:E.minFillRate)??.5,this.scaleConstant=(E==null?void 0:E.scaleConstant)??.4,this.smooth=(E==null?void 0:E.smooth)??.8;const w=this.getCurrentTimeInSeconds();this.lastThrottleTime=w,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(E){if(this.enabled){if(this.refillTokenBucket(),E>this.currentCapacity){const w=(E-this.currentCapacity)/this.fillRate*1e3;await new Promise(I=>setTimeout(I,w))}this.currentCapacity=this.currentCapacity-E}}refillTokenBucket(){const E=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=E;return}const w=(E-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+w),this.lastTimestamp=E}updateClientSendingRate(E){let w;if(this.updateMeasuredRate(),pi(E)){const H=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=H,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),w=this.cubicThrottle(H),this.enableTokenBucket()}else this.calculateTimeWindow(),w=this.cubicSuccess(this.getCurrentTimeInSeconds());const I=Math.min(w,2*this.measuredTxRate);this.updateTokenBucketRate(I)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(E){return this.getPrecise(E*this.beta)}cubicSuccess(E){return this.getPrecise(this.scaleConstant*Math.pow(E-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(E){this.refillTokenBucket(),this.fillRate=Math.max(E,this.minFillRate),this.maxCapacity=Math.max(E,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const E=this.getCurrentTimeInSeconds(),w=Math.floor(E*2)/2;if(this.requestCount++,w>this.lastTxRateBucket){const I=this.requestCount/(w-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(I*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=w}}getPrecise(E){return parseFloat(E.toFixed(8))}}s(Un,"DefaultRateLimiter");const Yn=100,Vi=20*1e3,qi=500,Bn=500,gr=5,mi=10,Ki=1,Ur="amz-sdk-invocation-id",Yr="amz-sdk-request",oo=s(()=>{let b=Yn;return{computeNextBackoffDelay:s(I=>Math.floor(Math.min(Vi,Math.random()*2**I*b)),"computeNextBackoffDelay"),setDelayBase:s(I=>{b=I},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),so=s(({retryDelay:b,retryCount:E,retryCost:w})=>({getRetryCount:s(()=>E,"getRetryCount"),getRetryDelay:s(()=>Math.min(Vi,b),"getRetryDelay"),getRetryCost:s(()=>w,"getRetryCost")}),"createDefaultRetryToken");class Pr{constructor(E){this.maxAttempts=E,this.mode=ct.STANDARD,this.capacity=Bn,this.retryBackoffStrategy=oo(),this.maxAttemptsProvider=typeof E=="function"?E:async()=>E}async acquireInitialRetryToken(E){return so({retryDelay:Yn,retryCount:0})}async refreshRetryTokenForRetry(E,w){const I=await this.getMaxAttempts();if(this.shouldRetry(E,w,I)){const H=w.errorType;this.retryBackoffStrategy.setDelayBase(H==="THROTTLING"?qi:Yn);const j=this.retryBackoffStrategy.computeNextBackoffDelay(E.getRetryCount()),Q=w.retryAfterHint?Math.max(w.retryAfterHint.getTime()-Date.now()||0,j):j,ce=this.getCapacityCost(H);return this.capacity-=ce,so({retryDelay:Q,retryCount:E.getRetryCount()+1,retryCost:ce})}throw new Error("No retry token available")}recordSuccess(E){this.capacity=Math.max(Bn,this.capacity+(E.getRetryCost()??Ki))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Bt}`),Bt}}shouldRetry(E,w,I){return E.getRetryCount()+1<I&&this.capacity>=this.getCapacityCost(w.errorType)&&this.isRetryableError(w.errorType)}getCapacityCost(E){return E==="TRANSIENT"?mi:gr}isRetryableError(E){return E==="THROTTLING"||E==="TRANSIENT"}}s(Pr,"StandardRetryStrategy");class Vr{constructor(E,w){this.maxAttemptsProvider=E,this.mode=ct.ADAPTIVE;const{rateLimiter:I}=w??{};this.rateLimiter=I??new Un,this.standardRetryStrategy=new Pr(E)}async acquireInitialRetryToken(E){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(E)}async refreshRetryTokenForRetry(E,w){return this.rateLimiter.updateClientSendingRate(w),this.standardRetryStrategy.refreshRetryTokenForRetry(E,w)}recordSuccess(E){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(E)}}s(Vr,"AdaptiveRetryStrategy");class er extends Pr{constructor(E,w=Yn){super(typeof E=="function"?E:async()=>E),typeof w=="number"?this.computeNextBackoffDelay=()=>w:this.computeNextBackoffDelay=w}async refreshRetryTokenForRetry(E,w){const I=await super.refreshRetryTokenForRetry(E,w);return I.getRetryDelay=()=>this.computeNextBackoffDelay(I.getRetryCount()),I}}s(er,"ConfiguredRetryStrategy");const Hr={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Hi;const yr=new Uint8Array(16);function Xr(){if(!Hi&&(Hi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hi(yr)}s(Xr,"rng");const Ai=[];for(let b=0;b<256;++b)Ai.push((b+256).toString(16).slice(1));function Eo(b,E=0){return Ai[b[E+0]]+Ai[b[E+1]]+Ai[b[E+2]]+Ai[b[E+3]]+"-"+Ai[b[E+4]]+Ai[b[E+5]]+"-"+Ai[b[E+6]]+Ai[b[E+7]]+"-"+Ai[b[E+8]]+Ai[b[E+9]]+"-"+Ai[b[E+10]]+Ai[b[E+11]]+Ai[b[E+12]]+Ai[b[E+13]]+Ai[b[E+14]]+Ai[b[E+15]]}s(Eo,"unsafeStringify");function Go(b,E=0){const w=Eo(b,E);if(!validate(w))throw TypeError("Stringified UUID is invalid");return w}s(Go,"stringify");const jo=null;function bo(b,E,w){if(Hr.randomUUID&&!E&&!b)return Hr.randomUUID();b=b||{};const I=b.random||(b.rng||Xr)();if(I[6]=I[6]&15|64,I[8]=I[8]&63|128,E){w=w||0;for(let H=0;H<16;++H)E[w+H]=I[H];return E}return Eo(I)}s(bo,"v4");const Ci=bo,Ji=s((b,E)=>{const w=b,I=(E==null?void 0:E.noRetryIncrement)??Ki,H=(E==null?void 0:E.retryCost)??gr,j=(E==null?void 0:E.timeoutRetryCost)??mi;let Q=b;const ce=s(Je=>Je.name==="TimeoutError"?j:H,"getCapacityAmount"),Re=s(Je=>ce(Je)<=Q,"hasRetryTokens");return Object.freeze({hasRetryTokens:Re,retrieveRetryTokens:s(Je=>{if(!Re(Je))throw new Error("No retry token available");const st=ce(Je);return Q-=st,st},"retrieveRetryTokens"),releaseRetryTokens:s(Je=>{Q+=Je??I,Q=Math.min(Q,w)},"releaseRetryTokens")})},"getDefaultRetryQuota"),Xi=s((b,E)=>Math.floor(Math.min(Vi,Math.random()*2**E*b)),"defaultDelayDecider"),dr=s(b=>b?fn(b)||ii(b)||pi(b)||cn(b):!1,"defaultRetryDecider"),tr=s(b=>b instanceof Error?b:b instanceof Object?Object.assign(new Error,b):typeof b=="string"?new Error(b):new Error(`AWS SDK error wrapper for ${b}`),"asSdkError");class ao{constructor(E,w){this.maxAttemptsProvider=E,this.mode=ct.STANDARD,this.retryDecider=(w==null?void 0:w.retryDecider)??dr,this.delayDecider=(w==null?void 0:w.delayDecider)??Xi,this.retryQuota=(w==null?void 0:w.retryQuota)??Ji(Bn)}shouldRetry(E,w,I){return w<I&&this.retryDecider(E)&&this.retryQuota.hasRetryTokens(E)}async getMaxAttempts(){let E;try{E=await this.maxAttemptsProvider()}catch{E=Bt}return E}async retry(E,w,I){let H,j=0,Q=0;const ce=await this.getMaxAttempts(),{request:Re}=w;for(y.isInstance(Re)&&(Re.headers[Ur]=Ci());;)try{y.isInstance(Re)&&(Re.headers[Yr]=`attempt=${j+1}; max=${ce}`),I!=null&&I.beforeRequest&&await I.beforeRequest();const{response:Ne,output:Qe}=await E(w);return I!=null&&I.afterRequest&&I.afterRequest(Ne),this.retryQuota.releaseRetryTokens(H),Qe.$metadata.attempts=j+1,Qe.$metadata.totalRetryDelay=Q,{response:Ne,output:Qe}}catch(Ne){const Qe=tr(Ne);if(j++,this.shouldRetry(Qe,j,ce)){H=this.retryQuota.retrieveRetryTokens(Qe);const Je=this.delayDecider(pi(Qe)?qi:Yn,j),st=Wr(Qe.$response),pt=Math.max(st||0,Je);Q+=pt,await new Promise(Kt=>setTimeout(Kt,pt));continue}throw Qe.$metadata||(Qe.$metadata={}),Qe.$metadata.attempts=j,Qe.$metadata.totalRetryDelay=Q,Qe}}}s(ao,"StandardRetryStrategy_StandardRetryStrategy");const Wr=s(b=>{if(!C.isInstance(b))return;const E=Object.keys(b.headers).find(j=>j.toLowerCase()==="retry-after");if(!E)return;const w=b.headers[E],I=Number(w);return Number.isNaN(I)?new Date(w).getTime()-Date.now():I*1e3},"getDelayFromRetryAfterHeader");class Ar extends ao{constructor(E,w){const{rateLimiter:I,...H}=w??{};super(E,H),this.rateLimiter=I??new Un,this.mode=ct.ADAPTIVE}async retry(E,w){return super.retry(E,w,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:I=>{this.rateLimiter.updateClientSendingRate(I)}})}}s(Ar,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");const _o="AWS_MAX_ATTEMPTS",os="max_attempts",Gs={environmentVariableSelector:b=>{const E=b[_o];if(!E)return;const w=parseInt(E);if(Number.isNaN(w))throw new Error(`Environment variable ${_o} mast be a number, got "${E}"`);return w},configFileSelector:b=>{const E=b[os];if(!E)return;const w=parseInt(E);if(Number.isNaN(w))throw new Error(`Shared config file entry ${os} mast be a number, got "${E}"`);return w},default:Bt},vs=s(b=>{const{retryStrategy:E}=b,w=In(b.maxAttempts??Bt);return{...b,maxAttempts:w,retryStrategy:async()=>E||(await In(b.retryMode)()===ct.ADAPTIVE?new Vr(w):new Pr(w))}},"resolveRetryConfig"),ss="AWS_RETRY_MODE",ys="retry_mode",js={environmentVariableSelector:b=>b[ss],configFileSelector:b=>b[ys],default:en},Es=s(()=>b=>async E=>{const{request:w}=E;return HttpRequest.isInstance(w)&&(delete w.headers[INVOCATION_ID_HEADER],delete w.headers[REQUEST_HEADER]),b(E)},"omitRetryHeadersMiddleware"),bs={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},zs=s(b=>({applyToStack:E=>{E.addRelativeTo(Es(),bs)}}),"getOmitRetryHeadersPlugin"),Qr=s((b,E)=>{const w=[];if(b&&w.push(b),E)for(const I of E)w.push(I);return w},"getAllAliases"),Br=s((b,E)=>`${b||"anonymous"}${E&&E.length>0?` (a.k.a. ${E.join(",")})`:""}`,"getMiddlewareNameWithAliases"),Ro=s(()=>{let b=[],E=[],w=!1;const I=new Set,H=s(Je=>Je.sort((st,pt)=>as[pt.step]-as[st.step]||Zr[pt.priority||"normal"]-Zr[st.priority||"normal"]),"sort"),j=s(Je=>{let st=!1;const pt=s(Kt=>{const Cn=Qr(Kt.name,Kt.aliases);if(Cn.includes(Je)){st=!0;for(const Gt of Cn)I.delete(Gt);return!1}return!0},"filterCb");return b=b.filter(pt),E=E.filter(pt),st},"removeByName"),Q=s(Je=>{let st=!1;const pt=s(Kt=>{if(Kt.middleware===Je){st=!0;for(const Cn of Qr(Kt.name,Kt.aliases))I.delete(Cn);return!1}return!0},"filterCb");return b=b.filter(pt),E=E.filter(pt),st},"removeByReference"),ce=s(Je=>{var st;return b.forEach(pt=>{Je.add(pt.middleware,{...pt})}),E.forEach(pt=>{Je.addRelativeTo(pt.middleware,{...pt})}),(st=Je.identifyOnResolve)==null||st.call(Je,Qe.identifyOnResolve()),Je},"cloneTo"),Re=s(Je=>{const st=[];return Je.before.forEach(pt=>{pt.before.length===0&&pt.after.length===0?st.push(pt):st.push(...Re(pt))}),st.push(Je),Je.after.reverse().forEach(pt=>{pt.before.length===0&&pt.after.length===0?st.push(pt):st.push(...Re(pt))}),st},"expandRelativeMiddlewareList"),Ne=s((Je=!1)=>{const st=[],pt=[],Kt={};return b.forEach(Gt=>{const zn={...Gt,before:[],after:[]};for(const si of Qr(zn.name,zn.aliases))Kt[si]=zn;st.push(zn)}),E.forEach(Gt=>{const zn={...Gt,before:[],after:[]};for(const si of Qr(zn.name,zn.aliases))Kt[si]=zn;pt.push(zn)}),pt.forEach(Gt=>{if(Gt.toMiddleware){const zn=Kt[Gt.toMiddleware];if(zn===void 0){if(Je)return;throw new Error(`${Gt.toMiddleware} is not found when adding ${Br(Gt.name,Gt.aliases)} middleware ${Gt.relation} ${Gt.toMiddleware}`)}Gt.relation==="after"&&zn.after.push(Gt),Gt.relation==="before"&&zn.before.push(Gt)}}),H(st).map(Re).reduce((Gt,zn)=>(Gt.push(...zn),Gt),[])},"getMiddlewareList"),Qe={add:(Je,st={})=>{const{name:pt,override:Kt,aliases:Cn}=st,Gt={step:"initialize",priority:"normal",middleware:Je,...st},zn=Qr(pt,Cn);if(zn.length>0){if(zn.some(si=>I.has(si))){if(!Kt)throw new Error(`Duplicate middleware name '${Br(pt,Cn)}'`);for(const si of zn){const wr=b.findIndex(Jr=>{var An;return Jr.name===si||((An=Jr.aliases)==null?void 0:An.some(es=>es===si))});if(wr===-1)continue;const ar=b[wr];if(ar.step!==Gt.step||Gt.priority!==ar.priority)throw new Error(`"${Br(ar.name,ar.aliases)}" middleware with ${ar.priority} priority in ${ar.step} step cannot be overridden by "${Br(pt,Cn)}" middleware with ${Gt.priority} priority in ${Gt.step} step.`);b.splice(wr,1)}}for(const si of zn)I.add(si)}b.push(Gt)},addRelativeTo:(Je,st)=>{const{name:pt,override:Kt,aliases:Cn}=st,Gt={middleware:Je,...st},zn=Qr(pt,Cn);if(zn.length>0){if(zn.some(si=>I.has(si))){if(!Kt)throw new Error(`Duplicate middleware name '${Br(pt,Cn)}'`);for(const si of zn){const wr=E.findIndex(Jr=>{var An;return Jr.name===si||((An=Jr.aliases)==null?void 0:An.some(es=>es===si))});if(wr===-1)continue;const ar=E[wr];if(ar.toMiddleware!==Gt.toMiddleware||ar.relation!==Gt.relation)throw new Error(`"${Br(ar.name,ar.aliases)}" middleware ${ar.relation} "${ar.toMiddleware}" middleware cannot be overridden by "${Br(pt,Cn)}" middleware ${Gt.relation} "${Gt.toMiddleware}" middleware.`);E.splice(wr,1)}}for(const si of zn)I.add(si)}E.push(Gt)},clone:()=>ce(Ro()),use:Je=>{Je.applyToStack(Qe)},remove:Je=>typeof Je=="string"?j(Je):Q(Je),removeByTag:Je=>{let st=!1;const pt=s(Kt=>{const{tags:Cn,name:Gt,aliases:zn}=Kt;if(Cn&&Cn.includes(Je)){const si=Qr(Gt,zn);for(const wr of si)I.delete(wr);return st=!0,!1}return!0},"filterCb");return b=b.filter(pt),E=E.filter(pt),st},concat:Je=>{var pt;const st=ce(Ro());return st.use(Je),st.identifyOnResolve(w||st.identifyOnResolve()||(((pt=Je.identifyOnResolve)==null?void 0:pt.call(Je))??!1)),st},applyToStack:ce,identify:()=>Ne(!0).map(Je=>{const st=Je.step??Je.relation+" "+Je.toMiddleware;return Br(Je.name,Je.aliases)+" - "+st}),identifyOnResolve(Je){return typeof Je=="boolean"&&(w=Je),w},resolve:(Je,st)=>{for(const pt of Ne().map(Kt=>Kt.middleware).reverse())Je=pt(Je,st);return w&&console.log(Qe.identify()),Je}};return Qe},"constructStack"),as={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Zr={high:3,normal:2,low:1};class zo{constructor(E){this.config=E,this.middlewareStack=Ro()}send(E,w,I){const H=typeof w!="function"?w:void 0,j=typeof w=="function"?w:I,Q=H===void 0&&this.config.cacheMiddleware===!0;let ce;if(Q){this.handlers||(this.handlers=new WeakMap);const Re=this.handlers;Re.has(E.constructor)?ce=Re.get(E.constructor):(ce=E.resolveMiddleware(this.middlewareStack,this.config,H),Re.set(E.constructor,ce))}else delete this.handlers,ce=E.resolveMiddleware(this.middlewareStack,this.config,H);if(j)ce(E).then(Re=>j(null,Re.output),Re=>j(Re)).catch(()=>{});else return ce(E).then(Re=>Re.output)}destroy(){var E,w,I;(I=(w=(E=this.config)==null?void 0:E.requestHandler)==null?void 0:w.destroy)==null||I.call(w),delete this.handlers}}s(zo,"Client");const Gr={},lo=new Array(64);for(let b=0,E="A".charCodeAt(0),w="Z".charCodeAt(0);b+E<=w;b++){const I=String.fromCharCode(b+E);Gr[I]=b,lo[b]=I}for(let b=0,E="a".charCodeAt(0),w="z".charCodeAt(0);b+E<=w;b++){const I=String.fromCharCode(b+E),H=b+26;Gr[I]=H,lo[H]=I}for(let b=0;b<10;b++){Gr[b.toString(10)]=b+52;const E=b.toString(10),w=b+52;Gr[E]=w,lo[w]=E}Gr["+"]=62,lo[62]="+",Gr["/"]=63,lo[63]="/";const co=6,Co=8,wi=63,$o=s(b=>{let E=b.length/4*3;b.slice(-2)==="=="?E-=2:b.slice(-1)==="="&&E--;const w=new ArrayBuffer(E),I=new DataView(w);for(let H=0;H<b.length;H+=4){let j=0,Q=0;for(let Ne=H,Qe=H+3;Ne<=Qe;Ne++)if(b[Ne]!=="="){if(!(b[Ne]in Gr))throw new TypeError(`Invalid character ${b[Ne]} in base64 string.`);j|=Gr[b[Ne]]<<(Qe-Ne)*co,Q+=co}else j>>=co;const ce=H/4*3;j>>=Q%Co;const Re=Math.floor(Q/Co);for(let Ne=0;Ne<Re;Ne++){const Qe=(Re-Ne-1)*Co;I.setUint8(ce+Ne,(j&255<<Qe)>>Qe)}}return new Uint8Array(w)},"fromBase64"),uo=s(b=>new TextEncoder().encode(b),"fromUtf8");function Wi(b){let E;typeof b=="string"?E=uo(b):E=b;const w=typeof E=="object"&&typeof E.length=="number",I=typeof E=="object"&&typeof E.byteOffset=="number"&&typeof E.byteLength=="number";if(!w&&!I)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let H="";for(let j=0;j<E.length;j+=3){let Q=0,ce=0;for(let Ne=j,Qe=Math.min(j+3,E.length);Ne<Qe;Ne++)Q|=E[Ne]<<(Qe-Ne-1)*Co,ce+=Co;const Re=Math.ceil(ce/co);Q<<=Re*co-ce;for(let Ne=1;Ne<=Re;Ne++){const Qe=(Re-Ne)*co;H+=lo[(Q&wi<<Qe)>>Qe]}H+="==".slice(0,4-Re)}return H}s(Wi,"toBase64_browser_toBase64");const qr=s(b=>{if(typeof b=="string")return b;if(typeof b!="object"||typeof b.byteOffset!="number"||typeof b.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(b)},"toUtf8_browser_toUtf8");function ls(b,E="utf-8"){return E==="base64"?Wi(b):qr(b)}s(ls,"transformToString");function Po(b,E){return E==="base64"?ur.mutate($o(b)):ur.mutate(uo(b))}s(Po,"transformFromString");class ur extends Uint8Array{static fromString(E,w="utf-8"){switch(typeof E){case"string":return Po(E,w);default:throw new Error(`Unsupported conversion from ${typeof E} to Uint8ArrayBlobAdapter.`)}}static mutate(E){return Object.setPrototypeOf(E,ur.prototype),E}transformToString(E="utf-8"){return ls(this,E)}}s(ur,"Uint8ArrayBlobAdapter");const ko=s(b=>encodeURIComponent(b).replace(/[!'()*]/g,Jl),"escapeUri"),Jl=s(b=>`%${b.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode");function Yl(b){const E=[];for(let w of Object.keys(b).sort()){const I=b[w];if(w=ko(w),Array.isArray(I))for(let H=0,j=I.length;H<j;H++)E.push(`${w}=${ko(I[H])}`);else{let H=w;(I||typeof I=="string")&&(H+=`=${ko(I)}`),E.push(H)}}return E.join("&")}s(Yl,"buildQueryString");function Fc(b=0){return new Promise((E,w)=>{b&&setTimeout(()=>{const I=new Error(`Request did not complete within ${b} ms`);I.name="TimeoutError",w(I)},b)})}s(Fc,"requestTimeout");const Oa={supported:void 0};class $s{static create(E){return typeof(E==null?void 0:E.handle)=="function"?E:new $s(E)}constructor(E){typeof E=="function"?this.configProvider=E().then(w=>w||{}):(this.config=E??{},this.configProvider=Promise.resolve(this.config)),Oa.supported===void 0&&(Oa.supported=Boolean(typeof Request<"u"&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(E,{abortSignal:w}={}){var zn;this.config||(this.config=await this.configProvider);const I=this.config.requestTimeout,H=this.config.keepAlive===!0,j=this.config.credentials;if(w!=null&&w.aborted){const si=new Error("Request aborted");return si.name="AbortError",Promise.reject(si)}let Q=E.path;const ce=Yl(E.query||{});ce&&(Q+=`?${ce}`),E.fragment&&(Q+=`#${E.fragment}`);let Re="";if(E.username!=null||E.password!=null){const si=E.username??"",wr=E.password??"";Re=`${si}:${wr}@`}const{port:Ne,method:Qe}=E,Je=`${E.protocol}//${Re}${E.hostname}${Ne?`:${Ne}`:""}${Q}`,st=Qe==="GET"||Qe==="HEAD"?void 0:E.body,pt={body:st,headers:new Headers(E.headers),method:Qe,credentials:j};(zn=this.config)!=null&&zn.cache&&(pt.cache=this.config.cache),st&&(pt.duplex="half"),typeof AbortController<"u"&&(pt.signal=w),Oa.supported&&(pt.keepalive=H),typeof this.config.requestInit=="function"&&Object.assign(pt,this.config.requestInit(E));let Kt=s(()=>{},"removeSignalEventListener");const Cn=new Request(Je,pt),Gt=[fetch(Cn).then(si=>{const wr=si.headers,ar={};for(const An of wr.entries())ar[An[0]]=An[1];return si.body!=null?{response:new C({headers:ar,reason:si.statusText,statusCode:si.status,body:si.body})}:si.blob().then(An=>({response:new C({headers:ar,reason:si.statusText,statusCode:si.status,body:An})}))}),Fc(I)];return w&&Gt.push(new Promise((si,wr)=>{const ar=s(()=>{const Jr=new Error("Request aborted");Jr.name="AbortError",wr(Jr)},"onAbort");if(typeof w.addEventListener=="function"){const Jr=w;Jr.addEventListener("abort",ar,{once:!0}),Kt=s(()=>Jr.removeEventListener("abort",ar),"removeSignalEventListener")}else w.onabort=ar})),Promise.race(Gt).finally(Kt)}updateHttpClientConfig(E,w){this.config=void 0,this.configProvider=this.configProvider.then(I=>(I[E]=w,I))}httpHandlerConfigs(){return this.config??{}}}s($s,"FetchHttpHandler");const Ma=s(b=>typeof Blob=="function"&&b instanceof Blob?Bc(b):xc(b),"stream_collector_streamCollector");async function Bc(b){const E=await Xl(b),w=$o(E);return new Uint8Array(w)}s(Bc,"collectBlob");async function xc(b){const E=[],w=b.getReader();let I=!1,H=0;for(;!I;){const{done:ce,value:Re}=await w.read();Re&&(E.push(Re),H+=Re.length),I=ce}const j=new Uint8Array(H);let Q=0;for(const ce of E)j.set(ce,Q),Q+=ce.length;return j}s(xc,"collectStream");function Xl(b){return new Promise((E,w)=>{const I=new FileReader;I.onloadend=()=>{if(I.readyState!==2)return w(new Error("Reader aborted too early"));const H=I.result??"",j=H.indexOf(","),Q=j>-1?j+1:H.length;E(H.substring(Q))},I.onabort=()=>w(new Error("Read aborted")),I.onerror=()=>w(I.error),I.readAsDataURL(b)})}s(Xl,"readToBase64");const Ra={},_s={};for(let b=0;b<256;b++){let E=b.toString(16).toLowerCase();E.length===1&&(E=`0${E}`),Ra[b]=E,_s[E]=b}function Uc(b){if(b.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const E=new Uint8Array(b.length/2);for(let w=0;w<b.length;w+=2){const I=b.slice(w,w+2).toLowerCase();if(I in _s)E[w/2]=_s[I];else throw new Error(`Cannot decode unrecognized sequence ${I} as hexadecimal`)}return E}s(Uc,"fromHex");function No(b){let E="";for(let w=0;w<b.byteLength;w++)E+=Ra[b[w]];return E}s(No,"dist_es_toHex");const Ql="The stream has already been transformed.",Zl=s(b=>{var H,j;if(!Pa(b)&&!isReadableStream(b)){const Q=((j=(H=b==null?void 0:b.__proto__)==null?void 0:H.constructor)==null?void 0:j.name)||b;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${Q}`)}let E=!1;const w=s(async()=>{if(E)throw new Error(Ql);return E=!0,await streamCollector(b)},"transformToByteArray"),I=s(Q=>{if(typeof Q.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return Q.stream()},"blobToWebStream");return Object.assign(b,{transformToByteArray:w,transformToString:async Q=>{const ce=await w();if(Q==="base64")return toBase64(ce);if(Q==="hex")return toHex(ce);if(Q===void 0||Q==="utf8"||Q==="utf-8")return toUtf8(ce);if(typeof TextDecoder=="function")return new TextDecoder(Q).decode(ce);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(E)throw new Error(Ql);if(E=!0,Pa(b))return I(b);if(isReadableStream(b))return b;throw new Error(`Cannot transform payload to web stream, got ${b}`)}})},"sdkStreamMixin"),Pa=s(b=>typeof Blob=="function"&&b instanceof Blob,"isBlobInstance"),xr=s(async(b=new Uint8Array,E)=>{if(b instanceof Uint8Array)return ur.mutate(b);if(!b)return ur.mutate(new Uint8Array);const w=E.streamCollector(b);return ur.mutate(await w)},"collect_stream_body_collectBody");class kn{constructor(){this.middlewareStack=Ro()}static classBuilder(){return new ql}resolveMiddlewareWithContext(E,w,I,{middlewareFn:H,clientName:j,commandName:Q,inputFilterSensitiveLog:ce,outputFilterSensitiveLog:Re,smithyContext:Ne,additionalContext:Qe,CommandCtor:Je}){for(const Gt of H.bind(this)(Je,E,w,I))this.middlewareStack.use(Gt);const st=E.concat(this.middlewareStack),{logger:pt}=w,Kt={logger:pt,clientName:j,commandName:Q,inputFilterSensitiveLog:ce,outputFilterSensitiveLog:Re,[g]:{commandInstance:this,...Ne},...Qe},{requestHandler:Cn}=w;return st.resolve(Gt=>Cn.handle(Gt.request,I||{}),Kt)}}s(kn,"Command");class ql{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=E=>E,this._outputFilterSensitiveLog=E=>E,this._serializer=null,this._deserializer=null}init(E){this._init=E}ep(E){return this._ep=E,this}m(E){return this._middlewareFn=E,this}s(E,w,I={}){return this._smithyContext={service:E,operation:w,...I},this}c(E={}){return this._additionalContext=E,this}n(E,w){return this._clientName=E,this._commandName=w,this}f(E=I=>I,w=I=>I){return this._inputFilterSensitiveLog=E,this._outputFilterSensitiveLog=w,this}ser(E){return this._serializer=E,this}de(E){return this._deserializer=E,this}build(){const E=this;let w;return w=s(class extends kn{static getEndpointParameterInstructions(){return E._ep}constructor(...[I]){super(),this.serialize=E._serializer,this.deserialize=E._deserializer,this.input=I??{},E._init(this)}resolveMiddleware(I,H,j){return this.resolveMiddlewareWithContext(I,H,j,{CommandCtor:w,middlewareFn:E._middlewareFn,clientName:E._clientName,commandName:E._commandName,inputFilterSensitiveLog:E._inputFilterSensitiveLog,outputFilterSensitiveLog:E._outputFilterSensitiveLog,smithyContext:E._smithyContext,additionalContext:E._additionalContext})}},"CommandRef")}}s(ql,"ClassBuilder");const vn="***SensitiveInformation***",Vc=s((b,E)=>{for(const w of Object.keys(b)){const I=b[w],H=s(async function(Q,ce,Re){const Ne=new I(Q);if(typeof ce=="function")this.send(Ne,ce);else if(typeof Re=="function"){if(typeof ce!="object")throw new Error(`Expected http options but got ${typeof ce}`);this.send(Ne,ce||{},Re)}else return this.send(Ne,ce)},"methodImpl"),j=(w[0].toLowerCase()+w.slice(1)).replace(/Command$/,"");E.prototype[j]=H}},"createAggregatedClient"),Hc=s(b=>{switch(b){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${b}"`)}},"parseBoolean"),ka=s(b=>{if(b!=null){if(typeof b=="number"){if((b===0||b===1)&&eo.warn(Lo(`Expected boolean, got ${typeof b}: ${b}`)),b===0)return!1;if(b===1)return!0}if(typeof b=="string"){const E=b.toLowerCase();if((E==="false"||E==="true")&&eo.warn(Lo(`Expected boolean, got ${typeof b}: ${b}`)),E==="false")return!1;if(E==="true")return!0}if(typeof b=="boolean")return b;throw new TypeError(`Expected boolean, got ${typeof b}: ${b}`)}},"expectBoolean"),nr=s(b=>{if(b!=null){if(typeof b=="string"){const E=parseFloat(b);if(!Number.isNaN(E))return String(E)!==String(b)&&eo.warn(Lo(`Expected number but observed string: ${b}`)),E}if(typeof b=="number")return b;throw new TypeError(`Expected number, got ${typeof b}: ${b}`)}},"expectNumber"),Na=Math.ceil(2**127*(2-2**-23)),Cs=s(b=>{const E=nr(b);if(E!==void 0&&!Number.isNaN(E)&&E!==1/0&&E!==-1/0&&Math.abs(E)>Na)throw new TypeError(`Expected 32-bit float, got ${b}`);return E},"expectFloat32"),La=s(b=>{if(b!=null){if(Number.isInteger(b)&&!Number.isNaN(b))return b;throw new TypeError(`Expected integer, got ${typeof b}: ${b}`)}},"expectLong"),Wc=null,ec=s(b=>Fa(b,32),"expectInt32"),tc=s(b=>Fa(b,16),"expectShort"),nc=s(b=>Fa(b,8),"expectByte"),Fa=s((b,E)=>{const w=La(b);if(w!==void 0&&Gc(w,E)!==w)throw new TypeError(`Expected ${E}-bit integer, got ${b}`);return w},"expectSizedInt"),Gc=s((b,E)=>{switch(E){case 32:return Int32Array.of(b)[0];case 16:return Int16Array.of(b)[0];case 8:return Int8Array.of(b)[0]}},"castInt"),bn=s((b,E)=>{if(b==null)throw E?new TypeError(`Expected a non-null value for ${E}`):new TypeError("Expected a non-null value");return b},"expectNonNull"),ti=s(b=>{if(b==null)return;if(typeof b=="object"&&!Array.isArray(b))return b;const E=Array.isArray(b)?"array":typeof b;throw new TypeError(`Expected object, got ${E}: ${b}`)},"expectObject"),Ht=s(b=>{if(b!=null){if(typeof b=="string")return b;if(["boolean","number","bigint"].includes(typeof b))return eo.warn(Lo(`Expected string, got ${typeof b}: ${b}`)),String(b);throw new TypeError(`Expected string, got ${typeof b}: ${b}`)}},"expectString"),bu=s(b=>{if(b==null)return;const E=ti(b),w=Object.entries(E).filter(([,I])=>I!=null).map(([I])=>I);if(w.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(w.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${w} were not null.`);return E},"expectUnion"),ic=s(b=>nr(typeof b=="string"?cs(b):b),"strictParseDouble"),_u=null,Cu=s(b=>Cs(typeof b=="string"?cs(b):b),"parse_utils_strictParseFloat32"),jc=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,cs=s(b=>{const E=b.match(jc);if(E===null||E[0].length!==b.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(b)},"parseNumber"),Ba=s(b=>typeof b=="string"?xa(b):nr(b),"limitedParseDouble"),Tu=null,Iu=null,Du=s(b=>typeof b=="string"?xa(b):Cs(b),"limitedParseFloat32"),xa=s(b=>{switch(b){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${b}`)}},"parseFloatString"),Ua=s(b=>La(typeof b=="string"?cs(b):b),"strictParseLong"),zc=null,$c=s(b=>ec(typeof b=="string"?cs(b):b),"strictParseInt32"),Va=s(b=>tc(typeof b=="string"?cs(b):b),"parse_utils_strictParseShort"),Kc=s(b=>nc(typeof b=="string"?cs(b):b),"parse_utils_strictParseByte"),Lo=s(b=>String(new TypeError(b).stack||b).split(`
`).slice(0,5).filter(E=>!E.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),eo={warn:console.warn},Ha=null,Ks=null;function Au(b){const E=b.getUTCFullYear(),w=b.getUTCMonth(),I=b.getUTCDay(),H=b.getUTCDate(),j=b.getUTCHours(),Q=b.getUTCMinutes(),ce=b.getUTCSeconds(),Re=H<10?`0${H}`:`${H}`,Ne=j<10?`0${j}`:`${j}`,Qe=Q<10?`0${Q}`:`${Q}`,Je=ce<10?`0${ce}`:`${ce}`;return`${Ha[I]}, ${Re} ${Ks[w]} ${E} ${Ne}:${Qe}:${Je} GMT`}s(Au,"dateToUtcString");const Jc=null,Wa=s(b=>{if(b==null)return;if(typeof b!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const E=Jc.exec(b);if(!E)throw new TypeError("Invalid RFC-3339 date-time value");const[w,I,H,j,Q,ce,Re,Ne]=E,Qe=strictParseShort(ds(I)),Je=fo(H,"month",1,12),st=fo(j,"day",1,31);return Ts(Qe,Je,st,{hours:Q,minutes:ce,seconds:Re,fractionalMilliseconds:Ne})},"parseRfc3339DateTime"),Yc=null,wu=s(b=>{if(b==null)return;if(typeof b!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const E=Yc.exec(b);if(!E)throw new TypeError("Invalid RFC-3339 date-time value");const[w,I,H,j,Q,ce,Re,Ne,Qe]=E,Je=strictParseShort(ds(I)),st=fo(H,"month",1,12),pt=fo(j,"day",1,31),Kt=Ts(Je,st,pt,{hours:Q,minutes:ce,seconds:Re,fractionalMilliseconds:Ne});return Qe.toUpperCase()!="Z"&&Kt.setTime(Kt.getTime()-rd(Qe)),Kt},"parseRfc3339DateTimeWithOffset"),Xc=null,Qc=null,Zc=null,Ou=s(b=>{if(b==null)return;if(typeof b!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let E=Xc.exec(b);if(E){const[w,I,H,j,Q,ce,Re,Ne]=E;return Ts(strictParseShort(ds(j)),Js(H),fo(I,"day",1,31),{hours:Q,minutes:ce,seconds:Re,fractionalMilliseconds:Ne})}if(E=Qc.exec(b),E){const[w,I,H,j,Q,ce,Re,Ne]=E;return qc(Ts(rc(j),Js(H),fo(I,"day",1,31),{hours:Q,minutes:ce,seconds:Re,fractionalMilliseconds:Ne}))}if(E=Zc.exec(b),E){const[w,I,H,j,Q,ce,Re,Ne]=E;return Ts(strictParseShort(ds(Ne)),Js(I),fo(H.trimLeft(),"day",1,31),{hours:j,minutes:Q,seconds:ce,fractionalMilliseconds:Re})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),Cr=s(b=>{if(b==null)return;let E;if(typeof b=="number")E=b;else if(typeof b=="string")E=ic(b);else if(typeof b=="object"&&b.tag===1)E=b.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(E)||E===1/0||E===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(E*1e3))},"parseEpochTimestamp"),Ts=s((b,E,w,I)=>{const H=E-1;return td(b,H,w),new Date(Date.UTC(b,H,w,fo(I.hours,"hour",0,23),fo(I.minutes,"minute",0,59),fo(I.seconds,"seconds",0,60),id(I.fractionalMilliseconds)))},"buildDate"),rc=s(b=>{const E=new Date().getUTCFullYear(),w=Math.floor(E/100)*100+strictParseShort(ds(b));return w<E?w+100:w},"parseTwoDigitYear"),oc=null,qc=s(b=>b.getTime()-new Date().getTime()>oc?new Date(Date.UTC(b.getUTCFullYear()-100,b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())):b,"adjustRfc850Year"),Js=s(b=>{const E=Ks.indexOf(b);if(E<0)throw new TypeError(`Invalid month: ${b}`);return E+1},"parseMonthByShortName"),ed=null,td=s((b,E,w)=>{let I=ed[E];if(E===1&&nd(b)&&(I=29),w>I)throw new TypeError(`Invalid day for ${Ks[E]} in ${b}: ${w}`)},"validateDayOfMonth"),nd=s(b=>b%4===0&&(b%100!==0||b%400===0),"isLeapYear"),fo=s((b,E,w,I)=>{const H=strictParseByte(ds(b));if(H<w||H>I)throw new TypeError(`${E} must be between ${w} and ${I}, inclusive`);return H},"parseDateValue"),id=s(b=>b==null?0:strictParseFloat32("0."+b)*1e3,"parseMilliseconds"),rd=s(b=>{const E=b[0];let w=1;if(E=="+")w=1;else if(E=="-")w=-1;else throw new TypeError(`Offset direction, ${E}, must be "+" or "-"`);const I=Number(b.substring(1,3)),H=Number(b.substring(4,6));return w*(I*60+H)*60*1e3},"parseOffsetToMilliseconds"),ds=s(b=>{let E=0;for(;E<b.length-1&&b.charAt(E)==="0";)E++;return E===0?b:b.slice(E)},"stripLeadingZeroes");class Ys extends Error{constructor(E){super(E.message),Object.setPrototypeOf(this,Ys.prototype),this.name=E.name,this.$fault=E.$fault,this.$metadata=E.$metadata}}s(Ys,"ServiceException");const ho=s((b,E={})=>{Object.entries(E).filter(([,I])=>I!==void 0).forEach(([I,H])=>{(b[I]==null||b[I]==="")&&(b[I]=H)});const w=b.message||b.Message||"UnknownError";return b.message=w,delete b.Message,b},"decorateServiceException"),od=s(({output:b,parsedBody:E,exceptionCtor:w,errorCode:I})=>{const H=ad(b),j=H.httpStatusCode?H.httpStatusCode+"":void 0,Q=new w({name:(E==null?void 0:E.code)||(E==null?void 0:E.Code)||I||j||"UnknownError",$fault:"client",$metadata:H});throw ho(Q,E)},"throwDefaultError"),sd=s(b=>({output:E,parsedBody:w,errorCode:I})=>{od({output:E,parsedBody:w,exceptionCtor:b,errorCode:I})},"withBaseException"),ad=s(b=>({httpStatusCode:b.statusCode,requestId:b.headers["x-amzn-requestid"]??b.headers["x-amzn-request-id"]??b.headers["x-amz-request-id"],extendedRequestId:b.headers["x-amz-id-2"],cfId:b.headers["x-amz-cf-id"]}),"deserializeMetadata"),ld=s(b=>{switch(b){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),cd=s(b=>{const E=[];for(const w in n){const I=n[w];b[I]!==void 0&&E.push({algorithmId:()=>I,checksumConstructor:()=>b[I]})}return{_checksumAlgorithms:E,addChecksumAlgorithm(w){this._checksumAlgorithms.push(w)},checksumAlgorithms(){return this._checksumAlgorithms}}},"extensions_checksum_getChecksumConfiguration"),dd=s(b=>{const E={};return b.checksumAlgorithms().forEach(w=>{E[w.algorithmId()]=w.checksumConstructor()}),E},"extensions_checksum_resolveChecksumRuntimeConfig"),ud=s(b=>{let E=b.retryStrategy;return{setRetryStrategy(w){E=w},retryStrategy(){return E}}},"getRetryConfiguration"),fd=s(b=>{const E={};return E.retryStrategy=b.retryStrategy(),E},"resolveRetryRuntimeConfig"),hd=s(b=>({...cd(b),...ud(b)}),"getDefaultExtensionConfiguration"),Mu=null,pd=s(b=>({...dd(b),...fd(b)}),"defaultExtensionConfiguration_resolveDefaultRuntimeConfig"),ui=s(b=>b!=null,"isSerializableHeaderValue"),Ga=s(function(){const b=Object.getPrototypeOf(this).constructor,E=Function.bind.apply(String,[null,...arguments]),w=new E;return Object.setPrototypeOf(w,b.prototype),w},"StringWrapper");Ga.prototype=Object.create(String.prototype,{constructor:{value:Ga,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Ga,String);class Is extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(E){return E instanceof Is?E:E instanceof String||typeof E=="string"?new Is(E):new Is(JSON.stringify(E))}}s(Is,"LazyJsonString");class ja{trace(){}debug(){}info(){}warn(){}error(){}}s(ja,"NoOpLogger");function _t(b,E,w){let I,H,j;if(typeof E>"u"&&typeof w>"u")I={},j=b;else{if(I=b,typeof E=="function")return H=E,j=w,za(I,H,j);j=E}for(const Q of Object.keys(j)){if(!Array.isArray(j[Q])){I[Q]=j[Q];continue}Xs(I,null,j,Q)}return I}s(_t,"map");const Ru=s(b=>{const E={};for(const[w,I]of Object.entries(b||{}))E[w]=[,I];return E},"convertMap"),tn=s((b,E)=>{const w={};for(const I in E)Xs(w,b,E,I);return w},"take"),za=s((b,E,w)=>_t(b,Object.entries(w).reduce((I,[H,j])=>(Array.isArray(j)?I[H]=j:typeof j=="function"?I[H]=[E,j()]:I[H]=[E,j],I),{})),"mapWithFilter"),Xs=s((b,E,w,I)=>{if(E!==null){let Q=w[I];typeof Q=="function"&&(Q=[,Q]);const[ce=sc,Re=ac,Ne=I]=Q;(typeof ce=="function"&&ce(E[Ne])||typeof ce!="function"&&ce)&&(b[I]=Re(E[Ne]));return}let[H,j]=w[I];if(typeof j=="function"){let Q;const ce=H===void 0&&(Q=j())!=null,Re=typeof H=="function"&&!!H(void 0)||typeof H!="function"&&!!H;ce?b[I]=Q:Re&&(b[I]=j())}else{const Q=H===void 0&&j!=null,ce=typeof H=="function"&&!!H(j)||typeof H!="function"&&!!H;(Q||ce)&&(b[I]=j)}},"applyInstruction"),sc=s(b=>b!=null,"nonNullish"),ac=s(b=>b,"pass");function lc(b){return encodeURIComponent(b).replace(/[!'()*]/g,function(E){return"%"+E.charCodeAt(0).toString(16).toUpperCase()})}s(lc,"extendedEncodeURIComponent");const md=s((b,E,w,I,H,j)=>{if(E!=null&&E[w]!==void 0){const Q=I();if(Q.length<=0)throw new Error("Empty value provided for input HTTP label: "+w+".");b=b.replace(H,j?Q.split("/").map(ce=>lc(ce)).join("/"):lc(Q))}else throw new Error("No value provided for input HTTP label: "+w+".");return b},"resolvedPath"),Fo=s(b=>{if(b!==b)return"NaN";switch(b){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return b}},"serializeFloat"),us=s(b=>b.toISOString().replace(".000Z","Z"),"serializeDateTime"),Dn=s(b=>{if(b==null)return{};if(Array.isArray(b))return b.filter(E=>E!=null).map(Dn);if(typeof b=="object"){const E={};for(const w of Object.keys(b))b[w]!=null&&(E[w]=Dn(b[w]));return E}return b},"_json"),gd=s(b=>(b==null?void 0:b.body)instanceof ReadableStream,"isStreamingPayload"),cc=s(b=>(E,w)=>async I=>{var Q;let H=await b.retryStrategy();const j=await b.maxAttempts();if(Sd(H)){H=H;let ce=await H.acquireInitialRetryToken(w.partition_id),Re=new Error,Ne=0,Qe=0;const{request:Je}=I,st=y.isInstance(Je);for(st&&(Je.headers[Ur]=Ci());;)try{st&&(Je.headers[Yr]=`attempt=${Ne+1}; max=${j}`);const{response:pt,output:Kt}=await E(I);return H.recordSuccess(ce),Kt.$metadata.attempts=Ne+1,Kt.$metadata.totalRetryDelay=Qe,{response:pt,output:Kt}}catch(pt){const Kt=dc(pt);if(Re=tr(pt),st&&gd(Je))throw(Q=w.logger instanceof ja?console:w.logger)==null||Q.warn("An error was encountered in a non-retryable streaming request."),Re;try{ce=await H.refreshRetryTokenForRetry(ce,Kt)}catch{throw Re.$metadata||(Re.$metadata={}),Re.$metadata.attempts=Ne+1,Re.$metadata.totalRetryDelay=Qe,Re}Ne=ce.getRetryCount();const Cn=ce.getRetryDelay();Qe+=Cn,await new Promise(Gt=>setTimeout(Gt,Cn))}}else return H=H,H!=null&&H.mode&&(w.userAgent=[...w.userAgent||[],["cfg/retry-mode",H.mode]]),H.retry(E,I)},"retryMiddleware"),Sd=s(b=>typeof b.acquireInitialRetryToken<"u"&&typeof b.refreshRetryTokenForRetry<"u"&&typeof b.recordSuccess<"u","isRetryStrategyV2"),dc=s(b=>{const E={error:b,errorType:vd(b)},w=uc(b.$response);return w&&(E.retryAfterHint=w),E},"getRetryErrorInfo"),vd=s(b=>pi(b)?"THROTTLING":cn(b)?"TRANSIENT":En(b)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),fs={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},yd=s(b=>({applyToStack:E=>{E.add(cc(b),fs)}}),"getRetryPlugin"),uc=s(b=>{if(!C.isInstance(b))return;const E=Object.keys(b.headers).find(j=>j.toLowerCase()==="retry-after");if(!E)return;const w=b.headers[E],I=Number(w);return Number.isNaN(I)?new Date(w):new Date(I*1e3)},"getRetryAfterHint"),Ed={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:fs.name},P=s(b=>({applyToStack:E=>{E.addRelativeTo(dt(b),Ed)}}),"getHttpSigningPlugin");class B{constructor(E){this.authSchemes=new Map;for(const[w,I]of Object.entries(E))I!==void 0&&this.authSchemes.set(w,I)}getIdentityProvider(E){return this.authSchemes.get(E)}}s(B,"DefaultIdentityProviderConfig");class W{async sign(E,w,I){if(!I)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!I.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!I.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!w.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const H=HttpRequest.clone(E);if(I.in===HttpApiKeyAuthLocation.QUERY)H.query[I.name]=w.apiKey;else if(I.in===HttpApiKeyAuthLocation.HEADER)H.headers[I.name]=I.scheme?`${I.scheme} ${w.apiKey}`:w.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+I.in+"`");return H}}s(W,"HttpApiKeyAuthSigner");class q{async sign(E,w,I){const H=HttpRequest.clone(E);if(!w.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return H.headers.Authorization=`Bearer ${w.token}`,H}}s(q,"HttpBearerAuthSigner");const He=s(b=>E=>et(E)&&E.expiration.getTime()-Date.now()<b,"createIsIdentityExpiredFunction")(3e5),et=s(b=>b.expiration!==void 0,"doesIdentityRequireRefresh"),ze=s((b,E,w)=>{if(b===void 0)return;const I=typeof b!="function"?async()=>Promise.resolve(b):b;let H,j,Q,ce=!1;const Re=s(async Ne=>{j||(j=I(Ne));try{H=await j,Q=!0,ce=!1}finally{j=void 0}return H},"coalesceProvider");return E===void 0?async Ne=>((!Q||Ne!=null&&Ne.forceRefresh)&&(H=await Re(Ne)),H):async Ne=>((!Q||Ne!=null&&Ne.forceRefresh)&&(H=await Re(Ne)),ce?H:w(H)?(E(H)&&await Re(Ne),H):(ce=!0,H))},"memoizeIdentityProvider"),St=s(b=>b[SMITHY_CONTEXT_KEY]||(b[SMITHY_CONTEXT_KEY]={}),"getSmithyContext_getSmithyContext"),wt=s(b=>{if(typeof b=="function")return b;const E=Promise.resolve(b);return()=>E},"dist_es_normalizeProvider_normalizeProvider");function ot(b,E){return new Rt(b,E)}s(ot,"requestBuilder");class Rt{constructor(E,w){this.input=E,this.context=w,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:E,protocol:w="https",port:I,path:H}=await this.context.endpoint();this.path=H;for(const j of this.resolvePathStack)j(this.path);return new y({protocol:w,hostname:this.hostname||E,port:I,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(E){return this.hostname=E,this}bp(E){return this.resolvePathStack.push(w=>{this.path=`${w!=null&&w.endsWith("/")?w.slice(0,-1):w||""}`+E}),this}p(E,w,I,H){return this.resolvePathStack.push(j=>{this.path=md(j,this.input,E,w,I,H)}),this}h(E){return this.headers=E,this}q(E){return this.query=E,this}b(E){return this.body=E,this}m(E){return this.method=E,this}}s(Rt,"RequestBuilder");const Qt=s(async(b,E,w,...I)=>await E.send(new b(w),...I),"makePagedClientRequest");function Wt(b,E,w,I,H){return s(async function*(Q,ce,...Re){let Ne=Q.startingToken||void 0,Qe=!0,Je;for(;Qe;){if(ce[w]=Ne,H&&(ce[H]=ce[H]??Q.pageSize),Q.client instanceof b)Je=await Qt(E,Q.client,ce,...Re);else throw new Error(`Invalid client, expected instance of ${b.name}`);yield Je;const st=Ne;Ne=_n(Je,I),Qe=!!(Ne&&(!Q.stopOnSameToken||Ne!==st))}return void 0},"paginateOperation")}s(Wt,"createPaginator");const _n=s((b,E)=>{let w=b;const I=E.split(".");for(const H of I){if(!w||typeof w!="object")return;w=w[H]}return w},"get"),jn="content-length";function Pn(b){return E=>async w=>{const I=w.request;if(y.isInstance(I)){const{body:H,headers:j}=I;if(H&&Object.keys(j).map(Q=>Q.toLowerCase()).indexOf(jn)===-1)try{const Q=b(H);I.headers={...I.headers,[jn]:String(Q)}}catch{}}return E({...w,request:I})}}s(Pn,"contentLengthMiddleware");const ri={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ni=s(b=>({applyToStack:E=>{E.add(Pn(b.bodyLengthChecker),ri)}}),"getContentLengthPlugin"),gi=s(b=>typeof b=="string"?uo(b):ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(b),"toUint8Array"),Gi="X-Amz-Algorithm",ei="X-Amz-Credential",Mn="X-Amz-Date",vi="X-Amz-SignedHeaders",ir="X-Amz-Expires",Rn="X-Amz-Signature",ni="X-Amz-Security-Token",ji="X-Amz-Region-Set",fr="authorization",rr=Mn.toLowerCase(),Li=[fr,rr,"date"],jr=Rn.toLowerCase(),or="x-amz-content-sha256",zr=ni.toLowerCase(),Bo="host",bd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},$a=/^proxy-/,Qs=/^sec-/,fc=null,Ds="AWS4-HMAC-SHA256",hc="AWS4-ECDSA-P256-SHA256",Ka="AWS4-HMAC-SHA256-PAYLOAD",pc="UNSIGNED-PAYLOAD",Zs=50,Ja="aws4_request",_d=60*60*24*7,hs={},po=[],To=s((b,E,w)=>`${b}/${E}/${w}/${Ja}`,"createScope"),Ya=s(async(b,E,w,I,H)=>{const j=await As(b,E.secretAccessKey,E.accessKeyId),Q=`${w}:${I}:${H}:${No(j)}:${E.sessionToken}`;if(Q in hs)return hs[Q];for(po.push(Q);po.length>Zs;)delete hs[po.shift()];let ce=`AWS4${E.secretAccessKey}`;for(const Re of[w,I,H,Ja])ce=await As(b,ce,Re);return hs[Q]=ce},"getSigningKey"),Cd=s(()=>{po.length=0,Object.keys(hs).forEach(b=>{delete hs[b]})},"clearCredentialCache"),As=s((b,E,w)=>{const I=new b(E);return I.update(gi(w)),I.digest()},"hmac"),qs=s(({headers:b},E,w)=>{const I={};for(const H of Object.keys(b).sort()){if(b[H]==null)continue;const j=H.toLowerCase();(j in bd||E!=null&&E.has(j)||$a.test(j)||Qs.test(j))&&(!w||w&&!w.has(j))||(I[j]=b[H].trim().replace(/\s+/g," "))}return I},"getCanonicalHeaders"),Oi=s(({query:b={}})=>{const E=[],w={};for(const I of Object.keys(b)){if(I.toLowerCase()===jr)continue;const H=ko(I);E.push(H);const j=b[I];typeof j=="string"?w[H]=`${H}=${ko(j)}`:Array.isArray(j)&&(w[H]=j.slice(0).reduce((Q,ce)=>Q.concat([`${H}=${ko(ce)}`]),[]).sort().join("&"))}return E.sort().map(I=>w[I]).filter(I=>I).join("&")},"getCanonicalQuery"),to=s(b=>typeof ArrayBuffer=="function"&&b instanceof ArrayBuffer||Object.prototype.toString.call(b)==="[object ArrayBuffer]","isArrayBuffer"),bi=s(async({headers:b,body:E},w)=>{for(const I of Object.keys(b))if(I.toLowerCase()===or)return b[I];if(E==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof E=="string"||ArrayBuffer.isView(E)||to(E)){const I=new w;return I.update(gi(E)),No(await I.digest())}return pc},"getPayloadHash");class zi{format(E){const w=[];for(const j of Object.keys(E)){const Q=uo(j);w.push(Uint8Array.from([Q.byteLength]),Q,this.formatHeaderValue(E[j]))}const I=new Uint8Array(w.reduce((j,Q)=>j+Q.byteLength,0));let H=0;for(const j of w)I.set(j,H),H+=j.byteLength;return I}formatHeaderValue(E){switch(E.type){case"boolean":return Uint8Array.from([E.value?0:1]);case"byte":return Uint8Array.from([2,E.value]);case"short":const w=new DataView(new ArrayBuffer(3));return w.setUint8(0,3),w.setInt16(1,E.value,!1),new Uint8Array(w.buffer);case"integer":const I=new DataView(new ArrayBuffer(5));return I.setUint8(0,4),I.setInt32(1,E.value,!1),new Uint8Array(I.buffer);case"long":const H=new Uint8Array(9);return H[0]=5,H.set(E.value.bytes,1),H;case"binary":const j=new DataView(new ArrayBuffer(3+E.value.byteLength));j.setUint8(0,6),j.setUint16(1,E.value.byteLength,!1);const Q=new Uint8Array(j.buffer);return Q.set(E.value,3),Q;case"string":const ce=uo(E.value),Re=new DataView(new ArrayBuffer(3+ce.byteLength));Re.setUint8(0,7),Re.setUint16(1,ce.byteLength,!1);const Ne=new Uint8Array(Re.buffer);return Ne.set(ce,3),Ne;case"timestamp":const Qe=new Uint8Array(9);return Qe[0]=8,Qe.set(ea.fromNumber(E.value.valueOf()).bytes,1),Qe;case"uuid":if(!Ko.test(E.value))throw new Error(`Invalid UUID received: ${E.value}`);const Je=new Uint8Array(17);return Je[0]=9,Je.set(Uc(E.value.replace(/\-/g,"")),1),Je}}}s(zi,"HeaderFormatter");var Ti;(function(b){b[b.boolTrue=0]="boolTrue",b[b.boolFalse=1]="boolFalse",b[b.byte=2]="byte",b[b.short=3]="short",b[b.integer=4]="integer",b[b.long=5]="long",b[b.byteArray=6]="byteArray",b[b.string=7]="string",b[b.timestamp=8]="timestamp",b[b.uuid=9]="uuid"})(Ti||(Ti={}));const Ko=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class ea{constructor(E){if(this.bytes=E,E.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(E){if(E>9223372036854776e3||E<-9223372036854776e3)throw new Error(`${E} is too large (or, if negative, too small) to represent as an Int64`);const w=new Uint8Array(8);for(let I=7,H=Math.abs(Math.round(E));I>-1&&H>0;I--,H/=256)w[I]=H;return E<0&&Pu(w),new ea(w)}valueOf(){const E=this.bytes.slice(0),w=E[0]&128;return w&&Pu(E),parseInt(No(E),16)*(w?-1:1)}toString(){return String(this.valueOf())}}s(ea,"Int64");function Pu(b){for(let E=0;E<8;E++)b[E]^=255;for(let E=7;E>-1&&(b[E]++,b[E]===0);E--);}s(Pu,"negate");const Yh=s((b,E)=>{b=b.toLowerCase();for(const w of Object.keys(E))if(b===w.toLowerCase())return!0;return!1},"hasHeader"),US=s((b,E)=>{b=b.toLowerCase();for(const w of Object.keys(E))if(b===w.toLowerCase())return E[w]},"getHeaderValue"),VS=s((b,E)=>{b=b.toLowerCase();for(const w of Object.keys(E))b===w.toLowerCase()&&delete E[w]},"deleteHeader"),Xh=s((b,E={})=>{var H,j;const{headers:w,query:I={}}=y.clone(b);for(const Q of Object.keys(w)){const ce=Q.toLowerCase();(ce.slice(0,6)==="x-amz-"&&!((H=E.unhoistableHeaders)!=null&&H.has(ce))||(j=E.hoistableHeaders)!=null&&j.has(ce))&&(I[Q]=w[Q],delete w[Q])}return{...b,headers:w,query:I}},"moveHeadersToQuery"),ku=s(b=>{b=y.clone(b);for(const E of Object.keys(b.headers))Li.indexOf(E.toLowerCase())>-1&&delete b.headers[E];return b},"prepareRequest"),Qh=s(b=>Zh(b).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),Zh=s(b=>typeof b=="number"?new Date(b*1e3):typeof b=="string"?Number(b)?new Date(Number(b)*1e3):new Date(b):b,"toDate");class Td{constructor({applyChecksum:E,credentials:w,region:I,service:H,sha256:j,uriEscapePath:Q=!0}){this.headerFormatter=new zi,this.service=H,this.sha256=j,this.uriEscapePath=Q,this.applyChecksum=typeof E=="boolean"?E:!0,this.regionProvider=In(I),this.credentialProvider=In(w)}async presign(E,w={}){const{signingDate:I=new Date,expiresIn:H=3600,unsignableHeaders:j,unhoistableHeaders:Q,signableHeaders:ce,hoistableHeaders:Re,signingRegion:Ne,signingService:Qe}=w,Je=await this.credentialProvider();this.validateResolvedCredentials(Je);const st=Ne??await this.regionProvider(),{longDate:pt,shortDate:Kt}=mc(I);if(H>_d)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const Cn=To(Kt,st,Qe??this.service),Gt=Xh(ku(E),{unhoistableHeaders:Q,hoistableHeaders:Re});Je.sessionToken&&(Gt.query[ni]=Je.sessionToken),Gt.query[Gi]=Ds,Gt.query[ei]=`${Je.accessKeyId}/${Cn}`,Gt.query[Mn]=pt,Gt.query[ir]=H.toString(10);const zn=qs(Gt,j,ce);return Gt.query[vi]=Nu(zn),Gt.query[Rn]=await this.getSignature(pt,Cn,this.getSigningKey(Je,st,Kt,Qe),this.createCanonicalRequest(Gt,zn,await bi(E,this.sha256))),Gt}async sign(E,w){return typeof E=="string"?this.signString(E,w):E.headers&&E.payload?this.signEvent(E,w):E.message?this.signMessage(E,w):this.signRequest(E,w)}async signEvent({headers:E,payload:w},{signingDate:I=new Date,priorSignature:H,signingRegion:j,signingService:Q}){const ce=j??await this.regionProvider(),{shortDate:Re,longDate:Ne}=mc(I),Qe=To(Re,ce,Q??this.service),Je=await bi({headers:{},body:w},this.sha256),st=new this.sha256;st.update(E);const pt=No(await st.digest()),Kt=[Ka,Ne,Qe,H,pt,Je].join(`
`);return this.signString(Kt,{signingDate:I,signingRegion:ce,signingService:Q})}async signMessage(E,{signingDate:w=new Date,signingRegion:I,signingService:H}){return this.signEvent({headers:this.headerFormatter.format(E.message.headers),payload:E.message.body},{signingDate:w,signingRegion:I,signingService:H,priorSignature:E.priorSignature}).then(Q=>({message:E.message,signature:Q}))}async signString(E,{signingDate:w=new Date,signingRegion:I,signingService:H}={}){const j=await this.credentialProvider();this.validateResolvedCredentials(j);const Q=I??await this.regionProvider(),{shortDate:ce}=mc(w),Re=new this.sha256(await this.getSigningKey(j,Q,ce,H));return Re.update(gi(E)),No(await Re.digest())}async signRequest(E,{signingDate:w=new Date,signableHeaders:I,unsignableHeaders:H,signingRegion:j,signingService:Q}={}){const ce=await this.credentialProvider();this.validateResolvedCredentials(ce);const Re=j??await this.regionProvider(),Ne=ku(E),{longDate:Qe,shortDate:Je}=mc(w),st=To(Je,Re,Q??this.service);Ne.headers[rr]=Qe,ce.sessionToken&&(Ne.headers[zr]=ce.sessionToken);const pt=await bi(Ne,this.sha256);!Yh(or,Ne.headers)&&this.applyChecksum&&(Ne.headers[or]=pt);const Kt=qs(Ne,H,I),Cn=await this.getSignature(Qe,st,this.getSigningKey(ce,Re,Je,Q),this.createCanonicalRequest(Ne,Kt,pt));return Ne.headers[fr]=`${Ds} Credential=${ce.accessKeyId}/${st}, SignedHeaders=${Nu(Kt)}, Signature=${Cn}`,Ne}createCanonicalRequest(E,w,I){const H=Object.keys(w).sort();return`${E.method}
${this.getCanonicalPath(E)}
${Oi(E)}
${H.map(j=>`${j}:${w[j]}`).join(`
`)}

${H.join(";")}
${I}`}async createStringToSign(E,w,I){const H=new this.sha256;H.update(gi(I));const j=await H.digest();return`${Ds}
${E}
${w}
${No(j)}`}getCanonicalPath({path:E}){if(this.uriEscapePath){const w=[];for(const j of E.split("/"))(j==null?void 0:j.length)!==0&&j!=="."&&(j===".."?w.pop():w.push(j));const I=`${E!=null&&E.startsWith("/")?"/":""}${w.join("/")}${w.length>0&&(E!=null&&E.endsWith("/"))?"/":""}`;return ko(I).replace(/%2F/g,"/")}return E}async getSignature(E,w,I,H){const j=await this.createStringToSign(E,w,H),Q=new this.sha256(await I);return Q.update(gi(j)),No(await Q.digest())}getSigningKey(E,w,I,H){return Ya(this.sha256,E,I,w,H||this.service)}validateResolvedCredentials(E){if(typeof E!="object"||typeof E.accessKeyId!="string"||typeof E.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}s(Td,"SignatureV4");const mc=s(b=>{const E=Qh(b).replace(/[\-:]/g,"");return{longDate:E,shortDate:E.slice(0,8)}},"formatDate"),Nu=s(b=>Object.keys(b).sort().join(";"),"getCanonicalHeaderList"),qh=s(b=>{let E;b.credentials&&(E=ze(b.credentials,He,et)),E||(b.credentialDefaultProvider?E=wt(b.credentialDefaultProvider(Object.assign({},b,{parentClientConfig:b}))):E=(0,c.coroutine)(function*(){throw new Error("`credentials` is missing")}));const{signingEscapePath:w=!0,systemClockOffset:I=b.systemClockOffset||0,sha256:H}=b;let j;return b.signer?j=wt(b.signer):b.regionInfoProvider?j=s(()=>wt(b.region)().then(function(){var Q=(0,c.coroutine)(function*(ce){return[(yield b.regionInfoProvider(ce,{useFipsEndpoint:yield b.useFipsEndpoint(),useDualstackEndpoint:yield b.useDualstackEndpoint()}))||{},ce]});return function(ce){return Q.apply(this,arguments)}}()).then(Q=>{let[ce,Re]=Q;const{signingRegion:Ne,signingService:Qe}=ce;b.signingRegion=b.signingRegion||Ne||Re,b.signingName=b.signingName||Qe||b.serviceId;const Je={...b,credentials:E,region:b.signingRegion,service:b.signingName,sha256:H,uriEscapePath:w},st=b.signerConstructor||Td;return new st(Je)}),"signer"):j=function(){var Q=(0,c.coroutine)(function*(ce){ce=Object.assign({},{name:"sigv4",signingName:b.signingName||b.defaultSigningName,signingRegion:yield wt(b.region)(),properties:{}},ce);const Re=ce.signingRegion,Ne=ce.signingName;b.signingRegion=b.signingRegion||Re,b.signingName=b.signingName||Ne||b.serviceId;const Qe={...b,credentials:E,region:b.signingRegion,service:b.signingName,sha256:H,uriEscapePath:w},Je=b.signerConstructor||Td;return new Je(Qe)});return function(ce){return Q.apply(this,arguments)}}(),{...b,systemClockOffset:I,signingEscapePath:w,credentials:E,signer:j}},"resolveAwsSdkSigV4Config"),HS=null,ep=function(){var b=(0,c.coroutine)(function*(E,w,I){return{operation:gn(w).operation,region:(yield In(E.region)())||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}});return s(function(w,I,H){return b.apply(this,arguments)},"defaultChimeSDKMessagingHttpAuthSchemeParametersProvider")}();function tp(b){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"chime",region:b.region},propertiesExtractor:(E,w)=>({signingProperties:{config:E,context:w}})}}s(tp,"createAwsAuthSigv4HttpAuthOption");const np=s(b=>{const E=[];switch(b.operation){default:E.push(tp(b))}return E},"defaultChimeSDKMessagingHttpAuthSchemeProvider"),ip=s(b=>({...qh(b)}),"resolveHttpAuthSchemeConfig"),rp=s(b=>{var E,w;return{...b,useDualstackEndpoint:(E=b.useDualstackEndpoint)!==null&&E!==void 0?E:!1,useFipsEndpoint:(w=b.useFipsEndpoint)!==null&&w!==void 0?w:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters"),Gn={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var op=d(7229287800),sp=d.n(op);const ap=s(b=>new TextEncoder().encode(b),"fromUtf8_browser_fromUtf8");var lp=typeof Buffer<"u"&&Buffer.from?function(b){return Buffer.from(b,"utf8")}:ap;function Xa(b){return b instanceof Uint8Array?b:typeof b=="string"?lp(b):ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(b)}s(Xa,"convertToBuffer");function Id(b){return typeof b=="string"?b.length===0:b.byteLength===0}s(Id,"isEmptyData");var Lu={name:"SHA-256"},Fu={name:"HMAC",hash:Lu},cp=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const dp={};function gc(){return typeof window<"u"?window:typeof self<"u"?self:dp}s(gc,"locateWindow");var up=function(){function b(E){this.toHash=new Uint8Array(0),this.secret=E,this.reset()}return s(b,"Sha256"),b.prototype.update=function(E){if(!Id(E)){var w=Xa(E),I=new Uint8Array(this.toHash.byteLength+w.byteLength);I.set(this.toHash,0),I.set(w,this.toHash.byteLength),this.toHash=I}},b.prototype.digest=function(){var E=this;return this.key?this.key.then(function(w){return gc().crypto.subtle.sign(Fu,w,E.toHash).then(function(I){return new Uint8Array(I)})}):Id(this.toHash)?Promise.resolve(cp):Promise.resolve().then(function(){return gc().crypto.subtle.digest(Lu,E.toHash)}).then(function(w){return Promise.resolve(new Uint8Array(w))})},b.prototype.reset=function(){var E=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(w,I){gc().crypto.subtle.importKey("raw",Xa(E.secret),Fu,!1,["sign"]).then(w,I)}),this.key.catch(function(){}))},b}(),Dd=s(function(b,E){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,I){w.__proto__=I}||function(w,I){for(var H in I)Object.prototype.hasOwnProperty.call(I,H)&&(w[H]=I[H])},Dd(b,E)},"extendStatics");function fp(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");Dd(b,E);function w(){this.constructor=b}s(w,"__"),b.prototype=E===null?Object.create(E):(w.prototype=E.prototype,new w)}s(fp,"__extends");var Ad=s(function(){return Ad=Object.assign||s(function(E){for(var w,I=1,H=arguments.length;I<H;I++){w=arguments[I];for(var j in w)Object.prototype.hasOwnProperty.call(w,j)&&(E[j]=w[j])}return E},"__assign"),Ad.apply(this,arguments)},"__assign");function hp(b,E){var w={};for(var I in b)Object.prototype.hasOwnProperty.call(b,I)&&E.indexOf(I)<0&&(w[I]=b[I]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,I=Object.getOwnPropertySymbols(b);H<I.length;H++)E.indexOf(I[H])<0&&Object.prototype.propertyIsEnumerable.call(b,I[H])&&(w[I[H]]=b[I[H]]);return w}s(hp,"__rest");function pp(b,E,w,I){var H=arguments.length,j=H<3?E:I===null?I=Object.getOwnPropertyDescriptor(E,w):I,Q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(b,E,w,I);else for(var ce=b.length-1;ce>=0;ce--)(Q=b[ce])&&(j=(H<3?Q(j):H>3?Q(E,w,j):Q(E,w))||j);return H>3&&j&&Object.defineProperty(E,w,j),j}s(pp,"__decorate");function mp(b,E){return function(w,I){E(w,I,b)}}s(mp,"__param");function WS(b,E,w,I,H,j){function Q(zn){if(zn!==void 0&&typeof zn!="function")throw new TypeError("Function expected");return zn}s(Q,"accept");for(var ce=I.kind,Re=ce==="getter"?"get":ce==="setter"?"set":"value",Ne=!E&&b?I.static?b:b.prototype:null,Qe=E||(Ne?Object.getOwnPropertyDescriptor(Ne,I.name):{}),Je,st=!1,pt=w.length-1;pt>=0;pt--){var Kt={};for(var Cn in I)Kt[Cn]=Cn==="access"?{}:I[Cn];for(var Cn in I.access)Kt.access[Cn]=I.access[Cn];Kt.addInitializer=function(zn){if(st)throw new TypeError("Cannot add initializers after decoration has completed");j.push(Q(zn||null))};var Gt=(0,w[pt])(ce==="accessor"?{get:Qe.get,set:Qe.set}:Qe[Re],Kt);if(ce==="accessor"){if(Gt===void 0)continue;if(Gt===null||typeof Gt!="object")throw new TypeError("Object expected");(Je=Q(Gt.get))&&(Qe.get=Je),(Je=Q(Gt.set))&&(Qe.set=Je),(Je=Q(Gt.init))&&H.unshift(Je)}else(Je=Q(Gt))&&(ce==="field"?H.unshift(Je):Qe[Re]=Je)}Ne&&Object.defineProperty(Ne,I.name,Qe),st=!0}s(WS,"__esDecorate");function GS(b,E,w){for(var I=arguments.length>2,H=0;H<E.length;H++)w=I?E[H].call(b,w):E[H].call(b);return I?w:void 0}s(GS,"__runInitializers");function jS(b){return typeof b=="symbol"?b:"".concat(b)}s(jS,"__propKey");function zS(b,E,w){return typeof E=="symbol"&&(E=E.description?"[".concat(E.description,"]"):""),Object.defineProperty(b,"name",{configurable:!0,value:w?"".concat(w," ",E):E})}s(zS,"__setFunctionName");function gp(b,E){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(b,E)}s(gp,"__metadata");function Bu(b,E,w,I){function H(j){return j instanceof w?j:new w(function(Q){Q(j)})}return s(H,"adopt"),new(w||(w=Promise))(function(j,Q){function ce(Qe){try{Ne(I.next(Qe))}catch(Je){Q(Je)}}s(ce,"fulfilled");function Re(Qe){try{Ne(I.throw(Qe))}catch(Je){Q(Je)}}s(Re,"rejected");function Ne(Qe){Qe.done?j(Qe.value):H(Qe.value).then(ce,Re)}s(Ne,"step"),Ne((I=I.apply(b,E||[])).next())})}s(Bu,"tslib_es6_awaiter");function xu(b,E){var w={label:0,sent:function(){if(j[0]&1)throw j[1];return j[1]},trys:[],ops:[]},I,H,j,Q;return Q={next:ce(0),throw:ce(1),return:ce(2)},typeof Symbol=="function"&&(Q[Symbol.iterator]=function(){return this}),Q;function ce(Ne){return function(Qe){return Re([Ne,Qe])}}function Re(Ne){if(I)throw new TypeError("Generator is already executing.");for(;Q&&(Q=0,Ne[0]&&(w=0)),w;)try{if(I=1,H&&(j=Ne[0]&2?H.return:Ne[0]?H.throw||((j=H.return)&&j.call(H),0):H.next)&&!(j=j.call(H,Ne[1])).done)return j;switch(H=0,j&&(Ne=[Ne[0]&2,j.value]),Ne[0]){case 0:case 1:j=Ne;break;case 4:return w.label++,{value:Ne[1],done:!1};case 5:w.label++,H=Ne[1],Ne=[0];continue;case 7:Ne=w.ops.pop(),w.trys.pop();continue;default:if(j=w.trys,!(j=j.length>0&&j[j.length-1])&&(Ne[0]===6||Ne[0]===2)){w=0;continue}if(Ne[0]===3&&(!j||Ne[1]>j[0]&&Ne[1]<j[3])){w.label=Ne[1];break}if(Ne[0]===6&&w.label<j[1]){w.label=j[1],j=Ne;break}if(j&&w.label<j[2]){w.label=j[2],w.ops.push(Ne);break}j[2]&&w.ops.pop(),w.trys.pop();continue}Ne=E.call(b,w)}catch(Qe){Ne=[6,Qe],H=0}finally{I=j=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}}s(xu,"tslib_es6_generator");var wd=Object.create?function(b,E,w,I){I===void 0&&(I=w);var H=Object.getOwnPropertyDescriptor(E,w);(!H||("get"in H?!E.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return E[w]}}),Object.defineProperty(b,I,H)}:function(b,E,w,I){I===void 0&&(I=w),b[I]=E[w]};function Sp(b,E){for(var w in b)w!=="default"&&!Object.prototype.hasOwnProperty.call(E,w)&&wd(E,b,w)}s(Sp,"__exportStar");function Od(b){var E=typeof Symbol=="function"&&Symbol.iterator,w=E&&b[E],I=0;if(w)return w.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&I>=b.length&&(b=void 0),{value:b&&b[I++],done:!b}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}s(Od,"__values");function Uu(b,E){var w=typeof Symbol=="function"&&b[Symbol.iterator];if(!w)return b;var I=w.call(b),H,j=[],Q;try{for(;(E===void 0||E-- >0)&&!(H=I.next()).done;)j.push(H.value)}catch(ce){Q={error:ce}}finally{try{H&&!H.done&&(w=I.return)&&w.call(I)}finally{if(Q)throw Q.error}}return j}s(Uu,"__read");function vp(){for(var b=[],E=0;E<arguments.length;E++)b=b.concat(Uu(arguments[E]));return b}s(vp,"__spread");function yp(){for(var b=0,E=0,w=arguments.length;E<w;E++)b+=arguments[E].length;for(var I=Array(b),H=0,E=0;E<w;E++)for(var j=arguments[E],Q=0,ce=j.length;Q<ce;Q++,H++)I[H]=j[Q];return I}s(yp,"__spreadArrays");function Ep(b,E,w){if(w||arguments.length===2)for(var I=0,H=E.length,j;I<H;I++)(j||!(I in E))&&(j||(j=Array.prototype.slice.call(E,0,I)),j[I]=E[I]);return b.concat(j||Array.prototype.slice.call(E))}s(Ep,"__spreadArray");function Qa(b){return this instanceof Qa?(this.v=b,this):new Qa(b)}s(Qa,"__await");function bp(b,E,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=w.apply(b,E||[]),H,j=[];return H={},Q("next"),Q("throw"),Q("return"),H[Symbol.asyncIterator]=function(){return this},H;function Q(st){I[st]&&(H[st]=function(pt){return new Promise(function(Kt,Cn){j.push([st,pt,Kt,Cn])>1||ce(st,pt)})})}function ce(st,pt){try{Re(I[st](pt))}catch(Kt){Je(j[0][3],Kt)}}function Re(st){st.value instanceof Qa?Promise.resolve(st.value.v).then(Ne,Qe):Je(j[0][2],st)}function Ne(st){ce("next",st)}function Qe(st){ce("throw",st)}function Je(st,pt){st(pt),j.shift(),j.length&&ce(j[0][0],j[0][1])}}s(bp,"__asyncGenerator");function _p(b){var E,w;return E={},I("next"),I("throw",function(H){throw H}),I("return"),E[Symbol.iterator]=function(){return this},E;function I(H,j){E[H]=b[H]?function(Q){return(w=!w)?{value:Qa(b[H](Q)),done:!1}:j?j(Q):Q}:j}}s(_p,"__asyncDelegator");function Cp(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=b[Symbol.asyncIterator],w;return E?E.call(b):(b=typeof Od=="function"?Od(b):b[Symbol.iterator](),w={},I("next"),I("throw"),I("return"),w[Symbol.asyncIterator]=function(){return this},w);function I(j){w[j]=b[j]&&function(Q){return new Promise(function(ce,Re){Q=b[j](Q),H(ce,Re,Q.done,Q.value)})}}function H(j,Q,ce,Re){Promise.resolve(Re).then(function(Ne){j({value:Ne,done:ce})},Q)}}s(Cp,"__asyncValues");function Tp(b,E){return Object.defineProperty?Object.defineProperty(b,"raw",{value:E}):b.raw=E,b}s(Tp,"__makeTemplateObject");var Ip=Object.create?function(b,E){Object.defineProperty(b,"default",{enumerable:!0,value:E})}:function(b,E){b.default=E};function Dp(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var w in b)w!=="default"&&Object.prototype.hasOwnProperty.call(b,w)&&wd(E,b,w);return Ip(E,b),E}s(Dp,"__importStar");function Ap(b){return b&&b.__esModule?b:{default:b}}s(Ap,"__importDefault");function wp(b,E,w,I){if(w==="a"&&!I)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?b!==E||!I:!E.has(b))throw new TypeError("Cannot read private member from an object whose class did not declare it");return w==="m"?I:w==="a"?I.call(b):I?I.value:E.get(b)}s(wp,"__classPrivateFieldGet");function Op(b,E,w,I,H){if(I==="m")throw new TypeError("Private method is not writable");if(I==="a"&&!H)throw new TypeError("Private accessor was defined without a setter");if(typeof E=="function"?b!==E||!H:!E.has(b))throw new TypeError("Cannot write private member to an object whose class did not declare it");return I==="a"?H.call(b,w):H?H.value=w:E.set(b,w),w}s(Op,"__classPrivateFieldSet");function Mp(b,E){if(E===null||typeof E!="object"&&typeof E!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof b=="function"?E===b:b.has(E)}s(Mp,"__classPrivateFieldIn");function Rp(b,E,w){if(E!=null){if(typeof E!="object"&&typeof E!="function")throw new TypeError("Object expected.");var I;if(w){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");I=E[Symbol.asyncDispose]}if(I===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");I=E[Symbol.dispose]}if(typeof I!="function")throw new TypeError("Object not disposable.");b.stack.push({value:E,dispose:I,async:w})}else w&&b.stack.push({async:!0});return E}s(Rp,"__addDisposableResource");var Pp=typeof SuppressedError=="function"?SuppressedError:function(b,E,w){var I=new Error(w);return I.name="SuppressedError",I.error=b,I.suppressed=E,I};function kp(b){function E(I){b.error=b.hasError?new Pp(I,b.error,"An error was suppressed during disposal."):I,b.hasError=!0}s(E,"fail");function w(){for(;b.stack.length;){var I=b.stack.pop();try{var H=I.dispose&&I.dispose.call(I.value);if(I.async)return Promise.resolve(H).then(w,function(j){return E(j),w()})}catch(j){E(j)}}if(b.hasError)throw b.error}return s(w,"next"),w()}s(kp,"__disposeResources");const $S={__extends:fp,__assign:Ad,__rest:hp,__decorate:pp,__param:mp,__metadata:gp,__awaiter:Bu,__generator:xu,__createBinding:wd,__exportStar:Sp,__values:Od,__read:Uu,__spread:vp,__spreadArrays:yp,__spreadArray:Ep,__await:Qa,__asyncGenerator:bp,__asyncDelegator:_p,__asyncValues:Cp,__makeTemplateObject:Tp,__importStar:Dp,__importDefault:Ap,__classPrivateFieldGet:wp,__classPrivateFieldSet:Op,__classPrivateFieldIn:Mp,__addDisposableResource:Rp,__disposeResources:kp};var mo=64,Np=32,Lp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Bp=Math.pow(2,53)-1,Sc=function(){function b(){this.state=Int32Array.from(Fp),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(b,"RawSha256"),b.prototype.update=function(E){if(this.finished)throw new Error("Attempted to update an already finished hash.");var w=0,I=E.byteLength;if(this.bytesHashed+=I,this.bytesHashed*8>Bp)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;I>0;)this.buffer[this.bufferLength++]=E[w++],I--,this.bufferLength===mo&&(this.hashBuffer(),this.bufferLength=0)},b.prototype.digest=function(){if(!this.finished){var E=this.bytesHashed*8,w=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),I=this.bufferLength;if(w.setUint8(this.bufferLength++,128),I%mo>=mo-8){for(var H=this.bufferLength;H<mo;H++)w.setUint8(H,0);this.hashBuffer(),this.bufferLength=0}for(var H=this.bufferLength;H<mo-8;H++)w.setUint8(H,0);w.setUint32(mo-8,Math.floor(E/4294967296),!0),w.setUint32(mo-4,E),this.hashBuffer(),this.finished=!0}for(var j=new Uint8Array(Np),H=0;H<8;H++)j[H*4]=this.state[H]>>>24&255,j[H*4+1]=this.state[H]>>>16&255,j[H*4+2]=this.state[H]>>>8&255,j[H*4+3]=this.state[H]>>>0&255;return j},b.prototype.hashBuffer=function(){for(var E=this,w=E.buffer,I=E.state,H=I[0],j=I[1],Q=I[2],ce=I[3],Re=I[4],Ne=I[5],Qe=I[6],Je=I[7],st=0;st<mo;st++){if(st<16)this.temp[st]=(w[st*4]&255)<<24|(w[st*4+1]&255)<<16|(w[st*4+2]&255)<<8|w[st*4+3]&255;else{var pt=this.temp[st-2],Kt=(pt>>>17|pt<<15)^(pt>>>19|pt<<13)^pt>>>10;pt=this.temp[st-15];var Cn=(pt>>>7|pt<<25)^(pt>>>18|pt<<14)^pt>>>3;this.temp[st]=(Kt+this.temp[st-7]|0)+(Cn+this.temp[st-16]|0)}var Gt=(((Re>>>6|Re<<26)^(Re>>>11|Re<<21)^(Re>>>25|Re<<7))+(Re&Ne^~Re&Qe)|0)+(Je+(Lp[st]+this.temp[st]|0)|0)|0,zn=((H>>>2|H<<30)^(H>>>13|H<<19)^(H>>>22|H<<10))+(H&j^H&Q^j&Q)|0;Je=Qe,Qe=Ne,Ne=Re,Re=ce+Gt|0,ce=Q,Q=j,j=H,H=Gt+zn|0}I[0]+=H,I[1]+=j,I[2]+=Q,I[3]+=ce,I[4]+=Re,I[5]+=Ne,I[6]+=Qe,I[7]+=Je},b}(),xp=function(){function b(E){this.secret=E,this.hash=new Sc,this.reset()}return s(b,"Sha256"),b.prototype.update=function(E){if(!(Id(E)||this.error))try{this.hash.update(Xa(E))}catch(w){this.error=w}},b.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},b.prototype.digest=function(){return Bu(this,void 0,void 0,function(){return xu(this,function(E){return[2,this.digestSync()]})})},b.prototype.reset=function(){if(this.hash=new Sc,this.secret){this.outer=new Sc;var E=Up(this.secret),w=new Uint8Array(mo);w.set(E);for(var I=0;I<mo;I++)E[I]^=54,w[I]^=92;this.hash.update(E),this.outer.update(w);for(var I=0;I<E.byteLength;I++)E[I]=0}},b}();function Up(b){var E=Xa(b);if(E.byteLength>mo){var w=new Sc;w.update(E),E=w.digest()}var I=new Uint8Array(mo);return I.set(E),I}s(Up,"bufferFromSecret");var Vp=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Hp(b){if(Wp(b)&&typeof b.crypto.subtle=="object"){var E=b.crypto.subtle;return Vu(E)}return!1}s(Hp,"supportsWebCrypto");function Wp(b){if(typeof b=="object"&&typeof b.crypto=="object"){var E=b.crypto.getRandomValues;return typeof E=="function"}return!1}s(Wp,"supportsSecureRandom");function Vu(b){return b&&Vp.every(function(E){return typeof b[E]=="function"})}s(Vu,"supportsSubtleCrypto");function KS(b){return __awaiter(this,void 0,void 0,function(){var E,w,I;return __generator(this,function(H){switch(H.label){case 0:if(!Vu(b))return[2,!1];H.label=1;case 1:return H.trys.push([1,4,,5]),[4,b.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return E=H.sent(),[4,b.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},E,new Uint8Array(0))];case 3:return w=H.sent(),[2,w.byteLength===16];case 4:return I=H.sent(),[2,!1];case 5:return[2]}})})}s(KS,"supportsZeroByteGCM");var Gp=function(){function b(E){Hp(gc())?this.hash=new up(E):this.hash=new xp(E)}return s(b,"Sha256"),b.prototype.update=function(E,w){this.hash.update(Xa(E))},b.prototype.digest=function(){return this.hash.digest()},b.prototype.reset=function(){this.hash.reset()},b}(),jp=d(1874409785),Hu=d.n(jp);const zp=s(b=>{let{serviceId:E,clientVersion:w}=b;return(0,c.coroutine)(function*(){var I,H,j,Q,ce;const Re=typeof window<"u"&&(!(window==null||(I=window.navigator)===null||I===void 0)&&I.userAgent)?Hu().parse(window.navigator.userAgent):void 0;var Ne,Qe;const Je=[["aws-sdk-js",w],["ua","2.0"],[`os/${(Re==null||(H=Re.os)===null||H===void 0?void 0:H.name)||"other"}`,Re==null||(j=Re.os)===null||j===void 0?void 0:j.version],["lang/js"],["md/browser",`${(Ne=Re==null||(Q=Re.browser)===null||Q===void 0?void 0:Q.name)!==null&&Ne!==void 0?Ne:"unknown"}_${(Qe=Re==null||(ce=Re.browser)===null||ce===void 0?void 0:ce.version)!==null&&Qe!==void 0?Qe:"unknown"}`]];return E&&Je.push([`api/${E}`,w]),Je})},"defaultUserAgent"),$p=s(b=>()=>Promise.reject(b),"invalidProvider"),Wu=typeof TextEncoder=="function"?new TextEncoder:null,Kp=s(b=>{if(typeof b=="string"){if(Wu)return Wu.encode(b).byteLength;let E=b.length;for(let w=E-1;w>=0;w--){const I=b.charCodeAt(w);I>127&&I<=2047?E++:I>2047&&I<=65535&&(E+=2),I>=56320&&I<=57343&&w--}return E}else{if(typeof b.byteLength=="number")return b.byteLength;if(typeof b.size=="number")return b.size}throw new Error(`Body Length computation failed for ${b}`)},"calculateBodyLength"),Gu=s(b=>new Date(Date.now()+b),"getSkewCorrectedDate");var Md;const ju=s(b=>{var E,w;return C.isInstance(b)?(Md=(E=b.headers)===null||E===void 0?void 0:E.date)!==null&&Md!==void 0?Md:(w=b.headers)===null||w===void 0?void 0:w.Date:void 0},"getDateHeader"),Jp=s((b,E)=>Math.abs(Gu(E).getTime()-b)>=3e5,"isClockSkewed"),zu=s((b,E)=>{const w=Date.parse(b);return Jp(w,E)?w-Date.now():E},"getUpdatedSystemClockOffset"),Za=s((b,E)=>{if(!E)throw new Error(`Property \`${b}\` is not resolved for AWS SDK SigV4Auth`);return E},"throwSigningPropertyError"),Yp=function(){var b=(0,c.coroutine)(function*(E){var w,I,H;const j=Za("context",E.context),Q=Za("config",E.config),ce=(w=j.endpointV2)===null||w===void 0||(I=w.properties)===null||I===void 0||(H=I.authSchemes)===null||H===void 0?void 0:H[0],Ne=yield Za("signer",Q.signer)(ce),Qe=E==null?void 0:E.signingRegion,Je=E==null?void 0:E.signingRegionSet,st=E==null?void 0:E.signingName;return{config:Q,signer:Ne,signingRegion:Qe,signingRegionSet:Je,signingName:st}});return s(function(w){return b.apply(this,arguments)},"validateSigningProperties")}();class $u{sign(E,w,I){return(0,c.coroutine)(function*(){var H;if(!y.isInstance(E))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const j=yield Yp(I),{config:Q,signer:ce}=j;let{signingRegion:Re,signingName:Ne}=j;const Qe=I.context;var Je;if((Je=Qe==null||(H=Qe.authSchemes)===null||H===void 0?void 0:H.length)!==null&&Je!==void 0?Je:0>1){const[Cn,Gt]=Qe.authSchemes;if((Cn==null?void 0:Cn.name)==="sigv4a"&&(Gt==null?void 0:Gt.name)==="sigv4"){var st;Re=(st=Gt==null?void 0:Gt.signingRegion)!==null&&st!==void 0?st:Re;var pt;Ne=(pt=Gt==null?void 0:Gt.signingName)!==null&&pt!==void 0?pt:Ne}}return yield ce.sign(E,{signingDate:Gu(Q.systemClockOffset),signingRegion:Re,signingService:Ne})})()}errorHandler(E){return w=>{var I;const H=(I=w.ServerTime)!==null&&I!==void 0?I:ju(w.$response);if(H){const j=Za("config",E.config),Q=j.systemClockOffset;j.systemClockOffset=zu(H,j.systemClockOffset),j.systemClockOffset!==Q&&w.$metadata&&(w.$metadata.clockSkewCorrected=!0)}throw w}}successHandler(E,w){const I=ju(E);if(I){const H=Za("config",w.config);H.systemClockOffset=zu(I,H.systemClockOffset)}}}s($u,"AwsSdkSigV4Signer");const JS=null,Ku="required",xo="fn",Uo="argv",ta="ref",Ju=!0,Yu="isSet",qa="booleanEquals",na="error",el="endpoint",Jo="tree",Rd="PartitionResult",Xu={[Ku]:!1,type:"String"},Qu={[Ku]:!0,default:!1,type:"Boolean"},Zu={[ta]:"Endpoint"},qu={[xo]:qa,[Uo]:[{[ta]:"UseFIPS"},!0]},ef={[xo]:qa,[Uo]:[{[ta]:"UseDualStack"},!0]},Vo={},tf={[xo]:"getAttr",[Uo]:[{[ta]:Rd},"supportsFIPS"]},nf={[xo]:qa,[Uo]:[!0,{[xo]:"getAttr",[Uo]:[{[ta]:Rd},"supportsDualStack"]}]},rf=[qu],of=[ef],sf=[{[ta]:"Region"}],Xp={version:"1.0",parameters:{Region:Xu,UseDualStack:Qu,UseFIPS:Qu,Endpoint:Xu},rules:[{conditions:[{[xo]:Yu,[Uo]:[Zu]}],rules:[{conditions:rf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:na},{conditions:of,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:na},{endpoint:{url:Zu,properties:Vo,headers:Vo},type:el}],type:Jo},{conditions:[{[xo]:Yu,[Uo]:sf}],rules:[{conditions:[{[xo]:"aws.partition",[Uo]:sf,assign:Rd}],rules:[{conditions:[qu,ef],rules:[{conditions:[{[xo]:qa,[Uo]:[Ju,tf]},nf],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vo,headers:Vo},type:el}],type:Jo},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:na}],type:Jo},{conditions:rf,rules:[{conditions:[{[xo]:qa,[Uo]:[tf,Ju]}],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Vo,headers:Vo},type:el}],type:Jo},{error:"FIPS is enabled but this partition does not support FIPS",type:na}],type:Jo},{conditions:of,rules:[{conditions:[nf],rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vo,headers:Vo},type:el}],type:Jo},{error:"DualStack is enabled but this partition does not support DualStack",type:na}],type:Jo},{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:Vo,headers:Vo},type:el}],type:Jo}],type:Jo},{error:"Invalid Configuration: Missing Region",type:na}]},Qp=new Ee({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Zp=s(function(b){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Qp.get(b,()=>Ge(Xp,{endpointParams:b,logger:E.logger}))},"defaultEndpointResolver");je.aws=Te;const qp=s(b=>{var E,w,I,H,j,Q,ce,Re,Ne,Qe,Je,st;return{apiVersion:"2021-05-15",base64Decoder:(E=b==null?void 0:b.base64Decoder)!==null&&E!==void 0?E:$o,base64Encoder:(w=b==null?void 0:b.base64Encoder)!==null&&w!==void 0?w:Wi,disableHostPrefix:(I=b==null?void 0:b.disableHostPrefix)!==null&&I!==void 0?I:!1,endpointProvider:(H=b==null?void 0:b.endpointProvider)!==null&&H!==void 0?H:Zp,extensions:(j=b==null?void 0:b.extensions)!==null&&j!==void 0?j:[],httpAuthSchemeProvider:(Q=b==null?void 0:b.httpAuthSchemeProvider)!==null&&Q!==void 0?Q:np,httpAuthSchemes:(ce=b==null?void 0:b.httpAuthSchemes)!==null&&ce!==void 0?ce:[{schemeId:"aws.auth#sigv4",identityProvider:pt=>pt.getIdentityProvider("aws.auth#sigv4"),signer:new $u}],logger:(Re=b==null?void 0:b.logger)!==null&&Re!==void 0?Re:new ja,serviceId:(Ne=b==null?void 0:b.serviceId)!==null&&Ne!==void 0?Ne:"Chime SDK Messaging",urlParser:(Qe=b==null?void 0:b.urlParser)!==null&&Qe!==void 0?Qe:Jn,utf8Decoder:(Je=b==null?void 0:b.utf8Decoder)!==null&&Je!==void 0?Je:uo,utf8Encoder:(st=b==null?void 0:b.utf8Encoder)!==null&&st!==void 0?st:qr}},"getRuntimeConfig");class tl extends Error{constructor(E,w=!0){var j;let I,H=!0;typeof w=="boolean"?(I=void 0,H=w):w!=null&&typeof w=="object"&&(I=w.logger,H=w.tryNextLink??!0),super(E),this.name="ProviderError",this.tryNextLink=H,Object.setPrototypeOf(this,tl.prototype),(j=I==null?void 0:I.debug)==null||j.call(I,`@smithy/property-provider ${H?"->":"(!)"} ${E}`)}static from(E,w=!0){return Object.assign(new this(E.message,w),E)}}s(tl,"ProviderError_ProviderError");class Pd extends tl{constructor(E,w=!0){super(E,w),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Pd.prototype)}}s(Pd,"CredentialsProviderError");class kd extends tl{constructor(E,w=!0){super(E,w),this.name="TokenProviderError",Object.setPrototypeOf(this,kd.prototype)}}s(kd,"TokenProviderError");const XS=s((...b)=>async()=>{if(b.length===0)throw new ProviderError("No providers in chain");let E;for(const w of b)try{return await w()}catch(I){if(E=I,I!=null&&I.tryNextLink)continue;throw I}throw E},"chain"),em=s((b,E,w)=>{let I,H,j,Q=!1;const ce=s(async()=>{H||(H=b());try{I=await H,j=!0,Q=!1}finally{H=void 0}return I},"coalesceProvider");return E===void 0?async Re=>((!j||Re!=null&&Re.forceRefresh)&&(I=await ce()),I):async Re=>((!j||Re!=null&&Re.forceRefresh)&&(I=await ce()),Q?I:w&&!w(I)?(Q=!0,I):(E(I)&&await ce(),I))},"memoize"),tm=["in-region","cross-region","mobile","standard","legacy"],nm=s(({defaultsMode:b}={})=>em(async()=>{const E=typeof b=="function"?await b():b;switch(E==null?void 0:E.toLowerCase()){case"auto":return Promise.resolve(im()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(E==null?void 0:E.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${tm.join(", ")}, got ${E}`)}}),"resolveDefaultsModeConfig"),im=s(()=>{var w,I;const b=typeof window<"u"&&((w=window==null?void 0:window.navigator)!=null&&w.userAgent)?Hu().parse(window.navigator.userAgent):void 0,E=(I=b==null?void 0:b.platform)==null?void 0:I.type;return E==="tablet"||E==="mobile"},"isMobileBrowser"),rm=s(b=>{const E=nm(b),w=s(()=>E().then(ld),"defaultConfigProvider"),I=qp(b);var H,j,Q,ce,Re,Ne,Qe,Je,st,pt,Kt;return{...I,...b,runtime:"browser",defaultsMode:E,bodyLengthChecker:(H=b==null?void 0:b.bodyLengthChecker)!==null&&H!==void 0?H:Kp,credentialDefaultProvider:(j=b==null?void 0:b.credentialDefaultProvider)!==null&&j!==void 0?j:Cn=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(Q=b==null?void 0:b.defaultUserAgentProvider)!==null&&Q!==void 0?Q:zp({serviceId:I.serviceId,clientVersion:sp().version}),maxAttempts:(ce=b==null?void 0:b.maxAttempts)!==null&&ce!==void 0?ce:Bt,region:(Re=b==null?void 0:b.region)!==null&&Re!==void 0?Re:$p("Region is missing"),requestHandler:$s.create((Ne=b==null?void 0:b.requestHandler)!==null&&Ne!==void 0?Ne:w),retryMode:(Qe=b==null?void 0:b.retryMode)!==null&&Qe!==void 0?Qe:(0,c.coroutine)(function*(){return(yield w()).retryMode||en}),sha256:(Je=b==null?void 0:b.sha256)!==null&&Je!==void 0?Je:Gp,streamCollector:(st=b==null?void 0:b.streamCollector)!==null&&st!==void 0?st:Ma,useDualstackEndpoint:(pt=b==null?void 0:b.useDualstackEndpoint)!==null&&pt!==void 0?pt:()=>Promise.resolve(li),useFipsEndpoint:(Kt=b==null?void 0:b.useFipsEndpoint)!==null&&Kt!==void 0?Kt:()=>Promise.resolve(Et)}},"runtimeConfig_browser_getRuntimeConfig"),om=s(b=>{let E=function(){var w=(0,c.coroutine)(function*(){if(b.region===void 0)throw new Error("Region is missing from runtimeConfig");const I=b.region;return typeof I=="string"?I:I()});return s(function(){return w.apply(this,arguments)},"runtimeConfigRegion")}();return{setRegion(w){E=w},region(){return E}}},"getAwsRegionExtensionConfiguration"),sm=s(b=>({region:b.region()}),"resolveAwsRegionExtensionConfiguration"),am="AWS_REGION",lm="region",QS={environmentVariableSelector:b=>b[am],configFileSelector:b=>b[lm],default:()=>{throw new Error("Region is missing")}},ZS={preferredFile:"credentials"},qS=s(b=>{const{region:E,useFipsEndpoint:w}=b;if(!E)throw new Error("Region is missing");return{...b,region:_bluebirdCoroutine(function*(){if(typeof E=="string")return getRealRegion(E);const I=yield E();return getRealRegion(I)}),useFipsEndpoint:_bluebirdCoroutine(function*(){const I=typeof E=="string"?E:yield E();return isFipsRegion(I)?!0:typeof w!="function"?Promise.resolve(!!w):w()})}},"resolveRegionConfig_resolveRegionConfig"),cm=s(b=>{const E=b.httpAuthSchemes;let w=b.httpAuthSchemeProvider,I=b.credentials;return{setHttpAuthScheme(H){const j=E.findIndex(Q=>Q.schemeId===H.schemeId);j===-1?E.push(H):E.splice(j,1,H)},httpAuthSchemes(){return E},setHttpAuthSchemeProvider(H){w=H},httpAuthSchemeProvider(){return w},setCredentials(H){I=H},credentials(){return I}}},"getHttpAuthExtensionConfiguration"),nl=s(b=>({httpAuthSchemes:b.httpAuthSchemes(),httpAuthSchemeProvider:b.httpAuthSchemeProvider(),credentials:b.credentials()}),"resolveHttpAuthRuntimeConfig"),vc=s(b=>b,"asPartial"),dm=s((b,E)=>{const w={...vc(om(b)),...vc(hd(b)),...vc(h(b)),...vc(cm(b))};return E.forEach(I=>I.configure(w)),{...b,...sm(w),...pd(w),...m(w),...nl(w)}},"resolveRuntimeExtensions");class $r extends zo{destroy(){super.destroy()}constructor(...[E]){const w=rm(E||{}),I=rp(w),H=pe(I),j=vs(H),Q=hi(j),ce=Q,Re=Zi(ce),Ne=ip(Re),Qe=dm(Ne,(E==null?void 0:E.extensions)||[]);super(Qe),this.config=Qe,this.middlewareStack.use(Mi(this.config)),this.middlewareStack.use(yd(this.config)),this.middlewareStack.use(Ni(this.config)),this.middlewareStack.use(D(this.config)),this.middlewareStack.use(F(this.config)),this.middlewareStack.use(ie(this.config)),this.middlewareStack.use(Rr(this.config,{httpAuthSchemeParametersProvider:ep,identityProviderConfigProvider:function(){var Je=(0,c.coroutine)(function*(st){return new B({"aws.auth#sigv4":st.credentials})});return function(st){return Je.apply(this,arguments)}}()})),this.middlewareStack.use(P(this.config))}}s($r,"ChimeSDKMessagingClient");const um=s((b,E)=>xr(b,E).then(w=>E.utf8Encoder(w)),"collectBodyString"),oi=s((b,E)=>um(b,E).then(w=>{if(w.length)try{return JSON.parse(w)}catch(I){throw(I==null?void 0:I.name)==="SyntaxError"&&Object.defineProperty(I,"$responseBodyText",{value:w}),I}return{}}),"parseJsonBody"),af=function(){var b=(0,c.coroutine)(function*(E,w){const I=yield oi(E,w);var H;return I.message=(H=I.message)!==null&&H!==void 0?H:I.Message,I});return s(function(w,I){return b.apply(this,arguments)},"parseJsonErrorBody")}(),fm=s((b,E)=>{const w=s((j,Q)=>Object.keys(j).find(ce=>ce.toLowerCase()===Q.toLowerCase()),"findKey"),I=s(j=>{let Q=j;return typeof Q=="number"&&(Q=Q.toString()),Q.indexOf(",")>=0&&(Q=Q.split(",")[0]),Q.indexOf(":")>=0&&(Q=Q.split(":")[0]),Q.indexOf("#")>=0&&(Q=Q.split("#")[1]),Q},"sanitizeErrorCode"),H=w(b.headers,"x-amzn-errortype");if(H!==void 0)return I(b.headers[H]);if(E.code!==void 0)return I(E.code);if(E.__type!==void 0)return I(E.__type)},"loadRestJsonErrorCode");class Kr extends Ys{constructor(E){super(E),Object.setPrototypeOf(this,Kr.prototype)}}s(Kr,"ChimeSDKMessagingServiceException");const hm={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},pm={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},mm={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class il extends Kr{constructor(E){super({name:"BadRequestException",$fault:"client",...E}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,il.prototype),this.Code=E.Code,this.Message=E.Message}}s(il,"BadRequestException");class rl extends Kr{constructor(E){super({name:"ConflictException",$fault:"client",...E}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,rl.prototype),this.Code=E.Code,this.Message=E.Message}}s(rl,"ConflictException");class ol extends Kr{constructor(E){super({name:"ForbiddenException",$fault:"client",...E}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,ol.prototype),this.Code=E.Code,this.Message=E.Message}}s(ol,"ForbiddenException");class sl extends Kr{constructor(E){super({name:"NotFoundException",$fault:"client",...E}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,sl.prototype),this.Code=E.Code,this.Message=E.Message}}s(sl,"NotFoundException");class al extends Kr{constructor(E){super({name:"ServiceFailureException",$fault:"server",...E}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,al.prototype),this.Code=E.Code,this.Message=E.Message}}s(al,"ServiceFailureException");class ll extends Kr{constructor(E){super({name:"ServiceUnavailableException",$fault:"server",...E}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,ll.prototype),this.Code=E.Code,this.Message=E.Message}}s(ll,"ServiceUnavailableException");class cl extends Kr{constructor(E){super({name:"ThrottledClientException",$fault:"client",...E}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,cl.prototype),this.Code=E.Code,this.Message=E.Message}}s(cl,"ThrottledClientException");class dl extends Kr{constructor(E){super({name:"UnauthorizedClientException",$fault:"client",...E}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,dl.prototype),this.Code=E.Code,this.Message=E.Message}}s(dl,"UnauthorizedClientException");class ul extends Kr{constructor(E){super({name:"ResourceLimitExceededException",$fault:"client",...E}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,ul.prototype),this.Code=E.Code,this.Message=E.Message}}s(ul,"ResourceLimitExceededException");const gm={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},Sm={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},vm={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},ym={ASYNC:"ASYNC"},Em={ABORT:"ABORT",CONTINUE:"CONTINUE"},bm={DEFAULT:"DEFAULT",VOIP:"VOIP"},_m={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},Cm={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},Tm={CONTROL:"CONTROL",STANDARD:"STANDARD"},Im={Channel:"Channel",ChannelMessage:"ChannelMessage"},Dm={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},Am={MEMBERS:"MEMBERS"},wm={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},Er=s(b=>({...b,...b.Name&&{Name:vn}}),"IdentityFilterSensitiveLog"),lf=s(b=>({...b,...b.InvitedBy&&{InvitedBy:Er(b.InvitedBy)},...b.Members&&{Members:b.Members.map(E=>Er(E))}}),"BatchChannelMembershipsFilterSensitiveLog"),cf=s(b=>({...b,...b.BatchChannelMemberships&&{BatchChannelMemberships:lf(b.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),df=s(b=>({...b,...b.Name&&{Name:vn},...b.Metadata&&{Metadata:vn},...b.CreatedBy&&{CreatedBy:Er(b.CreatedBy)}}),"ChannelFilterSensitiveLog"),uf=s(b=>({...b,...b.Name&&{Name:vn},...b.Metadata&&{Metadata:vn}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),ff=s(b=>({...b,...b.Member&&{Member:Er(b.Member)},...b.CreatedBy&&{CreatedBy:Er(b.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),hf=s(b=>({...b,...b.Member&&{Member:Er(b.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),fl=s(b=>({...b,...b.Name&&{Name:vn}}),"ProcessorFilterSensitiveLog"),pf=s(b=>({...b,...b.Processors&&{Processors:b.Processors.map(E=>fl(E))},...b.Name&&{Name:vn}}),"ChannelFlowFilterSensitiveLog"),hl=s(b=>({...b,...b.StringValues&&{StringValues:vn}}),"MessageAttributeValueFilterSensitiveLog"),Nd=s(b=>({...b,...b.Title&&{Title:vn},...b.Body&&{Body:vn}}),"PushNotificationConfigurationFilterSensitiveLog"),mf=s(b=>({...b,...b.Content&&{Content:vn},...b.Metadata&&{Metadata:vn},...b.PushNotification&&{PushNotification:Nd(b.PushNotification)},...b.MessageAttributes&&{MessageAttributes:Object.entries(b.MessageAttributes).reduce((E,w)=>{let[I,H]=w;return E[I]=hl(H),E},{})},...b.ContentType&&{ContentType:vn}}),"ChannelMessageCallbackFilterSensitiveLog"),gf=s(b=>({...b,...b.ChannelMessage&&{ChannelMessage:mf(b.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),Sf=s(b=>({...b,...b.Name&&{Name:vn},...b.Processors&&{Processors:b.Processors.map(E=>fl(E))}}),"ChannelFlowSummaryFilterSensitiveLog"),vf=s(b=>({...b,...b.InvitedBy&&{InvitedBy:Er(b.InvitedBy)},...b.Member&&{Member:Er(b.Member)}}),"ChannelMembershipFilterSensitiveLog"),pl=s(b=>({...b,...b.Name&&{Name:vn},...b.Metadata&&{Metadata:vn}}),"ChannelSummaryFilterSensitiveLog"),Ld=s(b=>({...b,...b.ChannelSummary&&{ChannelSummary:pl(b.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),yf=s(b=>({...b,...b.FilterRule&&{FilterRule:vn}}),"PushNotificationPreferencesFilterSensitiveLog"),yc=s(b=>({...b,...b.PushNotifications&&{PushNotifications:yf(b.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),Ef=s(b=>({...b,...b.Member&&{Member:Er(b.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),bf=s(b=>({...b,...b.Content&&{Content:vn},...b.Metadata&&{Metadata:vn},...b.Sender&&{Sender:Er(b.Sender)},...b.MessageAttributes&&{MessageAttributes:Object.entries(b.MessageAttributes).reduce((E,w)=>{let[I,H]=w;return E[I]=hl(H),E},{})},...b.ContentType&&{ContentType:vn}}),"ChannelMessageFilterSensitiveLog"),_f=s(b=>({...b,...b.Content&&{Content:vn},...b.Metadata&&{Metadata:vn},...b.Sender&&{Sender:Er(b.Sender)},...b.MessageAttributes&&{MessageAttributes:Object.entries(b.MessageAttributes).reduce((E,w)=>{let[I,H]=w;return E[I]=hl(H),E},{})},...b.ContentType&&{ContentType:vn}}),"ChannelMessageSummaryFilterSensitiveLog"),Fd=s(b=>({...b,...b.ChannelSummary&&{ChannelSummary:pl(b.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),Cf=s(b=>({...b,...b.Moderator&&{Moderator:Er(b.Moderator)},...b.CreatedBy&&{CreatedBy:Er(b.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),Tf=s(b=>({...b,...b.Moderator&&{Moderator:Er(b.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),ml=s(b=>({...b,...b.Key&&{Key:vn},...b.Value&&{Value:vn}}),"TagFilterSensitiveLog"),If=s(b=>({...b,...b.Name&&{Name:vn},...b.Metadata&&{Metadata:vn},...b.ClientRequestToken&&{ClientRequestToken:vn},...b.Tags&&{Tags:b.Tags.map(E=>ml(E))},...b.ChannelId&&{ChannelId:vn}}),"CreateChannelRequestFilterSensitiveLog"),Df=s(b=>({...b,...b.Member&&{Member:Er(b.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),Af=s(b=>({...b,...b.Processors&&{Processors:b.Processors.map(E=>fl(E))},...b.Name&&{Name:vn},...b.Tags&&{Tags:b.Tags.map(E=>ml(E))},...b.ClientRequestToken&&{ClientRequestToken:vn}}),"CreateChannelFlowRequestFilterSensitiveLog"),wf=s(b=>({...b,...b.Member&&{Member:Er(b.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),Of=s(b=>({...b,...b.ChannelModerator&&{ChannelModerator:Er(b.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),Mf=s(b=>({...b,...b.Channel&&{Channel:df(b.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),Rf=s(b=>({...b,...b.ChannelBan&&{ChannelBan:ff(b.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),Pf=s(b=>({...b,...b.ChannelFlow&&{ChannelFlow:pf(b.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),kf=s(b=>({...b,...b.ChannelMembership&&{ChannelMembership:vf(b.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),Nf=s(b=>({...b,...b.ChannelMembership&&{ChannelMembership:Ld(b.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),Lf=s(b=>({...b,...b.Channel&&{Channel:Fd(b.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),Ff=s(b=>({...b,...b.ChannelModerator&&{ChannelModerator:Cf(b.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Bf=s(b=>({...b,...b.Member&&{Member:Er(b.Member)},...b.Preferences&&{Preferences:yc(b.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),xf=s(b=>({...b,...b.ChannelMessage&&{ChannelMessage:bf(b.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),Uf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelBansRequestFilterSensitiveLog"),Vf=s(b=>({...b,...b.NextToken&&{NextToken:vn},...b.ChannelBans&&{ChannelBans:b.ChannelBans.map(E=>hf(E))}}),"ListChannelBansResponseFilterSensitiveLog"),Hf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelFlowsRequestFilterSensitiveLog"),Wf=s(b=>({...b,...b.ChannelFlows&&{ChannelFlows:b.ChannelFlows.map(E=>Sf(E))},...b.NextToken&&{NextToken:vn}}),"ListChannelFlowsResponseFilterSensitiveLog"),Gf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelMembershipsRequestFilterSensitiveLog"),jf=s(b=>({...b,...b.ChannelMemberships&&{ChannelMemberships:b.ChannelMemberships.map(E=>Ef(E))},...b.NextToken&&{NextToken:vn}}),"ListChannelMembershipsResponseFilterSensitiveLog"),zf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),$f=s(b=>({...b,...b.ChannelMemberships&&{ChannelMemberships:b.ChannelMemberships.map(E=>Ld(E))},...b.NextToken&&{NextToken:vn}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),Kf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelMessagesRequestFilterSensitiveLog"),Jf=s(b=>({...b,...b.NextToken&&{NextToken:vn},...b.ChannelMessages&&{ChannelMessages:b.ChannelMessages.map(E=>_f(E))}}),"ListChannelMessagesResponseFilterSensitiveLog"),Yf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelModeratorsRequestFilterSensitiveLog"),Xf=s(b=>({...b,...b.NextToken&&{NextToken:vn},...b.ChannelModerators&&{ChannelModerators:b.ChannelModerators.map(E=>Tf(E))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),Qf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelsRequestFilterSensitiveLog"),Zf=s(b=>({...b,...b.Channels&&{Channels:b.Channels.map(E=>pl(E))},...b.NextToken&&{NextToken:vn}}),"ListChannelsResponseFilterSensitiveLog"),qf=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),eh=s(b=>({...b,...b.Channels&&{Channels:b.Channels.map(E=>uf(E))},...b.NextToken&&{NextToken:vn}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),th=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),nh=s(b=>({...b,...b.Channels&&{Channels:b.Channels.map(E=>Fd(E))},...b.NextToken&&{NextToken:vn}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),ih=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListSubChannelsRequestFilterSensitiveLog"),rh=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"ListSubChannelsResponseFilterSensitiveLog"),oh=s(b=>({...b,...b.Tags&&{Tags:b.Tags.map(E=>ml(E))}}),"ListTagsForResourceResponseFilterSensitiveLog"),sh=s(b=>({...b,...b.Preferences&&{Preferences:yc(b.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),ah=s(b=>({...b,...b.Member&&{Member:Er(b.Member)},...b.Preferences&&{Preferences:yc(b.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),lh=s(b=>({...b,...b.NextToken&&{NextToken:vn}}),"SearchChannelsRequestFilterSensitiveLog"),ch=s(b=>({...b,...b.Channels&&{Channels:b.Channels.map(E=>pl(E))},...b.NextToken&&{NextToken:vn}}),"SearchChannelsResponseFilterSensitiveLog"),dh=s(b=>({...b,...b.Content&&{Content:vn},...b.Metadata&&{Metadata:vn},...b.ClientRequestToken&&{ClientRequestToken:vn},...b.PushNotification&&{PushNotification:Nd(b.PushNotification)},...b.MessageAttributes&&{MessageAttributes:Object.entries(b.MessageAttributes).reduce((E,w)=>{let[I,H]=w;return E[I]=hl(H),E},{})},...b.ContentType&&{ContentType:vn}}),"SendChannelMessageRequestFilterSensitiveLog"),uh=s(b=>({...b,...b.Tags&&{Tags:b.Tags.map(E=>ml(E))}}),"TagResourceRequestFilterSensitiveLog"),fh=s(b=>({...b,...b.TagKeys&&{TagKeys:vn}}),"UntagResourceRequestFilterSensitiveLog"),hh=s(b=>({...b,...b.Name&&{Name:vn},...b.Metadata&&{Metadata:vn}}),"UpdateChannelRequestFilterSensitiveLog"),ph=s(b=>({...b,...b.Processors&&{Processors:b.Processors.map(E=>fl(E))},...b.Name&&{Name:vn}}),"UpdateChannelFlowRequestFilterSensitiveLog"),mh=s(b=>({...b,...b.Content&&{Content:vn},...b.Metadata&&{Metadata:vn},...b.ContentType&&{ContentType:vn}}),"UpdateChannelMessageRequestFilterSensitiveLog"),Om=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/channel-flow"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{ChannelFlowArn:[]})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_AssociateChannelFlowCommand")}(),Mm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[Rs]:[,"batch-create"]});let Q;return Q=JSON.stringify(tn(E,{MemberArns:ce=>Dn(ce),SubChannelId:[],Type:[]})),I.m("POST").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_BatchCreateChannelMembershipCommand")}(),Rm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={"content-type":"application/json"};I.bp("/channels/{ChannelArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[Rs]:[,"channel-flow-callback"]});let Q;return Q=JSON.stringify(tn(E,{CallbackId:[!0,ce=>ce??Ci()],ChannelMessage:ce=>Dn(ce),DeleteResource:[]})),I.m("POST").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ChannelFlowCallbackCommand")}(),Pm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels");let j;return j=JSON.stringify(tn(E,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,Q=>Q??Ci()],ElasticChannelConfiguration:Q=>Dn(Q),ExpirationSettings:Q=>Dn(Q),MemberArns:Q=>Dn(Q),Metadata:[],Mode:[],ModeratorArns:Q=>Dn(Q),Name:[],Privacy:[],Tags:Q=>Dn(Q)})),I.m("POST").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_CreateChannelCommand")}(),km=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/bans"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{MemberArn:[]})),I.m("POST").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_CreateChannelBanCommand")}(),Nm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={"content-type":"application/json"};I.bp("/channel-flows");let j;return j=JSON.stringify(tn(E,{AppInstanceArn:[],ClientRequestToken:[!0,Q=>Q??Ci()],Name:[],Processors:Q=>Dn(Q),Tags:Q=>Dn(Q)})),I.m("POST").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_CreateChannelFlowCommand")}(),Lm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{MemberArn:[],SubChannelId:[],Type:[]})),I.m("POST").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_CreateChannelMembershipCommand")}(),Fm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/moderators"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{ChannelModeratorArn:[]})),I.m("POST").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_CreateChannelModeratorCommand")}(),Bm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return I.m("DELETE").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteChannelCommand")}(),xm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/bans/{MemberArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let j;return I.m("DELETE").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteChannelBanCommand")}(),Um=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/channel-flows/{ChannelFlowArn}"),I.p("ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let j;return I.m("DELETE").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteChannelFlowCommand")}(),Vm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MemberArn",()=>E.MemberArn,"{MemberArn}",!1);const j=_t({[ro]:[,E[Yo]]});let Q;return I.m("DELETE").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteChannelMembershipCommand")}(),Hm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages/{MessageId}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MessageId",()=>E.MessageId,"{MessageId}",!1);const j=_t({[ro]:[,E[Yo]]});let Q;return I.m("DELETE").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteChannelMessageCommand")}(),Wm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("ChannelModeratorArn",()=>E.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let j;return I.m("DELETE").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteChannelModeratorCommand")}(),Gm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),I.p("AppInstanceArn",()=>E.AppInstanceArn,"{AppInstanceArn}",!1);let j;return I.m("DELETE").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DeleteMessagingStreamingConfigurationsCommand")}(),jm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelCommand")}(),zm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/bans/{MemberArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelBanCommand")}(),$m=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/channel-flows/{ChannelFlowArn}"),I.p("ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelFlowCommand")}(),Km=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MemberArn",()=>E.MemberArn,"{MemberArn}",!1);const j=_t({[ro]:[,E[Yo]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelMembershipCommand")}(),Jm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[Ps]:[,"app-instance-user-membership"],[aa]:[,bn(E[Sl],"AppInstanceUserArn")]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelMembershipForAppInstanceUserCommand")}(),Ym=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[Ps]:[,"app-instance-user-moderated-channel"],[aa]:[,bn(E[Sl],"AppInstanceUserArn")]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelModeratedByAppInstanceUserCommand")}(),Xm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("ChannelModeratorArn",()=>E.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DescribeChannelModeratorCommand")}(),Qm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let j;return I.m("DELETE").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_DisassociateChannelFlowCommand")}(),Zm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_GetChannelMembershipPreferencesCommand")}(),qm=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages/{MessageId}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MessageId",()=>E.MessageId,"{MessageId}",!1);const j=_t({[ro]:[,E[Yo]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_GetChannelMessageCommand")}(),eg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages/{MessageId}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MessageId",()=>E.MessageId,"{MessageId}",!1);const j=_t({[Ps]:[,"message-status"],[ro]:[,E[Yo]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_GetChannelMessageStatusCommand")}(),tg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/endpoints/messaging-session");let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_GetMessagingSessionEndpointCommand")}(),ng=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),I.p("AppInstanceArn",()=>E.AppInstanceArn,"{AppInstanceArn}",!1);let j;return I.m("GET").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_GetMessagingStreamingConfigurationsCommand")}(),ig=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/bans"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelBansCommand")}(),rg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/channel-flows");const j=_t({[tu]:[,bn(E[sa],"AppInstanceArn")],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelFlowsCommand")}(),og=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[Oh]:[,E[no]],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]],[ro]:[,E[Yo]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelMembershipsCommand")}(),sg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels");const j=_t({[Ps]:[,"app-instance-user-memberships"],[aa]:[,E[Sl]],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelMembershipsForAppInstanceUserCommand")}(),ag=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[Dc]:[,E[eu]],[wh]:[()=>E.NotBefore!==void 0,()=>us(E[Dh]).toString()],[iu]:[()=>E.NotAfter!==void 0,()=>us(E[vl]).toString()],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]],[ro]:[,E[Yo]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelMessagesCommand")}(),lg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/moderators"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelModeratorsCommand")}(),cg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels");const j=_t({[tu]:[,bn(E[sa],"AppInstanceArn")],[ru]:[,E[qd]],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelsCommand")}(),dg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/channels");const j=_t({[Ps]:[,"channel-flow-associations"],[nu]:[,bn(E[Ih],"ChannelFlowArn")],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelsAssociatedWithChannelFlowCommand")}(),ug=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels");const j=_t({[Ps]:[,"app-instance-user-moderated-channels"],[aa]:[,E[Sl]],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListChannelsModeratedByAppInstanceUserCommand")}(),fg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/subchannels"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const j=_t({[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListSubChannelsCommand")}(),gh=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={};I.bp("/tags");const j=_t({[Ah]:[,bn(E[Ic],"ResourceARN")]});let Q;return I.m("GET").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_ListTagsForResourceCommand")}(),hg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/expiration-settings"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{ExpirationSettings:Q=>Dn(Q)})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_PutChannelExpirationSettingsCommand")}(),pg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let j;return j=JSON.stringify(tn(E,{Preferences:Q=>Dn(Q)})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_PutChannelMembershipPreferencesCommand")}(),mg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={"content-type":"application/json"};I.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),I.p("AppInstanceArn",()=>E.AppInstanceArn,"{AppInstanceArn}",!1);let j;return j=JSON.stringify(tn(E,{StreamingConfigurations:Q=>Dn(Q)})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_PutMessagingStreamingConfigurationsCommand")}(),gg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages/{MessageId}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MessageId",()=>E.MessageId,"{MessageId}",!1);const j=_t({[Rs]:[,"redact"]});let Q;return Q=JSON.stringify(tn(E,{SubChannelId:[]})),I.m("POST").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_RedactChannelMessageCommand")}(),Sg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels");const j=_t({[Rs]:[,"search"],[io]:[()=>E.MaxResults!==void 0,()=>E[Fr].toString()],[vo]:[,E[So]]});let Q;return Q=JSON.stringify(tn(E,{Fields:ce=>Dn(ce)})),I.m("POST").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_SearchChannelsCommand")}(),vg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{ClientRequestToken:[!0,Q=>Q??Ci()],Content:[],ContentType:[],MessageAttributes:Q=>Dn(Q),Metadata:[],Persistence:[],PushNotification:Q=>Dn(Q),SubChannelId:[],Target:Q=>Dn(Q),Type:[]})),I.m("POST").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_SendChannelMessageCommand")}(),yg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={"content-type":"application/json"};I.bp("/tags");const j=_t({[Rs]:[,"tag-resource"]});let Q;return Q=JSON.stringify(tn(E,{ResourceARN:[],Tags:ce=>Dn(ce)})),I.m("POST").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_TagResourceCommand")}(),Eg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={"content-type":"application/json"};I.bp("/tags");const j=_t({[Rs]:[,"untag-resource"]});let Q;return Q=JSON.stringify(tn(E,{ResourceARN:[],TagKeys:ce=>Dn(ce)})),I.m("POST").h(H).q(j).b(Q),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_UntagResourceCommand")}(),bg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return j=JSON.stringify(tn(E,{Metadata:[],Mode:[],Name:[]})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_UpdateChannelCommand")}(),_g=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H={"content-type":"application/json"};I.bp("/channel-flows/{ChannelFlowArn}"),I.p("ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let j;return j=JSON.stringify(tn(E,{Name:[],Processors:Q=>Dn(Q)})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_UpdateChannelFlowCommand")}(),Cg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{"content-type":"application/json",[fi]:E[di]});I.bp("/channels/{ChannelArn}/messages/{MessageId}"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),I.p("MessageId",()=>E.MessageId,"{MessageId}",!1);let j;return j=JSON.stringify(tn(E,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_UpdateChannelMessageCommand")}(),Tg=function(){var b=(0,c.coroutine)(function*(E,w){const I=ot(E,w),H=_t({},ui,{[fi]:E[di]});I.bp("/channels/{ChannelArn}/readMarker"),I.p("ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let j;return I.m("PUT").h(H).b(j),I.build()});return s(function(w,I){return b.apply(this,arguments)},"se_UpdateChannelReadMarkerCommand")}(),Ig=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_AssociateChannelFlowCommand")}(),Dg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{BatchChannelMemberships:Dn,Errors:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_BatchCreateChannelMembershipCommand")}(),Ag=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{CallbackId:Ht,ChannelArn:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ChannelFlowCallbackCommand")}(),wg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==201&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_CreateChannelCommand")}(),Og=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==201&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,Member:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_CreateChannelBanCommand")}(),Mg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==201&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelFlowArn:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_CreateChannelFlowCommand")}(),Rg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==201&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,Member:Dn,SubChannelId:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_CreateChannelMembershipCommand")}(),Pg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==201&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,ChannelModerator:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_CreateChannelModeratorCommand")}(),kg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteChannelCommand")}(),Ng=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteChannelBanCommand")}(),Lg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteChannelFlowCommand")}(),Fg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteChannelMembershipCommand")}(),Bg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteChannelMessageCommand")}(),xg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteChannelModeratorCommand")}(),Ug=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommand")}(),Vg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Channel:Q=>Jd(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelCommand")}(),z=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelBan:Q=>bh(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelBanCommand")}(),Hg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelFlow:Q=>_h(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelFlowCommand")}(),Wg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelMembership:Q=>Cc(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelMembershipCommand")}(),Gg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelMembership:Q=>Yd(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommand")}(),jg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Channel:Q=>Os(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommand")}(),zg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelModerator:Q=>Th(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_DescribeChannelModeratorCommand")}(),$g=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_DisassociateChannelFlowCommand")}(),Kg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,Member:Dn,Preferences:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommand")}(),Jg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelMessage:Q=>Tc(Q,w)});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_GetChannelMessageCommand")}(),Yg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Status:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_GetChannelMessageStatusCommand")}(),Xg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Endpoint:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_GetMessagingSessionEndpointCommand")}(),Qg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{StreamingConfigurations:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommand")}(),Zg=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,ChannelBans:Dn,NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelBansCommand")}(),Fi=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelFlows:Dn,NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelFlowsCommand")}(),Ln=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,ChannelMemberships:Dn,NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelMembershipsCommand")}(),Ec=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelMemberships:Q=>ws(Q,w),NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommand")}(),Bd=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,ChannelMessages:Q=>Xd(Q,w),NextToken:Ht,SubChannelId:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelMessagesCommand")}(),sr=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,ChannelModerators:Dn,NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelModeratorsCommand")}(),xd=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Channels:Q=>Zd(Q,w),NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelsCommand")}(),hr=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Channels:Dn,NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommand")}(),ut=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Channels:Q=>Qd(Q,w),NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommand")}(),go=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,NextToken:Ht,SubChannels:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListSubChannelsCommand")}(),Ud=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Tags:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_ListTagsForResourceCommand")}(),_i=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,ExpirationSettings:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_PutChannelExpirationSettingsCommand")}(),Nr=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,Member:Dn,Preferences:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommand")}(),Mr=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{StreamingConfigurations:Dn});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommand")}(),Vd=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,MessageId:Ht,SubChannelId:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_RedactChannelMessageCommand")}(),ia=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{Channels:Q=>Zd(Q,w),NextToken:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_SearchChannelsCommand")}(),Ot=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==201&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,MessageId:Ht,Status:Dn,SubChannelId:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_SendChannelMessageCommand")}(),Lr=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_TagResourceCommand")}(),Sh=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==204&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)});return yield xr(E.body,w),I});return s(function(w,I){return b.apply(this,arguments)},"de_UntagResourceCommand")}(),vh=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_UpdateChannelCommand")}(),Hd=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelFlowArn:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_UpdateChannelFlowCommand")}(),Wd=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht,MessageId:Ht,Status:Dn,SubChannelId:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_UpdateChannelMessageCommand")}(),Gd=function(){var b=(0,c.coroutine)(function*(E,w){if(E.statusCode!==200&&E.statusCode>=300)return xn(E,w);const I=_t({$metadata:hn(E)}),H=bn(ti(yield oi(E.body,w)),"body"),j=tn(H,{ChannelArn:Ht});return Object.assign(I,j),I});return s(function(w,I){return b.apply(this,arguments)},"de_UpdateChannelReadMarkerCommand")}(),xn=function(){var b=(0,c.coroutine)(function*(E,w){const I={...E,body:yield af(E.body,w)},H=fm(E,I.body);switch(H){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jd(I,w);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield zd(I,w);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield _c(I,w);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield yh(I,w);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield $d(I,w);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield gl(I,w);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Bi(I,w);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Pi(I,w);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Eh(I,w);default:const j=I.body;return bc({output:E,parsedBody:j,errorCode:H})}});return s(function(w,I){return b.apply(this,arguments)},"de_CommandError")}(),bc=sd(Kr),jd=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new il({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_BadRequestExceptionRes")}(),zd=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new rl({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_ConflictExceptionRes")}(),_c=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new ol({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_ForbiddenExceptionRes")}(),yh=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new sl({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_NotFoundExceptionRes")}(),Eh=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new ul({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_ResourceLimitExceededExceptionRes")}(),$d=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new al({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_ServiceFailureExceptionRes")}(),gl=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new ll({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_ServiceUnavailableExceptionRes")}(),Bi=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new cl({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_ThrottledClientExceptionRes")}(),Pi=function(){var b=(0,c.coroutine)(function*(E,w){const I=_t({}),H=E.body,j=tn(H,{Code:Ht,Message:Ht});Object.assign(I,j);const Q=new dl({$metadata:hn(E),...I});return ho(Q,E.body)});return s(function(w,I){return b.apply(this,arguments)},"de_UnauthorizedClientExceptionRes")}(),Kd=s((b,E)=>tn(b,{ReadMarkerTimestamp:w=>bn(Cr(nr(w))),SubChannelId:Ht,Type:Ht}),"de_AppInstanceUserMembershipSummary"),Jd=s((b,E)=>tn(b,{ChannelArn:Ht,ChannelFlowArn:Ht,CreatedBy:Dn,CreatedTimestamp:w=>bn(Cr(nr(w))),ElasticChannelConfiguration:Dn,ExpirationSettings:Dn,LastMessageTimestamp:w=>bn(Cr(nr(w))),LastUpdatedTimestamp:w=>bn(Cr(nr(w))),Metadata:Ht,Mode:Ht,Name:Ht,Privacy:Ht}),"de_Channel"),bh=s((b,E)=>tn(b,{ChannelArn:Ht,CreatedBy:Dn,CreatedTimestamp:w=>bn(Cr(nr(w))),Member:Dn}),"de_ChannelBan"),_h=s((b,E)=>tn(b,{ChannelFlowArn:Ht,CreatedTimestamp:w=>bn(Cr(nr(w))),LastUpdatedTimestamp:w=>bn(Cr(nr(w))),Name:Ht,Processors:Dn}),"de_ChannelFlow"),Cc=s((b,E)=>tn(b,{ChannelArn:Ht,CreatedTimestamp:w=>bn(Cr(nr(w))),InvitedBy:Dn,LastUpdatedTimestamp:w=>bn(Cr(nr(w))),Member:Dn,SubChannelId:Ht,Type:Ht}),"de_ChannelMembership"),Yd=s((b,E)=>tn(b,{AppInstanceUserMembershipSummary:w=>Kd(w,E),ChannelSummary:w=>Ms(w,E)}),"de_ChannelMembershipForAppInstanceUserSummary"),ws=s((b,E)=>(b||[]).filter(I=>I!=null).map(I=>Yd(I,E)),"de_ChannelMembershipForAppInstanceUserSummaryList"),Tc=s((b,E)=>tn(b,{ChannelArn:Ht,Content:Ht,ContentType:Ht,CreatedTimestamp:w=>bn(Cr(nr(w))),LastEditedTimestamp:w=>bn(Cr(nr(w))),LastUpdatedTimestamp:w=>bn(Cr(nr(w))),MessageAttributes:Dn,MessageId:Ht,Metadata:Ht,Persistence:Ht,Redacted:ka,Sender:Dn,Status:Dn,SubChannelId:Ht,Target:Dn,Type:Ht}),"de_ChannelMessage"),Ch=s((b,E)=>tn(b,{Content:Ht,ContentType:Ht,CreatedTimestamp:w=>bn(Cr(nr(w))),LastEditedTimestamp:w=>bn(Cr(nr(w))),LastUpdatedTimestamp:w=>bn(Cr(nr(w))),MessageAttributes:Dn,MessageId:Ht,Metadata:Ht,Redacted:ka,Sender:Dn,Status:Dn,Target:Dn,Type:Ht}),"de_ChannelMessageSummary"),Xd=s((b,E)=>(b||[]).filter(I=>I!=null).map(I=>Ch(I,E)),"de_ChannelMessageSummaryList"),Os=s((b,E)=>tn(b,{ChannelSummary:w=>Ms(w,E)}),"de_ChannelModeratedByAppInstanceUserSummary"),Qd=s((b,E)=>(b||[]).filter(I=>I!=null).map(I=>Os(I,E)),"de_ChannelModeratedByAppInstanceUserSummaryList"),Th=s((b,E)=>tn(b,{ChannelArn:Ht,CreatedBy:Dn,CreatedTimestamp:w=>bn(Cr(nr(w))),Moderator:Dn}),"de_ChannelModerator"),Ms=s((b,E)=>tn(b,{ChannelArn:Ht,LastMessageTimestamp:w=>bn(Cr(nr(w))),Metadata:Ht,Mode:Ht,Name:Ht,Privacy:Ht}),"de_ChannelSummary"),Zd=s((b,E)=>(b||[]).filter(I=>I!=null).map(I=>Ms(I,E)),"de_ChannelSummaryList");var Tt,ra;const hn=s(b=>({httpStatusCode:b.statusCode,requestId:(ra=(Tt=b.headers["x-amzn-requestid"])!==null&&Tt!==void 0?Tt:b.headers["x-amzn-request-id"])!==null&&ra!==void 0?ra:b.headers["x-amz-request-id"],extendedRequestId:b.headers["x-amz-id-2"],cfId:b.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),oa=s((b,E)=>collectBody(b,E).then(w=>E.utf8Encoder(w)),"Aws_restJson1_collectBodyString"),sa="AppInstanceArn",Sl="AppInstanceUserArn",di="ChimeBearer",Ih="ChannelFlowArn",Fr="MaxResults",vl="NotAfter",Dh="NotBefore",So="NextToken",qd="Privacy",Ic="ResourceARN",Yo="SubChannelId",eu="SortOrder",no="Type",Ah="arn",tu="app-instance-arn",aa="app-instance-user-arn",nu="channel-flow-arn",io="max-results",iu="not-after",wh="not-before",vo="next-token",Rs="operation",ru="privacy",Ps="scope",ro="sub-channel-id",Dc="sort-order",Oh="type",fi="x-amz-chime-bearer";class yo extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","AssociateChannelFlow",{}).n("ChimeSDKMessagingClient","AssociateChannelFlowCommand").f(void 0,void 0).ser(Om).de(Ig).build(){}s(yo,"AssociateChannelFlowCommand");class la extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","BatchCreateChannelMembership",{}).n("ChimeSDKMessagingClient","BatchCreateChannelMembershipCommand").f(void 0,cf).ser(Mm).de(Dg).build(){}s(la,"BatchCreateChannelMembershipCommand");class ca extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ChannelFlowCallback",{}).n("ChimeSDKMessagingClient","ChannelFlowCallbackCommand").f(gf,void 0).ser(Rm).de(Ag).build(){}s(ca,"ChannelFlowCallbackCommand");class yl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelBan",{}).n("ChimeSDKMessagingClient","CreateChannelBanCommand").f(void 0,Df).ser(km).de(Og).build(){}s(yl,"CreateChannelBanCommand");class ks extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannel",{}).n("ChimeSDKMessagingClient","CreateChannelCommand").f(If,void 0).ser(Pm).de(wg).build(){}s(ks,"CreateChannelCommand");class da extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelFlow",{}).n("ChimeSDKMessagingClient","CreateChannelFlowCommand").f(Af,void 0).ser(Nm).de(Mg).build(){}s(da,"CreateChannelFlowCommand");class ps extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelMembership",{}).n("ChimeSDKMessagingClient","CreateChannelMembershipCommand").f(void 0,wf).ser(Lm).de(Rg).build(){}s(ps,"CreateChannelMembershipCommand");class ua extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelModerator",{}).n("ChimeSDKMessagingClient","CreateChannelModeratorCommand").f(void 0,Of).ser(Fm).de(Pg).build(){}s(ua,"CreateChannelModeratorCommand");class El extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelBan",{}).n("ChimeSDKMessagingClient","DeleteChannelBanCommand").f(void 0,void 0).ser(xm).de(Ng).build(){}s(El,"DeleteChannelBanCommand");class bl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannel",{}).n("ChimeSDKMessagingClient","DeleteChannelCommand").f(void 0,void 0).ser(Bm).de(kg).build(){}s(bl,"DeleteChannelCommand");class _l extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelFlow",{}).n("ChimeSDKMessagingClient","DeleteChannelFlowCommand").f(void 0,void 0).ser(Um).de(Lg).build(){}s(_l,"DeleteChannelFlowCommand");class Cl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelMembership",{}).n("ChimeSDKMessagingClient","DeleteChannelMembershipCommand").f(void 0,void 0).ser(Vm).de(Fg).build(){}s(Cl,"DeleteChannelMembershipCommand");class Tl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelMessage",{}).n("ChimeSDKMessagingClient","DeleteChannelMessageCommand").f(void 0,void 0).ser(Hm).de(Bg).build(){}s(Tl,"DeleteChannelMessageCommand");class Il extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelModerator",{}).n("ChimeSDKMessagingClient","DeleteChannelModeratorCommand").f(void 0,void 0).ser(Wm).de(xg).build(){}s(Il,"DeleteChannelModeratorCommand");class Ac extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","DeleteMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(Gm).de(Ug).build(){}s(Ac,"DeleteMessagingStreamingConfigurationsCommand");class fa extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelBan",{}).n("ChimeSDKMessagingClient","DescribeChannelBanCommand").f(void 0,Rf).ser(zm).de(z).build(){}s(fa,"DescribeChannelBanCommand");class ha extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannel",{}).n("ChimeSDKMessagingClient","DescribeChannelCommand").f(void 0,Mf).ser(jm).de(Vg).build(){}s(ha,"DescribeChannelCommand");class Xo extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelFlow",{}).n("ChimeSDKMessagingClient","DescribeChannelFlowCommand").f(void 0,Pf).ser($m).de(Hg).build(){}s(Xo,"DescribeChannelFlowCommand");class pa extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelMembership",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipCommand").f(void 0,kf).ser(Km).de(Wg).build(){}s(pa,"DescribeChannelMembershipCommand");class Qo extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelMembershipForAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipForAppInstanceUserCommand").f(void 0,Nf).ser(Jm).de(Gg).build(){}s(Qo,"DescribeChannelMembershipForAppInstanceUserCommand");class ma extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratedByAppInstanceUserCommand").f(void 0,Lf).ser(Ym).de(jg).build(){}s(ma,"DescribeChannelModeratedByAppInstanceUserCommand");class ga extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelModerator",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratorCommand").f(void 0,Ff).ser(Xm).de(zg).build(){}s(ga,"DescribeChannelModeratorCommand");class Dl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DisassociateChannelFlow",{}).n("ChimeSDKMessagingClient","DisassociateChannelFlowCommand").f(void 0,void 0).ser(Qm).de($g).build(){}s(Dl,"DisassociateChannelFlowCommand");class Sa extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","GetChannelMembershipPreferencesCommand").f(void 0,Bf).ser(Zm).de(Kg).build(){}s(Sa,"GetChannelMembershipPreferencesCommand");class Ns extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMessage",{}).n("ChimeSDKMessagingClient","GetChannelMessageCommand").f(void 0,xf).ser(qm).de(Jg).build(){}s(Ns,"GetChannelMessageCommand");class Al extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMessageStatus",{}).n("ChimeSDKMessagingClient","GetChannelMessageStatusCommand").f(void 0,void 0).ser(eg).de(Yg).build(){}s(Al,"GetChannelMessageStatusCommand");class wl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetMessagingSessionEndpoint",{}).n("ChimeSDKMessagingClient","GetMessagingSessionEndpointCommand").f(void 0,void 0).ser(tg).de(Xg).build(){}s(wl,"GetMessagingSessionEndpointCommand");class Ol extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","GetMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(ng).de(Qg).build(){}s(Ol,"GetMessagingStreamingConfigurationsCommand");class va extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelBans",{}).n("ChimeSDKMessagingClient","ListChannelBansCommand").f(Uf,Vf).ser(ig).de(Zg).build(){}s(va,"ListChannelBansCommand");class Tr extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelFlows",{}).n("ChimeSDKMessagingClient","ListChannelFlowsCommand").f(Hf,Wf).ser(rg).de(Fi).build(){}s(Tr,"ListChannelFlowsCommand");class Ls extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMemberships",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsCommand").f(Gf,jf).ser(og).de(Ln).build(){}s(Ls,"ListChannelMembershipsCommand");class ya extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMembershipsForAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsForAppInstanceUserCommand").f(zf,$f).ser(sg).de(Ec).build(){}s(ya,"ListChannelMembershipsForAppInstanceUserCommand");class Ea extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMessages",{}).n("ChimeSDKMessagingClient","ListChannelMessagesCommand").f(Kf,Jf).ser(ag).de(Bd).build(){}s(Ea,"ListChannelMessagesCommand");class Zo extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelModerators",{}).n("ChimeSDKMessagingClient","ListChannelModeratorsCommand").f(Yf,Xf).ser(lg).de(sr).build(){}s(Zo,"ListChannelModeratorsCommand");class Fs extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelsAssociatedWithChannelFlow",{}).n("ChimeSDKMessagingClient","ListChannelsAssociatedWithChannelFlowCommand").f(qf,eh).ser(dg).de(hr).build(){}s(Fs,"ListChannelsAssociatedWithChannelFlowCommand");class Io extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannels",{}).n("ChimeSDKMessagingClient","ListChannelsCommand").f(Qf,Zf).ser(cg).de(xd).build(){}s(Io,"ListChannelsCommand");class qo extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelsModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelsModeratedByAppInstanceUserCommand").f(th,nh).ser(ug).de(ut).build(){}s(qo,"ListChannelsModeratedByAppInstanceUserCommand");class Do extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListSubChannels",{}).n("ChimeSDKMessagingClient","ListSubChannelsCommand").f(ih,rh).ser(fg).de(go).build(){}s(Do,"ListSubChannelsCommand");class Ml extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListTagsForResource",{}).n("ChimeSDKMessagingClient","ListTagsForResourceCommand").f(void 0,oh).ser(gh).de(Ud).build(){}s(Ml,"ListTagsForResourceCommand");class wc extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutChannelExpirationSettings",{}).n("ChimeSDKMessagingClient","PutChannelExpirationSettingsCommand").f(void 0,void 0).ser(hg).de(_i).build(){}s(wc,"PutChannelExpirationSettingsCommand");class Rl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","PutChannelMembershipPreferencesCommand").f(sh,ah).ser(pg).de(Nr).build(){}s(Rl,"PutChannelMembershipPreferencesCommand");class Pl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","PutMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(mg).de(Mr).build(){}s(Pl,"PutMessagingStreamingConfigurationsCommand");class kl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","RedactChannelMessage",{}).n("ChimeSDKMessagingClient","RedactChannelMessageCommand").f(void 0,void 0).ser(gg).de(Vd).build(){}s(kl,"RedactChannelMessageCommand");class Bs extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","SearchChannels",{}).n("ChimeSDKMessagingClient","SearchChannelsCommand").f(lh,ch).ser(Sg).de(ia).build(){}s(Bs,"SearchChannelsCommand");class ms extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","SendChannelMessage",{}).n("ChimeSDKMessagingClient","SendChannelMessageCommand").f(dh,void 0).ser(vg).de(Ot).build(){}s(ms,"SendChannelMessageCommand");class Nl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","TagResource",{}).n("ChimeSDKMessagingClient","TagResourceCommand").f(uh,void 0).ser(yg).de(Lr).build(){}s(Nl,"TagResourceCommand");class Ll extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UntagResource",{}).n("ChimeSDKMessagingClient","UntagResourceCommand").f(fh,void 0).ser(Eg).de(Sh).build(){}s(Ll,"UntagResourceCommand");class Fl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannel",{}).n("ChimeSDKMessagingClient","UpdateChannelCommand").f(hh,void 0).ser(bg).de(vh).build(){}s(Fl,"UpdateChannelCommand");class Bl extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelFlow",{}).n("ChimeSDKMessagingClient","UpdateChannelFlowCommand").f(ph,void 0).ser(_g).de(Hd).build(){}s(Bl,"UpdateChannelFlowCommand");class ee extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelMessage",{}).n("ChimeSDKMessagingClient","UpdateChannelMessageCommand").f(mh,void 0).ser(Cg).de(Wd).build(){}s(ee,"UpdateChannelMessageCommand");class N extends kn.classBuilder().ep(Gn).m(function(E,w,I,H){return[rn(I,this.serialize,this.deserialize),Sn(I,E.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelReadMarker",{}).n("ChimeSDKMessagingClient","UpdateChannelReadMarkerCommand").f(void 0,void 0).ser(Tg).de(Gd).build(){}s(N,"UpdateChannelReadMarkerCommand");const U={AssociateChannelFlowCommand:yo,BatchCreateChannelMembershipCommand:la,ChannelFlowCallbackCommand:ca,CreateChannelCommand:ks,CreateChannelBanCommand:yl,CreateChannelFlowCommand:da,CreateChannelMembershipCommand:ps,CreateChannelModeratorCommand:ua,DeleteChannelCommand:bl,DeleteChannelBanCommand:El,DeleteChannelFlowCommand:_l,DeleteChannelMembershipCommand:Cl,DeleteChannelMessageCommand:Tl,DeleteChannelModeratorCommand:Il,DeleteMessagingStreamingConfigurationsCommand:Ac,DescribeChannelCommand:ha,DescribeChannelBanCommand:fa,DescribeChannelFlowCommand:Xo,DescribeChannelMembershipCommand:pa,DescribeChannelMembershipForAppInstanceUserCommand:Qo,DescribeChannelModeratedByAppInstanceUserCommand:ma,DescribeChannelModeratorCommand:ga,DisassociateChannelFlowCommand:Dl,GetChannelMembershipPreferencesCommand:Sa,GetChannelMessageCommand:Ns,GetChannelMessageStatusCommand:Al,GetMessagingSessionEndpointCommand:wl,GetMessagingStreamingConfigurationsCommand:Ol,ListChannelBansCommand:va,ListChannelFlowsCommand:Tr,ListChannelMembershipsCommand:Ls,ListChannelMembershipsForAppInstanceUserCommand:ya,ListChannelMessagesCommand:Ea,ListChannelModeratorsCommand:Zo,ListChannelsCommand:Io,ListChannelsAssociatedWithChannelFlowCommand:Fs,ListChannelsModeratedByAppInstanceUserCommand:qo,ListSubChannelsCommand:Do,ListTagsForResourceCommand:Ml,PutChannelExpirationSettingsCommand:wc,PutChannelMembershipPreferencesCommand:Rl,PutMessagingStreamingConfigurationsCommand:Pl,RedactChannelMessageCommand:kl,SearchChannelsCommand:Bs,SendChannelMessageCommand:ms,TagResourceCommand:Nl,UntagResourceCommand:Ll,UpdateChannelCommand:Fl,UpdateChannelFlowCommand:Bl,UpdateChannelMessageCommand:ee,UpdateChannelReadMarkerCommand:N};class K extends $r{}s(K,"ChimeSDKMessaging"),Vc(U,K);const oe=Wt($r,va,"NextToken","NextToken","MaxResults"),ue=Wt($r,Tr,"NextToken","NextToken","MaxResults"),se=Wt($r,ya,"NextToken","NextToken","MaxResults"),ye=Wt($r,Ls,"NextToken","NextToken","MaxResults"),Ae=Wt($r,Ea,"NextToken","NextToken","MaxResults"),Ie=Wt($r,Zo,"NextToken","NextToken","MaxResults"),Ve=Wt($r,Fs,"NextToken","NextToken","MaxResults"),tt=Wt($r,qo,"NextToken","NextToken","MaxResults"),lt=Wt($r,Io,"NextToken","NextToken","MaxResults"),Dt=Wt($r,Do,"NextToken","NextToken","MaxResults"),ht=Wt($r,Bs,"NextToken","NextToken","MaxResults")},9111664378:(x,l,d)=>{"use strict";d.r(l),d.d(l,{fromHex:()=>m,toHex:()=>p});const c={},h={};for(let a=0;a<256;a++){let r=a.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),c[a]=r,h[r]=a}function m(a){if(a.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const r=new Uint8Array(a.length/2);for(let n=0;n<a.length;n+=2){const e=a.slice(n,n+2).toLowerCase();if(e in h)r[n/2]=h[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return r}s(m,"fromHex");function p(a){let r="";for(let n=0;n<a.byteLength;n++)r+=c[a[n]];return r}s(p,"toHex")},2412280125:(x,l,d)=>{"use strict";d.r(l),d.d(l,{fromUtf8:()=>a,toUtf8:()=>r});const c=s(n=>{const e=[];for(let t=0,i=n.length;t<i;t++){const o=n.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<n.length&&(o&64512)===55296&&(n.charCodeAt(t+1)&64512)===56320){const f=65536+((o&1023)<<10)+(n.charCodeAt(++t)&1023);e.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},"fromUtf8"),h=s(n=>{let e="";for(let t=0,i=n.length;t<i;t++){const o=n[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){const f=n[++t];e+=String.fromCharCode((o&31)<<6|f&63)}else if(240<=o&&o<365){const g="%"+[o,n[++t],n[++t],n[++t]].map(S=>S.toString(16)).join("%");e+=decodeURIComponent(g)}else e+=String.fromCharCode((o&15)<<12|(n[++t]&63)<<6|n[++t]&63)}return e},"toUtf8");function m(n){return new TextEncoder().encode(n)}s(m,"whatwgEncodingApi_fromUtf8");function p(n){return new TextDecoder("utf-8").decode(n)}s(p,"whatwgEncodingApi_toUtf8");const a=s(n=>typeof TextEncoder=="function"?m(n):c(n),"dist_es_fromUtf8"),r=s(n=>typeof TextDecoder=="function"?p(n):h(n),"dist_es_toUtf8")},7581324406:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9877075638));let p=s(class{needUpdate(r){return this.activeSpeakers?this.speakerScores[r]===0&&this.activeSpeakers.includes(r)||this.speakerScores[r]>0&&!this.activeSpeakers.includes(r):!0}updateActiveSpeakers(r,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let u=0;u<i.length;u++){const v=i[u];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((u,v)=>v.activeScore-u.activeScore).filter(function(u){return u.activeScore>0}).map(function(u){return u.attendeeId});this.activeSpeakers=o,n(o);const g=o.length>0&&o[0]===this.selfAttendeeId&&r.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==g&&(this.hasBandwidthPriority=g,this.hasBandwidthPriorityCallback(g))}updateScore(r,n,e,t,i){const o=r.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(r,n,e))}subscribe(r,n,e,t){const i=s((f,g)=>{if(!g){this.speakerScores[f]=0,this.mostRecentUpdateTimestamp[f]=Date.now(),this.updateActiveSpeakers(r,n,f);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(f,(S,u,v,y)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(r,n,S,u,v)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new m.default(this.updateIntervalMs);if(o.start(()=>{for(const f in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[f]>this.waitIntervalMs&&this.updateScore(r,n,f,0,this.speakerMuteState[f])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const f=new m.default(t);f.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,f)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(r){const n=this.detectorCallbackToHandler.get(r);this.detectorCallbackToHandler.delete(r),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(r);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(r));const t=this.detectorCallbackToScoresTimer.get(r);t&&(t.stop(),this.detectorCallbackToHandler.delete(r))}destroy(){return c(this,void 0,void 0,function*(){for(const r of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r);for(const r of this.detectorCallbackToActivityTimer.values())r.stop();for(const r of this.detectorCallbackToScoresTimer.values())r.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(r,n,e,t=1e3,i=200){this.realtimeController=r,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=p},1473791890:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{calculateScore(h,m,p){(p||m===null)&&(m=0),this.volumes.hasOwnProperty(h)||(this.volumes[h]=0),m>this.silenceThreshold?m=1:m=0;const a=this.volumes[h]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[h]=a;for(const r in this.volumes)r!==h&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*m,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(h=.9,m=.01,p=.2,a=.2){this.speakerWeight=h,this.cutoffThreshold=m,this.silenceThreshold=p,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=d},1035256489:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class tS{static create(h,m){const p=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!h||h.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!p.test(h))throw new Error(`appName must satisfy ${p} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new tS(h,m)}constructor(h,m){this.appName=h,this.appVersion=m}},"ApplicationMetadata");l.default=d},9898009183:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"Attendee");l.default=d},9598694912:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5546774952)),p=h(d(9649641385));let a=s(class{bindAudioElement(n){return c(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return c(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return c(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)p.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return c(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(u=>{t&&u.meetingAudioStreamBecameInactive(t),this.audioStream&&u.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",f=this.audioElement.sinkId;if(o===f)return;const g=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=null),i)try{yield g.setSinkId(o)}catch(u){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${u}`),u}this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=S)})}getCurrentMeetingAudioStream(){return c(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return c(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return c(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return c(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new m.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},5983965185:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5546774952));let m=s(class au{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new au(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new au(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new au(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,r=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new h.default().supportsAudioRedundancy()&&r}},"AudioProfile");l.default=m},4610074022:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let d=s(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=d},1833994912:function(x,l,d){"use strict";var c=this&&this.__createBinding||(Object.create?function(G,Z,me,ge){ge===void 0&&(ge=me),Object.defineProperty(G,ge,{enumerable:!0,get:function(){return Z[me]}})}:function(G,Z,me,ge){ge===void 0&&(ge=me),G[ge]=Z[me]}),h=this&&this.__setModuleDefault||(Object.create?function(G,Z){Object.defineProperty(G,"default",{enumerable:!0,value:Z})}:function(G,Z){G.default=Z}),m=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var Z={};if(G!=null)for(var me in G)me!=="default"&&Object.prototype.hasOwnProperty.call(G,me)&&c(Z,G,me);return h(Z,G),Z},p=this&&this.__awaiter||function(G,Z,me,ge){function rt(Ue){return Ue instanceof me?Ue:new me(function(Xe){Xe(Ue)})}return s(rt,"adopt"),new(me||(me=Promise))(function(Ue,Xe){function fe(he){try{k(ge.next(he))}catch(Se){Xe(Se)}}s(fe,"fulfilled");function Te(he){try{k(ge.throw(he))}catch(Se){Xe(Se)}}s(Te,"rejected");function k(he){he.done?Ue(he.value):rt(he.value).then(fe,Te)}s(k,"step"),k((ge=ge.apply(G,Z||[])).next())})},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(d(7581324406)),n=a(d(9598694912)),e=a(d(5983965185)),t=a(d(5546774952)),i=a(d(9200233701)),o=a(d(8619504925)),f=a(d(1197017824)),g=a(d(7551081659)),S=a(d(9447989038)),u=a(d(488357679)),v=a(d(8006173476)),y=a(d(6348496904)),_=a(d(7692233712)),C=a(d(9649641385)),T=a(d(6900744364)),A=a(d(3795683579)),O=a(d(2092275410)),D=a(d(583806999)),M=a(d(7570945794)),R=m(d(5393388022)),F=a(d(7969706599)),V=a(d(4804743313)),$=d(4136617125),X=a(d(4562177071)),Y=a(d(4713678292)),ne=a(d(9089081530)),ie=a(d(5703332651)),pe=a(d(9049733277)),Ee=a(d(4708498556)),Be=a(d(2635066756)),it=a(d(9488451395)),Ce=a(d(9638153336)),Me=a(d(7966229607)),je=a(d(1614136239)),We=a(d(3292077469)),Ze=a(d(6085879951)),ft=a(d(9588672479)),vt=a(d(9531998674)),De=a(d(587698570)),Pe=a(d(86955145)),Ke=a(d(8297256329)),Ye=a(d(7680112541)),xe=a(d(8872868578)),Ct=a(d(5976676062)),At=a(d(339097629)),Lt=a(d(3248483798)),Ft=a(d(7638277718)),Jt=a(d(4098780146)),It=a(d(2392158736)),ln=a(d(8213452704)),$n=a(d(372560720)),yn=a(d(161472916)),zt=d(6527539809),Yt=a(d(1695739824)),Mt=a(d(9677745702)),Vt=a(d(3368465086)),$t=d(8071414974),xt=a(d(1865309432)),jt=a(d(2469210420)),J=a(d(8697249276)),Fe=a(d(4675986794)),ke=a(d(1309535200)),Ge=a(d(1604549269)),gt=a(d(9136055221)),at=a(d(8058016368)),ae=a(d(4610074022));let Le=s(class lu{destroy(){return p(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(Z){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(Z):null}setAudioProfile(Z){this._audioProfile=Z}addObserver(Z){this.logger.info("adding meeting observer"),this.observerQueue.add(Z)}removeObserver(Z){this.logger.info("removing meeting observer"),this.observerQueue.delete(Z)}forEachObserver(Z){for(const me of this.observerQueue)C.default.nextTick(()=>{this.observerQueue.has(me)&&Z(me)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new ae.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new M.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const Z=s(()=>p(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(me){me.type===F.default.WebSocketClosed&&Z()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(Z=>{this.logger.error(`Signaling task pre-start failed: ${Z}`),this.signalingTask=void 0})}start(Z){this.startReturningPromise(Z).then(()=>{this.logger.info("start completed")}).catch(me=>{this.logger.error(`start failed: ${me}`)})}startReturningPromise(Z){return(Z==null?void 0:Z.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((me,ge)=>{this.sessionStateController.perform(A.default.Connect,()=>{this.actionConnect(!1).then(me).catch(ge)})}))}connectWithPromises(Z){const me=this.meetingSessionContext,ge=s((te,Nt)=>new Ft.default(this.logger,Nt,te),"timeout");this.monitorTask=new je.default(me,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const rt=this.monitorTask.once(),Ue=new vt.default(me).once();this.receiveIndexTask=new Ke.default(me),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Xe=new xe.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Me.default(me),new Ye.default(me),new it.default(me),this.receiveIndexTask]).once(),fe=new pe.default(me).once(Xe),Te=new Y.default(me).once(fe,Ue),k=new Ee.default(me).once(Te),he=new Ct.default(me).once(k),Se=new Be.default(me).once(he),be=new Lt.default(me).once(Se);return this.receiveRemotePauseResumeTask=new De.default(me),this.receiveRemotePauseResumeTask.once(be),new xe.default(this.logger,this.wrapTaskName("AudioVideoStart"),[rt,ge(this.configuration.connectionTimeoutMs,new xe.default(this.logger,"Peer",[be,this.receiveRemotePauseResumeTask,Z?new Ft.default(this.logger,new Ze.default(this.logger,"FinalizeConnection",[new Jt.default(me),new At.default(me)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new At.default(me)]))])}actionConnect(Z){var me;return p(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const ge=!!this.configuration.urls.audioHostURL;if(ge?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new ln.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new $n.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new It.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new yn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new at.default(this.logger,this._realtimeController,lu.MIN_VOLUME_DECIBELS,lu.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Xe=this.meetingSessionContext.videoUplinkBandwidthPolicy;Xe||(Xe=new Ge.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Xe),Xe.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Vt.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new J.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new jt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new gt.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Mt.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const Xe=this.configuration.meetingFeatures.contentMaxResolution===f.default.VideoResolutionUHD;Xe&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Xe)}else{const Xe=this.configuration.meetingFeatures.videoMaxResolution===f.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Xe)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new u.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new Yt.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new xt.default,this.meetingSessionContext.videosPaused=new xt.default,this.meetingSessionContext.statsCollector=new X.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new y.default(this.meetingSessionContext.signalingClient,lu.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},Z||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Xe=>{zt.Maybe.of(Xe.audioVideoDidStartConnecting).map(fe=>fe.bind(Xe)(!1))}),(me=this.eventController)===null||me===void 0||me.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const rt=ge&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+rt);const Ue=this.connectWithPromises(rt);try{yield Ue.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(A.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Xe){this.signalingTask=void 0;const fe=new g.default(this.getMeetingStatusCode(Xe)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${fe} due to error ${Xe}.`),this.sessionStateController.state()===O.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(A.default.Fail,()=>p(this,void 0,void 0,function*(){yield this.actionDisconnect(fe,!0,Xe),this.handleMeetingSessionStatus(fe,Xe)||this.notifyStop(fe,Xe)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new Ft.default(this.logger,new We.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=$.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(Z=>{zt.Maybe.of(Z.audioVideoDidStart).map(me=>me.bind(Z)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var Z;return this.sessionStateController.state()===O.default.NotConnected?((Z=this.meetingSessionContext.signalingClient)===null||Z===void 0||Z.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((me,ge)=>{this.sessionStateController.perform(A.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new g.default(S.default.Left),!1,null).then(me).catch(ge)})})}stop(){this.stopReturningPromise()}actionDisconnect(Z,me,ge){return p(this,void 0,void 0,function*(){try{yield new xe.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new Ft.default(this.logger,new Ce.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const rt=[new Ft.default(this.logger,new ie.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new xe.default(this.logger,this.wrapTaskName("AudioVideoClean"),rt).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(A.default.FinishDisconnecting,()=>{me||this.notifyStop(Z,ge)})})}update(){let me=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(me||(me=this.meetingSessionContext.peer===void 0),me||(me=!this.updateRemoteVideosFromPolicy()),me||(me=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!me)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const ge=this.sessionStateController.perform(A.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return ge===D.default.Transitioned||ge===D.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!R.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===R.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const Z=this.detectChangesInVideosToReceive();if(Z===void 0)return!1;const me=Z.added,ge=Z.simulcastStreamUpdates,rt=Z.removed,Ue=this.meetingSessionContext,Xe=[];for(const[fe,Te]of ge.entries()){const k=new V.default;if(k.streamId=Te,k.attendeeId=Ue.videoStreamIndex.attendeeIdForStreamId(Te),k.mid=Ue.transceiverController.getMidForStreamId(fe),k.mid===void 0)return this.logger.info(`No MID found for stream ID ${fe}, cannot update stream without renegotiation`),!1;if(Xe.push(k),Ue.transceiverController.setStreamIdForMid(k.mid,Te),Ue.videoStreamIndex.overrideStreamIdMappings(fe,Te),Ue.videoTileController.haveVideoTileForAttendeeId(k.attendeeId)){const he=Ue.videoTileController.getVideoTileForAttendeeId(k.attendeeId);if(!he.setStreamId)return!1;he.setStreamId(Te)}}return Xe.length!==0&&Ue.signalingClient.remoteVideoUpdate(Xe,[]),me.length!==0||rt.length!==0?!1:(Ue.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const Z=this.meetingSessionContext;if(Z.videosToReceive===null||!Z.transceiverController||!Z.transceiverController.getMidForStreamId||!Z.transceiverController.setStreamIdForMid||!Z.videosToReceive.forEach||!Z.signalingClient.remoteVideoUpdate||!Z.videoStreamIndex.overrideStreamIdMappings)return;let me=[];const ge=new Map;let rt=[];if(Z.lastVideosToReceive===null)me=Z.videosToReceive.array();else{const Ue=Z.videoStreamIndex;Z.videosToReceive.forEach(Xe=>{if(Z.lastVideosToReceive.contain(Xe))return;let fe=!1;Z.lastVideosToReceive.forEach(Te=>{fe||Ue.StreamIdsInSameGroup(Te,Xe)&&(ge.set(Te,Xe),fe=!0)}),fe||me.push(Xe)}),rt=Z.lastVideosToReceive.array().filter(Xe=>{const fe=Z.videosToReceive.contain(Xe),Te=ge.has(Xe);return!fe&&!Te})}return this.logger.info(`Request to update remote videos with added: [${me}], updated: [${Array.from(ge.entries()).map(Ue=>{let[Xe,fe]=Ue;return`${Xe}->${fe}`}).join(",")}], removed: [${rt}]`),{added:me,removed:rt,simulcastStreamUpdates:ge}}isNotAddingOrRemovingStreams(){const Z=this.detectChangesInVideosToReceive();if(Z===void 0)return!1;const me=Z.added,ge=Z.removed;return me.length!==0||ge.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const Z=this.meetingSessionContext;if(Z.videosToReceive===null)return!1;const me=Z.videosToReceive.array().map(fe=>Z.videoStreamIndex.groupIdForStreamId(fe));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(me));const ge=$t.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(Z,me,Z.videoDownlinkBandwidthPolicy.getVideoPreferences()),rt=new Map,Ue=[];for(const fe of ge){let Te=!1;if(!Z.lastVideoSubscriptionConfiguration.has(fe.groupId))Te=!0;else{const k=Z.lastVideoSubscriptionConfiguration.get(fe.groupId);fe.equals(k)||(this.logger.debug(`${JSON.stringify(fe)} does not equal ${JSON.stringify(k)}, sending update`),Te=!0)}rt.set(fe.groupId,fe),Te&&Ue.push(fe)}Z.lastVideoSubscriptionConfiguration=rt;const Xe=[];if(Z.lastVideosToReceive!==null){const fe=new Set(me);for(const Te of Z.lastVideosToReceive.array()){const k=Z.videoStreamIndex.groupIdForStreamId(Te);if(!fe.has(k)){const he=Z.transceiverController.getMidForGroupId(k);if(he===void 0){Z.logger.warn(`Could not find MID for group ID to remove: ${k}`);continue}Xe.push(he)}}}return(Ue.length!==0||Xe.length!==0)&&Z.signalingClient.remoteVideoUpdate(Ue,Xe),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const Z=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(Z)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const Z=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!Z||!Z.headerExtensions?!1:Z.headerExtensions.some(me=>me.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(Z){const me=s(()=>p(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),Z()}),"restartVideo"),ge=this.sessionStateController.perform(A.default.Update,()=>{me()});return ge===D.default.Transitioned||ge===D.default.DeferredTransition}replaceLocalVideo(Z){return p(this,void 0,void 0,function*(){if(!Z||Z.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const me=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(me){const ge=me.state(),rt=Z.getVideoTracks()[0].getSettings();me.bindVideoStream(ge.boundAttendeeId,!0,Z,rt.width,rt.height,ge.streamId,ge.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(Z.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=Z,this.logger.info("Local video input is updated")})}replaceLocalAudio(Z){return p(this,void 0,void 0,function*(){if(!Z||Z.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(Z.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=Z,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(Z){return p(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new xe.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new Pe.default(this.meetingSessionContext),new Ft.default(this.logger,new xe.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ee.default(this.meetingSessionContext),new Ct.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new Lt.default(this.meetingSessionContext),new At.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),Z&&this.sessionStateController.perform(A.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(me){this.sessionStateController.perform(A.default.FinishUpdating,()=>{const ge=new g.default(this.getMeetingStatusCode(me)||S.default.TaskFailed);ge.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(ge,me)})}})}notifyStop(Z,me){var ge;if(this.forEachObserver(rt=>{zt.Maybe.of(rt.audioVideoDidStop).map(Ue=>Ue.bind(rt)(Z))}),this.eventController){const{signalingOpenDurationMs:rt,poorConnectionCount:Ue,startTimeMs:Xe,iceGatheringDurationMs:fe,attendeePresenceDurationMs:Te,meetingStartDurationMs:k}=this.meetingSessionContext,he={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Xe===null?0:Math.round(Date.now()-Xe),meetingStatus:S.default[Z.statusCode()],signalingOpenDurationMs:rt,iceGatheringDurationMs:fe,attendeePresenceDurationMs:Te,poorConnectionCount:Ue,meetingStartDurationMs:k,retryCount:this.totalRetryCount},Se=me&&me.message||((ge=Z.toString)===null||ge===void 0?void 0:ge.call(Z))||"";he.meetingDurationMs===0?(he.meetingErrorMessage=Se,delete he.meetingDurationMs,delete he.attendeePresenceDurationMs,delete he.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",he)):Z.isFailure()||Z.isAudioConnectionFailure()?(he.meetingErrorMessage=Se,this.eventController.publishEvent("meetingFailed",he)):this.eventController.publishEvent("meetingEnded",he)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const Z=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(Z)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(Z,me){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(rt=>{zt.Maybe.of(rt.audioVideoWasDemotedFromPrimaryMeeting).map(Ue=>Ue.bind(rt)(new g.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const ge=this._reconnectController.retryWithBackoff(()=>p(this,void 0,void 0,function*(){this.sessionStateController.state()===O.default.NotConnected?this.sessionStateController.perform(A.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(A.default.Reconnect,()=>{this.actionReconnect(Z)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return ge||this.sessionStateController.perform(A.default.Fail,()=>{this.actionDisconnect(Z,!1,me)}),ge}actionReconnect(Z){return p(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(me=>{zt.Maybe.of(me.audioVideoDidStartConnecting).map(ge=>ge.bind(me)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new De.default(this.meetingSessionContext);try{yield new xe.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new Ft.default(this.logger,new xe.default(this.logger,"Media",[new ne.default(this.meetingSessionContext),new xe.default(this.logger,"Signaling",[new We.default(this.meetingSessionContext),new it.default(this.meetingSessionContext)]),new pe.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new Pe.default(this.meetingSessionContext),new Ft.default(this.logger,new xe.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ee.default(this.meetingSessionContext),new Ct.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new Lt.default(this.meetingSessionContext),new At.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(A.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:me,poorConnectionCount:ge,startTimeMs:rt,iceGatheringDurationMs:Ue,attendeePresenceDurationMs:Xe,meetingStartDurationMs:fe}=this.meetingSessionContext,Te={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-rt),meetingStatus:S.default[Z.statusCode()],signalingOpenDurationMs:me,iceGatheringDurationMs:Ue,attendeePresenceDurationMs:Xe,poorConnectionCount:ge,meetingStartDurationMs:fe,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Te)}this.actionFinishConnecting()})}catch(me){this.sessionStateController.perform(A.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const ge=new g.default(this.getMeetingStatusCode(me)||S.default.TaskFailed);this.handleMeetingSessionStatus(ge,me)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(Z){return`${Z}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(Z){const me=/the meeting status code: (\d+)/.exec(Z&&Z.message);return me&&me.length>1?Number.parseInt(me[1],10):null}enforceBandwidthLimitationForSender(Z){return p(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(Z)})}handleMeetingSessionStatus(Z,me){if(this.logger.info(`handling status: ${S.default[Z.statusCode()]}`),Z.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(Z),Z.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(Z.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(ge=>{zt.Maybe.of(ge.videoSendDidBecomeUnavailable).map(rt=>rt.bind(ge)())}),!1;if(Z.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(ge=>{zt.Maybe.of(ge.audioVideoWasDemotedFromPrimaryMeeting).map(rt=>rt.bind(ge)(Z))}),!1;if(Z.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(Z.isFailure()||Z.isTerminal())&&this.meetingSessionContext.reconnectController){const ge=this.reconnect(Z,me);return ge?this.logger.warn(`will retry due to status code ${S.default[Z.statusCode()]}${me?` and error: ${me.message}`:""}`):this.logger.error(`failed with status code ${S.default[Z.statusCode()]}${me?` and error: ${me.message}`:""}`),ge}return!1}setVideoMaxBandwidthKbps(Z){if(Z<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${Z} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(Z)),this.maxUplinkBandwidthKbps=Z}handleHasBandwidthPriority(Z){return p(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Z),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const me=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Z);const ge=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();me!==ge&&(this.logger.info(`video send bandwidth priority ${Z} max has changed from ${me} kbps to ${ge} kbps`),yield this.enforceBandwidthLimitationForSender(ge))}})}pauseReceivingStream(Z){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([Z])}resumeReceivingStream(Z){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([Z])}setVideoCodecSendPreferences(Z){this.videoSendCodecPreferences=Z,this.meetingSessionContext.videoSendCodecPreferences=Z,this.sessionStateController.state()!==O.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:Z}=this.meetingSessionContext;if(!Z)return this.logger.info("meeting has not started"),[];const me=this.configuration.credentials.attendeeId;return Z.allVideoSendingSourcesExcludingSelf(me)}encodingSimulcastLayersDidChange(Z){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(me=>{zt.Maybe.of(me.encodingSimulcastLayersDidChange).map(ge=>ge.bind(me)(Z))})}promoteToPrimaryMeeting(Z){return this.actionPromoteToPrimaryMeeting(Z)}actionPromoteToPrimaryMeeting(Z){return p(this,void 0,void 0,function*(){let me=new g.default(S.default.SignalingRequestFailed);return yield new xe.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new Ft.default(this.logger,new ft.default(this.meetingSessionContext,Z,ge=>{me=ge}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=me.statusCode()===S.default.OK,me})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(Z=>{zt.Maybe.of(Z.audioVideoWasDemotedFromPrimaryMeeting).map(me=>me.bind(Z)(new g.default(S.default.OK)))})}videoInputDidChange(Z){return p(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(Z?yield this.replaceLocalVideo(Z):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(Z){return p(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!Z)try{Z=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(Z)})}constructor(Z,me,ge,rt,Ue,Xe){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new ae.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=me,this.sessionStateController=new T.default(this._logger),this._configuration=Z,this._webSocketAdapter=ge,this._realtimeController=new _.default(rt),this._realtimeController.realtimeSetLocalAttendeeId(Z.credentials.attendeeId,Z.credentials.externalUserId),this._mediaStreamBroker=rt,this._reconnectController=Ue,this._videoTileController=new Fe.default(new ke.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Xe}},"DefaultAudioVideoController");l.default=Le,Le.MIN_VOLUME_DECIBELS=-42,Le.MAX_VOLUME_DECIBELS=-14,Le.PING_PONG_INTERVAL_MS=1e4},8589145157:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(4571447548)),m=c(d(913629600)),p=c(d(5047661014)),a=c(d(9437918857)),r=c(d(6226061697)),n=c(d(8023404193)),e=c(d(7551081659)),t=c(d(9447989038)),i=c(d(803810435)),o=c(d(2114525466)),f=c(d(7880459944)),g=c(d(1833994912));let S=s(class extends g.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const y=new r.default;y.meetingId="",y.externalMeetingId="",y.credentials=new n.default,y.credentials.attendeeId="",y.credentials.joinToken="",y.urls=new i.default,y.urls.turnControlURL="",y.urls.audioHostURL="",y.urls.signalingURL="wss://localhost/";const _=new p.default;super(v||y,_,new f.default(new p.default),new a.default,new o.default(0,new h.default(0,0,0)),new m.default(v||y,_))}},"NoOpAudioVideoController");l.default=S},9305916160:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(p,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}s(o,"fulfilled");function f(S){try{g(n.throw(S))}catch(u){i(u)}}s(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}s(g,"step"),g((n=n.apply(p,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7952414906);let m=s(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const r=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,r),r}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,r){this.videoTileController.bindVideoElement(a,r),this.trace("bindVideoElement",{tileId:a,videoElementId:r.id})}unbindVideoElement(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,r),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:r})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const r=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),r}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const r=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,r),r}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const r=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),r}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,r){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,r),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,r){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,r),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,r)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,r,n){this.realtimeController.realtimeSendDataMessage(a,r,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,r){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,r),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,r,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,r,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,r),r})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const r=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,r),r})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,r),r})}startAudioInput(a){return c(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return c(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return c(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return c(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const r=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),r}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const r=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),r}chooseVideoInputQuality(a,r,n){this.deviceController.chooseVideoInputQuality(a,r,n),this.trace("chooseVideoInputQuality",{width:a,height:r,frameRate:n})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,r){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,r)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const r=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),r}startContentShareFromScreenCapture(a,r){const n=this.contentShareController.startContentShareFromScreenCapture(a,r);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,r,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof r<"u"&&(i+=` ${JSON.stringify(r)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const r=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,r),r}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,r,n,e,t,i){this.audioVideoController=a,this.videoTileController=r,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");l.default=m},5281791356:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(890779530)),p=d(1174868230);let a=s(class extends m.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:f,height:g}=o;if(!e||!t){i.clearRect(0,0,f,g);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,f,g),i.drawImage(this.scaledCanvas,0,0,f,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,f,g),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,f,g),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=p.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return c(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},890779530:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5407648653)),p=d(1174868230),a=h(d(3724840282));let r=s(class extends m.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:f}=this,{width:g,height:S}=f;o.save(),o.clearRect(0,0,g,S),o.drawImage(this.scaledCanvas,0,0,g,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,g,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,f.width,f.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=p.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return c(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=r},1174868230:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const d={LOW:7,MEDIUM:15,HIGH:30};let c=s(class{static getBlurAmount(m,p){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*p.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=c,c.BLUR_STRENGTH_DIVISOR=540,l.default=d},3437938989:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(f,g,S,u){function v(y){return y instanceof S?y:new S(function(_){_(y)})}return s(v,"adopt"),new(S||(S=Promise))(function(y,_){function C(O){try{A(u.next(O))}catch(D){_(D)}}s(C,"fulfilled");function T(O){try{A(u.throw(O))}catch(D){_(D)}}s(T,"rejected");function A(O){O.done?y(O.value):v(O.value).then(C,T)}s(A,"step"),A((u=u.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6828608641)),p=h(d(3714104304)),a=h(d(1370928943)),r=h(d(3814682321)),n=h(d(5281791356)),e=h(d(890779530)),t=h(d(1174868230));let i=s(class extends r.default{setBlurStrength(){}loadAssets(){return c(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=s(class xl extends m.default{static create(g,S){return c(this,void 0,void 0,function*(){g=xl.resolveSpec(g),S=xl.resolveOptions(S);const{logger:u}=S,v=yield xl.isSupported(g,S);if(u.info(`processor is ${v?"":"not"} supported`),!v)return u.warn("Using no-op processor because background blur is not supported"),new i;let y;return(yield e.default.isSupported())?(u.info("Using browser-provided background blur"),y=new e.default(g,S)):(u.info("Using built-in background blur"),y=new n.default(g,S)),yield y.loadAssets(),y})}static resolveOptions(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},g);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new p.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(g,S){return g=xl.resolveSpec(g),S=xl.resolveOptions(S),super.isSupported(g,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},3724840282:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5703733606));let m=s(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=m},3051230507:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class nS{static builder(){return new nS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const h={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},p="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=p,this.input=h,this.output=m,this}withPath(h){return this.path=h,this}withInput(h){return this.input=h,this}withOutput(h){return this.output=h,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=d},3522273832:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=.8;let c=s(class{reportEvent(m){const p=m-this.lastReportedEventTimestamp;if(p>=this.reportingPeriodMillis){const a=this.filterCount,r=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||a===0)return;const n=Math.round(r/a),e=Math.round(this.framerate*(p/1e3))-a,t=Math.round(100*r/p);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:p}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:r,periodMillis:p})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*d)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const p=Date.now();this.reportEvent(p)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,p,a,r){this.delegate=m,this.reportingPeriodMillis=p,this.filterCPUUtilization=a,this.logger=r,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=c},5407648653:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const m=d(5963876428),p=h(d(1458156729)),a=h(d(3522273832));let r=s(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=s(class Rh{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,f)=>{i.resolve=o,i.reject=f}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return c(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield m.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return c(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const f=o.width,g=o.height;if(f===0||g===0)return i;this.sourceWidth===0&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==f||this.sourceHeight!==g)&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const u=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const y=this.scaledCanvas.getContext("2d");y.save(),y.scale(u,v),y.drawImage(o,0,0),y.restore();const _=y.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const C=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:_},[_.data.buffer]),S=yield C}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,f,g;return c(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(f=this.targetCanvas)===null||f===void 0||f.remove(),this.targetCanvas=void 0,(g=this.scaledCanvas)===null||g===void 0||g.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,f,g,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new p.default(this.targetCanvas),this.mask$=new r,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Rh.createWorkerPromise(),this.loadModelPromise=Rh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(f),this.spec=o,this.logger=f.logger,this.delegate=g,this.initCPUMonitor(f),this.eventController=S}},"BackgroundFilterProcessor");l.default=n;let e=s(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},6828608641:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(f,g,S,u){function v(y){return y instanceof S?y:new S(function(_){_(y)})}return s(v,"adopt"),new(S||(S=Promise))(function(y,_){function C(O){try{A(u.next(O))}catch(D){_(D)}}s(C,"fulfilled");function T(O){try{A(u.throw(O))}catch(D){_(D)}}s(T,"rejected");function A(O){O.done?y(O.value):v(O.value).then(C,T)}s(A,"step"),A((u=u.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(5963876428),p=d(7984036634),a=h(d(3051230507)),r=h(d(5546774952)),n=h(d(6885109343)),e=s(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=s(class{static defaultAssetSpec(){const g=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${g.major}.${g.minor}`}}static createUrlWithParams(g,S){const u=new URL(g),v=Object.keys(S);for(const y of v)S[y]!==void 0&&u.searchParams.set(y,S[y]);return u.toString()}static resolveSpec(g){const{paths:S=i,model:u=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:y=this.defaultAssetSpec().revisionID}=g||{},_={assetGroup:v,revisionID:y,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,_),S.wasm=this.createUrlWithParams(S.wasm,_),S.simd=this.createUrlWithParams(S.simd,_),u.path=this.createUrlWithParams(u.path,_),{paths:S,model:u,assetGroup:v,revisionID:y}}static resolveOptions(g){g.reportingPeriodMillis||(g.reportingPeriodMillis=1e3);const S=30;return g.filterCPUUtilization?(g.filterCPUUtilization<0||g.filterCPUUtilization>100)&&(g.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),g.filterCPUUtilization=S):g.filterCPUUtilization=S,g}static isSupported(g,S){const{logger:u}=S;return typeof globalThis>"u"?(u.info("Browser does not have globalThis."),Promise.resolve(!1)):new r.default().supportsBackgroundFilter()?p.supportsWASM(globalThis,u)?this.supportsBackgroundFilter(globalThis,g,u):(u.info("Browser does not support WASM."),Promise.resolve(!1)):(u.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0;return c(this,void 0,void 0,function*(){if(!p.supportsWorker(g,u))return u.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const y=yield m.loadWorker(v,"BackgroundFilterWorker",{},null);try{y.terminate()}catch(_){u.info(`Failed to terminate worker. ${_.message}`)}return!0}catch(y){return u.info(`Failed to fetch and instantiate test worker ${y.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},5703733606:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}filterFrameDurationHigh(h){var m;for(const p of this.observers)(m=p.filterFrameDurationHigh)===null||m===void 0||m.call(p,h)}filterCPUUtilizationHigh(h){var m;for(const p of this.observers)(m=p.filterCPUUtilizationHigh)===null||m===void 0||m.call(p,h)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=d},4950936447:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5407648653)),p=h(d(2254148388));let a=s(class Ph extends m.default{setImageBlob(n){return c(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield Ph.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:f,height:g}=o;i.save(),i.clearRect(0,0,f,g),i.drawImage(this.scaledCanvas,0,0,f,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,f,g),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return c(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return c(this,void 0,void 0,function*(){this.replacementImage=yield Ph.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return c(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new p.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=a},3561775467:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(i,o,f,g){function S(u){return u instanceof f?u:new f(function(v){v(u)})}return s(S,"adopt"),new(f||(f=Promise))(function(u,v){function y(T){try{C(g.next(T))}catch(A){v(A)}}s(y,"fulfilled");function _(T){try{C(g.throw(T))}catch(A){v(A)}}s(_,"rejected");function C(T){T.done?u(T.value):S(T.value).then(y,_)}s(C,"step"),C((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6828608641)),p=h(d(3714104304)),a=h(d(1370928943)),r=h(d(3814682321)),n=h(d(4950936447));let e=s(class extends r.default{loadAssets(){return c(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return c(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=s(class iS extends m.default{static create(o,f){return c(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const{logger:g}=f;if(!(yield iS.isSupported(o,f)))return g.warn("Using no-op processor because background replacement is not supported"),new e;g.info("Using background replacement filter");const u=new n.default(o,f);return yield u.loadAssets(),u})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=Object.assign({},o);return f.logger||(f.logger=new p.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(f)}static resolveOptionsAsync(o){return c(this,void 0,void 0,function*(){if(!o.imageBlob){const f=document.createElement("canvas");f.width=100,f.height=100;const g=f.getContext("2d");g.fillStyle="blue",g.fillRect(0,0,100,100);const S=yield new Promise(u=>{f.toBlob(u)});o.imageBlob=S}})}static isSupported(o,f){const g=Object.create(null,{isSupported:{get:()=>super.isSupported}});return c(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const S=f.imageBlob,u=URL.createObjectURL(S);try{yield n.default.loadImage(u)}catch(v){return f.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(u)}return g.isSupported.call(this,o,f)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},2254148388:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5703733606));let m=s(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=m},4571447548:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const h=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,h}constructor(h,m,p){this.fixedWaitMs=h,this.shortBackoffMs=m,this.longBackoffMs=p,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=d},4692955950:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(4571447548)),m=c(d(1733276918));let p=s(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(r){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,r)}constructor(r,n,e){this.fixedWaitMs=r,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=p},1733276918:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(4571447548));let m=s(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,r,n,e){super(a,r,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=m},5546774952:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(585669709),m=d(888724265);let p=s(class kh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const r of this.chromeLike)if(r===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const r of this.webkitBrowsers)if(r===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=kh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=kh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(r,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(r/64)*64,Math.ceil(n/64)*64]:[r,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const r=[];for(const n in this.browserSupport)r.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return r.join(", ")}supportedVideoCodecs(){return c(this,void 0,void 0,function*(){const r=new RTCPeerConnection;return r.addTransceiver("video",{direction:"inactive",streams:[]}),(yield r.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=p,p.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,p.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},9029233041:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),m=c(d(6502873558)),p=c(d(6132421099)),a=c(d(7966078085));let r=s(class rS{getMetricMap(e,t){switch(e){case p.default.AUDIO:switch(t){case m.default.UPSTREAM:return this.audioUpstreamMetricMap;case m.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case p.default.VIDEO:switch(t){case m.default.UPSTREAM:return this.videoUpstreamMetricMap;case m.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:f,source:g}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const u=this.streamMetricReports[S];if(u.direction===t.dir&&u.mediaType===t.media)return f(g||t.source,Number(S))}else return f(g||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],f=this.getMetricMap(i.media,i.dir)[i.source],{transform:g,source:S}=f;return g(S||i.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===p.default.VIDEO&&this.streamMetricReports[e].direction===m.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===p.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const u=this.getObservableVideoMetricValue(S,Number(t));isNaN(u)||(i[S]=u)}const o=this.streamMetricReports[t].groupId,f=this.streamMetricReports[t].streamId;let g="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?g=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:g=f?this.videoStreamIndex.attendeeIdForStreamId(f):this.selfAttendeeId,e[g]=e[g]?e[g]:{},e[g][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new rS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o])},this.decoderLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.concealedSamples-(g.previousMetrics.concealedSamples||0),u=g.currentMetrics.totalSamplesReceived-(g.previousMetrics.totalSamplesReceived||0);return u<=0||u-S<=0?0:S/u*100},this.packetLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics[o]-(g.previousMetrics[o]||0),u=g.currentMetrics.packetsLost-(g.previousMetrics.packetsLost||0),v=S+u;return v<=0||u<=0?0:u*100/v},this.jitterBufferMs=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.jitterBufferDelay-(g.previousMetrics.jitterBufferDelay||0),u=g.currentMetrics.jitterBufferEmittedCount-(g.previousMetrics.jitterBufferEmittedCount||0);return S<=0||u<=0?0:S/u*1e3},this.countPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:Math.trunc(u/S)},this.bitsPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=(g.currentMetrics[o]-(g.previousMetrics[o]||0))*8;return u<=0?0:Math.trunc(u/S)},this.secondsToMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:u*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,f)=>{const g=this.streamMetricReports[f];if(g.previousObjectMetrics[o]===void 0||g.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let u=0,v=0;for(const[_,C]of Object.entries(g.previousObjectMetrics[o]))_==="cpu"&&(u=C);for(const[_,C]of Object.entries(g.currentObjectMetrics[o]))_==="cpu"&&(v=C);const y=v-u;return y<=0?0:y*1e3/S},this.isHardwareImplementation=(o,f)=>{const g=this.streamMetricReports[f];if(g.currentStringMetrics[o]===void 0)return NaN;const S=String(g.currentStringMetrics[o]),u=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return u&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:p.default.VIDEO,dir:m.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:p.default.AUDIO,dir:m.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:p.default.AUDIO,dir:m.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:p.default.AUDIO,dir:m.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:p.default.AUDIO,dir:m.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:p.default.VIDEO,dir:m.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=r},6502873558:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var d;(function(c){c[c.UPSTREAM=0]="UPSTREAM",c[c.DOWNSTREAM=1]="DOWNSTREAM"})(d=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=d},6132421099:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var d;(function(c){c[c.AUDIO=0]="AUDIO",c[c.VIDEO=1]="VIDEO"})(d=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=d},863418510:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"ClientVideoStreamReceivingReport");l.default=d},7966078085:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=d},3237015968:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=d},6172292806:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=d},1516469294:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(h){this.currentData=h}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const h=this.health();return h!==this.currentHealth?(this.currentHealth=h,h):null}constructor(h,m,p){this.minHealth=h.minHealth,this.maxHealth=h.maxHealth,this.currentHealth=h.initialHealth,this.currentData=m.clone(),this.name=p}},"BaseConnectionHealthPolicy");l.default=d},9200233701:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class ba{static isTimestampRecent(h,m){return Date.now()<h+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(h){return ba.isTimestampRecent(this.connectionStartTimestampMs,h)}isLastPacketLossRecent(h){return ba.isTimestampRecent(this.lastPacketLossInboundTimestampMs,h)}isGoodSignalRecent(h){return ba.isTimestampRecent(this.lastGoodSignalTimestampMs,h)}isWeakSignalRecent(h){return ba.isTimestampRecent(this.lastWeakSignalTimestampMs,h)}isNoSignalRecent(h){return ba.isTimestampRecent(this.lastNoSignalTimestampMs,h)}clone(){const h=new ba;return h.connectionStartTimestampMs=this.connectionStartTimestampMs,h.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,h.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,h.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,h.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,h.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,h.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,h.consecutiveMissedPongs=this.consecutiveMissedPongs,h.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),h.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),h.audioSpeakerDelayMs=this.audioSpeakerDelayMs,h.isVideoEncoderHardware=this.isVideoEncoderHardware,h.videoEncodingTimeInMs=this.videoEncodingTimeInMs,h.cpuLimitationDuration=this.cpuLimitationDuration,h.videoInputFps=this.videoInputFps,h.videoEncodeFps=this.videoEncodeFps,h}setConsecutiveMissedPongs(h){this.consecutiveMissedPongs=h}setConsecutiveStatsWithNoPackets(h){this.consecutiveStatsWithNoPackets=h}setConsecutiveStatsWithNoAudioPacketsSent(h){this.consecutiveStatsWithNoAudioPacketsSent=h}setLastPacketLossInboundTimestampMs(h){this.lastPacketLossInboundTimestampMs=h}setLastNoSignalTimestampMs(h){this.lastNoSignalTimestampMs=h}setLastWeakSignalTimestampMs(h){this.lastWeakSignalTimestampMs=h}setLastGoodSignalTimestampMs(h){this.lastGoodSignalTimestampMs=h}setAudioSpeakerDelayMs(h){this.audioSpeakerDelayMs=h}setIsVideoEncoderHardware(h){this.isVideoEncoderHardware=h}setVideoEncodingTimeInMs(h){this.videoEncodingTimeInMs=h}setCpuLimitationDuration(h){this.cpuLimitationDuration=h}setVideoInputFps(h){this.videoInputFps=h}setVideoEncodeFps(h){this.videoEncodeFps=h}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=d},8692068971:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6661072615)),m=c(d(1502393534));let p=s(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[h.default,m.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=p},5850044630:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1516469294));let m=s(class Ho extends h.default{health(){if(this.currentData.isConnectionStartRecent(Ho.CONNECTION_WAIT_TIME_MS))return 1;const r=this.currentData.consecutiveStatsWithNoPackets>=Ho.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=Ho.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Ho.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Ho.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),r||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${r}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(a,r,n){super(r,n,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,Ho.CONNECTION_UNHEALTHY_THRESHOLD=r.connectionUnhealthyThreshold,Ho.CONNECTION_WAIT_TIME_MS=r.connectionWaitTimeMs,Ho.MISSED_PONGS_THRESHOLD=r.missedPongsUpperThreshold,Ho.MAXIMUM_AUDIO_DELAY_MS=r.maximumAudioDelayMs,Ho.MAXIMUM_AUDIO_DELAY_DATA_POINTS=r.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=m},4866586987:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1516469294));let m=s(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),r=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&r}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,r,n){super(r,n,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=r.sendingAudioFailureSamplesToConsider>0?r.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=r.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=r.maximumTimesToWarn,this.coolDownTimeMs=r.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=m},174963938:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1516469294));let m=s(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,r=a*this.packetsExpected;let n=0;for(let e=0;e<a;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/r,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,r){super(a,r,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=m},3334420728:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var d;(function(c){c.VideoEncodingCpuHealth="Video Encoding CPU Health",c.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(d=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=d},6661072615:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1516469294)),m=c(d(3334420728));let p=s(class extends h.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=r.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=r.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=p},1502393534:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1516469294)),m=c(d(3334420728));let p=s(class extends h.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=r.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=p},8619504925:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(6527539809);let h=s(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(p){p===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):p<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(p,a,r){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",r),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(p){let a=0,r=0;const n=p.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=p.getRTCStatsReport();let f=0;o.forEach(S=>{S.type==="candidate-pair"&&S.bytesReceived&&(f+=S.bytesReceived)});const g=f-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=f,typeof e=="number"&&typeof t=="number"){if(a=e,r=t,a<0||r<0||g<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,r),g>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||r>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(p),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(p){p>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(p){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),r=p.getVideoUpstreamSsrc();if(!a||r===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const n=p.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",r),e=p.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",r),t=p.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",r),i=p.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",r),o=p.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",r);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(p,a){p.unshift(a),p.length>60&&p.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(p=>{c.Maybe.of(p.connectionHealthDidChange).map(a=>a.bind(p)(this.connectionHealthData.clone()))})}constructor(p,a,r,n,e){this.audioVideoController=p,this.realtimeController=a,this.connectionHealthData=r,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},805846668:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.Modality="#content"})(d||(d={})),l.default=d},220809536:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5546774952)),p=h(d(8503424008));let a=s(class Nh{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return c(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),p.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return c(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return c(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return c(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new m.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||Nh.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||Nh.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},7050079116:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(g,S,u,v){function y(_){return _ instanceof u?_:new u(function(C){C(_)})}return s(y,"adopt"),new(u||(u=Promise))(function(_,C){function T(D){try{O(v.next(D))}catch(M){C(M)}}s(T,"fulfilled");function A(D){try{O(v.throw(D))}catch(M){C(M)}}s(A,"rejected");function O(D){D.done?_(D.value):y(D.value).then(T,A)}s(O,"step"),O((v=v.apply(g,S||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1197017824)),p=h(d(6226061697)),a=h(d(8023404193)),r=h(d(8006173476)),n=h(d(9649641385)),e=d(6527539809),t=h(d(681222244)),i=h(d(4499376852)),o=h(d(805846668));let f=s(class{static createContentShareMeetingSessionConfigure(S){const u=new p.default;return u.meetingId=S.meetingId,u.externalMeetingId=S.externalMeetingId,u.urls=S.urls,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.credentials=new a.default,u.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,u.credentials.externalUserId=S.credentials.externalUserId,u.credentials.joinToken=S.credentials.joinToken+o.default.Modality,u.meetingFeatures=S.meetingFeatures.clone(),u.videoDownlinkBandwidthPolicy=new t.default,u}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,u){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,u)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return c(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===m.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let u=0;u<this.mediaStreamBroker.mediaStream.getTracks().length;u++)this.mediaStreamBroker.mediaStream.getTracks()[u].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,u){return c(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,u);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(u=>u.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(u=>u.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return c(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const u of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(u)&&S(u)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(u=>{e.Maybe.of(u.contentShareDidStop).map(v=>v.call(u))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,u,v,y)=>{const _=new r.default(S).hasModality(r.default.MODALITY_CONTENT),C=new r.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!_||!C||!u||this.contentShareTile)return;const T=this.mediaStreamBroker.mediaStream;if(T!=null&&T.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const A=T.getVideoTracks()[0];let O,D;if(A.getSettings){const M=A.getSettings();O=M.width,D=M.height}else{const M=A.getCapabilities();O=M.width,D=M.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,T,O,D,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(A=>{e.Maybe.of(A.contentShareDidStart).map(O=>O.call(A))})})}constructor(S,u,v){this.mediaStreamBroker=S,this.contentAudioVideo=u,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=f},8207737579:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=s(class Ao{static register(){!("document"in d.g)||!document.addEventListener||Ao.shouldRegisterCSPMonitor&&(Ao.added||(document.addEventListener("securitypolicyviolation",Ao.listener),Ao.added=!0))}static unregister(){!("document"in d.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Ao.listener),Ao.loggers=new Set,Ao.added=!1)}static disable(){Ao.shouldRegisterCSPMonitor=!1,Ao.unregister()}static addLogger(m){m&&Ao.loggers.add(m)}static removeLogger(m){m&&Ao.loggers.delete(m)}},"CSPMonitor");l.default=c,c.loggers=new Set,c.shouldRegisterCSPMonitor=!0,c.added=!1,c.listener=h=>{const m=`Security Policy Violation
Blocked URI: ${h.blockedURI}
Violated Directive: ${h.violatedDirective}
Original Policy: ${h.originalPolicy}
Document URI: ${h.documentURI}
Source File: ${h.sourceFile}
Line No.: ${h.lineNumber}
`;for(const p of c.loggers)p.error(m);c.loggers.size===0&&console.error(m)}},9091803745:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(h,m,p,a,r,n){this.timestampMs=h,this.topic=m,this.data=p,this.senderAttendeeId=a,this.senderExternalUserId=r,this.throttled=!!n}},"DataMessage");l.default=d},4236152345:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function d(c){return c&&"destroy"in c}s(d,"isDestroyable"),l.isDestroyable=d},9678458173:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function d(c){return!!c&&typeof c=="object"&&"mute"in c&&"stop"in c&&"intrinsicDevice"in c}s(d,"isAudioTransformDevice"),l.isAudioTransformDevice=d},8503424008:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(O,D,M,R){function F(V){return V instanceof M?V:new M(function($){$(V)})}return s(F,"adopt"),new(M||(M=Promise))(function(V,$){function X(ie){try{ne(R.next(ie))}catch(pe){$(pe)}}s(X,"fulfilled");function Y(ie){try{ne(R.throw(ie))}catch(pe){$(pe)}}s(Y,"rejected");function ne(ie){ie.done?V(ie.value):F(ie.value).then(X,Y)}s(ne,"step"),ne((R=R.apply(O,D||[])).next())})},h=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5546774952)),p=h(d(1716952340)),a=h(d(9649641385)),r=h(d(3054351868)),n=d(6527539809),e=h(d(7309008175)),t=h(d(8089299542)),i=d(9678458173),o=h(d(1869028663)),f=h(d(7754931014)),g=h(d(1823340272)),S=h(d(566402552)),u=h(d(5336609685)),v=h(d(763542717)),y=h(d(9398215393)),_=h(d(1197017824)),C=d(7952414906);let T=s(class Ii{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var D;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(D=this.mediaDeviceWrapper)===null||D===void 0||D.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var D;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(D=this.mediaDeviceWrapper)===null||D===void 0||D.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return c(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const M=yield this.listDevicesOfKind("audioinput",D);return this.trace("listAudioInputDevices",D,M),M})}listVideoInputDevices(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const M=yield this.listDevicesOfKind("videoinput",D);return this.trace("listVideoInputDevices",D,M),M})}listAudioOutputDevices(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const M=yield this.listDevicesOfKind("audiooutput",D);return this.trace("listAudioOutputDevices",D,M),M})}pushAudioMeetingStateForPermissions(D){var M;(M=this.eventController)===null||M===void 0||M.publishEvent(D===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(D){var M;(M=this.eventController)===null||M===void 0||M.publishEvent(D===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(D){return c(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(D))})}startAudioInputTask(D){var M;return c(this,void 0,void 0,function*(){if(D===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(D)?(this.logger.info(`Choosing transform input device ${D}`),yield this.chooseAudioTransformInputDevice(D)):(this.logger.info(`Choosing intrinsic audio input device ${D}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",D)),this.trace("startAudioInputDevice",D,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(M=this.transform)===null||M===void 0?void 0:M.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(R){throw R}})}stopAudioInput(){return c(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return c(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(D){var M;return c(this,void 0,void 0,function*(){if(((M=this.transform)===null||M===void 0?void 0:M.device)===D)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const R=Ii.getAudioContext();if(!(R instanceof OfflineAudioContext))switch(R.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield R.resume()}let F;try{F=yield D.createAudioNode(R)}catch($){throw this.logger.error(`Unable to create transform device node: ${$}.`),$}const V=yield D.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",V),this.logger.debug(`Got inner stream: ${V}.`),this.setTransform(D,F)})}chooseVideoTransformInputDevice(D){var M;return c(this,void 0,void 0,function*(){if(this.eventController&&D instanceof e.default&&D.passEventControllerToProcessors(this.eventController),D===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const R=this.chosenVideoTransformDevice;R&&this.logger.info("Switched from previous VideoTransformDevice");const F=!!R,V=yield D.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((M=this.activeDevices.video)===null||M===void 0?void 0:M.stream,V)){this.logger.info("video transform device needs new intrinsic device"),F&&R.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=D,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",V),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=D,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield D.transformStream(this.activeDevices.video.stream)})}startVideoInput(D){return c(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(D))})}startVideoInputTask(D){return c(this,void 0,void 0,function*(){if(!D){this.logger.error("Invalid video input device");return}try{return C.isVideoTransformDevice(D)?(this.logger.info(`Choosing video transform device ${D}`),yield this.chooseVideoTransformInputDevice(D),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",D),this.trace("startVideoInputDevice",D),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(M){throw M}})}stopVideoInput(){return c(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return c(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(D){return c(this,void 0,void 0,function*(){this.audioOutputDeviceId=D,this.watchForDeviceChangesIfNecessary();const M=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(M),this.trace("chooseAudioOutput",D,null)})}addDeviceChangeObserver(D){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(D),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(D){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(D),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var D,M;if(!this.activeDevices.audio)return null;const R=(M=(D=this.transform)===null||D===void 0?void 0:D.nodes)===null||M===void 0?void 0:M.end;if(R){const F=R.context.createAnalyser();return F.removeOriginalInputs=()=>{try{R.disconnect(F)}catch{}},R.connect(F),F}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(D){const M=Ii.getAudioContext(),R=M.createAnalyser(),F=M.createMediaStreamSource(D);return F.connect(R),this.trace("createAnalyserNodeForAudioInput"),R.removeOriginalInputs=()=>{try{F.disconnect(R)}catch{}},R}startVideoPreviewForVideoInput(D){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",D.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,D,!0),this.trace("startVideoPreviewForVideoInput",D.id)}stopVideoPreviewForVideoInput(D){t.default.disconnectVideoStreamFromVideoElement(D,!1),this.trace("stopVideoPreviewForVideoInput",D.id)}setDeviceLabelTrigger(D){if(this.deviceInfoCache){for(const M of this.deviceInfoCache)if(!M.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=D,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(D){let M=null;return this.useWebAudio?(M=Ii.getAudioContext().createMediaStreamSource(D),M.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",D.id),M}chooseVideoInputQuality(D,M,R){const F=this.browserBehavior.requiresResolutionAlignment(D,M);this.videoInputQualitySettings=new _.default(F[0],F[1],R)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return c(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return c(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(D){return c(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(D){const M=this.activeDevices[D];if(!M)return;const R=M.endedCallback,F=M.trackMuteCallback,V=M.trackUnmuteCallback;for(const $ of M.stream.getTracks())$.stop(),R&&$.removeEventListener("ended",R),F&&$.removeEventListener("mute",F),V&&$.removeEventListener("unmute",V),delete M.endedCallback,delete M.trackMuteCallback,delete M.trackUnmuteCallback,delete this.activeDevices[D]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(D){var M;let R=this.activeDevices.audio;if(this.useWebAudio&&(R=this.getMediaStreamDestinationNode()),!!R){for(const F of R.stream.getTracks())F.enabled!==D&&(F.enabled=D);this.muted!==!D&&(this.muted=!D,(M=this.transform)===null||M===void 0||M.device.mute(this.muted))}}static getIntrinsicDeviceId(D){if(!D)return;if(typeof D=="string")return D;if(D.id)return D.id;const R=D.deviceId;if(!R)return;if(typeof R=="string"||Array.isArray(R))return R;const F=R;if(typeof F.exact=="string"||Array.isArray(F.exact))return F.exact}static createEmptyAudioDevice(){return Ii.synthesizeAudioDevice(0)}static synthesizeAudioDevice(D){const M=Ii.getAudioContext(),R=M.createMediaStreamDestination();if(D){const F=M.createGain();F.gain.value=.1,F.connect(R);const V=M.createOscillator();V.frequency.value=D,V.connect(F),V.start()}else{const F=M.createBufferSource();try{F.buffer=M.createBuffer(1,M.sampleRate*5,M.sampleRate)}catch(V){if(V&&V.name==="NotSupportedError")F.buffer=M.createBuffer(1,Ii.defaultSampleRate*5,Ii.defaultSampleRate);else throw V}F.buffer.getChannelData(0)[0]=3e-4,F.loop=!0,F.connect(R),F.start()}return R.stream}listDevicesOfKind(D,M){return c(this,void 0,void 0,function*(){return(M||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(D)})}updateDeviceInfoCacheFromBrowser(){var D;return c(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let R=yield navigator.mediaDevices.enumerateDevices(),F=!0;for(const V of R)if(!V.label){F=!1;break}if(!F)try{this.logger.info("attempting to trigger media device labels since they are hidden");const V=yield this.deviceLabelTrigger();R=yield navigator.mediaDevices.enumerateDevices();for(const $ of V.getTracks())$.stop()}catch(V){this.logger.info("unable to get media device labels"),(D=this.eventController)===null||D===void 0||D.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(V)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(R)}`),this.deviceInfoCache=R})}listCachedDevicesOfKind(D){const M=[];if(this.deviceInfoCache)for(const R of this.deviceInfoCache)R.kind===D&&M.push(R);return M}handleDeviceChange(){return c(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const D=this.listCachedDevicesOfKind("audioinput"),M=this.listCachedDevicesOfKind("videoinput"),R=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const F=this.listCachedDevicesOfKind("audioinput"),V=this.listCachedDevicesOfKind("videoinput"),$=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(X=>{this.areDeviceListsEqual(D,F)||n.Maybe.of(X.audioInputsChanged).map(Y=>Y.bind(X)(F)),this.areDeviceListsEqual(M,V)||n.Maybe.of(X.videoInputsChanged).map(Y=>Y.bind(X)(V)),this.areDeviceListsEqual(R,$)||n.Maybe.of(X.audioOutputsChanged).map(Y=>Y.bind(X)($))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(D,M){return c(this,void 0,void 0,function*(){try{D==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}D==="audio"?this.forEachObserver(R=>{n.Maybe.of(R.audioInputStreamEnded).map(F=>F.bind(R)(M))}):this.forEachObserver(R=>{n.Maybe.of(R.videoInputStreamEnded).map(F=>F.bind(R)(M))})})}forEachObserver(D){for(const M of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(M)&&D(M)})}forEachMediaStreamBrokerObserver(D){for(const M of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(M)&&D(M)})}areDeviceListsEqual(D,M){return JSON.stringify(D.map(R=>JSON.stringify(R)).sort())===JSON.stringify(M.map(R=>JSON.stringify(R)).sort())}intrinsicDeviceAsMediaStream(D){return D&&D.id?D:null}hasSameMediaStreamId(D,M,R){var F,V,$,X;let Y;return D==="audio"?(Y=R==null?void 0:R.audio.streamId,!!Y&&Y===((V=(F=M.constraints)===null||F===void 0?void 0:F.audio)===null||V===void 0?void 0:V.streamId)):(Y=R==null?void 0:R.video.streamId,!!Y&&Y===((X=($=M==null?void 0:M.constraints)===null||$===void 0?void 0:$.video)===null||X===void 0?void 0:X.streamId))}hasSameGroupId(D,M,R){if(D==="")return!0;const F=Ii.getIntrinsicDeviceId(R);return this.logger.debug(`Checking deviceIds ${F} of type ${typeof F} with groupId ${D}`),typeof F=="string"&&D===this.getGroupIdFromDeviceId(M,F)}getGroupIdFromDeviceId(D,M){if(this.deviceInfoCache!==null){const R=this.listCachedDevicesOfKind(`${D}input`).find(F=>F.deviceId===M);if(R&&R.groupId)return this.logger.debug(`GroupId of deviceId ${M} found in cache is ${R.groupId}`),R.groupId}return this.logger.debug(`GroupId of deviceId ${M} found in cache is empty`),""}handleGetUserMediaError(D,M){if(!D)throw new f.default(D);switch(D.name){case"NotReadableError":case"TrackStartError":throw new S.default(D);case"NotFoundError":case"DevicesNotFoundError":throw new g.default(D);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw M&&M<Ii.permissionDeniedOriginDetectionThresholdMs?new v.default(D,"Permission denied by browser"):new v.default(D,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new u.default(D);case"TypeError":throw new y.default(D);case"AbortError":default:throw new f.default(D)}}matchesDeviceSelection(D,M,R,F){return R&&R.stream.active&&(this.hasSameMediaStreamId(D,R,F)||R.groupId!==null&&this.hasSameGroupId(R.groupId,D,M))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(R.constraints)} to proposed constraints ${JSON.stringify(F)}`),R.matchesConstraints(F)):!1}chooseInputIntrinsicDevice(D,M){var R,F;return c(this,void 0,void 0,function*(){const V=this.getMediaStreamConstraints(D,M);if(this.matchesDeviceSelection(D,M,this.activeDevices[D],V)){this.logger.info(`reusing existing ${D} input device`);return}this.activeDevices[D]&&this.activeDevices[D].stream&&this.stopTracksAndRemoveCallbacks(D);const $=Date.now(),X=new o.default;try{this.logger.info(`requesting new ${D} device with constraint ${JSON.stringify(V)}`);const Y=this.intrinsicDeviceAsMediaStream(M);D==="audio"&&M===null?(X.stream=Ii.createEmptyAudioDevice(),X.constraints=null):Y?(this.logger.info(`using media stream ${Y.id} for ${D} device`),X.stream=Y,X.constraints=V):(X.stream=yield navigator.mediaDevices.getUserMedia(V),X.constraints=V),yield this.handleNewInputDevice(D,X)}catch(Y){const ne=this.getErrorMessage(Y);D==="audio"?(R=this.eventController)===null||R===void 0||R.publishEvent("audioInputFailed",{audioInputErrorMessage:ne}):(F=this.eventController)===null||F===void 0||F.publishEvent("videoInputFailed",{videoInputErrorMessage:ne}),this.logger.error(`failed to get ${D} device for constraints ${JSON.stringify(V)}: ${ne}`);let ie=!0;if(Y&&"constraint"in Y&&(this.logger.error(`Over-constrained by constraint: ${Y.constraint}`),this.useMediaConstraintsFallback)){const pe=this.getMediaStreamConstraints(D,M,!0),Ee=JSON.stringify(pe);if(Ee!==JSON.stringify(V)){this.logger.info(`retry requesting new ${D} device with minimal constraint ${Ee}`);try{X.stream=yield navigator.mediaDevices.getUserMedia(pe),X.constraints=pe,yield this.handleNewInputDevice(D,X),ie=!1}catch(Be){this.logger.error(`failed to get ${D} device for constraints ${Ee}: ${this.getErrorMessage(Be)}`)}}}if(ie){if(D==="audio"){this.logger.info(`choosing null ${D} device instead`);try{X.stream=Ii.createEmptyAudioDevice(),X.constraints=null,yield this.handleNewInputDevice(D,X)}catch(pe){this.logger.error(`failed to choose null ${D} device. ${pe.name}: ${pe.message}`)}}this.handleGetUserMediaError(Y,Date.now()-$)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(D){return D?D.name&&D.message?`${D.name}: ${D.message}`:D.name?D.name:D.message?D.message:"UnknownError":"UnknownError"}handleNewInputDevice(D,M){var R;return c(this,void 0,void 0,function*(){this.logger.info(`got ${D} device for constraints ${JSON.stringify(M.constraints)}`);const F=(R=this.getMediaTrackSettings(M.stream))===null||R===void 0?void 0:R.deviceId;M.groupId=F?this.getGroupIdFromDeviceId(D,F):"",this.activeDevices[D]=M,this.logger.debug(`Set activeDevice to ${JSON.stringify(M)}`),this.watchForDeviceChangesIfNecessary();const V=M.stream.getTracks()[0];if(V&&(M.endedCallback=()=>{this.activeDevices[D]&&this.activeDevices[D].stream===M.stream&&(this.handleDeviceStreamEnded(D,F),delete M.endedCallback)},V.addEventListener("ended",M.endedCallback,{once:!0})),D==="audio"){const $=M.stream.getAudioTracks()[0];if($){const X=$.getSettings().deviceId||M.stream;M.trackMuteCallback=()=>{this.mediaStreamMuteObserver(X,!0)},M.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(X,!1)},$.addEventListener("mute",M.trackMuteCallback,{once:!1}),$.addEventListener("unmute",M.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),$.muted?M.trackMuteCallback():M.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(D,M,R,F){if(F&&this.listCachedDevicesOfKind(`${D}input`).length===1)return!0;const V={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?V.deviceId=M:V.deviceId={exact:M},R&&(V.groupId=R),F?V:D==="video"?(V.width={ideal:this.videoInputQualitySettings.videoWidth},V.height={ideal:this.videoInputQualitySettings.videoHeight},V.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},V):(this.supportSampleRateConstraint()&&(V.sampleRate={ideal:Ii.defaultSampleRate}),this.supportSampleSizeConstraint()&&(V.sampleSize={ideal:Ii.defaultSampleSize}),this.supportChannelCountConstraint()&&(V.channelCount={ideal:Ii.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},V))}getMediaStreamConstraintsFromTrackConstraints(D,M){return D==="audio"?{audio:M}:{video:M}}getMediaStreamConstraints(D,M){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F={};if(!M)return null;const V=this.intrinsicDeviceAsMediaStream(M);if(V)return F.streamId=V.id,this.getMediaStreamConstraintsFromTrackConstraints(D,F);if(typeof M=="string"){let $="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?$=this.getGroupIdFromDeviceId(D,M):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),F=this.calculateMediaStreamConstraints(D,M,$,R),this.getMediaStreamConstraintsFromTrackConstraints(D,F)}return A(M)?(F=this.calculateMediaStreamConstraints(D,M.deviceId,M.groupId,R),this.getMediaStreamConstraintsFromTrackConstraints(D,F)):(F=M,this.getMediaStreamConstraintsFromTrackConstraints(D,F))}deviceInfoFromDeviceId(D,M){if(this.deviceInfoCache===null)return null;for(const R of this.deviceInfoCache)if(R.kind===D&&R.deviceId===M)return R;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(D,M){if(!D||!D.active||!M)return!1;if(M.id)return D.id===M.id;const R=this.getMediaTrackSettings(D);if(!R.deviceId)return!1;const F=Ii.getIntrinsicDeviceId(M);return typeof F=="string"?R.deviceId===F:!1}getMediaTrackSettings(D){var M;return(M=D.getTracks()[0])===null||M===void 0?void 0:M.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const D=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(D)}setTransform(D,M){var R,F;(F=(R=this.transform)===null||R===void 0?void 0:R.nodes)===null||F===void 0||F.end.disconnect(),this.transform={nodes:M,device:D};const V=M==null?void 0:M.end,$=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${V} to destination ${$}.`),V==null||V.connect($),this.reconnectAudioInputs()}removeTransform(){var D;const M=this.transform;if(M)return(D=this.transform.nodes)===null||D===void 0||D.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),M}attachAudioInputStreamToAudioContext(D){var M;(M=this.audioInputSourceNode)===null||M===void 0||M.disconnect(),this.audioInputSourceNode=Ii.getAudioContext().createMediaStreamSource(D);const R=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(R)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Ii.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var D,M;return((M=(D=this.transform)===null||D===void 0?void 0:D.nodes)===null||M===void 0?void 0:M.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(D){Ii.defaultLatencyHint=D}static getAudioContext(){if(!Ii.audioContext){const D={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(D.sampleRate=Ii.defaultSampleRate),new m.default().requiresPlaybackLatencyHintForAudioContext()&&(D.latencyHint="playback"),Ii.defaultLatencyHint&&(D.latencyHint=Ii.defaultLatencyHint),Ii.audioContext=new(window.AudioContext||window.webkitAudioContext)(D)}return Ii.audioContext}static suspendAudioContext(){return c(this,void 0,void 0,function*(){return Ii.audioContext?Ii.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return c(this,void 0,void 0,function*(){return Ii.audioContext?Ii.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Ii.audioContext)try{Ii.audioContext.close()}catch{}Ii.audioContext=null}addMediaStreamBrokerObserver(D){this.mediaStreamBrokerObservers.add(D)}removeMediaStreamBrokerObserver(D){this.mediaStreamBrokerObservers.delete(D)}publishVideoInputDidChangeEvent(D){this.forEachMediaStreamBrokerObserver(M=>{M.videoInputDidChange&&M.videoInputDidChange(D)}),this.pushVideoMeetingStateForPermissions(D)}publishAudioInputDidChangeEvent(D){this.forEachMediaStreamBrokerObserver(M=>{M.audioInputDidChange&&M.audioInputDidChange(D)}),this.pushAudioMeetingStateForPermissions(D)}publishAudioOutputDidChangeEvent(D){this.forEachMediaStreamBrokerObserver(M=>{M.audioOutputDidChange&&M.audioOutputDidChange(D)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(D,M,R){let F=`API/DefaultDeviceController/${D}`;typeof M<"u"&&(F+=` ${JSON.stringify(M)}`),typeof R<"u"&&(F+=` -> ${JSON.stringify(R)}`),this.logger.info(F)}constructor(D,M,R=new m.default,F){this.logger=D,this.browserBehavior=R,this.eventController=F,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new r.default,this.videoInputTaskQueue=new r.default,this.muted=!1,this.mediaStreamMuteObserver=(Y,ne)=>{for(const ie of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(ie)&&ie.audioInputMuteStateChanged&&ie.audioInputMuteStateChanged(Y,ne)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:V=!1,useMediaConstraintsFallback:$=!0}=M||{};this.useWebAudio=V,this.useMediaConstraintsFallback=$,this.videoInputQualitySettings=new _.default(Ii.defaultVideoWidth,Ii.defaultVideoHeight,Ii.defaultVideoFrameRate);const X=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=X[0],this.videoInputQualitySettings.videoHeight=X[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new p.default().create();const Y=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(Y)}`)}catch(Y){D.error(Y.message)}}},"DefaultDeviceController");l.default=T,T.permissionDeniedOriginDetectionThresholdMs=500,T.defaultVideoWidth=960,T.defaultVideoHeight=540,T.defaultVideoFrameRate=15,T.defaultSampleRate=48e3,T.defaultSampleSize=16,T.defaultChannelCount=1,T.audioContext=null;function A(O){return typeof O=="object"&&"deviceId"in O&&"groupId"in O&&"kind"in O&&"label"in O}s(A,"isMediaDeviceInfo")},1869028663:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{matchesConstraints(h){return JSON.stringify(this.constraints)===JSON.stringify(h)}constructor(){this.groupId=""}},"DeviceSelection");l.default=d},7754931014:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class extends Error{constructor(h,m){super(m||"Error fetching device."),this.cause=h,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=d},8082139119:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const m=h(d(9437918857)),p=h(d(1197017824));let a=s(class extends m.default{destroy(){return c(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return p.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let r=s(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=r},1823340272:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7754931014));let m=s(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=m},566402552:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7754931014));let m=s(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=m},5336609685:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7754931014));let m=s(class extends h.default{constructor(a,r){super(a),this.constraint=r,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=m},763542717:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7754931014));let m=s(class extends h.default{constructor(a,r){super(a,r),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=m},2847388805:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{mute(m){return d(this,void 0,void 0,function*(){})}stop(){var m;return d(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var p;return d(this,void 0,void 0,function*(){return(p=this.node)===null||p===void 0||p.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");l.default=c},9398215393:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7754931014));let m=s(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=m},1197017824:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{equals(h){return this.videoWidth===h.videoWidth&&this.videoHeight===h.videoHeight&&this.videoFrameRate===h.videoFrameRate}constructor(h,m,p){this.videoWidth=h,this.videoHeight=m,this.videoFrameRate=p}},"VideoQualitySettings");l.default=d,d.VideoDisabled=new d(0,0,0),d.VideoResolutionHD=new d(1280,720,30),d.VideoResolutionFHD=new d(1920,1080,30),d.VideoResolutionUHD=new d(3840,2160,30)},7952414906:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function d(c){return!!c&&typeof c=="object"&&"transformStream"in c&&"stop"in c&&"intrinsicDevice"in c}s(d,"isVideoTransformDevice"),l.isVideoTransformDevice=d},5163444346:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{destroy(){return d(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,p){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(r=>{r.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):p.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=c},3563909523:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=d},9004346135:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__rest||function(t,i){var o={};for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&i.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,f=Object.getOwnPropertySymbols(t);g<f.length;g++)i.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(t,f[g])&&(o[f[g]]=t[f[g]]);return o},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const p=m(d(4571447548)),a=m(d(9877075638)),r=m(d(3894274294)),n=d(5685319565);let e=s(class Us{addEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.addEventListener||!("document"in d.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.removeEventListener||!("document"in d.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return c(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:f,attributes:g}=i,S=g&&this.filterAttributes(g,this.attributesToFilter),u=Object.assign({name:o,ts:f},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(u)}`);const v=this.getSize(u);if(v>Us.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${Us.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(u)}`),this.sendEventImmediately({name:o,ts:f,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(u),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const y=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(y),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const f=new Set(o);return Object.keys(i).filter(S=>f.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Us.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[f,g]of Object.entries(i))o+=this.getPrimitiveSize(f),o+=this.getSize(g);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return c(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:f,attributes:g}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:f},g)]};let u=!1,v=null;const y=this.makeRequestBody([S]);try{if(v=yield this.send(y),v.ok){try{const _=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${y}, message: ${JSON.stringify(_)}`)}catch(_){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${_} for event ${y}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${y} with response status ${v.status}`),u=!0}catch(_){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${y} to the ingestion endpoint ${_}.`),u=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const C=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${C}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,C)?u=!1:u=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${y}`),u=!0}}u&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${y}`),this.failedIngestionEvents.push(S))})}send(i){return c(this,void 0,void 0,function*(){const o=new p.default(Us.RETRY_FIXED_BACKOFF_WAIT_MS,Us.RETRY_SHORT_BACKOFF_MS,Us.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(g.ok||!Us.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${g.status}.`),f++,f<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(f){throw f}})}sendBeacon(){return c(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));i.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{i.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return c(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,f,g,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=V=>({type:V.type,v:V.v,payloads:[...V.payloads]}),this.sendEvents=()=>c(this,void 0,void 0,function*(){if(this.lock)return;const V=this.getItems(this.flushSize);if(V.length===0)return;this.lock=!0;const $=this.makeRequestBody(V);let X=!1;const Y=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(Y,V);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${$}`);const ne=yield this.send($);if(this.cancellableEvents.delete(Y),!ne.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${$} with response status ${ne.status}`),X=!0;else try{const ie=yield ne.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${$} message: ${JSON.stringify(ie)}`)}catch(ie){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ie} for events ${$}`)}}catch(ne){X=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${$} to the ingestion endpoint ${ne}`)}finally{this.lock=!1}X&&(this.cancellableEvents.delete(Y),this.failedIngestionEvents.push(...V))});const u=new r.default(S).getParserResult(),{browserMajorVersion:v}=u,y=h(u,["browserMajorVersion"]),_=o.toJSON(),{type:C,v:T}=_,A=h(_,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},y),A),Object.keys(this.metadata).forEach(V=>this.attributesToFilter.push(V)),this.type=C,this.v=T,this.ingestionURL=f,this.logger=S,this.importantEvents=new Set(g);const{maxBufferCapacityKb:O,totalBufferItems:D,flushSize:M,flushIntervalMs:R,retryCountLimit:F}=i;this.maxBufferCapacityBytes=O*1024,this.totalBufferItems=D,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/D),this.flushIntervalMs=R,this.flushSize=M,this.retryCountLimit=F,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=V=>this.beaconEventHandler(V),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},666910387:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h=5e3,m=2,p=64,a=100,r=15){this.flushIntervalMs=h,this.flushSize=m,this.maxBufferCapacityKb=p,this.totalBufferItems=a,this.retryCountLimit=r}},"EventBufferConfiguration");l.default=d},913629600:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(f,g,S,u){function v(y){return y instanceof S?y:new S(function(_){_(y)})}return s(v,"adopt"),new(S||(S=Promise))(function(y,_){function C(O){try{A(u.next(O))}catch(D){_(D)}}s(C,"fulfilled");function T(O){try{A(u.throw(O))}catch(D){_(D)}}s(T,"rejected");function A(O){O.done?y(O.value):v(O.value).then(C,T)}s(A,"step"),A((u=u.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(888724265),p=d(4236152345),a=h(d(8302308181)),r=h(d(7733481723)),n=h(d(2864685592)),e=h(d(9649641385)),t=h(d(6885109343)),i=h(d(7750779956));let o=s(class _a{addObserver(g){this.observerSet.add(g)}removeObserver(g){this.observerSet.delete(g)}forEachObserver(g){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&g(S)})}publishEvent(g,S){return c(this,void 0,void 0,function*(){const u=Date.now();this.meetingHistoryStates.push({name:g,timestampMs:u});const v=Object.freeze(Object.assign(this.getAttributes(u),S));this.forEachObserver(y=>{y.eventDidReceive(g,v)}),this.reportEvent(g,u,S)})}reportEvent(g,S,u){var v;return c(this,void 0,void 0,function*(){let y;try{u&&(y=i.default(u)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,g,y)}catch(_){this.logger.error(`Error reporting event ${_}`)}})}setupEventReporter(g,S,u){if(u)this._eventReporter=u;else if(g.urls){const v=g.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:y,credentials:{attendeeId:_,joinToken:C}}=g,T=new n.default(y,_,C),A=new a.default(T,v);this._eventReporter=new r.default(A,S)}}}getAttributes(g){var S,u;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||_a.UNAVAILABLE,osVersion:((u=this.parserResult)===null||u===void 0?void 0:u.os.version)||_a.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:g}}get eventReporter(){return this._eventReporter}destroy(){return c(this,void 0,void 0,function*(){p.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(g,S,u){var v,y,_,C,T,A,O;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=g,this.setupEventReporter(g,S,u);try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null}catch(D){this.logger.error(D.message)}this.browserMajorVersion=((_=(y=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||y===void 0?void 0:y.version)===null||_===void 0?void 0:_.split(".")[0])||_a.UNAVAILABLE,this.browserName=((C=this.parserResult)===null||C===void 0?void 0:C.browser.name)||_a.UNAVAILABLE,this.browserVersion=((T=this.parserResult)===null||T===void 0?void 0:T.browser.version)||_a.UNAVAILABLE,this.deviceName=[((A=this.parserResult)===null||A===void 0?void 0:A.device.vendor)||"",((O=this.parserResult)===null||O===void 0?void 0:O.device.model)||""].join(" ").trim()||_a.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},7750779956:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=s(c=>{const h={};for(const[m,p]of Object.entries(c))if(!(p==null||p===""))if(typeof p=="number"||typeof p=="string")h[m]=p;else throw new TypeError("Unhandled type received while flattening attributes.");return h},"flattenEventAttributes");l.default=d},8302308181:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(666910387));let m=s(class{constructor(a,r,n=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=r,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");l.default=m},7733481723:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(4236152345),p=h(d(9004346135));let a=s(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return c(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return c(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),m.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:f}=t;this.eventBuffer=new p.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=f,this.start()}},"DefaultMeetingEventReporter");l.default=a},9931580517:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{reportEvent(h,m,p){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=d},2864685592:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const h={};return h.type=this.type,h.v=this.v,h.meetingId=this.meetingId,h.attendeeId=this.attendeeId,h}constructor(h,m,p,a=[]){this.type="Meet",this.v=1,this.meetingId=h,this.attendeeId=m,this.eventsToIgnore=a,this.authenticationToken=p}},"MeetingEventsClientConfiguration");l.default=d},3305135794:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(ur){return ur&&ur.__esModule?ur:{default:ur}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoderWorkerCode=l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoEncodingCpuConnectionHealthPolicy=l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=void 0;const h=c(d(9677745702));l.AllHighestVideoBandwidthPolicy=h.default;const m=c(d(1035256489));l.ApplicationMetadata=m.default;const p=c(d(9649641385));l.AsyncScheduler=p.default;const a=c(d(4713678292));l.AttachMediaInputTask=a.default;const r=c(d(9898009183));l.Attendee=r.default;const n=c(d(4882678815));l.AudioLogEvent=n.default;const e=c(d(5983965185));l.AudioProfile=e.default;const t=c(d(4610074022));l.AudioVideoControllerState=t.default;const i=c(d(1174868230));l.BackgroundBlurStrength=i.default;const o=c(d(3437938989));l.BackgroundBlurVideoFrameProcessor=o.default;const f=c(d(6828608641));l.BackgroundFilterVideoFrameProcessor=f.default;const g=c(d(3561775467));l.BackgroundReplacementVideoFrameProcessor=g.default;const S=c(d(1516469294));l.BaseConnectionHealthPolicy=S.default;const u=c(d(5009059128));l.BaseTask=u.default;const v=c(d(4207915265));l.BitrateParameters=v.default;const y=c(d(8207737579));l.CSPMonitor=y.default;const _=c(d(1458156729));l.CanvasVideoFrameBuffer=_.default;const C=c(d(5131738647));l.CheckAudioConnectivityFeedback=C.default;const T=c(d(5912013634));l.CheckAudioInputFeedback=T.default;const A=c(d(5266008321));l.CheckAudioOutputFeedback=A.default;const O=c(d(492984661));l.CheckCameraResolutionFeedback=O.default;const D=c(d(1012711751));l.CheckContentShareConnectivityFeedback=D.default;const M=c(d(1711209018));l.CheckNetworkTCPConnectivityFeedback=M.default;const R=c(d(1519813406));l.CheckNetworkUDPConnectivityFeedback=R.default;const F=c(d(5425713910));l.CheckVideoConnectivityFeedback=F.default;const V=c(d(2656423953));l.CheckVideoInputFeedback=V.default;const $=c(d(9089081530));l.CleanRestartedSessionTask=$.default;const X=c(d(5703332651));l.CleanStoppedSessionTask=X.default;const Y=c(d(9029233041));l.ClientMetricReport=Y.default;const ne=c(d(6502873558));l.ClientMetricReportDirection=ne.default;const ie=c(d(6132421099));l.ClientMetricReportMediaType=ie.default;const pe=c(d(863418510));l.ClientVideoStreamReceivingReport=pe.default;const Ee=c(d(9200233701));l.ConnectionHealthData=Ee.default;const Be=c(d(8692068971));l.ConnectionHealthPolicyConfiguration=Be.default;const it=c(d(3714104304));l.ConsoleLogger=it.default;const Ce=c(d(805846668));l.ContentShareConstants=Ce.default;const Me=c(d(220809536));l.ContentShareMediaStreamBroker=Me.default;const je=c(d(9049733277));l.CreatePeerConnectionTask=je.default;const We=c(d(4708498556));l.CreateSDPTask=We.default;const Ze=c(d(9091803745));l.DataMessage=Ze.default;const ft=c(d(7581324406));l.DefaultActiveSpeakerDetector=ft.default;const vt=c(d(1473791890));l.DefaultActiveSpeakerPolicy=vt.default;const De=c(d(9598694912));l.DefaultAudioMixController=De.default;const Pe=c(d(1833994912));l.DefaultAudioVideoController=Pe.default;const Ke=c(d(9305916160));l.DefaultAudioVideoFacade=Ke.default;const Ye=c(d(5546774952));l.DefaultBrowserBehavior=Ye.default;const xe=c(d(7050079116));l.DefaultContentShareController=xe.default;const Ct=c(d(8503424008));l.DefaultDeviceController=Ct.default;const At=c(d(5163444346));l.DefaultDevicePixelRatioMonitor=At.default;const Lt=c(d(913629600));l.DefaultEventController=Lt.default;const Ft=c(d(1716952340));l.DefaultMediaDeviceFactory=Ft.default;const Jt=c(d(7733481723));l.DefaultMeetingEventReporter=Jt.default;const It=c(d(5346911216));l.DefaultMeetingReadinessChecker=It.default;const ln=c(d(6643608480));l.DefaultMeetingSession=ln.default;const $n=c(d(9331325908));l.DefaultMessagingSession=$n.default;const yn=c(d(8006173476));l.DefaultModality=yn.default;const zt=c(d(6348496904));l.DefaultPingPong=zt.default;const Yt=c(d(7692233712));l.DefaultRealtimeController=Yt.default;const Mt=c(d(2114525466));l.DefaultReconnectController=Mt.default;const Vt=c(d(6900744364));l.DefaultSessionStateController=Vt.default;const $t=c(d(7924674822));l.DefaultSigV4=$t.default;const xt=c(d(7570945794));l.DefaultSignalingClient=xt.default;const jt=c(d(1604549269));l.DefaultSimulcastUplinkPolicy=jt.default;const J=c(d(4499376852));l.DefaultSimulcastUplinkPolicyForContentShare=J.default;const Fe=c(d(2392158736));l.DefaultTransceiverController=Fe.default;const ke=c(d(6391477986));l.DefaultTranscriptionController=ke.default;const Ge=c(d(3894274294));l.DefaultUserAgentParser=Ge.default;const gt=c(d(1695739824));l.DefaultVideoCaptureAndEncodeParameter=gt.default;const at=c(d(4353575046));l.DefaultVideoFrameProcessorPipeline=at.default;const ae=c(d(4223139537));l.DefaultVideoFrameProcessorTimer=ae.default;const Le=c(d(1865309432));l.DefaultVideoStreamIdSet=Le.default;const G=c(d(2469210420));l.DefaultVideoStreamIndex=G.default;const Z=c(d(8089299542));l.DefaultVideoTile=Z.default;const me=c(d(4675986794));l.DefaultVideoTileController=me.default;const ge=c(d(1309535200));l.DefaultVideoTileFactory=ge.default;const rt=c(d(7309008175));l.DefaultVideoTransformDevice=rt.default;const Ue=c(d(8058016368));l.DefaultVolumeIndicatorAdapter=Ue.default;const Xe=c(d(7880459944));l.DefaultWebSocketAdapter=Xe.default;const fe=c(d(3563909523));l.DevicePixelRatioWindowSource=fe.default;const Te=c(d(1869028663));l.DeviceSelection=Te.default;const k=c(d(666910387));l.EventBufferConfiguration=k.default;const he=c(d(8302308181));l.EventIngestionConfiguration=he.default;const Se=c(d(2635066756));l.FinishGatheringICECandidatesTask=Se.default;const be=c(d(4571447548));l.FullJitterBackoff=be.default;const te=c(d(4692955950));l.FullJitterBackoffFactory=te.default;const Nt=c(d(1733276918));l.FullJitterLimitedBackoff=Nt.default;const nt=c(d(7754931014));l.GetUserMediaError=nt.default;const mt=c(d(7966078085));l.GlobalMetricReport=mt.default;const pn=c(d(9004346135));l.InMemoryJSONEventBuffer=pn.default;const Pt=c(d(9877075638));l.IntervalScheduler=Pt.default;const Mi=c(d(9488451395));l.JoinAndReceiveIndexTask=Mi.default;const ai=c(d(9638153336));l.LeaveAndReceiveLeaveAckTask=ai.default;const un=c(d(7966229607));l.ListenForVolumeIndicatorsTask=un.default;const Hn=c(d(4153358599));l.Log=Hn.default;const mn=c(d(1370928943));l.LogLevel=mn.default;const li=c(d(7632020355));l.MediaDeviceProxyHandler=li.default;const Kn=c(d(2864685592));l.MeetingEventsClientConfiguration=Kn.default;const lr=c(d(2612255336));l.MeetingFeatures=lr.default;const kt=c(d(898490693));l.MeetingReadinessCheckerConfiguration=kt.default;const Et=c(d(6226061697));l.MeetingSessionConfiguration=Et.default;const Tn=c(d(8023404193));l.MeetingSessionCredentials=Tn.default;const gn=c(d(2234819701));l.MeetingSessionLifecycleEvent=gn.default;const In=c(d(546597810));l.MeetingSessionLifecycleEventCondition=In.default;const Qn=c(d(7551081659));l.MeetingSessionStatus=Qn.default;const qn=c(d(9447989038));l.MeetingSessionStatusCode=qn.default;const Vn=c(d(4943767904));l.MeetingSessionTURNCredentials=Vn.default;const Xn=c(d(803810435));l.MeetingSessionURLs=Xn.default;const yi=c(d(488357679));l.MeetingSessionVideoAvailability=yi.default;const Si=c(d(1261307249));l.Message=Si.default;const Fn=c(d(6589808043));l.MessagingSessionConfiguration=Fn.default;const xi=c(d(3051230507));l.ModelSpecBuilder=xi.default;const hi=c(d(1614136239));l.MonitorTask=hi.default;const Yi=c(d(23593200));l.MultiLogger=Yi.default;const L=c(d(9136055221));l.NScaleVideoUplinkBandwidthPolicy=L.default;const re=c(d(8589145157));l.NoOpAudioVideoController=re.default;const we=c(d(5047661014));l.NoOpDebugLogger=we.default;const $e=c(d(8082139119));l.NoOpDeviceController=$e.default;const yt=c(d(9931580517));l.NoOpEventReporter=yt.default;const Xt=c(d(1831006443));l.NoOpLogger=Xt.default;const dn=c(d(9437918857));l.NoOpMediaStreamBroker=dn.default;const Zt=c(d(5628139313));l.NoOpTask=Zt.default;const qt=c(d(3718889761));l.NoOpVideoElementFactory=qt.default;const on=c(d(3814682321));l.NoOpVideoFrameProcessor=on.default;const wn=c(d(681222244));l.NoVideoDownlinkBandwidthPolicy=wn.default;const Zn=c(d(9871896518));l.NoVideoUplinkBandwidthPolicy=Zn.default;const Jn=c(d(1823340272));l.NotFoundError=Jn.default;const Ei=c(d(566402552));l.NotReadableError=Ei.default;const $i=c(d(7537135456));l.OnceTask=$i.default;const Qi=c(d(3292077469));l.OpenSignalingConnectionTask=Qi.default;const Sr=c(d(5336609685));l.OverconstrainedError=Sr.default;const On=c(d(7722414101));l.POSTLogger=On.default;const Ri=c(d(6085879951));l.ParallelGroupTask=Ri.default;const ci=c(d(763542717));l.PermissionDeniedError=ci.default;const ki=c(d(4741303625));l.PrefetchOn=ki.default;const rn=c(d(2097622617));l.PrefetchSortBy=rn.default;const cr=c(d(3054351868));l.PromiseQueue=cr.default;const Sn=c(d(9588672479));l.PromoteToPrimaryMeetingTask=Sn.default;const Zi=c(d(3171391796));l.RealtimeAttendeePositionInFrame=Zi.default;const vr=c(d(7618200138));l.RealtimeState=vr.default;const Rr=c(d(7832597620));l.RealtimeVolumeIndicator=Rr.default;const le=c(d(9531998674));l.ReceiveAudioInputTask=le.default;const ve=c(d(587698570));l.ReceiveRemoteVideoPauseResumeTask=ve.default;const Oe=c(d(86955145));l.ReceiveVideoInputTask=Oe.default;const qe=c(d(8297256329));l.ReceiveVideoStreamIndexTask=qe.default;const dt=c(d(5850044630));l.ReconnectionHealthPolicy=dt.default;const ct=c(d(3937896393));l.RedundantAudioEncoder=ct.default;const Bt=c(d(9337558969));l.RedundantAudioEncoderWorkerCode=Bt.default;const en=c(d(3237015968));l.RedundantAudioRecoveryMetricReport=en.default;const nn=c(d(457099596));l.RunnableTask=nn.default;const Ut=c(d(182939685));l.SDP=Ut.default;const Nn=c(d(9489740826));l.SDPCandidateType=Nn.default;const bt=c(d(6818892922));l.SDPMediaSection=bt.default;const Wn=c(d(7680112541));l.SendAndReceiveDataMessagesTask=Wn.default;const fn=c(d(4866586987));l.SendingAudioFailureConnectionHealthPolicy=fn.default;const ii=c(d(8872868578));l.SerialGroupTask=ii.default;const Ui=c(d(5393388022));l.ServerSideNetworkAdaption=Ui.default;const pi=c(d(3795683579));l.SessionStateControllerAction=pi.default;const cn=c(d(7012117651));l.SessionStateControllerDeferPriority=cn.default;const En=c(d(2092275410));l.SessionStateControllerState=En.default;const Un=c(d(583806999));l.SessionStateControllerTransitionResult=Un.default;const Yn=c(d(5976676062));l.SetLocalDescriptionTask=Yn.default;const Vi=c(d(339097629));l.SetRemoteDescriptionTask=Vi.default;const qi=c(d(8619504925));l.SignalingAndMetricsConnectionMonitor=qi.default;const Bn=c(d(7263318766));l.SignalingClientConnectionRequest=Bn.default;const gr=c(d(1578897375));l.SignalingClientEvent=gr.default;const mi=c(d(7969706599));l.SignalingClientEventType=mi.default;const Ki=c(d(3867485289));l.SignalingClientJoin=Ki.default;const Ur=c(d(3735795291));l.SignalingClientSubscribe=Ur.default;const Yr=c(d(4804743313));l.SignalingClientVideoSubscriptionConfiguration=Yr.default;const oo=c(d(8213452704));l.SimulcastContentShareTransceiverController=oo.default;const so=c(d(9131051489));l.SimulcastLayers=so.default;const Pr=c(d(372560720));l.SimulcastTransceiverController=Pr.default;const Vr=c(d(8697249276));l.SimulcastVideoStreamIndex=Vr.default;const er=c(d(2847388805));l.SingleNodeAudioTransformDevice=er.default;const Or=c(d(6172292806));l.StreamMetricReport=Or.default;const Hr=c(d(3248483798));l.SubscribeAndReceiveSubscribeAckTask=Hr.default;const Hi=c(d(2178339051));l.TargetDisplaySize=Hi.default;const yr=c(d(6013191119));l.TaskStatus=yr.default;const Xr=c(d(5824864644));l.TimeoutScheduler=Xr.default;const Ai=c(d(7638277718));l.TimeoutTask=Ai.default;const Eo=c(d(4042214483));l.Transcript=Eo.default;const Go=c(d(8928051514));l.TranscriptAlternative=Go.default;const jo=c(d(3886666628));l.TranscriptEntity=jo.default;const bo=c(d(6128278192));l.TranscriptItem=bo.default;const Ci=c(d(2855080400));l.TranscriptItemType=Ci.default;const Ji=c(d(2600940909));l.TranscriptLanguageWithScore=Ji.default;const Xi=c(d(3373821534));l.TranscriptResult=Xi.default;const dr=c(d(2832046333));l.TranscriptionStatus=dr.default;const tr=c(d(8532168277));l.TranscriptionStatusType=tr.default;const ao=c(d(9398215393));l.TypeError=ao.default;const Wr=c(d(174963938));l.UnusableAudioWarningConnectionHealthPolicy=Wr.default;const Ar=c(d(6885109343));l.Versioning=Ar.default;const _o=c(d(3368465086));l.VideoAdaptiveProbePolicy=_o.default;const os=c(d(8804723777));l.VideoCodecCapability=os.default;const Gs=c(d(3334420728));l.VideoEncodingConnectionHealthPolicyName=Gs.default;const vs=c(d(6661072615));l.VideoEncodingCpuConnectionHealthPolicy=vs.default;const ss=c(d(1502393534));l.VideoEncodingFramerateConnectionHealthPolicy=ss.default;const ys=c(d(1314104503));l.VideoFxProcessor=ys.default;const js=c(d(1404048602));l.VideoLogEvent=js.default;const Es=c(d(161472916));l.VideoOnlyTransceiverController=Es.default;const bs=c(d(3803169181));l.VideoPreference=bs.default;const zs=c(d(8071414974));l.VideoPreferences=zs.default;const Qr=c(d(8681774825));l.VideoPriorityBasedPolicy=Qr.default;const Br=c(d(3348721919));l.VideoPriorityBasedPolicyConfig=Br.default;const Ro=c(d(4829581265));l.VideoQualityAdaptationPreference=Ro.default;const as=c(d(1197017824));l.VideoQualitySettings=as.default;const Zr=c(d(8050111605));l.VideoSource=Zr.default;const zo=c(d(6105894327));l.VideoStreamDescription=zo.default;const Gr=c(d(6345807038));l.VideoTileState=Gr.default;const lo=c(d(1644756024));l.VoiceFocusDeviceTransformer=lo.default;const co=c(d(7141525823));l.VoiceFocusTransformDevice=co.default;const Co=c(d(4098780146));l.WaitForAttendeePresenceTask=Co.default;const wi=c(d(5638612424));l.WebSocketReadyState=wi.default;const $o=c(d(3475297719));l.ZLIBTextCompressor=$o.default;const uo=d(8071414974);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return uo.MutableVideoPreferences}});const Wi=d(6527539809);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Wi.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Wi.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Wi.Maybe}});const qr=d(9678458173);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return qr.isAudioTransformDevice}});const ls=d(4236152345);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return ls.isDestroyable}});const Po=d(7952414906);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return Po.isVideoTransformDevice}})},3714104304:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1370928943));let m=s(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,r){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${r}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,r=h.default.WARN){this.name=a,this.level=r}},"ConsoleLogger");l.default=m},4153358599:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h,m,p,a){this.sequenceNumber=h,this.message=m,this.timestampMs=p,this.logLevel=a}},"Log");l.default=d},1370928943:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var d;(function(c){c[c.DEBUG=0]="DEBUG",c[c.INFO=1]="INFO",c[c.WARN=2]="WARN",c[c.ERROR=3]="ERROR",c[c.OFF=4]="OFF"})(d=l.LogLevel||(l.LogLevel={})),l.default=d},23593200:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1370928943));let m=s(class{info(a){for(const r of this._loggers)r.info(a)}warn(a){for(const r of this._loggers)r.warn(a)}error(a){for(const r of this._loggers)r.error(a)}debug(a){let r,n;typeof a=="string"?n=a:a?n=s(()=>(r||(r=a()),r),"memoized"):n=""+a;for(const e of this._loggers)e.debug(n)}setLogLevel(a){for(const r of this._loggers)r.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=m},5047661014:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1370928943)),m=c(d(1831006443));let p=s(class extends m.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=p},1831006443:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1370928943));let m=s(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=m},7722414101:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9877075638)),p=h(d(4153358599)),a=h(d(1370928943));let r=s(class Lh{addEventListener(){!this.eventListener||!("window"in d.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in d.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>c(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return c(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new p.default(this.sequenceNumber,t,i,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=Lh.BATCH_SIZE,intervalMs:o=Lh.INTERVAL_MS,logLevel:f=a.default.WARN,metadata:g,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=f,this.metadata=g,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=r,r.BATCH_SIZE=85,r.INTERVAL_MS=2e3},1716952340:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7632020355));let m=s(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=m},7632020355:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9649641385)),p=h(d(9877075638));let a=s(class oS{sortedDeviceList(){return c(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)m.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.add(f),this.scheduler||(this.scheduler=new p.default(oS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,f,g])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.delete(f),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,f,g])}},this.pollDeviceLists=()=>c(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},9437918857:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(h){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(h){}removeMediaStreamBrokerObserver(h){}},"NoOpMediaStreamBroker");l.default=d},5131738647:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.AudioInputRequestFailed=1]="AudioInputRequestFailed",c[c.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",c[c.ConnectionFailed=3]="ConnectionFailed",c[c.AudioNotReceived=4]="AudioNotReceived"})(d=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=d},5912013634:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.PermissionDenied=2]="PermissionDenied"})(d=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=d},5266008321:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed"})(d=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=d},492984661:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.ResolutionNotSupported=2]="ResolutionNotSupported",c[c.PermissionDenied=3]="PermissionDenied"})(d=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=d},1012711751:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.PermissionDenied=2]="PermissionDenied",c[c.TimedOut=3]="TimedOut",c[c.ConnectionFailed=4]="ConnectionFailed"})(d=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=d},1711209018:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",c[c.ConnectionFailed=2]="ConnectionFailed",c[c.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=d},1519813406:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",c[c.ConnectionFailed=2]="ConnectionFailed",c[c.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=d},5425713910:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.VideoInputRequestFailed=1]="VideoInputRequestFailed",c[c.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",c[c.ConnectionFailed=3]="ConnectionFailed",c[c.VideoNotSent=4]="VideoNotSent"})(d=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=d},2656423953:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.PermissionDenied=2]="PermissionDenied"})(d=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=d},5346911216:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(T,A,O,D){function M(R){return R instanceof O?R:new O(function(F){F(R)})}return s(M,"adopt"),new(O||(O=Promise))(function(R,F){function V(Y){try{X(D.next(Y))}catch(ne){F(ne)}}s(V,"fulfilled");function $(Y){try{X(D.throw(Y))}catch(ne){F(ne)}}s($,"rejected");function X(Y){Y.done?R(Y.value):M(Y.value).then(V,$)}s(X,"step"),X((D=D.apply(T,A||[])).next())})},h=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9598694912)),p=h(d(5546774952)),a=h(d(8503424008)),r=h(d(763542717)),n=h(d(5009059128)),e=h(d(7638277718)),t=h(d(5131738647)),i=h(d(5912013634)),o=h(d(5266008321)),f=h(d(492984661)),g=h(d(1012711751)),S=h(d(1711209018)),u=h(d(1519813406)),v=h(d(5425713910)),y=h(d(2656423953)),_=h(d(898490693));let C=s(class sS{static delay(A){return c(this,void 0,void 0,function*(){return new Promise(O=>setTimeout(O,A))})}checkAudioInput(A){return c(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(A),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${O}`),O instanceof r.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(A,O){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return c(this,void 0,void 0,function*(){try{const M=A?a.default.getIntrinsicDeviceId(A):"";return yield this.playTone(M,this.configuration.audioOutputFrequency,D),(yield O())?o.default.Succeeded:o.default.Failed}catch(M){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${M}`),o.default.Failed}finally{this.stopTone()}})}playTone(A,O,D){return c(this,void 0,void 0,function*(){const R=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=O,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const V=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,V),this.gainNode.gain.linearRampToValueAtTime(R,V+.1),this.oscillatorNode.start();const $=new m.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield $.bindAudioDevice({deviceId:A}))}catch(X){this.logger.error(`Failed to bind audio device: ${X}`)}try{yield $.bindAudioElement(D||new Audio)}catch(X){this.logger.error(`Failed to bind audio element: ${X}`)}yield $.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const A=1,O=.1,D=this.configuration.audioOutputGain,M=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(D,M+O+A),this.gainNode.gain.linearRampToValueAtTime(0,M+O*2+A),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(A){return c(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(A),yield this.meetingSession.audioVideo.stopVideoInput(),y.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${O}`),O instanceof r.default?y.default.PermissionDenied:y.default.Failed}})}checkCameraResolution(A,O,D){return c(this,void 0,void 0,function*(){let M;try{const R=a.default.getIntrinsicDeviceId(A),F={video:this.calculateVideoConstraint(R,O,D)};M=yield navigator.mediaDevices.getUserMedia(F)}catch(R){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${O} height ${D} failed with error ${R}`),R&&R.name==="OverconstrainedError"?f.default.ResolutionNotSupported:R&&R.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{M&&M.getTracks().forEach(function(R){R.stop()})}return f.default.Succeeded})}calculateVideoConstraint(A,O,D){const M=this.browserBehavior.requiresResolutionAlignment(O,D),R={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(R.deviceId=A,R.width=O,R.height=D):(R.deviceId={exact:A},R.width={exact:M[0]},R.height={exact:M[1]}),R}checkContentShareConnectivity(A){return c(this,void 0,void 0,function*(){let O=!1,D=!1;const M={contentShareDidStart:()=>{O=!0}},R={audioVideoDidStart:()=>{D=!0}};try{return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(M),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(A),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return D&&O})),D?(yield this.stopMeeting(),O?g.default.Succeeded:g.default.TimedOut):g.default.ConnectionFailed}catch(F){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${F}`),F.name==="NotAllowedError"?g.default.PermissionDenied:g.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(R),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(M)}})}checkAudioConnectivity(A){return c(this,void 0,void 0,function*(){let O=!1;const D={packetsReceived:0},M=this.meetingSession.audioVideo,R={metricsDidReceive(V){V.getRTCStatsReport().forEach($=>{$.type==="inbound-rtp"&&($.mediaType==="audio"||$.kind==="audio")&&(D.packetsReceived=$.packetsReceived)})}},F=s((V,$,X,Y)=>{V===this.meetingSession.configuration.credentials.attendeeId&&$&&(O=!0)},"attendeePresenceHandler");try{yield M.startAudioInput(A)}catch(V){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${V}`),V instanceof r.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return M.realtimeSubscribeToAttendeeIdPresence(F),M.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(O,D)})),M.removeObserver(R),M.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(O,D)?t.default.Succeeded:t.default.AudioNotReceived):(M.removeObserver(R),M.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(A){return c(this,void 0,void 0,function*(){const O=this.meetingSession.audioVideo;let D=0;const M={metricsDidReceive(R){R.getRTCStatsReport().forEach(V=>{V.type==="outbound-rtp"&&(V.mediaType==="video"||V.kind==="video")&&(D=V.packetsSent)})}};try{yield O.startVideoInput(A)}catch(R){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${R}`),R instanceof r.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return O.addObserver(M),(yield this.startMeeting())?(O.startLocalVideoTile(),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return D>0})),yield O.stopVideoInput(),yield this.stopMeeting(),O.removeObserver(M),D<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return c(this,void 0,void 0,function*(){let A=!1;const O={metricsDidReceive(M){M.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(A=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(M){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${M}`),u.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=M=>{const R=this.originalURLRewriter(M);return R.includes("transport=tcp")?"":R};const D=this.meetingSession.audioVideo;return D.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),D.removeObserver(O),A?u.default.Succeeded:u.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,u.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return c(this,void 0,void 0,function*(){let A=!1;const O={metricsDidReceive(M){M.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(A=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(M){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${M}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=M=>{const R=this.originalURLRewriter(M);return R.includes("transport=udp")?"":R};const D=this.meetingSession.audioVideo;return D.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),D.removeObserver(O),A?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return c(this,void 0,void 0,function*(){let A=!1;const O={audioVideoDidStart:()=>{A=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.audioVideo.removeObserver(O),A})}stopMeeting(){return c(this,void 0,void 0,function*(){let A=!1;const O={audioVideoDidStop:D=>{A=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.audioVideo.removeObserver(O),A})}executeTimeoutTask(A){return c(this,void 0,void 0,function*(){let O=!1,D=s(class extends n.default{cancel(){this.isCancelled=!0}run(){return c(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield A()){O=!0;break}yield sS.delay(this.waitDurationMs)}})}constructor(F,V){super(F),this.waitDurationMs=V,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new D(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),O})}isAudioConnectionSuccessful(A,O){return A&&O.packetsReceived>0}constructor(A,O,D=new _.default){this.logger=A,this.meetingSession=O,this.configuration=D,this.browserBehavior=new p.default}},"DefaultMeetingReadinessChecker");l.default=C},898490693:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=d},6643608480:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(u,v,y,_){function C(T){return T instanceof y?T:new y(function(A){A(T)})}return s(C,"adopt"),new(y||(y=Promise))(function(T,A){function O(R){try{M(_.next(R))}catch(F){A(F)}}s(O,"fulfilled");function D(R){try{M(_.throw(R))}catch(F){A(F)}}s(D,"rejected");function M(R){R.done?T(R.value):C(R.value).then(O,D)}s(M,"step"),M((_=_.apply(u,v||[])).next())})},h=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1833994912)),p=h(d(9305916160)),a=h(d(4571447548)),r=h(d(5546774952)),n=h(d(220809536)),e=h(d(7050079116)),t=h(d(8207737579)),i=d(4236152345),o=h(d(913629600)),f=h(d(2114525466)),g=h(d(7880459944));let S=s(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return c(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new r.default,y=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${y}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,y,_,C){this._eventController=C,this._configuration=v,this._logger=y,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,y)),_.eventController||(_.eventController=this.eventController),this.audioVideoController=new m.default(this._configuration,this._logger,new g.default(this._logger),_,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=_,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const T=new n.default(this._logger);this.contentShareController=new e.default(T,new m.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new g.default(this._logger),T,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new p.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},2612255336:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1197017824));let m=s(class aS{clone(){return new aS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,r=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=r}},"MeetingFeatures");l.default=m},6226061697:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8692068971)),m=c(d(1197017824)),p=d(5685319565),a=c(d(2612255336)),r=c(d(8023404193)),n=c(d(803810435));let e=s(class{constructor(i,o){var f,g;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,i){i=p.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=s((u,v)=>{switch(u){case"None":return m.default.VideoDisabled;case"HD":return m.default.VideoResolutionHD;case"FHD":return m.default.VideoResolutionFHD;case"UHD":return m.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((f=i.meetingfeatures)===null||f===void 0?void 0:f.video)!==void 0||((g=i.meetingfeatures)===null||g===void 0?void 0:g.content)!==void 0){const u=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,v=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(u,m.default.VideoResolutionHD),S(v,m.default.VideoResolutionFHD))}}o&&(o=p.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new r.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},8023404193:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=d},2234819701:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var d;(function(c){c[c.Connecting=0]="Connecting",c[c.Started=1]="Started",c[c.Stopped=2]="Stopped"})(d=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=d},546597810:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var d;(function(c){c[c.ConnectingNew=0]="ConnectingNew",c[c.ReconnectingExisting=1]="ReconnectingExisting",c[c.StartedNew=2]="StartedNew",c[c.StartedExisting=3]="StartedExisting",c[c.StartedAfterReconnect=4]="StartedAfterReconnect",c[c.StoppedCleanly=5]="StoppedCleanly",c[c.StoppedWithFailure=6]="StoppedWithFailure"})(d=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=d},7551081659:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),m=c(d(9447989038));let p=s(class pr{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:case m.default.VideoCallAtSourceCapacity:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.ICEGatheringTimeoutWorkaround:case m.default.ConnectionHealthReconnect:case m.default.RealtimeApiFailed:case m.default.TaskFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case m.default.Left:case m.default.AudioJoinedFromAnotherDevice:case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.MeetingEnded:case m.default.AudioDisconnected:case m.default.TURNCredentialsForbidden:case m.default.SignalingBadRequest:case m.default.SignalingRequestFailed:case m.default.VideoCallAtSourceCapacity:case m.default.RealtimeApiFailed:case m.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.ICEGatheringTimeoutWorkaround:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.RealtimeApiFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case m.default.OK:return"Everything is OK so far.";case m.default.Left:return"The attendee left the meeting.";case m.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case m.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case m.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case m.default.MeetingEnded:return"The meeting ended.";case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:return"The audio connection failed.";case m.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case m.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:return"The signaling connection failed.";case m.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case m.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case m.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case m.default.TaskFailed:return"The connection failed. See the error message for more details.";case m.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case m.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case m.default.NoAttendeePresent:return"The attendee was not present.";case m.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case m.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case m.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case m.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const r=this._statusCode;throw new Error(`Unhandled case: ${r}`)}}}static fromSignalFrame(r){return r.error&&r.error.status?this.fromSignalingStatus(r.error.status):r.type===h.SdkSignalFrame.Type.AUDIO_STATUS?r.audioStatus?this.fromAudioStatus(r.audioStatus.audioStatus):new pr(m.default.SignalingRequestFailed):r.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new pr(m.default.AudioVideoWasRemovedFromPrimaryMeeting):new pr(m.default.OK)}static fromAudioStatus(r){switch(r){case 200:return new pr(m.default.OK);case 301:return new pr(m.default.AudioJoinedFromAnotherDevice);case 302:return new pr(m.default.AudioDisconnectAudio);case 403:return new pr(m.default.AudioAuthenticationRejected);case 409:return new pr(m.default.AudioCallAtCapacity);case 410:return new pr(m.default.MeetingEnded);case 411:return new pr(m.default.AudioAttendeeRemoved);case 500:return new pr(m.default.AudioInternalServerError);case 503:return new pr(m.default.AudioServiceUnavailable);default:switch(Math.floor(r/100)){case 2:return new pr(m.default.OK);default:return new pr(m.default.AudioDisconnected)}}}static fromSignalingStatus(r){switch(r){case 206:return new pr(m.default.VideoCallSwitchToViewOnly);case 509:return new pr(m.default.VideoCallAtSourceCapacity);case 403:return new pr(m.default.AudioAuthenticationRejected);case 409:return new pr(m.default.AudioCallAtCapacity);default:switch(Math.floor(r/100)){case 2:return new pr(m.default.OK);case 4:return new pr(m.default.SignalingBadRequest);case 5:return new pr(m.default.SignalingInternalServerError);default:return new pr(m.default.SignalingRequestFailed)}}}constructor(r){this._statusCode=r}},"MeetingSessionStatus");l.default=p},9447989038:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var d;(function(c){c[c.OK=0]="OK",c[c.Left=1]="Left",c[c.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",c[c.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",c[c.AudioCallAtCapacity=4]="AudioCallAtCapacity",c[c.MeetingEnded=5]="MeetingEnded",c[c.AudioInternalServerError=6]="AudioInternalServerError",c[c.AudioServiceUnavailable=7]="AudioServiceUnavailable",c[c.AudioDisconnected=8]="AudioDisconnected",c[c.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",c[c.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",c[c.SignalingBadRequest=11]="SignalingBadRequest",c[c.SignalingInternalServerError=12]="SignalingInternalServerError",c[c.SignalingRequestFailed=13]="SignalingRequestFailed",c[c.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",c[c.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",c[c.RealtimeApiFailed=16]="RealtimeApiFailed",c[c.TaskFailed=17]="TaskFailed",c[c.IncompatibleSDP=18]="IncompatibleSDP",c[c.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",c[c.NoAttendeePresent=20]="NoAttendeePresent",c[c.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",c[c.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",c[c.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",c[c.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(d=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=d},4943767904:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=d},803810435:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(h){this._audioHostURL=h}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(h){this._signalingURL=h}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(h){this._turnControlURL=h}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(h){this._eventIngestionURL=h}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=h=>h}},"MeetingSessionURLs");l.default=d},488357679:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class lS{equal(h){return this.remoteVideoAvailable===h.remoteVideoAvailable&&this.canStartLocalVideo===h.canStartLocalVideo}clone(){const h=new lS;return h.remoteVideoAvailable=this.remoteVideoAvailable,h.canStartLocalVideo=this.canStartLocalVideo,h}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=d},1261307249:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h,m,p){this.type=h,this.headers=m,this.payload=p}},"Message");l.default=d},9331325908:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(S,u,v,y){function _(C){return C instanceof v?C:new v(function(T){T(C)})}return s(_,"adopt"),new(v||(v=Promise))(function(C,T){function A(M){try{D(y.next(M))}catch(R){T(R)}}s(A,"fulfilled");function O(M){try{D(y.throw(M))}catch(R){T(R)}}s(O,"rejected");function D(M){M.done?C(M.value):_(M.value).then(A,O)}s(D,"step"),D((y=y.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(2543682196),p=h(d(4571447548)),a=h(d(8207737579)),r=h(d(1261307249)),n=h(d(2114525466)),e=h(d(9649641385)),t=h(d(7924674822)),i=h(d(7880459944)),o=h(d(5638612424)),f=h(d(4741303625));let g=s(class{addObserver(u){this.logger.info("adding messaging observer"),this.observerQueue.add(u)}removeObserver(u){this.logger.info("removing messaging observer"),this.observerQueue.delete(u)}start(){return c(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(u){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&u(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",u=>{this.receiveMessageHandler(u.data)}),this.webSocket.addEventListener("close",u=>{this.closeEventHandler(u)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(u){return c(this,void 0,void 0,function*(){return yield this.startConnectingInternal(u),yield new Promise((v,y)=>{this.bootstrapResolved=v,this.bootstrapRejected=y})})}startConnectingInternal(u){var v;return c(this,void 0,void 0,function*(){let y=this.configuration.endpointUrl;if(u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),u||y===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const C=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=C.Endpoint)===null||v===void 0)&&v.Url?y=C.Endpoint.Url:y=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else y=(yield this.configuration.chimeClient.send(new m.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${y}`)}catch(C){this.logger.error(`Messaging Session failed to resolve endpoint: ${C}`);const T=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(T);return}const _=yield this.prepareWebSocketUrl(y);this.logger.info(`opening connection to ${_}`),u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(_,[],!0),this.forEachObserver(C=>{C.messagingSessionDidStartConnecting&&C.messagingSessionDidStartConnecting(u)}),this.setUpEventListeners()})}prepareWebSocketUrl(u){return c(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===f.default.Connect&&v.set("prefetch-on",[f.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",u,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(u){try{const v=JSON.parse(u),y=v.Headers["x-amz-chime-event-type"],_=new r.default(y,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&y==="SESSION_ESTABLISHED"){this.forEachObserver(T=>{T.messagingSessionDidStart&&T.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const C=this.preBootstrapMessages.length;for(let T=0;T<C;T++){const A=this.preBootstrapMessages.shift();this.forEachObserver(O=>{this.sendMessageToObserver(O,A)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(_);return}this.forEachObserver(C=>{this.sendMessageToObserver(C,_)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(u,v){u.messagingSessionDidReceiveMessage&&u.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>c(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(u){this.logger.info(`WebSocket close: ${u.code} ${u.reason}`),u.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(u.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(u)}):this.bootstrapRejected(u))}canReconnect(u){return u===1001||u===1006||u>=1011&&u<=1014||u>4e3&&u!==4002&&u!==4003&&u!==4401}constructor(u,v,y,_,C){this.configuration=u,this.logger=v,this.webSocket=y,this.reconnectController=_,this.sigV4=C,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(u.reconnectTimeoutMs,new p.default(u.reconnectFixedWaitMs,u.reconnectShortBackoffMs,u.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=g},6589808043:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(5685319565);let h=s(class{generateSessionId(){const p=new Uint32Array(1);return c.getRandomValues(p),p[0].toString()}constructor(p,a,r,n){this.userArn=p,this.messagingSessionId=a,this.endpointUrl=r,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=h},4741303625:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.Connect="connect"})(d||(d={})),l.default=d},2097622617:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.Unread="unread",c.LastMessageTimestamp="last-message-timestamp"})(d||(d={})),l.default=d},8006173476:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(805846668));let m=s(class Ca{id(){return this._id}base(){return this._id?this._id.split(Ca.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Ca.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const r=new Ca(this.base()+Ca.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Ca(r._id).modality()!==a?new Ca(this.base()):r}constructor(a){this._id=a}},"DefaultModality");l.default=m,m.MODALITY_SEPARATOR=h.default.Modality[0],m.MODALITY_CONTENT=h.default.Modality.substr(1)},6348496904:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(9649641385)),m=c(d(9877075638)),p=c(d(7969706599)),a=d(4136617125),r=d(6527539809);let n=s(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{r.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=a.SdkPingPongFrame.create();i.pingId=t,i.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case p.default.WebSocketOpen:this.startPingInterval();break;case p.default.WebSocketFailed:case p.default.WebSocketError:this.logger.warn(`stopped pinging (${p.default[t.type]})`),this.stopPingInterval();break;case p.default.WebSocketClosing:case p.default.WebSocketClosed:this.logger.info(`stopped pinging (${p.default[t.type]})`),this.stopPingInterval();break;case p.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const g=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-g/2),u=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${u}ms from ping-pong time=${g}ms`),this.forEachObserver(v=>{r.Maybe.of(v.didReceivePong).map(y=>y.bind(v)(i,u,g))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new m.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=n},7692233712:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6391477986)),m=c(d(7618200138)),p=c(d(7832597620));let a=s(class{realtimeSetLocalAttendeeId(n,e){this.state.localAttendeeId=n,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(n,e,t,i,o){try{e&&(this.state.attendeeIdToExternalUserId[n]=t);for(const f of this.state.attendeeIdChangesCallbacks)f(n,e,t,i,o)}catch(f){this.onError(f)}}realtimeSubscribeToAttendeeIdPresence(n){try{this.state.attendeeIdChangesCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(n){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(n);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(n){try{if(this.state.canUnmute===n)return;this.state.canUnmute=n;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(n)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(n){try{this.state.setCanUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(n){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!0)}catch(n){this.onError(n)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!1);return!0}catch(n){return this.onError(n),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(n){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(n){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(n,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(n)||(this.state.volumeIndicatorCallbacks[n]=[]),this.state.volumeIndicatorCallbacks[n].push(e),this.sendVolumeIndicatorChange(n,!0,!0,!0,this.state.attendeeIdToExternalUserId[n])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(n,e){if(this.state.volumeIndicatorCallbacks[n])if(e){const i=this.state.volumeIndicatorCallbacks[n].indexOf(e);i>=0&&this.state.volumeIndicatorCallbacks[n].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[n]}realtimeUpdateVolumeIndicator(n,e,t,i,o){try{t=this.applyLocalMuteOverride(n,t);const f=this.getVolumeIndicatorState(n);let g=!1,S=!1,u=!1;t!==null&&f.muted!==t&&(f.muted=t,S=!0,f.muted&&f.volume!==0&&(f.volume=0,g=!0)),!f.muted&&e!==null&&(f.volume!==e&&(f.volume=e,g=!0),f.muted===null&&(f.muted=!1,S=!0)),i!==null&&f.signalStrength!==i&&(f.signalStrength=i,u=!0),this.sendVolumeIndicatorChange(n,g,S,u,o)}catch(f){this.onError(f)}}realtimeSubscribeToLocalSignalStrengthChange(n){try{if(this.state.localSignalStrengthChangeCallbacks.push(n),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(n){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(n);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(n){try{this.state.sendDataMessageCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(n){try{const e=this.state.sendDataMessageCallbacks.indexOf(n);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(n,e,t){try{for(const i of this.state.sendDataMessageCallbacks)i(n,e,t)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(n,e){try{this.state.receiveDataMessageCallbacks.has(n)?this.state.receiveDataMessageCallbacks.get(n).push(e):this.state.receiveDataMessageCallbacks.set(n,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(n){try{this.state.receiveDataMessageCallbacks.delete(n)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(n){try{if(this.state.receiveDataMessageCallbacks.has(n.topic))for(const e of this.state.receiveDataMessageCallbacks.get(n.topic))e(n)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(n){try{this.state.fatalErrorCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(n){try{const e=this.state.fatalErrorCallbacks.indexOf(n);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(n){n?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(n,e){const t=this.state.localAttendeeId,i=this.state.muted;return n!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:i}sendVolumeIndicatorChange(n,e,t,i,o){if(this.sendLocalSignalStrengthChange(n,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(n))return;const f=this.getVolumeIndicatorState(n),g=new p.default;if(e&&(g.volume=f.volume),t&&(g.muted=f.muted),i&&(g.signalStrength=f.signalStrength),!this.stateIsEmpty(g))for(const S of this.state.volumeIndicatorCallbacks[n])S(n,g.volume,g.muted,g.signalStrength,o)}sendLocalSignalStrengthChange(n,e){if(!e||n!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(n).signalStrength;if(i!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(i)}getVolumeIndicatorState(n){return this.state.volumeIndicatorState.hasOwnProperty(n)||(this.state.volumeIndicatorState[n]=new p.default),this.state.volumeIndicatorState[n]}stateIsEmpty(n){return n.volume===null&&n.muted===null&&n.signalStrength===null}onError(n){try{for(const e of this.state.fatalErrorCallbacks)e(n)}catch(e){try{console.error(n),console.error(e)}catch{}}}constructor(n,e){this.mediaStreamBroker=n,this.state=new m.default,this._transcriptionController=e||new h.default(this)}},"DefaultRealtimeController");l.default=a},3171391796:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=d},7618200138:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=d},7832597620:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=d},2114525466:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5824864644));let m=s(class cS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,r){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=r,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new cS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,r){this.reconnectTimeoutMs=a,this.backoffPolicy=r,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=m},3937896393:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class wo{static initializeWorker(){wo.log("Initializing RedundantAudioEncoder");const h=new wo;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?h.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?h.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&h.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(h.setupSenderTransform(m.data.send.readable,m.data.send.writable),h.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(h.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),h.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?h.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?h.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?h.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?h.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&h.setRedundancyEnabled(!1)}}static log(h){wo.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${h}`})}static getNumRedundantEncodingsForPacketLoss(h){let m=0,p=!1;return h<=8?m=0:h<=18?m=1:h<=75?m=2:(m=0,p=!0),[m,p]}setupPassthroughTransform(h,m){wo.log("Setting up passthrough transform"),h.pipeTo(m)}setupSenderTransform(h,m){wo.log("Setting up sender RED transform");const p=new TransformStream({transform:this.senderTransform.bind(this)});h.pipeThrough(p).pipeTo(m)}setupReceiverTransform(h,m){wo.log("Setting up receiver RED transform");const p=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});h.pipeThrough(p).pipeTo(m)}setRedPayloadType(h){this.redPayloadType=h,wo.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(h){this.opusPayloadType=h,wo.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(h){this.numRedundantEncodings=h,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),wo.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(h){this.redundancyEnabled=h,wo.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(h,m){h.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(h)}senderTransform(h,m){if(h.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}const a=this.getPrimaryPayload(h.timestamp,h.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}const r=this.encode(h.timestamp,a);if(!r){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}h.data=r,this.enqueueAudioFrameIfPayloadSizeIsValid(h,m)}getPrimaryPayload(h,m){const p=this.splitEncodings(h,m);return!p||p.length<1?null:p[p.length-1].payload}splitEncodings(h,m){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const r=new DataView(m);let n=r.byteLength,e=0,t=0,i=0,o=0,f=!1;const g=new Array,S=new Array,u=new Array;for(;n>0;)if(f=(r.getUint8(o)&128)===0,f){if((r.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=r.byteLength))return null;i=r.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const A=((r.getUint8(o+2)&3)<<8)+r.getUint8(o+3);S.push(A);const O=r.getUint16(o+1)>>2,D=h-O;u.push(D),e+=A+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!f)return null;let v=t;for(let A=0;A<u.length;A++){const O=new ArrayBuffer(S[A]);new Uint8Array(O).set(new Uint8Array(r.buffer,v,S[A]),0);const M={timestamp:u[A],payload:O,isRedundant:!0};p&&(M.hasFec=this.opusPacketHasFec(new DataView(O),O.byteLength)),g.push(M),v+=S[A]}const y=r.byteLength-i,_=new ArrayBuffer(i);new Uint8Array(_).set(new Uint8Array(r.buffer,y,i),0);const T={timestamp:h,payload:_,isRedundant:!1,seq:a};return p&&(T.hasFec=this.opusPacketHasFec(new DataView(_),_.byteLength)),g.push(T),g}encode(h,m){const p=m.byteLength;if(p===0||p>=this.maxRedPacketSizeBytes||p>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let r=this.redLastHeaderSizeBytes,n=p,e=this.maxAudioPayloadSizeBytes-p-r;const t=new Array,i=new Array;if(this.redundancyEnabled){let u=this.uint32WrapAround(h-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<a&&!(this.uint32WrapAround(h-u)>=this.maxRedTimestampOffset);v++){let y=u,_=this.encodingHistory.find(C=>C.timestamp===y);if(_||(y=this.uint32WrapAround(u-this.redPacketizationTime),_=this.encodingHistory.find(C=>C.timestamp===y)),_){const C=_.payload.byteLength;if(e<this.redHeaderSizeBytes+C)break;e-=this.redHeaderSizeBytes+C,r+=this.redHeaderSizeBytes,n+=C,t.unshift(_.timestamp),i.unshift(_.payload)}u-=this.redPacketizationTime*this.redPacketDistance,u=this.uint32WrapAround(u)}}const o=new ArrayBuffer(r+n),f=new DataView(o);let g=0;for(let u=0;u<t.length;u++){const v=h-t[u];f.setUint8(g,this.opusPayloadType|128),f.setUint16(g+1,v<<2|i[u].byteLength>>8),f.setUint8(g+3,i[u].byteLength&255),g+=this.redHeaderSizeBytes}f.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let u=0;u<i.length;u++)S.set(new Uint8Array(i[u]),g),g+=i[u].byteLength;return S.set(new Uint8Array(m),g),g+=m.byteLength,g!==r+n?null:(this.updateEncodingHistory(h,m),o)}updateEncodingHistory(h,m){for(const a of this.encodingHistory){const r=this.redPacketizationTime*this.redMaxRecoveryDistance;if(h-a.timestamp>=r)this.encodingHistory.shift();else break}const p=new DataView(m);(this.opusPacketIsCeltOnly(p)||this.opusPacketHasVoiceActivity(p,p.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:h,payload:m}))}initializePacketLogs(){const h=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(h),index:0,windowSize:h},this.redRecoveryLog={window:new Array(h),index:0,windowSize:h},this.fecRecoveryLog={window:new Array(h),index:0,windowSize:h},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(h,m){const p=h.getMetadata();if(p.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}const a=this.splitEncodings(h.timestamp,h.data,!0,p.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}for(let r=a.length-1;r>=0;r--)this.updateLossStats(a[r])&&(this.updateRedStats(a[r]),this.updateFecStats(a[r]));this.maybeReportLossStats(a[a.length-1].timestamp,p.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(h,m)}updateLossStats(h){if(h.isRedundant)return!0;const m=h.timestamp,p=h.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=p,this.addTimestamp(this.primaryPacketLog,m),!0;const a=this.int16(p-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=h.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(h){if(!h.isRedundant||this.totalAudioPacketsLost===0)return;const m=h.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(h){if(!h.hasFec||this.totalAudioPacketsLost===0)return;const m=h.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(h,m){h-this.lastLossReportTimestamp<this.lossReportInterval||(wo.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=h)}addTimestamp(h,m){h.window[h.index]=m,h.index=(h.index+1)%h.windowSize}hasTimestamp(h,m){return!!h.window.find(a=>a===m)}removeTimestamp(h,m){const p=h.window.indexOf(m);return p>=0?(h.window[p]=void 0,!0):!1}removeFromRecoveryWindows(h){let m=this.removeTimestamp(this.redRecoveryLog,h);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,h),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(h){let p=h;return h>=4294967296?p=h-4294967296:h<0&&(p=4294967296+h),p}int16(h){return h<<16>>16}opusPacketIsCeltOnly(h){return!!(h.getUint8(0)&128)}opusPacketGetSamplesPerFrame(h,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let p,a;return this.opusPacketIsCeltOnly(h)?(a=h.getUint8(0)>>3&3,p=(m<<a)/400):(h.getUint8(0)&96)===96?p=h.getUint8(0)&8?m/50:m/100:(a=h.getUint8(0)>>3&3,a===3?p=m*60/1e3:p=(m<<a)/100),p}opusNumSilkFrames(h){let m=this.opusPacketGetSamplesPerFrame(h,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(h){return h.getUint8(0)&4?2:1}opusParseSize(h,m,p,a){return p<1?(a[0]=-1,-1):h.getUint8(m)<252?(a[0]=h.getUint8(m),1):p<2?(a[0]=-1,-1):(a[0]=4*h.getUint8(m+1)+h.getUint8(m),2)}opusPacketParseImpl(h,m,p,a,r,n,e,t){if(!n||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let i,o,f=0,g=!1;const S=h.getUint8(0);a&&(a[0]=S);let u=m-1,v=1,y=u;switch(S&3){case 0:i=1;break;case 1:if(i=2,g=!0,!p){if(u&1)return this.OPUS_INVALID_PACKET;y=u/2,n[0][0]=y}break;case 2:if(i=2,o=this.opusParseSize(h,v,u,n[0]),u-=o,n[0][0]<0||n[0][0]>u)return this.OPUS_INVALID_PACKET;v+=o,y=u-n[0][0];break;default:if(u<1)return this.OPUS_INVALID_PACKET;const _=h.getUint8(v++);if(--u,i=_&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(h,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(_&64){let T,A;do{if(u<=0)return this.OPUS_INVALID_PACKET;T=h.getUint8(v++),--u,A=T===255?254:T,u-=A,f+=A}while(T===255)}if(u<0)return this.OPUS_INVALID_PACKET;if(g=!(_&128),g){if(!p){if(y=Math.trunc(u/i),y*i!==u)return this.OPUS_INVALID_PACKET;for(let T=0;T<i-1;++T)n[T][0]=y}}else{y=u;for(let T=0;T<i-1;++T){if(o=this.opusParseSize(h,v,u,n[T]),u-=o,n[T][0]<0||n[T][0]>u)return this.OPUS_INVALID_PACKET;v+=o,y-=o+n[T][0]}if(y<0)return this.OPUS_INVALID_PACKET}}if(p){if(o=this.opusParseSize(h,v,u,n[i-1]),u-=o,n[i-1][0]<0||n[i-1][0]>u)return this.OPUS_INVALID_PACKET;if(v+=o,g){if(n[i-1][0]*i>u)return this.OPUS_INVALID_PACKET;for(let _=0;_<i-1;++_)n[_][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=y))return this.OPUS_INVALID_PACKET}else{if(y>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=y}e&&(e[0]=v);for(let _=0;_<i;++_)r&&(r[_][0]=v),v+=n[_][0];return t&&(t[0]=v+f),i}opusPacketParse(h,m,p,a,r,n){return this.opusPacketParseImpl(h,m,!1,p,a,r,n,null)}opusPacketHasVoiceActivity(h,m){if(!h||m<=0)return 0;if(this.opusPacketIsCeltOnly(h))return-1;const p=this.opusNumSilkFrames(h);if(p===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),r=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],r[e]=[void 0];const n=this.opusPacketParse(h,m,null,a,r,null);if(n<0)return-1;for(let e=0;e<n;++e){if(r[e][0]<1)continue;if(h.getUint8(a[e][0])>>8-p||this.opusPacketGetNumChannels(h)===2&&h.getUint8(a[e][0])<<p+1>>8-p)return 1}return 0}opusPacketHasFec(h,m){if(!h||m<=0||this.opusPacketIsCeltOnly(h))return!1;const p=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)p[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(h,m,null,p,a,null)<0||a[0][0]<=1)return!1;const n=this.opusNumSilkFrames(h);if(n===0)return!1;const e=this.opusPacketGetNumChannels(h);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(h.getUint8(p[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=d,d.shouldLog=!1,d.shouldReportStats=!1},9337558969:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=d},9649641385:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5824864644));let m=s(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=m},9877075638:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{start(h){this.stop(),this.timer=setInterval(h,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(h){this.intervalMs=h}},"IntervalScheduler");l.default=d},5824864644:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{start(h){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),h()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(h){this.timeoutMs=h,this.timer=null}},"TimeoutScheduler");l.default=d},182939685:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(9489740826)),m=c(d(6818892922)),p=c(d(8804723777));let a=s(class sn{clone(){return new sn(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new sn(n.join(sn.CRLF))}static candidateTypeFromString(n){switch(n){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:sn.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+sn.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return sn.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(sn.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return sn.linesToSDP(this.lines().filter(e=>sn.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,sn.rfc7587LowestBitrate),sn.rfc7587HighestBitrate));const e=this.lines(),t=sn.findOpusFmtpAttributes(e),i=sn.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return sn.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=sn.findOpusFmtpAttributes(n),t=sn.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return sn.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const f=e.exec(o);f!==null&&(i[i.length-1]=`a=fmtp:${f[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,f=null;for(const g of n)if(g.startsWith("m=audio")&&(f=e[o],o++),g.startsWith("m=video")&&(f=null),f&&g.startsWith(f)){const S=g.slice(f.length).split(";"),u=[];for(const v of S)t.findIndex(_=>_.startsWith(v.split("=")[0]))<0&&u.push(v);for(const v of t)u.push(v);i.push(f+u.join(";"))}else i.push(g);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new sn(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const f=+i.split("a=extmap:")[1].split(" ")[0];e.includes(f)||e.push(f)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,sn.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,sn.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=sn.splitLines(this.sdp).filter(e=>!e.includes(sn.dependencyDescriptorRtpHeaderExtensionUrl));return new sn(n.join(sn.CRLF)+sn.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(sn.splitLines(this.sdp)):t,o=sn.splitSections(this.sdp),f=[];for(let S of o){if(/^m=video/.test(S)&&sn.getRtpHeaderExtensionIdInSection(S,e)===-1){const u=sn.splitLines(S),v=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){f.push(S);continue}for(const y of u)if(v.push(y),/^a=sendrecv/.test(y.trim())){const _="a=extmap:"+i+" "+e;v.push(_)}S=v.join(sn.CRLF)+sn.CRLF}else if(t!==-1&&/^m=video/.test(S)&&sn.getRtpHeaderExtensionIdInSection(S,e)!==t){const u=sn.splitLines(S),v=[];for(const y of u){if(/^a=extmap:/.test(y.trim())&&y.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const C="a=extmap:"+t+" "+e;v.push(C)}continue}v.push(y)}S=v.join(sn.CRLF)+sn.CRLF}f.push(S)}const g=f.join("");return new sn(g)}ssrcForVideoSendingSection(){const n=this.sdp,e=sn.splitSections(n);if(e.length<2)return"";const t=sn.findActiveCameraSection(e);if(t===-1)return"";const i=sn.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=sn.extractSSRCsFromFIDGroupLine(i[0]),[f]=o.split(" ").map(g=>parseInt(g,10));return f.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=sn.splitSections(n),t=sn.findActiveCameraSection(e);if(t===-1)return new sn(this.sdp);const i=e[t],o=sn.splitLines(i),f=[],g=new Map;o.forEach(y=>{if(/^a=rtpmap:/.test(y)){const _=/^a=rtpmap:([0-9]+)\s/.exec(y);_&&y.toLowerCase().includes("h264")&&f.push(parseInt(_[1],10))}if(/^a=fmtp:/.test(y)){const _=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(y);if(_&&_.length===3){const C=parseInt(_[1],10),T=parseInt(_[2],10);g.has(T)?g.get(T).push(C):g.set(T,[C])}}});const S=new Set;for(const y of f){S.add(y);const _=g.get(y);if(_)for(const C of _)S.add(C)}if(f.length>0){const y=o[0].split(" ");o[0]=y.filter(_=>!S.has(parseInt(_))).join(" ")}const u=o.filter(y=>{if(!y.includes("rtpmap")&&!y.includes("rtcp-fb")&&!y.includes("fmtp"))return!0;for(const _ of S)if(y.includes(_.toString()))return!1;return!0});e[t]=u.join(sn.CRLF)+sn.CRLF;const v=e.join("");return new sn(v)}mediaSections(){const n=sn.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new m.default,o=sn.splitLines(n[t]);for(const f of o){const g=sn.mediaType(f);if(g!==void 0){i.mediaType=g;continue}const S=sn.direction(f);if(S!==void 0){i.direction=S;continue}const u=sn.mid(f);if(u!==void 0){i.mid=u;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=sn.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),f=+o[0];if(o[1]===e)return f}return-1}getRtpHeaderExtensionId(n){const e=sn.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=sn.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=sn.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=sn.splitSections(e),i=sn.findActiveCameraSection(t);if(i===-1)return new sn(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new sn(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=sn.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const u=/^a=rtpmap:(\d+)\s/.exec(S);if(!u)return;const v=u[1];for(const y of e){if(!S.includes(`${y.codecName}/${y.codecCapability.clockRate}`))continue;let _=!1;if(y.codecCapability.sdpFmtpLine!==void 0){let C=!1;for(const T of i){if(y.fmtpLineMatches(T,parseInt(v))){_=!0;break}C||(C=T.startsWith(`a=fmtp:${v} profile-id=`))}y.equals(p.default.vp9Profile0())&&!C&&(_=!0)}else _=!0;if(_){t.set(v,y);break}}});const o=new Set(t.keys()),f=i[0].split(" ").filter(S=>!o.has(S)),g=Array.from(t.entries()).sort((S,u)=>{let[v,y]=S,[_,C]=u;const T=e.indexOf(y),A=e.indexOf(C);return T-A}).map(S=>{let[u,v]=S;return u});return f.splice(3,0,...g),i[0]=f.join(" "),i.join(sn.CRLF)+sn.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=sn.splitSections(n),t=sn.findActiveCameraSection(e);if(t===-1)return[];const i=sn.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const f of n){const g=/^a=rtpmap:([0-9]+)\s/.exec(f);if(g&&g[1]===e){const u=f.split(" ")[1].split("/");u.length>=2&&(t=u[0],i=u[1])}f.startsWith(`a=fmtp:${e} `)&&(o=f.split(" ")[1])}if(t!==void 0)return new p.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=sn.splitSections(e);return n.set("opus",sn.findAudioPayloadType("opus",t)),n.set("red",sn.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const f=i.exec(o);if(f!==null)return Number(f[1])}return 0}withStartingVideoSendBitrate(n){const e=sn.splitSections(this.sdp),t=sn.findActiveCameraSection(e);if(t===-1)return this;const i=sn.splitLines(e[t]),o=[];for(const g of i)if(/^a=fmtp:\d*/.test(g)){const S=g+`;x-google-start-bitrate=${n*1e3}`;o.push(S)}else o.push(g);e[t]=o.join(sn.CRLF)+sn.CRLF;const f=e.join("");return new sn(f)}constructor(n){this.sdp=n}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9489740826:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var d;(function(c){c.Host="host",c.ServerReflexive="srflx",c.PeerReflexive="prflx",c.Relay="relay"})(d=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=d},6818892922:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"SDPMediaSection");l.default=d},8804723777:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(4136617125);let h=s(class Ir{equals(p){return p!==void 0&&this.codecName===p.codecName&&this.codecCapability.mimeType===p.codecCapability.mimeType&&this.codecCapability.clockRate===p.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===p.codecCapability.sdpFmtpLine}fmtpLineMatches(p,a){const r=this.codecCapability.sdpFmtpLine;if(!r)return!1;if(this.codecName==="H264"){const n=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=r.replace(n,"profile-level-id=$1");return p.replace(n,"profile-level-id=$1").startsWith(`a=fmtp:${a} ${e}`)}return p.startsWith(`a=fmtp:${a} ${r}`)}static vp8(){return new Ir("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Ir("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Ir("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Ir("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Ir("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Ir("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Ir.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Ir("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Ir.vp9Profile0()}static av1Main(){return new Ir("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Ir.av1Main()}static fromSignaled(p){switch(p){case c.SdkVideoCodecCapability.VP8:return Ir.vp8();case c.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Ir.h264BaselineProfile();case c.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Ir.h264ConstrainedBaselineProfile();case c.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Ir.h264MainProfile();case c.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Ir.h264HighProfile();case c.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Ir.h264ConstrainedHighProfile();case c.SdkVideoCodecCapability.VP9_PROFILE_0:return Ir.vp9Profile0();case c.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Ir.av1Main();default:return}}constructor(p,a){this.codecName=p,this.codecCapability=a}},"VideoCodecCapability");l.default=h},3475297719:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(9385915920);let h=s(class cu{compress(p,a){if(a.length>0){const e=Math.min(a.length,cu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={memLevel:cu.Z_MEM_LEVEL,dictionary:a};return c.deflateRaw(p,r)}decompress(p,a){if(a.length>0){const e=Math.min(a.length,cu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={to:"string",dictionary:a,chunkSize:4096};let n="";try{n=c.inflateRaw(p,r)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(p){this.logger=p}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},6900744364:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(3795683579),h=d(7012117651),m=d(2092275410),p=d(583806999);let a=s(class{perform(n,e){const t=this.currentState;if(t===m.SessionStateControllerState.NotConnected&&n===c.SessionStateControllerAction.Connect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===c.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===c.SessionStateControllerAction.FinishConnecting)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Disconnect)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Reconnect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Update)this.transition(m.SessionStateControllerState.Updating,n);else if(t===m.SessionStateControllerState.Updating&&n===c.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Updating&&n===c.SessionStateControllerAction.FinishUpdating)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Disconnecting&&n===c.SessionStateControllerAction.FinishDisconnecting)this.transition(m.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${m.SessionStateControllerState[this.currentState]} with ${c.SessionStateControllerAction[n]}`),this.deferAction(n,e),p.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${m.SessionStateControllerState[this.currentState]} with ${c.SessionStateControllerAction[n]}`),p.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${m.SessionStateControllerState[this.currentState]} with action ${c.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${m.SessionStateControllerState[t]}`),this.currentState=t,p.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),p.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${m.SessionStateControllerState[this.currentState]} to ${m.SessionStateControllerState[n]} with ${c.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case c.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case c.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case c.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case c.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===m.SessionStateControllerState.Connecting||this.currentState===m.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${c.SessionStateControllerAction[n]}`),this.perform(n,e)!==p.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${c.SessionStateControllerAction[n]} in state ${m.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=m.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},3795683579:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var d;(function(c){c[c.Connect=0]="Connect",c[c.FinishConnecting=1]="FinishConnecting",c[c.Update=2]="Update",c[c.FinishUpdating=3]="FinishUpdating",c[c.Reconnect=4]="Reconnect",c[c.Disconnect=5]="Disconnect",c[c.Fail=6]="Fail",c[c.FinishDisconnecting=7]="FinishDisconnecting"})(d=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=d},7012117651:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var d;(function(c){c[c.DoNotDefer=0]="DoNotDefer",c[c.Low=1]="Low",c[c.Medium=2]="Medium",c[c.High=3]="High",c[c.VeryHigh=4]="VeryHigh"})(d=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=d},2092275410:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var d;(function(c){c[c.NotConnected=0]="NotConnected",c[c.Connecting=1]="Connecting",c[c.Connected=2]="Connected",c[c.Updating=3]="Updating",c[c.Disconnecting=4]="Disconnecting"})(d=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=d},583806999:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var d;(function(c){c[c.Transitioned=0]="Transitioned",c[c.NoTransitionAvailable=1]="NoTransitionAvailable",c[c.DeferredTransition=2]="DeferredTransition",c[c.TransitionFailed=3]="TransitionFailed"})(d=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=d},7570945794:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5546774952)),m=c(d(5824864644)),p=d(4136617125),a=d(5685319565),r=c(d(6885109343)),n=c(d(4829581265)),e=c(d(5638612424)),t=d(5393388022),i=c(d(1578897375)),o=c(d(7969706599));let f=s(class Mc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const u=p.SdkSignalFrame.create();return u.type=p.SdkSignalFrame.Type.PING_PONG,u.pingPong=S,this.sendMessage(u),u.timestampMs}join(S){this.logger.info("sending join");const u=p.SdkJoinFrame.create();u.protocolVersion=2,u.flags=p.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new h.default,y={platformName:v.name(),platformVersion:v.version(),clientSource:r.default.sdkName,chimeSdkVersion:r.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:C,appVersion:T}=S.applicationMetadata;y.appName=C,y.appVersion=T}u.clientDetails=p.SdkClientDetails.create(y),u.audioSessionId=this.audioSessionId,u.wantsCompressedSdp=Mc.CLIENT_SUPPORTS_COMPRESSION,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),u.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),u.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const _=p.SdkSignalFrame.create();_.type=p.SdkSignalFrame.Type.JOIN,_.join=u,this.sendMessage(_)}subscribe(S){const u=p.SdkSubscribeFrame.create();if(u.sendStreams=[],u.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(u.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(u.audioCheckin=S.audioCheckin,u.audioHost=S.audioHost,u.audioMuted=S.audioMuted,!S.audioCheckin)){const y=p.SdkStreamDescriptor.create();y.mediaType=p.SdkStreamMediaType.AUDIO,y.trackLabel="AmazonChimeExpressAudio",y.attendeeId=S.attendeeId,y.streamId=1,y.groupId=1,y.framerate=15,y.maxBitrateKbps=600,y.avgBitrateBps=4e5,u.sendStreams.push(y)}if(u.compressedSdpOffer=S.compressedSdpOffer,u.duplex=p.SdkStreamServiceType.RX,S.localVideoEnabled){u.duplex=p.SdkStreamServiceType.DUPLEX;for(let y=0;y<S.videoStreamDescriptions.length;y++){const _=S.videoStreamDescriptions[y].clone();_.attendeeId=S.attendeeId,u.sendStreams.push(_.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(u.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=p.SdkSignalFrame.create();v.type=p.SdkSignalFrame.Type.SUBSCRIBE,v.sub=u,this.sendMessage(v)}remoteVideoUpdate(S,u){const v=p.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=u;const y=p.SdkSignalFrame.create();y.type=p.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,y.remoteVideoUpdate=v,this.sendMessage(y)}convertSignalingClientVideoSubscriptionConfiguration(S){const u=new p.SdkVideoSubscriptionConfiguration;switch(u.mid=S.mid,u.attendeeId=S.attendeeId,u.streamId=S.streamId,u.groupId=S.groupId,u.priority=S.priority,u.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.BALANCED}return u}leave(){const S=p.SdkSignalFrame.create();S.type=p.SdkSignalFrame.Type.LEAVE,S.leave=p.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.CLIENT_METRIC,u.clientMetric=S,this.sendMessage(u)}sendDataMessage(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.DATA_MESSAGE,u.dataMessage=S,this.sendMessage(u)}closeConnection(){var S,u;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const v=new m.default(Mc.CLOSE_EVENT_TIMEOUT_MS),y=s(_=>{var C,T;(T=(C=this.webSocket).removeEventListener)===null||T===void 0||T.call(C,"close",y),v.stop(),this.closeEventHandler(_)},"handler");(u=(S=this.webSocket).removeEventListener)===null||u===void 0||u.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",y),v.start(()=>{y(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.AUDIO_CONTROL;const v=p.SdkAudioControlFrame.create();v.muted=S,u.audioControl=v,this.sendMessage(u)}pause(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.PAUSE,u.pause=p.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resume(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.RESUME,u.pause=p.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const u=this.prependWithFrameTypeRTC(p.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(u)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let u;try{u=p.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(u)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,u)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(u)}`)}stripFrameTypeRTC(S){const u=S[0];return u!==Mc.FRAME_TYPE_RTC&&u!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${u}`),S.slice(1)}prependWithFrameTypeRTC(S){const u=new Uint8Array(S.length+1);return u[0]=Mc.FRAME_TYPE_RTC,u.set(S,1),u}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const u of this.observerQueue)u.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=d.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=d.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const u=p.SdkMeetingSessionCredentials.create();u.attendeeId=S.attendeeId,u.externalUserId=S.externalUserId,u.joinToken=S.joinToken;const v=p.SdkPrimaryMeetingJoinFrame.create();v.credentials=u;const y=p.SdkSignalFrame.create();y.type=p.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,y.primaryMeetingJoin=v,this.sendMessage(y)}demoteFromPrimaryMeeting(){const S=p.SdkPrimaryMeetingLeaveFrame.create(),u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,u.primaryMeetingLeave=S,this.sendMessage(u)}constructor(S,u){this.webSocket=S,this.logger=u,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0},5393388022:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const c=d(4136617125);var h;(function(r){r[r.Default=0]="Default",r[r.None=1]="None",r[r.BandwidthProbing=2]="BandwidthProbing",r[r.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function m(r){return r===h.None||r===h.Default}s(m,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=m;function p(r){switch(r){case c.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case c.SdkServerSideNetworkAdaption.NONE:return h.None;case c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}s(p,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=p;function a(r){switch(r){case h.Default:return c.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return c.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}s(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},7263318766:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(h,m){this.signalingURL=h,this.joinToken=m}},"SignalingClientConnectionRequest");l.default=d},1578897375:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7969706599));let m=s(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,r,n,e,t){this.client=a,this.type=r,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=m},7969706599:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var d;(function(c){c[c.WebSocketConnecting=0]="WebSocketConnecting",c[c.WebSocketOpen=1]="WebSocketOpen",c[c.WebSocketError=2]="WebSocketError",c[c.WebSocketClosing=3]="WebSocketClosing",c[c.WebSocketClosed=4]="WebSocketClosed",c[c.WebSocketFailed=5]="WebSocketFailed",c[c.WebSocketMessage=6]="WebSocketMessage",c[c.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",c[c.WebSocketSentMessage=8]="WebSocketSentMessage",c[c.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",c[c.ReceivedSignalFrame=10]="ReceivedSignalFrame",c[c.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(d=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=d},3867485289:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5393388022));let m=s(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=m},3735795291:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h,m,p,a,r,n,e,t,i,o){this.attendeeId=h,this.sdpOffer=m,this.audioHost=p,this.audioMuted=a,this.audioCheckin=r,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=d},4804743313:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{equals(h){return h!==void 0&&this.mid===h.mid&&this.attendeeId===h.attendeeId&&this.streamId===h.streamId&&this.groupId===h.groupId&&this.priority===h.priority&&this.targetBitrateKbps===h.targetBitrateKbps&&this.qualityAdaptationPreference===h.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=d},4136617125:(x,l,d)=>{"use strict";var c=d(8203499834),h=c.Reader,m=c.Writer,p=c.util,a=c.roots.default||(c.roots.default={});a.SdkSignalFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSignalFrame"),r.prototype.timestampMs=p.Long?p.Long.fromBits(0,0,!0):0,r.prototype.type=1,r.prototype.error=null,r.prototype.join=null,r.prototype.joinack=null,r.prototype.sub=null,r.prototype.suback=null,r.prototype.index=null,r.prototype.pause=null,r.prototype.leave=null,r.prototype.leaveAck=null,r.prototype.bitrates=null,r.prototype.audioControl=null,r.prototype.audioMetadata=null,r.prototype.audioStreamIdInfo=null,r.prototype.pingPong=null,r.prototype.audioStatus=null,r.prototype.clientMetric=null,r.prototype.dataMessage=null,r.prototype.remoteVideoUpdate=null,r.prototype.primaryMeetingJoin=null,r.prototype.primaryMeetingJoinAck=null,r.prototype.primaryMeetingLeave=null,r.prototype.notification=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("timestampMs"))throw p.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw p.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.timestampMs)&&!(e.timestampMs&&p.isInteger(e.timestampMs.low)&&p.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(p.Long?(t.timestampMs=p.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new p.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(p.Long){var o=new p.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?p.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new p.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=a.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),r}(),a.SdkErrorFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkErrorFrame"),r.prototype.status=0,r.prototype.description="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!p.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!p.isString(e.description)?"description: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),r}(),a.SdkJoinFlags=function(){var r={},n=Object.create(r);return n[r[2]="HAS_STREAM_UPDATE"]=2,n[r[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[r[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),a.SdkClientDetails=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientDetails"),r.prototype.appName="",r.prototype.appVersion="",r.prototype.deviceModel="",r.prototype.deviceMake="",r.prototype.platformName="",r.prototype.platformVersion="",r.prototype.clientSource="",r.prototype.chimeSdkVersion="",r.prototype.clientUtcOffset="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!p.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!p.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!p.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!p.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!p.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!p.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!p.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!p.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!p.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),r}(),a.SdkServerSideNetworkAdaption=function(){var r={},n=Object.create(r);return n[r[1]="DEFAULT"]=1,n[r[2]="NONE"]=2,n[r[3]="BANDWIDTH_PROBING"]=3,n[r[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),a.SdkJoinFrame=function(){function r(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinFrame"),r.prototype.protocolVersion=2,r.prototype.maxNumOfVideos=0,r.prototype.flags=0,r.prototype.clientDetails=null,r.prototype.audioSessionId=p.Long?p.Long.fromBits(0,0,!0):0,r.prototype.wantsCompressedSdp=!1,r.prototype.serverSideNetworkAdaption=1,r.prototype.supportedServerSideNetworkAdaptions=p.emptyArray,r.prototype.wantsAllTemporalLayersInIndex=!1,r.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!p.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!p.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!p.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!p.isInteger(e.audioSessionId)&&!(e.audioSessionId&&p.isInteger(e.audioSessionId.low)&&p.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(p.Long?(t.audioSessionId=p.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new p.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,p.Long){var o=new p.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?p.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new p.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var f=0;f<e.supportedServerSideNetworkAdaptions.length;++f)i.supportedServerSideNetworkAdaptions[f]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]===void 0?e.supportedServerSideNetworkAdaptions[f]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]:e.supportedServerSideNetworkAdaptions[f]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),r}(),a.SdkJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinAckFrame"),r.prototype.turnCredentials=null,r.prototype.videoSubscriptionLimit=0,r.prototype.wantsCompressedSdp=!1,r.prototype.defaultServerSideNetworkAdaption=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!p.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),r}(),a.SdkLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),r}(),a.SdkLeaveAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),r}(),a.SdkStreamServiceType=function(){var r={},n=Object.create(r);return n[r[1]="RX"]=1,n[r[2]="TX"]=2,n[r[3]="DUPLEX"]=3,n}(),a.SdkStreamMediaType=function(){var r={},n=Object.create(r);return n[r[1]="AUDIO"]=1,n[r[2]="VIDEO"]=2,n}(),a.SdkSubscribeFrame=function(){function r(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeFrame"),r.prototype.duplex=1,r.prototype.sendStreams=p.emptyArray,r.prototype.receiveStreamIds=p.emptyArray,r.prototype.sdpOffer="",r.prototype.audioHost="",r.prototype.audioCheckin=!1,r.prototype.audioMuted=!1,r.prototype.compressedSdpOffer=p.newBuffer([]),r.prototype.videoSubscriptionConfiguration=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)a.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!p.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!p.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!p.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||p.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=a.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?p.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=p.newBuffer(p.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=p.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?p.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),r}(),a.SdkSubscribeAckFrame=function(){function r(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeAckFrame"),r.prototype.duplex=1,r.prototype.allocations=p.emptyArray,r.prototype.sdpAnswer="",r.prototype.tracks=p.emptyArray,r.prototype.compressedSdpAnswer=p.newBuffer([]),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)a.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)a.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=a.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!p.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=a.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||p.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=a.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=a.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?p.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=p.newBuffer(p.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=p.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?p.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),r}(),a.SdkIndexFrame=function(){function r(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkIndexFrame"),r.prototype.atCapacity=!1,r.prototype.sources=p.emptyArray,r.prototype.pausedAtSourceIds=p.emptyArray,r.prototype.numParticipants=0,r.prototype.supportedReceiveCodecIntersection=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)a.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=a.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!p.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!p.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=a.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),r}(),a.SdkPauseResumeFrame=function(){function r(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPauseResumeFrame"),r.prototype.streamIds=p.emptyArray,r.prototype.groupIds=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!p.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!p.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),r}(),a.SdkBitrateFrame=function(){function r(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrateFrame"),r.prototype.bitrates=p.emptyArray,r.prototype.serverAvailableOutgoingBitrate=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)a.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=a.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!p.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=a.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),r}(),a.SdkStreamDescriptor=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDescriptor"),r.prototype.streamId=0,r.prototype.framerate=0,r.prototype.maxBitrateKbps=0,r.prototype.trackLabel="",r.prototype.groupId=0,r.prototype.avgBitrateBps=0,r.prototype.attendeeId="",r.prototype.mediaType=1,r.prototype.externalUserId="",r.prototype.width=0,r.prototype.height=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!p.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!p.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!p.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!p.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!p.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!p.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!p.isInteger(e.height)?"height: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),r}(),a.SdkStreamAllocation=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamAllocation"),r.prototype.trackLabel="",r.prototype.streamId=0,r.prototype.groupId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!p.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),r}(),a.SdkTrackMapping=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTrackMapping"),r.prototype.streamId=0,r.prototype.ssrc=0,r.prototype.trackLabel="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!p.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!p.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),r}(),a.SdkBitrate=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrate"),r.prototype.sourceStreamId=0,r.prototype.avgBitrateBps=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!p.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!p.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),r}(),a.SdkAudioControlFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioControlFrame"),r.prototype.muted=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),r}(),a.SdkAudioMetadataFrame=function(){function r(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioMetadataFrame"),r.prototype.attendeeStates=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)a.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),r}(),a.SdkAudioAttendeeState=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioAttendeeState"),r.prototype.audioStreamId=0,r.prototype.volume=0,r.prototype.muted=!1,r.prototype.signalStrength=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!p.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!p.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!p.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfoFrame=function(){function r(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfoFrame"),r.prototype.streams=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)a.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=a.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfo=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfo"),r.prototype.audioStreamId=0,r.prototype.attendeeId="",r.prototype.muted=!1,r.prototype.externalUserId="",r.prototype.dropped=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!p.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!p.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),r}(),a.SdkPingPongType=function(){var r={},n=Object.create(r);return n[r[1]="PING"]=1,n[r[2]="PONG"]=2,n}(),a.SdkPingPongFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPingPongFrame"),r.prototype.type=1,r.prototype.pingId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("type"))throw p.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw p.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return p.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),r}(),a.SdkAudioStatusFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStatusFrame"),r.prototype.audioStatus=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!p.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),r}(),a.SdkMetric=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMetric"),r.prototype.type=1,r.prototype.value=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),r}(),a.SdkStreamMetricFrame=function(){function r(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamMetricFrame"),r.prototype.streamId=0,r.prototype.groupId=0,r.prototype.metrics=p.emptyArray,r.prototype.dimensions=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)a.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)a.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=a.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=a.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=a.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=a.SdkStreamDimension.fromObject(e.dimensions[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),r}(),a.SdkClientMetricFrame=function(){function r(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientMetricFrame"),r.prototype.globalMetrics=p.emptyArray,r.prototype.streamMetricFrames=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)a.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=a.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=a.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),r}(),a.SdkStreamDimension=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDimension"),r.prototype.type=1,r.prototype.value=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=a.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),r}(),a.SdkDimensionValue=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDimensionValue"),r.prototype.stringValue="",r.prototype.boolValue=!1,r.prototype.uintValue=p.Long?p.Long.fromBits(0,0,!0):0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!p.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!p.isInteger(e.uintValue)&&!(e.uintValue&&p.isInteger(e.uintValue.low)&&p.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(p.Long?(t.uintValue=p.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new p.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,p.Long){var o=new p.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?p.Long.prototype.toString.call(e.uintValue):t.longs===Number?new p.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),r}(),a.SdkDataMessageFrame=function(){function r(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessageFrame"),r.prototype.messages=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)a.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=a.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=a.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),r}(),a.SdkDataMessagePayload=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessagePayload"),r.prototype.topic="",r.prototype.data=p.newBuffer([]),r.prototype.lifetimeMs=0,r.prototype.senderAttendeeId="",r.prototype.ingestTimeNs=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.senderExternalUserId="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!p.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||p.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!p.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!p.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!p.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&p.isInteger(e.ingestTimeNs.low)&&p.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!p.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?p.base64.decode(e.data,t.data=p.newBuffer(p.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(p.Long?(t.ingestTimeNs=p.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new p.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=p.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",p.Long){var o=new p.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?p.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?p.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new p.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),r}(),a.SdkTurnCredentials=function(){function r(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTurnCredentials"),r.prototype.username="",r.prototype.password="",r.prototype.ttl=0,r.prototype.uris=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!p.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!p.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!p.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!p.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),r}(),a.SdkTranscriptItem=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptItem"),r.prototype.content="",r.prototype.endTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.speakerAttendeeId="",r.prototype.speakerExternalUserId="",r.prototype.startTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.type=1,r.prototype.vocabularyFilterMatch=!1,r.prototype.confidence=0,r.prototype.stable=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!p.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!p.isInteger(e.endTime)&&!(e.endTime&&p.isInteger(e.endTime.low)&&p.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!p.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!p.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!p.isInteger(e.startTime)&&!(e.startTime&&p.isInteger(e.startTime.low)&&p.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(p.Long?(t.endTime=p.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(p.Long?(t.startTime=p.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",p.Long){var o=new p.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",p.Long){var o=new p.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?p.Long.prototype.toString.call(e.endTime):t.longs===Number?new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?p.Long.prototype.toString.call(e.startTime):t.longs===Number?new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),r}(),a.SdkTranscriptEntity=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptEntity"),r.prototype.category="",r.prototype.confidence=0,r.prototype.content="",r.prototype.endTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.startTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.type="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!p.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!p.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!p.isInteger(e.endTime)&&!(e.endTime&&p.isInteger(e.endTime.low)&&p.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!p.isInteger(e.startTime)&&!(e.startTime&&p.isInteger(e.startTime.low)&&p.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!p.isString(e.type)?"type: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(p.Long?(t.endTime=p.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(p.Long?(t.startTime=p.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",p.Long){var o=new p.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(p.Long){var o=new p.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?p.Long.prototype.toString.call(e.endTime):t.longs===Number?new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?p.Long.prototype.toString.call(e.startTime):t.longs===Number?new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),r}(),a.SdkTranscriptAlternative=function(){function r(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptAlternative"),r.prototype.items=p.emptyArray,r.prototype.transcript="",r.prototype.entities=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)a.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)a.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=a.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!p.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=a.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=a.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=a.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),r}(),a.SdkTranscriptLanguageWithScore=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptLanguageWithScore"),r.prototype.languageCode="",r.prototype.score=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!p.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),r}(),a.SdkTranscriptResult=function(){function r(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptResult"),r.prototype.alternatives=p.emptyArray,r.prototype.channelId="",r.prototype.endTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.isPartial=!1,r.prototype.resultId="",r.prototype.startTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.languageCode="",r.prototype.languageIdentification=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)a.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!p.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!p.isInteger(e.endTime)&&!(e.endTime&&p.isInteger(e.endTime.low)&&p.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!p.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!p.isInteger(e.startTime)&&!(e.startTime&&p.isInteger(e.startTime.low)&&p.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!p.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=a.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(p.Long?(t.endTime=p.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(p.Long?(t.startTime=p.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",p.Long){var o=new p.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",p.Long){var o=new p.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var f=0;f<e.alternatives.length;++f)i.alternatives[f]=a.SdkTranscriptAlternative.toObject(e.alternatives[f],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?p.Long.prototype.toString.call(e.endTime):t.longs===Number?new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?p.Long.prototype.toString.call(e.startTime):t.longs===Number?new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var f=0;f<e.languageIdentification.length;++f)i.languageIdentification[f]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[f],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),r}(),a.SdkTranscript=function(){function r(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscript"),r.prototype.results=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)a.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=a.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=a.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),r}(),a.SdkTranscriptionStatus=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptionStatus"),r.prototype.type=1,r.prototype.eventTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.transcriptionRegion="",r.prototype.transcriptionConfiguration="",r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!p.isInteger(e.eventTime)&&!(e.eventTime&&p.isInteger(e.eventTime.low)&&p.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!p.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!p.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!p.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(p.Long?(t.eventTime=p.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new p.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,p.Long){var o=new p.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?p.Long.prototype.toString.call(e.eventTime):t.longs===Number?new p.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),r}(),a.SdkTranscriptEvent=function(){function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}s(r,"SdkTranscriptEvent"),r.prototype.status=null,r.prototype.transcript=null;var n;return Object.defineProperty(r.prototype,"Event",{get:p.oneOfGetter(n=["status","transcript"]),set:p.oneOfSetter(n)}),r.create=s(function(t){return new r(t)},"create"),r.encode=s(function(t,i){return i||(i=m.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),r.encodeDelimited=s(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),r.decode=s(function(t,i){t instanceof h||(t=h.create(t));for(var o=i===void 0?t.len:t.pos+i,f=new a.SdkTranscriptEvent;t.pos<o;){var g=t.uint32();switch(g>>>3){case 1:{f.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{f.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(g&7);break}}return f},"decode"),r.decodeDelimited=s(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),r.verify=s(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),r.fromObject=s(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var i=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=a.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),r.toObject=s(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),r}(),a.SdkTranscriptFrame=function(){function r(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptFrame"),r.prototype.events=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)a.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=a.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=a.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),r}(),a.SdkRemoteVideoUpdateFrame=function(){function r(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkRemoteVideoUpdateFrame"),r.prototype.addedOrUpdatedVideoSubscriptions=p.emptyArray,r.prototype.removedVideoSubscriptionMids=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!p.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),r}(),a.SdkVideoQualityAdaptationPreference=function(){var r={},n=Object.create(r);return n[r[1]="BALANCED"]=1,n[r[2]="MAINTAIN_FRAMERATE"]=2,n[r[3]="MAINTAIN_RESOLUTION"]=3,n}(),a.SdkVideoSubscriptionConfiguration=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkVideoSubscriptionConfiguration"),r.prototype.mid="",r.prototype.attendeeId="",r.prototype.streamId=0,r.prototype.priority=0,r.prototype.targetBitrateKbps=0,r.prototype.groupId=0,r.prototype.qualityAdaptationPreference=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("mid"))throw p.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!p.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!p.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),r}(),a.SdkNotificationFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkNotificationFrame"),r.prototype.level=3,r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!p.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),r.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),r}(),a.SdkPrimaryMeetingJoinFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinFrame"),r.prototype.credentials=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),r}(),a.SdkMeetingSessionCredentials=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMeetingSessionCredentials"),r.prototype.attendeeId="",r.prototype.externalUserId="",r.prototype.joinToken="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!p.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!p.isString(e.joinToken)?"joinToken: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),r}(),a.SdkVideoCodecCapability=function(){var r={},n=Object.create(r);return n[r[1]="VP8"]=1,n[r[2]="H264_BASELINE_PROFILE"]=2,n[r[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[r[4]="H264_MAIN_PROFILE"]=4,n[r[5]="H264_HIGH_PROFILE"]=5,n[r[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[r[8]="VP9_PROFILE_0"]=8,n[r[11]="AV1_MAIN_PROFILE"]=11,n}(),x.exports=a,p.Long=void 0,c.configure()},7924674822:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(7288346005),p=d(9111664378),a=h(d(6885109343));let r=s(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new m.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return c(this,void 0,void 0,function*(){const f=yield this.hmac(t,"AWS4"+e),g=yield this.hmac(i,f),S=yield this.hmac(o,g);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,f,g,S){return c(this,void 0,void 0,function*(){const u=this.getDateTimeString(),v=this.getDateString(u),y="AWS4-HMAC-SHA256";let _="";this.chimeClient.config.region instanceof Function?_=yield this.chimeClient.config.region():_=this.chimeClient.config.region;const C="host",T="host:"+o.toLowerCase()+`
`,A=v+"/"+_+"/"+i+"/aws4_request";let O;this.chimeClient.config.credentials instanceof Function?O=yield this.chimeClient.config.credentials():O=this.chimeClient.config.credentials;let D=new Map;D.set("X-Amz-Algorithm",[y]),D.set("X-Amz-Credential",[encodeURIComponent(O.accessKeyId+"/"+A)]),D.set("X-Amz-Date",[u]),D.set("X-Amz-Expires",["10"]),D.set("X-Amz-SignedHeaders",["host"]),O.sessionToken&&D.set("X-Amz-Security-Token",[encodeURIComponent(O.sessionToken)]),D.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),D.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((ne,ie)=>{const pe=encodeURIComponent(ie);ne.sort().forEach(Ee=>{D.has(pe)||D.set(pe,[]),D.get(pe).push(encodeURIComponent(Ee))})});let M="";D=new Map([...D.entries()].sort()),D.forEach((ne,ie)=>{ne.forEach(pe=>{M.length&&(M+="&"),M+=ie+"="+pe})});const R=e+`
`+f+`
`+M+`
`+T+`
`+C+`
`+p.toHex(yield this.hmac(g)),F=p.toHex(yield this.hmac(R)),V=`AWS4-HMAC-SHA256
`+u+`
`+v+"/"+_+"/"+i+`/aws4_request
`+F,$=yield this.getSignatureKey(O.secretAccessKey,v,_,i),X=p.toHex(yield this.hmac(V,$)),Y=M+"&X-Amz-Signature="+X;return t+"://"+o+f+"?"+Y})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=r},9131051489:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var d;(function(c){c[c.Low=0]="Low",c[c.LowAndMedium=1]="LowAndMedium",c[c.LowAndHigh=2]="LowAndHigh",c[c.Medium=3]="Medium",c[c.MediumAndHigh=4]="MediumAndHigh",c[c.High=5]="High"})(d=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=d},4882678815:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var d;(function(c){c[c.DeviceChanged=0]="DeviceChanged",c[c.MutedLocal=1]="MutedLocal",c[c.UnmutedLocal=2]="UnmutedLocal",c[c.Connected=3]="Connected",c[c.ConnectFailed=4]="ConnectFailed",c[c.RedmicStartLoss=5]="RedmicStartLoss",c[c.RedmicEndLoss=6]="RedmicEndLoss"})(d=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=d},4562177071:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(v,y,_,C){function T(A){return A instanceof _?A:new _(function(O){O(A)})}return s(T,"adopt"),new(_||(_=Promise))(function(A,O){function D(F){try{R(C.next(F))}catch(V){O(V)}}s(D,"fulfilled");function M(F){try{R(C.throw(F))}catch(V){O(V)}}s(M,"rejected");function R(F){F.done?A(F.value):T(F.value).then(D,M)}s(R,"step"),R((C=C.apply(v,y||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9029233041)),p=h(d(6502873558)),a=h(d(6132421099)),r=h(d(3237015968)),n=h(d(6172292806)),e=h(d(2234819701)),t=h(d(546597810)),i=h(d(9877075638)),o=d(4136617125),f=d(6527539809),g=h(d(4882678815)),S=h(d(1404048602));let u=s(class du{toAttribute(y){return this.toSuffix(y).substring(1)}toSuffix(y){return y.toLowerCase()===y?`_${y}`:y.toUpperCase()===y?`_${y.toLowerCase()}`:y.replace(/([A-Z][a-z]+)/g,function(_){return`_${_}`}).replace(/([A-Z][A-Z]+)/g,function(_){return`_${_}`}).toLowerCase()}logLatency(y,_,C){const T=this.toSuffix(y);this.logEventTime("meeting"+T,_,C)}logStateTimeout(y,_){const C=this.toSuffix(y);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},_),{state:`state${C}`}))}logAudioEvent(y,_){const C="audio"+this.toSuffix(g.default[y]);this.logEvent(C,_)}logVideoEvent(y,_){const C="video"+this.toSuffix(S.default[y]);this.logEvent(C,_)}logEventTime(y,_){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const T=Object.assign(Object.assign({},C),{call_id:this.audioVideoController.configuration.meetingId,client_type:du.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${y}: ${JSON.stringify(T)}`),this.metricsAddTime(y,_,T)}logMeetingSessionStatus(y){const _=`${y.statusCode()}`;this.logEvent(_);const C={status:_,status_code:`${y.statusCode()}`};this.logEvent("meeting_session_status",C),y.isTerminal()&&this.logEvent("meeting_session_stopped",C),y.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",C),y.isFailure()&&this.logEvent("meeting_session_failed",C)}logLifecycleEvent(y,_){const C={lifecycle_event:`lifecycle${this.toSuffix(e.default[y])}`,lifecycle_event_code:`${y}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[_])}`,lifecycle_event_condition_code:`${_}`};this.logEvent("meeting_session_lifecycle",C)}logEvent(y){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const C=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:du.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${y}: ${JSON.stringify(C)}`),this.metricsLogEvent(y,C)}start(y,_){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=y,this.videoStreamIndex=_,this.clientMetricReport=new m.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>c(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(y,_){const C=_?this.clientMetricReport.streamMetricReports[Number(y.ssrc)]:this.clientMetricReport.globalMetricReport;let T;_?T=this.clientMetricReport.getMetricMap(C.mediaType,C.direction):T=this.clientMetricReport.getMetricMap();for(const A in y)A in T&&(typeof y[A]=="number"?(C.previousMetrics[A]=C.currentMetrics[A],C.currentMetrics[A]=y[A]):typeof y[A]=="string"?C.currentStringMetrics[A]=y[A]:typeof y[A]=="object"?(C.previousObjectMetrics[A]=C.currentObjectMetrics[A]===void 0?y[A]:C.currentObjectMetrics[A],C.currentObjectMetrics[A]=y[A]):this.logger.error(`Unknown metric value type ${typeof y[A]} for metric ${A}`))}processRawMetricReports(y){this.clientMetricReport.currentSsrcs={};const _=Date.now();for(const C of y){const T=this.isStreamRawMetricReport(C.type);if(T){const A=this.clientMetricReport.streamMetricReports[Number(C.ssrc)];if(A)A.mediaType===a.default.VIDEO&&A.direction===p.default.UPSTREAM?A.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(C.rid):A.streamId=this.videoStreamIndex.streamIdForSSRC(Number(C.ssrc));else{const O=new n.default;O.mediaType=this.getMediaType(C),O.direction=this.getDirectionType(C),O.mediaType===a.default.VIDEO&&O.direction===p.default.UPSTREAM?O.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(C.rid):this.videoStreamIndex.allStreams().empty()||(O.streamId=this.videoStreamIndex.streamIdForSSRC(Number(C.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(O.groupId=this.videoStreamIndex.groupIdForSSRC(Number(C.ssrc)))),this.clientMetricReport.streamMetricReports[Number(C.ssrc)]=O}this.clientMetricReport.currentSsrcs[Number(C.ssrc)]=1}this.updateMetricValues(C,T)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=_,this.clientMetricReport.print()}addStreamMetricDimensionFrames(y,_){const C=this.clientMetricReport.getStreamDimensionMap();for(const T in _.currentStringMetrics)if(T in C){const A=o.SdkStreamDimension.create();A.type=C[T];const O=o.SdkDimensionValue.create();O.stringValue=_.currentStringMetrics[T],A.value=O,y.dimensions.push(A)}}addMetricFrame(y,_,C,T){const A=C.type,O=C.transform,D=C.source,M=_.streamMetricFrames.length,R=_.streamMetricFrames[M-1];if(A){const F=o.SdkMetric.create();F.type=A,F.value=O(D||y,T),T?R.metrics.push(F):_.globalMetrics.push(F)}}addGlobalMetricsToProtobuf(y){const _=this.clientMetricReport.getMetricMap();for(const C in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(C,y,_[C])}addStreamMetricsToProtobuf(y){for(const _ in this.clientMetricReport.streamMetricReports){const C=this.clientMetricReport.streamMetricReports[_],T=o.SdkStreamMetricFrame.create();T.streamId=C.streamId,T.metrics=[],this.addStreamMetricDimensionFrames(T,C),y.streamMetricFrames.push(T);const A=this.clientMetricReport.getMetricMap(C.mediaType,C.direction);for(const O in C.currentMetrics)this.addMetricFrame(O,y,A[O],Number(_));for(const O in C.currentStringMetrics)this.addMetricFrame(O,y,A[O],Number(_));for(const O in C.currentObjectMetrics)this.addMetricFrame(O,y,A[O],Number(_))}}makeClientMetricProtobuf(){const y=o.SdkClientMetricFrame.create();return y.globalMetrics=[],y.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(y),this.addStreamMetricsToProtobuf(y),y}sendClientMetricProtobuf(y){this.signalingClient.sendClientMetrics(y)}isStreamRawMetricReport(y){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(y)}getMediaType(y){return y.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(y){const{type:_}=y;return _==="inbound-rtp"||_==="remote-outbound-rtp"||_==="inbound-rtp-red"?p.default.DOWNSTREAM:p.default.UPSTREAM}isValidStandardRawMetric(y){return y.type==="inbound-rtp"||y.type==="inbound-rtp-red"||y.type==="outbound-rtp"||y.type==="remote-inbound-rtp"||y.type==="remote-outbound-rtp"||y.type==="candidate-pair"&&y.state==="succeeded"||y.type==="media-source"&&y.kind==="audio"}isValidSsrc(y){let _=!0;return this.isStreamRawMetricReport(y.type)&&this.getDirectionType(y)===p.default.DOWNSTREAM&&this.getMediaType(y)===a.default.VIDEO&&(_=this.videoStreamIndex.streamIdForSSRC(Number(y.ssrc))>0),_}isValidRawMetricReport(y){return this.isValidStandardRawMetric(y)&&this.isValidSsrc(y)}filterRawMetricReports(y){const _=[];for(const C of y)this.isValidRawMetricReport(C)&&_.push(C);return _}handleRawMetricReports(y){const _=this.filterRawMetricReports(y);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(_)}`);const C=[];this.maybeAddRedRecoveryMetrics(C),this.addVideoCodecDegradationMetrics(C),this.clientMetricReport.customStatsReports=C,_.push(...C),this.processRawMetricReports(_);const T=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(T),this.audioVideoController.forEachObserver(A=>{f.Maybe.of(A.metricsDidReceive).map(O=>O.bind(A)(this.clientMetricReport.clone()))})}getStatsWrapper(){return c(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const y=[];try{const _=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=_,_.forEach(C=>{y.push(C)}),this.handleRawMetricReports(y)}catch(_){this.logger.error(_.message)}})}overrideObservableMetric(y,_){this.clientMetricReport.overrideObservableMetric(y,_)}recoveryMetricsDidReceive(y){this.redRecoveryMetricReport=y}maybeAddRedRecoveryMetrics(y){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(y.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(y){const _=this.clientMetricReport.getVideoUpstreamSsrc();_!==null&&y.push({kind:"video",type:"outbound-rtp",ssrc:_,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(y,_,C=du.INTERVAL_MS){this.audioVideoController=y,this.logger=_,this.interval=C,this.intervalScheduler=null,this.redRecoveryMetricReport=new r.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(T,A,O)=>{},this.metricsLogEvent=(T,A)=>{}}},"StatsCollector");l.default=u,u.INTERVAL_MS=1e3,u.CLIENT_TYPE="amazon-chime-sdk-js"},1404048602:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var d;(function(c){c[c.InputAttached=0]="InputAttached",c[c.SendingFailed=1]="SendingFailed",c[c.SendingSuccess=2]="SendingSuccess"})(d=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=d},4713678292:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1404048602)),p=h(d(5009059128));let a=s(class extends p.default{run(){return c(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const f=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(f)}o&&this.context.statsCollector.logVideoEvent(m.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(f=>f.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const f=i[o];i.splice(o,1),e?(i.unshift(f),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},5009059128:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7537135456)),p=h(d(6013191119));let a=s(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new m.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return c(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case p.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case p.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case p.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=p.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==p.default.CANCELED&&(this.status=p.default.FINISHED)}})}baseCancel(n){if(this.status===p.default.CANCELED||this.status===p.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=p.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=p.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},9089081530:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5009059128));let p=s(class extends m.default{run(){return c(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(r){super(r.logger),this.context=r,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=p},5703332651:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7969706599)),p=h(d(5009059128));let a=s(class extends p.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=s(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(f){f.type===m.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(f){this.signalingClient=f}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},9049733277:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5009059128));let p=s(class extends m.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const r in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[r]()}addPeerConnectionEventLogger(){const r=this.context.peer;r.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${r.connectionState}`)}),r.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),r.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${r.iceGatheringState}`)}),r.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),r.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${r.iceConnectionState}`)})}run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(r){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(r)):!1}addRemoteVideoTrack(r,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,f;if(this.context.videoTileController.getVideoTileForAttendeeId?(f=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=f==null?void 0:f.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}f||(f=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${f.id()}`));let g=this.context.videoStreamIndex.streamIdForTrack(t);typeof g>"u"&&(this.logger.warn(`stream not found for tile=${f.id()} track=${t}`),g=null);let S=this.context.videoStreamIndex.groupIdForStreamId(g);S===void 0&&(S=null);for(let A=0;A<this.trackEvents.length;A++){const O=this.trackEvents[A],D=n.getVideoTracks();if(D&&D.length){const M=D[0],R=s(()=>{this.context.logger.info(`received the ${O} event for tile=${f.id()} id=${r.id} streamId=${g}`),O==="ended"&&this.removeRemoteVideoTrack(r,f.state())},"callback");M.addEventListener(O,R),this.removeVideoTrackEventListeners[r.id]||(this.removeVideoTrackEventListeners[r.id]=[]),this.removeVideoTrackEventListeners[r.id].push(()=>{M.removeEventListener(O,R)})}}let u,v;if(r.getSettings){const A=r.getSettings();u=A.width,v=A.height}else{const A=r.getCapabilities();u=A.width,v=A.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);f.bindVideoStream(i,!1,n,u,v,g,y,S),this.logger.info(`video track added, use tile=${f.id()} track=${t} streamId=${g} groupId=${S}`);const _="removetrack",C=n,T=s(()=>this.removeRemoteVideoTrack(r,f.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[r.id]=()=>{C.removeEventListener(_,T),delete this.removeTrackRemovedEventListeners[r.id]},C.addEventListener(_,T)}removeRemoteVideoTrack(r,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(r.id)){this.removeTrackRemovedEventListeners[r.id]();for(const e of this.removeVideoTrackEventListeners[r.id])e();delete this.removeVideoTrackEventListeners[r.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${r.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(r){super(r.logger),this.context=r,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=p,p.REMOVE_HANDLER_INTERVAL_MS=1e4},4708498556:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9447989038)),p=h(d(182939685)),a=h(d(5009059128));let r=s(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return c(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>c(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new p.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=r},2635066756:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9447989038)),p=h(d(182939685)),a=h(d(5009059128));let r=s(class dS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return c(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new p.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new p.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(p.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new p.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=dS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=r,r.CHROME_VPN_TIMEOUT_MS=5e3},9488451395:function(x,l,d){"use strict";var c=this&&this.__createBinding||(Object.create?function(u,v,y,_){_===void 0&&(_=y),Object.defineProperty(u,_,{enumerable:!0,get:function(){return v[y]}})}:function(u,v,y,_){_===void 0&&(_=y),u[_]=v[y]}),h=this&&this.__setModuleDefault||(Object.create?function(u,v){Object.defineProperty(u,"default",{enumerable:!0,value:v})}:function(u,v){u.default=v}),m=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var v={};if(u!=null)for(var y in u)y!=="default"&&Object.prototype.hasOwnProperty.call(u,y)&&c(v,u,y);return h(v,u),v},p=this&&this.__awaiter||function(u,v,y,_){function C(T){return T instanceof y?T:new y(function(A){A(T)})}return s(C,"adopt"),new(y||(y=Promise))(function(T,A){function O(R){try{M(_.next(R))}catch(F){A(F)}}s(O,"fulfilled");function D(R){try{M(_.throw(R))}catch(F){A(F)}}s(D,"rejected");function M(R){R.done?T(R.value):C(R.value).then(O,D)}s(M,"step"),M((_=_.apply(u,v||[])).next())})},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(d(7551081659)),n=a(d(9447989038)),e=a(d(4943767904)),t=m(d(5393388022)),i=a(d(7969706599)),o=a(d(3867485289)),f=d(4136617125),g=a(d(5009059128));let S=s(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return p(this,void 0,void 0,function*(){const v=yield new Promise((y,_)=>{const C=this.context;C.turnCredentials=null;let T=s(class{cancel(){this.signalingClient.removeObserver(this),_(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(M){if(M.type===i.default.WebSocketClosed){let F=`The signaling connection was closed with code ${M.closeCode} and reason: ${M.closeReason}`;C.logger.warn(F);let V=n.default.SignalingBadRequest;M.closeCode===4410?(F="The meeting already ended.",C.logger.warn(F),V=n.default.MeetingEnded):M.closeCode>=4500&&M.closeCode<4600&&(V=n.default.SignalingInternalServerError),C.audioVideoController.handleMeetingSessionStatus(new r.default(V),new Error(F));return}if(M.type!==i.default.ReceivedSignalFrame)return;if(M.message.type===f.SdkSignalFrame.Type.JOIN_ACK){const F=M.message.joinack;if(!F){C.audioVideoController.handleMeetingSessionStatus(new r.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(F.videoSubscriptionLimit&&(C.videoSubscriptionLimit=F.videoSubscriptionLimit),C.serverSupportsCompression=F.wantsCompressedSdp,F.defaultServerSideNetworkAdaption!==void 0&&F.defaultServerSideNetworkAdaption!==t.default.Default&&C.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const V=F.defaultServerSideNetworkAdaption;C.logger.info(`Overriding server side network adaption value to ${V}`),C.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(V))}F&&F.turnCredentials?(C.turnCredentials=new e.default,C.turnCredentials.username=F.turnCredentials.username,C.turnCredentials.password=F.turnCredentials.password,C.turnCredentials.ttl=F.turnCredentials.ttl,C.turnCredentials.uris=F.turnCredentials.uris.map(V=>C.meetingSessionConfiguration.urls.urlRewriter(V)).filter(V=>!!V)):C.logger.error("missing TURN credentials in JoinAckFrame");return}if(M.message.type!==f.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const R=M.message.index;y(R)}constructor(M){this.signalingClient=M}},"IndexFrameInterceptor");const A=new T(this.context.signalingClient);this.context.signalingClient.registerObserver(A),this.taskCanceler=A,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const O=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(O.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),O.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(O.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),O.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(O)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},9638153336:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7969706599)),p=d(4136617125),a=h(d(5009059128));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=s(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(g){if(g.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}g.type===m.default.ReceivedSignalFrame&&g.message.type===p.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(g,S){this.signalingClient=g,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=r},7966229607:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7969706599)),p=d(4136617125),a=h(d(5009059128));let r=s(class extends a.default{run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===m.default.ReceivedSignalFrame){if(e.message.type===p.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===p.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=r},1614136239:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(_,C,T,A){function O(D){return D instanceof T?D:new T(function(M){M(D)})}return s(O,"adopt"),new(T||(T=Promise))(function(D,M){function R($){try{V(A.next($))}catch(X){M(X)}}s(R,"fulfilled");function F($){try{V(A.throw($))}catch(X){M(X)}}s(F,"rejected");function V($){$.done?D($.value):O($.value).then(R,F)}s(V,"step"),V((A=A.apply(_,C||[])).next())})},h=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6502873558)),p=h(d(6132421099)),a=h(d(5850044630)),r=h(d(4866586987)),n=h(d(174963938)),e=h(d(3334420728)),t=h(d(7551081659)),i=h(d(9447989038)),o=h(d(8804723777)),f=h(d(7969706599)),g=d(4136617125),S=h(d(4882678815)),u=d(6527539809),v=h(d(5009059128));let y=s(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(C){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(C){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=C;return}else this.pendingMetricsReport=void 0;const T=C.getObservableMetrics(),A=T.availableOutgoingBitrate,O=T.nackCountReceivedPerSecond;let D=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(C);const M=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(D=D||M,M){const R=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=R.truncate(this.context.videoSubscriptionLimit),R.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${M}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:A/1e3,nackCountPerSecond:O});const R=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();D=D||R,R&&(this.logger.info(`trigger resubscribe for up=${R}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return D}metricsDidReceive(C){if(this.checkResubscribe(C)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const T=C.streamMetricReports,A=new Map;for(const O in T)T[O].mediaType===p.default.VIDEO&&T[O].direction===m.default.DOWNSTREAM&&A.set(T[O].streamId,T[O])}connectionHealthDidChange(C){C.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,C,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,C,()=>{var T;this.context.poorConnectionCount+=1;const A=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("receivingAudioDropped",A),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(O=>{u.Maybe.of(O.connectionDidSuggestStopVideo).map(D=>D.bind(O)())}):this.context.audioVideoController.forEachObserver(O=>{u.Maybe.of(O.connectionDidBecomePoor).map(D=>D.bind(O)())})},()=>{this.context.audioVideoController.forEachObserver(T=>{u.Maybe.of(T.connectionDidBecomeGood).map(A=>A.bind(T)())})});for(const T of this.videoEncodingHealthPolicies)this.applyHealthPolicy(T,C,()=>{switch(this.degradeVideoCodec(T.name),T.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,C,()=>{var T;const A=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioFailed",A)},()=>{var T;const A=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioRecovered",A)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(C){this.isMeetingConnected=!1}audioVideoDidStop(C){this.isMeetingConnected=!1}applyHealthPolicy(C,T,A,O){C.update(T);const D=C.healthIfChanged();D!==null&&(this.logger.info(`${C.name} value is now ${D}`),D<=C.minimumHealth()?u.Maybe.of(A).map(M=>M.bind(this)()):u.Maybe.of(O).map(M=>M.bind(this)()))}handleBitrateFrame(C){this.currentAvailableStreamAvgBitrates=C,C.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${C.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",C.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(C){var T;if(C.type===f.default.WebSocketClosed&&(C.closeCode===4410||C.closeCode>=4500&&C.closeCode<4600)||C.type===f.default.WebSocketError||C.type===f.default.WebSocketFailed){if(!this.hasSignalingError){const A=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("signalingDropped",A),this.hasSignalingError=!0}}else C.type===f.default.WebSocketOpen&&(this.hasSignalingError=!1);if(C.type===f.default.ReceivedSignalFrame){if(C.message.type===g.SdkSignalFrame.Type.NOTIFICATION){switch(C.message.notification.level){case g.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${C.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${C.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${C.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${C.message.notification.level}: ${C.message.notification.message}`);break}return}if(C.message.bitrates){const O=C.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(O),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(C.message.bitrates)}const A=t.default.fromSignalFrame(C.message);C.message.type!==g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&A.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(A,null)}}degradeVideoCodec(C){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const T=[];for(const A of this.context.videoSendCodecPreferences)A.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||T.push(A);T.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${T[0].codecName} due to ${C}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=T,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(A=>A.codecName).join(",")}`)}}constructor(C,T,A){super(C.logger),this.context=C,this.initialConnectionHealthData=A,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=O=>{const D=O<1,M=this.prevSignalStrength<1,R=D?M?null:S.default.RedmicStartLoss:M?S.default.RedmicEndLoss:null;R&&this.context.statsCollector.logAudioEvent(R),this.prevSignalStrength=O},this.realtimeFatalErrorCallback=O=>{this.logger.error(`realtime error: ${O}: ${O.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),O)},this.realtimeAttendeeIdPresenceHandler=(O,D)=>{var M;const R=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${R}`),R===O&&D&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(M=this.context.eventController)===null||M===void 0||M.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:O,startTimeMs:D,iceGatheringDurationMs:M,attendeePresenceDurationMs:R,meetingStartDurationMs:F}=this.context;return{meetingDurationMs:D===null?0:Math.round(Date.now()-D),signalingOpenDurationMs:O,iceGatheringDurationMs:M,attendeePresenceDurationMs:R,meetingStartDurationMs:F}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const O=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},O),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(C.logger,Object.assign({},T),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},T),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new r.default(C.logger,Object.assign({},T),this.initialConnectionHealthData.clone());for(const O of T.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new O(Object.assign({},T),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=y},5628139313:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(h){}},"NoOpTask");l.default=d},7537135456:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1370928943)),m=c(d(9649641385));let p=s(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const r of this.dependencies)r.cancel();this.logger.info(`Canceling ${this.name()}`),m.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&m.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const r=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${r}`)}run(){if(this.promise)return this.promise;const r=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=r.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(r){this.task.setParent(r)}constructor(r,n,e){this.logger=r,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=p},3292077469:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7263318766)),p=h(d(7969706599)),a=h(d(5009059128));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new m.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let f=s(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(u){switch(u.type){case p.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case p.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(u){this.signalingClient=u}},"WebSocketOpenInterceptor");const g=new f(this.context.signalingClient);this.context.signalingClient.registerObserver(g),this.taskCanceler=g})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=r},6085879951:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5009059128));let p=s(class extends m.default{cancel(){for(const r of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${r.name()}`),r.cancel()}run(){return c(this,void 0,void 0,function*(){const r=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),r.push(e.run());const n=[];for(let e=0;e<r.length;e++){try{yield r[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(r,n,e){super(r),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=p},9588672479:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(3305135794),p=h(d(7969706599)),a=d(4136617125),r=h(d(5009059128));let n=s(class extends r.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=s(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===p.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(m.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,u,v){this.signalingClient=S,this.completionCallback=u,this.logger=v}},"Interceptor");const f=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=f,this.context.signalingClient.registerObserver(f)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=n},9531998674:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5009059128));let p=s(class extends m.default{run(){var r,n;return c(this,void 0,void 0,function*(){if(!(!((n=(r=this.context.meetingSessionConfiguration)===null||r===void 0?void 0:r.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(r){super(r.logger),this.context=r,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=p},587698570:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7969706599)),p=d(4136617125),a=h(d(5009059128));let r=s(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return c(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const i of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(i);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${i}`);continue}let f=this.context.videoTileController.getVideoTileForAttendeeId(o);f===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${i}. Creating new one.`),f=this.context.videoTileController.addVideoTile(),f.bindVideoStream(o,!1,null,0,0,0,null)),t.add(f.id())}this.serverPausedVideoTileIds.forEach(i=>{t.has(i)||this.serverPausedVideoTileIds.delete(i)})}handleSignalingClientEvent(e){if(e.type!==m.default.ReceivedSignalFrame||e.message.type!==p.SdkSignalFrame.Type.PAUSE&&e.message.type!==p.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.logger.info(`Received new ${i===p.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(f=>{const g=this.context.videoStreamIndex.attendeeIdForGroupId(f);if(g.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${f}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(g)});for(const f of o)f!==void 0&&(i===p.SdkSignalFrame.Type.PAUSE?f.state().paused||(this.serverPausedVideoTileIds.add(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBePausedByDownlinkPolicy(f.id())}),f.pause()):f.state().paused&&this.serverPausedVideoTileIds.has(f.id())&&(this.serverPausedVideoTileIds.delete(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBeUnpausedByDownlinkPolicy(f.id())}),f.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=r},86955145:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8006173476)),p=d(4136617125),a=h(d(5009059128));let r=s(class extends a.default{checkAndApplyVideoConstraint(e,t,i,o,f){return c(this,void 0,void 0,function*(){const g=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,i>S.videoWidth||o>S.videoHeight||f>S.videoFrameRate){const u={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(u)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(g)}`);try{yield t.applyConstraints(u)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return c(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===p.SdkStreamServiceType.RX||this.context.videoDuplexMode===p.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?p.SdkStreamServiceType.DUPLEX:p.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?p.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const f=this.context.meetingSessionConfiguration.credentials.attendeeId,g=new m.default(f).hasModality(m.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(g,o[0],S.width,S.height,S.frameRate);const u=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(f,!0,i,S.width,S.height,null,u);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=r},8297256329:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(o,f,g,S){function u(v){return v instanceof g?v:new g(function(y){y(v)})}return s(u,"adopt"),new(g||(g=Promise))(function(v,y){function _(A){try{T(S.next(A))}catch(O){y(O)}}s(_,"fulfilled");function C(A){try{T(S.throw(A))}catch(O){y(O)}}s(C,"rejected");function T(A){A.done?v(A.value):u(A.value).then(_,C)}s(T,"step"),T((S=S.apply(o,f||[])).next())})},h=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(488357679)),p=h(d(8006173476)),a=h(d(8804723777)),r=h(d(7969706599)),n=d(4136617125),e=d(6527539809),t=h(d(5009059128));let i=s(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return c(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(f){if(f.type!==r.default.ReceivedSignalFrame||f.message.type!==n.SdkSignalFrame.Type.INDEX)return;const g=f.message.index;this.context.logger.info(`received new index ${JSON.stringify(g)}`),this.handleIndexFrame(g)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(f){if(!f)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=f;return}else this.pendingIndex=null;const g=this.context.audioVideoController.configuration.credentials.attendeeId;f.sources=f.sources.filter(C=>{const T=new p.default(C.attendeeId);return!(T.base()===g&&T.hasModality(p.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:u,videoUplinkBandwidthPolicy:v}=this.context,y=S.allVideoSendingSourcesExcludingSelf(g);S.integrateIndexFrame(f),u.updateIndex(S),v.updateIndex(S),this.resubscribe(u,v),this.updateVideoAvailability(f),this.handleIndexVideosPausedAtSource(),f.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(f);const _=S.allVideoSendingSourcesExcludingSelf(g);this.areVideoSourcesEqual(y,_)||this.context.audioVideoController.forEachObserver(C=>{e.Maybe.of(C.remoteVideoSourcesDidChange).map(T=>T.bind(C)(_))})}areVideoSourcesEqual(f,g){if(f.length!==g.length)return!1;const S=s((y,_)=>y.attendee.attendeeId.localeCompare(_.attendee.attendeeId),"compare"),u=[...f].sort(S),v=[...g].sort(S);for(let y=0;y<u.length;y++)if(u[y].attendee.attendeeId!==v[y].attendee.attendeeId)return!1;return!0}resubscribe(f,g){const S=f.wantsResubscribe(),u=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&g.wantsResubscribe(),v=S||u;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${u})`),!v)return;const y=f.chooseSubscriptions();this.context.videosToReceive=y.truncate(this.context.videoSubscriptionLimit),y.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=g.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${u} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(f){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const g=new m.default;g.remoteVideoAvailable=!this.context.videosToReceive.empty(),g.canStartLocalVideo=!f.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(g))&&(this.context.lastKnownVideoAvailability=g.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(u=>u.bind(S)(g.clone()))}))}handleSupportedVideoReceiveCodecIntersection(f){if(this.context.videoSendCodecPreferences===void 0)return;const g=[];let S=!1;for(const u of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>u.equals(v))){this.logger.info(`Skipping ${u.codecName} since the codec has been identfied as degraded`);continue}for(const v of f.supportedReceiveCodecIntersection)if(u.equals(a.default.fromSignaled(v))){g.push(u);break}}if(g.length>0){const u=g.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(y=>v.equals(y)));this.context.currentVideoSendCodec!==void 0&&(u===void 0||!this.context.currentVideoSendCodec.equals(u))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=g}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const f=this.context.videoStreamIndex.streamsPausedAtSource();for(const g of this.context.videoTileController.getAllVideoTiles()){const S=g.state();f.contain(S.streamId)?g.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):g.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(f){super(f.logger),this.context=f,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=i},457099596:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5009059128));let m=s(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,r,n="RunnableTask"){super(a),this.fn=r,this.taskName=n}},"RunnableTask");l.default=m},7680112541:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9091803745)),p=h(d(7969706599)),a=d(4136617125),r=h(d(5009059128));let n=s(class Fh extends r.default{run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===p.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new m.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!Fh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>Fh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,f)=>{if(this.context.signalingClient.ready()){let g;o instanceof Uint8Array?g=o:typeof o=="string"?g=new TextEncoder().encode(o):g=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,g,f);const S=a.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=f,S.data=g;const u=a.SdkDataMessageFrame.create();u.messages=[S],this.context.signalingClient.sendDataMessage(u)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},8872868578:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5009059128)),p=h(d(6013191119));let a=s(class extends m.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return c(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===p.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");l.default=a},5976676062:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5546774952)),p=h(d(8006173476)),a=h(d(182939685)),r=h(d(5009059128));let n=s(class extends r.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return c(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new a.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new a.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new m.default().requiresDisablingH264Encoding()&&(o=new a.default(o).removeH264SupportFromSendSection().sdp);const f=this.context.audioVideoController.configuration.credentials.attendeeId;if(new p.default(f).hasModality(p.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new a.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new a.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new a.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new a.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const u=new a.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(u)}this.logger.debug(()=>`local description is >>>${o}<<<`);const S={type:"offer",sdp:o,toJSON:null};yield new Promise((u,v)=>c(this,void 0,void 0,function*(){this.cancelPromise=y=>{v(y)};try{yield t.setLocalDescription(S),u()}catch(y){v(y)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=n},339097629:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8006173476)),p=h(d(182939685)),a=h(d(8804723777)),r=h(d(5009059128));let n=s(class extends r.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return c(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new p.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new p.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new p.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new p.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new p.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const f=this.context.activeVideoInput;if(f!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,u=new m.default(S).hasModality(m.default.MODALITY_CONTENT),v=f.getVideoTracks()[0];u&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const g={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(g)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>c(this,void 0,void 0,function*(){const f=s(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",f),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",f),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",f);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),f()}catch(g){o(g)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=n},3248483798:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(S,u,v,y){function _(C){return C instanceof v?C:new v(function(T){T(C)})}return s(_,"adopt"),new(v||(v=Promise))(function(C,T){function A(M){try{D(y.next(M))}catch(R){T(R)}}s(A,"fulfilled");function O(M){try{D(y.throw(M))}catch(R){T(R)}}s(O,"rejected");function D(M){M.done?C(M.value):_(M.value).then(A,O)}s(D,"step"),D((y=y.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7551081659)),p=h(d(9447989038)),a=h(d(182939685)),r=h(d(3475297719)),n=d(5393388022),e=h(d(7969706599)),t=h(d(3735795291)),i=d(4136617125),o=d(8071414974),f=h(d(5009059128));let g=s(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){let u="";if(this.context.peer&&this.context.peer.localDescription&&(u=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let D=0,M=0;this.context.videoCaptureAndEncodeParameter&&(D=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),M=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const R={rid:"hi",maxBitrate:M*1e3,maxFramerate:D,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([R])}const v=this.fixUpSubscriptionOrder(u,this.context.videoSubscriptions),y=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let _,C=u;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(C=new a.default(C).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const D=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";_=this.textCompressor.compress(C,D),this.context.logger.info(`Compressed the SDP message from ${C.length} to ${_.length} bytes.`),u=""}this.context.previousSdpOffer=new a.default(u);const T=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,u,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,y,this.context.videoStreamIndex.localStreamDescriptions(),!0,_);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(T.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(D=>D===0?0:this.context.videoStreamIndex.groupIdForStreamId(D)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(T)}`),this.context.signalingClient.subscribe(T);const A=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(A)}`);let O="";A.compressedSdpAnswer&&A.compressedSdpAnswer.length?(O=this.textCompressor.decompress(A.compressedSdpAnswer,this.context.previousSdpAnswerAsString),O.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${A.compressedSdpAnswer.length} to ${O.length} bytes.`),this.context.sdpAnswer=O):this.context.sdpAnswer=A.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(A)})}fixUpSubscriptionOrder(u,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const y=new Map;for(const T of v){const A=this.context.transceiverController.getMidForStreamId(T);if(A===void 0){T!==0&&this.logger.warn(`Could not find MID for stream ID: ${T}`);continue}y.set(A,T)}const _=new a.default(u).mediaSections(),C=[];for(const T of _)if(T.mediaType==="video")if(T.direction==="recvonly"){const A=y.get(T.mid);if(A===void 0){this.logger.warn(`Could not find stream ID for MID: ${T.mid}`);continue}C.push(A)}else C.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(C)} (may be same))}`),C}receiveSubscribeAck(){return new Promise((u,v)=>{const y=this.context;let _=s(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(A){if(A.isConnectionTerminated()){const D=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${A.closeCode} and reason: ${A.closeReason}`;y.logger.warn(D);let M=p.default.TaskFailed;A.closeCode>=4500&&A.closeCode<4600&&(M=p.default.SignalingInternalServerError),y.audioVideoController.handleMeetingSessionStatus(new m.default(M),new Error(D));return}if(A.type!==e.default.ReceivedSignalFrame||A.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const O=A.message.suback;u(O)}constructor(A){this.signalingClient=A}},"Interceptor");const C=new _(this.context.signalingClient);this.context.signalingClient.registerObserver(C),this.taskCanceler=C})}constructor(u){super(u.logger),this.context=u,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new r.default(u.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=g},6013191119:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.IDLE="IDLE",c.RUNNING="RUNNING",c.CANCELED="CANCELED",c.FINISHED="FINISHED"})(d||(d={})),l.default=d},7638277718:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5824864644)),p=h(d(5009059128));let a=s(class extends p.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return c(this,void 0,void 0,function*(){const n=new m.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},4098780146:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9447989038)),p=h(d(5009059128));let a=s(class extends p.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return c(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=s((o,f,g,S,u)=>{n===o&&f&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},2392158736:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5983965185)),p=h(d(3237015968)),a=h(d(3937896393)),r=h(d(9337558969)),n=h(d(9649641385));let e=s(class{setEncodingParameters(i){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const f=Array.from(i.values()),g=o.getParameters();if(!g.encodings||g.encodings.length===0)g.encodings=f;else for(const S of g.encodings)for(const u of f){if((S.rid||u.rid)&&S.rid!==u.rid)continue;let v;for(v in u)v==="rid"||v==="codecPayloadType"||u.hasOwnProperty(v)&&(S[v]=u[v])}yield o.setParameters(g)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const f=o.getParameters();f.encodings||(f.encodings=[{}]);for(const g of f.encodings)g.maxBitrate=i*1e3;yield o.setParameters(f)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return c(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return c(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return c(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const f=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(f,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,f){const g=f.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,g)):i.length!==0&&this.updateTransceiverWithStop(i,o,g);for(const S of g){const u=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,u),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),u),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${u.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,f){let g=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let u=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[y,_]of f.entries())if(o.StreamIdsInSameGroup(v,_)){S.direction="recvonly",this.videoSubscriptions[g]=_,u=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(_,S),f.splice(y,1);break}}if(!u){this.videoSubscriptions[g]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[y,_]of this.streamIdToTransceiver.entries())S.mid===_.mid&&(this.streamIdToTransceiver.delete(y),this.groupIdToTransceiver.delete(o.groupIdForStreamId(y)))}g+=1}}updateTransceiverWithoutStop(i,o,f){let g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[g]=0,S.direction!=="inactive"){const u=o.streamIdForTrack("v_"+S.mid);if(u!==void 0){for(const[v,y]of f.entries())if(o.StreamIdsInSameGroup(u,y)){S.direction="recvonly",this.videoSubscriptions[g]=y,this.streamIdToTransceiver.delete(u),this.streamIdToTransceiver.set(y,S),f.splice(v,1);break}}}g+=1}g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&f.length>0){S.direction="recvonly";const u=f.shift();this.videoSubscriptions[g]=u,this.streamIdToTransceiver.set(u,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(u),S)}else if(this.videoSubscriptions[g]===0){S.direction="inactive";for(const[u,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(u),this.groupIdToTransceiver.delete(o.groupIdForStreamId(u)))}g+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[f,g]of this.streamIdToTransceiver.entries())if(g.mid===i){this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(o,g);return}}getMidForGroupId(i){var o,f;return(f=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&f!==void 0?f:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const f of this.peer.getTransceivers())this.transceiverIsVideo(f)&&(i+=`transceiver index=${o} mid=${f.mid} subscription=${this.videoSubscriptions[o]} direction=${f.direction}
`,o+=1);return i}setTransceiverInput(i,o){return c(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new m.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const f=!!window.RTCRtpScriptTransform,g=!!RTCRtpSender.prototype.createEncodedStreams;if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(g)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([r.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const u=new p.default;u.currentTimestampMs=Date.now(),u.ssrc=S.data.ssrc,u.totalAudioPacketsLost=S.data.totalAudioPacketsLost,u.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,u.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,u.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(u)}},f)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(g){const S=this._localAudioTransceiver.sender.createEncodedStreams(),u=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:u},[S.readable,S.writable,u.readable,u.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var f;const g=this.peer.addTransceiver(i,o);if(!(!((f=this.peer.getConfiguration())===null||f===void 0)&&f.encodedInsertableStreams)||!this.audioRedWorker)return g;const S=!!window.RTCRtpScriptTransform,u=!!RTCRtpSender.prototype.createEncodedStreams;if(S)g.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),g.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(u){const v=g.sender.createEncodedStreams(),y=g.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:y},[v.readable,v.writable,y.readable,y.writable])}return g}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,f=i.getRTCStatsReport();let g=0,S=0,u=0;f.forEach(A=>{A.kind==="audio"&&(A.type==="outbound-rtp"?S=A.packetsSent:A.type==="remote-inbound-rtp"&&(g=A.timestamp,u=A.packetsLost))}),(this.audioMetricsHistory.length===0||g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:g,totalPacketsSent:S,totalPacketsLost:u}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),y=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),_=Math.max(v,y),[C,T]=a.default.getNumRedundantEncodingsForPacketLoss(_);if(T){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const A=o-this.lastAudioRedTurnOffTimestampMs,O=o-this.lastHighPacketLossEventTimestampMs;if(A>=this.audioRedPacketLossLongEvalPeriodMs&&O<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,C)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:C})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,g=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const u=g-this.audioMetricsHistory[S].totalPacketsLost,v=f-this.audioMetricsHistory[S].totalPacketsSent,y=100*(u/v);return Math.max(0,Math.min(y,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,f){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=f,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},8213452704:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(372560720));let p=s(class uu extends m.default{setEncodingParameters(r){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===m.default.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===m.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(r,n,e){super(r,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<uu.NAME_ARR_ASCENDING.length;i++){const o=uu.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:uu.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=p,p.NAME_ARR_ASCENDING=["low","hi"],p.BITRATE_ARR_ASCENDING=[300,1200]},372560720:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(2392158736));let p=s(class ts extends m.default{setEncodingParameters(r){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===ts.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(ts.LOW_LEVEL_NAME),i),i.rid===ts.MID_LEVEL_NAME&&this.copyEncodingParams(r.get(ts.MID_LEVEL_NAME),i),i.rid===ts.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(ts.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(r){return c(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var r,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(r,n){n.active=r.active,n.maxBitrate=r.maxBitrate,n.scaleResolutionDownBy=r.scaleResolutionDownBy,n.maxFramerate=r.maxFramerate}constructor(r,n,e){super(r,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<ts.NAME_ARR_ASCENDING.length;i++){const o=ts.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:ts.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=p,p.LOW_LEVEL_NAME="low",p.MID_LEVEL_NAME="mid",p.HIGH_LEVEL_NAME="hi",p.NAME_ARR_ASCENDING=["low","mid","hi"],p.BITRATE_ARR_ASCENDING=[200,400,1100]},161472916:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2392158736));let m=s(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,r,n){super(a,r,n)}},"VideoOnlyTransceiverController");l.default=m},6391477986:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const c=d(4497810965);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=s(class{subscribeToTranscriptEvent(p){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const r of c.TranscriptEventConverter.from(a))for(const n of this.transcriptEventCallbacks)n(r)}),this.transcriptEventCallbacks.add(p)}unsubscribeFromTranscriptEvent(p){this.transcriptEventCallbacks.delete(p),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(p){this.realtimeController=p,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},4042214483:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"Transcript");l.default=d},8928051514:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptAlternative");l.default=d},3886666628:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptEntity");l.default=d},4497810965:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=d(4136617125),m=c(d(4042214483)),p=c(d(2832046333)),a=c(d(8532168277)),r=c(d(2855080400)),n={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=s(class{static from(i){let o;try{o=h.SdkTranscriptFrame.decode(i.data)}catch(g){throw new Error("Cannot decode transcript data message: "+g)}const f=[];for(const g of o.events)if(g.status){const S=n[g.status.type];if(!S)continue;const u=new p.default;u.type=S,u.eventTimeMs=g.status.eventTime,u.transcriptionRegion=g.status.transcriptionRegion,u.transcriptionConfiguration=g.status.transcriptionConfiguration,g.status.message&&(u.message=g.status.message),f.push(u)}else if(g.transcript){const S=new m.default;S.results=[];for(const u of g.transcript.results){const v={channelId:u.channelId,isPartial:u.isPartial,resultId:u.resultId,startTimeMs:u.startTime,endTimeMs:u.endTime,alternatives:[]};if(u.languageCode&&(v.languageCode=u.languageCode),u.languageIdentification&&u.languageIdentification.length>0){v.languageIdentification=[];for(const y of u.languageIdentification){const _={languageCode:y.languageCode,score:y.score};v.languageIdentification.push(_)}}for(const y of u.alternatives){const _={items:[],transcript:y.transcript};for(const C of y.items){const T={content:C.content,attendee:{attendeeId:C.speakerAttendeeId,externalUserId:C.speakerExternalUserId},startTimeMs:C.startTime,endTimeMs:C.endTime,type:null};switch(C.vocabularyFilterMatch&&(T.vocabularyFilterMatch=C.vocabularyFilterMatch),C.hasOwnProperty("stable")&&(T.stable=C.stable),C.hasOwnProperty("confidence")&&(T.confidence=C.confidence),C.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:T.type=r.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:T.type=r.default.PUNCTUATION;break}_.items.push(T)}for(const C of y.entities){_.entities||(_.entities=[]);const T={category:C.category,confidence:C.confidence,content:C.content,startTimeMs:C.startTime,endTimeMs:C.endTime};C.type&&(T.type=C.type),_.entities.push(T)}v.alternatives.push(_)}S.results.push(v)}f.push(S)}return f}},"TranscriptEventConverter");l.TranscriptEventConverter=e},6128278192:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptItem");l.default=d},2855080400:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.PRONUNCIATION="pronunciation",c.PUNCTUATION="punctuation"})(d||(d={})),l.default=d},2600940909:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptLanguageWithScore");l.default=d},3373821534:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptResult");l.default=d},2832046333:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptionStatus");l.default=d},8532168277:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.STARTED="started",c.INTERRUPTED="interrupted",c.RESUMED="resumed",c.STOPPED="stopped",c.FAILED="failed"})(d||(d={})),l.default=d},3894274294:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(888724265),m=c(d(6885109343));let p=s(class Ta{getParserResult(){var r,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((r=this.parserResult)===null||r===void 0?void 0:r.os.name)||Ta.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||Ta.UNAVAILABLE,sdkVersion:m.default.sdkVersion,sdkName:m.default.sdkName}}constructor(r){var n,e,t,i,o,f,g;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(S){r.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Ta.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||Ta.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Ta.UNAVAILABLE,this.deviceName=[((f=this.parserResult)===null||f===void 0?void 0:f.device.vendor)||"",((g=this.parserResult)===null||g===void 0?void 0:g.device.model)||""].join(" ").trim()||Ta.UNAVAILABLE}},"DefaultUserAgentParser");l.default=p,p.UNAVAILABLE="Unavailable"},3054351868:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{add(h){return new Promise((m,p)=>{this.queue=this.queue.then(h).then(m).catch(p)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=d},6527539809:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let d=s(class{static of(p){return p==null?h.of():c.of(p)}},"Maybe");l.Maybe=d;let c=s(class uS{map(p){return d.of(p(this.value))}flatMap(p){return p(this.value)}get(){return this.value}getOrElse(p){return this.value}defaulting(p){return d.of(this.getOrElse(p))}static of(p){if(p==null)throw new Error("value is ${value}");return new uS(p)}constructor(p){this.value=p,this.isSome=!0,this.isNone=!1}},"Some");l.Some=c;let h=s(class fu{get(){throw new Error("value is null")}getOrElse(p){return p}map(p){return new fu}flatMap(p){return new fu}defaulting(p){return d.of(this.getOrElse(p))}static of(){return new fu}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=h},5685319565:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=c(d(6885109343));function m(t){return new Promise(i=>setTimeout(i,t))}s(m,"wait"),l.wait=m;function p(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}s(p,"isIFramed"),l.isIFramed=p;function a(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(a):Object.keys(t).reduce((i,o)=>{const f=t[o],g=typeof f=="object"?a(f):f;return i[o.toLowerCase()]=g,i},{})}s(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function r(){const t=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}s(r,"getDefaultAssetSpec"),l.getDefaultAssetSpec=r;function n(t){const i=Math.abs(t),o=t<=0?"+":"-",f=Math.floor(i/60).toString().padStart(2,"0"),g=Math.floor(i%60).toString().padStart(2,"0");return`${o}${f}:${g}`}s(n,"getFormattedOffset"),l.getFormattedOffset=n;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}s(e,"getRandomValues"),l.getRandomValues=e},6885109343:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5546774952)),m=c(d(5554749645));let p=s(class Rc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return m.default.semverString}static get sdkVersionSemVer(){var r,n,e,t;const i=m.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(r=i==null?void 0:i.groups)===null||r===void 0?void 0:r.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return m.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const r=new h.default;return`${r.name()}-${r.majorVersion()}`}static urlWithVersion(r){const n=new URL(r);return n.searchParams.append(Rc.X_AMZN_VERSION,Rc.sdkVersion),n.searchParams.append(Rc.X_AMZN_USER_AGENT,Rc.sdkUserAgentLowResolution),n.toString()}},"Versioning");l.default=p,p.X_AMZN_VERSION="X-Amzn-Version",p.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},5554749645:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"d7eee1f",raw:"v3.23.0",semverString:"3.23.0"}},1695739824:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class fS{equal(h){let m=h.captureWidth()===this.cameraWidth&&h.captureHeight()===this.cameraHeight&&h.captureFrameRate()===this.cameraFrameRate&&h.encodeBitrates().length===this.encodeBitrates().length&&h.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&h.encodeWidths().length===this.encodeWidths().length&&h.encodeHeights().length===this.encodeHeights().length&&h.isSVCEncoding()===this.isSVC;if(m){for(let p=0;p<h.encodeWidths().length;p++)if(h.encodeWidths()[p]!==this.encodeWidths()[p]||h.encodeHeights()[p]!==this.encodeHeights()[p]||h.encodeBitrates()[p]!==this.encodeBitrates()[p]||h.encodeScaleResolutionDownBy()[p]!==this.encodeScaleResolutionDownBy()[p])return m=!1,m}return m}clone(){return new fS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(h,m,p,a,r,n=1,e=!1){this.cameraWidth=h,this.cameraHeight=m,this.cameraFrameRate=p,this.maxEncodeBitrateKbps=a,this.isSimulcast=r,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=d},9677745702:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1865309432));let m=s(class hS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const r=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return r;const n=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const f of t)n.contain(f.streamId)&&i.set(f.attendeeId,f);let o=0;for(const f of e){const g=f.attendee.attendeeId;if(i.has(g)){const S=i.get(g);if(o+S.maxBitrateKbps<=hS.maxReceiveBitrateKbps)r.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return r}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=m,m.maxReceiveBitrateKbps=15e3},681222244:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1865309432));let m=s(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=m},2178339051:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var d;(function(c){c[c.Low=0]="Low",c[c.Medium=1]="Medium",c[c.High=2]="High",c[c.Maximum=3]="Maximum"})(d=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=d},3368465086:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(805846668)),m=c(d(5393388022)),p=c(d(3803169181)),a=d(8071414974),r=c(d(8681774825)),n=c(d(3348721919));let e=s(class pS extends r.default{static createConfig(){const i=new n.default;return i.serverSideNetworkAdaption=m.default.None,i}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(i){super.updateIndex(i);const o=a.VideoPreferences.prepare();let f=!1;const g=i.remoteStreamDescriptions();for(const S of g)o.some(u=>u.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(h.default.Modality)?(o.add(new p.default(S.attendeeId,1)),f=!0):o.add(new p.default(S.attendeeId,2)));f?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(i){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(i){super(i,pS.createConfig()),this.logger=i,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},3803169181:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2178339051)),m=c(d(4829581265));let p=s(class Ul{partialCompare(r){return this.priority-r.priority}equals(r){return this.attendeeId===r.attendeeId&&this.targetSize===r.targetSize&&this.priority===r.priority&&this.degradationPreference===r.degradationPreference}clone(){return new Ul(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(r){switch(r){case h.default.Maximum:return Ul.MAXIMUM_BITRATE_KBPS;case h.default.High:return Ul.HIGH_BITRATE_KBPS;case h.default.Medium:return Ul.MID_BITRATE_KBPS;case h.default.Low:return Ul.LOW_BITRATE_KBPS}}constructor(r,n,e,t){this.attendeeId=r,this.priority=n,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:m.default.Balanced}},"VideoPreference");l.default=p,p.LOW_BITRATE_KBPS=300,p.MID_BITRATE_KBPS=600,p.HIGH_BITRATE_KBPS=1500,p.MAXIMUM_BITRATE_KBPS=1e4},8071414974:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=c(d(4804743313));function m(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,f=new Map,g=new Map;for(const S of t){const u=e.transceiverController.getMidForGroupId(S);if(u===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);f.set(v,u),g.set(v,S)}for(const S of i){const u=new h.default,v=f.get(S.attendeeId);v!==void 0&&(u.mid=v,u.attendeeId=S.attendeeId,u.groupId=g.get(S.attendeeId),u.priority=Number.MAX_SAFE_INTEGER-S.priority,u.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),u.qualityAdaptationPreference=S.degradationPreference,o.push(u))}return o}s(m,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=m;let p=s(class Bh{static default(){return new Bh([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new Bh([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=s(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new p){this.items=t,this.copied=!1}},"SetBuilder"),r=s(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=r;let n=s(class xh{static prepare(){return new r(new a)}static default(){return new xh(p.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new r(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=xh.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=n,l.default=n},8681774825:function(x,l,d){"use strict";var c=this&&this.__createBinding||(Object.create?function(A,O,D,M){M===void 0&&(M=D),Object.defineProperty(A,M,{enumerable:!0,get:function(){return O[D]}})}:function(A,O,D,M){M===void 0&&(M=D),A[M]=O[D]}),h=this&&this.__setModuleDefault||(Object.create?function(A,O){Object.defineProperty(A,"default",{enumerable:!0,value:O})}:function(A,O){A.default=O}),m=this&&this.__importStar||function(A){if(A&&A.__esModule)return A;var O={};if(A!=null)for(var D in A)D!=="default"&&Object.prototype.hasOwnProperty.call(A,D)&&c(O,A,D);return h(O,A),O},p=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(l,"__esModule",{value:!0});const a=p(d(9898009183)),r=p(d(6502873558)),n=p(d(6132421099)),e=p(d(805846668)),t=d(1370928943),i=m(d(5393388022)),o=p(d(8050111605)),f=p(d(1865309432)),g=p(d(9677745702)),S=p(d(2178339051)),u=p(d(3803169181)),v=d(8071414974),y=p(d(3348721919)),_=p(d(4829581265));let C=s(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),T=s(class br{reset(){this.allHighestPolicy=new g.default(""),this.optimalReceiveSet=new f.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new f.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new f.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=br.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=br.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new C,this.prevDownlinkStats=new C,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(O){this.tileController=O,this.logger.info("tileController bound")}setWantsResubscribeObserver(O){this.wantsResubscribeObserver=O}chooseRemoteVideoSources(O){var D;if(!(!((D=this.videoPreferences)===null||D===void 0)&&D.equals(O))){if(this.videoPreferences=O==null?void 0:O.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const M=new Array;for(const R of this.videoPreferences){const F=new o.default;F.attendee=new a.default,F.attendee.attendeeId=R.attendeeId,M.push(F)}this.allHighestPolicy.chooseRemoteVideoSources(M);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(O)}`)}}updateIndex(O){this.videoIndex=O,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(O),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const O=new Set;for(const F of this.videoIndex.remoteStreamDescriptions())O.add(F.attendeeId);const D=v.VideoPreferences.prepare(),M=O.size;let R=S.default.Maximum;M>8?R=S.default.Low:M>4&&(R=S.default.Medium);for(const F of O)D.add(new u.default(F,1,R));this.defaultVideoPreferences=D.build()}updateMetrics(O){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new C;const D=O.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=D.availableIncomingBitrate/1e3;for(const M in O.streamMetricReports){const R=Number.parseInt(M,10),F=O.streamMetricReports[R];F.direction===r.default.DOWNSTREAM&&F.mediaType===n.default.VIDEO&&(F.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=O.countPerSecond("nackCount",R)),F.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=O.countPerSecond("packetsLost",R)),F.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=O.bitsPerSecond("bytesReceived",R)/1e3))}}wantsResubscribe(){let O=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(O||(O=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?O||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),O||(O=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),O)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(O){this.observerQueue.add(O)}removeObserver(O){this.observerQueue.delete(O)}forEachObserver(O){for(const D of this.observerQueue)O(D)}setVideoPriorityBasedPolicyConfigs(O){this.videoPriorityBasedPolicyConfig=O}calculateOptimalReceiveStreams(){var O;const D=[],M=this.videoIndex.remoteStreamDescriptions();if(M.length===0||!((O=this.videoPreferences)===null||O===void 0)&&O.isEmpty()){this.optimalReceiveStreams=[];return}const R=this.rateProbeState;this.cleanBwPausedTiles(M),this.handleAppPausedStreams(D,M);const F=new Map;for(const We of this.getCurrentVideoPreferences())F.set(We.attendeeId,We);const V=M.filter(We=>F.has(We.attendeeId)),$=!this.streamsWithPreferenceDidChange(V),X=!this.startupPeriod&&$;if(X&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;V.sort((We,Ze)=>We.maxBitrateKbps===Ze.maxBitrateKbps?We.streamId-Ze.streamId:We.maxBitrateKbps-Ze.maxBitrateKbps);for(const We of V)(We.avgBitrateKbps===0||We.avgBitrateKbps>We.maxBitrateKbps)&&(We.attendeeId.endsWith(e.default.Modality)&&We.maxBitrateKbps<100?We.maxBitrateKbps=We.avgBitrateKbps:We.avgBitrateKbps=We.maxBitrateKbps);const Y=new Set;for(const We of this.getCurrentVideoPreferences()){const Ze=V.filter(Pe=>Pe.attendeeId===We.attendeeId);if(Ze.length<3)continue;let ft=15,vt=320*480;Ze.forEach(Pe=>{ft=Math.max(ft,Pe.maxFrameRate),vt=Math.max(vt,Pe.totalPixels())}),Ze.sort((Pe,Ke)=>{if(We.degradationPreference===_.default.MaintainResolution)return Math.abs(Pe.maxFrameRate-Ke.maxFrameRate)<2?Pe.totalPixels()-Ke.totalPixels():Pe.maxFrameRate-Ke.maxFrameRate;if(We.degradationPreference===_.default.MaintainFramerate)return Pe.totalPixels()===Ke.totalPixels()?Pe.maxFrameRate-Ke.maxFrameRate:Pe.totalPixels()-Ke.totalPixels();{const Ct=s(At=>At.avgBitrateKbps*Math.pow(2,5*At.maxFrameRate/ft*Math.pow(4,At.totalPixels()/vt)),"weighByFramerate");return Ct(Pe)-Ct(Ke)}});let De;for(const Pe of Ze){if(De!==void 0&&(Pe.maxFrameRate<De.maxFrameRate&&Math.abs(De.maxFrameRate-Pe.maxFrameRate)>2||Pe.totalPixels()<De.totalPixels())){Y.add(Pe.streamId);continue}De=Pe}}const ne=V.filter(We=>!Y.has(We.streamId));this.logger.info(`Filtered to ${JSON.stringify(ne)}`);const ie={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ie.targetDownlinkBitrate=this.determineTargetRate();const pe=this.subscribedReceiveSet.size(),Ee=this.downlinkStats.bandwidthEstimateKbps,Be=!this.videoPriorityBasedPolicyConfig.allowSubscribe(pe,Ee);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=br.MIN_TIME_BETWEEN_SUBSCRIBE_MS,X&&Be))return;const it=this.priorityPolicy(ie,ne,D),Ce=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Me=0;if(!Ce&&!this.startupPeriod&&$?this.rateProbeState==="Probing"?Me=this.handleProbe(D,ie.targetDownlinkBitrate):ie.deltaToNextUpgrade!==0&&(Me=this.maybeOverrideOrProbe(D,ie,it)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=V,this.videoPreferencesUpdated=!1,Me===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ie.targetDownlinkBitrate;return}if(Me===2){const We=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(V,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+We);return}this.optimalNonPausedReceiveStreams=D.slice();const je=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(V,D),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==R||this.optimalReceiveStreams.length!==D.length||je!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(M,ie.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ie.targetDownlinkBitrate,this.optimalReceiveStreams=D.slice()}calculateOptimalReceiveSet(){const O=new f.default;this.calculateOptimalReceiveStreams();for(const D of this.optimalReceiveStreams)O.add(D.streamId);if(!this.optimalReceiveSet.equal(O)){const D=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(O)} subscribedRate:${D}`)}this.optimalReceiveSet=O}determineTargetRate(){let O=0;const D=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=D),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>br.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||D-this.firstEstimateTimestamp>br.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?O=br.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<br.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),O=this.downlinkStats.usedBandwidthKbps+br.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):O=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?O=br.DEFAULT_BANDWIDTH_KBPS:O=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-br.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*br.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,O=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,O>15e3&&this.logger.warn("bwe: "+O+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(O,15e3)}setProbeState(O){if(this.rateProbeState===O)return!1;const D=Date.now();switch(O){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||D-this.lastProbeTimestamp>br.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=D;else return!1;break;case"Probing":if(D-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=D,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,br.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+O+" from "+this.rateProbeState),this.rateProbeState=O,!0}upgradeToStream(O,D){for(let M=0;M<O.length;M++)if(O[M].groupId===D.groupId){const R=D.avgBitrateKbps-O[M].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(O[M])+" to "+D),this.lastUpgradeRateKbps=R,O[M]=D,R}return O.push(D),this.lastUpgradeRateKbps=D.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(O,D){if(Date.now()-this.lastProbeTimestamp>br.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>br.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(br.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const M=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(O)||D>M?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=br.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(O,D,M){const R=this.chosenStreamsSameAsLast(O);let F=0;const V=D.targetDownlinkBitrate>br.LOW_BITRATE_THRESHOLD_KBPS?br.TARGET_RATE_CHANGE_TRIGGER_PERCENT:br.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,$=D.targetDownlinkBitrate*V/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!R&&Math.abs(D.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<$?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),F=1):this.targetRateBaselineForDeltaCheckKbps=D.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,F;if(R||F===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(O,M),F=0);break}else this.setProbeState("Not Probing");return F}calculateSubscribeRate(O){let D=0;for(const M of O)!this.pausedStreamIds.contain(M.streamId)&&!this.pausedBwAttendeeIds.has(M.attendeeId)&&(D+=M.maxBitrateKbps);return D}handleAppPausedStreams(O,D){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new f.default;const M=this.tileController.getAllRemoteVideoTiles();for(const R of M){const F=R.state();if(F.paused&&!this.pausedBwAttendeeIds.has(F.boundAttendeeId)){let V=D.length;for(;V--;)D[V].attendeeId===F.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+F.boundAttendeeId+" streamId: "+D[V].streamId),this.pausedStreamIds.add(D[V].streamId),this.subscribedReceiveSet.contain(D[V].streamId)&&O.push(D[V]),D.splice(V,1))}}}processBwPausedStreams(O,D){if(!this.tileController){this.logger.warn("tileController not found!");return}const M=this.getCurrentVideoPreferences();if(M&&this.shouldPauseTiles){const R=this.tileController.getAllVideoTiles();for(const F of M){const V=this.getVideoTileForAttendeeId(F.attendeeId,R),$=(V==null?void 0:V.state().paused)||!1;if(D.some(X=>X.attendeeId===F.attendeeId))$&&this.pausedBwAttendeeIds.has(F.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBeUnpausedByDownlinkPolicy(V.id())}),this.tileController.unpauseVideoTile(V.id()),this.pausedBwAttendeeIds.delete(F.attendeeId));else{const X=O.some(Y=>Y.attendeeId===F.attendeeId);if(V&&X){const Y=this.optimalReceiveStreams.find(ne=>ne.attendeeId===F.attendeeId);Y!==void 0&&($||(this.logger.info(`bwe: pausing streamId ${Y.streamId} attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(V.id())}),this.tileController.pauseVideoTile(V.id())),D.push(Y)),this.pausedBwAttendeeIds.add(F.attendeeId)}else if(X){const Y=this.tileController.addVideoTile();Y.bindVideoStream(F.attendeeId,!1,null,0,0,0,null),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(Y.id())}),Y.pause(),this.logger.info(`bwe: Created video tile ${Y.id()} for bw paused attendee ${F.attendeeId}`),this.pausedBwAttendeeIds.add(F.attendeeId)}}}}}cleanBwPausedTiles(O){if(!this.tileController){this.logger.warn("tileController not found!");return}const D=this.tileController.getAllRemoteVideoTiles(),M=this.getCurrentVideoPreferences();for(const R of D){const F=R.state();F.boundVideoStream||(O.some(V=>V.attendeeId===F.boundAttendeeId)?M!==void 0&&!M.some(V=>V.attendeeId===F.boundAttendeeId)&&this.tileController.removeVideoTile(F.tileId):(this.tileController.removeVideoTile(F.tileId),this.logger.info(`bwe: Removed video tile ${F.tileId} for bw paused attendee ${F.boundAttendeeId}`)))}}priorityPolicy(O,D,M){let R;const F=this.getCurrentVideoPreferences(),V=F.highestPriority();let $,X=V;for(;X!==-1;){$=-1;for(const Y of F)if(Y.priority===X)for(const ne of D)ne.attendeeId===Y.attendeeId&&(M.some(ie=>ie.groupId===ne.groupId)||(O.chosenTotalBitrate+ne.avgBitrateKbps<=O.targetDownlinkBitrate?(M.push(ne),O.chosenTotalBitrate+=ne.avgBitrateKbps):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=ne.avgBitrateKbps,R=ne)));else if(Y.priority>X){$=Y.priority;break}for(const Y of F)if(Y.priority===X){for(const ne of D)if(ne.attendeeId===Y.attendeeId){const ie=M.findIndex(pe=>pe.groupId===ne.groupId&&pe.maxBitrateKbps<=ne.maxBitrateKbps&&pe.avgBitrateKbps<ne.avgBitrateKbps);if(ie!==-1){const pe=ne.avgBitrateKbps-M[ie].avgBitrateKbps;this.hasSimulcastStreams(D,ne.attendeeId,ne.groupId)&&this.canUpgrade(ne.avgBitrateKbps,Y.targetSize,Y.targetSizeToBitrateKbps(Y.targetSize),ne.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${ne.attendeeId} group: ${ne.groupId} has simulcast and can upgrade avgBitrate: ${ne.avgBitrateKbps} target: ${Y.targetSizeToBitrateKbps(Y.targetSize)} targetTotalBitrate: ${O.targetDownlinkBitrate}`),O.chosenTotalBitrate+pe<=O.targetDownlinkBitrate?(O.chosenTotalBitrate+=pe,M[ie]=ne):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=pe,R=ne)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(Y.priority>X)break;if(X===V&&O.deltaToNextUpgrade!==0)break;X=$}return R}getVideoTileForAttendeeId(O,D){for(const M of D)if(M.state().boundAttendeeId===O)return M;return null}canUpgrade(O,D,M,R){let F=!1;return(D===S.default.High||!R&&O<=M||R&&D===S.default.Medium&&O<=M)&&(F=!0),F?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${O} targetBitrateKbps: ${M}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${O} targetBitrateKbps: ${M}`),!1)}hasSimulcastStreams(O,D,M){let R=0;for(const F of O)F.attendeeId===D&&F.groupId===M&&R++;return this.logger.info(`bwe: attendeeId: ${D} groupId: ${M} hasSimulcastStreams: streamCount: ${R}`),R>1}streamsWithPreferenceDidChange(O){if(this.previousStreamsWithPreference===void 0||O.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const D of O)if(this.previousStreamsWithPreference.find(R=>R.groupId===D.groupId&&R.streamId===D.streamId&&R.maxBitrateKbps===D.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(O){if(this.optimalNonPausedReceiveStreams.length!==O.length)return!1;for(const D of this.optimalNonPausedReceiveStreams)if(!O.some(M=>M.streamId===D.streamId))return!1;return!0}policyStateLogStr(O,D){const M=this.calculateSubscribeRate(this.optimalReceiveStreams),R={targetBitrate:D,subscribedRate:M,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let F="remoteInfos: [";for(const $ of O)F+=`{grpId:${$.groupId} strId:${$.streamId} maxBr:${$.maxBitrateKbps} avgBr:${$.avgBitrateKbps}}, `;F+="]";let V=`bwe: optimalReceiveSet ${JSON.stringify(R)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${F}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(V+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?V+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:V+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,V}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(O){this.serverSideNetworkAdaption=O,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let O=this.getCurrentVideoPreferences();return O||(O=v.VideoPreferences.prepare().build()),O}wantsAllTemporalLayersInIndex(){return!0}constructor(O,D=y.default.Default){this.logger=O,this.videoPriorityBasedPolicyConfig=D,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===i.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=i.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=T,T.DEFAULT_BANDWIDTH_KBPS=2800,T.STARTUP_PERIOD_MS=6e3,T.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,T.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,T.LOW_BITRATE_THRESHOLD_KBPS=300,T.MIN_TIME_BETWEEN_PROBE_MS=5e3,T.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,T.MAX_HOLD_BEFORE_PROBE_MS=3e4,T.MAX_ALLOWED_PROBE_TIME_MS=6e4,T.SPURIOUS_PACKET_LOST_THRESHOLD=2,T.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},3348721919:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5393388022));let m=s(class Pc{allowSubscribe(a,r){let n=0;const e=this.currentNetworkEvent;if(r>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=r,!0;if(r<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=r,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,r){let n=Pc.MINIMUM_DELAY_MS;const e=Pc.MAXIMUM_DELAY_MS-Pc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:n+=e*t*(1+r/10),n=Math.min(Pc.MAXIMUM_DELAY_MS,n);break}return n}constructor(a=0,r=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=r,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.BandwidthProbingAndRemoteVideoQualityAdaption,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,r<0?r=0:r>1&&(r=1),this.networkIssueRecoveryDelayFactor=r}},"VideoPriorityBasedPolicyConfig");l.default=m,m.MINIMUM_DELAY_MS=2e3,m.MAXIMUM_DELAY_MS=8e3,m.Default=new m(0,0),m.UnstableNetworkPreset=new m(0,1),m.StableNetworkPreset=new m(1,0)},4829581265:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var d;(function(c){c[c.Balanced=0]="Balanced",c[c.MaintainFramerate=1]="MaintainFramerate",c[c.MaintainResolution=2]="MaintainResolution"})(d=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=d},3718889761:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{create(){const h={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{h.paused=!0},play:()=>(h.paused=!1,Promise.resolve())};return h}},"NoOpVideoElementFactory");l.default=d},1458156729:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return d(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=c},4353575046:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1458156729)),p=h(d(4223139537)),a=15;let r=s(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return c(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return c(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new m.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new p.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>c(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const f=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let g=[];g.push(this.sourceBuffers[0]);try{for(const T of this.processors)g=yield T.process(g)}catch{this.forEachObserver(A=>{A.processingDidFailToStart&&A.processingDidFailToStart()});return}this.destBuffers=g;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(A=>{A.processingDidFailToStart&&A.processingDidFailToStart()}));return}const u=S.width,v=S.height;u!==0&&v!==0&&(this.canvasOutput.width!==u&&this.canvasOutput.height!==v&&(this.canvasOutput.width=u,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,u,v,0,0,u,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(T=>{T.processingDidStart&&T.processingDidStart()})));const y=performance.now()-f,_=1e3*2/this.framerate-y,C=Math.max(0,1e3/this.framerate-y);_<=0&&this.forEachObserver(T=>{T.processingLatencyTooHigh&&T.processingLatencyTooHigh(y)}),yield this.timer.start(C,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");l.default=r},4223139537:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,p){return d(this,void 0,void 0,function*(){this.callback=p,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return d(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=c},7309008175:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5546774952)),p=h(d(4353575046));let a=s(class mS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new mS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return c(this,void 0,void 0,function*(){return this.device})}transformStream(n){return c(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return c(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}constructor(n,e,t,i=new m.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new p.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},3814682321:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{process(m){return d(this,void 0,void 0,function*(){return m})}destroy(){return d(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=c},8994379632:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let d=s(class{getPromise(){return this.promise}resolvePromise(h){this.resolve(h)}resolveAndReplacePromise(h){this.resolve(h),this.promise=new Promise((m,p)=>{this.resolve=m,this.reject=p})}rejectPromise(h){this.reject(h)}rejectAndReplacePromise(h){this.reject(h),this.promise=new Promise((m,p)=>{this.resolve=m,this.reject=p})}constructor(){this.promise=new Promise((h,m)=>{this.resolve=h,this.reject=m})}},"DeferredPromise");l.DeferredPromise=d},8001499918:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(p,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}s(o,"fulfilled");function f(S){try{g(n.throw(S))}catch(u){i(u)}}s(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}s(g,"step"),g((n=n.apply(p,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=d(2014740298);let m=s(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return c(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const r=document.createElement("canvas");r.width=this.streamParameters.width,r.height=this.streamParameters.height,r.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return c(this,void 0,void 0,function*(){const r=a.backgroundReplacement.backgroundImageURL,n=a.backgroundReplacement.defaultColor;if(r)try{const e=yield this.loadImage(r);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}resizeAndSetReplacementColor(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.fillStyle=a,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}loadImage(a){return c(this,void 0,void 0,function*(){const n=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(a,r){this.streamParameters=a,this.outputCanvas=r,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=m},2014740298:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const d="/ml_media_fx/otherassets";l.WORKER_PATH=`${d}/worker.js`,l.FXLIB_PATH=`${d}/fxlib.js`},1314104503:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(v,y,_,C){function T(A){return A instanceof _?A:new _(function(O){O(A)})}return s(T,"adopt"),new(_||(_=Promise))(function(A,O){function D(F){try{R(C.next(F))}catch(V){O(V)}}s(D,"fulfilled");function M(F){try{R(C.throw(F))}catch(V){O(V)}}s(M,"rejected");function R(F){F.done?A(F.value):T(F.value).then(D,M)}s(R,"step"),R((C=C.apply(v,y||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(9463981249),p=d(5963876428),a=d(7984036634),r=h(d(5546774952)),n=h(d(1831006443)),e=d(5685319565),t=h(d(6885109343)),i=h(d(1458156729)),o=d(8994379632),f=d(8001499918),g=d(2014740298),S=d(6322494344);let u=s(class Vl{process(y){return c(this,void 0,void 0,function*(){return y})}fxProcess(y){return c(this,void 0,void 0,function*(){const _=y[0].asCanvasElement();this.didStreamParametersChange(_)&&(yield this.adjustProcessorForNewStreamParameters(_));try{yield this.manageSegmentationMask(_)}catch(C){throw this.logger.error(C),new Error("Video stream could not be processed")}return yield this.renderer.render(_,this.segmentationMask),y[0]=this.canvasVideoFrameBuffer,y})}noOpProcess(y){return c(this,void 0,void 0,function*(){return y})}didStreamParametersChange(y){return y.width!==this.streamParameters.width||y.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(y){return c(this,void 0,void 0,function*(){this.streamParameters.width=y.width,this.streamParameters.height=y.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return c(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:g.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(y){return c(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const _=this.canvasOpsManager.getInferenceInputData(y);this.segmentationMask=yield this.generateSegmentationMask(_),this.segmentationRateManager.completeSegmentation()}}catch(_){throw this.logger.error(_.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(y){return c(this,void 0,void 0,function*(){Vl.isSharedArrayBufferSupported?(this.sharedImageData.set(y.data),this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:y},[y.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(y){return{backgroundBlur:{isEnabled:y.backgroundBlur.isEnabled,strength:y.backgroundBlur.strength},backgroundReplacement:{isEnabled:y.backgroundReplacement.isEnabled,backgroundImageURL:y.backgroundReplacement.backgroundImageURL,defaultColor:y.backgroundReplacement.defaultColor}}}setEffectConfig(y){return c(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(y,this.effectConfig))return;const _=this.cloneConfigFrom(y);try{yield this.validateEffectConfig(_)}catch(C){throw this.logger.error(C.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}_.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(_),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,_),this.effectConfig=_,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(y){return c(this,void 0,void 0,function*(){if(y.backgroundBlur.isEnabled&&y.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");y.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(y))})}validateReplacementConfig(y){return c(this,void 0,void 0,function*(){if(y.backgroundReplacement.backgroundImageURL&&y.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!y.backgroundReplacement.backgroundImageURL&&!y.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{y.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(y.backgroundReplacement.backgroundImageURL))}catch(C){throw this.logger.error(C.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const _=y.backgroundReplacement.defaultColor;if(_&&_!=="black"&&_!=="#000000"&&_!=="#000"){if(_.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(_))throw new Error(`Invalid hexadecimal color code for default replacement background: ${_}`);const T=document.createElement("canvas").getContext("2d"),A=T.fillStyle;if(T.fillStyle=_,T.fillStyle===A)throw new Error(`Invalid color for default replacement background: ${_}`)}})}validateProcessingBudgetPerFrame(y){if(y<g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||y>g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return c(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const y=this.getVideoFxAssetParams();yield this.loadEngineWorker(y),yield this.buildEngine(y),yield this.loadFxLib(y),this.renderer=constructRenderer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(y){throw this.logger.error(y.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const y=e.getDefaultAssetSpec();return{assetGroup:y.assetGroup,revisionID:y.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(y,_){const C=new URL(y);for(const[T,A]of Object.entries(_))if(A!==void 0){const O=encodeURIComponent(T),D=encodeURIComponent(A);C.searchParams.set(O,D)}return C.toString()}loadEngineWorker(y){return c(this,void 0,void 0,function*(){try{const _=this.getPathFromVideoFxAssetParams(g.CDN_BASE_PATH+g.WORKER_PATH,y);this.engineWorker=yield p.loadWorker(_,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",C=>this.engineWorkerReceiver(C))}catch(_){throw this.logger.error(_.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(y){return c(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:g.CDN_BASE_PATH,sdkVersioningParams:y}});try{yield this.buildEnginePromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(y){return c(this,void 0,void 0,function*(){const _=this.getPathFromVideoFxAssetParams(g.CDN_BASE_PATH+g.FXLIB_PATH,y),C={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const T=yield m.fetchWithBehavior(_,C,{});if(!T.ok)throw new Error("Fetch failed.");const A=window.URL.createObjectURL(yield T.blob());yield new Promise((O,D)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",A),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",O),this.fxLibScript.addEventListener("error",D),document.body.appendChild(this.fxLibScript)})}catch(T){throw this.logger.error(T.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(y){const _=y.data;switch(_.msg){case g.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(_.payload);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(_.payload.output);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case g.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(_)}`);break}}settleEngineBuildPromise(y){y!==g.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(y){y?this.segmentationRequestPromise.resolveAndReplacePromise(y):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const y=new ImageData(new Uint8ClampedArray(this.sharedImageData),g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(y)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return c(this,void 0,void 0,function*(){let C=!0;const T=s((D,M)=>{D&&(y.info(M),C=!1)},"checkEnv");T(typeof globalThis>"u","Browser does not have globalThis."),T(!a.supportsWorker(globalThis,y),"Browser does not support web workers."),T(!a.supportsWASM(globalThis,y),"Browser does not support wasm."),T(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const A=new r.default;T(!A.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const O=s(()=>c(this,void 0,void 0,function*(){if(_)try{const D=new Vl(y);yield D.loadAssets(),yield D.destroy()}catch{return y.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(C?yield O():!1)})}static create(y,_){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return c(this,void 0,void 0,function*(){const T=new Vl(y,C);try{return yield T.loadAssets(),yield T.setEffectConfig(_),T}catch(A){throw y.error(A.toString()),T.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(y){this.eventController?this.eventController=y:(this.eventController=y,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const y={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",y)}sameVideoFxConfig(y,_){return y.backgroundBlur.isEnabled===_.backgroundBlur.isEnabled&&y.backgroundBlur.strength===_.backgroundBlur.strength&&y.backgroundReplacement.backgroundImageURL===_.backgroundReplacement.backgroundImageURL&&y.backgroundReplacement.defaultColor===_.backgroundReplacement.defaultColor&&y.backgroundReplacement.isEnabled===_.backgroundReplacement.isEnabled}constructor(y,_=g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,C){this.logger=y,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(_)}catch(T){throw this.logger.error(T),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${_}`)}C&&(this.eventController=C),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,_),this.streamParameters={framerate:g.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:g.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:g.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:g.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Vl.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Vl.isSharedArrayBufferSupported}`),this.canvasOpsManager=new f.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${_}`)}},"VideoFxProcessor");l.default=u,u.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},6322494344:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const c=d(2014740298);let h=s(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=c.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(p){p>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&p<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(p,a){this.logger=p,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=c.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},8050111605:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"VideoSource");l.default=d},1865309432:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class Uh{add(h){this.ids.add(h)}array(){return Array.from(this.ids.values()).sort((m,p)=>m-p)}contain(h){return this.ids.has(h)}forEach(h){this.ids.forEach(h)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(h){if(!h)return this.ids.size===0;const m=this.array(),p=h.array();if(m.length!==p.length)return!1;for(let a=0;a<m.length;a++)if(m[a]!==p[a])return!1;return!0}clone(){return new Uh(this.array())}remove(h){this.ids.delete(h)}toJSON(){return this.array()}truncate(h){const m=this.array();return new Uh(m.splice(0,h))}constructor(h){this.ids=new Set(h)}},"DefaultVideoStreamIdSet");l.default=d},2469210420:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),m=c(d(1865309432)),p=c(d(6105894327));let a=s(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new p.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:f,mediaType:g}=i;o!==n&&g===h.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:f}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===n||v.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const f=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),g=new Map;let S=0;f.forEach((v,y)=>{g.set(y,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(f,e,S,i,g),this.trySelectHighBitrateForAttendees(f,o,S,i,g);const u=new m.default;for(const v of g.values())u.add(v.streamId);return u}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new m.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const f of e){if(t>=i)break;if(n.has(f)){const g=n.get(f);for(const S of g.reverse())if(t-o.get(f).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(f).maxBitrateKbps+S.maxBitrateKbps,o.set(f,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,f)=>o.maxBitrateKbps>f.maxBitrateKbps?1:o.maxBitrateKbps<f.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new p.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},8697249276:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),m=c(d(2469210420)),p=c(d(6105894327));let a=s(class Hl extends m.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,f=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const g=new p.default;g.maxBitrateKbps=o,g.maxFrameRate=f,g.disabledByUplinkPolicy=o===0,g.rid=n[i].rid,o!==0&&(g.timeEnabled=Date.now()),this._localStreamInfos.push(g),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=f,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===Hl.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,Hl.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,Hl.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,Hl.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Hl.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},6105894327:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(4136617125);let h=s(class gS{clone(){const p=new gS;return p.attendeeId=this.attendeeId,p.groupId=this.groupId,p.streamId=this.streamId,p.ssrc=this.ssrc,p.trackLabel=this.trackLabel,p.maxBitrateKbps=this.maxBitrateKbps,p.avgBitrateKbps=this.avgBitrateKbps,p.maxFrameRate=this.maxFrameRate,p.timeEnabled=this.timeEnabled,p.disabledByUplinkPolicy=this.disabledByUplinkPolicy,p.width=this.width,p.height=this.height,p}toStreamDescriptor(){const p=c.SdkStreamDescriptor.create();return p.mediaType=c.SdkStreamMediaType.VIDEO,p.trackLabel=this.trackLabel,p.attendeeId=this.attendeeId,p.streamId=this.streamId,p.groupId=this.groupId,p.framerate=this.maxFrameRate,p.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,p.avgBitrateBps=this.avgBitrateKbps,p}totalPixels(){return this.width*this.height}constructor(p,a,r,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=p,this.groupId=a,this.streamId=r,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},8089299542:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5546774952)),m=c(d(8006173476)),p=c(d(6345807038));let a=s(class Vs{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Vs.setVideoElementFlag(e,"disablePictureInPicture",t),Vs.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(f=>{console.warn("Error playing video in Safari",f)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",Vs.setVideoElementFlag(n,"disablePictureInPicture",!1),Vs.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Vs.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new p.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,f,g,S){let u=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new m.default(n).hasModality(m.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),u=!0),this.tileState.boundExternalUserId!==g&&(this.tileState.boundExternalUserId=g,u=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,u=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,u=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,u=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,u=!0),this.tileState.streamId!==f&&(this.tileState.streamId=f,u=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,u=!0),u&&this.sendTileStateUpdate()}bindVideoElement(n){let e=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Vs.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Vs.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i){this.tileController=t,this.devicePixelRatioMonitor=i,this.tileState=new p.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},6345807038:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class SS{clone(){const h=new SS;return h.tileId=this.tileId,h.localTile=this.localTile,h.isContent=this.isContent,h.active=this.active,h.paused=this.paused,h.poorConnection=this.poorConnection,h.boundAttendeeId=this.boundAttendeeId,h.boundExternalUserId=this.boundExternalUserId,h.boundVideoStream=this.boundVideoStream,h.boundVideoElement=this.boundVideoElement,h.nameplate=this.nameplate,h.videoStreamContentWidth=this.videoStreamContentWidth,h.videoStreamContentHeight=this.videoStreamContentHeight,h.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,h.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,h.devicePixelRatio=this.devicePixelRatio,h.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,h.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,h.streamId=this.streamId,h.groupId=this.groupId,h}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=d},4675986794:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1197017824)),p=h(d(5163444346)),a=h(d(3563909523)),r=d(6527539809),n=h(d(8089299542));let e=s(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new p.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return c(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const i=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,i.destroy()})}bindVideoElement(i,o){const f=this.getVideoTile(i);if(f===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${i}`);return}f.bindVideoElement(o)}unbindVideoElement(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const f=this.getVideoTile(i);if(f===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${i}`);return}this.logger.info("Unbinding the video element");const g=f.stateRef().boundVideoElement;f.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),n.default.disconnectVideoStreamFromVideoElement(g,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===m.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const i=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),i.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(i)),o.pause())}unpauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(i)),o.unpause())}getVideoTile(i){return this.tileMap.has(i)?this.tileMap.get(i):null}getVideoTileArea(i){const o=i.state();let f=0,g=0;return o.boundVideoElement&&(f=o.boundVideoElement.clientHeight*o.devicePixelRatio,g=o.boundVideoElement.clientWidth*o.devicePixelRatio),f*g}getAllRemoteVideoTiles(){const i=new Array;return this.tileMap.forEach((o,f)=>{(!this.currentLocalTile||f!==this.currentLocalTile.id())&&i.push(o)}),i}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const f=this.tileFactory.makeTile(o,i,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,f),f}removeVideoTile(i){if(!this.tileMap.has(i))return;const o=this.tileMap.get(i);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(i),this.audioVideoController.forEachObserver(f=>{r.Maybe.of(f.videoTileWasRemoved).map(g=>g.bind(f)(i))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(i){const o=[];for(const f of this.getAllVideoTiles()){const g=f.state();g.boundAttendeeId===i&&(this.removeVideoTile(g.tileId),o.push(g.tileId))}return o}removeAllVideoTiles(){const i=Array.from(this.tileMap.keys());for(const o of i)this.removeVideoTile(o)}sendTileStateUpdate(i){this.audioVideoController.forEachObserver(o=>{r.Maybe.of(o.videoTileDidUpdate).map(f=>f.bind(o)(i))})}haveVideoTilesWithStreams(){for(const i of this.getAllVideoTiles())if(i.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(i){return!!this.getVideoTileForAttendeeId(i)}getVideoTileForAttendeeId(i){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===i)return o}captureVideoTile(i){const o=this.getVideoTile(i);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(i,o,f){this.tileFactory=i,this.audioVideoController=o,this.logger=f,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},1309535200:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8089299542));let m=s(class{makeTile(a,r,n,e){return new h.default(a,r,n,e)}},"DefaultVideoTileFactory");l.default=m},4207915265:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"BitrateParameters");l.default=d},1604549269:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(9131051489)),m=c(d(372560720)),p=d(6527539809),a=c(d(1695739824)),r=c(d(4207915265));let n=s(class ns{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new r.default,new r.default,new r.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,f,g)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,f=t.numberOfParticipants(),g=f>=0&&f<=2,S=this.shouldDisableSimulcast!==g;this.numSenders=i,this.shouldDisableSimulcast=g,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of m.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?ns.kHiTargetBitrateKbpsFhd:ns.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?ns.kMidTargetBitrateKbpsFhd:ns.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?ns.kLowTargetBitrateKbpsFhd:ns.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,f=m.default.NAME_ARR_ASCENDING,g=t;let S=this.shouldDisableSimulcast?1:4;for(let u=0;u<f.length;u++){const v=f[u];i.set(v,{rid:v,active:g[u]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:g[u]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(f=>{i+=`{ rid: ${f.rid} active:${f.active} maxBitrate:${f.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{p.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=ns.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=ns.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=ns.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},4499376852:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8213452704));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,r,n,e,t,i,o,f,g,S,u,v;const y=new Map,_=1e3,C=h.default.NAME_ARR_ASCENDING;return y.set(C[0],{rid:C[0],active:!0,scaleResolutionDownBy:((r=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||r===void 0?void 0:r.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*_,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),y.set(C[1],{rid:C[1],active:!0,scaleResolutionDownBy:((f=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||f===void 0?void 0:f.scaleResolutionDownBy)||1,maxBitrate:(((S=(g=this.encodingParams)===null||g===void 0?void 0:g.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*_,maxFramerate:(v=(u=this.encodingParams)===null||u===void 0?void 0:u.high)===null||v===void 0?void 0:v.maxFramerate}),y}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,r){this.encodingParams=r,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=m},9136055221:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1695739824));let p=s(class Wl{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new m.default(0,0,0,0,!1),this.parametersInEffect=new m.default(0,0,0,0,!1),this.encodingParamMap.set(Wl.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(r){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(r){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=r.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=r.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let r=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(r=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new m.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,r,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let r=640;return this.getNumberOfPublishedVideoSources()>4&&(r=320),r}captureHeight(){let r=384;return this.getNumberOfPublishedVideoSources()>4&&(r=192),r}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let r=0;return this.getNumberOfPublishedVideoSources()<=2?r=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?r=this.idealMaxBandwidthKbps*2/3:r=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(r)}setIdealMaxBandwidthKbps(r){this.idealMaxBandwidthKbps=r}setHasBandwidthPriority(r){this.hasBandwidthPriority=r}setTransceiverController(r){this.transceiverController=r}setSVCEnabled(r){var n;this.enableSVC=r,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${r}}`)}setHighResolutionFeatureEnabled(r){this.enableHighResolutionFeature=r}updateTransceiverController(){return c(this,void 0,void 0,function*(){const r=this.getStreamCaptureSetting();if(!r)return;const n=this.calculateEncodingParameters(r);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(Wl.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(r){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return r.maxBitrate!==(t==null?void 0:t.maxBitrate)||r.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(r==null?void 0:r.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(r){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,f=720;if(r.height!==void 0&&r.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(f=Wl.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Wl.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],f===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(f=360),o=Math.max(Math.min(r.height,r.width)/f,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${r.width}x${r.height}. New dimension is ${r.width/o}x${r.height/o}`)),this.enableSVC){let g;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?g="L1T1":g="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${f}  scalabilityMode: ${g}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:g}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var r,n,e,t;return(t=(e=(n=(r=this.transceiverController)===null||r===void 0?void 0:r.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var r;return(r=this.numberOfPublishedVideoSources)!==null&&r!==void 0?r:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(r,n){const e=r??n,t=e.length>0&&Wl.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(r,n=!0,e=void 0,t=void 0){this.selfAttendeeId=r,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=p,p.encodingMapKey="video",p.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],p.SVCCodecNames=["VP9"]},9871896518:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1695739824));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=m},6133497304:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function d(h){return h.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}s(d,"stringify");let c=s(class{debug(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.debug(d(p))}info(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.info(d(p))}warn(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.warn(d(p))}error(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.error(d(p))}constructor(m){this.base=m}},"LoggerAdapter");l.default=c},1644756024:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(i,o,f,g){function S(u){return u instanceof f?u:new f(function(v){v(u)})}return s(S,"adopt"),new(f||(f=Promise))(function(u,v){function y(T){try{C(g.next(T))}catch(A){v(A)}}s(y,"fulfilled");function _(T){try{C(g.throw(T))}catch(A){v(A)}}s(_,"rejected");function C(T){T.done?u(T.value):S(T.value).then(y,_)}s(C,"step"),C((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const m=d(5700998045),p=d(5685319565),a=h(d(6885109343)),r=h(d(6133497304)),n=h(d(7141525823)),e=h(d(7075076608));let t=s(class gs{static isSupported(o,f){var g,S;const u=gs.defaultFetchBehavior(),v=f!=null&&f.logger?new r.default(f.logger):void 0,y={fetchBehavior:u,logger:v};if(p.isIFramed()){if((f==null?void 0:f.allowIFrame)===!1)return(g=f==null?void 0:f.logger)===null||g===void 0||g.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=f==null?void 0:f.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return m.VoiceFocus.isSupported(gs.augmentSpec(o),y)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;var v,y,_;return c(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const C=((_=(y=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||y===void 0?void 0:y.Audio)===null||_===void 0?void 0:_.EchoReduction)==="AVAILABLE",T=g&&g.supported===!0&&g.model.name==="ns_es"&&!C,A=o.name==="ns_es"&&!C;if(T||A)throw new Error("Echo Reduction requested but not enabled.");const O=new gs(o,f,g);return yield O.init(),O})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c(this,void 0,void 0,function*(){return new gs(o,f,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,f){return c(this,void 0,void 0,function*(){if(this.supported)try{const[S,u]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},f),{es:this.spec.name==="ns_es"});return new n.default(o,S,u,v)}catch{return}})}static destroyVoiceFocus(o){var f;return c(this,void 0,void 0,function*(){(f=o==null?void 0:o.vf)===null||f===void 0||f.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:gs.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const f={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return m.VoiceFocus.configure(this.spec,f)})}init(){var o;return c(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const f=yield this.configuration;if(!f.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(f,this.preload);try{yield this.pendingVoiceFocus}catch(g){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${g}`),this.supported=!1}})}createVoiceFocus(o,f){return c(this,void 0,void 0,function*(){const g=new e.default;return this.vf=yield m.VoiceFocus.init(o,{delegate:g,preload:f,logger:this.vfLogger}),[this.vf,g]})}allocateVoiceFocus(o){return c(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const f=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,f}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=gs.majorMinorVersion()||"unknown",f=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(f)}`}}constructor(o,{preload:f=!0,logger:g,fetchBehavior:S=gs.defaultFetchBehavior()},u){this.spec=o,this.supported=!0,this.logger=g,this.vfLogger=g?new r.default(g):void 0,this.preload=f,this.fetchBehavior=S,this.spec=gs.augmentSpec(this.spec),u&&(this.configuration=Promise.resolve(u))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},7141525823:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5546774952));let p=s(class vS{getInnerDevice(){return this.device}mute(n){return c(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return c(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return c(this,void 0,void 0,function*(){return this.device===n&&!a(n)?this:new vS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return c(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return c(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const f=this.node,g=this.node;return{start:f,end:g}}catch(f){throw this.failed=!0,this.delegate.onFallback(this,f),f}})}observeMeetingAudio(n){return c(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return c(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return c(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return c(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return c(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return c(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,f=void 0,g=new m.default,S=new Map,u=void 0,v=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=f,this.browserBehavior=g,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=u,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function a(r){return r==="default"?!0:!r||typeof r!="object"?!1:"deviceId"in r&&r.deviceId==="default"||"id"in r&&r.id==="default"}s(a,"isDefaultDevice"),l.default=p},7075076608:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}onFallback(h,m){var p;for(const a of this.observers)(p=a.voiceFocusFellBackToInnerStream)===null||p===void 0||p.call(a,h,m)}onCPUWarning(){var h;for(const m of this.observers)(h=m.voiceFocusInsufficientResources)===null||h===void 0||h.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=d},8058016368:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class hu{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(h){let m=0;for(const p of h.streams){const a=!!p.attendeeId,r=!!p.externalUserId,n=p.hasOwnProperty("muted"),e=!!p.dropped;if(a){this.attendeeIdToStreamId[p.attendeeId]&&this.attendeeIdToStreamId[p.attendeeId]<p.audioStreamId&&delete this.attendeeIdToStreamId[p.attendeeId],this.streamIdToAttendeeId[p.audioStreamId]=p.attendeeId;const t=r?p.externalUserId:p.attendeeId;this.streamIdToExternalUserId[p.audioStreamId]=t,this.attendeeIdToStreamId[p.attendeeId]=p.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(p.attendeeId,!0,t,!1,{attendeeIndex:m++,attendeesInFrame:h.streams.length})}if(n){const t=this.streamIdToAttendeeId[p.audioStreamId],i=this.streamIdToExternalUserId[p.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,p.muted,null,i)}if(!a&&!n){const t=this.streamIdToAttendeeId[p.audioStreamId];if(t){const i=this.streamIdToExternalUserId[p.audioStreamId];delete this.streamIdToAttendeeId[p.audioStreamId],delete this.streamIdToExternalUserId[p.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[p.audioStreamId],this.attendeeIdToStreamId[t]===p.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(f);if(g>p.audioStreamId&&this.streamIdToAttendeeId[g]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:m++,attendeesInFrame:h.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(h),this.sessionReconnected=!1)}cleanUpState(h){const m=Object.values(this.streamIdToAttendeeId),p=h.streams.map(r=>r.attendeeId),a=m.filter(r=>!p.includes(r));for(const[r,n]of a.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:r,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(h){let m=null,p=null;for(const a of h.attendeeStates){const r=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(m===null&&(m={}),r!==null&&(m[r]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(p===null&&(p={}),r!==null&&(p[r]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(m,p)}normalizedVolume(h){const p=1-(-h.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(p,0),1)}normalizedSignalStrength(h){const m=h.signalStrength/hu.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(h,m){for(const p in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[p],r=this.streamIdToExternalUserId[p];let n=null,e=null;h!==null&&(h.hasOwnProperty(a)?n=h[a]:n=hu.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(a)?e=m[a]:e=hu.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,n,null,e,r)}}attendeeIdForStreamId(h){if(h===0)return null;const m=this.streamIdToAttendeeId[h];return m||(this.warnedAboutMissingStreamIdMapping[h]||(this.warnedAboutMissingStreamIdMapping[h]=!0,this.logger.warn(`volume indicator stream id ${h} seen before being defined`)),null)}constructor(h,m,p,a,r){this.logger=h,this.realtimeController=m,this.minVolumeDecibels=p,this.maxVolumeDecibels=a,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=d,d.MAX_SIGNAL_STRENGTH_LEVELS=2,d.IMPLICIT_VOLUME=0,d.IMPLICIT_SIGNAL_STRENGTH=1},7880459944:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6885109343)),m=c(d(5638612424));let p=s(class{create(r,n,e){this.connection=new WebSocket(e?r:h.default.urlWithVersion(r),n),this.connection.binaryType="arraybuffer"}send(r){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return r instanceof Uint8Array?this.connection.send(r.buffer):this.connection.send(r),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${m.default[this.readyState()]}`),!1}}close(r,n){var e;(e=this.connection)===null||e===void 0||e.close(r,n)}destroy(){this.connection=void 0}addEventListener(r,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(r,n)}removeEventListener(r,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(r,n)}readyState(){if(!this.connection)return m.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return m.default.Connecting;case WebSocket.OPEN:return m.default.Open;case WebSocket.CLOSING:return m.default.Closing;case WebSocket.CLOSED:return m.default.Closed}}constructor(r){this.logger=r}},"DefaultWebSocketAdapter");l.default=p},5638612424:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var d;(function(c){c[c.None=0]="None",c[c.Connecting=1]="Connecting",c[c.Open=2]="Open",c[c.Closing=3]="Closing",c[c.Closed=4]="Closed"})(d=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=d},7729790247:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(C,T,A,O){function D(M){return M instanceof A?M:new A(function(R){R(M)})}return s(D,"adopt"),new(A||(A=Promise))(function(M,R){function F(X){try{$(O.next(X))}catch(Y){R(Y)}}s(F,"fulfilled");function V(X){try{$(O.throw(X))}catch(Y){R(Y)}}s(V,"rejected");function $(X){X.done?M(X.value):D(X.value).then(F,V)}s($,"step"),$((O=O.apply(C,T||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=d(5963876428),m=d(7984036634),p=3,a=2.5,r=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let f=s(class{roundtrip(T,A,O){return new Promise((D,M)=>{this.worker.then(R=>{let F;F=s(V=>{const{message:$,key:X}=V.data;$===A&&X===O&&(R.removeEventListener("message",F),D(V.data))},"listener"),R.addEventListener("message",F),R.postMessage(T)}).catch(R=>{var F;(F=this.logger)===null||F===void 0||F.error("Failed to load worker.",R),M(R)})})}supportsSIMD(T){const A="simd",O=T||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,D={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:O,key:A};return this.roundtrip(D,"simd-support",A).then(M=>M.supports)}measure(T,A){const O=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,D=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,M=T?D:O,R=`bench:${T}`,F={message:"measure",fetchBehavior:this.fetchBehavior,budget:A,path:M,key:R};return this.roundtrip(F,"measurement",R).then(V=>{if(V.measurement)return V.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(T=>{var A;(A=this.logger)===null||A===void 0||A.debug("Stopping estimator worker."),T.terminate()}).catch(T=>{})}constructor(T,A){this.fetchConfig=T,this.logger=A;const O=`${T.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:T.headers,escapedQueryString:T.escapedQueryString},this.worker=h.loadWorker(O,"VoiceFocusEstimator",this.fetchBehavior,A)}},"Estimator");const g=s((C,T)=>C===1?n:T==="quality"?e*C:t*C,"inlineScoreMultiplier"),S=s(function(C){let{supportsSIMD:T,supportsSAB:A,duration:O,executionPreference:D="auto",simdPreference:M,variantPreference:R="auto",namePreference:F="default",usagePreference:V,executionQuantaPreference:$=p}=C,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Y=arguments.length>2?arguments[2]:void 0;const ie=M==="force"||M!=="disable"&&T,pe=O!==-1,Ee=pe?(ie?a:r)/O:0,Be=ie?X.simd:X.wasm,it=pe?g($,V)*Ee:0,Ce=pe?i*Ee:0,Me=F,je=s(vt=>({supported:!1,reason:vt}),"unsupported");if(pe){if(Ee<Be.noSupport)return je(`Performance score ${Ee} worse than threshold ${Be.noSupport}.`)}else if(D==="auto"||R==="auto")return je(`Missing explicit execution (${D}) or variant (${R}) preference, but no scoring performed.`);Y==null||Y.debug(`Bench duration ${O} yields inline score ${it} and worker score ${Ce}.`);const We=s((vt,De,Pe)=>({supported:!0,useSIMD:ie,processor:vt,executionApproach:De,variant:Pe,executionQuanta:De==="inline"?$:void 0,name:Me}),"succeed"),Ze=s((vt,De,Pe)=>De!=="auto"?!pe||vt>Pe[De]?De:"failed":vt>Pe.c100?"c100":vt>Pe.c50?"c50":vt>Pe.c20?"c20":vt>Pe.c10?"c10":"failed","resolveVariant"),ft=s(vt=>{switch(vt||"auto"){case"auto":{let De=ft("inline"),Pe=ft("worker");return Y==null||Y.debug(`Reducing auto preference: ${JSON.stringify(De)} vs ${JSON.stringify(Pe)}`),De.supported===!1||Pe.supported===!1?Pe:De.variant===Pe.variant||De.variant==="c50"?De:Pe}case"worker":return m.supportsSharedArrayBuffer(globalThis,window,Y)?ft("worker-sab"):ft("worker-postMessage");case"inline":{const De=Ze(it,R,Be.inline);return De==="failed"?je(`Performance score ${it} not sufficient for inline use with variant preference ${R}.`):We("voicefocus-inline-processor","inline",De)}case"worker-sab":{if(!A){const Pe="Requested worker-sab but no SharedArrayBuffer support.";return Y==null||Y.warn(Pe),{supported:!1,reason:Pe}}const De=Ze(Ce,R,Be.worker);return De==="failed"?je(`Performance score ${Ce} not sufficient for worker use with variant preference ${R}.`):We("voicefocus-worker-sab-processor","worker-sab",De)}case"worker-postMessage":{const De=Ze(Ce,R,Be.worker);if(De==="failed")return je(`Performance score ${Ce} not sufficient for worker use.`);if(Me==="ns_es"){const Pe="Requested echo suppression but postMessage executor does not support it.";return Y==null||Y.warn(Pe),{supported:!1,reason:Pe}}return We("voicefocus-worker-postMessage-processor","worker-postMessage",De)}}},"reducePreference");return ft(D)},"decideExecutionApproach"),u=s((C,T,A,O)=>c(void 0,void 0,void 0,function*(){const D={supportsSIMD:C,supportsSAB:m.supportsSharedArrayBuffer(globalThis,window,A),duration:-1};if(C)return A==null||A.info("Supports SIMD: true (force)"),D;const M=!O,R=O||new f(T,A);try{const F=!m.isOldChrome(window,A)&&(yield R.supportsSIMD());return A==null||A.info(`Supports SIMD: ${F} (force: ${C})`),D.supportsSIMD=F,D}finally{M&&R.stop()}}),"featureCheck"),v=s((C,T,A,O)=>c(void 0,void 0,void 0,function*(){const D=new f(T,O);try{const M=yield u(C,T,O,D);if(M.supportsSIMD)try{return M.duration=yield D.measure(!0,A),O==null||O.info("SIMD timing:",M.duration),M}catch{O==null||O.warn("Failed SIMD estimation; falling back to non-SIMD."),M.supportsSIMD=!1}return M.duration=yield D.measure(!1,A),O==null||O.info("No-SIMD timing:",M.duration),M}catch(M){throw O==null||O.error("Could not feature check.",M),M}finally{D.stop()}}),"estimateAndFeatureCheck"),y=s(function(C,T,A){let O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return c(void 0,void 0,void 0,function*(){let D=C.executionPreference;const{usagePreference:M,variantPreference:R,namePreference:F,simdPreference:V,estimatorBudget:$,executionQuantaPreference:X}=C;M==="interactivity"&&D!=="inline"&&(A==null||A.debug(`Overriding execution preference ${D} to reflect interactivity preference.`),D="inline");const Y=V==="force",ne=R!=="auto",ie=D!=="auto";let pe;try{ne&&ie?pe=yield u(Y,T,A):pe=yield v(Y,T,$,A)}catch(Ee){throw A==null||A.error("Could not load estimator.",Ee),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},pe),{simdPreference:V,executionPreference:D,variantPreference:R,namePreference:F,usagePreference:M,executionQuantaPreference:X}),O,A)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=y;const _=s(C=>{let{category:T,name:A,variant:O,simd:D,url:M}=C;return`${T}-${A}-${O}-v1${D?"_simd":""}`},"decideModel");l.decideModel=_},9463981249:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function d(e,t,i){if(!i)return fetch(e,t);const o=h(e,i),f=c(t,i);return fetch(o,f)}s(d,"fetchWithBehavior"),l.fetchWithBehavior=d;function c(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}s(c,"withRequestHeaders"),l.withRequestHeaders=c;function h(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}s(h,"withQueryString"),l.withQueryString=h;function m(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const f of i)o.append(f,t[f]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}s(m,"addQueryParams"),l.addQueryParams=m;const p={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return d(e,p,t).then(i=>i.redirected?i.url:e)}s(a,"resolveURL"),l.resolveURL=a;function r(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}s(r,"isValidAssetGroup"),l.isValidAssetGroup=r;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}s(n,"isValidRevisionID"),l.isValidRevisionID=n},5963876428:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const c=d(9463981249),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},m=s((p,a,r,n)=>{n==null||n.debug(`Loading ${a} worker from ${p}.`);let e=!1;try{e=self.origin===new URL(p).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=c.withQueryString(p,r);return Promise.resolve(new Worker(t,{name:a}))}return c.fetchWithBehavior(p,h,r).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=m},7984036634:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(u,v,y,_){function C(T){return T instanceof y?T:new y(function(A){A(T)})}return s(C,"adopt"),new(y||(y=Promise))(function(T,A){function O(R){try{M(_.next(R))}catch(F){A(F)}}s(O,"fulfilled");function D(R){try{M(_.throw(R))}catch(F){A(F)}}s(D,"rejected");function M(R){R.done?T(R.value):C(R.value).then(O,D)}s(M,"step"),M((_=_.apply(u,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=d(5963876428),m=s(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),p=s(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,y=v.match(/Safari\//),_=v.match(/Chrom(?:e|ium)\//);return!!(y&&!_)},"isSafari");l.isSafari=p;const a=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(u)?!1:m(u)?(g(u)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const r=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,y=arguments.length>2?arguments[2]:void 0;return c(void 0,void 0,void 0,function*(){if(!l.supportsWorker(u,y))return!1;const _=`${v.paths.workers}worker-v1.js`;try{const C=yield h.loadWorker(_,"VoiceFocusTestWorker",v,y);try{C.terminate()}catch(T){y==null||y.debug("Failed to terminate worker.",T)}return!0}catch(C){return y==null||y.info("Failed to fetch and instantiate test worker",C),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=r;const n=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.Worker}catch(y){return v==null||v.info("Does not support Worker",y),!1}},"supportsWorker");l.supportsWorker=n;const e=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.AudioWorklet&&!!u.AudioWorkletNode}catch(y){return v==null||v.info("Does not support Audio Worklet",y),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.WebAssembly&&(!!u.WebAssembly.compile||!!u.WebAssembly.compileStreaming)}catch(y){return v==null||v.info("Does not support WASM",y),!1}},"supportsWASM");l.supportsWASM=t;const i=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,y=arguments.length>2?arguments[2]:void 0;try{return!!u.SharedArrayBuffer&&(!!v.chrome||!!u.crossOriginIsolated)}catch{return y==null||y.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=i;const o=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var y;try{return!!(!((y=u.WebAssembly)===null||y===void 0)&&y.compileStreaming)}catch(_){return v==null||v.info("Does not support WASM streaming compilation",_),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const f=90,g=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!u.chrome)return}catch{}const v=u.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const y=g(u);return y&&y<f?(v==null||v.debug(`Chrome ${y} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},6021562188:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let d=s(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||s(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=d},5700998045:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return s(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(Be){try{Ee($.next(Be))}catch(it){ne(it)}}s(ie,"fulfilled");function pe(Be){try{Ee($.throw(Be))}catch(it){ne(it)}}s(pe,"rejected");function Ee(Be){Be.done?Y(Be.value):X(Be.value).then(ie,pe)}s(Ee,"step"),Ee(($=$.apply(R,F||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=d(7729790247),m=d(9463981249),p=d(5963876428),a=d(7984036634),r=d(79783582),n=d(161673934),e=d(641640331),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",f="https://static.sdkassets.chime.aws",g={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},S={latencyHint:0},u={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},u),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),y=Object.assign(Object.assign({},u),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),_={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:r.default}},C=s((R,F)=>{if(R!==void 0&&!m.isValidAssetGroup(R))throw new Error(`Invalid asset group ${R}`);if(F!==void 0&&!m.isValidRevisionID(F))throw new Error(`Invalid revision ID ${F}`)},"validateAssetSpec"),T=s((R,F)=>{let V;if(F.useBuiltInAGC?V=v:V=y,!R)return{audio:V};if(!R.audio)return R;if(R.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},R),{audio:R.audio===!0?V:Object.assign(Object.assign({},R.audio),V)})},"mungeConstraints"),A=s((R,F)=>`${F.models}${h.decideModel(R)}.wasm`,"urlForModel");let O=s(class yS{static isSupported(F,V){const{fetchBehavior:$,logger:X}=V||{};if(typeof globalThis>"u")return X==null||X.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,X))return X==null||X.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,X))return X==null||X.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,X)||X==null||X.debug("Browser does not support streaming WASM compilation.");const{assetGroup:Y=o,revisionID:ne,paths:ie=g}=F||{};C(Y,ne);const pe=ne?{revisionID:ne}:{assetGroup:Y},Ee=m.addQueryParams($,pe),Be=Object.assign(Object.assign({},Ee),{paths:ie});return a.supportsVoiceFocusWorker(globalThis,Be,X)}static mungeExecutionPreference(F,V){const $=F===void 0||F==="auto";if(a.isSafari(globalThis)){if($||F==="inline")return"inline";if(!$)throw new Error(`Unsupported execution preference ${F}`)}if(F==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,V))throw new Error(`Unsupported execution preference ${F}`);return F||"auto"}static configure(F,V){return c(this,void 0,void 0,function*(){const{fetchBehavior:$,preResolve:X,logger:Y}=V||{},{category:ne="voicefocus",name:ie="default",variant:pe="auto",assetGroup:Ee=o,revisionID:Be,simd:it="detect",executionPreference:Ce="auto",executionQuantaPreference:Me,usagePreference:je="interactivity",estimatorBudget:We=100,paths:Ze=g,thresholds:ft}=F||{};if(Y==null||Y.debug("Configuring Voice Focus with spec",F),ne!==void 0&&ne!=="voicefocus")throw new Error(`Unrecognized category ${ne}`);if(ie!==void 0&&ie!=="default"&&ie!=="ns_es")throw new Error(`Unrecognized feature name ${ie}`);if(pe!==void 0&&!["auto","c100","c50","c20","c10"].includes(pe))throw new Error(`Unrecognized feature variant ${pe}`);if(Me!==void 0&&![1,2,3].includes(Me))throw new Error(`Unrecognized execution quanta preference ${Me}`);if(C(Ee,Be),it!==void 0&&!["detect","force","disable"].includes(it))throw new Error(`Unrecognized SIMD option ${it}`);if(Ce!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ce))throw new Error(`Unrecognized execution preference ${Ce}`);if(je!==void 0&&!["quality","interactivity"].includes(je))throw new Error(`Unrecognized usage preference ${je}`);const vt={executionPreference:this.mungeExecutionPreference(Ce,Y),usagePreference:je,executionQuantaPreference:Me,variantPreference:pe,namePreference:ie,simdPreference:it,estimatorBudget:We},De=Be?{revisionID:Be}:{assetGroup:Ee},Pe=m.addQueryParams($,De),Ke=Object.assign({paths:Ze},Pe),Ye=yield h.measureAndDecideExecutionApproach(vt,Ke,Y,ft);if(Ye.supported===!1)return{supported:!1,reason:Ye.reason};Y==null||Y.info("Decided execution approach",Ye);const{useSIMD:xe,processor:Ct,variant:At,executionQuanta:Lt}=Ye,Ft={category:ne||"voicefocus",name:ie||"default",variant:At,simd:xe};if(X){const Jt=A(Ft,Ze);Ft.url=yield m.resolveURL(Jt,Pe)}return{fetchConfig:Ke,model:Ft,processor:Ct,executionQuanta:Lt,supported:!0}})}static init(F,V){let{delegate:$,preload:X=!0,logger:Y}=V;return c(this,void 0,void 0,function*(){if(F.supported===!1)throw new Error("Voice Focus not supported. Reason: "+F.reason);const{model:ne,processor:ie,fetchConfig:pe,executionQuanta:Ee}=F,{simd:Be,name:it}=ne,{paths:Ce}=pe;if(ie!=="voicefocus-inline-processor"&&ie!=="voicefocus-worker-postMessage-processor"&&ie!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ie}`);const Me=ne.url||A(ne,Ce);Y==null||Y.debug(`Using model URL ${Me}.`);const je=`${Ce.wasm}audio_buffer-v1${Be?"_simd":""}.wasm`,We=`${Ce.wasm}resampler-v1${Be?"_simd":""}.wasm`,Ze=`${Ce.workers}worker-v1.js`,{file:ft,node:vt}=_[ie],De=`${Ce.processors}${ft}`,Pe=yield p.loadWorker(Ze,"VoiceFocusWorker",pe,Y);if(X){Y==null||Y.debug("Preloading",Me);let Ct=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";Pe.postMessage({message:Ct,preload:!0,key:"model",fetchBehavior:pe,path:Me})}const Ye={processor:ie,worker:Pe,audioBufferURL:je,resamplerURL:We,fetchBehavior:pe,modelURL:Me,delegate:$,logger:Y,numberOfInputs:it==="ns_es"?2:1},xe=new yS(Pe,De,vt,Ye,Ee);return Promise.resolve(xe)})}createNode(F,V){var $;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:X=F.sampleRate===16e3?16e3:48e3,enabled:Y=!0,agc:ne=i}=V||{},ie=V==null?void 0:V.es,pe={voiceFocusSampleRate:X,enabled:Y,sendBufferCount:10,prefill:6,agc:ne,executionQuanta:this.executionQuanta,supportFarendStream:ie},Ee=m.withQueryString(this.processorURL,($=this.nodeOptions)===null||$===void 0?void 0:$.fetchBehavior);return F.audioWorklet.addModule(Ee).then(()=>new this.nodeConstructor(F,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:pe})))}applyToStream(F,V,$){return c(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const X=V.createMediaStreamSource(F),Y=yield this.applyToSourceNode(X,V,$),ne=V.createMediaStreamDestination();return Y.connect(ne),{node:Y,source:X,destination:ne,stream:ne.stream}})}applyToSourceNode(F,V,$){return c(this,void 0,void 0,function*(){const X=yield this.createNode(V,$);return F.connect(X),X})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(F,V,$,X,Y){this.processorURL=V,this.nodeConstructor=$,this.nodeOptions=X,this.executionQuanta=Y,this.internal={worker:F,nodeOptions:X,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=O;const D=s(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(R)},"createAudioContext");l.createAudioContext=D;const M=s((R,F,V)=>c(void 0,void 0,void 0,function*(){var $,X;const{constraints:Y,spec:ne,delegate:ie,preload:pe=!0,options:Ee}=F,{logger:Be}=V,it=yield O.configure(ne,V);if(!it.supported)return($=V.logger)===null||$===void 0||$.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(Y);const Ce=yield O.init(it,{delegate:ie,preload:pe,logger:Be}),Me=((X=F.options)===null||X===void 0?void 0:X.agc)||i,je=yield window.navigator.mediaDevices.getUserMedia(T(Y,Me));return Ce.applyToStream(je,R,Ee).then(We=>We.stream)}),"getAudioInput");l.getAudioInput=M},79783582:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7984036634),m=d(6021562188),p=5*1e3;let a=s(class extends m.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return c(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return c(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return c(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const f=Date.now(),g=this.cpuWarningLastTriggered||f,S=Math.abs(f-g);(!this.cpuWarningLastTriggered||S>p)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=f),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:f,delegate:g}=e;this.logger=f,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=g,f&&f.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},641640331:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7984036634),m=d(6021562188);let p=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return c(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return c(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return c(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(r){var n;const e=r.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(r){var n;const e=r.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(r,n){super(r,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:f}=n;this.delegate=f,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:g,agc:S,supportFarendStream:u}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:r.sampleRate===16e3?160:480,enabled:g,agc:S,fetchBehavior:o,model:e,supportFarendStream:u});const v=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=p},161673934:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7984036634),m=d(6021562188),p={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let r=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return c(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,p.enabled,a.enabled),Atomics.notify(this.state,p.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return c(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,p.enabled,a.disabled),Atomics.notify(this.state,p.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return c(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,p.enabled,a.stopped),Atomics.notify(this.state,p.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:f,fetchBehavior:g,delegate:S}=t;this.delegate=S,this.worker=f,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:u,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:u,model:i,supportFarendStream:v});const y=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"resampler",fetchBehavior:g,path:o})}},"VoiceFocusWorkerBufferNode");l.default=r},4499531780:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var c=d(8411923784),h=function(){function m(){this.state=Int32Array.from(c.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha2561"),m.prototype.update=function(p){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,r=p.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>c.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=p[a++],r--,this.bufferLength===c.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var p=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(a.setUint8(this.bufferLength++,128),r%c.BLOCK_SIZE>=c.BLOCK_SIZE-8){for(var n=this.bufferLength;n<c.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<c.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(c.BLOCK_SIZE-8,Math.floor(p/4294967296),!0),a.setUint32(c.BLOCK_SIZE-4,p),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(c.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var p=this,a=p.buffer,r=p.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],f=r[5],g=r[6],S=r[7],u=0;u<c.BLOCK_SIZE;u++){if(u<16)this.temp[u]=(a[u*4]&255)<<24|(a[u*4+1]&255)<<16|(a[u*4+2]&255)<<8|a[u*4+3]&255;else{var v=this.temp[u-2],y=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[u-15];var _=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[u]=(y+this.temp[u-7]|0)+(_+this.temp[u-16]|0)}var C=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&g)|0)+(S+(c.KEY[u]+this.temp[u]|0)|0)|0,T=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=g,g=f,f=o,o=i+C|0,i=t,t=e,e=n,n=C+T|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=f,r[6]+=g,r[7]+=S},m}();l.RawSha256=h},8411923784:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7288346005:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c=d(8842724253);c.__exportStar(d(9337996847),l)},9337996847:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var c=d(8842724253),h=d(8411923784),m=d(4499531780),p=d(7626896220),a=function(){function n(e){if(this.hash=new m.RawSha256,e){this.outer=new m.RawSha256;var t=r(e),i=new Uint8Array(h.BLOCK_SIZE);i.set(t);for(var o=0;o<h.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return s(n,"Sha2561"),n.prototype.update=function(e){if(!((0,p.isEmptyData)(e)||this.error))try{this.hash.update((0,p.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(e){return[2,this.digestSync()]})})},n}();l.Sha256=a;function r(n){var e=(0,p.convertToBuffer)(n);if(e.byteLength>h.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(h.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},271264648:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var c=d(2412280125),h=typeof Buffer<"u"&&Buffer.from?function(p){return Buffer.from(p,"utf8")}:c.fromUtf8;function m(p){return p instanceof Uint8Array?p:typeof p=="string"?h(p):ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(p)}s(m,"convertToBuffer"),l.convertToBuffer=m},7626896220:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var c=d(271264648);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return c.convertToBuffer}});var h=d(8695908309);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var m=d(3332263431);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var p=d(5480401346);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return p.uint32ArrayFrom}})},8695908309:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function d(c){return typeof c=="string"?c.length===0:c.byteLength===0}s(d,"isEmptyData"),l.isEmptyData=d},3332263431:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function d(c){return new Uint8Array([(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255])}s(d,"numToUint8"),l.numToUint8=d},5480401346:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function d(c){if(!Uint32Array.from){for(var h=new Uint32Array(c.length),m=0;m<c.length;)h[m]=c[m],m+=1;return h}return Uint32Array.from(c)}s(d,"uint32ArrayFrom"),l.uint32ArrayFrom=d},9385915920:(x,l,d)=>{"use strict";const{Deflate:c,deflate:h,deflateRaw:m,gzip:p}=d(5602788515),{Inflate:a,inflate:r,inflateRaw:n,ungzip:e}=d(6716562227),t=d(7496116979);x.exports.Deflate=c,x.exports.deflate=h,x.exports.deflateRaw=m,x.exports.gzip=p,x.exports.Inflate=a,x.exports.inflate=r,x.exports.inflateRaw=n,x.exports.ungzip=e,x.exports.constants=t},5602788515:(x,l,d)=>{"use strict";const c=d(872668561),h=d(4109671863),m=d(931830944),p=d(3435039830),a=d(8713386032),r=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:u}=d(7496116979);function v(T){this.options=h.assign({level:g,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},T||{});let A=this.options;A.raw&&A.windowBits>0?A.windowBits=-A.windowBits:A.gzip&&A.windowBits>0&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let O=c.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(O!==o)throw new Error(p[O]);if(A.header&&c.deflateSetHeader(this.strm,A.header),A.dictionary){let D;if(typeof A.dictionary=="string"?D=m.string2buf(A.dictionary):r.call(A.dictionary)==="[object ArrayBuffer]"?D=new Uint8Array(A.dictionary):D=A.dictionary,O=c.deflateSetDictionary(this.strm,D),O!==o)throw new Error(p[O]);this._dict_set=!0}}s(v,"Deflate"),v.prototype.push=function(T,A){const O=this.strm,D=this.options.chunkSize;let M,R;if(this.ended)return!1;for(A===~~A?R=A:R=A===!0?i:n,typeof T=="string"?O.input=m.string2buf(T):r.call(T)==="[object ArrayBuffer]"?O.input=new Uint8Array(T):O.input=T,O.next_in=0,O.avail_in=O.input.length;;){if(O.avail_out===0&&(O.output=new Uint8Array(D),O.next_out=0,O.avail_out=D),(R===e||R===t)&&O.avail_out<=6){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(M=c.deflate(O,R),M===f)return O.next_out>0&&this.onData(O.output.subarray(0,O.next_out)),M=c.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===o;if(O.avail_out===0){this.onData(O.output);continue}if(R>0&&O.next_out>0){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(O.avail_in===0)break}return!0},v.prototype.onData=function(T){this.chunks.push(T)},v.prototype.onEnd=function(T){T===o&&(this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function y(T,A){const O=new v(A);if(O.push(T,!0),O.err)throw O.msg||p[O.err];return O.result}s(y,"deflate");function _(T,A){return A=A||{},A.raw=!0,y(T,A)}s(_,"deflateRaw");function C(T,A){return A=A||{},A.gzip=!0,y(T,A)}s(C,"gzip"),x.exports.Deflate=v,x.exports.deflate=y,x.exports.deflateRaw=_,x.exports.gzip=C,x.exports.constants=d(7496116979)},6716562227:(x,l,d)=>{"use strict";const c=d(4532140493),h=d(4109671863),m=d(931830944),p=d(3435039830),a=d(8713386032),r=d(5341695802),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:f,Z_STREAM_ERROR:g,Z_DATA_ERROR:S,Z_MEM_ERROR:u}=d(7496116979);function v(C){this.options=h.assign({chunkSize:1024*64,windowBits:15,to:""},C||{});const T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(C&&C.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let A=c.inflateInit2(this.strm,T.windowBits);if(A!==i)throw new Error(p[A]);if(this.header=new r,c.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=m.string2buf(T.dictionary):n.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(A=c.inflateSetDictionary(this.strm,T.dictionary),A!==i)))throw new Error(p[A])}s(v,"Inflate"),v.prototype.push=function(C,T){const A=this.strm,O=this.options.chunkSize,D=this.options.dictionary;let M,R,F;if(this.ended)return!1;for(T===~~T?R=T:R=T===!0?t:e,n.call(C)==="[object ArrayBuffer]"?A.input=new Uint8Array(C):A.input=C,A.next_in=0,A.avail_in=A.input.length;;){for(A.avail_out===0&&(A.output=new Uint8Array(O),A.next_out=0,A.avail_out=O),M=c.inflate(A,R),M===f&&D&&(M=c.inflateSetDictionary(A,D),M===i?M=c.inflate(A,R):M===S&&(M=f));A.avail_in>0&&M===o&&A.state.wrap>0&&C[A.next_in]!==0;)c.inflateReset(A),M=c.inflate(A,R);switch(M){case g:case S:case f:case u:return this.onEnd(M),this.ended=!0,!1}if(F=A.avail_out,A.next_out&&(A.avail_out===0||M===o))if(this.options.to==="string"){let V=m.utf8border(A.output,A.next_out),$=A.next_out-V,X=m.buf2string(A.output,V);A.next_out=$,A.avail_out=O-$,$&&A.output.set(A.output.subarray(V,V+$),0),this.onData(X)}else this.onData(A.output.length===A.next_out?A.output:A.output.subarray(0,A.next_out));if(!(M===i&&F===0)){if(M===o)return M=c.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,!0;if(A.avail_in===0)break}}return!0},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function y(C,T){const A=new v(T);if(A.push(C),A.err)throw A.msg||p[A.err];return A.result}s(y,"inflate");function _(C,T){return T=T||{},T.raw=!0,y(C,T)}s(_,"inflateRaw"),x.exports.Inflate=v,x.exports.inflate=y,x.exports.inflateRaw=_,x.exports.ungzip=y,x.exports.constants=d(7496116979)},4109671863:x=>{"use strict";const l=s((d,c)=>Object.prototype.hasOwnProperty.call(d,c),"_has");x.exports.assign=function(d){const c=Array.prototype.slice.call(arguments,1);for(;c.length;){const h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const m in h)l(h,m)&&(d[m]=h[m])}}return d},x.exports.flattenChunks=d=>{let c=0;for(let m=0,p=d.length;m<p;m++)c+=d[m].length;const h=new Uint8Array(c);for(let m=0,p=0,a=d.length;m<a;m++){let r=d[m];h.set(r,p),p+=r.length}return h}},931830944:x=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const d=new Uint8Array(256);for(let h=0;h<256;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,x.exports.string2buf=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let m,p,a,r,n,e=h.length,t=0;for(r=0;r<e;r++)p=h.charCodeAt(r),(p&64512)===55296&&r+1<e&&(a=h.charCodeAt(r+1),(a&64512)===56320&&(p=65536+(p-55296<<10)+(a-56320),r++)),t+=p<128?1:p<2048?2:p<65536?3:4;for(m=new Uint8Array(t),n=0,r=0;n<t;r++)p=h.charCodeAt(r),(p&64512)===55296&&r+1<e&&(a=h.charCodeAt(r+1),(a&64512)===56320&&(p=65536+(p-55296<<10)+(a-56320),r++)),p<128?m[n++]=p:p<2048?(m[n++]=192|p>>>6,m[n++]=128|p&63):p<65536?(m[n++]=224|p>>>12,m[n++]=128|p>>>6&63,m[n++]=128|p&63):(m[n++]=240|p>>>18,m[n++]=128|p>>>12&63,m[n++]=128|p>>>6&63,m[n++]=128|p&63);return m};const c=s((h,m)=>{if(m<65534&&h.subarray&&l)return String.fromCharCode.apply(null,h.length===m?h:h.subarray(0,m));let p="";for(let a=0;a<m;a++)p+=String.fromCharCode(h[a]);return p},"buf2binstring");x.exports.buf2string=(h,m)=>{const p=m||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,m));let a,r;const n=new Array(p*2);for(r=0,a=0;a<p;){let e=h[a++];if(e<128){n[r++]=e;continue}let t=d[e];if(t>4){n[r++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<p;)e=e<<6|h[a++]&63,t--;if(t>1){n[r++]=65533;continue}e<65536?n[r++]=e:(e-=65536,n[r++]=55296|e>>10&1023,n[r++]=56320|e&1023)}return c(n,r)},x.exports.utf8border=(h,m)=>{m=m||h.length,m>h.length&&(m=h.length);let p=m-1;for(;p>=0&&(h[p]&192)===128;)p--;return p<0||p===0?m:p+d[h[p]]>m?p:m}},7775889903:x=>{"use strict";const l=s((d,c,h,m)=>{let p=d&65535|0,a=d>>>16&65535|0,r=0;for(;h!==0;){r=h>2e3?2e3:h,h-=r;do p=p+c[m++]|0,a=a+p|0;while(--r);p%=65521,a%=65521}return p|a<<16|0},"adler32");x.exports=l},7496116979:x=>{"use strict";x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},9538018229:x=>{"use strict";const l=s(()=>{let h,m=[];for(var p=0;p<256;p++){h=p;for(var a=0;a<8;a++)h=h&1?3988292384^h>>>1:h>>>1;m[p]=h}return m},"makeTable"),d=new Uint32Array(l()),c=s((h,m,p,a)=>{const r=d,n=a+p;h^=-1;for(let e=a;e<n;e++)h=h>>>8^r[(h^m[e])&255];return h^-1},"crc32");x.exports=c},872668561:(x,l,d)=>{"use strict";const{_tr_init:c,_tr_stored_block:h,_tr_flush_block:m,_tr_tally:p,_tr_align:a}=d(8891166839),r=d(7775889903),n=d(9538018229),e=d(3435039830),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:f,Z_BLOCK:g,Z_OK:S,Z_STREAM_END:u,Z_STREAM_ERROR:v,Z_DATA_ERROR:y,Z_BUF_ERROR:_,Z_DEFAULT_COMPRESSION:C,Z_FILTERED:T,Z_HUFFMAN_ONLY:A,Z_RLE:O,Z_FIXED:D,Z_DEFAULT_STRATEGY:M,Z_UNKNOWN:R,Z_DEFLATED:F}=d(7496116979),V=9,$=15,X=8,Y=29,ie=256+1+Y,pe=30,Ee=19,Be=2*ie+1,it=15,Ce=3,Me=258,je=Me+Ce+1,We=32,Ze=42,ft=69,vt=73,De=91,Pe=103,Ke=113,Ye=666,xe=1,Ct=2,At=3,Lt=4,Ft=3,Jt=s((k,he)=>(k.msg=e[he],he),"err"),It=s(k=>(k<<1)-(k>4?9:0),"rank"),ln=s(k=>{let he=k.length;for(;--he>=0;)k[he]=0},"zero");let yn=s((k,he,Se)=>(he<<k.hash_shift^Se)&k.hash_mask,"HASH_ZLIB");const zt=s(k=>{const he=k.state;let Se=he.pending;Se>k.avail_out&&(Se=k.avail_out),Se!==0&&(k.output.set(he.pending_buf.subarray(he.pending_out,he.pending_out+Se),k.next_out),k.next_out+=Se,he.pending_out+=Se,k.total_out+=Se,k.avail_out-=Se,he.pending-=Se,he.pending===0&&(he.pending_out=0))},"flush_pending"),Yt=s((k,he)=>{m(k,k.block_start>=0?k.block_start:-1,k.strstart-k.block_start,he),k.block_start=k.strstart,zt(k.strm)},"flush_block_only"),Mt=s((k,he)=>{k.pending_buf[k.pending++]=he},"put_byte"),Vt=s((k,he)=>{k.pending_buf[k.pending++]=he>>>8&255,k.pending_buf[k.pending++]=he&255},"putShortMSB"),$t=s((k,he,Se,be)=>{let te=k.avail_in;return te>be&&(te=be),te===0?0:(k.avail_in-=te,he.set(k.input.subarray(k.next_in,k.next_in+te),Se),k.state.wrap===1?k.adler=r(k.adler,he,te,Se):k.state.wrap===2&&(k.adler=n(k.adler,he,te,Se)),k.next_in+=te,k.total_in+=te,te)},"read_buf"),xt=s((k,he)=>{let Se=k.max_chain_length,be=k.strstart,te,Nt,nt=k.prev_length,mt=k.nice_match;const pn=k.strstart>k.w_size-je?k.strstart-(k.w_size-je):0,Pt=k.window,Mi=k.w_mask,ai=k.prev,un=k.strstart+Me;let Hn=Pt[be+nt-1],mn=Pt[be+nt];k.prev_length>=k.good_match&&(Se>>=2),mt>k.lookahead&&(mt=k.lookahead);do if(te=he,!(Pt[te+nt]!==mn||Pt[te+nt-1]!==Hn||Pt[te]!==Pt[be]||Pt[++te]!==Pt[be+1])){be+=2,te++;do;while(Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&be<un);if(Nt=Me-(un-be),be=un-Me,Nt>nt){if(k.match_start=he,nt=Nt,Nt>=mt)break;Hn=Pt[be+nt-1],mn=Pt[be+nt]}}while((he=ai[he&Mi])>pn&&--Se!==0);return nt<=k.lookahead?nt:k.lookahead},"longest_match"),jt=s(k=>{const he=k.w_size;let Se,be,te,Nt,nt;do{if(Nt=k.window_size-k.lookahead-k.strstart,k.strstart>=he+(he-je)){k.window.set(k.window.subarray(he,he+he),0),k.match_start-=he,k.strstart-=he,k.block_start-=he,be=k.hash_size,Se=be;do te=k.head[--Se],k.head[Se]=te>=he?te-he:0;while(--be);be=he,Se=be;do te=k.prev[--Se],k.prev[Se]=te>=he?te-he:0;while(--be);Nt+=he}if(k.strm.avail_in===0)break;if(be=$t(k.strm,k.window,k.strstart+k.lookahead,Nt),k.lookahead+=be,k.lookahead+k.insert>=Ce)for(nt=k.strstart-k.insert,k.ins_h=k.window[nt],k.ins_h=yn(k,k.ins_h,k.window[nt+1]);k.insert&&(k.ins_h=yn(k,k.ins_h,k.window[nt+Ce-1]),k.prev[nt&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=nt,nt++,k.insert--,!(k.lookahead+k.insert<Ce)););}while(k.lookahead<je&&k.strm.avail_in!==0)},"fill_window"),J=s((k,he)=>{let Se=65535;for(Se>k.pending_buf_size-5&&(Se=k.pending_buf_size-5);;){if(k.lookahead<=1){if(jt(k),k.lookahead===0&&he===t)return xe;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;const be=k.block_start+Se;if((k.strstart===0||k.strstart>=be)&&(k.lookahead=k.strstart-be,k.strstart=be,Yt(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-je&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=0,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):(k.strstart>k.block_start&&(Yt(k,!1),k.strm.avail_out===0),xe)},"deflate_stored"),Fe=s((k,he)=>{let Se,be;for(;;){if(k.lookahead<je){if(jt(k),k.lookahead<je&&he===t)return xe;if(k.lookahead===0)break}if(Se=0,k.lookahead>=Ce&&(k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),Se!==0&&k.strstart-Se<=k.w_size-je&&(k.match_length=xt(k,Se)),k.match_length>=Ce)if(be=p(k,k.strstart-k.match_start,k.match_length-Ce),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=Ce){k.match_length--;do k.strstart++,k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart;while(--k.match_length!==0);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=yn(k,k.ins_h,k.window[k.strstart+1]);else be=p(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(be&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=k.strstart<Ce-1?k.strstart:Ce-1,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_fast"),ke=s((k,he)=>{let Se,be,te;for(;;){if(k.lookahead<je){if(jt(k),k.lookahead<je&&he===t)return xe;if(k.lookahead===0)break}if(Se=0,k.lookahead>=Ce&&(k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=Ce-1,Se!==0&&k.prev_length<k.max_lazy_match&&k.strstart-Se<=k.w_size-je&&(k.match_length=xt(k,Se),k.match_length<=5&&(k.strategy===T||k.match_length===Ce&&k.strstart-k.match_start>4096)&&(k.match_length=Ce-1)),k.prev_length>=Ce&&k.match_length<=k.prev_length){te=k.strstart+k.lookahead-Ce,be=p(k,k.strstart-1-k.prev_match,k.prev_length-Ce),k.lookahead-=k.prev_length-1,k.prev_length-=2;do++k.strstart<=te&&(k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart);while(--k.prev_length!==0);if(k.match_available=0,k.match_length=Ce-1,k.strstart++,be&&(Yt(k,!1),k.strm.avail_out===0))return xe}else if(k.match_available){if(be=p(k,0,k.window[k.strstart-1]),be&&Yt(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return xe}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(be=p(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<Ce-1?k.strstart:Ce-1,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_slow"),Ge=s((k,he)=>{let Se,be,te,Nt;const nt=k.window;for(;;){if(k.lookahead<=Me){if(jt(k),k.lookahead<=Me&&he===t)return xe;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=Ce&&k.strstart>0&&(te=k.strstart-1,be=nt[te],be===nt[++te]&&be===nt[++te]&&be===nt[++te])){Nt=k.strstart+Me;do;while(be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&te<Nt);k.match_length=Me-(Nt-te),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=Ce?(Se=p(k,1,k.match_length-Ce),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(Se=p(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),Se&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=0,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_rle"),gt=s((k,he)=>{let Se;for(;;){if(k.lookahead===0&&(jt(k),k.lookahead===0)){if(he===t)return xe;break}if(k.match_length=0,Se=p(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,Se&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=0,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_huff");function at(k,he,Se,be,te){this.good_length=k,this.max_lazy=he,this.nice_length=Se,this.max_chain=be,this.func=te}s(at,"Config");const ae=[new at(0,0,0,0,J),new at(4,4,8,4,Fe),new at(4,5,16,8,Fe),new at(4,6,32,32,Fe),new at(4,4,16,16,ke),new at(8,16,32,32,ke),new at(8,16,128,128,ke),new at(8,32,128,256,ke),new at(32,128,258,1024,ke),new at(32,258,258,4096,ke)],Le=s(k=>{k.window_size=2*k.w_size,ln(k.head),k.max_lazy_match=ae[k.level].max_lazy,k.good_match=ae[k.level].good_length,k.nice_match=ae[k.level].nice_length,k.max_chain_length=ae[k.level].max_chain,k.strstart=0,k.block_start=0,k.lookahead=0,k.insert=0,k.match_length=k.prev_length=Ce-1,k.match_available=0,k.ins_h=0},"lm_init");function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Be*2),this.dyn_dtree=new Uint16Array((2*pe+1)*2),this.bl_tree=new Uint16Array((2*Ee+1)*2),ln(this.dyn_ltree),ln(this.dyn_dtree),ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(it+1),this.heap=new Uint16Array(2*ie+1),ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ie+1),ln(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}s(G,"DeflateState");const Z=s(k=>{if(!k||!k.state)return Jt(k,v);k.total_in=k.total_out=0,k.data_type=R;const he=k.state;return he.pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?Ze:Ke,k.adler=he.wrap===2?0:1,he.last_flush=t,c(he),S},"deflateResetKeep"),me=s(k=>{const he=Z(k);return he===S&&Le(k.state),he},"deflateReset"),ge=s((k,he)=>!k||!k.state||k.state.wrap!==2?v:(k.state.gzhead=he,S),"deflateSetHeader"),rt=s((k,he,Se,be,te,Nt)=>{if(!k)return v;let nt=1;if(he===C&&(he=6),be<0?(nt=0,be=-be):be>15&&(nt=2,be-=16),te<1||te>V||Se!==F||be<8||be>15||he<0||he>9||Nt<0||Nt>D)return Jt(k,v);be===8&&(be=9);const mt=new G;return k.state=mt,mt.strm=k,mt.wrap=nt,mt.gzhead=null,mt.w_bits=be,mt.w_size=1<<mt.w_bits,mt.w_mask=mt.w_size-1,mt.hash_bits=te+7,mt.hash_size=1<<mt.hash_bits,mt.hash_mask=mt.hash_size-1,mt.hash_shift=~~((mt.hash_bits+Ce-1)/Ce),mt.window=new Uint8Array(mt.w_size*2),mt.head=new Uint16Array(mt.hash_size),mt.prev=new Uint16Array(mt.w_size),mt.lit_bufsize=1<<te+6,mt.pending_buf_size=mt.lit_bufsize*4,mt.pending_buf=new Uint8Array(mt.pending_buf_size),mt.d_buf=1*mt.lit_bufsize,mt.l_buf=(1+2)*mt.lit_bufsize,mt.level=he,mt.strategy=Nt,mt.method=Se,me(k)},"deflateInit2"),Ue=s((k,he)=>rt(k,he,F,$,X,M),"deflateInit"),Xe=s((k,he)=>{let Se,be;if(!k||!k.state||he>g||he<0)return k?Jt(k,v):v;const te=k.state;if(!k.output||!k.input&&k.avail_in!==0||te.status===Ye&&he!==f)return Jt(k,k.avail_out===0?_:v);te.strm=k;const Nt=te.last_flush;if(te.last_flush=he,te.status===Ze)if(te.wrap===2)k.adler=0,Mt(te,31),Mt(te,139),Mt(te,8),te.gzhead?(Mt(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),Mt(te,te.gzhead.time&255),Mt(te,te.gzhead.time>>8&255),Mt(te,te.gzhead.time>>16&255),Mt(te,te.gzhead.time>>24&255),Mt(te,te.level===9?2:te.strategy>=A||te.level<2?4:0),Mt(te,te.gzhead.os&255),te.gzhead.extra&&te.gzhead.extra.length&&(Mt(te,te.gzhead.extra.length&255),Mt(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(k.adler=n(k.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=ft):(Mt(te,0),Mt(te,0),Mt(te,0),Mt(te,0),Mt(te,0),Mt(te,te.level===9?2:te.strategy>=A||te.level<2?4:0),Mt(te,Ft),te.status=Ke);else{let nt=F+(te.w_bits-8<<4)<<8,mt=-1;te.strategy>=A||te.level<2?mt=0:te.level<6?mt=1:te.level===6?mt=2:mt=3,nt|=mt<<6,te.strstart!==0&&(nt|=We),nt+=31-nt%31,te.status=Ke,Vt(te,nt),te.strstart!==0&&(Vt(te,k.adler>>>16),Vt(te,k.adler&65535)),k.adler=1}if(te.status===ft)if(te.gzhead.extra){for(Se=te.pending;te.gzindex<(te.gzhead.extra.length&65535)&&!(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),zt(k),Se=te.pending,te.pending===te.pending_buf_size));)Mt(te,te.gzhead.extra[te.gzindex]&255),te.gzindex++;te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=vt)}else te.status=vt;if(te.status===vt)if(te.gzhead.name){Se=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),zt(k),Se=te.pending,te.pending===te.pending_buf_size)){be=1;break}te.gzindex<te.gzhead.name.length?be=te.gzhead.name.charCodeAt(te.gzindex++)&255:be=0,Mt(te,be)}while(be!==0);te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),be===0&&(te.gzindex=0,te.status=De)}else te.status=De;if(te.status===De)if(te.gzhead.comment){Se=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),zt(k),Se=te.pending,te.pending===te.pending_buf_size)){be=1;break}te.gzindex<te.gzhead.comment.length?be=te.gzhead.comment.charCodeAt(te.gzindex++)&255:be=0,Mt(te,be)}while(be!==0);te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),be===0&&(te.status=Pe)}else te.status=Pe;if(te.status===Pe&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&zt(k),te.pending+2<=te.pending_buf_size&&(Mt(te,k.adler&255),Mt(te,k.adler>>8&255),k.adler=0,te.status=Ke)):te.status=Ke),te.pending!==0){if(zt(k),k.avail_out===0)return te.last_flush=-1,S}else if(k.avail_in===0&&It(he)<=It(Nt)&&he!==f)return Jt(k,_);if(te.status===Ye&&k.avail_in!==0)return Jt(k,_);if(k.avail_in!==0||te.lookahead!==0||he!==t&&te.status!==Ye){let nt=te.strategy===A?gt(te,he):te.strategy===O?Ge(te,he):ae[te.level].func(te,he);if((nt===At||nt===Lt)&&(te.status=Ye),nt===xe||nt===At)return k.avail_out===0&&(te.last_flush=-1),S;if(nt===Ct&&(he===i?a(te):he!==g&&(h(te,0,0,!1),he===o&&(ln(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),zt(k),k.avail_out===0))return te.last_flush=-1,S}return he!==f?S:te.wrap<=0?u:(te.wrap===2?(Mt(te,k.adler&255),Mt(te,k.adler>>8&255),Mt(te,k.adler>>16&255),Mt(te,k.adler>>24&255),Mt(te,k.total_in&255),Mt(te,k.total_in>>8&255),Mt(te,k.total_in>>16&255),Mt(te,k.total_in>>24&255)):(Vt(te,k.adler>>>16),Vt(te,k.adler&65535)),zt(k),te.wrap>0&&(te.wrap=-te.wrap),te.pending!==0?S:u)},"deflate"),fe=s(k=>{if(!k||!k.state)return v;const he=k.state.status;return he!==Ze&&he!==ft&&he!==vt&&he!==De&&he!==Pe&&he!==Ke&&he!==Ye?Jt(k,v):(k.state=null,he===Ke?Jt(k,y):S)},"deflateEnd"),Te=s((k,he)=>{let Se=he.length;if(!k||!k.state)return v;const be=k.state,te=be.wrap;if(te===2||te===1&&be.status!==Ze||be.lookahead)return v;if(te===1&&(k.adler=r(k.adler,he,Se,0)),be.wrap=0,Se>=be.w_size){te===0&&(ln(be.head),be.strstart=0,be.block_start=0,be.insert=0);let pn=new Uint8Array(be.w_size);pn.set(he.subarray(Se-be.w_size,Se),0),he=pn,Se=be.w_size}const Nt=k.avail_in,nt=k.next_in,mt=k.input;for(k.avail_in=Se,k.next_in=0,k.input=he,jt(be);be.lookahead>=Ce;){let pn=be.strstart,Pt=be.lookahead-(Ce-1);do be.ins_h=yn(be,be.ins_h,be.window[pn+Ce-1]),be.prev[pn&be.w_mask]=be.head[be.ins_h],be.head[be.ins_h]=pn,pn++;while(--Pt);be.strstart=pn,be.lookahead=Ce-1,jt(be)}return be.strstart+=be.lookahead,be.block_start=be.strstart,be.insert=be.lookahead,be.lookahead=0,be.match_length=be.prev_length=Ce-1,be.match_available=0,k.next_in=nt,k.input=mt,k.avail_in=Nt,be.wrap=te,S},"deflateSetDictionary");x.exports.deflateInit=Ue,x.exports.deflateInit2=rt,x.exports.deflateReset=me,x.exports.deflateResetKeep=Z,x.exports.deflateSetHeader=ge,x.exports.deflate=Xe,x.exports.deflateEnd=fe,x.exports.deflateSetDictionary=Te,x.exports.deflateInfo="pako deflate (from Nodeca project)"},5341695802:x=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s(l,"GZheader"),x.exports=l},4690928475:x=>{"use strict";x.exports=s(function(h,m){let p,a,r,n,e,t,i,o,f,g,S,u,v,y,_,C,T,A,O,D,M,R,F,V;const $=h.state;p=h.next_in,F=h.input,a=p+(h.avail_in-5),r=h.next_out,V=h.output,n=r-(m-h.avail_out),e=r+(h.avail_out-257),t=$.dmax,i=$.wsize,o=$.whave,f=$.wnext,g=$.window,S=$.hold,u=$.bits,v=$.lencode,y=$.distcode,_=(1<<$.lenbits)-1,C=(1<<$.distbits)-1;e:do{u<15&&(S+=F[p++]<<u,u+=8,S+=F[p++]<<u,u+=8),T=v[S&_];t:for(;;){if(A=T>>>24,S>>>=A,u-=A,A=T>>>16&255,A===0)V[r++]=T&65535;else if(A&16){O=T&65535,A&=15,A&&(u<A&&(S+=F[p++]<<u,u+=8),O+=S&(1<<A)-1,S>>>=A,u-=A),u<15&&(S+=F[p++]<<u,u+=8,S+=F[p++]<<u,u+=8),T=y[S&C];n:for(;;){if(A=T>>>24,S>>>=A,u-=A,A=T>>>16&255,A&16){if(D=T&65535,A&=15,u<A&&(S+=F[p++]<<u,u+=8,u<A&&(S+=F[p++]<<u,u+=8)),D+=S&(1<<A)-1,D>t){h.msg="invalid distance too far back",$.mode=30;break e}if(S>>>=A,u-=A,A=r-n,D>A){if(A=D-A,A>o&&$.sane){h.msg="invalid distance too far back",$.mode=30;break e}if(M=0,R=g,f===0){if(M+=i-A,A<O){O-=A;do V[r++]=g[M++];while(--A);M=r-D,R=V}}else if(f<A){if(M+=i+f-A,A-=f,A<O){O-=A;do V[r++]=g[M++];while(--A);if(M=0,f<O){A=f,O-=A;do V[r++]=g[M++];while(--A);M=r-D,R=V}}}else if(M+=f-A,A<O){O-=A;do V[r++]=g[M++];while(--A);M=r-D,R=V}for(;O>2;)V[r++]=R[M++],V[r++]=R[M++],V[r++]=R[M++],O-=3;O&&(V[r++]=R[M++],O>1&&(V[r++]=R[M++]))}else{M=r-D;do V[r++]=V[M++],V[r++]=V[M++],V[r++]=V[M++],O-=3;while(O>2);O&&(V[r++]=V[M++],O>1&&(V[r++]=V[M++]))}}else if(A&64){h.msg="invalid distance code",$.mode=30;break e}else{T=y[(T&65535)+(S&(1<<A)-1)];continue n}break}}else if(A&64)if(A&32){$.mode=12;break e}else{h.msg="invalid literal/length code",$.mode=30;break e}else{T=v[(T&65535)+(S&(1<<A)-1)];continue t}break}}while(p<a&&r<e);O=u>>3,p-=O,u-=O<<3,S&=(1<<u)-1,h.next_in=p,h.next_out=r,h.avail_in=p<a?5+(a-p):5-(p-a),h.avail_out=r<e?257+(e-r):257-(r-e),$.hold=S,$.bits=u},"inflate_fast")},4532140493:(x,l,d)=>{"use strict";const c=d(7775889903),h=d(9538018229),m=d(4690928475),p=d(9709058974),a=0,r=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:f,Z_NEED_DICT:g,Z_STREAM_ERROR:S,Z_DATA_ERROR:u,Z_MEM_ERROR:v,Z_BUF_ERROR:y,Z_DEFLATED:_}=d(7496116979),C=1,T=2,A=3,O=4,D=5,M=6,R=7,F=8,V=9,$=10,X=11,Y=12,ne=13,ie=14,pe=15,Ee=16,Be=17,it=18,Ce=19,Me=20,je=21,We=22,Ze=23,ft=24,vt=25,De=26,Pe=27,Ke=28,Ye=29,xe=30,Ct=31,At=32,Lt=852,Ft=592,It=15,ln=s(ae=>(ae>>>24&255)+(ae>>>8&65280)+((ae&65280)<<8)+((ae&255)<<24),"zswap32");function $n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}s($n,"InflateState");const yn=s(ae=>{if(!ae||!ae.state)return S;const Le=ae.state;return ae.total_in=ae.total_out=Le.total=0,ae.msg="",Le.wrap&&(ae.adler=Le.wrap&1),Le.mode=C,Le.last=0,Le.havedict=0,Le.dmax=32768,Le.head=null,Le.hold=0,Le.bits=0,Le.lencode=Le.lendyn=new Int32Array(Lt),Le.distcode=Le.distdyn=new Int32Array(Ft),Le.sane=1,Le.back=-1,o},"inflateResetKeep"),zt=s(ae=>{if(!ae||!ae.state)return S;const Le=ae.state;return Le.wsize=0,Le.whave=0,Le.wnext=0,yn(ae)},"inflateReset"),Yt=s((ae,Le)=>{let G;if(!ae||!ae.state)return S;const Z=ae.state;return Le<0?(G=0,Le=-Le):(G=(Le>>4)+1,Le<48&&(Le&=15)),Le&&(Le<8||Le>15)?S:(Z.window!==null&&Z.wbits!==Le&&(Z.window=null),Z.wrap=G,Z.wbits=Le,zt(ae))},"inflateReset2"),Mt=s((ae,Le)=>{if(!ae)return S;const G=new $n;ae.state=G,G.window=null;const Z=Yt(ae,Le);return Z!==o&&(ae.state=null),Z},"inflateInit2"),Vt=s(ae=>Mt(ae,It),"inflateInit");let $t=!0,xt,jt;const J=s(ae=>{if($t){xt=new Int32Array(512),jt=new Int32Array(32);let Le=0;for(;Le<144;)ae.lens[Le++]=8;for(;Le<256;)ae.lens[Le++]=9;for(;Le<280;)ae.lens[Le++]=7;for(;Le<288;)ae.lens[Le++]=8;for(p(r,ae.lens,0,288,xt,0,ae.work,{bits:9}),Le=0;Le<32;)ae.lens[Le++]=5;p(n,ae.lens,0,32,jt,0,ae.work,{bits:5}),$t=!1}ae.lencode=xt,ae.lenbits=9,ae.distcode=jt,ae.distbits=5},"fixedtables"),Fe=s((ae,Le,G,Z)=>{let me;const ge=ae.state;return ge.window===null&&(ge.wsize=1<<ge.wbits,ge.wnext=0,ge.whave=0,ge.window=new Uint8Array(ge.wsize)),Z>=ge.wsize?(ge.window.set(Le.subarray(G-ge.wsize,G),0),ge.wnext=0,ge.whave=ge.wsize):(me=ge.wsize-ge.wnext,me>Z&&(me=Z),ge.window.set(Le.subarray(G-Z,G-Z+me),ge.wnext),Z-=me,Z?(ge.window.set(Le.subarray(G-Z,G),0),ge.wnext=Z,ge.whave=ge.wsize):(ge.wnext+=me,ge.wnext===ge.wsize&&(ge.wnext=0),ge.whave<ge.wsize&&(ge.whave+=me))),0},"updatewindow"),ke=s((ae,Le)=>{let G,Z,me,ge,rt,Ue,Xe,fe,Te,k,he,Se,be,te,Nt=0,nt,mt,pn,Pt,Mi,ai,un,Hn;const mn=new Uint8Array(4);let li,Kn;const lr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!ae||!ae.state||!ae.output||!ae.input&&ae.avail_in!==0)return S;G=ae.state,G.mode===Y&&(G.mode=ne),rt=ae.next_out,me=ae.output,Xe=ae.avail_out,ge=ae.next_in,Z=ae.input,Ue=ae.avail_in,fe=G.hold,Te=G.bits,k=Ue,he=Xe,Hn=o;e:for(;;)switch(G.mode){case C:if(G.wrap===0){G.mode=ne;break}for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(G.wrap&2&&fe===35615){G.check=0,mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0),fe=0,Te=0,G.mode=T;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((fe&255)<<8)+(fe>>8))%31){ae.msg="incorrect header check",G.mode=xe;break}if((fe&15)!==_){ae.msg="unknown compression method",G.mode=xe;break}if(fe>>>=4,Te-=4,un=(fe&15)+8,G.wbits===0)G.wbits=un;else if(un>G.wbits){ae.msg="invalid window size",G.mode=xe;break}G.dmax=1<<G.wbits,ae.adler=G.check=1,G.mode=fe&512?$:Y,fe=0,Te=0;break;case T:for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(G.flags=fe,(G.flags&255)!==_){ae.msg="unknown compression method",G.mode=xe;break}if(G.flags&57344){ae.msg="unknown header flags set",G.mode=xe;break}G.head&&(G.head.text=fe>>8&1),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0)),fe=0,Te=0,G.mode=A;case A:for(;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.head&&(G.head.time=fe),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,mn[2]=fe>>>16&255,mn[3]=fe>>>24&255,G.check=h(G.check,mn,4,0)),fe=0,Te=0,G.mode=O;case O:for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.head&&(G.head.xflags=fe&255,G.head.os=fe>>8),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0)),fe=0,Te=0,G.mode=D;case D:if(G.flags&1024){for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.length=fe,G.head&&(G.head.extra_len=fe),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0)),fe=0,Te=0}else G.head&&(G.head.extra=null);G.mode=M;case M:if(G.flags&1024&&(Se=G.length,Se>Ue&&(Se=Ue),Se&&(G.head&&(un=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Uint8Array(G.head.extra_len)),G.head.extra.set(Z.subarray(ge,ge+Se),un)),G.flags&512&&(G.check=h(G.check,Z,Se,ge)),Ue-=Se,ge+=Se,G.length-=Se),G.length))break e;G.length=0,G.mode=R;case R:if(G.flags&2048){if(Ue===0)break e;Se=0;do un=Z[ge+Se++],G.head&&un&&G.length<65536&&(G.head.name+=String.fromCharCode(un));while(un&&Se<Ue);if(G.flags&512&&(G.check=h(G.check,Z,Se,ge)),Ue-=Se,ge+=Se,un)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=F;case F:if(G.flags&4096){if(Ue===0)break e;Se=0;do un=Z[ge+Se++],G.head&&un&&G.length<65536&&(G.head.comment+=String.fromCharCode(un));while(un&&Se<Ue);if(G.flags&512&&(G.check=h(G.check,Z,Se,ge)),Ue-=Se,ge+=Se,un)break e}else G.head&&(G.head.comment=null);G.mode=V;case V:if(G.flags&512){for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(fe!==(G.check&65535)){ae.msg="header crc mismatch",G.mode=xe;break}fe=0,Te=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),ae.adler=G.check=0,G.mode=Y;break;case $:for(;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}ae.adler=G.check=ln(fe),fe=0,Te=0,G.mode=X;case X:if(G.havedict===0)return ae.next_out=rt,ae.avail_out=Xe,ae.next_in=ge,ae.avail_in=Ue,G.hold=fe,G.bits=Te,g;ae.adler=G.check=1,G.mode=Y;case Y:if(Le===t||Le===i)break e;case ne:if(G.last){fe>>>=Te&7,Te-=Te&7,G.mode=Pe;break}for(;Te<3;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}switch(G.last=fe&1,fe>>>=1,Te-=1,fe&3){case 0:G.mode=ie;break;case 1:if(J(G),G.mode=Me,Le===i){fe>>>=2,Te-=2;break e}break;case 2:G.mode=Be;break;case 3:ae.msg="invalid block type",G.mode=xe}fe>>>=2,Te-=2;break;case ie:for(fe>>>=Te&7,Te-=Te&7;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if((fe&65535)!==(fe>>>16^65535)){ae.msg="invalid stored block lengths",G.mode=xe;break}if(G.length=fe&65535,fe=0,Te=0,G.mode=pe,Le===i)break e;case pe:G.mode=Ee;case Ee:if(Se=G.length,Se){if(Se>Ue&&(Se=Ue),Se>Xe&&(Se=Xe),Se===0)break e;me.set(Z.subarray(ge,ge+Se),rt),Ue-=Se,ge+=Se,Xe-=Se,rt+=Se,G.length-=Se;break}G.mode=Y;break;case Be:for(;Te<14;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(G.nlen=(fe&31)+257,fe>>>=5,Te-=5,G.ndist=(fe&31)+1,fe>>>=5,Te-=5,G.ncode=(fe&15)+4,fe>>>=4,Te-=4,G.nlen>286||G.ndist>30){ae.msg="too many length or distance symbols",G.mode=xe;break}G.have=0,G.mode=it;case it:for(;G.have<G.ncode;){for(;Te<3;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.lens[lr[G.have++]]=fe&7,fe>>>=3,Te-=3}for(;G.have<19;)G.lens[lr[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,li={bits:G.lenbits},Hn=p(a,G.lens,0,19,G.lencode,0,G.work,li),G.lenbits=li.bits,Hn){ae.msg="invalid code lengths set",G.mode=xe;break}G.have=0,G.mode=Ce;case Ce:for(;G.have<G.nlen+G.ndist;){for(;Nt=G.lencode[fe&(1<<G.lenbits)-1],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(pn<16)fe>>>=nt,Te-=nt,G.lens[G.have++]=pn;else{if(pn===16){for(Kn=nt+2;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(fe>>>=nt,Te-=nt,G.have===0){ae.msg="invalid bit length repeat",G.mode=xe;break}un=G.lens[G.have-1],Se=3+(fe&3),fe>>>=2,Te-=2}else if(pn===17){for(Kn=nt+3;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=nt,Te-=nt,un=0,Se=3+(fe&7),fe>>>=3,Te-=3}else{for(Kn=nt+7;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=nt,Te-=nt,un=0,Se=11+(fe&127),fe>>>=7,Te-=7}if(G.have+Se>G.nlen+G.ndist){ae.msg="invalid bit length repeat",G.mode=xe;break}for(;Se--;)G.lens[G.have++]=un}}if(G.mode===xe)break;if(G.lens[256]===0){ae.msg="invalid code -- missing end-of-block",G.mode=xe;break}if(G.lenbits=9,li={bits:G.lenbits},Hn=p(r,G.lens,0,G.nlen,G.lencode,0,G.work,li),G.lenbits=li.bits,Hn){ae.msg="invalid literal/lengths set",G.mode=xe;break}if(G.distbits=6,G.distcode=G.distdyn,li={bits:G.distbits},Hn=p(n,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,li),G.distbits=li.bits,Hn){ae.msg="invalid distances set",G.mode=xe;break}if(G.mode=Me,Le===i)break e;case Me:G.mode=je;case je:if(Ue>=6&&Xe>=258){ae.next_out=rt,ae.avail_out=Xe,ae.next_in=ge,ae.avail_in=Ue,G.hold=fe,G.bits=Te,m(ae,he),rt=ae.next_out,me=ae.output,Xe=ae.avail_out,ge=ae.next_in,Z=ae.input,Ue=ae.avail_in,fe=G.hold,Te=G.bits,G.mode===Y&&(G.back=-1);break}for(G.back=0;Nt=G.lencode[fe&(1<<G.lenbits)-1],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(mt&&!(mt&240)){for(Pt=nt,Mi=mt,ai=pn;Nt=G.lencode[ai+((fe&(1<<Pt+Mi)-1)>>Pt)],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(Pt+nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=Pt,Te-=Pt,G.back+=Pt}if(fe>>>=nt,Te-=nt,G.back+=nt,G.length=pn,mt===0){G.mode=De;break}if(mt&32){G.back=-1,G.mode=Y;break}if(mt&64){ae.msg="invalid literal/length code",G.mode=xe;break}G.extra=mt&15,G.mode=We;case We:if(G.extra){for(Kn=G.extra;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.length+=fe&(1<<G.extra)-1,fe>>>=G.extra,Te-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=Ze;case Ze:for(;Nt=G.distcode[fe&(1<<G.distbits)-1],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(!(mt&240)){for(Pt=nt,Mi=mt,ai=pn;Nt=G.distcode[ai+((fe&(1<<Pt+Mi)-1)>>Pt)],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(Pt+nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=Pt,Te-=Pt,G.back+=Pt}if(fe>>>=nt,Te-=nt,G.back+=nt,mt&64){ae.msg="invalid distance code",G.mode=xe;break}G.offset=pn,G.extra=mt&15,G.mode=ft;case ft:if(G.extra){for(Kn=G.extra;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.offset+=fe&(1<<G.extra)-1,fe>>>=G.extra,Te-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){ae.msg="invalid distance too far back",G.mode=xe;break}G.mode=vt;case vt:if(Xe===0)break e;if(Se=he-Xe,G.offset>Se){if(Se=G.offset-Se,Se>G.whave&&G.sane){ae.msg="invalid distance too far back",G.mode=xe;break}Se>G.wnext?(Se-=G.wnext,be=G.wsize-Se):be=G.wnext-Se,Se>G.length&&(Se=G.length),te=G.window}else te=me,be=rt-G.offset,Se=G.length;Se>Xe&&(Se=Xe),Xe-=Se,G.length-=Se;do me[rt++]=te[be++];while(--Se);G.length===0&&(G.mode=je);break;case De:if(Xe===0)break e;me[rt++]=G.length,Xe--,G.mode=je;break;case Pe:if(G.wrap){for(;Te<32;){if(Ue===0)break e;Ue--,fe|=Z[ge++]<<Te,Te+=8}if(he-=Xe,ae.total_out+=he,G.total+=he,he&&(ae.adler=G.check=G.flags?h(G.check,me,he,rt-he):c(G.check,me,he,rt-he)),he=Xe,(G.flags?fe:ln(fe))!==G.check){ae.msg="incorrect data check",G.mode=xe;break}fe=0,Te=0}G.mode=Ke;case Ke:if(G.wrap&&G.flags){for(;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(fe!==(G.total&4294967295)){ae.msg="incorrect length check",G.mode=xe;break}fe=0,Te=0}G.mode=Ye;case Ye:Hn=f;break e;case xe:Hn=u;break e;case Ct:return v;case At:default:return S}return ae.next_out=rt,ae.avail_out=Xe,ae.next_in=ge,ae.avail_in=Ue,G.hold=fe,G.bits=Te,(G.wsize||he!==ae.avail_out&&G.mode<xe&&(G.mode<Pe||Le!==e))&&Fe(ae,ae.output,ae.next_out,he-ae.avail_out)?(G.mode=Ct,v):(k-=ae.avail_in,he-=ae.avail_out,ae.total_in+=k,ae.total_out+=he,G.total+=he,G.wrap&&he&&(ae.adler=G.check=G.flags?h(G.check,me,he,ae.next_out-he):c(G.check,me,he,ae.next_out-he)),ae.data_type=G.bits+(G.last?64:0)+(G.mode===Y?128:0)+(G.mode===Me||G.mode===pe?256:0),(k===0&&he===0||Le===e)&&Hn===o&&(Hn=y),Hn)},"inflate"),Ge=s(ae=>{if(!ae||!ae.state)return S;let Le=ae.state;return Le.window&&(Le.window=null),ae.state=null,o},"inflateEnd"),gt=s((ae,Le)=>{if(!ae||!ae.state)return S;const G=ae.state;return G.wrap&2?(G.head=Le,Le.done=!1,o):S},"inflateGetHeader"),at=s((ae,Le)=>{const G=Le.length;let Z,me,ge;return!ae||!ae.state||(Z=ae.state,Z.wrap!==0&&Z.mode!==X)?S:Z.mode===X&&(me=1,me=c(me,Le,G,0),me!==Z.check)?u:(ge=Fe(ae,Le,G,G),ge?(Z.mode=Ct,v):(Z.havedict=1,o))},"inflateSetDictionary");x.exports.inflateReset=zt,x.exports.inflateReset2=Yt,x.exports.inflateResetKeep=yn,x.exports.inflateInit=Vt,x.exports.inflateInit2=Mt,x.exports.inflate=ke,x.exports.inflateEnd=Ge,x.exports.inflateGetHeader=gt,x.exports.inflateSetDictionary=at,x.exports.inflateInfo="pako inflate (from Nodeca project)"},9709058974:x=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=s((i,o,f,g,S,u,v,y)=>{const _=y.bits;let C=0,T=0,A=0,O=0,D=0,M=0,R=0,F=0,V=0,$=0,X,Y,ne,ie,pe,Ee=null,Be=0,it;const Ce=new Uint16Array(15+1),Me=new Uint16Array(15+1);let je=null,We=0,Ze,ft,vt;for(C=0;C<=15;C++)Ce[C]=0;for(T=0;T<g;T++)Ce[o[f+T]]++;for(D=_,O=15;O>=1&&Ce[O]===0;O--);if(D>O&&(D=O),O===0)return S[u++]=1<<24|64<<16|0,S[u++]=1<<24|64<<16|0,y.bits=1,0;for(A=1;A<O&&Ce[A]===0;A++);for(D<A&&(D=A),F=1,C=1;C<=15;C++)if(F<<=1,F-=Ce[C],F<0)return-1;if(F>0&&(i===0||O!==1))return-1;for(Me[1]=0,C=1;C<15;C++)Me[C+1]=Me[C]+Ce[C];for(T=0;T<g;T++)o[f+T]!==0&&(v[Me[o[f+T]]++]=T);if(i===0?(Ee=je=v,it=19):i===1?(Ee=a,Be-=257,je=r,We-=257,it=256):(Ee=n,je=e,it=-1),$=0,T=0,C=A,pe=u,M=D,R=0,ne=-1,V=1<<D,ie=V-1,i===1&&V>852||i===2&&V>592)return 1;for(;;){Ze=C-R,v[T]<it?(ft=0,vt=v[T]):v[T]>it?(ft=je[We+v[T]],vt=Ee[Be+v[T]]):(ft=32+64,vt=0),X=1<<C-R,Y=1<<M,A=Y;do Y-=X,S[pe+($>>R)+Y]=Ze<<24|ft<<16|vt|0;while(Y!==0);for(X=1<<C-1;$&X;)X>>=1;if(X!==0?($&=X-1,$+=X):$=0,T++,--Ce[C]===0){if(C===O)break;C=o[f+v[T]]}if(C>D&&($&ie)!==ne){for(R===0&&(R=D),pe+=A,M=C-R,F=1<<M;M+R<O&&(F-=Ce[M+R],!(F<=0));)M++,F<<=1;if(V+=1<<M,i===1&&V>852||i===2&&V>592)return 1;ne=$&ie,S[ne]=D<<24|M<<16|pe-u|0}}return $!==0&&(S[pe+$]=C-R<<24|64<<16|0),y.bits=D,0},"inflate_table");x.exports=t},3435039830:x=>{"use strict";x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},8891166839:x=>{"use strict";function m(J){let Fe=J.length;for(;--Fe>=0;)J[Fe]=0}s(m,"zero");const p=0,a=1,r=2,n=3,e=258,t=29,i=256,o=i+1+t,f=30,g=19,S=2*o+1,u=15,v=16,y=7,_=256,C=16,T=17,A=18,O=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),D=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F=512,V=new Array((o+2)*2);m(V);const $=new Array(f*2);m($);const X=new Array(F);m(X);const Y=new Array(e-n+1);m(Y);const ne=new Array(t);m(ne);const ie=new Array(f);m(ie);function pe(J,Fe,ke,Ge,gt){this.static_tree=J,this.extra_bits=Fe,this.extra_base=ke,this.elems=Ge,this.max_length=gt,this.has_stree=J&&J.length}s(pe,"StaticTreeDesc");let Ee,Be,it;function Ce(J,Fe){this.dyn_tree=J,this.max_code=0,this.stat_desc=Fe}s(Ce,"TreeDesc");const Me=s(J=>J<256?X[J]:X[256+(J>>>7)],"d_code"),je=s((J,Fe)=>{J.pending_buf[J.pending++]=Fe&255,J.pending_buf[J.pending++]=Fe>>>8&255},"put_short"),We=s((J,Fe,ke)=>{J.bi_valid>v-ke?(J.bi_buf|=Fe<<J.bi_valid&65535,je(J,J.bi_buf),J.bi_buf=Fe>>v-J.bi_valid,J.bi_valid+=ke-v):(J.bi_buf|=Fe<<J.bi_valid&65535,J.bi_valid+=ke)},"send_bits"),Ze=s((J,Fe,ke)=>{We(J,ke[Fe*2],ke[Fe*2+1])},"send_code"),ft=s((J,Fe)=>{let ke=0;do ke|=J&1,J>>>=1,ke<<=1;while(--Fe>0);return ke>>>1},"bi_reverse"),vt=s(J=>{J.bi_valid===16?(je(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)},"bi_flush"),De=s((J,Fe)=>{const ke=Fe.dyn_tree,Ge=Fe.max_code,gt=Fe.stat_desc.static_tree,at=Fe.stat_desc.has_stree,ae=Fe.stat_desc.extra_bits,Le=Fe.stat_desc.extra_base,G=Fe.stat_desc.max_length;let Z,me,ge,rt,Ue,Xe,fe=0;for(rt=0;rt<=u;rt++)J.bl_count[rt]=0;for(ke[J.heap[J.heap_max]*2+1]=0,Z=J.heap_max+1;Z<S;Z++)me=J.heap[Z],rt=ke[ke[me*2+1]*2+1]+1,rt>G&&(rt=G,fe++),ke[me*2+1]=rt,!(me>Ge)&&(J.bl_count[rt]++,Ue=0,me>=Le&&(Ue=ae[me-Le]),Xe=ke[me*2],J.opt_len+=Xe*(rt+Ue),at&&(J.static_len+=Xe*(gt[me*2+1]+Ue)));if(fe!==0){do{for(rt=G-1;J.bl_count[rt]===0;)rt--;J.bl_count[rt]--,J.bl_count[rt+1]+=2,J.bl_count[G]--,fe-=2}while(fe>0);for(rt=G;rt!==0;rt--)for(me=J.bl_count[rt];me!==0;)ge=J.heap[--Z],!(ge>Ge)&&(ke[ge*2+1]!==rt&&(J.opt_len+=(rt-ke[ge*2+1])*ke[ge*2],ke[ge*2+1]=rt),me--)}},"gen_bitlen"),Pe=s((J,Fe,ke)=>{const Ge=new Array(u+1);let gt=0,at,ae;for(at=1;at<=u;at++)Ge[at]=gt=gt+ke[at-1]<<1;for(ae=0;ae<=Fe;ae++){let Le=J[ae*2+1];Le!==0&&(J[ae*2]=ft(Ge[Le]++,Le))}},"gen_codes"),Ke=s(()=>{let J,Fe,ke,Ge,gt;const at=new Array(u+1);for(ke=0,Ge=0;Ge<t-1;Ge++)for(ne[Ge]=ke,J=0;J<1<<O[Ge];J++)Y[ke++]=Ge;for(Y[ke-1]=Ge,gt=0,Ge=0;Ge<16;Ge++)for(ie[Ge]=gt,J=0;J<1<<D[Ge];J++)X[gt++]=Ge;for(gt>>=7;Ge<f;Ge++)for(ie[Ge]=gt<<7,J=0;J<1<<D[Ge]-7;J++)X[256+gt++]=Ge;for(Fe=0;Fe<=u;Fe++)at[Fe]=0;for(J=0;J<=143;)V[J*2+1]=8,J++,at[8]++;for(;J<=255;)V[J*2+1]=9,J++,at[9]++;for(;J<=279;)V[J*2+1]=7,J++,at[7]++;for(;J<=287;)V[J*2+1]=8,J++,at[8]++;for(Pe(V,o+1,at),J=0;J<f;J++)$[J*2+1]=5,$[J*2]=ft(J,5);Ee=new pe(V,O,i+1,o,u),Be=new pe($,D,0,f,u),it=new pe(new Array(0),M,0,g,y)},"tr_static_init"),Ye=s(J=>{let Fe;for(Fe=0;Fe<o;Fe++)J.dyn_ltree[Fe*2]=0;for(Fe=0;Fe<f;Fe++)J.dyn_dtree[Fe*2]=0;for(Fe=0;Fe<g;Fe++)J.bl_tree[Fe*2]=0;J.dyn_ltree[_*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0},"init_block"),xe=s(J=>{J.bi_valid>8?je(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0},"bi_windup"),Ct=s((J,Fe,ke,Ge)=>{xe(J),Ge&&(je(J,ke),je(J,~ke)),J.pending_buf.set(J.window.subarray(Fe,Fe+ke),J.pending),J.pending+=ke},"copy_block"),At=s((J,Fe,ke,Ge)=>{const gt=Fe*2,at=ke*2;return J[gt]<J[at]||J[gt]===J[at]&&Ge[Fe]<=Ge[ke]},"smaller"),Lt=s((J,Fe,ke)=>{const Ge=J.heap[ke];let gt=ke<<1;for(;gt<=J.heap_len&&(gt<J.heap_len&&At(Fe,J.heap[gt+1],J.heap[gt],J.depth)&&gt++,!At(Fe,Ge,J.heap[gt],J.depth));)J.heap[ke]=J.heap[gt],ke=gt,gt<<=1;J.heap[ke]=Ge},"pqdownheap"),Ft=s((J,Fe,ke)=>{let Ge,gt,at=0,ae,Le;if(J.last_lit!==0)do Ge=J.pending_buf[J.d_buf+at*2]<<8|J.pending_buf[J.d_buf+at*2+1],gt=J.pending_buf[J.l_buf+at],at++,Ge===0?Ze(J,gt,Fe):(ae=Y[gt],Ze(J,ae+i+1,Fe),Le=O[ae],Le!==0&&(gt-=ne[ae],We(J,gt,Le)),Ge--,ae=Me(Ge),Ze(J,ae,ke),Le=D[ae],Le!==0&&(Ge-=ie[ae],We(J,Ge,Le)));while(at<J.last_lit);Ze(J,_,Fe)},"compress_block"),Jt=s((J,Fe)=>{const ke=Fe.dyn_tree,Ge=Fe.stat_desc.static_tree,gt=Fe.stat_desc.has_stree,at=Fe.stat_desc.elems;let ae,Le,G=-1,Z;for(J.heap_len=0,J.heap_max=S,ae=0;ae<at;ae++)ke[ae*2]!==0?(J.heap[++J.heap_len]=G=ae,J.depth[ae]=0):ke[ae*2+1]=0;for(;J.heap_len<2;)Z=J.heap[++J.heap_len]=G<2?++G:0,ke[Z*2]=1,J.depth[Z]=0,J.opt_len--,gt&&(J.static_len-=Ge[Z*2+1]);for(Fe.max_code=G,ae=J.heap_len>>1;ae>=1;ae--)Lt(J,ke,ae);Z=at;do ae=J.heap[1],J.heap[1]=J.heap[J.heap_len--],Lt(J,ke,1),Le=J.heap[1],J.heap[--J.heap_max]=ae,J.heap[--J.heap_max]=Le,ke[Z*2]=ke[ae*2]+ke[Le*2],J.depth[Z]=(J.depth[ae]>=J.depth[Le]?J.depth[ae]:J.depth[Le])+1,ke[ae*2+1]=ke[Le*2+1]=Z,J.heap[1]=Z++,Lt(J,ke,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],De(J,Fe),Pe(ke,G,J.bl_count)},"build_tree"),It=s((J,Fe,ke)=>{let Ge,gt=-1,at,ae=Fe[0*2+1],Le=0,G=7,Z=4;for(ae===0&&(G=138,Z=3),Fe[(ke+1)*2+1]=65535,Ge=0;Ge<=ke;Ge++)at=ae,ae=Fe[(Ge+1)*2+1],!(++Le<G&&at===ae)&&(Le<Z?J.bl_tree[at*2]+=Le:at!==0?(at!==gt&&J.bl_tree[at*2]++,J.bl_tree[C*2]++):Le<=10?J.bl_tree[T*2]++:J.bl_tree[A*2]++,Le=0,gt=at,ae===0?(G=138,Z=3):at===ae?(G=6,Z=3):(G=7,Z=4))},"scan_tree"),ln=s((J,Fe,ke)=>{let Ge,gt=-1,at,ae=Fe[0*2+1],Le=0,G=7,Z=4;for(ae===0&&(G=138,Z=3),Ge=0;Ge<=ke;Ge++)if(at=ae,ae=Fe[(Ge+1)*2+1],!(++Le<G&&at===ae)){if(Le<Z)do Ze(J,at,J.bl_tree);while(--Le!==0);else at!==0?(at!==gt&&(Ze(J,at,J.bl_tree),Le--),Ze(J,C,J.bl_tree),We(J,Le-3,2)):Le<=10?(Ze(J,T,J.bl_tree),We(J,Le-3,3)):(Ze(J,A,J.bl_tree),We(J,Le-11,7));Le=0,gt=at,ae===0?(G=138,Z=3):at===ae?(G=6,Z=3):(G=7,Z=4)}},"send_tree"),$n=s(J=>{let Fe;for(It(J,J.dyn_ltree,J.l_desc.max_code),It(J,J.dyn_dtree,J.d_desc.max_code),Jt(J,J.bl_desc),Fe=g-1;Fe>=3&&J.bl_tree[R[Fe]*2+1]===0;Fe--);return J.opt_len+=3*(Fe+1)+5+5+4,Fe},"build_bl_tree"),yn=s((J,Fe,ke,Ge)=>{let gt;for(We(J,Fe-257,5),We(J,ke-1,5),We(J,Ge-4,4),gt=0;gt<Ge;gt++)We(J,J.bl_tree[R[gt]*2+1],3);ln(J,J.dyn_ltree,Fe-1),ln(J,J.dyn_dtree,ke-1)},"send_all_trees"),zt=s(J=>{let Fe=4093624447,ke;for(ke=0;ke<=31;ke++,Fe>>>=1)if(Fe&1&&J.dyn_ltree[ke*2]!==0)return 0;if(J.dyn_ltree[9*2]!==0||J.dyn_ltree[10*2]!==0||J.dyn_ltree[13*2]!==0)return 1;for(ke=32;ke<i;ke++)if(J.dyn_ltree[ke*2]!==0)return 1;return 0},"detect_data_type");let Yt=!1;const Mt=s(J=>{Yt||(Ke(),Yt=!0),J.l_desc=new Ce(J.dyn_ltree,Ee),J.d_desc=new Ce(J.dyn_dtree,Be),J.bl_desc=new Ce(J.bl_tree,it),J.bi_buf=0,J.bi_valid=0,Ye(J)},"_tr_init"),Vt=s((J,Fe,ke,Ge)=>{We(J,(p<<1)+(Ge?1:0),3),Ct(J,Fe,ke,!0)},"_tr_stored_block"),$t=s(J=>{We(J,a<<1,3),Ze(J,_,V),vt(J)},"_tr_align"),xt=s((J,Fe,ke,Ge)=>{let gt,at,ae=0;J.level>0?(J.strm.data_type===2&&(J.strm.data_type=zt(J)),Jt(J,J.l_desc),Jt(J,J.d_desc),ae=$n(J),gt=J.opt_len+3+7>>>3,at=J.static_len+3+7>>>3,at<=gt&&(gt=at)):gt=at=ke+5,ke+4<=gt&&Fe!==-1?Vt(J,Fe,ke,Ge):J.strategy===4||at===gt?(We(J,(a<<1)+(Ge?1:0),3),Ft(J,V,$)):(We(J,(r<<1)+(Ge?1:0),3),yn(J,J.l_desc.max_code+1,J.d_desc.max_code+1,ae+1),Ft(J,J.dyn_ltree,J.dyn_dtree)),Ye(J),Ge&&xe(J)},"_tr_flush_block"),jt=s((J,Fe,ke)=>(J.pending_buf[J.d_buf+J.last_lit*2]=Fe>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=Fe&255,J.pending_buf[J.l_buf+J.last_lit]=ke&255,J.last_lit++,Fe===0?J.dyn_ltree[ke*2]++:(J.matches++,Fe--,J.dyn_ltree[(Y[ke]+i+1)*2]++,J.dyn_dtree[Me(Fe)*2]++),J.last_lit===J.lit_bufsize-1),"_tr_tally");x.exports._tr_init=Mt,x.exports._tr_stored_block=Vt,x.exports._tr_flush_block=xt,x.exports._tr_tally=jt,x.exports._tr_align=$t},8713386032:x=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s(l,"ZStream"),x.exports=l},8203499834:(x,l,d)=>{"use strict";x.exports=d(687426846)},687426846:(x,l,d)=>{"use strict";var c=l;c.build="minimal",c.Writer=d(2360491163),c.BufferWriter=d(2563953490),c.Reader=d(6844776027),c.BufferReader=d(7297964050),c.util=d(6168016328),c.rpc=d(3806126143),c.roots=d(9353233933),c.configure=h;function h(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}s(h,"configure"),h()},6844776027:(x,l,d)=>{"use strict";x.exports=r;var c=d(6168016328),h,m=c.LongBits,p=c.utf8;function a(f,g){return RangeError("index out of range: "+f.pos+" + "+(g||1)+" > "+f.len)}s(a,"indexOutOfRange");function r(f){this.buf=f,this.pos=0,this.len=f.length}s(r,"Reader");var n=typeof Uint8Array<"u"?s(function(g){if(g instanceof Uint8Array||Array.isArray(g))return new r(g);throw Error("illegal buffer")},"create_typed_array"):s(function(g){if(Array.isArray(g))return new r(g);throw Error("illegal buffer")},"create_array"),e=s(function(){return c.Buffer?s(function(S){return(r.create=s(function(v){return c.Buffer.isBuffer(v)?new h(v):n(v)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");r.create=e(),r.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,r.prototype.uint32=s(function(){var g=4294967295;return s(function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return g},"read_uint32")},"read_uint32_setup")(),r.prototype.int32=s(function(){return this.uint32()|0},"read_int32"),r.prototype.sint32=s(function(){var g=this.uint32();return g>>>1^-(g&1)|0},"read_sint32");function t(){var f=new m(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw a(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,f}if(this.len-this.pos>4){for(;g<5;++g)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;g<5;++g){if(this.pos>=this.len)throw a(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}s(t,"readLongVarint"),r.prototype.bool=s(function(){return this.uint32()!==0},"read_bool");function i(f,g){return(f[g-4]|f[g-3]<<8|f[g-2]<<16|f[g-1]<<24)>>>0}s(i,"readFixed32_end"),r.prototype.fixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),r.prototype.sfixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new m(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}s(o,"readFixed64"),r.prototype.float=s(function(){if(this.pos+4>this.len)throw a(this,4);var g=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},"read_float"),r.prototype.double=s(function(){if(this.pos+8>this.len)throw a(this,4);var g=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},"read_double"),r.prototype.bytes=s(function(){var g=this.uint32(),S=this.pos,u=this.pos+g;if(u>this.len)throw a(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice(S,u);if(S===u){var v=c.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,u)},"read_bytes"),r.prototype.string=s(function(){var g=this.bytes();return p.read(g,0,g.length)},"read_string"),r.prototype.skip=s(function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw a(this,g);this.pos+=g}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),r.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},r._configure=function(f){h=f,r.create=e(),h._configure();var g=c.Long?"toLong":"toNumber";c.merge(r.prototype,{int64:s(function(){return t.call(this)[g](!1)},"read_int64"),uint64:s(function(){return t.call(this)[g](!0)},"read_uint64"),sint64:s(function(){return t.call(this).zzDecode()[g](!1)},"read_sint64"),fixed64:s(function(){return o.call(this)[g](!0)},"read_fixed64"),sfixed64:s(function(){return o.call(this)[g](!1)},"read_sfixed64")})}},7297964050:(x,l,d)=>{"use strict";x.exports=m;var c=d(6844776027);(m.prototype=Object.create(c.prototype)).constructor=m;var h=d(6168016328);function m(p){c.call(this,p)}s(m,"BufferReader"),m._configure=function(){h.Buffer&&(m.prototype._slice=h.Buffer.prototype.slice)},m.prototype.string=s(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),m._configure()},9353233933:x=>{"use strict";x.exports={}},3806126143:(x,l,d)=>{"use strict";var c=l;c.Service=d(8739400271)},8739400271:(x,l,d)=>{"use strict";x.exports=h;var c=d(6168016328);(h.prototype=Object.create(c.EventEmitter.prototype)).constructor=h;function h(m,p,a){if(typeof m!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=m,this.requestDelimited=Boolean(p),this.responseDelimited=Boolean(a)}s(h,"Service"),h.prototype.rpcCall=s(function m(p,a,r,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return c.asPromise(m,t,p,a,r,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(p,a[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),s(function(o,f){if(o)return t.emit("error",o,p),e(o);if(f===null){t.end(!0);return}if(!(f instanceof r))try{f=r[t.responseDelimited?"decodeDelimited":"decode"](f)}catch(g){return t.emit("error",g,p),e(g)}return t.emit("data",f,p),e(null,f)},"rpcCallback"))}catch(i){t.emit("error",i,p),setTimeout(function(){e(i)},0);return}},"rpcCall"),h.prototype.end=s(function(p){return this.rpcImpl&&(p||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},9382774951:(x,l,d)=>{"use strict";x.exports=h;var c=d(6168016328);function h(r,n){this.lo=r>>>0,this.hi=n>>>0}s(h,"LongBits");var m=h.zero=new h(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var p=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=s(function(n){if(n===0)return m;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new h(t,i)},"fromNumber"),h.from=s(function(n){if(typeof n=="number")return h.fromNumber(n);if(c.isString(n))if(c.Long)n=c.Long.fromString(n);else return h.fromNumber(parseInt(n,10));return n.low||n.high?new h(n.low>>>0,n.high>>>0):m},"from"),h.prototype.toNumber=s(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=s(function(n){return c.Long?new c.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=s(function(n){return n===p?m:new h((a.call(n,0)|a.call(n,1)<<8|a.call(n,2)<<16|a.call(n,3)<<24)>>>0,(a.call(n,4)|a.call(n,5)<<8|a.call(n,6)<<16|a.call(n,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=s(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=s(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),h.prototype.zzDecode=s(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),h.prototype.length=s(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6168016328:function(x,l,d){"use strict";var c=l;c.asPromise=d(7410930532),c.base64=d(3824736026),c.EventEmitter=d(6627060659),c.float=d(6797650127),c.inquire=d(3923667175),c.utf8=d(4612067386),c.pool=d(3002561995),c.LongBits=d(9382774951),c.isNode=Boolean(typeof d.g<"u"&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),c.global=c.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||s(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),c.isString=s(function(a){return typeof a=="string"||a instanceof String},"isString"),c.isObject=s(function(a){return a&&typeof a=="object"},"isObject"),c.isset=c.isSet=s(function(a,r){var n=a[r];return n!=null&&a.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),c.Buffer=function(){try{var p=c.inquire("buffer").Buffer;return p.prototype.utf8Write?p:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=s(function(a){return typeof a=="number"?c.Buffer?c._Buffer_allocUnsafe(a):new c.Array(a):c.Buffer?c._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=s(function(a){return a?c.LongBits.from(a).toHash():c.LongBits.zeroHash},"longToHash"),c.longFromHash=s(function(a,r){var n=c.LongBits.fromHash(a);return c.Long?c.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},"longFromHash");function h(p,a,r){for(var n=Object.keys(a),e=0;e<n.length;++e)(p[n[e]]===void 0||!r)&&(p[n[e]]=a[n[e]]);return p}s(h,"merge"),c.merge=h,c.lcFirst=s(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function m(p){function a(r,n){if(!(this instanceof a))return new a(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&h(this,n)}return s(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:s(function(){return p},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:s(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}s(m,"newError"),c.newError=m,c.ProtocolError=m("ProtocolError"),c.oneOfGetter=s(function(a){for(var r={},n=0;n<a.length;++n)r[a[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),c.oneOfSetter=s(function(a){return function(r){for(var n=0;n<a.length;++n)a[n]!==r&&delete this[a[n]]}},"setOneOf"),c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var p=c.Buffer;if(!p){c._Buffer_from=c._Buffer_allocUnsafe=null;return}c._Buffer_from=p.from!==Uint8Array.from&&p.from||s(function(r,n){return new p(r,n)},"Buffer_from"),c._Buffer_allocUnsafe=p.allocUnsafe||s(function(r){return new p(r)},"Buffer_allocUnsafe")}},2360491163:(x,l,d)=>{"use strict";x.exports=t;var c=d(6168016328),h,m=c.LongBits,p=c.base64,a=c.utf8;function r(y,_,C){this.fn=y,this.len=_,this.next=void 0,this.val=C}s(r,"Op");function n(){}s(n,"noop");function e(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}s(e,"State");function t(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}s(t,"Writer");var i=s(function(){return c.Buffer?s(function(){return(t.create=s(function(){return new h},"create_buffer"))()},"create_buffer_setup"):s(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=s(function(_){return new c.Array(_)},"alloc"),c.Array!==Array&&(t.alloc=c.pool(t.alloc,c.Array.prototype.subarray)),t.prototype._push=s(function(_,C,T){return this.tail=this.tail.next=new r(_,C,T),this.len+=C,this},"push");function o(y,_,C){_[C]=y&255}s(o,"writeByte");function f(y,_,C){for(;y>127;)_[C++]=y&127|128,y>>>=7;_[C]=y}s(f,"writeVarint32");function g(y,_){this.len=y,this.next=void 0,this.val=_}s(g,"VarintOp"),g.prototype=Object.create(r.prototype),g.prototype.fn=f,t.prototype.uint32=s(function(_){return this.len+=(this.tail=this.tail.next=new g((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this},"write_uint32"),t.prototype.int32=s(function(_){return _<0?this._push(S,10,m.fromNumber(_)):this.uint32(_)},"write_int32"),t.prototype.sint32=s(function(_){return this.uint32((_<<1^_>>31)>>>0)},"write_sint32");function S(y,_,C){for(;y.hi;)_[C++]=y.lo&127|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[C++]=y.lo&127|128,y.lo=y.lo>>>7;_[C++]=y.lo}s(S,"writeVarint64"),t.prototype.uint64=s(function(_){var C=m.from(_);return this._push(S,C.length(),C)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=s(function(_){var C=m.from(_).zzEncode();return this._push(S,C.length(),C)},"write_sint64"),t.prototype.bool=s(function(_){return this._push(o,1,_?1:0)},"write_bool");function u(y,_,C){_[C]=y&255,_[C+1]=y>>>8&255,_[C+2]=y>>>16&255,_[C+3]=y>>>24}s(u,"writeFixed32"),t.prototype.fixed32=s(function(_){return this._push(u,4,_>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=s(function(_){var C=m.from(_);return this._push(u,4,C.lo)._push(u,4,C.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=s(function(_){return this._push(c.float.writeFloatLE,4,_)},"write_float"),t.prototype.double=s(function(_){return this._push(c.float.writeDoubleLE,8,_)},"write_double");var v=c.Array.prototype.set?s(function(_,C,T){C.set(_,T)},"writeBytes_set"):s(function(_,C,T){for(var A=0;A<_.length;++A)C[T+A]=_[A]},"writeBytes_for");t.prototype.bytes=s(function(_){var C=_.length>>>0;if(!C)return this._push(o,1,0);if(c.isString(_)){var T=t.alloc(C=p.length(_));p.decode(_,T,0),_=T}return this.uint32(C)._push(v,C,_)},"write_bytes"),t.prototype.string=s(function(_){var C=a.length(_);return C?this.uint32(C)._push(a.write,C,_):this._push(o,1,0)},"write_string"),t.prototype.fork=s(function(){return this.states=new e(this),this.head=this.tail=new r(n,0,0),this.len=0,this},"fork"),t.prototype.reset=s(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=s(function(){var _=this.head,C=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=_.next,this.tail=C,this.len+=T),this},"ldelim"),t.prototype.finish=s(function(){for(var _=this.head.next,C=this.constructor.alloc(this.len),T=0;_;)_.fn(_.val,C,T),T+=_.len,_=_.next;return C},"finish"),t._configure=function(y){h=y,t.create=i(),h._configure()}},2563953490:(x,l,d)=>{"use strict";x.exports=m;var c=d(2360491163);(m.prototype=Object.create(c.prototype)).constructor=m;var h=d(6168016328);function m(){c.call(this)}s(m,"BufferWriter"),m._configure=function(){m.alloc=h._Buffer_allocUnsafe,m.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?s(function(r,n,e){n.set(r,e)},"writeBytesBuffer_set"):s(function(r,n,e){if(r.copy)r.copy(n,e,0,r.length);else for(var t=0;t<r.length;)n[e++]=r[t++]},"writeBytesBuffer_copy")},m.prototype.bytes=s(function(r){h.isString(r)&&(r=h._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(m.writeBytesBuffer,n,r),this},"write_bytes_buffer");function p(a,r,n){a.length<40?h.utf8.write(a,r,n):r.utf8Write?r.utf8Write(a,n):r.write(a,n)}s(p,"writeStringBuffer"),m.prototype.string=s(function(r){var n=h.Buffer.byteLength(r);return this.uint32(n),n&&this._push(p,n,r),this},"write_string_buffer"),m._configure()},8842724253:(x,l,d)=>{"use strict";d.r(l),d.d(l,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>y,__asyncValues:()=>C,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>D,__classPrivateFieldSet:()=>M,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>h,__generator:()=>t,__importDefault:()=>O,__importStar:()=>A,__makeTemplateObject:()=>T,__metadata:()=>n,__param:()=>r,__read:()=>g,__rest:()=>p,__spread:()=>S,__spreadArrays:()=>u,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c=s(function(R,F){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,$){V.__proto__=$}||function(V,$){for(var X in $)$.hasOwnProperty(X)&&(V[X]=$[X])},c(R,F)},"extendStatics");function h(R,F){c(R,F);function V(){this.constructor=R}s(V,"__"),R.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V)}s(h,"__extends");var m=s(function(){return m=Object.assign||s(function(F){for(var V,$=1,X=arguments.length;$<X;$++){V=arguments[$];for(var Y in V)Object.prototype.hasOwnProperty.call(V,Y)&&(F[Y]=V[Y])}return F},"__assign"),m.apply(this,arguments)},"__assign");function p(R,F){var V={};for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&F.indexOf($)<0&&(V[$]=R[$]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,$=Object.getOwnPropertySymbols(R);X<$.length;X++)F.indexOf($[X])<0&&Object.prototype.propertyIsEnumerable.call(R,$[X])&&(V[$[X]]=R[$[X]]);return V}s(p,"__rest");function a(R,F,V,$){var X=arguments.length,Y=X<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,V):$,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(R,F,V,$);else for(var ie=R.length-1;ie>=0;ie--)(ne=R[ie])&&(Y=(X<3?ne(Y):X>3?ne(F,V,Y):ne(F,V))||Y);return X>3&&Y&&Object.defineProperty(F,V,Y),Y}s(a,"__decorate");function r(R,F){return function(V,$){F(V,$,R)}}s(r,"__param");function n(R,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,F)}s(n,"__metadata");function e(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return s(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(Be){try{Ee($.next(Be))}catch(it){ne(it)}}s(ie,"fulfilled");function pe(Be){try{Ee($.throw(Be))}catch(it){ne(it)}}s(pe,"rejected");function Ee(Be){Be.done?Y(Be.value):X(Be.value).then(ie,pe)}s(Ee,"step"),Ee(($=$.apply(R,F||[])).next())})}s(e,"__awaiter");function t(R,F){var V={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},$,X,Y,ne;return ne={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(ne[Symbol.iterator]=function(){return this}),ne;function ie(Ee){return function(Be){return pe([Ee,Be])}}function pe(Ee){if($)throw new TypeError("Generator is already executing.");for(;V;)try{if($=1,X&&(Y=Ee[0]&2?X.return:Ee[0]?X.throw||((Y=X.return)&&Y.call(X),0):X.next)&&!(Y=Y.call(X,Ee[1])).done)return Y;switch(X=0,Y&&(Ee=[Ee[0]&2,Y.value]),Ee[0]){case 0:case 1:Y=Ee;break;case 4:return V.label++,{value:Ee[1],done:!1};case 5:V.label++,X=Ee[1],Ee=[0];continue;case 7:Ee=V.ops.pop(),V.trys.pop();continue;default:if(Y=V.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(Ee[0]===6||Ee[0]===2)){V=0;continue}if(Ee[0]===3&&(!Y||Ee[1]>Y[0]&&Ee[1]<Y[3])){V.label=Ee[1];break}if(Ee[0]===6&&V.label<Y[1]){V.label=Y[1],Y=Ee;break}if(Y&&V.label<Y[2]){V.label=Y[2],V.ops.push(Ee);break}Y[2]&&V.ops.pop(),V.trys.pop();continue}Ee=F.call(R,V)}catch(Be){Ee=[6,Be],X=0}finally{$=Y=0}if(Ee[0]&5)throw Ee[1];return{value:Ee[0]?Ee[1]:void 0,done:!0}}}s(t,"__generator");function i(R,F,V,$){$===void 0&&($=V),R[$]=F[V]}s(i,"__createBinding");function o(R,F){for(var V in R)V!=="default"&&!F.hasOwnProperty(V)&&(F[V]=R[V])}s(o,"__exportStar");function f(R){var F=typeof Symbol=="function"&&Symbol.iterator,V=F&&R[F],$=0;if(V)return V.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&$>=R.length&&(R=void 0),{value:R&&R[$++],done:!R}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}s(f,"__values");function g(R,F){var V=typeof Symbol=="function"&&R[Symbol.iterator];if(!V)return R;var $=V.call(R),X,Y=[],ne;try{for(;(F===void 0||F-- >0)&&!(X=$.next()).done;)Y.push(X.value)}catch(ie){ne={error:ie}}finally{try{X&&!X.done&&(V=$.return)&&V.call($)}finally{if(ne)throw ne.error}}return Y}s(g,"__read");function S(){for(var R=[],F=0;F<arguments.length;F++)R=R.concat(g(arguments[F]));return R}s(S,"__spread");function u(){for(var R=0,F=0,V=arguments.length;F<V;F++)R+=arguments[F].length;for(var $=Array(R),X=0,F=0;F<V;F++)for(var Y=arguments[F],ne=0,ie=Y.length;ne<ie;ne++,X++)$[X]=Y[ne];return $}s(u,"__spreadArrays");function v(R){return this instanceof v?(this.v=R,this):new v(R)}s(v,"__await");function y(R,F,V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=V.apply(R,F||[]),X,Y=[];return X={},ne("next"),ne("throw"),ne("return"),X[Symbol.asyncIterator]=function(){return this},X;function ne(Ce){$[Ce]&&(X[Ce]=function(Me){return new Promise(function(je,We){Y.push([Ce,Me,je,We])>1||ie(Ce,Me)})})}function ie(Ce,Me){try{pe($[Ce](Me))}catch(je){it(Y[0][3],je)}}function pe(Ce){Ce.value instanceof v?Promise.resolve(Ce.value.v).then(Ee,Be):it(Y[0][2],Ce)}function Ee(Ce){ie("next",Ce)}function Be(Ce){ie("throw",Ce)}function it(Ce,Me){Ce(Me),Y.shift(),Y.length&&ie(Y[0][0],Y[0][1])}}s(y,"__asyncGenerator");function _(R){var F,V;return F={},$("next"),$("throw",function(X){throw X}),$("return"),F[Symbol.iterator]=function(){return this},F;function $(X,Y){F[X]=R[X]?function(ne){return(V=!V)?{value:v(R[X](ne)),done:X==="return"}:Y?Y(ne):ne}:Y}}s(_,"__asyncDelegator");function C(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=R[Symbol.asyncIterator],V;return F?F.call(R):(R=typeof f=="function"?f(R):R[Symbol.iterator](),V={},$("next"),$("throw"),$("return"),V[Symbol.asyncIterator]=function(){return this},V);function $(Y){V[Y]=R[Y]&&function(ne){return new Promise(function(ie,pe){ne=R[Y](ne),X(ie,pe,ne.done,ne.value)})}}function X(Y,ne,ie,pe){Promise.resolve(pe).then(function(Ee){Y({value:Ee,done:ie})},ne)}}s(C,"__asyncValues");function T(R,F){return Object.defineProperty?Object.defineProperty(R,"raw",{value:F}):R.raw=F,R}s(T,"__makeTemplateObject");function A(R){if(R&&R.__esModule)return R;var F={};if(R!=null)for(var V in R)Object.hasOwnProperty.call(R,V)&&(F[V]=R[V]);return F.default=R,F}s(A,"__importStar");function O(R){return R&&R.__esModule?R:{default:R}}s(O,"__importDefault");function D(R,F){if(!F.has(R))throw new TypeError("attempted to get private field on non-instance");return F.get(R)}s(D,"__classPrivateFieldGet");function M(R,F,V){if(!F.has(R))throw new TypeError("attempted to set private field on non-instance");return F.set(R,V),V}s(M,"__classPrivateFieldSet")},3323583056:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9013967876));let p=s(class{needUpdate(r){return this.activeSpeakers?this.speakerScores[r]===0&&this.activeSpeakers.includes(r)||this.speakerScores[r]>0&&!this.activeSpeakers.includes(r):!0}updateActiveSpeakers(r,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let u=0;u<i.length;u++){const v=i[u];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((u,v)=>v.activeScore-u.activeScore).filter(function(u){return u.activeScore>0}).map(function(u){return u.attendeeId});this.activeSpeakers=o,n(o);const g=o.length>0&&o[0]===this.selfAttendeeId&&r.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==g&&(this.hasBandwidthPriority=g,this.hasBandwidthPriorityCallback(g))}updateScore(r,n,e,t,i){const o=r.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(r,n,e))}subscribe(r,n,e,t){const i=s((f,g)=>{if(!g){this.speakerScores[f]=0,this.mostRecentUpdateTimestamp[f]=Date.now(),this.updateActiveSpeakers(r,n,f);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(f,(S,u,v,y)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(r,n,S,u,v)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new m.default(this.updateIntervalMs);if(o.start(()=>{for(const f in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[f]>this.waitIntervalMs&&this.updateScore(r,n,f,0,this.speakerMuteState[f])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const f=new m.default(t);f.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,f)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(r){const n=this.detectorCallbackToHandler.get(r);this.detectorCallbackToHandler.delete(r),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(r);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(r));const t=this.detectorCallbackToScoresTimer.get(r);t&&(t.stop(),this.detectorCallbackToHandler.delete(r))}destroy(){return c(this,void 0,void 0,function*(){for(const r of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r);for(const r of this.detectorCallbackToActivityTimer.values())r.stop();for(const r of this.detectorCallbackToScoresTimer.values())r.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(r,n,e,t=1e3,i=200){this.realtimeController=r,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=p},1644292716:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{calculateScore(h,m,p){(p||m===null)&&(m=0),this.volumes.hasOwnProperty(h)||(this.volumes[h]=0),m>this.silenceThreshold?m=1:m=0;const a=this.volumes[h]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[h]=a;for(const r in this.volumes)r!==h&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*m,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(h=.9,m=.01,p=.2,a=.2){this.speakerWeight=h,this.cutoffThreshold=m,this.silenceThreshold=p,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=d},9821410283:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class ES{static create(h,m){const p=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!h||h.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!p.test(h))throw new Error(`appName must satisfy ${p} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new ES(h,m)}constructor(h,m){this.appName=h,this.appVersion=m}},"ApplicationMetadata");l.default=d},4846700713:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"Attendee");l.default=d},3227886346:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8351168186)),p=h(d(3741513515));let a=s(class{bindAudioElement(n){return c(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return c(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return c(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)p.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return c(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(u=>{t&&u.meetingAudioStreamBecameInactive(t),this.audioStream&&u.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",f=this.audioElement.sinkId;if(o===f)return;const g=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=null),i)try{yield g.setSinkId(o)}catch(u){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${u}`),u}this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=S)})}getCurrentMeetingAudioStream(){return c(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return c(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return c(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return c(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new m.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},4999349075:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8351168186));let m=s(class pu{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new pu(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new pu(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new pu(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,r=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new h.default().supportsAudioRedundancy()&&r}},"AudioProfile");l.default=m},8430013536:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let d=s(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=d},616382858:function(x,l,d){"use strict";var c=this&&this.__createBinding||(Object.create?function(G,Z,me,ge){ge===void 0&&(ge=me),Object.defineProperty(G,ge,{enumerable:!0,get:function(){return Z[me]}})}:function(G,Z,me,ge){ge===void 0&&(ge=me),G[ge]=Z[me]}),h=this&&this.__setModuleDefault||(Object.create?function(G,Z){Object.defineProperty(G,"default",{enumerable:!0,value:Z})}:function(G,Z){G.default=Z}),m=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var Z={};if(G!=null)for(var me in G)me!=="default"&&Object.prototype.hasOwnProperty.call(G,me)&&c(Z,G,me);return h(Z,G),Z},p=this&&this.__awaiter||function(G,Z,me,ge){function rt(Ue){return Ue instanceof me?Ue:new me(function(Xe){Xe(Ue)})}return s(rt,"adopt"),new(me||(me=Promise))(function(Ue,Xe){function fe(he){try{k(ge.next(he))}catch(Se){Xe(Se)}}s(fe,"fulfilled");function Te(he){try{k(ge.throw(he))}catch(Se){Xe(Se)}}s(Te,"rejected");function k(he){he.done?Ue(he.value):rt(he.value).then(fe,Te)}s(k,"step"),k((ge=ge.apply(G,Z||[])).next())})},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(d(3323583056)),n=a(d(3227886346)),e=a(d(4999349075)),t=a(d(8351168186)),i=a(d(3544934903)),o=a(d(1523356655)),f=a(d(8981226922)),g=a(d(3777990285)),S=a(d(4882394368)),u=a(d(1880578541)),v=a(d(4599834734)),y=a(d(2311029370)),_=a(d(5403024322)),C=a(d(3741513515)),T=a(d(4641929542)),A=a(d(3097552577)),O=a(d(953236500)),D=a(d(7338273141)),M=a(d(7258714924)),R=m(d(1448262436)),F=a(d(426218501)),V=a(d(4983545831)),$=d(5391134031),X=a(d(5954709649)),Y=a(d(7063021350)),ne=a(d(4019918320)),ie=a(d(7819987893)),pe=a(d(2918138407)),Ee=a(d(7869625838)),Be=a(d(9613312866)),it=a(d(1495317641)),Ce=a(d(5110013894)),Me=a(d(3708122413)),je=a(d(1504187181)),We=a(d(6907504899)),Ze=a(d(6015743885)),ft=a(d(3627106901)),vt=a(d(3151098372)),De=a(d(9363406688)),Pe=a(d(6069988831)),Ke=a(d(2452872079)),Ye=a(d(2471283351)),xe=a(d(3894566132)),Ct=a(d(6412210284)),At=a(d(839180639)),Lt=a(d(2641934340)),Ft=a(d(3450261616)),Jt=a(d(7500181884)),It=a(d(6769427378)),ln=a(d(1438956810)),$n=a(d(2962876954)),yn=a(d(3052177122)),zt=d(903520651),Yt=a(d(8261422434)),Mt=a(d(7744958188)),Vt=a(d(1437705752)),$t=d(6700033168),xt=a(d(5134603106)),jt=a(d(5216544790)),J=a(d(7562203998)),Fe=a(d(9251190564)),ke=a(d(1695899970)),Ge=a(d(3361826027)),gt=a(d(3423911843)),at=a(d(338869682)),ae=a(d(8430013536));let Le=s(class mu{destroy(){return p(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(Z){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(Z):null}setAudioProfile(Z){this._audioProfile=Z}addObserver(Z){this.logger.info("adding meeting observer"),this.observerQueue.add(Z)}removeObserver(Z){this.logger.info("removing meeting observer"),this.observerQueue.delete(Z)}forEachObserver(Z){for(const me of this.observerQueue)C.default.nextTick(()=>{this.observerQueue.has(me)&&Z(me)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new ae.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new M.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const Z=s(()=>p(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(me){me.type===F.default.WebSocketClosed&&Z()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(Z=>{this.logger.error(`Signaling task pre-start failed: ${Z}`),this.signalingTask=void 0})}start(Z){this.startReturningPromise(Z).then(()=>{this.logger.info("start completed")}).catch(me=>{this.logger.error(`start failed: ${me}`)})}startReturningPromise(Z){return(Z==null?void 0:Z.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((me,ge)=>{this.sessionStateController.perform(A.default.Connect,()=>{this.actionConnect(!1).then(me).catch(ge)})}))}connectWithPromises(Z){const me=this.meetingSessionContext,ge=s((te,Nt)=>new Ft.default(this.logger,Nt,te),"timeout");this.monitorTask=new je.default(me,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const rt=this.monitorTask.once(),Ue=new vt.default(me).once();this.receiveIndexTask=new Ke.default(me),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Xe=new xe.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Me.default(me),new Ye.default(me),new it.default(me),this.receiveIndexTask]).once(),fe=new pe.default(me).once(Xe),Te=new Y.default(me).once(fe,Ue),k=new Ee.default(me).once(Te),he=new Ct.default(me).once(k),Se=new Be.default(me).once(he),be=new Lt.default(me).once(Se);return this.receiveRemotePauseResumeTask=new De.default(me),this.receiveRemotePauseResumeTask.once(be),new xe.default(this.logger,this.wrapTaskName("AudioVideoStart"),[rt,ge(this.configuration.connectionTimeoutMs,new xe.default(this.logger,"Peer",[be,this.receiveRemotePauseResumeTask,Z?new Ft.default(this.logger,new Ze.default(this.logger,"FinalizeConnection",[new Jt.default(me),new At.default(me)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new At.default(me)]))])}actionConnect(Z){var me;return p(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const ge=!!this.configuration.urls.audioHostURL;if(ge?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new ln.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new $n.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new It.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new yn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new at.default(this.logger,this._realtimeController,mu.MIN_VOLUME_DECIBELS,mu.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Xe=this.meetingSessionContext.videoUplinkBandwidthPolicy;Xe||(Xe=new Ge.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Xe),Xe.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Vt.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new J.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new jt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new gt.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Mt.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const Xe=this.configuration.meetingFeatures.contentMaxResolution===f.default.VideoResolutionUHD;Xe&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Xe)}else{const Xe=this.configuration.meetingFeatures.videoMaxResolution===f.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Xe)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new u.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new Yt.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new xt.default,this.meetingSessionContext.videosPaused=new xt.default,this.meetingSessionContext.statsCollector=new X.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new y.default(this.meetingSessionContext.signalingClient,mu.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},Z||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Xe=>{zt.Maybe.of(Xe.audioVideoDidStartConnecting).map(fe=>fe.bind(Xe)(!1))}),(me=this.eventController)===null||me===void 0||me.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const rt=ge&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+rt);const Ue=this.connectWithPromises(rt);try{yield Ue.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(A.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Xe){this.signalingTask=void 0;const fe=new g.default(this.getMeetingStatusCode(Xe)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${fe} due to error ${Xe}.`),this.sessionStateController.state()===O.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(A.default.Fail,()=>p(this,void 0,void 0,function*(){yield this.actionDisconnect(fe,!0,Xe),this.handleMeetingSessionStatus(fe,Xe)||this.notifyStop(fe,Xe)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new Ft.default(this.logger,new We.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=$.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(Z=>{zt.Maybe.of(Z.audioVideoDidStart).map(me=>me.bind(Z)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var Z;return this.sessionStateController.state()===O.default.NotConnected?((Z=this.meetingSessionContext.signalingClient)===null||Z===void 0||Z.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((me,ge)=>{this.sessionStateController.perform(A.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new g.default(S.default.Left),!1,null).then(me).catch(ge)})})}stop(){this.stopReturningPromise()}actionDisconnect(Z,me,ge){return p(this,void 0,void 0,function*(){try{yield new xe.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new Ft.default(this.logger,new Ce.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const rt=[new Ft.default(this.logger,new ie.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new xe.default(this.logger,this.wrapTaskName("AudioVideoClean"),rt).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(A.default.FinishDisconnecting,()=>{me||this.notifyStop(Z,ge)})})}update(){let me=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(me||(me=this.meetingSessionContext.peer===void 0),me||(me=!this.updateRemoteVideosFromPolicy()),me||(me=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!me)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const ge=this.sessionStateController.perform(A.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return ge===D.default.Transitioned||ge===D.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!R.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===R.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const Z=this.detectChangesInVideosToReceive();if(Z===void 0)return!1;const me=Z.added,ge=Z.simulcastStreamUpdates,rt=Z.removed,Ue=this.meetingSessionContext,Xe=[];for(const[fe,Te]of ge.entries()){const k=new V.default;if(k.streamId=Te,k.attendeeId=Ue.videoStreamIndex.attendeeIdForStreamId(Te),k.mid=Ue.transceiverController.getMidForStreamId(fe),k.mid===void 0)return this.logger.info(`No MID found for stream ID ${fe}, cannot update stream without renegotiation`),!1;if(Xe.push(k),Ue.transceiverController.setStreamIdForMid(k.mid,Te),Ue.videoStreamIndex.overrideStreamIdMappings(fe,Te),Ue.videoTileController.haveVideoTileForAttendeeId(k.attendeeId)){const he=Ue.videoTileController.getVideoTileForAttendeeId(k.attendeeId);if(!he.setStreamId)return!1;he.setStreamId(Te)}}return Xe.length!==0&&Ue.signalingClient.remoteVideoUpdate(Xe,[]),me.length!==0||rt.length!==0?!1:(Ue.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const Z=this.meetingSessionContext;if(Z.videosToReceive===null||!Z.transceiverController||!Z.transceiverController.getMidForStreamId||!Z.transceiverController.setStreamIdForMid||!Z.videosToReceive.forEach||!Z.signalingClient.remoteVideoUpdate||!Z.videoStreamIndex.overrideStreamIdMappings)return;let me=[];const ge=new Map;let rt=[];if(Z.lastVideosToReceive===null)me=Z.videosToReceive.array();else{const Ue=Z.videoStreamIndex;Z.videosToReceive.forEach(Xe=>{if(Z.lastVideosToReceive.contain(Xe))return;let fe=!1;Z.lastVideosToReceive.forEach(Te=>{fe||Ue.StreamIdsInSameGroup(Te,Xe)&&(ge.set(Te,Xe),fe=!0)}),fe||me.push(Xe)}),rt=Z.lastVideosToReceive.array().filter(Xe=>{const fe=Z.videosToReceive.contain(Xe),Te=ge.has(Xe);return!fe&&!Te})}return this.logger.info(`Request to update remote videos with added: [${me}], updated: [${Array.from(ge.entries()).map(Ue=>{let[Xe,fe]=Ue;return`${Xe}->${fe}`}).join(",")}], removed: [${rt}]`),{added:me,removed:rt,simulcastStreamUpdates:ge}}isNotAddingOrRemovingStreams(){const Z=this.detectChangesInVideosToReceive();if(Z===void 0)return!1;const me=Z.added,ge=Z.removed;return me.length!==0||ge.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const Z=this.meetingSessionContext;if(Z.videosToReceive===null)return!1;const me=Z.videosToReceive.array().map(fe=>Z.videoStreamIndex.groupIdForStreamId(fe));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(me));const ge=$t.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(Z,me,Z.videoDownlinkBandwidthPolicy.getVideoPreferences()),rt=new Map,Ue=[];for(const fe of ge){let Te=!1;if(!Z.lastVideoSubscriptionConfiguration.has(fe.groupId))Te=!0;else{const k=Z.lastVideoSubscriptionConfiguration.get(fe.groupId);fe.equals(k)||(this.logger.debug(`${JSON.stringify(fe)} does not equal ${JSON.stringify(k)}, sending update`),Te=!0)}rt.set(fe.groupId,fe),Te&&Ue.push(fe)}Z.lastVideoSubscriptionConfiguration=rt;const Xe=[];if(Z.lastVideosToReceive!==null){const fe=new Set(me);for(const Te of Z.lastVideosToReceive.array()){const k=Z.videoStreamIndex.groupIdForStreamId(Te);if(!fe.has(k)){const he=Z.transceiverController.getMidForGroupId(k);if(he===void 0){Z.logger.warn(`Could not find MID for group ID to remove: ${k}`);continue}Xe.push(he)}}}return(Ue.length!==0||Xe.length!==0)&&Z.signalingClient.remoteVideoUpdate(Ue,Xe),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const Z=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(Z)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const Z=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!Z||!Z.headerExtensions?!1:Z.headerExtensions.some(me=>me.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(Z){const me=s(()=>p(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),Z()}),"restartVideo"),ge=this.sessionStateController.perform(A.default.Update,()=>{me()});return ge===D.default.Transitioned||ge===D.default.DeferredTransition}replaceLocalVideo(Z){return p(this,void 0,void 0,function*(){if(!Z||Z.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const me=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(me){const ge=me.state(),rt=Z.getVideoTracks()[0].getSettings();me.bindVideoStream(ge.boundAttendeeId,!0,Z,rt.width,rt.height,ge.streamId,ge.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(Z.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=Z,this.logger.info("Local video input is updated")})}replaceLocalAudio(Z){return p(this,void 0,void 0,function*(){if(!Z||Z.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(Z.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=Z,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(Z){return p(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new xe.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new Pe.default(this.meetingSessionContext),new Ft.default(this.logger,new xe.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ee.default(this.meetingSessionContext),new Ct.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new Lt.default(this.meetingSessionContext),new At.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),Z&&this.sessionStateController.perform(A.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(me){this.sessionStateController.perform(A.default.FinishUpdating,()=>{const ge=new g.default(this.getMeetingStatusCode(me)||S.default.TaskFailed);ge.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(ge,me)})}})}notifyStop(Z,me){var ge;if(this.forEachObserver(rt=>{zt.Maybe.of(rt.audioVideoDidStop).map(Ue=>Ue.bind(rt)(Z))}),this.eventController){const{signalingOpenDurationMs:rt,poorConnectionCount:Ue,startTimeMs:Xe,iceGatheringDurationMs:fe,attendeePresenceDurationMs:Te,meetingStartDurationMs:k}=this.meetingSessionContext,he={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Xe===null?0:Math.round(Date.now()-Xe),meetingStatus:S.default[Z.statusCode()],signalingOpenDurationMs:rt,iceGatheringDurationMs:fe,attendeePresenceDurationMs:Te,poorConnectionCount:Ue,meetingStartDurationMs:k,retryCount:this.totalRetryCount},Se=me&&me.message||((ge=Z.toString)===null||ge===void 0?void 0:ge.call(Z))||"";he.meetingDurationMs===0?(he.meetingErrorMessage=Se,delete he.meetingDurationMs,delete he.attendeePresenceDurationMs,delete he.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",he)):Z.isFailure()||Z.isAudioConnectionFailure()?(he.meetingErrorMessage=Se,this.eventController.publishEvent("meetingFailed",he)):this.eventController.publishEvent("meetingEnded",he)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const Z=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(Z)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(Z,me){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(rt=>{zt.Maybe.of(rt.audioVideoWasDemotedFromPrimaryMeeting).map(Ue=>Ue.bind(rt)(new g.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const ge=this._reconnectController.retryWithBackoff(()=>p(this,void 0,void 0,function*(){this.sessionStateController.state()===O.default.NotConnected?this.sessionStateController.perform(A.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(A.default.Reconnect,()=>{this.actionReconnect(Z)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return ge||this.sessionStateController.perform(A.default.Fail,()=>{this.actionDisconnect(Z,!1,me)}),ge}actionReconnect(Z){return p(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(me=>{zt.Maybe.of(me.audioVideoDidStartConnecting).map(ge=>ge.bind(me)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new De.default(this.meetingSessionContext);try{yield new xe.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new Ft.default(this.logger,new xe.default(this.logger,"Media",[new ne.default(this.meetingSessionContext),new xe.default(this.logger,"Signaling",[new We.default(this.meetingSessionContext),new it.default(this.meetingSessionContext)]),new pe.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new Pe.default(this.meetingSessionContext),new Ft.default(this.logger,new xe.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ee.default(this.meetingSessionContext),new Ct.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new Lt.default(this.meetingSessionContext),new At.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(A.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:me,poorConnectionCount:ge,startTimeMs:rt,iceGatheringDurationMs:Ue,attendeePresenceDurationMs:Xe,meetingStartDurationMs:fe}=this.meetingSessionContext,Te={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-rt),meetingStatus:S.default[Z.statusCode()],signalingOpenDurationMs:me,iceGatheringDurationMs:Ue,attendeePresenceDurationMs:Xe,poorConnectionCount:ge,meetingStartDurationMs:fe,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Te)}this.actionFinishConnecting()})}catch(me){this.sessionStateController.perform(A.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const ge=new g.default(this.getMeetingStatusCode(me)||S.default.TaskFailed);this.handleMeetingSessionStatus(ge,me)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(Z){return`${Z}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(Z){const me=/the meeting status code: (\d+)/.exec(Z&&Z.message);return me&&me.length>1?Number.parseInt(me[1],10):null}enforceBandwidthLimitationForSender(Z){return p(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(Z)})}handleMeetingSessionStatus(Z,me){if(this.logger.info(`handling status: ${S.default[Z.statusCode()]}`),Z.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(Z),Z.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(Z.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(ge=>{zt.Maybe.of(ge.videoSendDidBecomeUnavailable).map(rt=>rt.bind(ge)())}),!1;if(Z.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(ge=>{zt.Maybe.of(ge.audioVideoWasDemotedFromPrimaryMeeting).map(rt=>rt.bind(ge)(Z))}),!1;if(Z.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(Z.isFailure()||Z.isTerminal())&&this.meetingSessionContext.reconnectController){const ge=this.reconnect(Z,me);return ge?this.logger.warn(`will retry due to status code ${S.default[Z.statusCode()]}${me?` and error: ${me.message}`:""}`):this.logger.error(`failed with status code ${S.default[Z.statusCode()]}${me?` and error: ${me.message}`:""}`),ge}return!1}setVideoMaxBandwidthKbps(Z){if(Z<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${Z} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(Z)),this.maxUplinkBandwidthKbps=Z}handleHasBandwidthPriority(Z){return p(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Z),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const me=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Z);const ge=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();me!==ge&&(this.logger.info(`video send bandwidth priority ${Z} max has changed from ${me} kbps to ${ge} kbps`),yield this.enforceBandwidthLimitationForSender(ge))}})}pauseReceivingStream(Z){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([Z])}resumeReceivingStream(Z){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([Z])}setVideoCodecSendPreferences(Z){this.videoSendCodecPreferences=Z,this.meetingSessionContext.videoSendCodecPreferences=Z,this.sessionStateController.state()!==O.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:Z}=this.meetingSessionContext;if(!Z)return this.logger.info("meeting has not started"),[];const me=this.configuration.credentials.attendeeId;return Z.allVideoSendingSourcesExcludingSelf(me)}encodingSimulcastLayersDidChange(Z){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(me=>{zt.Maybe.of(me.encodingSimulcastLayersDidChange).map(ge=>ge.bind(me)(Z))})}promoteToPrimaryMeeting(Z){return this.actionPromoteToPrimaryMeeting(Z)}actionPromoteToPrimaryMeeting(Z){return p(this,void 0,void 0,function*(){let me=new g.default(S.default.SignalingRequestFailed);return yield new xe.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new Ft.default(this.logger,new ft.default(this.meetingSessionContext,Z,ge=>{me=ge}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=me.statusCode()===S.default.OK,me})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(Z=>{zt.Maybe.of(Z.audioVideoWasDemotedFromPrimaryMeeting).map(me=>me.bind(Z)(new g.default(S.default.OK)))})}videoInputDidChange(Z){return p(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(Z?yield this.replaceLocalVideo(Z):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(Z){return p(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!Z)try{Z=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(Z)})}constructor(Z,me,ge,rt,Ue,Xe){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new ae.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=me,this.sessionStateController=new T.default(this._logger),this._configuration=Z,this._webSocketAdapter=ge,this._realtimeController=new _.default(rt),this._realtimeController.realtimeSetLocalAttendeeId(Z.credentials.attendeeId,Z.credentials.externalUserId),this._mediaStreamBroker=rt,this._reconnectController=Ue,this._videoTileController=new Fe.default(new ke.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Xe}},"DefaultAudioVideoController");l.default=Le,Le.MIN_VOLUME_DECIBELS=-42,Le.MAX_VOLUME_DECIBELS=-14,Le.PING_PONG_INTERVAL_MS=1e4},1292880771:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5384631890)),m=c(d(1653454410)),p=c(d(9416545472)),a=c(d(1946951215)),r=c(d(7136804647)),n=c(d(7147499759)),e=c(d(3777990285)),t=c(d(4882394368)),i=c(d(2653083101)),o=c(d(8855787924)),f=c(d(8796204466)),g=c(d(616382858));let S=s(class extends g.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const y=new r.default;y.meetingId="",y.externalMeetingId="",y.credentials=new n.default,y.credentials.attendeeId="",y.credentials.joinToken="",y.urls=new i.default,y.urls.turnControlURL="",y.urls.audioHostURL="",y.urls.signalingURL="wss://localhost/";const _=new p.default;super(v||y,_,new f.default(new p.default),new a.default,new o.default(0,new h.default(0,0,0)),new m.default(v||y,_))}},"NoOpAudioVideoController");l.default=S},314828250:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(p,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}s(o,"fulfilled");function f(S){try{g(n.throw(S))}catch(u){i(u)}}s(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}s(g,"step"),g((n=n.apply(p,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(272852764);let m=s(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const r=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,r),r}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,r){this.videoTileController.bindVideoElement(a,r),this.trace("bindVideoElement",{tileId:a,videoElementId:r.id})}unbindVideoElement(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,r),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:r})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const r=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),r}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const r=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,r),r}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const r=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),r}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,r){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,r),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,r){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,r),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,r)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,r,n){this.realtimeController.realtimeSendDataMessage(a,r,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,r){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,r),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,r,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,r,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,r),r})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const r=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,r),r})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,r),r})}startAudioInput(a){return c(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return c(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return c(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return c(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const r=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),r}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const r=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),r}chooseVideoInputQuality(a,r,n){this.deviceController.chooseVideoInputQuality(a,r,n),this.trace("chooseVideoInputQuality",{width:a,height:r,frameRate:n})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,r){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,r)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const r=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),r}startContentShareFromScreenCapture(a,r){const n=this.contentShareController.startContentShareFromScreenCapture(a,r);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,r,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof r<"u"&&(i+=` ${JSON.stringify(r)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const r=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,r),r}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,r,n,e,t,i){this.audioVideoController=a,this.videoTileController=r,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");l.default=m},5565992874:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9775024432)),p=d(9721779232);let a=s(class extends m.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:f,height:g}=o;if(!e||!t){i.clearRect(0,0,f,g);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,f,g),i.drawImage(this.scaledCanvas,0,0,f,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,f,g),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,f,g),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=p.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return c(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},9775024432:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8080066655)),p=d(9721779232),a=h(d(9387566064));let r=s(class extends m.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:f}=this,{width:g,height:S}=f;o.save(),o.clearRect(0,0,g,S),o.drawImage(this.scaledCanvas,0,0,g,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,g,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,f.width,f.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=p.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return c(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=r},9721779232:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const d={LOW:7,MEDIUM:15,HIGH:30};let c=s(class{static getBlurAmount(m,p){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*p.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=c,c.BLUR_STRENGTH_DIVISOR=540,l.default=d},7840699215:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(f,g,S,u){function v(y){return y instanceof S?y:new S(function(_){_(y)})}return s(v,"adopt"),new(S||(S=Promise))(function(y,_){function C(O){try{A(u.next(O))}catch(D){_(D)}}s(C,"fulfilled");function T(O){try{A(u.throw(O))}catch(D){_(D)}}s(T,"rejected");function A(O){O.done?y(O.value):v(O.value).then(C,T)}s(A,"step"),A((u=u.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6292069043)),p=h(d(5956893594)),a=h(d(3756404293)),r=h(d(7000795223)),n=h(d(5565992874)),e=h(d(9775024432)),t=h(d(9721779232));let i=s(class extends r.default{setBlurStrength(){}loadAssets(){return c(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=s(class Gl extends m.default{static create(g,S){return c(this,void 0,void 0,function*(){g=Gl.resolveSpec(g),S=Gl.resolveOptions(S);const{logger:u}=S,v=yield Gl.isSupported(g,S);if(u.info(`processor is ${v?"":"not"} supported`),!v)return u.warn("Using no-op processor because background blur is not supported"),new i;let y;return(yield e.default.isSupported())?(u.info("Using browser-provided background blur"),y=new e.default(g,S)):(u.info("Using built-in background blur"),y=new n.default(g,S)),yield y.loadAssets(),y})}static resolveOptions(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},g);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new p.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(g,S){return g=Gl.resolveSpec(g),S=Gl.resolveOptions(S),super.isSupported(g,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},9387566064:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7898988988));let m=s(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=m},7472936477:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class bS{static builder(){return new bS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const h={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},p="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=p,this.input=h,this.output=m,this}withPath(h){return this.path=h,this}withInput(h){return this.input=h,this}withOutput(h){return this.output=h,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=d},8924517826:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=.8;let c=s(class{reportEvent(m){const p=m-this.lastReportedEventTimestamp;if(p>=this.reportingPeriodMillis){const a=this.filterCount,r=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||a===0)return;const n=Math.round(r/a),e=Math.round(this.framerate*(p/1e3))-a,t=Math.round(100*r/p);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:p}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:r,periodMillis:p})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*d)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const p=Date.now();this.reportEvent(p)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,p,a,r){this.delegate=m,this.reportingPeriodMillis=p,this.filterCPUUtilization=a,this.logger=r,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=c},8080066655:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const m=d(6582301018),p=h(d(6672418579)),a=h(d(8924517826));let r=s(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=s(class Vh{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,f)=>{i.resolve=o,i.reject=f}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return c(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield m.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return c(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const f=o.width,g=o.height;if(f===0||g===0)return i;this.sourceWidth===0&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==f||this.sourceHeight!==g)&&(this.sourceWidth=f,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const u=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const y=this.scaledCanvas.getContext("2d");y.save(),y.scale(u,v),y.drawImage(o,0,0),y.restore();const _=y.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const C=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:_},[_.data.buffer]),S=yield C}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,f,g;return c(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(f=this.targetCanvas)===null||f===void 0||f.remove(),this.targetCanvas=void 0,(g=this.scaledCanvas)===null||g===void 0||g.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,f,g,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new p.default(this.targetCanvas),this.mask$=new r,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Vh.createWorkerPromise(),this.loadModelPromise=Vh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(f),this.spec=o,this.logger=f.logger,this.delegate=g,this.initCPUMonitor(f),this.eventController=S}},"BackgroundFilterProcessor");l.default=n;let e=s(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},6292069043:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(f,g,S,u){function v(y){return y instanceof S?y:new S(function(_){_(y)})}return s(v,"adopt"),new(S||(S=Promise))(function(y,_){function C(O){try{A(u.next(O))}catch(D){_(D)}}s(C,"fulfilled");function T(O){try{A(u.throw(O))}catch(D){_(D)}}s(T,"rejected");function A(O){O.done?y(O.value):v(O.value).then(C,T)}s(A,"step"),A((u=u.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(6582301018),p=d(8113008952),a=h(d(7472936477)),r=h(d(8351168186)),n=h(d(8066052849)),e=s(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=s(class{static defaultAssetSpec(){const g=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${g.major}.${g.minor}`}}static createUrlWithParams(g,S){const u=new URL(g),v=Object.keys(S);for(const y of v)S[y]!==void 0&&u.searchParams.set(y,S[y]);return u.toString()}static resolveSpec(g){const{paths:S=i,model:u=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:y=this.defaultAssetSpec().revisionID}=g||{},_={assetGroup:v,revisionID:y,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,_),S.wasm=this.createUrlWithParams(S.wasm,_),S.simd=this.createUrlWithParams(S.simd,_),u.path=this.createUrlWithParams(u.path,_),{paths:S,model:u,assetGroup:v,revisionID:y}}static resolveOptions(g){g.reportingPeriodMillis||(g.reportingPeriodMillis=1e3);const S=30;return g.filterCPUUtilization?(g.filterCPUUtilization<0||g.filterCPUUtilization>100)&&(g.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),g.filterCPUUtilization=S):g.filterCPUUtilization=S,g}static isSupported(g,S){const{logger:u}=S;return typeof globalThis>"u"?(u.info("Browser does not have globalThis."),Promise.resolve(!1)):new r.default().supportsBackgroundFilter()?p.supportsWASM(globalThis,u)?this.supportsBackgroundFilter(globalThis,g,u):(u.info("Browser does not support WASM."),Promise.resolve(!1)):(u.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0;return c(this,void 0,void 0,function*(){if(!p.supportsWorker(g,u))return u.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const y=yield m.loadWorker(v,"BackgroundFilterWorker",{},null);try{y.terminate()}catch(_){u.info(`Failed to terminate worker. ${_.message}`)}return!0}catch(y){return u.info(`Failed to fetch and instantiate test worker ${y.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},7898988988:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}filterFrameDurationHigh(h){var m;for(const p of this.observers)(m=p.filterFrameDurationHigh)===null||m===void 0||m.call(p,h)}filterCPUUtilizationHigh(h){var m;for(const p of this.observers)(m=p.filterCPUUtilizationHigh)===null||m===void 0||m.call(p,h)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=d},1069044041:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8080066655)),p=h(d(1434097650));let a=s(class Hh extends m.default{setImageBlob(n){return c(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield Hh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:f,height:g}=o;i.save(),i.clearRect(0,0,f,g),i.drawImage(this.scaledCanvas,0,0,f,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,f,g),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return c(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return c(this,void 0,void 0,function*(){this.replacementImage=yield Hh.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return c(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new p.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=a},45891509:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(i,o,f,g){function S(u){return u instanceof f?u:new f(function(v){v(u)})}return s(S,"adopt"),new(f||(f=Promise))(function(u,v){function y(T){try{C(g.next(T))}catch(A){v(A)}}s(y,"fulfilled");function _(T){try{C(g.throw(T))}catch(A){v(A)}}s(_,"rejected");function C(T){T.done?u(T.value):S(T.value).then(y,_)}s(C,"step"),C((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6292069043)),p=h(d(5956893594)),a=h(d(3756404293)),r=h(d(7000795223)),n=h(d(1069044041));let e=s(class extends r.default{loadAssets(){return c(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return c(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=s(class _S extends m.default{static create(o,f){return c(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const{logger:g}=f;if(!(yield _S.isSupported(o,f)))return g.warn("Using no-op processor because background replacement is not supported"),new e;g.info("Using background replacement filter");const u=new n.default(o,f);return yield u.loadAssets(),u})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=Object.assign({},o);return f.logger||(f.logger=new p.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(f)}static resolveOptionsAsync(o){return c(this,void 0,void 0,function*(){if(!o.imageBlob){const f=document.createElement("canvas");f.width=100,f.height=100;const g=f.getContext("2d");g.fillStyle="blue",g.fillRect(0,0,100,100);const S=yield new Promise(u=>{f.toBlob(u)});o.imageBlob=S}})}static isSupported(o,f){const g=Object.create(null,{isSupported:{get:()=>super.isSupported}});return c(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const S=f.imageBlob,u=URL.createObjectURL(S);try{yield n.default.loadImage(u)}catch(v){return f.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(u)}return g.isSupported.call(this,o,f)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},1434097650:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(7898988988));let m=s(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=m},5384631890:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const h=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,h}constructor(h,m,p){this.fixedWaitMs=h,this.shortBackoffMs=m,this.longBackoffMs=p,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=d},1363278032:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5384631890)),m=c(d(8220481840));let p=s(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(r){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,r)}constructor(r,n,e){this.fixedWaitMs=r,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=p},8220481840:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5384631890));let m=s(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,r,n,e){super(a,r,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=m},8351168186:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(585669709),m=d(888724265);let p=s(class Wh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const r of this.chromeLike)if(r===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const r of this.webkitBrowsers)if(r===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Wh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Wh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(r,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(r/64)*64,Math.ceil(n/64)*64]:[r,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const r=[];for(const n in this.browserSupport)r.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return r.join(", ")}supportedVideoCodecs(){return c(this,void 0,void 0,function*(){const r=new RTCPeerConnection;return r.addTransceiver("video",{direction:"inactive",streams:[]}),(yield r.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=p,p.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,p.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},7059763395:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),m=c(d(5147189764)),p=c(d(1847926377)),a=c(d(3572556907));let r=s(class CS{getMetricMap(e,t){switch(e){case p.default.AUDIO:switch(t){case m.default.UPSTREAM:return this.audioUpstreamMetricMap;case m.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case p.default.VIDEO:switch(t){case m.default.UPSTREAM:return this.videoUpstreamMetricMap;case m.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:f,source:g}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const u=this.streamMetricReports[S];if(u.direction===t.dir&&u.mediaType===t.media)return f(g||t.source,Number(S))}else return f(g||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],f=this.getMetricMap(i.media,i.dir)[i.source],{transform:g,source:S}=f;return g(S||i.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===p.default.VIDEO&&this.streamMetricReports[e].direction===m.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===p.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const u=this.getObservableVideoMetricValue(S,Number(t));isNaN(u)||(i[S]=u)}const o=this.streamMetricReports[t].groupId,f=this.streamMetricReports[t].streamId;let g="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?g=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:g=f?this.videoStreamIndex.attendeeIdForStreamId(f):this.selfAttendeeId,e[g]=e[g]?e[g]:{},e[g][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new CS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o])},this.decoderLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.concealedSamples-(g.previousMetrics.concealedSamples||0),u=g.currentMetrics.totalSamplesReceived-(g.previousMetrics.totalSamplesReceived||0);return u<=0||u-S<=0?0:S/u*100},this.packetLossPercent=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics[o]-(g.previousMetrics[o]||0),u=g.currentMetrics.packetsLost-(g.previousMetrics.packetsLost||0),v=S+u;return v<=0||u<=0?0:u*100/v},this.jitterBufferMs=(o,f)=>{const g=this.streamMetricReports[f],S=g.currentMetrics.jitterBufferDelay-(g.previousMetrics.jitterBufferDelay||0),u=g.currentMetrics.jitterBufferEmittedCount-(g.previousMetrics.jitterBufferEmittedCount||0);return S<=0||u<=0?0:S/u*1e3},this.countPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:Math.trunc(u/S)},this.bitsPerSecond=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=(g.currentMetrics[o]-(g.previousMetrics[o]||0))*8;return u<=0?0:Math.trunc(u/S)},this.secondsToMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(g.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,f)=>{const g=f?this.streamMetricReports[f]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:u*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,f)=>{const g=this.streamMetricReports[f];if(g.previousObjectMetrics[o]===void 0||g.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let u=0,v=0;for(const[_,C]of Object.entries(g.previousObjectMetrics[o]))_==="cpu"&&(u=C);for(const[_,C]of Object.entries(g.currentObjectMetrics[o]))_==="cpu"&&(v=C);const y=v-u;return y<=0?0:y*1e3/S},this.isHardwareImplementation=(o,f)=>{const g=this.streamMetricReports[f];if(g.currentStringMetrics[o]===void 0)return NaN;const S=String(g.currentStringMetrics[o]),u=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return u&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:p.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:p.default.VIDEO,dir:m.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:p.default.AUDIO,dir:m.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:p.default.AUDIO,dir:m.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:p.default.AUDIO,dir:m.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:p.default.VIDEO,dir:m.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:p.default.AUDIO,dir:m.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:p.default.VIDEO,dir:m.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:p.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=r},5147189764:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var d;(function(c){c[c.UPSTREAM=0]="UPSTREAM",c[c.DOWNSTREAM=1]="DOWNSTREAM"})(d=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=d},1847926377:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var d;(function(c){c[c.AUDIO=0]="AUDIO",c[c.VIDEO=1]="VIDEO"})(d=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=d},9895069884:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"ClientVideoStreamReceivingReport");l.default=d},3572556907:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=d},7894724558:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=d},7825873064:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=d},6963727640:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(h){this.currentData=h}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const h=this.health();return h!==this.currentHealth?(this.currentHealth=h,h):null}constructor(h,m,p){this.minHealth=h.minHealth,this.maxHealth=h.maxHealth,this.currentHealth=h.initialHealth,this.currentData=m.clone(),this.name=p}},"BaseConnectionHealthPolicy");l.default=d},3544934903:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class Ia{static isTimestampRecent(h,m){return Date.now()<h+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(h){return Ia.isTimestampRecent(this.connectionStartTimestampMs,h)}isLastPacketLossRecent(h){return Ia.isTimestampRecent(this.lastPacketLossInboundTimestampMs,h)}isGoodSignalRecent(h){return Ia.isTimestampRecent(this.lastGoodSignalTimestampMs,h)}isWeakSignalRecent(h){return Ia.isTimestampRecent(this.lastWeakSignalTimestampMs,h)}isNoSignalRecent(h){return Ia.isTimestampRecent(this.lastNoSignalTimestampMs,h)}clone(){const h=new Ia;return h.connectionStartTimestampMs=this.connectionStartTimestampMs,h.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,h.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,h.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,h.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,h.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,h.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,h.consecutiveMissedPongs=this.consecutiveMissedPongs,h.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),h.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),h.audioSpeakerDelayMs=this.audioSpeakerDelayMs,h.isVideoEncoderHardware=this.isVideoEncoderHardware,h.videoEncodingTimeInMs=this.videoEncodingTimeInMs,h.cpuLimitationDuration=this.cpuLimitationDuration,h.videoInputFps=this.videoInputFps,h.videoEncodeFps=this.videoEncodeFps,h}setConsecutiveMissedPongs(h){this.consecutiveMissedPongs=h}setConsecutiveStatsWithNoPackets(h){this.consecutiveStatsWithNoPackets=h}setConsecutiveStatsWithNoAudioPacketsSent(h){this.consecutiveStatsWithNoAudioPacketsSent=h}setLastPacketLossInboundTimestampMs(h){this.lastPacketLossInboundTimestampMs=h}setLastNoSignalTimestampMs(h){this.lastNoSignalTimestampMs=h}setLastWeakSignalTimestampMs(h){this.lastWeakSignalTimestampMs=h}setLastGoodSignalTimestampMs(h){this.lastGoodSignalTimestampMs=h}setAudioSpeakerDelayMs(h){this.audioSpeakerDelayMs=h}setIsVideoEncoderHardware(h){this.isVideoEncoderHardware=h}setVideoEncodingTimeInMs(h){this.videoEncodingTimeInMs=h}setCpuLimitationDuration(h){this.cpuLimitationDuration=h}setVideoInputFps(h){this.videoInputFps=h}setVideoEncodeFps(h){this.videoEncodeFps=h}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=d},1091173065:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8438187697)),m=c(d(1615281264));let p=s(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[h.default,m.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=p},8929805428:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6963727640));let m=s(class Wo extends h.default{health(){if(this.currentData.isConnectionStartRecent(Wo.CONNECTION_WAIT_TIME_MS))return 1;const r=this.currentData.consecutiveStatsWithNoPackets>=Wo.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=Wo.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Wo.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Wo.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),r||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${r}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(a,r,n){super(r,n,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,Wo.CONNECTION_UNHEALTHY_THRESHOLD=r.connectionUnhealthyThreshold,Wo.CONNECTION_WAIT_TIME_MS=r.connectionWaitTimeMs,Wo.MISSED_PONGS_THRESHOLD=r.missedPongsUpperThreshold,Wo.MAXIMUM_AUDIO_DELAY_MS=r.maximumAudioDelayMs,Wo.MAXIMUM_AUDIO_DELAY_DATA_POINTS=r.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=m},2115341037:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6963727640));let m=s(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),r=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&r}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,r,n){super(r,n,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=r.sendingAudioFailureSamplesToConsider>0?r.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=r.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=r.maximumTimesToWarn,this.coolDownTimeMs=r.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=m},5928001672:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6963727640));let m=s(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,r=a*this.packetsExpected;let n=0;for(let e=0;e<a;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/r,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,r){super(a,r,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=m},6005421222:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var d;(function(c){c.VideoEncodingCpuHealth="Video Encoding CPU Health",c.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(d=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=d},8438187697:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6963727640)),m=c(d(6005421222));let p=s(class extends h.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=r.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=r.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=p},1615281264:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6963727640)),m=c(d(6005421222));let p=s(class extends h.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=r.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=p},1523356655:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(903520651);let h=s(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(p){p===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):p<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(p,a,r){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",r),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(p){let a=0,r=0;const n=p.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=p.getRTCStatsReport();let f=0;o.forEach(S=>{S.type==="candidate-pair"&&S.bytesReceived&&(f+=S.bytesReceived)});const g=f-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=f,typeof e=="number"&&typeof t=="number"){if(a=e,r=t,a<0||r<0||g<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,r),g>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||r>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(p),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(p){p>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(p){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),r=p.getVideoUpstreamSsrc();if(!a||r===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const n=p.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",r),e=p.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",r),t=p.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",r),i=p.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",r),o=p.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",r);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(p,a){p.unshift(a),p.length>60&&p.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(p=>{c.Maybe.of(p.connectionHealthDidChange).map(a=>a.bind(p)(this.connectionHealthData.clone()))})}constructor(p,a,r,n,e){this.audioVideoController=p,this.realtimeController=a,this.connectionHealthData=r,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},3560634922:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.Modality="#content"})(d||(d={})),l.default=d},8271576690:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8351168186)),p=h(d(8152963890));let a=s(class Gh{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return c(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),p.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return c(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return c(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return c(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new m.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||Gh.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||Gh.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},4707988254:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(g,S,u,v){function y(_){return _ instanceof u?_:new u(function(C){C(_)})}return s(y,"adopt"),new(u||(u=Promise))(function(_,C){function T(D){try{O(v.next(D))}catch(M){C(M)}}s(T,"fulfilled");function A(D){try{O(v.throw(D))}catch(M){C(M)}}s(A,"rejected");function O(D){D.done?_(D.value):y(D.value).then(T,A)}s(O,"step"),O((v=v.apply(g,S||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8981226922)),p=h(d(7136804647)),a=h(d(7147499759)),r=h(d(4599834734)),n=h(d(3741513515)),e=d(903520651),t=h(d(9248911078)),i=h(d(4134174226)),o=h(d(3560634922));let f=s(class{static createContentShareMeetingSessionConfigure(S){const u=new p.default;return u.meetingId=S.meetingId,u.externalMeetingId=S.externalMeetingId,u.urls=S.urls,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.credentials=new a.default,u.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,u.credentials.externalUserId=S.credentials.externalUserId,u.credentials.joinToken=S.credentials.joinToken+o.default.Modality,u.meetingFeatures=S.meetingFeatures.clone(),u.videoDownlinkBandwidthPolicy=new t.default,u}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,u){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,u)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return c(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===m.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let u=0;u<this.mediaStreamBroker.mediaStream.getTracks().length;u++)this.mediaStreamBroker.mediaStream.getTracks()[u].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,u){return c(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,u);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(u=>u.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(u=>u.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return c(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const u of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(u)&&S(u)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(u=>{e.Maybe.of(u.contentShareDidStop).map(v=>v.call(u))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,u,v,y)=>{const _=new r.default(S).hasModality(r.default.MODALITY_CONTENT),C=new r.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!_||!C||!u||this.contentShareTile)return;const T=this.mediaStreamBroker.mediaStream;if(T!=null&&T.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const A=T.getVideoTracks()[0];let O,D;if(A.getSettings){const M=A.getSettings();O=M.width,D=M.height}else{const M=A.getCapabilities();O=M.width,D=M.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,T,O,D,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(A=>{e.Maybe.of(A.contentShareDidStart).map(O=>O.call(A))})})}constructor(S,u,v){this.mediaStreamBroker=S,this.contentAudioVideo=u,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=f},1252089397:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=s(class Oo{static register(){!("document"in d.g)||!document.addEventListener||Oo.shouldRegisterCSPMonitor&&(Oo.added||(document.addEventListener("securitypolicyviolation",Oo.listener),Oo.added=!0))}static unregister(){!("document"in d.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Oo.listener),Oo.loggers=new Set,Oo.added=!1)}static disable(){Oo.shouldRegisterCSPMonitor=!1,Oo.unregister()}static addLogger(m){m&&Oo.loggers.add(m)}static removeLogger(m){m&&Oo.loggers.delete(m)}},"CSPMonitor");l.default=c,c.loggers=new Set,c.shouldRegisterCSPMonitor=!0,c.added=!1,c.listener=h=>{const m=`Security Policy Violation
Blocked URI: ${h.blockedURI}
Violated Directive: ${h.violatedDirective}
Original Policy: ${h.originalPolicy}
Document URI: ${h.documentURI}
Source File: ${h.sourceFile}
Line No.: ${h.lineNumber}
`;for(const p of c.loggers)p.error(m);c.loggers.size===0&&console.error(m)}},1766966835:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(h,m,p,a,r,n){this.timestampMs=h,this.topic=m,this.data=p,this.senderAttendeeId=a,this.senderExternalUserId=r,this.throttled=!!n}},"DataMessage");l.default=d},3171772403:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function d(c){return c&&"destroy"in c}s(d,"isDestroyable"),l.isDestroyable=d},3961458747:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function d(c){return!!c&&typeof c=="object"&&"mute"in c&&"stop"in c&&"intrinsicDevice"in c}s(d,"isAudioTransformDevice"),l.isAudioTransformDevice=d},8152963890:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(O,D,M,R){function F(V){return V instanceof M?V:new M(function($){$(V)})}return s(F,"adopt"),new(M||(M=Promise))(function(V,$){function X(ie){try{ne(R.next(ie))}catch(pe){$(pe)}}s(X,"fulfilled");function Y(ie){try{ne(R.throw(ie))}catch(pe){$(pe)}}s(Y,"rejected");function ne(ie){ie.done?V(ie.value):F(ie.value).then(X,Y)}s(ne,"step"),ne((R=R.apply(O,D||[])).next())})},h=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8351168186)),p=h(d(113406342)),a=h(d(3741513515)),r=h(d(2997222898)),n=d(903520651),e=h(d(5709738441)),t=h(d(1140481832)),i=d(3961458747),o=h(d(4261566413)),f=h(d(2083236720)),g=h(d(9468773362)),S=h(d(6809352498)),u=h(d(3288618491)),v=h(d(6997557363)),y=h(d(8219602063)),_=h(d(8981226922)),C=d(272852764);let T=s(class Di{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var D;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(D=this.mediaDeviceWrapper)===null||D===void 0||D.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var D;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(D=this.mediaDeviceWrapper)===null||D===void 0||D.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return c(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const M=yield this.listDevicesOfKind("audioinput",D);return this.trace("listAudioInputDevices",D,M),M})}listVideoInputDevices(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const M=yield this.listDevicesOfKind("videoinput",D);return this.trace("listVideoInputDevices",D,M),M})}listAudioOutputDevices(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const M=yield this.listDevicesOfKind("audiooutput",D);return this.trace("listAudioOutputDevices",D,M),M})}pushAudioMeetingStateForPermissions(D){var M;(M=this.eventController)===null||M===void 0||M.publishEvent(D===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(D){var M;(M=this.eventController)===null||M===void 0||M.publishEvent(D===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(D){return c(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(D))})}startAudioInputTask(D){var M;return c(this,void 0,void 0,function*(){if(D===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(D)?(this.logger.info(`Choosing transform input device ${D}`),yield this.chooseAudioTransformInputDevice(D)):(this.logger.info(`Choosing intrinsic audio input device ${D}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",D)),this.trace("startAudioInputDevice",D,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(M=this.transform)===null||M===void 0?void 0:M.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(R){throw R}})}stopAudioInput(){return c(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return c(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(D){var M;return c(this,void 0,void 0,function*(){if(((M=this.transform)===null||M===void 0?void 0:M.device)===D)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const R=Di.getAudioContext();if(!(R instanceof OfflineAudioContext))switch(R.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield R.resume()}let F;try{F=yield D.createAudioNode(R)}catch($){throw this.logger.error(`Unable to create transform device node: ${$}.`),$}const V=yield D.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",V),this.logger.debug(`Got inner stream: ${V}.`),this.setTransform(D,F)})}chooseVideoTransformInputDevice(D){var M;return c(this,void 0,void 0,function*(){if(this.eventController&&D instanceof e.default&&D.passEventControllerToProcessors(this.eventController),D===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const R=this.chosenVideoTransformDevice;R&&this.logger.info("Switched from previous VideoTransformDevice");const F=!!R,V=yield D.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((M=this.activeDevices.video)===null||M===void 0?void 0:M.stream,V)){this.logger.info("video transform device needs new intrinsic device"),F&&R.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=D,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",V),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=D,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield D.transformStream(this.activeDevices.video.stream)})}startVideoInput(D){return c(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(D))})}startVideoInputTask(D){return c(this,void 0,void 0,function*(){if(!D){this.logger.error("Invalid video input device");return}try{return C.isVideoTransformDevice(D)?(this.logger.info(`Choosing video transform device ${D}`),yield this.chooseVideoTransformInputDevice(D),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",D),this.trace("startVideoInputDevice",D),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(M){throw M}})}stopVideoInput(){return c(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return c(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(D){return c(this,void 0,void 0,function*(){this.audioOutputDeviceId=D,this.watchForDeviceChangesIfNecessary();const M=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(M),this.trace("chooseAudioOutput",D,null)})}addDeviceChangeObserver(D){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(D),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(D){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(D),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var D,M;if(!this.activeDevices.audio)return null;const R=(M=(D=this.transform)===null||D===void 0?void 0:D.nodes)===null||M===void 0?void 0:M.end;if(R){const F=R.context.createAnalyser();return F.removeOriginalInputs=()=>{try{R.disconnect(F)}catch{}},R.connect(F),F}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(D){const M=Di.getAudioContext(),R=M.createAnalyser(),F=M.createMediaStreamSource(D);return F.connect(R),this.trace("createAnalyserNodeForAudioInput"),R.removeOriginalInputs=()=>{try{F.disconnect(R)}catch{}},R}startVideoPreviewForVideoInput(D){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",D.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,D,!0),this.trace("startVideoPreviewForVideoInput",D.id)}stopVideoPreviewForVideoInput(D){t.default.disconnectVideoStreamFromVideoElement(D,!1),this.trace("stopVideoPreviewForVideoInput",D.id)}setDeviceLabelTrigger(D){if(this.deviceInfoCache){for(const M of this.deviceInfoCache)if(!M.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=D,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(D){let M=null;return this.useWebAudio?(M=Di.getAudioContext().createMediaStreamSource(D),M.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",D.id),M}chooseVideoInputQuality(D,M,R){const F=this.browserBehavior.requiresResolutionAlignment(D,M);this.videoInputQualitySettings=new _.default(F[0],F[1],R)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return c(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return c(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(D){return c(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(D){const M=this.activeDevices[D];if(!M)return;const R=M.endedCallback,F=M.trackMuteCallback,V=M.trackUnmuteCallback;for(const $ of M.stream.getTracks())$.stop(),R&&$.removeEventListener("ended",R),F&&$.removeEventListener("mute",F),V&&$.removeEventListener("unmute",V),delete M.endedCallback,delete M.trackMuteCallback,delete M.trackUnmuteCallback,delete this.activeDevices[D]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(D){var M;let R=this.activeDevices.audio;if(this.useWebAudio&&(R=this.getMediaStreamDestinationNode()),!!R){for(const F of R.stream.getTracks())F.enabled!==D&&(F.enabled=D);this.muted!==!D&&(this.muted=!D,(M=this.transform)===null||M===void 0||M.device.mute(this.muted))}}static getIntrinsicDeviceId(D){if(!D)return;if(typeof D=="string")return D;if(D.id)return D.id;const R=D.deviceId;if(!R)return;if(typeof R=="string"||Array.isArray(R))return R;const F=R;if(typeof F.exact=="string"||Array.isArray(F.exact))return F.exact}static createEmptyAudioDevice(){return Di.synthesizeAudioDevice(0)}static synthesizeAudioDevice(D){const M=Di.getAudioContext(),R=M.createMediaStreamDestination();if(D){const F=M.createGain();F.gain.value=.1,F.connect(R);const V=M.createOscillator();V.frequency.value=D,V.connect(F),V.start()}else{const F=M.createBufferSource();try{F.buffer=M.createBuffer(1,M.sampleRate*5,M.sampleRate)}catch(V){if(V&&V.name==="NotSupportedError")F.buffer=M.createBuffer(1,Di.defaultSampleRate*5,Di.defaultSampleRate);else throw V}F.buffer.getChannelData(0)[0]=3e-4,F.loop=!0,F.connect(R),F.start()}return R.stream}listDevicesOfKind(D,M){return c(this,void 0,void 0,function*(){return(M||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(D)})}updateDeviceInfoCacheFromBrowser(){var D;return c(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let R=yield navigator.mediaDevices.enumerateDevices(),F=!0;for(const V of R)if(!V.label){F=!1;break}if(!F)try{this.logger.info("attempting to trigger media device labels since they are hidden");const V=yield this.deviceLabelTrigger();R=yield navigator.mediaDevices.enumerateDevices();for(const $ of V.getTracks())$.stop()}catch(V){this.logger.info("unable to get media device labels"),(D=this.eventController)===null||D===void 0||D.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(V)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(R)}`),this.deviceInfoCache=R})}listCachedDevicesOfKind(D){const M=[];if(this.deviceInfoCache)for(const R of this.deviceInfoCache)R.kind===D&&M.push(R);return M}handleDeviceChange(){return c(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const D=this.listCachedDevicesOfKind("audioinput"),M=this.listCachedDevicesOfKind("videoinput"),R=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const F=this.listCachedDevicesOfKind("audioinput"),V=this.listCachedDevicesOfKind("videoinput"),$=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(X=>{this.areDeviceListsEqual(D,F)||n.Maybe.of(X.audioInputsChanged).map(Y=>Y.bind(X)(F)),this.areDeviceListsEqual(M,V)||n.Maybe.of(X.videoInputsChanged).map(Y=>Y.bind(X)(V)),this.areDeviceListsEqual(R,$)||n.Maybe.of(X.audioOutputsChanged).map(Y=>Y.bind(X)($))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(D,M){return c(this,void 0,void 0,function*(){try{D==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}D==="audio"?this.forEachObserver(R=>{n.Maybe.of(R.audioInputStreamEnded).map(F=>F.bind(R)(M))}):this.forEachObserver(R=>{n.Maybe.of(R.videoInputStreamEnded).map(F=>F.bind(R)(M))})})}forEachObserver(D){for(const M of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(M)&&D(M)})}forEachMediaStreamBrokerObserver(D){for(const M of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(M)&&D(M)})}areDeviceListsEqual(D,M){return JSON.stringify(D.map(R=>JSON.stringify(R)).sort())===JSON.stringify(M.map(R=>JSON.stringify(R)).sort())}intrinsicDeviceAsMediaStream(D){return D&&D.id?D:null}hasSameMediaStreamId(D,M,R){var F,V,$,X;let Y;return D==="audio"?(Y=R==null?void 0:R.audio.streamId,!!Y&&Y===((V=(F=M.constraints)===null||F===void 0?void 0:F.audio)===null||V===void 0?void 0:V.streamId)):(Y=R==null?void 0:R.video.streamId,!!Y&&Y===((X=($=M==null?void 0:M.constraints)===null||$===void 0?void 0:$.video)===null||X===void 0?void 0:X.streamId))}hasSameGroupId(D,M,R){if(D==="")return!0;const F=Di.getIntrinsicDeviceId(R);return this.logger.debug(`Checking deviceIds ${F} of type ${typeof F} with groupId ${D}`),typeof F=="string"&&D===this.getGroupIdFromDeviceId(M,F)}getGroupIdFromDeviceId(D,M){if(this.deviceInfoCache!==null){const R=this.listCachedDevicesOfKind(`${D}input`).find(F=>F.deviceId===M);if(R&&R.groupId)return this.logger.debug(`GroupId of deviceId ${M} found in cache is ${R.groupId}`),R.groupId}return this.logger.debug(`GroupId of deviceId ${M} found in cache is empty`),""}handleGetUserMediaError(D,M){if(!D)throw new f.default(D);switch(D.name){case"NotReadableError":case"TrackStartError":throw new S.default(D);case"NotFoundError":case"DevicesNotFoundError":throw new g.default(D);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw M&&M<Di.permissionDeniedOriginDetectionThresholdMs?new v.default(D,"Permission denied by browser"):new v.default(D,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new u.default(D);case"TypeError":throw new y.default(D);case"AbortError":default:throw new f.default(D)}}matchesDeviceSelection(D,M,R,F){return R&&R.stream.active&&(this.hasSameMediaStreamId(D,R,F)||R.groupId!==null&&this.hasSameGroupId(R.groupId,D,M))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(R.constraints)} to proposed constraints ${JSON.stringify(F)}`),R.matchesConstraints(F)):!1}chooseInputIntrinsicDevice(D,M){var R,F;return c(this,void 0,void 0,function*(){const V=this.getMediaStreamConstraints(D,M);if(this.matchesDeviceSelection(D,M,this.activeDevices[D],V)){this.logger.info(`reusing existing ${D} input device`);return}this.activeDevices[D]&&this.activeDevices[D].stream&&this.stopTracksAndRemoveCallbacks(D);const $=Date.now(),X=new o.default;try{this.logger.info(`requesting new ${D} device with constraint ${JSON.stringify(V)}`);const Y=this.intrinsicDeviceAsMediaStream(M);D==="audio"&&M===null?(X.stream=Di.createEmptyAudioDevice(),X.constraints=null):Y?(this.logger.info(`using media stream ${Y.id} for ${D} device`),X.stream=Y,X.constraints=V):(X.stream=yield navigator.mediaDevices.getUserMedia(V),X.constraints=V),yield this.handleNewInputDevice(D,X)}catch(Y){const ne=this.getErrorMessage(Y);D==="audio"?(R=this.eventController)===null||R===void 0||R.publishEvent("audioInputFailed",{audioInputErrorMessage:ne}):(F=this.eventController)===null||F===void 0||F.publishEvent("videoInputFailed",{videoInputErrorMessage:ne}),this.logger.error(`failed to get ${D} device for constraints ${JSON.stringify(V)}: ${ne}`);let ie=!0;if(Y&&"constraint"in Y&&(this.logger.error(`Over-constrained by constraint: ${Y.constraint}`),this.useMediaConstraintsFallback)){const pe=this.getMediaStreamConstraints(D,M,!0),Ee=JSON.stringify(pe);if(Ee!==JSON.stringify(V)){this.logger.info(`retry requesting new ${D} device with minimal constraint ${Ee}`);try{X.stream=yield navigator.mediaDevices.getUserMedia(pe),X.constraints=pe,yield this.handleNewInputDevice(D,X),ie=!1}catch(Be){this.logger.error(`failed to get ${D} device for constraints ${Ee}: ${this.getErrorMessage(Be)}`)}}}if(ie){if(D==="audio"){this.logger.info(`choosing null ${D} device instead`);try{X.stream=Di.createEmptyAudioDevice(),X.constraints=null,yield this.handleNewInputDevice(D,X)}catch(pe){this.logger.error(`failed to choose null ${D} device. ${pe.name}: ${pe.message}`)}}this.handleGetUserMediaError(Y,Date.now()-$)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(D){return D?D.name&&D.message?`${D.name}: ${D.message}`:D.name?D.name:D.message?D.message:"UnknownError":"UnknownError"}handleNewInputDevice(D,M){var R;return c(this,void 0,void 0,function*(){this.logger.info(`got ${D} device for constraints ${JSON.stringify(M.constraints)}`);const F=(R=this.getMediaTrackSettings(M.stream))===null||R===void 0?void 0:R.deviceId;M.groupId=F?this.getGroupIdFromDeviceId(D,F):"",this.activeDevices[D]=M,this.logger.debug(`Set activeDevice to ${JSON.stringify(M)}`),this.watchForDeviceChangesIfNecessary();const V=M.stream.getTracks()[0];if(V&&(M.endedCallback=()=>{this.activeDevices[D]&&this.activeDevices[D].stream===M.stream&&(this.handleDeviceStreamEnded(D,F),delete M.endedCallback)},V.addEventListener("ended",M.endedCallback,{once:!0})),D==="audio"){const $=M.stream.getAudioTracks()[0];if($){const X=$.getSettings().deviceId||M.stream;M.trackMuteCallback=()=>{this.mediaStreamMuteObserver(X,!0)},M.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(X,!1)},$.addEventListener("mute",M.trackMuteCallback,{once:!1}),$.addEventListener("unmute",M.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),$.muted?M.trackMuteCallback():M.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(D,M,R,F){if(F&&this.listCachedDevicesOfKind(`${D}input`).length===1)return!0;const V={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?V.deviceId=M:V.deviceId={exact:M},R&&(V.groupId=R),F?V:D==="video"?(V.width={ideal:this.videoInputQualitySettings.videoWidth},V.height={ideal:this.videoInputQualitySettings.videoHeight},V.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},V):(this.supportSampleRateConstraint()&&(V.sampleRate={ideal:Di.defaultSampleRate}),this.supportSampleSizeConstraint()&&(V.sampleSize={ideal:Di.defaultSampleSize}),this.supportChannelCountConstraint()&&(V.channelCount={ideal:Di.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},V))}getMediaStreamConstraintsFromTrackConstraints(D,M){return D==="audio"?{audio:M}:{video:M}}getMediaStreamConstraints(D,M){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F={};if(!M)return null;const V=this.intrinsicDeviceAsMediaStream(M);if(V)return F.streamId=V.id,this.getMediaStreamConstraintsFromTrackConstraints(D,F);if(typeof M=="string"){let $="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?$=this.getGroupIdFromDeviceId(D,M):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),F=this.calculateMediaStreamConstraints(D,M,$,R),this.getMediaStreamConstraintsFromTrackConstraints(D,F)}return A(M)?(F=this.calculateMediaStreamConstraints(D,M.deviceId,M.groupId,R),this.getMediaStreamConstraintsFromTrackConstraints(D,F)):(F=M,this.getMediaStreamConstraintsFromTrackConstraints(D,F))}deviceInfoFromDeviceId(D,M){if(this.deviceInfoCache===null)return null;for(const R of this.deviceInfoCache)if(R.kind===D&&R.deviceId===M)return R;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(D,M){if(!D||!D.active||!M)return!1;if(M.id)return D.id===M.id;const R=this.getMediaTrackSettings(D);if(!R.deviceId)return!1;const F=Di.getIntrinsicDeviceId(M);return typeof F=="string"?R.deviceId===F:!1}getMediaTrackSettings(D){var M;return(M=D.getTracks()[0])===null||M===void 0?void 0:M.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const D=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(D)}setTransform(D,M){var R,F;(F=(R=this.transform)===null||R===void 0?void 0:R.nodes)===null||F===void 0||F.end.disconnect(),this.transform={nodes:M,device:D};const V=M==null?void 0:M.end,$=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${V} to destination ${$}.`),V==null||V.connect($),this.reconnectAudioInputs()}removeTransform(){var D;const M=this.transform;if(M)return(D=this.transform.nodes)===null||D===void 0||D.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),M}attachAudioInputStreamToAudioContext(D){var M;(M=this.audioInputSourceNode)===null||M===void 0||M.disconnect(),this.audioInputSourceNode=Di.getAudioContext().createMediaStreamSource(D);const R=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(R)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Di.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var D,M;return((M=(D=this.transform)===null||D===void 0?void 0:D.nodes)===null||M===void 0?void 0:M.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(D){Di.defaultLatencyHint=D}static getAudioContext(){if(!Di.audioContext){const D={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(D.sampleRate=Di.defaultSampleRate),new m.default().requiresPlaybackLatencyHintForAudioContext()&&(D.latencyHint="playback"),Di.defaultLatencyHint&&(D.latencyHint=Di.defaultLatencyHint),Di.audioContext=new(window.AudioContext||window.webkitAudioContext)(D)}return Di.audioContext}static suspendAudioContext(){return c(this,void 0,void 0,function*(){return Di.audioContext?Di.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return c(this,void 0,void 0,function*(){return Di.audioContext?Di.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Di.audioContext)try{Di.audioContext.close()}catch{}Di.audioContext=null}addMediaStreamBrokerObserver(D){this.mediaStreamBrokerObservers.add(D)}removeMediaStreamBrokerObserver(D){this.mediaStreamBrokerObservers.delete(D)}publishVideoInputDidChangeEvent(D){this.forEachMediaStreamBrokerObserver(M=>{M.videoInputDidChange&&M.videoInputDidChange(D)}),this.pushVideoMeetingStateForPermissions(D)}publishAudioInputDidChangeEvent(D){this.forEachMediaStreamBrokerObserver(M=>{M.audioInputDidChange&&M.audioInputDidChange(D)}),this.pushAudioMeetingStateForPermissions(D)}publishAudioOutputDidChangeEvent(D){this.forEachMediaStreamBrokerObserver(M=>{M.audioOutputDidChange&&M.audioOutputDidChange(D)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(D,M,R){let F=`API/DefaultDeviceController/${D}`;typeof M<"u"&&(F+=` ${JSON.stringify(M)}`),typeof R<"u"&&(F+=` -> ${JSON.stringify(R)}`),this.logger.info(F)}constructor(D,M,R=new m.default,F){this.logger=D,this.browserBehavior=R,this.eventController=F,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new r.default,this.videoInputTaskQueue=new r.default,this.muted=!1,this.mediaStreamMuteObserver=(Y,ne)=>{for(const ie of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(ie)&&ie.audioInputMuteStateChanged&&ie.audioInputMuteStateChanged(Y,ne)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:V=!1,useMediaConstraintsFallback:$=!0}=M||{};this.useWebAudio=V,this.useMediaConstraintsFallback=$,this.videoInputQualitySettings=new _.default(Di.defaultVideoWidth,Di.defaultVideoHeight,Di.defaultVideoFrameRate);const X=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=X[0],this.videoInputQualitySettings.videoHeight=X[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new p.default().create();const Y=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(Y)}`)}catch(Y){D.error(Y.message)}}},"DefaultDeviceController");l.default=T,T.permissionDeniedOriginDetectionThresholdMs=500,T.defaultVideoWidth=960,T.defaultVideoHeight=540,T.defaultVideoFrameRate=15,T.defaultSampleRate=48e3,T.defaultSampleSize=16,T.defaultChannelCount=1,T.audioContext=null;function A(O){return typeof O=="object"&&"deviceId"in O&&"groupId"in O&&"kind"in O&&"label"in O}s(A,"isMediaDeviceInfo")},4261566413:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{matchesConstraints(h){return JSON.stringify(this.constraints)===JSON.stringify(h)}constructor(){this.groupId=""}},"DeviceSelection");l.default=d},2083236720:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class extends Error{constructor(h,m){super(m||"Error fetching device."),this.cause=h,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=d},9799823045:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const m=h(d(1946951215)),p=h(d(8981226922));let a=s(class extends m.default{destroy(){return c(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return p.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let r=s(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=r},9468773362:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2083236720));let m=s(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=m},6809352498:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2083236720));let m=s(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=m},3288618491:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2083236720));let m=s(class extends h.default{constructor(a,r){super(a),this.constraint=r,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=m},6997557363:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2083236720));let m=s(class extends h.default{constructor(a,r){super(a,r),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=m},3083691903:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{mute(m){return d(this,void 0,void 0,function*(){})}stop(){var m;return d(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var p;return d(this,void 0,void 0,function*(){return(p=this.node)===null||p===void 0||p.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");l.default=c},8219602063:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(2083236720));let m=s(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=m},8981226922:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{equals(h){return this.videoWidth===h.videoWidth&&this.videoHeight===h.videoHeight&&this.videoFrameRate===h.videoFrameRate}constructor(h,m,p){this.videoWidth=h,this.videoHeight=m,this.videoFrameRate=p}},"VideoQualitySettings");l.default=d,d.VideoDisabled=new d(0,0,0),d.VideoResolutionHD=new d(1280,720,30),d.VideoResolutionFHD=new d(1920,1080,30),d.VideoResolutionUHD=new d(3840,2160,30)},272852764:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function d(c){return!!c&&typeof c=="object"&&"transformStream"in c&&"stop"in c&&"intrinsicDevice"in c}s(d,"isVideoTransformDevice"),l.isVideoTransformDevice=d},2343182956:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{destroy(){return d(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,p){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(r=>{r.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):p.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=c},2827699573:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=d},5578123693:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__rest||function(t,i){var o={};for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&i.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,f=Object.getOwnPropertySymbols(t);g<f.length;g++)i.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(t,f[g])&&(o[f[g]]=t[f[g]]);return o},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const p=m(d(5384631890)),a=m(d(9013967876)),r=m(d(3564840480)),n=d(840544383);let e=s(class Hs{addEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.addEventListener||!("document"in d.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.removeEventListener||!("document"in d.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return c(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:f,attributes:g}=i,S=g&&this.filterAttributes(g,this.attributesToFilter),u=Object.assign({name:o,ts:f},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(u)}`);const v=this.getSize(u);if(v>Hs.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${Hs.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(u)}`),this.sendEventImmediately({name:o,ts:f,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(u),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const y=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(y),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const f=new Set(o);return Object.keys(i).filter(S=>f.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Hs.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[f,g]of Object.entries(i))o+=this.getPrimitiveSize(f),o+=this.getSize(g);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return c(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:f,attributes:g}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:f},g)]};let u=!1,v=null;const y=this.makeRequestBody([S]);try{if(v=yield this.send(y),v.ok){try{const _=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${y}, message: ${JSON.stringify(_)}`)}catch(_){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${_} for event ${y}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${y} with response status ${v.status}`),u=!0}catch(_){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${y} to the ingestion endpoint ${_}.`),u=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const C=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${C}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,C)?u=!1:u=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${y}`),u=!0}}u&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${y}`),this.failedIngestionEvents.push(S))})}send(i){return c(this,void 0,void 0,function*(){const o=new p.default(Hs.RETRY_FIXED_BACKOFF_WAIT_MS,Hs.RETRY_SHORT_BACKOFF_MS,Hs.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(g.ok||!Hs.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${g.status}.`),f++,f<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(f){throw f}})}sendBeacon(){return c(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));i.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{i.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return c(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,f,g,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=V=>({type:V.type,v:V.v,payloads:[...V.payloads]}),this.sendEvents=()=>c(this,void 0,void 0,function*(){if(this.lock)return;const V=this.getItems(this.flushSize);if(V.length===0)return;this.lock=!0;const $=this.makeRequestBody(V);let X=!1;const Y=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(Y,V);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${$}`);const ne=yield this.send($);if(this.cancellableEvents.delete(Y),!ne.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${$} with response status ${ne.status}`),X=!0;else try{const ie=yield ne.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${$} message: ${JSON.stringify(ie)}`)}catch(ie){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ie} for events ${$}`)}}catch(ne){X=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${$} to the ingestion endpoint ${ne}`)}finally{this.lock=!1}X&&(this.cancellableEvents.delete(Y),this.failedIngestionEvents.push(...V))});const u=new r.default(S).getParserResult(),{browserMajorVersion:v}=u,y=h(u,["browserMajorVersion"]),_=o.toJSON(),{type:C,v:T}=_,A=h(_,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},y),A),Object.keys(this.metadata).forEach(V=>this.attributesToFilter.push(V)),this.type=C,this.v=T,this.ingestionURL=f,this.logger=S,this.importantEvents=new Set(g);const{maxBufferCapacityKb:O,totalBufferItems:D,flushSize:M,flushIntervalMs:R,retryCountLimit:F}=i;this.maxBufferCapacityBytes=O*1024,this.totalBufferItems=D,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/D),this.flushIntervalMs=R,this.flushSize=M,this.retryCountLimit=F,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=V=>this.beaconEventHandler(V),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},375752845:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h=5e3,m=2,p=64,a=100,r=15){this.flushIntervalMs=h,this.flushSize=m,this.maxBufferCapacityKb=p,this.totalBufferItems=a,this.retryCountLimit=r}},"EventBufferConfiguration");l.default=d},1653454410:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(f,g,S,u){function v(y){return y instanceof S?y:new S(function(_){_(y)})}return s(v,"adopt"),new(S||(S=Promise))(function(y,_){function C(O){try{A(u.next(O))}catch(D){_(D)}}s(C,"fulfilled");function T(O){try{A(u.throw(O))}catch(D){_(D)}}s(T,"rejected");function A(O){O.done?y(O.value):v(O.value).then(C,T)}s(A,"step"),A((u=u.apply(f,g||[])).next())})},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(888724265),p=d(3171772403),a=h(d(6329274303)),r=h(d(3645942785)),n=h(d(380175942)),e=h(d(3741513515)),t=h(d(8066052849)),i=h(d(4622151742));let o=s(class Da{addObserver(g){this.observerSet.add(g)}removeObserver(g){this.observerSet.delete(g)}forEachObserver(g){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&g(S)})}publishEvent(g,S){return c(this,void 0,void 0,function*(){const u=Date.now();this.meetingHistoryStates.push({name:g,timestampMs:u});const v=Object.freeze(Object.assign(this.getAttributes(u),S));this.forEachObserver(y=>{y.eventDidReceive(g,v)}),this.reportEvent(g,u,S)})}reportEvent(g,S,u){var v;return c(this,void 0,void 0,function*(){let y;try{u&&(y=i.default(u)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,g,y)}catch(_){this.logger.error(`Error reporting event ${_}`)}})}setupEventReporter(g,S,u){if(u)this._eventReporter=u;else if(g.urls){const v=g.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:y,credentials:{attendeeId:_,joinToken:C}}=g,T=new n.default(y,_,C),A=new a.default(T,v);this._eventReporter=new r.default(A,S)}}}getAttributes(g){var S,u;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Da.UNAVAILABLE,osVersion:((u=this.parserResult)===null||u===void 0?void 0:u.os.version)||Da.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:g}}get eventReporter(){return this._eventReporter}destroy(){return c(this,void 0,void 0,function*(){p.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(g,S,u){var v,y,_,C,T,A,O;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=g,this.setupEventReporter(g,S,u);try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null}catch(D){this.logger.error(D.message)}this.browserMajorVersion=((_=(y=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||y===void 0?void 0:y.version)===null||_===void 0?void 0:_.split(".")[0])||Da.UNAVAILABLE,this.browserName=((C=this.parserResult)===null||C===void 0?void 0:C.browser.name)||Da.UNAVAILABLE,this.browserVersion=((T=this.parserResult)===null||T===void 0?void 0:T.browser.version)||Da.UNAVAILABLE,this.deviceName=[((A=this.parserResult)===null||A===void 0?void 0:A.device.vendor)||"",((O=this.parserResult)===null||O===void 0?void 0:O.device.model)||""].join(" ").trim()||Da.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},4622151742:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=s(c=>{const h={};for(const[m,p]of Object.entries(c))if(!(p==null||p===""))if(typeof p=="number"||typeof p=="string")h[m]=p;else throw new TypeError("Unhandled type received while flattening attributes.");return h},"flattenEventAttributes");l.default=d},6329274303:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(375752845));let m=s(class{constructor(a,r,n=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=r,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");l.default=m},3645942785:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(3171772403),p=h(d(5578123693));let a=s(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return c(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return c(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),m.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:f}=t;this.eventBuffer=new p.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=f,this.start()}},"DefaultMeetingEventReporter");l.default=a},4400960579:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{reportEvent(h,m,p){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=d},380175942:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const h={};return h.type=this.type,h.v=this.v,h.meetingId=this.meetingId,h.attendeeId=this.attendeeId,h}constructor(h,m,p,a=[]){this.type="Meet",this.v=1,this.meetingId=h,this.attendeeId=m,this.eventsToIgnore=a,this.authenticationToken=p}},"MeetingEventsClientConfiguration");l.default=d},7164668892:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(ur){return ur&&ur.__esModule?ur:{default:ur}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoderWorkerCode=l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoEncodingCpuConnectionHealthPolicy=l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=void 0;const h=c(d(7744958188));l.AllHighestVideoBandwidthPolicy=h.default;const m=c(d(9821410283));l.ApplicationMetadata=m.default;const p=c(d(3741513515));l.AsyncScheduler=p.default;const a=c(d(7063021350));l.AttachMediaInputTask=a.default;const r=c(d(4846700713));l.Attendee=r.default;const n=c(d(6392364773));l.AudioLogEvent=n.default;const e=c(d(4999349075));l.AudioProfile=e.default;const t=c(d(8430013536));l.AudioVideoControllerState=t.default;const i=c(d(9721779232));l.BackgroundBlurStrength=i.default;const o=c(d(7840699215));l.BackgroundBlurVideoFrameProcessor=o.default;const f=c(d(6292069043));l.BackgroundFilterVideoFrameProcessor=f.default;const g=c(d(45891509));l.BackgroundReplacementVideoFrameProcessor=g.default;const S=c(d(6963727640));l.BaseConnectionHealthPolicy=S.default;const u=c(d(516529594));l.BaseTask=u.default;const v=c(d(7699083583));l.BitrateParameters=v.default;const y=c(d(1252089397));l.CSPMonitor=y.default;const _=c(d(6672418579));l.CanvasVideoFrameBuffer=_.default;const C=c(d(7337337789));l.CheckAudioConnectivityFeedback=C.default;const T=c(d(9946611704));l.CheckAudioInputFeedback=T.default;const A=c(d(2655850275));l.CheckAudioOutputFeedback=A.default;const O=c(d(9670709847));l.CheckCameraResolutionFeedback=O.default;const D=c(d(1236878429));l.CheckContentShareConnectivityFeedback=D.default;const M=c(d(9380119960));l.CheckNetworkTCPConnectivityFeedback=M.default;const R=c(d(7487205960));l.CheckNetworkUDPConnectivityFeedback=R.default;const F=c(d(2886652712));l.CheckVideoConnectivityFeedback=F.default;const V=c(d(4725233475));l.CheckVideoInputFeedback=V.default;const $=c(d(4019918320));l.CleanRestartedSessionTask=$.default;const X=c(d(7819987893));l.CleanStoppedSessionTask=X.default;const Y=c(d(7059763395));l.ClientMetricReport=Y.default;const ne=c(d(5147189764));l.ClientMetricReportDirection=ne.default;const ie=c(d(1847926377));l.ClientMetricReportMediaType=ie.default;const pe=c(d(9895069884));l.ClientVideoStreamReceivingReport=pe.default;const Ee=c(d(3544934903));l.ConnectionHealthData=Ee.default;const Be=c(d(1091173065));l.ConnectionHealthPolicyConfiguration=Be.default;const it=c(d(5956893594));l.ConsoleLogger=it.default;const Ce=c(d(3560634922));l.ContentShareConstants=Ce.default;const Me=c(d(8271576690));l.ContentShareMediaStreamBroker=Me.default;const je=c(d(2918138407));l.CreatePeerConnectionTask=je.default;const We=c(d(7869625838));l.CreateSDPTask=We.default;const Ze=c(d(1766966835));l.DataMessage=Ze.default;const ft=c(d(3323583056));l.DefaultActiveSpeakerDetector=ft.default;const vt=c(d(1644292716));l.DefaultActiveSpeakerPolicy=vt.default;const De=c(d(3227886346));l.DefaultAudioMixController=De.default;const Pe=c(d(616382858));l.DefaultAudioVideoController=Pe.default;const Ke=c(d(314828250));l.DefaultAudioVideoFacade=Ke.default;const Ye=c(d(8351168186));l.DefaultBrowserBehavior=Ye.default;const xe=c(d(4707988254));l.DefaultContentShareController=xe.default;const Ct=c(d(8152963890));l.DefaultDeviceController=Ct.default;const At=c(d(2343182956));l.DefaultDevicePixelRatioMonitor=At.default;const Lt=c(d(1653454410));l.DefaultEventController=Lt.default;const Ft=c(d(113406342));l.DefaultMediaDeviceFactory=Ft.default;const Jt=c(d(3645942785));l.DefaultMeetingEventReporter=Jt.default;const It=c(d(2741503378));l.DefaultMeetingReadinessChecker=It.default;const ln=c(d(542823578));l.DefaultMeetingSession=ln.default;const $n=c(d(9249618790));l.DefaultMessagingSession=$n.default;const yn=c(d(4599834734));l.DefaultModality=yn.default;const zt=c(d(2311029370));l.DefaultPingPong=zt.default;const Yt=c(d(5403024322));l.DefaultRealtimeController=Yt.default;const Mt=c(d(8855787924));l.DefaultReconnectController=Mt.default;const Vt=c(d(4641929542));l.DefaultSessionStateController=Vt.default;const $t=c(d(7822521824));l.DefaultSigV4=$t.default;const xt=c(d(7258714924));l.DefaultSignalingClient=xt.default;const jt=c(d(3361826027));l.DefaultSimulcastUplinkPolicy=jt.default;const J=c(d(4134174226));l.DefaultSimulcastUplinkPolicyForContentShare=J.default;const Fe=c(d(6769427378));l.DefaultTransceiverController=Fe.default;const ke=c(d(246495600));l.DefaultTranscriptionController=ke.default;const Ge=c(d(3564840480));l.DefaultUserAgentParser=Ge.default;const gt=c(d(8261422434));l.DefaultVideoCaptureAndEncodeParameter=gt.default;const at=c(d(7145536260));l.DefaultVideoFrameProcessorPipeline=at.default;const ae=c(d(1902736443));l.DefaultVideoFrameProcessorTimer=ae.default;const Le=c(d(5134603106));l.DefaultVideoStreamIdSet=Le.default;const G=c(d(5216544790));l.DefaultVideoStreamIndex=G.default;const Z=c(d(1140481832));l.DefaultVideoTile=Z.default;const me=c(d(9251190564));l.DefaultVideoTileController=me.default;const ge=c(d(1695899970));l.DefaultVideoTileFactory=ge.default;const rt=c(d(5709738441));l.DefaultVideoTransformDevice=rt.default;const Ue=c(d(338869682));l.DefaultVolumeIndicatorAdapter=Ue.default;const Xe=c(d(8796204466));l.DefaultWebSocketAdapter=Xe.default;const fe=c(d(2827699573));l.DevicePixelRatioWindowSource=fe.default;const Te=c(d(4261566413));l.DeviceSelection=Te.default;const k=c(d(375752845));l.EventBufferConfiguration=k.default;const he=c(d(6329274303));l.EventIngestionConfiguration=he.default;const Se=c(d(9613312866));l.FinishGatheringICECandidatesTask=Se.default;const be=c(d(5384631890));l.FullJitterBackoff=be.default;const te=c(d(1363278032));l.FullJitterBackoffFactory=te.default;const Nt=c(d(8220481840));l.FullJitterLimitedBackoff=Nt.default;const nt=c(d(2083236720));l.GetUserMediaError=nt.default;const mt=c(d(3572556907));l.GlobalMetricReport=mt.default;const pn=c(d(5578123693));l.InMemoryJSONEventBuffer=pn.default;const Pt=c(d(9013967876));l.IntervalScheduler=Pt.default;const Mi=c(d(1495317641));l.JoinAndReceiveIndexTask=Mi.default;const ai=c(d(5110013894));l.LeaveAndReceiveLeaveAckTask=ai.default;const un=c(d(3708122413));l.ListenForVolumeIndicatorsTask=un.default;const Hn=c(d(3382381733));l.Log=Hn.default;const mn=c(d(3756404293));l.LogLevel=mn.default;const li=c(d(3072764689));l.MediaDeviceProxyHandler=li.default;const Kn=c(d(380175942));l.MeetingEventsClientConfiguration=Kn.default;const lr=c(d(7584876358));l.MeetingFeatures=lr.default;const kt=c(d(7683606499));l.MeetingReadinessCheckerConfiguration=kt.default;const Et=c(d(7136804647));l.MeetingSessionConfiguration=Et.default;const Tn=c(d(7147499759));l.MeetingSessionCredentials=Tn.default;const gn=c(d(5446246651));l.MeetingSessionLifecycleEvent=gn.default;const In=c(d(7192341248));l.MeetingSessionLifecycleEventCondition=In.default;const Qn=c(d(3777990285));l.MeetingSessionStatus=Qn.default;const qn=c(d(4882394368));l.MeetingSessionStatusCode=qn.default;const Vn=c(d(7999114886));l.MeetingSessionTURNCredentials=Vn.default;const Xn=c(d(2653083101));l.MeetingSessionURLs=Xn.default;const yi=c(d(1880578541));l.MeetingSessionVideoAvailability=yi.default;const Si=c(d(1721682483));l.Message=Si.default;const Fn=c(d(9309957401));l.MessagingSessionConfiguration=Fn.default;const xi=c(d(7472936477));l.ModelSpecBuilder=xi.default;const hi=c(d(1504187181));l.MonitorTask=hi.default;const Yi=c(d(950290054));l.MultiLogger=Yi.default;const L=c(d(3423911843));l.NScaleVideoUplinkBandwidthPolicy=L.default;const re=c(d(1292880771));l.NoOpAudioVideoController=re.default;const we=c(d(9416545472));l.NoOpDebugLogger=we.default;const $e=c(d(9799823045));l.NoOpDeviceController=$e.default;const yt=c(d(4400960579));l.NoOpEventReporter=yt.default;const Xt=c(d(7338764361));l.NoOpLogger=Xt.default;const dn=c(d(1946951215));l.NoOpMediaStreamBroker=dn.default;const Zt=c(d(1992142375));l.NoOpTask=Zt.default;const qt=c(d(8481249111));l.NoOpVideoElementFactory=qt.default;const on=c(d(7000795223));l.NoOpVideoFrameProcessor=on.default;const wn=c(d(9248911078));l.NoVideoDownlinkBandwidthPolicy=wn.default;const Zn=c(d(9128807920));l.NoVideoUplinkBandwidthPolicy=Zn.default;const Jn=c(d(9468773362));l.NotFoundError=Jn.default;const Ei=c(d(6809352498));l.NotReadableError=Ei.default;const $i=c(d(2913368614));l.OnceTask=$i.default;const Qi=c(d(6907504899));l.OpenSignalingConnectionTask=Qi.default;const Sr=c(d(3288618491));l.OverconstrainedError=Sr.default;const On=c(d(1141297335));l.POSTLogger=On.default;const Ri=c(d(6015743885));l.ParallelGroupTask=Ri.default;const ci=c(d(6997557363));l.PermissionDeniedError=ci.default;const ki=c(d(6747155167));l.PrefetchOn=ki.default;const rn=c(d(9468168383));l.PrefetchSortBy=rn.default;const cr=c(d(2997222898));l.PromiseQueue=cr.default;const Sn=c(d(3627106901));l.PromoteToPrimaryMeetingTask=Sn.default;const Zi=c(d(4412582314));l.RealtimeAttendeePositionInFrame=Zi.default;const vr=c(d(6045987188));l.RealtimeState=vr.default;const Rr=c(d(2450851234));l.RealtimeVolumeIndicator=Rr.default;const le=c(d(3151098372));l.ReceiveAudioInputTask=le.default;const ve=c(d(9363406688));l.ReceiveRemoteVideoPauseResumeTask=ve.default;const Oe=c(d(6069988831));l.ReceiveVideoInputTask=Oe.default;const qe=c(d(2452872079));l.ReceiveVideoStreamIndexTask=qe.default;const dt=c(d(8929805428));l.ReconnectionHealthPolicy=dt.default;const ct=c(d(1510239283));l.RedundantAudioEncoder=ct.default;const Bt=c(d(3440292739));l.RedundantAudioEncoderWorkerCode=Bt.default;const en=c(d(7894724558));l.RedundantAudioRecoveryMetricReport=en.default;const nn=c(d(6771673942));l.RunnableTask=nn.default;const Ut=c(d(3430379175));l.SDP=Ut.default;const Nn=c(d(9615283928));l.SDPCandidateType=Nn.default;const bt=c(d(3364495052));l.SDPMediaSection=bt.default;const Wn=c(d(2471283351));l.SendAndReceiveDataMessagesTask=Wn.default;const fn=c(d(2115341037));l.SendingAudioFailureConnectionHealthPolicy=fn.default;const ii=c(d(3894566132));l.SerialGroupTask=ii.default;const Ui=c(d(1448262436));l.ServerSideNetworkAdaption=Ui.default;const pi=c(d(3097552577));l.SessionStateControllerAction=pi.default;const cn=c(d(3049140029));l.SessionStateControllerDeferPriority=cn.default;const En=c(d(953236500));l.SessionStateControllerState=En.default;const Un=c(d(7338273141));l.SessionStateControllerTransitionResult=Un.default;const Yn=c(d(6412210284));l.SetLocalDescriptionTask=Yn.default;const Vi=c(d(839180639));l.SetRemoteDescriptionTask=Vi.default;const qi=c(d(1523356655));l.SignalingAndMetricsConnectionMonitor=qi.default;const Bn=c(d(893025464));l.SignalingClientConnectionRequest=Bn.default;const gr=c(d(8152250765));l.SignalingClientEvent=gr.default;const mi=c(d(426218501));l.SignalingClientEventType=mi.default;const Ki=c(d(9315300759));l.SignalingClientJoin=Ki.default;const Ur=c(d(1026405281));l.SignalingClientSubscribe=Ur.default;const Yr=c(d(4983545831));l.SignalingClientVideoSubscriptionConfiguration=Yr.default;const oo=c(d(1438956810));l.SimulcastContentShareTransceiverController=oo.default;const so=c(d(8438160003));l.SimulcastLayers=so.default;const Pr=c(d(2962876954));l.SimulcastTransceiverController=Pr.default;const Vr=c(d(7562203998));l.SimulcastVideoStreamIndex=Vr.default;const er=c(d(3083691903));l.SingleNodeAudioTransformDevice=er.default;const Or=c(d(7825873064));l.StreamMetricReport=Or.default;const Hr=c(d(2641934340));l.SubscribeAndReceiveSubscribeAckTask=Hr.default;const Hi=c(d(6110401981));l.TargetDisplaySize=Hi.default;const yr=c(d(9293073193));l.TaskStatus=yr.default;const Xr=c(d(6393942734));l.TimeoutScheduler=Xr.default;const Ai=c(d(3450261616));l.TimeoutTask=Ai.default;const Eo=c(d(9138893973));l.Transcript=Eo.default;const Go=c(d(866659076));l.TranscriptAlternative=Go.default;const jo=c(d(7538060970));l.TranscriptEntity=jo.default;const bo=c(d(3531434754));l.TranscriptItem=bo.default;const Ci=c(d(2024984314));l.TranscriptItemType=Ci.default;const Ji=c(d(9584814027));l.TranscriptLanguageWithScore=Ji.default;const Xi=c(d(3443368328));l.TranscriptResult=Xi.default;const dr=c(d(2461374283));l.TranscriptionStatus=dr.default;const tr=c(d(3798201443));l.TranscriptionStatusType=tr.default;const ao=c(d(8219602063));l.TypeError=ao.default;const Wr=c(d(5928001672));l.UnusableAudioWarningConnectionHealthPolicy=Wr.default;const Ar=c(d(8066052849));l.Versioning=Ar.default;const _o=c(d(1437705752));l.VideoAdaptiveProbePolicy=_o.default;const os=c(d(4883941895));l.VideoCodecCapability=os.default;const Gs=c(d(6005421222));l.VideoEncodingConnectionHealthPolicyName=Gs.default;const vs=c(d(8438187697));l.VideoEncodingCpuConnectionHealthPolicy=vs.default;const ss=c(d(1615281264));l.VideoEncodingFramerateConnectionHealthPolicy=ss.default;const ys=c(d(2403769553));l.VideoFxProcessor=ys.default;const js=c(d(4715258780));l.VideoLogEvent=js.default;const Es=c(d(3052177122));l.VideoOnlyTransceiverController=Es.default;const bs=c(d(7981698535));l.VideoPreference=bs.default;const zs=c(d(6700033168));l.VideoPreferences=zs.default;const Qr=c(d(6313276823));l.VideoPriorityBasedPolicy=Qr.default;const Br=c(d(9837586225));l.VideoPriorityBasedPolicyConfig=Br.default;const Ro=c(d(5116495551));l.VideoQualityAdaptationPreference=Ro.default;const as=c(d(8981226922));l.VideoQualitySettings=as.default;const Zr=c(d(2551170247));l.VideoSource=Zr.default;const zo=c(d(4202624657));l.VideoStreamDescription=zo.default;const Gr=c(d(5449946032));l.VideoTileState=Gr.default;const lo=c(d(8525594090));l.VoiceFocusDeviceTransformer=lo.default;const co=c(d(282836061));l.VoiceFocusTransformDevice=co.default;const Co=c(d(7500181884));l.WaitForAttendeePresenceTask=Co.default;const wi=c(d(2686893898));l.WebSocketReadyState=wi.default;const $o=c(d(9675039205));l.ZLIBTextCompressor=$o.default;const uo=d(6700033168);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return uo.MutableVideoPreferences}});const Wi=d(903520651);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Wi.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Wi.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Wi.Maybe}});const qr=d(3961458747);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return qr.isAudioTransformDevice}});const ls=d(3171772403);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return ls.isDestroyable}});const Po=d(272852764);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return Po.isVideoTransformDevice}})},5956893594:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3756404293));let m=s(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,r){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${r}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,r=h.default.WARN){this.name=a,this.level=r}},"ConsoleLogger");l.default=m},3382381733:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h,m,p,a){this.sequenceNumber=h,this.message=m,this.timestampMs=p,this.logLevel=a}},"Log");l.default=d},3756404293:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var d;(function(c){c[c.DEBUG=0]="DEBUG",c[c.INFO=1]="INFO",c[c.WARN=2]="WARN",c[c.ERROR=3]="ERROR",c[c.OFF=4]="OFF"})(d=l.LogLevel||(l.LogLevel={})),l.default=d},950290054:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3756404293));let m=s(class{info(a){for(const r of this._loggers)r.info(a)}warn(a){for(const r of this._loggers)r.warn(a)}error(a){for(const r of this._loggers)r.error(a)}debug(a){let r,n;typeof a=="string"?n=a:a?n=s(()=>(r||(r=a()),r),"memoized"):n=""+a;for(const e of this._loggers)e.debug(n)}setLogLevel(a){for(const r of this._loggers)r.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=m},9416545472:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3756404293)),m=c(d(7338764361));let p=s(class extends m.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=p},7338764361:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3756404293));let m=s(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=m},1141297335:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(9013967876)),p=h(d(3382381733)),a=h(d(3756404293));let r=s(class jh{addEventListener(){!this.eventListener||!("window"in d.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in d.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>c(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return c(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new p.default(this.sequenceNumber,t,i,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=jh.BATCH_SIZE,intervalMs:o=jh.INTERVAL_MS,logLevel:f=a.default.WARN,metadata:g,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=f,this.metadata=g,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=r,r.BATCH_SIZE=85,r.INTERVAL_MS=2e3},113406342:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3072764689));let m=s(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=m},3072764689:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(3741513515)),p=h(d(9013967876));let a=s(class TS{sortedDeviceList(){return c(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)m.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.add(f),this.scheduler||(this.scheduler=new p.default(TS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,f,g])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,f,g)=>{if(o==="devicechange")this.deviceChangeListeners.delete(f),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,f,g])}},this.pollDeviceLists=()=>c(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},1946951215:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(h){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(h){}removeMediaStreamBrokerObserver(h){}},"NoOpMediaStreamBroker");l.default=d},7337337789:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.AudioInputRequestFailed=1]="AudioInputRequestFailed",c[c.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",c[c.ConnectionFailed=3]="ConnectionFailed",c[c.AudioNotReceived=4]="AudioNotReceived"})(d=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=d},9946611704:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.PermissionDenied=2]="PermissionDenied"})(d=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=d},2655850275:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed"})(d=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=d},9670709847:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.ResolutionNotSupported=2]="ResolutionNotSupported",c[c.PermissionDenied=3]="PermissionDenied"})(d=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=d},1236878429:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.PermissionDenied=2]="PermissionDenied",c[c.TimedOut=3]="TimedOut",c[c.ConnectionFailed=4]="ConnectionFailed"})(d=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=d},9380119960:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",c[c.ConnectionFailed=2]="ConnectionFailed",c[c.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=d},7487205960:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",c[c.ConnectionFailed=2]="ConnectionFailed",c[c.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=d},2886652712:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.VideoInputRequestFailed=1]="VideoInputRequestFailed",c[c.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",c[c.ConnectionFailed=3]="ConnectionFailed",c[c.VideoNotSent=4]="VideoNotSent"})(d=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=d},4725233475:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var d;(function(c){c[c.Succeeded=0]="Succeeded",c[c.Failed=1]="Failed",c[c.PermissionDenied=2]="PermissionDenied"})(d=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=d},2741503378:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(T,A,O,D){function M(R){return R instanceof O?R:new O(function(F){F(R)})}return s(M,"adopt"),new(O||(O=Promise))(function(R,F){function V(Y){try{X(D.next(Y))}catch(ne){F(ne)}}s(V,"fulfilled");function $(Y){try{X(D.throw(Y))}catch(ne){F(ne)}}s($,"rejected");function X(Y){Y.done?R(Y.value):M(Y.value).then(V,$)}s(X,"step"),X((D=D.apply(T,A||[])).next())})},h=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(3227886346)),p=h(d(8351168186)),a=h(d(8152963890)),r=h(d(6997557363)),n=h(d(516529594)),e=h(d(3450261616)),t=h(d(7337337789)),i=h(d(9946611704)),o=h(d(2655850275)),f=h(d(9670709847)),g=h(d(1236878429)),S=h(d(9380119960)),u=h(d(7487205960)),v=h(d(2886652712)),y=h(d(4725233475)),_=h(d(7683606499));let C=s(class IS{static delay(A){return c(this,void 0,void 0,function*(){return new Promise(O=>setTimeout(O,A))})}checkAudioInput(A){return c(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(A),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${O}`),O instanceof r.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(A,O){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return c(this,void 0,void 0,function*(){try{const M=A?a.default.getIntrinsicDeviceId(A):"";return yield this.playTone(M,this.configuration.audioOutputFrequency,D),(yield O())?o.default.Succeeded:o.default.Failed}catch(M){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${M}`),o.default.Failed}finally{this.stopTone()}})}playTone(A,O,D){return c(this,void 0,void 0,function*(){const R=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=O,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const V=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,V),this.gainNode.gain.linearRampToValueAtTime(R,V+.1),this.oscillatorNode.start();const $=new m.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield $.bindAudioDevice({deviceId:A}))}catch(X){this.logger.error(`Failed to bind audio device: ${X}`)}try{yield $.bindAudioElement(D||new Audio)}catch(X){this.logger.error(`Failed to bind audio element: ${X}`)}yield $.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const A=1,O=.1,D=this.configuration.audioOutputGain,M=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(D,M+O+A),this.gainNode.gain.linearRampToValueAtTime(0,M+O*2+A),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(A){return c(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(A),yield this.meetingSession.audioVideo.stopVideoInput(),y.default.Succeeded}catch(O){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${O}`),O instanceof r.default?y.default.PermissionDenied:y.default.Failed}})}checkCameraResolution(A,O,D){return c(this,void 0,void 0,function*(){let M;try{const R=a.default.getIntrinsicDeviceId(A),F={video:this.calculateVideoConstraint(R,O,D)};M=yield navigator.mediaDevices.getUserMedia(F)}catch(R){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${O} height ${D} failed with error ${R}`),R&&R.name==="OverconstrainedError"?f.default.ResolutionNotSupported:R&&R.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{M&&M.getTracks().forEach(function(R){R.stop()})}return f.default.Succeeded})}calculateVideoConstraint(A,O,D){const M=this.browserBehavior.requiresResolutionAlignment(O,D),R={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(R.deviceId=A,R.width=O,R.height=D):(R.deviceId={exact:A},R.width={exact:M[0]},R.height={exact:M[1]}),R}checkContentShareConnectivity(A){return c(this,void 0,void 0,function*(){let O=!1,D=!1;const M={contentShareDidStart:()=>{O=!0}},R={audioVideoDidStart:()=>{D=!0}};try{return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(M),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(A),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return D&&O})),D?(yield this.stopMeeting(),O?g.default.Succeeded:g.default.TimedOut):g.default.ConnectionFailed}catch(F){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${F}`),F.name==="NotAllowedError"?g.default.PermissionDenied:g.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(R),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(M)}})}checkAudioConnectivity(A){return c(this,void 0,void 0,function*(){let O=!1;const D={packetsReceived:0},M=this.meetingSession.audioVideo,R={metricsDidReceive(V){V.getRTCStatsReport().forEach($=>{$.type==="inbound-rtp"&&($.mediaType==="audio"||$.kind==="audio")&&(D.packetsReceived=$.packetsReceived)})}},F=s((V,$,X,Y)=>{V===this.meetingSession.configuration.credentials.attendeeId&&$&&(O=!0)},"attendeePresenceHandler");try{yield M.startAudioInput(A)}catch(V){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${V}`),V instanceof r.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return M.realtimeSubscribeToAttendeeIdPresence(F),M.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(O,D)})),M.removeObserver(R),M.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(O,D)?t.default.Succeeded:t.default.AudioNotReceived):(M.removeObserver(R),M.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(A){return c(this,void 0,void 0,function*(){const O=this.meetingSession.audioVideo;let D=0;const M={metricsDidReceive(R){R.getRTCStatsReport().forEach(V=>{V.type==="outbound-rtp"&&(V.mediaType==="video"||V.kind==="video")&&(D=V.packetsSent)})}};try{yield O.startVideoInput(A)}catch(R){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${R}`),R instanceof r.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return O.addObserver(M),(yield this.startMeeting())?(O.startLocalVideoTile(),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return D>0})),yield O.stopVideoInput(),yield this.stopMeeting(),O.removeObserver(M),D<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return c(this,void 0,void 0,function*(){let A=!1;const O={metricsDidReceive(M){M.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(A=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(M){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${M}`),u.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=M=>{const R=this.originalURLRewriter(M);return R.includes("transport=tcp")?"":R};const D=this.meetingSession.audioVideo;return D.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),D.removeObserver(O),A?u.default.Succeeded:u.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,u.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return c(this,void 0,void 0,function*(){let A=!1;const O={metricsDidReceive(M){M.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(A=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(M){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${M}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=M=>{const R=this.originalURLRewriter(M);return R.includes("transport=udp")?"":R};const D=this.meetingSession.audioVideo;return D.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),D.removeObserver(O),A?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return c(this,void 0,void 0,function*(){let A=!1;const O={audioVideoDidStart:()=>{A=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.audioVideo.removeObserver(O),A})}stopMeeting(){return c(this,void 0,void 0,function*(){let A=!1;const O={audioVideoDidStop:D=>{A=!0}};return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>c(this,void 0,void 0,function*(){return A})),this.meetingSession.audioVideo.removeObserver(O),A})}executeTimeoutTask(A){return c(this,void 0,void 0,function*(){let O=!1,D=s(class extends n.default{cancel(){this.isCancelled=!0}run(){return c(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield A()){O=!0;break}yield IS.delay(this.waitDurationMs)}})}constructor(F,V){super(F),this.waitDurationMs=V,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new D(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),O})}isAudioConnectionSuccessful(A,O){return A&&O.packetsReceived>0}constructor(A,O,D=new _.default){this.logger=A,this.meetingSession=O,this.configuration=D,this.browserBehavior=new p.default}},"DefaultMeetingReadinessChecker");l.default=C},7683606499:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=d},542823578:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(u,v,y,_){function C(T){return T instanceof y?T:new y(function(A){A(T)})}return s(C,"adopt"),new(y||(y=Promise))(function(T,A){function O(R){try{M(_.next(R))}catch(F){A(F)}}s(O,"fulfilled");function D(R){try{M(_.throw(R))}catch(F){A(F)}}s(D,"rejected");function M(R){R.done?T(R.value):C(R.value).then(O,D)}s(M,"step"),M((_=_.apply(u,v||[])).next())})},h=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(616382858)),p=h(d(314828250)),a=h(d(5384631890)),r=h(d(8351168186)),n=h(d(8271576690)),e=h(d(4707988254)),t=h(d(1252089397)),i=d(3171772403),o=h(d(1653454410)),f=h(d(8855787924)),g=h(d(8796204466));let S=s(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return c(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new r.default,y=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${y}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,y,_,C){this._eventController=C,this._configuration=v,this._logger=y,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,y)),_.eventController||(_.eventController=this.eventController),this.audioVideoController=new m.default(this._configuration,this._logger,new g.default(this._logger),_,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=_,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const T=new n.default(this._logger);this.contentShareController=new e.default(T,new m.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new g.default(this._logger),T,new f.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new p.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},7584876358:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8981226922));let m=s(class DS{clone(){return new DS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,r=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=r}},"MeetingFeatures");l.default=m},7136804647:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1091173065)),m=c(d(8981226922)),p=d(840544383),a=c(d(7584876358)),r=c(d(7147499759)),n=c(d(2653083101));let e=s(class{constructor(i,o){var f,g;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,i){i=p.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=s((u,v)=>{switch(u){case"None":return m.default.VideoDisabled;case"HD":return m.default.VideoResolutionHD;case"FHD":return m.default.VideoResolutionFHD;case"UHD":return m.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((f=i.meetingfeatures)===null||f===void 0?void 0:f.video)!==void 0||((g=i.meetingfeatures)===null||g===void 0?void 0:g.content)!==void 0){const u=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,v=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(u,m.default.VideoResolutionHD),S(v,m.default.VideoResolutionFHD))}}o&&(o=p.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new r.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},7147499759:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=d},5446246651:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var d;(function(c){c[c.Connecting=0]="Connecting",c[c.Started=1]="Started",c[c.Stopped=2]="Stopped"})(d=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=d},7192341248:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var d;(function(c){c[c.ConnectingNew=0]="ConnectingNew",c[c.ReconnectingExisting=1]="ReconnectingExisting",c[c.StartedNew=2]="StartedNew",c[c.StartedExisting=3]="StartedExisting",c[c.StartedAfterReconnect=4]="StartedAfterReconnect",c[c.StoppedCleanly=5]="StoppedCleanly",c[c.StoppedWithFailure=6]="StoppedWithFailure"})(d=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=d},3777990285:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),m=c(d(4882394368));let p=s(class mr{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:case m.default.VideoCallAtSourceCapacity:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.ICEGatheringTimeoutWorkaround:case m.default.ConnectionHealthReconnect:case m.default.RealtimeApiFailed:case m.default.TaskFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case m.default.Left:case m.default.AudioJoinedFromAnotherDevice:case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.MeetingEnded:case m.default.AudioDisconnected:case m.default.TURNCredentialsForbidden:case m.default.SignalingBadRequest:case m.default.SignalingRequestFailed:case m.default.VideoCallAtSourceCapacity:case m.default.RealtimeApiFailed:case m.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.ICEGatheringTimeoutWorkaround:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.RealtimeApiFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case m.default.OK:return"Everything is OK so far.";case m.default.Left:return"The attendee left the meeting.";case m.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case m.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case m.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case m.default.MeetingEnded:return"The meeting ended.";case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:return"The audio connection failed.";case m.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case m.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:return"The signaling connection failed.";case m.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case m.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case m.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case m.default.TaskFailed:return"The connection failed. See the error message for more details.";case m.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case m.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case m.default.NoAttendeePresent:return"The attendee was not present.";case m.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case m.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case m.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case m.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const r=this._statusCode;throw new Error(`Unhandled case: ${r}`)}}}static fromSignalFrame(r){return r.error&&r.error.status?this.fromSignalingStatus(r.error.status):r.type===h.SdkSignalFrame.Type.AUDIO_STATUS?r.audioStatus?this.fromAudioStatus(r.audioStatus.audioStatus):new mr(m.default.SignalingRequestFailed):r.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new mr(m.default.AudioVideoWasRemovedFromPrimaryMeeting):new mr(m.default.OK)}static fromAudioStatus(r){switch(r){case 200:return new mr(m.default.OK);case 301:return new mr(m.default.AudioJoinedFromAnotherDevice);case 302:return new mr(m.default.AudioDisconnectAudio);case 403:return new mr(m.default.AudioAuthenticationRejected);case 409:return new mr(m.default.AudioCallAtCapacity);case 410:return new mr(m.default.MeetingEnded);case 411:return new mr(m.default.AudioAttendeeRemoved);case 500:return new mr(m.default.AudioInternalServerError);case 503:return new mr(m.default.AudioServiceUnavailable);default:switch(Math.floor(r/100)){case 2:return new mr(m.default.OK);default:return new mr(m.default.AudioDisconnected)}}}static fromSignalingStatus(r){switch(r){case 206:return new mr(m.default.VideoCallSwitchToViewOnly);case 509:return new mr(m.default.VideoCallAtSourceCapacity);case 403:return new mr(m.default.AudioAuthenticationRejected);case 409:return new mr(m.default.AudioCallAtCapacity);default:switch(Math.floor(r/100)){case 2:return new mr(m.default.OK);case 4:return new mr(m.default.SignalingBadRequest);case 5:return new mr(m.default.SignalingInternalServerError);default:return new mr(m.default.SignalingRequestFailed)}}}constructor(r){this._statusCode=r}},"MeetingSessionStatus");l.default=p},4882394368:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var d;(function(c){c[c.OK=0]="OK",c[c.Left=1]="Left",c[c.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",c[c.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",c[c.AudioCallAtCapacity=4]="AudioCallAtCapacity",c[c.MeetingEnded=5]="MeetingEnded",c[c.AudioInternalServerError=6]="AudioInternalServerError",c[c.AudioServiceUnavailable=7]="AudioServiceUnavailable",c[c.AudioDisconnected=8]="AudioDisconnected",c[c.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",c[c.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",c[c.SignalingBadRequest=11]="SignalingBadRequest",c[c.SignalingInternalServerError=12]="SignalingInternalServerError",c[c.SignalingRequestFailed=13]="SignalingRequestFailed",c[c.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",c[c.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",c[c.RealtimeApiFailed=16]="RealtimeApiFailed",c[c.TaskFailed=17]="TaskFailed",c[c.IncompatibleSDP=18]="IncompatibleSDP",c[c.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",c[c.NoAttendeePresent=20]="NoAttendeePresent",c[c.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",c[c.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",c[c.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",c[c.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(d=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=d},7999114886:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=d},2653083101:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(h){this._audioHostURL=h}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(h){this._signalingURL=h}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(h){this._turnControlURL=h}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(h){this._eventIngestionURL=h}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=h=>h}},"MeetingSessionURLs");l.default=d},1880578541:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class AS{equal(h){return this.remoteVideoAvailable===h.remoteVideoAvailable&&this.canStartLocalVideo===h.canStartLocalVideo}clone(){const h=new AS;return h.remoteVideoAvailable=this.remoteVideoAvailable,h.canStartLocalVideo=this.canStartLocalVideo,h}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=d},1721682483:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h,m,p){this.type=h,this.headers=m,this.payload=p}},"Message");l.default=d},9249618790:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(S,u,v,y){function _(C){return C instanceof v?C:new v(function(T){T(C)})}return s(_,"adopt"),new(v||(v=Promise))(function(C,T){function A(M){try{D(y.next(M))}catch(R){T(R)}}s(A,"fulfilled");function O(M){try{D(y.throw(M))}catch(R){T(R)}}s(O,"rejected");function D(M){M.done?C(M.value):_(M.value).then(A,O)}s(D,"step"),D((y=y.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(2543682196),p=h(d(5384631890)),a=h(d(1252089397)),r=h(d(1721682483)),n=h(d(8855787924)),e=h(d(3741513515)),t=h(d(7822521824)),i=h(d(8796204466)),o=h(d(2686893898)),f=h(d(6747155167));let g=s(class{addObserver(u){this.logger.info("adding messaging observer"),this.observerQueue.add(u)}removeObserver(u){this.logger.info("removing messaging observer"),this.observerQueue.delete(u)}start(){return c(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(u){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&u(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",u=>{this.receiveMessageHandler(u.data)}),this.webSocket.addEventListener("close",u=>{this.closeEventHandler(u)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(u){return c(this,void 0,void 0,function*(){return yield this.startConnectingInternal(u),yield new Promise((v,y)=>{this.bootstrapResolved=v,this.bootstrapRejected=y})})}startConnectingInternal(u){var v;return c(this,void 0,void 0,function*(){let y=this.configuration.endpointUrl;if(u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),u||y===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const C=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=C.Endpoint)===null||v===void 0)&&v.Url?y=C.Endpoint.Url:y=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else y=(yield this.configuration.chimeClient.send(new m.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${y}`)}catch(C){this.logger.error(`Messaging Session failed to resolve endpoint: ${C}`);const T=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(T);return}const _=yield this.prepareWebSocketUrl(y);this.logger.info(`opening connection to ${_}`),u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(_,[],!0),this.forEachObserver(C=>{C.messagingSessionDidStartConnecting&&C.messagingSessionDidStartConnecting(u)}),this.setUpEventListeners()})}prepareWebSocketUrl(u){return c(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===f.default.Connect&&v.set("prefetch-on",[f.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",u,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(u){try{const v=JSON.parse(u),y=v.Headers["x-amz-chime-event-type"],_=new r.default(y,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&y==="SESSION_ESTABLISHED"){this.forEachObserver(T=>{T.messagingSessionDidStart&&T.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const C=this.preBootstrapMessages.length;for(let T=0;T<C;T++){const A=this.preBootstrapMessages.shift();this.forEachObserver(O=>{this.sendMessageToObserver(O,A)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(_);return}this.forEachObserver(C=>{this.sendMessageToObserver(C,_)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(u,v){u.messagingSessionDidReceiveMessage&&u.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>c(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(u){this.logger.info(`WebSocket close: ${u.code} ${u.reason}`),u.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(u.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(u)}):this.bootstrapRejected(u))}canReconnect(u){return u===1001||u===1006||u>=1011&&u<=1014||u>4e3&&u!==4002&&u!==4003&&u!==4401}constructor(u,v,y,_,C){this.configuration=u,this.logger=v,this.webSocket=y,this.reconnectController=_,this.sigV4=C,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(u.reconnectTimeoutMs,new p.default(u.reconnectFixedWaitMs,u.reconnectShortBackoffMs,u.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=g},9309957401:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(840544383);let h=s(class{generateSessionId(){const p=new Uint32Array(1);return c.getRandomValues(p),p[0].toString()}constructor(p,a,r,n){this.userArn=p,this.messagingSessionId=a,this.endpointUrl=r,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=h},6747155167:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.Connect="connect"})(d||(d={})),l.default=d},9468168383:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.Unread="unread",c.LastMessageTimestamp="last-message-timestamp"})(d||(d={})),l.default=d},4599834734:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3560634922));let m=s(class Aa{id(){return this._id}base(){return this._id?this._id.split(Aa.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Aa.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const r=new Aa(this.base()+Aa.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Aa(r._id).modality()!==a?new Aa(this.base()):r}constructor(a){this._id=a}},"DefaultModality");l.default=m,m.MODALITY_SEPARATOR=h.default.Modality[0],m.MODALITY_CONTENT=h.default.Modality.substr(1)},2311029370:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3741513515)),m=c(d(9013967876)),p=c(d(426218501)),a=d(5391134031),r=d(903520651);let n=s(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{r.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=a.SdkPingPongFrame.create();i.pingId=t,i.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case p.default.WebSocketOpen:this.startPingInterval();break;case p.default.WebSocketFailed:case p.default.WebSocketError:this.logger.warn(`stopped pinging (${p.default[t.type]})`),this.stopPingInterval();break;case p.default.WebSocketClosing:case p.default.WebSocketClosed:this.logger.info(`stopped pinging (${p.default[t.type]})`),this.stopPingInterval();break;case p.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const g=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-g/2),u=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${u}ms from ping-pong time=${g}ms`),this.forEachObserver(v=>{r.Maybe.of(v.didReceivePong).map(y=>y.bind(v)(i,u,g))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new m.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=n},5403024322:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(246495600)),m=c(d(6045987188)),p=c(d(2450851234));let a=s(class{realtimeSetLocalAttendeeId(n,e){this.state.localAttendeeId=n,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(n,e,t,i,o){try{e&&(this.state.attendeeIdToExternalUserId[n]=t);for(const f of this.state.attendeeIdChangesCallbacks)f(n,e,t,i,o)}catch(f){this.onError(f)}}realtimeSubscribeToAttendeeIdPresence(n){try{this.state.attendeeIdChangesCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(n){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(n);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(n){try{if(this.state.canUnmute===n)return;this.state.canUnmute=n;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(n)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(n){try{this.state.setCanUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(n){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!0)}catch(n){this.onError(n)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!1);return!0}catch(n){return this.onError(n),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(n){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(n){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(n,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(n)||(this.state.volumeIndicatorCallbacks[n]=[]),this.state.volumeIndicatorCallbacks[n].push(e),this.sendVolumeIndicatorChange(n,!0,!0,!0,this.state.attendeeIdToExternalUserId[n])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(n,e){if(this.state.volumeIndicatorCallbacks[n])if(e){const i=this.state.volumeIndicatorCallbacks[n].indexOf(e);i>=0&&this.state.volumeIndicatorCallbacks[n].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[n]}realtimeUpdateVolumeIndicator(n,e,t,i,o){try{t=this.applyLocalMuteOverride(n,t);const f=this.getVolumeIndicatorState(n);let g=!1,S=!1,u=!1;t!==null&&f.muted!==t&&(f.muted=t,S=!0,f.muted&&f.volume!==0&&(f.volume=0,g=!0)),!f.muted&&e!==null&&(f.volume!==e&&(f.volume=e,g=!0),f.muted===null&&(f.muted=!1,S=!0)),i!==null&&f.signalStrength!==i&&(f.signalStrength=i,u=!0),this.sendVolumeIndicatorChange(n,g,S,u,o)}catch(f){this.onError(f)}}realtimeSubscribeToLocalSignalStrengthChange(n){try{if(this.state.localSignalStrengthChangeCallbacks.push(n),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(n){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(n);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(n){try{this.state.sendDataMessageCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(n){try{const e=this.state.sendDataMessageCallbacks.indexOf(n);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(n,e,t){try{for(const i of this.state.sendDataMessageCallbacks)i(n,e,t)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(n,e){try{this.state.receiveDataMessageCallbacks.has(n)?this.state.receiveDataMessageCallbacks.get(n).push(e):this.state.receiveDataMessageCallbacks.set(n,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(n){try{this.state.receiveDataMessageCallbacks.delete(n)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(n){try{if(this.state.receiveDataMessageCallbacks.has(n.topic))for(const e of this.state.receiveDataMessageCallbacks.get(n.topic))e(n)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(n){try{this.state.fatalErrorCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(n){try{const e=this.state.fatalErrorCallbacks.indexOf(n);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(n){n?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(n,e){const t=this.state.localAttendeeId,i=this.state.muted;return n!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:i}sendVolumeIndicatorChange(n,e,t,i,o){if(this.sendLocalSignalStrengthChange(n,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(n))return;const f=this.getVolumeIndicatorState(n),g=new p.default;if(e&&(g.volume=f.volume),t&&(g.muted=f.muted),i&&(g.signalStrength=f.signalStrength),!this.stateIsEmpty(g))for(const S of this.state.volumeIndicatorCallbacks[n])S(n,g.volume,g.muted,g.signalStrength,o)}sendLocalSignalStrengthChange(n,e){if(!e||n!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(n).signalStrength;if(i!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(i)}getVolumeIndicatorState(n){return this.state.volumeIndicatorState.hasOwnProperty(n)||(this.state.volumeIndicatorState[n]=new p.default),this.state.volumeIndicatorState[n]}stateIsEmpty(n){return n.volume===null&&n.muted===null&&n.signalStrength===null}onError(n){try{for(const e of this.state.fatalErrorCallbacks)e(n)}catch(e){try{console.error(n),console.error(e)}catch{}}}constructor(n,e){this.mediaStreamBroker=n,this.state=new m.default,this._transcriptionController=e||new h.default(this)}},"DefaultRealtimeController");l.default=a},4412582314:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=d},6045987188:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=d},2450851234:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=d},8855787924:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6393942734));let m=s(class wS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,r){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=r,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new wS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,r){this.reconnectTimeoutMs=a,this.backoffPolicy=r,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=m},1510239283:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class Mo{static initializeWorker(){Mo.log("Initializing RedundantAudioEncoder");const h=new Mo;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?h.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?h.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&h.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(h.setupSenderTransform(m.data.send.readable,m.data.send.writable),h.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(h.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),h.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?h.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?h.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?h.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?h.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&h.setRedundancyEnabled(!1)}}static log(h){Mo.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${h}`})}static getNumRedundantEncodingsForPacketLoss(h){let m=0,p=!1;return h<=8?m=0:h<=18?m=1:h<=75?m=2:(m=0,p=!0),[m,p]}setupPassthroughTransform(h,m){Mo.log("Setting up passthrough transform"),h.pipeTo(m)}setupSenderTransform(h,m){Mo.log("Setting up sender RED transform");const p=new TransformStream({transform:this.senderTransform.bind(this)});h.pipeThrough(p).pipeTo(m)}setupReceiverTransform(h,m){Mo.log("Setting up receiver RED transform");const p=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});h.pipeThrough(p).pipeTo(m)}setRedPayloadType(h){this.redPayloadType=h,Mo.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(h){this.opusPayloadType=h,Mo.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(h){this.numRedundantEncodings=h,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Mo.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(h){this.redundancyEnabled=h,Mo.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(h,m){h.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(h)}senderTransform(h,m){if(h.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}const a=this.getPrimaryPayload(h.timestamp,h.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}const r=this.encode(h.timestamp,a);if(!r){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}h.data=r,this.enqueueAudioFrameIfPayloadSizeIsValid(h,m)}getPrimaryPayload(h,m){const p=this.splitEncodings(h,m);return!p||p.length<1?null:p[p.length-1].payload}splitEncodings(h,m){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const r=new DataView(m);let n=r.byteLength,e=0,t=0,i=0,o=0,f=!1;const g=new Array,S=new Array,u=new Array;for(;n>0;)if(f=(r.getUint8(o)&128)===0,f){if((r.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=r.byteLength))return null;i=r.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const A=((r.getUint8(o+2)&3)<<8)+r.getUint8(o+3);S.push(A);const O=r.getUint16(o+1)>>2,D=h-O;u.push(D),e+=A+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!f)return null;let v=t;for(let A=0;A<u.length;A++){const O=new ArrayBuffer(S[A]);new Uint8Array(O).set(new Uint8Array(r.buffer,v,S[A]),0);const M={timestamp:u[A],payload:O,isRedundant:!0};p&&(M.hasFec=this.opusPacketHasFec(new DataView(O),O.byteLength)),g.push(M),v+=S[A]}const y=r.byteLength-i,_=new ArrayBuffer(i);new Uint8Array(_).set(new Uint8Array(r.buffer,y,i),0);const T={timestamp:h,payload:_,isRedundant:!1,seq:a};return p&&(T.hasFec=this.opusPacketHasFec(new DataView(_),_.byteLength)),g.push(T),g}encode(h,m){const p=m.byteLength;if(p===0||p>=this.maxRedPacketSizeBytes||p>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let r=this.redLastHeaderSizeBytes,n=p,e=this.maxAudioPayloadSizeBytes-p-r;const t=new Array,i=new Array;if(this.redundancyEnabled){let u=this.uint32WrapAround(h-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<a&&!(this.uint32WrapAround(h-u)>=this.maxRedTimestampOffset);v++){let y=u,_=this.encodingHistory.find(C=>C.timestamp===y);if(_||(y=this.uint32WrapAround(u-this.redPacketizationTime),_=this.encodingHistory.find(C=>C.timestamp===y)),_){const C=_.payload.byteLength;if(e<this.redHeaderSizeBytes+C)break;e-=this.redHeaderSizeBytes+C,r+=this.redHeaderSizeBytes,n+=C,t.unshift(_.timestamp),i.unshift(_.payload)}u-=this.redPacketizationTime*this.redPacketDistance,u=this.uint32WrapAround(u)}}const o=new ArrayBuffer(r+n),f=new DataView(o);let g=0;for(let u=0;u<t.length;u++){const v=h-t[u];f.setUint8(g,this.opusPayloadType|128),f.setUint16(g+1,v<<2|i[u].byteLength>>8),f.setUint8(g+3,i[u].byteLength&255),g+=this.redHeaderSizeBytes}f.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let u=0;u<i.length;u++)S.set(new Uint8Array(i[u]),g),g+=i[u].byteLength;return S.set(new Uint8Array(m),g),g+=m.byteLength,g!==r+n?null:(this.updateEncodingHistory(h,m),o)}updateEncodingHistory(h,m){for(const a of this.encodingHistory){const r=this.redPacketizationTime*this.redMaxRecoveryDistance;if(h-a.timestamp>=r)this.encodingHistory.shift();else break}const p=new DataView(m);(this.opusPacketIsCeltOnly(p)||this.opusPacketHasVoiceActivity(p,p.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:h,payload:m}))}initializePacketLogs(){const h=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(h),index:0,windowSize:h},this.redRecoveryLog={window:new Array(h),index:0,windowSize:h},this.fecRecoveryLog={window:new Array(h),index:0,windowSize:h},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(h,m){const p=h.getMetadata();if(p.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}const a=this.splitEncodings(h.timestamp,h.data,!0,p.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,m);return}for(let r=a.length-1;r>=0;r--)this.updateLossStats(a[r])&&(this.updateRedStats(a[r]),this.updateFecStats(a[r]));this.maybeReportLossStats(a[a.length-1].timestamp,p.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(h,m)}updateLossStats(h){if(h.isRedundant)return!0;const m=h.timestamp,p=h.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=p,this.addTimestamp(this.primaryPacketLog,m),!0;const a=this.int16(p-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=h.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(h){if(!h.isRedundant||this.totalAudioPacketsLost===0)return;const m=h.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(h){if(!h.hasFec||this.totalAudioPacketsLost===0)return;const m=h.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(h,m){h-this.lastLossReportTimestamp<this.lossReportInterval||(Mo.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=h)}addTimestamp(h,m){h.window[h.index]=m,h.index=(h.index+1)%h.windowSize}hasTimestamp(h,m){return!!h.window.find(a=>a===m)}removeTimestamp(h,m){const p=h.window.indexOf(m);return p>=0?(h.window[p]=void 0,!0):!1}removeFromRecoveryWindows(h){let m=this.removeTimestamp(this.redRecoveryLog,h);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,h),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(h){let p=h;return h>=4294967296?p=h-4294967296:h<0&&(p=4294967296+h),p}int16(h){return h<<16>>16}opusPacketIsCeltOnly(h){return!!(h.getUint8(0)&128)}opusPacketGetSamplesPerFrame(h,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let p,a;return this.opusPacketIsCeltOnly(h)?(a=h.getUint8(0)>>3&3,p=(m<<a)/400):(h.getUint8(0)&96)===96?p=h.getUint8(0)&8?m/50:m/100:(a=h.getUint8(0)>>3&3,a===3?p=m*60/1e3:p=(m<<a)/100),p}opusNumSilkFrames(h){let m=this.opusPacketGetSamplesPerFrame(h,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(h){return h.getUint8(0)&4?2:1}opusParseSize(h,m,p,a){return p<1?(a[0]=-1,-1):h.getUint8(m)<252?(a[0]=h.getUint8(m),1):p<2?(a[0]=-1,-1):(a[0]=4*h.getUint8(m+1)+h.getUint8(m),2)}opusPacketParseImpl(h,m,p,a,r,n,e,t){if(!n||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let i,o,f=0,g=!1;const S=h.getUint8(0);a&&(a[0]=S);let u=m-1,v=1,y=u;switch(S&3){case 0:i=1;break;case 1:if(i=2,g=!0,!p){if(u&1)return this.OPUS_INVALID_PACKET;y=u/2,n[0][0]=y}break;case 2:if(i=2,o=this.opusParseSize(h,v,u,n[0]),u-=o,n[0][0]<0||n[0][0]>u)return this.OPUS_INVALID_PACKET;v+=o,y=u-n[0][0];break;default:if(u<1)return this.OPUS_INVALID_PACKET;const _=h.getUint8(v++);if(--u,i=_&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(h,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(_&64){let T,A;do{if(u<=0)return this.OPUS_INVALID_PACKET;T=h.getUint8(v++),--u,A=T===255?254:T,u-=A,f+=A}while(T===255)}if(u<0)return this.OPUS_INVALID_PACKET;if(g=!(_&128),g){if(!p){if(y=Math.trunc(u/i),y*i!==u)return this.OPUS_INVALID_PACKET;for(let T=0;T<i-1;++T)n[T][0]=y}}else{y=u;for(let T=0;T<i-1;++T){if(o=this.opusParseSize(h,v,u,n[T]),u-=o,n[T][0]<0||n[T][0]>u)return this.OPUS_INVALID_PACKET;v+=o,y-=o+n[T][0]}if(y<0)return this.OPUS_INVALID_PACKET}}if(p){if(o=this.opusParseSize(h,v,u,n[i-1]),u-=o,n[i-1][0]<0||n[i-1][0]>u)return this.OPUS_INVALID_PACKET;if(v+=o,g){if(n[i-1][0]*i>u)return this.OPUS_INVALID_PACKET;for(let _=0;_<i-1;++_)n[_][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=y))return this.OPUS_INVALID_PACKET}else{if(y>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=y}e&&(e[0]=v);for(let _=0;_<i;++_)r&&(r[_][0]=v),v+=n[_][0];return t&&(t[0]=v+f),i}opusPacketParse(h,m,p,a,r,n){return this.opusPacketParseImpl(h,m,!1,p,a,r,n,null)}opusPacketHasVoiceActivity(h,m){if(!h||m<=0)return 0;if(this.opusPacketIsCeltOnly(h))return-1;const p=this.opusNumSilkFrames(h);if(p===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),r=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],r[e]=[void 0];const n=this.opusPacketParse(h,m,null,a,r,null);if(n<0)return-1;for(let e=0;e<n;++e){if(r[e][0]<1)continue;if(h.getUint8(a[e][0])>>8-p||this.opusPacketGetNumChannels(h)===2&&h.getUint8(a[e][0])<<p+1>>8-p)return 1}return 0}opusPacketHasFec(h,m){if(!h||m<=0||this.opusPacketIsCeltOnly(h))return!1;const p=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)p[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(h,m,null,p,a,null)<0||a[0][0]<=1)return!1;const n=this.opusNumSilkFrames(h);if(n===0)return!1;const e=this.opusPacketGetNumChannels(h);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(h.getUint8(p[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=d,d.shouldLog=!1,d.shouldReportStats=!1},3440292739:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=d},3741513515:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6393942734));let m=s(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=m},9013967876:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{start(h){this.stop(),this.timer=setInterval(h,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(h){this.intervalMs=h}},"IntervalScheduler");l.default=d},6393942734:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{start(h){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),h()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(h){this.timeoutMs=h,this.timer=null}},"TimeoutScheduler");l.default=d},3430379175:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(9615283928)),m=c(d(3364495052)),p=c(d(4883941895));let a=s(class an{clone(){return new an(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new an(n.join(an.CRLF))}static candidateTypeFromString(n){switch(n){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:an.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+an.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return an.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(an.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return an.linesToSDP(this.lines().filter(e=>an.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,an.rfc7587LowestBitrate),an.rfc7587HighestBitrate));const e=this.lines(),t=an.findOpusFmtpAttributes(e),i=an.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return an.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=an.findOpusFmtpAttributes(n),t=an.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return an.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const f=e.exec(o);f!==null&&(i[i.length-1]=`a=fmtp:${f[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,f=null;for(const g of n)if(g.startsWith("m=audio")&&(f=e[o],o++),g.startsWith("m=video")&&(f=null),f&&g.startsWith(f)){const S=g.slice(f.length).split(";"),u=[];for(const v of S)t.findIndex(_=>_.startsWith(v.split("=")[0]))<0&&u.push(v);for(const v of t)u.push(v);i.push(f+u.join(";"))}else i.push(g);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new an(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const f=+i.split("a=extmap:")[1].split(" ")[0];e.includes(f)||e.push(f)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,an.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,an.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=an.splitLines(this.sdp).filter(e=>!e.includes(an.dependencyDescriptorRtpHeaderExtensionUrl));return new an(n.join(an.CRLF)+an.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(an.splitLines(this.sdp)):t,o=an.splitSections(this.sdp),f=[];for(let S of o){if(/^m=video/.test(S)&&an.getRtpHeaderExtensionIdInSection(S,e)===-1){const u=an.splitLines(S),v=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){f.push(S);continue}for(const y of u)if(v.push(y),/^a=sendrecv/.test(y.trim())){const _="a=extmap:"+i+" "+e;v.push(_)}S=v.join(an.CRLF)+an.CRLF}else if(t!==-1&&/^m=video/.test(S)&&an.getRtpHeaderExtensionIdInSection(S,e)!==t){const u=an.splitLines(S),v=[];for(const y of u){if(/^a=extmap:/.test(y.trim())&&y.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const C="a=extmap:"+t+" "+e;v.push(C)}continue}v.push(y)}S=v.join(an.CRLF)+an.CRLF}f.push(S)}const g=f.join("");return new an(g)}ssrcForVideoSendingSection(){const n=this.sdp,e=an.splitSections(n);if(e.length<2)return"";const t=an.findActiveCameraSection(e);if(t===-1)return"";const i=an.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=an.extractSSRCsFromFIDGroupLine(i[0]),[f]=o.split(" ").map(g=>parseInt(g,10));return f.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=an.splitSections(n),t=an.findActiveCameraSection(e);if(t===-1)return new an(this.sdp);const i=e[t],o=an.splitLines(i),f=[],g=new Map;o.forEach(y=>{if(/^a=rtpmap:/.test(y)){const _=/^a=rtpmap:([0-9]+)\s/.exec(y);_&&y.toLowerCase().includes("h264")&&f.push(parseInt(_[1],10))}if(/^a=fmtp:/.test(y)){const _=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(y);if(_&&_.length===3){const C=parseInt(_[1],10),T=parseInt(_[2],10);g.has(T)?g.get(T).push(C):g.set(T,[C])}}});const S=new Set;for(const y of f){S.add(y);const _=g.get(y);if(_)for(const C of _)S.add(C)}if(f.length>0){const y=o[0].split(" ");o[0]=y.filter(_=>!S.has(parseInt(_))).join(" ")}const u=o.filter(y=>{if(!y.includes("rtpmap")&&!y.includes("rtcp-fb")&&!y.includes("fmtp"))return!0;for(const _ of S)if(y.includes(_.toString()))return!1;return!0});e[t]=u.join(an.CRLF)+an.CRLF;const v=e.join("");return new an(v)}mediaSections(){const n=an.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new m.default,o=an.splitLines(n[t]);for(const f of o){const g=an.mediaType(f);if(g!==void 0){i.mediaType=g;continue}const S=an.direction(f);if(S!==void 0){i.direction=S;continue}const u=an.mid(f);if(u!==void 0){i.mid=u;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=an.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),f=+o[0];if(o[1]===e)return f}return-1}getRtpHeaderExtensionId(n){const e=an.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=an.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=an.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=an.splitSections(e),i=an.findActiveCameraSection(t);if(i===-1)return new an(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new an(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=an.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const u=/^a=rtpmap:(\d+)\s/.exec(S);if(!u)return;const v=u[1];for(const y of e){if(!S.includes(`${y.codecName}/${y.codecCapability.clockRate}`))continue;let _=!1;if(y.codecCapability.sdpFmtpLine!==void 0){let C=!1;for(const T of i){if(y.fmtpLineMatches(T,parseInt(v))){_=!0;break}C||(C=T.startsWith(`a=fmtp:${v} profile-id=`))}y.equals(p.default.vp9Profile0())&&!C&&(_=!0)}else _=!0;if(_){t.set(v,y);break}}});const o=new Set(t.keys()),f=i[0].split(" ").filter(S=>!o.has(S)),g=Array.from(t.entries()).sort((S,u)=>{let[v,y]=S,[_,C]=u;const T=e.indexOf(y),A=e.indexOf(C);return T-A}).map(S=>{let[u,v]=S;return u});return f.splice(3,0,...g),i[0]=f.join(" "),i.join(an.CRLF)+an.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=an.splitSections(n),t=an.findActiveCameraSection(e);if(t===-1)return[];const i=an.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const f of n){const g=/^a=rtpmap:([0-9]+)\s/.exec(f);if(g&&g[1]===e){const u=f.split(" ")[1].split("/");u.length>=2&&(t=u[0],i=u[1])}f.startsWith(`a=fmtp:${e} `)&&(o=f.split(" ")[1])}if(t!==void 0)return new p.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=an.splitSections(e);return n.set("opus",an.findAudioPayloadType("opus",t)),n.set("red",an.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const f=i.exec(o);if(f!==null)return Number(f[1])}return 0}withStartingVideoSendBitrate(n){const e=an.splitSections(this.sdp),t=an.findActiveCameraSection(e);if(t===-1)return this;const i=an.splitLines(e[t]),o=[];for(const g of i)if(/^a=fmtp:\d*/.test(g)){const S=g+`;x-google-start-bitrate=${n*1e3}`;o.push(S)}else o.push(g);e[t]=o.join(an.CRLF)+an.CRLF;const f=e.join("");return new an(f)}constructor(n){this.sdp=n}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9615283928:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var d;(function(c){c.Host="host",c.ServerReflexive="srflx",c.PeerReflexive="prflx",c.Relay="relay"})(d=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=d},3364495052:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"SDPMediaSection");l.default=d},4883941895:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(5391134031);let h=s(class Dr{equals(p){return p!==void 0&&this.codecName===p.codecName&&this.codecCapability.mimeType===p.codecCapability.mimeType&&this.codecCapability.clockRate===p.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===p.codecCapability.sdpFmtpLine}fmtpLineMatches(p,a){const r=this.codecCapability.sdpFmtpLine;if(!r)return!1;if(this.codecName==="H264"){const n=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=r.replace(n,"profile-level-id=$1");return p.replace(n,"profile-level-id=$1").startsWith(`a=fmtp:${a} ${e}`)}return p.startsWith(`a=fmtp:${a} ${r}`)}static vp8(){return new Dr("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Dr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Dr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Dr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Dr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Dr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Dr.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Dr("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Dr.vp9Profile0()}static av1Main(){return new Dr("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Dr.av1Main()}static fromSignaled(p){switch(p){case c.SdkVideoCodecCapability.VP8:return Dr.vp8();case c.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Dr.h264BaselineProfile();case c.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Dr.h264ConstrainedBaselineProfile();case c.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Dr.h264MainProfile();case c.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Dr.h264HighProfile();case c.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Dr.h264ConstrainedHighProfile();case c.SdkVideoCodecCapability.VP9_PROFILE_0:return Dr.vp9Profile0();case c.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Dr.av1Main();default:return}}constructor(p,a){this.codecName=p,this.codecCapability=a}},"VideoCodecCapability");l.default=h},9675039205:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(2179555054);let h=s(class gu{compress(p,a){if(a.length>0){const e=Math.min(a.length,gu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={memLevel:gu.Z_MEM_LEVEL,dictionary:a};return c.deflateRaw(p,r)}decompress(p,a){if(a.length>0){const e=Math.min(a.length,gu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={to:"string",dictionary:a,chunkSize:4096};let n="";try{n=c.inflateRaw(p,r)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(p){this.logger=p}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},4641929542:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(3097552577),h=d(3049140029),m=d(953236500),p=d(7338273141);let a=s(class{perform(n,e){const t=this.currentState;if(t===m.SessionStateControllerState.NotConnected&&n===c.SessionStateControllerAction.Connect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===c.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===c.SessionStateControllerAction.FinishConnecting)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Disconnect)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Reconnect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===c.SessionStateControllerAction.Update)this.transition(m.SessionStateControllerState.Updating,n);else if(t===m.SessionStateControllerState.Updating&&n===c.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Updating&&n===c.SessionStateControllerAction.FinishUpdating)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Disconnecting&&n===c.SessionStateControllerAction.FinishDisconnecting)this.transition(m.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${m.SessionStateControllerState[this.currentState]} with ${c.SessionStateControllerAction[n]}`),this.deferAction(n,e),p.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${m.SessionStateControllerState[this.currentState]} with ${c.SessionStateControllerAction[n]}`),p.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${m.SessionStateControllerState[this.currentState]} with action ${c.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${m.SessionStateControllerState[t]}`),this.currentState=t,p.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),p.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${m.SessionStateControllerState[this.currentState]} to ${m.SessionStateControllerState[n]} with ${c.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case c.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case c.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case c.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case c.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===m.SessionStateControllerState.Connecting||this.currentState===m.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${c.SessionStateControllerAction[n]}`),this.perform(n,e)!==p.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${c.SessionStateControllerAction[n]} in state ${m.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=m.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},3097552577:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var d;(function(c){c[c.Connect=0]="Connect",c[c.FinishConnecting=1]="FinishConnecting",c[c.Update=2]="Update",c[c.FinishUpdating=3]="FinishUpdating",c[c.Reconnect=4]="Reconnect",c[c.Disconnect=5]="Disconnect",c[c.Fail=6]="Fail",c[c.FinishDisconnecting=7]="FinishDisconnecting"})(d=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=d},3049140029:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var d;(function(c){c[c.DoNotDefer=0]="DoNotDefer",c[c.Low=1]="Low",c[c.Medium=2]="Medium",c[c.High=3]="High",c[c.VeryHigh=4]="VeryHigh"})(d=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=d},953236500:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var d;(function(c){c[c.NotConnected=0]="NotConnected",c[c.Connecting=1]="Connecting",c[c.Connected=2]="Connected",c[c.Updating=3]="Updating",c[c.Disconnecting=4]="Disconnecting"})(d=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=d},7338273141:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var d;(function(c){c[c.Transitioned=0]="Transitioned",c[c.NoTransitionAvailable=1]="NoTransitionAvailable",c[c.DeferredTransition=2]="DeferredTransition",c[c.TransitionFailed=3]="TransitionFailed"})(d=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=d},7258714924:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8351168186)),m=c(d(6393942734)),p=d(5391134031),a=d(840544383),r=c(d(8066052849)),n=c(d(5116495551)),e=c(d(2686893898)),t=d(1448262436),i=c(d(8152250765)),o=c(d(426218501));let f=s(class kc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const u=p.SdkSignalFrame.create();return u.type=p.SdkSignalFrame.Type.PING_PONG,u.pingPong=S,this.sendMessage(u),u.timestampMs}join(S){this.logger.info("sending join");const u=p.SdkJoinFrame.create();u.protocolVersion=2,u.flags=p.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new h.default,y={platformName:v.name(),platformVersion:v.version(),clientSource:r.default.sdkName,chimeSdkVersion:r.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:C,appVersion:T}=S.applicationMetadata;y.appName=C,y.appVersion=T}u.clientDetails=p.SdkClientDetails.create(y),u.audioSessionId=this.audioSessionId,u.wantsCompressedSdp=kc.CLIENT_SUPPORTS_COMPRESSION,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),u.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),u.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const _=p.SdkSignalFrame.create();_.type=p.SdkSignalFrame.Type.JOIN,_.join=u,this.sendMessage(_)}subscribe(S){const u=p.SdkSubscribeFrame.create();if(u.sendStreams=[],u.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(u.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(u.audioCheckin=S.audioCheckin,u.audioHost=S.audioHost,u.audioMuted=S.audioMuted,!S.audioCheckin)){const y=p.SdkStreamDescriptor.create();y.mediaType=p.SdkStreamMediaType.AUDIO,y.trackLabel="AmazonChimeExpressAudio",y.attendeeId=S.attendeeId,y.streamId=1,y.groupId=1,y.framerate=15,y.maxBitrateKbps=600,y.avgBitrateBps=4e5,u.sendStreams.push(y)}if(u.compressedSdpOffer=S.compressedSdpOffer,u.duplex=p.SdkStreamServiceType.RX,S.localVideoEnabled){u.duplex=p.SdkStreamServiceType.DUPLEX;for(let y=0;y<S.videoStreamDescriptions.length;y++){const _=S.videoStreamDescriptions[y].clone();_.attendeeId=S.attendeeId,u.sendStreams.push(_.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(u.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=p.SdkSignalFrame.create();v.type=p.SdkSignalFrame.Type.SUBSCRIBE,v.sub=u,this.sendMessage(v)}remoteVideoUpdate(S,u){const v=p.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=u;const y=p.SdkSignalFrame.create();y.type=p.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,y.remoteVideoUpdate=v,this.sendMessage(y)}convertSignalingClientVideoSubscriptionConfiguration(S){const u=new p.SdkVideoSubscriptionConfiguration;switch(u.mid=S.mid,u.attendeeId=S.attendeeId,u.streamId=S.streamId,u.groupId=S.groupId,u.priority=S.priority,u.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:u.qualityAdaptationPreference=p.SdkVideoQualityAdaptationPreference.BALANCED}return u}leave(){const S=p.SdkSignalFrame.create();S.type=p.SdkSignalFrame.Type.LEAVE,S.leave=p.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.CLIENT_METRIC,u.clientMetric=S,this.sendMessage(u)}sendDataMessage(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.DATA_MESSAGE,u.dataMessage=S,this.sendMessage(u)}closeConnection(){var S,u;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const v=new m.default(kc.CLOSE_EVENT_TIMEOUT_MS),y=s(_=>{var C,T;(T=(C=this.webSocket).removeEventListener)===null||T===void 0||T.call(C,"close",y),v.stop(),this.closeEventHandler(_)},"handler");(u=(S=this.webSocket).removeEventListener)===null||u===void 0||u.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",y),v.start(()=>{y(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.AUDIO_CONTROL;const v=p.SdkAudioControlFrame.create();v.muted=S,u.audioControl=v,this.sendMessage(u)}pause(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.PAUSE,u.pause=p.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resume(S){const u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.RESUME,u.pause=p.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const u=this.prependWithFrameTypeRTC(p.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(u)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let u;try{u=p.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(u)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,u)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(u)}`)}stripFrameTypeRTC(S){const u=S[0];return u!==kc.FRAME_TYPE_RTC&&u!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${u}`),S.slice(1)}prependWithFrameTypeRTC(S){const u=new Uint8Array(S.length+1);return u[0]=kc.FRAME_TYPE_RTC,u.set(S,1),u}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const u of this.observerQueue)u.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=d.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=d.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const u=p.SdkMeetingSessionCredentials.create();u.attendeeId=S.attendeeId,u.externalUserId=S.externalUserId,u.joinToken=S.joinToken;const v=p.SdkPrimaryMeetingJoinFrame.create();v.credentials=u;const y=p.SdkSignalFrame.create();y.type=p.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,y.primaryMeetingJoin=v,this.sendMessage(y)}demoteFromPrimaryMeeting(){const S=p.SdkPrimaryMeetingLeaveFrame.create(),u=p.SdkSignalFrame.create();u.type=p.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,u.primaryMeetingLeave=S,this.sendMessage(u)}constructor(S,u){this.webSocket=S,this.logger=u,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0},1448262436:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const c=d(5391134031);var h;(function(r){r[r.Default=0]="Default",r[r.None=1]="None",r[r.BandwidthProbing=2]="BandwidthProbing",r[r.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function m(r){return r===h.None||r===h.Default}s(m,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=m;function p(r){switch(r){case c.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case c.SdkServerSideNetworkAdaption.NONE:return h.None;case c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}s(p,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=p;function a(r){switch(r){case h.Default:return c.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return c.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return c.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}s(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},893025464:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(h,m){this.signalingURL=h,this.joinToken=m}},"SignalingClientConnectionRequest");l.default=d},8152250765:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(426218501));let m=s(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,r,n,e,t){this.client=a,this.type=r,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=m},426218501:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var d;(function(c){c[c.WebSocketConnecting=0]="WebSocketConnecting",c[c.WebSocketOpen=1]="WebSocketOpen",c[c.WebSocketError=2]="WebSocketError",c[c.WebSocketClosing=3]="WebSocketClosing",c[c.WebSocketClosed=4]="WebSocketClosed",c[c.WebSocketFailed=5]="WebSocketFailed",c[c.WebSocketMessage=6]="WebSocketMessage",c[c.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",c[c.WebSocketSentMessage=8]="WebSocketSentMessage",c[c.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",c[c.ReceivedSignalFrame=10]="ReceivedSignalFrame",c[c.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(d=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=d},9315300759:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1448262436));let m=s(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=m},1026405281:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{constructor(h,m,p,a,r,n,e,t,i,o){this.attendeeId=h,this.sdpOffer=m,this.audioHost=p,this.audioMuted=a,this.audioCheckin=r,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=d},4983545831:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{equals(h){return h!==void 0&&this.mid===h.mid&&this.attendeeId===h.attendeeId&&this.streamId===h.streamId&&this.groupId===h.groupId&&this.priority===h.priority&&this.targetBitrateKbps===h.targetBitrateKbps&&this.qualityAdaptationPreference===h.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=d},5391134031:(x,l,d)=>{"use strict";var c=d(7232944804),h=c.Reader,m=c.Writer,p=c.util,a=c.roots.default||(c.roots.default={});a.SdkSignalFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSignalFrame"),r.prototype.timestampMs=p.Long?p.Long.fromBits(0,0,!0):0,r.prototype.type=1,r.prototype.error=null,r.prototype.join=null,r.prototype.joinack=null,r.prototype.sub=null,r.prototype.suback=null,r.prototype.index=null,r.prototype.pause=null,r.prototype.leave=null,r.prototype.leaveAck=null,r.prototype.bitrates=null,r.prototype.audioControl=null,r.prototype.audioMetadata=null,r.prototype.audioStreamIdInfo=null,r.prototype.pingPong=null,r.prototype.audioStatus=null,r.prototype.clientMetric=null,r.prototype.dataMessage=null,r.prototype.remoteVideoUpdate=null,r.prototype.primaryMeetingJoin=null,r.prototype.primaryMeetingJoinAck=null,r.prototype.primaryMeetingLeave=null,r.prototype.notification=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("timestampMs"))throw p.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw p.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.timestampMs)&&!(e.timestampMs&&p.isInteger(e.timestampMs.low)&&p.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(p.Long?(t.timestampMs=p.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new p.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(p.Long){var o=new p.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?p.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new p.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=a.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),r}(),a.SdkErrorFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkErrorFrame"),r.prototype.status=0,r.prototype.description="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!p.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!p.isString(e.description)?"description: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),r}(),a.SdkJoinFlags=function(){var r={},n=Object.create(r);return n[r[2]="HAS_STREAM_UPDATE"]=2,n[r[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[r[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),a.SdkClientDetails=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientDetails"),r.prototype.appName="",r.prototype.appVersion="",r.prototype.deviceModel="",r.prototype.deviceMake="",r.prototype.platformName="",r.prototype.platformVersion="",r.prototype.clientSource="",r.prototype.chimeSdkVersion="",r.prototype.clientUtcOffset="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!p.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!p.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!p.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!p.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!p.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!p.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!p.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!p.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!p.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),r}(),a.SdkServerSideNetworkAdaption=function(){var r={},n=Object.create(r);return n[r[1]="DEFAULT"]=1,n[r[2]="NONE"]=2,n[r[3]="BANDWIDTH_PROBING"]=3,n[r[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),a.SdkJoinFrame=function(){function r(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinFrame"),r.prototype.protocolVersion=2,r.prototype.maxNumOfVideos=0,r.prototype.flags=0,r.prototype.clientDetails=null,r.prototype.audioSessionId=p.Long?p.Long.fromBits(0,0,!0):0,r.prototype.wantsCompressedSdp=!1,r.prototype.serverSideNetworkAdaption=1,r.prototype.supportedServerSideNetworkAdaptions=p.emptyArray,r.prototype.wantsAllTemporalLayersInIndex=!1,r.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!p.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!p.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!p.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!p.isInteger(e.audioSessionId)&&!(e.audioSessionId&&p.isInteger(e.audioSessionId.low)&&p.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(p.Long?(t.audioSessionId=p.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new p.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,p.Long){var o=new p.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?p.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new p.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var f=0;f<e.supportedServerSideNetworkAdaptions.length;++f)i.supportedServerSideNetworkAdaptions[f]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]===void 0?e.supportedServerSideNetworkAdaptions[f]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]:e.supportedServerSideNetworkAdaptions[f]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),r}(),a.SdkJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinAckFrame"),r.prototype.turnCredentials=null,r.prototype.videoSubscriptionLimit=0,r.prototype.wantsCompressedSdp=!1,r.prototype.defaultServerSideNetworkAdaption=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!p.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),r}(),a.SdkLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),r}(),a.SdkLeaveAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),r}(),a.SdkStreamServiceType=function(){var r={},n=Object.create(r);return n[r[1]="RX"]=1,n[r[2]="TX"]=2,n[r[3]="DUPLEX"]=3,n}(),a.SdkStreamMediaType=function(){var r={},n=Object.create(r);return n[r[1]="AUDIO"]=1,n[r[2]="VIDEO"]=2,n}(),a.SdkSubscribeFrame=function(){function r(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeFrame"),r.prototype.duplex=1,r.prototype.sendStreams=p.emptyArray,r.prototype.receiveStreamIds=p.emptyArray,r.prototype.sdpOffer="",r.prototype.audioHost="",r.prototype.audioCheckin=!1,r.prototype.audioMuted=!1,r.prototype.compressedSdpOffer=p.newBuffer([]),r.prototype.videoSubscriptionConfiguration=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)a.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!p.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!p.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!p.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||p.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=a.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?p.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=p.newBuffer(p.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=p.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?p.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),r}(),a.SdkSubscribeAckFrame=function(){function r(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeAckFrame"),r.prototype.duplex=1,r.prototype.allocations=p.emptyArray,r.prototype.sdpAnswer="",r.prototype.tracks=p.emptyArray,r.prototype.compressedSdpAnswer=p.newBuffer([]),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)a.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)a.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=a.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!p.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=a.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||p.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=a.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=a.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?p.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=p.newBuffer(p.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=p.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?p.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),r}(),a.SdkIndexFrame=function(){function r(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkIndexFrame"),r.prototype.atCapacity=!1,r.prototype.sources=p.emptyArray,r.prototype.pausedAtSourceIds=p.emptyArray,r.prototype.numParticipants=0,r.prototype.supportedReceiveCodecIntersection=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)a.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=a.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!p.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!p.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=a.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),r}(),a.SdkPauseResumeFrame=function(){function r(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPauseResumeFrame"),r.prototype.streamIds=p.emptyArray,r.prototype.groupIds=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(f&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!p.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!p.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),r}(),a.SdkBitrateFrame=function(){function r(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrateFrame"),r.prototype.bitrates=p.emptyArray,r.prototype.serverAvailableOutgoingBitrate=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)a.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=a.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!p.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=a.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),r}(),a.SdkStreamDescriptor=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDescriptor"),r.prototype.streamId=0,r.prototype.framerate=0,r.prototype.maxBitrateKbps=0,r.prototype.trackLabel="",r.prototype.groupId=0,r.prototype.avgBitrateBps=0,r.prototype.attendeeId="",r.prototype.mediaType=1,r.prototype.externalUserId="",r.prototype.width=0,r.prototype.height=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!p.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!p.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!p.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!p.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!p.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!p.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!p.isInteger(e.height)?"height: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),r}(),a.SdkStreamAllocation=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamAllocation"),r.prototype.trackLabel="",r.prototype.streamId=0,r.prototype.groupId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!p.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),r}(),a.SdkTrackMapping=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTrackMapping"),r.prototype.streamId=0,r.prototype.ssrc=0,r.prototype.trackLabel="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!p.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!p.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),r}(),a.SdkBitrate=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrate"),r.prototype.sourceStreamId=0,r.prototype.avgBitrateBps=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!p.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!p.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),r}(),a.SdkAudioControlFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioControlFrame"),r.prototype.muted=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),r}(),a.SdkAudioMetadataFrame=function(){function r(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioMetadataFrame"),r.prototype.attendeeStates=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)a.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),r}(),a.SdkAudioAttendeeState=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioAttendeeState"),r.prototype.audioStreamId=0,r.prototype.volume=0,r.prototype.muted=!1,r.prototype.signalStrength=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!p.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!p.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!p.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfoFrame=function(){function r(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfoFrame"),r.prototype.streams=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)a.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=a.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfo=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfo"),r.prototype.audioStreamId=0,r.prototype.attendeeId="",r.prototype.muted=!1,r.prototype.externalUserId="",r.prototype.dropped=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!p.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!p.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),r}(),a.SdkPingPongType=function(){var r={},n=Object.create(r);return n[r[1]="PING"]=1,n[r[2]="PONG"]=2,n}(),a.SdkPingPongFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPingPongFrame"),r.prototype.type=1,r.prototype.pingId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("type"))throw p.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw p.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return p.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),r}(),a.SdkAudioStatusFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStatusFrame"),r.prototype.audioStatus=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!p.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),r}(),a.SdkMetric=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMetric"),r.prototype.type=1,r.prototype.value=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),r}(),a.SdkStreamMetricFrame=function(){function r(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamMetricFrame"),r.prototype.streamId=0,r.prototype.groupId=0,r.prototype.metrics=p.emptyArray,r.prototype.dimensions=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)a.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)a.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=a.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=a.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=a.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=a.SdkStreamDimension.fromObject(e.dimensions[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),r}(),a.SdkClientMetricFrame=function(){function r(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientMetricFrame"),r.prototype.globalMetrics=p.emptyArray,r.prototype.streamMetricFrames=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)a.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=a.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=a.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),r}(),a.SdkStreamDimension=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDimension"),r.prototype.type=1,r.prototype.value=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=a.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),r}(),a.SdkDimensionValue=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDimensionValue"),r.prototype.stringValue="",r.prototype.boolValue=!1,r.prototype.uintValue=p.Long?p.Long.fromBits(0,0,!0):0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!p.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!p.isInteger(e.uintValue)&&!(e.uintValue&&p.isInteger(e.uintValue.low)&&p.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(p.Long?(t.uintValue=p.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new p.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,p.Long){var o=new p.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?p.Long.prototype.toString.call(e.uintValue):t.longs===Number?new p.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),r}(),a.SdkDataMessageFrame=function(){function r(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessageFrame"),r.prototype.messages=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)a.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=a.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=a.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),r}(),a.SdkDataMessagePayload=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessagePayload"),r.prototype.topic="",r.prototype.data=p.newBuffer([]),r.prototype.lifetimeMs=0,r.prototype.senderAttendeeId="",r.prototype.ingestTimeNs=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.senderExternalUserId="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!p.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||p.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!p.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!p.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!p.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&p.isInteger(e.ingestTimeNs.low)&&p.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!p.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?p.base64.decode(e.data,t.data=p.newBuffer(p.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(p.Long?(t.ingestTimeNs=p.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new p.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=p.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",p.Long){var o=new p.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?p.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?p.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new p.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),r}(),a.SdkTurnCredentials=function(){function r(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTurnCredentials"),r.prototype.username="",r.prototype.password="",r.prototype.ttl=0,r.prototype.uris=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!p.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!p.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!p.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!p.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),r}(),a.SdkTranscriptItem=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptItem"),r.prototype.content="",r.prototype.endTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.speakerAttendeeId="",r.prototype.speakerExternalUserId="",r.prototype.startTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.type=1,r.prototype.vocabularyFilterMatch=!1,r.prototype.confidence=0,r.prototype.stable=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!p.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!p.isInteger(e.endTime)&&!(e.endTime&&p.isInteger(e.endTime.low)&&p.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!p.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!p.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!p.isInteger(e.startTime)&&!(e.startTime&&p.isInteger(e.startTime.low)&&p.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(p.Long?(t.endTime=p.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(p.Long?(t.startTime=p.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",p.Long){var o=new p.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",p.Long){var o=new p.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?p.Long.prototype.toString.call(e.endTime):t.longs===Number?new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?p.Long.prototype.toString.call(e.startTime):t.longs===Number?new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),r}(),a.SdkTranscriptEntity=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptEntity"),r.prototype.category="",r.prototype.confidence=0,r.prototype.content="",r.prototype.endTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.startTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.type="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!p.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!p.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!p.isInteger(e.endTime)&&!(e.endTime&&p.isInteger(e.endTime.low)&&p.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!p.isInteger(e.startTime)&&!(e.startTime&&p.isInteger(e.startTime.low)&&p.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!p.isString(e.type)?"type: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(p.Long?(t.endTime=p.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(p.Long?(t.startTime=p.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",p.Long){var o=new p.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(p.Long){var o=new p.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?p.Long.prototype.toString.call(e.endTime):t.longs===Number?new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?p.Long.prototype.toString.call(e.startTime):t.longs===Number?new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),r}(),a.SdkTranscriptAlternative=function(){function r(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptAlternative"),r.prototype.items=p.emptyArray,r.prototype.transcript="",r.prototype.entities=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)a.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)a.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=a.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!p.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=a.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=a.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=a.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),r}(),a.SdkTranscriptLanguageWithScore=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptLanguageWithScore"),r.prototype.languageCode="",r.prototype.score=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!p.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),r}(),a.SdkTranscriptResult=function(){function r(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptResult"),r.prototype.alternatives=p.emptyArray,r.prototype.channelId="",r.prototype.endTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.isPartial=!1,r.prototype.resultId="",r.prototype.startTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.languageCode="",r.prototype.languageIdentification=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)a.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!p.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!p.isInteger(e.endTime)&&!(e.endTime&&p.isInteger(e.endTime.low)&&p.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!p.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!p.isInteger(e.startTime)&&!(e.startTime&&p.isInteger(e.startTime.low)&&p.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!p.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=a.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(p.Long?(t.endTime=p.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(p.Long?(t.startTime=p.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",p.Long){var o=new p.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",p.Long){var o=new p.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var f=0;f<e.alternatives.length;++f)i.alternatives[f]=a.SdkTranscriptAlternative.toObject(e.alternatives[f],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?p.Long.prototype.toString.call(e.endTime):t.longs===Number?new p.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?p.Long.prototype.toString.call(e.startTime):t.longs===Number?new p.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var f=0;f<e.languageIdentification.length;++f)i.languageIdentification[f]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[f],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),r}(),a.SdkTranscript=function(){function r(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscript"),r.prototype.results=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)a.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=a.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=a.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),r}(),a.SdkTranscriptionStatus=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptionStatus"),r.prototype.type=1,r.prototype.eventTime=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.transcriptionRegion="",r.prototype.transcriptionConfiguration="",r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!p.isInteger(e.eventTime)&&!(e.eventTime&&p.isInteger(e.eventTime.low)&&p.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!p.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!p.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!p.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(p.Long?(t.eventTime=p.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new p.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,p.Long){var o=new p.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?p.Long.prototype.toString.call(e.eventTime):t.longs===Number?new p.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),r}(),a.SdkTranscriptEvent=function(){function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}s(r,"SdkTranscriptEvent"),r.prototype.status=null,r.prototype.transcript=null;var n;return Object.defineProperty(r.prototype,"Event",{get:p.oneOfGetter(n=["status","transcript"]),set:p.oneOfSetter(n)}),r.create=s(function(t){return new r(t)},"create"),r.encode=s(function(t,i){return i||(i=m.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),r.encodeDelimited=s(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),r.decode=s(function(t,i){t instanceof h||(t=h.create(t));for(var o=i===void 0?t.len:t.pos+i,f=new a.SdkTranscriptEvent;t.pos<o;){var g=t.uint32();switch(g>>>3){case 1:{f.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{f.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(g&7);break}}return f},"decode"),r.decodeDelimited=s(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),r.verify=s(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),r.fromObject=s(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var i=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=a.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),r.toObject=s(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),r}(),a.SdkTranscriptFrame=function(){function r(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptFrame"),r.prototype.events=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)a.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=a.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=a.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),r}(),a.SdkRemoteVideoUpdateFrame=function(){function r(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkRemoteVideoUpdateFrame"),r.prototype.addedOrUpdatedVideoSubscriptions=p.emptyArray,r.prototype.removedVideoSubscriptionMids=p.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!p.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),r}(),a.SdkVideoQualityAdaptationPreference=function(){var r={},n=Object.create(r);return n[r[1]="BALANCED"]=1,n[r[2]="MAINTAIN_FRAMERATE"]=2,n[r[3]="MAINTAIN_RESOLUTION"]=3,n}(),a.SdkVideoSubscriptionConfiguration=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkVideoSubscriptionConfiguration"),r.prototype.mid="",r.prototype.attendeeId="",r.prototype.streamId=0,r.prototype.priority=0,r.prototype.targetBitrateKbps=0,r.prototype.groupId=0,r.prototype.qualityAdaptationPreference=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("mid"))throw p.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!p.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!p.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!p.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!p.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),r}(),a.SdkNotificationFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkNotificationFrame"),r.prototype.level=3,r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!p.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),r.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),r}(),a.SdkPrimaryMeetingJoinFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinFrame"),r.prototype.credentials=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),r}(),a.SdkMeetingSessionCredentials=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMeetingSessionCredentials"),r.prototype.attendeeId="",r.prototype.externalUserId="",r.prototype.joinToken="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<i;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!p.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!p.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!p.isString(e.joinToken)?"joinToken: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,c.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),r}(),a.SdkVideoCodecCapability=function(){var r={},n=Object.create(r);return n[r[1]="VP8"]=1,n[r[2]="H264_BASELINE_PROFILE"]=2,n[r[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[r[4]="H264_MAIN_PROFILE"]=4,n[r[5]="H264_HIGH_PROFILE"]=5,n[r[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[r[8]="VP9_PROFILE_0"]=8,n[r[11]="AV1_MAIN_PROFILE"]=11,n}(),x.exports=a,p.Long=void 0,c.configure()},7822521824:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(1222670195),p=d(9111664378),a=h(d(8066052849));let r=s(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new m.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return c(this,void 0,void 0,function*(){const f=yield this.hmac(t,"AWS4"+e),g=yield this.hmac(i,f),S=yield this.hmac(o,g);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,f,g,S){return c(this,void 0,void 0,function*(){const u=this.getDateTimeString(),v=this.getDateString(u),y="AWS4-HMAC-SHA256";let _="";this.chimeClient.config.region instanceof Function?_=yield this.chimeClient.config.region():_=this.chimeClient.config.region;const C="host",T="host:"+o.toLowerCase()+`
`,A=v+"/"+_+"/"+i+"/aws4_request";let O;this.chimeClient.config.credentials instanceof Function?O=yield this.chimeClient.config.credentials():O=this.chimeClient.config.credentials;let D=new Map;D.set("X-Amz-Algorithm",[y]),D.set("X-Amz-Credential",[encodeURIComponent(O.accessKeyId+"/"+A)]),D.set("X-Amz-Date",[u]),D.set("X-Amz-Expires",["10"]),D.set("X-Amz-SignedHeaders",["host"]),O.sessionToken&&D.set("X-Amz-Security-Token",[encodeURIComponent(O.sessionToken)]),D.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),D.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((ne,ie)=>{const pe=encodeURIComponent(ie);ne.sort().forEach(Ee=>{D.has(pe)||D.set(pe,[]),D.get(pe).push(encodeURIComponent(Ee))})});let M="";D=new Map([...D.entries()].sort()),D.forEach((ne,ie)=>{ne.forEach(pe=>{M.length&&(M+="&"),M+=ie+"="+pe})});const R=e+`
`+f+`
`+M+`
`+T+`
`+C+`
`+p.toHex(yield this.hmac(g)),F=p.toHex(yield this.hmac(R)),V=`AWS4-HMAC-SHA256
`+u+`
`+v+"/"+_+"/"+i+`/aws4_request
`+F,$=yield this.getSignatureKey(O.secretAccessKey,v,_,i),X=p.toHex(yield this.hmac(V,$)),Y=M+"&X-Amz-Signature="+X;return t+"://"+o+f+"?"+Y})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=r},8438160003:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var d;(function(c){c[c.Low=0]="Low",c[c.LowAndMedium=1]="LowAndMedium",c[c.LowAndHigh=2]="LowAndHigh",c[c.Medium=3]="Medium",c[c.MediumAndHigh=4]="MediumAndHigh",c[c.High=5]="High"})(d=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=d},6392364773:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var d;(function(c){c[c.DeviceChanged=0]="DeviceChanged",c[c.MutedLocal=1]="MutedLocal",c[c.UnmutedLocal=2]="UnmutedLocal",c[c.Connected=3]="Connected",c[c.ConnectFailed=4]="ConnectFailed",c[c.RedmicStartLoss=5]="RedmicStartLoss",c[c.RedmicEndLoss=6]="RedmicEndLoss"})(d=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=d},5954709649:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(v,y,_,C){function T(A){return A instanceof _?A:new _(function(O){O(A)})}return s(T,"adopt"),new(_||(_=Promise))(function(A,O){function D(F){try{R(C.next(F))}catch(V){O(V)}}s(D,"fulfilled");function M(F){try{R(C.throw(F))}catch(V){O(V)}}s(M,"rejected");function R(F){F.done?A(F.value):T(F.value).then(D,M)}s(R,"step"),R((C=C.apply(v,y||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(7059763395)),p=h(d(5147189764)),a=h(d(1847926377)),r=h(d(7894724558)),n=h(d(7825873064)),e=h(d(5446246651)),t=h(d(7192341248)),i=h(d(9013967876)),o=d(5391134031),f=d(903520651),g=h(d(6392364773)),S=h(d(4715258780));let u=s(class Su{toAttribute(y){return this.toSuffix(y).substring(1)}toSuffix(y){return y.toLowerCase()===y?`_${y}`:y.toUpperCase()===y?`_${y.toLowerCase()}`:y.replace(/([A-Z][a-z]+)/g,function(_){return`_${_}`}).replace(/([A-Z][A-Z]+)/g,function(_){return`_${_}`}).toLowerCase()}logLatency(y,_,C){const T=this.toSuffix(y);this.logEventTime("meeting"+T,_,C)}logStateTimeout(y,_){const C=this.toSuffix(y);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},_),{state:`state${C}`}))}logAudioEvent(y,_){const C="audio"+this.toSuffix(g.default[y]);this.logEvent(C,_)}logVideoEvent(y,_){const C="video"+this.toSuffix(S.default[y]);this.logEvent(C,_)}logEventTime(y,_){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const T=Object.assign(Object.assign({},C),{call_id:this.audioVideoController.configuration.meetingId,client_type:Su.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${y}: ${JSON.stringify(T)}`),this.metricsAddTime(y,_,T)}logMeetingSessionStatus(y){const _=`${y.statusCode()}`;this.logEvent(_);const C={status:_,status_code:`${y.statusCode()}`};this.logEvent("meeting_session_status",C),y.isTerminal()&&this.logEvent("meeting_session_stopped",C),y.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",C),y.isFailure()&&this.logEvent("meeting_session_failed",C)}logLifecycleEvent(y,_){const C={lifecycle_event:`lifecycle${this.toSuffix(e.default[y])}`,lifecycle_event_code:`${y}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[_])}`,lifecycle_event_condition_code:`${_}`};this.logEvent("meeting_session_lifecycle",C)}logEvent(y){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const C=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:Su.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${y}: ${JSON.stringify(C)}`),this.metricsLogEvent(y,C)}start(y,_){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=y,this.videoStreamIndex=_,this.clientMetricReport=new m.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>c(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(y,_){const C=_?this.clientMetricReport.streamMetricReports[Number(y.ssrc)]:this.clientMetricReport.globalMetricReport;let T;_?T=this.clientMetricReport.getMetricMap(C.mediaType,C.direction):T=this.clientMetricReport.getMetricMap();for(const A in y)A in T&&(typeof y[A]=="number"?(C.previousMetrics[A]=C.currentMetrics[A],C.currentMetrics[A]=y[A]):typeof y[A]=="string"?C.currentStringMetrics[A]=y[A]:typeof y[A]=="object"?(C.previousObjectMetrics[A]=C.currentObjectMetrics[A]===void 0?y[A]:C.currentObjectMetrics[A],C.currentObjectMetrics[A]=y[A]):this.logger.error(`Unknown metric value type ${typeof y[A]} for metric ${A}`))}processRawMetricReports(y){this.clientMetricReport.currentSsrcs={};const _=Date.now();for(const C of y){const T=this.isStreamRawMetricReport(C.type);if(T){const A=this.clientMetricReport.streamMetricReports[Number(C.ssrc)];if(A)A.mediaType===a.default.VIDEO&&A.direction===p.default.UPSTREAM?A.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(C.rid):A.streamId=this.videoStreamIndex.streamIdForSSRC(Number(C.ssrc));else{const O=new n.default;O.mediaType=this.getMediaType(C),O.direction=this.getDirectionType(C),O.mediaType===a.default.VIDEO&&O.direction===p.default.UPSTREAM?O.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(C.rid):this.videoStreamIndex.allStreams().empty()||(O.streamId=this.videoStreamIndex.streamIdForSSRC(Number(C.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(O.groupId=this.videoStreamIndex.groupIdForSSRC(Number(C.ssrc)))),this.clientMetricReport.streamMetricReports[Number(C.ssrc)]=O}this.clientMetricReport.currentSsrcs[Number(C.ssrc)]=1}this.updateMetricValues(C,T)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=_,this.clientMetricReport.print()}addStreamMetricDimensionFrames(y,_){const C=this.clientMetricReport.getStreamDimensionMap();for(const T in _.currentStringMetrics)if(T in C){const A=o.SdkStreamDimension.create();A.type=C[T];const O=o.SdkDimensionValue.create();O.stringValue=_.currentStringMetrics[T],A.value=O,y.dimensions.push(A)}}addMetricFrame(y,_,C,T){const A=C.type,O=C.transform,D=C.source,M=_.streamMetricFrames.length,R=_.streamMetricFrames[M-1];if(A){const F=o.SdkMetric.create();F.type=A,F.value=O(D||y,T),T?R.metrics.push(F):_.globalMetrics.push(F)}}addGlobalMetricsToProtobuf(y){const _=this.clientMetricReport.getMetricMap();for(const C in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(C,y,_[C])}addStreamMetricsToProtobuf(y){for(const _ in this.clientMetricReport.streamMetricReports){const C=this.clientMetricReport.streamMetricReports[_],T=o.SdkStreamMetricFrame.create();T.streamId=C.streamId,T.metrics=[],this.addStreamMetricDimensionFrames(T,C),y.streamMetricFrames.push(T);const A=this.clientMetricReport.getMetricMap(C.mediaType,C.direction);for(const O in C.currentMetrics)this.addMetricFrame(O,y,A[O],Number(_));for(const O in C.currentStringMetrics)this.addMetricFrame(O,y,A[O],Number(_));for(const O in C.currentObjectMetrics)this.addMetricFrame(O,y,A[O],Number(_))}}makeClientMetricProtobuf(){const y=o.SdkClientMetricFrame.create();return y.globalMetrics=[],y.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(y),this.addStreamMetricsToProtobuf(y),y}sendClientMetricProtobuf(y){this.signalingClient.sendClientMetrics(y)}isStreamRawMetricReport(y){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(y)}getMediaType(y){return y.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(y){const{type:_}=y;return _==="inbound-rtp"||_==="remote-outbound-rtp"||_==="inbound-rtp-red"?p.default.DOWNSTREAM:p.default.UPSTREAM}isValidStandardRawMetric(y){return y.type==="inbound-rtp"||y.type==="inbound-rtp-red"||y.type==="outbound-rtp"||y.type==="remote-inbound-rtp"||y.type==="remote-outbound-rtp"||y.type==="candidate-pair"&&y.state==="succeeded"||y.type==="media-source"&&y.kind==="audio"}isValidSsrc(y){let _=!0;return this.isStreamRawMetricReport(y.type)&&this.getDirectionType(y)===p.default.DOWNSTREAM&&this.getMediaType(y)===a.default.VIDEO&&(_=this.videoStreamIndex.streamIdForSSRC(Number(y.ssrc))>0),_}isValidRawMetricReport(y){return this.isValidStandardRawMetric(y)&&this.isValidSsrc(y)}filterRawMetricReports(y){const _=[];for(const C of y)this.isValidRawMetricReport(C)&&_.push(C);return _}handleRawMetricReports(y){const _=this.filterRawMetricReports(y);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(_)}`);const C=[];this.maybeAddRedRecoveryMetrics(C),this.addVideoCodecDegradationMetrics(C),this.clientMetricReport.customStatsReports=C,_.push(...C),this.processRawMetricReports(_);const T=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(T),this.audioVideoController.forEachObserver(A=>{f.Maybe.of(A.metricsDidReceive).map(O=>O.bind(A)(this.clientMetricReport.clone()))})}getStatsWrapper(){return c(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const y=[];try{const _=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=_,_.forEach(C=>{y.push(C)}),this.handleRawMetricReports(y)}catch(_){this.logger.error(_.message)}})}overrideObservableMetric(y,_){this.clientMetricReport.overrideObservableMetric(y,_)}recoveryMetricsDidReceive(y){this.redRecoveryMetricReport=y}maybeAddRedRecoveryMetrics(y){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(y.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(y){const _=this.clientMetricReport.getVideoUpstreamSsrc();_!==null&&y.push({kind:"video",type:"outbound-rtp",ssrc:_,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(y,_,C=Su.INTERVAL_MS){this.audioVideoController=y,this.logger=_,this.interval=C,this.intervalScheduler=null,this.redRecoveryMetricReport=new r.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(T,A,O)=>{},this.metricsLogEvent=(T,A)=>{}}},"StatsCollector");l.default=u,u.INTERVAL_MS=1e3,u.CLIENT_TYPE="amazon-chime-sdk-js"},4715258780:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var d;(function(c){c[c.InputAttached=0]="InputAttached",c[c.SendingFailed=1]="SendingFailed",c[c.SendingSuccess=2]="SendingSuccess"})(d=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=d},7063021350:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4715258780)),p=h(d(516529594));let a=s(class extends p.default{run(){return c(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const f=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(f)}o&&this.context.statsCollector.logVideoEvent(m.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(f=>f.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const f=i[o];i.splice(o,1),e?(i.unshift(f),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},516529594:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(2913368614)),p=h(d(9293073193));let a=s(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new m.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return c(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case p.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case p.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case p.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=p.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==p.default.CANCELED&&(this.status=p.default.FINISHED)}})}baseCancel(n){if(this.status===p.default.CANCELED||this.status===p.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=p.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=p.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},4019918320:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(516529594));let p=s(class extends m.default{run(){return c(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(r){super(r.logger),this.context=r,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=p},7819987893:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(426218501)),p=h(d(516529594));let a=s(class extends p.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=s(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(f){f.type===m.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(f){this.signalingClient=f}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},2918138407:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(516529594));let p=s(class extends m.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const r in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[r]()}addPeerConnectionEventLogger(){const r=this.context.peer;r.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${r.connectionState}`)}),r.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),r.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${r.iceGatheringState}`)}),r.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),r.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${r.iceConnectionState}`)})}run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(r){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(r)):!1}addRemoteVideoTrack(r,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,f;if(this.context.videoTileController.getVideoTileForAttendeeId?(f=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=f==null?void 0:f.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}f||(f=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${f.id()}`));let g=this.context.videoStreamIndex.streamIdForTrack(t);typeof g>"u"&&(this.logger.warn(`stream not found for tile=${f.id()} track=${t}`),g=null);let S=this.context.videoStreamIndex.groupIdForStreamId(g);S===void 0&&(S=null);for(let A=0;A<this.trackEvents.length;A++){const O=this.trackEvents[A],D=n.getVideoTracks();if(D&&D.length){const M=D[0],R=s(()=>{this.context.logger.info(`received the ${O} event for tile=${f.id()} id=${r.id} streamId=${g}`),O==="ended"&&this.removeRemoteVideoTrack(r,f.state())},"callback");M.addEventListener(O,R),this.removeVideoTrackEventListeners[r.id]||(this.removeVideoTrackEventListeners[r.id]=[]),this.removeVideoTrackEventListeners[r.id].push(()=>{M.removeEventListener(O,R)})}}let u,v;if(r.getSettings){const A=r.getSettings();u=A.width,v=A.height}else{const A=r.getCapabilities();u=A.width,v=A.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);f.bindVideoStream(i,!1,n,u,v,g,y,S),this.logger.info(`video track added, use tile=${f.id()} track=${t} streamId=${g} groupId=${S}`);const _="removetrack",C=n,T=s(()=>this.removeRemoteVideoTrack(r,f.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[r.id]=()=>{C.removeEventListener(_,T),delete this.removeTrackRemovedEventListeners[r.id]},C.addEventListener(_,T)}removeRemoteVideoTrack(r,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(r.id)){this.removeTrackRemovedEventListeners[r.id]();for(const e of this.removeVideoTrackEventListeners[r.id])e();delete this.removeVideoTrackEventListeners[r.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${r.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(r){super(r.logger),this.context=r,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=p,p.REMOVE_HANDLER_INTERVAL_MS=1e4},7869625838:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4882394368)),p=h(d(3430379175)),a=h(d(516529594));let r=s(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return c(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>c(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new p.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=r},9613312866:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4882394368)),p=h(d(3430379175)),a=h(d(516529594));let r=s(class OS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return c(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new p.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new p.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(p.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new p.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=OS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=r,r.CHROME_VPN_TIMEOUT_MS=5e3},1495317641:function(x,l,d){"use strict";var c=this&&this.__createBinding||(Object.create?function(u,v,y,_){_===void 0&&(_=y),Object.defineProperty(u,_,{enumerable:!0,get:function(){return v[y]}})}:function(u,v,y,_){_===void 0&&(_=y),u[_]=v[y]}),h=this&&this.__setModuleDefault||(Object.create?function(u,v){Object.defineProperty(u,"default",{enumerable:!0,value:v})}:function(u,v){u.default=v}),m=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var v={};if(u!=null)for(var y in u)y!=="default"&&Object.prototype.hasOwnProperty.call(u,y)&&c(v,u,y);return h(v,u),v},p=this&&this.__awaiter||function(u,v,y,_){function C(T){return T instanceof y?T:new y(function(A){A(T)})}return s(C,"adopt"),new(y||(y=Promise))(function(T,A){function O(R){try{M(_.next(R))}catch(F){A(F)}}s(O,"fulfilled");function D(R){try{M(_.throw(R))}catch(F){A(F)}}s(D,"rejected");function M(R){R.done?T(R.value):C(R.value).then(O,D)}s(M,"step"),M((_=_.apply(u,v||[])).next())})},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(d(3777990285)),n=a(d(4882394368)),e=a(d(7999114886)),t=m(d(1448262436)),i=a(d(426218501)),o=a(d(9315300759)),f=d(5391134031),g=a(d(516529594));let S=s(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return p(this,void 0,void 0,function*(){const v=yield new Promise((y,_)=>{const C=this.context;C.turnCredentials=null;let T=s(class{cancel(){this.signalingClient.removeObserver(this),_(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(M){if(M.type===i.default.WebSocketClosed){let F=`The signaling connection was closed with code ${M.closeCode} and reason: ${M.closeReason}`;C.logger.warn(F);let V=n.default.SignalingBadRequest;M.closeCode===4410?(F="The meeting already ended.",C.logger.warn(F),V=n.default.MeetingEnded):M.closeCode>=4500&&M.closeCode<4600&&(V=n.default.SignalingInternalServerError),C.audioVideoController.handleMeetingSessionStatus(new r.default(V),new Error(F));return}if(M.type!==i.default.ReceivedSignalFrame)return;if(M.message.type===f.SdkSignalFrame.Type.JOIN_ACK){const F=M.message.joinack;if(!F){C.audioVideoController.handleMeetingSessionStatus(new r.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(F.videoSubscriptionLimit&&(C.videoSubscriptionLimit=F.videoSubscriptionLimit),C.serverSupportsCompression=F.wantsCompressedSdp,F.defaultServerSideNetworkAdaption!==void 0&&F.defaultServerSideNetworkAdaption!==t.default.Default&&C.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const V=F.defaultServerSideNetworkAdaption;C.logger.info(`Overriding server side network adaption value to ${V}`),C.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(V))}F&&F.turnCredentials?(C.turnCredentials=new e.default,C.turnCredentials.username=F.turnCredentials.username,C.turnCredentials.password=F.turnCredentials.password,C.turnCredentials.ttl=F.turnCredentials.ttl,C.turnCredentials.uris=F.turnCredentials.uris.map(V=>C.meetingSessionConfiguration.urls.urlRewriter(V)).filter(V=>!!V)):C.logger.error("missing TURN credentials in JoinAckFrame");return}if(M.message.type!==f.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const R=M.message.index;y(R)}constructor(M){this.signalingClient=M}},"IndexFrameInterceptor");const A=new T(this.context.signalingClient);this.context.signalingClient.registerObserver(A),this.taskCanceler=A,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const O=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(O.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),O.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(O.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),O.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(O)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},5110013894:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(426218501)),p=d(5391134031),a=h(d(516529594));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=s(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(g){if(g.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}g.type===m.default.ReceivedSignalFrame&&g.message.type===p.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(g,S){this.signalingClient=g,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=r},3708122413:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(426218501)),p=d(5391134031),a=h(d(516529594));let r=s(class extends a.default{run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===m.default.ReceivedSignalFrame){if(e.message.type===p.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===p.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=r},1504187181:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(_,C,T,A){function O(D){return D instanceof T?D:new T(function(M){M(D)})}return s(O,"adopt"),new(T||(T=Promise))(function(D,M){function R($){try{V(A.next($))}catch(X){M(X)}}s(R,"fulfilled");function F($){try{V(A.throw($))}catch(X){M(X)}}s(F,"rejected");function V($){$.done?D($.value):O($.value).then(R,F)}s(V,"step"),V((A=A.apply(_,C||[])).next())})},h=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(5147189764)),p=h(d(1847926377)),a=h(d(8929805428)),r=h(d(2115341037)),n=h(d(5928001672)),e=h(d(6005421222)),t=h(d(3777990285)),i=h(d(4882394368)),o=h(d(4883941895)),f=h(d(426218501)),g=d(5391134031),S=h(d(6392364773)),u=d(903520651),v=h(d(516529594));let y=s(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(C){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(C){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=C;return}else this.pendingMetricsReport=void 0;const T=C.getObservableMetrics(),A=T.availableOutgoingBitrate,O=T.nackCountReceivedPerSecond;let D=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(C);const M=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(D=D||M,M){const R=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=R.truncate(this.context.videoSubscriptionLimit),R.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${M}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:A/1e3,nackCountPerSecond:O});const R=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();D=D||R,R&&(this.logger.info(`trigger resubscribe for up=${R}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return D}metricsDidReceive(C){if(this.checkResubscribe(C)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const T=C.streamMetricReports,A=new Map;for(const O in T)T[O].mediaType===p.default.VIDEO&&T[O].direction===m.default.DOWNSTREAM&&A.set(T[O].streamId,T[O])}connectionHealthDidChange(C){C.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,C,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,C,()=>{var T;this.context.poorConnectionCount+=1;const A=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("receivingAudioDropped",A),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(O=>{u.Maybe.of(O.connectionDidSuggestStopVideo).map(D=>D.bind(O)())}):this.context.audioVideoController.forEachObserver(O=>{u.Maybe.of(O.connectionDidBecomePoor).map(D=>D.bind(O)())})},()=>{this.context.audioVideoController.forEachObserver(T=>{u.Maybe.of(T.connectionDidBecomeGood).map(A=>A.bind(T)())})});for(const T of this.videoEncodingHealthPolicies)this.applyHealthPolicy(T,C,()=>{switch(this.degradeVideoCodec(T.name),T.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,C,()=>{var T;const A=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioFailed",A)},()=>{var T;const A=this.generateBaseAudioVideoEventAttributes();(T=this.context.eventController)===null||T===void 0||T.publishEvent("sendingAudioRecovered",A)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(C){this.isMeetingConnected=!1}audioVideoDidStop(C){this.isMeetingConnected=!1}applyHealthPolicy(C,T,A,O){C.update(T);const D=C.healthIfChanged();D!==null&&(this.logger.info(`${C.name} value is now ${D}`),D<=C.minimumHealth()?u.Maybe.of(A).map(M=>M.bind(this)()):u.Maybe.of(O).map(M=>M.bind(this)()))}handleBitrateFrame(C){this.currentAvailableStreamAvgBitrates=C,C.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${C.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",C.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(C){var T;if(C.type===f.default.WebSocketClosed&&(C.closeCode===4410||C.closeCode>=4500&&C.closeCode<4600)||C.type===f.default.WebSocketError||C.type===f.default.WebSocketFailed){if(!this.hasSignalingError){const A=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(T=this.context.eventController)===null||T===void 0||T.publishEvent("signalingDropped",A),this.hasSignalingError=!0}}else C.type===f.default.WebSocketOpen&&(this.hasSignalingError=!1);if(C.type===f.default.ReceivedSignalFrame){if(C.message.type===g.SdkSignalFrame.Type.NOTIFICATION){switch(C.message.notification.level){case g.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${C.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${C.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${C.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${C.message.notification.level}: ${C.message.notification.message}`);break}return}if(C.message.bitrates){const O=C.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(O),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(C.message.bitrates)}const A=t.default.fromSignalFrame(C.message);C.message.type!==g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&A.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(A,null)}}degradeVideoCodec(C){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const T=[];for(const A of this.context.videoSendCodecPreferences)A.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||T.push(A);T.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${T[0].codecName} due to ${C}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=T,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(A=>A.codecName).join(",")}`)}}constructor(C,T,A){super(C.logger),this.context=C,this.initialConnectionHealthData=A,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=O=>{const D=O<1,M=this.prevSignalStrength<1,R=D?M?null:S.default.RedmicStartLoss:M?S.default.RedmicEndLoss:null;R&&this.context.statsCollector.logAudioEvent(R),this.prevSignalStrength=O},this.realtimeFatalErrorCallback=O=>{this.logger.error(`realtime error: ${O}: ${O.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),O)},this.realtimeAttendeeIdPresenceHandler=(O,D)=>{var M;const R=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${R}`),R===O&&D&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(M=this.context.eventController)===null||M===void 0||M.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:O,startTimeMs:D,iceGatheringDurationMs:M,attendeePresenceDurationMs:R,meetingStartDurationMs:F}=this.context;return{meetingDurationMs:D===null?0:Math.round(Date.now()-D),signalingOpenDurationMs:O,iceGatheringDurationMs:M,attendeePresenceDurationMs:R,meetingStartDurationMs:F}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const O=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},O),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(C.logger,Object.assign({},T),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},T),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new r.default(C.logger,Object.assign({},T),this.initialConnectionHealthData.clone());for(const O of T.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new O(Object.assign({},T),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=y},1992142375:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(h){}},"NoOpTask");l.default=d},2913368614:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3756404293)),m=c(d(3741513515));let p=s(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const r of this.dependencies)r.cancel();this.logger.info(`Canceling ${this.name()}`),m.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&m.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const r=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${r}`)}run(){if(this.promise)return this.promise;const r=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=r.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(r){this.task.setParent(r)}constructor(r,n,e){this.logger=r,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=p},6907504899:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(893025464)),p=h(d(426218501)),a=h(d(516529594));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new m.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let f=s(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(u){switch(u.type){case p.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case p.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(u){this.signalingClient=u}},"WebSocketOpenInterceptor");const g=new f(this.context.signalingClient);this.context.signalingClient.registerObserver(g),this.taskCanceler=g})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=r},6015743885:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(516529594));let p=s(class extends m.default{cancel(){for(const r of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${r.name()}`),r.cancel()}run(){return c(this,void 0,void 0,function*(){const r=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),r.push(e.run());const n=[];for(let e=0;e<r.length;e++){try{yield r[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(r,n,e){super(r),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=p},3627106901:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(7164668892),p=h(d(426218501)),a=d(5391134031),r=h(d(516529594));let n=s(class extends r.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=s(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===p.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(m.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,u,v){this.signalingClient=S,this.completionCallback=u,this.logger=v}},"Interceptor");const f=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=f,this.context.signalingClient.registerObserver(f)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=n},3151098372:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(516529594));let p=s(class extends m.default{run(){var r,n;return c(this,void 0,void 0,function*(){if(!(!((n=(r=this.context.meetingSessionConfiguration)===null||r===void 0?void 0:r.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(r){super(r.logger),this.context=r,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=p},9363406688:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(426218501)),p=d(5391134031),a=h(d(516529594));let r=s(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return c(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const i of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(i);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${i}`);continue}let f=this.context.videoTileController.getVideoTileForAttendeeId(o);f===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${i}. Creating new one.`),f=this.context.videoTileController.addVideoTile(),f.bindVideoStream(o,!1,null,0,0,0,null)),t.add(f.id())}this.serverPausedVideoTileIds.forEach(i=>{t.has(i)||this.serverPausedVideoTileIds.delete(i)})}handleSignalingClientEvent(e){if(e.type!==m.default.ReceivedSignalFrame||e.message.type!==p.SdkSignalFrame.Type.PAUSE&&e.message.type!==p.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.logger.info(`Received new ${i===p.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(f=>{const g=this.context.videoStreamIndex.attendeeIdForGroupId(f);if(g.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${f}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(g)});for(const f of o)f!==void 0&&(i===p.SdkSignalFrame.Type.PAUSE?f.state().paused||(this.serverPausedVideoTileIds.add(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBePausedByDownlinkPolicy(f.id())}),f.pause()):f.state().paused&&this.serverPausedVideoTileIds.has(f.id())&&(this.serverPausedVideoTileIds.delete(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBeUnpausedByDownlinkPolicy(f.id())}),f.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=r},6069988831:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4599834734)),p=d(5391134031),a=h(d(516529594));let r=s(class extends a.default{checkAndApplyVideoConstraint(e,t,i,o,f){return c(this,void 0,void 0,function*(){const g=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,i>S.videoWidth||o>S.videoHeight||f>S.videoFrameRate){const u={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(u)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(g)}`);try{yield t.applyConstraints(u)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return c(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===p.SdkStreamServiceType.RX||this.context.videoDuplexMode===p.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?p.SdkStreamServiceType.DUPLEX:p.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?p.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const f=this.context.meetingSessionConfiguration.credentials.attendeeId,g=new m.default(f).hasModality(m.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(g,o[0],S.width,S.height,S.frameRate);const u=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(f,!0,i,S.width,S.height,null,u);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=r},2452872079:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(o,f,g,S){function u(v){return v instanceof g?v:new g(function(y){y(v)})}return s(u,"adopt"),new(g||(g=Promise))(function(v,y){function _(A){try{T(S.next(A))}catch(O){y(O)}}s(_,"fulfilled");function C(A){try{T(S.throw(A))}catch(O){y(O)}}s(C,"rejected");function T(A){A.done?v(A.value):u(A.value).then(_,C)}s(T,"step"),T((S=S.apply(o,f||[])).next())})},h=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1880578541)),p=h(d(4599834734)),a=h(d(4883941895)),r=h(d(426218501)),n=d(5391134031),e=d(903520651),t=h(d(516529594));let i=s(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return c(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(f){if(f.type!==r.default.ReceivedSignalFrame||f.message.type!==n.SdkSignalFrame.Type.INDEX)return;const g=f.message.index;this.context.logger.info(`received new index ${JSON.stringify(g)}`),this.handleIndexFrame(g)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(f){if(!f)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=f;return}else this.pendingIndex=null;const g=this.context.audioVideoController.configuration.credentials.attendeeId;f.sources=f.sources.filter(C=>{const T=new p.default(C.attendeeId);return!(T.base()===g&&T.hasModality(p.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:u,videoUplinkBandwidthPolicy:v}=this.context,y=S.allVideoSendingSourcesExcludingSelf(g);S.integrateIndexFrame(f),u.updateIndex(S),v.updateIndex(S),this.resubscribe(u,v),this.updateVideoAvailability(f),this.handleIndexVideosPausedAtSource(),f.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(f);const _=S.allVideoSendingSourcesExcludingSelf(g);this.areVideoSourcesEqual(y,_)||this.context.audioVideoController.forEachObserver(C=>{e.Maybe.of(C.remoteVideoSourcesDidChange).map(T=>T.bind(C)(_))})}areVideoSourcesEqual(f,g){if(f.length!==g.length)return!1;const S=s((y,_)=>y.attendee.attendeeId.localeCompare(_.attendee.attendeeId),"compare"),u=[...f].sort(S),v=[...g].sort(S);for(let y=0;y<u.length;y++)if(u[y].attendee.attendeeId!==v[y].attendee.attendeeId)return!1;return!0}resubscribe(f,g){const S=f.wantsResubscribe(),u=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&g.wantsResubscribe(),v=S||u;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${u})`),!v)return;const y=f.chooseSubscriptions();this.context.videosToReceive=y.truncate(this.context.videoSubscriptionLimit),y.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=g.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${u} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(f){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const g=new m.default;g.remoteVideoAvailable=!this.context.videosToReceive.empty(),g.canStartLocalVideo=!f.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(g))&&(this.context.lastKnownVideoAvailability=g.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(u=>u.bind(S)(g.clone()))}))}handleSupportedVideoReceiveCodecIntersection(f){if(this.context.videoSendCodecPreferences===void 0)return;const g=[];let S=!1;for(const u of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>u.equals(v))){this.logger.info(`Skipping ${u.codecName} since the codec has been identfied as degraded`);continue}for(const v of f.supportedReceiveCodecIntersection)if(u.equals(a.default.fromSignaled(v))){g.push(u);break}}if(g.length>0){const u=g.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(y=>v.equals(y)));this.context.currentVideoSendCodec!==void 0&&(u===void 0||!this.context.currentVideoSendCodec.equals(u))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=g}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const f=this.context.videoStreamIndex.streamsPausedAtSource();for(const g of this.context.videoTileController.getAllVideoTiles()){const S=g.state();f.contain(S.streamId)?g.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):g.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(f){super(f.logger),this.context=f,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=i},6771673942:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(516529594));let m=s(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,r,n="RunnableTask"){super(a),this.fn=r,this.taskName=n}},"RunnableTask");l.default=m},2471283351:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(1766966835)),p=h(d(426218501)),a=d(5391134031),r=h(d(516529594));let n=s(class zh extends r.default{run(){return c(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===p.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new m.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!zh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>zh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,f)=>{if(this.context.signalingClient.ready()){let g;o instanceof Uint8Array?g=o:typeof o=="string"?g=new TextEncoder().encode(o):g=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,g,f);const S=a.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=f,S.data=g;const u=a.SdkDataMessageFrame.create();u.messages=[S],this.context.signalingClient.sendDataMessage(u)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},3894566132:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(516529594)),p=h(d(9293073193));let a=s(class extends m.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return c(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===p.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");l.default=a},6412210284:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8351168186)),p=h(d(4599834734)),a=h(d(3430379175)),r=h(d(516529594));let n=s(class extends r.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return c(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new a.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new a.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new m.default().requiresDisablingH264Encoding()&&(o=new a.default(o).removeH264SupportFromSendSection().sdp);const f=this.context.audioVideoController.configuration.credentials.attendeeId;if(new p.default(f).hasModality(p.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new a.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new a.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new a.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new a.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const u=new a.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(u)}this.logger.debug(()=>`local description is >>>${o}<<<`);const S={type:"offer",sdp:o,toJSON:null};yield new Promise((u,v)=>c(this,void 0,void 0,function*(){this.cancelPromise=y=>{v(y)};try{yield t.setLocalDescription(S),u()}catch(y){v(y)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=n},839180639:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(e,t,i,o){function f(g){return g instanceof i?g:new i(function(S){S(g)})}return s(f,"adopt"),new(i||(i=Promise))(function(g,S){function u(_){try{y(o.next(_))}catch(C){S(C)}}s(u,"fulfilled");function v(_){try{y(o.throw(_))}catch(C){S(C)}}s(v,"rejected");function y(_){_.done?g(_.value):f(_.value).then(u,v)}s(y,"step"),y((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4599834734)),p=h(d(3430379175)),a=h(d(4883941895)),r=h(d(516529594));let n=s(class extends r.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return c(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new p.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new p.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new p.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new p.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new p.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const f=this.context.activeVideoInput;if(f!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,u=new m.default(S).hasModality(m.default.MODALITY_CONTENT),v=f.getVideoTracks()[0];u&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const g={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(g)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>c(this,void 0,void 0,function*(){const f=s(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",f),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",f),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",f);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),f()}catch(g){o(g)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=n},2641934340:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(S,u,v,y){function _(C){return C instanceof v?C:new v(function(T){T(C)})}return s(_,"adopt"),new(v||(v=Promise))(function(C,T){function A(M){try{D(y.next(M))}catch(R){T(R)}}s(A,"fulfilled");function O(M){try{D(y.throw(M))}catch(R){T(R)}}s(O,"rejected");function D(M){M.done?C(M.value):_(M.value).then(A,O)}s(D,"step"),D((y=y.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(3777990285)),p=h(d(4882394368)),a=h(d(3430379175)),r=h(d(9675039205)),n=d(1448262436),e=h(d(426218501)),t=h(d(1026405281)),i=d(5391134031),o=d(6700033168),f=h(d(516529594));let g=s(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return c(this,void 0,void 0,function*(){let u="";if(this.context.peer&&this.context.peer.localDescription&&(u=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let D=0,M=0;this.context.videoCaptureAndEncodeParameter&&(D=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),M=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const R={rid:"hi",maxBitrate:M*1e3,maxFramerate:D,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([R])}const v=this.fixUpSubscriptionOrder(u,this.context.videoSubscriptions),y=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let _,C=u;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(C=new a.default(C).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const D=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";_=this.textCompressor.compress(C,D),this.context.logger.info(`Compressed the SDP message from ${C.length} to ${_.length} bytes.`),u=""}this.context.previousSdpOffer=new a.default(u);const T=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,u,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,y,this.context.videoStreamIndex.localStreamDescriptions(),!0,_);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(T.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(D=>D===0?0:this.context.videoStreamIndex.groupIdForStreamId(D)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(T)}`),this.context.signalingClient.subscribe(T);const A=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(A)}`);let O="";A.compressedSdpAnswer&&A.compressedSdpAnswer.length?(O=this.textCompressor.decompress(A.compressedSdpAnswer,this.context.previousSdpAnswerAsString),O.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${A.compressedSdpAnswer.length} to ${O.length} bytes.`),this.context.sdpAnswer=O):this.context.sdpAnswer=A.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(A)})}fixUpSubscriptionOrder(u,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const y=new Map;for(const T of v){const A=this.context.transceiverController.getMidForStreamId(T);if(A===void 0){T!==0&&this.logger.warn(`Could not find MID for stream ID: ${T}`);continue}y.set(A,T)}const _=new a.default(u).mediaSections(),C=[];for(const T of _)if(T.mediaType==="video")if(T.direction==="recvonly"){const A=y.get(T.mid);if(A===void 0){this.logger.warn(`Could not find stream ID for MID: ${T.mid}`);continue}C.push(A)}else C.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(C)} (may be same))}`),C}receiveSubscribeAck(){return new Promise((u,v)=>{const y=this.context;let _=s(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(A){if(A.isConnectionTerminated()){const D=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${A.closeCode} and reason: ${A.closeReason}`;y.logger.warn(D);let M=p.default.TaskFailed;A.closeCode>=4500&&A.closeCode<4600&&(M=p.default.SignalingInternalServerError),y.audioVideoController.handleMeetingSessionStatus(new m.default(M),new Error(D));return}if(A.type!==e.default.ReceivedSignalFrame||A.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const O=A.message.suback;u(O)}constructor(A){this.signalingClient=A}},"Interceptor");const C=new _(this.context.signalingClient);this.context.signalingClient.registerObserver(C),this.taskCanceler=C})}constructor(u){super(u.logger),this.context=u,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new r.default(u.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=g},9293073193:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.IDLE="IDLE",c.RUNNING="RUNNING",c.CANCELED="CANCELED",c.FINISHED="FINISHED"})(d||(d={})),l.default=d},3450261616:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6393942734)),p=h(d(516529594));let a=s(class extends p.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return c(this,void 0,void 0,function*(){const n=new m.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},7500181884:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4882394368)),p=h(d(516529594));let a=s(class extends p.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return c(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=s((o,f,g,S,u)=>{n===o&&f&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},6769427378:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(4999349075)),p=h(d(7894724558)),a=h(d(1510239283)),r=h(d(3440292739)),n=h(d(3741513515));let e=s(class{setEncodingParameters(i){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const f=Array.from(i.values()),g=o.getParameters();if(!g.encodings||g.encodings.length===0)g.encodings=f;else for(const S of g.encodings)for(const u of f){if((S.rid||u.rid)&&S.rid!==u.rid)continue;let v;for(v in u)v==="rid"||v==="codecPayloadType"||u.hasOwnProperty(v)&&(S[v]=u[v])}yield o.setParameters(g)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const f=o.getParameters();f.encodings||(f.encodings=[{}]);for(const g of f.encodings)g.maxBitrate=i*1e3;yield o.setParameters(f)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return c(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return c(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return c(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const f=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(f,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,f){const g=f.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,g)):i.length!==0&&this.updateTransceiverWithStop(i,o,g);for(const S of g){const u=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,u),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),u),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${u.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,f){let g=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let u=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[y,_]of f.entries())if(o.StreamIdsInSameGroup(v,_)){S.direction="recvonly",this.videoSubscriptions[g]=_,u=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(_,S),f.splice(y,1);break}}if(!u){this.videoSubscriptions[g]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[y,_]of this.streamIdToTransceiver.entries())S.mid===_.mid&&(this.streamIdToTransceiver.delete(y),this.groupIdToTransceiver.delete(o.groupIdForStreamId(y)))}g+=1}}updateTransceiverWithoutStop(i,o,f){let g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[g]=0,S.direction!=="inactive"){const u=o.streamIdForTrack("v_"+S.mid);if(u!==void 0){for(const[v,y]of f.entries())if(o.StreamIdsInSameGroup(u,y)){S.direction="recvonly",this.videoSubscriptions[g]=y,this.streamIdToTransceiver.delete(u),this.streamIdToTransceiver.set(y,S),f.splice(v,1);break}}}g+=1}g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&f.length>0){S.direction="recvonly";const u=f.shift();this.videoSubscriptions[g]=u,this.streamIdToTransceiver.set(u,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(u),S)}else if(this.videoSubscriptions[g]===0){S.direction="inactive";for(const[u,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(u),this.groupIdToTransceiver.delete(o.groupIdForStreamId(u)))}g+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[f,g]of this.streamIdToTransceiver.entries())if(g.mid===i){this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(o,g);return}}getMidForGroupId(i){var o,f;return(f=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&f!==void 0?f:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const f of this.peer.getTransceivers())this.transceiverIsVideo(f)&&(i+=`transceiver index=${o} mid=${f.mid} subscription=${this.videoSubscriptions[o]} direction=${f.direction}
`,o+=1);return i}setTransceiverInput(i,o){return c(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new m.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const f=!!window.RTCRtpScriptTransform,g=!!RTCRtpSender.prototype.createEncodedStreams;if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(g)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([r.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const u=new p.default;u.currentTimestampMs=Date.now(),u.ssrc=S.data.ssrc,u.totalAudioPacketsLost=S.data.totalAudioPacketsLost,u.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,u.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,u.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(u)}},f)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(g){const S=this._localAudioTransceiver.sender.createEncodedStreams(),u=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:u},[S.readable,S.writable,u.readable,u.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var f;const g=this.peer.addTransceiver(i,o);if(!(!((f=this.peer.getConfiguration())===null||f===void 0)&&f.encodedInsertableStreams)||!this.audioRedWorker)return g;const S=!!window.RTCRtpScriptTransform,u=!!RTCRtpSender.prototype.createEncodedStreams;if(S)g.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),g.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(u){const v=g.sender.createEncodedStreams(),y=g.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:y},[v.readable,v.writable,y.readable,y.writable])}return g}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,f=i.getRTCStatsReport();let g=0,S=0,u=0;f.forEach(A=>{A.kind==="audio"&&(A.type==="outbound-rtp"?S=A.packetsSent:A.type==="remote-inbound-rtp"&&(g=A.timestamp,u=A.packetsLost))}),(this.audioMetricsHistory.length===0||g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:g,totalPacketsSent:S,totalPacketsLost:u}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),y=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),_=Math.max(v,y),[C,T]=a.default.getNumRedundantEncodingsForPacketLoss(_);if(T){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const A=o-this.lastAudioRedTurnOffTimestampMs,O=o-this.lastHighPacketLossEventTimestampMs;if(A>=this.audioRedPacketLossLongEvalPeriodMs&&O<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,C)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:C})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,g=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const u=g-this.audioMetricsHistory[S].totalPacketsLost,v=f-this.audioMetricsHistory[S].totalPacketsSent,y=100*(u/v);return Math.max(0,Math.min(y,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,f){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=f,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},1438956810:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(2962876954));let p=s(class vu extends m.default{setEncodingParameters(r){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===m.default.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===m.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(r,n,e){super(r,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<vu.NAME_ARR_ASCENDING.length;i++){const o=vu.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:vu.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=p,p.NAME_ARR_ASCENDING=["low","hi"],p.BITRATE_ARR_ASCENDING=[300,1200]},2962876954:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6769427378));let p=s(class is extends m.default{setEncodingParameters(r){return c(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===is.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(is.LOW_LEVEL_NAME),i),i.rid===is.MID_LEVEL_NAME&&this.copyEncodingParams(r.get(is.MID_LEVEL_NAME),i),i.rid===is.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(is.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(r){return c(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var r,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(r,n){n.active=r.active,n.maxBitrate=r.maxBitrate,n.scaleResolutionDownBy=r.scaleResolutionDownBy,n.maxFramerate=r.maxFramerate}constructor(r,n,e){super(r,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<is.NAME_ARR_ASCENDING.length;i++){const o=is.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:is.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=p,p.LOW_LEVEL_NAME="low",p.MID_LEVEL_NAME="mid",p.HIGH_LEVEL_NAME="hi",p.NAME_ARR_ASCENDING=["low","mid","hi"],p.BITRATE_ARR_ASCENDING=[200,400,1100]},3052177122:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6769427378));let m=s(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,r,n){super(a,r,n)}},"VideoOnlyTransceiverController");l.default=m},246495600:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const c=d(5269429115);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=s(class{subscribeToTranscriptEvent(p){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const r of c.TranscriptEventConverter.from(a))for(const n of this.transcriptEventCallbacks)n(r)}),this.transcriptEventCallbacks.add(p)}unsubscribeFromTranscriptEvent(p){this.transcriptEventCallbacks.delete(p),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(p){this.realtimeController=p,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},9138893973:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"Transcript");l.default=d},866659076:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptAlternative");l.default=d},7538060970:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptEntity");l.default=d},5269429115:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=d(5391134031),m=c(d(9138893973)),p=c(d(2461374283)),a=c(d(3798201443)),r=c(d(2024984314)),n={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=s(class{static from(i){let o;try{o=h.SdkTranscriptFrame.decode(i.data)}catch(g){throw new Error("Cannot decode transcript data message: "+g)}const f=[];for(const g of o.events)if(g.status){const S=n[g.status.type];if(!S)continue;const u=new p.default;u.type=S,u.eventTimeMs=g.status.eventTime,u.transcriptionRegion=g.status.transcriptionRegion,u.transcriptionConfiguration=g.status.transcriptionConfiguration,g.status.message&&(u.message=g.status.message),f.push(u)}else if(g.transcript){const S=new m.default;S.results=[];for(const u of g.transcript.results){const v={channelId:u.channelId,isPartial:u.isPartial,resultId:u.resultId,startTimeMs:u.startTime,endTimeMs:u.endTime,alternatives:[]};if(u.languageCode&&(v.languageCode=u.languageCode),u.languageIdentification&&u.languageIdentification.length>0){v.languageIdentification=[];for(const y of u.languageIdentification){const _={languageCode:y.languageCode,score:y.score};v.languageIdentification.push(_)}}for(const y of u.alternatives){const _={items:[],transcript:y.transcript};for(const C of y.items){const T={content:C.content,attendee:{attendeeId:C.speakerAttendeeId,externalUserId:C.speakerExternalUserId},startTimeMs:C.startTime,endTimeMs:C.endTime,type:null};switch(C.vocabularyFilterMatch&&(T.vocabularyFilterMatch=C.vocabularyFilterMatch),C.hasOwnProperty("stable")&&(T.stable=C.stable),C.hasOwnProperty("confidence")&&(T.confidence=C.confidence),C.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:T.type=r.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:T.type=r.default.PUNCTUATION;break}_.items.push(T)}for(const C of y.entities){_.entities||(_.entities=[]);const T={category:C.category,confidence:C.confidence,content:C.content,startTimeMs:C.startTime,endTimeMs:C.endTime};C.type&&(T.type=C.type),_.entities.push(T)}v.alternatives.push(_)}S.results.push(v)}f.push(S)}return f}},"TranscriptEventConverter");l.TranscriptEventConverter=e},3531434754:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptItem");l.default=d},2024984314:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.PRONUNCIATION="pronunciation",c.PUNCTUATION="punctuation"})(d||(d={})),l.default=d},9584814027:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptLanguageWithScore");l.default=d},3443368328:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptResult");l.default=d},2461374283:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"TranscriptionStatus");l.default=d},3798201443:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(c){c.STARTED="started",c.INTERRUPTED="interrupted",c.RESUMED="resumed",c.STOPPED="stopped",c.FAILED="failed"})(d||(d={})),l.default=d},3564840480:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(888724265),m=c(d(8066052849));let p=s(class wa{getParserResult(){var r,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((r=this.parserResult)===null||r===void 0?void 0:r.os.name)||wa.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||wa.UNAVAILABLE,sdkVersion:m.default.sdkVersion,sdkName:m.default.sdkName}}constructor(r){var n,e,t,i,o,f,g;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(S){r.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||wa.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||wa.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||wa.UNAVAILABLE,this.deviceName=[((f=this.parserResult)===null||f===void 0?void 0:f.device.vendor)||"",((g=this.parserResult)===null||g===void 0?void 0:g.device.model)||""].join(" ").trim()||wa.UNAVAILABLE}},"DefaultUserAgentParser");l.default=p,p.UNAVAILABLE="Unavailable"},2997222898:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{add(h){return new Promise((m,p)=>{this.queue=this.queue.then(h).then(m).catch(p)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=d},903520651:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let d=s(class{static of(p){return p==null?h.of():c.of(p)}},"Maybe");l.Maybe=d;let c=s(class MS{map(p){return d.of(p(this.value))}flatMap(p){return p(this.value)}get(){return this.value}getOrElse(p){return this.value}defaulting(p){return d.of(this.getOrElse(p))}static of(p){if(p==null)throw new Error("value is ${value}");return new MS(p)}constructor(p){this.value=p,this.isSome=!0,this.isNone=!1}},"Some");l.Some=c;let h=s(class yu{get(){throw new Error("value is null")}getOrElse(p){return p}map(p){return new yu}flatMap(p){return new yu}defaulting(p){return d.of(this.getOrElse(p))}static of(){return new yu}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=h},840544383:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=c(d(8066052849));function m(t){return new Promise(i=>setTimeout(i,t))}s(m,"wait"),l.wait=m;function p(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}s(p,"isIFramed"),l.isIFramed=p;function a(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(a):Object.keys(t).reduce((i,o)=>{const f=t[o],g=typeof f=="object"?a(f):f;return i[o.toLowerCase()]=g,i},{})}s(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function r(){const t=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}s(r,"getDefaultAssetSpec"),l.getDefaultAssetSpec=r;function n(t){const i=Math.abs(t),o=t<=0?"+":"-",f=Math.floor(i/60).toString().padStart(2,"0"),g=Math.floor(i%60).toString().padStart(2,"0");return`${o}${f}:${g}`}s(n,"getFormattedOffset"),l.getFormattedOffset=n;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}s(e,"getRandomValues"),l.getRandomValues=e},8066052849:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8351168186)),m=c(d(9778296323));let p=s(class Nc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return m.default.semverString}static get sdkVersionSemVer(){var r,n,e,t;const i=m.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(r=i==null?void 0:i.groups)===null||r===void 0?void 0:r.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return m.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const r=new h.default;return`${r.name()}-${r.majorVersion()}`}static urlWithVersion(r){const n=new URL(r);return n.searchParams.append(Nc.X_AMZN_VERSION,Nc.sdkVersion),n.searchParams.append(Nc.X_AMZN_USER_AGENT,Nc.sdkUserAgentLowResolution),n.toString()}},"Versioning");l.default=p,p.X_AMZN_VERSION="X-Amzn-Version",p.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},9778296323:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"d7eee1f",raw:"v3.23.0",semverString:"3.23.0"}},8261422434:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class RS{equal(h){let m=h.captureWidth()===this.cameraWidth&&h.captureHeight()===this.cameraHeight&&h.captureFrameRate()===this.cameraFrameRate&&h.encodeBitrates().length===this.encodeBitrates().length&&h.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&h.encodeWidths().length===this.encodeWidths().length&&h.encodeHeights().length===this.encodeHeights().length&&h.isSVCEncoding()===this.isSVC;if(m){for(let p=0;p<h.encodeWidths().length;p++)if(h.encodeWidths()[p]!==this.encodeWidths()[p]||h.encodeHeights()[p]!==this.encodeHeights()[p]||h.encodeBitrates()[p]!==this.encodeBitrates()[p]||h.encodeScaleResolutionDownBy()[p]!==this.encodeScaleResolutionDownBy()[p])return m=!1,m}return m}clone(){return new RS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(h,m,p,a,r,n=1,e=!1){this.cameraWidth=h,this.cameraHeight=m,this.cameraFrameRate=p,this.maxEncodeBitrateKbps=a,this.isSimulcast=r,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=d},7744958188:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5134603106));let m=s(class PS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const r=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return r;const n=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const f of t)n.contain(f.streamId)&&i.set(f.attendeeId,f);let o=0;for(const f of e){const g=f.attendee.attendeeId;if(i.has(g)){const S=i.get(g);if(o+S.maxBitrateKbps<=PS.maxReceiveBitrateKbps)r.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return r}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=m,m.maxReceiveBitrateKbps=15e3},9248911078:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(5134603106));let m=s(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=m},6110401981:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var d;(function(c){c[c.Low=0]="Low",c[c.Medium=1]="Medium",c[c.High=2]="High",c[c.Maximum=3]="Maximum"})(d=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=d},1437705752:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(3560634922)),m=c(d(1448262436)),p=c(d(7981698535)),a=d(6700033168),r=c(d(6313276823)),n=c(d(9837586225));let e=s(class kS extends r.default{static createConfig(){const i=new n.default;return i.serverSideNetworkAdaption=m.default.None,i}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(i){super.updateIndex(i);const o=a.VideoPreferences.prepare();let f=!1;const g=i.remoteStreamDescriptions();for(const S of g)o.some(u=>u.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(h.default.Modality)?(o.add(new p.default(S.attendeeId,1)),f=!0):o.add(new p.default(S.attendeeId,2)));f?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(i){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(i){super(i,kS.createConfig()),this.logger=i,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},7981698535:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(6110401981)),m=c(d(5116495551));let p=s(class jl{partialCompare(r){return this.priority-r.priority}equals(r){return this.attendeeId===r.attendeeId&&this.targetSize===r.targetSize&&this.priority===r.priority&&this.degradationPreference===r.degradationPreference}clone(){return new jl(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(r){switch(r){case h.default.Maximum:return jl.MAXIMUM_BITRATE_KBPS;case h.default.High:return jl.HIGH_BITRATE_KBPS;case h.default.Medium:return jl.MID_BITRATE_KBPS;case h.default.Low:return jl.LOW_BITRATE_KBPS}}constructor(r,n,e,t){this.attendeeId=r,this.priority=n,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:m.default.Balanced}},"VideoPreference");l.default=p,p.LOW_BITRATE_KBPS=300,p.MID_BITRATE_KBPS=600,p.HIGH_BITRATE_KBPS=1500,p.MAXIMUM_BITRATE_KBPS=1e4},6700033168:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=c(d(4983545831));function m(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,f=new Map,g=new Map;for(const S of t){const u=e.transceiverController.getMidForGroupId(S);if(u===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);f.set(v,u),g.set(v,S)}for(const S of i){const u=new h.default,v=f.get(S.attendeeId);v!==void 0&&(u.mid=v,u.attendeeId=S.attendeeId,u.groupId=g.get(S.attendeeId),u.priority=Number.MAX_SAFE_INTEGER-S.priority,u.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),u.qualityAdaptationPreference=S.degradationPreference,o.push(u))}return o}s(m,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=m;let p=s(class $h{static default(){return new $h([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new $h([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=s(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new p){this.items=t,this.copied=!1}},"SetBuilder"),r=s(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=r;let n=s(class Kh{static prepare(){return new r(new a)}static default(){return new Kh(p.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new r(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Kh.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=n,l.default=n},6313276823:function(x,l,d){"use strict";var c=this&&this.__createBinding||(Object.create?function(A,O,D,M){M===void 0&&(M=D),Object.defineProperty(A,M,{enumerable:!0,get:function(){return O[D]}})}:function(A,O,D,M){M===void 0&&(M=D),A[M]=O[D]}),h=this&&this.__setModuleDefault||(Object.create?function(A,O){Object.defineProperty(A,"default",{enumerable:!0,value:O})}:function(A,O){A.default=O}),m=this&&this.__importStar||function(A){if(A&&A.__esModule)return A;var O={};if(A!=null)for(var D in A)D!=="default"&&Object.prototype.hasOwnProperty.call(A,D)&&c(O,A,D);return h(O,A),O},p=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(l,"__esModule",{value:!0});const a=p(d(4846700713)),r=p(d(5147189764)),n=p(d(1847926377)),e=p(d(3560634922)),t=d(3756404293),i=m(d(1448262436)),o=p(d(2551170247)),f=p(d(5134603106)),g=p(d(7744958188)),S=p(d(6110401981)),u=p(d(7981698535)),v=d(6700033168),y=p(d(9837586225)),_=p(d(5116495551));let C=s(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),T=s(class _r{reset(){this.allHighestPolicy=new g.default(""),this.optimalReceiveSet=new f.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new f.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new f.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=_r.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=_r.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new C,this.prevDownlinkStats=new C,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(O){this.tileController=O,this.logger.info("tileController bound")}setWantsResubscribeObserver(O){this.wantsResubscribeObserver=O}chooseRemoteVideoSources(O){var D;if(!(!((D=this.videoPreferences)===null||D===void 0)&&D.equals(O))){if(this.videoPreferences=O==null?void 0:O.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const M=new Array;for(const R of this.videoPreferences){const F=new o.default;F.attendee=new a.default,F.attendee.attendeeId=R.attendeeId,M.push(F)}this.allHighestPolicy.chooseRemoteVideoSources(M);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(O)}`)}}updateIndex(O){this.videoIndex=O,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(O),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const O=new Set;for(const F of this.videoIndex.remoteStreamDescriptions())O.add(F.attendeeId);const D=v.VideoPreferences.prepare(),M=O.size;let R=S.default.Maximum;M>8?R=S.default.Low:M>4&&(R=S.default.Medium);for(const F of O)D.add(new u.default(F,1,R));this.defaultVideoPreferences=D.build()}updateMetrics(O){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new C;const D=O.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=D.availableIncomingBitrate/1e3;for(const M in O.streamMetricReports){const R=Number.parseInt(M,10),F=O.streamMetricReports[R];F.direction===r.default.DOWNSTREAM&&F.mediaType===n.default.VIDEO&&(F.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=O.countPerSecond("nackCount",R)),F.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=O.countPerSecond("packetsLost",R)),F.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=O.bitsPerSecond("bytesReceived",R)/1e3))}}wantsResubscribe(){let O=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(O||(O=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?O||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),O||(O=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),O)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(O){this.observerQueue.add(O)}removeObserver(O){this.observerQueue.delete(O)}forEachObserver(O){for(const D of this.observerQueue)O(D)}setVideoPriorityBasedPolicyConfigs(O){this.videoPriorityBasedPolicyConfig=O}calculateOptimalReceiveStreams(){var O;const D=[],M=this.videoIndex.remoteStreamDescriptions();if(M.length===0||!((O=this.videoPreferences)===null||O===void 0)&&O.isEmpty()){this.optimalReceiveStreams=[];return}const R=this.rateProbeState;this.cleanBwPausedTiles(M),this.handleAppPausedStreams(D,M);const F=new Map;for(const We of this.getCurrentVideoPreferences())F.set(We.attendeeId,We);const V=M.filter(We=>F.has(We.attendeeId)),$=!this.streamsWithPreferenceDidChange(V),X=!this.startupPeriod&&$;if(X&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;V.sort((We,Ze)=>We.maxBitrateKbps===Ze.maxBitrateKbps?We.streamId-Ze.streamId:We.maxBitrateKbps-Ze.maxBitrateKbps);for(const We of V)(We.avgBitrateKbps===0||We.avgBitrateKbps>We.maxBitrateKbps)&&(We.attendeeId.endsWith(e.default.Modality)&&We.maxBitrateKbps<100?We.maxBitrateKbps=We.avgBitrateKbps:We.avgBitrateKbps=We.maxBitrateKbps);const Y=new Set;for(const We of this.getCurrentVideoPreferences()){const Ze=V.filter(Pe=>Pe.attendeeId===We.attendeeId);if(Ze.length<3)continue;let ft=15,vt=320*480;Ze.forEach(Pe=>{ft=Math.max(ft,Pe.maxFrameRate),vt=Math.max(vt,Pe.totalPixels())}),Ze.sort((Pe,Ke)=>{if(We.degradationPreference===_.default.MaintainResolution)return Math.abs(Pe.maxFrameRate-Ke.maxFrameRate)<2?Pe.totalPixels()-Ke.totalPixels():Pe.maxFrameRate-Ke.maxFrameRate;if(We.degradationPreference===_.default.MaintainFramerate)return Pe.totalPixels()===Ke.totalPixels()?Pe.maxFrameRate-Ke.maxFrameRate:Pe.totalPixels()-Ke.totalPixels();{const Ct=s(At=>At.avgBitrateKbps*Math.pow(2,5*At.maxFrameRate/ft*Math.pow(4,At.totalPixels()/vt)),"weighByFramerate");return Ct(Pe)-Ct(Ke)}});let De;for(const Pe of Ze){if(De!==void 0&&(Pe.maxFrameRate<De.maxFrameRate&&Math.abs(De.maxFrameRate-Pe.maxFrameRate)>2||Pe.totalPixels()<De.totalPixels())){Y.add(Pe.streamId);continue}De=Pe}}const ne=V.filter(We=>!Y.has(We.streamId));this.logger.info(`Filtered to ${JSON.stringify(ne)}`);const ie={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ie.targetDownlinkBitrate=this.determineTargetRate();const pe=this.subscribedReceiveSet.size(),Ee=this.downlinkStats.bandwidthEstimateKbps,Be=!this.videoPriorityBasedPolicyConfig.allowSubscribe(pe,Ee);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=_r.MIN_TIME_BETWEEN_SUBSCRIBE_MS,X&&Be))return;const it=this.priorityPolicy(ie,ne,D),Ce=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Me=0;if(!Ce&&!this.startupPeriod&&$?this.rateProbeState==="Probing"?Me=this.handleProbe(D,ie.targetDownlinkBitrate):ie.deltaToNextUpgrade!==0&&(Me=this.maybeOverrideOrProbe(D,ie,it)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=V,this.videoPreferencesUpdated=!1,Me===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ie.targetDownlinkBitrate;return}if(Me===2){const We=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(V,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+We);return}this.optimalNonPausedReceiveStreams=D.slice();const je=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(V,D),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==R||this.optimalReceiveStreams.length!==D.length||je!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(M,ie.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ie.targetDownlinkBitrate,this.optimalReceiveStreams=D.slice()}calculateOptimalReceiveSet(){const O=new f.default;this.calculateOptimalReceiveStreams();for(const D of this.optimalReceiveStreams)O.add(D.streamId);if(!this.optimalReceiveSet.equal(O)){const D=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(O)} subscribedRate:${D}`)}this.optimalReceiveSet=O}determineTargetRate(){let O=0;const D=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=D),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>_r.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||D-this.firstEstimateTimestamp>_r.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?O=_r.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<_r.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),O=this.downlinkStats.usedBandwidthKbps+_r.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):O=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?O=_r.DEFAULT_BANDWIDTH_KBPS:O=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-_r.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*_r.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,O=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,O>15e3&&this.logger.warn("bwe: "+O+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(O,15e3)}setProbeState(O){if(this.rateProbeState===O)return!1;const D=Date.now();switch(O){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||D-this.lastProbeTimestamp>_r.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=D;else return!1;break;case"Probing":if(D-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=D,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,_r.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+O+" from "+this.rateProbeState),this.rateProbeState=O,!0}upgradeToStream(O,D){for(let M=0;M<O.length;M++)if(O[M].groupId===D.groupId){const R=D.avgBitrateKbps-O[M].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(O[M])+" to "+D),this.lastUpgradeRateKbps=R,O[M]=D,R}return O.push(D),this.lastUpgradeRateKbps=D.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(O,D){if(Date.now()-this.lastProbeTimestamp>_r.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>_r.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(_r.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const M=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(O)||D>M?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=_r.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(O,D,M){const R=this.chosenStreamsSameAsLast(O);let F=0;const V=D.targetDownlinkBitrate>_r.LOW_BITRATE_THRESHOLD_KBPS?_r.TARGET_RATE_CHANGE_TRIGGER_PERCENT:_r.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,$=D.targetDownlinkBitrate*V/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!R&&Math.abs(D.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<$?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),F=1):this.targetRateBaselineForDeltaCheckKbps=D.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,F;if(R||F===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(O,M),F=0);break}else this.setProbeState("Not Probing");return F}calculateSubscribeRate(O){let D=0;for(const M of O)!this.pausedStreamIds.contain(M.streamId)&&!this.pausedBwAttendeeIds.has(M.attendeeId)&&(D+=M.maxBitrateKbps);return D}handleAppPausedStreams(O,D){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new f.default;const M=this.tileController.getAllRemoteVideoTiles();for(const R of M){const F=R.state();if(F.paused&&!this.pausedBwAttendeeIds.has(F.boundAttendeeId)){let V=D.length;for(;V--;)D[V].attendeeId===F.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+F.boundAttendeeId+" streamId: "+D[V].streamId),this.pausedStreamIds.add(D[V].streamId),this.subscribedReceiveSet.contain(D[V].streamId)&&O.push(D[V]),D.splice(V,1))}}}processBwPausedStreams(O,D){if(!this.tileController){this.logger.warn("tileController not found!");return}const M=this.getCurrentVideoPreferences();if(M&&this.shouldPauseTiles){const R=this.tileController.getAllVideoTiles();for(const F of M){const V=this.getVideoTileForAttendeeId(F.attendeeId,R),$=(V==null?void 0:V.state().paused)||!1;if(D.some(X=>X.attendeeId===F.attendeeId))$&&this.pausedBwAttendeeIds.has(F.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBeUnpausedByDownlinkPolicy(V.id())}),this.tileController.unpauseVideoTile(V.id()),this.pausedBwAttendeeIds.delete(F.attendeeId));else{const X=O.some(Y=>Y.attendeeId===F.attendeeId);if(V&&X){const Y=this.optimalReceiveStreams.find(ne=>ne.attendeeId===F.attendeeId);Y!==void 0&&($||(this.logger.info(`bwe: pausing streamId ${Y.streamId} attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(V.id())}),this.tileController.pauseVideoTile(V.id())),D.push(Y)),this.pausedBwAttendeeIds.add(F.attendeeId)}else if(X){const Y=this.tileController.addVideoTile();Y.bindVideoStream(F.attendeeId,!1,null,0,0,0,null),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(Y.id())}),Y.pause(),this.logger.info(`bwe: Created video tile ${Y.id()} for bw paused attendee ${F.attendeeId}`),this.pausedBwAttendeeIds.add(F.attendeeId)}}}}}cleanBwPausedTiles(O){if(!this.tileController){this.logger.warn("tileController not found!");return}const D=this.tileController.getAllRemoteVideoTiles(),M=this.getCurrentVideoPreferences();for(const R of D){const F=R.state();F.boundVideoStream||(O.some(V=>V.attendeeId===F.boundAttendeeId)?M!==void 0&&!M.some(V=>V.attendeeId===F.boundAttendeeId)&&this.tileController.removeVideoTile(F.tileId):(this.tileController.removeVideoTile(F.tileId),this.logger.info(`bwe: Removed video tile ${F.tileId} for bw paused attendee ${F.boundAttendeeId}`)))}}priorityPolicy(O,D,M){let R;const F=this.getCurrentVideoPreferences(),V=F.highestPriority();let $,X=V;for(;X!==-1;){$=-1;for(const Y of F)if(Y.priority===X)for(const ne of D)ne.attendeeId===Y.attendeeId&&(M.some(ie=>ie.groupId===ne.groupId)||(O.chosenTotalBitrate+ne.avgBitrateKbps<=O.targetDownlinkBitrate?(M.push(ne),O.chosenTotalBitrate+=ne.avgBitrateKbps):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=ne.avgBitrateKbps,R=ne)));else if(Y.priority>X){$=Y.priority;break}for(const Y of F)if(Y.priority===X){for(const ne of D)if(ne.attendeeId===Y.attendeeId){const ie=M.findIndex(pe=>pe.groupId===ne.groupId&&pe.maxBitrateKbps<=ne.maxBitrateKbps&&pe.avgBitrateKbps<ne.avgBitrateKbps);if(ie!==-1){const pe=ne.avgBitrateKbps-M[ie].avgBitrateKbps;this.hasSimulcastStreams(D,ne.attendeeId,ne.groupId)&&this.canUpgrade(ne.avgBitrateKbps,Y.targetSize,Y.targetSizeToBitrateKbps(Y.targetSize),ne.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${ne.attendeeId} group: ${ne.groupId} has simulcast and can upgrade avgBitrate: ${ne.avgBitrateKbps} target: ${Y.targetSizeToBitrateKbps(Y.targetSize)} targetTotalBitrate: ${O.targetDownlinkBitrate}`),O.chosenTotalBitrate+pe<=O.targetDownlinkBitrate?(O.chosenTotalBitrate+=pe,M[ie]=ne):O.deltaToNextUpgrade===0&&(O.deltaToNextUpgrade=pe,R=ne)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(Y.priority>X)break;if(X===V&&O.deltaToNextUpgrade!==0)break;X=$}return R}getVideoTileForAttendeeId(O,D){for(const M of D)if(M.state().boundAttendeeId===O)return M;return null}canUpgrade(O,D,M,R){let F=!1;return(D===S.default.High||!R&&O<=M||R&&D===S.default.Medium&&O<=M)&&(F=!0),F?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${O} targetBitrateKbps: ${M}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${O} targetBitrateKbps: ${M}`),!1)}hasSimulcastStreams(O,D,M){let R=0;for(const F of O)F.attendeeId===D&&F.groupId===M&&R++;return this.logger.info(`bwe: attendeeId: ${D} groupId: ${M} hasSimulcastStreams: streamCount: ${R}`),R>1}streamsWithPreferenceDidChange(O){if(this.previousStreamsWithPreference===void 0||O.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const D of O)if(this.previousStreamsWithPreference.find(R=>R.groupId===D.groupId&&R.streamId===D.streamId&&R.maxBitrateKbps===D.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(O){if(this.optimalNonPausedReceiveStreams.length!==O.length)return!1;for(const D of this.optimalNonPausedReceiveStreams)if(!O.some(M=>M.streamId===D.streamId))return!1;return!0}policyStateLogStr(O,D){const M=this.calculateSubscribeRate(this.optimalReceiveStreams),R={targetBitrate:D,subscribedRate:M,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let F="remoteInfos: [";for(const $ of O)F+=`{grpId:${$.groupId} strId:${$.streamId} maxBr:${$.maxBitrateKbps} avgBr:${$.avgBitrateKbps}}, `;F+="]";let V=`bwe: optimalReceiveSet ${JSON.stringify(R)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${F}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(V+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?V+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:V+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,V}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(O){this.serverSideNetworkAdaption=O,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let O=this.getCurrentVideoPreferences();return O||(O=v.VideoPreferences.prepare().build()),O}wantsAllTemporalLayersInIndex(){return!0}constructor(O,D=y.default.Default){this.logger=O,this.videoPriorityBasedPolicyConfig=D,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===i.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=i.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=T,T.DEFAULT_BANDWIDTH_KBPS=2800,T.STARTUP_PERIOD_MS=6e3,T.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,T.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,T.LOW_BITRATE_THRESHOLD_KBPS=300,T.MIN_TIME_BETWEEN_PROBE_MS=5e3,T.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,T.MAX_HOLD_BEFORE_PROBE_MS=3e4,T.MAX_ALLOWED_PROBE_TIME_MS=6e4,T.SPURIOUS_PACKET_LOST_THRESHOLD=2,T.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},9837586225:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1448262436));let m=s(class Lc{allowSubscribe(a,r){let n=0;const e=this.currentNetworkEvent;if(r>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=r,!0;if(r<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=r,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,r){let n=Lc.MINIMUM_DELAY_MS;const e=Lc.MAXIMUM_DELAY_MS-Lc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:n+=e*t*(1+r/10),n=Math.min(Lc.MAXIMUM_DELAY_MS,n);break}return n}constructor(a=0,r=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=r,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.BandwidthProbingAndRemoteVideoQualityAdaption,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,r<0?r=0:r>1&&(r=1),this.networkIssueRecoveryDelayFactor=r}},"VideoPriorityBasedPolicyConfig");l.default=m,m.MINIMUM_DELAY_MS=2e3,m.MAXIMUM_DELAY_MS=8e3,m.Default=new m(0,0),m.UnstableNetworkPreset=new m(0,1),m.StableNetworkPreset=new m(1,0)},5116495551:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var d;(function(c){c[c.Balanced=0]="Balanced",c[c.MaintainFramerate=1]="MaintainFramerate",c[c.MaintainResolution=2]="MaintainResolution"})(d=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=d},8481249111:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{create(){const h={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{h.paused=!0},play:()=>(h.paused=!1,Promise.resolve())};return h}},"NoOpVideoElementFactory");l.default=d},6672418579:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return d(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=c},7145536260:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(6672418579)),p=h(d(1902736443)),a=15;let r=s(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return c(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return c(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new m.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new p.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>c(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const f=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let g=[];g.push(this.sourceBuffers[0]);try{for(const T of this.processors)g=yield T.process(g)}catch{this.forEachObserver(A=>{A.processingDidFailToStart&&A.processingDidFailToStart()});return}this.destBuffers=g;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(A=>{A.processingDidFailToStart&&A.processingDidFailToStart()}));return}const u=S.width,v=S.height;u!==0&&v!==0&&(this.canvasOutput.width!==u&&this.canvasOutput.height!==v&&(this.canvasOutput.width=u,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,u,v,0,0,u,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(T=>{T.processingDidStart&&T.processingDidStart()})));const y=performance.now()-f,_=1e3*2/this.framerate-y,C=Math.max(0,1e3/this.framerate-y);_<=0&&this.forEachObserver(T=>{T.processingLatencyTooHigh&&T.processingLatencyTooHigh(y)}),yield this.timer.start(C,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");l.default=r},1902736443:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,p){return d(this,void 0,void 0,function*(){this.callback=p,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return d(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=c},5709738441:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8351168186)),p=h(d(7145536260));let a=s(class NS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new NS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return c(this,void 0,void 0,function*(){return this.device})}transformStream(n){return c(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return c(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}constructor(n,e,t,i=new m.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new p.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},7000795223:function(x,l){"use strict";var d=this&&this.__awaiter||function(h,m,p,a){function r(n){return n instanceof p?n:new p(function(e){e(n)})}return s(r,"adopt"),new(p||(p=Promise))(function(n,e){function t(f){try{o(a.next(f))}catch(g){e(g)}}s(t,"fulfilled");function i(f){try{o(a.throw(f))}catch(g){e(g)}}s(i,"rejected");function o(f){f.done?n(f.value):r(f.value).then(t,i)}s(o,"step"),o((a=a.apply(h,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let c=s(class{process(m){return d(this,void 0,void 0,function*(){return m})}destroy(){return d(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=c},2887752350:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let d=s(class{getPromise(){return this.promise}resolvePromise(h){this.resolve(h)}resolveAndReplacePromise(h){this.resolve(h),this.promise=new Promise((m,p)=>{this.resolve=m,this.reject=p})}rejectPromise(h){this.reject(h)}rejectAndReplacePromise(h){this.reject(h),this.promise=new Promise((m,p)=>{this.resolve=m,this.reject=p})}constructor(){this.promise=new Promise((h,m)=>{this.resolve=h,this.reject=m})}},"DeferredPromise");l.DeferredPromise=d},8023592660:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(p,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}s(o,"fulfilled");function f(S){try{g(n.throw(S))}catch(u){i(u)}}s(f,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,f)}s(g,"step"),g((n=n.apply(p,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=d(5513317584);let m=s(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return c(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const r=document.createElement("canvas");r.width=this.streamParameters.width,r.height=this.streamParameters.height,r.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return c(this,void 0,void 0,function*(){const r=a.backgroundReplacement.backgroundImageURL,n=a.backgroundReplacement.defaultColor;if(r)try{const e=yield this.loadImage(r);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}resizeAndSetReplacementColor(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.fillStyle=a,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}loadImage(a){return c(this,void 0,void 0,function*(){const n=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(a,r){this.streamParameters=a,this.outputCanvas=r,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=m},5513317584:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const d="/ml_media_fx/otherassets";l.WORKER_PATH=`${d}/worker.js`,l.FXLIB_PATH=`${d}/fxlib.js`},2403769553:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(v,y,_,C){function T(A){return A instanceof _?A:new _(function(O){O(A)})}return s(T,"adopt"),new(_||(_=Promise))(function(A,O){function D(F){try{R(C.next(F))}catch(V){O(V)}}s(D,"fulfilled");function M(F){try{R(C.throw(F))}catch(V){O(V)}}s(M,"rejected");function R(F){F.done?A(F.value):T(F.value).then(D,M)}s(R,"step"),R((C=C.apply(v,y||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const m=d(4179955699),p=d(6582301018),a=d(8113008952),r=h(d(8351168186)),n=h(d(7338764361)),e=d(840544383),t=h(d(8066052849)),i=h(d(6672418579)),o=d(2887752350),f=d(8023592660),g=d(5513317584),S=d(615959602);let u=s(class zl{process(y){return c(this,void 0,void 0,function*(){return y})}fxProcess(y){return c(this,void 0,void 0,function*(){const _=y[0].asCanvasElement();this.didStreamParametersChange(_)&&(yield this.adjustProcessorForNewStreamParameters(_));try{yield this.manageSegmentationMask(_)}catch(C){throw this.logger.error(C),new Error("Video stream could not be processed")}return yield this.renderer.render(_,this.segmentationMask),y[0]=this.canvasVideoFrameBuffer,y})}noOpProcess(y){return c(this,void 0,void 0,function*(){return y})}didStreamParametersChange(y){return y.width!==this.streamParameters.width||y.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(y){return c(this,void 0,void 0,function*(){this.streamParameters.width=y.width,this.streamParameters.height=y.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return c(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:g.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(y){return c(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const _=this.canvasOpsManager.getInferenceInputData(y);this.segmentationMask=yield this.generateSegmentationMask(_),this.segmentationRateManager.completeSegmentation()}}catch(_){throw this.logger.error(_.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(y){return c(this,void 0,void 0,function*(){zl.isSharedArrayBufferSupported?(this.sharedImageData.set(y.data),this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:y},[y.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(y){return{backgroundBlur:{isEnabled:y.backgroundBlur.isEnabled,strength:y.backgroundBlur.strength},backgroundReplacement:{isEnabled:y.backgroundReplacement.isEnabled,backgroundImageURL:y.backgroundReplacement.backgroundImageURL,defaultColor:y.backgroundReplacement.defaultColor}}}setEffectConfig(y){return c(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(y,this.effectConfig))return;const _=this.cloneConfigFrom(y);try{yield this.validateEffectConfig(_)}catch(C){throw this.logger.error(C.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}_.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(_),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,_),this.effectConfig=_,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(y){return c(this,void 0,void 0,function*(){if(y.backgroundBlur.isEnabled&&y.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");y.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(y))})}validateReplacementConfig(y){return c(this,void 0,void 0,function*(){if(y.backgroundReplacement.backgroundImageURL&&y.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!y.backgroundReplacement.backgroundImageURL&&!y.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{y.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(y.backgroundReplacement.backgroundImageURL))}catch(C){throw this.logger.error(C.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const _=y.backgroundReplacement.defaultColor;if(_&&_!=="black"&&_!=="#000000"&&_!=="#000"){if(_.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(_))throw new Error(`Invalid hexadecimal color code for default replacement background: ${_}`);const T=document.createElement("canvas").getContext("2d"),A=T.fillStyle;if(T.fillStyle=_,T.fillStyle===A)throw new Error(`Invalid color for default replacement background: ${_}`)}})}validateProcessingBudgetPerFrame(y){if(y<g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||y>g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return c(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const y=this.getVideoFxAssetParams();yield this.loadEngineWorker(y),yield this.buildEngine(y),yield this.loadFxLib(y),this.renderer=constructRenderer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(y){throw this.logger.error(y.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const y=e.getDefaultAssetSpec();return{assetGroup:y.assetGroup,revisionID:y.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(y,_){const C=new URL(y);for(const[T,A]of Object.entries(_))if(A!==void 0){const O=encodeURIComponent(T),D=encodeURIComponent(A);C.searchParams.set(O,D)}return C.toString()}loadEngineWorker(y){return c(this,void 0,void 0,function*(){try{const _=this.getPathFromVideoFxAssetParams(g.CDN_BASE_PATH+g.WORKER_PATH,y);this.engineWorker=yield p.loadWorker(_,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",C=>this.engineWorkerReceiver(C))}catch(_){throw this.logger.error(_.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(y){return c(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:g.CDN_BASE_PATH,sdkVersioningParams:y}});try{yield this.buildEnginePromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(y){return c(this,void 0,void 0,function*(){const _=this.getPathFromVideoFxAssetParams(g.CDN_BASE_PATH+g.FXLIB_PATH,y),C={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const T=yield m.fetchWithBehavior(_,C,{});if(!T.ok)throw new Error("Fetch failed.");const A=window.URL.createObjectURL(yield T.blob());yield new Promise((O,D)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",A),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",O),this.fxLibScript.addEventListener("error",D),document.body.appendChild(this.fxLibScript)})}catch(T){throw this.logger.error(T.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(y){const _=y.data;switch(_.msg){case g.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(_.payload);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(_.payload.output);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case g.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(_)}`);break}}settleEngineBuildPromise(y){y!==g.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(y){y?this.segmentationRequestPromise.resolveAndReplacePromise(y):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const y=new ImageData(new Uint8ClampedArray(this.sharedImageData),g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(y)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return c(this,void 0,void 0,function*(){let C=!0;const T=s((D,M)=>{D&&(y.info(M),C=!1)},"checkEnv");T(typeof globalThis>"u","Browser does not have globalThis."),T(!a.supportsWorker(globalThis,y),"Browser does not support web workers."),T(!a.supportsWASM(globalThis,y),"Browser does not support wasm."),T(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const A=new r.default;T(!A.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const O=s(()=>c(this,void 0,void 0,function*(){if(_)try{const D=new zl(y);yield D.loadAssets(),yield D.destroy()}catch{return y.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(C?yield O():!1)})}static create(y,_){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return c(this,void 0,void 0,function*(){const T=new zl(y,C);try{return yield T.loadAssets(),yield T.setEffectConfig(_),T}catch(A){throw y.error(A.toString()),T.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(y){this.eventController?this.eventController=y:(this.eventController=y,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const y={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",y)}sameVideoFxConfig(y,_){return y.backgroundBlur.isEnabled===_.backgroundBlur.isEnabled&&y.backgroundBlur.strength===_.backgroundBlur.strength&&y.backgroundReplacement.backgroundImageURL===_.backgroundReplacement.backgroundImageURL&&y.backgroundReplacement.defaultColor===_.backgroundReplacement.defaultColor&&y.backgroundReplacement.isEnabled===_.backgroundReplacement.isEnabled}constructor(y,_=g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,C){this.logger=y,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(_)}catch(T){throw this.logger.error(T),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${_}`)}C&&(this.eventController=C),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,_),this.streamParameters={framerate:g.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:g.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:g.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:g.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},zl.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${zl.isSharedArrayBufferSupported}`),this.canvasOpsManager=new f.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${_}`)}},"VideoFxProcessor");l.default=u,u.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},615959602:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const c=d(5513317584);let h=s(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=c.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(p){p>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&p<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(p,a){this.logger=p,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=c.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},2551170247:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"VideoSource");l.default=d},5134603106:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class Jh{add(h){this.ids.add(h)}array(){return Array.from(this.ids.values()).sort((m,p)=>m-p)}contain(h){return this.ids.has(h)}forEach(h){this.ids.forEach(h)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(h){if(!h)return this.ids.size===0;const m=this.array(),p=h.array();if(m.length!==p.length)return!1;for(let a=0;a<m.length;a++)if(m[a]!==p[a])return!1;return!0}clone(){return new Jh(this.array())}remove(h){this.ids.delete(h)}toJSON(){return this.array()}truncate(h){const m=this.array();return new Jh(m.splice(0,h))}constructor(h){this.ids=new Set(h)}},"DefaultVideoStreamIdSet");l.default=d},5216544790:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),m=c(d(5134603106)),p=c(d(4202624657));let a=s(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new p.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:f,mediaType:g}=i;o!==n&&g===h.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:f}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===n||v.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const f=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),g=new Map;let S=0;f.forEach((v,y)=>{g.set(y,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(f,e,S,i,g),this.trySelectHighBitrateForAttendees(f,o,S,i,g);const u=new m.default;for(const v of g.values())u.add(v.streamId);return u}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new m.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const f of e){if(t>=i)break;if(n.has(f)){const g=n.get(f);for(const S of g.reverse())if(t-o.get(f).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(f).maxBitrateKbps+S.maxBitrateKbps,o.set(f,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,f)=>o.maxBitrateKbps>f.maxBitrateKbps?1:o.maxBitrateKbps<f.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new p.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},7562203998:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),m=c(d(5216544790)),p=c(d(4202624657));let a=s(class $l extends m.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,f=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const g=new p.default;g.maxBitrateKbps=o,g.maxFrameRate=f,g.disabledByUplinkPolicy=o===0,g.rid=n[i].rid,o!==0&&(g.timeEnabled=Date.now()),this._localStreamInfos.push(g),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=f,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===$l.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,$l.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,$l.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,$l.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,$l.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},4202624657:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=d(5391134031);let h=s(class LS{clone(){const p=new LS;return p.attendeeId=this.attendeeId,p.groupId=this.groupId,p.streamId=this.streamId,p.ssrc=this.ssrc,p.trackLabel=this.trackLabel,p.maxBitrateKbps=this.maxBitrateKbps,p.avgBitrateKbps=this.avgBitrateKbps,p.maxFrameRate=this.maxFrameRate,p.timeEnabled=this.timeEnabled,p.disabledByUplinkPolicy=this.disabledByUplinkPolicy,p.width=this.width,p.height=this.height,p}toStreamDescriptor(){const p=c.SdkStreamDescriptor.create();return p.mediaType=c.SdkStreamMediaType.VIDEO,p.trackLabel=this.trackLabel,p.attendeeId=this.attendeeId,p.streamId=this.streamId,p.groupId=this.groupId,p.framerate=this.maxFrameRate,p.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,p.avgBitrateBps=this.avgBitrateKbps,p}totalPixels(){return this.width*this.height}constructor(p,a,r,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=p,this.groupId=a,this.streamId=r,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},1140481832:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8351168186)),m=c(d(4599834734)),p=c(d(5449946032));let a=s(class Ws{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Ws.setVideoElementFlag(e,"disablePictureInPicture",t),Ws.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(f=>{console.warn("Error playing video in Safari",f)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",Ws.setVideoElementFlag(n,"disablePictureInPicture",!1),Ws.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Ws.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new p.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,f,g,S){let u=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new m.default(n).hasModality(m.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),u=!0),this.tileState.boundExternalUserId!==g&&(this.tileState.boundExternalUserId=g,u=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,u=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,u=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,u=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,u=!0),this.tileState.streamId!==f&&(this.tileState.streamId=f,u=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,u=!0),u&&this.sendTileStateUpdate()}bindVideoElement(n){let e=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Ws.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Ws.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i){this.tileController=t,this.devicePixelRatioMonitor=i,this.tileState=new p.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},5449946032:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class FS{clone(){const h=new FS;return h.tileId=this.tileId,h.localTile=this.localTile,h.isContent=this.isContent,h.active=this.active,h.paused=this.paused,h.poorConnection=this.poorConnection,h.boundAttendeeId=this.boundAttendeeId,h.boundExternalUserId=this.boundExternalUserId,h.boundVideoStream=this.boundVideoStream,h.boundVideoElement=this.boundVideoElement,h.nameplate=this.nameplate,h.videoStreamContentWidth=this.videoStreamContentWidth,h.videoStreamContentHeight=this.videoStreamContentHeight,h.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,h.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,h.devicePixelRatio=this.devicePixelRatio,h.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,h.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,h.streamId=this.streamId,h.groupId=this.groupId,h}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=d},9251190564:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(t,i,o,f){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return s(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(C){try{_(f.next(C))}catch(T){u(T)}}s(v,"fulfilled");function y(C){try{_(f.throw(C))}catch(T){u(T)}}s(y,"rejected");function _(C){C.done?S(C.value):g(C.value).then(v,y)}s(_,"step"),_((f=f.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8981226922)),p=h(d(2343182956)),a=h(d(2827699573)),r=d(903520651),n=h(d(1140481832));let e=s(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new p.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return c(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const i=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,i.destroy()})}bindVideoElement(i,o){const f=this.getVideoTile(i);if(f===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${i}`);return}f.bindVideoElement(o)}unbindVideoElement(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const f=this.getVideoTile(i);if(f===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${i}`);return}this.logger.info("Unbinding the video element");const g=f.stateRef().boundVideoElement;f.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),n.default.disconnectVideoStreamFromVideoElement(g,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===m.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const i=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),i.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(i)),o.pause())}unpauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(i)),o.unpause())}getVideoTile(i){return this.tileMap.has(i)?this.tileMap.get(i):null}getVideoTileArea(i){const o=i.state();let f=0,g=0;return o.boundVideoElement&&(f=o.boundVideoElement.clientHeight*o.devicePixelRatio,g=o.boundVideoElement.clientWidth*o.devicePixelRatio),f*g}getAllRemoteVideoTiles(){const i=new Array;return this.tileMap.forEach((o,f)=>{(!this.currentLocalTile||f!==this.currentLocalTile.id())&&i.push(o)}),i}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const f=this.tileFactory.makeTile(o,i,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,f),f}removeVideoTile(i){if(!this.tileMap.has(i))return;const o=this.tileMap.get(i);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(i),this.audioVideoController.forEachObserver(f=>{r.Maybe.of(f.videoTileWasRemoved).map(g=>g.bind(f)(i))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(i){const o=[];for(const f of this.getAllVideoTiles()){const g=f.state();g.boundAttendeeId===i&&(this.removeVideoTile(g.tileId),o.push(g.tileId))}return o}removeAllVideoTiles(){const i=Array.from(this.tileMap.keys());for(const o of i)this.removeVideoTile(o)}sendTileStateUpdate(i){this.audioVideoController.forEachObserver(o=>{r.Maybe.of(o.videoTileDidUpdate).map(f=>f.bind(o)(i))})}haveVideoTilesWithStreams(){for(const i of this.getAllVideoTiles())if(i.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(i){return!!this.getVideoTileForAttendeeId(i)}getVideoTileForAttendeeId(i){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===i)return o}captureVideoTile(i){const o=this.getVideoTile(i);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(i,o,f){this.tileFactory=i,this.audioVideoController=o,this.logger=f,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},1695899970:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1140481832));let m=s(class{makeTile(a,r,n,e){return new h.default(a,r,n,e)}},"DefaultVideoTileFactory");l.default=m},7699083583:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{},"BitrateParameters");l.default=d},3361826027:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8438160003)),m=c(d(2962876954)),p=d(903520651),a=c(d(8261422434)),r=c(d(7699083583));let n=s(class rs{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new r.default,new r.default,new r.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,f,g)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,f=t.numberOfParticipants(),g=f>=0&&f<=2,S=this.shouldDisableSimulcast!==g;this.numSenders=i,this.shouldDisableSimulcast=g,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of m.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?rs.kHiTargetBitrateKbpsFhd:rs.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?rs.kMidTargetBitrateKbpsFhd:rs.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?rs.kLowTargetBitrateKbpsFhd:rs.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,f=m.default.NAME_ARR_ASCENDING,g=t;let S=this.shouldDisableSimulcast?1:4;for(let u=0;u<f.length;u++){const v=f[u];i.set(v,{rid:v,active:g[u]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:g[u]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(f=>{i+=`{ rid: ${f.rid} active:${f.active} maxBitrate:${f.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{p.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=rs.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=rs.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=rs.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},4134174226:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(1438956810));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,r,n,e,t,i,o,f,g,S,u,v;const y=new Map,_=1e3,C=h.default.NAME_ARR_ASCENDING;return y.set(C[0],{rid:C[0],active:!0,scaleResolutionDownBy:((r=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||r===void 0?void 0:r.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*_,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),y.set(C[1],{rid:C[1],active:!0,scaleResolutionDownBy:((f=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||f===void 0?void 0:f.scaleResolutionDownBy)||1,maxBitrate:(((S=(g=this.encodingParams)===null||g===void 0?void 0:g.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*_,maxFramerate:(v=(u=this.encodingParams)===null||u===void 0?void 0:u.high)===null||v===void 0?void 0:v.maxFramerate}),y}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,r){this.encodingParams=r,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=m},3423911843:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8261422434));let p=s(class Kl{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new m.default(0,0,0,0,!1),this.parametersInEffect=new m.default(0,0,0,0,!1),this.encodingParamMap.set(Kl.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(r){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(r){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=r.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=r.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let r=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(r=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new m.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,r,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let r=640;return this.getNumberOfPublishedVideoSources()>4&&(r=320),r}captureHeight(){let r=384;return this.getNumberOfPublishedVideoSources()>4&&(r=192),r}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let r=0;return this.getNumberOfPublishedVideoSources()<=2?r=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?r=this.idealMaxBandwidthKbps*2/3:r=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(r)}setIdealMaxBandwidthKbps(r){this.idealMaxBandwidthKbps=r}setHasBandwidthPriority(r){this.hasBandwidthPriority=r}setTransceiverController(r){this.transceiverController=r}setSVCEnabled(r){var n;this.enableSVC=r,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${r}}`)}setHighResolutionFeatureEnabled(r){this.enableHighResolutionFeature=r}updateTransceiverController(){return c(this,void 0,void 0,function*(){const r=this.getStreamCaptureSetting();if(!r)return;const n=this.calculateEncodingParameters(r);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(Kl.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(r){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return r.maxBitrate!==(t==null?void 0:t.maxBitrate)||r.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(r==null?void 0:r.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(r){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,f=720;if(r.height!==void 0&&r.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(f=Kl.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Kl.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],f===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(f=360),o=Math.max(Math.min(r.height,r.width)/f,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${r.width}x${r.height}. New dimension is ${r.width/o}x${r.height/o}`)),this.enableSVC){let g;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?g="L1T1":g="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${f}  scalabilityMode: ${g}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:g}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var r,n,e,t;return(t=(e=(n=(r=this.transceiverController)===null||r===void 0?void 0:r.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var r;return(r=this.numberOfPublishedVideoSources)!==null&&r!==void 0?r:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(r,n){const e=r??n,t=e.length>0&&Kl.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(r,n=!0,e=void 0,t=void 0){this.selfAttendeeId=r,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=p,p.encodingMapKey="video",p.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],p.SVCCodecNames=["VP9"]},9128807920:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8261422434));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=m},1622249334:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function d(h){return h.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}s(d,"stringify");let c=s(class{debug(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.debug(d(p))}info(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.info(d(p))}warn(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.warn(d(p))}error(){for(var m=arguments.length,p=new Array(m),a=0;a<m;a++)p[a]=arguments[a];this.base.error(d(p))}constructor(m){this.base=m}},"LoggerAdapter");l.default=c},8525594090:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(i,o,f,g){function S(u){return u instanceof f?u:new f(function(v){v(u)})}return s(S,"adopt"),new(f||(f=Promise))(function(u,v){function y(T){try{C(g.next(T))}catch(A){v(A)}}s(y,"fulfilled");function _(T){try{C(g.throw(T))}catch(A){v(A)}}s(_,"rejected");function C(T){T.done?u(T.value):S(T.value).then(y,_)}s(C,"step"),C((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const m=d(8019356695),p=d(840544383),a=h(d(8066052849)),r=h(d(1622249334)),n=h(d(282836061)),e=h(d(9502253674));let t=s(class Ss{static isSupported(o,f){var g,S;const u=Ss.defaultFetchBehavior(),v=f!=null&&f.logger?new r.default(f.logger):void 0,y={fetchBehavior:u,logger:v};if(p.isIFramed()){if((f==null?void 0:f.allowIFrame)===!1)return(g=f==null?void 0:f.logger)===null||g===void 0||g.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=f==null?void 0:f.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return m.VoiceFocus.isSupported(Ss.augmentSpec(o),y)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;var v,y,_;return c(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const C=((_=(y=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||y===void 0?void 0:y.Audio)===null||_===void 0?void 0:_.EchoReduction)==="AVAILABLE",T=g&&g.supported===!0&&g.model.name==="ns_es"&&!C,A=o.name==="ns_es"&&!C;if(T||A)throw new Error("Echo Reduction requested but not enabled.");const O=new Ss(o,f,g);return yield O.init(),O})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c(this,void 0,void 0,function*(){return new Ss(o,f,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,f){return c(this,void 0,void 0,function*(){if(this.supported)try{const[S,u]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},f),{es:this.spec.name==="ns_es"});return new n.default(o,S,u,v)}catch{return}})}static destroyVoiceFocus(o){var f;return c(this,void 0,void 0,function*(){(f=o==null?void 0:o.vf)===null||f===void 0||f.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Ss.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c(this,void 0,void 0,function*(){const f={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return m.VoiceFocus.configure(this.spec,f)})}init(){var o;return c(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const f=yield this.configuration;if(!f.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(f,this.preload);try{yield this.pendingVoiceFocus}catch(g){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${g}`),this.supported=!1}})}createVoiceFocus(o,f){return c(this,void 0,void 0,function*(){const g=new e.default;return this.vf=yield m.VoiceFocus.init(o,{delegate:g,preload:f,logger:this.vfLogger}),[this.vf,g]})}allocateVoiceFocus(o){return c(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const f=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,f}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Ss.majorMinorVersion()||"unknown",f=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(f)}`}}constructor(o,{preload:f=!0,logger:g,fetchBehavior:S=Ss.defaultFetchBehavior()},u){this.spec=o,this.supported=!0,this.logger=g,this.vfLogger=g?new r.default(g):void 0,this.preload=f,this.fetchBehavior=S,this.spec=Ss.augmentSpec(this.spec),u&&(this.configuration=Promise.resolve(u))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},282836061:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=h(d(8351168186));let p=s(class BS{getInnerDevice(){return this.device}mute(n){return c(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return c(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return c(this,void 0,void 0,function*(){return this.device===n&&!a(n)?this:new BS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return c(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return c(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const f=this.node,g=this.node;return{start:f,end:g}}catch(f){throw this.failed=!0,this.delegate.onFallback(this,f),f}})}observeMeetingAudio(n){return c(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return c(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return c(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return c(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return c(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return c(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,f=void 0,g=new m.default,S=new Map,u=void 0,v=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=f,this.browserBehavior=g,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=u,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function a(r){return r==="default"?!0:!r||typeof r!="object"?!1:"deviceId"in r&&r.deviceId==="default"||"id"in r&&r.id==="default"}s(a,"isDefaultDevice"),l.default=p},9502253674:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}onFallback(h,m){var p;for(const a of this.observers)(p=a.voiceFocusFellBackToInnerStream)===null||p===void 0||p.call(a,h,m)}onCPUWarning(){var h;for(const m of this.observers)(h=m.voiceFocusInsufficientResources)===null||h===void 0||h.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=d},338869682:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=s(class Eu{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(h){let m=0;for(const p of h.streams){const a=!!p.attendeeId,r=!!p.externalUserId,n=p.hasOwnProperty("muted"),e=!!p.dropped;if(a){this.attendeeIdToStreamId[p.attendeeId]&&this.attendeeIdToStreamId[p.attendeeId]<p.audioStreamId&&delete this.attendeeIdToStreamId[p.attendeeId],this.streamIdToAttendeeId[p.audioStreamId]=p.attendeeId;const t=r?p.externalUserId:p.attendeeId;this.streamIdToExternalUserId[p.audioStreamId]=t,this.attendeeIdToStreamId[p.attendeeId]=p.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(p.attendeeId,!0,t,!1,{attendeeIndex:m++,attendeesInFrame:h.streams.length})}if(n){const t=this.streamIdToAttendeeId[p.audioStreamId],i=this.streamIdToExternalUserId[p.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,p.muted,null,i)}if(!a&&!n){const t=this.streamIdToAttendeeId[p.audioStreamId];if(t){const i=this.streamIdToExternalUserId[p.audioStreamId];delete this.streamIdToAttendeeId[p.audioStreamId],delete this.streamIdToExternalUserId[p.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[p.audioStreamId],this.attendeeIdToStreamId[t]===p.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(f);if(g>p.audioStreamId&&this.streamIdToAttendeeId[g]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:m++,attendeesInFrame:h.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(h),this.sessionReconnected=!1)}cleanUpState(h){const m=Object.values(this.streamIdToAttendeeId),p=h.streams.map(r=>r.attendeeId),a=m.filter(r=>!p.includes(r));for(const[r,n]of a.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:r,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(h){let m=null,p=null;for(const a of h.attendeeStates){const r=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(m===null&&(m={}),r!==null&&(m[r]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(p===null&&(p={}),r!==null&&(p[r]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(m,p)}normalizedVolume(h){const p=1-(-h.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(p,0),1)}normalizedSignalStrength(h){const m=h.signalStrength/Eu.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(h,m){for(const p in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[p],r=this.streamIdToExternalUserId[p];let n=null,e=null;h!==null&&(h.hasOwnProperty(a)?n=h[a]:n=Eu.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(a)?e=m[a]:e=Eu.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,n,null,e,r)}}attendeeIdForStreamId(h){if(h===0)return null;const m=this.streamIdToAttendeeId[h];return m||(this.warnedAboutMissingStreamIdMapping[h]||(this.warnedAboutMissingStreamIdMapping[h]=!0,this.logger.warn(`volume indicator stream id ${h} seen before being defined`)),null)}constructor(h,m,p,a,r){this.logger=h,this.realtimeController=m,this.minVolumeDecibels=p,this.maxVolumeDecibels=a,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=d,d.MAX_SIGNAL_STRENGTH_LEVELS=2,d.IMPLICIT_VOLUME=0,d.IMPLICIT_SIGNAL_STRENGTH=1},8796204466:function(x,l,d){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=c(d(8066052849)),m=c(d(2686893898));let p=s(class{create(r,n,e){this.connection=new WebSocket(e?r:h.default.urlWithVersion(r),n),this.connection.binaryType="arraybuffer"}send(r){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return r instanceof Uint8Array?this.connection.send(r.buffer):this.connection.send(r),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${m.default[this.readyState()]}`),!1}}close(r,n){var e;(e=this.connection)===null||e===void 0||e.close(r,n)}destroy(){this.connection=void 0}addEventListener(r,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(r,n)}removeEventListener(r,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(r,n)}readyState(){if(!this.connection)return m.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return m.default.Connecting;case WebSocket.OPEN:return m.default.Open;case WebSocket.CLOSING:return m.default.Closing;case WebSocket.CLOSED:return m.default.Closed}}constructor(r){this.logger=r}},"DefaultWebSocketAdapter");l.default=p},2686893898:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var d;(function(c){c[c.None=0]="None",c[c.Connecting=1]="Connecting",c[c.Open=2]="Open",c[c.Closing=3]="Closing",c[c.Closed=4]="Closed"})(d=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=d},1716026697:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(C,T,A,O){function D(M){return M instanceof A?M:new A(function(R){R(M)})}return s(D,"adopt"),new(A||(A=Promise))(function(M,R){function F(X){try{$(O.next(X))}catch(Y){R(Y)}}s(F,"fulfilled");function V(X){try{$(O.throw(X))}catch(Y){R(Y)}}s(V,"rejected");function $(X){X.done?M(X.value):D(X.value).then(F,V)}s($,"step"),$((O=O.apply(C,T||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=d(6582301018),m=d(8113008952),p=3,a=2.5,r=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let f=s(class{roundtrip(T,A,O){return new Promise((D,M)=>{this.worker.then(R=>{let F;F=s(V=>{const{message:$,key:X}=V.data;$===A&&X===O&&(R.removeEventListener("message",F),D(V.data))},"listener"),R.addEventListener("message",F),R.postMessage(T)}).catch(R=>{var F;(F=this.logger)===null||F===void 0||F.error("Failed to load worker.",R),M(R)})})}supportsSIMD(T){const A="simd",O=T||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,D={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:O,key:A};return this.roundtrip(D,"simd-support",A).then(M=>M.supports)}measure(T,A){const O=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,D=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,M=T?D:O,R=`bench:${T}`,F={message:"measure",fetchBehavior:this.fetchBehavior,budget:A,path:M,key:R};return this.roundtrip(F,"measurement",R).then(V=>{if(V.measurement)return V.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(T=>{var A;(A=this.logger)===null||A===void 0||A.debug("Stopping estimator worker."),T.terminate()}).catch(T=>{})}constructor(T,A){this.fetchConfig=T,this.logger=A;const O=`${T.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:T.headers,escapedQueryString:T.escapedQueryString},this.worker=h.loadWorker(O,"VoiceFocusEstimator",this.fetchBehavior,A)}},"Estimator");const g=s((C,T)=>C===1?n:T==="quality"?e*C:t*C,"inlineScoreMultiplier"),S=s(function(C){let{supportsSIMD:T,supportsSAB:A,duration:O,executionPreference:D="auto",simdPreference:M,variantPreference:R="auto",namePreference:F="default",usagePreference:V,executionQuantaPreference:$=p}=C,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Y=arguments.length>2?arguments[2]:void 0;const ie=M==="force"||M!=="disable"&&T,pe=O!==-1,Ee=pe?(ie?a:r)/O:0,Be=ie?X.simd:X.wasm,it=pe?g($,V)*Ee:0,Ce=pe?i*Ee:0,Me=F,je=s(vt=>({supported:!1,reason:vt}),"unsupported");if(pe){if(Ee<Be.noSupport)return je(`Performance score ${Ee} worse than threshold ${Be.noSupport}.`)}else if(D==="auto"||R==="auto")return je(`Missing explicit execution (${D}) or variant (${R}) preference, but no scoring performed.`);Y==null||Y.debug(`Bench duration ${O} yields inline score ${it} and worker score ${Ce}.`);const We=s((vt,De,Pe)=>({supported:!0,useSIMD:ie,processor:vt,executionApproach:De,variant:Pe,executionQuanta:De==="inline"?$:void 0,name:Me}),"succeed"),Ze=s((vt,De,Pe)=>De!=="auto"?!pe||vt>Pe[De]?De:"failed":vt>Pe.c100?"c100":vt>Pe.c50?"c50":vt>Pe.c20?"c20":vt>Pe.c10?"c10":"failed","resolveVariant"),ft=s(vt=>{switch(vt||"auto"){case"auto":{let De=ft("inline"),Pe=ft("worker");return Y==null||Y.debug(`Reducing auto preference: ${JSON.stringify(De)} vs ${JSON.stringify(Pe)}`),De.supported===!1||Pe.supported===!1?Pe:De.variant===Pe.variant||De.variant==="c50"?De:Pe}case"worker":return m.supportsSharedArrayBuffer(globalThis,window,Y)?ft("worker-sab"):ft("worker-postMessage");case"inline":{const De=Ze(it,R,Be.inline);return De==="failed"?je(`Performance score ${it} not sufficient for inline use with variant preference ${R}.`):We("voicefocus-inline-processor","inline",De)}case"worker-sab":{if(!A){const Pe="Requested worker-sab but no SharedArrayBuffer support.";return Y==null||Y.warn(Pe),{supported:!1,reason:Pe}}const De=Ze(Ce,R,Be.worker);return De==="failed"?je(`Performance score ${Ce} not sufficient for worker use with variant preference ${R}.`):We("voicefocus-worker-sab-processor","worker-sab",De)}case"worker-postMessage":{const De=Ze(Ce,R,Be.worker);if(De==="failed")return je(`Performance score ${Ce} not sufficient for worker use.`);if(Me==="ns_es"){const Pe="Requested echo suppression but postMessage executor does not support it.";return Y==null||Y.warn(Pe),{supported:!1,reason:Pe}}return We("voicefocus-worker-postMessage-processor","worker-postMessage",De)}}},"reducePreference");return ft(D)},"decideExecutionApproach"),u=s((C,T,A,O)=>c(void 0,void 0,void 0,function*(){const D={supportsSIMD:C,supportsSAB:m.supportsSharedArrayBuffer(globalThis,window,A),duration:-1};if(C)return A==null||A.info("Supports SIMD: true (force)"),D;const M=!O,R=O||new f(T,A);try{const F=!m.isOldChrome(window,A)&&(yield R.supportsSIMD());return A==null||A.info(`Supports SIMD: ${F} (force: ${C})`),D.supportsSIMD=F,D}finally{M&&R.stop()}}),"featureCheck"),v=s((C,T,A,O)=>c(void 0,void 0,void 0,function*(){const D=new f(T,O);try{const M=yield u(C,T,O,D);if(M.supportsSIMD)try{return M.duration=yield D.measure(!0,A),O==null||O.info("SIMD timing:",M.duration),M}catch{O==null||O.warn("Failed SIMD estimation; falling back to non-SIMD."),M.supportsSIMD=!1}return M.duration=yield D.measure(!1,A),O==null||O.info("No-SIMD timing:",M.duration),M}catch(M){throw O==null||O.error("Could not feature check.",M),M}finally{D.stop()}}),"estimateAndFeatureCheck"),y=s(function(C,T,A){let O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return c(void 0,void 0,void 0,function*(){let D=C.executionPreference;const{usagePreference:M,variantPreference:R,namePreference:F,simdPreference:V,estimatorBudget:$,executionQuantaPreference:X}=C;M==="interactivity"&&D!=="inline"&&(A==null||A.debug(`Overriding execution preference ${D} to reflect interactivity preference.`),D="inline");const Y=V==="force",ne=R!=="auto",ie=D!=="auto";let pe;try{ne&&ie?pe=yield u(Y,T,A):pe=yield v(Y,T,$,A)}catch(Ee){throw A==null||A.error("Could not load estimator.",Ee),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},pe),{simdPreference:V,executionPreference:D,variantPreference:R,namePreference:F,usagePreference:M,executionQuantaPreference:X}),O,A)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=y;const _=s(C=>{let{category:T,name:A,variant:O,simd:D,url:M}=C;return`${T}-${A}-${O}-v1${D?"_simd":""}`},"decideModel");l.decideModel=_},4179955699:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function d(e,t,i){if(!i)return fetch(e,t);const o=h(e,i),f=c(t,i);return fetch(o,f)}s(d,"fetchWithBehavior"),l.fetchWithBehavior=d;function c(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}s(c,"withRequestHeaders"),l.withRequestHeaders=c;function h(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}s(h,"withQueryString"),l.withQueryString=h;function m(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const f of i)o.append(f,t[f]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}s(m,"addQueryParams"),l.addQueryParams=m;const p={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return d(e,p,t).then(i=>i.redirected?i.url:e)}s(a,"resolveURL"),l.resolveURL=a;function r(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}s(r,"isValidAssetGroup"),l.isValidAssetGroup=r;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}s(n,"isValidRevisionID"),l.isValidRevisionID=n},6582301018:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const c=d(4179955699),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},m=s((p,a,r,n)=>{n==null||n.debug(`Loading ${a} worker from ${p}.`);let e=!1;try{e=self.origin===new URL(p).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=c.withQueryString(p,r);return Promise.resolve(new Worker(t,{name:a}))}return c.fetchWithBehavior(p,h,r).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=m},8113008952:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(u,v,y,_){function C(T){return T instanceof y?T:new y(function(A){A(T)})}return s(C,"adopt"),new(y||(y=Promise))(function(T,A){function O(R){try{M(_.next(R))}catch(F){A(F)}}s(O,"fulfilled");function D(R){try{M(_.throw(R))}catch(F){A(F)}}s(D,"rejected");function M(R){R.done?T(R.value):C(R.value).then(O,D)}s(M,"step"),M((_=_.apply(u,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=d(6582301018),m=s(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),p=s(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,y=v.match(/Safari\//),_=v.match(/Chrom(?:e|ium)\//);return!!(y&&!_)},"isSafari");l.isSafari=p;const a=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(u)?!1:m(u)?(g(u)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const r=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,y=arguments.length>2?arguments[2]:void 0;return c(void 0,void 0,void 0,function*(){if(!l.supportsWorker(u,y))return!1;const _=`${v.paths.workers}worker-v1.js`;try{const C=yield h.loadWorker(_,"VoiceFocusTestWorker",v,y);try{C.terminate()}catch(T){y==null||y.debug("Failed to terminate worker.",T)}return!0}catch(C){return y==null||y.info("Failed to fetch and instantiate test worker",C),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=r;const n=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.Worker}catch(y){return v==null||v.info("Does not support Worker",y),!1}},"supportsWorker");l.supportsWorker=n;const e=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.AudioWorklet&&!!u.AudioWorkletNode}catch(y){return v==null||v.info("Does not support Audio Worklet",y),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.WebAssembly&&(!!u.WebAssembly.compile||!!u.WebAssembly.compileStreaming)}catch(y){return v==null||v.info("Does not support WASM",y),!1}},"supportsWASM");l.supportsWASM=t;const i=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,y=arguments.length>2?arguments[2]:void 0;try{return!!u.SharedArrayBuffer&&(!!v.chrome||!!u.crossOriginIsolated)}catch{return y==null||y.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=i;const o=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var y;try{return!!(!((y=u.WebAssembly)===null||y===void 0)&&y.compileStreaming)}catch(_){return v==null||v.info("Does not support WASM streaming compilation",_),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const f=90,g=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!u.chrome)return}catch{}const v=u.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=s(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const y=g(u);return y&&y<f?(v==null||v.debug(`Chrome ${y} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},3587844202:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let d=s(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||s(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=d},8019356695:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return s(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(Be){try{Ee($.next(Be))}catch(it){ne(it)}}s(ie,"fulfilled");function pe(Be){try{Ee($.throw(Be))}catch(it){ne(it)}}s(pe,"rejected");function Ee(Be){Be.done?Y(Be.value):X(Be.value).then(ie,pe)}s(Ee,"step"),Ee(($=$.apply(R,F||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=d(1716026697),m=d(4179955699),p=d(6582301018),a=d(8113008952),r=d(1074507e3),n=d(4096494996),e=d(1035990965),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",f="https://static.sdkassets.chime.aws",g={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},S={latencyHint:0},u={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},u),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),y=Object.assign(Object.assign({},u),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),_={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:r.default}},C=s((R,F)=>{if(R!==void 0&&!m.isValidAssetGroup(R))throw new Error(`Invalid asset group ${R}`);if(F!==void 0&&!m.isValidRevisionID(F))throw new Error(`Invalid revision ID ${F}`)},"validateAssetSpec"),T=s((R,F)=>{let V;if(F.useBuiltInAGC?V=v:V=y,!R)return{audio:V};if(!R.audio)return R;if(R.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},R),{audio:R.audio===!0?V:Object.assign(Object.assign({},R.audio),V)})},"mungeConstraints"),A=s((R,F)=>`${F.models}${h.decideModel(R)}.wasm`,"urlForModel");let O=s(class xS{static isSupported(F,V){const{fetchBehavior:$,logger:X}=V||{};if(typeof globalThis>"u")return X==null||X.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,X))return X==null||X.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,X))return X==null||X.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,X)||X==null||X.debug("Browser does not support streaming WASM compilation.");const{assetGroup:Y=o,revisionID:ne,paths:ie=g}=F||{};C(Y,ne);const pe=ne?{revisionID:ne}:{assetGroup:Y},Ee=m.addQueryParams($,pe),Be=Object.assign(Object.assign({},Ee),{paths:ie});return a.supportsVoiceFocusWorker(globalThis,Be,X)}static mungeExecutionPreference(F,V){const $=F===void 0||F==="auto";if(a.isSafari(globalThis)){if($||F==="inline")return"inline";if(!$)throw new Error(`Unsupported execution preference ${F}`)}if(F==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,V))throw new Error(`Unsupported execution preference ${F}`);return F||"auto"}static configure(F,V){return c(this,void 0,void 0,function*(){const{fetchBehavior:$,preResolve:X,logger:Y}=V||{},{category:ne="voicefocus",name:ie="default",variant:pe="auto",assetGroup:Ee=o,revisionID:Be,simd:it="detect",executionPreference:Ce="auto",executionQuantaPreference:Me,usagePreference:je="interactivity",estimatorBudget:We=100,paths:Ze=g,thresholds:ft}=F||{};if(Y==null||Y.debug("Configuring Voice Focus with spec",F),ne!==void 0&&ne!=="voicefocus")throw new Error(`Unrecognized category ${ne}`);if(ie!==void 0&&ie!=="default"&&ie!=="ns_es")throw new Error(`Unrecognized feature name ${ie}`);if(pe!==void 0&&!["auto","c100","c50","c20","c10"].includes(pe))throw new Error(`Unrecognized feature variant ${pe}`);if(Me!==void 0&&![1,2,3].includes(Me))throw new Error(`Unrecognized execution quanta preference ${Me}`);if(C(Ee,Be),it!==void 0&&!["detect","force","disable"].includes(it))throw new Error(`Unrecognized SIMD option ${it}`);if(Ce!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ce))throw new Error(`Unrecognized execution preference ${Ce}`);if(je!==void 0&&!["quality","interactivity"].includes(je))throw new Error(`Unrecognized usage preference ${je}`);const vt={executionPreference:this.mungeExecutionPreference(Ce,Y),usagePreference:je,executionQuantaPreference:Me,variantPreference:pe,namePreference:ie,simdPreference:it,estimatorBudget:We},De=Be?{revisionID:Be}:{assetGroup:Ee},Pe=m.addQueryParams($,De),Ke=Object.assign({paths:Ze},Pe),Ye=yield h.measureAndDecideExecutionApproach(vt,Ke,Y,ft);if(Ye.supported===!1)return{supported:!1,reason:Ye.reason};Y==null||Y.info("Decided execution approach",Ye);const{useSIMD:xe,processor:Ct,variant:At,executionQuanta:Lt}=Ye,Ft={category:ne||"voicefocus",name:ie||"default",variant:At,simd:xe};if(X){const Jt=A(Ft,Ze);Ft.url=yield m.resolveURL(Jt,Pe)}return{fetchConfig:Ke,model:Ft,processor:Ct,executionQuanta:Lt,supported:!0}})}static init(F,V){let{delegate:$,preload:X=!0,logger:Y}=V;return c(this,void 0,void 0,function*(){if(F.supported===!1)throw new Error("Voice Focus not supported. Reason: "+F.reason);const{model:ne,processor:ie,fetchConfig:pe,executionQuanta:Ee}=F,{simd:Be,name:it}=ne,{paths:Ce}=pe;if(ie!=="voicefocus-inline-processor"&&ie!=="voicefocus-worker-postMessage-processor"&&ie!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ie}`);const Me=ne.url||A(ne,Ce);Y==null||Y.debug(`Using model URL ${Me}.`);const je=`${Ce.wasm}audio_buffer-v1${Be?"_simd":""}.wasm`,We=`${Ce.wasm}resampler-v1${Be?"_simd":""}.wasm`,Ze=`${Ce.workers}worker-v1.js`,{file:ft,node:vt}=_[ie],De=`${Ce.processors}${ft}`,Pe=yield p.loadWorker(Ze,"VoiceFocusWorker",pe,Y);if(X){Y==null||Y.debug("Preloading",Me);let Ct=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";Pe.postMessage({message:Ct,preload:!0,key:"model",fetchBehavior:pe,path:Me})}const Ye={processor:ie,worker:Pe,audioBufferURL:je,resamplerURL:We,fetchBehavior:pe,modelURL:Me,delegate:$,logger:Y,numberOfInputs:it==="ns_es"?2:1},xe=new xS(Pe,De,vt,Ye,Ee);return Promise.resolve(xe)})}createNode(F,V){var $;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:X=F.sampleRate===16e3?16e3:48e3,enabled:Y=!0,agc:ne=i}=V||{},ie=V==null?void 0:V.es,pe={voiceFocusSampleRate:X,enabled:Y,sendBufferCount:10,prefill:6,agc:ne,executionQuanta:this.executionQuanta,supportFarendStream:ie},Ee=m.withQueryString(this.processorURL,($=this.nodeOptions)===null||$===void 0?void 0:$.fetchBehavior);return F.audioWorklet.addModule(Ee).then(()=>new this.nodeConstructor(F,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:pe})))}applyToStream(F,V,$){return c(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const X=V.createMediaStreamSource(F),Y=yield this.applyToSourceNode(X,V,$),ne=V.createMediaStreamDestination();return Y.connect(ne),{node:Y,source:X,destination:ne,stream:ne.stream}})}applyToSourceNode(F,V,$){return c(this,void 0,void 0,function*(){const X=yield this.createNode(V,$);return F.connect(X),X})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(F,V,$,X,Y){this.processorURL=V,this.nodeConstructor=$,this.nodeOptions=X,this.executionQuanta=Y,this.internal={worker:F,nodeOptions:X,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=O;const D=s(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(R)},"createAudioContext");l.createAudioContext=D;const M=s((R,F,V)=>c(void 0,void 0,void 0,function*(){var $,X;const{constraints:Y,spec:ne,delegate:ie,preload:pe=!0,options:Ee}=F,{logger:Be}=V,it=yield O.configure(ne,V);if(!it.supported)return($=V.logger)===null||$===void 0||$.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(Y);const Ce=yield O.init(it,{delegate:ie,preload:pe,logger:Be}),Me=((X=F.options)===null||X===void 0?void 0:X.agc)||i,je=yield window.navigator.mediaDevices.getUserMedia(T(Y,Me));return Ce.applyToStream(je,R,Ee).then(We=>We.stream)}),"getAudioInput");l.getAudioInput=M},1074507e3:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(f){f(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,f){function g(v){try{u(t.next(v))}catch(y){f(y)}}s(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(y){f(y)}}s(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}s(u,"step"),u((t=t.apply(r,n||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(8113008952),m=d(3587844202),p=5*1e3;let a=s(class extends m.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return c(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return c(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return c(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const f=Date.now(),g=this.cpuWarningLastTriggered||f,S=Math.abs(f-g);(!this.cpuWarningLastTriggered||S>p)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=f),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:f,delegate:g}=e;this.logger=f,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=g,f&&f.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},1035990965:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function f(u){try{S(e.next(u))}catch(v){o(v)}}s(f,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}s(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(f,g)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(8113008952),m=d(3587844202);let p=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return c(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return c(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return c(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(r){var n;const e=r.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(r){var n;const e=r.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(r,n){super(r,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:f}=n;this.delegate=f,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:g,agc:S,supportFarendStream:u}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:r.sampleRate===16e3?160:480,enabled:g,agc:S,fetchBehavior:o,model:e,supportFarendStream:u});const v=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=p},4096494996:function(x,l,d){"use strict";var c=this&&this.__awaiter||function(n,e,t,i){function o(f){return f instanceof t?f:new t(function(g){g(f)})}return s(o,"adopt"),new(t||(t=Promise))(function(f,g){function S(y){try{v(i.next(y))}catch(_){g(_)}}s(S,"fulfilled");function u(y){try{v(i.throw(y))}catch(_){g(_)}}s(u,"rejected");function v(y){y.done?f(y.value):o(y.value).then(S,u)}s(v,"step"),v((i=i.apply(n,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(8113008952),m=d(3587844202),p={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let r=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return c(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,p.enabled,a.enabled),Atomics.notify(this.state,p.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return c(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,p.enabled,a.disabled),Atomics.notify(this.state,p.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return c(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,p.enabled,a.stopped),Atomics.notify(this.state,p.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:f,fetchBehavior:g,delegate:S}=t;this.delegate=S,this.worker=f,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:u,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:u,model:i,supportFarendStream:v});const y=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"resampler",fetchBehavior:g,path:o})}},"VoiceFocusWorkerBufferNode");l.default=r},3712740514:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var c=d(2291918858),h=function(){function m(){this.state=Int32Array.from(c.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha2561"),m.prototype.update=function(p){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,r=p.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>c.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=p[a++],r--,this.bufferLength===c.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var p=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(a.setUint8(this.bufferLength++,128),r%c.BLOCK_SIZE>=c.BLOCK_SIZE-8){for(var n=this.bufferLength;n<c.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<c.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(c.BLOCK_SIZE-8,Math.floor(p/4294967296),!0),a.setUint32(c.BLOCK_SIZE-4,p),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(c.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var p=this,a=p.buffer,r=p.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],f=r[5],g=r[6],S=r[7],u=0;u<c.BLOCK_SIZE;u++){if(u<16)this.temp[u]=(a[u*4]&255)<<24|(a[u*4+1]&255)<<16|(a[u*4+2]&255)<<8|a[u*4+3]&255;else{var v=this.temp[u-2],y=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[u-15];var _=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[u]=(y+this.temp[u-7]|0)+(_+this.temp[u-16]|0)}var C=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&g)|0)+(S+(c.KEY[u]+this.temp[u]|0)|0)|0,T=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=g,g=f,f=o,o=i+C|0,i=t,t=e,e=n,n=C+T|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=f,r[6]+=g,r[7]+=S},m}();l.RawSha256=h},2291918858:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1222670195:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c=d(8400004479);c.__exportStar(d(9697312697),l)},9697312697:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var c=d(8400004479),h=d(2291918858),m=d(3712740514),p=d(9346984146),a=function(){function n(e){if(this.hash=new m.RawSha256,e){this.outer=new m.RawSha256;var t=r(e),i=new Uint8Array(h.BLOCK_SIZE);i.set(t);for(var o=0;o<h.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return s(n,"Sha2561"),n.prototype.update=function(e){if(!((0,p.isEmptyData)(e)||this.error))try{this.hash.update((0,p.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(e){return[2,this.digestSync()]})})},n}();l.Sha256=a;function r(n){var e=(0,p.convertToBuffer)(n);if(e.byteLength>h.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(h.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},1717667466:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var c=d(2412280125),h=typeof Buffer<"u"&&Buffer.from?function(p){return Buffer.from(p,"utf8")}:c.fromUtf8;function m(p){return p instanceof Uint8Array?p:typeof p=="string"?h(p):ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(p)}s(m,"convertToBuffer"),l.convertToBuffer=m},9346984146:(x,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var c=d(1717667466);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return c.convertToBuffer}});var h=d(4931641723);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var m=d(3533405281);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var p=d(4862639932);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return p.uint32ArrayFrom}})},4931641723:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function d(c){return typeof c=="string"?c.length===0:c.byteLength===0}s(d,"isEmptyData"),l.isEmptyData=d},3533405281:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function d(c){return new Uint8Array([(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255])}s(d,"numToUint8"),l.numToUint8=d},4862639932:(x,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function d(c){if(!Uint32Array.from){for(var h=new Uint32Array(c.length),m=0;m<c.length;)h[m]=c[m],m+=1;return h}return Uint32Array.from(c)}s(d,"uint32ArrayFrom"),l.uint32ArrayFrom=d},2179555054:(x,l,d)=>{"use strict";const{Deflate:c,deflate:h,deflateRaw:m,gzip:p}=d(8596517657),{Inflate:a,inflate:r,inflateRaw:n,ungzip:e}=d(5407065173),t=d(9516153853);x.exports.Deflate=c,x.exports.deflate=h,x.exports.deflateRaw=m,x.exports.gzip=p,x.exports.Inflate=a,x.exports.inflate=r,x.exports.inflateRaw=n,x.exports.ungzip=e,x.exports.constants=t},8596517657:(x,l,d)=>{"use strict";const c=d(9071164343),h=d(5261709245),m=d(3455347086),p=d(4276546412),a=d(8079600486),r=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:u}=d(9516153853);function v(T){this.options=h.assign({level:g,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},T||{});let A=this.options;A.raw&&A.windowBits>0?A.windowBits=-A.windowBits:A.gzip&&A.windowBits>0&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let O=c.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(O!==o)throw new Error(p[O]);if(A.header&&c.deflateSetHeader(this.strm,A.header),A.dictionary){let D;if(typeof A.dictionary=="string"?D=m.string2buf(A.dictionary):r.call(A.dictionary)==="[object ArrayBuffer]"?D=new Uint8Array(A.dictionary):D=A.dictionary,O=c.deflateSetDictionary(this.strm,D),O!==o)throw new Error(p[O]);this._dict_set=!0}}s(v,"Deflate"),v.prototype.push=function(T,A){const O=this.strm,D=this.options.chunkSize;let M,R;if(this.ended)return!1;for(A===~~A?R=A:R=A===!0?i:n,typeof T=="string"?O.input=m.string2buf(T):r.call(T)==="[object ArrayBuffer]"?O.input=new Uint8Array(T):O.input=T,O.next_in=0,O.avail_in=O.input.length;;){if(O.avail_out===0&&(O.output=new Uint8Array(D),O.next_out=0,O.avail_out=D),(R===e||R===t)&&O.avail_out<=6){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(M=c.deflate(O,R),M===f)return O.next_out>0&&this.onData(O.output.subarray(0,O.next_out)),M=c.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===o;if(O.avail_out===0){this.onData(O.output);continue}if(R>0&&O.next_out>0){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(O.avail_in===0)break}return!0},v.prototype.onData=function(T){this.chunks.push(T)},v.prototype.onEnd=function(T){T===o&&(this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function y(T,A){const O=new v(A);if(O.push(T,!0),O.err)throw O.msg||p[O.err];return O.result}s(y,"deflate");function _(T,A){return A=A||{},A.raw=!0,y(T,A)}s(_,"deflateRaw");function C(T,A){return A=A||{},A.gzip=!0,y(T,A)}s(C,"gzip"),x.exports.Deflate=v,x.exports.deflate=y,x.exports.deflateRaw=_,x.exports.gzip=C,x.exports.constants=d(9516153853)},5407065173:(x,l,d)=>{"use strict";const c=d(8029791791),h=d(5261709245),m=d(3455347086),p=d(4276546412),a=d(8079600486),r=d(9654919892),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:f,Z_STREAM_ERROR:g,Z_DATA_ERROR:S,Z_MEM_ERROR:u}=d(9516153853);function v(C){this.options=h.assign({chunkSize:1024*64,windowBits:15,to:""},C||{});const T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(C&&C.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let A=c.inflateInit2(this.strm,T.windowBits);if(A!==i)throw new Error(p[A]);if(this.header=new r,c.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=m.string2buf(T.dictionary):n.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(A=c.inflateSetDictionary(this.strm,T.dictionary),A!==i)))throw new Error(p[A])}s(v,"Inflate"),v.prototype.push=function(C,T){const A=this.strm,O=this.options.chunkSize,D=this.options.dictionary;let M,R,F;if(this.ended)return!1;for(T===~~T?R=T:R=T===!0?t:e,n.call(C)==="[object ArrayBuffer]"?A.input=new Uint8Array(C):A.input=C,A.next_in=0,A.avail_in=A.input.length;;){for(A.avail_out===0&&(A.output=new Uint8Array(O),A.next_out=0,A.avail_out=O),M=c.inflate(A,R),M===f&&D&&(M=c.inflateSetDictionary(A,D),M===i?M=c.inflate(A,R):M===S&&(M=f));A.avail_in>0&&M===o&&A.state.wrap>0&&C[A.next_in]!==0;)c.inflateReset(A),M=c.inflate(A,R);switch(M){case g:case S:case f:case u:return this.onEnd(M),this.ended=!0,!1}if(F=A.avail_out,A.next_out&&(A.avail_out===0||M===o))if(this.options.to==="string"){let V=m.utf8border(A.output,A.next_out),$=A.next_out-V,X=m.buf2string(A.output,V);A.next_out=$,A.avail_out=O-$,$&&A.output.set(A.output.subarray(V,V+$),0),this.onData(X)}else this.onData(A.output.length===A.next_out?A.output:A.output.subarray(0,A.next_out));if(!(M===i&&F===0)){if(M===o)return M=c.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,!0;if(A.avail_in===0)break}}return!0},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function y(C,T){const A=new v(T);if(A.push(C),A.err)throw A.msg||p[A.err];return A.result}s(y,"inflate");function _(C,T){return T=T||{},T.raw=!0,y(C,T)}s(_,"inflateRaw"),x.exports.Inflate=v,x.exports.inflate=y,x.exports.inflateRaw=_,x.exports.ungzip=y,x.exports.constants=d(9516153853)},5261709245:x=>{"use strict";const l=s((d,c)=>Object.prototype.hasOwnProperty.call(d,c),"_has");x.exports.assign=function(d){const c=Array.prototype.slice.call(arguments,1);for(;c.length;){const h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const m in h)l(h,m)&&(d[m]=h[m])}}return d},x.exports.flattenChunks=d=>{let c=0;for(let m=0,p=d.length;m<p;m++)c+=d[m].length;const h=new Uint8Array(c);for(let m=0,p=0,a=d.length;m<a;m++){let r=d[m];h.set(r,p),p+=r.length}return h}},3455347086:x=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const d=new Uint8Array(256);for(let h=0;h<256;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,x.exports.string2buf=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let m,p,a,r,n,e=h.length,t=0;for(r=0;r<e;r++)p=h.charCodeAt(r),(p&64512)===55296&&r+1<e&&(a=h.charCodeAt(r+1),(a&64512)===56320&&(p=65536+(p-55296<<10)+(a-56320),r++)),t+=p<128?1:p<2048?2:p<65536?3:4;for(m=new Uint8Array(t),n=0,r=0;n<t;r++)p=h.charCodeAt(r),(p&64512)===55296&&r+1<e&&(a=h.charCodeAt(r+1),(a&64512)===56320&&(p=65536+(p-55296<<10)+(a-56320),r++)),p<128?m[n++]=p:p<2048?(m[n++]=192|p>>>6,m[n++]=128|p&63):p<65536?(m[n++]=224|p>>>12,m[n++]=128|p>>>6&63,m[n++]=128|p&63):(m[n++]=240|p>>>18,m[n++]=128|p>>>12&63,m[n++]=128|p>>>6&63,m[n++]=128|p&63);return m};const c=s((h,m)=>{if(m<65534&&h.subarray&&l)return String.fromCharCode.apply(null,h.length===m?h:h.subarray(0,m));let p="";for(let a=0;a<m;a++)p+=String.fromCharCode(h[a]);return p},"buf2binstring");x.exports.buf2string=(h,m)=>{const p=m||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,m));let a,r;const n=new Array(p*2);for(r=0,a=0;a<p;){let e=h[a++];if(e<128){n[r++]=e;continue}let t=d[e];if(t>4){n[r++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<p;)e=e<<6|h[a++]&63,t--;if(t>1){n[r++]=65533;continue}e<65536?n[r++]=e:(e-=65536,n[r++]=55296|e>>10&1023,n[r++]=56320|e&1023)}return c(n,r)},x.exports.utf8border=(h,m)=>{m=m||h.length,m>h.length&&(m=h.length);let p=m-1;for(;p>=0&&(h[p]&192)===128;)p--;return p<0||p===0?m:p+d[h[p]]>m?p:m}},3145109445:x=>{"use strict";const l=s((d,c,h,m)=>{let p=d&65535|0,a=d>>>16&65535|0,r=0;for(;h!==0;){r=h>2e3?2e3:h,h-=r;do p=p+c[m++]|0,a=a+p|0;while(--r);p%=65521,a%=65521}return p|a<<16|0},"adler32");x.exports=l},9516153853:x=>{"use strict";x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},3332910147:x=>{"use strict";const l=s(()=>{let h,m=[];for(var p=0;p<256;p++){h=p;for(var a=0;a<8;a++)h=h&1?3988292384^h>>>1:h>>>1;m[p]=h}return m},"makeTable"),d=new Uint32Array(l()),c=s((h,m,p,a)=>{const r=d,n=a+p;h^=-1;for(let e=a;e<n;e++)h=h>>>8^r[(h^m[e])&255];return h^-1},"crc32");x.exports=c},9071164343:(x,l,d)=>{"use strict";const{_tr_init:c,_tr_stored_block:h,_tr_flush_block:m,_tr_tally:p,_tr_align:a}=d(4407910137),r=d(3145109445),n=d(3332910147),e=d(4276546412),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:f,Z_BLOCK:g,Z_OK:S,Z_STREAM_END:u,Z_STREAM_ERROR:v,Z_DATA_ERROR:y,Z_BUF_ERROR:_,Z_DEFAULT_COMPRESSION:C,Z_FILTERED:T,Z_HUFFMAN_ONLY:A,Z_RLE:O,Z_FIXED:D,Z_DEFAULT_STRATEGY:M,Z_UNKNOWN:R,Z_DEFLATED:F}=d(9516153853),V=9,$=15,X=8,Y=29,ie=256+1+Y,pe=30,Ee=19,Be=2*ie+1,it=15,Ce=3,Me=258,je=Me+Ce+1,We=32,Ze=42,ft=69,vt=73,De=91,Pe=103,Ke=113,Ye=666,xe=1,Ct=2,At=3,Lt=4,Ft=3,Jt=s((k,he)=>(k.msg=e[he],he),"err"),It=s(k=>(k<<1)-(k>4?9:0),"rank"),ln=s(k=>{let he=k.length;for(;--he>=0;)k[he]=0},"zero");let yn=s((k,he,Se)=>(he<<k.hash_shift^Se)&k.hash_mask,"HASH_ZLIB");const zt=s(k=>{const he=k.state;let Se=he.pending;Se>k.avail_out&&(Se=k.avail_out),Se!==0&&(k.output.set(he.pending_buf.subarray(he.pending_out,he.pending_out+Se),k.next_out),k.next_out+=Se,he.pending_out+=Se,k.total_out+=Se,k.avail_out-=Se,he.pending-=Se,he.pending===0&&(he.pending_out=0))},"flush_pending"),Yt=s((k,he)=>{m(k,k.block_start>=0?k.block_start:-1,k.strstart-k.block_start,he),k.block_start=k.strstart,zt(k.strm)},"flush_block_only"),Mt=s((k,he)=>{k.pending_buf[k.pending++]=he},"put_byte"),Vt=s((k,he)=>{k.pending_buf[k.pending++]=he>>>8&255,k.pending_buf[k.pending++]=he&255},"putShortMSB"),$t=s((k,he,Se,be)=>{let te=k.avail_in;return te>be&&(te=be),te===0?0:(k.avail_in-=te,he.set(k.input.subarray(k.next_in,k.next_in+te),Se),k.state.wrap===1?k.adler=r(k.adler,he,te,Se):k.state.wrap===2&&(k.adler=n(k.adler,he,te,Se)),k.next_in+=te,k.total_in+=te,te)},"read_buf"),xt=s((k,he)=>{let Se=k.max_chain_length,be=k.strstart,te,Nt,nt=k.prev_length,mt=k.nice_match;const pn=k.strstart>k.w_size-je?k.strstart-(k.w_size-je):0,Pt=k.window,Mi=k.w_mask,ai=k.prev,un=k.strstart+Me;let Hn=Pt[be+nt-1],mn=Pt[be+nt];k.prev_length>=k.good_match&&(Se>>=2),mt>k.lookahead&&(mt=k.lookahead);do if(te=he,!(Pt[te+nt]!==mn||Pt[te+nt-1]!==Hn||Pt[te]!==Pt[be]||Pt[++te]!==Pt[be+1])){be+=2,te++;do;while(Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&Pt[++be]===Pt[++te]&&be<un);if(Nt=Me-(un-be),be=un-Me,Nt>nt){if(k.match_start=he,nt=Nt,Nt>=mt)break;Hn=Pt[be+nt-1],mn=Pt[be+nt]}}while((he=ai[he&Mi])>pn&&--Se!==0);return nt<=k.lookahead?nt:k.lookahead},"longest_match"),jt=s(k=>{const he=k.w_size;let Se,be,te,Nt,nt;do{if(Nt=k.window_size-k.lookahead-k.strstart,k.strstart>=he+(he-je)){k.window.set(k.window.subarray(he,he+he),0),k.match_start-=he,k.strstart-=he,k.block_start-=he,be=k.hash_size,Se=be;do te=k.head[--Se],k.head[Se]=te>=he?te-he:0;while(--be);be=he,Se=be;do te=k.prev[--Se],k.prev[Se]=te>=he?te-he:0;while(--be);Nt+=he}if(k.strm.avail_in===0)break;if(be=$t(k.strm,k.window,k.strstart+k.lookahead,Nt),k.lookahead+=be,k.lookahead+k.insert>=Ce)for(nt=k.strstart-k.insert,k.ins_h=k.window[nt],k.ins_h=yn(k,k.ins_h,k.window[nt+1]);k.insert&&(k.ins_h=yn(k,k.ins_h,k.window[nt+Ce-1]),k.prev[nt&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=nt,nt++,k.insert--,!(k.lookahead+k.insert<Ce)););}while(k.lookahead<je&&k.strm.avail_in!==0)},"fill_window"),J=s((k,he)=>{let Se=65535;for(Se>k.pending_buf_size-5&&(Se=k.pending_buf_size-5);;){if(k.lookahead<=1){if(jt(k),k.lookahead===0&&he===t)return xe;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;const be=k.block_start+Se;if((k.strstart===0||k.strstart>=be)&&(k.lookahead=k.strstart-be,k.strstart=be,Yt(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-je&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=0,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):(k.strstart>k.block_start&&(Yt(k,!1),k.strm.avail_out===0),xe)},"deflate_stored"),Fe=s((k,he)=>{let Se,be;for(;;){if(k.lookahead<je){if(jt(k),k.lookahead<je&&he===t)return xe;if(k.lookahead===0)break}if(Se=0,k.lookahead>=Ce&&(k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),Se!==0&&k.strstart-Se<=k.w_size-je&&(k.match_length=xt(k,Se)),k.match_length>=Ce)if(be=p(k,k.strstart-k.match_start,k.match_length-Ce),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=Ce){k.match_length--;do k.strstart++,k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart;while(--k.match_length!==0);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=yn(k,k.ins_h,k.window[k.strstart+1]);else be=p(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(be&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=k.strstart<Ce-1?k.strstart:Ce-1,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_fast"),ke=s((k,he)=>{let Se,be,te;for(;;){if(k.lookahead<je){if(jt(k),k.lookahead<je&&he===t)return xe;if(k.lookahead===0)break}if(Se=0,k.lookahead>=Ce&&(k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=Ce-1,Se!==0&&k.prev_length<k.max_lazy_match&&k.strstart-Se<=k.w_size-je&&(k.match_length=xt(k,Se),k.match_length<=5&&(k.strategy===T||k.match_length===Ce&&k.strstart-k.match_start>4096)&&(k.match_length=Ce-1)),k.prev_length>=Ce&&k.match_length<=k.prev_length){te=k.strstart+k.lookahead-Ce,be=p(k,k.strstart-1-k.prev_match,k.prev_length-Ce),k.lookahead-=k.prev_length-1,k.prev_length-=2;do++k.strstart<=te&&(k.ins_h=yn(k,k.ins_h,k.window[k.strstart+Ce-1]),Se=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart);while(--k.prev_length!==0);if(k.match_available=0,k.match_length=Ce-1,k.strstart++,be&&(Yt(k,!1),k.strm.avail_out===0))return xe}else if(k.match_available){if(be=p(k,0,k.window[k.strstart-1]),be&&Yt(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return xe}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(be=p(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<Ce-1?k.strstart:Ce-1,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_slow"),Ge=s((k,he)=>{let Se,be,te,Nt;const nt=k.window;for(;;){if(k.lookahead<=Me){if(jt(k),k.lookahead<=Me&&he===t)return xe;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=Ce&&k.strstart>0&&(te=k.strstart-1,be=nt[te],be===nt[++te]&&be===nt[++te]&&be===nt[++te])){Nt=k.strstart+Me;do;while(be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&be===nt[++te]&&te<Nt);k.match_length=Me-(Nt-te),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=Ce?(Se=p(k,1,k.match_length-Ce),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(Se=p(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),Se&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=0,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_rle"),gt=s((k,he)=>{let Se;for(;;){if(k.lookahead===0&&(jt(k),k.lookahead===0)){if(he===t)return xe;break}if(k.match_length=0,Se=p(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,Se&&(Yt(k,!1),k.strm.avail_out===0))return xe}return k.insert=0,he===f?(Yt(k,!0),k.strm.avail_out===0?At:Lt):k.last_lit&&(Yt(k,!1),k.strm.avail_out===0)?xe:Ct},"deflate_huff");function at(k,he,Se,be,te){this.good_length=k,this.max_lazy=he,this.nice_length=Se,this.max_chain=be,this.func=te}s(at,"Config");const ae=[new at(0,0,0,0,J),new at(4,4,8,4,Fe),new at(4,5,16,8,Fe),new at(4,6,32,32,Fe),new at(4,4,16,16,ke),new at(8,16,32,32,ke),new at(8,16,128,128,ke),new at(8,32,128,256,ke),new at(32,128,258,1024,ke),new at(32,258,258,4096,ke)],Le=s(k=>{k.window_size=2*k.w_size,ln(k.head),k.max_lazy_match=ae[k.level].max_lazy,k.good_match=ae[k.level].good_length,k.nice_match=ae[k.level].nice_length,k.max_chain_length=ae[k.level].max_chain,k.strstart=0,k.block_start=0,k.lookahead=0,k.insert=0,k.match_length=k.prev_length=Ce-1,k.match_available=0,k.ins_h=0},"lm_init");function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Be*2),this.dyn_dtree=new Uint16Array((2*pe+1)*2),this.bl_tree=new Uint16Array((2*Ee+1)*2),ln(this.dyn_ltree),ln(this.dyn_dtree),ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(it+1),this.heap=new Uint16Array(2*ie+1),ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ie+1),ln(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}s(G,"DeflateState");const Z=s(k=>{if(!k||!k.state)return Jt(k,v);k.total_in=k.total_out=0,k.data_type=R;const he=k.state;return he.pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?Ze:Ke,k.adler=he.wrap===2?0:1,he.last_flush=t,c(he),S},"deflateResetKeep"),me=s(k=>{const he=Z(k);return he===S&&Le(k.state),he},"deflateReset"),ge=s((k,he)=>!k||!k.state||k.state.wrap!==2?v:(k.state.gzhead=he,S),"deflateSetHeader"),rt=s((k,he,Se,be,te,Nt)=>{if(!k)return v;let nt=1;if(he===C&&(he=6),be<0?(nt=0,be=-be):be>15&&(nt=2,be-=16),te<1||te>V||Se!==F||be<8||be>15||he<0||he>9||Nt<0||Nt>D)return Jt(k,v);be===8&&(be=9);const mt=new G;return k.state=mt,mt.strm=k,mt.wrap=nt,mt.gzhead=null,mt.w_bits=be,mt.w_size=1<<mt.w_bits,mt.w_mask=mt.w_size-1,mt.hash_bits=te+7,mt.hash_size=1<<mt.hash_bits,mt.hash_mask=mt.hash_size-1,mt.hash_shift=~~((mt.hash_bits+Ce-1)/Ce),mt.window=new Uint8Array(mt.w_size*2),mt.head=new Uint16Array(mt.hash_size),mt.prev=new Uint16Array(mt.w_size),mt.lit_bufsize=1<<te+6,mt.pending_buf_size=mt.lit_bufsize*4,mt.pending_buf=new Uint8Array(mt.pending_buf_size),mt.d_buf=1*mt.lit_bufsize,mt.l_buf=(1+2)*mt.lit_bufsize,mt.level=he,mt.strategy=Nt,mt.method=Se,me(k)},"deflateInit2"),Ue=s((k,he)=>rt(k,he,F,$,X,M),"deflateInit"),Xe=s((k,he)=>{let Se,be;if(!k||!k.state||he>g||he<0)return k?Jt(k,v):v;const te=k.state;if(!k.output||!k.input&&k.avail_in!==0||te.status===Ye&&he!==f)return Jt(k,k.avail_out===0?_:v);te.strm=k;const Nt=te.last_flush;if(te.last_flush=he,te.status===Ze)if(te.wrap===2)k.adler=0,Mt(te,31),Mt(te,139),Mt(te,8),te.gzhead?(Mt(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),Mt(te,te.gzhead.time&255),Mt(te,te.gzhead.time>>8&255),Mt(te,te.gzhead.time>>16&255),Mt(te,te.gzhead.time>>24&255),Mt(te,te.level===9?2:te.strategy>=A||te.level<2?4:0),Mt(te,te.gzhead.os&255),te.gzhead.extra&&te.gzhead.extra.length&&(Mt(te,te.gzhead.extra.length&255),Mt(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(k.adler=n(k.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=ft):(Mt(te,0),Mt(te,0),Mt(te,0),Mt(te,0),Mt(te,0),Mt(te,te.level===9?2:te.strategy>=A||te.level<2?4:0),Mt(te,Ft),te.status=Ke);else{let nt=F+(te.w_bits-8<<4)<<8,mt=-1;te.strategy>=A||te.level<2?mt=0:te.level<6?mt=1:te.level===6?mt=2:mt=3,nt|=mt<<6,te.strstart!==0&&(nt|=We),nt+=31-nt%31,te.status=Ke,Vt(te,nt),te.strstart!==0&&(Vt(te,k.adler>>>16),Vt(te,k.adler&65535)),k.adler=1}if(te.status===ft)if(te.gzhead.extra){for(Se=te.pending;te.gzindex<(te.gzhead.extra.length&65535)&&!(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),zt(k),Se=te.pending,te.pending===te.pending_buf_size));)Mt(te,te.gzhead.extra[te.gzindex]&255),te.gzindex++;te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=vt)}else te.status=vt;if(te.status===vt)if(te.gzhead.name){Se=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),zt(k),Se=te.pending,te.pending===te.pending_buf_size)){be=1;break}te.gzindex<te.gzhead.name.length?be=te.gzhead.name.charCodeAt(te.gzindex++)&255:be=0,Mt(te,be)}while(be!==0);te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),be===0&&(te.gzindex=0,te.status=De)}else te.status=De;if(te.status===De)if(te.gzhead.comment){Se=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),zt(k),Se=te.pending,te.pending===te.pending_buf_size)){be=1;break}te.gzindex<te.gzhead.comment.length?be=te.gzhead.comment.charCodeAt(te.gzindex++)&255:be=0,Mt(te,be)}while(be!==0);te.gzhead.hcrc&&te.pending>Se&&(k.adler=n(k.adler,te.pending_buf,te.pending-Se,Se)),be===0&&(te.status=Pe)}else te.status=Pe;if(te.status===Pe&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&zt(k),te.pending+2<=te.pending_buf_size&&(Mt(te,k.adler&255),Mt(te,k.adler>>8&255),k.adler=0,te.status=Ke)):te.status=Ke),te.pending!==0){if(zt(k),k.avail_out===0)return te.last_flush=-1,S}else if(k.avail_in===0&&It(he)<=It(Nt)&&he!==f)return Jt(k,_);if(te.status===Ye&&k.avail_in!==0)return Jt(k,_);if(k.avail_in!==0||te.lookahead!==0||he!==t&&te.status!==Ye){let nt=te.strategy===A?gt(te,he):te.strategy===O?Ge(te,he):ae[te.level].func(te,he);if((nt===At||nt===Lt)&&(te.status=Ye),nt===xe||nt===At)return k.avail_out===0&&(te.last_flush=-1),S;if(nt===Ct&&(he===i?a(te):he!==g&&(h(te,0,0,!1),he===o&&(ln(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),zt(k),k.avail_out===0))return te.last_flush=-1,S}return he!==f?S:te.wrap<=0?u:(te.wrap===2?(Mt(te,k.adler&255),Mt(te,k.adler>>8&255),Mt(te,k.adler>>16&255),Mt(te,k.adler>>24&255),Mt(te,k.total_in&255),Mt(te,k.total_in>>8&255),Mt(te,k.total_in>>16&255),Mt(te,k.total_in>>24&255)):(Vt(te,k.adler>>>16),Vt(te,k.adler&65535)),zt(k),te.wrap>0&&(te.wrap=-te.wrap),te.pending!==0?S:u)},"deflate"),fe=s(k=>{if(!k||!k.state)return v;const he=k.state.status;return he!==Ze&&he!==ft&&he!==vt&&he!==De&&he!==Pe&&he!==Ke&&he!==Ye?Jt(k,v):(k.state=null,he===Ke?Jt(k,y):S)},"deflateEnd"),Te=s((k,he)=>{let Se=he.length;if(!k||!k.state)return v;const be=k.state,te=be.wrap;if(te===2||te===1&&be.status!==Ze||be.lookahead)return v;if(te===1&&(k.adler=r(k.adler,he,Se,0)),be.wrap=0,Se>=be.w_size){te===0&&(ln(be.head),be.strstart=0,be.block_start=0,be.insert=0);let pn=new Uint8Array(be.w_size);pn.set(he.subarray(Se-be.w_size,Se),0),he=pn,Se=be.w_size}const Nt=k.avail_in,nt=k.next_in,mt=k.input;for(k.avail_in=Se,k.next_in=0,k.input=he,jt(be);be.lookahead>=Ce;){let pn=be.strstart,Pt=be.lookahead-(Ce-1);do be.ins_h=yn(be,be.ins_h,be.window[pn+Ce-1]),be.prev[pn&be.w_mask]=be.head[be.ins_h],be.head[be.ins_h]=pn,pn++;while(--Pt);be.strstart=pn,be.lookahead=Ce-1,jt(be)}return be.strstart+=be.lookahead,be.block_start=be.strstart,be.insert=be.lookahead,be.lookahead=0,be.match_length=be.prev_length=Ce-1,be.match_available=0,k.next_in=nt,k.input=mt,k.avail_in=Nt,be.wrap=te,S},"deflateSetDictionary");x.exports.deflateInit=Ue,x.exports.deflateInit2=rt,x.exports.deflateReset=me,x.exports.deflateResetKeep=Z,x.exports.deflateSetHeader=ge,x.exports.deflate=Xe,x.exports.deflateEnd=fe,x.exports.deflateSetDictionary=Te,x.exports.deflateInfo="pako deflate (from Nodeca project)"},9654919892:x=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s(l,"GZheader"),x.exports=l},1551921669:x=>{"use strict";x.exports=s(function(h,m){let p,a,r,n,e,t,i,o,f,g,S,u,v,y,_,C,T,A,O,D,M,R,F,V;const $=h.state;p=h.next_in,F=h.input,a=p+(h.avail_in-5),r=h.next_out,V=h.output,n=r-(m-h.avail_out),e=r+(h.avail_out-257),t=$.dmax,i=$.wsize,o=$.whave,f=$.wnext,g=$.window,S=$.hold,u=$.bits,v=$.lencode,y=$.distcode,_=(1<<$.lenbits)-1,C=(1<<$.distbits)-1;e:do{u<15&&(S+=F[p++]<<u,u+=8,S+=F[p++]<<u,u+=8),T=v[S&_];t:for(;;){if(A=T>>>24,S>>>=A,u-=A,A=T>>>16&255,A===0)V[r++]=T&65535;else if(A&16){O=T&65535,A&=15,A&&(u<A&&(S+=F[p++]<<u,u+=8),O+=S&(1<<A)-1,S>>>=A,u-=A),u<15&&(S+=F[p++]<<u,u+=8,S+=F[p++]<<u,u+=8),T=y[S&C];n:for(;;){if(A=T>>>24,S>>>=A,u-=A,A=T>>>16&255,A&16){if(D=T&65535,A&=15,u<A&&(S+=F[p++]<<u,u+=8,u<A&&(S+=F[p++]<<u,u+=8)),D+=S&(1<<A)-1,D>t){h.msg="invalid distance too far back",$.mode=30;break e}if(S>>>=A,u-=A,A=r-n,D>A){if(A=D-A,A>o&&$.sane){h.msg="invalid distance too far back",$.mode=30;break e}if(M=0,R=g,f===0){if(M+=i-A,A<O){O-=A;do V[r++]=g[M++];while(--A);M=r-D,R=V}}else if(f<A){if(M+=i+f-A,A-=f,A<O){O-=A;do V[r++]=g[M++];while(--A);if(M=0,f<O){A=f,O-=A;do V[r++]=g[M++];while(--A);M=r-D,R=V}}}else if(M+=f-A,A<O){O-=A;do V[r++]=g[M++];while(--A);M=r-D,R=V}for(;O>2;)V[r++]=R[M++],V[r++]=R[M++],V[r++]=R[M++],O-=3;O&&(V[r++]=R[M++],O>1&&(V[r++]=R[M++]))}else{M=r-D;do V[r++]=V[M++],V[r++]=V[M++],V[r++]=V[M++],O-=3;while(O>2);O&&(V[r++]=V[M++],O>1&&(V[r++]=V[M++]))}}else if(A&64){h.msg="invalid distance code",$.mode=30;break e}else{T=y[(T&65535)+(S&(1<<A)-1)];continue n}break}}else if(A&64)if(A&32){$.mode=12;break e}else{h.msg="invalid literal/length code",$.mode=30;break e}else{T=v[(T&65535)+(S&(1<<A)-1)];continue t}break}}while(p<a&&r<e);O=u>>3,p-=O,u-=O<<3,S&=(1<<u)-1,h.next_in=p,h.next_out=r,h.avail_in=p<a?5+(a-p):5-(p-a),h.avail_out=r<e?257+(e-r):257-(r-e),$.hold=S,$.bits=u},"inflate_fast")},8029791791:(x,l,d)=>{"use strict";const c=d(3145109445),h=d(3332910147),m=d(1551921669),p=d(9262713900),a=0,r=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:f,Z_NEED_DICT:g,Z_STREAM_ERROR:S,Z_DATA_ERROR:u,Z_MEM_ERROR:v,Z_BUF_ERROR:y,Z_DEFLATED:_}=d(9516153853),C=1,T=2,A=3,O=4,D=5,M=6,R=7,F=8,V=9,$=10,X=11,Y=12,ne=13,ie=14,pe=15,Ee=16,Be=17,it=18,Ce=19,Me=20,je=21,We=22,Ze=23,ft=24,vt=25,De=26,Pe=27,Ke=28,Ye=29,xe=30,Ct=31,At=32,Lt=852,Ft=592,It=15,ln=s(ae=>(ae>>>24&255)+(ae>>>8&65280)+((ae&65280)<<8)+((ae&255)<<24),"zswap32");function $n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}s($n,"InflateState");const yn=s(ae=>{if(!ae||!ae.state)return S;const Le=ae.state;return ae.total_in=ae.total_out=Le.total=0,ae.msg="",Le.wrap&&(ae.adler=Le.wrap&1),Le.mode=C,Le.last=0,Le.havedict=0,Le.dmax=32768,Le.head=null,Le.hold=0,Le.bits=0,Le.lencode=Le.lendyn=new Int32Array(Lt),Le.distcode=Le.distdyn=new Int32Array(Ft),Le.sane=1,Le.back=-1,o},"inflateResetKeep"),zt=s(ae=>{if(!ae||!ae.state)return S;const Le=ae.state;return Le.wsize=0,Le.whave=0,Le.wnext=0,yn(ae)},"inflateReset"),Yt=s((ae,Le)=>{let G;if(!ae||!ae.state)return S;const Z=ae.state;return Le<0?(G=0,Le=-Le):(G=(Le>>4)+1,Le<48&&(Le&=15)),Le&&(Le<8||Le>15)?S:(Z.window!==null&&Z.wbits!==Le&&(Z.window=null),Z.wrap=G,Z.wbits=Le,zt(ae))},"inflateReset2"),Mt=s((ae,Le)=>{if(!ae)return S;const G=new $n;ae.state=G,G.window=null;const Z=Yt(ae,Le);return Z!==o&&(ae.state=null),Z},"inflateInit2"),Vt=s(ae=>Mt(ae,It),"inflateInit");let $t=!0,xt,jt;const J=s(ae=>{if($t){xt=new Int32Array(512),jt=new Int32Array(32);let Le=0;for(;Le<144;)ae.lens[Le++]=8;for(;Le<256;)ae.lens[Le++]=9;for(;Le<280;)ae.lens[Le++]=7;for(;Le<288;)ae.lens[Le++]=8;for(p(r,ae.lens,0,288,xt,0,ae.work,{bits:9}),Le=0;Le<32;)ae.lens[Le++]=5;p(n,ae.lens,0,32,jt,0,ae.work,{bits:5}),$t=!1}ae.lencode=xt,ae.lenbits=9,ae.distcode=jt,ae.distbits=5},"fixedtables"),Fe=s((ae,Le,G,Z)=>{let me;const ge=ae.state;return ge.window===null&&(ge.wsize=1<<ge.wbits,ge.wnext=0,ge.whave=0,ge.window=new Uint8Array(ge.wsize)),Z>=ge.wsize?(ge.window.set(Le.subarray(G-ge.wsize,G),0),ge.wnext=0,ge.whave=ge.wsize):(me=ge.wsize-ge.wnext,me>Z&&(me=Z),ge.window.set(Le.subarray(G-Z,G-Z+me),ge.wnext),Z-=me,Z?(ge.window.set(Le.subarray(G-Z,G),0),ge.wnext=Z,ge.whave=ge.wsize):(ge.wnext+=me,ge.wnext===ge.wsize&&(ge.wnext=0),ge.whave<ge.wsize&&(ge.whave+=me))),0},"updatewindow"),ke=s((ae,Le)=>{let G,Z,me,ge,rt,Ue,Xe,fe,Te,k,he,Se,be,te,Nt=0,nt,mt,pn,Pt,Mi,ai,un,Hn;const mn=new Uint8Array(4);let li,Kn;const lr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!ae||!ae.state||!ae.output||!ae.input&&ae.avail_in!==0)return S;G=ae.state,G.mode===Y&&(G.mode=ne),rt=ae.next_out,me=ae.output,Xe=ae.avail_out,ge=ae.next_in,Z=ae.input,Ue=ae.avail_in,fe=G.hold,Te=G.bits,k=Ue,he=Xe,Hn=o;e:for(;;)switch(G.mode){case C:if(G.wrap===0){G.mode=ne;break}for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(G.wrap&2&&fe===35615){G.check=0,mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0),fe=0,Te=0,G.mode=T;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((fe&255)<<8)+(fe>>8))%31){ae.msg="incorrect header check",G.mode=xe;break}if((fe&15)!==_){ae.msg="unknown compression method",G.mode=xe;break}if(fe>>>=4,Te-=4,un=(fe&15)+8,G.wbits===0)G.wbits=un;else if(un>G.wbits){ae.msg="invalid window size",G.mode=xe;break}G.dmax=1<<G.wbits,ae.adler=G.check=1,G.mode=fe&512?$:Y,fe=0,Te=0;break;case T:for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(G.flags=fe,(G.flags&255)!==_){ae.msg="unknown compression method",G.mode=xe;break}if(G.flags&57344){ae.msg="unknown header flags set",G.mode=xe;break}G.head&&(G.head.text=fe>>8&1),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0)),fe=0,Te=0,G.mode=A;case A:for(;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.head&&(G.head.time=fe),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,mn[2]=fe>>>16&255,mn[3]=fe>>>24&255,G.check=h(G.check,mn,4,0)),fe=0,Te=0,G.mode=O;case O:for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.head&&(G.head.xflags=fe&255,G.head.os=fe>>8),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0)),fe=0,Te=0,G.mode=D;case D:if(G.flags&1024){for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.length=fe,G.head&&(G.head.extra_len=fe),G.flags&512&&(mn[0]=fe&255,mn[1]=fe>>>8&255,G.check=h(G.check,mn,2,0)),fe=0,Te=0}else G.head&&(G.head.extra=null);G.mode=M;case M:if(G.flags&1024&&(Se=G.length,Se>Ue&&(Se=Ue),Se&&(G.head&&(un=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Uint8Array(G.head.extra_len)),G.head.extra.set(Z.subarray(ge,ge+Se),un)),G.flags&512&&(G.check=h(G.check,Z,Se,ge)),Ue-=Se,ge+=Se,G.length-=Se),G.length))break e;G.length=0,G.mode=R;case R:if(G.flags&2048){if(Ue===0)break e;Se=0;do un=Z[ge+Se++],G.head&&un&&G.length<65536&&(G.head.name+=String.fromCharCode(un));while(un&&Se<Ue);if(G.flags&512&&(G.check=h(G.check,Z,Se,ge)),Ue-=Se,ge+=Se,un)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=F;case F:if(G.flags&4096){if(Ue===0)break e;Se=0;do un=Z[ge+Se++],G.head&&un&&G.length<65536&&(G.head.comment+=String.fromCharCode(un));while(un&&Se<Ue);if(G.flags&512&&(G.check=h(G.check,Z,Se,ge)),Ue-=Se,ge+=Se,un)break e}else G.head&&(G.head.comment=null);G.mode=V;case V:if(G.flags&512){for(;Te<16;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(fe!==(G.check&65535)){ae.msg="header crc mismatch",G.mode=xe;break}fe=0,Te=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),ae.adler=G.check=0,G.mode=Y;break;case $:for(;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}ae.adler=G.check=ln(fe),fe=0,Te=0,G.mode=X;case X:if(G.havedict===0)return ae.next_out=rt,ae.avail_out=Xe,ae.next_in=ge,ae.avail_in=Ue,G.hold=fe,G.bits=Te,g;ae.adler=G.check=1,G.mode=Y;case Y:if(Le===t||Le===i)break e;case ne:if(G.last){fe>>>=Te&7,Te-=Te&7,G.mode=Pe;break}for(;Te<3;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}switch(G.last=fe&1,fe>>>=1,Te-=1,fe&3){case 0:G.mode=ie;break;case 1:if(J(G),G.mode=Me,Le===i){fe>>>=2,Te-=2;break e}break;case 2:G.mode=Be;break;case 3:ae.msg="invalid block type",G.mode=xe}fe>>>=2,Te-=2;break;case ie:for(fe>>>=Te&7,Te-=Te&7;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if((fe&65535)!==(fe>>>16^65535)){ae.msg="invalid stored block lengths",G.mode=xe;break}if(G.length=fe&65535,fe=0,Te=0,G.mode=pe,Le===i)break e;case pe:G.mode=Ee;case Ee:if(Se=G.length,Se){if(Se>Ue&&(Se=Ue),Se>Xe&&(Se=Xe),Se===0)break e;me.set(Z.subarray(ge,ge+Se),rt),Ue-=Se,ge+=Se,Xe-=Se,rt+=Se,G.length-=Se;break}G.mode=Y;break;case Be:for(;Te<14;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(G.nlen=(fe&31)+257,fe>>>=5,Te-=5,G.ndist=(fe&31)+1,fe>>>=5,Te-=5,G.ncode=(fe&15)+4,fe>>>=4,Te-=4,G.nlen>286||G.ndist>30){ae.msg="too many length or distance symbols",G.mode=xe;break}G.have=0,G.mode=it;case it:for(;G.have<G.ncode;){for(;Te<3;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.lens[lr[G.have++]]=fe&7,fe>>>=3,Te-=3}for(;G.have<19;)G.lens[lr[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,li={bits:G.lenbits},Hn=p(a,G.lens,0,19,G.lencode,0,G.work,li),G.lenbits=li.bits,Hn){ae.msg="invalid code lengths set",G.mode=xe;break}G.have=0,G.mode=Ce;case Ce:for(;G.have<G.nlen+G.ndist;){for(;Nt=G.lencode[fe&(1<<G.lenbits)-1],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(pn<16)fe>>>=nt,Te-=nt,G.lens[G.have++]=pn;else{if(pn===16){for(Kn=nt+2;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(fe>>>=nt,Te-=nt,G.have===0){ae.msg="invalid bit length repeat",G.mode=xe;break}un=G.lens[G.have-1],Se=3+(fe&3),fe>>>=2,Te-=2}else if(pn===17){for(Kn=nt+3;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=nt,Te-=nt,un=0,Se=3+(fe&7),fe>>>=3,Te-=3}else{for(Kn=nt+7;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=nt,Te-=nt,un=0,Se=11+(fe&127),fe>>>=7,Te-=7}if(G.have+Se>G.nlen+G.ndist){ae.msg="invalid bit length repeat",G.mode=xe;break}for(;Se--;)G.lens[G.have++]=un}}if(G.mode===xe)break;if(G.lens[256]===0){ae.msg="invalid code -- missing end-of-block",G.mode=xe;break}if(G.lenbits=9,li={bits:G.lenbits},Hn=p(r,G.lens,0,G.nlen,G.lencode,0,G.work,li),G.lenbits=li.bits,Hn){ae.msg="invalid literal/lengths set",G.mode=xe;break}if(G.distbits=6,G.distcode=G.distdyn,li={bits:G.distbits},Hn=p(n,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,li),G.distbits=li.bits,Hn){ae.msg="invalid distances set",G.mode=xe;break}if(G.mode=Me,Le===i)break e;case Me:G.mode=je;case je:if(Ue>=6&&Xe>=258){ae.next_out=rt,ae.avail_out=Xe,ae.next_in=ge,ae.avail_in=Ue,G.hold=fe,G.bits=Te,m(ae,he),rt=ae.next_out,me=ae.output,Xe=ae.avail_out,ge=ae.next_in,Z=ae.input,Ue=ae.avail_in,fe=G.hold,Te=G.bits,G.mode===Y&&(G.back=-1);break}for(G.back=0;Nt=G.lencode[fe&(1<<G.lenbits)-1],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(mt&&!(mt&240)){for(Pt=nt,Mi=mt,ai=pn;Nt=G.lencode[ai+((fe&(1<<Pt+Mi)-1)>>Pt)],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(Pt+nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=Pt,Te-=Pt,G.back+=Pt}if(fe>>>=nt,Te-=nt,G.back+=nt,G.length=pn,mt===0){G.mode=De;break}if(mt&32){G.back=-1,G.mode=Y;break}if(mt&64){ae.msg="invalid literal/length code",G.mode=xe;break}G.extra=mt&15,G.mode=We;case We:if(G.extra){for(Kn=G.extra;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.length+=fe&(1<<G.extra)-1,fe>>>=G.extra,Te-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=Ze;case Ze:for(;Nt=G.distcode[fe&(1<<G.distbits)-1],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(!(mt&240)){for(Pt=nt,Mi=mt,ai=pn;Nt=G.distcode[ai+((fe&(1<<Pt+Mi)-1)>>Pt)],nt=Nt>>>24,mt=Nt>>>16&255,pn=Nt&65535,!(Pt+nt<=Te);){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}fe>>>=Pt,Te-=Pt,G.back+=Pt}if(fe>>>=nt,Te-=nt,G.back+=nt,mt&64){ae.msg="invalid distance code",G.mode=xe;break}G.offset=pn,G.extra=mt&15,G.mode=ft;case ft:if(G.extra){for(Kn=G.extra;Te<Kn;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}G.offset+=fe&(1<<G.extra)-1,fe>>>=G.extra,Te-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){ae.msg="invalid distance too far back",G.mode=xe;break}G.mode=vt;case vt:if(Xe===0)break e;if(Se=he-Xe,G.offset>Se){if(Se=G.offset-Se,Se>G.whave&&G.sane){ae.msg="invalid distance too far back",G.mode=xe;break}Se>G.wnext?(Se-=G.wnext,be=G.wsize-Se):be=G.wnext-Se,Se>G.length&&(Se=G.length),te=G.window}else te=me,be=rt-G.offset,Se=G.length;Se>Xe&&(Se=Xe),Xe-=Se,G.length-=Se;do me[rt++]=te[be++];while(--Se);G.length===0&&(G.mode=je);break;case De:if(Xe===0)break e;me[rt++]=G.length,Xe--,G.mode=je;break;case Pe:if(G.wrap){for(;Te<32;){if(Ue===0)break e;Ue--,fe|=Z[ge++]<<Te,Te+=8}if(he-=Xe,ae.total_out+=he,G.total+=he,he&&(ae.adler=G.check=G.flags?h(G.check,me,he,rt-he):c(G.check,me,he,rt-he)),he=Xe,(G.flags?fe:ln(fe))!==G.check){ae.msg="incorrect data check",G.mode=xe;break}fe=0,Te=0}G.mode=Ke;case Ke:if(G.wrap&&G.flags){for(;Te<32;){if(Ue===0)break e;Ue--,fe+=Z[ge++]<<Te,Te+=8}if(fe!==(G.total&4294967295)){ae.msg="incorrect length check",G.mode=xe;break}fe=0,Te=0}G.mode=Ye;case Ye:Hn=f;break e;case xe:Hn=u;break e;case Ct:return v;case At:default:return S}return ae.next_out=rt,ae.avail_out=Xe,ae.next_in=ge,ae.avail_in=Ue,G.hold=fe,G.bits=Te,(G.wsize||he!==ae.avail_out&&G.mode<xe&&(G.mode<Pe||Le!==e))&&Fe(ae,ae.output,ae.next_out,he-ae.avail_out)?(G.mode=Ct,v):(k-=ae.avail_in,he-=ae.avail_out,ae.total_in+=k,ae.total_out+=he,G.total+=he,G.wrap&&he&&(ae.adler=G.check=G.flags?h(G.check,me,he,ae.next_out-he):c(G.check,me,he,ae.next_out-he)),ae.data_type=G.bits+(G.last?64:0)+(G.mode===Y?128:0)+(G.mode===Me||G.mode===pe?256:0),(k===0&&he===0||Le===e)&&Hn===o&&(Hn=y),Hn)},"inflate"),Ge=s(ae=>{if(!ae||!ae.state)return S;let Le=ae.state;return Le.window&&(Le.window=null),ae.state=null,o},"inflateEnd"),gt=s((ae,Le)=>{if(!ae||!ae.state)return S;const G=ae.state;return G.wrap&2?(G.head=Le,Le.done=!1,o):S},"inflateGetHeader"),at=s((ae,Le)=>{const G=Le.length;let Z,me,ge;return!ae||!ae.state||(Z=ae.state,Z.wrap!==0&&Z.mode!==X)?S:Z.mode===X&&(me=1,me=c(me,Le,G,0),me!==Z.check)?u:(ge=Fe(ae,Le,G,G),ge?(Z.mode=Ct,v):(Z.havedict=1,o))},"inflateSetDictionary");x.exports.inflateReset=zt,x.exports.inflateReset2=Yt,x.exports.inflateResetKeep=yn,x.exports.inflateInit=Vt,x.exports.inflateInit2=Mt,x.exports.inflate=ke,x.exports.inflateEnd=Ge,x.exports.inflateGetHeader=gt,x.exports.inflateSetDictionary=at,x.exports.inflateInfo="pako inflate (from Nodeca project)"},9262713900:x=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=s((i,o,f,g,S,u,v,y)=>{const _=y.bits;let C=0,T=0,A=0,O=0,D=0,M=0,R=0,F=0,V=0,$=0,X,Y,ne,ie,pe,Ee=null,Be=0,it;const Ce=new Uint16Array(15+1),Me=new Uint16Array(15+1);let je=null,We=0,Ze,ft,vt;for(C=0;C<=15;C++)Ce[C]=0;for(T=0;T<g;T++)Ce[o[f+T]]++;for(D=_,O=15;O>=1&&Ce[O]===0;O--);if(D>O&&(D=O),O===0)return S[u++]=1<<24|64<<16|0,S[u++]=1<<24|64<<16|0,y.bits=1,0;for(A=1;A<O&&Ce[A]===0;A++);for(D<A&&(D=A),F=1,C=1;C<=15;C++)if(F<<=1,F-=Ce[C],F<0)return-1;if(F>0&&(i===0||O!==1))return-1;for(Me[1]=0,C=1;C<15;C++)Me[C+1]=Me[C]+Ce[C];for(T=0;T<g;T++)o[f+T]!==0&&(v[Me[o[f+T]]++]=T);if(i===0?(Ee=je=v,it=19):i===1?(Ee=a,Be-=257,je=r,We-=257,it=256):(Ee=n,je=e,it=-1),$=0,T=0,C=A,pe=u,M=D,R=0,ne=-1,V=1<<D,ie=V-1,i===1&&V>852||i===2&&V>592)return 1;for(;;){Ze=C-R,v[T]<it?(ft=0,vt=v[T]):v[T]>it?(ft=je[We+v[T]],vt=Ee[Be+v[T]]):(ft=32+64,vt=0),X=1<<C-R,Y=1<<M,A=Y;do Y-=X,S[pe+($>>R)+Y]=Ze<<24|ft<<16|vt|0;while(Y!==0);for(X=1<<C-1;$&X;)X>>=1;if(X!==0?($&=X-1,$+=X):$=0,T++,--Ce[C]===0){if(C===O)break;C=o[f+v[T]]}if(C>D&&($&ie)!==ne){for(R===0&&(R=D),pe+=A,M=C-R,F=1<<M;M+R<O&&(F-=Ce[M+R],!(F<=0));)M++,F<<=1;if(V+=1<<M,i===1&&V>852||i===2&&V>592)return 1;ne=$&ie,S[ne]=D<<24|M<<16|pe-u|0}}return $!==0&&(S[pe+$]=C-R<<24|64<<16|0),y.bits=D,0},"inflate_table");x.exports=t},4276546412:x=>{"use strict";x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4407910137:x=>{"use strict";function m(J){let Fe=J.length;for(;--Fe>=0;)J[Fe]=0}s(m,"zero");const p=0,a=1,r=2,n=3,e=258,t=29,i=256,o=i+1+t,f=30,g=19,S=2*o+1,u=15,v=16,y=7,_=256,C=16,T=17,A=18,O=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),D=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F=512,V=new Array((o+2)*2);m(V);const $=new Array(f*2);m($);const X=new Array(F);m(X);const Y=new Array(e-n+1);m(Y);const ne=new Array(t);m(ne);const ie=new Array(f);m(ie);function pe(J,Fe,ke,Ge,gt){this.static_tree=J,this.extra_bits=Fe,this.extra_base=ke,this.elems=Ge,this.max_length=gt,this.has_stree=J&&J.length}s(pe,"StaticTreeDesc");let Ee,Be,it;function Ce(J,Fe){this.dyn_tree=J,this.max_code=0,this.stat_desc=Fe}s(Ce,"TreeDesc");const Me=s(J=>J<256?X[J]:X[256+(J>>>7)],"d_code"),je=s((J,Fe)=>{J.pending_buf[J.pending++]=Fe&255,J.pending_buf[J.pending++]=Fe>>>8&255},"put_short"),We=s((J,Fe,ke)=>{J.bi_valid>v-ke?(J.bi_buf|=Fe<<J.bi_valid&65535,je(J,J.bi_buf),J.bi_buf=Fe>>v-J.bi_valid,J.bi_valid+=ke-v):(J.bi_buf|=Fe<<J.bi_valid&65535,J.bi_valid+=ke)},"send_bits"),Ze=s((J,Fe,ke)=>{We(J,ke[Fe*2],ke[Fe*2+1])},"send_code"),ft=s((J,Fe)=>{let ke=0;do ke|=J&1,J>>>=1,ke<<=1;while(--Fe>0);return ke>>>1},"bi_reverse"),vt=s(J=>{J.bi_valid===16?(je(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)},"bi_flush"),De=s((J,Fe)=>{const ke=Fe.dyn_tree,Ge=Fe.max_code,gt=Fe.stat_desc.static_tree,at=Fe.stat_desc.has_stree,ae=Fe.stat_desc.extra_bits,Le=Fe.stat_desc.extra_base,G=Fe.stat_desc.max_length;let Z,me,ge,rt,Ue,Xe,fe=0;for(rt=0;rt<=u;rt++)J.bl_count[rt]=0;for(ke[J.heap[J.heap_max]*2+1]=0,Z=J.heap_max+1;Z<S;Z++)me=J.heap[Z],rt=ke[ke[me*2+1]*2+1]+1,rt>G&&(rt=G,fe++),ke[me*2+1]=rt,!(me>Ge)&&(J.bl_count[rt]++,Ue=0,me>=Le&&(Ue=ae[me-Le]),Xe=ke[me*2],J.opt_len+=Xe*(rt+Ue),at&&(J.static_len+=Xe*(gt[me*2+1]+Ue)));if(fe!==0){do{for(rt=G-1;J.bl_count[rt]===0;)rt--;J.bl_count[rt]--,J.bl_count[rt+1]+=2,J.bl_count[G]--,fe-=2}while(fe>0);for(rt=G;rt!==0;rt--)for(me=J.bl_count[rt];me!==0;)ge=J.heap[--Z],!(ge>Ge)&&(ke[ge*2+1]!==rt&&(J.opt_len+=(rt-ke[ge*2+1])*ke[ge*2],ke[ge*2+1]=rt),me--)}},"gen_bitlen"),Pe=s((J,Fe,ke)=>{const Ge=new Array(u+1);let gt=0,at,ae;for(at=1;at<=u;at++)Ge[at]=gt=gt+ke[at-1]<<1;for(ae=0;ae<=Fe;ae++){let Le=J[ae*2+1];Le!==0&&(J[ae*2]=ft(Ge[Le]++,Le))}},"gen_codes"),Ke=s(()=>{let J,Fe,ke,Ge,gt;const at=new Array(u+1);for(ke=0,Ge=0;Ge<t-1;Ge++)for(ne[Ge]=ke,J=0;J<1<<O[Ge];J++)Y[ke++]=Ge;for(Y[ke-1]=Ge,gt=0,Ge=0;Ge<16;Ge++)for(ie[Ge]=gt,J=0;J<1<<D[Ge];J++)X[gt++]=Ge;for(gt>>=7;Ge<f;Ge++)for(ie[Ge]=gt<<7,J=0;J<1<<D[Ge]-7;J++)X[256+gt++]=Ge;for(Fe=0;Fe<=u;Fe++)at[Fe]=0;for(J=0;J<=143;)V[J*2+1]=8,J++,at[8]++;for(;J<=255;)V[J*2+1]=9,J++,at[9]++;for(;J<=279;)V[J*2+1]=7,J++,at[7]++;for(;J<=287;)V[J*2+1]=8,J++,at[8]++;for(Pe(V,o+1,at),J=0;J<f;J++)$[J*2+1]=5,$[J*2]=ft(J,5);Ee=new pe(V,O,i+1,o,u),Be=new pe($,D,0,f,u),it=new pe(new Array(0),M,0,g,y)},"tr_static_init"),Ye=s(J=>{let Fe;for(Fe=0;Fe<o;Fe++)J.dyn_ltree[Fe*2]=0;for(Fe=0;Fe<f;Fe++)J.dyn_dtree[Fe*2]=0;for(Fe=0;Fe<g;Fe++)J.bl_tree[Fe*2]=0;J.dyn_ltree[_*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0},"init_block"),xe=s(J=>{J.bi_valid>8?je(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0},"bi_windup"),Ct=s((J,Fe,ke,Ge)=>{xe(J),Ge&&(je(J,ke),je(J,~ke)),J.pending_buf.set(J.window.subarray(Fe,Fe+ke),J.pending),J.pending+=ke},"copy_block"),At=s((J,Fe,ke,Ge)=>{const gt=Fe*2,at=ke*2;return J[gt]<J[at]||J[gt]===J[at]&&Ge[Fe]<=Ge[ke]},"smaller"),Lt=s((J,Fe,ke)=>{const Ge=J.heap[ke];let gt=ke<<1;for(;gt<=J.heap_len&&(gt<J.heap_len&&At(Fe,J.heap[gt+1],J.heap[gt],J.depth)&&gt++,!At(Fe,Ge,J.heap[gt],J.depth));)J.heap[ke]=J.heap[gt],ke=gt,gt<<=1;J.heap[ke]=Ge},"pqdownheap"),Ft=s((J,Fe,ke)=>{let Ge,gt,at=0,ae,Le;if(J.last_lit!==0)do Ge=J.pending_buf[J.d_buf+at*2]<<8|J.pending_buf[J.d_buf+at*2+1],gt=J.pending_buf[J.l_buf+at],at++,Ge===0?Ze(J,gt,Fe):(ae=Y[gt],Ze(J,ae+i+1,Fe),Le=O[ae],Le!==0&&(gt-=ne[ae],We(J,gt,Le)),Ge--,ae=Me(Ge),Ze(J,ae,ke),Le=D[ae],Le!==0&&(Ge-=ie[ae],We(J,Ge,Le)));while(at<J.last_lit);Ze(J,_,Fe)},"compress_block"),Jt=s((J,Fe)=>{const ke=Fe.dyn_tree,Ge=Fe.stat_desc.static_tree,gt=Fe.stat_desc.has_stree,at=Fe.stat_desc.elems;let ae,Le,G=-1,Z;for(J.heap_len=0,J.heap_max=S,ae=0;ae<at;ae++)ke[ae*2]!==0?(J.heap[++J.heap_len]=G=ae,J.depth[ae]=0):ke[ae*2+1]=0;for(;J.heap_len<2;)Z=J.heap[++J.heap_len]=G<2?++G:0,ke[Z*2]=1,J.depth[Z]=0,J.opt_len--,gt&&(J.static_len-=Ge[Z*2+1]);for(Fe.max_code=G,ae=J.heap_len>>1;ae>=1;ae--)Lt(J,ke,ae);Z=at;do ae=J.heap[1],J.heap[1]=J.heap[J.heap_len--],Lt(J,ke,1),Le=J.heap[1],J.heap[--J.heap_max]=ae,J.heap[--J.heap_max]=Le,ke[Z*2]=ke[ae*2]+ke[Le*2],J.depth[Z]=(J.depth[ae]>=J.depth[Le]?J.depth[ae]:J.depth[Le])+1,ke[ae*2+1]=ke[Le*2+1]=Z,J.heap[1]=Z++,Lt(J,ke,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],De(J,Fe),Pe(ke,G,J.bl_count)},"build_tree"),It=s((J,Fe,ke)=>{let Ge,gt=-1,at,ae=Fe[0*2+1],Le=0,G=7,Z=4;for(ae===0&&(G=138,Z=3),Fe[(ke+1)*2+1]=65535,Ge=0;Ge<=ke;Ge++)at=ae,ae=Fe[(Ge+1)*2+1],!(++Le<G&&at===ae)&&(Le<Z?J.bl_tree[at*2]+=Le:at!==0?(at!==gt&&J.bl_tree[at*2]++,J.bl_tree[C*2]++):Le<=10?J.bl_tree[T*2]++:J.bl_tree[A*2]++,Le=0,gt=at,ae===0?(G=138,Z=3):at===ae?(G=6,Z=3):(G=7,Z=4))},"scan_tree"),ln=s((J,Fe,ke)=>{let Ge,gt=-1,at,ae=Fe[0*2+1],Le=0,G=7,Z=4;for(ae===0&&(G=138,Z=3),Ge=0;Ge<=ke;Ge++)if(at=ae,ae=Fe[(Ge+1)*2+1],!(++Le<G&&at===ae)){if(Le<Z)do Ze(J,at,J.bl_tree);while(--Le!==0);else at!==0?(at!==gt&&(Ze(J,at,J.bl_tree),Le--),Ze(J,C,J.bl_tree),We(J,Le-3,2)):Le<=10?(Ze(J,T,J.bl_tree),We(J,Le-3,3)):(Ze(J,A,J.bl_tree),We(J,Le-11,7));Le=0,gt=at,ae===0?(G=138,Z=3):at===ae?(G=6,Z=3):(G=7,Z=4)}},"send_tree"),$n=s(J=>{let Fe;for(It(J,J.dyn_ltree,J.l_desc.max_code),It(J,J.dyn_dtree,J.d_desc.max_code),Jt(J,J.bl_desc),Fe=g-1;Fe>=3&&J.bl_tree[R[Fe]*2+1]===0;Fe--);return J.opt_len+=3*(Fe+1)+5+5+4,Fe},"build_bl_tree"),yn=s((J,Fe,ke,Ge)=>{let gt;for(We(J,Fe-257,5),We(J,ke-1,5),We(J,Ge-4,4),gt=0;gt<Ge;gt++)We(J,J.bl_tree[R[gt]*2+1],3);ln(J,J.dyn_ltree,Fe-1),ln(J,J.dyn_dtree,ke-1)},"send_all_trees"),zt=s(J=>{let Fe=4093624447,ke;for(ke=0;ke<=31;ke++,Fe>>>=1)if(Fe&1&&J.dyn_ltree[ke*2]!==0)return 0;if(J.dyn_ltree[9*2]!==0||J.dyn_ltree[10*2]!==0||J.dyn_ltree[13*2]!==0)return 1;for(ke=32;ke<i;ke++)if(J.dyn_ltree[ke*2]!==0)return 1;return 0},"detect_data_type");let Yt=!1;const Mt=s(J=>{Yt||(Ke(),Yt=!0),J.l_desc=new Ce(J.dyn_ltree,Ee),J.d_desc=new Ce(J.dyn_dtree,Be),J.bl_desc=new Ce(J.bl_tree,it),J.bi_buf=0,J.bi_valid=0,Ye(J)},"_tr_init"),Vt=s((J,Fe,ke,Ge)=>{We(J,(p<<1)+(Ge?1:0),3),Ct(J,Fe,ke,!0)},"_tr_stored_block"),$t=s(J=>{We(J,a<<1,3),Ze(J,_,V),vt(J)},"_tr_align"),xt=s((J,Fe,ke,Ge)=>{let gt,at,ae=0;J.level>0?(J.strm.data_type===2&&(J.strm.data_type=zt(J)),Jt(J,J.l_desc),Jt(J,J.d_desc),ae=$n(J),gt=J.opt_len+3+7>>>3,at=J.static_len+3+7>>>3,at<=gt&&(gt=at)):gt=at=ke+5,ke+4<=gt&&Fe!==-1?Vt(J,Fe,ke,Ge):J.strategy===4||at===gt?(We(J,(a<<1)+(Ge?1:0),3),Ft(J,V,$)):(We(J,(r<<1)+(Ge?1:0),3),yn(J,J.l_desc.max_code+1,J.d_desc.max_code+1,ae+1),Ft(J,J.dyn_ltree,J.dyn_dtree)),Ye(J),Ge&&xe(J)},"_tr_flush_block"),jt=s((J,Fe,ke)=>(J.pending_buf[J.d_buf+J.last_lit*2]=Fe>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=Fe&255,J.pending_buf[J.l_buf+J.last_lit]=ke&255,J.last_lit++,Fe===0?J.dyn_ltree[ke*2]++:(J.matches++,Fe--,J.dyn_ltree[(Y[ke]+i+1)*2]++,J.dyn_dtree[Me(Fe)*2]++),J.last_lit===J.lit_bufsize-1),"_tr_tally");x.exports._tr_init=Mt,x.exports._tr_stored_block=Vt,x.exports._tr_flush_block=xt,x.exports._tr_tally=jt,x.exports._tr_align=$t},8079600486:x=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s(l,"ZStream"),x.exports=l},7232944804:(x,l,d)=>{"use strict";x.exports=d(2045210164)},2045210164:(x,l,d)=>{"use strict";var c=l;c.build="minimal",c.Writer=d(7628345881),c.BufferWriter=d(4314741704),c.Reader=d(4066972109),c.BufferReader=d(5398895804),c.util=d(6381418898),c.rpc=d(9851642381),c.roots=d(2285340147),c.configure=h;function h(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}s(h,"configure"),h()},4066972109:(x,l,d)=>{"use strict";x.exports=r;var c=d(6381418898),h,m=c.LongBits,p=c.utf8;function a(f,g){return RangeError("index out of range: "+f.pos+" + "+(g||1)+" > "+f.len)}s(a,"indexOutOfRange");function r(f){this.buf=f,this.pos=0,this.len=f.length}s(r,"Reader");var n=typeof Uint8Array<"u"?s(function(g){if(g instanceof Uint8Array||Array.isArray(g))return new r(g);throw Error("illegal buffer")},"create_typed_array"):s(function(g){if(Array.isArray(g))return new r(g);throw Error("illegal buffer")},"create_array"),e=s(function(){return c.Buffer?s(function(S){return(r.create=s(function(v){return c.Buffer.isBuffer(v)?new h(v):n(v)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");r.create=e(),r.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,r.prototype.uint32=s(function(){var g=4294967295;return s(function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return g},"read_uint32")},"read_uint32_setup")(),r.prototype.int32=s(function(){return this.uint32()|0},"read_int32"),r.prototype.sint32=s(function(){var g=this.uint32();return g>>>1^-(g&1)|0},"read_sint32");function t(){var f=new m(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw a(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,f}if(this.len-this.pos>4){for(;g<5;++g)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;g<5;++g){if(this.pos>=this.len)throw a(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}s(t,"readLongVarint"),r.prototype.bool=s(function(){return this.uint32()!==0},"read_bool");function i(f,g){return(f[g-4]|f[g-3]<<8|f[g-2]<<16|f[g-1]<<24)>>>0}s(i,"readFixed32_end"),r.prototype.fixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),r.prototype.sfixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new m(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}s(o,"readFixed64"),r.prototype.float=s(function(){if(this.pos+4>this.len)throw a(this,4);var g=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},"read_float"),r.prototype.double=s(function(){if(this.pos+8>this.len)throw a(this,4);var g=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},"read_double"),r.prototype.bytes=s(function(){var g=this.uint32(),S=this.pos,u=this.pos+g;if(u>this.len)throw a(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice(S,u);if(S===u){var v=c.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,u)},"read_bytes"),r.prototype.string=s(function(){var g=this.bytes();return p.read(g,0,g.length)},"read_string"),r.prototype.skip=s(function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw a(this,g);this.pos+=g}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),r.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},r._configure=function(f){h=f,r.create=e(),h._configure();var g=c.Long?"toLong":"toNumber";c.merge(r.prototype,{int64:s(function(){return t.call(this)[g](!1)},"read_int64"),uint64:s(function(){return t.call(this)[g](!0)},"read_uint64"),sint64:s(function(){return t.call(this).zzDecode()[g](!1)},"read_sint64"),fixed64:s(function(){return o.call(this)[g](!0)},"read_fixed64"),sfixed64:s(function(){return o.call(this)[g](!1)},"read_sfixed64")})}},5398895804:(x,l,d)=>{"use strict";x.exports=m;var c=d(4066972109);(m.prototype=Object.create(c.prototype)).constructor=m;var h=d(6381418898);function m(p){c.call(this,p)}s(m,"BufferReader"),m._configure=function(){h.Buffer&&(m.prototype._slice=h.Buffer.prototype.slice)},m.prototype.string=s(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),m._configure()},2285340147:x=>{"use strict";x.exports={}},9851642381:(x,l,d)=>{"use strict";var c=l;c.Service=d(6359991721)},6359991721:(x,l,d)=>{"use strict";x.exports=h;var c=d(6381418898);(h.prototype=Object.create(c.EventEmitter.prototype)).constructor=h;function h(m,p,a){if(typeof m!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=m,this.requestDelimited=Boolean(p),this.responseDelimited=Boolean(a)}s(h,"Service"),h.prototype.rpcCall=s(function m(p,a,r,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return c.asPromise(m,t,p,a,r,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(p,a[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),s(function(o,f){if(o)return t.emit("error",o,p),e(o);if(f===null){t.end(!0);return}if(!(f instanceof r))try{f=r[t.responseDelimited?"decodeDelimited":"decode"](f)}catch(g){return t.emit("error",g,p),e(g)}return t.emit("data",f,p),e(null,f)},"rpcCallback"))}catch(i){t.emit("error",i,p),setTimeout(function(){e(i)},0);return}},"rpcCall"),h.prototype.end=s(function(p){return this.rpcImpl&&(p||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},3157215629:(x,l,d)=>{"use strict";x.exports=h;var c=d(6381418898);function h(r,n){this.lo=r>>>0,this.hi=n>>>0}s(h,"LongBits");var m=h.zero=new h(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var p=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=s(function(n){if(n===0)return m;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new h(t,i)},"fromNumber"),h.from=s(function(n){if(typeof n=="number")return h.fromNumber(n);if(c.isString(n))if(c.Long)n=c.Long.fromString(n);else return h.fromNumber(parseInt(n,10));return n.low||n.high?new h(n.low>>>0,n.high>>>0):m},"from"),h.prototype.toNumber=s(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=s(function(n){return c.Long?new c.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=s(function(n){return n===p?m:new h((a.call(n,0)|a.call(n,1)<<8|a.call(n,2)<<16|a.call(n,3)<<24)>>>0,(a.call(n,4)|a.call(n,5)<<8|a.call(n,6)<<16|a.call(n,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=s(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=s(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),h.prototype.zzDecode=s(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),h.prototype.length=s(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6381418898:function(x,l,d){"use strict";var c=l;c.asPromise=d(7410930532),c.base64=d(3824736026),c.EventEmitter=d(6627060659),c.float=d(6797650127),c.inquire=d(3923667175),c.utf8=d(4612067386),c.pool=d(3002561995),c.LongBits=d(3157215629),c.isNode=Boolean(typeof d.g<"u"&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),c.global=c.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||s(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),c.isString=s(function(a){return typeof a=="string"||a instanceof String},"isString"),c.isObject=s(function(a){return a&&typeof a=="object"},"isObject"),c.isset=c.isSet=s(function(a,r){var n=a[r];return n!=null&&a.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),c.Buffer=function(){try{var p=c.inquire("buffer").Buffer;return p.prototype.utf8Write?p:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=s(function(a){return typeof a=="number"?c.Buffer?c._Buffer_allocUnsafe(a):new c.Array(a):c.Buffer?c._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=s(function(a){return a?c.LongBits.from(a).toHash():c.LongBits.zeroHash},"longToHash"),c.longFromHash=s(function(a,r){var n=c.LongBits.fromHash(a);return c.Long?c.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},"longFromHash");function h(p,a,r){for(var n=Object.keys(a),e=0;e<n.length;++e)(p[n[e]]===void 0||!r)&&(p[n[e]]=a[n[e]]);return p}s(h,"merge"),c.merge=h,c.lcFirst=s(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function m(p){function a(r,n){if(!(this instanceof a))return new a(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&h(this,n)}return s(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:s(function(){return p},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:s(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}s(m,"newError"),c.newError=m,c.ProtocolError=m("ProtocolError"),c.oneOfGetter=s(function(a){for(var r={},n=0;n<a.length;++n)r[a[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),c.oneOfSetter=s(function(a){return function(r){for(var n=0;n<a.length;++n)a[n]!==r&&delete this[a[n]]}},"setOneOf"),c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var p=c.Buffer;if(!p){c._Buffer_from=c._Buffer_allocUnsafe=null;return}c._Buffer_from=p.from!==Uint8Array.from&&p.from||s(function(r,n){return new p(r,n)},"Buffer_from"),c._Buffer_allocUnsafe=p.allocUnsafe||s(function(r){return new p(r)},"Buffer_allocUnsafe")}},7628345881:(x,l,d)=>{"use strict";x.exports=t;var c=d(6381418898),h,m=c.LongBits,p=c.base64,a=c.utf8;function r(y,_,C){this.fn=y,this.len=_,this.next=void 0,this.val=C}s(r,"Op");function n(){}s(n,"noop");function e(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}s(e,"State");function t(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}s(t,"Writer");var i=s(function(){return c.Buffer?s(function(){return(t.create=s(function(){return new h},"create_buffer"))()},"create_buffer_setup"):s(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=s(function(_){return new c.Array(_)},"alloc"),c.Array!==Array&&(t.alloc=c.pool(t.alloc,c.Array.prototype.subarray)),t.prototype._push=s(function(_,C,T){return this.tail=this.tail.next=new r(_,C,T),this.len+=C,this},"push");function o(y,_,C){_[C]=y&255}s(o,"writeByte");function f(y,_,C){for(;y>127;)_[C++]=y&127|128,y>>>=7;_[C]=y}s(f,"writeVarint32");function g(y,_){this.len=y,this.next=void 0,this.val=_}s(g,"VarintOp"),g.prototype=Object.create(r.prototype),g.prototype.fn=f,t.prototype.uint32=s(function(_){return this.len+=(this.tail=this.tail.next=new g((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this},"write_uint32"),t.prototype.int32=s(function(_){return _<0?this._push(S,10,m.fromNumber(_)):this.uint32(_)},"write_int32"),t.prototype.sint32=s(function(_){return this.uint32((_<<1^_>>31)>>>0)},"write_sint32");function S(y,_,C){for(;y.hi;)_[C++]=y.lo&127|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[C++]=y.lo&127|128,y.lo=y.lo>>>7;_[C++]=y.lo}s(S,"writeVarint64"),t.prototype.uint64=s(function(_){var C=m.from(_);return this._push(S,C.length(),C)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=s(function(_){var C=m.from(_).zzEncode();return this._push(S,C.length(),C)},"write_sint64"),t.prototype.bool=s(function(_){return this._push(o,1,_?1:0)},"write_bool");function u(y,_,C){_[C]=y&255,_[C+1]=y>>>8&255,_[C+2]=y>>>16&255,_[C+3]=y>>>24}s(u,"writeFixed32"),t.prototype.fixed32=s(function(_){return this._push(u,4,_>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=s(function(_){var C=m.from(_);return this._push(u,4,C.lo)._push(u,4,C.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=s(function(_){return this._push(c.float.writeFloatLE,4,_)},"write_float"),t.prototype.double=s(function(_){return this._push(c.float.writeDoubleLE,8,_)},"write_double");var v=c.Array.prototype.set?s(function(_,C,T){C.set(_,T)},"writeBytes_set"):s(function(_,C,T){for(var A=0;A<_.length;++A)C[T+A]=_[A]},"writeBytes_for");t.prototype.bytes=s(function(_){var C=_.length>>>0;if(!C)return this._push(o,1,0);if(c.isString(_)){var T=t.alloc(C=p.length(_));p.decode(_,T,0),_=T}return this.uint32(C)._push(v,C,_)},"write_bytes"),t.prototype.string=s(function(_){var C=a.length(_);return C?this.uint32(C)._push(a.write,C,_):this._push(o,1,0)},"write_string"),t.prototype.fork=s(function(){return this.states=new e(this),this.head=this.tail=new r(n,0,0),this.len=0,this},"fork"),t.prototype.reset=s(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=s(function(){var _=this.head,C=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=_.next,this.tail=C,this.len+=T),this},"ldelim"),t.prototype.finish=s(function(){for(var _=this.head.next,C=this.constructor.alloc(this.len),T=0;_;)_.fn(_.val,C,T),T+=_.len,_=_.next;return C},"finish"),t._configure=function(y){h=y,t.create=i(),h._configure()}},4314741704:(x,l,d)=>{"use strict";x.exports=m;var c=d(7628345881);(m.prototype=Object.create(c.prototype)).constructor=m;var h=d(6381418898);function m(){c.call(this)}s(m,"BufferWriter"),m._configure=function(){m.alloc=h._Buffer_allocUnsafe,m.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?s(function(r,n,e){n.set(r,e)},"writeBytesBuffer_set"):s(function(r,n,e){if(r.copy)r.copy(n,e,0,r.length);else for(var t=0;t<r.length;)n[e++]=r[t++]},"writeBytesBuffer_copy")},m.prototype.bytes=s(function(r){h.isString(r)&&(r=h._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(m.writeBytesBuffer,n,r),this},"write_bytes_buffer");function p(a,r,n){a.length<40?h.utf8.write(a,r,n):r.utf8Write?r.utf8Write(a,n):r.write(a,n)}s(p,"writeStringBuffer"),m.prototype.string=s(function(r){var n=h.Buffer.byteLength(r);return this.uint32(n),n&&this._push(p,n,r),this},"write_string_buffer"),m._configure()},8400004479:(x,l,d)=>{"use strict";d.r(l),d.d(l,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>y,__asyncValues:()=>C,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>D,__classPrivateFieldSet:()=>M,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>h,__generator:()=>t,__importDefault:()=>O,__importStar:()=>A,__makeTemplateObject:()=>T,__metadata:()=>n,__param:()=>r,__read:()=>g,__rest:()=>p,__spread:()=>S,__spreadArrays:()=>u,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c=s(function(R,F){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,$){V.__proto__=$}||function(V,$){for(var X in $)$.hasOwnProperty(X)&&(V[X]=$[X])},c(R,F)},"extendStatics");function h(R,F){c(R,F);function V(){this.constructor=R}s(V,"__"),R.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V)}s(h,"__extends");var m=s(function(){return m=Object.assign||s(function(F){for(var V,$=1,X=arguments.length;$<X;$++){V=arguments[$];for(var Y in V)Object.prototype.hasOwnProperty.call(V,Y)&&(F[Y]=V[Y])}return F},"__assign"),m.apply(this,arguments)},"__assign");function p(R,F){var V={};for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&F.indexOf($)<0&&(V[$]=R[$]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,$=Object.getOwnPropertySymbols(R);X<$.length;X++)F.indexOf($[X])<0&&Object.prototype.propertyIsEnumerable.call(R,$[X])&&(V[$[X]]=R[$[X]]);return V}s(p,"__rest");function a(R,F,V,$){var X=arguments.length,Y=X<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,V):$,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(R,F,V,$);else for(var ie=R.length-1;ie>=0;ie--)(ne=R[ie])&&(Y=(X<3?ne(Y):X>3?ne(F,V,Y):ne(F,V))||Y);return X>3&&Y&&Object.defineProperty(F,V,Y),Y}s(a,"__decorate");function r(R,F){return function(V,$){F(V,$,R)}}s(r,"__param");function n(R,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,F)}s(n,"__metadata");function e(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return s(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(Be){try{Ee($.next(Be))}catch(it){ne(it)}}s(ie,"fulfilled");function pe(Be){try{Ee($.throw(Be))}catch(it){ne(it)}}s(pe,"rejected");function Ee(Be){Be.done?Y(Be.value):X(Be.value).then(ie,pe)}s(Ee,"step"),Ee(($=$.apply(R,F||[])).next())})}s(e,"__awaiter");function t(R,F){var V={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},$,X,Y,ne;return ne={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(ne[Symbol.iterator]=function(){return this}),ne;function ie(Ee){return function(Be){return pe([Ee,Be])}}function pe(Ee){if($)throw new TypeError("Generator is already executing.");for(;V;)try{if($=1,X&&(Y=Ee[0]&2?X.return:Ee[0]?X.throw||((Y=X.return)&&Y.call(X),0):X.next)&&!(Y=Y.call(X,Ee[1])).done)return Y;switch(X=0,Y&&(Ee=[Ee[0]&2,Y.value]),Ee[0]){case 0:case 1:Y=Ee;break;case 4:return V.label++,{value:Ee[1],done:!1};case 5:V.label++,X=Ee[1],Ee=[0];continue;case 7:Ee=V.ops.pop(),V.trys.pop();continue;default:if(Y=V.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(Ee[0]===6||Ee[0]===2)){V=0;continue}if(Ee[0]===3&&(!Y||Ee[1]>Y[0]&&Ee[1]<Y[3])){V.label=Ee[1];break}if(Ee[0]===6&&V.label<Y[1]){V.label=Y[1],Y=Ee;break}if(Y&&V.label<Y[2]){V.label=Y[2],V.ops.push(Ee);break}Y[2]&&V.ops.pop(),V.trys.pop();continue}Ee=F.call(R,V)}catch(Be){Ee=[6,Be],X=0}finally{$=Y=0}if(Ee[0]&5)throw Ee[1];return{value:Ee[0]?Ee[1]:void 0,done:!0}}}s(t,"__generator");function i(R,F,V,$){$===void 0&&($=V),R[$]=F[V]}s(i,"__createBinding");function o(R,F){for(var V in R)V!=="default"&&!F.hasOwnProperty(V)&&(F[V]=R[V])}s(o,"__exportStar");function f(R){var F=typeof Symbol=="function"&&Symbol.iterator,V=F&&R[F],$=0;if(V)return V.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&$>=R.length&&(R=void 0),{value:R&&R[$++],done:!R}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}s(f,"__values");function g(R,F){var V=typeof Symbol=="function"&&R[Symbol.iterator];if(!V)return R;var $=V.call(R),X,Y=[],ne;try{for(;(F===void 0||F-- >0)&&!(X=$.next()).done;)Y.push(X.value)}catch(ie){ne={error:ie}}finally{try{X&&!X.done&&(V=$.return)&&V.call($)}finally{if(ne)throw ne.error}}return Y}s(g,"__read");function S(){for(var R=[],F=0;F<arguments.length;F++)R=R.concat(g(arguments[F]));return R}s(S,"__spread");function u(){for(var R=0,F=0,V=arguments.length;F<V;F++)R+=arguments[F].length;for(var $=Array(R),X=0,F=0;F<V;F++)for(var Y=arguments[F],ne=0,ie=Y.length;ne<ie;ne++,X++)$[X]=Y[ne];return $}s(u,"__spreadArrays");function v(R){return this instanceof v?(this.v=R,this):new v(R)}s(v,"__await");function y(R,F,V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=V.apply(R,F||[]),X,Y=[];return X={},ne("next"),ne("throw"),ne("return"),X[Symbol.asyncIterator]=function(){return this},X;function ne(Ce){$[Ce]&&(X[Ce]=function(Me){return new Promise(function(je,We){Y.push([Ce,Me,je,We])>1||ie(Ce,Me)})})}function ie(Ce,Me){try{pe($[Ce](Me))}catch(je){it(Y[0][3],je)}}function pe(Ce){Ce.value instanceof v?Promise.resolve(Ce.value.v).then(Ee,Be):it(Y[0][2],Ce)}function Ee(Ce){ie("next",Ce)}function Be(Ce){ie("throw",Ce)}function it(Ce,Me){Ce(Me),Y.shift(),Y.length&&ie(Y[0][0],Y[0][1])}}s(y,"__asyncGenerator");function _(R){var F,V;return F={},$("next"),$("throw",function(X){throw X}),$("return"),F[Symbol.iterator]=function(){return this},F;function $(X,Y){F[X]=R[X]?function(ne){return(V=!V)?{value:v(R[X](ne)),done:X==="return"}:Y?Y(ne):ne}:Y}}s(_,"__asyncDelegator");function C(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=R[Symbol.asyncIterator],V;return F?F.call(R):(R=typeof f=="function"?f(R):R[Symbol.iterator](),V={},$("next"),$("throw"),$("return"),V[Symbol.asyncIterator]=function(){return this},V);function $(Y){V[Y]=R[Y]&&function(ne){return new Promise(function(ie,pe){ne=R[Y](ne),X(ie,pe,ne.done,ne.value)})}}function X(Y,ne,ie,pe){Promise.resolve(pe).then(function(Ee){Y({value:Ee,done:ie})},ne)}}s(C,"__asyncValues");function T(R,F){return Object.defineProperty?Object.defineProperty(R,"raw",{value:F}):R.raw=F,R}s(T,"__makeTemplateObject");function A(R){if(R&&R.__esModule)return R;var F={};if(R!=null)for(var V in R)Object.hasOwnProperty.call(R,V)&&(F[V]=R[V]);return F.default=R,F}s(A,"__importStar");function O(R){return R&&R.__esModule?R:{default:R}}s(O,"__importDefault");function D(R,F){if(!F.has(R))throw new TypeError("attempted to get private field on non-instance");return F.get(R)}s(D,"__classPrivateFieldGet");function M(R,F,V){if(!F.has(R))throw new TypeError("attempted to set private field on non-instance");return F.set(R,V),V}s(M,"__classPrivateFieldSet")},888724265:function(x,l,d){var c;(function(h,m){"use strict";var p="1.0.38",a="",r="?",n="function",e="undefined",t="object",i="string",o="major",f="model",g="name",S="type",u="vendor",v="version",y="architecture",_="console",C="mobile",T="tablet",A="smarttv",O="wearable",D="embedded",M=500,R="Amazon",F="Apple",V="ASUS",$="BlackBerry",X="Browser",Y="Chrome",ne="Edge",ie="Firefox",pe="Google",Ee="Huawei",Be="LG",it="Microsoft",Ce="Motorola",Me="Opera",je="Samsung",We="Sharp",Ze="Sony",ft="Xiaomi",vt="Zebra",De="Facebook",Pe="Chromium OS",Ke="Mac OS",Ye=s(function(Vt,$t){var xt={};for(var jt in Vt)$t[jt]&&$t[jt].length%2===0?xt[jt]=$t[jt].concat(Vt[jt]):xt[jt]=Vt[jt];return xt},"extend"),xe=s(function(Vt){for(var $t={},xt=0;xt<Vt.length;xt++)$t[Vt[xt].toUpperCase()]=Vt[xt];return $t},"enumerize"),Ct=s(function(Vt,$t){return typeof Vt===i?At($t).indexOf(At(Vt))!==-1:!1},"has"),At=s(function(Vt){return Vt.toLowerCase()},"lowerize"),Lt=s(function(Vt){return typeof Vt===i?Vt.replace(/[^\d\.]/g,a).split(".")[0]:m},"majorize"),Ft=s(function(Vt,$t){if(typeof Vt===i)return Vt=Vt.replace(/^\s\s*/,a),typeof $t===e?Vt:Vt.substring(0,M)},"trim"),Jt=s(function(Vt,$t){for(var xt=0,jt,J,Fe,ke,Ge,gt;xt<$t.length&&!Ge;){var at=$t[xt],ae=$t[xt+1];for(jt=J=0;jt<at.length&&!Ge&&at[jt];)if(Ge=at[jt++].exec(Vt),Ge)for(Fe=0;Fe<ae.length;Fe++)gt=Ge[++J],ke=ae[Fe],typeof ke===t&&ke.length>0?ke.length===2?typeof ke[1]==n?this[ke[0]]=ke[1].call(this,gt):this[ke[0]]=ke[1]:ke.length===3?typeof ke[1]===n&&!(ke[1].exec&&ke[1].test)?this[ke[0]]=gt?ke[1].call(this,gt,ke[2]):m:this[ke[0]]=gt?gt.replace(ke[1],ke[2]):m:ke.length===4&&(this[ke[0]]=gt?ke[3].call(this,gt.replace(ke[1],ke[2])):m):this[ke]=gt||m;xt+=2}},"rgxMapper"),It=s(function(Vt,$t){for(var xt in $t)if(typeof $t[xt]===t&&$t[xt].length>0){for(var jt=0;jt<$t[xt].length;jt++)if(Ct($t[xt][jt],Vt))return xt===r?m:xt}else if(Ct($t[xt],Vt))return xt===r?m:xt;return Vt},"strMapper"),ln={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},$n={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},yn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,Me+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[g,Me+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[g,Me]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[g,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/\bddg\/([\w\.]+)/i],[v,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+X]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[g,"Smart Lenovo "+X]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+X],v],[/\bfocus\/([\w\.]+)/i],[v,[g,ie+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,Me+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,Me+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI "+X]],[/fxios\/([-\w\.]+)/i],[v,[g,ie]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+X]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+X],v],[/samsungbrowser\/([\w\.]+)/i],[v,[g,je+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],v],[/metasr[\/ ]?([\d\.]+)/i],[v,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[g,v],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,De],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,Y+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,Y+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+X]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,It,ln]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,ie+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,v],[/(cobalt)\/([\w\.]+)/i],[g,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,At]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,a,At]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,At]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[u,je],[S,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[u,je],[S,C]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[u,F],[S,C]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[u,F],[S,T]],[/(macintosh);/i],[f,[u,F]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[u,We],[S,C]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[u,Ee],[S,T]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[u,Ee],[S,C]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[u,ft],[S,C]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[u,ft],[S,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[u,"OPPO"],[S,C]],[/\b(opd2\d{3}a?) bui/i],[f,[u,"OPPO"],[S,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[u,"Vivo"],[S,C]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[u,"Realme"],[S,C]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[u,Ce],[S,C]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[u,Ce],[S,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[u,Be],[S,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[u,Be],[S,C]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[u,"Lenovo"],[S,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[u,"Nokia"],[S,C]],[/(pixel c)\b/i],[f,[u,pe],[S,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[u,pe],[S,C]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[u,Ze],[S,C]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[u,Ze],[S,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[u,"OnePlus"],[S,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[u,R],[S,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[u,R],[S,C]],[/(playbook);[-\w\),; ]+(rim)/i],[f,u,[S,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[u,$],[S,C]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[u,V],[S,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[u,V],[S,C]],[/(nexus 9)/i],[f,[u,"HTC"],[S,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[f,/_/g," "],[S,C]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[u,"Acer"],[S,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[u,"Meizu"],[S,C]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[u,"Ulefone"],[S,C]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,f,[S,C]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,f,[S,T]],[/(surface duo)/i],[f,[u,it],[S,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[u,"Fairphone"],[S,C]],[/(u304aa)/i],[f,[u,"AT&T"],[S,C]],[/\bsie-(\w*)/i],[f,[u,"Siemens"],[S,C]],[/\b(rct\w+) b/i],[f,[u,"RCA"],[S,T]],[/\b(venue[\d ]{2,7}) b/i],[f,[u,"Dell"],[S,T]],[/\b(q(?:mv|ta)\w+) b/i],[f,[u,"Verizon"],[S,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[u,"Barnes & Noble"],[S,T]],[/\b(tm\d{3}\w+) b/i],[f,[u,"NuVision"],[S,T]],[/\b(k88) b/i],[f,[u,"ZTE"],[S,T]],[/\b(nx\d{3}j) b/i],[f,[u,"ZTE"],[S,C]],[/\b(gen\d{3}) b.+49h/i],[f,[u,"Swiss"],[S,C]],[/\b(zur\d{3}) b/i],[f,[u,"Swiss"],[S,T]],[/\b((zeki)?tb.*\b) b/i],[f,[u,"Zeki"],[S,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],f,[S,T]],[/\b(ns-?\w{0,9}) b/i],[f,[u,"Insignia"],[S,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[u,"NextBook"],[S,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],f,[S,C]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],f,[S,C]],[/\b(ph-1) /i],[f,[u,"Essential"],[S,C]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[u,"Envizen"],[S,T]],[/\b(trio[-\w\. ]+) b/i],[f,[u,"MachSpeed"],[S,T]],[/\btu_(1491) b/i],[f,[u,"Rotor"],[S,T]],[/(shield[\w ]+) b/i],[f,[u,"Nvidia"],[S,T]],[/(sprint) (\w+)/i],[u,f,[S,C]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[u,it],[S,C]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[u,vt],[S,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[u,vt],[S,C]],[/smart-tv.+(samsung)/i],[u,[S,A]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[u,je],[S,A]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,Be],[S,A]],[/(apple) ?tv/i],[u,[f,F+" TV"],[S,A]],[/crkey/i],[[f,Y+"cast"],[u,pe],[S,A]],[/droid.+aft(\w+)( bui|\))/i],[f,[u,R],[S,A]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[u,We],[S,A]],[/(bravia[\w ]+)( bui|\))/i],[f,[u,Ze],[S,A]],[/(mitv-\w{5}) bui/i],[f,[u,ft],[S,A]],[/Hbbtv.*(technisat) (.*);/i],[u,f,[S,A]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,Ft],[f,Ft],[S,A]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,A]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,f,[S,_]],[/droid.+; (shield) bui/i],[f,[u,"Nvidia"],[S,_]],[/(playstation [345portablevi]+)/i],[f,[u,Ze],[S,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[u,it],[S,_]],[/((pebble))app/i],[u,f,[S,O]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[u,F],[S,O]],[/droid.+; (glass) \d/i],[f,[u,pe],[S,O]],[/droid.+; (wt63?0{2,3})\)/i],[f,[u,vt],[S,O]],[/(quest( \d| pro)?)/i],[f,[u,De],[S,O]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[S,D]],[/(aeobc)\b/i],[f,[u,R],[S,D]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[S,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[S,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,T]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,C]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,ne+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[v,It,$n]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,It,$n],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,Ke],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,$]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,ie+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[g,Y+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,Pe],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,v]]},zt=s(function(Vt,$t){if(typeof Vt===t&&($t=Vt,Vt=m),!(this instanceof zt))return new zt(Vt,$t).getResult();var xt=typeof h!==e&&h.navigator?h.navigator:m,jt=Vt||(xt&&xt.userAgent?xt.userAgent:a),J=xt&&xt.userAgentData?xt.userAgentData:m,Fe=$t?Ye(yn,$t):yn,ke=xt&&xt.userAgent==jt;return this.getBrowser=function(){var Ge={};return Ge[g]=m,Ge[v]=m,Jt.call(Ge,jt,Fe.browser),Ge[o]=Lt(Ge[v]),ke&&xt&&xt.brave&&typeof xt.brave.isBrave==n&&(Ge[g]="Brave"),Ge},this.getCPU=function(){var Ge={};return Ge[y]=m,Jt.call(Ge,jt,Fe.cpu),Ge},this.getDevice=function(){var Ge={};return Ge[u]=m,Ge[f]=m,Ge[S]=m,Jt.call(Ge,jt,Fe.device),ke&&!Ge[S]&&J&&J.mobile&&(Ge[S]=C),ke&&Ge[f]=="Macintosh"&&xt&&typeof xt.standalone!==e&&xt.maxTouchPoints&&xt.maxTouchPoints>2&&(Ge[f]="iPad",Ge[S]=T),Ge},this.getEngine=function(){var Ge={};return Ge[g]=m,Ge[v]=m,Jt.call(Ge,jt,Fe.engine),Ge},this.getOS=function(){var Ge={};return Ge[g]=m,Ge[v]=m,Jt.call(Ge,jt,Fe.os),ke&&!Ge[g]&&J&&J.platform&&J.platform!="Unknown"&&(Ge[g]=J.platform.replace(/chrome os/i,Pe).replace(/macos/i,Ke)),Ge},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return jt},this.setUA=function(Ge){return jt=typeof Ge===i&&Ge.length>M?Ft(Ge,M):Ge,this},this.setUA(jt),this},"UAParser");zt.VERSION=p,zt.BROWSER=xe([g,v,o]),zt.CPU=xe([y]),zt.DEVICE=xe([f,u,S,_,C,A,T,O,D]),zt.ENGINE=zt.OS=xe([g,v]),typeof l!==e?(e!=="object"&&x.exports&&(l=x.exports=zt),l.UAParser=zt):n==="function"&&d.amdO?(c=function(){return zt}.call(l,d,l,x),c!==m&&(x.exports=c)):typeof h!==e&&(h.UAParser=zt);var Yt=typeof h!==e&&(h.jQuery||h.Zepto);if(Yt&&!Yt.ua){var Mt=new zt;Yt.ua=Mt.getResult(),Yt.ua.get=function(){return Mt.getUA()},Yt.ua.set=function(Vt){Mt.setUA(Vt);var $t=Mt.getResult();for(var xt in $t)Yt.ua[xt]=$t[xt]}}})(typeof window=="object"?window:this)},7229287800:x=>{x.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.662.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-chime-sdk-messaging","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.662.0","@aws-sdk/client-sts":"3.662.0","@aws-sdk/core":"3.662.0","@aws-sdk/credential-provider-node":"3.662.0","@aws-sdk/middleware-host-header":"3.662.0","@aws-sdk/middleware-logger":"3.662.0","@aws-sdk/middleware-recursion-detection":"3.662.0","@aws-sdk/middleware-user-agent":"3.662.0","@aws-sdk/region-config-resolver":"3.662.0","@aws-sdk/types":"3.662.0","@aws-sdk/util-endpoints":"3.662.0","@aws-sdk/util-user-agent-browser":"3.662.0","@aws-sdk/util-user-agent-node":"3.662.0","@smithy/config-resolver":"^3.0.9","@smithy/core":"^2.4.7","@smithy/fetch-http-handler":"^3.2.9","@smithy/hash-node":"^3.0.7","@smithy/invalid-dependency":"^3.0.7","@smithy/middleware-content-length":"^3.0.9","@smithy/middleware-endpoint":"^3.1.4","@smithy/middleware-retry":"^3.0.22","@smithy/middleware-serde":"^3.0.7","@smithy/middleware-stack":"^3.0.7","@smithy/node-config-provider":"^3.1.8","@smithy/node-http-handler":"^3.2.4","@smithy/protocol-http":"^4.1.4","@smithy/smithy-client":"^3.3.6","@smithy/types":"^3.5.0","@smithy/url-parser":"^3.0.7","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.22","@smithy/util-defaults-mode-node":"^3.0.22","@smithy/util-endpoints":"^2.1.3","@smithy/util-middleware":"^3.0.7","@smithy/util-retry":"^3.0.7","@smithy/util-utf8":"^3.0.0","tslib":"^2.6.2","uuid":"^9.0.1"},"devDependencies":{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96","@types/uuid":"^9.0.4","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typescript":"~4.9.5"},"engines":{"node":">=16.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},1209174152:x=>{x.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},6439564264:(x,l,d)=>{"use strict";d.d(l,{A:()=>p});var c=d(4116706745),h=d(7577999880);function m(a,r){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}s(m,"LodashWrapper"),m.prototype=(0,c.A)(h.A.prototype),m.prototype.constructor=m;const p=m},7577999880:(x,l,d)=>{"use strict";d.d(l,{A:()=>h});function c(){}s(c,"baseLodash");const h=c},3119888921:(x,l,d)=>{"use strict";d.d(l,{A:()=>h});function c(m,p){return m<p}s(c,"baseLt");const h=c},3046491484:(x,l,d)=>{"use strict";d.d(l,{A:()=>e});var c=d(3940990596),h=d(4059064744),m=d(522166923),p=d(6253409059),a=c.A.isFinite,r=Math.min;function n(t){var i=Math[t];return function(o,f){if(o=(0,m.A)(o),f=f==null?0:r((0,h.A)(f),292),f&&a(o)){var g=((0,p.A)(o)+"e").split("e"),S=i(g[0]+"e"+(+g[1]+f));return g=((0,p.A)(S)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return i(o)}}s(n,"createRound");const e=n},9622574471:(x,l,d)=>{"use strict";d.d(l,{A:()=>lr});var c=d(2236568457),h=d(2524318401),m=h.A?function(kt,Et){return h.A.set(kt,Et),kt}:c.A;const p=m;var a=d(4116706745),r=d(5797466484);function n(kt){return function(){var Et=arguments;switch(Et.length){case 0:return new kt;case 1:return new kt(Et[0]);case 2:return new kt(Et[0],Et[1]);case 3:return new kt(Et[0],Et[1],Et[2]);case 4:return new kt(Et[0],Et[1],Et[2],Et[3]);case 5:return new kt(Et[0],Et[1],Et[2],Et[3],Et[4]);case 6:return new kt(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5]);case 7:return new kt(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5],Et[6])}var Tn=(0,a.A)(kt.prototype),gn=kt.apply(Tn,Et);return(0,r.A)(gn)?gn:Tn}}s(n,"createCtor");const e=n;var t=d(3940990596),i=1;function o(kt,Et,Tn){var gn=Et&i,In=e(kt);function Qn(){var qn=this&&this!==t.A&&this instanceof Qn?In:kt;return qn.apply(gn?Tn:this,arguments)}return s(Qn,"wrapper"),Qn}s(o,"createBind");const f=o;var g=d(4629374672),S=Math.max;function u(kt,Et,Tn,gn){for(var In=-1,Qn=kt.length,qn=Tn.length,Vn=-1,Xn=Et.length,yi=S(Qn-qn,0),Si=Array(Xn+yi),Fn=!gn;++Vn<Xn;)Si[Vn]=Et[Vn];for(;++In<qn;)(Fn||In<Qn)&&(Si[Tn[In]]=kt[In]);for(;yi--;)Si[Vn++]=kt[In++];return Si}s(u,"composeArgs");const v=u;var y=Math.max;function _(kt,Et,Tn,gn){for(var In=-1,Qn=kt.length,qn=-1,Vn=Tn.length,Xn=-1,yi=Et.length,Si=y(Qn-Vn,0),Fn=Array(Si+yi),xi=!gn;++In<Si;)Fn[In]=kt[In];for(var hi=In;++Xn<yi;)Fn[hi+Xn]=Et[Xn];for(;++qn<Vn;)(xi||In<Qn)&&(Fn[hi+Tn[qn]]=kt[In++]);return Fn}s(_,"composeArgsRight");const C=_;function T(kt,Et){for(var Tn=kt.length,gn=0;Tn--;)kt[Tn]===Et&&++gn;return gn}s(T,"countHolders");const A=T;var O=d(934475406),D=d(3968459270),M=(0,D.A)(p);const R=M;var F=/\{\n\/\* \[wrapped with (.+)\] \*/,V=/,? & /;function $(kt){var Et=kt.match(F);return Et?Et[1].split(V):[]}s($,"getWrapDetails");const X=$;var Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ne(kt,Et){var Tn=Et.length;if(!Tn)return kt;var gn=Tn-1;return Et[gn]=(Tn>1?"& ":"")+Et[gn],Et=Et.join(Tn>2?", ":" "),kt.replace(Y,`{
/* [wrapped with `+Et+`] */
`)}s(ne,"insertWrapDetails");const ie=ne;var pe=d(5178179588),Ee=d(5614497032),Be=d(7402177396),it=1,Ce=2,Me=8,je=16,We=32,Ze=64,ft=128,vt=256,De=512,Pe=[["ary",ft],["bind",it],["bindKey",Ce],["curry",Me],["curryRight",je],["flip",De],["partial",We],["partialRight",Ze],["rearg",vt]];function Ke(kt,Et){return(0,Ee.A)(Pe,function(Tn){var gn="_."+Tn[0];Et&Tn[1]&&!(0,Be.A)(kt,gn)&&kt.push(gn)}),kt.sort()}s(Ke,"updateWrapDetails");const Ye=Ke;function xe(kt,Et,Tn){var gn=Et+"";return(0,pe.A)(kt,ie(gn,Ye(X(gn),Tn)))}s(xe,"setWrapToString");const Ct=xe;var At=1,Lt=2,Ft=4,Jt=8,It=32,ln=64;function $n(kt,Et,Tn,gn,In,Qn,qn,Vn,Xn,yi){var Si=Et&Jt,Fn=Si?qn:void 0,xi=Si?void 0:qn,hi=Si?Qn:void 0,Yi=Si?void 0:Qn;Et|=Si?It:ln,Et&=~(Si?ln:It),Et&Ft||(Et&=~(At|Lt));var L=[kt,Et,In,hi,Fn,Yi,xi,Vn,Xn,yi],re=Tn.apply(void 0,L);return(0,O.A)(kt)&&R(re,L),re.placeholder=gn,Ct(re,kt,Et)}s($n,"createRecurry");const yn=$n;var zt=d(8708460378),Yt=d(4885105346),Mt=d(14469648),Vt=Math.min;function $t(kt,Et){for(var Tn=kt.length,gn=Vt(Et.length,Tn),In=(0,Yt.A)(kt);gn--;){var Qn=Et[gn];kt[gn]=(0,Mt.A)(Qn,Tn)?In[Qn]:void 0}return kt}s($t,"reorder");const xt=$t;var jt=d(8625772175),J=1,Fe=2,ke=8,Ge=16,gt=128,at=512;function ae(kt,Et,Tn,gn,In,Qn,qn,Vn,Xn,yi){var Si=Et&gt,Fn=Et&J,xi=Et&Fe,hi=Et&(ke|Ge),Yi=Et&at,L=xi?void 0:e(kt);function re(){for(var we=arguments.length,$e=Array(we),yt=we;yt--;)$e[yt]=arguments[yt];if(hi)var Xt=(0,zt.A)(re),dn=A($e,Xt);if(gn&&($e=v($e,gn,In,hi)),Qn&&($e=C($e,Qn,qn,hi)),we-=dn,hi&&we<yi){var Zt=(0,jt.A)($e,Xt);return yn(kt,Et,ae,re.placeholder,Tn,$e,Zt,Vn,Xn,yi-we)}var qt=Fn?Tn:this,on=xi?qt[kt]:kt;return we=$e.length,Vn?$e=xt($e,Vn):Yi&&we>1&&$e.reverse(),Si&&Xn<we&&($e.length=Xn),this&&this!==t.A&&this instanceof re&&(on=L||e(on)),on.apply(qt,$e)}return s(re,"wrapper"),re}s(ae,"createHybrid");const Le=ae;function G(kt,Et,Tn){var gn=e(kt);function In(){for(var Qn=arguments.length,qn=Array(Qn),Vn=Qn,Xn=(0,zt.A)(In);Vn--;)qn[Vn]=arguments[Vn];var yi=Qn<3&&qn[0]!==Xn&&qn[Qn-1]!==Xn?[]:(0,jt.A)(qn,Xn);if(Qn-=yi.length,Qn<Tn)return yn(kt,Et,Le,In.placeholder,void 0,qn,yi,void 0,void 0,Tn-Qn);var Si=this&&this!==t.A&&this instanceof In?gn:kt;return(0,g.A)(Si,this,qn)}return s(In,"wrapper"),In}s(G,"createCurry");const Z=G;var me=1;function ge(kt,Et,Tn,gn){var In=Et&me,Qn=e(kt);function qn(){for(var Vn=-1,Xn=arguments.length,yi=-1,Si=gn.length,Fn=Array(Si+Xn),xi=this&&this!==t.A&&this instanceof qn?Qn:kt;++yi<Si;)Fn[yi]=gn[yi];for(;Xn--;)Fn[yi++]=arguments[++Vn];return(0,g.A)(xi,In?Tn:this,Fn)}return s(qn,"wrapper"),qn}s(ge,"createPartial");const rt=ge;var Ue=d(1114224892),Xe="__lodash_placeholder__",fe=1,Te=2,k=4,he=8,Se=128,be=256,te=Math.min;function Nt(kt,Et){var Tn=kt[1],gn=Et[1],In=Tn|gn,Qn=In<(fe|Te|Se),qn=gn==Se&&Tn==he||gn==Se&&Tn==be&&kt[7].length<=Et[8]||gn==(Se|be)&&Et[7].length<=Et[8]&&Tn==he;if(!(Qn||qn))return kt;gn&fe&&(kt[2]=Et[2],In|=Tn&fe?0:k);var Vn=Et[3];if(Vn){var Xn=kt[3];kt[3]=Xn?v(Xn,Vn,Et[4]):Vn,kt[4]=Xn?(0,jt.A)(kt[3],Xe):Et[4]}return Vn=Et[5],Vn&&(Xn=kt[5],kt[5]=Xn?C(Xn,Vn,Et[6]):Vn,kt[6]=Xn?(0,jt.A)(kt[5],Xe):Et[6]),Vn=Et[7],Vn&&(kt[7]=Vn),gn&Se&&(kt[8]=kt[8]==null?Et[8]:te(kt[8],Et[8])),kt[9]==null&&(kt[9]=Et[9]),kt[0]=Et[0],kt[1]=In,kt}s(Nt,"mergeData");const nt=Nt;var mt=d(4059064744),pn="Expected a function",Pt=1,Mi=2,ai=8,un=16,Hn=32,mn=64,li=Math.max;function Kn(kt,Et,Tn,gn,In,Qn,qn,Vn){var Xn=Et&Mi;if(!Xn&&typeof kt!="function")throw new TypeError(pn);var yi=gn?gn.length:0;if(yi||(Et&=~(Hn|mn),gn=In=void 0),qn=qn===void 0?qn:li((0,mt.A)(qn),0),Vn=Vn===void 0?Vn:(0,mt.A)(Vn),yi-=In?In.length:0,Et&mn){var Si=gn,Fn=In;gn=In=void 0}var xi=Xn?void 0:(0,Ue.A)(kt),hi=[kt,Et,Tn,gn,In,Si,Fn,Qn,qn,Vn];if(xi&&nt(hi,xi),kt=hi[0],Et=hi[1],Tn=hi[2],gn=hi[3],In=hi[4],Vn=hi[9]=hi[9]===void 0?Xn?0:kt.length:li(hi[9]-yi,0),!Vn&&Et&(ai|un)&&(Et&=~(ai|un)),!Et||Et==Pt)var Yi=f(kt,Et,Tn);else Et==ai||Et==un?Yi=Z(kt,Et,Vn):(Et==Hn||Et==(Pt|Hn))&&!In.length?Yi=rt(kt,Et,Tn,gn):Yi=Le.apply(void 0,hi);var L=xi?p:R;return Ct(L(Yi,hi),kt,Et)}s(Kn,"createWrap");const lr=Kn},1114224892:(x,l,d)=>{"use strict";d.d(l,{A:()=>p});var c=d(2524318401),h=d(7715417323),m=c.A?function(a){return c.A.get(a)}:h.A;const p=m},7667421386:(x,l,d)=>{"use strict";d.d(l,{A:()=>r});var c={};const h=c;var m=Object.prototype,p=m.hasOwnProperty;function a(n){for(var e=n.name+"",t=h[e],i=p.call(h,e)?t.length:0;i--;){var o=t[i],f=o.func;if(f==null||f==n)return o.name}return e}s(a,"getFuncName");const r=a},8708460378:(x,l,d)=>{"use strict";d.d(l,{A:()=>h});function c(m){var p=m;return p.placeholder}s(c,"getHolder");const h=c},934475406:(x,l,d)=>{"use strict";d.d(l,{A:()=>C});var c=d(4116706745),h=d(7577999880),m=4294967295;function p(T){this.__wrapped__=T,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}s(p,"LazyWrapper"),p.prototype=(0,c.A)(h.A.prototype),p.prototype.constructor=p;const a=p;var r=d(1114224892),n=d(7667421386),e=d(6439564264),t=d(9746734072),i=d(1276945623),o=d(4885105346);function f(T){if(T instanceof a)return T.clone();var A=new e.A(T.__wrapped__,T.__chain__);return A.__actions__=(0,o.A)(T.__actions__),A.__index__=T.__index__,A.__values__=T.__values__,A}s(f,"wrapperClone");const g=f;var S=Object.prototype,u=S.hasOwnProperty;function v(T){if((0,i.A)(T)&&!(0,t.A)(T)&&!(T instanceof a)){if(T instanceof e.A)return T;if(u.call(T,"__wrapped__"))return g(T)}return new e.A(T)}s(v,"lodash"),v.prototype=h.A.prototype,v.prototype.constructor=v;const y=v;function _(T){var A=(0,n.A)(T),O=y[A];if(typeof O!="function"||!(A in a.prototype))return!1;if(T===O)return!0;var D=(0,r.A)(O);return!!D&&T===D[0]}s(_,"isLaziable");const C=_},2524318401:(x,l,d)=>{"use strict";d.d(l,{A:()=>m});var c=d(8672092338),h=c.A&&new c.A;const m=h},8625772175:(x,l,d)=>{"use strict";d.d(l,{A:()=>m});var c="__lodash_placeholder__";function h(p,a){for(var r=-1,n=p.length,e=0,t=[];++r<n;){var i=p[r];(i===a||i===c)&&(p[r]=c,t[e++]=r)}return t}s(h,"replaceHolders");const m=h},489015593:(x,l,d)=>{"use strict";d.d(l,{A:()=>S});var c=d(5614497032),h=d(8033247945),m=d(9046884403),p=d(9622574471),a=d(8708460378),r=d(8625772175),n=1,e=32,t=(0,m.A)(function(u,v,y){var _=n;if(y.length){var C=(0,r.A)(y,(0,a.A)(t));_|=e}return(0,p.A)(u,_,v,y,C)});t.placeholder={};const i=t;var o=d(316474953),f=d(3055495996),g=(0,o.A)(function(u,v){return(0,c.A)(v,function(y){y=(0,f.A)(y),(0,h.A)(u,y,i(u[y],u))}),u});const S=g},8424846741:(x,l,d)=>{"use strict";d.d(l,{A:()=>m});var c=d(9746734072);function h(){if(!arguments.length)return[];var p=arguments[0];return(0,c.A)(p)?p:[p]}s(h,"castArray");const m=h},1566461842:(x,l,d)=>{"use strict";d.d(l,{A:()=>t});var c=d(4629374672),h=d(9046884403),m=d(6295853301),p=d(5797466484);function a(i,o,f,g,S,u){return(0,p.A)(i)&&(0,p.A)(o)&&(u.set(o,i),(0,m.A)(i,o,void 0,a,u),u.delete(o)),i}s(a,"customDefaultsMerge");const r=a;var n=d(1687672245),e=(0,h.A)(function(i){return i.push(void 0,r),(0,c.A)(n.A,void 0,i)});const t=e},4360875129:(x,l,d)=>{"use strict";d.d(l,{A:()=>e});var c=d(6966908974),h=d(5684627082),m=d(804366847),p=d(9046884403),a=d(4635518404),r=d(8786006583),n=(0,p.A)(function(t,i){var o=(0,r.A)(i);return(0,a.A)(o)&&(o=void 0),(0,a.A)(t)?(0,c.A)(t,(0,h.A)(i,1,a.A,!0),(0,m.A)(o,2)):[]});const e=n},1041273904:(x,l,d)=>{"use strict";d.d(l,{A:()=>h});function c(m){for(var p=-1,a=m==null?0:m.length,r={};++p<a;){var n=m[p];r[n[0]]=n[1]}return r}s(c,"fromPairs");const h=c},1687672245:(x,l,d)=>{"use strict";d.d(l,{A:()=>p});var c=d(6295853301),h=d(9001690186),m=(0,h.A)(function(a,r,n,e){(0,c.A)(a,r,n,e)});const p=m},5729325965:(x,l,d)=>{"use strict";d.d(l,{A:()=>a});var c=d(3743429634),h=d(3119888921),m=d(2236568457);function p(r){return r&&r.length?(0,c.A)(r,m.A,h.A):void 0}s(p,"min");const a=p},4249070636:(x,l,d)=>{"use strict";d.d(l,{A:()=>a});var c=d(3743429634),h=d(804366847),m=d(3119888921);function p(r,n){return r&&r.length?(0,c.A)(r,(0,h.A)(n,2),m.A):void 0}s(p,"minBy");const a=p},1699044291:(x,l,d)=>{"use strict";d.d(l,{A:()=>p});var c=Array.prototype,h=c.reverse;function m(a){return a==null?a:h.call(a)}s(m,"reverse");const p=m},5154341017:(x,l,d)=>{"use strict";d.d(l,{A:()=>m});var c=d(3046491484),h=(0,c.A)("round");const m=h},9867500491:(x,l,d)=>{"use strict";d.d(l,{A:()=>e});var c=d(7694407897),h=d(7049857535),m=d(4059064744),p=9007199254740991,a=4294967295,r=Math.min;function n(t,i){if(t=(0,m.A)(t),t<1||t>p)return[];var o=a,f=r(t,a);i=(0,h.A)(i),t-=a;for(var g=(0,c.A)(f,i);++o<t;)i(o);return g}s(n,"times");const e=n}}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/gantry-v2-vendors-client.1ab38a08cd71138b2e7c.min.js.map