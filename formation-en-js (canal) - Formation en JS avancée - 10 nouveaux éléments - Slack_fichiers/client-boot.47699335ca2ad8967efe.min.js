(()=>{var kl=Object.defineProperty;var c=(x,A)=>kl(x,"name",{value:A,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["client-boot"],{983107878:(x,A,e)=>{x.exports=e.p+"ava_0002-192-0ddd598.png"},2256285620:(x,A,e)=>{x.exports=e.p+"ava_0002-24-f65dddc.png"},6906793909:(x,A,e)=>{x.exports=e.p+"ava_0002-32-798f043.png"},1060768686:(x,A,e)=>{x.exports=e.p+"ava_0002-48-d3ba4ec.png"},2979422297:(x,A,e)=>{x.exports=e.p+"ava_0002-72-c702398.png"},3224273568:(x,A,e)=>{x.exports=e.p+"ava_0022-192-0cc433a.png"},2316786074:(x,A,e)=>{x.exports=e.p+"ava_0022-24-21468d4.png"},3708998647:(x,A,e)=>{x.exports=e.p+"ava_0022-32-7779579.png"},5098468056:(x,A,e)=>{x.exports=e.p+"ava_0022-48-93db11d.png"},4923972147:(x,A,e)=>{x.exports=e.p+"ava_0022-72-5a52d67.png"},7752974446:(x,A,e)=>{x.exports=e.p+"emoji_missing-39b2f0a.png"},5908540923:(x,A,e)=>{x.exports=e.p+"No_Background-ad3fcdb.png"},3677363342:(x,A,e)=>{x.exports=e.p+"active_speaker-dd1164a.gif"},4553218033:(x,A,e)=>{x.exports=e.p+"beach-preview-33d7acf.jpg"},9679390338:(x,A,e)=>{x.exports=e.p+"beach-33258eb.jpg"},7000154057:(x,A,e)=>{x.exports=e.p+"gym-preview-cfff9c8.jpg"},553949882:(x,A,e)=>{x.exports=e.p+"gym-4d948fc.jpg"},9631995895:(x,A,e)=>{x.exports=e.p+"home-preview-8baaf03.jpg"},3342291988:(x,A,e)=>{x.exports=e.p+"home-9e29930.jpg"},1779488764:(x,A,e)=>{x.exports=e.p+"huddle-in-thread-da71b0e.png"},3607863955:(x,A,e)=>{x.exports=e.p+"living_room-preview-1b54428.jpg"},5738074488:(x,A,e)=>{x.exports=e.p+"living_room-a4fba85.jpg"},7485089530:(x,A,e)=>{x.exports=e.p+"office-preview-de46de4.jpg"},5475210953:(x,A,e)=>{x.exports=e.p+"office-98668ce.jpg"},8514307482:(x,A,e)=>{x.exports=e.p+"remote_work-preview-5fbbc32.jpg"},4136357865:(x,A,e)=>{x.exports=e.p+"remote_work-f8cd791.jpg"},7234375712:(x,A,e)=>{x.exports=e.p+"tokyo_sight-preview-3554da9.jpg"},1672115571:(x,A,e)=>{x.exports=e.p+"tokyo_sight-285d851.jpg"},2527471159:(x,A,e)=>{x.exports=e.p+"slack-salesforce-211570d.png"},7972463975:(x,A,e)=>{x.exports=e.p+"slack-salesforce@2x-06b5868.png"},2301861866:(x,A,e)=>{x.exports=e.p+"slack_logo-ebd02d1.svg"},9994038664:(x,A,e)=>{x.exports=e.p+"slack_logo_white_text-3cffbf2.svg"},3431559584:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_1024-9020761.png"},2200759559:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_192-fc3f24d.png"},8390767423:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_20-e2d1dcb.png"},1957386787:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_24-e726b64.png"},4245237474:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_32-176771b.png"},7523979550:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_36-d921f9d.png"},7272988726:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_360-29e9a8a.png"},77360885:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_48-8220eaf.png"},2261459203:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_512-8ab1a43.png"},451984622:(x,A,e)=>{x.exports=e.p+"slackbot_fancy_72-9db8807.png"},7428983508:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_1024-f558ba5.png"},669259003:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_192-a0b99ba.png"},4165874747:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_20-96acbec.png"},1023719767:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_24-2246c7b.png"},3710970638:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_32-8a50a23.png"},4814900690:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_36-a7f6cbd.png"},7331486018:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_360-1cb4740.png"},7183565897:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_48-fdccd8c.png"},1001408479:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_512-955a74f.png"},1889110914:(x,A,e)=>{x.exports=e.p+"slackbot_frowny_72-6d65a0f.png"},9948433110:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_1024-b58a548.png"},4948097913:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_192-e5cd9a1.png"},350135845:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_20-00a116e.png"},474239361:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_24-9a05991.png"},1302153452:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_32-44a4c24.png"},9825918216:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_36-c6ff0eb.png"},5908867676:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_360-7309dbd.png"},3333214639:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_48-9906623.png"},2295488157:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_512-dcb310c.png"},5156772208:(x,A,e)=>{x.exports=e.p+"slackbot_neutral_72-79b9eaa.png"},4063699741:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_1024-337ff51.png"},9241168512:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_192-3c6a8ea.png"},3963460214:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_20-5bfbe5a.png"},9267813754:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_24-d519530.png"},2981982679:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_32-5479e94.png"},9833689275:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_36-6982f8c.png"},4840951141:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_360-aff835a.png"},9777215928:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_48-7871f8b.png"},7129884748:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_512-c8291ff.png"},9602720019:(x,A,e)=>{x.exports=e.p+"slackbot_sad_surprise_72-ffaf19c.png"},7626894131:(x,A,e)=>{x.exports=e.p+"de-DE-7cb5203.vtt"},29804293:(x,A,e)=>{x.exports=e.p+"en-GB-fe540d9.vtt"},7749140866:(x,A,e)=>{x.exports=e.p+"en-US-638cf9c.vtt"},5913806097:(x,A,e)=>{x.exports=e.p+"es-ES-2c09d56.vtt"},6636363964:(x,A,e)=>{x.exports=e.p+"es-LA-ea2cf27.vtt"},9916635837:(x,A,e)=>{x.exports=e.p+"fr-FR-aca8347.vtt"},5760619139:(x,A,e)=>{x.exports=e.p+"it-IT-5979abe.vtt"},668694090:(x,A,e)=>{x.exports=e.p+"ja-JP-8bffdf3.vtt"},555040584:(x,A,e)=>{x.exports=e.p+"ko-KR-368325f.vtt"},6820844347:(x,A,e)=>{x.exports=e.p+"paid-feature-education-bcf658e.mp4"},1347747715:(x,A,e)=>{x.exports=e.p+"paid-feature-education-4fcc827.png"},8187362417:(x,A,e)=>{x.exports=e.p+"pt-BR-4dd5817.vtt"},2005200212:(x,A,e)=>{x.exports=e.p+"zh-CN-7893376.vtt"},2563333228:(x,A,e)=>{x.exports=e.p+"zh-TW-bf2d05a.vtt"},6754250580:(x,A,e)=>{x.exports=e.p+"de-DE-e5da613.vtt"},1714394002:(x,A,e)=>{x.exports=e.p+"en-GB-b949ba6.vtt"},6435768457:(x,A,e)=>{x.exports=e.p+"en-US-823d419.vtt"},7417918922:(x,A,e)=>{x.exports=e.p+"es-ES-fb9bba0.vtt"},6869712815:(x,A,e)=>{x.exports=e.p+"es-LA-1d17cb9.vtt"},8089589194:(x,A,e)=>{x.exports=e.p+"fr-FR-0161472.vtt"},5748605292:(x,A,e)=>{x.exports=e.p+"it-IT-f18ddbd.vtt"},4071181961:(x,A,e)=>{x.exports=e.p+"ja-JP-8d6863a.vtt"},8071475775:(x,A,e)=>{x.exports=e.p+"ko-KR-b3589ec.vtt"},9733499682:(x,A,e)=>{x.exports=e.p+"pt-BR-50fe7dc.vtt"},6050136004:(x,A,e)=>{x.exports=e.p+"thumbnail-71d0c1e.png"},5006029593:(x,A,e)=>{x.exports=e.p+"video-9e16c67.mp4"},9753292423:(x,A,e)=>{x.exports=e.p+"zh-CN-f0c9d6c.vtt"},3289703835:(x,A,e)=>{x.exports=e.p+"zh-TW-438dba1.vtt"},7260399618:(x,A,e)=>{x.exports=e.p+"apps-0205318.png"},3555024406:(x,A,e)=>{x.exports=e.p+"canvas-27b164f.png"},6362113145:(x,A,e)=>{x.exports=e.p+"huddles-65511ae.png"},5612399517:(x,A,e)=>{x.exports=e.p+"lists-a03762f.png"},9754713110:(x,A,e)=>{x.exports=e.p+"messages-cf1cdcf.png"},8644018899:(x,A,e)=>{x.exports=e.p+"slack-connect-4779df0.png"},8720577475:(x,A,e)=>{x.exports=e.p+"templates-26a2d87.png"},6627147571:x=>{x.exports={accordion:"accordion__kLx8x",item:"item__MTv17",expanded:"expanded__G1WSM",noBorder:"noBorder__Bkdii",itemHeader:"itemHeader__rqviz",expandedIcon:"expandedIcon__a6bDs",header:"header__Mu2fJ",defaultShowDescriptionAnimation:"defaultShowDescriptionAnimation__SUEzA",showDescription:"show-description___8nN1",defaultShowDescription:"defaultShowDescription__O25CX",customItemTextAnimation:"customItemTextAnimation__J88Pz",addPadding:"add-padding__dbRf8",customItemText:"customItemText__vavhM",customItemTransition:"customItemTransition__YwYGB",description:"description__RSIZO",iconSpacer:"iconSpacer__a8u1y",imageCaret:"imageCaret__ZFZoY"}},5672691263:x=>{x.exports={container:"container__oDwNj",primaryIcon:"primaryIcon__aDIDO",secondaryIcon:"secondaryIcon__KuIYv"}},7573583373:x=>{x.exports={proBadge:"proBadge__a6OQu",container:"container__lJGtV",alertBanner:"alertBanner__xNhoq",cta:"cta__tEXdP"}},9295473340:x=>{x.exports={videoAndDevicesContainer:"videoAndDevicesContainer__NVELK",videoContainer:"videoContainer__XjCxI",videoPreview:"videoPreview__hMjwB",videoInnerContainer:"videoInnerContainer__lO7xn",videoAvatar:"videoAvatar__lZyuR"}},1535211300:x=>{x.exports={container:"container__ExpEn",device:"device__Wqu1p"}},2458754542:x=>{x.exports={modal:"modal__v1OWN"}},9632269965:x=>{x.exports={container:"container__rto70"}},2688127376:x=>{x.exports={container:"container__bqBHK",toolbarButton:"toolbarButton__uaxi2",warningBadgeContainer:"warningBadgeContainer__SWzb7",warningBadge:"warningBadge__srWl0",cameraDisabled:"cameraDisabled__fhjuY"}},5671227444:x=>{x.exports={inlineAudioMeterContainer:"inlineAudioMeterContainer__Y3vlI",inlineAudioMeter:"inlineAudioMeter__XIoND"}},3416652175:x=>{x.exports={spaceNameContainer:"spaceNameContainer__Up4ES",spaceName:"spaceName__e2eNG",notificationName:"notificationName__PLxJo",notificationList:"notificationList__K7YI_",formError:"formError__RF0wt",textArea:"text-area__GqSis",alert:"alert__gmI86",alertText:"alertText__WNqBZ"}},397939223:x=>{x.exports={dispatcherViewer:"dispatcherViewer__MqLHN",container:"container__JbqvN",dispatcherViewerIcon:"dispatcherViewerIcon__TTCBH",xDispatcher__viewer_iconPulse:"x-dispatcher__viewer_icon--pulse__rzHrs",dispatcherViewerDetails:"dispatcherViewerDetails__HF2Tz"}},9598582073:x=>{x.exports={bodyContainer:"bodyContainer__XdYx2",listContainer:"listContainer__Q03_Y",videoContainer:"videoContainer__zFTj5",proBadge:"proBadge__vbDah",title:"title__I2qJO",subtitle:"subtitle__lKLAD",ctaButton:"ctaButton__KoQEK",modalBackground:"modalBackground__eUyLk"}},6696573656:x=>{x.exports={featuresListContainer:"featuresListContainer__Wztys",icon:"icon__oy3IT",title:"title__OyvRi",text:"text__lXfZb"}},5577296129:x=>{x.exports={featureImage:"featureImage__GCGJB"}},8985946788:x=>{x.exports={accordionFeatureListModal:"accordionFeatureListModal__XY4l2",horchataBg:"horchataBg__Z4qYV",aubergineBg:"aubergineBg__XTvzG",horchataCaret:"horchataCaret__z5j66",aubergineCaret:"aubergineCaret__Ln6eA",bodyContainer:"bodyContainer__WwREe",listContainer:"listContainer__RAODJ",header:"header__A7Fx9",title:"title__w5UXN",subtitle:"subtitle__GJpvo",accordionListContainer:"accordionListContainer__ZhxlB",accordionItem:"accordionItem__N3S6I",imageContainer:"imageContainer__I5MJj",upgradeCta:"upgradeCta__gvG2D",spinner:"spinner__D0NVf",footer:"footer__cNZ0p",accordionItemHeaderButton:"accordionItemHeaderButton__klUaK",accordionItemHeader:"accordionItemHeader__SDi13",accordionItemDescription:"accordionItemDescription__P1u4j",accordionExpandedIcon:"accordionExpandedIcon__a2fMf",accordionCollapsedIcon:"accordionCollapsedIcon__KurIq"}},3366751172:x=>{x.exports={footer:"footer__q8kg4",cta:"cta__x1pLT",light:"light__adKpp",disclaimer:"disclaimer__i655U",link:"link__ISsu1"}},3817509504:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(1516013259),n=e(2774532222);const s=c(i=>(0,t.A)(i,(l,o)=>(0,n.A)(o,"aria-")),"__WEBPACK_DEFAULT_EXPORT__")},4518138713:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(1516013259),n=e(2774532222);function s(i){return(0,t.A)(i,(l,o)=>(0,n.A)(o,"data-"))}c(s,"getDataProps")},429204216:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){var s;return!n||n.metaKey||n.ctrlKey?!1:((s=n.key)===null||s===void 0?void 0:s.length)===1}c(t,"isPrintableKeyEvent")},4954329752:(x,A,e)=>{"use strict";e.d(A,{N:()=>t,P:()=>s});function t(i,l){const{ref:o}=l;return s(i,o)}c(t,"mergeRefWithChildRef");function n(i){return l=>{typeof i=="function"?i(l):i&&(i.current=l)}}c(n,"makeRefBackwardsCompatible");function s(){for(var i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return a=>{l.forEach(r=>{n(r)(a)})}}c(s,"mergeRefs")},5135324409:(x,A,e)=>{"use strict";e.d(A,{Q:()=>t});const t=c(()=>null,"noopNull")},1665466574:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3134334389),n=e(4757466470);let s=c(class extends t.Component{shouldComponentUpdate(l,o){return!(0,n.Ay)(l,this.props,3)||!(0,n.Ay)(o,this.state,3)}},"PureComponentDepth3")},3346098136:(x,A,e)=>{"use strict";e.d(A,{A:()=>p,T:()=>v});var t=e(3134334389),n=e(9391594207),s=e(4426213732),i=e(735940183),l=e(6839188756),o=e(3677514771),a=e(8847766420),r=e(581167618),d=e(5536692738),u=e(6117529990);const _=new i.Ay("enterprise_calls");var v;(function(y){y.GLOBAL="GLOBAL",y.US="US"})(v||(v={}));const h=[{label:_.t("Global",{fallbackHash:"5f1184f7df96c5928092ad9c6b550699bf887826",fallbackHashNs:"enterprise_dashboard"}),value:v.GLOBAL},{label:_.t("US",{fallbackHash:"aa3093554472fd113135bed5b63e12f84c2e9fe8",fallbackHashNs:"enterprise_dashboard"}),value:v.US}];let f=c(class extends t.Component{render(){const{appsState:g,featureCallsLocationLock:E,isLockedByOrgAdmin:M,selectedCallLocation:T,isFreeTeam:D}=this.props,C=g&&g.video&&Object.keys(g.video).find(V=>V==="A00");if(!E||!C||D)return null;const m=h.find(V=>V.value===T),O=E?_.t("Slack Calls will be restricted and routed through selected regions only."):"Slack Calls will be restricted and routed through selected regions only.",P=E?_.t("Call location options"):"Call location options",R=E?_.t("Limiting to certain regions may reduce call performance or block joining calls in some circumstances."):"Limiting to certain regions may reduce call performance or block joining calls in some circumstances.",L=E?_.t("Slack calls are restricted by Org admin"):"Slack calls are restricted by Org admin";return t.createElement(t.Fragment,null,t.createElement("div",{"data-qa":"calls-location-container",className:"border_top padding_top_100 p-calls_location_lock__container"},t.createElement("span",{className:"p-calls_location_lock__title"},E?_.t("Calls location"):"Calls location"),t.createElement("span",{className:"p-calls_location_lock__description"},O),t.createElement("div",{className:"p-calls_location_lock__options_container"},t.createElement(d.Ay,{className:"p-calls_location_lock__options",size:"medium",isDisabled:M,options:h,selectedOption:m,onOptionSelected:this.handleOptionSelected,ariaLabel:P}),M&&t.createElement("span",{className:"p-calls_location_lock__options_disable_reason"},L))),T===v.US&&t.createElement(r.Ay,{type:r.QE.boxed,level:r.A_.warning,icon:"warning",align:r.AO.left,className:"p-calls_location_lock__alert"},t.createElement("span",null,R)))}handleOptionSelected(g){this.props.setSelectedCallLocation(g.value)}constructor(g){super(g),(0,s.v)(this,["handleOptionSelected"])}},"CallsRegionLockOptions");f.displayName="CallsRegionLockOptions";const I=c(y=>{const g=(0,a.jV)(y);return{isFreeTeam:!(0,l.qR)((0,o.H7)(y))&&!g,featureCallsLocationLock:(0,u.XY)(y)}},"mapStateToProps"),p=(0,n.N)(I)(f)},1223723593:(x,A,e)=>{"use strict";e.d(A,{wl:()=>ee,JG:()=>U,uy:()=>he,bM:()=>ne,Ox:()=>ue,A9:()=>j,fD:()=>ge});var t=e(3134334389),n=e(9391594207),s=e(3783303734),i=e(9113979368),l=e(3867135795),o=e(45851552),a=e(1649982175),r=e(1224315998),d=e(5795074931),u=e(8462077367),_=e(7138682671),v=e(3165300465),h=e(581167618),f=e(1610251172),I=e(3989454579),p=e(1743656885),y=e(5597672932),g=e(6117529990);const E=c(k=>!(0,g.BD)(k),"isOrgCallsAppsSettingsEnabled");var M=e(766806),T=e(56548687);const D=c(k=>{let{callsApps:N,allowCalls:$,clogger:W,action:q,stepVariant:re}=k;const le={allow_calls:$};N&&N.video&&N.video.length>0&&(le.video_call_app_ids=N.video.map(Ae=>Ae.id)),N&&N.audio&&N.audio.length>0&&(le.audio_call_app_ids=N.audio.map(Ae=>Ae.id)),N&&N.profile_field_options&&N.profile_field_options.length>0&&(le.profile_field_option_ids=N.profile_field_options.map(Ae=>Ae.id)),W.track(r.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{...le,contexts:{ui_context:{step:r.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:q,entry_point:"calls-workspace-admin",step_variant:re}}})},"clogCallsApps"),C=c(k=>{let{clogger:N}=k;N.track(r.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{contexts:{ui_context:{step:r.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:r.UiAction.LEARN_MORE,is_primary_cta:!0,ui_properties:{element_type:r.ElementType.LINK,element_name:"calls-admin-save-multiple-call-apps"}}}})},"clogLinkToPaidPlans");var m=e(6304789565);const O=(0,m.Ay)("Clog a standardized click event when a workspace setting is saved",(k,N,$)=>{let{eventId:W,uiStep:q,stepVariant:re}=$;(0,T.e)({getState:N}).track(W,{contexts:{ui_context:{ui_step:q,step_variant:re,ui_properties:{element_type:r.ElementType.BUTTON,element_name:"submit_button"},action:r.UiAction.CLICK,is_primary_cta:!0}}})});O.meta={name:"createThunk",key:"createThunkclogWorkspaceSettingSubmit",description:"Clog a standardized click event when a workspace setting is saved"};const P=O;var R=e(3677514771),L=e(6839188756),V=e(6323355797),B=e(980293773),K=e(735940183),b=e(3346098136),S=e(462591818);const G=new K.Ay("calls_admin"),H="only_available_for_paid_teams";var U;(function(k){k.Video="video",k.Audio="audio",k.ProfileFieldOptions="profile_field_options"})(U||(U={}));const F=c(k=>{let{type:N,app:$,isChecked:W,onChangeCallApp:q,isLocked:re}=k;const le=(0,t.useCallback)(()=>q(N,$.id),[q,N,$]),Ae=`${N}_${$.id}`;return t.createElement(_.A,{text:$.name,type:"inline",cursor:"pointer"},t.createElement(I.A,{id:Ae,name:$.name,checked:W,onChange:le,disabled:re,"data-qa":Ae}))},"AppCheckbox");F.displayName="AppCheckbox";const Y=c(k=>{let{appsState:N,isLocked:$,type:W}=k;return!$||!N?!1:W===U.Video&&(0,s.A)(N.video)>0&&(0,s.A)(N.audio)===0||(W===U.Audio&&(0,s.A)(N.audio)>0&&(0,s.A)(N.video))===0},"disableTypeCheckbox"),Z=c(k=>{let{appsState:N,isLocked:$,appId:W,type:q}=k;if(!$||!N)return!1;const re=N.video?Object.keys(N.video):[],le=N.audio?Object.keys(N.audio):[],Ae=re.length+le.length;if(W&&Ae===1){let Te,Ne;return re.length===1?(Te=re[0],Ne=U.Video):le.length===1&&(Te=le[0],Ne=U.Audio),W===Te&&q===Ne}return!1},"disableAppCheckbox"),ee=c(k=>{let{type:N,sectionTitle:$,appsState:W,installedCallApps:q,onChangeCallType:re,onChangeCallApp:le,isLocked:Ae,dataQa:Te}=k;if(!q||!W||!q[N])return null;const Ne=`enable_${N}_calls`;return t.createElement("div",{className:`p-calls_workspace_settings__${N}_container`,"data-qa":Te},t.createElement(_.A,{text:$,type:"inline",cursor:"pointer"},t.createElement(I.A,{checked:!(0,i.A)(W[N]),id:Ne,name:Ne,onChange:re,disabled:Y({appsState:W,isLocked:Ae,type:N})})),t.createElement("p",{className:"p-calls_workspace_settings__options_title"},G.t("Calling options:")),t.createElement("div",{className:"p-calls_workspace_settings__calls_apps"},[...q[N]].map(pe=>t.createElement(F,{app:pe,isChecked:(0,l.A)(W[N],pe.id),key:`${N}_${pe.id}`,onChangeCallApp:le,type:N,isLocked:Z({appsState:W,isLocked:Ae,appId:pe.id,type:N})}))))},"CallSection");ee.displayName="CallSection";const j=c(k=>{let{installedCallApps:N,appsState:$,appId:W,type:q,setAppsState:re}=k;if(!N||!$)return;const le={...$[q]};if((0,l.A)(le,W))delete le[W],re({...$,[q]:le});else{const Ae=(0,o.A)(N[q],Te=>Te.id===W);Ae>-1&&(le[W]=Ae,re({...$,[q]:le}))}},"toggleCallApp"),ge=c(k=>{let{installedCallApps:N,appsState:$,type:W,setAppsState:q}=k;if(!(!$||!N))if(!(0,i.A)($[W]))q({...$,[W]:{}});else{var re;const le={};(re=N[W])===null||re===void 0||re.forEach((Ae,Te)=>{le[Ae.id]=Te}),q({...$,[W]:le})}},"toggleCallType"),ne=c((k,N)=>{const $={video:{},audio:{},profile_field_options:{}};return!N||!k||[U.Video,U.Audio,U.ProfileFieldOptions].forEach(W=>{N[W]&&[...N[W]].forEach(re=>{const le=(0,o.A)(k[W],Ae=>Ae.id===re.id);le>-1&&($[W][re.id]=le)})}),$},"reduceTeamPrefApps"),ue=c(function(){let{installedCallApps:k,appsState:N}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const $={video:[],audio:[]};return!k||!N||[U.Video,U.Audio].forEach(W=>{if(k[W]){const q=[...k[W]],re=N[W];q.forEach(le=>{if((0,l.A)(re,le.id)){var Ae;(Ae=$[W])===null||Ae===void 0||Ae.push((0,a.A)(le,"preselected"))}})}}),$},"setCallsAppsPayloadToSave"),he=c(k=>{if(!k||!k.video)return;const N=k.video.findIndex($=>$.id===S.rq);N>=0&&k.video.splice(N,1)},"filterNativeCallsApp"),be=c(k=>{let{isOpen:N,closeModal:$,errorMessage:W,buttonLabel:q}=k;return t.createElement(B.dW,{centered:!0,isOpen:N,closeModal:$},t.createElement(B.$m,{className:"p-calls_workspace_settings__error_modal"},t.createElement(B.qf,null,t.createElement("p",null,W))),t.createElement(B.jl,null,t.createElement(B.ox,null,t.createElement(B.s_,{type:"outline",onClick:$,"aria-label":q},q))))},"ErrorModal");be.displayName="ErrorModal";const xe=c(k=>{let{installedCallApps:N,teamPrefCallsApps:$,setMultipleTeamPrefsByApi:W,clogWorkspaceSettingSubmit:q,isLocked:re,isCallsSelectorDisabled:le,clogger:Ae,isOrgCallsAppsSettingsEnabled:Te,team:Ne,isCallsLocationLockedByOrgAdmin:pe,callsLocationLocked:Ee}=k;const[oe,ce]=(0,t.useState)(!1),[ke,Ce]=(0,t.useState)(""),Me=G.t("Save"),Se=G.t("Saved"),Ue=G.t("Sorry! Something went wrong. Please try again."),He=G.t("Allow third-party calls in Slack"),Ye=G.t("Allow phone number calls in Slack (only in direct messages)"),J=G.t("Ok"),ae=G.t("Sorry, call selection is currently managed by your organization admin."),Ve=G.rt("First install a <a>calling app from the Slack Marketplace</a> then come back here to enable it as a default calling app.",{fallbackHash:"bafa98560255a22c3a110fefa9689c8eb16c6c93"},Ot=>{let{text:Ft}=Ot;return t.createElement(p.A,{articleId:208492868},Ft)}),Be=(0,t.useCallback)(()=>{C({clogger:Ae}),(0,L.gC)(Ne,(0,V.hZ)({entryPoint:"calls-admin-workspace-settings"}))},[Ae,Ne]),Ke=G.rt("Sorry, this feature is only available to <a>paid teams</a>.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087"},Ot=>{let{text:Ft}=Ot;return t.createElement("a",{href:"#",onClick:Be,"data-qa":"paid_plan_page_link"},Ft)}),Re=$?ne(N,$):{video:{},audio:{},profile_field_options:{}},[Fe,Ie]=(0,t.useState)(Re),[ze,qe]=(0,t.useState)(!1),[st,ut]=(0,t.useState)(!1),tt=Ee&&Ee.length>0?b.T.US:b.T.GLOBAL,[_t,yt]=(0,t.useState)(tt);(0,t.useEffect)(()=>{const Ot=ne(N,$);Ie(Ot)},[Ie,N,$]);const Kt=(0,t.useCallback)(Ot=>{ut(!1),ge({installedCallApps:N,appsState:Fe,type:Ot,setAppsState:Ie})},[N,Fe,Ie]),Qt=(0,t.useCallback)(()=>Kt(U.Video),[Kt]),Jt=(0,t.useCallback)(()=>Kt(U.Audio),[Kt]),Gt=(0,t.useCallback)(()=>ce(!1),[ce]),wt=(0,t.useCallback)((Ot,Ft)=>{ut(!1),j({installedCallApps:N,appsState:Fe,appId:Ft,type:Ot,setAppsState:Ie})},[N,Fe,Ie]),Bt=(0,t.useCallback)(Ot=>{yt(Ot),ut(!1)},[yt]),Wt=c(()=>{qe(!0),q({eventId:r.EventId.ADMIN_TEAM_SETTINGS,uiStep:"change_enable_calls"});const Ot=!(0,i.A)(Fe.video)||!(0,i.A)(Fe.audio),Ft=ue({installedCallApps:N,appsState:Fe}),rn={calls_apps:Ft};(0,L.r7)(Ne)||(rn.allow_calls=Ot),pe||(rn.calls_locations=_t===b.T.US?[_t]:[]),W({prefs:rn}).then(()=>{ut(!0),D({callsApps:Ft,allowCalls:Ot,clogger:Ae,action:r.UiAction.SAVE})}).catch(ln=>{var _n;ce(!0),(ln==null||(_n=ln.data)===null||_n===void 0?void 0:_n.error)===H?(Ce(Ke),D({callsApps:Ft,allowCalls:Ot,clogger:Ae,action:r.UiAction.ERROR,stepVariant:H})):(Ce(Ue),D({callsApps:Ft,allowCalls:Ot,clogger:Ae,action:r.UiAction.ERROR}))}).finally(()=>qe(!1))},"onSubmit"),Tn=N&&(N.video&&N.video.length>0||N.audio&&N.audio.length>0);return t.createElement("div",{key:"calls_workspace_settings",className:"p-calls_workspace_settings"},le&&Te?t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left","data-qa":"org_calls_apps_alert_selector_disabled"},t.createElement("span",null,ae)):t.createElement(t.Fragment,null,!Tn&&t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left"},t.createElement("span",null,Ve)),t.createElement("div",{className:"p-calls_workspace_settings__call_options"},N&&N.video&&N.video.length>0&&t.createElement(ee,{type:U.Video,sectionTitle:He,appsState:Fe,installedCallApps:N,onChangeCallType:Qt,onChangeCallApp:wt,isLocked:re}),N&&N.audio&&N.audio.length>0&&t.createElement(ee,{type:U.Audio,sectionTitle:Ye,appsState:Fe,installedCallApps:N,onChangeCallType:Jt,onChangeCallApp:wt,isLocked:re})),t.createElement(b.A,{appsState:Fe,isLockedByOrgAdmin:pe,selectedCallLocation:_t,setSelectedCallLocation:Bt}),t.createElement(be,{closeModal:Gt,isOpen:oe,errorMessage:ke,buttonLabel:J}),Tn&&t.createElement(v.A,{onClick:Wt,loading:ze,"data-qa":"call_save_button","aria-label":st?Se:Me},st&&t.createElement(f.A,{type:"check-circle-o",className:"p-calls_workspace_settings_check_icon"}),st?Se:Me)))},"CallsWorkspaceSettings");xe.displayName="CallsWorkspaceSettings";const Le=c(k=>{const N=(0,d.tV)(k,"calls_apps");he(N);const $=(0,y.xp)(k,"calls_apps"),W=(0,M.SI)(k,"calls_locations");return{installedCallApps:N,teamPrefCallsApps:$,clogger:(0,T.e)({state:k}),isOrgCallsAppsSettingsEnabled:E(k),team:(0,R.H7)(k),isCallsLocationLockedByOrgAdmin:!!W&&W.length>0,callsLocationLocked:(0,y.xp)(k,"calls_locations")}},"mapStateToProps"),fe={setMultipleTeamPrefsByApi:u.hz,clogWorkspaceSettingSubmit:P},se={toggleCallApp:j,toggleCallType:ge,AppCheckbox:F,reduceTeamPrefApps:ne,setCallsAppsPayloadToSave:ue,disableTypeCheckbox:Y,disableAppCheckbox:Z},Q=(0,n.N)(Le,fe)(xe)},6909784049:(x,A,e)=>{"use strict";e.d(A,{o:()=>Ke});var t=e(3134334389),n=e(9391594207),s=e(166097325),i=e(3300324857),l=e(462591818),o=e(4954329752),a=e(1641606663);function r(){return r=Object.assign||function(Re){for(var Fe=1;Fe<arguments.length;Fe++){var Ie=arguments[Fe];for(var ze in Ie)Object.prototype.hasOwnProperty.call(Ie,ze)&&(Re[ze]=Ie[ze])}return Re},r.apply(this,arguments)}c(r,"_extends");let d=c(class extends t.PureComponent{componentDidMount(){var Fe;(Fe=this.context.windowRef.deref())===null||Fe===void 0||Fe.document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){var Fe;this.isDragging&&this.onMouseUp(),(Fe=this.context.windowRef.deref())===null||Fe===void 0||Fe.document.removeEventListener("mouseup",this.onMouseUp)}onMouseDown(Fe){var Ie;Fe.button===0&&(this.isDragging=!0,(Ie=this.context.windowRef.deref())===null||Ie===void 0||Ie.document.addEventListener("mousemove",this.onMouseMove),this.props.onDragStart(Fe))}onMouseMove(Fe){Fe.button===0&&this.isDragging&&this.props.onDragMove(Fe)}onMouseUp(Fe){if(Fe&&Fe.button!==0)return;const Ie=this.isDragging;if(this.isDragging=!1,Ie){var ze;(ze=this.context.windowRef.deref())===null||ze===void 0||ze.document.removeEventListener("mousemove",this.onMouseMove),this.props.onDragEnd(Fe)}}render(){const{children:Fe,refToForward:Ie,onDragStart:ze,onDragMove:qe,onDragEnd:st,...ut}=this.props,tt=t.Children.only(this.props.children);return t.cloneElement(tt,{...ut,onMouseDown:yt=>this.onMouseDown(yt),ref:(0,o.N)(Ie,tt)})}constructor(Fe){super(Fe),this.isDragging=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}},"BaseDragTarget");d.displayName="BaseDragTarget",d.contextType=a.Mn;const u=t.forwardRef((Re,Fe)=>t.createElement(d,r({},Re,{refToForward:Fe})));var _=e(387328355),v=e(6304789565),h=e(2825968873);const f=(0,h.tZ)("USER-ACTIONS"),I=(0,v.Ay)("Logs user interaction with call window",(Re,Fe,Ie)=>{f.info(Ie)});I.meta={name:"createThunk",key:"createThunklogUserAction",description:"Logs user interaction with call window"};var p=e(1975685771),y=e(8405076696);function g(Re){M=H(ue(Re))}c(g,"startCurve");function E(Re){const Fe=ue(Re),Ie=U(M,Fe);return Ie.update_status==V.SUCCESS?Ie:U(M,Fe)}c(E,"addToCurve");let M;const T=2,D=9,C=9,m=50,O=80,P=1,R=!0,L=!0,V={SUCCESS:1,FAIL_CORNER:2,FAIL_MAXED:3},B=c(()=>({segments:[],vdmap:[]}),"initCurve"),K=c((Re,Fe)=>({c0:{x:Re,y:Fe},c1:{x:Re,y:Fe},c2:{x:Re,y:Fe},c3:{x:Re,y:Fe}}),"initCurveSegment"),b=c(Re=>Re.segments[Re.segments.length-1],"getLastSegment"),S=c(Re=>Re.c3,"getLastPoint"),G=c(function(Re){return{c0:{x:Re.c0.x,y:Re.c0.y},c1:{x:Re.c1.x,y:Re.c1.y},c2:{x:Re.c2.x,y:Re.c2.y},c3:{x:Re.c3.x,y:Re.c3.y},constrain_to:Re.constrain_to==null?void 0:{x:Re.constrain_to.x,y:Re.constrain_to.y},error:Re.error||0,update_status:Re.update_status}},"copySegment"),H=c(function(Re){let{x:Fe,y:Ie}=Re;const ze=B();return ze.segments.push(K(Fe,Ie)),ze},"createCurve"),U=c(function(Re,Fe){const Ie=b(Re),ze=S(Ie);if(N(Fe,S(Ie))<P)return Ie;if(V.SUCCESS!=Ie.update_status&&Ie.update_status!==void 0){let qe;V.FAIL_CORNER==Ie.update_status?qe=K(ze.x,ze.y):V.FAIL_MAXED==Ie.update_status&&(qe=K(ze.x,ze.y),qe.constrain_to=re(Z(Ie))),Re.vdmap=[],Re.segments.push(qe)}return F(Re,Fe)},"addToCurveImpl"),F=c(function(Re,Fe){const Ie=b(Re),{x:ze,y:qe}=Fe;let st=S(Ie);const ut=G(Ie);if(ee(Ie,Fe))return Ie.update_status=V.FAIL_CORNER,Ie;Ie.c3={x:ze,y:qe},Ie.c2={x:Ie.c2.x+ze-st.x,y:Ie.c2.y+qe-st.y};const tt=q(st,Fe),_t=ge(tt),yt=xe(st,_t),Kt=xe(Fe,_t),Qt=ne(fe(_t,2)),Jt=W(Qt),Gt=se(Qt,Jt),wt=Le(Kt,yt),Bt=W(wt),Wt=se(wt,Bt);let Tn=yt;for(let ln=0;ln<Bt;ln++){let _n=Tn,en=_t;for(let Xt=0;Xt<Jt;Xt++){const{x:vn,y:je}=ue(_n);Re.vdmap[vn]||(Re.vdmap[vn]=[]),Re.vdmap[vn][je]==null?Re.vdmap[vn][je]=ue(en):Re.vdmap[vn][je]=he(Re.vdmap[vn][je])<he(ue(en))?Re.vdmap[vn][je]:ue(en),en=xe(en,Gt),_n=xe(_n,Gt)}Tn=xe(Tn,Wt)}const Ot=Le(Fe,{x:D,y:D}),Ft=xe(Fe,{x:D,y:D});for(let ln=Ot.x;ln<Ft.x;ln++)for(let _n=Ot.y;_n<Ft.y;_n++){Re.vdmap[ln]||(Re.vdmap[ln]=[]);const en=Le({x:ln,y:_n},Fe);Re.vdmap[ln][_n]==null?Re.vdmap[ln][_n]=en:Re.vdmap[ln][_n]=he(Re.vdmap[ln][_n])<he(en)?Re.vdmap[ln][_n]:en}let rn=0;for(;;){let ln={x:0,y:0},_n={x:0,y:0};for(let vn=0;vn<C;vn++){const je=vn/C,Rt=ue(le(Ie,je)),hn=Y(Re,Rt),Nn=be(hn),rt=hn.x,vt=hn.y;let Mt=1;L&&(je<.1||je>.9)&&(Mt=10),ln.x+=je*Math.pow(1-je,2)*Nn*rt*Mt,ln.y+=je*Math.pow(1-je,2)*Nn*vt*Mt,_n.x+=Math.pow(je,2)*(1-je)*Nn*rt*Mt,_n.y+=Math.pow(je,2)*(1-je)*Nn*vt*Mt}if(L){const vn=Le(j(Ie),Ie.c2),je=Le(j(Ie),Ie.c1);ln=Le(ln,fe(je,.03)),_n=Le(_n,fe(vn,.03))}Ie.constrain_to&&(ln=fe(Ie.constrain_to,k(Ie.constrain_to,ln)));const en=1;Ie.c1.x-=en*ln.x*6/C,Ie.c1.y-=en*ln.y*6/C,Ie.c2.x-=en*_n.x*6/C,Ie.c2.y-=en*_n.y*6/C;let Xt=0;for(let vn=0;vn<C;vn++){const je=vn/C,Rt=le(Ie,je),hn=Y(Re,ue(Rt));Xt+=Math.pow(hn.x,2)+Math.pow(hn.y,2)}if(Xt=Xt/C,rn++,Ie.error=Xt,Ie.steps=rn,Xt<T||rn>m)break}return rn>m?(Ie.c0=ut.c0,Ie.c1=ut.c1,Ie.c2=ut.c2,Ie.c3=ut.c3,Ie.error=ut.error,Ie.constrain_to=ut.constrain_to,Ie.update_status=V.FAIL_MAXED,Ie):(Ie.update_status=V.SUCCESS,Ie)},"updateDistanceField"),Y=c(function(Re,Fe){let{x:Ie,y:ze}=Fe;if(Re.vdmap[Ie]){const qe=Re.vdmap[Ie][ze],st=Re.vdmap[Ie][ze+1];let ut=qe!=null?{x:qe.x,y:qe.y}:{x:D,y:D};return st&&st.x!=null&&Math.abs(ut.x)>Math.abs(st.x)&&(ut.x=st.x),st&&st.y!=null&&Math.abs(ut.y)>Math.abs(st.y)&&(ut.y=st.y),ut}else return{x:D,y:D}},"getDistanceFromPolyline"),Z=c(function(Re){const Fe=Re.c3,Ie=Re.c2;return{x:3*(Ie.x-Fe.x),y:3*(Ie.y-Fe.y)}},"getCurveEndTangent"),ee=c(function(Re,Fe){if(Q(Re.c0,Re.c3))return!1;let Ie;R?Ie=re(Le(le(Re,.95),Re.c3)):Ie=re(Z(Re));const ze=re({x:Fe.x-Re.c3.x,y:Fe.y-Re.c3.y}),qe=k(Ie,ze);if($(Math.acos(qe))<O)return!0},"checkCorner"),j=c(Re=>xe(se(Le(Re.c3,Re.c0),2),Re.c0),"getSegmentMidpoint"),ge=c(Re=>({x:Re.x*D,y:Re.y*D}),"getScaledVectorDifference"),ne=c(Re=>({x:-Re.x,y:-Re.y}),"negateVec"),ue=c(Re=>({x:Math.round(Re.x),y:Math.round(Re.y)}),"roundVec"),he=c(Re=>Math.pow(Re.x,2)+Math.pow(Re.y,2),"sumOfSquaresVec"),be=c(Re=>Math.sqrt(he(Re)),"magnitudeVec"),xe=c((Re,Fe)=>({x:Re.x+Fe.x,y:Re.y+Fe.y}),"addVec"),Le=c((Re,Fe)=>xe(Re,ne(Fe)),"subVec"),fe=c((Re,Fe)=>({x:Re.x*Fe,y:Re.y*Fe}),"multVec"),se=c((Re,Fe)=>fe(Re,1/Fe),"divVec"),Q=c((Re,Fe)=>Re.x==Fe.x&&Re.y==Fe.y,"equalVec"),k=c((Re,Fe)=>Re.x*Fe.x+Re.y*Fe.y,"dotProduct"),N=c(function(Re){let{x:Fe,y:Ie}=Re,ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0};return Math.sqrt(Math.pow(Fe-ze.x,2)+Math.pow(Ie-ze.y,2))},"getMagnitude"),$=c(Re=>Re*180/Math.PI,"radiansToDegrees"),W=c(Re=>Math.max(Math.abs(Re.x),Math.abs(Re.y)),"getDDASteps"),q=c((Re,Fe)=>{const Ie=Fe.x-Re.x,qe=Fe.y-Re.y,st=-Ie;return re({x:qe,y:st})},"getPerpindicularUnitVector"),re=c(function(Re){let{x:Fe,y:Ie}=Re;const ze=N({x:Fe,y:Ie});return{x:Fe/ze,y:Ie/ze}},"getUnitVector"),le=c(function(Re,Fe){const Ie=Ae(Fe,Re.c0.x,Re.c1.x,Re.c2.x,Re.c3.x),ze=Ae(Fe,Re.c0.y,Re.c1.y,Re.c2.y,Re.c3.y);return{x:Ie,y:ze}},"getPointAlongCurve"),Ae=c(function(Re,Fe,Ie,ze,qe){return Fe*Math.pow(1-Re,3)+Ie*3*Re*Math.pow(1-Re,2)+ze*3*Math.pow(Re,2)*(1-Re)+qe*Math.pow(Re,3)},"singleComponentBezier");function Te(Re,Fe){return{a:Re,b:Fe}}c(Te,"makeLineSegment");function Ne(Re,Fe){let[Ie,ze]=Re,[qe,st]=Fe;return Math.sqrt((Ie-qe)**2+(ze-st)**2)}c(Ne,"magnitude");class pe{add(Fe){return this.current?Ne(this.current.a,Fe)>.05?(this.current=Te(this.current.b,Fe),{type:DrawMessageType.New,segment:this.current}):(this.current=Te(this.current.a,Fe),{type:DrawMessageType.Edit,segment:this.current}):(this.current=Te(Fe,Fe),{type:DrawMessageType.New,segment:this.current})}}c(pe,"ProgressiveEqualLengthMultilineTransformer");class Ee{setTargetRect(Fe){this.targetRect=Fe}add(Fe){if(!(0,p.Z)(this.targetRect,"Need size to transform point to curve"))throw Error();const{top:Ie,left:ze,width:qe,height:st}=this.targetRect,[ut,tt]=[Fe[0]-ze,Fe[1]-Ie];if(!this.current){g({x:ut,y:tt});const Gt=[ut/qe,tt/st];return this.current={a:Gt,b:Gt,c:Gt,d:Gt},{type:l.Sl.New,segment:this.current}}const _t=this.current,{c0:yt,c1:Kt,c2:Qt,c3:Jt}=E({x:ut,y:tt});return this.current={a:[yt.x/qe,yt.y/st],b:[Kt.x/qe,Kt.y/st],c:[Qt.x/qe,Qt.y/st],d:[Jt.x/qe,Jt.y/st]},this.current.a[0]!==_t.a[0]||this.current.a[1]!==_t.a[1]?{type:l.Sl.New,segment:this.current}:{type:l.Sl.Edit,segment:this.current}}}c(Ee,"ProgressiveCurveTransformer");var oe=e(5950652755),ce=e(3107743571);const ke=2e3,Ce=50,Me=c(Re=>{const{onDragStart:Fe,onDragMove:Ie,onDragEnd:ze,onCursorMoveStart:qe,onCursorMove:st,onCursorMoveEnd:ut,children:tt}=Re,[_t,yt]=(0,t.useState)(!1),[Kt,Qt]=(0,t.useState)(!1),[Jt,Gt]=(0,t.useState)(0),[wt,Bt]=(0,t.useState)(0),Wt=(0,t.useCallback)(en=>{en.button===0&&(yt(!0),Fe(en))},[Fe]),Tn=(0,t.useCallback)(()=>{Qt(!1),ut()},[Qt,ut]);(0,ce.Z)(()=>{Tn()},ke,[Jt,wt]);const Ot=(0,t.useCallback)(en=>{if(en.button===0){if(_t){Ie(en);return}Kt||(qe(en),Qt(!0)),st(en),Gt(en.movementX),Bt(en.movementY)}},[Kt,_t,st,qe,Ie]),Ft=(0,oe.A)(Ot,Ce,{leading:!0}),rn=(0,t.useCallback)(en=>{Ft(en)},[Ft]),ln=(0,t.useCallback)(en=>{if(en&&en.button!==0)return;const Xt=_t;yt(!1),Xt&&ze(en)},[_t,ze]),_n=(0,t.useCallback)(en=>{const Xt=_t;yt(!1),Xt?ze(en):Kt&&ut()},[_t,ze,Kt,ut]);return t.createElement("div",{onMouseDown:Wt,onMouseMove:rn,onMouseUp:ln,onMouseLeave:_n,"aria-hidden":"true"},tt)},"HuddlesCursorTarget");Me.displayName="HuddlesCursorTarget";const Se=t.memo(Me);var Ue=e(8558782493),He=e(1224315998);function Ye(){return Ye=Object.assign||function(Re){for(var Fe=1;Fe<arguments.length;Fe++){var Ie=arguments[Fe];for(var ze in Ie)Object.prototype.hasOwnProperty.call(Ie,ze)&&(Re[ze]=Ie[ze])}return Re},Ye.apply(this,arguments)}c(Ye,"target_extends");let J=c(class extends t.Component{componentDidMount(){this.onResize()}shouldComponentUpdate(Fe,Ie){return!(0,s.A)(this.props,Fe)||!(0,s.A)(this.state,Ie)}componentDidUpdate(Fe){(0,s.A)(Fe.targetRect,this.props.targetRect)||this.onResize()}onResize(){var Fe;if(!(!((Fe=this.props.refToForward)===null||Fe===void 0)&&Fe.current))return;const Ie=(0,y.n)(this.props.targetRect);this.props.refToForward.current.style.height=Ie.height,this.props.refToForward.current.style.width=Ie.width,this.props.refToForward.current.style.top=Ie.top,this.props.refToForward.current.style.left=Ie.left,this.props.refToForward.current.style.position=Ie.position}getCursorCoordinates(Fe){return this.props.useHuddlesDragTarget?[Fe.nativeEvent.offsetX,Fe.nativeEvent.offsetY]:[Fe.pageX,Fe.pageY]}onDragStart(Fe){this.multilineTransformer=new Ee,this.props.useHuddlesDragTarget?this.multilineTransformer.setTargetRect({top:0,left:0,width:this.props.targetRect.width,height:this.props.targetRect.height}):this.multilineTransformer.setTargetRect(this.props.targetRect),i.A.publish({id:"self",type:l.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}}),i.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(Fe)),...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw start"),this.setState(()=>({showCursor:!1}))}onDragMove(Fe){(0,p.Z)(this.multilineTransformer,"Need transformer to draw")&&i.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(Fe)),...this.props.itemId&&{itemId:this.props.itemId}})}onDragEnd(Fe){i.A.publish({id:"self",type:l.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw stop"),this.setState(()=>({showCursor:!0})),this.props.useHuddlesDragTarget&&(0,Ue.k)(He.EventId.HUDDLES_SCREENSHARE_INTERACTION,{contexts:{ui_context:{action:He.UiAction.CLICK,ui_properties:{element_name:"screenshare_draw"}}}})}onCursorMoveStart(){i.A.publish({id:"self",type:l.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}})}onCursorMove(Fe){const Ie=this.getCursorCoordinates(Fe),ze=Ie[0]/this.props.targetRect.width,qe=Ie[1]/this.props.targetRect.height;i.A.publish({id:"self",type:l.Sl.Position,x:ze,y:qe,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!0}))}onCursorMoveEnd(){i.A.publish({id:"self",type:l.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!1}))}render(){return this.props.useHuddlesDragTarget?t.createElement(Se,{onDragStart:this.onDragStart,onDragMove:this.onDragMove,onDragEnd:this.onDragEnd,onCursorMoveStart:this.onCursorMoveStart,onCursorMove:this.onCursorMove,onCursorMoveEnd:this.onCursorMoveEnd},t.createElement("div",{ref:this.props.refToForward,className:"p-calls_draw__target_none",style:{...(0,y.n)(this.props.targetRect)}})):t.createElement(u,{onDragStart:Fe=>this.onDragStart(Fe),onDragMove:Fe=>this.onDragMove(Fe),onDragEnd:Fe=>this.onDragEnd(Fe)},t.createElement("div",{ref:this.props.refToForward,className:this.state.showCursor?"p-calls_draw__target":"p-calls_draw__target_none",style:{...(0,y.n)(this.props.targetRect)}}))}constructor(Fe){super(Fe),this.onResize=this.onResize.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onCursorMoveStart=this.onCursorMoveStart.bind(this),this.onCursorMove=this.onCursorMove.bind(this),this.onCursorMoveEnd=this.onCursorMoveEnd.bind(this),this.state={showCursor:!0}}},"BaseDrawTarget");J.displayName="BaseDrawTarget";const ae=c((Re,Fe)=>({hue:(0,_.Ng)(Re).drawHue}),"mapStateToProps"),Ve=c(Re=>({logDrawingAction:Fe=>Re(I(Fe))}),"mapDispatchToProps"),Be=(0,n.N)(ae,Ve)(J),Ke=t.forwardRef((Re,Fe)=>t.createElement(Be,Ye({refToForward:Fe},Re)))},5956851410:(x,A,e)=>{"use strict";e.d(A,{u:()=>Q});var t=e(3134334389),n=e(166097325),s=e(1649982175),i=e(8571983633),l=e(8840779375),o=e(3300324857),a=e(462591818),r=e(1641606663),d=e(9391594207),u=e(5795074931),_=e(4775127335),v=e(387328355),h=e(735940183);const f=new h.Ay("calls"),I=c(k=>{let{displayName:N,id:$,userId:W,color:q}=k;return t.createElement("div",{className:"p-huddles_draw__name_tag",style:q?{background:q}:{}},t.createElement(_.Ay,{className:"p-huddles_draw__name_tag_avatar",key:$,size:24,userId:W,isInteractive:!1,tabIndex:-1}),t.createElement("div",{className:"p-huddles_draw__name_tag_text"},N))},"NameTag"),p=c((k,N)=>{let{id:$}=N;return{displayName:$==="self"?f.t("You"):(0,v.iU)(k,$),userId:$==="self"?(0,u.WR)(k):(0,v.C1)(k,$).userId}},"mapStateToProps"),y=(0,d.N)(p)(I),g=-21,E=-15,M=c(k=>{let{peerId:N,width:$,height:W,leftOffset:q,topOffset:re,color:le,renderNameTag:Ae=!0,isWindowDrawMode:Te=!1,xWindowPosition:Ne=0,yWindowPosition:pe=0}=k;const Ee=(0,t.useRef)(null);let oe,ce;const ke=q*$,Ce=re*W;oe=Math.round(ke+E),ce=Math.round(Ce+g),Te&&(oe+=Ne,ce+=pe);const Me=(0,t.useMemo)(()=>[oe,ce],[oe,ce]),Se=c(Ue=>{const He=Ee.current;He&&(He.style.setProperty("transform",`translate(${Ue[0]}px, ${Ue[1]}px)`),He.style.setProperty("visibility","initial"))},"updateCursorPosition");return(0,t.useEffect)(()=>{Se(Me)},[Me]),t.createElement("div",{className:"p-huddles_cursor_tracking__cursor_container"},t.createElement("div",{key:`cursor-${N}`,className:"p-huddles_cursor_tracking__cursor",ref:Ee},Ae&&t.createElement(y,{key:`name-tag-${N}`,id:N,color:le})))},"HuddlesCursor");M.displayName="HuddlesCursor";const T=t.memo(M,n.A);var D=e(2825968873),C=e(8405076696),m=e(8193414630);function O(k,N,$,W){return`hsla(${k}, ${N}%, ${$}%, ${W})`}c(O,"makeColorString");const P=c((k,N)=>O(k,100,75,N),"makeBaseColorString"),R=c(k=>O(k,80,50,1),"makeShadowColorString"),L=3;class V{static renderBaseStyle(N){N.lineJoin="round",N.lineCap="round",N.shadowBlur=5}startFade(){this.startedFadingTimestamp=performance.now(),this.observer.requestRenderOnNextFrame()}resetFade(){this.startedFadingTimestamp&&(delete this.startedFadingTimestamp,this.width=V.initialWidth,this.opacity=1,this.color=P(this.hue,this.opacity))}setHue(N){this.hue=N,this.color=P(this.hue,this.opacity),this.shadowColor=R(this.hue),this.observer.requestRenderOnNextFrame()}render(N){this.fade(),N.lineWidth=this.width,N.strokeStyle=this.color,N.shadowColor=this.shadowColor}fade(){if(!this.startedFadingTimestamp)return;const N=Math.min(1,(performance.now()-this.startedFadingTimestamp)/V.fadeDuration);this.width=V.initialWidth-N*L,this.opacity=1-N/1,this.color=P(this.hue,this.opacity),N<1?this.observer.requestRenderOnNextFrame():this.observer.onFadeCompleted()}getColor(){return this.color}constructor(N){this.observer=N,this.width=V.initialWidth,this.opacity=1,this.hue=0,this.color=P(this.hue,this.opacity),this.shadowColor=R(this.hue)}}c(V,"LineStyle"),V.displayName="LineStyle",V.initialWidth=7,V.fadeDuration=3e3;let B=c(class{getSegments(){return this.segments}addNewSegment(N){this.segments.push(N)}editLastSegment(N){this.segments.pop(),this.segments.push(N)}constructor(){this.segments=[]}},"ProgressivePlotter");class K extends null{draw(N){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const q=this.getSegments();N.beginPath();for(let re=0;re<q.length;re++){const le=q[re];N.moveTo(le.a[0]*$,le.a[1]*W),N.lineTo(le.b[0]*$,le.b[1]*W)}N.stroke()}}c(K,"ProgressiveLineSegmentPlotter");class b extends B{draw(N){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const q=this.getSegments();N.beginPath();for(let re=0;re<q.length;re++){const le=q[re];N.moveTo(le.a[0]*$,le.a[1]*W),N.bezierCurveTo(le.b[0]*$,le.b[1]*W,le.c[0]*$,le.c[1]*W,le.d[0]*$,le.d[1]*W)}N.stroke()}}c(b,"ProgressiveBezierCurvePlotter");const S=700,G=5e3;class H{onFadeCompleted(){this.plotter=new b,this.observer.onLineVisibilityChanged(!1),this.setLineVisibility({isFading:!1,isLineVisible:!1}),this.style.resetFade()}resetVestigialLineTimeout(){this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),this.vestigialLineTimeout=window.setTimeout(this.onInactivity,G)}resetInactivityTimeout(){this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=window.setTimeout(this.onInactivity,S)}update(N){if(this.resetVestigialLineTimeout(),N.type===a.Sl.New)this.visibilityState.isLineVisible||this.observer.onLineVisibilityChanged(!0),this.setLineVisibility({isFading:!1,isLineVisible:!0}),this.plotter.addNewSegment(N.segment),this.style.resetFade(),clearTimeout(this.inactivityTimeout);else if(N.type===a.Sl.Edit)this.plotter.editLastSegment(N.segment);else if(N.type===a.Sl.End)this.resetInactivityTimeout();else if(N.type===a.Sl.ChangeHue)this.style.setHue(N.hue);else{if(N.type===a.Sl.Position)return;(0,m.Kh)(N.type)}this.observer.requestRenderOnNextFrame()}render(N,$,W){this.style.render(N),this.plotter.draw(N,$,W)}setLineVisibility(N){Object.assign(this.visibilityState,N)}getColor(){return this.style.getColor()}constructor(N){this.observer=N,this.plotter=new b,this.visibilityState={isLineVisible:!1,isFading:!1},this.onInactivity=()=>{this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),!(this.visibilityState.isFading||!this.visibilityState.isLineVisible)&&(this.setLineVisibility({isFading:!0}),this.style.startFade())},this.style=new V({onFadeCompleted:()=>this.onFadeCompleted(),requestRenderOnNextFrame:()=>this.observer.requestRenderOnNextFrame()})}}c(H,"DrawLine"),H.displayName="DrawLine";const U=c(k=>{let{refToForward:N,isHidden:$,numVisibleLines:W,top:q,left:re,width:le,height:Ae,doNotApplyTargetRect:Te}=k;if(Te){const pe={display:$||W===0?"none":"block"};return t.createElement("canvas",{ref:N,style:pe,"data-qa":"huddles-drawing-canvas"})}const Ne={display:$||W===0?"none":"block",...(0,C.n)({left:re,top:q,width:le,height:Ae})};return t.createElement("canvas",{ref:N,style:Ne,"data-qa":"huddles-drawing-canvas"})},"Canvas");U.displayName="Canvas";const F=t.memo(U,n.A),Y=new h.Ay("calls"),Z=10,ee=10,j=c(k=>{let{displayName:N,coord:[$,W]}=k;return t.createElement("div",{className:"p-calls_draw__name_tag",style:{left:`${$+Z}px`,top:`${W+ee}px`}},N)},"name_tag_NameTag"),ge=c((k,N)=>{let{id:$}=N;return{displayName:$==="self"?Y.t("You"):(0,v.iU)(k,$)}},"name_tag_mapStateToProps"),ne=(0,d.N)(ge)(j),ue=-33,he=-9,be=c(k=>{let{top:N,left:$,width:W,height:q,leftOffset:re,topOffset:le,id:Ae}=k;const Te=$+re*W,Ne=N+le*q,pe={left:`${Te+he}px`,top:`${Ne+ue}px`},Ee=(0,t.useMemo)(()=>[Te,Ne],[Te,Ne]);return t.createElement(t.Fragment,null,Ae!=="self"&&t.createElement("div",{key:`cursor-${Ae}`,className:"p-calls_draw__pencil_cursor",style:pe}),t.createElement(ne,{key:`name-tag-${Ae}`,id:Ae,coord:Ee}))},"Cursor");be.displayName="Cursor";const xe=t.memo(be,n.A);function Le(){return Le=Object.assign||function(k){for(var N=1;N<arguments.length;N++){var $=arguments[N];for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&(k[W]=$[W])}return k},Le.apply(this,arguments)}c(Le,"_extends");var fe;class se extends(fe=t.Component){shouldComponentUpdate(N,$){return!(0,n.A)(this.props,N)||!(0,n.A)(this.state,$)}getOrCreatePeerLine(N){return this.peerLines[N]=this.peerLines[N]||new H({requestRenderOnNextFrame:()=>this.requestRenderOnNextFrame(),onLineVisibilityChanged:$=>this.setState(W=>({numVisibleLines:W.numVisibleLines+($?1:-1)}))}),this.peerLines[N]}onIncomingPeerLine(N){if(this.props.itemId&&N.itemId&&N.itemId!==this.props.itemId)return;const $=this.getOrCreatePeerLine(N.id);switch($.update(N),N.type){case a.Sl.New:{this.setState(W=>{let{tagCoords:q,userColors:re}=W;return{tagCoords:{...q,[N.id]:N.segment.d},userColors:{...re,[N.id]:$.getColor()}}});break}case a.Sl.Edit:{this.setState(W=>{let{tagCoords:q}=W;return{tagCoords:{...q,[N.id]:N.segment.d}}});break}case a.Sl.ChangeHue:{this.setState(W=>{let{userColors:q}=W;return{userColors:{...q,[N.id]:$.getColor()}}});break}case a.Sl.End:{this.setState(W=>{let{tagCoords:q}=W;return{tagCoords:(0,s.A)(q,N.id)}});break}case a.Sl.Position:{const W=[N.x,N.y];this.setState(q=>{let{tagCoords:re}=q;return{tagCoords:{...re,[N.id]:W}}});break}default:break}}componentDidMount(){o.A.subscribe(this.onIncomingPeerLine),this.ctx=this.props.refToForward.current.getContext("2d"),this.onResize()}componentDidUpdate(N,$){N.targetRect!==this.props.targetRect&&this.onResize(),this.state.numVisibleLines<0&&(0,D.tZ)("DRAW-RENDERER").warn("Should not have a negative number of lines"),this.props.onRendererIsActive&&(this.state.numVisibleLines===0&&$.numVisibleLines>0||this.state.numVisibleLines>0&&$.numVisibleLines===0)&&this.props.onRendererIsActive(this.state.numVisibleLines!==0)}componentWillUnmount(){if(!(0,i.A)(this.rafId)){var N;(N=this.context.windowRef.deref())===null||N===void 0||N.cancelAnimationFrame(this.rafId)}o.A.unsubscribe(this.onIncomingPeerLine)}onResize(){this.ctx&&(this.ctx.canvas.width=this.props.targetRect.width,this.ctx.canvas.height=this.props.targetRect.height,V.renderBaseStyle(this.ctx),this.requestRenderOnNextFrame())}requestRenderOnNextFrame(){this.dirty||(this.dirty=!0,this.rafId=this.context.windowRef.deref().requestAnimationFrame(this.draw))}draw(){if(this.rafId=void 0,!this.ctx)return;const N=this.props.targetRect.width,$=this.props.targetRect.height;this.dirty=!1,this.ctx.clearRect(0,0,N,$);const W=Object.values(this.peerLines);for(let q=0;q<W.length;q++)W[q].render(this.ctx,N,$)}renderCursor(N,$,W){const{targetRect:q,useHuddlesCursor:re,itemId:le,isHostDrawWindow:Ae,isWindowDrawing:Te}=this.props;if(re){const Ne=this.state.userColors[N],pe=le!=="self",Ee=Ae&&Te;return t.createElement(T,{key:N,peerId:N,topOffset:$,leftOffset:W,width:q.width,height:q.height,color:Ne,renderNameTag:pe,isWindowDrawMode:Ee,xWindowPosition:q.left,yWindowPosition:q.top})}return t.createElement(xe,Le({key:N,id:N,topOffset:$,leftOffset:W},q))}render(){if(this.props.setPositionToMatchTargetRect){const{targetRect:N}=this.props,$={...(0,C.n)({left:N.left,top:N.top,width:N.width,height:N.height})};return t.createElement("div",{className:"p-calls_draw__renderer",style:$},t.createElement(F,Le({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect,{doNotApplyTargetRect:!0})),(0,l.A)(this.state.tagCoords,(W,q)=>{let[re,le]=W;return this.renderCursor(q,le,re)}))}return t.createElement("div",{className:"p-calls_draw__renderer"},t.createElement(F,Le({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect)),(0,l.A)(this.state.tagCoords,(N,$)=>{let[W,q]=N;return this.renderCursor($,q,W)}))}constructor(N){super(N),this.dirty=!1,this.peerLines={},this.onResize=this.onResize.bind(this),this.onIncomingPeerLine=this.onIncomingPeerLine.bind(this),this.draw=this.draw.bind(this),this.renderCursor=this.renderCursor.bind(this),this.state={tagCoords:{},numVisibleLines:0,userColors:{}}}}c(se,"BaseDrawRenderer"),se.displayName="BaseDrawRenderer",se.contextType=r.Mn;const Q=t.forwardRef((k,N)=>t.createElement(se,Le({refToForward:N},k)))},1429018002:(x,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(3134334389),n=e(9391594207),s=e(387328355),i=e(5255740490),l=e(4096483543),o=e(4954329752),a=e(6533394955),r=e(6839101721),d=e(3395259576),u=e(2615100822),_=e(4761125736);function v(){return v=Object.assign||function(D){for(var C=1;C<arguments.length;C++){var m=arguments[C];for(var O in m)Object.prototype.hasOwnProperty.call(m,O)&&(D[O]=m[O])}return D},v.apply(this,arguments)}c(v,"_extends");let h=c(class extends t.PureComponent{componentDidMount(){this.setUpMedia(),this.updateVideoState(),this.setupInteractionObserver()}componentDidUpdate(){this.setUpMedia(),this.updateVideoState()}componentWillUnmount(){var C;const m=this.videoRef.current,{shouldAttachStream:O,tileId:P,peerId:R}=this.props;!P||!m||(this.props.unbindVideo({tileId:P,videoRef:this.videoRef,shouldDetachStream:!!O,peerId:R}),m.removeEventListener("resize",this.onResize),(C=this.interactionObserver)===null||C===void 0||C.disconnect())}setUpMedia(){const C=this.videoRef.current,{shouldAttachStream:m,tileId:O,peerId:P}=this.props;!O||!C||(this.props.bindVideo({tileId:O,videoRef:this.videoRef,shouldAttachStream:!!m,peerId:P}),C.addEventListener("resize",this.onResize))}setupInteractionObserver(){var C;if(window!=null&&window.IntersectionObserver&&this.props.unbindNonVisibleVideos&&((C=this.interactionObserver)===null||C===void 0||C.disconnect(),this.interactionObserver=new IntersectionObserver(this.interactionObserverCallback,{root:null,threshold:this.intersectionCheckThresholds}),this.videoRef.current)){var m;(m=this.interactionObserver)===null||m===void 0||m.observe(this.videoRef.current)}}interactionObserverCallback(C){const m=C[0];if(!m)return;const O=this.videoRef.current,{shouldAttachStream:P,tileId:R,peerId:L}=this.props;!R||!O||(m.intersectionRatio>this.intersectionVisibleThreshold?this.props.bindVideo({tileId:R,videoRef:this.videoRef,shouldAttachStream:!!P,peerId:L}):this.props.unbindVideo({tileId:R,videoRef:this.videoRef,shouldDetachStream:!!P,peerId:L}))}onResize(){const C=this.videoRef.current;C&&(this.props.isSharingScreen?C.style.objectFit="contain":C.style.objectFit=C.videoWidth>C.videoHeight?"cover":"contain")}updateVideoState(){const{experimentCallsPauseVideoOnScreenshareGroupTreatment:C,peerId:m,tileId:O,isActivePeerSharingScreen:P,isShroudVisible:R}=this.props;!C||!O||(m!=="self"&&P&&!R?this.props.pauseVideo({tileId:O}):this.props.unpauseVideo({tileId:O}))}render(){const{refToForward:C,shouldFlip:m,peerId:O,className:P,width:R,height:L,onLoadedData:V}=this.props;return t.createElement("video",v({className:(0,i.A)("p-calls_video",P,{flipped:m}),ref:(0,o.P)(this.videoRef,C),key:O,"data-qa":"free-willy-video-element",style:{width:R,height:L}},V?{onLoadedData:V}:{}))}constructor(C){super(C),this.videoRef=(0,t.createRef)(),this.intersectionVisibleThreshold=0,this.intersectionCheckThresholds=[0],this.onResize=C.onResize?C.onResize:this.onResize.bind(this),this.interactionObserverCallback=this.interactionObserverCallback.bind(this)}},"VideoElement");h.displayName="VideoElement";const f=c((D,C)=>{var m;const O=(0,_._Z)(D,"calls_pause_video_on_screenshare")==="treatment",P=(0,s.vz)(D),R=C.peer?(0,s.Bf)(C.peer):!1;let L;if(P)L=C.tileId;else{var V,B,K,b,S,G;L=R?(V=C.peer)===null||V===void 0||(B=V.tileIds)===null||B===void 0||(K=B.screenshare)===null||K===void 0?void 0:K.tileId:(b=C.peer)===null||b===void 0||(S=b.tileIds)===null||S===void 0||(G=S.camera)===null||G===void 0?void 0:G.tileId}return{tileId:L,peerId:(m=C.peer)===null||m===void 0?void 0:m.id,isSharingScreen:R,isShroudVisible:O&&(0,u.A)()?(0,d.pI)(D):!1,isActivePeerSharingScreen:(0,s.$Q)(D),experimentCallsPauseVideoOnScreenshareGroupTreatment:O}},"mapStateToProps"),I=c(D=>({bindVideo:C=>(0,l.A)()?(0,a.dispatchForClientStore)((0,r.d2)(C)):D((0,r.d2)(C)),unbindVideo:C=>(0,l.A)()?(0,a.dispatchForClientStore)((0,r.gJ)(C)):D((0,r.gJ)(C)),pauseVideo:C=>(0,l.A)()?(0,a.dispatchForClientStore)((0,r.WY)(C)):D((0,r.WY)(C)),unpauseVideo:C=>(0,l.A)()?(0,a.dispatchForClientStore)((0,r.D8)(C)):D((0,r.D8)(C))}),"mapDispatchToProps"),p=(0,n.N)(f,I)(h),y=t.forwardRef((D,C)=>t.createElement(p,v({refToForward:C},D)));function g(){return g=Object.assign||function(D){for(var C=1;C<arguments.length;C++){var m=arguments[C];for(var O in m)Object.prototype.hasOwnProperty.call(m,O)&&(D[O]=m[O])}return D},g.apply(this,arguments)}c(g,"peer_video_element_extends");const E=c((D,C)=>{const m=(0,s.vz)(D),O=(0,s.JZ)(D,C.id);let P;const R=C.tileId;if(!m)P=(0,s.fy)(O)&&!O.isScreenshareEnabled;else{var L,V;const B=((L=O.tileIds)===null||L===void 0||(V=L.screenshare)===null||V===void 0?void 0:V.tileId)===R;P=(0,s.fy)(O)&&!B}return{peer:O,tileId:R,shouldFlip:P}},"peer_video_element_mapStateToProps"),M=(0,n.N)(E)(y),T=t.forwardRef((D,C)=>t.createElement(M,g({},D,{refToForward:C})))},1337358413:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>v,Ft:()=>d});var t=e(3134334389),n=e(5255740490),s=e(9391594207),i=e(3328068409),l=e(9009528296),o=e(9853754481);function a(){return a=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var I=arguments[f];for(var p in I)Object.prototype.hasOwnProperty.call(I,p)&&(h[p]=I[p])}return h},a.apply(this,arguments)}c(a,"_extends");const r=15;function d(h){return Math.min(1,Math.max(0,o.Ep*h))}c(d,"getClampedAudioLevel");let u=c(class extends t.PureComponent{componentDidMount(){l.A.subscribe(this.onLevelUpdated)}componentWillUnmount(){l.A.unsubscribe(this.onLevelUpdated)}onLevelUpdated(f){const{isEnabled:I}=this.props;if(!I){this.numBubbles>0&&this.setState(()=>({numActiveBubbles:0,numInactiveBubbles:this.numBubbles}));return}const p=Math.floor(this.numBubbles*d(f));this.setState(()=>({numActiveBubbles:p,numInactiveBubbles:this.numBubbles-p}))}renderBubbles(){const{numActiveBubbles:f,numInactiveBubbles:I}=this.state,{bubbleClassname:p}=this.props,y=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--active",p,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),g=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--inactive",p,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),E=Array.from({length:f},(T,D)=>t.createElement("span",{key:`active${D}`,className:y})),M=Array.from({length:I},(T,D)=>t.createElement("span",{key:D,className:g}));return E.concat(M)}render(){const f=this.props.ariaLabelledBy||this.props.ariaLabel?{role:"meter","aria-labelledby":this.props.ariaLabelledBy,"aria-label":this.props.ariaLabel,"aria-valuenow":Math.floor(this.state.numActiveBubbles/this.numBubbles*100),"aria-valuemin":0,"aria-valuemax":100,tabIndex:0}:{};return t.createElement("div",a({className:(0,n.A)("p-audio_levels",this.props.containerClassName),"data-qa":"audio-levels-bubbles"},f),this.renderBubbles())}constructor(f){super(f);var I;this.numBubbles=(I=this.props.initNumBubbles)!==null&&I!==void 0?I:r;var p;this.state={numInactiveBubbles:(p=f.initNumBubbles)!==null&&p!==void 0?p:r,numActiveBubbles:0},this.onLevelUpdated=this.onLevelUpdated.bind(this)}},"AudioMeter");u.displayName="AudioMeter";const _=c(h=>({clientTheme:(0,i.to)(h)}),"mapStateToProps"),v=(0,s.N)(_)(u)},610288365:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>r});var t=e(9706240641),n=e.n(t),s=e(6696292586),i=e(3398586081);class l{constructor(){this.isInitialized=!1,this.isUsingBattery=null,this.batteryLevel=null,this.isSupported=!1,this.registerListeners=()=>{var v,h;(v=this.battery)===null||v===void 0||v.addEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.addEventListener("levelchange",this.handleBatteryUpdate)},this.removeEventListeners=()=>{var v,h;(v=this.battery)===null||v===void 0||v.removeEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.removeEventListener("levelchange",this.handleBatteryUpdate)},this.handleBatteryUpdate=()=>{this.isSupported&&this.updateBatteryState()},this.updateBatteryState=()=>{this.battery&&(this.isUsingBattery=!this.battery.charging,this.batteryLevel=this.battery.level)};var u=this;this.initialize=(0,t.coroutine)(function*(){yield u.setUp(),u.updateBatteryState()});var _=this;this.setUp=(0,t.coroutine)(function*(){if(!_.isInitialized)try{if(navigator.getBattery){const v=yield navigator.getBattery();_.battery=v,_.battery&&(_.isSupported=!0,_.updateBatteryState(),_.registerListeners())}else _.isSupported=!1}catch{_.isSupported=!1}finally{_.isInitialized=!0}}),this.cleanup=()=>{this.isSupported&&this.removeEventListeners()},this.isUsingBatteryPower=()=>{if(this.isSupported)return!!this.isUsingBattery},this.getLevel=()=>{if(!(!this.isSupported||!(0,s.A)(this.batteryLevel)))return this.batteryLevel*100},this.setUp()}}c(l,"HuddleBatteryManager");const o=(0,i.A)(()=>new l),a={getHuddleBatteryManager:o,HuddleBatteryManager:l},r=o},6664301844:(x,A,e)=>{"use strict";e.d(A,{$H:()=>ce,$b:()=>p,$s:()=>oe,E9:()=>g,Es:()=>r,I8:()=>h,KK:()=>$,Ll:()=>Y,Ls:()=>ae,QJ:()=>G,Q_:()=>Me,RM:()=>pe,VW:()=>Ve,XL:()=>I,Xw:()=>a,ZT:()=>re,_R:()=>Te,b9:()=>y,dQ:()=>d,gi:()=>D,i3:()=>N,j3:()=>J,jp:()=>b,jq:()=>Ue,kM:()=>He,mn:()=>f,of:()=>Ce,px:()=>Ye,uL:()=>v,vB:()=>Q,w2:()=>Se,wV:()=>be,xY:()=>u,xc:()=>S,z2:()=>_,zF:()=>ee,zg:()=>Ne});var t=e(9706240641),n=e.n(t),s=e(7164668892),i=e.n(s),l=e(3305135794),o=e.n(l);let a=s.CheckAudioConnectivityFeedback,r=s.CheckAudioInputFeedback,d=s.CheckAudioOutputFeedback,u=s.CheckCameraResolutionFeedback,_=s.CheckContentShareConnectivityFeedback,v=s.CheckNetworkTCPConnectivityFeedback,h=s.CheckNetworkUDPConnectivityFeedback,f=s.CheckVideoConnectivityFeedback,I=s.CheckVideoInputFeedback,p=s.LogLevel,y=s.MeetingSessionStatusCode,g=s.TranscriptItemType,E=null;const M=null;let T=null;const D=s.AllHighestVideoBandwidthPolicy;let C,m=null,O=null;const P=s.DefaultDeviceController;let R;const L=s.DefaultMeetingReadinessChecker;let V;const B=s.DefaultMeetingSession;let K,b=s.DefaultModality,S=s.DefaultVideoTile,G=s.MeetingSessionConfiguration,H=null,U=null,F=null,Y=s.PermissionDeniedError,Z=null,ee=s.Versioning,j=null,ge=null,ne=null,ue=null,he=null,be=s.VoiceFocusDeviceTransformer,xe=null,Le=s.DefaultVideoTransformDevice,fe=s.BackgroundBlurVideoFrameProcessor,se=null,Q=s.CSPMonitor;const k=null;let N=s.VideoFxProcessor,$=s.VideoCodecCapability,W=!1,q=!1;function re(Be){return le.apply(this,arguments)}c(re,"setUseExpSDK");function le(){return le=(0,t.coroutine)(function*(Be){if(W=Be,!W||q)return;const Ke=yield Promise.resolve().then(e.t.bind(e,3305135794,23));a=Ke.CheckAudioConnectivityFeedback,r=Ke.CheckAudioInputFeedback,d=Ke.CheckAudioOutputFeedback,u=Ke.CheckCameraResolutionFeedback,_=Ke.CheckContentShareConnectivityFeedback,v=Ke.CheckNetworkTCPConnectivityFeedback,h=Ke.CheckNetworkUDPConnectivityFeedback,f=Ke.CheckVideoConnectivityFeedback,I=Ke.CheckVideoInputFeedback,T=Ke.ClientVideoStreamReceivingReport,m=Ke.ConnectionHealthData,O=Ke.DataMessage,R=Ke.DefaultDeviceController,V=Ke.DefaultMeetingReadinessChecker,K=Ke.DefaultMeetingSession,b=Ke.DefaultModality,S=Ke.DefaultVideoTile,p=Ke.LogLevel,G=Ke.MeetingSessionConfiguration,H=Ke.MeetingSessionStatus,y=Ke.MeetingSessionStatusCode,U=Ke.MeetingSessionVideoAvailability,F=Ke.MutableVideoPreferences,Y=Ke.PermissionDeniedError,Z=Ke.TargetDisplaySize,g=Ke.TranscriptItemType,E=Ke.TranscriptionStatusType,ee=Ke.Versioning,j=Ke.VideoPreference,ge=Ke.VideoPreferences,ne=Ke.VideoPriorityBasedPolicy,ue=Ke.VideoPriorityBasedPolicyConfig,he=Ke.VideoTileState,C=Ke.AudioProfile,be=Ke.VoiceFocusDeviceTransformer,xe=Ke.DefaultBrowserBehavior,Le=Ke.DefaultVideoTransformDevice,fe=Ke.BackgroundBlurVideoFrameProcessor,se=Ke.BackgroundReplacementVideoFrameProcessor,Q=Ke.CSPMonitor,N=Ke.VideoFxProcessor,$=Ke.VideoCodecCapability,q=!0}),le.apply(this,arguments)}c(le,"_setUseExpSDK");function Ae(){return W}c(Ae,"isUsingExpSDK");function Te(){return R||P}c(Te,"getDefaultDeviceController");function Ne(){return P}c(Ne,"getDefaultDeviceControllerDefault");function pe(){return R}c(pe,"getDefaultDeviceControllerExp");function Ee(){return V||L}c(Ee,"getDefaultMeetingReadinessChecker");function oe(){return L}c(oe,"getDefaultMeetingReadinessCheckerDefault");function ce(){return V}c(ce,"getDefaultMeetingReadinessCheckerExp");function ke(){return K||B}c(ke,"getDefaultMeetingSession");function Ce(){return B}c(Ce,"getDefaultMeetingSessionDefault");function Me(){return K}c(Me,"getDefaultMeetingSessionExp");function Se(){return be}c(Se,"getVoiceFocusDeviceTransformer");function Ue(){return Le}c(Ue,"getDefaultVideoTransformDevice");function He(){return fe}c(He,"getBackgroundBlurVideoFrameProcessor");function Ye(){return l.BackgroundReplacementVideoFrameProcessor}c(Ye,"getBackgroundReplacementVideoFrameProcessor");function J(){return s.AudioProfile}c(J,"getAudioProfileDefault");function ae(){return C}c(ae,"getAudioProfileExp");function Ve(Be){return!!Be.type}c(Ve,"isTranscriptEventTranscriptionStatus")},252549317:(x,A,e)=>{"use strict";e.d(A,{LD:()=>o,MS:()=>a,Vd:()=>d,k0:()=>r});var t=e(8571983633),n=e(571104883),s=e(9042410435);const i="4.30.79",l=[s.R.DesktopScreen,s.R.DesktopWindow];function o(){return!!(0,n.dY)(i)}c(o,"isWindowDrawingSupported");function a(u){return(0,t.A)(u)?s.f.None:u.startsWith("screen:")?s.f.Screen:u.startsWith("window:")?s.f.Window:s.f.Other}c(a,"determineContentShareTypeFromSourceId");function r(u){if(!(0,n.y3)())return s.R.BrowserContent;const _=a(u);if((0,n.y3)())switch(_){case s.f.Screen:return s.R.DesktopScreen;case s.f.Window:return s.R.DesktopWindow;default:return s.R.DesktopUnknown}return s.R.Unknown}c(r,"determineFullContentShareSourceType");function d(u){return l.includes(u)}c(d,"doesContentShareTypeSupportDrawing")},9042410435:(x,A,e)=>{"use strict";e.d(A,{R:()=>n,f:()=>t});var t;(function(s){s.Screen="screen",s.Window="window",s.Other="other",s.None="none"})(t||(t={}));var n;(function(s){s.DesktopScreen="desktop:screen",s.DesktopWindow="desktop:window",s.DesktopUnknown="desktop:unknown",s.BrowserContent="browser:content",s.MobileScreen="mobile:screen",s.Unknown="unknown"})(n||(n={}))},416787925:(x,A,e)=>{"use strict";e.d(A,{Bm:()=>d,LL:()=>a,On:()=>f,Zy:()=>o,dx:()=>l,my:()=>r,tk:()=>_});var t=e(2208015175),n=e(7174777686),s=e(8736071954),i=e(336376314);const l="default",o="communications",a=[s.lW.Microphone,s.lW.Camera,s.Q4];function r(I,p){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a;(0,t.A)(p,(g,E)=>{if(!(0,n.A)(y,E))return;if(!g.length){I.warn(`No ${E} devices available`);return}const M=new i.M(["id","label"]);g.forEach(T=>{M.add([T.id,T.label].map(String))}),I.info(`${E} devices:
${M.report()}`)})}c(r,"logDevices");function d(){return{camera:[],microphone:[],output:[]}}c(d,"createEmptyDevices");const u={audioinput:s.lW.Microphone,videoinput:s.lW.Camera,audiooutput:s.Q4};function _(I){const p=u[I.kind],y={id:I.deviceId,label:I.label||void 0,groupId:I.groupId||void 0};return v(p)?{...y,type:p}:{...y,type:p}}c(_,"makeDevice");function v(I){return I!==s.Q4}c(v,"isInputDeviceType");function h(I){return v(I.type)}c(h,"isInputDevice");function f(I){return I.replace(/ *?\([^)]*?\) *?/g,"")}c(f,"removeDeviceIdFromDeviceLabel")},1473609332:(x,A,e)=>{"use strict";e.d(A,{t3:()=>a,Bh:()=>v,i4:()=>I});var t=e(9706240641),n=e(4103274853);function s(){return"0.1"}c(s,"getDevicePrefsVersion");var i=e(416787925),l=e(2825968873);const o="devicePrefs";function a(g){return(0,n.A)(g,E=>E[0])}c(a,"getPreferredDevices");function r(){return{camera:[],microphone:[i.dx,i.Zy],output:[i.dx,i.Zy]}}c(r,"createDefaultDevicePriority");function d(){return{camera:[],microphone:[],output:[]}}c(d,"createDefaultDeviceExtendedPriority");function u(){return{enableAGC:!0,enableNoiseSuppression:!0}}c(u,"createDefaultAudioPrefs");function _(){return{enableHD:!1,mirrorVideo:!1,effect:void 0}}c(_,"createDefaultVideoPrefs");function v(){const g=localStorage.getItem(o),E={version:s(),deviceIdPriorities:r(),deviceIdPrioritiesExtended:d(),video:_(),audio:u()};if(!g)return E;try{const M=JSON.parse(g);return M.version!==s()?E:{...E,...M}}catch(M){return(0,l.tZ)("DEVICES").error("Could not read device preferences from localStorage: ",M.message),E}}c(v,"readDevicePrefs");function h(g){return f.apply(this,arguments)}c(h,"updateDeviceIdPrioritiesExtended");function f(){return f=(0,t.coroutine)(function*(g){const E={},M=yield navigator.mediaDevices.enumerateDevices();for(const T of Object.keys(g)){const D=[],C=T;for(let m=0;m<g[C].length;m++){const O=g[C][m],P=M.find(R=>R.deviceId===O);P&&D.push({id:P.deviceId,groupId:P.groupId,label:P.label,labelWithoutId:(0,i.On)(P.label)})}E[T]=D}return E}),f.apply(this,arguments)}c(f,"_updateDeviceIdPrioritiesExtended");function I(g){return p.apply(this,arguments)}c(I,"writeDevicePrefs");function p(){return p=(0,t.coroutine)(function*(g){try{const E=yield h(g.deviceIdPriorities),M={...g,deviceIdPrioritiesExtended:E};localStorage.setItem(o,JSON.stringify(M))}catch(E){(0,l.tZ)("DEVICES").error("Could not write device preferences to localStorage: ",E.message)}}),p.apply(this,arguments)}c(p,"_writeDevicePrefs");function y(g,E){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const T=zipObject(E,range(E.length)),D=zipObject(M.map(C=>C.labelWithoutId),range(M.length));return sortBy(g,C=>{const m=removeDeviceIdFromDeviceLabel(C.label);return isUndefined(T[C.deviceId])?isUndefined(D[m])?1/0:D[m]:T[C.deviceId]})}c(y,"sortDevicesByPriorityWithFallback")},9195837907:(x,A,e)=>{"use strict";e.d(A,{t:()=>t});var t;(function(n){n.Blur="blur",n.Background="bg"})(t||(t={}))},7149946954:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>O});var t=e(9706240641),n=e(8736071954),s=e(4518410378),i=e(5387083734),l=e(462591818),o=e(571104883),a=e(796111729),r;(function(P){P.Granted="granted",P.Denied="denied",P.Prompt="prompt",P.NotDetermined="not-determined",P.Restricted="restricted",P.Unknown="unknown"})(r||(r={}));var d;(function(P){P.CAMERA="camera",P.MICROPHONE="microphone",P.SCREEN="display-capture"})(d||(d={}));const u={[l.mT.MICROPHONE]:d.MICROPHONE,[l.mT.CAMERA]:d.CAMERA,[l.mT.SCREEN]:d.SCREEN},_={[l.mT.MICROPHONE]:null,[l.mT.CAMERA]:null,[l.mT.SCREEN]:null},v=c(()=>({..._}),"getInitialPermissionsState");var h=e(6998663753),f=e(6422693406);let I=c(class{constructor(R){this.config=R,this.canAccessMediaResource=K=>{const b=this.wasPermissionGranted(K);return this.logger.info(`${K} permissions granted: ${b}`),{isAvailable:this.config.isElectronApiAvailable,status:this.permissions[K]}};var L=this;this.requestMediaAccess=function(){var K=(0,t.coroutine)(function*(b){return L.updatePermissionsState(b,L.getDefaultAccessResult().status),L.logger.error("Requesting media access is not implemented for this device, but it is being called. This is likely a bug."),f.S.resolve({isAvailable:L.config.isElectronApiAvailable,isGranted:!0})});return function(b){return K.apply(this,arguments)}}();var V=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){try{yield V.refreshDevicePermissionStatus(l.mT.MICROPHONE),yield V.refreshDevicePermissionStatus(l.mT.CAMERA),yield V.refreshDevicePermissionStatus(l.mT.SCREEN)}catch(K){V.logger.warn("An error occurred while refreshing device permissions",K)}});var B=this;this.refreshDevicePermissionStatus=function(){var K=(0,t.coroutine)(function*(b){B.updatePermissionsState(b,B.getDefaultAccessResult().status)});return function(b){return K.apply(this,arguments)}}(),this.getDefaultAccessResult=()=>({isAvailable:this.config.isElectronApiAvailable,status:n.eJ.Granted}),this.updatePermissionsState=(K,b)=>{this.permissions[K]!==b&&(this.logger.info(`permission state for ${K} changed to ${b}`),this.permissions[K]=b,this.config.onPermissionsChange(this.permissions))},this.wasPermissionGranted=K=>{let b=!1;return this.permissions[K]&&(b=this.permissions[K]===n.eJ.Granted),b},this.hasNoKnownPermissions=K=>this.permissions[K]===null,this.logger=this.config.logger,this.permissions=this.config.initialState}},"DefaultDevicePermissions");var p=e(3245843483);let y=c(class extends I{constructor(R){super(R);var L=this;this.refreshDevicePermissionStatus=function(){var B=(0,t.coroutine)(function*(K){const{status:b}=yield(0,p.XBC)(K);L.logger.info(`Received ${K} access status for desktop app: ${b}`),L.updatePermissionsState(K,b)});return function(K){return B.apply(this,arguments)}}();var V=this;this.requestMediaAccess=function(){var B=(0,t.coroutine)(function*(K){const{isAvailable:b,isGranted:S}=yield(0,p.Nin)(K);return V.updatePermissionsState(K,S?n.eJ.Granted:n.eJ.Denied),{isAvailable:b,isGranted:!!S}});return function(K){return B.apply(this,arguments)}}()}},"DesktopDevicePermissions"),g=c(class extends I{constructor(R){super(R);var L=this;this.refreshDevicePermissionStatus=function(){var V=(0,t.coroutine)(function*(B){if(B===l.mT.SCREEN)return;const K=B===l.mT.MICROPHONE?"audioinput":"videoinput";try{const S=(yield navigator.mediaDevices.enumerateDevices()).filter(H=>H.kind===K),G=S.length>0&&S.some(H=>H.label.trim()!=="");L.updatePermissionsState(B,G?n.eJ.Granted:n.eJ.NotDetermined)}catch{L.logger.error('An error occurred enumerating devices. Setting access status to "granted"'),L.updatePermissionsState(B,n.eJ.NotDetermined)}});return function(B){return V.apply(this,arguments)}}()}},"FirefoxDevicePermissions"),E=c(class extends I{constructor(...R){super(...R),this.changeHandlers=v();var L=this;this.refreshDevicePermissionStatus=function(){var V=(0,t.coroutine)(function*(B){const K=yield navigator.permissions.query({name:u[B]});L.updatePermissionsState(B,K.state),L.logger.info(`Received ${B} access status for browser: ${L.permissions[B]}`),L.maybeRegisterPermissionChangeListener(B,K)});return function(B){return V.apply(this,arguments)}}(),this.maybeRegisterPermissionChangeListener=(V,B)=>{if(!this.changeHandlers[V]){const K=c(()=>this.onPermissionChangeEvent(V,B==null?void 0:B.state),"handler");B.addEventListener("change",K),this.changeHandlers[V]=K}},this.onPermissionChangeEvent=(V,B)=>{this.updatePermissionsState(V,B)}}},"BrowserDevicePermissions");var M=e(6673728906);const T="device-permissions-state",D=7*24*60*60*1e3,C=5*1e3;class m{isPersistedStateTrustworthy(R){return!(!R||Date.now()-R>D)}savePermissionsToLocalStorage(R){try{const L={permissions:R,timestamp:Date.now()},V=JSON.stringify(L);localStorage.setItem(T,V),this.logger.info(`Permissions saved to local storage: ${V}`)}catch(L){this.logger.error("Error saving permissions to local storage",L)}}readPermissionsFromLocalStorage(){try{const R=localStorage.getItem(T);if(R){this.logger.info(`Permissions loaded from local storage ${R}`);const L=JSON.parse(R);return this.isPersistedStateTrustworthy(L==null?void 0:L.timestamp)?L.permissions:(this.logger.warn("Permissions not considered trustworthy. Requiring refresh"),null)}}catch(R){this.logger.error("Error reading permissions from local storage",R)}return null}constructor(){this.isSSB=(0,o.y3)(),this.logger=(0,a.Wo)({label:"DEVICE-PERMISSIONS-MANAGER"}),this.initialized=!1;var R=this;this.init=(0,h.A)((0,t.coroutine)(function*(){R.logger.info("Initializing media device permissions manager"),R.initialized=!0,R.permissionsStrategy=R.getStrategy(),setTimeout(R.refreshAllPermissions,C),R.logger.info("Scheduled permissions refresh")})),this.canAccessMediaResource=K=>{var b,S;return!((b=this.permissionsStrategy)===null||b===void 0)&&b.canAccessMediaResource?this.permissionsStrategy.canAccessMediaResource(K):{isAvailable:!!(!((S=this.config)===null||S===void 0)&&S.isElectronApiAvailable),status:n.eJ.Granted}};var L=this;this.requestMediaAccess=function(){var K=(0,t.coroutine)(function*(b){var S;return!((S=L.config)===null||S===void 0)&&S.isElectronApiAvailable?L.permissionsStrategy.requestMediaAccess(b):(L.logger.warn("Permissions strategy not available"),{isAvailable:!1,isGranted:!0})});return function(b){return K.apply(this,arguments)}}(),this.getStrategy=()=>{const K={initialState:this.readPermissionsFromLocalStorage()||v(),isElectronApiAvailable:this.isSSB&&(0,o.cX)(),onPermissionsChange:this.onPermissionsChange,logger:this.logger};return this.config=K,(0,o.y3)()?(this.logger.info("Using desktop device permissions strategy"),new y(K)):(0,o.gm)()?(this.logger.info("Using Firefox device permissions strategy"),new g(K)):this.shouldUsePermissionsApi()?(this.logger.info("Using browser device permissions strategy"),new E(K)):(this.logger.info("Using default device permissions strategy"),new I(K))},this.onPermissionsChange=K=>{this.logger.info("Permissions changed",K),(0,M.pq)(),this.savePermissionsToLocalStorage(K)};var V=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){V.logger.info("Refreshing all permissions");try{yield navigator.mediaDevices.enumerateDevices(),yield V.refreshPermissions(l.mT.MICROPHONE),yield V.refreshPermissions(l.mT.CAMERA),yield V.refreshPermissions(l.mT.SCREEN)}catch(K){V.logger.warn("An error occurred while refreshing device permissions",K)}});var B=this;this.refreshPermissions=function(){var K=(0,t.coroutine)(function*(b){return B.logger.debug(`Refreshing ${b} permissions`),(0,i.IE)("media-access-update",(0,t.coroutine)(function*(){return B.permissionsStrategy.refreshDevicePermissionStatus(b)})).catch(S=>{B.logger.warn(`An error occurred while trying to check ${b} permissions`,S)})});return function(b){return K.apply(this,arguments)}}(),this.shouldUsePermissionsApi=()=>!this.isSSB&&!(0,o.gm)()&&"permissions"in s.J.navigator,this.clearAllPermissions=()=>{this.initialized&&this.savePermissionsToLocalStorage(v())}}}c(m,"DevicePermissionsManager");const O=new m},6673728906:(x,A,e)=>{"use strict";e.d(A,{_o:()=>ce,Nj:()=>Ee,T5:()=>Te,Zy:()=>re,G0:()=>ke,pq:()=>Ne,cT:()=>Ae,i_:()=>le,es:()=>oe});var t=e(9706240641),n=e(8736071954),s;(function(Ce){Ce.Microphone="audioinput",Ce.Camera="videoinput",Ce.Speakers="audiooutput"})(s||(s={}));const i=c(Ce=>({[n.lW.Microphone]:s.Microphone,[n.lW.Camera]:s.Camera,[n.Q4]:s.Speakers})[Ce],"adapter_mapDeviceTypeToDeviceKind"),l=c(Ce=>({[s.Microphone]:n.lW.Microphone,[s.Camera]:n.lW.Camera,[s.Speakers]:n.Q4})[Ce],"mapDeviceKindToDeviceType"),o=c(Ce=>{const Me=l(Ce.kind);return Me===n.Q4?{id:Ce.deviceId,label:Ce.label,groupId:Ce.groupId,type:n.Q4}:{id:Ce.deviceId,label:Ce.label,groupId:Ce.groupId,type:Me,track:void 0}},"adapter_mapMediaDeviceInfoToDevice");var a=e(4423055085),r=e(4518410378),d=e(9113979368),u=e(9268023148),_=e(2208015175),v=e(235108050),h=e(8289365785),f=e(4103274853),I=e(796111729);const y=(0,I.Wo)({label:"DEVICE-PREFS"});var g=e(571104883),E=e(3078252698);const M=["ZoomAudioDevice (Virtual)"],C=["default","communications"],m=c(Ce=>C.includes(Ce),"isOSDefaultDeviceId"),O=c((Ce,Me)=>{if(m(Ce.deviceId))return!1;const Se=Me.find(Ue=>m(Ue.deviceId)&&Ue.kind===Ce.kind);return(Se==null?void 0:Se.groupId)===Ce.groupId&&(Se==null?void 0:Se.label.includes(Ce.label))},"isOSDefaultDeviceForType"),P=c(Ce=>{const Me=/iphone/,Se=Ce.label;if(!(0,E.A)(Se))return!1;const Ue=(0,g.cX)()&&Se&&Me.test(Se.toLowerCase()),He=(Se==null?void 0:Se.toLowerCase().includes("display audio"))||Se.toLowerCase().includes("displayport");return Ue||He},"shouldDeprioritizeDevice"),R=c(Ce=>!Ce.label||M.includes(Ce.label),"shouldRemoveDevice"),L=c(Ce=>Ce&&Ce.replace(/ *?\([a-zA-Z0-9]{4}:[a-zA-Z0-9]{4}\) *?/g,""),"removeDeviceFingerprintFromLabel"),V=c(Ce=>Ce.filter(Me=>Me.label).map(Me=>({deviceId:Me.deviceId,kind:Me.kind,label:L(Me.label)||"",groupId:Me.groupId})),"scrubAvailableDevices"),B=c((Ce,Me)=>`${Ce}-${Me}`,"generateDeviceKey");var K=e(6696292586),b=e(6313685253),S=e(8086952004);const G="version",H=4,U={1:Ce=>Ce,2:Ce=>(0,f.A)(Ce,Me=>{if((0,K.A)(Me))return Me;const Se={...Me},Ue=L(Me.deviceLabel);return Ue&&Ue!==Me.deviceLabel&&(Se.deviceLabel=Ue),Se}),3:Ce=>(0,b.A)(Ce,(Me,Se,Ue)=>{if(!m(Ue)&&Ue!==G){const He=(0,S.A)(Ce,(Ye,J)=>m(J)&&Ye.deviceInfo.kind===Se.deviceInfo.kind&&Ye.deviceInfo.groupId===Se.deviceInfo.groupId&&Ye.deviceInfo.label.includes(Se.deviceInfo.label));He&&((!Se.used&&He.used||Se.used&&He.used&&Se.used<He.used)&&(Se.used=He.used),(!Se.selected&&He.selected||Se.selected&&He.selected&&Se.selected<He.selected)&&(Se.selected=He.selected)),Me[Ue]=Se}return Me},{}),4:Ce=>(0,b.A)(Ce,(Me,Se,Ue)=>{if((0,K.A)(Se))Me[Ue]=Se;else{const{deviceId:He,kind:Ye}=Se.deviceInfo,J=B(He,Ye);Me[J]=Se}return Me},{})},F=c(Ce=>Ce[G]!==H,"isMigrationNeeded"),Y=c(Ce=>{if(!U[H])throw new Error(`No migration found for version ${H}`);const Me=Ce[G]||0;if(Me===H)return Ce;let Se={...Ce};for(let Ue=Me;Ue<H;Ue++){const He=Ue+1,Ye=U[He];Se=Ye(Se),Se[G]=He}return Se},"maybeMigrateDeviceHistory");var Z=e(1649982175);const ee="device-selection-records",j=y,ge=c(()=>{let Ce;try{const Me=localStorage.getItem(ee);Me?(Ce=JSON.parse(Me),F(Ce)?(j.debug(`Migration needed for device selection history from ${Ce[G]} to ${H}`),Ce=Y(Ce)):j.debug("No migration needed for device selection history")):Ce=void 0}catch(Me){j.error("Failed to read device selection history from local storage",Me),Ce=void 0}return j.debug("Reading device selection history from local storage",Ce),Ce?(0,Z.A)(Ce,G):void 0},"readSelectionHistoryFromLocalStorage"),ne=c(Ce=>{if(Ce){j.debug("Writing device selection history to local storage",Ce);try{const Me={...Ce,[G]:H};localStorage.setItem(ee,JSON.stringify(Me))}catch(Me){j.error("Failed to write device selection history to local storage",Me)}}},"saveDeviceSelectionRecordsToLocalStorage");var ue=e(700984029),he=e(4250409994),be=e(6533394955),xe=e(3783723764),Le=e(6217320234);class fe{hasRecordForDevice(Me){return!!this.getRecord(Me)}getFormattedLabelForRecord(Me){const Se=this.getRecord(Me);return Se==null?void 0:Se.deviceLabel}wasDeviceSelected(Me){const Se=this.getRecord(Me);return!!(Se!=null&&Se.selected)}wasDeviceUsed(Me){const Se=this.getRecord(Me);return!!(Se!=null&&Se.used)}createRecord(Me){const Se=this.createEmptyDeviceSelectionRecord(Me);if(Se.deviceLabel){const Ue=this.findExistingRecordByLabel(Me,Se.deviceLabel);if(Ue){y.info(`Matching device record found for label: ${Ue.deviceLabel} ${Ue.deviceInfo.deviceId}`),this.removeRecord(Ue.deviceInfo),this.setRecord(Me,{...Ue,deviceInfo:Me});return}}this.setRecord(Me,Se)}updateDeviceUsed(Me){const Se=this.getRecord(Me);Se&&(y.info(`Removing device selection record for used device ${Me.deviceId}`),this.setRecord(Me,{...Se,used:Date.now()}))}updateDeviceSelected(Me){const Se=this.getRecord(Me);Se&&(y.info(`Updating device selection record for selected device ${Me.deviceId}`),this.setRecord(Me,{...Se,selected:Date.now()}))}updateDeviceLabel(Me){this.getRecord(Me)&&y.info(`Updating device selection record for label ${Me.label} ${Me.deviceId}`)}updateDeviceInfo(Me){const Se=this.getRecord(Me);Se&&(y.debug(`Updating device selection record for device info ${Me.label} ${Me.deviceId}`),this.setRecord(Me,{...Se,deviceLabel:Me.label,deviceInfo:Me}))}persistToLocalStorage(){y.info("Persisting device selection records to local storage"),ne(this.records)}initFromLocalStorage(){this.records=ge()||{},y.info("Initializing device preferences manager from local storage")}setRecord(Me,Se){const{deviceId:Ue,kind:He}=Me,Ye=B(Ue,He);y.debug(`Setting device selection record for ${Ye}`,Se),this.records[Ye]=Se}getRecord(Me){let{deviceId:Se,kind:Ue}=Me;const He=B(Se,Ue);return this.records[He]}removeRecord(Me){const{deviceId:Se,kind:Ue}=Me,He=B(Se,Ue);y.info(`Removing device selection record for ${He}`),delete this.records[He]}findExistingRecordByLabel(Me,Se){return Object.values(this.records).find(He=>He.deviceLabel===Se&&He.deviceInfo.kind===Me.kind)}constructor(){this.records={},this.init=()=>{this.initFromLocalStorage(),this.printRecords()},this.getAllRecordsForTesting=()=>({...this.records}),this.getDeviceInfoForRecord=Me=>{const Se=this.getRecord(Me);if(Se)return{...Se.deviceInfo}},this.sortDevicesByLastSelection=Me=>(0,xe.A)(Me,Se=>{var Ue;return(Ue=this.records[B(Se.deviceId,Se.kind)])===null||Ue===void 0?void 0:Ue.selected},"desc"),this.sortDevicesByLastUsed=Me=>(0,xe.A)(Me,Se=>{var Ue;return(Ue=this.records[B(Se.deviceId,Se.kind)])===null||Ue===void 0?void 0:Ue.used},"desc"),this.sortDevicesByLabel=Me=>(0,Le.A)(Me,Se=>Se.label),this.printRecords=()=>{y.info("Device selection records:",this.records)},this.createEmptyDeviceSelectionRecord=Me=>({deviceInfo:Me,deviceLabel:Me.label,selected:null,used:null})}}c(fe,"DeviceSelectionRecordsStore");let se;const Q=c(()=>(se||(se=new fe),se),"getDeviceSelectionRecordStore");class k{constructor(){this.logger=y,this.deviceSelectionRecords=Q(),this.availableDevices=[],this.currentTeamId=null,this.useDevicesExp=!1,this.updatingAvailableDevicesPromise=null,this.enqueuedPreferenceUpdates={[s.Microphone]:!1,[s.Camera]:!1,[s.Speakers]:!1},this.osDefaultDevices={[s.Microphone]:null,[s.Camera]:null,[s.Speakers]:null},this.prioritizedDeviceLists={[s.Microphone]:[],[s.Camera]:[],[s.Speakers]:[]};var Me=this;this.init=function(){var J=(0,t.coroutine)(function*(ae){let{teamId:Ve,useDevicesExp:Be}=ae;if(Me.deviceSelectionRecords.init(),Ve!==Me.currentTeamId){Me.useDevicesExp=Be,Me.useDevicesExp&&Me.logger.info("Initializing device preferences manager with experimental features"),Me.currentTeamId=Ve,Me.dispatch=(0,be.getStoreInstanceByTeamId)(Ve).dispatch;try{yield Me.updateAvailableDevices(),navigator.mediaDevices.addEventListener("devicechange",Me.handleDeviceListChange)}catch(Ke){Me.logger.error("Error initializing device preferences manager",Ke)}}});return function(ae){return J.apply(this,arguments)}}();var Se=this;this.refreshAvailableDevices=(0,t.coroutine)(function*(){yield Se.updateAvailableDevices()}),this.getPreferredDeviceOfType=J=>this.getPrioritizedDeviceListOfType(J)[0],this.getPrioritizedDeviceListOfType=J=>this.prioritizedDeviceLists[J],this.recordDeviceSelected=(J,ae)=>{try{const{deviceId:Ve,deviceLabel:Be}=this.lookupDeviceDetailsById(J,ae);if(!Ve){this.logger.warn("Device record not found for selected device id",J);return}if(!this.deviceSelectionRecords.hasRecordForDevice({deviceId:Ve,kind:ae})){this.logger.warn("No device selection record found for device id",Ve);return}this.logger.info(`Reporting ${ae} device selected, label: ${Be}, id: ${Ve}`),this.deviceSelectionRecords.updateDeviceSelected({deviceId:Ve,kind:ae}),this.propagateUpdateToExternalStores()}catch(Ve){this.logger.error("Error reporting device selected",Ve)}},this.recordDeviceUsed=(J,ae)=>{try{const{deviceId:Ve,deviceLabel:Be}=this.lookupDeviceDetailsById(J,ae);if(!Ve){this.logger.warn("Device record not found for used device id",J);return}this.logger.info(`Reporting ${ae} device used, label: ${Be}, id: ${Ve}`),this.deviceSelectionRecords.updateDeviceUsed({deviceId:Ve,kind:ae}),this.propagateUpdateToExternalStores()}catch(Ve){this.logger.error("Error reporting device used",Ve)}},this.getOSDefaults=()=>this.osDefaultDevices,this.clearDeviceSelectionRecords=()=>{ne({})},this.lookupDeviceDetailsById=(J,ae)=>{(0,d.A)(this.prioritizedDeviceLists[ae])&&this.updateAvailableDevices();const Ve={deviceId:null,deviceLabel:null},Be=m(J)?this.osDefaultDevices[ae]:J;if(Be&&m(Be)&&this.logger.warn(`OS default device id (${J}) used for details. This should not happen`),!Be)return this.logger.warn("Device record not found for device id",Be),Ve;Ve.deviceId=Be;const Ke=this.deviceSelectionRecords.getFormattedLabelForRecord({deviceId:Be,kind:ae}),Re=L(Ke);return Re?(Ve.deviceLabel=Re,Ve):(this.logger.warn("Device record not found for device id",Be),Ve)};var Ue=this;this.updateAvailableDevices=(0,t.coroutine)(function*(){if(Ue.updatingAvailableDevicesPromise)return Ue.logger.info("Available devices update already in progress. Returning existing promise."),Ue.updatingAvailableDevicesPromise;const J=function(){var ae=(0,t.coroutine)(function*(Ve){try{Ue.logger.info("Updating available devices");const Be=yield r.J.navigator.mediaDevices.enumerateDevices();Ue.logger.info(`Available devices ${JSON.stringify(Be,null,2)}`),Ue.availableDevices=V(Be),Ue.updateDeviceRecords(Ue.availableDevices),Ue.logger.info("Updated device records after device list update. Propagating update"),Ue.propagateUpdateToExternalStores(),Ve()}catch(Be){Ue.logger.error("Error updating available devices",Be),Ve()}finally{Ue.updatingAvailableDevicesPromise=null}});return c(function(Be){return ae.apply(this,arguments)},"updateFn")}();return Ue.updatingAvailableDevicesPromise=new Promise(J),Ue.updatingAvailableDevicesPromise});var He=this;this.waitForDeviceListUpdate=(0,t.coroutine)(function*(){yield He.updateAvailableDevices()}),this.updatePrioritizedDeviceLists=()=>{this.logger.debug("Updating prioritized device lists"),this.updatePrioritizedDeviceListOfType(s.Microphone),this.logger.debug("Updated mics",this.prioritizedDeviceLists[s.Microphone]),this.updatePrioritizedDeviceListOfType(s.Camera),this.logger.debug("Updated cameras",this.prioritizedDeviceLists[s.Camera]),this.updatePrioritizedDeviceListOfType(s.Speakers),this.logger.debug("Updated speakers",this.prioritizedDeviceLists[s.Speakers])};var Ye=this;this.handleDeviceListChange=(0,u.A)((0,t.coroutine)(function*(){try{Ye.logger.info(`Device list change event received at ${Date.now()}`),yield Ye.updateAvailableDevices()}catch(J){Ye.logger.error("Error handling device list change event",J)}}),1e3,{leading:!1,trailing:!0,maxWait:2e3}),this.updateDeviceRecords=J=>{(0,_.A)(J,ae=>{if(!ae.deviceId||m(ae.deviceId))return;const Ve=this.deviceSelectionRecords.hasRecordForDevice(ae),Be=this.deviceSelectionRecords.getFormattedLabelForRecord(ae),Ke=this.deviceSelectionRecords.getDeviceInfoForRecord(ae);if(Ve&&Ke&&Ke.kind!==ae.kind){this.logger.warn(`device id collision between ${Ke.kind} device (${Ke.label}) and ${ae.kind} device (${ae.label})`);return}if(Ve&&ae.label&&Be!==ae.label&&(this.deviceSelectionRecords.updateDeviceInfo(ae),this.logger.info(`Device label updated from ${Be} to ${ae.label}`)),Ve?(this.logger.debug(`Device history record found for ${ae.label} ${ae.deviceId}`),this.deviceSelectionRecords.updateDeviceInfo(ae)):(this.logger.info(`Creating new device history record for ${ae.label} ${ae.deviceId}`),this.deviceSelectionRecords.createRecord(ae)),O(ae,J)&&this.osDefaultDevices[ae.kind]!==ae.deviceId){var Fe;const ze=((Fe=this.getPreferredDeviceOfType(ae.kind))===null||Fe===void 0?void 0:Fe.deviceId)===this.osDefaultDevices[ae.kind];this.osDefaultDevices[ae.kind]=ae.deviceId,this.logger.info(`OS default device updated for ${ae.kind}: ${ae.label} ${ae.deviceId}`),ze&&(this.logger.info(`Preferred ${ae.kind} OS default has changed to: ${ae.label} ${ae.deviceId}. Recording as selected.`),this.recordDeviceSelected(ae.deviceId,ae.kind))}})},this.updatePrioritizedDeviceListOfType=J=>{var ae,Ve;let Be=null;const Ke=[],Re=[],Fe=[],Ie=[];this.availableDevices.forEach(tt=>{const _t=tt.deviceId===this.osDefaultDevices[tt.kind];if(tt.kind!==J||m(tt.deviceId))return;const yt=this.deviceSelectionRecords.getDeviceInfoForRecord(tt);if(!yt){this.logger.error("No selection record found for device",tt);return}if(!R(yt)){if(this.deviceSelectionRecords.wasDeviceSelected(yt)){Ke.push(yt);return}if(this.deviceSelectionRecords.wasDeviceUsed(yt)){Re.push(yt);return}if(P(yt)){Fe.push(yt);return}if(_t){Be=yt;return}Ie.push(yt)}});const ze=[];ze.push(...this.deviceSelectionRecords.sortDevicesByLastSelection(Ke)),ze.push(...this.deviceSelectionRecords.sortDevicesByLastUsed(Re)),ze.push(Be),ze.push(...this.deviceSelectionRecords.sortDevicesByLabel(Ie)),ze.push(...Fe);const qe=(0,v.A)(ze).filter(Boolean),st=(ae=(0,h.A)(qe))===null||ae===void 0?void 0:ae.deviceId;return st&&st!==((Ve=this.prioritizedDeviceLists[J][0])===null||Ve===void 0?void 0:Ve.deviceId)&&(this.enqueuedPreferenceUpdates[J]=!0),qe&&(this.prioritizedDeviceLists[J]=qe),qe},this.updateDevicesInHuddle=()=>{const J=c(ae=>{var Ve;const Be=(Ve=this.getPreferredDeviceOfType(ae))===null||Ve===void 0?void 0:Ve.deviceId;!Be||!this.enqueuedPreferenceUpdates[ae]||(this.enqueuedPreferenceUpdates[ae]=!1,(0,be.dispatchForClientStore)((0,he.HC)({id:Be,type:l(ae)})),this.logger.info(`Setting preferred ${ae} device in huddle`,Be))},"maybeApplyPreference");J(s.Microphone),J(s.Speakers),J(s.Camera)},this.propagateUpdateToExternalStores=()=>{this.deviceSelectionRecords.persistToLocalStorage(),this.updatePrioritizedDeviceLists(),this.logger.info("Propagating device selection history update"),this.dispatch((0,ue.Fb)(void 0)),this.updateDevicesInHuddle()}}}c(k,"DevicePreferencesManager");const N=new k,$={printDeviceSelectionRecords:()=>{const Ce=Q().getAllRecordsForTesting(),Me=(0,f.A)(Ce,Se=>{var Ue;return{deviceId:Se.deviceInfo.deviceId,label:Se.deviceLabel,type:Se.deviceInfo.kind,"is preferred":((Ue=N.getPreferredDeviceOfType(Se.deviceInfo.kind))===null||Ue===void 0?void 0:Ue.deviceId)===Se.deviceInfo.deviceId,"last selected":Se.selected?Se.selected.toString():"Never selected","last used":Se.used?Se.used.toString():"Never used","is available":!!N.getPrioritizedDeviceListOfType(Se.deviceInfo.kind).find(He=>He.deviceId===Se.deviceInfo.deviceId),"is OS default":Se.deviceInfo.deviceId===N.getOSDefaults()[Se.deviceInfo.kind],groupId:Se.deviceInfo.groupId}});console.log("Device selection records"),console.table(Me)},printPreferredMicrophone:()=>{const Ce=N.getPreferredDeviceOfType(s.Microphone);console.log("Preferred microphone",Ce)},printPreferredCamera:()=>{const Ce=N.getPreferredDeviceOfType(s.Camera);console.log("Preferred camera",Ce)},printPreferredSpeakers:()=>{const Ce=N.getPreferredDeviceOfType(s.Speakers);console.log("Preferred speakers",Ce)},printPrioritizedDeviceLists:()=>{const Ce=(0,f.A)(N.getOSDefaults(),(Me,Se)=>N.getPrioritizedDeviceListOfType(Se));(0,_.A)(Ce,(Me,Se)=>{const Ue=Me.map(He=>({deviceId:He.deviceId,label:He.label,groupId:He.groupId}));console.log(`Prioritized list for ${Se}`),console.table(Ue)})},printRawDeviceList:(0,t.coroutine)(function*(){const Ce=yield r.J.navigator.mediaDevices.enumerateDevices();console.log("Available devices"),Ce.forEach(Me=>{console.log(Me)})}),printDebugInfo:()=>{$.printDeviceSelectionRecords(),$.printPrioritizedDeviceLists(),$.printPreferredMicrophone(),$.printPreferredCamera(),$.printPreferredSpeakers(),$.printRawDeviceList()},clearDeviceSelectionRecords:()=>{N.clearDeviceSelectionRecords(),r.J.location.reload()}};(0,a.ul)("devices",$);const W=N;let q=null;const re=function(){var Ce=(0,t.coroutine)(function*(Me){let{teamId:Se,useDevicesExp:Ue}=Me;!Se||q===Se||(q=Se,yield W.init({teamId:Se,useDevicesExp:Ue}))});return c(function(Se){return Ce.apply(this,arguments)},"initializeDevicePreferences")}(),le=c((Ce,Me)=>{if(!q)return;const Se=i(Me);W.recordDeviceUsed(Ce,Se)},"reportDeviceUsed"),Ae=c((Ce,Me)=>{if(!q)return;const Se=i(Me);W.recordDeviceSelected(Ce,Se)},"reportDeviceSelected"),Te=c(()=>{if(!q)return;const Ce=W.getPrioritizedDeviceListOfType(s.Microphone)||[],Me=W.getPrioritizedDeviceListOfType(s.Camera)||[],Se=W.getPrioritizedDeviceListOfType(s.Speakers)||[];return{[n.lW.Microphone]:Ce.map(o),[n.lW.Camera]:Me.map(o),[n.Q4]:Se.map(o)}},"getPrioritizedDeviceLists"),Ne=function(){var Ce=(0,t.coroutine)(function*(){q&&(yield W.refreshAvailableDevices())});return c(function(){return Ce.apply(this,arguments)},"refreshDeviceListsOnDevicePermissionsUpdate")}(),pe=c(Ce=>{if(!q)return;const Me=mapDeviceTypeToDeviceKind(Ce);return devicePreferencesManager.getPrioritizedDeviceListOfType(Me).map(mapMediaDeviceInfoToDevice)},"getPrioritizedDeviceListOfType"),Ee=c(Ce=>{if(!q)return;const Me=i(Ce),Se=W.getPreferredDeviceOfType(Me);if(Se)return o(Se)},"getPreferredDeviceOfType"),oe=function(){var Ce=(0,t.coroutine)(function*(){q&&(yield W.waitForDeviceListUpdate())});return c(function(){return Ce.apply(this,arguments)},"waitForDeviceListUpdate")}(),ce=c(()=>{var Ce;return((Ce=Ee(n.Q4))===null||Ce===void 0?void 0:Ce.id)||"default"},"getPreferredAudioSinkId"),ke=c(()=>!!q,"isDevicePreferencesManagerInitialized")},63202349:(x,A,e)=>{"use strict";e.d(A,{k:()=>o});var t=e(6664301844),n=e(2825968873),s=e(6926388022),i=e(4423055085);const l={debug:0,info:1,warn:2,error:3,action:0};class o{debug(r){if(!(this.level>t.$b.DEBUG||!o.debugLogsEnabled))if(typeof r=="string"){const d=r;this.consoleLogger.debug(d)}else{const d=r();this.consoleLogger.debug(d)}}info(r){this.level>t.$b.INFO||this.consoleLogger.info(r)}warn(r){this.level>t.$b.WARN||this.consoleLogger.warn(r)}error(r){this.level>t.$b.ERROR||this.callLogger.error(r)}setLogLevel(r){this.level=r}getLogLevel(){return this.level}getName(){return this.name}constructor(r,d){this.name=r,this.level=d||l[(0,s.XM)()],this.consoleLogger=(0,n.Cc)(r),this.callLogger=(0,n.Jt)(r)}}c(o,"FreeWillyLogger"),o.debugLogsEnabled=!1,(0,i.ul)("toggleChimeDebugLogs",()=>{o.debugLogsEnabled=!o.debugLogsEnabled})},8719752487:(x,A,e)=>{"use strict";e.d(A,{Y:()=>Sn});var t=e(9706240641),n=e(1649982175),s=e(6664301844),i=e(5741354339),l=e(8445020572),o=e(2825968873),a=e(8736071954),r=e(7561130599),d=e(4708000837),u=e(462591818),_=e(9268023148),v=e(3078252698),h=e(2003990933),f=e(571104883),I=e(8872167513),p=e(2709531527),y=e(6246464105),g=e(9853754481);let E=c(class{getLevel(){return this.analyserNode.getByteTimeDomainData(this.data),(0,g.n2)(this.data)/g.Ep}constructor(z){this.analyserNode=z,this.data=new Uint8Array(this.analyserNode.fftSize)}},"AudioAnalyser");var M=e(9009528296);const T=300;class D{stop(){this.previewAudioAnalyser=void 0,clearTimeout(this.timeoutId)}setPreviewAudioAnalyser(z){this.previewAudioAnalyser=z}constructor(){this.timeoutId=-1,this.monitorAudioLevel=()=>{this.previewAudioAnalyser&&M.A.subscriberCount>0&&M.A.publish(this.previewAudioAnalyser.getLevel()),this.timeoutId=window.setTimeout(this.monitorAudioLevel,T)},this.monitorAudioLevel()}}c(D,"AudioLevelMonitor");function C(dt,z){let{skipIntermediatePendingRuns:te=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=!1,Oe=[];const $e=function(){var at=(0,t.coroutine)(function*(){for(var Xe=arguments.length,Nt=new Array(Xe),$t=0;$t<Xe;$t++)Nt[$t]=arguments[$t];if(ve){te&&(Oe=[]);const Jn=(0,i.u)();return Oe.push({args:Nt,deferred:Jn}),Jn}ve=!0;const Ln=yield z.call(dt,...Nt);ve=!1;const xn=Oe.shift();return xn&&$e(...xn.args).then(xn.deferred.resolve).catch(xn.deferred.reject),Ln});return c(function(){return at.apply(this,arguments)},"run")}();return $e}c(C,"serialGuard");var m=e(3496486794),O=e(6673728906);class P{initialize(z){let{preferredDeviceId:te}=z;var ve,Oe,$e,at,Xe,Nt,$t,Ln,xn,Jn,$n,w,de,we;if(!(!((ve=this.defaultDeviceController)===null||ve===void 0||(Oe=ve.activeDevices)===null||Oe===void 0||($e=Oe.audio)===null||$e===void 0||(at=$e.stream)===null||at===void 0)&&at.getAudioTracks))return;const Et=this.defaultDeviceController;if(!(!((Xe=this.defaultDeviceController)===null||Xe===void 0||(Nt=Xe.activeDevices)===null||Nt===void 0||($t=Nt.audio)===null||$t===void 0||(Ln=$t.stream)===null||Ln===void 0)&&Ln.getAudioTracks)){this.logger.warn("Unable to retrieve audio tracks from the default device controller");return}const gn=Et.activeDevices.audio.stream.getAudioTracks();if(gn.length===1)this.audioInputTrack=gn[0];else{this.logger.warn("No audio input tracks where found for the current audio device. Audio input tracks amount: {tracks.length}");return}(xn=this.audioInputTrack)===null||xn===void 0||xn.addEventListener("mute",this.onMute),(Jn=this.audioInputTrack)===null||Jn===void 0||Jn.addEventListener("unmute",this.onUnmute),($n=this.audioInputTrack)===null||$n===void 0||$n.addEventListener("ended",this.onEnded),!((w=this.audioInputTrack)===null||w===void 0)&&w.muted?this.onMute():this.onUnmute();const Zt=(we=(de=this.audioInputTrack)===null||de===void 0?void 0:de.getSettings())===null||we===void 0?void 0:we.deviceId;if(!Zt){this.logger.warn("No deviceId found for audio input track");return}Zt!==te?this.logger.warn(`Used audio input track device id (${Zt}) does not match the preferred device id (${te}). 
				Preferred device is unavailable. User may report issues with other participants hearing them.`):this.logger.info(`Used audio input track device id matches the preferred device id (${te})`),(0,O.cT)(Zt,a.lW.Microphone)}tearDown(){var z,te,ve;(z=this.audioInputTrack)===null||z===void 0||z.removeEventListener("mute",this.onMute),(te=this.audioInputTrack)===null||te===void 0||te.removeEventListener("unmute",this.onUnmute),(ve=this.audioInputTrack)===null||ve===void 0||ve.removeEventListener("ended",this.onEnded)}onMute(){this.isAudioInputTrackMuted=!0,this.logger.warn("Audio input track is muted. Alerting the user"),this.observer.onAudioInputTrackMuted()}onUnmute(){this.isAudioInputTrackMuted&&this.logger.info("Audio input track is unmuted. Removing alert if there is one"),this.observer.onAudioInputTrackUnMuted(),this.isAudioInputTrackMuted=!1}onEnded(){this.logger.warn("Audio input track was ended.")}constructor(z,te,ve){this.defaultDeviceController=z,this.observer=te,this.logger=ve,this.isAudioInputTrackMuted=!1,this.onMute=this.onMute.bind(this),this.onUnmute=this.onUnmute.bind(this),this.onEnded=this.onEnded.bind(this)}}c(P,"AudioInputTrackHandler");var R;(function(dt){dt.Blur="BLUR",dt.Image="IMAGE",dt.None="NONE"})(R||(R={}));class L{constructor({backgroundEffect:z}){this.filterCPUUtilizationHigh=te=>{const{cpuUtilization:ve,filterMillis:Oe,periodMillis:$e}=te;this.callLogger.warn(`CPU utilization by video background processor is high - cpuUtilization: ${ve} - spent ${Oe}ms of last ${$e}ms processing video background`)},this.filterFrameDurationHigh=te=>{const{framesDropped:ve,avgFilterDurationMillis:Oe,framerate:$e,periodMillis:at}=te;this.callLogger.warn(`Frame duration by video background processor is high. framerate: ${$e}, frames dropped: ${ve}, spent ${Oe}ms of last ${at}ms processing video background`)},this.callLogger=(0,o.Jt)(`VIDEO-BACKGROUND-${z}`)}}c(L,"VideoBackgroundObserver");const V=L;var B=e(5071086688),K=e(5470425448),b=e(1473609332),S=e(9195837907),G=e(416787925),H=e(7149946954);class U{load(){var z=this;return(0,t.coroutine)(function*(){if(z.url.origin===window.location.origin)return new Worker(z.url,z.options);const ve=yield(yield fetch(z.url)).text(),Oe=new Blob([ve],{type:"application/javascript"}),$e=URL.createObjectURL(Oe);return new Worker($e,z.options)})()}constructor(z,te){this.url=z,this.options=te}}c(U,"CORSWorker");class F{intrinsicDevice(){var z=this;return(0,t.coroutine)(function*(){return z.device})()}stop(){var z=this;return(0,t.coroutine)(function*(){var te;z.generatorVideoTrack.stop(),(te=z.inputMediaStream)===null||te===void 0||te.getTracks().forEach(ve=>ve.stop()),(yield z.worker).terminate()})()}onOutputStreamDisconnect(){if(this.generatorVideoTrack.stop(),!(this.device instanceof MediaStream)){var z;(z=this.inputMediaStream)===null||z===void 0||z.getTracks().forEach(te=>te.stop())}}transformStream(z){var te=this;return(0,t.coroutine)(function*(){if(te.inputMediaStream=z,z){const ve=new MediaStreamTrackProcessor({track:z.getVideoTracks()[0]});(yield te.worker).postMessage({type:"init",input:ve.readable,output:te.generatorVideoTrack.writable,width:z.getVideoTracks()[0].getSettings().width,height:z.getVideoTracks()[0].getSettings().height,bgImg:te.bgImg},[ve.readable,te.generatorVideoTrack.writable,...te.bgImg?[te.bgImg]:[]])}return te.outputMediaStream})()}constructor(z,te){this.device=z,this.bgImg=te,this.worker=new U(new URL(e.p+e.u("js_modern_app_free-willy_free-willy-sdk_filter-worker_background-worker_ts"),e.b)).load(),this.generatorVideoTrack=new MediaStreamTrackGenerator({kind:"video"}),this.outputMediaStream=new MediaStream([this.generatorVideoTrack])}}c(F,"BackgroundWorkerVideoTransformDevice");var Y=e(5221945366),Z;(function(dt){dt.START_PREVIEW="start-preview",dt.STOP_PREVIEW="stop-preview",dt.ENABLE="enable",dt.DISABLE="disable"})(Z||(Z={}));const ee=1e4,j=30,ge="medium",ne=!0,ue=50;let he=c(class{shutdown(){var z=this;return(0,t.coroutine)(function*(){var te,ve,Oe;if(z.isShuttingDown=!0,z.voiceFocusDevice){var $e;yield z.voiceFocusDevice.stop(),yield($e=z.voiceFocusManager)===null||$e===void 0?void 0:$e.tearDown(),z.voiceFocusDevice=void 0}z.audioVideoFacade.removeDeviceChangeObserver(z),z.audioVideoFacade.stopLocalVideoTile(),yield z.audioVideoFacade.stopVideoInput(),yield z.audioVideoFacade.stopAudioInput(),z.audioVideoFacade.unbindAudioElement(),z.removeAudioElementErrorHandler(),yield z.clearVideoTransformDeviceRefs(),z.audioInputDeviceRefreshTimer&&(clearTimeout(z.audioInputDeviceRefreshTimer),z.audioInputDeviceRefreshTimer=null),z.videoInputDeviceRefreshTimer&&(clearTimeout(z.videoInputDeviceRefreshTimer),z.videoInputDeviceRefreshTimer=null),z.cameraMetricsTimeout&&(clearTimeout(z.cameraMetricsTimeout),z.cameraMetricsTimeout=null),yield(ve=(te=(0,s._R)())===null||te===void 0?void 0:te.getAudioContext())===null||ve===void 0?void 0:ve.suspend(),z.callLogger.info("Audio context suspended"),(Oe=z.audioLevelMonitor)===null||Oe===void 0||Oe.stop(),delete z.audioLevelMonitor,z.callLogger.info("Device manager shutdown complete")})()}init(){var z=this;return(0,t.coroutine)(function*(){yield z.refreshMediaDeviceInfo(),yield z.determineInitialMicrophonePermissionState(),z.enumerateDevices(),z.logDevices(),yield z.updateMicrophone(),yield z.updateSpeaker(),z.isCameraEnabled&&(yield z.updateCamera())})()}determineInitialMicrophonePermissionState(){var z=this;return(0,t.coroutine)(function*(){if((0,f.y3)()){yield z.determineInitialMicrophonePermissionStateForDesktop();return}yield z.determineInitialMicrophonePermissionStateForBrowser()})()}determineInitialMicrophonePermissionStateForBrowser(){var z=this;return(0,t.coroutine)(function*(){const{status:te}=H.Ay.canAccessMediaResource(u.mT.MICROPHONE);let ve;(te===a.eJ.Prompt||te===a.eJ.NotDetermined||te===a.eJ.Unknown)&&(yield z.audioVideoFacade.listAudioInputDevices(!0),ve=H.Ay.canAccessMediaResource(u.mT.MICROPHONE).status),(te===a.eJ.Denied||ve===a.eJ.Denied)&&(z.observer.onBrowserMediaDeviceAccessDenied(u.mT.MICROPHONE),z.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),z.setStartMutedBarrier(!0))})()}determineInitialMicrophonePermissionStateForDesktop(){var z=this;return(0,t.coroutine)(function*(){const te=yield z.maybeCheckSystemMediaAccess(u.mT.MICROPHONE);(0,f.j9)()||(0,f.uF)()||te&&(te==null?void 0:te.status)===a.eJ.Denied&&(z.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),z.setStartMutedBarrier(!0))})()}setAGC(z){var te=this;return(0,t.coroutine)(function*(){te.prefs.audio&&te.prefs.audio.enableAGC!==z&&(te.callLogger.info(`AGC setting changed: ${z}`),te.prefs.audio.enableAGC=z,(0,b.i4)(te.prefs),yield te.updateMicrophone())})()}setPreferredDevice(z,te){var ve=this;return(0,t.coroutine)(function*(){switch(te){case a.lW.Microphone:yield ve.updateMicrophone();break;case a.Q4:yield ve.updateSpeaker();break;case a.lW.Camera:ve.isCameraEnabled&&(yield ve.updateCamera());break;default:break}})()}setPreferredCameraDeviceForPreview(z){var te=this;return(0,t.coroutine)(function*(){te.enumerateDevices(),yield te.updateCamera()})()}setVideoBackgroundEffect(z){let{effect:te,effectBgKey:ve}=z;var Oe=this;return(0,t.coroutine)(function*(){Oe.prefs.video&&(Oe.callLogger.info(`Video background effect changed: ${te}`),Oe.prefs.video.effect=te,Oe.prefs.video.effectBgKey=ve,(0,b.i4)(Oe.prefs),Oe.isCameraEnabled&&(yield Oe.updateCamera()))})()}setNoiseSuppression(z){var te=this;return(0,t.coroutine)(function*(){te.prefs.audio&&te.prefs.audio.enableNoiseSuppression!==z&&(te.callLogger.info(`Noise suppression setting changed: ${z}`),te.prefs.audio.enableNoiseSuppression=z,(0,b.i4)(te.prefs),yield te.updateMicrophone())})()}setStartMutedBarrier(z){var te=this;return(0,t.coroutine)(function*(){!te.isStartMutedBarrierActive&&z?te.callLogger.warn("ALERT: Audio input will be muted until the start muted barrier is released"):te.isStartMutedBarrierActive&&!z&&te.callLogger.info("Start muted barrier released"),te.isStartMutedBarrierActive=z})()}setMicrophone(z){var te=this;return(0,t.coroutine)(function*(){var ve;if(te.voiceFocusManager&&(yield te.voiceFocusManager.setMute(z)),!z){var Oe;te.audioVideoFacade.realtimeMuteLocalAudio(),(Oe=te.huddleEventsTrace)===null||Oe===void 0||Oe.update({name:p.p.MICROPHONE,type:p.G.STOP});return}te.isStartMutedBarrierActive&&te.setStartMutedBarrier(!1),te.audioVideoFacade.realtimeUnmuteLocalAudio(),(ve=te.huddleEventsTrace)===null||ve===void 0||ve.update({name:p.p.MICROPHONE,type:p.G.START})})()}requestPreviewStreamForDeviceId(z,te,ve){te===a.lW.Camera&&this.handleCameraChanges({type:Z.START_PREVIEW,deviceId:z,videoElement:ve})}stopVideoPreviewForVideoInput(z){this.handleCameraChanges({type:Z.STOP_PREVIEW,videoElement:z||this.cameraPreviewVideoElement})}setCamera(z){z!==this.isCameraEnabled&&(this.isCameraEnabled=z,this.isCameraEnabled?(this.handleCameraChanges({type:Z.ENABLE}),this.maybeCheckSystemMediaAccess(u.mT.CAMERA)):this.handleCameraChanges({type:Z.DISABLE}))}setCameraQuality(z,te,ve,Oe){this.callLogger.info(`Camera quality settings changed: ${z}x${te}@${ve}fps ${Oe}kbps`),this.audioVideoFacade.chooseVideoInputQuality(z,te,ve),this.audioVideoFacade.setVideoMaxBandwidthKbps(Oe)}audioVideoDidStart(){return(0,t.coroutine)(function*(){})()}localVideoTileDidUpdate(z){(!z.boundVideoStream||!z.boundVideoStream.active)&&this.callLogger.info(`DeviceManager::localVideoTileDidUpdate ${z.boundVideoStream?"boundVideoStream is not active":"there is no boundVideoStream"}`),!z.isContent&&!this.isCameraEnabled?this.waitForCameraReady.reject(new Error("Camera disabled")):this.waitForCameraReady.resolve()}maybeBindAudioOutputElement(){var z=this;return(0,t.coroutine)(function*(){if(!z.isAudioOutputElementBound&&z.audioOutputElement){try{yield z.audioVideoFacade.bindAudioElement(z.audioOutputElement)}catch(te){z.callLogger.info(`bindAudioElement failed: error: ${te.name}, message: ${te.message}`);return}z.isAudioOutputElementBound=!0}})()}maybeCheckSystemMediaAccess(z){var te=this;return(0,t.coroutine)(function*(){if(!(0,f.y3)()){const{status:ve}=H.Ay.canAccessMediaResource(z);if(ve===a.eJ.Granted)return{isAvailable:!1,status:a.eJ.Granted}}if((0,f.cX)())try{const ve=H.Ay.canAccessMediaResource(z);if(te.callLogger.info(`DeviceManager::getMediaAccessStatus ${z} electron API available: ${ve.isAvailable} and status: ${ve.status}`),!ve.isAvailable)return{isAvailable:!1,status:a.eJ.NotDetermined};if(ve.status===a.eJ.Granted)return te.observer.onDeviceAccessApproved(z),ve;let Oe;return(!ve.status||ve.status===a.eJ.NotDetermined)&&(ve.status||te.callLogger.info(`DeviceManager::getMediaAccessStatus ${z} status is missing. Re-requesting media access`),Oe=z==="screen"?null:yield H.Ay.requestMediaAccess(z),te.callLogger.info(`DeviceManager::askForMediaAccess ${z} electron API available: ${!!(Oe!=null&&Oe.isAvailable)} and isConsentGranted: ${Oe==null?void 0:Oe.isGranted}`),z!=="screen"&&(Oe!=null&&Oe.isGranted))?(te.observer.onDeviceAccessApproved(z),{status:a.eJ.Granted,isAvailable:!0}):((ve.status===a.eJ.Denied||Oe&&!Oe.isGranted)&&(te.micPermissionDenied=!0,te.observer.onCheckSystemMediaAccess(z)),ve)}catch(ve){te.callLogger.info(`DeviceManager::Error retrieving system access for ${z}: ${ve}`)}return{isAvailable:!1,status:a.eJ.NotDetermined}})()}audioInputMuteStateChanged(z,te){this.callLogger.info(`DeviceManager::audioInputMuteStateChanged: device: ${z}, ${te?"muted":"unmuted"}`)}audioInputStreamEnded(z){var te;z&&(this.callLogger.info("DeviceManager::audioInputStreamEnded"),((te=(0,O.Nj)(a.lW.Microphone))===null||te===void 0?void 0:te.id)===z&&(this.callLogger.warn("Call audio stream ended unexpectedly"),this.observer.onSetNoMediaInput(u.mT.MICROPHONE)))}videoInputStreamEnded(z){var te=this;return(0,t.coroutine)(function*(){z&&(te.callLogger.info("DeviceManager::videoInputStreamEnded"),te.observer.onSetNoMediaInput(u.mT.CAMERA))})()}logDevices(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G.LL;const te=(0,O.T5)();if(!te){this.callLogger.error("No devices found");return}(0,G.my)(this.callLogger,te,z)}getPreferredDevice(z){return(0,O.Nj)(z)}enumerateDevices(){const z=(0,O.T5)();if(!z){this.callLogger.error("No devices found in v2 device manager");return}this.callLogger.info("V2 devices found. Updating device store"),this.observer.onDevicesUpdated(z)}handleCameraChanges(z){var te=this;return(0,t.coroutine)(function*(){switch(z.type){case Z.START_PREVIEW:yield te.runCameraActivityStartPreview(z);break;case Z.STOP_PREVIEW:yield te.runCameraActivityStopPreview(z);break;case Z.ENABLE:yield te.runCameraActivityEnable();break;case Z.DISABLE:yield te.runCameraActivityDisable();break;default:break}})()}updateMicrophone(){var z=this;return(0,t.coroutine)(function*(){const te=z.getPreferredDevice(a.lW.Microphone);if(!te){z.callLogger.info("No audio input device found");return}const{id:ve,label:Oe}=te;z.micPermissionDenied&&z.callLogger.error("Microphone permission is denied. The user must grant permissions and fully quit and restart Slack to join the Huddle"),z.callLogger.info(`Selected audio input device: ${te.label||te.id}, deviceId: ${ve}, deviceLabel: ${Oe}`);const at={autoGainControl:z.prefs.audio?z.prefs.audio.enableAGC:!0,deviceId:ve};let Xe=!0;if(z.voiceFocusManager&&z.voiceFocusManager.isAvailable()&&(z.prefs.audio&&z.prefs.audio.enableNoiseSuppression)){if(z.voiceFocusDevice||(z.voiceFocusDevice=yield z.voiceFocusManager.getTransformDevice()),z.voiceFocusDevice){const Nt=yield z.voiceFocusDevice.chooseNewInnerDevice(at);z.voiceFocusDevice=Nt}z.voiceFocusDevice||(Xe=!1)}else Xe=!1;z.voiceFocusDevice&&(0,y.Y)({name:y.R1.VoiceFocusDevice,ref:z.voiceFocusDevice}),z.callLogger.info("Noise suppression:",Xe?"enabled":"disabled");try{if(z.isStartMutedBarrierActive&&(z.callLogger.info("Start muted barrier active"),z.audioVideoFacade.realtimeMuteLocalAudio()),Xe)if(z.voiceFocusDevice)yield z.initAudioInput(z.voiceFocusDevice);else throw new Error("Trying noise suppression with no voice focus transform device");else navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&Object.prototype.hasOwnProperty.call(navigator.mediaDevices.getSupportedConstraints(),"noiseSuppression")&&(at.noiseSuppression=!0),yield z.initAudioInput(at)}catch(Nt){z.callLogger.error(`chooseAudioInputDevice failed: error: ${Nt.name}, message: ${Nt.message}`),yield z.handleAudioInitError(Nt);return}z.initAudioAnalyserForPreview(),z.setupAudioInputTrackHandler({preferredDeviceId:ve}),z.observer.onSelfPermissionUpdated(z.micPermissionDenied,a.lW.Microphone),z.attemptToInitMicrophoneNative(te.label)})()}updateSpeaker(){var z=this;return(0,t.coroutine)(function*(){const te=z.getPreferredDevice(a.Q4);if(!te){z.callLogger.info("No audio output device found");return}const{id:ve,label:Oe}=te;z.callLogger.info(`Selected audio output device id: ${te.label||te.id}, deviceId: ${ve}, deviceLabel: ${Oe}`),yield z.audioVideoFacade.chooseAudioOutput(ve),z.observer.onOutputDeviceChanged({id:te.id,type:a.Q4}),(0,O.i_)(ve,a.Q4)})()}updateCamera(){var z=this;return(0,t.coroutine)(function*(){const te=z.getPreferredDevice(a.lW.Camera);if(!te){z.callLogger.info("No video input device found");return}z.callLogger.info(`Selected video input device id: ${te.label||te.id}`);try{yield z.setCameraVideoInputDevice(te)}catch(ve){z.callLogger.info(`chooseVideoInputDevice failed: error: ${ve.name}, message: ${ve.message}`),ve instanceof s.Ll?z.observer.onSelfPermissionUpdated(!0,a.lW.Camera):z.observer.onSelfPermissionUpdated(!1,a.lW.Camera);return}z.observer.onSelfPermissionUpdated(!1,a.lW.Camera)})()}setCameraVideoInputDevice(z){var te=this;return(0,t.coroutine)(function*(){if(yield te.clearVideoTransformDeviceRefs(),te.options.backgroundVideoFilteringSetting===a.uT.NONE){yield te.initVideoInput(z.id);return}switch(te.prefs.video.effect){case S.t.Blur:{yield te.setCameraVideoInputDeviceWithBackgroundBlurFilter(z);break}case S.t.Background:{te.options.backgroundVideoFilteringSetting!==a.uT.Both?yield te.initVideoInput(z.id):yield te.setCameraVideoInputDeviceWithBackgroundReplacementImageFilter({videoDevice:z,selectedBackgroundImageKey:te.prefs.video.effectBgKey});break}default:{yield te.initVideoInput(z.id);break}}})()}setCameraVideoInputDeviceWithBackgroundReplacementImageFilter(z){let{videoDevice:te,selectedBackgroundImageKey:ve}=z;var Oe=this;return(0,t.coroutine)(function*(){const $e=te.label||te.id;if(ve===void 0){Oe.callLogger.info(`No background image key provided id: ${$e}`),yield Oe.initVideoInput(te.id);return}const Xe=m.g.find(de=>de.key===ve);if(Xe===void 0)return Oe.handleErrorApplyVideoEffects("Image could not be found, switching to default input for device",te);Oe.callLogger.info(`Enabling video input device with background image filter id: ${$e}`);const $t=yield(yield fetch(Xe.url)).blob();if(Oe.options.useHuddlesFilterWorker){const de=yield createImageBitmap($t),we=new F(te.id,de);Oe.setVideoTransformDeviceRefs({transformDevice:we,processors:[]}),yield Oe.initVideoInput(we),yield Oe.cleanupTransformDevicesAndCameraIfShuttingdown();return}const Ln=(0,s.jq)(),xn=(0,s.px)(),Jn=[];if(!(yield s.i3.isSupported(Oe.chimeLogger))&&ne)return Oe.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non image replaced background",te);if(!(yield xn.isSupported())&&!ne)return Oe.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor is not supported on host device. Defaulting to non image replaced background",te);if(Oe.isShuttingDown)return;const $n={...Oe.defaultVideoProcessorOptions,imageBlob:$t};if(ne){if(Oe.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:ge},backgroundReplacement:{isEnabled:!0,backgroundImageURL:Xe.url,defaultColor:void 0}},Oe.videoFxProcessor=yield s.i3.create(Oe.chimeLogger,Oe.videoFxConfig,ue),!Oe.videoFxProcessor)return Oe.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",te);Oe.callLogger.info(`VideoFxProcessor background image replacement enabled for device id: ${$e}`),Jn.push(Oe.videoFxProcessor)}else{const de=yield xn.create(void 0,$n);if(de)Oe.setupVideoBackgroundFrameProcessor({processor:de,backgroundEffect:R.Image}),Jn.push(de);else return Oe.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor could not be created defaulting to normal input for device",te)}Oe.callLogger.info(`Enabling video input device with background image replacement id: ${$e}`);const w=new Ln(Oe.chimeLogger,te.id,Jn);Oe.setVideoTransformDeviceRefs({transformDevice:w,processors:Jn}),yield Oe.initVideoInput(w),yield Oe.cleanupTransformDevicesAndCameraIfShuttingdown()})()}handleErrorApplyVideoEffects(z,te){var ve=this;return(0,t.coroutine)(function*(){const Oe=te.label||te.id;ve.callLogger.info(`${z}: ${Oe}`),yield ve.initVideoInput(te.id)})()}setCameraVideoInputDeviceWithBackgroundBlurFilter(z){var te=this;return(0,t.coroutine)(function*(){const ve=(0,s.jq)(),Oe=(0,s.kM)(),$e=z.label||z.id;if(te.callLogger.info(`Enabling video input device with background blur filter id: ${$e}`),te.options.useHuddlesFilterWorker){const Nt=new F(z.id);te.setVideoTransformDeviceRefs({transformDevice:Nt,processors:[]}),yield te.initVideoInput(Nt),yield te.cleanupTransformDevicesAndCameraIfShuttingdown();return}const at=[];if(ne){if(!(yield s.i3.isSupported(te.chimeLogger)))return te.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non blurred background",z);if(te.videoFxConfig={backgroundBlur:{isEnabled:!0,strength:ge},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},te.videoFxProcessor=yield s.i3.create(te.chimeLogger,te.videoFxConfig,ue),!te.videoFxProcessor)return te.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",z);te.callLogger.info(`VideoFxProcessor background blur enabled for device id: ${$e}`),at.push(te.videoFxProcessor)}else{if(!(yield Oe.isSupported()))return te.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor is not supported on host device. Defaulting to non blurred background",z);const Nt={...te.defaultVideoProcessorOptions,blurStrength:15},$t=yield Oe.create(void 0,Nt);if(!$t)return te.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor could not be created defaulting to normal input for device",z);te.setupVideoBackgroundFrameProcessor({processor:$t,backgroundEffect:R.Blur}),at.push($t)}te.callLogger.info(`Enabling video input device with background blur filter id: ${$e}`);const Xe=new ve(te.chimeLogger,z.id,at);te.setVideoTransformDeviceRefs({transformDevice:Xe,processors:at}),yield te.initVideoInput(Xe),yield te.cleanupTransformDevicesAndCameraIfShuttingdown()})()}cleanupTransformDevicesAndCameraIfShuttingdown(){var z=this;return(0,t.coroutine)(function*(){z.isShuttingDown&&(z.callLogger.info("Cleaning up background video frame processor and video input because huddle has ended"),yield z.audioVideoFacade.stopVideoInput(),yield z.clearVideoTransformDeviceRefs())})()}initVideoInputDevices(){var z=this;return(0,t.coroutine)(function*(){const ve=(yield z.audioVideoFacade.listVideoInputDevices()).length>0;return ve||z.observer.onSelfPermissionUpdated(!0,a.lW.Camera),z.prefs=(0,b.Bh)(),z.enumerateDevices(),ve})()}runCameraActivityStartPreview(z){var te=this;return(0,t.coroutine)(function*(){const ve=z.deviceId,Oe=z.videoElement;!ve||!Oe||(te.cameraPreviewVideoElement=Oe,yield te.setPreferredCameraDeviceForPreview(ve),yield te.startCameraPreview())})()}runCameraActivityStopPreview(z){var te=this;return(0,t.coroutine)(function*(){const ve=z.videoElement;ve&&(ve!==te.cameraPreviewVideoElement&&te.callLogger.warn("Mismatch in preview video element"),te.audioVideoFacade.hasStartedLocalVideoTile()?te.detachStreamFromCameraPreview():te.stopCameraPreview(),delete te.cameraPreviewVideoElement)})()}runCameraActivityEnable(){var z=this;return(0,t.coroutine)(function*(){var te;!z.audioVideoFacade.hasStartedLocalVideoTile()&&z.cameraPreviewVideoElement&&z.stopCameraPreview(),yield z.updateCamera(),z.audioVideoFacade.hasStartedLocalVideoTile()||(z.waitForCameraReady=(0,i.u)(),z.audioVideoFacade.startLocalVideoTile(),yield z.waitForCameraReady.catch(()=>{z.callLogger.info("Camera disabled before self video stream was properly bound. Explicitly disabling camera."),z.runCameraActivityDisable()})),z.attachStreamToCameraPreview(),(te=z.huddleEventsTrace)===null||te===void 0||te.update({name:p.p.VIDEO,type:p.G.START})})()}runCameraActivityDisable(){var z=this;return(0,t.coroutine)(function*(){var te;z.detachStreamFromCameraPreview(),yield z.audioVideoFacade.stopVideoInput(),z.audioVideoFacade.stopLocalVideoTile(),(te=z.huddleEventsTrace)===null||te===void 0||te.update({name:p.p.VIDEO,type:p.G.STOP}),z.cameraPreviewVideoElement&&(yield z.updateCamera(),yield z.startCameraPreview())})()}startCameraPreview(){var z=this;return(0,t.coroutine)(function*(){z.cameraPreviewVideoElement&&(z.waitForCameraReady=(0,i.u)(),z.audioVideoFacade.startVideoPreviewForVideoInput(z.cameraPreviewVideoElement),z.cameraPreviewVideoElement.addEventListener("canplay",te=>{z.waitForCameraReady.resolve()}),yield z.waitForCameraReady)})()}stopCameraPreview(){var z=this;return(0,t.coroutine)(function*(){z.cameraPreviewVideoElement&&(z.audioVideoFacade.stopVideoPreviewForVideoInput(z.cameraPreviewVideoElement),yield z.audioVideoFacade.stopVideoInput())})()}attachStreamToCameraPreview(){var z;if(!this.cameraPreviewVideoElement)return;const te=(z=this.audioVideoFacade.getLocalVideoTile())===null||z===void 0?void 0:z.state();te&&te.boundVideoStream&&s.xc.connectVideoStreamToVideoElement(te.boundVideoStream,this.cameraPreviewVideoElement,!0)}detachStreamFromCameraPreview(){this.cameraPreviewVideoElement&&s.xc.disconnectVideoStreamFromVideoElement(this.cameraPreviewVideoElement,!0)}addAudioElementErrorHandler(){this.audioOutputElement.addEventListener("error",this.audioElementErrorHandler)}removeAudioElementErrorHandler(){this.audioOutputElement.removeEventListener("error",this.audioElementErrorHandler)}audioElementErrorHandler(z){var te,ve,Oe,$e;const at=((te=z.target)===null||te===void 0||(ve=te.error)===null||ve===void 0?void 0:ve.code)||"unavailable",Xe=((Oe=z.target)===null||Oe===void 0||($e=Oe.error)===null||$e===void 0?void 0:$e.message)||z.message;this.callLogger.warn(`HTML_AUDIO_ELEMENT_ERROR code: ${at}, message: ${Xe}`),this.observer.onSetNoAudioOutput(u.NS.AUDIO_ELEMENT_ERROR)}initAudioAnalyserForPreview(){const z=(0,s._R)().getAudioContext();if(!z){this.callLogger.warn("Unable to get AudioContext");return}z.resume();const te=this.audioVideoFacade.createAnalyserNodeForAudioInput();if(te){var ve;const Oe=new E(te);(ve=this.audioLevelMonitor)===null||ve===void 0||ve.setPreviewAudioAnalyser(Oe)}}setupAudioInputTrackHandler(z){let{preferredDeviceId:te}=z;this.audioInputTrackHandler&&(this.callLogger.info("Tearing down previous Audio Input Track Handler"),this.audioInputTrackHandler.tearDown(),this.audioInputTrackHandler=void 0),this.callLogger.info("Setting up new audio input track handler"),this.audioInputTrackHandler=new P(this.defaultDeviceController,this.observer,this.callLogger),this.audioInputTrackHandler.initialize({preferredDeviceId:te})}constructor(z,te,ve,Oe,$e=!1,at,Xe,Nt){this.audioVideoFacade=z,this.audioOutputElement=te,this.observer=ve,this.options=Oe,this.isStartMutedBarrierActive=$e,this.chimeLogger=at,this.defaultDeviceController=Xe,this.voiceFocusManager=Nt,this.callLogger=(0,o.Jt)("DEVICES"),this.waitForCameraReady=(0,i.u)(),this.isAudioOutputElementBound=!1,this.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:ge},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},this.isShuttingDown=!1,this.cameraMetricsTimeout=null,this.micPermissionDenied=!1;var $t=this;this.audioInputsChanged=(0,t.coroutine)(function*(){$t.callLogger.info("DeviceManager::audioInputsChanged"),yield(0,O.es)(),$t.logDevices([a.lW.Microphone]),$t.observer.onClearNoMediaInput(u.mT.MICROPHONE)});var Ln=this;this.audioOutputsChanged=(0,t.coroutine)(function*(){Ln.callLogger.info("DeviceManager::audioOutputsChanged"),yield(0,O.es)(),Ln.logDevices([a.Q4]),Ln.observer.onClearNoAudioOutput(u.NS.AUDIO_ELEMENT_ERROR)});var xn=this;this.videoInputsChanged=(0,t.coroutine)(function*(){xn.callLogger.info("DeviceManager::videoInputsChanged"),yield(0,O.es)(),xn.logDevices([a.lW.Camera])});var Jn=this;this.attemptToInitMicrophoneNative=(0,_.A)(function(){var Zt=(0,t.coroutine)(function*(cn){try{if(!cn||!Jn.options.useDevicesExp)return;const qt=yield(0,Y.Lh)(cn),{error:Xn,canInit:_s}=qt;(0,v.A)(Xn)?Xn.includes("Method not available")||Xn.includes("only supported on Windows")?Jn.callLogger.info("Microphone init test not supported on this client"):_s||Jn.callLogger.warn(`ALERT! Possible init failure for microphone with device: ${cn}: ${Xn}`):Jn.callLogger.info(`Successfully initialized microphone with device: ${cn}`)}catch(qt){Jn.callLogger.error("Error attempting to init audio device",qt)}});return function(cn){return Zt.apply(this,arguments)}}(),1e3);var $n=this;this.refreshMediaDeviceInfo=(0,t.coroutine)(function*(){$n.enumerateDevices()});var w=this;this.handleAudioInitError=function(){var Zt=(0,t.coroutine)(function*(cn){switch(cn.name){case"NotReadableError":w.callLogger.warn("Either a hardware error (such as an OS/program/webpage lock) is preventing access to the microphone or the selected device is no longer available. Trying again");break;case"NotFoundError":w.callLogger.warn("No audio input devices are available. Trying again");break;case"OverconstrainedError":w.callLogger.warn("The specified constraints resulted in no devices being found. Trying again");break;case"PermissionDeniedError":w.callLogger.error("User denied permission to access microphone.");break;case"TypeError":w.callLogger.error("An unexpected TypeError occured during audio input initialization",cn);break;case"GetUserMediaError":w.callLogger.error("An unexpected GetUserMediaError occured during audio input initialization",cn);break;default:w.callLogger.error("Unknown error during audio input initialization")}const qt=cn instanceof s.Ll;w.observer.onSelfPermissionUpdated(!!qt,a.lW.Microphone)});return function(cn){return Zt.apply(this,arguments)}}(),this.setVideoTransformDeviceRefs=Zt=>{let{transformDevice:cn,processors:qt}=Zt;this.currentVideoTransformDevice=cn,this.currentVideoFrameProcessors=qt,(0,y.Y)({name:y.R1.VideoTransformDevice,ref:cn})},this.setupVideoBackgroundFrameProcessor=Zt=>{let{processor:cn,backgroundEffect:qt}=Zt;var Xn;this.clearVideoBackgroundFrameProcessor(),!ne&&(this.currentVideoFrameProcessor=cn,this.currentVideoFrameProcessorObserver=new V({backgroundEffect:qt}),(Xn=this.currentVideoFrameProcessor)===null||Xn===void 0||Xn.addObserver(this.currentVideoFrameProcessorObserver),(0,y.Y)({name:y.R1.VideoFrameProcessor,ref:cn}))},this.clearVideoBackgroundFrameProcessor=()=>{ne||this.currentVideoFrameProcessor&&this.currentVideoFrameProcessorObserver&&(this.currentVideoFrameProcessor.removeObserver(this.currentVideoFrameProcessorObserver),this.currentVideoFrameProcessorObserver=void 0,this.currentVideoFrameProcessor=void 0)};var de=this;this.clearVideoTransformDeviceRefs=(0,t.coroutine)(function*(){de.clearVideoBackgroundFrameProcessor(),de.currentVideoFrameProcessors&&(de.currentVideoFrameProcessors.forEach(Zt=>{Zt.destroy()}),de.currentVideoFrameProcessors.length=0,de.currentVideoFrameProcessors=void 0),de.currentVideoTransformDevice&&(yield de.currentVideoTransformDevice.stop(),de.currentVideoTransformDevice=void 0)});var we=this;this.initAudioInput=function(){var Zt=(0,t.coroutine)(function*(cn){cn&&(yield we.audioVideoFacade.startAudioInput(cn))});return function(cn){return Zt.apply(this,arguments)}}();var Et=this;this.initVideoInput=function(){var Zt=(0,t.coroutine)(function*(cn){if(!cn)return;yield Et.audioVideoFacade.startVideoInput(cn),Et.recordCameraResolution();const qt=(0,h.A)(cn,"device",cn);typeof qt=="string"&&(0,O.i_)(qt,a.lW.Camera)});return function(cn){return Zt.apply(this,arguments)}}(),this.recordCameraResolution=()=>{this.cameraMetricsTimeout=setTimeout(()=>{try{var Zt,cn,qt,Xn,_s;if(this.isShuttingDown||!((Zt=this.audioVideoFacade)===null||Zt===void 0?void 0:Zt.hasStartedLocalVideoTile()))return;const As=this.audioVideoFacade.getLocalVideoTile(),Os=(cn=As==null?void 0:As.state())===null||cn===void 0?void 0:cn.boundVideoStream,is=Os==null?void 0:Os.getVideoTracks()[0];if(is instanceof CanvasCaptureMediaStreamTrack){B.A.publish({type:K.lx.CameraResolution,update:{isCanvasStream:!0}});return}const Is=is==null?void 0:is.getSettings(),dn=is==null?void 0:is.getCapabilities(),Yn=Is==null?void 0:Is.width,ht=Is==null?void 0:Is.height,Rs=Is==null?void 0:Is.frameRate,ls=dn==null||(qt=dn.width)===null||qt===void 0?void 0:qt.max,Ms=dn==null||(Xn=dn.height)===null||Xn===void 0?void 0:Xn.max,Ds=dn==null||(_s=dn.frameRate)===null||_s===void 0?void 0:_s.max;ls&&Ms&&B.A.publish({type:K.lx.CameraResolution,update:{cameraWidth:Yn,cameraHeight:ht,cameraFrameRate:Rs,cameraMaxWidth:ls,cameraMaxHeight:Ms,cameraMaxFrameRate:Ds,isCanvasStream:!1}})}catch{}},5e3)},this.callLogger.info("Using device manager v2"),this.updateMicrophone=C(this,this.updateMicrophone,{skipIntermediatePendingRuns:!1}),this.updateSpeaker=C(this,this.updateSpeaker,{skipIntermediatePendingRuns:!1}),this.updateCamera=C(this,this.updateCamera,{skipIntermediatePendingRuns:!1}),this.handleCameraChanges=C(this,this.handleCameraChanges,{skipIntermediatePendingRuns:!1}),this.audioElementErrorHandler=this.audioElementErrorHandler.bind(this),this.audioVideoFacade.addDeviceChangeObserver(this),this.prefs=(0,b.Bh)(),this.addAudioElementErrorHandler(),this.audioLevelMonitor=new D,this.voiceFocusManager&&this.callLogger.info(`Voice Focus available?: ${this.voiceFocusManager.isAvailable()}`),this.prefs.audio&&this.callLogger.info(`Noise suppression setting: ${this.prefs.audio.enableNoiseSuppression}`),this.defaultVideoProcessorOptions={filterCPUUtilization:j,reportingPeriodMillis:ee,logger:this.chimeLogger};const{huddleEventsTrace:gn}=(0,I.A)().getAllTraceHandlers();this.huddleEventsTrace=gn}},"DeviceManager");var be=e(63202349),xe=e(3390261877),Le=e(3320454392);let fe=c(class{constructor(z,te,ve){this.sequenceNumber=z,this.message=te,this.timestampMs=ve}},"MeetingEvent"),se=c(class aa{getEventCaptureSize(){return this.eventCapture.length}startEventPublishScheduler(z){var te=this;this.intervalScheduler.start((0,t.coroutine)(function*(){if(te.getEventCaptureSize()===0)return;const ve=te.eventCapture.slice(0,z);try{te.postEvents(ve),te.eventCapture=te.eventCapture.slice(ve.length)}catch(Oe){te.log.error(Oe.message)}}))}stop(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.stopped||(this.intervalScheduler.stop(),this.postEvents(this.eventCapture,z,!0),this.eventCapture=[],this.stopped=!0,this.observer=void 0)}logEvent(z,te){const{meetingHistory:ve,...Oe}=te;try{const $e=JSON.stringify({name:z,attributes:Oe});this.eventCapture.push(new fe(this.sequenceNumber,$e,Date.now())),this.sequenceNumber+=1}catch($e){this.log.error($e.message)}}postEvents(z){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var Oe;z.length===0&&!te&&!ve||(Oe=this.observer)===null||Oe===void 0||Oe.onMeetingEvents(this.meetingId,this.mediaRegion,this.attendeeId,this.callId,z,te,ve)}constructor(z,te,ve,Oe,$e,at=aa.DEFAULT_BATCH_SIZE,Xe=aa.DEFAULT_INTERVAL_MS){this.observer=z,this.meetingId=te,this.mediaRegion=ve,this.attendeeId=Oe,this.callId=$e,this.batchSize=at,this.intervalMs=Xe,this.eventCapture=[],this.sequenceNumber=0,this.log=(0,o.tZ)("MEETING-EVENT-LOGGER"),this.stopped=!1,this.intervalScheduler=new xe.A(this.intervalMs),this.startEventPublishScheduler(this.batchSize);var Nt=this;(0,Le.A)((0,t.coroutine)(function*(){Nt.stop(!0)}))}},"MeetingEventLogger");se.DEFAULT_BATCH_SIZE=100,se.DEFAULT_INTERVAL_MS=65*60*1e3;var Q=e(3245843483),k=e(1033764764),N=e(9372409576),$=e(7299481592);const W=1e4,q=3e4;class re{observe(z){this.connections.push(z),this.intervalHandle||(this.intervalHandle=window.setInterval(()=>{this.collect()},this.collectionIntervalMs))}stopObserving(z){remove(this.connections,z),this.connections.length===0&&clearInterval(this.intervalHandle)}collect(){var z=this;this.connections.forEach(function(){var te=_bluebirdCoroutine(function*(ve){const Oe=ve.getPeerConnection();if(!Oe)return;const $e=le(yield Oe.getStats());Te(ve,$e);const at={...oe($e),send:$e.sendTracks.map(Xe=>ce(Xe,$e)),recv:$e.recvTracks.map(Xe=>({...ke(Xe,$e),peerId:ve.getPeerIdFromRemoteStreamId($e.trackIdToStreamId[Xe.id])}))};z.observer.onStats(at)});return function(ve){return te.apply(this,arguments)}}())}constructor(z,te=W){this.observer=z,this.collectionIntervalMs=te,this.connections=[]}}c(re,"StatsManager");function le(dt){const z=Array.from(dt.entries()),te=reduce(z,(ve,Oe)=>{let[$e,at]=Oe;return He(at)?at.remoteSource===!0?ve.recvTracks.push(at):ve.sendTracks.push(at):Ue(at)||Se(at)?at.trackId&&(ve.rtpStats[at.trackId]=at):Ye(at)?ve.transports[at.id]=at:J(at)?ve.candidates[at.id]=at:ae(at)?ve.candidatePairs[at.id]=at:Ve(at)?ve.codecs[at.id]=at:Be(at)?at.trackIds&&at.trackIds.forEach(Xe=>{ve.trackIdToStreamId[Xe]=at.streamIdentifier}):Ke(at)&&at.trackIdentifier&&(ve.mediaSources[at.trackIdentifier]=at),ve},{trackIdToStreamId:{},sendTracks:[],recvTracks:[],candidates:{},candidatePairs:{},rtpStats:{},codecs:{},transports:{},mediaSources:{}});return te.recvTracks=te.recvTracks.filter(ve=>te.trackIdToStreamId[ve.id]!==void 0),te}c(le,"groupStatsByType");function Ae(dt){const z=filter(dt.candidatePairs,Xe=>!!Xe.nominated),te=maxBy(z,Xe=>Xe.priority);if(!te)return;const ve=find(dt.candidates,(Xe,Nt)=>Nt===te.localCandidateId);if(!ve)return;let Oe=ve.candidateType==="relay"?ve.relayProtocol:ve.protocol;ve.candidateType==="prflx"&&(Oe+=" (unreliable)");const $e="unknown";return{candidateType:ve.candidateType||$e,networkType:ve.networkType||$e,transportType:Oe||$e}}c(Ae,"getConnectionNetworkInfo");function Te(dt,z){const te=Ae(z);te&&dt.maybeLogNetworkInfo(te)}c(Te,"reportConnectionNetworkInfo");const Ne={nominal:1,fair:2,serious:3,critical:4};function pe(){return Ee.apply(this,arguments)}c(pe,"makeAppMetricsStats");function Ee(){return Ee=(0,t.coroutine)(function*(){var dt;if(!(0,f.y3)())return;let z,te,ve;if(Q.vkf.isAvailable()){var Oe;const $t=yield(0,Q.vkf)();if(!$t)return;z=$t.processMetrics,te=Ne[$t.thermalState],ve=(Oe=$t.speedLimit)===null||Oe===void 0?void 0:Oe.limit}else z=yield(0,Q.rc_)();if(!z)return;let $e=null;const at=z.reduce(($t,Ln)=>{var xn,Jn,$n;return Ln.type==="GPU"&&($e=Ln),{cpu:$t.cpu+((Ln==null||(xn=Ln.cpu)===null||xn===void 0?void 0:xn.percentCPUUsage)||0),memory:{workingSetSize:$t.memory.workingSetSize+(0,k.UK)((Ln==null||(Jn=Ln.memory)===null||Jn===void 0?void 0:Jn.workingSetSize)||0),peakWorkingSetSize:$t.memory.peakWorkingSetSize+(0,k.UK)((Ln==null||($n=Ln.memory)===null||$n===void 0?void 0:$n.peakWorkingSetSize)||0)}}},{cpu:0,memory:{workingSetSize:0,peakWorkingSetSize:0}}),Xe=$e==null||(dt=$e.cpu)===null||dt===void 0?void 0:dt.percentCPUUsage,Nt=Xe?at.cpu-$e.cpu.percentCPUUsage:at.cpu;return{...at,cpuWithoutGpu:Nt,gpu:Xe,thermalState:te,speedLimit:ve}}),Ee.apply(this,arguments)}c(Ee,"_makeAppMetricsStats");function oe(dt){const[z,...te]=Object.values(dt.transports);debugCheck(!te.length,"Can there be more than one transport stat in a report?");const ve=z&&z.selectedCandidatePairId,Oe=dt.candidatePairs[ve];if(!ve||!Oe)return;const $e=dt.candidates[Oe.remoteCandidateId]||{};return{availableOutgoingBitrate:Oe.availableOutgoingBitrate||0,availableIncomingBitrate:Oe.availableIncomingBitrate||0,totalBytesSent:Oe.bytesSent,totalBytesReceived:Oe.bytesReceived,currentRoundTripTime:Oe.currentRoundTripTime,totalRoundTripTime:Oe.totalRoundTripTime,protocol:$e.protocol==="udp"?slack.calls.analytics.Protocol.UDP:slack.calls.analytics.Protocol.TCP,pathType:$e.candidateType==="host"?slack.calls.analytics.PathType.DIRECT:slack.calls.analytics.PathType.RELAY,clientTime:Date.now()}}c(oe,"makeConnectionStats");function ce(dt,z){const te=z.rtpStats[dt.id]||{},ve={codec:Ce(te,z),bytesSent:te.bytesSent,packetsSent:te.packetsSent};if(dt.kind==="audio"){const Oe=dt.trackIdentifier?z.mediaSources[dt.trackIdentifier]:null;return Oe?{...ve,audioStats:{audioLevel:Oe.audioLevel,totalAudioEnergy:Oe.totalAudioEnergy,totalSamplesDuration:Oe.totalSamplesDuration,echoReturnLoss:Oe.echoReturnLoss,echoReturnLossEnhancement:Oe.echoReturnLossEnhancement}}:{...ve,audioStats:{audioLevel:dt.audioLevel,echoReturnLoss:dt.echoReturnLoss,echoReturnLossEnhancement:dt.echoReturnLossEnhancement}}}return{...ve,videoStats:{frameHeight:dt.frameHeight,frameWidth:dt.frameWidth,framesSent:dt.framesSent,hugeFramesSent:dt.hugeFramesSent,framesPerSecond:te.framesPerSecond,framesEncoded:te.framesEncoded}}}c(ce,"makeOutboundMediaStats");function ke(dt,z){const te=z.rtpStats[dt.id]||{},ve={codec:Ce(te,z),bytesReceived:te.bytesReceived,packetsReceived:te.packetsReceived,packetsLost:te.packetsLost,fractionLost:te.fractionLost,jitter:te.jitter};return dt.kind==="audio"?{...ve,audioStats:{audioLevel:dt.audioLevel,jitterBufferDelay:dt.jitterBufferDelay,concealedSamples:dt.concealedSamples,concealmentEvents:dt.concealmentEvents}}:{...ve,videoStats:{firCount:te.firCount,nackCount:te.nackCount,pliCount:te.pliCount,sliCount:te.sliCount,frameHeight:dt.frameHeight,frameWidth:dt.frameWidth,framesPerSecond:dt.framesPerSecond,framesCorrupted:dt.framesCorrupted,framesDecoded:dt.framesDecoded,framesDropped:dt.framesDropped,framesReceived:dt.framesReceived}}}c(ke,"makeInboundMediaStats");function Ce(dt,z){const te=dt.codecId,ve=get(z.codecs,te),Oe=get(ve,"mimeType");return Me(Oe)}c(Ce,"getCodecForRtpStat");function Me(dt){switch(dt){case"video/VP8":return slack.calls.analytics.Codec.VP8;case"video/VP9":return slack.calls.analytics.Codec.VP9;case"video/H264":return slack.calls.analytics.Codec.H264;case"audio/opus":return slack.calls.analytics.Codec.OPUS;default:return slack.calls.analytics.Codec.UNKNOWN}}c(Me,"parseCodec");function Se(dt){return dt.type==="inbound-rtp"}c(Se,"isRecvRtpStat");function Ue(dt){return dt.type==="outbound-rtp"}c(Ue,"isSendRtpStat");function He(dt){return dt.type==="track"}c(He,"isTrackStat");function Ye(dt){return dt.type==="transport"}c(Ye,"isTransportStat");function J(dt){return dt.type==="local-candidate"||dt.type==="remote-candidate"}c(J,"isIceCandidateStat");function ae(dt){return dt.type==="candidate-pair"}c(ae,"isIceCandidatePairStat");function Ve(dt){return dt.type==="codec"}c(Ve,"isCodecStat");function Be(dt){return dt.type==="stream"}c(Be,"isStreamStat");function Ke(dt){return dt.type==="media-source"}c(Ke,"isMediaSourceStat");const Re=5e3;let Fe=c(class{constructor(z,te){this.audioVideoFacade=z,this.observer=te,this.callLogger=(0,o.Jt)("HUDDLES-STATS-MANAGER"),this.isDisconnected=!1;var ve=this;this.onMetricsDidReceive=function(){var at=(0,t.coroutine)(function*(Xe){if(!Xe)return;const Nt=yield ve.collectScreenshareStats();ve.reportAppMetrics({clientMetricReport:Xe,screenshareRtcStats:Nt})});return function(Xe){return at.apply(this,arguments)}}(),this.reportDisconnect=()=>{this.isDisconnected=!0,this.callLogger.info("Disconnect reported. Resuming app metrics collection without client metric report."),this.reportAppMetrics();const at=setInterval(()=>{if(!this.isDisconnected){clearInterval(at);return}this.callLogger.info("User still disconnected. Reporting app metrics without client metric report."),this.reportAppMetrics()},Re)},this.cleanup=()=>{};var Oe=this;this.collectScreenshareStats=(0,t.coroutine)(function*(){let at;try{var Xe;const Nt=(Xe=Oe.audioVideoFacade.contentShareController.contentAudioVideo)===null||Xe===void 0?void 0:Xe.rtcPeerConnection;return Nt?(at=yield Nt.getStats(),at):void 0}catch(Nt){Oe.callLogger.error("Failed to collect screenshare stats",Nt)}});var $e=this;this.reportAppMetrics=(0,t.coroutine)(function*(){let{clientMetricReport:at,screenshareRtcStats:Xe}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!at&&!$e.isDisconnected)return;$e.isDisconnected&&at&&($e.isDisconnected=!1);const Nt=yield $e.collectAppMetrics();$e.observer.onAppMetrics({appMetrics:Nt,clientMetricReport:at,screenshareRtcStats:Xe})}),this.collectAppMetrics=(0,t.coroutine)(function*(){const at=yield pe();if(!at)return;let Xe=at;return at&&(Xe=(0,n.A)({...at,cpu:at.cpuWithoutGpu},"cpuWithoutGpu")),Xe})}},"HuddlesStatsManager"),Ie=c(class{start(){var z;this.isSignallingOnly=!1,(z=this.videoDownlinkManager)===null||z===void 0||z.addObserver(this),this.audioVideoFacade.addObserver(this),this.audioVideoFacade.start(),this.observer.onStart()}startWithSignalingOnly(){this.audioVideoFacade.start({signalingOnly:!0}),this.isSignallingOnly=!0}stop(){var z=this;return(0,t.coroutine)(function*(){z.isSignallingOnly?(z.waitForStart.resolve(),z.waitForStop.resolve(!0)):yield z.waitForStart,z.isStopRequested=!0,z.audioVideoFacade.stop()})()}audioVideoDidStartConnecting(z){var te;if(!z)this.callLogger.info("Starting Chime session"),this.observer.onStartSessionTimeout(),this.observer.onAudioVideoDidStartConnecting(),this.isReconnecting=!1;else{var ve,Oe,$e;this.callLogger.info("Reconnecting Chime session"),this.observer.onSelfDisconnected(),(ve=this.statsManager)===null||ve===void 0||(Oe=ve.reportDisconnect)===null||Oe===void 0||Oe.call(ve),($e=this.huddleReconnectTracer)===null||$e===void 0||$e.traceReconnectAttempt(),this.isReconnecting=!0}(te=this.disconnectObserver)===null||te===void 0||te.onConnectionUpdate(this.audioVideoFacade)}audioVideoDidStart(){var z,te,ve;if(this.callLogger.info("Chime audio video session started"),(z=this.disconnectObserver)===null||z===void 0||z.onConnectionUpdate((te=this.audioVideoFacade)===null||te===void 0||(ve=te.audioVideoController)===null||ve===void 0?void 0:ve.meetingSessionContext,this.isReconnecting),this.isReconnecting){var Oe;this.callLogger.info("Successfully re-connected to Huddle"),(Oe=this.huddleReconnectTracer)===null||Oe===void 0||Oe.traceReconnectAttemptOutcome({isSuccess:!0}),this.isReconnecting=!1}this.observer.onAudioVideoDidStart(),this.deviceManager.audioVideoDidStart(),this.dataChannelSubscribers.forEach($e=>$e.onConnectDatachannel(this.audioVideoFacade)),this.waitForStart.resolve()}audioVideoDidStop(z){var te,ve,Oe,$e;const at=s.b9[z.statusCode()],Xe=`Chime session stopped. StatusCode: ${at}`;if(this.callLogger.info(Xe),this.isReconnecting&&z.isFailure()){var Nt;this.callLogger.info("Failed to re-connect to Huddle"),(Nt=this.huddleReconnectTracer)===null||Nt===void 0||Nt.traceReconnectAttemptOutcome({isSuccess:!1})}delete this.disconnectObserver,this.audioVideoFacade.removeObserver(this),this.observer.onScreenShareStopped(),this.observer.onAudioVideoDidStop(),(te=this.videoDownlinkManager)===null||te===void 0||te.removeObserver(this),(ve=this.meetingEventLogger)===null||ve===void 0||ve.stop(),delete this.meetingEventLogger,($e=(Oe=this.statsManager).cleanup)===null||$e===void 0||$e.call(Oe),delete this.statsManager,this.dataChannelSubscribers.forEach($t=>$t.onDisconnectDataChannel()),!this.isStopRequested&&z.isTerminal()&&(this.observer.onClogError(Xe),this.observer.onError(u.uZ.CallEnded,at)),this.waitForStop.resolve(this.isStopRequested)}videoTileDidUpdate(z){if(!z.boundVideoStream||!z.boundAttendeeId){z.tileId&&this.observer.onVideoTileRemoved(z.tileId);return}const te=new s.jp(z.boundAttendeeId).base();this.selfAttendeeId===te?(this.deviceManager.localVideoTileDidUpdate(z),this.observer.onSelfVideoTileUpdate(z)):this.observer.onPeerVideoTileUpdate(te,z)}videoTileWasRemoved(z){this.consoleLog.info(`Video tile removed: tileId=${z}`),this.observer.onVideoTileRemoved(z)}videoAvailabilityDidChange(z){this.consoleLog.debug(`Video availability: RemoteVideoAvailable=${z.remoteVideoAvailable}, CanStartLocalVideo=${z.canStartLocalVideo}`)}metricsDidReceive(z){var te=this;return(0,t.coroutine)(function*(){var ve;(ve=te.statsManager)===null||ve===void 0||ve.onMetricsDidReceive(z)})()}connectionDidBecomePoor(){this.callLogger.warn("SDK detected poor connection")}connectionDidSuggestStopVideo(){var z;this.callLogger.warn("SDK suggested stop video, maybe poor connection"),(z=this.videoUplinkManager)===null||z===void 0||z.shouldRestrictVideoQuality(!0)}connectionDidBecomeGood(){var z;this.callLogger.info("SDK detected good connection"),(z=this.videoUplinkManager)===null||z===void 0||z.shouldRestrictVideoQuality(!1)}videoSendDidBecomeUnavailable(){this.callLogger.warn("Video send is unavailable")}remoteVideoSourcesDidChange(z){var te,ve;(te=this.videoDownlinkManager)===null||te===void 0||te.remoteVideoSourcesDidChange(z),(ve=this.videoUplinkManager)===null||ve===void 0||ve.remoteVideoSourcesDidChange(z)}tileWillBePausedByDownlinkPolicy(z){this.observer.onVideoTileWillPause(z)}tileWillBeUnpausedByDownlinkPolicy(z){this.observer.onVideoTileWillUnpause(z)}constructor(z,te,ve,Oe,$e,at,Xe,Nt,$t,Ln,xn,Jn=[],$n){this.selfAttendeeId=z,this.meetingId=te,this.mediaRegion=ve,this.callId=Oe,this.audioVideoFacade=$e,this.observer=at,this.deviceManager=Xe,this.videoDownlinkManager=Nt,this.disconnectObserver=$t,this.dataChannelSubscribers=Jn,this.videoUplinkManager=$n,this.callLogger=(0,o.tZ)("FREE-WILLY-AV"),this.consoleLog=(0,o.Cc)("FREE-WILLY-AV"),this.waitForStart=(0,i.u)(),this.waitForStop=(0,i.u)(),this.isStopRequested=!1,this.isSignallingOnly=!1,this.isReconnecting=!1,Ln&&(this.waitForStart=Ln),xn&&(this.waitForStop=xn),this.statsManager=new Fe($e,at),this.meetingEventLogger=new se(at,this.meetingId,this.mediaRegion,this.selfAttendeeId,this.callId),{reconnectTrace:this.huddleReconnectTracer}=(0,I.A)().getAllTraceHandlers()}},"AudioVideoObserverImpl");var ze=e(8571983633),qe=e(489015593),st=e(2671711178),ut=e(5954792826),tt=e(9240258658),_t=e(8193414630),yt=e(1990810649);function Kt(){switch((0,Q.IXB)()){case-3:return 1/.7;case-2:return 1/.8;case-1:return 1/.9;case 0:return 1;case 1:return 1/1.1;case 2:return 1/1.25;case 3:return 1/1.5;case 4:return 1/1.75;case 5:return 1/2;default:return 1}}c(Kt,"getScaleFactorForCurrentZoomLevel");function Qt(dt,z){const[te,ve]=dt;return[te*z,ve*z]}c(Qt,"getScaledCoordinates");function Jt(dt,z){var te;const Oe=(0,f.y3)()&&!(0,f.dY)("4.18.0")?1/Kt():1,$e=((te=dt.itemId)===null||te===void 0?void 0:te.toString())||null,at=dt.itemId==="self"?z:$e;switch(dt.type){case u.Sl.New:case u.Sl.Edit:{const[Xe,Nt]=Qt(dt.segment.a,Oe),[$t,Ln]=Qt(dt.segment.b,Oe),[xn,Jn]=Qt(dt.segment.c,Oe),[$n,w]=Qt(dt.segment.d,Oe);return{itemId:at,type:dt.type===u.Sl.New?tt.Y.Draw.Type.NEW:tt.Y.Draw.Type.EDIT,segment:{a:{x:Xe,y:Nt},b:{x:$t,y:Ln},c:{x:xn,y:Jn},d:{x:$n,y:w}}}}case u.Sl.End:return{itemId:at,type:tt.Y.Draw.Type.END};case u.Sl.ChangeHue:return{itemId:at,type:tt.Y.Draw.Type.CHANGE_HUE,hue:dt.hue};case u.Sl.Position:return{itemId:at,type:tt.Y.Draw.Type.POSITION,x:dt.x,y:dt.y};default:return(0,_t.Kh)(dt)}}c(Jt,"convertDrawMessageToPeerMessage");function Gt(dt,z){const te=dt.itemId===z?"self":dt.itemId;switch(dt.type){case tt.Y.Draw.Type.NEW:case tt.Y.Draw.Type.EDIT:{const Oe=(0,f.y3)()&&!(0,f.dY)("4.18.0")?Kt():1;return{itemId:te,type:dt.type===tt.Y.Draw.Type.NEW?u.Sl.New:u.Sl.Edit,segment:{a:[(dt.segment.a.x||0)*Oe,(dt.segment.a.y||0)*Oe],b:[(dt.segment.b.x||0)*Oe,(dt.segment.b.y||0)*Oe],c:[(dt.segment.c.x||0)*Oe,(dt.segment.c.y||0)*Oe],d:[(dt.segment.d.x||0)*Oe,(dt.segment.d.y||0)*Oe]}}}case tt.Y.Draw.Type.END:return{itemId:te,type:u.Sl.End};case tt.Y.Draw.Type.CHANGE_HUE:return{itemId:te,type:u.Sl.ChangeHue,hue:dt.hue};case tt.Y.Draw.Type.POSITION:return{itemId:te,type:u.Sl.Position,x:dt.x,y:dt.y};default:(0,$.M)("Unhandled draw message case");return}}c(Gt,"convertPeerMessageToDrawMessage");function wt(dt){let z=yt.o.Standard;return dt.type&&dt.type===tt.Y.Reacji.Type.Effect&&(z=yt.o.Effect),dt.type&&dt.type===tt.Y.Reacji.Type.Gif&&(z=yt.o.Gif),z}c(wt,"convertFromPeerReactionType");function Bt(dt){let z=tt.Y.Reacji.Type.Standard;return dt===yt.o.Effect&&(z=tt.Y.Reacji.Type.Effect),dt===yt.o.Gif&&(z=tt.Y.Reacji.Type.Gif),z}c(Bt,"convertToPeerReactionType");var Wt=e(1975685771);let Tn=c(class tr{updatePresence(z,te){te?this.attendeesStates.set(z,this.initializeState()):this.attendeesStates.delete(z)}calculateScore(z,te,ve){const Oe=this.attendeesStates.get(z);if(!Oe||(ve!==null&&(Oe.muted=ve),Oe.muted))return 0;const $e=Date.now();if(te){Oe.noiseFloor=this.updateNoiseFloor(Oe,te);const at={timestamp:$e,volume:te};Oe.volumeSamples.push(at)}return this.pruneVolumeSamples(Oe),this.getScore(Oe,$e)}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}initializeState(){return{muted:!1,noiseFloor:0,volumeSamples:[]}}updateNoiseFloor(z,te){let ve=z.noiseFloor;return te>ve?ve=(1-this.params.slowAttackFactor)*ve+this.params.slowAttackFactor*te:ve=(1-this.params.fastDecayFactor)*ve+this.params.fastDecayFactor*te,Math.min(ve,this.params.noiseFloorMax)}pruneVolumeSamples(z){const te=Date.now()-this.params.analysisWindowMs,ve=z.volumeSamples;for(;ve.length&&ve[0].timestamp<te;)ve.shift()}getScore(z,te){return z.volumeSamples.reduce((ve,Oe)=>{const $e=Math.max(1,Math.ceil((te-Oe.timestamp)/1e3));return ve+Math.max(0,Oe.volume-z.noiseFloor)/$e},0)}constructor(){this.attendeesStates=new Map,this.params=tr.FAST_SWITCHING_PARAMS}},"WindowedActiveSpeakerPolicy");Tn.DAMPED_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:3e3},Tn.FAST_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:300};let Ot=c(class{shutdown(){window.clearTimeout(this.timerHandle),delete this.timerHandle}addDisconnectedAttendee(z){new s.jp(z).hasModality(s.jp.MODALITY_CONTENT)||this.disconnectedAttendees.has(z)||(this.disconnectedAttendees.set(z,Date.now()+this.timeoutMs),this.maybeStartTimer())}deleteDisconnectedAttendee(z){this.disconnectedAttendees.delete(z),this.disconnectedAttendees.size===0&&(window.clearTimeout(this.timerHandle),delete this.timerHandle)}hasDisconnectedAttendee(z){return this.disconnectedAttendees.has(z)}maybeStartTimer(){if(this.timerHandle||this.disconnectedAttendees.size===0)return;const z=this.disconnectedAttendees.get([...this.disconnectedAttendees.keys()][0]);z&&(this.timerHandle=window.setTimeout(this.runTimer,Math.max(z-Date.now(),10)))}runTimer(){window.clearTimeout(this.timerHandle),delete this.timerHandle;const z=[],te=Date.now();this.disconnectedAttendees.forEach((ve,Oe)=>{te>ve&&(this.observer.onStalePeer(Oe),z.push(Oe))}),z.forEach(ve=>{this.disconnectedAttendees.delete(ve)}),this.maybeStartTimer()}constructor(z,te){this.timeoutMs=z,this.observer=te,this.runTimer=this.runTimer.bind(this),this.disconnectedAttendees=new Map}},"StaleAttendeeChecker");var Ft=e(4075246222),rn=e(2208015175),ln=e(8403493408),_n=e(2604971659),en=e(2462761869);let Xt=c(class{addSelf(z){this.selfId=z,this.addPeer(z)}removeSelf(z){(0,$.M)(z===this.selfId,"Bad attendeeId when removing self"),delete this.selfId,this.removePeer(z)}addPeer(z){this.ids=(0,Ft.A)(this.ids,[z]),(0,rn.A)(this.cachedPeerStates[z],(ve,Oe)=>{this.peerStateForwarder[Oe]&&!(0,ze.A)(ve)&&this.peerStateForwarder[Oe](z,ve)}),delete this.cachedPeerStates[z];const te=[];(0,rn.A)(this.cachedCallState,(ve,Oe)=>{this.callStateForwarder[Oe]&&!(0,ze.A)(ve)&&this.callStateForwarder[Oe].getPeerIdFn(ve)===z&&(this.callStateForwarder[Oe].forwardFn(ve),this.callStateForwarder[Oe].isCached||te.push(Oe))}),this.cachedCallState=(0,n.A)(this.cachedCallState,te)}removePeer(z){(0,ln.A)(this.ids,z),(0,rn.A)((0,_n.A)(this.cachedCallState),te=>{if(this.callStateForwarder[te]){const ve=this.callStateForwarder[te].removeFn(this.cachedCallState[te],z);if(!ve){delete this.cachedCallState[te];return}this.cachedCallState[te]=ve}})}getPeers(){return this.ids}hasPeer(z){return this.ids.includes(z)}hasAttendee(z){return this.hasPeer(z)||z===this.selfId}updateCallState(z){const te=z;(0,rn.A)(z,(ve,Oe)=>{this.callStateForwarder[Oe]&&(te[Oe]=this.callStateForwarder[Oe].updateFn(this.cachedCallState[Oe],ve))}),(0,rn.A)(this.callStateForwarder,(ve,Oe)=>{this.forwardOrCacheCallState([te],Oe,ve)})}updatePeerStates(z){(0,rn.A)(this.peerStateForwarder,(te,ve)=>{this.forwardOrCachePeerState(z,ve,te)})}setIncludeSelfAndNoneActiveSpeaker(z,te){z===this.includeSelf&&te===this.includeNone||(this.includeSelf=z,this.includeNone=te,(0,rn.A)(this.cachedCallState,(ve,Oe)=>{this.callStateForwarder[Oe]&&!(0,ze.A)(ve)&&this.callStateForwarder[Oe].forwardFn(ve)}))}forwardOrCachePeerState(z,te,ve){z.filter($e=>!(0,ze.A)($e.state[te])).map($e=>({id:$e.peerId,value:$e.state[te]})).forEach($e=>{let{id:at,value:Xe}=$e;this.ids.includes(at)?ve(at,Xe):this.cachedPeerStates[at]={...this.cachedPeerStates[at],[te]:Xe}})}forwardOrCacheCallState(z,te,ve){z.filter($e=>!(0,ze.A)($e[te])).map($e=>({value:$e[te]})).forEach($e=>{let{value:at}=$e;const Xe=ve.getPeerIdFn(at);let Nt=!1;Xe&&(this.ids.includes(Xe)||Xe===this.NO_ACTIVE_SPEAKER)?ve.forwardFn(at):Nt=!0,(Nt||ve.isCached)&&(this.cachedCallState={...this.cachedCallState,[te]:at})})}getAttendeeId(z){return new s.jp(z).base()}constructor(z){this.observer=z,this.NO_ACTIVE_SPEAKER="none",this.ids=[],this.includeSelf=!1,this.includeNone=!1,this.cachedCallState={},this.cachedPeerStates={},this.callStateForwarder={activeSpeakerList:{updateFn:(te,ve)=>{const Oe=te||[],$e=ve&&ve.length?ve[0]:this.NO_ACTIVE_SPEAKER;return(0,en.A)(Oe,[$e,this.NO_ACTIVE_SPEAKER]),Oe.unshift($e),Oe},removeFn:(te,ve)=>{if(te)return(0,ln.A)(te,ve),te},getPeerIdFn:te=>{const ve=te.filter(Oe=>Oe===this.NO_ACTIVE_SPEAKER?this.includeNone:this.includeSelf||this.selfId!==this.getAttendeeId(Oe));if(ve.length)return ve[0]},forwardFn:te=>{const ve=te.filter(Oe=>Oe===this.NO_ACTIVE_SPEAKER&&this.includeNone?!0:this.includeSelf||this.selfId!==this.getAttendeeId(Oe));!ve.length||ve[0]===this.NO_ACTIVE_SPEAKER?this.observer.onNewActiveSpeaker(void 0):this.observer.onNewActiveSpeaker(this.selfId===ve[0]?"self":ve[0])},isCached:!0}},this.peerStateForwarder={isDrawEnabled:(te,ve)=>{this.observer.onPeerDrawEnabled(te,ve)}}}},"PeerCache");var vn=e(252549317);let je=c(class{destroy(){var z,te,ve;(z=this.peerCache)===null||z===void 0||z.getPeers().forEach(Oe=>this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(Oe)),delete this.peerCache,(te=this.staleAttendeeChecker)===null||te===void 0||te.shutdown(),delete this.staleAttendeeChecker,this.audioVideoFacade.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeUnsubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeUnsubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.audioVideoFacade.unsubscribeFromActiveSpeakerDetector(this.activeSpeakerDetectorCallback),delete this.windowedActiveSpeakerPolicy,this.audioVideoFacade.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),(ve=this.audioVideoFacade.transcriptionController)===null||ve===void 0||ve.unsubscribeFromTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.attendeeMuteRequests={}}selfDrawEnabled(z){this.sendPeerMessageOverDataChannel(new tt.Y({capabilities:{isDrawEnabled:z},fromPeerIdString:this.selfAttendeeId}))}sendReacji(z,te,ve){const Oe={emoji:z,...te?{type:Bt(te)}:{},...ve?{emojiUrl:ve}:{}};this.sendPeerMessageOverDataChannel(new tt.Y({reacji:Oe,fromPeerIdString:this.selfAttendeeId}))}sendBackground(z){this.sendPeerMessageOverDataChannel(new tt.Y({background:{url:z},fromPeerIdString:this.selfAttendeeId}))}sendMuteRequest(z){this.sendPeerMessageOverDataChannel(new tt.Y({muteRequest:{peerId:z},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxRequest(z){this.sendPeerMessageOverDataChannel(new tt.Y({jukeboxRequest:{songKey:z},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxStopRequest(){this.sendPeerMessageOverDataChannel(new tt.Y({jukeboxRequest:{stop:!0},fromPeerIdString:this.selfAttendeeId}))}sendDrawMessage(z){this.sendPeerMessageOverDataChannel(new tt.Y({draw:Jt(z,this.selfAttendeeId),fromPeerIdString:this.selfAttendeeId}))}sendContentShareDetails(z){this.sendPeerMessageOverDataChannel(new tt.Y({contentShareDetails:{sourceType:z,itemId:this.selfAttendeeId},fromPeerIdString:this.selfAttendeeId}))}sendRecordingStartNotification(){this.sendPeerMessageOverDataChannel(new tt.Y({recordingStartNotification:{type:tt.Y.RecordingStartNotification.Type.SUMMARY},fromPeerIdString:this.selfAttendeeId}))}onStalePeer(z){this.callLogger.info(`Removing stale peer: ${z}`),this.attendeeLeft(z),this.observer.onPeerDisconnected(z),this.observer.onPeerLeft(z)}setIncludeSelfAndNoneActiveSpeaker(z,te){var ve;(ve=this.peerCache)===null||ve===void 0||ve.setIncludeSelfAndNoneActiveSpeaker(z,te)}attendeeJoined(z){if(z===this.selfAttendeeId){var te;(te=this.peerCache)===null||te===void 0||te.addSelf(z)}else{var ve;(ve=this.peerCache)===null||ve===void 0||ve.addPeer(z)}this.audioVideoFacade.realtimeSubscribeToVolumeIndicator(z,this.realtimeVolumeIndicatorCallback),this.consoleLog.info(`Subscribed to attendee=${z} volume indicator`)}attendeeLeft(z){if(z===this.selfAttendeeId){var te;(te=this.peerCache)===null||te===void 0||te.removeSelf(z)}else{var ve;(ve=this.peerCache)===null||ve===void 0||ve.removePeer(z)}this.audioVideoFacade.removeVideoTilesByAttendeeId(z),this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(z),this.consoleLog.info(`Unsubscribed from attendee=${z} volume indicator`)}sendPeerMessageOverDataChannel(z){this.isDataChannelReady()?this.audioVideoFacade.realtimeSendDataMessage(this.dataChannelTopic,tt.Y.encode(z).finish()):this.logFailureToSendPeerMessage(z)}isAttendeeOfTypeContent(z){return new s.jp(z).hasModality(s.jp.MODALITY_CONTENT)}realtimeAttendeeIdPresenceCallback(z,te,ve,Oe){var $e;if(this.consoleLog.info(`Attendee presence: attendeeId=${z}, isSelf=${this.selfAttendeeId===new s.jp(z).base()}, present=${te}, externalUserId=${ve}, dropped=${Oe}`),($e=this.windowedActiveSpeakerPolicy)===null||$e===void 0||$e.updatePresence(z,te),this.isAttendeeOfTypeContent(z)){te||this.audioVideoFacade.removeVideoTilesByAttendeeId(z);return}if(!ve){this.callLogger.error(`Attendee presence: no externalUserId for attendee=${z}`),this.observer.onClogError("MissingExternalUserId");return}let at=null;if(te){var Xe;Oe===!1&&!(!((Xe=this.peerCache)===null||Xe===void 0)&&Xe.hasAttendee(z))?at="joined":at="reconnected"}else Oe===!0?at="disconnected":at="left";if(at===null){this.callLogger.error("Presence callback event is null");return}if(this.selfAttendeeId===z)switch(at){case"joined":this.observer.onSelfJoined(),this.observer.onSelfConnected();break;case"left":this.observer.onSelfDisconnected(),this.observer.onSelfLeft();break;case"disconnected":this.observer.onSelfDisconnected();break;case"reconnected":this.observer.onSelfConnected();break;default:this.callLogger.error(`unknown self event ${at}`);return}else{const xn=(0,ut.l)(ve);if(!xn){this.callLogger.error(`No externalUserId for ${z}`);return}switch(at){case"joined":{var Nt;(Nt=this.staleAttendeeChecker)===null||Nt===void 0||Nt.deleteDisconnectedAttendee(z),this.observer.onPeerJoined(z,xn),this.observer.onPeerConnected(z),this.updatePeerVideoTile(z);break}case"left":this.observer.onPeerDisconnected(z),this.observer.onPeerLeft(z);break;case"disconnected":var $t;($t=this.staleAttendeeChecker)===null||$t===void 0||$t.addDisconnectedAttendee(z),this.observer.onPeerDisconnected(z);break;case"reconnected":{var Ln;(Ln=this.staleAttendeeChecker)===null||Ln===void 0||Ln.deleteDisconnectedAttendee(z),this.observer.onPeerConnected(z),this.updatePeerVideoTile(z);break}default:this.callLogger.error(`unknown peer event ${at}`);return}}at==="joined"&&this.attendeeJoined(z),at==="left"&&this.attendeeLeft(z)}realtimeFatalErrorCallback(z){this.callLogger.error(`Chime session fatal error: name=${z.name}, message=${z.message}`),this.observer.onClogError(`FatalError: ${z.name} - ${z.message}`)}realtimeLocalSignalStrengthChangeCallback(z){this.consoleLog.debug(`Local attendee signalStrength=${z}`)}realtimeMuteAndUnmuteLocalAudioCallback(z){this.callLogger.debug(`Local attendee mute=${z}`),this.observer.onPeerMuted("self",z)}realtimeSetCanUnmuteLocalAudioCallback(z){this.consoleLog.debug(`Local attendee can unmute = ${z}`)}realtimeVolumeIndicatorCallback(z,te,ve,Oe,$e){this.consoleLog.debug(`Attendee volume indicator: attendeeId=${z}, volume=${te}, muted=${ve}, signalStrength=${Oe}, externalUserId=${$e}`),this.selfAttendeeId!==z&&(ve?this.observer.onPeerMuted(z,!0):ve!==null&&ve===!1&&this.observer.onPeerMuted(z,!1)),Oe!==null&&(this.selfAttendeeId===z?this.observer.onSelfConnectionQualityChanged("uplink",(0,u.MK)(Oe)):this.observer.onPeerConnectionQualityChanged(z,"uplink",(0,u.MK)(Oe)))}activeSpeakerDetectorCallback(z){var te,ve;(te=this.peerCache)===null||te===void 0||te.updateCallState({activeSpeakerList:z}),(ve=this.videoUplinkManager)===null||ve===void 0||ve.reportActiveSpeakerChange(this.selfAttendeeId===z[0])}realtimeReceiveDataMessageCallback(z){if(this.selfAttendeeId===z.senderAttendeeId){if(!z.throttled)return;this.callLogger.info(`Data message throttled: size=${z.data.length} bytes`);return}let te;try{te=tt.Y.decode(z.data)}catch(ve){this.callLogger.error(`Peer Message failed during decode, ignoring peer message.
				| Error: ${ve}
				| Data Sender Attendee ID: ${z.senderAttendeeId}
				| Data Sender External Attendee ID: ${z.senderExternalUserId}
				| Topic: ${z.topic}`);return}this.handlePeerMessageFromDataMessage(te,z.senderAttendeeId)}handlePeerMessageFromDataMessage(z,te){const ve=te;if(z.jukeboxRequest){var Oe;if(!(0,Wt.Z)(ve,"senderAttendeeId is not populated")||!(0,Wt.Z)(z.jukeboxRequest,"message.jukeboxRequest is required in the jukebox request message"))return;if(!this.peerCache||!(!((Oe=this.peerCache)===null||Oe===void 0)&&Oe.hasPeer(ve))){this.callLogger.info(`Dropping jukeboxRequest from unknown peer: ${ve}`);return}z.jukeboxRequest.songKey&&!z.jukeboxRequest.stop&&this.observer.onJukeboxRequest(z.jukeboxRequest.songKey),z.jukeboxRequest.stop&&this.observer.onJukeboxStopRequest()}else if(z.reacji){var $e;if(!(0,Wt.Z)(ve,"senderAttendeeId is not populated")||!(0,Wt.Z)(z.reacji.emoji,"reacji.emoji is required in the reacji message"))return;if(!(($e=this.peerCache)===null||$e===void 0)&&$e.hasPeer(ve)){const xn=wt(z.reacji);var at;this.observer.onPeerReacji(ve,z.reacji.emoji,!0,xn,(at=z.reacji.emojiUrl)!==null&&at!==void 0?at:void 0)}else this.callLogger.info(`Dropping reacji from unknown peer: ${ve}`)}else if(z.draw){var Xe;const xn=Gt(z.draw,this.selfAttendeeId);if(!(0,Wt.Z)(ve,"senderAttendeeId is not populated")||!(0,Wt.Z)(xn,"Draw message must be correctly formed"))return;!((Xe=this.peerCache)===null||Xe===void 0)&&Xe.hasPeer(ve)?this.observer.onPeerDrawMessage(ve,xn):this.callLogger.info(`Dropping draw message from unknown peer: ${ve}`)}else if(z.capabilities){if(!(0,Wt.Z)(ve,"senderAttendeeId is not populated"))return;if(!(0,ze.A)(z.capabilities.isDrawEnabled)){var Nt;(Nt=this.peerCache)===null||Nt===void 0||Nt.updatePeerStates([{peerId:ve,state:{isDrawEnabled:z.capabilities.isDrawEnabled}}])}}else if(z.muteRequest){var $t;if(!(0,Wt.Z)(ve,"senderAttendeeId is not populated")||!(0,Wt.Z)(z.muteRequest.peerId,"muteRequest.peerId is required in the background message"))return;if(!(($t=this.peerCache)===null||$t===void 0)&&$t.hasPeer(ve)){if(z.muteRequest.peerId===this.selfAttendeeId){var Ln;const xn=this.attendeeMuteRequests[te],Jn=xn==null?void 0:xn.lastRequestTime,$n=Date.now();if(xn?(xn.lastRequestTime=$n,xn.count+=1):this.attendeeMuteRequests[te]={lastRequestTime:$n,count:1},Jn&&$n-Jn<=this.attendeeMuteRequestThrottleMs){this.callLogger.info(`Throttled mute request from attendee: ${te} peer: ${ve}`);return}if(((Ln=this.attendeeMuteRequests[te])===null||Ln===void 0?void 0:Ln.count)>=this.attendeeMuteRequestMaxAllowed){this.callLogger.info(`Dropped mute request from attendee: ${te} peer: ${ve}`);return}}this.observer.onPeerMuteRequest(ve,z.muteRequest.peerId)}else this.callLogger.info(`Dropping mute request from unknown peer: ${ve}`)}else if(z.contentShareDetails){if(!(0,Wt.Z)(ve,"senderAttendeeId is not populated")||!(0,Wt.Z)(z.contentShareDetails.itemId,"contentShareDetails.itemId is required in the contentShareDetails message")||!(0,Wt.Z)(z.contentShareDetails.sourceType,"contentShareDetails.sourceType is required in the contentShareDetails message"))return;this.callLogger.info(`Received content share details for item: ${z.contentShareDetails.itemId}, type: ${z.contentShareDetails.sourceType}`);const xn=(0,vn.Vd)(z.contentShareDetails.sourceType);this.observer.onContentShareDetailsUpdate(ve,xn,z.contentShareDetails.sourceType)}}realtimeReceiveTranscriptEventCallback(z){this.observer.onTranscriptionEvent(z)}updatePeerVideoTile(z){this.audioVideoFacade.getAllVideoTiles().filter(Oe=>{const $e=Oe.state();return!$e||!$e.boundAttendeeId?!1:new s.jp($e.boundAttendeeId).base()===new s.jp(z).base()}).forEach(Oe=>{const $e=(Oe==null?void 0:Oe.state())||null;$e&&this.observer.onPeerVideoTileUpdate(z,$e)})}constructor(z,te,ve,Oe){var $e;this.selfAttendeeId=z,this.audioVideoFacade=te,this.observer=ve,this.videoUplinkManager=Oe,this.callLogger=(0,o.Jt)("AUDIO-VIDEO-FACADE-SUBS"),this.consoleLog=(0,o.Cc)("AUDIO-VIDEO-FACADE-SUBS"),this.dataChannelTopic="data-channel",this.staleAttendeeTimeoutMs=60*1e3,this.attendeeMuteRequestThrottleMs=10*1e3,this.attendeeMuteRequestMaxAllowed=50,this.attendeeMuteRequests={},this.isDataChannelReady=()=>{var at,Xe,Nt;return(at=this.audioVideoFacade.audioVideoController)===null||at===void 0||(Xe=at.meetingSessionContext)===null||Xe===void 0||(Nt=Xe.signalingClient)===null||Nt===void 0?void 0:Nt.ready()},this.logFailureToSendPeerMessage=at=>{const Xe=at.draw?"draw":"reacji",Nt=c(()=>this.callLogger.error(`Failed to send ${Xe} peer message. Data channel is not ready to use.`),"logError");return(0,st.A)(Xe,Nt)},(0,qe.A)(this,["realtimeAttendeeIdPresenceCallback","realtimeFatalErrorCallback","realtimeLocalSignalStrengthChangeCallback","realtimeMuteAndUnmuteLocalAudioCallback","realtimeSetCanUnmuteLocalAudioCallback","activeSpeakerDetectorCallback","realtimeVolumeIndicatorCallback","realtimeReceiveDataMessageCallback","realtimeReceiveTranscriptEventCallback"]),this.audioVideoFacade.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeSubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeSubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.windowedActiveSpeakerPolicy=new Tn,this.audioVideoFacade.subscribeToActiveSpeakerDetector(this.windowedActiveSpeakerPolicy,this.activeSpeakerDetectorCallback),this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),($e=this.audioVideoFacade.transcriptionController)===null||$e===void 0||$e.subscribeToTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.peerCache=new Xt(this.observer),this.staleAttendeeChecker=new Ot(this.staleAttendeeTimeoutMs,this)}},"AudioVideoFacadeSubscriber");var Rt=e(3867135795),hn=e(6696292586);const Nn=15,rt=2560,vt=1e3,Mt="text";let Ct=c(class{stopMusic(z){let{cleanObserver:te}=z;this.huddlesJukeboxEnabled&&this.isMusicEnabled&&(this.isMusicEnabled=!1,this.audioVideoFacade.stopContentShare(),te&&this.audioVideoFacade.removeContentShareObserver(this))}stop(){var z=this;return(0,t.coroutine)(function*(){z.isScreenshareEnabled&&(z.isStopRequested=yield z.stopContentShare()),z.huddlesJukeboxEnabled&&z.stopMusic({cleanObserver:!0}),z.isStopRequested||(z.observer.onScreenShareStopped(),z.audioVideoFacade.removeContentShareObserver(z))})()}contentShareDidStart(){this.log.info("Chime content share started"),this.waitForStart.resolve(!0),this.observer.onScreenShareStarted()}contentShareDidStop(){this.log.info("Chime content share stopped"),this.isScreenshareEnabled&&this.log.info("Screenshare stop: stream ended"),this.isScreenshareEnabled=!1,this.observer.onScreenShareStopped(),this.isStopRequested&&this.audioVideoFacade.removeContentShareObserver(this)}contentShareDidPause(){this.log.info("Chime content share paused")}contentShareDidUnpause(){this.log.info("Chime content share unpaused")}setSongStream(z){var te=this;return(0,t.coroutine)(function*(){te.huddlesJukeboxEnabled&&(te.waitForStart=(0,i.u)(),yield te.audioVideoFacade.startContentShare(z),te.isMusicEnabled=!0)})()}setScreenshare(z,te,ve){var Oe=this;return(0,t.coroutine)(function*(){if(z===Oe.isScreenshareEnabled)return;const{huddleEventsTrace:$e}=(0,I.A)().getAllTraceHandlers();if(z){let at=te;if(te){const Nt=te.split(":");Nt.length===3&&Nt[2]!=="0"&&(Nt[2]="0",at=Nt.join(":"),Oe.log.warn(`Munging screen share media source id, before: ${te}, after: ${at}`))}let Xe;try{Oe.waitForStart=(0,i.u)();const Nt=c($t=>{throw Oe.log.error(`getUserMedia error during huddle screenshare attempt: ${$t.name} ${$t.message}`),$t},"logGetUserMediaError");if((0,Q.g9M)()&&Oe.log.info(`Starting screen share with zoomLevel = ${(0,Q.IXB)()}`),(0,Q.g9M)()&&ve){const{screenHeight:$t,screenWidth:Ln,selectedDisplayId:xn}=ve;if(Xe={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:at,maxFrameRate:Nn}}},Ln&&$t){const w=Xe.video.mandatory,de=Ln/$t,we=rt;w.maxWidth=Ln<we?Ln:we,w.maxHeight=$t<we?$t:we;const Et=navigator.mediaDevices.getSupportedConstraints();(0,Rt.A)(Et,"aspectRatio")&&!!Et.aspectRatio&&(0,hn.A)(de)&&(w.minAspectRatio=de,w.maxAspectRatio=de),Oe.log.info(`Starting screen share with resolution constraints: ${w.maxWidth} x ${w.maxHeight} | resolution provided: ${Ln} x ${$t}`)}else Oe.log.info("Starting application window share without proposed resolution");const $n=yield navigator.mediaDevices.getUserMedia(Xe).catch(Nt);($n==null?void 0:$n.getVideoTracks().length)>0?(Oe.log.debug(`Applying content hint to content share stream. Content Hint ${Mt}`),$n.getVideoTracks()[0].contentHint=Mt):Oe.log.warn("No video tracks where available when starting constrained content share"),setTimeout(()=>{const w=$n.getVideoTracks()[0].getSettings(),de=(0,vn.MS)(w==null?void 0:w.deviceId);B.A.publish({type:K.lx.ScreenshareContentType,update:{screenshareContentType:de}}),Oe.log.info(`Created video track with resolution: ${w.width} x ${w.height} framerate: ${w.frameRate} aspect ratio: ${w.aspectRatio}`),xn&&Oe.log.info(`Sharing from selected display: ${xn}`)},500),yield Oe.audioVideoFacade.startContentShare($n),setTimeout(()=>Oe.applyContentShareConstraints($n),vt),$e==null||$e.update({name:p.p.SCREENSHARE,type:p.G.START})}else{Oe.log.info("Starting unconstrained content share with chime API's startContentShareFromScreenCapture");const $t=yield Oe.audioVideoFacade.startContentShareFromScreenCapture(at).catch(Nt);if($e==null||$e.update({name:p.p.SCREENSHARE,type:p.G.START}),setTimeout(()=>Oe.applyContentShareConstraints($t),vt),($t==null?void 0:$t.getVideoTracks().length)>0){Oe.log.debug(`Applying content hint to content share stream. Content Hint ${Mt}`),$t.getVideoTracks()[0].contentHint=Mt;const Ln=$t.getVideoTracks()[0].getSettings(),xn=(0,vn.MS)(Ln==null?void 0:Ln.deviceId);B.A.publish({type:K.lx.ScreenshareContentType,update:{screenshareContentType:xn}})}else Oe.log.warn("No video tracks where available when starting unconstrained content share")}}catch(Nt){const $t=c(()=>{delete Oe.waitForStart,Oe.isScreenshareEnabled=!1,Oe.observer.onScreenShareStopped()},"exitScreenshare");if(Nt.name==="NotAllowedError"){$t(),Nt.message==="Permission denied by system"&&Oe.observer.onCheckSystemMediaAccess(u.mT.SCREEN);return}if(Nt.name==="OverconstrainedError"){$t(),Xe&&Oe.log.error(`Invalid stream constraints prevented screenshare from succeeding: ${JSON.stringify(Xe)}`);return}if(["TypeError","AbortError","Error"].includes(Nt.name)){$t(),Oe.observer.onScreenShareError(u.lD.ERROR);return}if(Nt.name==="NotReadableError"){$t(),Oe.observer.onScreenShareError(u.lD.NOT_READABLE_ERROR);return}throw Nt.name==="NotFoundError"&&($t(),Oe.observer.onScreenShareError(u.lD.NOT_FOUND_ERROR)),Oe.log.error(`Encountered an uncaught error attempting to start screen share: ${Nt.name} ${Nt.message}`),Oe.waitForStart.resolve(!1),$t(),Nt}Oe.lastEnableTimeMs=Date.now(),Oe.isScreenshareEnabled=z}else Oe.isScreenshareEnabled&&(yield Oe.stopContentShare())})()}applyContentShareConstraints(z){var te=this;return(0,t.coroutine)(function*(){if(!te.isExperimentalSDK)return;const ve=z.getVideoTracks()[0];if(!ve){te.log.info("Constraints not re-applied no video track available");return}ve.getSettings()||te.log.info("Constraints not re-applied no video track settings available");const $e={width:{ideal:rt},height:{ideal:rt},frameRate:{ideal:Nn}};yield ve.applyConstraints($e),te.log.info("Constraints re-applied to content share (resolution overwrite applied)")})()}isScreenShareEnabled(){return this.isScreenshareEnabled||!1}stopContentShare(){var z=this;return(0,t.coroutine)(function*(){let te=!1;if(z.waitForStart.isPending()?Date.now()-z.lastEnableTimeMs>1e4?(te=!0,z.log.info(`Stop screen share, force: ${Date.now()-z.lastEnableTimeMs} ms since start`)):(z.log.info("Stop screen share, waiting for content share start to resolve"),te=yield z.waitForStart,z.log.info(`Stop screen share, wait for content share start resolve finished: ${te}`)):(te=z.waitForStart.value(),z.log.info(`Stop screen share, promise resolved: ${te}`)),te){z.audioVideoFacade.stopContentShare(),z.isScreenshareEnabled=!1;const{huddleEventsTrace:ve}=(0,I.A)().getAllTraceHandlers();ve==null||ve.update({name:p.p.SCREENSHARE,type:p.G.STOP}),B.A.publish({type:K.lx.ScreenshareContentType,update:null})}else z.log.warn("Screen share disable ignored as screen share was not started successfully");return te})()}constructor(z,te,ve,Oe){this.audioVideoFacade=z,this.observer=te,this.huddlesJukeboxEnabled=ve,this.isExperimentalSDK=Oe,this.log=(0,o.tZ)("FREE-WILLY-CONTENT-SHARE"),this.isStopRequested=!1,this.lastEnableTimeMs=0,this.audioVideoFacade.addContentShareObserver(this),this.setScreenshare=C(this,this.setScreenshare,{skipIntermediatePendingRuns:!1})}},"ContentShareManager"),Yt=c(class{addObserver(z){var te,ve;(te=this.videoDownlinkPolicy)===null||te===void 0||(ve=te.addObserver)===null||ve===void 0||ve.call(te,z)}removeObserver(z){var te,ve;(te=this.videoDownlinkPolicy)===null||te===void 0||(ve=te.removeObserver)===null||ve===void 0||ve.call(te,z)}remoteVideoSourcesDidChange(z){this.videoSources=z,this.updateChimeVideoPreferences()}updateChimeVideoPreferences(){if(!this.videoSources||!this.videoDownlinkPolicy)return;const z=[];this.videoSources.forEach(te=>{var ve;const Oe=(ve=te.attendee)===null||ve===void 0?void 0:ve.attendeeId;Oe===this.selfAttendeeId||!Oe||(Oe.includes("#content")||!this.isAudioOnlyMode)&&z.push(te)}),this.sendChimeVideoPreferences(z)}constructor({selfAttendeeId:z,videoDownlinkPolicy:te}){this.logger=new be.k("Huddles Video Downlink Manager"),this.isAudioOnlyMode=!1,this.toggleAllIncomingVideo=ve=>{this.isAudioOnlyMode=ve,this.updateChimeVideoPreferences()},this.sendChimeVideoPreferences=ve=>{var Oe;try{this.logger.debug(`Sending updated video preferences to chime: ${JSON.stringify(ve)}`)}catch{}(Oe=this.videoDownlinkPolicy)===null||Oe===void 0||Oe.chooseRemoteVideoSources(ve)},this.videoDownlinkPolicy=te,this.selfAttendeeId=z}},"VideoDownlinkManager");const In=null;var Un=e(796111729),En=e(2240330919);const Bn=30,Mn=720;class Vn{get videoParticipantCount(){const z=this.audioVideoFacade.hasStartedLocalVideoTile()?1:0;return(this.remoteVideoParticipantCount||0)+z}constructor(z,te){var ve=this;this.observer=z,this.audioVideoFacade=te,this.logger=(0,Un.Wo)({label:"VIDEO-UPLINK"}),this.remoteVideoParticipantCount=0,this.maxIdealBitrate=1200,this.minimumBitrate=100,this.useMinimumBitrate=!1,this.currentBitrate=this.maxIdealBitrate,this.isActiveSpeaker=!1,this.bitrateUpdateDelayMs=5e3,this.remoteVideoSourcesDidChange=Oe=>{this.logger.info("remote video sources changed",Oe),this.remoteVideoParticipantCount=Oe.length,this.updateVideoQualitySettings()},this.reportActiveSpeakerChange=Oe=>{this.logger.debug(`user is active speaker: ${Oe}`);const $e=this.isActiveSpeaker;this.isActiveSpeaker=Oe,$e===this.isActiveSpeaker?this.logger.debug(`Active speaker status unchanged ${this.isActiveSpeaker}.`):(this.logger.info(`Active speaker status changed to ${this.isActiveSpeaker}. Updating video quality settings.`),this.updateVideoQualitySettings())},this.updateVideoQualitySettings=()=>{const Oe=this.maxIdealBitrate;if(!this.videoParticipantCount){this.logger.debug("Video not active in Huddle. Returning.");return}const $e=this.currentBitrate;if(this.useMinimumBitrate?this.currentBitrate=this.minimumBitrate:this.isActiveSpeaker?this.currentBitrate=Oe:this.remoteVideoParticipantCount<=2?this.currentBitrate=Oe:this.remoteVideoParticipantCount<=4?this.currentBitrate=Oe*2/3:this.currentBitrate=Oe*2/this.remoteVideoParticipantCount,this.currentBitrate=(0,En.A)([this.currentBitrate,this.minimumBitrate])||$e,$e===this.currentBitrate){this.logger.info(`Target video bitrate unchanged (${this.currentBitrate} kbps). Not updating max bitrate`);return}const at=$e>this.currentBitrate;this.applyNextVideoSettings(at)},this.shouldRestrictVideoQuality=Oe=>{this.logger.info(`should restrict video quality due to connection quality: ${Oe}`),this.useMinimumBitrate=Oe,this.updateVideoQualitySettings()},this.applyBitrate=()=>{var Oe;!this.currentBitrate||!(!((Oe=this.audioVideoFacade)===null||Oe===void 0)&&Oe.setVideoMaxBandwidthKbps)||(this.logger.info(`applying new video max bitrate to local video stream ${this.currentBitrate}`),this.audioVideoFacade.setVideoMaxBandwidthKbps(Math.trunc(this.currentBitrate)))},this.applyBitrateDelayed=(0,_.A)(this.applyBitrate,this.bitrateUpdateDelayMs,{leading:!1}),this.applyNextVideoSettings=function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?ve.applyBitrateDelayed():ve.applyBitrate()},this.logger.info("Initializing video uplink manager"),this.audioVideoFacade.chooseVideoInputQuality(Mn,Mn,Bn),this.observer.onMaxTileSizeUpdated(Mn),this.applyNextVideoSettings()}}c(Vn,"VideoUplinkManager");var rs=e(3146858537),as=e(3398586081),jn=e(1829947126);let es=c(class{initialize(z,te){this.gainNode=te,this.audioContext=z}onAudioLevelUpdated(z){isNaN(z.value)||z.value<this.audioLevelActivationThreshold||(this.currentDuckingEndTimeout&&clearTimeout(this.currentDuckingEndTimeout),this.startDucking())}startDucking(){if(!this.gainNode||!this.audioContext)return;const z=this.defaultVolume*this.duckingAudioAdjustmentLevel;this.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(z,this.audioContext.currentTime+this.fadeInTimeLocal),this.currentDuckingEndTimeout=setTimeout(()=>{this.endDucking()},this.waitForFadeOutTime)}endDucking(){var z;this.gainNode&&this.audioContext&&((z=this.gainNode)===null||z===void 0||z.gain.exponentialRampToValueAtTime(this.defaultVolume,this.audioContext.currentTime+this.fadeOutTime))}constructor(z){this.defaultVolume=z,this.fadeOutTime=20,this.fadeInTimeLocal=.2,this.waitForFadeOutTime=3e3,this.duckingAudioAdjustmentLevel=.2,this.audioLevelActivationThreshold=.04,this.onAudioLevelUpdated=this.onAudioLevelUpdated.bind(this),jn.A.subscribeAll(this.onAudioLevelUpdated)}},"JukeboxDucker");const Qn="HUDDLE-JUKEBOX";let ss=c(class{startLocalJukebox(z){let{song:te,volume:ve}=z;var Oe=this;return(0,t.coroutine)(function*(){var $e;const at=Oe.getSongUrl({song:te});if(at===Oe.localAudioUrl)return;Oe.callLogger.info(`Starting local jukebox song key: ${te.key}.`),Oe.audioContext||(Oe.audioContext=new AudioContext),Oe.cleanup(),Oe.localAudioUrl=at;const Nt=yield(yield window.fetch(at)).arrayBuffer(),$t=yield Oe.audioContext.decodeAudioData(Nt);Oe.audioBufferSourceNode=Oe.audioContext.createBufferSource(),Oe.audioBufferSourceNode.buffer=$t,Oe.localAudio=new Audio,Oe.localAudio.volume=ve,yield Oe.localAudio.setSinkId((0,O._o)()),Oe.localMediaStreamAudioDestinationNode=Oe.audioContext.createMediaStreamDestination(),Oe.gainNode=Oe.audioContext.createGain(),($e=Oe.jukeboxDucker)===null||$e===void 0||$e.initialize(Oe.audioContext,Oe.gainNode),Oe.gainNode.gain.value=Oe.defaultVolume,Oe.audioBufferSourceNode.connect(Oe.gainNode),Oe.gainNode.connect(Oe.localMediaStreamAudioDestinationNode),Oe.localAudio.srcObject=Oe.localMediaStreamAudioDestinationNode.stream,Oe.audioBufferSourceNode.loop=!0,Oe.audioBufferSourceNode.start(),Oe.localAudio.play()})()}startContentShareJukebox(z){let{song:te}=z;var ve=this;return(0,t.coroutine)(function*(){var Oe,$e;ve.audioContext||(ve.audioContext=new AudioContext),ve.audioDestination||(ve.audioDestination=ve.audioContext.createMediaStreamDestination()),ve.callLogger.info(`Starting jukebox song key: ${te.key}`),ve.cleanup();const at=ve.getSongUrl({song:te}),Nt=yield(yield window.fetch(at)).arrayBuffer(),$t=yield ve.audioContext.decodeAudioData(Nt);return ve.audioBufferSourceNode=ve.audioContext.createBufferSource(),ve.audioBufferSourceNode.buffer=$t,ve.localAudio=new Audio,yield ve.localAudio.setSinkId((0,O._o)()),ve.localMediaStreamAudioDestinationNode=ve.audioContext.createMediaStreamDestination(),ve.gainNode=ve.audioContext.createGain(),(Oe=ve.jukeboxDucker)===null||Oe===void 0||Oe.initialize(ve.audioContext,ve.gainNode),ve.gainNode.gain.value=ve.defaultVolume,ve.audioBufferSourceNode.connect(ve.gainNode),ve.gainNode.connect(ve.audioDestination),ve.gainNode.connect(ve.localMediaStreamAudioDestinationNode),ve.localAudio.srcObject=ve.localMediaStreamAudioDestinationNode.stream,ve.audioBufferSourceNode.loop=!0,ve.audioBufferSourceNode.start(),ve.localAudio.play(),($e=ve.audioDestination)===null||$e===void 0?void 0:$e.stream})()}stopJukebox(){this.callLogger.info(`Stopping jukebox for song: ${this.localAudioUrl||""}`),this.cleanup(),this.audioContext=void 0,this.audioDestination=void 0}cleanup(){var z,te,ve,Oe;(z=this.audioBufferSourceNode)===null||z===void 0||z.stop(),this.audioBufferSourceNode=void 0,(te=this.localAudio)===null||te===void 0||te.pause(),this.localAudio=void 0,this.localAudioUrl=void 0,(ve=this.gainNode)===null||ve===void 0||ve.disconnect(),this.gainNode=void 0,(Oe=this.audioDestination)===null||Oe===void 0||Oe.disconnect()}hasAudio(){return!!this.localAudio}getVolume(){var z;return(z=this.localAudio)===null||z===void 0?void 0:z.volume}getSongUrl(z){let{song:te}=z;return te.url}constructor(){this.defaultVolume=.3,this.callLogger=(0,o.Jt)(Qn),this.callLogger.info("Huddle Jukebox Manager created."),this.jukeboxDucker=new es(this.defaultVolume)}},"JukeboxManager");const pt=(0,as.A)(()=>new ss),Ht={connectionWaitTimeMs:15*1e3,connectionUnhealthyThreshold:5,sendingAudioFailureSamplesToConsider:3,sendingAudioFailureInitialWaitTimeMs:15*1e3,missedPongsLowerThreshold:1,missedPongsUpperThreshold:3},kn=c(class{constructor(){this.getConfiguration=()=>Ht}},"ConnectionHealthPolicyManager");var xt=e(610288365),Dn=e(1921074781),Fn;(function(dt){dt.Control="control",dt.Vp8="vp8",dt.Vp8Svc="vp8_svc",dt.Vp9="vp9",dt.Vp9Svc="vp9_svc",dt.Av1="av1",dt.Av1Svc="av1_svc"})(Fn||(Fn={}));const wn=(0,Un.Wo)({label:"HUDDLE-VIDEO-CODECS"}),It=function(){var dt=(0,t.coroutine)(function*(z){let{audioVideoFacade:te,h264BaselineProfileEnabled:ve,disableVp9:Oe}=z;var $e,at;const Xe=[];!(0,f.gm)()&&!Oe&&Xe.push(s.KK.vp9()),ve&&Xe.push(s.KK.h264BaselineProfile()),Xe.push(s.KK.h264()),wn.info(`Setting preferred camera video codec to ${($e=Xe[0])===null||$e===void 0?void 0:$e.codecName}`),wn.debug("Setting camera video codec preferences",Xe),(at=te.setVideoCodecSendPreferences)===null||at===void 0||at.call(te,Xe)});return c(function(te){return dt.apply(this,arguments)},"setCameraVideoCodec")}(),Je=function(){var dt=(0,t.coroutine)(function*(z){let{useAv1:te,audioVideoFacade:ve,h264BaselineProfileEnabled:Oe}=z;var $e,at;const Xe=[];te&&Xe.push(s.KK.av1()),Oe&&Xe.push(s.KK.h264BaselineProfile()),Xe.push(s.KK.h264()),wn.info(`Setting preferred content share video codec to ${($e=Xe[0])===null||$e===void 0?void 0:$e.codecName}`),wn.debug("Setting content share video codec preferences",Xe),(at=ve.setContentShareVideoCodecPreferences)===null||at===void 0||at.call(ve,Xe)});return c(function(te){return dt.apply(this,arguments)},"setScreenshareVideoCodec")}();var X=e(2028988448),_e;(function(dt){dt.CONNECTION_STATE_CHANGE="connectionstatechange",dt.ICE_CONNECTION_STATE_CHANGE="iceconnectionstatechange"})(_e||(_e={}));var ye;(function(dt){dt.CLOSE="close",dt.ERROR="error"})(ye||(ye={}));var De;(function(dt){dt.DISCONNECTED="disconnected",dt.FAILED="failed"})(De||(De={}));const Ge=5*1e3,et=1*1e3;let bt=null;class sn{constructor(z){var te=this;this.observer=z,this.callLogger=(0,o.Jt)("DISCONNECT-OBSERVER"),this.genericLogger=(0,Un.Wo)({label:"DISCONNECT-OBSERVER"}),this.peerConnection=null,this.webSocket=null,this.shouldIgnoreDisconnectEvents=!1,this.getPeerConnectionRef=ve=>{var Oe,$e;const at=(Oe=ve)===null||Oe===void 0||($e=Oe.audioVideoController)===null||$e===void 0?void 0:$e.meetingSessionContext;return at==null?void 0:at.peer},this.getWebSocketRef=ve=>{var Oe,$e,at,Xe;const Nt=(Oe=ve)===null||Oe===void 0||($e=Oe.audioVideoController)===null||$e===void 0?void 0:$e.meetingSessionContext;return Nt==null||(at=Nt.signalingClient)===null||at===void 0||(Xe=at.webSocket)===null||Xe===void 0?void 0:Xe.connection},this.onConnectionUpdate=function(ve){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&(te.brieflyIgnoreDisconnectEvents(),te.genericLogger.debug("Connection restored. Ignoring disconnection events for 5 seconds."));try{te.resetConnectionRefs(ve),te.registerAllEventHandlers(),te.genericLogger.debug("Reconnected and monitoring for future disconnections.")}catch($e){te.callLogger.error("Error updating connection references on reconnection:",$e)}},this.brieflyIgnoreDisconnectEvents=()=>{this.shouldIgnoreDisconnectEvents=!0,setTimeout(()=>{this.shouldIgnoreDisconnectEvents=!1,this.genericLogger.debug("Reconnection delay over. Now responding to disconnection events.")},Ge)},this.resetConnectionRefs=ve=>{this.unregisterAllEventHandlers(),this.peerConnection=this.getPeerConnectionRef(ve)||null,this.webSocket=this.getWebSocketRef(ve)||null,this.webSocket?this.genericLogger.debug("WebSocket reference obtained successfully."):this.callLogger.error("WebSocket reference not available.")},this.broadcastDisconnection=(0,_.A)(()=>{var ve;if(this.shouldIgnoreDisconnectEvents){this.genericLogger.debug("Disconnection event ignored due to recent reconnection.");return}this.genericLogger.info("Disconnection detected. Informing the user."),(ve=this.observer)===null||ve===void 0||ve.onSelfDisconnected()},et,{leading:!0,trailing:!1}),this.onHuddleEnd=()=>{this.genericLogger.debug("Huddle ended. Cleaning up event handlers and connection references.");try{this.unregisterAllEventHandlers()}catch(ve){this.callLogger.error(`Error during Huddle end cleanup: ${ve}`)}this.webSocket=null,this.peerConnection=null,bt=null},this.testNetworkDrop=()=>{var ve,Oe;this.genericLogger.info("Simulating network drop by closing WebSocket and PeerConnection."),(ve=this.webSocket)===null||ve===void 0||ve.close(),(Oe=this.peerConnection)===null||Oe===void 0||Oe.close()},this.registerAllEventHandlers=()=>{this.genericLogger.debug("Registering event handlers for WebSocket and PeerConnection."),this.registerPeerConnectionEventHandlers(),this.registerWebSocketEventHandlers()},this.unregisterAllEventHandlers=()=>{this.genericLogger.debug("Unregistering event handlers for WebSocket and PeerConnection."),this.unregisterPeerConnectionEventHandlers(),this.unregisterWebSocketEventHandlers()},this.registerPeerConnectionEventHandlers=()=>{var ve,Oe;(ve=this.peerConnection)===null||ve===void 0||ve.addEventListener(_e.CONNECTION_STATE_CHANGE,this.handlePeerConnectionStateChange),(Oe=this.peerConnection)===null||Oe===void 0||Oe.addEventListener(_e.ICE_CONNECTION_STATE_CHANGE,this.handleIceConnectionStateChange)},this.registerWebSocketEventHandlers=()=>{var ve,Oe;(ve=this.webSocket)===null||ve===void 0||ve.addEventListener(ye.CLOSE,this.handleWebSocketClose),(Oe=this.webSocket)===null||Oe===void 0||Oe.addEventListener(ye.ERROR,this.handleWebSocketError)},this.unregisterPeerConnectionEventHandlers=()=>{var ve,Oe;(ve=this.peerConnection)===null||ve===void 0||ve.removeEventListener(_e.CONNECTION_STATE_CHANGE,this.handlePeerConnectionStateChange),(Oe=this.peerConnection)===null||Oe===void 0||Oe.removeEventListener(_e.ICE_CONNECTION_STATE_CHANGE,this.handleIceConnectionStateChange)},this.unregisterWebSocketEventHandlers=()=>{var ve,Oe;(ve=this.webSocket)===null||ve===void 0||ve.removeEventListener(ye.CLOSE,this.handleWebSocketClose),(Oe=this.webSocket)===null||Oe===void 0||Oe.removeEventListener(ye.ERROR,this.handleWebSocketError)},this.handleIceConnectionStateChange=()=>{var ve,Oe;if(((ve=this.peerConnection)===null||ve===void 0?void 0:ve.iceConnectionState)===De.DISCONNECTED||((Oe=this.peerConnection)===null||Oe===void 0?void 0:Oe.iceConnectionState)===De.FAILED)this.logDisconnectionWarning("ICE connection state is either disconnected or failed."),this.broadcastDisconnection();else{var $e;this.callLogger.info(`ICE connection state changed to: ${($e=this.peerConnection)===null||$e===void 0?void 0:$e.iceConnectionState}.`)}},this.handlePeerConnectionStateChange=()=>{var ve,Oe;if(((ve=this.peerConnection)===null||ve===void 0?void 0:ve.connectionState)===De.DISCONNECTED||((Oe=this.peerConnection)===null||Oe===void 0?void 0:Oe.connectionState)===De.FAILED)this.logDisconnectionWarning("Peer connection has either disconnected or failed."),this.broadcastDisconnection();else{var $e;this.callLogger.info(`peer connection state changed: ${($e=this.peerConnection)===null||$e===void 0?void 0:$e.connectionState}`)}},this.handleWebSocketClose=ve=>{this.logDisconnectionWarning(`WebSocket connection closed unexpectedly (Code: ${ve.code}, Reason: ${ve.reason||"None provided"}).`),this.broadcastDisconnection()},this.handleWebSocketError=ve=>{this.callLogger.error(`WebSocket encountered an error: ${ve}.`)},this.logDisconnectionWarning=ve=>{this.callLogger.warn(`ALERT! ${ve} This may result in temporary audio/video disruption. Possible causes include network instability, network congestion, and security software (like VPNs, firewalls, or proxies) blocking or dropping the connection. If the issue persists, users should check their network or security settings and contact their IT team if necessary.`)},this.callLogger.info("Disconnection observer initialized. Monitoring for disconnections..."),bt=c(()=>this.testNetworkDrop(),"testNetworkDropFn")}}c(sn,"HuddleDisconnectObserver");const fn=null;(0,X.ul)("testHuddleNetworkDrop",()=>{bt==null||bt()});class Sn{initialize(z,te,ve,Oe,$e,at){var Xe=this;return(0,t.coroutine)(function*(){var Nt,$t,Ln,xn,Jn,$n,w,de;$e&&(Xe.waitForStop=$e),at&&(Xe.dataChannelSubscribers=at),Xe.observer.onInit(),Xe.options=z;const{serverConfig:we,useChimeSdkExp:Et,useSimulcast:gn,useHuddlesFilterWorker:Zt}=Xe.options;yield(0,s.ZT)(Et),Xe.chimeLogger=new be.k(Xe.loggerName),Xe.callLogger=(0,o.Jt)(Xe.loggerName),(Nt=Xe.callLogger)===null||Nt===void 0||Nt.info(`user agent: ${navigator.userAgent}`);const cn=(0,l.HF)();($t=Xe.callLogger)===null||$t===void 0||$t.info(`Version TS: ${cn}`);const qt=(document==null||(Ln=document.documentElement)===null||Ln===void 0||(xn=Ln.dataset)===null||xn===void 0?void 0:xn.versionHash)||"unknown";(Jn=Xe.callLogger)===null||Jn===void 0||Jn.info(`Version Hash: ${qt}`),($n=Xe.callLogger)===null||$n===void 0||$n.info(`Chime SDK Version: ${s.zF.sdkVersion}${Et?" (Experimental)":""}`),Xe.meeting=we.meeting,Xe.attendee=we.attendee,Xe.selfAttendeeId=Xe.attendee.AttendeeId;const Xn=(0,d.Y)(we.attendee.ExternalUserId);try{var _s;const Lt=JSON.stringify((0,n.A)(z,"serverConfig"),null,2);(_s=Xe.callLogger)===null||_s===void 0||_s.debug(`Huddle SDK [${Xn}] initialized with options: ${Lt}`)}catch(Lt){var Ts;(Ts=Xe.callLogger)===null||Ts===void 0||Ts.error("Error stringifying options",Lt)}if(Xe.transportProtocols=we.transportProtocols,Xe.isPrejoin=Xe.options.isPrejoin,Xe.meetingSessionConfiguration=new s.QJ(Xe.meeting,Xe.attendee),gn&&Xe.meetingSessionConfiguration){var As;(As=Xe.callLogger)===null||As===void 0||As.info("Simulcast enabled"),Xe.meetingSessionConfiguration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}if(Xe.options.usePriorityDownlinkPolicy&&(Xe.videoDownlinkPolicy=new s.gi(Xe.selfAttendeeId),Xe.meetingSessionConfiguration.videoDownlinkBandwidthPolicy=Xe.videoDownlinkPolicy,Xe.meetingSessionConfiguration.keepLastFrameWhenPaused=!0,Xe.videoDownlinkManager=new Yt({selfAttendeeId:Xe.selfAttendeeId,videoDownlinkPolicy:Xe.videoDownlinkPolicy})),Xe.meetingSessionConfiguration.urls&&(Xe.meetingSessionConfiguration.urls.urlRewriter=Xe.urlRewriter.bind(Xe)),Xe.meetingSessionConfiguration&&Xe.meetingSessionConfiguration.connectionHealthPolicyConfiguration){const Lt=new kn;Object.assign(Xe.meetingSessionConfiguration.connectionHealthPolicyConfiguration,Lt.getConfiguration())}Xe.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender=!0,yield Xe.initVoiceFocus();const Os={audio:te.includes(u.mT.MICROPHONE),video:te.includes(u.mT.CAMERA)};s.vB.disable();let is;const Is=!!(!((w=Xe.voiceFocusManager)===null||w===void 0)&&w.isAvailable()),dn=Xe.options.disableAudioRedundancy||!1;if(Et){const Lt=(0,s.Q_)(),it=(0,s.RM)();if(Xe.defaultDeviceController=new it(Xe.chimeLogger,{enableWebAudio:Is}),Xe.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Os)),Xe.sessionExp=new Lt(Xe.meetingSessionConfiguration,Xe.chimeLogger,Xe.defaultDeviceController),is=Xe.sessionExp.audioVideo,dn){const At=(0,s.Ls)();is.setAudioProfile(new At(null,!1)),is.setContentAudioProfile(new At(null,!1))}}else{const Lt=(0,s.of)(),it=(0,s.zg)();if(Xe.defaultDeviceController=new it(Xe.chimeLogger,{enableWebAudio:Is}),Xe.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Os)),Xe.session=new Lt(Xe.meetingSessionConfiguration,Xe.chimeLogger,Xe.defaultDeviceController),is=Xe.session.audioVideo,dn){const At=(0,s.j3)();is.setAudioProfile(new At(null,!1)),is.setContentAudioProfile(new At(null,!1))}}if(Xe.options.useVideoUplinkPolicy){var Yn;(Yn=Xe.callLogger)===null||Yn===void 0||Yn.info("Video uplink policy enabled"),Xe.videoUplinkManager=new Vn(Xe.observer,is)}yield Xe.populateDeviceInfoCache();const ht=Xe.options.useH264Baseline||!1;It({audioVideoFacade:is,h264BaselineProfileEnabled:ht,disableVp9:!!Xe.options.disableVp9});const Rs=Xe.options.useH264BaselineScreenshare||!1,ls=Xe.options.useAv1Screenshare;Je({useAv1:ls,audioVideoFacade:is,h264BaselineProfileEnabled:Rs});const Ms={useHuddlesFilterWorker:Zt,backgroundVideoFilteringSetting:a.uT.Both,useDevicesExp:Xe.options.useDevicesExp,useVideoUplinkPolicy:Xe.options.useVideoUplinkPolicy},Ds=he;Xe.deviceManager=new Ds(is,Xe.audioOutputElement,Xe.observer,Ms,ve,Xe.chimeLogger,Xe.defaultDeviceController,Xe.voiceFocusManager),(de=Xe.dataChannelSubscribers)===null||de===void 0||de.forEach(Lt=>Lt.onInitializeDataChannelSubscriber()),Xe.disconnectObserver=new sn(Xe.observer),Xe.audioVideoObserver=new Ie(Xe.selfAttendeeId,Xe.meeting.MeetingId,Xe.meeting.MediaRegion,Xn,is,Xe.observer,Xe.deviceManager,Xe.videoDownlinkManager,Xe.disconnectObserver,Oe,Xe.waitForStop,Xe.dataChannelSubscribers,Xe.videoUplinkManager);const Ze=Xe.options.huddlesJukeboxEnabled;if(Ze){var Ut;(Ut=Xe.callLogger)===null||Ut===void 0||Ut.info("Huddles Jukebox experiment enabled (prototype)")}Xe.contentShareManager=new Ct(is,Xe.observer,!!Ze,Et),Xe.audioVideoFacadeSubscriber=new je(Xe.selfAttendeeId,is,Xe.observer,Xe.videoUplinkManager),(0,xt.Ay)().initialize(),Xe.connect(),Xe.screenManager=new r.A,Xe.observer.onMeetingSessionInitialized(),Xe.waitForInit.resolve()})()}shutdown(z){var te=this;return(0,t.coroutine)(function*(){var ve,Oe,$e,at,Xe,Nt,$t;if((ve=te.callLogger)===null||ve===void 0||ve.info("Huddles SDK shutdown initiated"),(Oe=te.disconnectObserver)===null||Oe===void 0||Oe.onHuddleEnd(),delete te.disconnectObserver,yield te.waitForInit,te.cleanupDataChannelSubscribers(),($e=te.contentShareManager)===null||$e===void 0||$e.stop(),(at=te.audioVideoObserver)===null||at===void 0||at.stop(),yield(Xe=te.deviceManager)===null||Xe===void 0?void 0:Xe.shutdown(),Dn.F.doesInstanceExist()){var Ln;(Ln=Dn.F.getInstance())===null||Ln===void 0||Ln.release()}(Nt=te.audioVideoFacadeSubscriber)===null||Nt===void 0||Nt.destroy(),yield te.waitForStop,delete te.session,delete te.sessionExp,delete te.meetingSessionConfiguration,yield te.cleanupDefaultDeviceControllerRefs(),($t=te.callLogger)===null||$t===void 0||$t.info("Huddles SDK shutdown completed"),delete te.chimeLogger,delete te.callLogger,delete te.deviceManager,delete te.audioVideoFacadeSubscriber,delete te.audioVideoObserver,delete te.contentShareManager,delete te.screenManager,delete te.voiceFocusManager,delete te.videoDownlinkManager,delete te.videoDownlinkPolicy,delete te.videoUplinkManager,z&&z()})()}selfMicrophoneEnabled(z){var te;(te=this.deviceManager)===null||te===void 0||te.setMicrophone(z)}selfVideoEnabled(z,te,ve,Oe){var $e,at;($e=this.deviceManager)===null||$e===void 0||$e.setCamera(z),(at=this.contentShareManager)===null||at===void 0||at.setScreenshare(te,ve,Oe)}startContentShareJukebox(z){let{song:te}=z;var ve=this;return(0,t.coroutine)(function*(){var Oe;const $e=yield pt().startContentShareJukebox({song:te});$e&&((Oe=ve.contentShareManager)===null||Oe===void 0||Oe.setSongStream($e))})()}selfStopJukebox(){var z=this;return(0,t.coroutine)(function*(){var te;pt().stopJukebox(),(te=z.contentShareManager)===null||te===void 0||te.stopMusic({cleanObserver:!1})})()}setCameraQuality(z,te,ve,Oe){var $e;if(!(!(($e=this.options)===null||$e===void 0)&&$e.useVideoUplinkPolicy)){var at;(at=this.deviceManager)===null||at===void 0||at.setCameraQuality(z,te,ve,Oe)}}setAGC(z){var te;(te=this.deviceManager)===null||te===void 0||te.setAGC(z)}setNewPreferredDevice(z,te){var ve;(ve=this.deviceManager)===null||ve===void 0||ve.setPreferredDevice(z,te)}setNoiseSuppression(z){var te;(te=this.deviceManager)===null||te===void 0||te.setNoiseSuppression(z)}setVideoBackgroundEffect(z){var te;(te=this.deviceManager)===null||te===void 0||te.setVideoBackgroundEffect(z)}requestPreviewStreamForDeviceId(z,te,ve){var Oe;(Oe=this.deviceManager)===null||Oe===void 0||Oe.requestPreviewStreamForDeviceId(z,te,ve)}stopVideoPreviewForVideoInput(z){var te;(te=this.deviceManager)===null||te===void 0||te.stopVideoPreviewForVideoInput(z)}getScreenThumbnails(z){var te=this;return(0,t.coroutine)(function*(){var ve;return yield(ve=te.screenManager)===null||ve===void 0?void 0:ve.getScreenThumbnails(z==null?void 0:z.thumbnailDimensions,z==null?void 0:z.isRefetch)})()}selfDrawEnabled(z){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.selfDrawEnabled(z)}sendReacji(z,te,ve){var Oe;(Oe=this.audioVideoFacadeSubscriber)===null||Oe===void 0||Oe.sendReacji(z,te,ve)}sendBackground(z){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.sendBackground(z)}sendMuteRequest(z){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.sendMuteRequest(z)}sendJukeboxRequest(z){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.sendJukeboxRequest(z)}sendJukeboxStopRequest(){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendJukeboxStopRequest()}sendDrawMessage(z){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.sendDrawMessage(z)}sendContentShareDetails(z){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.sendContentShareDetails(z)}sendRecordingStartNotification(){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendRecordingStartNotification()}maybeBindAudioOutputElement(){var z;(z=this.deviceManager)===null||z===void 0||z.maybeBindAudioOutputElement()}maybeCheckSystemMediaAccess(z){var te;return(te=this.deviceManager)===null||te===void 0?void 0:te.maybeCheckSystemMediaAccess(z)}setIncludeSelfAndNoneActiveSpeaker(z,te){var ve;(ve=this.audioVideoFacadeSubscriber)===null||ve===void 0||ve.setIncludeSelfAndNoneActiveSpeaker(z,te)}bindVideo(z,te,ve){var Oe;const $e=this.session||this.sessionExp;if(!$e)return;const at=(Oe=$e.audioVideo.getVideoTile(z))===null||Oe===void 0?void 0:Oe.state();ve?at!=null&&at.boundVideoStream&&s.xc.connectVideoStreamToVideoElement(at.boundVideoStream,te,!1):(this.videoDownlinkPolicy&&(at!=null&&at.paused)&&$e.audioVideo.unpauseVideoTile(z),$e.audioVideo.bindVideoElement(z,te))}unbindVideo(z,te,ve){const Oe=this.session||this.sessionExp;Oe&&(ve?s.xc.disconnectVideoStreamFromVideoElement(te,!0):Oe.audioVideo.getVideoTile(z)&&Oe.audioVideo.unbindVideoElement(z))}pauseVideo(z){const te=this.session||this.sessionExp;if(!te)return;const ve=te.audioVideo.getVideoTile(z),Oe=ve==null?void 0:ve.state();!(Oe!=null&&Oe.isContent)&&(Oe!=null&&Oe.active)&&(ve==null||ve.pause())}unpauseVideo(z){const te=this.session||this.sessionExp;if(!te)return;const ve=te.audioVideo.getVideoTile(z),Oe=ve==null?void 0:ve.state();Oe!=null&&Oe.paused&&(ve==null||ve.unpause())}videoTileHasStream(z){const te=this.session||this.sessionExp;if(!te)return!1;const ve=te.audioVideo.getVideoTile(z);if(!ve)return!1;const Oe=ve.state();return Oe?!!Oe.boundVideoStream:!1}getMeetingMediaRegion(){var z;return(z=this.meeting)===null||z===void 0?void 0:z.MediaRegion}completePrejoin(z){var te=this;return(0,t.coroutine)(function*(){const{isStartMuted:ve}=z;if(te.isPrejoin){var Oe,$e;return ve&&((Oe=te.deviceManager)===null||Oe===void 0||Oe.setStartMutedBarrier(ve)),($e=te.audioVideoObserver)===null||$e===void 0||$e.start(),te.maybeBindAudioOutputElement(),te.setIncludeSelfAndNoneActiveSpeaker(!0,!0),te.isPrejoin=!1,!0}return!1})()}urlRewriter(z){if(!z)return z;if(this.transportProtocols){const $e=this.transportProtocols;if(z.includes("?transport=udp")&&!$e.includes("udp")){var te;return(te=this.callLogger)===null||te===void 0||te.info("Dropping UDP transport"),""}if(z.includes("?transport=tcp")){if(z.includes("turns:")){if(!$e.includes("tls")){var ve;return(ve=this.callLogger)===null||ve===void 0||ve.info("Dropping TLS transport"),""}}else if(!$e.includes("tcp")){var Oe;return(Oe=this.callLogger)===null||Oe===void 0||Oe.info("Dropping TCP transport"),""}}}return z.replace(`:${this.TURN_PORT_UDP}`,`:${this.OVERRIDE_TURN_PORT_UDP}`)}hasSession(){return!!this.session||!!this.sessionExp}setupVideoDeviceLabelTrigger(){var z,te=this;const ve=function(){var Oe=(0,t.coroutine)(function*(){try{var $e;te.videoDevicePermissionStatus="IN_PROGRESS";const Xe=yield navigator.mediaDevices.getUserMedia({video:!0});return($e=te.callLogger)===null||$e===void 0||$e.info("Video device permissions granted"),te.videoDevicePermissionStatus="GRANTED",Xe}catch(Xe){var at;throw te.videoDevicePermissionStatus="DENIED",te.observer.onSetNoMediaInput(u.mT.CAMERA),(at=te.callLogger)===null||at===void 0||at.info("Video device permissions denied"),Xe}});return c(function(){return Oe.apply(this,arguments)},"callback")}();(z=this.defaultDeviceController)===null||z===void 0||z.setDeviceLabelTrigger(ve)}maybeEnableSelfCamera(){let{isScreenshareEnabled:z}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var te=this;return(0,t.coroutine)(function*(){if((yield te.initVideoPermission())&&(te.videoDevicePermissionStatus==="INITIAL"||te.videoDevicePermissionStatus==="GRANTED")){var Oe;te.selfVideoEnabled(!0,!!z),te.observer.onPeerCameraActive("self",!0),(Oe=te.callLogger)===null||Oe===void 0||Oe.info("maybeEnableSelfCamera:: enabling camera function executed")}})()}initVideoPermission(){var z=this;return(0,t.coroutine)(function*(){var te;return z.setupVideoDeviceLabelTrigger(),yield(te=z.deviceManager)===null||te===void 0?void 0:te.initVideoInputDevices()})()}getSelfAttendeeId(){return this.selfAttendeeId}constructor(z,te,ve="FREE-WILLY-SDK"){this.observer=z,this.audioOutputElement=te,this.loggerName=ve,this.TURN_PORT_UDP=3478,this.OVERRIDE_TURN_PORT_UDP=22466,this.waitForInit=(0,i.u)(),this.waitForStop=(0,i.u)();var Oe=this;this.initVoiceFocus=(0,t.coroutine)(function*(){let Nt=0;const $t=Date.now();Oe.voiceFocusManager=new rs.A(Oe.chimeLogger),yield Oe.voiceFocusManager.init({configOnly:!1}),Nt=Date.now()-$t,Oe.observer.onMaybeVoiceFocusInitialized(Nt)});var $e=this;this.populateDeviceInfoCache=(0,t.coroutine)(function*(){var Nt,$t,Ln,xn;const Jn=Date.now(),$n=yield(Nt=$e.defaultDeviceController)===null||Nt===void 0?void 0:Nt.listAudioInputDevices(),w=yield($t=$e.defaultDeviceController)===null||$t===void 0?void 0:$t.listAudioOutputDevices(),de=yield(Ln=$e.defaultDeviceController)===null||Ln===void 0?void 0:Ln.listVideoInputDevices(),we=H.Ay.canAccessMediaResource(u.mT.MICROPHONE).status===a.eJ.Granted&&!($n!=null&&$n.length),Et=H.Ay.canAccessMediaResource(u.mT.CAMERA).status===a.eJ.Granted&&!(de!=null&&de.length);if(we){var gn;(gn=$e.callLogger)===null||gn===void 0||gn.error("No microphone devices found, though permissions have been granted previously. Permissions have likely been revoked or cleared mid-session")}if(Et){var Zt;(Zt=$e.callLogger)===null||Zt===void 0||Zt.error("No camera devices found, though permissions have been granted previously. Permissions have likely been revoked or cleared mid-session")}const cn=Date.now()-Jn;(xn=$e.callLogger)===null||xn===void 0||xn.info(`Populated device info cache in ${cn}ms with ${$n==null?void 0:$n.length} microphones, ${w==null?void 0:w.length} speakers, and ${de==null?void 0:de.length} cameras`)}),this.cleanupDataChannelSubscribers=()=>{this.dataChannelSubscribers&&(this.dataChannelSubscribers.forEach(Nt=>Nt.onShutdownDataChannelSubscriber()),this.dataChannelSubscribers=void 0)};var at=this;this.cleanupDefaultDeviceControllerRefs=(0,t.coroutine)(function*(){var Nt;if(!at.defaultDeviceController)return;yield at.defaultDeviceController.destroy();const $t=(Nt=at.defaultDeviceController)===null||Nt===void 0?void 0:Nt.eventController;if($t){var Ln;const xn=(Ln=$t.configuration)===null||Ln===void 0?void 0:Ln.urls;xn&&(xn.urlRewriter=void 0)}at.defaultDeviceController.deviceLabelTrigger=void 0,delete at.defaultDeviceController}),this.handleClientOffline=()=>{var Nt;(Nt=this.audioVideoObserver)===null||Nt===void 0||Nt.audioVideoDidStartConnecting(!0)},this.toggleAllIncomingVideo=Nt=>{var $t;($t=this.videoDownlinkManager)===null||$t===void 0||$t.toggleAllIncomingVideo(Nt)};var Xe=this;this.connect=(0,t.coroutine)(function*(){var Nt,$t;if((Nt=Xe.audioVideoObserver)===null||Nt===void 0||Nt.startWithSignalingOnly(),yield($t=Xe.deviceManager)===null||$t===void 0?void 0:$t.init(),!Xe.isPrejoin){var Ln;if(!H.Ay.canAccessMediaResource(u.mT.MICROPHONE)){var xn;(xn=Xe.callLogger)===null||xn===void 0||xn.error("Missing microphone permissions. Not connecting to huddle");return}(Ln=Xe.audioVideoObserver)===null||Ln===void 0||Ln.start()}}),this.videoDevicePermissionStatus="INITIAL"}}c(Sn,"FreeWillySdk")},5016574668:(x,A,e)=>{"use strict";e.d(A,{An:()=>i,Kp:()=>r,Nb:()=>s,RN:()=>d,Sq:()=>a,ZT:()=>t,jt:()=>u,tz:()=>l,w4:()=>o,yz:()=>n});const t=10*1e3,n=1e3,s="2.5",i=450*450,l=25,o=15,a="huddles_perf",r="app_metrics",d="client_metrics",u=5},2205899741:(x,A,e)=>{"use strict";e.d(A,{$c:()=>D,h7:()=>C,t5:()=>I,e7:()=>_,KG:()=>O,q4:()=>p,_N:()=>f,sI:()=>V,Ap:()=>h,kq:()=>b,ik:()=>M,No:()=>L,fB:()=>K,Ye:()=>y,RI:()=>d,Fq:()=>R,oj:()=>v,qf:()=>P,Tg:()=>g});const t=30,n=300,s=300,i=30,l=10,o=30,a=1,r=c(S=>function(G){for(var H=arguments.length,U=new Array(H>1?H-1:0),F=1;F<H;F++)U[F-1]=arguments[F];if(!(typeof G!="string"&&typeof G!="number"))return S(G,...U)},"makeDeduction"),d=r(S=>S>i?S/5:void 0),u=r(S=>S>400?S/20:void 0),_=r(S=>S>1?S:void 0),v=r(S=>S>s?S/7.5:void 0),h=r(S=>S>1?S*10:void 0),f=r(S=>S>t?S/2:void 0),I=r(S=>S>o?S*1.25:void 0),p=r(S=>S>n?S/10:void 0),y=r(S=>S>o?S*1.5:void 0),g=r(S=>S>l?S*1.5:void 0),E=r(S=>S*2),M=r(S=>S&&S!=="udp"?40:void 0),T=r(S=>S&&S>500?S/100:void 0),D=r(S=>S>150?S/5:void 0),C=r(S=>S>15?S*2:void 0),m=r(S=>S>5?S:void 0),O=r(S=>S>20?S/5:void 0),P=r(S=>S>1?S*2.5:void 0),R=r(S=>!S||S==="none"?void 0:25),L=r(S=>S>0?S*20:void 0),V=r(S=>S>1?S*1.25:void 0),B=r(S=>S>300?S/10:void 0),K=r(S=>S&&S>o?S*1.5:void 0),b=r(S=>S>a?Math.round(S*7.5):void 0)},8634352961:(x,A,e)=>{"use strict";e.d(A,{Zr:()=>E,gR:()=>p,kB:()=>g,oB:()=>M,ws:()=>I,zT:()=>y});var t=e(7578217447),n=e(3852424459),s=e(796111729),i=e(9101533895),l=e(5795074931),o=e(3078252698);const a=(0,s.Wo)({label:"HUDDLE-RTM-FILTER"}),r=new Set(["file_shared","file_created","file_unshared","file_change"]),d=new Set(["sh_room_join","huddle_invite_cancel","update_thread_state","thread_subscribed","ended_huddle_update"]);let u=c(class{constructor(D){this.skippedCount=0,this.allowedCount=0,this.allowedTypes={},this.updateSubscribedChannels=()=>{const m=this.getState();this.mutedChannels=(0,n.m)(m);const O=(0,i.D5)(m);this.joinedChannelIds=new Set(O.map(P=>P.id)),a.info(`Huddle RTM filter initialized. XWS joined channel count: ${this.joinedChannelIds.size} - Muted channel count: ${this.mutedChannels?Object.keys(this.mutedChannels).length:0}`)},this.getTopAllowedTypes=()=>this.allowedCount?Object.entries(this.allowedTypes).sort((m,O)=>{let[,P]=m,[,R]=O;return R-P}).slice(0,5).map(m=>{let[O]=m;return O}).join(" "):"",this.getPercentSkipped=()=>Math.round(this.skippedCount/(this.skippedCount+this.allowedCount)*100),this.isChannelDm=m=>m.startsWith("D"),this.isChannelMuted=m=>!m||!this.mutedChannels?!1:!!this.mutedChannels[m],this.isChannelJoined=m=>!m||!this.joinedChannelIds?!1:!!this.joinedChannelIds.has(m),this.skipRtm=()=>(this.skippedCount+=1,!0),this.allowRtm=m=>{this.allowedCount+=1;const O=m.type==="message"?`${m.type}/${m.subtype}`:m.type;return this.allowedTypes[m.type]=(this.allowedTypes[O]||0)+1,a.debug(`Allowed RTM type: ${m.type} - subtype: ${m.subtype}`,m),!1},this.shouldSkipRtm=m=>{var O,P;if(d.has(m.type))return this.allowRtm(m);if(((O=m.user)===null||O===void 0?void 0:O.id)===this.currentUserId||m.user===this.currentUserId||m.user_id===this.currentUserId)return this.allowRtm(m);if(m.type==="channel_joined"||m.type==="mpim_joined"||m.type==="im_open"||m.type==="member_joined_channel"||m.type==="message"&&m.subtype==="channel_join"||m.type==="desktop_notification"&&m.is_channel_invite)return a.info("Received IM/MPDM/channel join RTM. Updating channel references",m),this.updateSubscribedChannels(),this.allowRtm(m);const R=m.channel||((P=m.item)===null||P===void 0?void 0:P.channel)||m.channel_id,L=(0,o.A)(R)?R:void 0;return L&&this.isChannelDm(L)?this.allowRtm(m):L&&this.isChannelMuted(L)?this.skipRtm():L&&!this.isChannelJoined(L)?this.skipRtm():t.Sj.has(m.type)&&!r.has(m.type)?this.skipRtm():m.type==="dnd_invalidated"?this.skipRtm():m.type==="bot_added"||m.type==="bot_changed"||m.type==="hermes_trigger_updated"||m.type==="apps_changed"||m.type==="apps_installed"||m.type==="apps_uninstalled"?this.skipRtm():this.allowRtm(m)};const C=D();this.getState=D,this.currentUserId=(0,l.WR)(C),this.updateSubscribedChannels()}},"HuddleRtmFilter"),_,v,h=0;const f=c(()=>{h=0,v=Date.now()},"clearRtmsSinceLastReport"),I=c(T=>{try{a.info("initializing Huddle RTM filter"),_||(_=new u(T),f())}catch(D){a.error("Error in initHuddleRtmFilter",D)}},"initHuddleRtmFilter"),p=c(()=>{a.info("destroying Huddle RTM filter"),_=void 0,f()},"destroyHuddleRtmFilter"),y=c(()=>{if(_)return _.getPercentSkipped()},"getRtmFilterPercentSkipped"),g=c(()=>{if(_)return _.getTopAllowedTypes()},"getRtmFilterTopAllowedTypes"),E=c(T=>{try{return h+=1,v||(v=Date.now()),_?_.shouldSkipRtm(T):!1}catch(D){return a.error("Error in shouldSkipRtmDuringHuddle",D),!1}},"shouldSkipRtmDuringHuddle"),M=c(()=>{try{if(!v||!h)return 0;const T=Date.now()-v,D=Math.round(h/(T/1e3));return f(),D}catch(T){return a.error("Error in getRtmsPerSecond",T),0}},"getRtmsPerSecond")},415910655:(x,A,e)=>{"use strict";e.d(A,{ZR:()=>i,jm:()=>n,s2:()=>s});let t;const n=c(l=>{t||(t={}),Object.assign(t,l)},"updateJoinTimingMetrics"),s=c(()=>t,"getJoinTimingMetrics"),i=c(()=>{t=void 0},"resetJoinTimingMetrics")},5470425448:(x,A,e)=>{"use strict";e.d(A,{lx:()=>r,zu:()=>a});var t;(function(d){d.UDP="udp",d.TCP="tcp"})(t||(t={}));var n;(function(d){d.RELAY="relay",d.DIRECT="direct"})(n||(n={}));var s;(function(d){d.UPLINK="uplink",d.DOWNLINK="downlink"})(s||(s={}));var i;(function(d){d.GOOD="good",d.FAIR="fair",d.BAD="bad",d.WORST="worst"})(i||(i={}));var l;(function(d){d.GOOD="good",d.FAIR="fair",d.BAD="bad",d.WORST="worst"})(l||(l={}));var o;(function(d){d[d.UPSTREAM=0]="UPSTREAM",d[d.DOWNSTREAM=1]="DOWNSTREAM"})(o||(o={}));var a;(function(d){d[d.AUDIO=0]="AUDIO",d[d.VIDEO=1]="VIDEO"})(a||(a={}));var r;(function(d){d.RtmMetrics="rtm-metrics",d.RenderTiming="render-timing",d.BluetoothDevices="bluetooth-devices",d.MemoryLeaks="memory-leaks",d.SelectedMediaRegion="selected-media-region",d.PreferredMediaRegion="preferred-media-region",d.VoiceFocusConfig="voice-focus-config",d.NetworkDisconnect="network-disconnect",d.CallId="call-id",d.ScreenshareContentType="screenshare-content-type",d.AppMetrics="app-metrics",d.NoAudio="no-audio",d.CameraResolution="max-camera-resolution",d.SetIsDebugApp="set-is-debug-app",d.TroubleshootingContactUsClicked="troubleshooting-contact-us-clicked",d.TroubleshootingEntryPoint="troubleshooting-entry-point",d.TroubleshootingExitHealthSnapshot="troubleshooting-exit-health-snapshot"})(r||(r={}))},5071086688:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6267571562);const n=new t.G},5403856613:(x,A,e)=>{"use strict";e.d(A,{U:()=>i,p:()=>o});var t=e(7091646278),n=e(2205899741);const s=20,i=80,l=60,o=c(a=>{const{audioDownstreamQualityScore:r,networkQualityScore:d,networkType:u,networkProtocol:_,networkRelayProtocol:v,networkAvailableOutgoingBitrate:h,networkJitterMs:f,audioDownstreamJitterBufferDelay:I,networkCurrentRoundTripTimeMs:p,mediaRegionSelected:y,mediaRegionPreferred:g,cpuUse:E,cpuUseRelative:M,cpuCompetitionScore:T,gpuUse:D,batteryIsUsing:C,selectedMicrophone:m,selectedCamera:O,selectedSpeakers:P,cameraIsBlocked:R,cameraIsAvailable:L,microphoneIsBlocked:V,microphoneIsAvailable:B,isMicrophoneBluetooth:K,isSpeakerBluetooth:b,isMicrophoneAndSpeakerOnSameDevice:S,isHardwareAccelerationEnabled:G,isDisconnected:H,noAudioInput:U,osIsThrottlingCpu:F,networkPacketLossPercent:Y,powerThrottlingActive:Z}=a;let ee;switch(!0){case d<=0:ee=t.bz.Bad;break;case d<=i:ee=t.bz.Warn;break;default:ee=t.bz.Good}return{metrics:{stable:{mediaRegionSelected:y,mediaRegionPreferred:g,selectedMicrophone:m,selectedCamera:O,selectedSpeakers:P},unstable:{cpuCompetitionScore:T,cpuUse:E,gpuUse:D,cpuUseRelative:M,audioQualityScore:r,jitterMs:f,audioDelayMs:I,roundTripTimeMs:p,packetLossPercent:Y,incomingBandwidth:h,networkQualityScore:d}},warnings:{stable:{isVpnEnabled:u==="vpn",isSuboptimalProtocol:!!(0,n.ik)(_)||!!(0,n.ik)(v),isMediaRegionSuboptimal:!!y&&!!g&&y!==g,isUsingBatteryPower:C,isMicrophoneBluetooth:K,isMicrophoneAndSpeakerOnSameDevice:S,isSpeakerBluetooth:b,isCameraProbablyIphone:/iphone/.test(O==null?void 0:O.toLowerCase()),isHardwareAccelerationDisabled:G===!1,isOSThrottlingCpu:!!F},unstable:{isCpuUsePoor:!!(0,n.$c)(E),isCpuUseRelativePoor:!!(0,n.h7)(M),isGpuUsePoor:!!(0,n.KG)(D),isJitterPoor:!!(0,n._N)(f),isRTTPoor:!!(0,n.oj)(p),isAudioDelayPoor:!!(0,n.q4)(I),isPacketLossPoor:!!(0,n.kq)(Y)}},alerts:{stable:{isCameraBlocked:R||!L,isMicrophoneBlocked:V||!B,isMicrophoneNotSendingAudio:!!U,isDisconnected:H,isPowerThrottlingActive:!!Z},unstable:{networkQualityHealth:ee,isNetworkQualityPoor:d<=i,isAudioQualityPoor:r<=s,isCpuCompetitionPoor:T<=l}}}},"getTroubleshootingMetricsFromTags")},6246464105:(x,A,e)=>{"use strict";e.d(A,{N5:()=>d,R1:()=>l,Y:()=>r});var t=e(6797417739),n=e(2825968873),s=e(5470425448),i=e(5071086688),l;(function(u){u.HuddlesSdk="huddles-sdk",u.ChimeChannelListener="chime-channel-listener",u.ChimeChannelBroadcaster="chime-channel-broadcaster",u.VoiceFocusDevice="voice-focus-device",u.VideoTransformDevice="video-transform-device",u.VideoFrameProcessor="video-frame-processor"})(l||(l={}));const o=new Map([[l.HuddlesSdk,t.Y.create({name:l.HuddlesSdk})],[l.ChimeChannelListener,t.Y.create({name:l.ChimeChannelListener})],[l.ChimeChannelBroadcaster,t.Y.create({name:l.ChimeChannelBroadcaster})],[l.VoiceFocusDevice,t.Y.create({name:l.VoiceFocusDevice})],[l.VideoTransformDevice,t.Y.create({name:l.VideoTransformDevice})],[l.VideoFrameProcessor,t.Y.create({name:l.VideoFrameProcessor})]]),a=(0,n.Jt)("HUDDLE-LEAK-MONITOR"),r=c(u=>{let{name:_,ref:v}=u;const h=o.get(_);if(!h)return;const f=h.getMetrics();if(f){const{numberOfObjects:I,numberOfExpiredObjects:p}=f,y=I-p;p>3&&(a.warn(`Detected ${p} memory leak(s) for ${_}${y?` (with another ${y} instances in memory)`:""}`),i.A.publish({type:s.lx.MemoryLeaks,update:{name:_,leakCount:p}}))}h.watch(v)},"monitorObjectForMemoryLeaks"),d=c(()=>{for(const[,u]of o)u.expectGCAll()},"detectMemoryLeaks")},8872167513:(x,A,e)=>{"use strict";e.d(A,{A:()=>wn});var t=e(3398586081),n=e(4724591729),s=e(796111729),i=e(3855029223),l=e(4798756512),o=e(9680914051);let a=c(class{initializeHuddleReconnectTracer(){var Je,X,_e;this.reconnectSpan=(Je=this.trace)===null||Je===void 0?void 0:Je.startSpan(o.xN),this.reconnectSuccessSpan=(X=this.trace)===null||X===void 0?void 0:X.startSpan(o.xx),this.reconnectFailureSpan=(_e=this.trace)===null||_e===void 0?void 0:_e.startSpan(o.cJ)}traceReconnectAttemptOutcome(Je){let{isSuccess:X}=Je;var _e;X?this.reconnectSuccessCount+=1:this.reconnectFailureCount+=1,(_e=this.logger)===null||_e===void 0||_e.info(`Registered huddle reconnect attempt outcome - isSuccess: ${X}`)}traceReconnectAttempt(){var Je;this.reconnectCount+=1,(Je=this.logger)===null||Je===void 0||Je.info("Counted huddle reconnect attempt")}report(){var Je,X,_e,ye,De;(Je=this.reconnectSpan)===null||Je===void 0||Je.addTags({metric_value:this.reconnectCount}).close(),(X=this.reconnectSuccessSpan)===null||X===void 0||X.addTags({metric_value:this.reconnectSuccessCount}).close(),(_e=this.reconnectFailureSpan)===null||_e===void 0||_e.addTags({metric_value:this.reconnectFailureCount}).close(),(ye=this.tracer)===null||ye===void 0||ye.reportSpans([this.reconnectSpan,this.reconnectSuccessSpan,this.reconnectFailureSpan]),(De=this.logger)===null||De===void 0||De.info("Reported reconnect attempt metric trace")}constructor({tracer:Je,trace:X,logger:_e}){this.reconnectCount=0,this.reconnectSuccessCount=0,this.reconnectFailureCount=0,this.tracer=Je,this.trace=X,this.logger=_e,this.initializeHuddleReconnectTracer()}},"HuddleReconnectTracer"),r=c(class{addTTIMetaTags(Je){let{entryPoint:X,preferredMediaRegion:_e,isPrejoin:ye,isCreate:De}=Je;var Ge;(Ge=this.trace)===null||Ge===void 0||Ge.addTags({entry_point:X,preferred_media_region:_e,is_prejoin:ye,is_create:De,success:!1})}createFetchCredentialsSpan(){var Je;this.fetchCredentialsSpan=(Je=this.trace)===null||Je===void 0?void 0:Je.startSpan(o.xl)}setCachedTag(Je){let{cached:X}=Je;var _e;(_e=this.trace)===null||_e===void 0||_e.addTags({cached:X})}closeFetchCredentialsSpan(){var Je;(Je=this.fetchCredentialsSpan)===null||Je===void 0||Je.close()}createConnectToMediaServiceSpan(){var Je;this.connectToMediaServiceSpan=(Je=this.trace)===null||Je===void 0?void 0:Je.startSpan(o.xA)}closeConnectToMediaServiceSpan(){var Je,X,_e,ye;(Je=this.connectToMediaServiceSpan)===null||Je===void 0||Je.close(),(X=this.trace)===null||X===void 0||X.addTags({success:!0}),(_e=this.tracer)===null||_e===void 0||_e.reportTrace(this.trace),this.traceReported=!0,(ye=this.logger)===null||ye===void 0||ye.info("Reported TTI metric trace")}getTTITraceId(){var Je;return(Je=this.trace)===null||Je===void 0?void 0:Je.getTraceId()}getFetchCredentialsSpanId(){var Je;return(Je=this.fetchCredentialsSpan)===null||Je===void 0?void 0:Je.getId()}setMediaRegionTag(Je){var X,_e;const ye=(X=this.trace)===null||X===void 0?void 0:X.getTags().preferred_media_region;(_e=this.trace)===null||_e===void 0||_e.addTags({media_region:Je,media_region_matches:Je===ye})}report(){var Je,X;if(!this.traceReported){var _e,ye;(_e=this.tracer)===null||_e===void 0||_e.reportTrace(this.trace),this.traceReported=!0,(ye=this.logger)===null||ye===void 0||ye.info("Reported TTI metric trace in final clean up")}(Je=this.tracer)===null||Je===void 0||Je.clearTrace(this.trace),(X=this.logger)===null||X===void 0||X.info("Cleaned up TTI metric trace")}constructor({teamId:Je,logger:X}){this.traceReported=!1,this.tracer=(0,i.E)({teamOrEnterpriseId:Je}),this.trace=this.tracer.createTrace({traceName:o.bQ,samplingOptions:{sampleRate:(0,n.Cu)()?1:.05,sampleType:l.tS.SESSION}}),this.logger=X}},"HuddleTTITracer");var d=e(7542104324),u=e(5470425448),_=e(9706240641),v=e(5016574668),h=e(1616072515);let f=c(class{recordAppMetrics(Je){var X=this;return(0,_.coroutine)(function*(){const _e=Date.now();if(_e-X.lastRecordedSpanTs<X.reportingInterval)return;X.logger.debug(`Adding new ${v.Sq}:${v.Kp} span`);const De=X.trace.startSpan(v.Kp),Ge=(0,h.tT)(Je),et=Object.keys(Ge).length;De.addTags(Ge),De.close(),X.logger.debug(`Added new ${v.Sq}:${v.Kp} span with ${et} tags`),X.getSpanCount()>v.jt&&X.report(),X.lastRecordedSpanTs=_e})()}constructor({teamId:Je,logger:X,callLogger:_e,enableMaxReportingFrequency:ye}){var De=this;this.traceReported=!1,this.lastRecordedSpanTs=0,this.getMetricsCollectionInterval=()=>(0,n.Cu)()||this.enableMaxReportingFrequency?v.yz:v.ZT,this.createNewTrace=()=>(this.trace=this.tracer.createTrace({traceName:v.Sq,tags:{__dataset:v.RN},samplingOptions:{sampleType:l.tS.ALWAYS}}),this.trace),this.getSpanCount=()=>{var Ge;const et=(Ge=this.trace)===null||Ge===void 0?void 0:Ge.getSpans();return et?Object.keys(et).length:0},this.report=function(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(Ge&&De.callLogger.debug(`Huddle ${De.callId} is ending. Reporting ${De.getSpanCount()} remaining spans`),!De.traceReported&&De.getSpanCount()>0){var et,bt;(et=De.tracer)===null||et===void 0||et.reportTrace(De.trace),(bt=De.tracer)===null||bt===void 0||bt.clearTrace(De.trace),De.logger.debug(`Cleared ${v.Sq}:${v.Kp} event trace`),Ge?De.traceReported=!0:De.createNewTrace()}else De.logger.debug(`Attempted to report ${v.Sq}:${v.Kp} trace but there was nothing to report`)},this.tracer=(0,i.E)({teamOrEnterpriseId:Je}),this.enableMaxReportingFrequency=!!ye,this.reportingInterval=this.getMetricsCollectionInterval(),this.createNewTrace(),this.logger=X,this.callLogger=_e}},"HuddlePerfTracer");const I=null;var p=e(4103274853),y=e(166097325),g=e(8478954380),E=e(5403856613);const M=10*1e3,T=30*1e3;class D{constructor(Je){this.logger=Je,this.currentUnstableAlerts={},this.currentAlerts={networkQualityHealth:[],isNetworkQualityPoor:[],isAudioQualityPoor:[],isCpuCompetitionPoor:[]},this.updateInterval=M,this.updateIntervalIncrements=0,this.maybeIncrementUpdateInterval=()=>{this.updateIntervalIncrements+=1,this.updateIntervalIncrements%3===0&&(this.updateInterval=Math.min(T,this.updateInterval+1e3))},this.getStableAlerts=(X,_e)=>{const ye=c(De=>{const Ge=X[De];let et=this.currentAlerts[De];const bt=Date.now();et.push({timestamp:bt,value:Ge}),et=et.filter(z=>{let{timestamp:te}=z;return bt-te<=T}),this.currentAlerts[De]=et,et=et.filter(z=>{let{timestamp:te}=z;return bt-te<=_e.interval});const sn=new Map;for(const z of et)sn.has(z.value)||sn.set(z.value,0),sn.set(z.value,sn.get(z.value)+1);const fn=Array.from(sn.entries());let[Sn,dt]=fn[0];for(const[z,te]of fn.slice(1))te>dt&&(dt=te,Sn=z);return fn.length?Sn:this.currentUnstableAlerts[De]},"nextAlert");return{isAudioQualityPoor:ye("isAudioQualityPoor"),isCpuCompetitionPoor:ye("isCpuCompetitionPoor"),isNetworkQualityPoor:ye("isNetworkQualityPoor"),networkQualityHealth:ye("networkQualityHealth")}},this.getStabilityConfig=()=>({interval:this.updateInterval}),this.getAlertUpdates=X=>{let{alerts:_e}=X;const ye=this.getStableAlerts(_e,this.getStabilityConfig()),De=!(0,y.A)(ye,this.currentUnstableAlerts);if(this.maybeIncrementUpdateInterval(),De)return this.currentUnstableAlerts=ye,this.logger.debug("Updated alerts and metrics will be dispatched to redux"),ye}}}c(D,"AlertUpdater");const C=null,m="https://slack.com/help/articles/115003538426-Troubleshoot-audio-and-video-issues-in-Slack",O={isMicrophoneBluetooth:"The user is using a Bluetooth microphone, which could cause audio delays, reduce audio quality, or cause audio and video to fall out of sync. If these problems occur, suggest they switch to a wired or built-in microphone.",isCameraProbablyIphone:'The user might be unknowingly using their iPhone camera, which could lead to issues like a black screen or missing video. To prevent this, they can disable the "Continuity Camera" feature on their device. Guide them to go to Settings > Camera > Continuity and turn off the option.',isVpnEnabled:`The user is connected via a VPN, which can increase latency or cause connectivity issues if the VPN isn't optimized for video conferencing. Suggest they disable the VPN or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${m}`,isSuboptimalProtocol:`The user's connection protocol is TLS, not TCP, which may be due to a VPN, proxy, or firewall not configured for video conferencing. Suggest they disable their VPN or proxy, or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${m}`,isHardwareAccelerationDisabled:"Hardware acceleration seems to be disabled on the user's device, which could degrade performance. Suggest they re-enable hardware acceleration in their Slack preferences. They can do this by going to Preferences > Advanced > Enable hardware acceleration.",isUsingBatteryPower:"The user's device is running on battery power, which could limit device performance and cause audio, video, or application lag. If they report such issues, suggest they connect their device to a power source.",isMediaRegionSuboptimal:"The user is in a different region from the Huddle host, potentially causing increased latency and instability. This geographical disparity can't be controlled by users but network stability and connectivity can be improved. Suggest that they move closer to their Wi-Fi router, switch to a wired connection if possible, limit other bandwidth-intensive activities on their computer or network, or try connecting with a different network.",isOSThrottlingCpu:"The operating system is throttling CPU to manage heat or conserve battery power, which could lead to degraded audio or video quality and/or a general sense that Slack is slow or unresponsive. This might manifest as video freezing frequently, audio cutting out frequently, or audio-video sync issues. In more extreme cases, it can even trigger disconnections from the Chime media server. To mitigate this, ensure the user's device is well-ventilated, that they avoid running unnecessary applications during the call, and, if they are on a laptop, they should connect it to a power source. Adjusting power settings to prefer maximum performance (even when battery is being used) can also help. For detailed steps, please refer to your device's power management settings."},L={...{isNetworkQualityPoor:"The user's network quality is poor, which can cause delays or degraded audio or video, drops in connectivity, and audio/video desynchronization. Guide them through improving network stability, for instance, moving closer to their Wi-Fi router, switching to a wired connection if possible, limiting other bandwidth-intensive activities, or trying to connect with a different network.",isCpuCompetitionPoor:"The user\u2019s device is experiencing high CPU usage, causing audio or video delays, connectivity drops, or desynchronization. Suggest they close unnecessary applications, tabs, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, and check if their hardware meets the recommended specifications."},...{isDisconnected:"The user is disconnected from the Huddle and can't send or receive audio or video. This might be due to network instability, incorrect configurations, hardware issues, or connectivity problems. Guide them through checking their network connection, suggest they limit other bandwidth-intensive activities, try connecting with a different network, move closer to their router, and suggest restarting the call.",isMicrophoneBlocked:"Slack can't access the user's microphone, possibly due to permission or settings issues. Verify that Slack has been granted permission to use the microphone, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Sound settings (on Windows) and ensuring that Slack is checked.",isMicrophoneNotSendingAudio:"The user's microphone is connected, but isn't sending any audio, possibly due to another application using it, being muted, or system-level settings. Suggest they unplug and replug their device, restart Slack, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, close unnecessary applications or tabs, and check for conflicting settings.",isCameraBlocked:"Slack can't access the user's camera, likely due to settings or permissions issues. Verify that Slack has permission to use their camera, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Camera Privacy Settings (on Windows) and ensuring that Slack is checked."},...O},V={isNetworkQualityPoor:"networkQualityScoreReasons",isCpuCompetitionPoor:"cpuCompetitionScoreReasons"};class B{constructor({callLogger:Je,logger:X,dispatch:_e}){this.isDev=(0,n.Cu)(),this.isJsPath=(0,n.b3)(),this.loggedHuddleConfigInfo=!1,this.lastProcessedTagsTs=null,this.lastProcessedStats=null,this.lastUnstableMetricsUpdateTs=0,this.lastLoggedTagsTs=Date.now(),this.logHuddleConfigInfo=ye=>{if(this.loggedHuddleConfigInfo||!this.lastProcessedTagsTs)return;const{isIA4Prod:De,isUnifiedGrid:Ge,visibleSidebarItemCount:et,networkType:bt,networkProtocol:sn,networkRelayProtocol:fn,isHardwareAccelerationEnabled:Sn,batteryIsUsing:dt}=ye;this.callLogger.info(`Initial Huddle Config: Network Type=${bt}; Network Protocol=${sn}; Network Relay Protocol=${fn}; IA4=${De}; Unified Grid=${Ge}; Hardware Acceleration=${Sn??"unknown (browser)"}; Using Battery Power=${dt}; Sidebar Size=${et};`),this.loggedHuddleConfigInfo=!0},this.logWarningAndAlertUpdates=(ye,De)=>{Object.entries(ye).forEach(Ge=>{let[et,bt]=Ge;if(bt&&this.isRelevantWarning(et,ye)&&L[et]){let sn;if(et in V){const Sn=V[et];Sn&&(De!=null&&De[Sn])&&(sn=De[Sn])}this.logger.warn(`\u{1F6A8} WARNING! ${L[et]}${sn?` reasons: (${sn})`:""}`)}})},this.isRelevantWarning=(ye,De)=>ye==="isNetworkQualityPoor"||ye==="isCpuCompetitionPoor"?"isAudioQualityPoor"in De&&!!De.isAudioQualityPoor:!0,this.logTags=ye=>{const De=Date.now();this.isJsPath||this.isDev?this.logger.info(`Recorded ${v.Sq}:${v.Kp} event span tags`,ye):De-this.lastLoggedTagsTs>10*1e3&&(this.logger.debug(`Recorded ${v.Sq}:${v.Kp} event span tags`,ye),this.lastLoggedTagsTs=De)},this.getStatsDiff=ye=>{const De=this.lastProcessedStats;return(0,p.A)(ye,(Ge,et)=>{var bt,sn;return{stable:De?!(0,y.A)((bt=De[et])===null||bt===void 0?void 0:bt.stable,Ge==null?void 0:Ge.stable):null,unstable:De?!(0,y.A)((sn=De[et])===null||sn===void 0?void 0:sn.unstable,Ge==null?void 0:Ge.unstable):null}})},this.maybeUpdateTroubleshootingPanel=ye=>{var De,Ge,et,bt,sn,fn,Sn,dt,z;const te=Date.now(),ve=(0,E.p)(ye),Oe=this.getStatsDiff(ve);if(this.lastProcessedStats=ve,(!((De=Oe.alerts)===null||De===void 0)&&De.stable||((Ge=Oe.alerts)===null||Ge===void 0?void 0:Ge.stable)===null)&&ve.alerts.stable&&(this.dispatch((0,g._6)(ve.alerts.stable)),Oe.alerts.stable&&this.logWarningAndAlertUpdates(ve.alerts.stable)),(!((et=Oe.metrics)===null||et===void 0)&&et.stable||((bt=Oe.metrics)===null||bt===void 0?void 0:bt.stable)===null)&&ve.metrics.stable&&this.dispatch((0,g.qO)(ve.metrics.stable)),(!((sn=Oe.warnings)===null||sn===void 0)&&sn.stable||((fn=Oe.warnings)===null||fn===void 0?void 0:fn.stable)===null)&&ve.warnings.stable&&(this.dispatch((0,g.it)(ve.warnings.stable)),this.logWarningAndAlertUpdates(ve.warnings.stable)),!((Sn=ve.alerts)===null||Sn===void 0)&&Sn.unstable){const $e=this.alertUpdater.getAlertUpdates({alerts:ve.alerts.unstable});$e&&(this.dispatch((0,g.Li)($e)),this.logWarningAndAlertUpdates($e,ye))}ve.metrics.unstable&&ve.warnings.unstable&&(!this.lastUnstableMetricsUpdateTs||te-this.lastUnstableMetricsUpdateTs>1e4&&(!((dt=Oe.warnings)===null||dt===void 0)&&dt.unstable||!((z=Oe.metrics)===null||z===void 0)&&z.unstable))&&(this.dispatch((0,g.bW)({metrics:ve.metrics.unstable,warnings:ve.warnings.unstable})),this.lastUnstableMetricsUpdateTs=te)},this.processTags=ye=>{this.maybeUpdateTroubleshootingPanel(ye),this.logHuddleConfigInfo(ye),this.logTags(ye),this.lastProcessedTagsTs=Date.now()},this.callLogger=Je,this.logger=X,this.dispatch=_e,this.alertUpdater=new D(X),this.callLogger.info("huddle perf observer initialized")}}c(B,"HuddlePerfObserver");const K=null,b=B;var S=e(2825968873),G=e(5238395322),H=e(2208015175),U=e(9137897911),F=e(9113979368),Y=e(8872403767),Z=e(6313685253),ee=e(1687672245),j=e(6696292586);const ge=c(It=>{if((0,F.A)(It))return;const Je=(0,Z.A)(It,(X,_e)=>(0,ee.A)(X,_e,(ye,De)=>(ye||0)+De),{});return(0,p.A)(Je,X=>X/It.length)},"calculateIncomingVideoStatsAverages"),ne=c(It=>{if(typeof It=="string"||typeof It=="boolean")return It;if(!isNaN(It)&&!(typeof It>"u"||It===null))return Math.round(It)},"getScrubbedMetricValue"),ue=c(It=>{let{clientMetricReport:Je,direction:X}=It;const _e=Object.keys(Je.streamMetricReports);let ye;return _e.forEach(De=>{const Ge=Number(De),et=Je.streamMetricReports[Ge];et.direction===X&&et.mediaType===u.zu.AUDIO&&(ye=Ge)}),ye},"getAudioSsrcId"),he=c((It,Je,X,_e,ye)=>{const De=It==null?void 0:It.getMetricMap(Je,X)[_e];if(De!=null&&De.transform)return De.transform(_e,ye)},"getNonObservedMetric"),be=c((It,Je)=>{const X=Je?It.replace(Je,""):It;return X.charAt(0).toUpperCase()+X.slice(1)},"removeSubstringAndCapitalize"),xe=c(function(It){let Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!(0,j.A)(Je)||!(0,j.A)(It))return 0;const _e=isNaN(X)?0:X;if(It===Je||It>Je)return 0;const De=(Je-It)/Je*100-_e;return Math.round(De)},"calculateNonNetworkPacketLoss");var Le=e(5057176955),fe;(function(It){It[It.UPSTREAM=0]="UPSTREAM",It[It.DOWNSTREAM=1]="DOWNSTREAM"})(fe||(fe={}));var se;(function(It){It[It.AUDIO=0]="AUDIO",It[It.VIDEO=1]="VIDEO"})(se||(se={}));let Q,k;const N=c(function(It,Je,X){let _e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It||!Je)return;const ye=(Je.timestamp-It.timestamp)/1e3,De=Je[X]-It[X];return _e?De/ye:De},"getNextStat"),$=c(It=>{let{clientMetricReport:Je,selfAttendeeId:X}=It;const _e=Je.getObservableVideoMetrics();if(!_e||!X)return;let ye=0;const De={},Ge=[];return(0,H.A)(_e,(et,bt)=>{var sn;const fn=Number((sn=Object.keys(et))===null||sn===void 0?void 0:sn[0]);if(!fn)return;const Sn=et[fn];if(bt.endsWith("#content")){var dt,z;ye+=1,(0,H.A)(Sn,(Xe,Nt)=>{De[(0,U.A)(`screenshare_${(0,h._3)(Nt)}${ye>1?`${ye}_`:""}`)]=ne(Xe)}),Object.assign(De,{screenshareVideoDownstreamDecoderImplementation:(dt=Je.streamMetricReports[fn])===null||dt===void 0||(z=dt.currentStringMetrics)===null||z===void 0?void 0:z.decoderImplementation,screenshareVideoDownstreamFramesReceivedPerSecond:Je.countPerSecond("framesReceived",fn),screenshareVideoDownstreamFramesDroppedPerSecond:he(Je,se.VIDEO,fe.DOWNSTREAM,"framesDropped",fn),screenshareVideoDownstreamFreezeCount:he(Je,se.VIDEO,fe.DOWNSTREAM,"freezeCount",fn),screenshareVideoDownstreamTotalDecodeTime:he(Je,se.VIDEO,fe.DOWNSTREAM,"totalDecodeTime",fn),screenshareVideoDownstreamTotalFreezesDuration:he(Je,se.VIDEO,fe.DOWNSTREAM,"totalFreezesDuration",fn)});return}if(X===bt){if(Sn.videoUpstreamBitrate!==0){var te,ve;(0,H.A)(Sn,(Xe,Nt)=>{De[`self${be(Nt,"Upstream")}`]=ne(Xe)}),Object.assign(De,{selfVideoHardwareEncoder:he(Je,se.VIDEO,fe.UPSTREAM,"encoderImplementation",fn),selfVideoEncoderImplementation:(te=Je.streamMetricReports[fn])===null||te===void 0||(ve=te.currentStringMetrics)===null||ve===void 0?void 0:ve.encoderImplementation,selfVideoTotalEncodeTime:he(Je,se.VIDEO,fe.UPSTREAM,"totalEncodeTime",fn)})}}else{var Oe,$e;const Xe=he(Je,se.VIDEO,fe.DOWNSTREAM,"totalDecodeTime",fn);if(Xe){var at;De.videoDownstreamTotalDecodeTime=((at=De.videoDownstreamTotalDecodeTime)!==null&&at!==void 0?at:0)+Xe}Object.assign(De,{videoDownstreamDecoderImplementation:(Oe=Je.streamMetricReports[fn])===null||Oe===void 0||($e=Oe.currentStringMetrics)===null||$e===void 0?void 0:$e.decoderImplementation}),Ge.push({...Sn,videoDownstreamFramesReceivedPerSecond:Je.countPerSecond("framesReceived",fn),videoDownstreamFramesDroppedPerSecond:he(Je,se.VIDEO,fe.DOWNSTREAM,"framesDropped",fn)})}}),(0,F.A)(Ge)||Object.assign(De,ge(Ge)),De},"getVideoMetricTags"),W=["nackCountReceivedPerSecond","currentRoundTripTimeMs","availableOutgoingBitrate","availableIncomingBitrate"],q=c(It=>{let{clientMetricReport:Je}=It;const{audioDecoderLoss:X,audioPacketLossPercent:_e,audioPacketsReceived:ye,audioPacketsReceivedFractionLoss:De,audioPacketsSent:Ge,audioSpeakerDelayMs:et,audioDownstreamJitterMs:bt,videoUpstreamBitrate:sn,videoPacketSentPerSecond:fn,currentRoundTripTimeMs:Sn,availableIncomingBitrate:dt,availableOutgoingBitrate:z,nackCountReceivedPerSecond:te,audioUpstreamRoundTripTimeMs:ve,audioUpstreamJitterMs:Oe}=Je.getObservableMetrics(),$e=50,at=xe(ye,$e,De),Xe=xe(Ge,$e,_e),Nt={audioDownstreamDecoderLoss:X,audioUpstreamPacketLossPercent:_e,audioDownstreamPacketsReceived:ye,audioDownstreamPacketLossPercent:De,audioDownstreamJitterMs:bt,audioUpstreamPacketsSent:Ge,audioDownstreamNonNetworkPacketLossPercent:at,audioUpstreamNonNetworkPacketLossPercent:Xe,audioDownstreamJitterBufferDelay:et,selfVideoBitrate:sn,selfVideoPacketsSentPerSecond:fn,audioUpstreamRoundTripTimeMs:ve,audioUpstreamJitterMs:Oe,networkCurrentRoundTripTimeMs:Sn,networkAvailableIncomingBitrate:dt,networkAvailableOutgoingBitrate:z,networkNackCountReceivedPerSecond:te},$t=(0,Y.A)(Nt,(de,we)=>W.indexOf(we)>-1?(0,U.A)(`network_${we}`):we),xn={networkSocketPacketsDiscardedOnSend:Je.globalMetricReport.currentMetrics.packetsDiscardedOnSend},Jn=ue({clientMetricReport:Je,direction:fe.DOWNSTREAM});let $n;if(Jn){const de=he(Je,se.AUDIO,fe.DOWNSTREAM,"concealedSamples",Jn);$n={audioDownstreamTotalSamplesReceived:he(Je,se.AUDIO,fe.DOWNSTREAM,"totalSamplesReceived",Jn),audioDownstreamConcealedSamples:de}}return(0,p.A)({...$t,...xn,...$n},de=>ne(de))},"getAudioMetricTags"),re=c(It=>{const Je={},X=[];let _e;if(!It)return Q=void 0,Je;It.forEach(De=>{De.type==="local-candidate"&&X.push(De),De.type==="media-source"&&De.kind==="audio"&&(Je.audioUpstreamTotalSamplesDuration=De.totalSamplesDuration,Je.audioUpstreamAudioLevel=De.audioLevel,Je.audioUpstreamTotalAudioEnergy=De.totalAudioEnergy),De.type==="candidate-pair"&&De.state==="succeeded"&&De.nominated&&De.localCandidateId&&(_e=De.localCandidateId,Je.networkBytesSent=De.bytesSent,Je.networkBytesReceived=De.bytesReceived,Je.networkBytesDiscardedOnSend=De.bytesDiscardedOnSend),De.type==="inbound-rtp"&&De.kind==="audio"&&(Je.audioDownstreamLevel=De.audioLevel),De.type==="outbound-rtp"&&De.kind==="video"&&(Je.selfVideoQualityLimitationDurations=De.qualityLimitationDurations&&(0,Le.Zf)(De.qualityLimitationDurations),Je.selfVideoOutboundFramesPerSecond=De.framesPerSecond,Je.selfVideoPacketSendDelay=N(Q,De,"totalPacketSendDelay"),Q=De),De.type==="media-source"&&De.kind==="video"&&(Je.selfVideoSourceFramesPerSecond=De.framesPerSecond)});const ye=X.find(De=>De.id===_e);if(ye){const{networkType:De,protocol:Ge,relayProtocol:et}=ye;Je.networkType=De,Je.networkProtocol=Ge,Je.networkRelayProtocol=et}return Je},"getRtcStatsTags"),le=c(It=>{if(!It){k=void 0;return}const Je={};return It.forEach(X=>{if(X.type==="remote-inbound-rtp"&&X.kind==="video"){const{fractionLost:_e,jitter:ye,roundTripTime:De}=X;Object.assign(Je,{screenshareUpstreamJitter:ye*1e3,screenshareUpstreamPacketLossPercent:_e*100,screenshareUpstreamRoundTripTime:De*1e3})}if(X.type==="outbound-rtp"&&X.kind==="video"){const{frameHeight:_e,frameWidth:ye,framesPerSecond:De,targetBitrate:Ge,encoderImplementation:et,scalabilityMode:bt,powerEfficientEncoder:sn}=X;if(Object.assign(Je,{screenshareUpstreamTargetBitrate:Ge,screenshareUpstreamFrameWidth:ye,screenshareUpstreamFrameHeight:_e,screenshareUpstreamFramesPerSecond:De,screenshareUpstreamEncoderImplementation:et,screenshareUpstreamPowerEfficientEncoder:sn,screenshareUpstreamScalabilityMode:bt}),!k){k=X;return}const fn=N(k,X,"totalEncodeTime",!0),Sn=fn&&fn*1e3;Object.assign(Je,{screenshareUpstreamPacketsSent:N(k,X,"packetsSent"),screenshareUpstreamPacketSendDelay:N(k,X,"totalPacketSendDelay"),screenshareUpstreamKeyFramesEncoded:N(k,X,"keyFramesEncoded"),screenshareUpstreamBitrate:N(k,X,"bytesSent",!0),screenshareUpstreamTotalEncodeTime:Sn}),k=X}}),(0,p.A)(Je,X=>ne(X))},"getScreenshareRtcStatsTags"),Ae=c(It=>{let{clientMetricReport:Je,selfAttendeeId:X}=It;const _e=$({clientMetricReport:Je,selfAttendeeId:X}),ye=q({clientMetricReport:Je});return{..._e,...ye}},"getClientMetricReportTags"),Te={getVideoMetricTags:$,getAudioMetricTags:q,getClientMetricReportTags:Ae,getScreenshareRtcStatsTags:le,getRtcStatsTags:re};var Ne=e(4404059078),pe=e(6890312250),Ee=e(2205899741);const oe=0,ce=100;function ke(It){return It.endsWith(",")?It.slice(0,-1):It}c(ke,"trimComma");const Ce=c(()=>{let It=100,Je="";return{deductFromScoreForReason:(X,_e)=>{X&&(It-=X,Je+=`${_e},`)},getScore:()=>(0,Ne.A)(It,oe,ce),getReasons:()=>ke(Je)}},"trackScoreAndReasons"),Me=c(It=>{const{deductFromScoreForReason:Je,getScore:X,getReasons:_e}=Ce(),{screenshareUpstreamBitrate:ye,screenshareUpstreamPacketLossPercent:De,screenshareUpstreamJitter:Ge,screenshareUpstreamRoundTripTime:et,screenshareUpstreamFramesPerSecond:bt,screenshareUpstreamPacketSendDelay:sn,screenshareUpstreamQualityLimitationReason:fn}=It;if(ye)return Je((0,Ee.Tg)(De),"screenshareUpstreamPacketLossPercent"),Je((0,Ee._N)(Ge),"screenshareUpstreamJitter"),Je((0,Ee.oj)(et),"screenshareUpstreamRoundTripTime"),Je((0,Ee.RI)(sn),"screenshareUpstreamPacketSendDelay"),Je((0,Ee.qf)(v.w4-bt),"screenshareUpstreamFramesPerSecond"),Je((0,Ee.Fq)(fn),"screenshareUpstreamQualityLimitationReason"),{screenshareUpstreamQualityScore:X(),screenshareUpstreamQualityScoreReasons:_e()}},"getScreenshareUpstreamQualityScore"),Se=c(It=>{const{selfVideoPacketLossPercent:Je,selfVideoFrameHeight:X,selfVideoFrameWidth:_e,selfVideoRoundTripTime:ye,selfVideoJitterMs:De,selfVideoFramesEncodedPerSecond:Ge,isSelfVideoEnabled:et}=It;if(!et||!_e)return;const{deductFromScoreForReason:bt,getScore:sn,getReasons:fn}=Ce();bt((0,Ee.Tg)(Je),"selfVideoPacketLossPercent");const Sn=X*_e;return bt((0,Ee.e7)(100-Sn/v.An*100),"selfVideoFrameHeight,selfVideoFrameWidth"),bt((0,Ee._N)(De),"selfVideoJitterMs"),bt((0,Ee.oj)(ye),"selfVideoRoundTripTime"),bt((0,Ee.qf)(v.tz-Ge),"selfVideoFramesEncodedPerSecond"),{selfVideoQualityScore:sn(),selfVideoQualityScoreReasons:fn()}},"getSelfVideoQualityScore"),Ue=c(It=>{const{videoDownstreamPacketLossPercent:Je,videoDownstreamFramesDecodedPerSecond:X,videoDownstreamFrameHeight:_e,videoDownstreamFrameWidth:ye,videoDownstreamJitterMs:De,videoDownstreamDelayMs:Ge}=It;if(!ye)return;const{deductFromScoreForReason:et,getScore:bt,getReasons:sn}=Ce();et((0,Ee.Tg)(Je),"videoDownstreamPacketLossPercent");const fn=_e*ye;return et((0,Ee.e7)(v.An/fn),"videoDownstreamFrameHeight,videoDownstreamFrameWidth"),et((0,Ee.q4)(Ge),"videoDownstreamDelayMs"),et((0,Ee._N)(De),"videoDownstreamJitterMs"),et((0,Ee.qf)(v.tz-X),"videoDownstreamFramesDecodedPerSecond"),{videoDownstreamQualityScore:bt(),videoDownstreamQualityScoreReasons:sn()}},"getVideoDownstreamQualityScore"),He=c(function(It){let Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{deductFromScoreForReason:X,getScore:_e,getReasons:ye}=Ce();if(Je){const{screenshareVideoDownstreamPacketLossPercent2:sn,screenshareVideoDownstreamJitterMs2:fn,screenshareVideoDownstreamDelayMs2:Sn,screenshareVideoDownstreamFrameHeight2:dt}=It;return dt?(X((0,Ee.Tg)(sn),"screenshareVideoDownstreamPacketLossPercent2"),X((0,Ee._N)(fn),"screenshareVideoDownstreamJitterMs2"),X((0,Ee.q4)(Sn),"screenshareVideoDownstreamDelayMs2"),{screenshareVideoDownstreamQualityScore2:_e(),screenshareVideoDownstreamQualityScoreReasons2:ye()}):void 0}const{screenshareVideoDownstreamPacketLossPercent:De,screenshareVideoDownstreamJitterMs:Ge,screenshareVideoDownstreamDelayMs:et,screenshareVideoDownstreamFrameHeight:bt}=It;if(bt)return X((0,Ee.Tg)(De),"screenshareVideoDownstreamPacketLossPercent"),X((0,Ee._N)(Ge),"screenshareVideoDownstreamJitterMs"),X((0,Ee.q4)(et),"screenshareVideoDownstreamDelayMs"),{screenshareVideoDownstreamQualityScore:_e(),screenshareVideoDownstreamQualityScoreReasons:ye()}},"getScreenshareDownstreamQualityScore"),Ye=c(It=>{const{audioUpstreamPacketLossPercent:Je,audioUpstreamRoundTripTimeMs:X,audioUpstreamJitterMs:_e,audioUpstreamNonNetworkPacketLossPercent:ye}=It;if(!X)return;const{deductFromScoreForReason:De,getScore:Ge,getReasons:et}=Ce();return De((0,Ee.Ye)(Je),"audioUpstreamPacketLossPercent"),De((0,Ee.oj)(X),"audioUpstreamRoundTripTimeMs"),De((0,Ee._N)(_e),"audioUpstreamJitterMs"),De((0,Ee.fB)(ye),"audioUpstreamNonNetworkPacketLossPercent"),{audioUpstreamQualityScore:Ge(),audioUpstreamQualityScoreReasons:et()}},"getAudioUpstreamQualityScore"),J=c(It=>{const Je={};return It.screenshareVideoDownstreamFrameHeight2&&Object.assign(Je,He(It,!0)),{...He(It),...Je}},"getScreenshareDownstreamQualityScores"),ae=c(It=>{const{cpuUse:Je,gpuUse:X,cpuUseRelative:_e,longTasksPercentage:ye}=It,{deductFromScoreForReason:De,getScore:Ge,getReasons:et}=Ce();return De((0,Ee.sI)(ye),"longTasksPercentage"),De((0,Ee.$c)(Je),"cpuUse"),De((0,Ee.KG)(X),"gpuUse"),De((0,Ee.h7)(_e),"cpuUseRelative"),{cpuCompetitionScore:Ge(),cpuCompetitionScoreReasons:et()}},"getCpuCompetitionScoreTags"),Ve=c(function(){for(var It=arguments.length,Je=new Array(It),X=0;X<It;X++)Je[X]=arguments[X];const _e=Je.filter(j.A);return _e.length?Math.round((0,pe.A)(_e)):0},"getMetricAverage"),Be=c(It=>{const{networkCurrentRoundTripTimeMs:Je,networkNackCountReceivedPerSecond:X,networkSocketPacketsDiscardedOnSend:_e,networkProtocol:ye,networkRelayProtocol:De,audioDownstreamJitterMs:Ge,audioDownstreamPacketLossPercent:et,audioUpstreamPacketLossPercent:bt,audioUpstreamJitterMs:sn,videoDownstreamPacketLossPercent:fn,screenshareDownstreamPacketLossPercent:Sn,screenshareUpstreamPacketLossPercent:dt,selfVideoPacketLossPercent:z}=It,{deductFromScoreForReason:te,getScore:ve,getReasons:Oe}=Ce();te((0,Ee.ik)(ye),"networkProtocol"),te((0,Ee.ik)(De),"networkRelayProtocol"),te((0,Ee.No)(_e),"networkSocketPacketsDiscardedOnSend"),te((0,Ee.oj)(Je),"networkCurrentRoundTripTimeMs");const $e=Ve(Ge,sn);te((0,Ee._N)($e),"networkJitterMs"),te((0,Ee.Ap)(X),"networkNackCountReceivedPerSecond");const at=Ve(et,fn,Sn,bt,z,dt);return te((0,Ee.kq)(at),"networkPacketLossPercent"),{networkJitterMs:$e,networkPacketLossPercent:at,networkQualityScore:ve(),networkQualityScoreReasons:Oe()}},"getNetworkQualityScoreTags"),Ke=c(It=>{const{audioDownstreamDecoderLoss:Je,audioDownstreamJitterBufferDelay:X,audioDownstreamPacketLossPercent:_e}=It,{deductFromScoreForReason:ye,getScore:De,getReasons:Ge}=Ce();return ye((0,Ee.t5)(Je),"audioDownstreamDecoderLoss"),ye((0,Ee.q4)(X),"audioDownstreamJitterBufferDelay"),ye((0,Ee.Ye)(_e),"audioDownstreamPacketLossPercent"),{audioDownstreamQualityScore:De(),audioDownstreamQualityScoreReasons:Ge()}},"getAudioDownstreamQualityTags"),Fe=c(It=>({...Ke(It),...Be(It),...Ye(It),...Se(It),...J(It),...Me(It),...ae(It),...Ue(It),qualityScoringVersion:v.Nb}),"getQualityScoreTags"),Ie=c((It,Je)=>{let{type:X,update:_e}=It;switch(X){case u.lx.BluetoothDevices:case u.lx.PreferredMediaRegion:case u.lx.CameraResolution:case u.lx.CallId:case u.lx.ScreenshareContentType:Object.assign(Je.sharedTags,_e);break;case u.lx.MemoryLeaks:{const ye=Je.sharedTags.memoryLeakCount;Object.assign(Je.sharedTags,{type:"shared",tags:{[`memoryLeaks-${_e.name}`]:_e.leakCount,memoryLeakCount:ye?ye+_e.leakCount:_e.leakCount}});break}case u.lx.SelectedMediaRegion:{const{mediaRegionPreferred:ye}=Je.sharedTags,De=ye&&_e.mediaRegionSelected?ye===_e.mediaRegionSelected:!0;Object.assign(Je.sharedTags,{mediaRegionSelected:_e.mediaRegionSelected,mediaRegionMatchesPreference:De});break}case u.lx.VoiceFocusConfig:Object.assign(Je.sharedTags,{vfSimdSupported:_e.model.simd,vfModelVariant:_e.model.variant,vfSupported:_e.supported});break;case u.lx.NetworkDisconnect:_e.peerId==="self"&&Object.assign(Je.transientTags,{selfDisconnectCount:(Je.transientTags.selfDisconnectCount||0)+1});break;case u.lx.NoAudio:{const ye=_e.direction==="send"?{noAudioInput:_e.noAudio}:{noAudioOutput:_e.noAudio};Object.assign(Je.sharedTags,ye);break}case u.lx.SetIsDebugApp:Object.assign(Je.sharedTags,{isDebugApp:!0});break;default:{(0,S.tZ)("HUDDLES-PERF").error(new Error(`Unexpected type: ${X}`));break}}},"updateState"),ze=null;var qe=e(6267571562);const st=(0,s.Wo)({label:"COMPUTE-PRESSURE"}),ut={nominal:1,fair:2,serious:3,critical:4};class tt{constructor(){this.defaultSampleRate=.5,this.pubSub=new qe.G,this.isObserving=!1,this.currentLevel=null;var Je=this;this.startObserving=(0,_.coroutine)(function*(){if(!Je.isObserving){try{var _e;Je.isObserving=!0,yield(_e=Je.pressureObserver)===null||_e===void 0?void 0:_e.observe("cpu")}catch(ye){Je.isObserving=!1,st.error("An error occurred while attempting to observe compute pressure",ye)}st.info("Observing compute pressure")}}),this.getPressureLevelFromRecord=_e=>_e?ut[_e.state]:void 0,this.pressureObserverCallback=_e=>{const ye=_e.pop();if(!ye)return;const De=this.getPressureLevelFromRecord(ye);De&&(this.currentLevel=De,De===1?st.debug(`Compute pressure updated to ${ye.state} (${De} of 4)`):st.warn(`Compute pressure updated to ${ye.state} (${De} of 4)`),this.pubSub.publish(De))};var X=this;this.subscribe=function(){var _e=(0,_.coroutine)(function*(ye){X.pubSub.subscribe(ye),yield X.startObserving()});return function(ye){return _e.apply(this,arguments)}}(),this.unsubscribe=_e=>{if(this.pubSub.unsubscribe(_e),!this.pubSub.subscriberCount)try{var ye;(ye=this.pressureObserver)===null||ye===void 0||ye.disconnect(),st.debug("No longer observing compute pressure.")}catch(De){st.error("An error occurred attempted to disconnect from the compute pressure observer",De)}},this.getCurrentLevel=()=>{if(this.currentLevel)return this.currentLevel;let _e;try{var ye;_e=(ye=this.pressureObserver)===null||ye===void 0?void 0:ye.takeRecords()}catch(Ge){st.error("An error occurred attempting to get latest compute pressure reports",Ge)}const De=_e?this.getPressureLevelFromRecord(_e.pop()):void 0;return De&&(this.currentLevel=De),De},st.info("Compute Pressure API is supported. Initializing pressure observer.");try{this.pressureObserver=new PressureObserver(this.pressureObserverCallback,{sampleRate:this.defaultSampleRate})}catch(_e){st.error("An error occurred creating a new instance of the PressureObserver",_e)}if(!this.pressureObserver){st.error("Compute pressure observer not created, though PressureObserver API should be supported");return}this.startObserving()}}c(tt,"ComputePressureObserver"),tt.isSupported=()=>"PressureObserver"in globalThis;let _t;const yt=c(()=>{if(_t)return _t;if(!tt.isSupported()){st.info("Compute Pressure API is not supported.");return}try{_t=new tt}catch(It){st.error("An error occurred while attempting to create compute pressure observer",It);return}return _t},"getComputePressureObserver"),Kt=null,Qt=null,Jt=yt,Gt={longTasksPercentage:0,longTasksPeakDuration:0,longTasksCount:0,longTasksTotalDuration:0};let wt=c(class{initializeReport(){this.report={...Gt},this.lastReportTime=performance.now()}isLongTaskTimingSupported(){return typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")}start(){this.observer||!this.isSupported||(this.observer=new PerformanceObserver(this.onReceiveLongTaskList),this.observer.observe({entryTypes:["longtask"]}),this.observer.takeRecords())}stop(){this.observer&&(this.observer.disconnect(),this.observer=null)}getReportSinceLastCall(){if(!this.observer||!this.isSupported)return;const X=performance.now()-this.lastReportTime;this.report.longTasksCount>0&&(this.report.longTasksPercentage=Math.round(this.report.longTasksTotalDuration/X*100));const _e={...this.report};return this.initializeReport(),_e}constructor(){this.report={...Gt},this.lastReportTime=performance.now(),this.observer=null,this.onReceiveLongTaskList=Je=>{const X=Je.getEntries();let _e=0,ye=0;X.forEach(De=>{const Ge=De.duration;_e+=Ge,Ge>ye&&(ye=Ge)}),this.report.longTasksTotalDuration+=_e,this.report.longTasksCount+=X.length,ye>this.report.longTasksPeakDuration&&(this.report.longTasksPeakDuration=ye)},this.isSupported=this.isLongTaskTimingSupported()}},"LongTaskObserver");const Bt=null,Wt=wt;let Tn=0;const Ot={traceName:v.Sq},Ft="HUDDLES-PERF",rn={troubleshootingEntryPoint:null,troubleshootingContactUsClicked:!1};let ln=c(class{constructor(){var Je;this.callLogger=(0,S.tZ)(Ft),this.logger=(0,s.Wo)({label:Ft}),this.sharedTags=Ot,this.transientTags={},this.renderTimings=[],this.rtmProcessingTimings=[],this.troubleshootingTags={...rn},this.lastAppMetricsRecordingTs=Date.now(),this.currentTags={},this.computePressure=null,this.longTaskObserver=new Wt,this.initSharedTags=()=>{Tn+=1,this.updateSharedTags({huddlesCountSinceRefresh:Tn})},this.initComputePressureObserver=()=>{this.computePressureObserver=Jt(),this.computePressureObserver&&this.computePressureObserver.subscribe(this.updateComputePressure).then(()=>{var X;const _e=(X=this.computePressureObserver)===null||X===void 0?void 0:X.getCurrentLevel();this.computePressure=_e})},this.updateSharedTags=X=>{this.sharedTags={...this.sharedTags,...X}},this.updateTransientTags=X=>{this.transientTags={...this.transientTags,...X}},this.updateComputePressure=X=>{const _e=this.computePressure;this.computePressure=X;let ye;switch(X){case 1:ye="System workload is minimal, operating at lower clock speed to conserve power.";break;case 2:ye="System is performing well but under a fair amount of pressure. Still able to take on additional workload without issues.";break;case 3:ye="System is experiencing significant pressure but remains sustainable; close to operational limits.";break;case 4:ye="System is now about to reach its operational limits; continued pressure may lead to CPU throttling.";break;default:ye="Unknown system workload condition."}X>2?this.callLogger.warn(`Compute pressure updated to level ${X} of 4. This is a measure of the strain on the user's computer's processing capacity, which may or may not be caused by Slack or Huddles, but will likely impact performance. A score of ${X} suggests that: ${ye}. If this warning is frequent, suggest that the user close unused tabs or applications on their computer, ensure their computer is not in battery-saving mode, and/or give other general advice around reducing CPU use.`):_e&&_e>2&&this.logger.debug(`Compute pressure updated to level ${X} of 4 from ${_e}. ${ye}`)},this.updateState=X=>{switch(X.type){case u.lx.RenderTiming:this.renderTimings.push(X.update);break;case u.lx.RtmMetrics:this.rtmProcessingTimings.push(X.update);break;case u.lx.AppMetrics:this.updateMetrics(X.update);break;case u.lx.TroubleshootingEntryPoint:this.troubleshootingTags.troubleshootingEntryPoint=X.update;break;case u.lx.TroubleshootingContactUsClicked:this.troubleshootingTags.troubleshootingContactUsClicked=!0;break;default:Ie(X,{sharedTags:this.sharedTags,transientTags:this.transientTags})}},this.updateMetrics=X=>{let{huddleStateSnapshot:_e,clientMetricReport:ye,screenshareRtcStats:De}=X;const Ge=ye?Ae({clientMetricReport:ye,selfAttendeeId:ye.selfAttendeeId}):{},et=ye?re(ye.getRTCStatsReport()):{},bt=le(De),sn={..._e,...Ge,...bt,...et,...this.sharedTags,...this.transientTags,...this.getRtmMetricTags(),...this.getRenderTimingTags(),...this.getTimestampTags(),...this.getComputePressureTags(),...this.getLongTaskTags(),...this.getTroubleshootingTags()},fn=Fe(sn);this.currentTags={...sn,...fn},this.clearTransientTags(),this.lastAppMetricsRecordingTs=Date.now()},this.getCurrentTags=()=>({...this.currentTags}),this.clearTransientTags=()=>{this.transientTags={}},this.getLongTaskTags=()=>{var X;return(X=this.longTaskObserver)===null||X===void 0?void 0:X.getReportSinceLastCall()},this.getTimestampTags=()=>{const{huddleStartTimestamp:X}=this.currentTags;return X?{secondsSinceJoining:Math.floor((Date.now()-X)/1e3)}:{}},this.getRtmMetricTags=()=>{const X=this.rtmProcessingTimings.length;return this.rtmProcessingTimings=[],{rtmMessagesProcessed:X}},this.getTroubleshootingTags=()=>{const X={...this.troubleshootingTags};return this.troubleshootingTags={...rn},X},this.getComputePressureTags=()=>({computePressure:this.computePressure}),this.getRenderTimingTags=()=>{const X=Date.now()-this.lastAppMetricsRecordingTs,_e=(0,G.A)(this.renderTimings),ye=this.renderTimings.length;return!_e||!X?{uiRenderTimePercent:0,uiRenderTimeMs:0}:(this.renderTimings=[],{uiRenderTimePercent:Number((_e/X*100).toFixed(1)),uiRenderCount:ye})},this.cleanup=()=>{var X,_e;(X=this.computePressureObserver)===null||X===void 0||X.unsubscribe(this.updateComputePressure),delete this.computePressureObserver,(_e=this.longTaskObserver)===null||_e===void 0||_e.stop(),delete this.longTaskObserver},this.initSharedTags(),this.initComputePressureObserver(),(Je=this.longTaskObserver)===null||Je===void 0||Je.start()}},"HuddlePerfStateInternal");const _n=null,en=ln;var Xt=e(5071086688),vn=e(5387083734),je=e(8634352961),Rt=e(415910655),hn=e(5332875232);const Nn="HUDDLES-PERF",rt=5e3,vt=1e3;let Mt=c(class{constructor({teamId:Je,logger:X,dispatch:_e,getState:ye,useRtmFiltering:De=!1}){this.logger=(0,s.Wo)({label:Nn}),this.callLogger=(0,S.tZ)(Nn),this.errorReported=!1,this.lastRecordedMetricsTs=0,this.reportCounts={skipped:0,recorded:0},this.reportUpdate=Ge=>{Ge.type===u.lx.AppMetrics?this.recordAppMetrics(Ge):this.huddlePerfState.updateState(Ge)},this.recordAppMetrics=Ge=>{(0,vn.IE)("huddle-perf-metrics",()=>{var et,bt;if(!this.shouldRecordAppMetrics({nextReportTimestamp:(et=Ge.update)===null||et===void 0||(bt=et.clientMetricReport)===null||bt===void 0?void 0:bt.currentTimestampMs})){this.reportCounts.skipped+=1;return}this.logger.debug("Recording app metrics",this.reportCounts.recorded),this.huddlePerfState.updateState(Ge);const sn=this.huddlePerfState.getCurrentTags();this.huddlePerfTrace.recordAppMetrics(sn);try{this.huddlePerfObserver.processTags(sn)}catch(fn){this.errorReported||(this.callLogger.error("An error occurred while processing tags",fn),this.errorReported=!0)}this.lastRecordedMetricsTs=Date.now(),this.reportCounts.recorded+=1},{delay:100})},this.shouldRecordAppMetrics=Ge=>{let{nextReportTimestamp:et}=Ge;if(!et)return!1;const bt=Date.now(),sn=bt-this.lastRecordedMetricsTs;if(sn<vt)return this.logger.debug(`Not enough time has passed since last report was recorded (${sn}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1;const Sn=bt-et;return Sn>rt?(this.logger.debug(`Too much time has passed since the current report was made (${Sn}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1):!0},this.report=Ge=>{this.huddlePerfTrace.report(Ge),Xt.A.unsubscribe(this.reportUpdate),this.huddlePerfState.cleanup(),(0,d.rH)(!1),(0,Rt.ZR)(),this.useRtmFiltering&&(this.callLogger.info("RTM filtering will be disabled"),(0,je.gR)())},this.huddlePerfTrace=new f({teamId:Je,logger:X,callLogger:this.callLogger,enableMaxReportingFrequency:(0,hn.CN)(ye())}),this.huddlePerfObserver=new b({logger:X,callLogger:this.callLogger,dispatch:_e}),this.useRtmFiltering=De,this.huddlePerfState=new en,Xt.A.subscribe(this.reportUpdate),(0,d.rH)(!0),this.useRtmFiltering&&(0,je.ws)(ye)}},"HuddlePerfManager");const Ct=null,Yt=Mt;var In=e(6533394955),Un=e(2141441167),En=e(2709531527),Bn=e(8276911661),Mn=e(5795074931),Vn=e(5286203919),rs=e(8847766420),as=e(7606781622),jn=e(6251210828),es=e(3792998666);const Qn=c(It=>{let{teamId:Je}=It;var X,_e;const ye=(0,In.getStoreInstanceByTeamId)(Je).getState(),De=(0,In.getClientStoreInstance)().getState(),Ge=(0,Vn.E9)(De),et=(0,Vn.hc)(De),bt=(0,rs.jV)(ye),sn=(0,jn.ok)(ye,{huddleId:Ge}),fn=(0,jn.Zg)(ye,{huddleId:Ge}),Sn=(0,Mn.WR)(ye),dt=fn?fn.timestamps.map(at=>et?(0,as.Ld)(ye,et,at):void 0).filter(at=>(at==null?void 0:at.user)===Sn):[],z=(X=dt[0])===null||X===void 0?void 0:X.ts,te=(_e=dt.slice(-1)[0])===null||_e===void 0?void 0:_e.ts,ve=dt.length,Oe=(0,Bn.nv)(ye,Sn),$e=(0,es.P)(Oe);return{huddleId:Ge,channelId:et,enterpriseId:bt,threadId:sn,threadReplyCnt:ve,threadFirstReplyTs:z,threadLastReplyTs:te,isGuest:$e}},"getHuddleEventsStateSnapshot"),ss="huddle_events",ft="huddle",pt="vhq",Ht={topicName:ft,userAgent:navigator.userAgent,family:pt};let nn=c(class{get spansList(){var Je;return(0,Un.A)((Je=this.trace)===null||Je===void 0?void 0:Je.getSpans())||[]}report(){var Je;let X;try{X=(0,h.tT)({...this.sharedTags,...Qn({teamId:this.teamId})})}catch(ye){var _e;this.logger.error(`Error while reporting huddle_events trace: ${ye}`),(_e=this.tracer)===null||_e===void 0||_e.clearTrace(this.trace);return}!this.traceReported&&this.trace&&(this.trace.addTags(X),this.logger.info(`Reporting huddle_events trace: ${this.trace.getTraceId()} with ${this.spansList.length} spans`),this.tracer.reportTrace(this.trace),this.traceReported=!0,this.logger.debug("Reported huddle_events trace with tags",X)),(Je=this.tracer)===null||Je===void 0||Je.clearTrace(this.trace)}constructor({teamId:Je,logger:X}){this.sharedTags=Ht,this.traceReported=!1,this.getSpanByName=_e=>this.spansList.find(ye=>_e===ye.getOperationName()),this.getDataSet=()=>{if(!(0,n.Cu)())return"client_metrics"},this.addInitialSpans=()=>{this.update({name:En.p.JOIN,type:En.G.START,tags:{}}),this.update({name:En.p.MINIPLAYER_VIEW,type:En.G.START})},this.isSurfaceChange=_e=>_e===En.p.MINIPLAYER_VIEW||_e===En.p.WINDOW_COMPACT_VIEW||_e===En.p.WINDOW_FULL_VIEW,this.handleSurfaceChange=_e=>{let{name:ye,type:De}=_e;De===En.G.START&&this.isSurfaceChange(ye)&&this.spansList.filter(Ge=>this.isSurfaceChange(Ge.getOperationName())).forEach(Ge=>{Ge.getOperationName()!==ye&&this.closeSpan(Ge)})},this.update=_e=>{let{name:ye,type:De,tags:Ge}=_e;if(this.trace)if(De===En.G.START||De===En.G.ONCE){const et=this.trace.startSpan(ye,{parentSpanId:this.joinSpanId});Ge&&et.addTags(Ge),ye===En.p.JOIN&&(this.joinSpanId=et.getId()),this.isSurfaceChange(ye)&&this.handleSurfaceChange({name:ye,type:De}),this.logger.debug(`started new span for huddle_events trace: ${ye}`),De===En.G.ONCE&&this.closeSpan(et)}else{const et=this.getSpanByName(ye);this.closeSpan(et),this.logger.debug(`closed span for huddle_events trace: ${ye}`)}},this.closeSpan=_e=>{_e&&(_e.getCloseTimeMs()||_e.close())},this.recordEntryPoint=_e=>{Object.assign(this.sharedTags,{entryPoint:_e})},this.tracer=(0,i.E)({teamOrEnterpriseId:Je}),this.trace=this.tracer.createTrace({traceName:ss,tags:{__dataset:this.getDataSet()},samplingOptions:{sampleRate:1,sampleType:l.tS.SESSION}}),this.teamId=Je,this.logger=X,this.logger.info(`created huddle_events trace:${this.trace.getTraceId()}`),this.addInitialSpans()}},"HuddleEventsTracer");const kn="HUDDLE-TRACE-MANAGER",xt=(0,s.Wo)({label:kn});let Dn=c(class{initializeTraces(Je){let{teamId:X,isTinySpeck:_e,isDebugApp:ye}=Je;const De=(0,In.getStoreInstanceByTeamId)(X),Ge=De.getState();this.teamId=X,this.tracer=(0,i.E)({teamOrEnterpriseId:this.teamId}),this.trace=this.tracer.createTrace({traceName:o.ne,samplingOptions:{sampleRate:(0,n.Cu)()||_e?1:.05,sampleType:l.tS.SESSION},tags:{__dataset:"client_metrics"}}),ye||(this.reconnectTrace=new a({tracer:this.tracer,trace:this.trace,logger:xt}),this.ttiTrace=new r({teamId:this.teamId,logger:xt}),this.huddleEventsTrace=new nn({teamId:this.teamId,logger:xt})),this.huddlePerfTraceManager=new Yt({teamId:this.teamId,logger:xt,dispatch:De.dispatch,getState:De.getState,useRtmFiltering:(0,hn.DP)(Ge)})}setCallId(Je){var X;this.callId=Je,(X=this.trace)===null||X===void 0||X.addTags({callId:this.callId}),Je&&Xt.A.publish({type:u.lx.CallId,update:{callId:Je}})}getAllTraceHandlers(){return{reconnectTrace:this.reconnectTrace,ttiTrace:this.ttiTrace,huddlePerfTraceManager:this.huddlePerfTraceManager,huddleEventsTrace:this.huddleEventsTrace}}cleanup(){var Je,X,_e,ye,De,Ge;(Je=this.reconnectTrace)===null||Je===void 0||Je.report(),(X=this.ttiTrace)===null||X===void 0||X.report(),(_e=this.huddlePerfTraceManager)===null||_e===void 0||_e.report(!0),(ye=this.huddleEventsTrace)===null||ye===void 0||ye.report(),(De=this.tracer)===null||De===void 0||De.reportTrace(this.trace),(Ge=this.tracer)===null||Ge===void 0||Ge.clearTrace(this.trace),xt.info("Reported and cleared huddle parent trace"),delete this.reconnectTrace,delete this.ttiTrace,delete this.huddlePerfTraceManager,delete this.huddleEventsTrace,this.callId=null}constructor(){xt.info("Huddle Trace Manager created")}},"HuddleTraceManager");const wn=(0,t.A)(()=>new Dn)},2709531527:(x,A,e)=>{"use strict";e.d(A,{G:()=>t,p:()=>n});var t;(function(s){s.START="start",s.STOP="stop",s.ONCE="once"})(t||(t={}));var n;(function(s){s.JOIN="session_join",s.VIDEO="video",s.SCREENSHARE="screenshare",s.REACTION="reaction_posted",s.MESSAGE="message_posted",s.MICROPHONE="microphone",s.MINIPLAYER_VIEW="mini_player_view",s.WINDOW_COMPACT_VIEW="window_compact_view",s.WINDOW_FULL_VIEW="window_full_view",s.THREAD_VIEW="thread_flexpane_view",s.TRANSCRIPT="trxn"})(n||(n={}))},1616072515:(x,A,e)=>{"use strict";e.d(A,{_3:()=>i,tT:()=>l});var t=e(4178261413),n=e(8872403767),s=e(6422693406);const i=c(a=>(0,t.A)(a),"formatTag"),l=c(function(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"peer_video";return(0,n.A)(a,(d,u)=>u.indexOf(r)>-1?u:i(u))},"formatTags"),o=c(()=>new Bluebird(a=>{setTimeout(a,0)}),"waitForNextTick")},3146858537:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(9706240641),n=e(8958249318),s=e(6422693406),i=e(56548687),l=e(1224315998),o=e(6664301844),a=e(2825968873);function r(){return 2}c(r,"getVoiceFocusCacheVersion");var d;const u="voiceFocusCache";function _(){return{userAgent:"unknown",sdkVersion:"unknown",isSupported:"unknown"}}c(_,"createDefaultVoiceFocusCapability");function v(){return{vfConfig:"unknown",lastUpdateTimeMs:0}}c(v,"createDefaultVoiceFocusCachedConfig");function h(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window==null||(d=window.navigator)===null||d===void 0?void 0:d.userAgent,T=arguments.length>1?arguments[1]:void 0;const D=localStorage.getItem(u),C={version:r(),voiceFocusCapability:_(),voiceFocusCachedConfig:v()};if(!D)return C;let m;try{m=JSON.parse(D)}catch(O){return(0,a.tZ)("VOICE-FOCUS-CACHE").error("Could not parse voice focus cache from localStorage: ",O.message),C}return m.version!==r()?C:(m.voiceFocusCapability&&(m.voiceFocusCapability.userAgent!==M||m.voiceFocusCapability.sdkVersion!==T)&&(m.voiceFocusCapability=C.voiceFocusCapability,m.voiceFocusCachedConfig=C.voiceFocusCachedConfig),{...C,...m})}c(h,"readVoiceFocusCache");function f(M){try{localStorage.setItem(u,JSON.stringify(M))}catch(T){(0,a.tZ)("VOICE-FOCUS-CACHE").error("Could not write voice focus cache to localStorage: ",T.message)}}c(f,"writeVoiceFocusCache");var I=e(5470425448),p=e(5071086688);const y=1657647210615,g=1686248081659;let E=c(class{init(T){let{configOnly:D}=T;var C=this;return(0,t.coroutine)(function*(){D||C.callLogger.info(`VF cache: ${!!C.cache}`),C.isSupported=yield C.isCapable(!!D),C.isSupported&&C.prepare(D)})()}isAvailable(){return this.isSupported}getTransformDevice(){var T=this;return(0,t.coroutine)(function*(){if(T.isSupported&&(T.voiceFocusConfigPromise&&(yield T.voiceFocusConfigPromise),!!T.voiceFocusDeviceTransformerPromise)){try{yield T.voiceFocusDeviceTransformerPromise}catch{T.callLogger.error("Could not get VoiceFocusDeviceTransformer");return}if(T.voiceFocusTransformDevicePromise)try{return yield T.voiceFocusTransformDevicePromise}catch{T.callLogger.error("Could not get VoiceFocusTransformDevice")}}})()}shouldDisable(){return!1}setMute(T){var D=this;return(0,t.coroutine)(function*(){const C=yield D.getTransformDevice();C&&(yield C.mute(T))})()}isCapable(T){var D=this;return(0,t.coroutine)(function*(){if(D.isIFramed())return T||D.callLogger.warn("not supported due to IFrame"),!1;let C=!1;switch(D.cache.voiceFocusCapability.isSupported){case"yes":T||D.callLogger.info("cache says supported"),C=!0;break;case"no":T||D.callLogger.info("cache says not supported"),C=!1;break;case"unknown":{T||D.callLogger.info("cache says unknown, determining support..."),D.cache.voiceFocusCapability.userAgent=(0,n.A)(),D.cache.voiceFocusCapability.sdkVersion=o.zF.sdkVersion,C=yield(0,o.w2)().isSupported(),C?D.cache.voiceFocusCapability.isSupported="yes":D.cache.voiceFocusCapability.isSupported="no",f(D.cache),T||D.callLogger.info(`determined supported=${D.cache.voiceFocusCapability.isSupported}, writing to cache`);break}default:D.callLogger.warn(`Voice Focus capability pref bad: ${D.cache.voiceFocusCapability.isSupported}`);break}return C})()}isIFramed(){try{var T;return((T=window.frameElement)===null||T===void 0?void 0:T.nodeName)==="IFRAME"||parent!==top}catch{return!0}}isStale(T){const C=this.cache.voiceFocusCachedConfig.lastUpdateTimeMs,m=this.allowMaxModelsToBeUsed?g:y;return C===0||T-C>6048e5||C<m}prepare(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const D=Date.now(),C=this.cache.voiceFocusCachedConfig.vfConfig,m=this.isStale(D),O={},P={logger:this.chimeLogger};if(C!=="unknown"&&!m){if(T)return;if(!C.supported){this.callLogger.warn("Unsupported config was returned from the cache");return}this.setupDevice(O,P,C);return}this.voiceFocusConfigPromise||(this.callLogger.info("Initializing VoiceFocusDeviceTransformer afresh"),this.voiceFocusConfigPromise=s.S.resolve((0,o.w2)().configure(O,P)),this.voiceFocusConfigPromise.then(R=>{var L;if(!R.supported){this.callLogger.error(`VF Config was provided as unsupported Reason: ${R.reason}`);return}if(!(!(R==null||(L=R.model)===null||L===void 0)&&L.simd)){this.callLogger.error("VF not enabled because device is not expected to be able to perform adequately");return}const B=R;this.callLogger.info(`Got new config, variant: ${B.model.variant}, simd: ${B.model.simd}, executionQuanta: ${B.executionQuanta}`),this.storeVfConfig(D,B),T||this.setupDevice(O,P,B)}).catch(R=>{this.callLogger.info(`Could not get configuration of voice device transformer: ${R.name}: ${R.message}`),T||this.setupDevice(O,P)}))}storeVfConfig(T,D){this.cache.voiceFocusCachedConfig.vfConfig=D,this.cache.voiceFocusCachedConfig.lastUpdateTimeMs=T,f(this.cache)}updateCacheWithUpdatedConfig(T){var D=this;return(0,t.coroutine)(function*(){D.callLogger.info("Updating VF cache with new modified model");const C={logger:D.chimeLogger},m={variant:T},O=yield(0,o.w2)().configure(m,C);O.supported&&D.storeVfConfig(Date.now(),O)})()}setupDevice(T,D,C){const m=T;let O=C,P,R;C?(P=C.model.variant,R=!0):(this.callLogger.info("No VFConfig provided defaulting base model to c10"),P="c10",R=!1);let L=!0;this.allowMaxModelsToBeUsed&&(L=!1);const V=this.chooseModelVariant(P,R,L);if(V.modelWasAdjusted&&(m.variant=V.chosenModel,O=void 0,this.callLogger.info(`VF Model was adjusted from ${C==null?void 0:C.model.variant} to ${V.chosenModel} Reason: ${V.adjustmentReason}`),this.updateCacheWithUpdatedConfig(V.chosenModel)),C){(0,i.e)().track(l.EventId.CALLS_VOICE_FOCUS_CONFIG,{model_variant_determined:C.model.variant,model_variant_override:m.variant,simd:C.model.simd,execution_quanta:C.executionQuanta,hw_concurrency:navigator==null?void 0:navigator.hardwareConcurrency});const K={...C};K.model.variant=V.chosenModel,p.A.publish({type:I.lx.VoiceFocusConfig,update:K}),this.callLogger.info(`model_variant_determined: ${C.model.variant}, model_variant_override: ${V.chosenModel}, simd: ${C.model.simd}, execution_quanta: ${C.executionQuanta}, hw_concurrency: ${navigator==null?void 0:navigator.hardwareConcurrency}`)}this.voiceFocusDeviceTransformerPromise=s.S.resolve((0,o.w2)().create(m,D,O));var B=this;this.voiceFocusDeviceTransformerPromise.then(function(){var K=(0,t.coroutine)(function*(b){B.voiceFocusTransformDevicePromise=s.S.resolve(b.createTransformDevice(null))});return function(b){return K.apply(this,arguments)}}()).catch(K=>{this.callLogger.info(`Could not create voice device transformer exp: ${K.name}: ${K.message}`)})}chooseModelVariant(T,D,C){const m={c10:1,c20:2,c50:3,c100:4},O=navigator==null?void 0:navigator.hardwareConcurrency;if(!O)return this.callLogger.info(`Hardware concurrency not available, using self-determined model variant: ${T}`),{modelWasAdjusted:!1,chosenModel:T,adjustmentReason:""};let P;return O<=4?P="c10":O<=6?P="c20":O<=8?P="c50":P="c100",m[P]<m[T]&&!C?{modelWasAdjusted:this.wasModelAdjusted(P,T,D),chosenModel:P,adjustmentReason:"Using CPU restricted model variant which is weaker"}:m[P]>m[T]&&(this.callLogger.info(`using self-determined model variant which is weaker: ${T}`),P=T,!C)?{modelWasAdjusted:!1,chosenModel:T,adjustmentReason:""}:P==="c100"?{modelWasAdjusted:this.wasModelAdjusted("c20",T,D),chosenModel:"c20",adjustmentReason:"Model selection was determined to be c100 capping the model at C20"}:{modelWasAdjusted:this.wasModelAdjusted("c10",T,D),chosenModel:"c10",adjustmentReason:"Model selection was determined to be less than c100 capping the model at C10"}}wasModelAdjusted(T,D,C){return T===D&&!C||T!==D}tearDown(){var T=this;return(0,t.coroutine)(function*(){const D=yield T.getTransformDevice();D&&(T.callLogger.info("Attempting to destroyVoiceFocus"),o.wV.destroyVoiceFocus(D))})()}constructor(T,D){this.chimeLogger=T,this.allowMaxModelsToBeUsed=D,this.callLogger=(0,a.Jt)("VOICE-FOCUS-MANAGER"),this.isSupported=!1,this.cache=h((0,n.A)(),o.zF.sdkVersion)}},"VoiceFocusManager")},8558782493:(x,A,e)=>{"use strict";e.d(A,{k:()=>l});var t=e(56548687),n=e(5795074931),s=e(3395259576),i=e(7439555287);function l(o,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;var u;const _=(u=(0,i.KA)())===null||u===void 0?void 0:u.getState();if(!_)return;const v=(0,t.e)({state:_}).setUser((0,n.WR)(_));if(r){const h={...a,room_id:(0,s.G0)(_)};v.track(o,h,{sendImmediately:d})}else v.track(o,a,{sendImmediately:d})}c(l,"trackCallsClog")},164795489:(x,A,e)=>{"use strict";e.d(A,{w:()=>g});var t=e(9706240641),n=e(6680093304),s=e(6422693406),i=e(6304789565),l=e(8276911661),o=e(3677514771),a=e(5109269968),r=e(8445020572),d=e(5046160032),u=e(4914127094),_=e(7299481592);const v="screenhero.rooms.proxyLogs",h=(0,i.Ay)("Send call logs to the server",(E,M,T)=>{let{logs:D,useSendBeacon:C=!1,callId:m}=T;const O=M();let P;if(m?P=m:O.activeCall&&O.activeCall.id&&(P=O.activeCall.id),!P)return(0,_.M)(!1,"There should be an active call in progress in order to send logs."),s.S.reject(new Error("SendLogs: no call"));const R=(0,l.cA)(O),L=(0,o.H7)(O);if(!L)return s.S.reject(new Error("SendLogs: no current team"));const V={data:{room_id:P,user_id:R.id,team_id:L.id,ua:window.navigator.userAgent,event_type:"calls_js_logs",encoding:"none",logs:D}},B={data:JSON.stringify(V.data)};return C?(0,d.A)({apiUrl:"/api/",method:v,token:(0,u.F)(O),versionTs:(0,r.HF)(),versionUid:(0,r.X3)(),args:B})?s.S.resolve():s.S.reject(new Error("SendLogs: beacon failed")):E((0,a.apiCall)({method:v,reason:"calls-logging",args:B}))});h.meta={name:"createThunk",key:"createThunksendLogs",description:"Send call logs to the server"};var f=e(7439555287),I=e(796111729),p=e(4518410378);const y=60*1e3;class g{start(M){(0,_.M)(!this.intervalHandle,"Log reporter already started."),this.callId=M,this.intervalHandle=p.J.setInterval(()=>this.report(!1),y),p.J.addEventListener("beforeunload",this.unloadHandler)}joinLogs(M){return M.map(T=>T.join(" ")).join(`
`)}constructor(M=n.tt){this.buffer=M,this.unloadHandler=()=>{p.J.Cypress||this.report(!0)};var T=this;this.stop=(0,t.coroutine)(function*(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;T.intervalHandle&&p.J.clearInterval(T.intervalHandle),T.intervalHandle=void 0,p.J.removeEventListener("beforeunload",T.unloadHandler),yield T.emptyBuffer(O),T.callId=void 0});var D=this;this.emptyBuffer=(0,t.coroutine)(function*(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;D.buffer.hasItems()&&(yield D.report(m),yield D.emptyBuffer(m))});var C=this;this.report=(0,t.coroutine)(function*(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{dispatch:O}=(0,f.KA)(),P=C.buffer.flush();if(!P.length)return;const R=C.joinLogs(P);yield O(h({logs:R,useSendBeacon:m,callId:C.callId})).catch(()=>{(0,I.Wo)().error("Failed to send Huddle logs")})})}}c(g,"LogReporter")},3300324857:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6267571562);const n=new t.G},6839101721:(x,A,e)=>{"use strict";e.d(A,{D8:()=>_,WY:()=>u,cn:()=>v,d2:()=>r,gJ:()=>d});var t=e(2140362605);const n=(0,t.Ay)("connect to free willy media server");n.meta={name:"createAction",key:"createActionconnectToFreeWillyMediaServer",description:"connect to free willy media server"};const s=(0,t.Ay)("Set flag to indicate if experimental Chime SDK should be used");s.meta={name:"createAction",key:"createActionsetUseChimeSdkExp",description:"Set flag to indicate if experimental Chime SDK should be used"};const i=(0,t.Ay)("Set flag to indicate if simulcast should be used in a Chime call");i.meta={name:"createAction",key:"createActionsetUseSimulcast",description:"Set flag to indicate if simulcast should be used in a Chime call"};const l=(0,t.Ay)("Set flag to indicate if priority based downlink policy should be used in a Chime call");l.meta={name:"createAction",key:"createActionsetUsePriorityDownlinkPolicy",description:"Set flag to indicate if priority based downlink policy should be used in a Chime call"};const o=(0,t.Ay)("Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call");o.meta={name:"createAction",key:"createActionsetUseGetMediaAccessCheckForWindows",description:"Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call"};const a=(0,t.Ay)("Set flag to determine if a call is a readiness test call");a.meta={name:"createAction",key:"createActionsetReadinessCheck",description:"Set flag to determine if a call is a readiness test call"};const r=(0,t.Ay)("Binds video tile to a video element");r.meta={name:"createAction",key:"createActionbindVideo",description:"Binds video tile to a video element"};const d=(0,t.Ay)("Unbinds video tile from a video element");d.meta={name:"createAction",key:"createActionunbindVideo",description:"Unbinds video tile from a video element"};const u=(0,t.Ay)("Pauses video tile");u.meta={name:"createAction",key:"createActionpauseVideo",description:"Pauses video tile"};const _=(0,t.Ay)("Unpauses video tile");_.meta={name:"createAction",key:"createActionunpauseVideo",description:"Unpauses video tile"};const v=(0,t.Ay)("Returns if there in a stream associated with the tileId");v.meta={name:"createAction",key:"createActionvideoTileHasStream",description:"Returns if there in a stream associated with the tileId"}},3094144240:(x,A,e)=>{"use strict";e.d(A,{P:()=>t});const t={height:576,width:1024,useContentSize:!0,minContentWidth:704,minContentHeight:396,center:!0,frame:!0,titleBarStyle:"default"};function n(s){return!!has(s,"activeCall")}c(n,"isCallWindowContextState")},5156662944:(x,A,e)=>{"use strict";e.d(A,{Rv:()=>V,Xk:()=>L,hL:()=>R,j7:()=>H,lp:()=>B,tO:()=>j,tw:()=>K,uI:()=>Z,vf:()=>Y});var t=e(5597672932),n=e(6007206761),s=e(4630136761),i=e(9884588328),l=e(8798294025),o=e(1407713935),a=e(2350349607),r=e(6839188756),d=e(4827886670),u=e(8276911661),_=e(6728717861),v=e(8921478798),h=e(8170643398),f=e(3534324375),I=e(3677514771),p=e(735940183),y=e(9101533895),g=e(5670315214),E=e(8767621462),M=e(462591818),T=e(340763958),D=e(6470070112);const C="Slack",m=new p.Ay("calls");function O(ne){return!!(0,t.xp)(ne,"allow_calls")}c(O,"isCallsAllowedByAdmin");function P(ne,ue){return(0,D.pt)(ne)&&(0,D.Bn)(ne,ue)}c(P,"isHuddlesAllowed");function R(ne,ue,he){const be=(0,y.Pu)(ne,ue.id);return!(!O(ne)&&!P(ne,be)||(0,h.fy)(ue)&&!he||!(0,h._W)(ue)||!(0,E.S)(ne,ue.id)||(0,i.Mi)(be))}c(R,"canCallMember");function L(ne,ue){let he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const be=(0,u.nv)(ne,(0,l.e)(ue)),xe=he&&F(ne);return!O(ne)&&!P(ne,ue)&&!xe||(0,s.Zz)(ue)||(0,o.LI)(ue)&&(!be||!R(ne,be))||!(0,i.Ez)(ue)?!1:(0,d.c)(ne,ue)}c(L,"isCallButtonVisibleForChannel");function V(ne,ue){return(0,_.Pb)(ne)?((0,i.bU)(ue)||(0,n.F)(ue))&&!ge(ue):!0}c(V,"isCallButtonDisabledForChannel");function B(ne,ue){const he=(0,y.OL)(ne,ue);return he&&!V(ne,he)&&L(ne,he)}c(B,"canStartCallInChannel");function K(ne,ue,he){const be=(0,a.V)(ue),xe=(0,g.q8)(ne,be),Le=(0,u.nv)(ne,he,{preferNonExistentToNull:!1,fetchIfMissing:!0}),fe=(0,h.v8)(Le),se=(0,g.OJ)({callsApp:xe,memberPhoneNumber:fe,hideVideoApps:!1}),Q=se.length,k=P(ne,ue);let N=Q;return k&&(N+=1),N>1?m.t("{numCallApps} calling options",{numCallApps:N}):N===1?Q===0?"":m.t("using {appName}",{appName:se[0].name}):""}c(K,"getTipSubtitleForStartCall");function b(ne,ue,he){const be=(0,v.I)(ne,(0,l.e)(ue));return he?m.rt("Huddle with {name}",{name:be,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):m.rt("Call {name}",{name:be})}c(b,"getTipForIm");function S(ne,ue,he){const be=(0,i.d3)(ne,ue).map(Le=>(0,f.sE)(ne,Le)),xe=(0,p.jd)(be,{noEscape:!0}).join("");return he?m.rt("Huddle with {listOfNamesWithConjunction}",{listOfNamesWithConjunction:xe,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):m.rt("Call {listOfNamesWithConjunction}",{listOfNamesWithConjunction:xe})}c(S,"getTipForMpim");function G(ne,ue,he){return(0,o.LI)(ue)?b(ne,ue,he):(0,o.yz)(ue)?S(ne,ue,he):he?m.t("Huddle in {channelName}",{channelName:(0,i.SB)(ne,ue),fallbackHash:"2e4c8c4a478aa889a4b6fe33316b3d0a6d93301d",fallbackHashNs:"huddles"}):m.t("Start a call")}c(G,"getTipForChannel");function H(ne,ue){const he=(0,I.H7)(ne),be=(0,r.qR)(he),xe=F(ne),Le=be||xe,fe=P(ne,ue)&&!Y(ne);return(0,_.Pb)(ne)?Le&&(0,n.F)(ue)?m.t("Unarchive this channel to start a huddle"):Le&&(0,i.bU)(ue)?m.t("Join this channel to start a huddle"):(xe||ge(ue),G(ne,ue,fe)):m.t("Go online to start a huddle")}c(H,"getTipForStartCall");function U(ne,ue){const he=getCurrentTeam(ne),be=isPaidTeamRule(he),xe=isMpimRule(ue),Le=F(ne),fe=be||Le;return!isClientOnline(ne)||fe&&isArchived(ue)||fe&&isPreview(ue)||Le?!1:!!(!be&&xe||!be&&isNonImOrMpimChannel(ue))}c(U,"isFreeTeamAndInChannelOrMpim");function F(ne){const ue=(0,g.wZ)(ne);for(let he=0;he<ue.length;he++)if(ue[he].id!==M.rq)return!0;return!1}c(F,"isThirdPartyCallEnabled");function Y(ne){return(0,g.wZ)(ne).length>0}c(Y,"isAnyCallAppEnabled");function Z(ne){const ue=m.t("Start a call?",{fallbackHash:"04d5cae8ffd5cbdfd97d6ea2c1afe3e969b3eed7"}),he=m.t("You\u2019ll be starting a call that all {count} members of this channel can join.",{count:ne,fallbackHash:"225ecb6662087bf4b09285688dc46d8ecb5ed2aa"}),be=m.t("Start Call",{fallbackHash:"291a0a58dfa6c640a90c1d868d2af190775ea219"});return{title:ue,description:he,confirm:be,cancel:m.t("Cancel")}}c(Z,"getCallConfirmationStrings");function ee(){return!1}c(ee,"isNativeSlackCallEnabled");function j(){return!0}c(j,"isSlackCallSlashCommandDisabled");function ge(ne){return(0,T.ju)(ne)&&!(0,o.LI)(ne)}c(ge,"shouldEnableForSponsoredConnections")},7561130599:(x,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(9706240641),n=e(2825968873),s=e(3245843483),i=e(7299481592),l=e(571104883),o=e(8558782493),a=e(1224315998),r=e(336376314);const d=window.RTCPeerConnection,u=window.MediaStream,_=window.RTCIceCandidate,v=window.navigator,h={height:116,width:168};let f=c(class{getScreenThumbnails(y){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var E=this;return(0,t.coroutine)(function*(){const M=yield(0,s.zxd)();g||I(E.log,M);const T=["screen"];T.push("window"),h.width=(y==null?void 0:y.width)||200,h.height=(y==null?void 0:y.height)||150;let D;try{D=yield(0,s.Yx3)(h,T)}catch(m){E.log.error(`Could not get screen thumbnails: ${m.message}`)}return D?D.map((m,O)=>{var P;const R=M.find(V=>parseInt(m.display_id,10)===V.id);!R&&!(0,l.tR)()&&!(0,l.cX)()&&!(!((P=m.id)===null||P===void 0)&&P.startsWith("window:"))&&E.log.error(`Could not find matching display for screen ${O} with id ${m.display_id}`);const L=R||((0,l.tR)()||(0,l.cX)()?M[O]:void 0);return{mediaSourceId:m.id,thumbnail:m.thumbnail,displayId:L&&L.id,bounds:L&&L.bounds,name:m.name}}):[]})()}getCurrentlyActiveScreenTrack(){return this.screenTrack}startCapturingScreen(y){var g=this;return(0,t.coroutine)(function*(){if((0,i.M)(!g.screenTrack,"Screen track should not already be active"),!y){if(!v.mediaDevices.getDisplayMedia)throw g.log.error("Error: getDisplayMedia unavailable while trying to screen share in browser"),new Error("browser screenshare unavailable");try{const E={audio:!1,video:{frameRate:{max:15}}},M=yield v.mediaDevices.getDisplayMedia(E);return g.screenTrack=M.getVideoTracks()[0],g.log.info(`Start screen sharing with track id: ${g.screenTrack.id} in browser`),g.screenTrack}catch(E){if(E.name!=="NotAllowedError")throw g.log.error(`Error: ${E.name} while trying to screen share in browser`),(0,o.k)(a.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:E.name}),E;return null}}try{const E={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:y,maxFrameRate:15}}};if(!(0,l.uF)()){const T=yield g.getScreenDetailsByMediaSourceId(y);T&&T.bounds&&(E.video.mandatory.maxWidth=T.bounds.width,E.video.mandatory.maxHeight=T.bounds.height)}const M=yield v.mediaDevices.getUserMedia(E);return g.screenTrack=M.getTracks()[0],g.log.info("Start screen sharing with track id:",g.screenTrack.id,"and mediaSourceId:",y),g.screenTrack}catch(E){throw g.log.error(`Error: ${E.name} for screen ${y}`),(0,o.k)(a.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:E.name}),E}})()}stopCapturingScreen(){if(!this.screenTrack){(0,i.M)("No screenTrack to stop.");return}this.screenTrack.stop();const y=this.screenTrack.id;return delete this.screenTrack,this.log.info("Stop screen sharing track id:",y),y}clearScreenTrack(){delete this.screenTrack}getScreenDetailsByMediaSourceId(y){var g=this;return(0,t.coroutine)(function*(){let E;const M=yield g.getScreenThumbnails();return M&&(E=M.find(T=>T.mediaSourceId===y,M)),E})()}constructor(){this.log=(0,n.tZ)("SCREENS")}},"ScreenManager");function I(p,y){if(!y.length){p.error("No screens available");return}const g=new r.M(["id","width","height","x","y","scaleFactor","rotation"]);y.forEach(E=>{g.add([E.id,E.bounds.width,E.bounds.height,E.bounds.x,E.bounds.y,E.scaleFactor,E.rotation].map(String))}),p.info(`Available screens:
${g.report()}`)}c(I,"logDisplays")},4708000837:(x,A,e)=>{"use strict";e.d(A,{Y:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[1]:null}c(t,"getCallIdFromExternalId")},8405076696:(x,A,e)=>{"use strict";e.d(A,{n:()=>t});function t(n){let{width:s,height:i,top:l,left:o}=n;return{position:"absolute",width:`${s}px`,height:`${i}px`,top:`${l}px`,left:`${o}px`}}c(t,"cssForRect")},6117529990:(x,A,e)=>{"use strict";e.d(A,{BD:()=>s,OV:()=>n,XY:()=>l,wn:()=>i,zq:()=>o});var t=e(4761125736);function n(a){return(0,t._Z)(a,"calls_chime_sdk_exp")==="enabled"}c(n,"isCallsChimeSdkExpEnabled");const s=c(a=>(0,t._Z)(a,"calls_org_app_settings")==="treatment","isCallsOrgAppsSettingsExperimentEnabled"),i=c(a=>(0,t._Z)(a,"calls_tracing_disabled")==="treatment","isCallsTracingDisabled"),l=c(a=>(0,t._Z)(a,"calls_location_lock")==="treatment","isCallsLocationLockEnabled"),o=c(a=>(0,t._Z)(a,"calls_disable_screenshare_border")==="treatment","isCallsScreenShareBorderDisabled")},2004048777:(x,A,e)=>{"use strict";e.d(A,{$:()=>l,Y:()=>i});var t=e(2615100822),n=e(2825968873),s=e(796111729);function i(o){let{direction:a,type:r,payload:d}=o;const u=(0,t.A)()?"slack":"call",_="INTER-WINDOW-MESSAGE";((0,t.A)()?(0,n.tZ)(_):(0,s.Wo)({label:_})).info(`${a==="send"?"Sending":"Received"} ${r} ${a==="send"?"to":"from"} the ${u} window${d?`, with payload: ${JSON.stringify(d)}`:""}`)}c(i,"logInterWindowMessage");function l(o){function a(r,d,u){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;o(d,u,_),r.sendData({type:d,payload:u})}return c(a,"sendMessage"),a}c(l,"createInterWindowMessageSender")},1371073900:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(571104883);function n(){return!(0,t.j9)()&&(0,t.y3)()}c(n,"isDrawSupported")},6267571562:(x,A,e)=>{"use strict";e.d(A,{G:()=>n});var t=e(8403493408);class n{get subscriberCount(){return this.subscribers.length}subscribe(i){this.subscribers.push(i)}unsubscribe(i){(0,t.A)(this.subscribers,i)}publish(i){this.subscribers.forEach(l=>{l(i)})}constructor(){this.subscribers=[]}}c(n,"PubSub")},6155974509:(x,A,e)=>{"use strict";e.d(A,{X:()=>f,a:()=>I});var t=e(571104883),n=e(4387298515),s=e(2825968873),i=e(2615100822),l=e(796111729),o=e(6117529990);const a=2e3,r=6,d=0/265,u=255/265,_=53/265,v=1,h="SCREEN-SHARE",f=c((p,y)=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&!(0,o.zq)(y)&&((0,n.$m)(p,a),(0,n.VR)(p),(0,n.D0)(r),(0,n.Mh)(d,u,_,v),(0,n.Ac)(),((0,i.A)()?(0,s.tZ)(h):(0,l.Wo)({label:h})).info("Screenshare border added"))},"showBorderForWindowOrScreenId"),I=c(()=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&((0,n.th)(),((0,i.A)()?(0,s.tZ)(h):(0,l.Wo)({label:h})).info("Screenshare border removed"))},"hideScreenShareWindowBorder")},7304871158:(x,A,e)=>{"use strict";e.d(A,{R:()=>i});var t=e(7299481592),n=e(2615100822),s=e(2004048777);const i=(0,s.$)(function(l,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;(0,t.M)(!(0,n.A)(),"Expected to send message from the slack window"),(0,s.Y)({direction:"send",type:l,payload:a?o:"REDACTED"})})},336376314:(x,A,e)=>{"use strict";e.d(A,{M:()=>n});var t=e(9118672869);class n{add(i){this.rows.push(i),this.adjustPadding(i)}report(){const i=this.padding.map(o=>"-".repeat(o));return(this.columnNames?[i,this.columnNames,i]:[]).concat(this.rows).reduce((o,a)=>o+a.reduce((r,d,u)=>r+(0,t.A)(d,this.padding[u])+(u!==a.length-1?` ${this.separator} `:`
`),""),"")}adjustPadding(i){this.padding=i.map((l,o)=>Math.max(l.length,this.padding[o]||0))}constructor(i,l="|"){this.columnNames=i,this.separator=l,this.padding=[],this.rows=[],this.columnNames&&this.adjustPadding(this.columnNames)}}c(n,"StringTable")},5954792826:(x,A,e)=>{"use strict";e.d(A,{l:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[2]:null}c(t,"getUserIdFromExternalId")},1151228631:(x,A,e)=>{"use strict";e.d(A,{uM:()=>xe,Gf:()=>be,lQ:()=>Le});var t=e(6188550760),n=e(9706240641),s=e(3202757386),i=e(2664504268),l=e(6533394955),o=e(2567914105),a=e(4529239752),r=e(8628205589),d=e(3193155968),u=e(9108490430),_=e(4096483543),v=e(4338953270),h=e(109860581),f=e(3034856104),I=e(8172368937),p=e(8768105680),y=e(6304789565),g=e(8720458890);const E=(0,y.Ay)("Determine if fullscreen mode is enabled",(fe,se)=>{const Q=se();return(0,g.V)(Q)});E.meta={name:"createThunk",key:"createThunkgetIsFullscreenEnabled",description:"Determine if fullscreen mode is enabled"};var M=e(9553287e3),T=e(8646192222),D=e(3875705815),C=e(8854307618),m=e(7606925238),O=e(5223893135),P=e(5925742547),R=e(9012396182);const L=c((fe,se)=>!(!(0,T.mL)(fe)||(0,D.V)(fe)||se[d.jf]!==d.k6.BBM),"shouldPreventBBMHistory"),V=c((fe,se,Q)=>{if(!(0,T.iB)(fe)||(0,O.V)(fe))return!1;const k=(0,l.getStateForClientStore)();if((R.getFocusedWorkspace===null||R.getFocusedWorkspace===void 0?void 0:(0,R.getFocusedWorkspace)(k))!==Q)return!1;const N=(0,a.jo)(k),$=se[d.jf],W=N[d.jf];if($!==W)return!1;const q=se[$],re=N[W];return!!(0,P.A)(q,re)},"shouldPreventDuplicateHistory"),B=(0,y.Ay)("Maybe prevent default handling of history on pop state",(fe,se,Q)=>{let{current:k,index:N,teamId:$}=Q;const W=se();if(!L(W,k)&&!V(W,k,$))return!1;const q=(0,l.getStateForClientStore)(),re=(0,a.XG)(q),le=N>re;if(le){if((0,a.yS)(q))return!0}else if((0,a.m6)(q))return!0;return fe((le?C.r:m.h)()),!0});B.meta={name:"createThunk",key:"createThunkmaybePreventHistoryOnPopState",description:"Maybe prevent default handling of history on pop state"};var K=e(2554594353);function b(fe){return S.apply(this,arguments)}c(b,"onPopState");function S(){return S=(0,n.coroutine)(function*(fe){const se=fe.state;if(!(se!=null&&se.teamId)||!(se!=null&&se.id))return;const Q=(0,l.getClientStoreInstance)();if(!Q)return;const k=Q.getState,N=Q.dispatch;if(!k||!N)return;const $=(0,a.jR)(k()),W=$.findIndex(Ce=>Ce.id===se.id);if(W<0)return;const q=(0,a.XG)(k()),re=$[q],le=se.state[d.jf];if((0,l.dispatchForTeamId)(se.teamId,B({current:se.state,index:W,teamId:se.teamId})))return;var Te;const Ne=(Te=se.state[le])!==null&&Te!==void 0?Te:(0,d.DP)(le),pe=(0,f.H)(re)?re[d.jf]:void 0,Ee=(0,f.H)(re)&&pe?re[pe]:void 0,{viewSet:oe}=yield(0,l.dispatchForTeamId)(se.teamId,(0,p.F)({context:I.b.HistoryStack,prevViewSet:Ee,prevTab:pe,nextViewSet:Ne,nextTab:le,windowId:d.N2}));se.state[le]=oe??Ne,N((0,r.cM)({windowId:d.N2,index:W,previousIndex:q})),(0,l.dispatchForTeamId)(se.teamId,(0,u.cQ)(se.state)),(R.getFocusedWorkspace===null||R.getFocusedWorkspace===void 0?void 0:(0,R.getFocusedWorkspace)(k()))!==se.teamId&&N(K.b===null||K.b===void 0?void 0:(0,K.b)({teamId:se.teamId,fromNavigation:!0}));const ke=(0,l.dispatchForTeamId)(se.teamId,E())?(0,l.dispatchForTeamId)(se.teamId,(0,M.n)({id:se.id})):void 0;(0,l.dispatchForTeamId)(se.teamId,(0,v.C)({prevViewSet:Ee,prevTab:pe,nextViewSet:Ne,nextTab:le,windowId:d.N2,navigateParams:{destinationContainer:ke},triggerType:h.w.HISTORY_NAVIGATION}))}),S.apply(this,arguments)}c(S,"_onPopState");function G(fe){if(!isSonic())return;const se=fe.state;if(!(se!=null&&se.id))return;const Q=getClientStoreInstance();if(!Q)return;const k=Q.getState,N=Q.dispatch;if(!k||!N)return;const W=getHistoryForMainWindow(k()).findIndex(re=>re.id===se.id);if(W<0)return;const q=getHistoryIndexForMainWindow(k());N(updateIndexForMainWindow({windowId:MainWindowId,index:W,previousIndex:q}))}c(G,"onIA3PopState");var H=e(7893624209),U=e(8289899277),F=e(7202695868),Y=e(796111729);function Z(fe){return ee.apply(this,arguments)}c(Z,"navigateAfterPopState");function ee(){return ee=(0,n.coroutine)(function*(fe){var se;if(!(0,s.A)())return;if(!(fe==null||(se=fe.state)===null||se===void 0)&&se.isIA4){F.p.prevNavigatedTeamOrEnterpriseId=fe.state.teamId,b(fe);return}const Q=(0,H.oI)(),k=(0,U.f)(),N=(0,t.A_)(),$=(0,l.getStoreInstanceByTeamId)(F.p.prevNavigatedTeamOrEnterpriseId),W=$?(0,o.oY)($.getState()):!1,q=(0,i.A)().slice(0,8);if((0,Y.Wo)().info("ROUTES",`[${q}]`,`[${k.routeName}]`,"Attempting to popstate navigate to new route",k.params),(yield(0,t.$C)({prevTeamOrEnterpriseId:F.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:Q,prevRouteInfo:F.p.popstatePrevRouteInfo,routeName:k.routeName,params:k.params,reason:t.GB,uuid:q}))===!1||W===!0){(0,Y.Wo)().info("ROUTES",`[${q}]`,`[${k.routeName}]`,"willNavigateListener caused early exit"),window.history.forward();return}if((0,t.OX)({prevTeamOrEnterpriseId:F.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:Q,prevRouteInfo:F.p.popstatePrevRouteInfo,routeName:k.routeName,params:k.params,reason:t.GB,uuid:q}),(0,Y.Wo)().info("ROUTES",`[${q}]`,`[${k.routeName}]`,"Navigated to new route"),F.p.prevNavigatedTeamOrEnterpriseId=Q,N&&typeof N.onEnter=="function"){const le=(0,l.getStoreInstanceByTeamId)(Q);N.onEnter.call(null,le.getState,null,window.location.pathname)}}),ee.apply(this,arguments)}c(ee,"_navigateAfterPopState");const j=c(()=>{window.addEventListener("popstate",Z)},"addPopStateListener");var ge=e(9733150292),ne=e(6329712420),ue=e(210422728),he=e(3080748521);j();function be(){let{store:fe,shouldSetFocus:se}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Q=(0,U.f)(window.location.pathname,{throwOnNoRoute:!1});if(Q&&se&&Q.routeName!==ne.o)return Q;if(!fe)return null;const k=(0,he.D8)(fe.getState()),N=(0,he.MC)(fe.getState()),$={routeName:k,params:N};return(0,t.EB)($)?$:null}c(be,"determineCurrentView");function xe(){return(0,t.Dd)(fe=>{let{nextTeamId:se,routeName:Q,params:k}=fe;(0,l.getStoreInstanceByTeamId)(se)&&(0,l.dispatchForTeamId)(se,(0,ue.w)({routeName:Q,params:k}))})}c(xe,"configureUpdateCurrentRoute");function Le(fe){const se=(0,ge._z)(fe,"lastRoute");return(0,t.EB)(se)?se:null}c(Le,"getLastRouteFromLocalConfig")},210422728:(x,A,e)=>{"use strict";e.d(A,{T:()=>s,w:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Navigate to a route");n.meta={name:"createAction",key:"createActionupdateCurrentRoute",description:"Navigate to a route"};const s=(0,t.Ay)("Set a value that represents whether the user navigated during a warm boot");s.meta={name:"createAction",key:"createActionsetUserNavigatedDuringWarmBoot",description:"Set a value that represents whether the user navigated during a warm boot"}},8204430196:(x,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(9113979368),s=e(2562405183),i=e(1030162945),l=e(2374999399),o=e(6818330210);function a(d){let{memberId:u,className:_,emoji:v,emojiSize:h,showTooltips:f,stopAnimations:I}=d;const p=(0,s.F3)(E=>(0,l.A)(E,u));if(!u||!v)return null;const{name:y=v,url:g=void 0}=p?(0,o.H)(v,(0,n.A)(p)?void 0:p):{};return t.createElement(i.Ay,{className:_,emojiSize:h||i.lw.SMALL,iconInTextMode:!0,isEmojiInlineWithText:!0,showTooltip:!!f,stopAnimations:!!I,text:y,url:g})}c(a,"CustomStatusEmoji"),a.displayName="CustomStatusEmoji";const r=t.memo(a)},6710730141:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(735940183),s=e(8026164541),i=e(9391594207),l=e(1345620242),o=e(2047021170);const a=new n.Ay("current_status");function r(_){let{className:v,expiration:h,time24:f}=_;if(!h)return null;const I=h*1e3,p=a.t("Until {expirationDate}",{expirationDate:(0,s.A)(I,"{status_expiration}",{do24hrTime:f,shouldCapitalize:!1})});return t.createElement("span",{className:v,"data-qa-status-expiration":h},p)}c(r,"CustomStatusExpiration"),r.displayName="CustomStatusExpiration";function d(_,v){let{memberId:h}=v;return{expiration:(0,l.A)(_,h||"")||0,time24:!!(0,o.ty)(_,"time24")}}c(d,"mapStateToProps");const u=(0,i.N)(d)(r)},5530660703:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(2562405183),s=e(1030162945),i=e(2374999399),l=e(7969928607);function o(r){let{memberId:d,className:u,emojiSize:_,showTooltips:v,stopAnimations:h,text:f}=r;const I=(0,n.F3)(p=>d?(0,i.A)(p,d):void 0);return f?t.createElement("span",{className:u,"data-qa":"custom_status_text"},t.createElement(l.A,{text:f,inputIsEscaped:!0,emojiSize:_||s.lw.MEDIUM,showTooltips:!!v,stopAnimations:!!h,emojiDisplayInfo:I})):null}c(o,"CustomStatusText"),o.displayName="CustomStatusText";const a=t.memo(o)},7278430876:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(3134334389),n=e(2562405183),s=e(5255740490),i=e(193084903),l=e(2312625946),o=e(1030162945),a=e(8204430196),r=e(2072540560),d=e(8276911661),u=e(8170643398),_=e(2689960678),v=e(5530660703);function h(){return h=Object.assign||function(M){for(var T=1;T<arguments.length;T++){var D=arguments[T];for(var C in D)Object.prototype.hasOwnProperty.call(D,C)&&(M[C]=D[C])}return M},h.apply(this,arguments)}c(h,"_extends");const f={noLinking:!1},I=c(M=>{let{stopAnimations:T=!1,noText:D=!1,className:C,memberId:m="",noLinking:O,showEmojiTooltip:P=!1,insertTextSpacing:R=!1,displayInMemberProfile:L=!1,emoji:V}=M;const B=(0,n.d4)(S=>(0,r.A)(S,m)),K=(0,n.d4)(S=>(0,u.fy)((0,d.nv)(S,m)));let b=_.t0;return O===!1&&(b=f),L?t.createElement("span",{className:C},t.createElement(a.A,{memberId:m,emoji:V,stopAnimations:T,showTooltips:P,emojiSize:o.lw.MEDIUM,className:"c-custom_status__emoji_in_member_profile"}),B&&t.createElement(v.A,h({memberId:m,className:(0,s.A)("margin_left_50","padding_right_50",{margin_right_100:K}),emojiSize:o.lw.SMALL,stopAnimations:T,text:D?"":B},b))):t.createElement("span",{className:C},t.createElement(a.A,{memberId:m,showTooltips:P,emojiSize:o.lw.SMALL,emoji:V,stopAnimations:T}),B&&t.createElement(v.A,h({memberId:m,className:R?"margin_left_50":"margin_left_25",emojiSize:o.lw.SMALL,stopAnimations:T,text:D?"":B},b)))},"CustomStatusTooltipContent");I.displayName="CustomStatusTooltipContent";const p=t.memo(I);var y=e(6710730141);const g=c(M=>{let{animated:T=!1,tooltip:D=!0,tipPosition:C,noText:m=!1,className:O,memberId:P="",noLinking:R,showEmojiTooltip:L=!1,insertTextSpacing:V=!1,displayInMemberProfile:B=!1}=M;const K=(0,n.d4)(S=>(0,i.A)(S,P)),b=(0,t.useCallback)(()=>t.createElement(t.Fragment,null,t.createElement(p,{className:"c-custom_status__tooltip",noText:m,memberId:P,noLinking:R,showEmojiTooltip:L,insertTextSpacing:V,displayInMemberProfile:B,emoji:K}),t.createElement(y.A,{className:"c-custom_status__expiration",memberId:P})),[P,m,R,L,V,B,K]);return K?D?t.createElement(l.Ay,{tip:b,position:C,zIndex:"above_fs","data-qa":"custom_status_tooltip"},t.createElement("span",{className:(0,s.A)("c-custom_status",O),"data-qa":"custom_status"},t.createElement(a.A,{memberId:P,showTooltips:!1,emojiSize:o.lw.SMALL,emoji:K,stopAnimations:!T}))):t.createElement(p,{className:(0,s.A)(O,"c-custom_status","c-custom_status--inline",{display_flex:B}),stopAnimations:!T,noText:m,memberId:P,noLinking:R,showEmojiTooltip:L,insertTextSpacing:V,displayInMemberProfile:B,emoji:K}):null},"CustomStatus");g.displayName="CustomStatus";const E=t.memo(g)},2486585453:(x,A,e)=>{"use strict";e.d(A,{A:()=>s,j:()=>n.A});var t=e(7278430876),n=e(6710730141);const s=t.A},9580887194:(x,A,e)=>{"use strict";e.d(A,{E:()=>l,a:()=>o});var t=e(9936232041),n=e(9609912577),s=e(6304789565),i=e(6440800009);const l=(0,s.Ay)("Opens the AddCustomEmojiModal for importing a custom emoji",(a,r,d)=>{let{emojiName:u,emojiUrl:_}=d;var v;a((0,n.A)({emojiNameSuggestion:u&&((v=(0,t.A)(u))===null||v===void 0?void 0:v.name),emojiUrl:_}))});l.meta={name:"createThunk",key:"createThunkopenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal for importing a custom emoji"};const o=(0,s.Ay)("Opens the AddCustomEmojiModal if an emoji can be imported",(a,r,d)=>{const u=r(),{event:_,emojiName:v,emojiUrl:h}=d;h&&(0,i.LU)(u,h,v)&&(_==null||_.preventDefault(),_==null||_.stopPropagation(),a(l(d)))});o.meta={name:"createThunk",key:"createThunkmaybeOpenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal if an emoji can be imported"}},8021873188:(x,A,e)=>{"use strict";e.d(A,{K:()=>o});var t=e(3134334389),n=e(735940183),s=e(8683010724),i=e(6440800009);const l=new n.Ay("import-external-emoji");function o(a){let{emojiUrl:r,emojiName:d}=a;return(0,i.tJ)(r,d)?t.createElement("div",{className:"margin_top_50"},t.createElement(s.A,{name:"right-click",inline:!0,size:"18"}),t.createElement("span",{className:"margin_left_25"},l.t("Right click to add to your organization"))):null}c(o,"ImportExternalEmojiTooltipInfo"),o.displayName="ImportExternalEmojiTooltipInfo"},6440800009:(x,A,e)=>{"use strict";e.d(A,{$N:()=>B,LU:()=>m,pg:()=>P,tJ:()=>O});var t=e(8701485242),n=e(4921059838),s=e(9936232041),i=e(2689960678),l=e(317660850),o=e(6790819894),a=e(3677514771),r=e(2757639362),d=e(6839188756),u=e(5795074931),_=e(6457401668),v=e(2562405183),h=e(2384831516),f=e(7606781622),I=e(5757070316),p=e(9608713960),y=e(6783791506),g=e(4813703725);const E=c(K=>{var b;return Array.isArray((b=K)===null||b===void 0?void 0:b.elements)},"hasElements"),M=c((K,b)=>(0,t.Ay)(K.emojiName,b.emojiName),"emojiNameSort"),T=new Set(["black_square","bowtie","cubimal_chick","dusty_stick","glitch_crab","piggy","pride","shipit","slack_call","slack","squirrel","thumbsup_all","white_square","simple_smile"]);function D(K){var b;const S=(b=(0,s.A)(K))===null||b===void 0?void 0:b.name;return!!S&&T.has(S)}c(D,"isBuiltInEmoji");function C(K,b,S){return decodeURIComponent(b).includes((0,r.w)())?!1:!(S&&((0,n.A)(K,S)||D(S)))}c(C,"isCustomEmoji");const m=(0,h.Mz)((K,b,S)=>{if(!(b&&(0,u.TZ)(K)&&C(K,b,S)&&(0,l.D)(K)))return!1;const H=(0,a.Yc)(K);var U;const F=(U=H==null?void 0:H.id)!==null&&U!==void 0?U:"",Y=(0,d.Ic)(H);return!!Y&&b.indexOf((0,d.k7)(F,Y))===-1&&b.indexOf(F.slice(1))===-1});m.meta={name:"createSelector",key:"createSelectorcanUserImportEmoji",description:(K,b,S)=>{if(!(b&&(0,u.TZ)(K)&&C(K,b,S)&&(0,l.D)(K)))return!1;const H=(0,a.Yc)(K);var U;const F=(U=H==null?void 0:H.id)!==null&&U!==void 0?U:"",Y=(0,d.Ic)(H);return!!Y&&b.indexOf((0,d.k7)(F,Y))===-1&&b.indexOf(F.slice(1))===-1}};function O(K,b){return(0,v.d4)(S=>m(S,K,b))}c(O,"useCanImportThisEmoji");function P(K){return(0,v.d4)(b=>K.find(S=>m(b,S==null?void 0:S.url,S==null?void 0:S.name)))}c(P,"useFindFirstImportEmojiFromArray");function R(K,b){for(const S of b||[])(0,y.E)(S)?S.display_url&&K.set(S.display_url,{emojiName:S.name,emojiUrl:S.display_url}):E(S)&&R(K,S.elements)}c(R,"collectMessageEmojis");function L(K,b){for(const{name:S,url:G}of b||[])G&&K.set(G,{emojiName:S,emojiUrl:G})}c(L,"collectMessageReactjis");const V=(0,o.F)((K,b)=>b,(K,b)=>(0,p.bk)(K,(0,I.J)(b)),(K,b)=>{const S=new Map;return L(S,b),R(S,K.blocks),[...S.values()].sort(M)}),B=(0,g.eI)((K,b)=>{let{channelId:S,ts:G}=b;if(!(0,l.D)(K)||!(0,u.TZ)(K))return i.Ml;const H=(0,f.Ld)(K,S,G);return!H||(0,_.aK)(H)?i.Ml:V(K,H).filter(U=>{let{emojiName:F,emojiUrl:Y}=U;return m(K,Y,F)})})},5892132962:(x,A,e)=>{"use strict";e.d(A,{Ep:()=>_,sc:()=>v});var t=e(9548888903),n=e(2233365467),s=e(1407713935);const i={name:"sf-opportunity",variation:"filled"},l={name:"sf-account",variation:"filled"},o={name:"sf-case",variation:"filled"},a={name:"sf-lead",variation:"filled"},r={name:"sf-contact",variation:"filled"},d={name:"sf-cloud",variation:"filled"},u={name:"headphones",variation:"filled"};function _(h){switch(h){case t.hM.Opportunity:return i;case t.hM.Account:return l;case t.hM.Lead:return a;case t.hM.Case:return o;case t.hM.Contact:return r;case t.hM.Org:default:return d}}c(_,"getSalesforceObjectTypeIconProps");function v(h){if(!(0,s.rI)(h))return null;const f=(0,n.LJ)(h);switch((0,n.fI)(f==null?void 0:f.record_id)){case t.B4.Huddle:return u;default:return null}}c(v,"getRecordChannelOverrideIconProps")},7244076749:(x,A,e)=>{"use strict";e.d(A,{b:()=>n});var t=e(4724591729);function n(){return(0,t.b3)()}c(n,"isSlackKitPlaygroundEnabled")},5868036555:(x,A,e)=>{"use strict";e.d(A,{Fv:()=>n,Lt:()=>r,NY:()=>i,Uk:()=>s,We:()=>l,ab:()=>o,bK:()=>a});var t=e(4761125736);function n(d){return(0,t._Z)(d,"workflow_composer")==="on"}c(n,"isWorkflowComposerEnabled");function s(d){return(0,t._Z)(d,"workflow_composer_ga_wishlist")==="on"}c(s,"isWorkflowComposerGAWishlistEnabled");function i(d){return(0,t._Z)(d,"workflow_file_dialog")==="on"||(0,t._Z)(d,"solutions")==="on"}c(i,"isWorfklowFileDialogEnabled");const l=c(d=>(0,t._Z)(d,"ask_slack_view")==="on","isAskSlackViewEnabled"),o=c(d=>(0,t._Z)(d,"slackbot_ai_memories")==="on","isSlackbotAiMemoriesEnabled"),a=c(d=>(0,t._Z)(d,"solutions")==="on"&&(0,t._Z)(d,"solutions_nux")==="on","isSolutionsNuxEnabled"),r=c(d=>(0,t._Z)(d,"solutions_template_admin_role")==="on","isSolutionsTemplateAdminRoleEnabled")},8005333273:(x,A,e)=>{"use strict";e.d(A,{n:()=>i});var t=e(1439563189),n=e(5597672932),s=e(4761125736);const i=c(l=>!(!(0,t.g)(l)||!((0,s._Z)(l,"custom_solution_creation")==="on")||!(0,n.xp)(l,"allow_custom_solution_templates")),"isCustomSolutionsEnabledForUser")},1212974695:(x,A,e)=>{"use strict";e.d(A,{d:()=>T,H:()=>D});var t=e(9706240641),n=e(3134334389),s=e(6122756707),i=e(9132066222),l=e(2255537657),o=e(4427921758),a=e(7245481391),r=e(7056498591),d=e(796111729),u=e(6304789565),_=e(9530687876),v=e(9101533895),h=e(3430841143);const f=(0,u.Ay)("updateListTabDefaultViewId",function(){var C=(0,t.coroutine)(function*(m,O,P){var R,L;const{label:V,value:B,targetTabId:K,currentTabId:b,defaultTabId:S,channelId:G}=P,H=(0,d.Ay)({getState:O}),U=O();if(!G)return;const F=(R=(0,v.OL)(U,G))===null||R===void 0||(L=R.properties)===null||L===void 0?void 0:L.tabs;if(!F)return;const Y=[...F],Z=Y.findIndex(ge=>K?ge.id===K:ge.id===b);if(Z<0)return;Y[Z].data={...Y[Z].data,lists_channel_tab_default_refine_view_id:B},Y[Z].label=V;const ee=(0,v.OL)(U,G),j={...ee,properties:{...ee.properties,tabs:Y}};m((0,h.F)({channel:j,reason:_.rd.SET_CHANNEL_PROPERTIES_TABS}));try{(yield m((0,r.k)({id:K||b||S||a.fY.Channel,channelId:G,label:V,reason:"updateListTabDefaultViewId",data:{...Y[Z].data,listsChannelTabDefaultRefineViewId:B}}))).ok||m((0,h.F)({channel:ee,reason:_.rd.SET_CHANNEL_PROPERTIES_TABS}))}catch(ge){throw m((0,h.F)({channel:ee,reason:_.rd.SET_CHANNEL_PROPERTIES_TABS})),H.error(new Error(`updateTabLabel error: ${ge}`)),ge}});return function(m,O,P){return C.apply(this,arguments)}}());f.meta={name:"createThunk",key:"createThunkupdateListTabDefaultViewId",description:"updateListTabDefaultViewId"};const I=(0,u.Ay)("Updates a channel tab label",function(){var C=(0,t.coroutine)(function*(m,O,P){var R;const L=(0,d.Ay)({getState:O}),V=O(),{tabId:B,label:K,reason:b="updateTabLabel",channelId:S}=P;if(!S||!B||!K)return;const G=(0,v.OL)(V,S);var H;const U=[...(H=G==null||(R=G.properties)===null||R===void 0?void 0:R.tabs)!==null&&H!==void 0?H:[]],F=U.find(ee=>ee.id===B);if(!F)return;F.label=K;const Y={...G},Z={...G,properties:{...G==null?void 0:G.properties,tabs:U}};m((0,h.F)({channel:Z,reason:_.rd.SET_CHANNEL_PROPERTIES_TABS}));try{const ee=yield m((0,r.k)({id:B,channelId:S,label:K,reason:b}));return ee.ok||m((0,h.F)({channel:Y,reason:_.rd.SET_CHANNEL_PROPERTIES_TABS})),ee}catch(ee){throw m((0,h.F)({channel:Y,reason:_.rd.SET_CHANNEL_PROPERTIES_TABS})),L.error(new Error(`updateTabLabel error: ${ee}`)),ee}});return function(m,O,P){return C.apply(this,arguments)}}());I.meta={name:"createThunk",key:"createThunkupdateTabLabel",description:"Updates a channel tab label"};var p=e(4131775356),y=e(7937864072),g=e(2562405183),E=e(6252535684),M=e(4761125736);const T=(0,n.createContext)({});function D(C){let{channelId:m,children:O,tabParams:P,currentTabId:R}=C;var L;const V=(0,g.d4)(ne=>(0,M._Z)(ne,"channel_default_tabs")==="on"),B=(0,g.d4)(ne=>(0,M._Z)(ne,"saved_channel_active_tabs")==="on"),K=(0,g.d4)(ne=>(0,E.M)(ne,m)),b=(0,g.d4)(ne=>(0,v.OL)(ne,m)),S=(0,s.wA)(),G=(0,y.A)(),H=(0,g.d4)(ne=>(0,l.G)(ne,{channelId:m,includeDisabled:!1})),U=V?(L=b.properties)===null||L===void 0?void 0:L.default_tab_id:"",F=B?K:"",Y=(0,i.Fi)(H,R)||(0,i.Fi)(H,F)||(0,i.Fi)(H,U)||(0,i.Fi)(H,a.fY.Channel),Z=(0,n.useCallback)(function(){var ne=(0,t.coroutine)(function*(ue){let{sourceIndex:he,destinationIndex:be}=ue;const xe=H[he],Le=H[he>be?be-1:be];return S((0,p.x)({targetTab:xe,afterTab:Le,channelId:m,isDefaultTab:V&&he===0}))});return function(ue){return ne.apply(this,arguments)}}(),[m,S,H,V]),ee=(0,n.useCallback)(function(){var ne=(0,t.coroutine)(function*(ue){const he=R||U||a.fY.Channel;return S(I({tabId:he,label:ue,channelId:m}))});return function(ue){return ne.apply(this,arguments)}}(),[m,R,U,S]),j=(0,n.useCallback)(function(){var ne=(0,t.coroutine)(function*(ue){let{label:he,value:be,targetTabId:xe}=ue;return S(f({label:he,value:be,targetTabId:xe,currentTabId:R,defaultTabId:U,channelId:m}))});return function(ue){return ne.apply(this,arguments)}}(),[R,U,S,m]),ge=(0,n.useMemo)(()=>({tabParams:P,tabSchema:H,channelId:m,currentTab:Y,updateTabOrder:Z,updateTabLabel:ee,updateListTabDefaultViewId:j}),[P,H,m,Y,Z,ee,j]);return Y?n.createElement(T.Provider,{value:ge},n.createElement(o.j.Provider,{value:ge},O)):(G.error(new Error("No current channel tab selected.")),null)}c(D,"TabbedChannelProvider"),D.displayName="TabbedChannelProvider"},4427921758:(x,A,e)=>{"use strict";e.d(A,{j:()=>n});var t=e(6152845331);const n=(0,t.Ay)("Tabbed channel",{})},4131775356:(x,A,e)=>{"use strict";e.d(A,{x:()=>g});var t=e(9706240641),n=e(3367239067),s=e(166097325),i=e(9132066222),l=e(7245481391),o=e(1783582283),a=e(796111729),r=e(735940183),d=e(6304789565),u=e(9530687876),_=e(9101533895),v=e(3430841143),h=e(4347488242),f=e(5534420337);const I=(0,d.Ay)(u.rd.SET_CHANNEL_PROPERTIES_DEFAULT_TAB_ID,(E,M,T)=>{let{channelId:D,defaultTabId:C}=T;const m=M(),O=!1,P=(0,_.OL)(m,D,O);if(!D||!P)return;let R;try{R=JSON.stringify({default_tab_id:C})}catch(V){(0,f.Ay)({getState:M}).error(V,"failed serializing new properties");return}const L={...P,properties:{...P==null?void 0:P.properties,default_tab_id:C}};return E((0,v.F)({channel:L,reason:u.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT})),E((0,h.D)({channelId:D,props:R,reason:"set_channel_canvas_default_tab_id"})).then(()=>{E((0,v.F)({channel:L,reason:u.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT}))}).catch(V=>{E((0,v.F)({channel:P}))})});I.meta={name:"createThunk",key:"createThunksetChannelPropertiesDefaultTabId",description:u.rd.SET_CHANNEL_PROPERTIES_DEFAULT_TAB_ID};var p=e(4761125736);const y=new r.Ay("tabbed-channel"),g=(0,d.Ay)("Updates channel tab order",function(){var E=(0,t.coroutine)(function*(M,T,D){var C;const m=T(),O=(0,a.Ay)({getState:T}),{targetTab:P,afterTab:R,channelId:L,optimisticUpdate:V=!0,isDefaultTab:B=!1}=D;if(!(0,i.g3)(P))return;const K=(0,_.OL)(m,L,!1);if(!K)return;const b=K==null||(C=K.properties)===null||C===void 0?void 0:C.tabs,S=c(j=>{M((0,v.F)({channel:{...K,properties:{...K==null?void 0:K.properties,tabs:j??b}},reason:u.rd.SET_CHANNEL_PROPERTIES_TABS}))},"setTabs");var G;const H=(G=b==null?void 0:b.findIndex(j=>j.id===P.id))!==null&&G!==void 0?G:0;var U;const F=(U=b==null?void 0:b.findIndex(j=>j.id===(R==null?void 0:R.id)))!==null&&U!==void 0?U:0;let Y=0;H===-1&&P.type===l.Xy.ChannelCanvas?R?Y=F+1:Y=0:F>-1&&(Y=H>F?F+1:F);const Z=(0,p._Z)(m,"channel_default_tabs")==="on",ee=[...b||[]];if(V){const[j]=(0,n.A)(ee,ne=>ne.id===P.id);if(j)ee==null||ee.splice(Y,0,j);else if(P.type===l.Xy.ChannelCanvas)Y=R?F+1:0,ee==null||ee.splice(Y,0,{id:l.fY.ChannelCanvas,type:l.Xy.ChannelCanvas,label:y.t("Canvas")});else{O.error(new Error(`updateTabOrder error: targetTab ${P.id} ${P.type} not found for ${K.id}`));return}const ge={...K,properties:{...K==null?void 0:K.properties,tabs:ee}};M((0,v.F)({channel:ge,reason:u.rd.SET_CHANNEL_PROPERTIES_TABS}))}try{Z&&(R?B&&(yield M(I({channelId:L,defaultTabId:""}))):yield M(I({channelId:L,defaultTabId:P.id})));const j=yield M((0,o.i)({channelId:L,id:P.id,...!!R&&!(0,i.PN)(R)&&{after:R==null?void 0:R.id},reason:"updateTabOrder"}));if(!j.ok)return S(),j;const ge=j==null?void 0:j.tabs;if(V&&!(0,s.A)(ge,ee)&&S(ge),!V){const ne={...K,properties:{...K==null?void 0:K.properties,tabs:ge}};M((0,v.F)({channel:ne}))}return j}catch(j){throw S(),O.error(new Error(`updateTabOrder error: ${j}`)),j}});return function(M,T,D){return E.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkupdateTabOrder",description:"Updates channel tab order"}},73855031:(x,A,e)=>{"use strict";e.d(A,{n:()=>d});var t=e(3134334389),n=e(5255740490),s=e(2036354333),i=e(8683010724),l=e(6627147571),o=e.n(l);function a(){return a=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},a.apply(this,arguments)}c(a,"_extends");const r={item:"accordion-list-item",itemHeader:"accordion-list-item-header",itemDescription:"accordion-list-item-description",expandedIcon:"accordion-list-item-expanded-icon",imageCaret:"accordion-list-item-image-caret"};function d(u){let{accordionItems:_,className:v,showImageCaret:h,autoClogProps:f,showItemBorder:I=!0,itemClassName:p="",itemHeaderClassName:y="",itemHeaderButtonClassName:g="",itemDescriptionClassName:E="",expandedIconClassName:M="",collapsedIconClassName:T="",imageCaretClassName:D="",applyCustomAnimation:C=!1}=u;const[m,O]=(0,t.useState)(!1),[P,R]=(0,t.useState)(_.map((F,Y)=>({...F,isExpanded:Y===0}))),[L,V]=(0,t.useState)(""),B=(0,t.useRef)({}),K=(0,t.useCallback)((F,Y)=>()=>{m||O(!0),!Y.isExpanded&&(R(P.map((Z,ee)=>({...Z,isExpanded:ee===F}))),V(Y.id),typeof Y.onExpand=="function"&&Y.onExpand())},[P,m]),b=(0,t.useCallback)(F=>Y=>{B.current[F]=Y},[]);(0,t.useEffect)(()=>{if(L&&B.current[L]){var F;(F=B.current[L])===null||F===void 0||F.focus()}},[L]);const S=c(F=>({...f,onClick:{enableClogAction:!F.isExpanded},elementValue:F.id}),"getAutoClogProps"),G=(0,t.useCallback)((F,Y)=>t.createElement("h2",{className:(0,n.A)(o().header,{[y]:!!y,[o().customItemTextAnimation]:C&&Y&&m,[o().customItemText]:C&&Y&&!m}),"data-qa":r.itemHeader},F),[C,y,m]),H=(0,t.useCallback)((F,Y,Z)=>{let ee=(0,n.A)({[o().defaultShowDescriptionAnimation]:Y&&m,[o().defaultShowDescription]:Y&&!m});return C&&(ee=(0,n.A)({[o().customItemTextAnimation]:C&&Y&&m,[o().customItemText]:C&&Y&&!m})),t.createElement("div",{className:ee},t.createElement("div",{className:o().description},t.createElement("div",{id:`description-${Z}`,"aria-hidden":!Y,"data-qa":r.itemDescription,className:(0,n.A)({[E]:!!E})},F)))},[C,E,m]),U=C?{[o().customItemTransition]:C}:{};return t.createElement("ul",{className:(0,n.A)(o().accordion,v)},P.map((F,Y)=>t.createElement("li",{key:F.id,"data-qa":r.item,className:(0,n.A)(o().item,{[o().expanded]:F.isExpanded,[o().noBorder]:!I,...U},p)},t.createElement(s.A,{"aria-expanded":F.isExpanded,"aria-controls":`description-${Y}`,className:(0,n.A)(o().itemHeader,{[g]:!!g}),onClick:K(Y,F),autoClogProps:S(F),ref:b(F.id),"aria-label":typeof F.header=="string"?F.header:void 0,"aria-describedby":F.isExpanded?`description-${Y}`:void 0},t.createElement("div",{className:o().iconSpacer},F.isExpanded?t.createElement("span",{className:(0,n.A)(o().expandedIcon,{[M]:!!M}),"data-qa":r.expandedIcon},F.iconProps?t.createElement(i.A,a({},F.iconProps)):t.createElement(i.A,{name:"check",variation:"filled"})):t.createElement("span",{className:(0,n.A)({[T]:!!T})},t.createElement(i.A,{name:"caret-right",variation:"filled"}))),t.createElement("div",{className:"display_flex flex_direction_column"},G(F.header,F.isExpanded),H(F.description,F.isExpanded,Y))),h&&F.isExpanded&&t.createElement("div",{className:(0,n.A)(o().imageCaret,D),"data-qa":r.imageCaret}))))}c(d,"Accordion"),d.displayName="Accordion"},7156540029:(x,A,e)=>{"use strict";e.d(A,{K8:()=>s,Q1:()=>t});const t=20,n={FETCH:"activity_fetch",VIEW_LOAD:"activity_view_load",VIEW_UPDATED:"activity_view_updated"},s={PREF:"activity_view",PAGE:"page",FLEXPANE:"flexpane"}},9509635375:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(2562405183),n=e(603616571),s=e(735940183),i=e(5255740490),l=e(3134334389),o=e(1206744593),a=e(5624319675);function r(){return r=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},r.apply(this,arguments)}c(r,"_extends");const d=new s.Ay("members");function u(v){let{className:h,inverse:f=!1,isWorkflow:I=!1,isLegacyWorkflow:p=!1,isAiApp:y=!1,...g}=v;const E=(0,t.d4)(n.TX),M=(0,t.d4)(o.x$),T=(0,t.d4)(a.mr);let D=d.t("WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"});p&&M&&(D=d.t("LEGACY WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"})),E&&I?D=d.t("BETA"):T&&y?D=d.t("AGENT"):I||(D=d.t("APP"));const C=(0,i.A)(h,"c-app_badge",{"c-app_badge--inverse":f});return l.createElement("span",r({},g,{className:C,"data-stringify-suffix":" "}),D)}c(u,"AppBadge"),u.displayName="AppBadge";const _=(0,l.memo)(u)},5874162200:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(735940183);const n=new t.Ay("audio_player");function s(l){const o=Math.floor(l/3600),a=Math.floor((l-o*3600)/60),r=Math.floor(l-o*3600-a*60);return o>0?n.t("{hours} {hours, plural, =1 {hour} other {hours}}, {minutes} {minutes, plural, =1 {minute} other {minutes}}, {seconds} {seconds, plural, =1 {second} other {seconds}}",{seconds:r,minutes:a,hours:o}):a>0?n.t("{minutes} {minutes, plural, =1 {minute} other {minutes}}, {seconds} {seconds, plural, =1 {second} other {seconds}}",{seconds:r,minutes:a}):n.t("{seconds} {seconds, plural, =1 {second} other {seconds}}",{seconds:r})}c(s,"secondsToSpokenTime");const i=s},7999544567:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(297247517);function n(s){if((0,t.P)(s)){const i=s&&s.text&&s.text.trim();if(i)return i.length}return 0}c(n,"__WEBPACK_DEFAULT_EXPORT__")},5577180258:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(45851552),n=e(5404505308),s=e(6783791506),i=e(297247517),l=e(8389327410),o=e(5305906809),a=e(7999544567);const{_EMOJI_GROUP:r}=l.Lv;function d(_,v,h,f,I,p,y){const g=_.slice(p,y),E=p+(0,t.A)(g,s.E),M=p+(0,n.A)(g,s.E)+1;_.splice(E,M-E,{type:r,name:v,size:h,displayAlias:f,skinTone:I,elements:_.slice(E,M)})}c(d,"insertEmojiGroup");function u(_){let v,h,f,I,p,y=_.length-1;for(;y>=-1;){const E=_[y];if(f=f??y,h=h??0,(0,s.E)(E))E.name===v&&E.displayAlias===I&&E.skinTone===p?h+=1:(h>=o.uz&&d(_,v,h,I,p,y+1,f+1),v=E.name,I=E.displayAlias,p=E.skinTone,f=y,h=1);else if(!(0,i.P)(E)||(0,a.A)(E)!==0){var g;h>=o.uz&&d(_,v,h,I,p,y+1,f+1),v=void 0,I=void 0,p=void 0,f=void 0,h=void 0,!((g=E)===null||g===void 0)&&g.elements&&u(E.elements)}y-=1}return _}c(u,"groupEmojis")},7592430824:(x,A,e)=>{"use strict";e.d(A,{N:()=>i,u:()=>s});var t=e(3134334389),n=e(6152845331);const s=(0,n.Ay)("Embedded UI Provider",null),i=t.createContext({embeddedUIContainerElement:null,embeddedUiData:null,inChannelCanvas:!1,slackFileId:void 0,docEmbed:void 0})},5645915081:(x,A,e)=>{"use strict";e.d(A,{Zq:()=>o,zF:()=>n,zf:()=>a});var t=e(3262078016),n;(function(r){r.PARAGRAPH="paragraph",r.H1="h1",r.H2="h2",r.H3="h3",r.CHECK_LIST="check-list",r.CHECK_LIST_TOGGLE="check-list-toggle",r.ORDERED_LIST="ordered-list",r.BULLET_LIST="bullet-list",r.BLOCKQUOTE="blockquote",r.CODE_BLOCK="code-block"})(n||(n={}));const s=[[t.DocBlockStyle.PLAIN,n.PARAGRAPH],[t.DocBlockStyle.H1,n.H1],[t.DocBlockStyle.H2,n.H2],[t.DocBlockStyle.H3,n.H3],[t.DocBlockStyle.LIST_CHECKLIST,n.CHECK_LIST],[t.DocBlockStyle.LIST_NUMBERED,n.ORDERED_LIST],[t.DocBlockStyle.LIST_BULLET,n.BULLET_LIST],[t.DocBlockStyle.BLOCKQUOTE,n.BLOCKQUOTE],[t.DocBlockStyle.CODE,n.CODE_BLOCK]],i=new Map(s),l=new Map(s.map(r=>[r[1],r[0]]));function o(r){return i.get(r)}c(o,"blockStyleToFormat");function a(r){return l.get(r)}c(a,"formatToBlockStyle")},4843305308:(x,A,e)=>{"use strict";e.d(A,{P:()=>s});var t=e(7731278967),n=e(9084547259);const s=c(i=>{switch(i){case t.r.FILE:return{name:"attachment"};case t.r.IMAGE:return{name:"image"};case t.r.CHECK_LIST:return{name:"checkbox"};case t.r.CHECK_LIST_TOGGLE:return{name:"checkbox"};case t.r.BULLET_LIST:return{name:"bulleted-list"};case t.r.ORDERED_LIST:return{name:"numbered-list"};case t.r.VIDEO_CLIP:return{name:"video"};case t.r.AUDIO_CLIP:return{name:"microphone"};case t.r.DIVIDER:return{name:"divider"};case t.r.TABLE:return{name:"spreadsheet"};case t.r.LAYOUT_2_COLUMNS:return{name:"column-two"};case t.r.LAYOUT_3_COLUMNS:return{name:"column-three"};case t.r.PINS:return{name:"pin"};case t.r.SMART_SUMMARY:case t.r.RECENT_FILES:case t.r.ACTIVE_DISCUSSIONS:case t.r.CHANNEL_HUDDLES:return{name:"magic-wand"};case t.r.BLOCKQUOTE:return{name:"quote"};case t.r.CODE_BLOCK:return{name:"code-block"};case n.L.CODE:return{name:"code"};case t.r.PARAGRAPH:return{name:"paragraph"};case t.r.H1:return{name:"heading-1"};case t.r.H2:return{name:"heading-2"};case t.r.H3:return{name:"heading-3"};case t.r.CANVAS:return{name:"canvas"};case t.r.WORKFLOW:return{name:"play"};case t.r.LIST:return{name:"lists"};case t.r.WIDGET:return{name:"blocks"};case t.r.SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.USER_PROFILE_UNFURL:return{name:"user"};case t.r.PLACEHOLDER_CARD_SUBMENU:return{name:"add-placeholder"};case t.r.PLACEHOLDER_CARD_VIDEO:return{name:"video"};case t.r.PLACEHOLDER_CARD_PROFILE:return{name:"user"};case t.r.PLACEHOLDER_CARD_AUDIO:return{name:"microphone"};case t.r.PLACEHOLDER_CARD_WORKFLOW:return{name:"play"};case t.r.PLACEHOLDER_CARD_IMAGE:return{name:"image"};case t.r.PLACEHOLDER_CARD_CANVAS:return{name:"canvas"};case t.r.PLACEHOLDER_CARD_FILE:return{name:"attachment"};case t.r.PLACEHOLDER_CARD_LINK:return{name:"link"};case t.r.PLACEHOLDER_CARD_LIST:return{name:"lists"};case t.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.DATE_MENTION:return{name:"calendar"};case t.r.AI_ASSISTANT:return{name:"sparkles"};case t.r.CALLOUT:return{name:"callout"};default:return{name:"help"}}},"getQuipButtonIcon")},8079225585:(x,A,e)=>{"use strict";e.d(A,{O:()=>l});var t=e(735940183),n=e(7731278967),s=e(9084547259);const i=new t.Ay("slack_docs"),l=c(function(o){let{experimentCanvasInsertWorkflowMenuGroupOn:a,experimentCanvasSmartCardsGroupOn:r,experimentWidgetsGroupOn:d}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(o){case n.r.FILE:return i.t("File");case n.r.IMAGE:return i.t("Image");case n.r.CHECK_LIST:return i.t("Check list");case n.r.CHECK_LIST_TOGGLE:return i.t("Check list");case n.r.BULLET_LIST:return i.t("Bulleted list");case n.r.ORDERED_LIST:return i.t("Ordered list");case n.r.VIDEO_CLIP:return i.t("Record video clip");case n.r.AUDIO_CLIP:return i.t("Record audio clip");case n.r.DIVIDER:return i.t("Divider");case n.r.PINS:return i.t("Pins");case n.r.SMART_SUMMARY:return r?i.t("AI Channel Summary"):"";case n.r.RECENT_FILES:return r?i.t("Recent Files"):"";case n.r.ACTIVE_DISCUSSIONS:return r?i.t("Active Discussions"):"";case n.r.CHANNEL_HUDDLES:return r?i.t("Huddles"):"";case n.r.BLOCKQUOTE:return i.t("Blockquote");case n.r.CODE_BLOCK:return i.t("Code block");case n.r.PARAGRAPH:return i.t("Paragraph");case n.r.H1:return i.t("Big heading");case n.r.H2:return i.t("Medium heading");case n.r.H3:return i.t("Small heading");case n.r.CANVAS:return i.t("Canvas");case n.r.WORKFLOW:return a?i.t("Workflow"):"";case s.L.CODE:return i.t("Code");case n.r.TABLE:return i.t("Table");case n.r.LAYOUT_2_COLUMNS:return i.t("2 columns",{fallbackHash:"8d8f0f25822179c33b917613ec2d022ef593c340",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LAYOUT_3_COLUMNS:return i.t("3 columns",{fallbackHash:"b505f5f09f70ff9d216f1c3cbb5c1a8a4e82179b",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LIST:return i.t("List");case n.r.WIDGET:return d?i.t("Widget"):"Widget";case n.r.USER_PROFILE_UNFURL:return i.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.SALESFORCE_RECORD:return i.t("Salesforce record");case n.r.PLACEHOLDER_CARD_VIDEO:return i.t("Video",{fallbackHash:"bc17c1f0179a888f2a7e8389f67d4f2cf5cf4531",fallbackHashNs:"slack_kit_video"});case n.r.PLACEHOLDER_CARD_PROFILE:return i.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.PLACEHOLDER_CARD_AUDIO:return i.t("Audio",{fallbackHash:"acdac205f5e24cb75113c4b281a2c13f08b75159",fallbackHashNs:"files"});case n.r.PLACEHOLDER_CARD_WORKFLOW:return i.t("Workflow",{fallbackHash:"d7a484140f5f9f7f5427e1f2c44dbfc1d3ad9eea",fallbackHashNs:"slack_docs"});case n.r.PLACEHOLDER_CARD_IMAGE:return i.t("Image");case n.r.PLACEHOLDER_CARD_CANVAS:return i.t("Canvas");case n.r.PLACEHOLDER_CARD_FILE:return i.t("File");case n.r.PLACEHOLDER_CARD_LINK:return i.t("Link");case n.r.PLACEHOLDER_CARD_LIST:return i.t("List");case n.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return i.t("Salesforce record");case n.r.DATE_MENTION:return i.t("Date",{fallbackHash:"eb9a4bc1c0c153e4e4b042a79113b815b7e3021d",fallbackHashNs:"calendar"});case n.r.CALLOUT:return i.t("Callout",{fallbackHash:"f3e792e7d41d161d609362af9fd451593481fd5d"});case n.r.AI_ASSISTANT:return i.t("AI assistant",{fallbackHash:"fc7ba35433ce677dc7b72889cebdbbaf99c6d596",fallbackHashNs:"ai_apps"});default:return o}},"getQuipButtonLabel")},9084547259:(x,A,e)=>{"use strict";e.d(A,{B:()=>i,L:()=>n});var t=e(3262078016),n;(function(l){l.BOLD="bold",l.STRIKE="strike",l.ITALIC="italic",l.CODE="code",l.LINK="link",l.UNDERLINE="underline"})(n||(n={}));const s=new Map([[t.DocInlineStyle.BOLD,n.BOLD],[t.DocInlineStyle.STRIKETHROUGH,n.STRIKE],[t.DocInlineStyle.ITALIC,n.ITALIC],[t.DocInlineStyle.CODE,n.CODE],[t.DocInlineStyle.LINK,n.LINK]]);function i(l){return s.get(l)}c(i,"inlineStyleToFormat")},7731278967:(x,A,e)=>{"use strict";e.d(A,{r:()=>s});var t=e(5645915081),n;(function(i){i.UNKNOWN="unknown",i.TITLE="title",i.FILE="file",i.IMAGE="image",i.VIDEO_CLIP="video-clip",i.AUDIO_CLIP="audio-clip",i.DIVIDER="divider",i.TABLE="table",i.SHORTCUT="shortcut",i.MENU_SEPARATOR="menu-separator",i.PINS="pins",i.BOOKMARKS="bookmarks",i.USER_UNFURL="user-unfurl",i.CANVAS_UNFURL="canvas-unfurl",i.MESSAGE_UNFURL="message-unfurl",i.PUBLIC_LINK_UNFURL="public-link-unfurl",i.SHORTCUT_UNFURL="shortcut-unfurl",i.USER_PROFILE_UNFURL="user-profile-unfurl",i.UNFURL="unfurl",i.CANVAS="canvas",i.GENERIC="generic",i.WORKFLOW="workflow",i.FILE_UPLOAD_BLOCKED_MESSAGE_BANNER="file-upload-blocked-message-banner",i.SMART_SUMMARY="smart-summary",i.RECENT_FILES="recent-files",i.ACTIVE_DISCUSSIONS="active-discussions",i.CHANNEL_HUDDLES="channel-huddles",i.LIST="list",i.WIDGET="widget",i.LAYOUT_2_COLUMNS="layout-2-columns",i.LAYOUT_3_COLUMNS="layout-3-columns",i.PLACEHOLDER_CARD_SUBMENU="placeholder-card-submenu",i.PLACEHOLDER_CARD_VIDEO="placeholder-card-video",i.PLACEHOLDER_CARD_PROFILE="placeholder-card-profile",i.PLACEHOLDER_CARD_AUDIO="placeholder-card-audio",i.PLACEHOLDER_CARD_WORKFLOW="placeholder-card-workflow",i.PLACEHOLDER_CARD_IMAGE="placeholder-card-image",i.PLACEHOLDER_CARD_CANVAS="placeholder-card-canvas",i.PLACEHOLDER_CARD_FILE="placeholder-card-file",i.PLACEHOLDER_CARD_LINK="placeholder-card-link",i.PLACEHOLDER_CARD_LIST="placeholder-card-list",i.PLACEHOLDER_CARD_SALESFORCE_RECORD="placeholder-card-salesforce-record",i.SALESFORCE_RECORD="salesforce-record",i.DATE_MENTION="date-mention",i.CALLOUT="callout",i.AI_ASSISTANT="ai-assistant"})(n||(n={}));const s={...t.zF,...n}},1069376685:(x,A,e)=>{"use strict";e.d(A,{D:()=>t});var t;(function(n){n.SpecificMembers="add-specific-members",n.AllMembers="add-all-members"})(t||(t={}))},8414606991:(x,A,e)=>{"use strict";e.d(A,{v:()=>o});var t=e(3134334389),n=e(5255740490),s=e(207659888),i=e(8683010724),l=e(1610251172);const o=c(a=>{let{type:r,spacing:d="medium"}=a;const u=(0,n.A)("three_fourths_opacity",{margin_right_0:d==="none",margin_right_25:d==="small",margin_right_50:d==="medium"});return r===s.VZ.Channels||r===s.VZ.OrgChannels?t.createElement(l.A,{type:"channel",size:"inherit",className:u}):r===s.VZ.DirectMessages?t.createElement(l.A,{type:"dm",size:"inherit",className:u}):r===s.VZ.RecentApps?t.createElement(l.A,{type:"gn-menu",size:"inherit",className:u}):r===s.VZ.SlackConnect||r===s.VZ.SharedChannels?t.createElement(l.A,{type:"shared-channels-outline",size:"inherit",className:u}):r===s.VZ.Stars?t.createElement(l.A,{type:"star-o",size:"inherit",className:u}):r===s.VZ.UserGroup?t.createElement("div",{className:(0,n.A)("c-icon","c-icon--inherit",u)},t.createElement(i.A,{variation:"filled",name:"user-groups"})):t.createElement(l.A,{type:"star-o",size:"inherit",className:u})},"InlineChannelSectionFallbackIcon");o.displayName="InlineChannelSectionFallbackIcon"},126225536:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(6122756707),s=e(5255740490),i=e(4308550795),l=e(1030162945),o=e(207659888),a=e(863162513),r=e(1033870301),d=e(8414606991);function u(v){let{channelSection:h,className:f,spacing:I="medium",showIcon:p=!0}=v;const g=(0,n.wA)()((0,r.i1)({channelSection:h})),E=g&&g.split(" "),M=E&&E[0],T=E&&(E.length>1?` ${E.slice(1).join(" ")}`:null),D=c(()=>{if(!p)return null;if(h.type===o.VZ.UserGroup)return t.createElement(d.v,{type:h.type,spacing:I});const C=(0,s.A)({margin_right_0:I==="none",margin_right_25:I==="small",margin_right_50:I==="medium"});return h.emoji?t.createElement(l.Ay,{className:C,shouldFallbackOnLoadError:!0,text:h.emoji,stopAnimations:!0,emojiSize:l.lw.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0,renderEmojiFallback:!0}):h.type===o.VZ.ExternalWorkspace?t.createElement(i.A,{workspaceId:(0,a.de)(h.id),size:15,className:C}):t.createElement(d.v,{type:h.type,spacing:I})},"getIcon");return D.displayName="getIcon",t.createElement("span",{className:(0,s.A)("p-inline_channel_section",f)},t.createElement("span",{className:"p-inline_channel_section__lockup"},D(),M),T)}c(u,"InlineChannelSection"),u.displayName="InlineChannelSection";const _=u},4308550795:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(5255740490),s=e(2562405183),i=e(9950739645),l=e(698013937),o=e(3391133100),a=e(5865611660),r=e(3677514771),d=e(5672691263),u=e.n(d);const _=20,v=.8,h=.2,f={width:"auto"};function I(g){let{id:E,size:M,spacing:T}=g;const D=`${Math.ceil(M/2-1)}px`,C=`${M}px`,m=`${T}px`;return t.createElement("svg",{className:"sr-only"},t.createElement("mask",{id:E},t.createElement("rect",{x:D,y:D,width:C,height:C,rx:m,ry:m,fill:"white"})))}c(I,"SecondaryIconMask"),I.displayName="SecondaryIconMask";function p(g){let{size:E=_,className:M,workspaceId:T,externalWorkspaceHostId:D}=g;const C=(0,t.useMemo)(()=>`scw-icon-mask-${(0,o.r9)()}`,[]),m=(0,t.useMemo)(()=>({mask:`url(#${C}) exclude, linear-gradient(#000 0 0)`}),[C]),O=Math.floor(E*v),P=Math.floor(E*h),R=(0,t.useMemo)(()=>({marginRight:`-${P}px`,marginBottom:`-${P}px`}),[P]);return t.createElement("span",{style:f,className:(0,n.A)(M,u().container)},t.createElement("span",{style:m,className:u().primaryIcon},t.createElement(l.A,{id:T,size:E,allowTeamInitials:!0})),t.createElement("span",{style:R,className:u().secondaryIcon},t.createElement(l.A,{id:D,size:O,allowTeamInitials:!0})),t.createElement(I,{id:C,size:O,spacing:P}))}c(p,"ExternalWorkspaceIconStack"),p.displayName="ExternalWorkspaceIconStack";function y(g){let{size:E=_,className:M,workspaceId:T}=g;const D=(0,s.d4)(m=>(0,r._J)(m,T)),C=(0,s.d4)(m=>(0,a.m)(m,D));return(0,i.N)(D)?C?t.createElement(p,{workspaceId:T,externalWorkspaceHostId:C,size:E,className:M}):t.createElement(l.A,{id:T,size:E,className:M,allowTeamInitials:!0}):null}c(y,"ExternalWorkspaceIcon"),y.displayName="ExternalWorkspaceIcon"},9399618736:(x,A,e)=>{"use strict";e.d(A,{AV:()=>r,Cu:()=>v,Gu:()=>a,g4:()=>u,qn:()=>d});var t=e(4423055085),n=e(796111729),s=e(6188550760);let i=1,l=1;const o=(0,n.Wo)({label:"HISTORY-NAVIGATION"}),a=c(()=>{l!==i&&(o.info("Incrementing the users current position in the history stack"),l+=1)},"onNavigateForward"),r=c(()=>{l!==1&&(o.info("Decrementing the users current position in the history stack"),l-=1)},"onNavigateBack"),d=c(()=>l===1,"isBackDisabled"),u=c(()=>l===i,"isForwardDisabled");function _(){o.info("Adding route to the history stack"),l+=1,i=l}c(_,"incrementHistoryLength");function v(f){let{shouldReplaceState:I,reason:p}=f;I||p!==s.GB&&_()}c(v,"maybeIncrementHistoryLength"),(0,t.ul)("history",{getHistoryLength:()=>i,getHistoryIndex:()=>l});const h={maybeIncrementHistoryLength:v}},5670315214:(x,A,e)=>{"use strict";e.d(A,{Hu:()=>h,OJ:()=>m,q8:()=>D,vU:()=>C,wZ:()=>O});var t=e(6249041335),n=e(735940183),s=e(4813703725),i=e(5597672932),l=e(462591818),o=e(6565762531),a=e(1223723593),r=e(4808464886),d=e(3677514771),u=e(6470070112),_=e(6946629059),v=e(6790819894);const h={video:"video",audio:"audio",profileFieldOptions:"profile_field_options"},f=new n.Ay("huddles"),I=c((P,R)=>({video:[...P&&P.video?P.video:[]],audio:[...!R&&P&&P.audio?P.audio:[]],profile_field_options:[]}),"getInnerCallsAppsFromTeamPref"),p=c(P=>{const R=P.reduce((V,B)=>(Object.entries(B).forEach(K=>{let[b,S]=K;(b==="video"||b==="audio")&&(V[b]=V[b]?[...V[b],...S]:[...S])}),V),{}),L={video:[],audio:[]};return Object.entries(R).forEach(V=>{let[B,K]=V;(B==="video"||B==="audio")&&(L[B]=K.filter((b,S,G)=>S===G.findIndex(H=>H.id===b.id&&H.id!==void 0)))}),L},"combineCallApps"),y=c(P=>{const L=(0,d.FR)(P).map(B=>(0,i.xp)(P,"calls_apps",B.id)).filter(_.b);return p(L)},"retrieveCallsAppsForUnifiedOrg"),g=c(P=>(0,r.ss)(P)?y(P):(0,i.xp)(P,"calls_apps"),"retrieveCallsAppsFromPrefs"),E=c((P,R)=>{const L=g(P);if(R){var V;const B=L==null||(V=L.video)===null||V===void 0?void 0:V.findIndex(K=>K.id===l.rq);B>=0&&L.video.splice(B,1)}return L},"filterCallsAppsFromTeamPref"),M=(0,s.ik)((P,R)=>E(P,R),P=>I(P,!1)),T=(0,s.ik)((P,R)=>E(P,R),P=>I(P,!0)),D=c(function(P){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?T(P,!0):M(P,!0)},"getCallsAppsFromTeamPref"),C=(0,v.F)(D,u.pt,(P,R)=>{const L={},V=P&&P.video?P.video:[],B=P&&P.audio?P.audio:[],K=f.t("Start a huddle"),b=R?[{id:"A01",name:K,image:"/marketing/img/homepage/icons/huddle-icon.png"}]:[];return[...V,...B,...b].forEach(S=>{let G;S.id===l.rq?G={id:S.id,name:S.name,image:S.image}:["A5GE9BMQC","A649AA069","A5W4BRDNX","ARQS1U88Y","ARUFE7YMU"].findIndex(H=>S.id===H)!==-1?G={id:S.id,name:S.name,image:"/marketing/img/homepage/icons/zoom-icon.png"}:G=S,L[G.id]=G}),L}),m=c(P=>{let{callsApp:R,memberPhoneNumber:L,hideVideoApps:V=!1}=P;const B=[];return R&&(!V&&R.video&&B.push(...R.video.map(K=>({...K,type:a.JG.Video}))),R.audio&&(0,o.A)((0,t.A)(L))&&B.push(...R.audio.map(K=>({...K,type:a.JG.Audio})))),B},"getCallAppList"),O=c(P=>{const R=E(P,!0),L=R&&R.video?R.video:[],V=R&&R.audio?R.audio:[];return[...L,...V]},"getFlattenTeamPrefCallsApps")},4980558152:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(4103274853),s=e(7715417323),i=e(3245843483),l=e(2664504268),o=e(3514831633),a=e(3753517560),r=e(7060103922);function d(){return d=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},d.apply(this,arguments)}c(d,"_extends");let u=c(class extends t.Component{onDesktopContextMenu(h){const{getTemplate:f,overrideDefaultMenu:I}=this.props,p=c(M=>({...M,id:(0,l.A)(),submenu:M.submenu&&M.submenu.map(p)}),"addIdsToItem"),y=f?f().map(p):[];if(!y.length)return;const{x:g,y:E}=(0,n.A)(this.getCoordinatesForContextMenu(h),M=>(0,i.xhB)()*M);(0,i.O0f)(y,{x:g,y:E,overrideDefaultMenu:I}),this.props.onClick&&this.props.onClick()}getCoordinatesForContextMenu(h){if(!this.props.hasKeyboardFocus||!h)return{};const{left:f,top:I,width:p,height:y}=h.currentTarget.getBoundingClientRect(),g=f+p/2,E=I+y/2;return{x:g,y:E}}renderMenuFromTemplate(h){const{getTemplate:f,width:I,showSlackKitContextMenuOnDesktop:p,menuAriaLabel:y}=this.props;function g(M){return M.replace(/&([\w&])/g,(T,D)=>D)}c(g,"removeKeyboardAccelerators");const E=f?f().map(M=>!M.label||p?M:{...M,label:g(M.label)}):[];return E.length?t.createElement(o.a,d({"aria-label":y,width:I},h,{template:E,isContextMenu:!0,stripTerminalSeparators:!0})):null}render(){if((0,i.g9M)()&&!this.props.showSlackKitContextMenuOnDesktop)return(0,r.A)(this.props.children,{onContextMenu:this.onDesktopContextMenu});const{forceOpen:h,onClick:f,onClose:I,isDisabled:p,renderMenu:y,preventScroll:g}=this.props;return this.props.desktopAppOnly?(0,r.A)(this.props.children):t.createElement(o.cQ,{isContextMenu:!0,position:"right-bottom",tryOppositePosition:!0,forceOpen:h,shouldFade:!1,renderMenu:y||this.renderMenuFromTemplate,onClick:f,onClose:I,isDisabled:p,preventScroll:g},this.props.children)}constructor(h){super(h),this.onDesktopContextMenu=this.onDesktopContextMenu.bind(this),this.renderMenuFromTemplate=this.renderMenuFromTemplate.bind(this)}},"ContextMenuTrigger");u.displayName="ContextMenuTrigger",u.defaultProps={overrideDefaultMenu:!1,desktopAppOnly:!0,hasKeyboardFocus:!1,showSlackKitContextMenuOnDesktop:!1,onClick:s.A,onClose:s.A,isDisabled:!1,forceOpen:!1,stripTerminalSeparators:!1};const _=(0,a.A)(u)},2837660778:(x,A,e)=>{"use strict";e.d(A,{$g:()=>T,Mo:()=>y,rp:()=>M});var t=e(6217320234),n=e(7823346015),s=e(3385422400),i=e(8161242485),l=e(735940183),o=e(3707193570),a=e(6839188756),r=e(9950739645),d=e(6536982570),u=e(8276911661),_=e(3677514771),v=e(8847766420),h=e(241752795),f=e(5962670951),I=e(1439563189);const p=new l.Ay("create_channel_modal"),y=(0,i.Ay)(D=>{const C=(0,u.cA)(D),m=(0,d.HI)(C),O=(0,_.H7)(D);if(!O)return[];const P=(0,v.VO)(D)||[],R=[O.id,...m,...P],L=[...new Set(R)].filter(V=>!(0,o.JV)(V)).map(V=>(0,_._J)(D,V)).filter(V=>!!V&&!(0,a.Zx)(V));return(0,t.A)(L,V=>(0,a.F1)(V))});y.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaces",description:D=>{const C=(0,u.cA)(D),m=(0,d.HI)(C),O=(0,_.H7)(D);if(!O)return[];const P=(0,v.VO)(D)||[],R=[O.id,...m,...P],L=[...new Set(R)].filter(V=>!(0,o.JV)(V)).map(V=>(0,_._J)(D,V)).filter(V=>!!V&&!(0,a.Zx)(V));return(0,t.A)(L,V=>(0,a.F1)(V))}};const g=c((D,C)=>{const m=C==null?void 0:C.map(O=>O.id);return D.map(O=>{var P,R;return{label:(0,a.F1)(O),value:O,optgroup:O.enterprise_name,key:O.id,isDisabled:!!(m!==void 0&&m.includes(O.id)),displayReason:(R=(P=C==null?void 0:C.find(L=>L.id===O.id))===null||P===void 0?void 0:P.displayReason)!==null&&R!==void 0?R:""}})},"mapWorkspacesToSelectOptionItems"),E=c((D,C)=>{let{ineligibleWorkspaces:m,excludeExternalWorkspaces:O}=C;const[P,R]=(0,n.A)(D,V=>(0,r.N)(V)),L={value:void 0,label:"",type:"divider"};return[...g(R,m),...!O&&P.length>0?[L,...g(P,m)]:[]]},"mapInvitableWorkspacesToSelectOptions"),M=(0,i.Ay)(D=>{const C=(0,I.g)(D),m=(0,h.y5)(D),O=(0,f.S)(D),P=y(D),R=P.filter(L=>!m.includes(L.id)&&!O.includes(L.id)).map(L=>({id:L.id,displayReason:C?"":p.t("You don\u2019t have access to this")}));return E(P,{ineligibleWorkspaces:R})});M.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaceSelectOptions",description:D=>{const C=(0,I.g)(D),m=(0,h.y5)(D),O=(0,f.S)(D),P=y(D),R=P.filter(L=>!m.includes(L.id)&&!O.includes(L.id)).map(L=>({id:L.id,displayReason:C?"":p.t("You don\u2019t have access to this")}));return E(P,{ineligibleWorkspaces:R})}};const T=(0,s.Mz)(y,D=>D.length>1)},9364044512:(x,A,e)=>{"use strict";e.d(A,{D:()=>Rt,A:()=>Nn});var t=e(3134334389),n=e(6122756707),s=e(5255740490),i=e(9003400431),l=e(980293773),o=e(2293211408);function a(rt){return rt&&rt.id}c(a,"getEmojiCollectionId");var r=e(370406050);function d(rt){return rt&&rt.author}c(d,"getEmojiCollectionAuthor");var u=e(6045879501);function _(rt){return rt&&rt.localEmoji}c(_,"getEmojiCollectionLocalEmoji");var v=e(735940183),h=e(2562405183),f=e(9113979368),I=e(2101927269),p=e(2141441167),y=e(6217320234),g=e(3783303734),E=e(4978843660),M=e(3297051565),T=e.n(M),D=e(3004085654),C=e(7564917982);function m(rt){return rt&&rt.date_create}c(m,"getEmojiCollectionDateCreate");var O=e(5071545805),P=e(2047021170),R=e(387484329),L=e(8840779375),V=e(5331686899),B=e(1610251172),K=e(7420598276),b=e(2036354333);const S=new v.Ay("custom_emoji_list"),G="emoji_packs_clicked_collection_cta",H=c(rt=>{let{id:vt,name:Mt,author:Ct,emoji:Yt,installed:In,onClick:Un}=rt;const En=(0,n.wA)(),Bn=(0,h.d4)(ft=>(0,P.ty)(ft,G)),Mn=(0,h.d4)(D.fl),Vn=(0,h.d4)(D._J);if(!Yt)return null;const as=a(Vn)===vt&&Mn&&!Bn;function jn(){as&&En((0,R.AZ)({pref:G,value:!0})),Un()}c(jn,"handleOnClick");const es=(0,L.A)(Yt,(ft,pt)=>({name:pt,url:ft})),Qn=(0,E.A)(es,4),ss=S.t("by {author}",{author:Ct});return t.createElement(b.A,{className:"p-emoji_pack_card p-emoji_pack_card--clickable",onClick:jn},t.createElement("div",{className:"display_flex align_items_center margin_bottom_100"},t.createElement("div",{className:"flex_one"},t.createElement("div",{className:"p-emoji_pack_card__header"},Mt,as&&t.createElement("span",{className:"margin_left_25"},t.createElement(K.A,null,S.t("NEW")))),t.createElement("div",{className:"p-emoji_pack_card__subheader"},ss)),In&&!as&&t.createElement("div",{className:"flex_none"},t.createElement(B.A,{size:"inherit",type:"circle-checkbox-checked",className:"p-emoji_pack_card__checkmark"}))),t.createElement("div",{className:"p-emoji_pack_card_rows"},Qn.map(ft=>t.createElement("div",{key:ft.map(pt=>`${pt.name}-card-`).join(),className:"p-emoji_pack_card__row"},ft.map(pt=>t.createElement(V.Ay,{key:`emoji-pack-${pt.name}`,showTooltip:!1,text:`:${pt.name}:`,url:pt.url,emojiSize:V.lw.LARGE})),[...new Array(4-ft.length)].map((pt,Ht)=>`emoji-pack-spacer-${Ht}`).map(pt=>t.createElement("div",{key:pt,className:"p-emoji_pack_card__spacer"}))))))},"EmojiPackCard");H.displayName="EmojiPackCard";const U=H,F=new v.Ay("custom_emoji_list"),Y=c(()=>{const rt=F.t("STAY TUNED"),vt=F.t("More emoji packs are on the way");return t.createElement("div",{className:"p-emoji_pack_card p-emoji_pack_coming_soon"},t.createElement(K.A,{className:"p-emoji_pack_coming_soon__pill"},rt),t.createElement("div",{className:"p-emoji_pack_coming_soon__text"},vt),t.createElement("div",{className:"p-emoji_pack_coming_soon__illustrations"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("g",{clipPath:"url(#clip0)"},t.createElement("path",{d:"M22.7 30C35.2 30 45.3 19.9 45.3 7.3 45.3-5.2 35.2-15.3 22.7-15.3 10.1-15.3 0-5.2 0 7.3 0 19.9 10.1 30 22.7 30Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M24 20C25.5 20 26.7 18.5 26.7 16.7 26.7 14.8 25.5 13.3 24 13.3 22.5 13.3 21.3 14.8 21.3 16.7 21.3 18.5 22.5 20 24 20Z",fill:"#664500"}),t.createElement("path",{d:"M10.8 10.5C10.6 10.5 10.3 10.4 10.1 10.3 9.5 9.9 9.3 9.1 9.7 8.5 10.9 6.5 14.6 3.2 19.9 4.5 20.7 4.7 21.1 5.4 20.9 6.1 20.7 6.8 20 7.3 19.3 7.1 14.5 5.9 12 9.8 11.9 9.9 11.7 10.3 11.3 10.5 10.8 10.5V10.5ZM26.8 5.5C26.4 5.5 26 5.4 25.7 5 25.3 4.5 25.4 3.6 25.9 3.2 30.2-0.3 34.9 1.1 36.9 2.3 37.5 2.7 37.7 3.5 37.3 4.1 36.9 4.8 36.1 4.9 35.5 4.6 35.3 4.4 31.4 2.1 27.6 5.2 27.4 5.4 27.1 5.5 26.8 5.5Z",fill:"#664500"}),t.createElement("path",{d:"M17.8 23.7C17.7 23.7 17.6 23.7 17.5 23.7 17 23.5 16.7 23 16.8 22.4 17.4 20.4 17.2 18.4 16.2 17 15.5 16 14.6 15.5 13.6 15.4 13 15.4 12.6 14.9 12.7 14.3 12.7 13.8 13.2 13.3 13.7 13.4 15.3 13.5 16.8 14.4 17.8 15.8 19.2 17.7 19.5 20.3 18.8 23 18.6 23.4 18.2 23.7 17.8 23.7ZM32.5 19.6C32.3 19.6 32.1 19.6 32 19.5 30.4 18.4 29.5 16.6 29.6 14.5 29.6 12.3 30.7 10.3 32.2 9.4 32.7 9.1 33.3 9.2 33.6 9.7 33.9 10.2 33.7 10.8 33.3 11.1 32.3 11.7 31.6 13.1 31.6 14.6 31.5 16 32.1 17.1 33.1 17.8 33.5 18.1 33.6 18.7 33.3 19.2 33.2 19.5 32.8 19.6 32.5 19.6V19.6Z",fill:"#E2A62D"}),t.createElement("path",{d:"M22.9-14.4C22.8-14.4 22.8-14.5 22.7-14.5 22.7-14.5 1.4-18.5 0.5-17.7 -0.4-16.9 1 4.7 1 4.7 1 4.8 1 4.9 1.1 4.9 1.9 5.8 7.4 2.3 13.4-3.1 19.5-8.4 23.7-13.5 22.9-14.4V-14.4Z",fill:"#DD2E44"}),t.createElement("path",{d:"M0.5-17.6C0.4-17.6 0.4-17.5 0.4-17.5 0.6-15.6 2.7-0.6 4 4.1 5.9 3 7.8 1.6 10.1-0.2 8.2-3.8 1.5-17.8 0.5-17.6Z",fill:"#EA596E"}),t.createElement("path",{d:"M39.9 21L25.8 19.2C24.3 19.1 21.6 19.1 21.8 16.7 21.9 14.5 24.5 14.9 26.4 15.2L40.6 17.5 39.9 21V21Z",fill:"#3B88C3"}),t.createElement("path",{d:"M40.6 17.5L34.9 16.6C34.3 16.4 33.7 17.4 33.7 18.5 33.6 19.6 34 20.2 34.6 20.3L40.2 21 40.6 17.5V17.5Z",fill:"#88C9F9"}),t.createElement("path",{d:"M46.6 17.1L43.1 20.3 36.8 13.5 40.3 10.3C42.1 8.7 45 8.8 46.6 10.6L46.8 10.8C48.5 12.6 48.4 15.5 46.6 17.1Z",fill:"#3B88C3"}),t.createElement("path",{d:"M43.1 20.3C44.6 19 44.4 16.3 42.7 14.4 40.9 12.6 38.3 12.2 36.8 13.5 35.3 14.9 35.5 17.6 37.2 19.4 38.9 21.3 41.6 21.7 43.1 20.3Z",fill:"#88C9F9"}),t.createElement("path",{d:"M41.8 19C42.6 18.3 42.3 16.8 41.3 15.7 40.3 14.6 38.8 14.2 38.1 14.9 37.3 15.6 37.5 17.1 38.6 18.2 39.6 19.3 41.1 19.7 41.8 19Z",fill:"#269"}),t.createElement("path",{d:"M3.3 28.7C4.4 28.7 5.3 27.8 5.3 26.7 5.3 25.6 4.4 24.7 3.3 24.7 2.2 24.7 1.3 25.6 1.3 26.7 1.3 27.8 2.2 28.7 3.3 28.7Z",fill:"#55ACEE"}),t.createElement("path",{d:"M6.5 21L3.4 13.5 0.5 21.6 6.5 21ZM34.7-11.3L29.3-10 30.7-15.3 34.7-11.3Z",fill:"#EA596E"}))),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M123 6C123 19.3 112.3 30 99 30 85.7 30 75 19.3 75 6 75-7.3 85.7-18 99-18 112.3-18 123-7.3 123 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M99 11.3C94.2 11.3 91 10.8 87 10 86.1 9.8 84.3 10 84.3 12.7 84.3 18 90.5 24.7 99 24.7 107.5 24.7 113.7 18 113.7 12.7 113.7 10 111.9 9.8 111 10 107 10.8 103.8 11.3 99 11.3Z",fill:"#664500"}),t.createElement("path",{d:"M87 12.7C87 12.7 91 14 99 14 107 14 111 12.7 111 12.7 111 12.7 108.3 18 99 18 89.7 18 87 12.7 87 12.7Z",fill:"white"}),t.createElement("path",{d:"M115.8 6.3C115.6 6.2 113.2 4.4 109.6 3.1 109.6 3 109.7 2.8 109.7 2.7 109.7 2.2 109.5 1.7 109.2 1.4 111.6 0.7 113.6 0.7 113.7 0.7 114.4 0.7 115 0.1 115-0.7 115-1.4 114.4-2 113.7-2 113.4-2 106.4-1.9 102.1 2.4 101.7 2.8 101.6 3.3 101.8 3.8 102 4.3 102.5 4.7 103 4.7 109.1 4.7 114.2 8.4 114.2 8.4 114.4 8.6 114.7 8.7 115 8.7 115.4 8.7 115.8 8.5 116.1 8.1 116.5 7.5 116.4 6.7 115.8 6.3V6.3ZM95.9 2.4C91.6-1.9 84.6-2 84.3-2 83.6-2 83-1.4 83-0.7 83 0.1 83.6 0.7 84.3 0.7 84.4 0.7 86.4 0.7 88.8 1.4 88.5 1.7 88.3 2.2 88.3 2.7 88.3 2.8 88.4 3 88.4 3.1 84.8 4.4 82.4 6.2 82.2 6.3 81.6 6.7 81.5 7.5 81.9 8.1 82.2 8.5 82.6 8.7 83 8.7 83.3 8.7 83.6 8.6 83.8 8.4 83.8 8.4 88.8 4.7 95 4.7 95.5 4.7 96 4.3 96.2 3.8 96.4 3.3 96.3 2.8 95.9 2.4V2.4Z",fill:"#664500"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 6C198 19.3 187.3 30 174 30 160.7 30 150 19.3 150 6 150-7.3 160.7-18 174-18 187.3-18 198-7.3 198 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M188.7 19.3C192.3 19.3 195.3 16.3 195.3 12.7 195.3 9 192.3 6 188.7 6 185 6 182 9 182 12.7 182 16.3 185 19.3 188.7 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M159.3 19.3C163 19.3 166 16.3 166 12.7 166 9 163 6 159.3 6 155.7 6 152.7 9 152.7 12.7 152.7 16.3 155.7 19.3 159.3 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M182.7 11.3C186.7 11.3 190 8.1 190 4 190-0.1 186.7-3.3 182.7-3.3 178.6-3.3 175.3-0.1 175.3 4 175.3 8.1 178.6 11.3 182.7 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 11.3C169.4 11.3 172.7 8.1 172.7 4 172.7-0.1 169.4-3.3 165.3-3.3 161.3-3.3 158-0.1 158 4 158 8.1 161.3 11.3 165.3 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 7.3C167.2 7.3 168.7 5.8 168.7 4 168.7 2.2 167.2 0.7 165.3 0.7 163.5 0.7 162 2.2 162 4 162 5.8 163.5 7.3 165.3 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M182.7 7.3C184.5 7.3 186 5.8 186 4 186 2.2 184.5 0.7 182.7 0.7 180.8 0.7 179.3 2.2 179.3 4 179.3 5.8 180.8 7.3 182.7 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M179.3 22H168.7C167.9 22 167.3 21.4 167.3 20.7 167.3 19.9 167.9 19.3 168.7 19.3H179.3C180.1 19.3 180.7 19.9 180.7 20.7 180.7 21.4 180.1 22 179.3 22ZM190-3.3C189.6-3.3 189.2-3.5 188.9-3.9 185.4-8.6 180.9-8.7 180.7-8.7 179.9-8.7 179.3-9.3 179.3-10 179.3-10.7 179.9-11.3 180.7-11.3 180.9-11.3 186.7-11.3 191.1-5.5 191.5-4.9 191.4-4 190.8-3.6 190.6-3.4 190.3-3.3 190-3.3V-3.3ZM158-3.3C157.7-3.3 157.4-3.4 157.2-3.6 156.6-4 156.5-4.9 156.9-5.5 161.3-11.3 167.1-11.3 167.3-11.3 168.1-11.3 168.7-10.7 168.7-10 168.7-9.3 168.1-8.7 167.3-8.7 167.1-8.7 162.6-8.6 159.1-3.9 158.8-3.5 158.4-3.3 158-3.3Z",fill:"#664500"})),t.createElement("defs",null,t.createElement("clipPath",null,t.createElement("rect",{y:"-18",width:"48",height:"48",fill:"white"})))),t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M48 24C48 37.3 37.3 48 24 48 10.7 48 0 37.3 0 24 0 10.7 10.7 0 24 0 37.3 0 48 10.7 48 24Z",fill:"#DA2F47"}),t.createElement("path",{d:"M34 39.8C33.9 39.6 32.4 34 24 34 15.6 34 14.1 39.6 14 39.8 13.9 40.1 14.1 40.4 14.3 40.6 14.6 40.7 14.9 40.7 15.1 40.5 15.2 40.4 17.7 38 24 38 30.3 38 32.8 40.4 32.9 40.5 33 40.6 33.2 40.7 33.3 40.7 33.4 40.7 33.6 40.6 33.7 40.6 33.9 40.4 34.1 40.1 34 39.8V39.8ZM20.9 23.1C16.6 18.7 9.6 18.7 9.3 18.7 8.6 18.7 8 19.3 8 20 8 20.7 8.6 21.3 9.3 21.3 9.4 21.3 11.9 21.4 14.6 22.3 13.9 23.2 13.3 24.5 13.3 26 13.3 28.6 14.8 30.7 16.7 30.7 18.5 30.7 20 28.6 20 26 20 25.8 20 25.5 20 25.3 20 25.3 20 25.3 20 25.3 20.3 25.3 20.7 25.2 20.9 24.9 21.5 24.4 21.5 23.6 20.9 23.1V23.1ZM38.7 18.7C38.4 18.7 31.4 18.7 27.1 23.1 26.5 23.6 26.5 24.4 27.1 24.9 27.3 25.2 27.7 25.3 28 25.3 28 25.3 28 25.3 28 25.3 28 25.5 28 25.8 28 26 28 28.6 29.5 30.7 31.3 30.7 33.2 30.7 34.7 28.6 34.7 26 34.7 24.5 34.1 23.2 33.4 22.3 36.1 21.4 38.6 21.3 38.7 21.3 39.4 21.3 40 20.7 40 20 40 19.3 39.4 18.7 38.7 18.7V18.7Z",fill:"#292F33"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 24C198 37.3 187.3 48 174 48 160.7 48 150 37.3 150 24 150 10.7 160.7 0 174 0 187.3 0 198 10.7 198 24Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M174 28C169.2 28 166 27.4 162 26.7 161.1 26.5 159.3 26.7 159.3 29.3 159.3 34.7 165.5 41.3 174 41.3 182.5 41.3 188.7 34.7 188.7 29.3 188.7 26.7 186.9 26.5 186 26.7 182 27.4 178.8 28 174 28Z",fill:"#664500"}),t.createElement("path",{d:"M162 29.3C162 29.3 166 30.7 174 30.7 182 30.7 186 29.3 186 29.3 186 29.3 183.3 34.7 174 34.7 164.7 34.7 162 29.3 162 29.3Z",fill:"white"}),t.createElement("path",{d:"M170.9 5.9L164.9 7 161.7 1.3C161.4 0.7 160.7 0.3 160 0.4 159.3 0.6 158.7 1.1 158.6 1.8L157.6 8.2 151.6 9.3C150.9 9.4 150.3 10 150.2 10.7 150.1 11.4 150.5 12.1 151.2 12.4L156.6 15 155.6 21.4C155.5 22.1 155.8 22.9 156.5 23.2 156.7 23.3 157 23.4 157.2 23.4 157.7 23.4 158.1 23.2 158.4 22.9L163.1 18.1 169.1 21C169.8 21.3 170.6 21.1 171.1 20.6 171.5 20.1 171.6 19.3 171.3 18.7L168.2 13 172.4 8.7C172.9 8.2 173 7.4 172.7 6.8 172.3 6.1 171.6 5.8 170.9 5.9V5.9ZM177.1 5.9L183.1 7 186.3 1.3C186.6 0.7 187.3 0.3 188 0.4 188.7 0.6 189.3 1.1 189.4 1.8L190.4 8.2 196.4 9.3C197.1 9.4 197.7 10 197.8 10.7 197.9 11.4 197.5 12.1 196.8 12.4L191.4 15 192.4 21.4C192.5 22.1 192.2 22.9 191.5 23.2 191.3 23.3 191 23.4 190.8 23.4 190.3 23.4 189.9 23.2 189.6 22.9L184.9 18.1 178.9 21C178.2 21.3 177.4 21.1 176.9 20.6 176.5 20.1 176.4 19.3 176.7 18.7L179.8 13 175.6 8.7C175.1 8.2 175 7.4 175.3 6.8 175.7 6.1 176.4 5.8 177.1 5.9V5.9Z",fill:"#E95F28"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M99 48C112.3 48 123 37.3 123 24 123 10.7 112.3 0 99 0 85.7 0 75 10.7 75 24 75 37.3 85.7 48 99 48Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M98.1 22.1C97.8 22 97.5 22 97.3 22.1 97.3 22.1 95.6 23.3 92.3 23.3 89.1 23.3 87.4 22.1 87.4 22.1 87.2 22 86.8 22 86.6 22.1 86.3 22.3 86.3 22.7 86.4 22.9 86.5 23.1 88.4 27.3 92.3 27.3 96.3 27.3 98.2 23.1 98.3 22.9 98.4 22.7 98.3 22.3 98.1 22.1V22.1ZM111.4 22.1C111.2 22 110.8 22 110.6 22.1 110.6 22.1 108.9 23.3 105.7 23.3 102.4 23.3 100.7 22.1 100.7 22.1 100.5 22 100.2 22 99.9 22.1 99.7 22.3 99.6 22.7 99.7 22.9 99.8 23.1 101.7 27.3 105.7 27.3 109.6 27.3 111.5 23.1 111.6 22.9 111.7 22.7 111.7 22.3 111.4 22.1V22.1Z",fill:"#664500"}),t.createElement("path",{d:"M120.9 16.7C120.9 16.7 120.9 16.6 120.9 16.5 120.9 15.5 120.2 15 119.3 15H114.5L120.2 7C120.5 6.6 120.6 6.4 120.6 5.9 120.6 4.9 119.8 4.8 119.4 4.8H112.3L112.3 3.8C112.3 3.8 110.4 5 110.3 5 110.1 5.1 109.6 5.5 109.6 6.3 109.6 7.3 110.3 7.9 111.2 7.9H115.4L109.7 15.9C109.6 16.1 109.4 16.5 109.4 16.9 109.4 17.7 110.1 18.1 110.9 18.1H119.3C119.6 18.1 120 18 120.2 17.9L122.2 16.7H120.9V16.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M117.4 6.8H113.2C112.3 6.8 111.5 6.2 111.5 5.2 111.5 4.2 112.3 3.6 113.2 3.6H121.4C121.7 3.6 122.6 3.8 122.6 4.7 122.6 5.2 122.5 5.4 122.2 5.8L116.5 13.8H121.3C122.2 13.8 122.9 14.4 122.9 15.4 122.9 16.4 122.2 17 121.3 17H112.8C112 17 111.4 16.6 111.4 15.7 111.4 15.3 111.6 15 111.7 14.8L117.4 6.8V6.8Z",fill:"#2A6797"}),t.createElement("path",{d:"M108.2 10C108.2 9.9 108.2 9.9 108.2 9.9 108.2 9.1 107.7 8.7 107 8.7H103.4L107.7 2.7C107.9 2.4 108 2.2 108 1.9 108 1.1 107.3 1 107.1 1H101.7L101.7 0.3C101.7 0.3 100.3 1.2 100.2 1.2 100.1 1.3 99.7 1.6 99.7 2.2 99.7 3 100.2 3.4 100.9 3.4H104.1L99.8 9.4C99.7 9.5 99.6 9.8 99.6 10.1 99.6 10.7 100.1 11 100.7 11H107C107.2 11 107.5 11 107.7 10.9L109.2 10H108.2V10Z",fill:"#FFAC33"}),t.createElement("path",{d:"M105.5 2.5H102.4C101.7 2.5 101.2 2.1 101.2 1.4 101.2 0.6 101.7 0.2 102.4 0.2H108.5C108.8 0.2 109.4 0.3 109.4 1 109.4 1.4 109.3 1.5 109.1 1.8L104.9 7.8H108.4C109.1 7.8 109.7 8.2 109.7 9 109.7 9.7 109.1 10.2 108.4 10.2H102.1C101.5 10.2 101 9.9 101 9.3 101 9 101.2 8.7 101.3 8.5L105.5 2.5V2.5Z",fill:"#2A6797"}),t.createElement("path",{d:"M98.7 13.9C98.7 13.9 98.7 13.8 98.7 13.8 98.7 13.2 98.2 12.8 97.6 12.8H94.6L98.2 7.7C98.4 7.4 98.5 7.3 98.5 7 98.5 6.3 97.9 6.2 97.7 6.2H93.1L93.1 5.7 91.8 6.4C91.7 6.5 91.4 6.7 91.4 7.3 91.4 7.9 91.9 8.3 92.4 8.3H95.1L91.5 13.4C91.4 13.5 91.3 13.8 91.3 14 91.3 14.6 91.7 14.8 92.2 14.8H97.6C97.8 14.8 98.1 14.7 98.2 14.7L99.5 13.9H98.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M96.4 7.5H93.7C93.1 7.5 92.6 7.2 92.6 6.5 92.6 5.9 93.1 5.5 93.7 5.5H99C99.2 5.5 99.7 5.6 99.7 6.2 99.7 6.5 99.7 6.7 99.5 6.9L95.8 12H98.9C99.5 12 99.9 12.4 99.9 13.1 99.9 13.7 99.5 14.1 98.9 14.1H93.5C93 14.1 92.5 13.8 92.5 13.3 92.5 13 92.7 12.8 92.7 12.7L96.4 7.5V7.5Z",fill:"#2A6797"})))))},"EmojiPackComingSoon");Y.displayName="EmojiPackComingSoon";const Z=Y,ee=new v.Ay("custom_emoji_list");function j(rt){let{row:vt,className:Mt,onPackClick:Ct}=rt;return t.createElement("div",{key:vt.map(Yt=>`${a(Yt)}-row`).join(),className:Mt},vt.map(Yt=>{if(Yt.type==="coming_soon")return t.createElement(Z,{key:"emoji-pack-coming-soon"});if(Yt.type==="spacer")return t.createElement("div",{key:"emoji-pack-spacer",className:"p-emoji_pack__spacer"});const In=(0,O.j)(Yt);return t.createElement(U,{key:`emoji-pack-${a(Yt)}`,installed:In,id:a(Yt)||void 0,name:(0,r.M)(Yt),author:d(Yt),emoji:(0,u.H)(Yt),onClick:()=>Ct(Yt,{installed:In})})}))}c(j,"Row"),j.displayName="Row",j.propTypes={row:T().arrayOf(T().object),className:T().string,onPackClick:T().func.isRequired},j.defaultProps={row:[],className:void 0};function ge(rt){let{orgName:vt,onPackClick:Mt}=rt;const Ct=(0,n.wA)(),Yt=(0,h.d4)(D.uI);if((0,t.useEffect)(()=>{Ct((0,C.H)({reason:"emojiPack:dialog"}))},[Ct]),(0,f.A)(Yt))return null;const In=(0,I.A)(Yt,Mn=>(0,O.j)(Mn)).length;let Un=(0,p.A)(Yt);Un=(0,y.A)(Un,Mn=>-1*m(Mn)),(0,g.A)(Yt)<2&&Un.push({type:"coming_soon"}),Un.length%2!==0&&Un.push({type:"spacer"});const En=(0,E.A)(Un,2);let Bn;return vt?Bn=ee.rt("Emoji packs let you add a whole set new of emoji to every {orgName} workspace. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!).",{orgName:t.createElement("b",null,vt)}):Bn=ee.t("Emoji packs let you add a whole set new of emoji for your team. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!)."),t.createElement(l.$m,null,t.createElement(l.qf,null,t.createElement("div",null,In>0&&t.createElement("div",{className:"p-emoji_pack__header"},ee.t("Added"),t.createElement("div",{className:"p-emoji_pack__pill"},In)),t.createElement("div",{className:"p-emoji_pack__list"},En.map(Mn=>t.createElement(j,{key:Mn.map(Vn=>`${a(Vn)}-rp-`).join(),className:"p-emoji_pack__pack_row",row:Mn,onPackClick:Mt}))),t.createElement("div",{className:"p-emoji_pack__help"},Bn))))}c(ge,"AddEmojiPackDialogContent"),ge.displayName="AddEmojiPackDialogContent";const ne=ge;var ue=e(9391594207),he=e(2003990933),be=e(7715417323),xe=e(9268023148),Le=e(4426213732),fe=e(56548687),se=e(2219904496),Q=e(1030162945),k=e(5733135148),N=e(581167618),$=e(6084388622),W=e(1563996154),q=e(5795074931),re=e(5060694341),le=e(3842747943),Ae=e(1224315998),Te=e(9746734072),Ne=e(7156798807),pe=e(5109269968),Ee=e(5257368278),oe=e(330221449),ce=e(8161242485);const ke=(0,ce.Ay)(rt=>!rt||!rt.customizeEmoji||!rt.customizeEmoji.customEmojiData||!rt.customizeEmoji.customEmojiData.length?[]:rt.customizeEmoji.customEmojiData);ke.meta={name:"createSelector",key:"createSelectorgetCustomEmojiData",description:rt=>!rt||!rt.customizeEmoji||!rt.customizeEmoji.customEmojiData||!rt.customizeEmoji.customEmojiData.length?[]:rt.customizeEmoji.customEmojiData};const Ce=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.customEmojiTotalCount?rt.customizeEmoji.customEmojiTotalCount:0);Ce.meta={name:"createSelector",key:"createSelectorgetCustomEmojiTotalCount",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.customEmojiTotalCount?rt.customizeEmoji.customEmojiTotalCount:0};const Me=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.currentPage?rt.customizeEmoji.currentPage:0);Me.meta={name:"createSelector",key:"createSelectorgetLastPageRetrieved",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.currentPage?rt.customizeEmoji.currentPage:0};const Se=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.totalPages?rt.customizeEmoji.totalPages:0);Se.meta={name:"createSelector",key:"createSelectorgetTotalPages",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.totalPages?rt.customizeEmoji.totalPages:0};const Ue=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.isLoadingNewPage?rt.customizeEmoji.isLoadingNewPage:!1);Ue.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewPage",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.isLoadingNewPage?rt.customizeEmoji.isLoadingNewPage:!1};const He=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.isLoadingNewSearchQuery?rt.customizeEmoji.isLoadingNewSearchQuery:!1);He.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewSearchQuery",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.isLoadingNewSearchQuery?rt.customizeEmoji.isLoadingNewSearchQuery:!1};const Ye=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.deletedEmojiList?rt.customizeEmoji.deletedEmojiList:[]);Ye.meta={name:"createSelector",key:"createSelectorgetDeletedEmojiList",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.deletedEmojiList?rt.customizeEmoji.deletedEmojiList:[]};const J=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.disabledEmoji?rt.customizeEmoji.disabledEmoji:{});J.meta={name:"createSelector",key:"createSelectorgetDisabledEmoji",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.disabledEmoji?rt.customizeEmoji.disabledEmoji:{}};const ae=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.sortDir?rt.customizeEmoji.sortDir:"asc");ae.meta={name:"createSelector",key:"createSelectorgetSortDirection",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.sortDir?rt.customizeEmoji.sortDir:"asc"};const Ve=(0,ce.Ay)(rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.sortBy?rt.customizeEmoji.sortBy:"name");Ve.meta={name:"createSelector",key:"createSelectorgetSortBy",description:rt=>rt&&rt.customizeEmoji&&rt.customizeEmoji.sortBy?rt.customizeEmoji.sortBy:"name"};const Be=(0,Ee.A)("Load the next page of custom emoji data",function(rt,vt){let{count:Mt=100,queries:Ct,userIds:Yt,reason:In="customize-emoji-next-page"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Un=vt();rt((0,oe.en)(!0));const Bn={page:Me(Un)+1,count:Mt,sort_by:Ve(Un),sort_dir:ae(Un)};return Ct&&(Bn.queries=JSON.stringify(Ct)),Yt&&(Bn.user_ids=JSON.stringify(Yt)),rt((0,pe.apiCall)({method:"emoji.adminList",reason:In,args:Bn})).then(Mn=>{rt((0,oe.en)(!1));const Vn=(0,Te.A)(Mn.disabled_emoji)?(0,Ne.A)(Mn.disabled_emoji,"name"):Mn.disabled_emoji;rt((0,oe.X8)({newCustomEmojiData:Mn.emoji,disabledEmoji:Vn,customEmojiTotalCount:Mn.custom_emoji_total_count,customEmojiSearchCount:Mn.paging.total,currentPage:Mn.paging.page,totalPages:Mn.paging.pages}))}).catch(Mn=>{throw Mn})});Be.meta={name:"createFetcher",key:"createFetcherfetchCustomEmojiNextPage",description:"Load the next page of custom emoji data"},Be.propTypes={queries:T().array,userIds:T().array};const Ke=(0,Ee.A)("Load custom emoji data with a new search query",function(rt,vt){let{queries:Mt,page:Ct=1,count:Yt=100,sortBy:In,sortDir:Un,userIds:En,reason:Bn="customize-emoji-new-query"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rt((0,oe.d$)(!0));const Mn={page:Ct,count:Yt};return Mt&&(Mn.queries=JSON.stringify(Mt)),En&&(Mn.user_ids=JSON.stringify(En)),In&&Un&&(Mn.sort_by=In,Mn.sort_dir=Un),rt((0,pe.apiCall)({method:"emoji.adminList",reason:Bn,args:Mn})).then(Vn=>{rt((0,oe.d$)(!1));const rs=(0,Te.A)(Vn.disabled_emoji)?(0,Ne.A)(Vn.disabled_emoji,"name"):Vn.disabled_emoji;rt((0,oe.Ot)({newCustomEmojiData:Vn.emoji,disabledEmoji:rs,customEmojiTotalCount:Vn.custom_emoji_total_count,customEmojiSearchCount:Vn.paging.total,currentPage:Vn.paging.page,totalPages:Vn.paging.pages,sortBy:In,sortDir:Un}))}).catch(Vn=>{throw Vn})});Ke.meta={name:"createFetcher",key:"createFetcherfetchResetCustomEmoji",description:"Load custom emoji data with a new search query"},Ke.propTypes={queries:T().array,page:T().number,count:T().number,sortBy:T().oneOf(["created","name"]),sortDir:T().oneOf(["asc","desc"]),userIds:T().array};const Re=(0,Ee.A)("Deletes the given custom emoji",function(rt,vt){let{emojiName:Mt,isPrimaryEmoji:Ct=!1,synonyms:Yt=[],reason:In="customize-emoji-remove"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return rt((0,oe.gx)({emojiName:Mt,isPrimaryEmoji:Ct,synonyms:Yt})),rt((0,pe.apiCall)({method:"emoji.remove",reason:In,args:{name:Mt}})).then(Un=>Un).then(()=>{(0,fe.e)({state:vt()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"success"}}})}).catch(Un=>{throw(0,fe.e)({state:vt()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"fail"}}}),Un})});Re.meta={name:"createFetcher",key:"createFetchersubmitRemoveCustomEmoji",description:"Deletes the given custom emoji"},Re.propTypes={emojiName:T().string,isPrimaryEmoji:T().bool,synonyms:T().array};const Fe=(0,Ee.A)("Creates a new custom emoji or alias",function(rt,vt){let{mode:Mt,name:Ct,aliasFor:Yt,image:In,searchArgs:Un={},reason:En="customize-emoji-add"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return rt((0,pe.apiCall)({method:"emoji.add",reason:En,args:{mode:Mt,name:Ct,alias_for:Yt,image:In}})).then(Bn=>Bn).then(()=>{rt(Ke(Un))}).catch(Bn=>{throw Bn})});Fe.meta={name:"createFetcher",key:"createFetchersubmitAddCustomEmoji",description:"Creates a new custom emoji or alias"},Fe.propTypes={mode:T().string,name:T().string,aliasFor:T().string,image:T().object};const Ie=(0,Ee.A)("Gets the emoji data for a given emoji",function(rt,vt){let{name:Mt,reason:Ct="customize-emoji-get-info"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return rt((0,pe.apiCall)({method:"emoji.getInfo",reason:Ct,args:{name:Mt}})).then(Yt=>Yt).catch(Yt=>{throw Yt})});Ie.meta={name:"createFetcher",key:"createFetchergetEmojiInfo",description:"Gets the emoji data for a given emoji"},Ie.propTypes={name:T().string};const ze=(0,Ee.A)("Renames the custom emoji with the new name",function(rt,vt){let{oldName:Mt,newName:Ct,reason:Yt="customize-emoji-rename"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return rt((0,pe.apiCall)({method:"emoji.rename",reason:Yt,args:{name:Mt,new_name:Ct}})).then(In=>In).then(()=>{rt(Ke()),rt((0,oe.S9)(Mt))}).catch(In=>{throw In})});ze.meta={name:"createFetcher",key:"createFetchersubmitRenameEmoji",description:"Renames the custom emoji with the new name"},ze.propTypes={oldName:T().string,newName:T().string};var qe=e(3456937405);function st(rt){return/^[a-zA-Z0-9\u00E0\u00E1\u00E2\u00E4\u00E3\u00E8\u00E9\u00EA\u00EB\u00ED\u00EE\u00EF\u00F3\u00F6\u00F4\u00F5\u0153\u00FA\u00F9\u00FB\u00FC\u00FF\u00E7\u00DF\u00F1\u00C0\u00C1\u00C2\u00C4\u00C3\u00C8\u00C9\u00CA\u00CB\u00CD\u00CE\u00CF\u00D3\u00D6\u00D4\u00D5\u0152\u00DA\u00D9\u00DB\u00DC\u0178\u00C7\u00D1\uFF41-\uFF5A\uFF10-\uFF19-_+'\uFF3F\uFF0B\u30FC\u3005\u3041-\u3096\u30A0-\u30FF\uFF61-\uFF9F\u3400-\u4DB5\u4E00-\u9FFF\u2E80-\u2FD5\u1100-\u11FF\uA960-\uA97F\uAC00-\uD7A3\uD7B0-\uD7FF\u3139-\u318F\uF900-\uFAFF\u0400-\u04FF\u0500-\u052F]*$/.test(rt)}c(st,"isValidEmojiName");var ut=e(4244379358),tt=e(9211483338);const _t=new v.Ay("custom_emoji_list"),yt={ADD_DIALOG_INPUT:"customize_emoji_add_dialog_input",ADD_DIALOG_ERROR:"customize_emoji_add_dialog_error",ADD_DIALOG_FILE_INPUT:"customize_emoji_add_dialog_file_input",ADD_DIALOG_FILE_INFO:"customize_emoji_add_dialog_file_info",ADD_DIALOG_IMAGE_PREVIEW:"customize_emoji_add_dialog_image_preview",ADD_DIALOG_IMAGE_PREVIEW_ERROR:"customize_emoji_add_dialog_image_preview_error",ADD_DIALOG_MESSAGE:"customize_emoji_add_dialog_message",ADD_DIALOG_UPLOAD:"customize_emoji_add_dialog_upload",ADD_DIALOG_UPLOAD_IMAGE_PROMPT:"customize_emoji_add_dialog_upload_image_prompt",ADD_DIALOG_UPLOAD_PREVIEW:"customize_emoji_add_dialog_upload_preview",ADD_DIALOG:"customize_emoji_add_dialog",ADD_DIALOG_DUPLICATE_PREVIEW:"customize_emoji_add_dialog_duplicate_preview"};let Kt=c(class extends t.PureComponent{componentDidMount(){const{clogger:vt}=this.props;vt.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"impression",ui_component:"dialog",ui_properties:{element_type:"dialog",element_name:"add_custom_emoji_dialog"}}}}),this.maybeLoadEmojiPreviewFromUrl(),this.props.emojiNameSuggestion&&this.state.newEmojiName&&this.checkIfEmojiNameAlreadyExistsImmediate(this.props.emojiNameSuggestion)}shouldPreventSubmit(){const{newEmojiName:vt,uploadedImage:Mt,nameErrorText:Ct}=this.state,{emojiUrl:Yt}=this.props,In=vt.length>100;return!vt||In||!!Ct||!Yt&&!Mt}onDragOver(vt){vt.preventDefault(),vt.dataTransfer.dropEffect="copy"}onDrop(vt){vt.preventDefault();const Mt=vt.dataTransfer.files[0];if(Mt){const Ct=Mt.name,Yt=URL.createObjectURL(Mt);this.updateAfterUpload({uploadedImage:Mt,fileName:Ct,previewImageUrl:Yt})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}onEmojiNameChange(vt){const{standardEmojiData:Mt}=this.props;let Ct="";this.setState(()=>({newEmojiName:vt})),/[A-Z]/.test(vt)||/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/.test(vt)?Ct=_t.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."):vt in Mt?Ct=_t.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name."):st(vt)?this.checkIfEmojiNameAlreadyExists(vt):Ct=_t.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."),this.setState(()=>({nameErrorText:Ct}))}onImagePreviewError(){this.setState(()=>({imagePreviewError:!0}))}onSubmit(vt){vt&&vt.preventDefault();const{newEmojiName:Mt,uploadedImage:Ct}=this.state,{emojiUrl:Yt}=this.props;if(this.shouldPreventSubmit())return;this.setState(()=>({goButtonIsPending:!0}));const Un={...{reason:"add-custom-emoji-dialog-content",name:Mt},...Yt?{mode:"url",url:Yt}:{mode:"data",searchArgs:this.props.searchArgs,...Ct?{image:Ct}:{}}};this.props.addCustomEmoji(Un).then(()=>{this.props.closeModal();const En=this.renderToastMessage();this.props.enqueueToast({element:En}),this.setState(()=>({goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:Yt?"import_custom_emoji":"add_custom_emoji",action:Yt?"import":"add",action_status:"success",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})}).catch(En=>{let Bn;const Mn=(0,he.A)(En,"data.error");(Mn===qe.W.NoUrlProvided||Mn===qe.W.NoUrlImage)&&(Bn=_t.t("Something happened that prevented the image from being imported. Try again?")),Mn==="error_bad_upload"?Bn=_t.t("Something happened that prevented your file from being uploaded. Try again?"):Mn==="error_bad_format"?Bn=_t.t("Please make sure your file is a GIF, JPEG, PNG, or WEBP."):Mn==="resized_but_still_too_large"||Mn==="too_many_frames"?Bn=_t.t("This image is a bit too big, even after resizing. A smaller file might help?"):Mn==="error_too_big"?Bn=_t.t("Please choose an image smaller than 64KB."):Mn==="error_name_taken_i18n"?Bn=_t.rt("Unfortunately, the international emoji set already includes an emoji named <b>{newEmojiName}</b>. Mind trying a different name?",{newEmojiName:Mt}):Mn==="error_name_taken"?Bn=_t.rt("The name <b>{newEmojiName}</b> is already in use by another emoji.",{newEmojiName:Mt}):(Mn==="error_bad_name"||Mn==="error_bad_name_i18n")&&(Bn=_t.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation.")),this.setState(()=>({apiErrorText:Bn,goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"add",action_status:"fail",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})})}onTextBlur(){this.setState(()=>({placeholder:!0}))}onTextFocus(){this.setState(()=>({placeholder:!1}))}onUploadChange(){var vt,Mt;const Ct=!((vt=this.fileInput)===null||vt===void 0||(Mt=vt.current)===null||Mt===void 0)&&Mt.files?this.fileInput.current.files[0]:null;if(Ct){const Yt=Ct.name,In=URL.createObjectURL(Ct);this.updateAfterUpload({uploadedImage:Ct,fileName:Yt,previewImageUrl:In})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}maybeLoadEmojiPreviewFromUrl(){const{emojiUrl:vt}=this.props;vt&&this.setState(()=>({previewImageUrl:vt,imagePreviewError:!1}))}convertFileNameToEmojiName(vt){if(!vt)return null;const Mt=vt.lastIndexOf("."),Ct=Mt>0?vt.substring(0,Mt):vt;return Ct?Ct.toLowerCase().replace(/\s/g,"-").replace(/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/g,""):null}updateAfterUpload(vt){let{uploadedImage:Mt,fileName:Ct,previewImageUrl:Yt}=vt;const{newEmojiName:In,fileName:Un}=this.state;let En=In;(!In||In===this.convertFileNameToEmojiName(Un))&&(En=this.convertFileNameToEmojiName(Ct)||En),this.setState(()=>({uploadedImage:Mt,fileName:Ct,previewImageUrl:Yt,imagePreviewError:!1}),()=>this.onEmojiNameChange(En))}fileUpload(){var vt;const Mt=(vt=this.props.windowRef.deref())===null||vt===void 0?void 0:vt.document.getElementById("emojiimg");Mt==null||Mt.click(),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"upload_image"}}}})}renderChooseNamePrompt(){const{newEmojiName:vt,nameErrorText:Mt}=this.state;return t.createElement("ol",{className:"black margin_bottom_0",start:2},t.createElement("li",{className:"margin_bottom_0"},t.createElement("div",null," ",_t.t("Give it a name")," "),t.createElement("div",{className:"normal sk_foreground_max p-add_custom_emoji_dialog__choose_name_container"},_t.t("This is also what you\u2019ll type to add this emoji to your messages.")),t.createElement("div",{className:"p_add_custom_emoji_dialog__name_input"},t.createElement(se.A,{id:"emojiname",name:"name",value:vt,onChange:this.onEmojiNameChange,onFocus:this.onTextFocus,onBlur:this.onTextBlur,placeholder:this.renderPlaceholderText(),prefix:":",suffix:":",maxCharacterLimit:100,counterMinimumCharacters:101,errorText:Mt,"data-qa":yt.ADD_DIALOG_INPUT,useInlineAlert:!0}))))}maybeRenderDuplicateNameErrorPreview(){const{newEmojiName:vt,nameErrorText:Mt}=this.state,Ct=_t.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.");return Mt===Ct?t.createElement("div",{className:"inline_flex full_width","data-qa":yt.ADD_DIALOG_DUPLICATE_PREVIEW},t.createElement(Q.Ay,{text:vt,alt:vt,emojiSize:"larger",className:"flex_shrink_none"}),t.createElement("div",{className:"padding_left_50 overflow_hidden"},t.createElement("strong",null,_t.t("Existing emoji")),t.createElement("span",{className:"block normal overflow_ellipsis"},":",vt,":"))):null}renderDialogMessage(){const{orgName:vt}=this.props;let Mt;return vt?Mt=_t.rt("Your custom emoji will be available in every <b>{orgName}</b> workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)",{orgName:vt}):Mt=_t.t("Your custom emoji will be available to everyone in your workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)"),t.createElement("div",{className:"p-add_custom_emoji_dialog","data-qa":yt.ADD_DIALOG_MESSAGE},t.createElement("div",null,Mt),t.createElement("div",null,this.renderErrorMessage()),t.createElement("form",{className:"p-add_custom_emoji_dialog__form",onSubmit:this.onSubmit},this.renderUploadImagePrompt(),t.createElement("hr",null),this.renderChooseNamePrompt(),this.maybeRenderDuplicateNameErrorPreview()))}renderErrorMessage(){const{apiErrorText:vt}=this.state;return vt?t.createElement(N.Ay,{level:"error",className:"margin_top_50 margin_bottom_100","data-qa":yt.ADD_DIALOG_ERROR},t.createElement("span",null," ",vt," ")):null}renderImagePreview(){const{previewImageUrl:vt}=this.state,Mt=t.createElement("img",{src:vt,alt:_t.t("image preview"),className:"p-add_custom_emoji_dialog__image",onError:this.onImagePreviewError,draggable:!1}),{imagePreviewError:Ct}=this.state;return Ct?t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":yt.ADD_DIALOG_IMAGE_PREVIEW_ERROR},t.createElement(W.Ay,{tip:_t.t("We couldn't preview your image. Make sure it's a GIF, JPEG, or PNG."),zIndex:"above_fs"},t.createElement(B.A,{type:"exclamation-circle",size:"inherit",className:"p-add_custom_emoji_dialog__icon_broken block"}))):t.createElement("div",{className:"align_center p-add_custom_emoji_dialog__image_container","data-qa":yt.ADD_DIALOG_IMAGE_PREVIEW},Mt)}renderPlaceholderText(){const{placeholder:vt}=this.state;let Mt;return vt?Mt=_t.t("avocado"):Mt="",Mt}renderToastMessage(){const{newEmojiName:vt,previewImageUrl:Mt}=this.state,Ct=t.createElement(Q.Ay,{text:vt,url:Mt,emojiSize:Q.lw.MEDIUM}),Yt=_t.rt("{emoji} :{newEmojiName}: has been added and is ready for use.",{emoji:Ct,newEmojiName:vt});return t.createElement(k.Ay,{toastClasses:"p-customize_emoji_list__toast"},t.createElement("span",null,Yt))}renderUploadImagePrompt(){const{emojiUrl:vt}=this.props,Mt=_t.t("Square images under 128KB and with transparent backgrounds work best. If your image is too large, we\u2019ll try to resize it for you."),Ct=t.createElement(t.Fragment,null,t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview rounded bordered"},this.renderUploadPreview()),t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview p-add_custom_emoji_dialog__upload_preview--dark rounded bordered margin_left_50"},this.renderUploadPreview())),Yt=vt?_t.t("Import external emoji"):_t.t("Upload an image");return t.createElement("ol",{className:"black",onDragOver:this.onDragOver,onDrop:this.onDrop,"data-qa":yt.ADD_DIALOG_UPLOAD_IMAGE_PROMPT},t.createElement("li",{className:"large_bottom_margin"},t.createElement("div",null," ",Yt," "),!vt&&t.createElement("div",{className:"normal sk_foreground_max"},Mt),t.createElement("div",{className:"normal p-add_custom_emoji_dialog__upload_container"},Ct,!vt&&t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_button margin_left_100"},this.renderUploadedFileText(),t.createElement("input",{type:"file",className:"p-add_custom_emoji_dialog__upload_input",id:"emojiimg",name:"img",accept:"image/*;capture=camera",ref:this.fileInput,onChange:this.onUploadChange,"data-qa":yt.ADD_DIALOG_FILE_INPUT}),t.createElement($.Ay,{type:"outline",size:"medium",onClick:this.fileUpload,"data-qa":yt.ADD_DIALOG_UPLOAD}," ",_t.t("Upload Image")," ")))))}renderUploadPreview(){const{fileName:vt}=this.state,{emojiUrl:Mt}=this.props;let Ct;return vt||Mt?Ct=this.renderImagePreview():Ct=t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":yt.ADD_DIALOG_UPLOAD_PREVIEW},t.createElement(B.A,{type:"file-image",size:"inherit",className:"p-add_custom_emoji_dialog__icon block "})),Ct}renderUploadedFileText(){const{fileName:vt}=this.state;let Mt;return vt?Mt=t.createElement("div",{className:"margin_bottom_25 p-add_custom_emoji_dialog__filename"}," ",vt," "):Mt=t.createElement("div",{className:"sk_foreground_max margin_bottom_25"}," ",_t.t("Select an image")," "),Mt}render(){const{goButtonIsPending:vt}=this.state,Mt=this.shouldPreventSubmit();return t.createElement(t.Fragment,null,t.createElement(l.$m,null,t.createElement(l.qf,{"data-qa":`${yt.ADD_DIALOG}_body`},this.renderDialogMessage())),t.createElement(l.jl,null,t.createElement(l.ox,null,t.createElement(l.s_,{type:"outline","aria-label":_t.t("Cancel")},_t.t("Cancel")),t.createElement($.lV,{type:"primary",onClick:this.onSubmit,loading:vt,disabled:Mt,"data-qa":`${yt.ADD_DIALOG}_go`,"aria-label":_t.t("Save")},_t.t("Save")))))}constructor(vt){super(vt),this.fileInput=t.createRef(),this.checkIfEmojiNameAlreadyExistsImmediate=Mt=>{this.props.getEmojiInfo({name:Mt}).then(()=>{this.state.newEmojiName===Mt&&this.setState(()=>({nameErrorText:_t.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.")}))}).catch(be.A)},this.checkIfEmojiNameAlreadyExists=(0,xe.A)(this.checkIfEmojiNameAlreadyExistsImmediate,200),this.state={uploadedImage:null,newEmojiName:this.props.emojiNameSuggestion,fileName:"",previewImageUrl:this.props.emojiUrl||"",placeholder:!0,nameErrorText:"",apiErrorText:null,imagePreviewError:!1,goButtonIsPending:!1},this.fileInput=t.createRef(),this.eventId=vt.clientApp?Ae.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT:Ae.EventId.PAGE_CUSTOMIZE_EMOJI,(0,Le.v)(this,["onEmojiNameChange","onTextFocus","onTextBlur","onUploadChange","onImagePreviewError","onSubmit","renderUploadedFileText","renderUploadPreview","renderUploadImagePrompt","renderPlaceholderText","renderChooseNamePrompt","renderDialogMessage","renderToastMessage","renderErrorMessage","renderImagePreview","fileUpload","onDrop","onDragOver","maybeLoadEmojiPreviewFromUrl","maybeRenderDuplicateNameErrorPreview"])}},"AddCustomEmojiDialogContent");Kt.displayName="AddCustomEmojiDialogContent",Kt.defaultProps={standardEmojiData:{},addCustomEmoji:be.A,enqueueToast:be.A,clientApp:!1,closeModal:be.A,getEmojiInfo:be.A,searchArgs:{},emojiNameSuggestion:"",windowRef:(0,tt.O)(window)};const Qt=c(rt=>({addCustomEmoji:vt=>rt((0,qe.l)(vt)),enqueueToast:function(){for(var vt=arguments.length,Mt=new Array(vt),Ct=0;Ct<vt;Ct++)Mt[Ct]=arguments[Ct];return rt((0,re.M)(...Mt))},closeModal:()=>rt((0,i.O)()),getEmojiInfo:function(){for(var vt=arguments.length,Mt=new Array(vt),Ct=0;Ct<vt;Ct++)Mt[Ct]=arguments[Ct];return rt(Ie(...Mt))}}),"mapDispatchToProps"),Jt=c(rt=>({standardEmojiData:(0,le.O)(rt),clientApp:(0,q.TZ)(rt),clogger:(0,fe.e)({state:rt})}),"mapStateToProps"),Gt=(0,ue.N)(Jt,Qt)((0,ut.A)(Kt));var wt=e(1194535350),Bt=e(4318855015),Wt=e(5510392579),Tn=e(9236644324),Ot=e(6105929840),Ft=e(5305906809);const rn=new v.Ay("custom_emoji_list"),ln=c(rt=>{let{adding:vt,name:Mt}=rt;const Ct=(0,n.wA)();return t.createElement(k.Ay,{onCloseComplete:()=>{vt&&Ct((0,Bt.su)())}},t.createElement("span",{"data-qa":"emoji-pack-action"},vt&&rn.rt("The {name} emoji pack has been added to your workspace.",{name:t.createElement("b",null,Mt)}),!vt&&rn.rt("The {name} emoji pack has been removed from your workspace.",{name:t.createElement("b",null,Mt)})))},"InstallToast");ln.displayName="InstallToast";const _n=c(rt=>{let{name:vt,url:Mt,index:Ct,copyToClipboard:Yt,onClose:In}=rt;const Un=(0,n.wA)(),En=t.createElement(V.Ay,{showTooltip:!0,text:vt,url:Mt,emojiSize:V.lw.LARGE});function Bn(){(0,Tn.x3)(vt),In&&In(),Un((0,i.O)()),Un((0,re.M)({element:t.createElement(k.Ay,null,t.createElement("span",null,rn.rt("Emoji copied to clipboard",{name:vt})))}))}return c(Bn,"onClick"),Bn.displayName="onClick",Yt&&(0,Tn.tD)()?t.createElement(b.A,{className:"p-emoji_pack_details__button","data-color-index":Ct%Ft.dX,onClick:Bn},En):En},"EmojiButton");_n.displayName="EmojiButton";const en=c(rt=>{let{collectionId:vt,name:Mt,author:Ct,installed:Yt,emoji:In,onCancelClick:Un,onClose:En}=rt;const Bn=(0,n.wA)(),Mn=(0,h.d4)(Wt.h3),[Vn,rs]=(0,t.useState)(!1),as=(0,t.useCallback)(()=>{rs(!0),Bn((0,wt._J)({collectionId:vt,reason:"emojiPack:dialog"})).then(()=>{rs(!1),En&&En(),Bn((0,i.O)()),Bn((0,re.M)({element:t.createElement(ln,{adding:!0,name:Mt})}))})},[Bn,vt,Mt,En]),[jn,es]=(0,t.useState)(!1),Qn=(0,t.useCallback)(()=>{es(!0),Bn((0,wt.zx)({collectionId:vt,reason:"emojiPack:dialog"})).then(()=>{es(!1),En&&En(),Bn((0,i.O)()),Bn((0,re.M)({element:t.createElement(ln,{adding:!1,name:Mt})}))})},[Bn,vt,Mt,En]);if(!In)return null;const ss=(0,L.A)(In,(xt,Dn)=>({name:Dn,url:xt})).map((xt,Dn)=>({...xt,index:Dn})),ft=(0,E.A)(ss,5),pt=rn.t("{emojiCount, plural, =1 {# emoji} other {# emoji}}",{emojiCount:(0,g.A)(In)}),Ht=rn.t("by {author}",{author:Ct}),nn=t.createElement(t.Fragment,null,t.createElement("span",{className:"p-emoji_pack_details__subtitle_author"},Ht),pt),kn=t.createElement(Ot.A,{"aria-label":rn.t("Go back"),svgIconProps:{name:"caret-left-full"},onClick:()=>Un()});return t.createElement(t.Fragment,null,t.createElement(l.rQ,null,t.createElement(l.Rc,{icon:kn,title:Mt,subtitle:nn})),t.createElement(l.$m,null,t.createElement(l.qf,null,ft.map(xt=>t.createElement("div",{key:xt.map(Dn=>Dn.name).join("-details-"),className:"p-emoji_pack_details__emoji_row"},xt.map(Dn=>t.createElement(_n,{key:`emoji-pack-details-${Dn.name}`,name:`:${Dn.name}:`,url:Dn.url,index:Dn.index,copyToClipboard:Yt,onClose:En})),[...new Array(5-xt.length)].map((Dn,Fn)=>`emoji-pack-details-spacer-${Fn}`).map(Dn=>t.createElement("div",{key:Dn,className:"p-emoji_pack_details__emoji_spacer"})))))),t.createElement(l.jl,null,Yt&&(0,Tn.tD)()&&t.createElement("span",{className:"p-emoji_pack_details__tip"},rn.t("Click an emoji to copy to clipboard")),t.createElement(l.ox,null,Yt&&Mn&&t.createElement($.lV,{autoFocus:!0,type:"danger",loading:jn,onClick:Qn,"aria-label":rn.t("Remove pack")},rn.t("Remove pack")),!Yt&&t.createElement($.lV,{autoFocus:!0,loading:Vn,onClick:as,"aria-label":rn.t("Add pack")},rn.t("Add pack")))))},"EmojiPackDetails");en.displayName="EmojiPackDetails";const Xt=en;var vn=e(1655938719);const je=new v.Ay("custom_emoji_list"),Rt={CUSTOM:"custom",PACKS:"packs"},hn=c(rt=>{let{orgName:vt="",searchArgs:Mt={},showEmojiPacks:Ct,initialTab:Yt=Rt.CUSTOM,emojiNameSuggestion:In="",emojiUrl:Un,megaphoneEventOnClose:En}=rt;const Bn=(0,n.wA)(),[Mn,Vn]=(0,t.useState)(Yt),[rs,as]=(0,t.useState)(!1),[jn,es]=(0,t.useState)(null),Qn=Un?je.t("Add emoji to your organization"):void 0,ss=Ct?je.t("Add emoji"):je.t("Add custom emoji"),ft=Qn??ss,pt=je.t("Emoji packs"),Ht=je.t("Custom emoji"),nn=(0,t.useMemo)(()=>[{title:Ht,id:Rt.CUSTOM,onClick:()=>Vn(Rt.CUSTOM),"data-qa":"add_emoji_dialog_tab_custom"},{title:pt,id:Rt.PACKS,onClick:()=>Vn(Rt.PACKS),"data-qa":"add_emoji_dialog_tab_packs"}],[Ht,pt]),kn=(0,t.useCallback)(()=>{En&&Bn((0,vn.iR)({event:{type:En}}))},[Bn,En]),xt=(0,t.useCallback)(()=>{kn(),Bn((0,i.O)())},[Bn,kn]),Dn=Ct&&Mn===Rt.PACKS,Fn=Ct?t.createElement(o.A,{tabs:nn,currentTabId:Mn,className:"p-add_custom_emoji_dialog__tabs",ariaLabel:ft}):null,wn=(0,s.A)("p-add_emoji_dialog",{"p-add_emoji_dialog--without_tabs":!Ct});return Ct&&jn?t.createElement(l.dW,{closeModal:xt,isOpen:!0,className:wn},t.createElement(Xt,{collectionId:a(jn),name:(0,r.M)(jn),author:d(jn),emoji:rs?_(jn):(0,u.H)(jn),installed:rs,onCancelClick:()=>{es(null)},onClose:kn})):t.createElement(l.dW,{overlayClassName:"p-add_emoji_dialog_overlay",closeModal:xt,isOpen:!0,className:wn},t.createElement(l.rQ,null,t.createElement(l.Rc,{title:ft,className:"no_min_height padding_bottom_50"}),Fn),Dn&&t.createElement(ne,{orgName:vt,onPackClick:(It,Je)=>{let{installed:X}=Je;as(X),es(It)}}),!Dn&&t.createElement(Gt,{orgName:vt,searchArgs:Mt,emojiNameSuggestion:In,emojiUrl:Un}))},"AddEmojiDialog");hn.displayName="AddEmojiDialog";const Nn=hn},5331686899:(x,A,e)=>{"use strict";e.d(A,{lw:()=>V,Ay:()=>G});var t=e(7752974446),n=e.n(t),s=e(3134334389),i=e(2562405183),l=e(9391594207),o=e(5255740490),a=e(2047021170),r=e(8525228540),d=e(8847766420),u=e(3829348308),_=e(3043682041),v=e(9599231336),h=e(735940183),f=e(8556787853),I=e(5799716058),p=e(4921059838),y=e(6795568989),g=e(3695531806),E=e(1563996154),M=e(1610251172),T=e(796111729);function D(){return D=Object.assign||function(H){for(var U=1;U<arguments.length;U++){var F=arguments[U];for(var Y in F)Object.prototype.hasOwnProperty.call(F,Y)&&(H[Y]=F[Y])}return H},D.apply(this,arguments)}c(D,"_extends");function C(H){return class extends s.PureComponent{componentDidCatch(U,F){this.setState(()=>({hasError:!0})),(0,T.Wo)().error({label:"Error rendering emoji component",error:U,message:F})}render(){return this.state.hasError?s.createElement("span",{"data-qa":"missing_emoji",className:"c-emoji c-emoji__medium c-emoji--inline"},s.createElement("img",{src:n()})):s.createElement(H,D({},this.props))}constructor(U){super(U),this.state={hasError:!1}}}}c(C,"withEmojiErrorBoundary"),C.displayName="withEmojiErrorBoundary";const m=C;var O=e(9580887194),P=e(8021873188),R=e(9936232041);function L(){return L=Object.assign||function(H){for(var U=1;U<arguments.length;U++){var F=arguments[U];for(var Y in F)Object.prototype.hasOwnProperty.call(F,Y)&&(H[Y]=F[Y])}return H},L.apply(this,arguments)}c(L,"emoji_extends");const V={SMALL:"small",MEDIUM:"medium",LARGE:"large",LARGER:"larger",XLARGE:"xlarge"},B=c(H=>{const U=(0,i.d4)(F=>{if(!H.isStandard)return H.url;var Y;const Z=(Y=H.sourceTeamId)!==null&&Y!==void 0?Y:(0,d.ZT)(F);return H.isStandard?(0,u.Ez)(F,{text:H.text||"",teamId:Z,emojiMode:(0,_.w)(F,{forceDisplay:!!H.forceDisplay}),emojiSize:V.XLARGE}):H.url});return s.createElement(K,{shouldFallbackOnLoadError:!0,renderAsText:!1,showTooltip:!1,emojiSize:V.LARGER,text:H.text,displayText:H.displayText,url:U||"",sourceTeamId:H.sourceTeamId,ariaLabel:H.ariaLabel,alt:H.alt,unicode:H.unicode,emojiNameFromText:H.emojiNameFromText,dispatch:H.dispatch,stopAnimations:H.stopAnimations,fallbackUrl:H.fallbackUrl,isStandard:H.isStandard})},"EmojiTooltipEmoji");B.displayName="EmojiTooltipEmoji";let K=c(class extends s.PureComponent{onLoadError(){this.setState(()=>({isLoadError:!0}))}renderIconFallback(){return s.createElement(M.A,{legacy:!0,className:"c-emoji__text_mode_icon",type:"info-circle",align:"top",inherit:!0})}isImportable(){const{isLoadError:U}=this.state,{isImportAllowed:F,isStandard:Y}=this.props;return F&&!Y&&!U}renderEmojiElement(){const{text:U,displayText:F,url:Y,emojiSize:Z,isEmojiInlineWithText:ee,className:j,shouldFallbackOnLoadError:ge,fallbackUrl:ne,ariaLabel:ue,alt:he}=this.props,{isLoadError:be}=this.state,xe=(0,o.A)("c-emoji",`c-emoji__${Z}`,j,{"c-emoji--inline":ee}),Le=ue??(F&&(0,I.A)(F)),fe={"data-stringify-type":"emoji","data-stringify-emoji":U},se=this.isImportable()?this.handleEmojiImport:void 0;return ee?s.createElement("span",{className:xe,"data-qa":(be||!Y)&&ge?"emoji-fallback":"emoji"},s.createElement("img",L({src:(be||!Y)&&ge?ne:Y,onError:this.onLoadError,onContextMenu:se,"aria-label":Le,alt:F},fe))):s.createElement("img",L({src:(be||!Y)&&ge?ne:Y,onError:this.onLoadError,"aria-label":Le,alt:he??F,className:xe,onContextMenu:se,"data-qa":(be||!Y)&&ge?"emoji-fallback":"emoji"},fe))}renderUnicodeAsEmoji(U){if(U&&(0,y.d)(U)){const{emojiSize:F}=this.props,Y=(0,g.z)({codePointLikeString:U});return s.createElement("span",{className:(0,o.A)("c-emoji__unicode",{"c-emoji__unicode--large":F===V.LARGE})},Y)}}renderTooltip(){const{renderAsText:U,displayText:F,text:Y,isStandard:Z,url:ee,unicode:j,sourceTeamId:ge,ariaLabel:ne,alt:ue,emojiNameFromText:he,stopAnimations:be,fallbackUrl:xe,forceDisplay:Le}=this.props;if(U)return F;const fe=Z?void 0:ee;return s.createElement(s.Fragment,null,s.createElement("div",{className:"c-emoji__emoji-tooltip"},s.createElement(B,{text:Y,displayText:F,url:fe,sourceTeamId:ge,ariaLabel:ne,alt:ue,unicode:j,emojiNameFromText:he,dispatch:this.props.dispatch,stopAnimations:be,fallbackUrl:xe,isStandard:Z,forceDisplay:Le})),F,this.isImportable()&&s.createElement(P.K,{emojiName:F,emojiUrl:ee}))}render(){const{displayText:U,url:F,renderAsText:Y,showTooltip:Z,iconInTextMode:ee,renderEmojiFallback:j,unicode:ge,emojiNameFromText:ne}=this.props;if(!F&&!U&&!ge)return null;if((Y||!F)&&!j&&!ge)return ee?this.renderIconFallback():U;if(ge&&!ne){var ue;return(ue=this.renderUnicodeAsEmoji(ge))!==null&&ue!==void 0?ue:U}return Z?s.createElement(E.Ay,{tip:this.renderTooltip,delay:E.PK,zIndex:"above_fs"},this.renderEmojiElement()):this.renderEmojiElement()}constructor(U){super(U),this.handleEmojiImport=F=>{if(F!=null&&F.altKey)return;const{url:Y,dispatch:Z,displayText:ee}=this.props;Z((0,O.a)({emojiName:ee,emojiUrl:Y,event:F}))},this.onLoadError=this.onLoadError.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.state={isLoadError:!1}}},"Emoji");K.displayName="Emoji",K.defaultProps={text:"",showTooltip:!1,className:void 0,stopAnimations:!1,iconInTextMode:!1,url:void 0,emojiSize:V.MEDIUM,isEmojiInlineWithText:!1,isImportAllowed:!1,displayText:"",sourceTeamId:void 0,shouldFallbackOnLoadError:!1,renderEmojiFallback:!1,ariaLabel:void 0,alt:void 0};const b=c((H,U)=>{const{stopAnimations:F,forceDisplay:Y,emojiSize:Z=V.MEDIUM,url:ee,unicode:j}=U;let{text:ge}=U,ne=(0,u.qJ)(H,j??"");ne&&ne.charAt(ne.length-1)!==":"&&ne.charAt(0)!==":"&&(ne=`:${ne}:`),ge=ne||ge||"";let ue=ee;const he=(0,d.ZT)(H)||"",be=!(0,a.ty)(H,"a11y_animations"),xe=F||be,Le=(0,h.Yp)({teamOrEnterpriseId:he,recalc:!1}),fe=(0,r.bR)({state:H,locale:Le,name:ge}),se=!Y&&(0,v.P)(H),Q=(0,R.A)(ge),k=(0,p.R)(H,Q);if(!se&&!ue){const W=(0,_.w)(H,{forceDisplay:!!Y});var N;const q=(N=U.sourceTeamId)!==null&&N!==void 0?N:he;ue=(0,u.Ez)(H,{text:ge,parsedEmoji:Q,teamId:q,emojiMode:W,emojiSize:Z===V.LARGER?V.XLARGE:Z})||void 0}if(xe&&!k){var $;ue=($=(0,f.Ay)(H,{url:ue,stopAnimations:xe,isEmoji:!0}))!==null&&$!==void 0?$:void 0}return{text:ge,url:ue,renderAsText:se,emojiSize:Z,displayText:fe||"",stopAnimations:xe,fallbackUrl:n(),isStandard:k,emojiNameFromText:ne}},"mapStateToProps"),S={mapStateToProps:b},G=m((0,l.N)(b)(K))},1030162945:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>n,lw:()=>t.lw});var t=e(5331686899);const n=t.Ay},4899054948:(x,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3134334389),n=e(9391594207),s=e(5255740490),i=e(3879245650),l=e(3202757386),o=e(4724591729),a=e(735940183),r=e(6084388622),d=e(8739505998),u=e(796111729),_=e(2786906754),v=e(9190452268),h=e(6968387112),f=e(7545496485);const p=c(m=>!!(0,f.w)(m).isWorkspace,"looksLikeWorkspaceState");var y=e(2229064554),g=e(8022922400),E=e(6338445630);const M=new a.Ay("error_boundary"),T="REB";let D=c(class extends t.Component{componentDidUpdate(O){this.state.hasError&&O.id!==this.props.id&&this.resetHasError()}componentDidCatch(O,P){let R=null;try{R=`${T}${(0,i.B)((0,g.A)(O.message)).substr(0,9).toUpperCase()}`}catch{}if(this.setState(()=>({hasError:!0,errCode:R}),()=>{var L,V;return(V=(L=this.props).onError)===null||V===void 0?void 0:V.call(L,O)}),!(0,o.Cu)()){const L=P.componentStack.split(`
`).slice(0,Error.stackTraceLimit).join(`
`);this.props.logger.error("ERROR-BOUNDARY",O,R,L,{subtype:this.props.subtype||"component_error_boundary"})}}onClickReloadButton(O){O.preventDefault();let P=window.location.href;this.props.telemeter.count("react_error_boundary_reload_click"),(0,l.A)()?(P=(0,_.M6)(window.location.href,"force_cold_boot",1),this.props.logger.info("GANTRY",`Reloading at ${P} after hitting ErrorBoundary`),(0,E.Lz)().finally(()=>{window.location.href=P})):(this.props.logger.info("LEGACY",`Reloading at ${P} after hitting ErrorBoundary`),window.location.href=P)}resetHasError(){this.setState(()=>({hasError:!1,errCode:null}))}renderReloadLinkMsg(){const O=c(P=>{let{text:R,key:L}=P;return t.createElement(d.A,{href:`https://${(0,h.qF)()}/help/contact`,rel:"noopener noreferrer",key:L},R)},"renderLink");return this.state.errCode==="REBD7A8C1099"?M.rt("This particular hiccup is something we know about and are working to fix. Please reload and things should be cleared up. If this issue persists, please <a>drop us a line.</a>",{fallbackHash:"e429542887f26442dba7a085bd05bea15803edd9",fallbackHashNs:"error_boundary"},O):M.rt("Reloading Slack might clear things up. If it doesn\u2019t, <a>drop us a line.</a>",null,O)}render(){if(this.state.hasError){if(this.props.telemeter.count("react_error_boundary_rendered"),this.props.renderError)return this.props.renderError({errCode:this.state.errCode});const O=(0,s.A)("p-error_boundary",this.props.className,{"p-error_boundary--short":this.props.variant==="short"});return t.createElement("div",{className:O},t.createElement("div",{className:"p-error_boundary__content"},t.createElement("div",{className:"p-error_boundary__message"},t.createElement("h1",{className:"p-error_boundary__heading"},t.createElement("span",null,M.t("Something went wrong")),t.createElement("span",{className:"p-error_boundary__icon p-error_boundary__icon--turtle",role:"img","aria-label":M.t("Something went wrong")},"\u{1F422}")),t.createElement("p",{className:"p-error_boundary__contact_msg"},this.renderReloadLinkMsg())),this.state.errCode&&t.createElement(y.A,{errCode:this.state.errCode}),t.createElement(r.Ay,{type:"primary",className:"margin_right_50",onClick:this.onClickReloadButton,"data-qa":"error_reload"},M.t("Reload"))))}return this.props.children}constructor(O){super(O),this.state={hasError:!1,errCode:null},this.onClickReloadButton=this.onClickReloadButton.bind(this)}},"ErrorBoundary");D.displayName="ErrorBoundary";const C=(0,n.N)(m=>({logger:p(m)?(0,u.Ay)({state:m}):(0,u.Wo)(),telemeter:p(m)?(0,v.Cy)({state:m}):(0,v.rh)()}))(D)},2229064554:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(735940183);const s=new n.Ay("error_boundary");function i(l){let{errCode:o}=l;return t.createElement("p",{className:"p-error_boundary__error_code_container"},t.createElement("span",{className:"p-error_boundary__error_code","data-qa":"error_code"},s.t("Error: "),o))}c(i,"ErrorCode")},3837503631:(x,A,e)=>{"use strict";e.d(A,{H:()=>o,A:()=>a});var t=e(4899054948),n=e(3134334389);function s(){return s=Object.assign||function(r){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(r[_]=u[_])}return r},s.apply(this,arguments)}c(s,"_extends");const i=c(()=>null,"renderError"),o=c(r=>n.createElement(t.A,s({renderError:i},r)),"QuietErrorBoundary"),a=t.A},8022922400:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});const t=/\bA[A-Z0-9]{8,}\b/g,n=/\bB[A-Z0-9]{8,}\b/g,s=/\b(C|G|D)[A-Z0-9]{8,}\b/g,i=/\bF[A-Z0-9]{8,}\b/g,l=/\b(U|W)[A-Z0-9]{8,}\b/g,o=/\b[\d]{10}\.[\d]{6}\b/g,a=/\bS[A-Z0-9]{8,}\b/g,r=/\bT[A-Z0-9]{8,}\b/g;function d(u){return String(u).replace(t,"[APP_ID]").replace(n,"[BOT_ID]").replace(s,"[CHANNEL_ID]").replace(i,"[FILE_ID]").replace(l,"[MEMBER_ID]").replace(o,"[MESSAGE_TS]").replace(a,"[USER_GROUP_ID]").replace(r,"[TEAM_ID]")}c(d,"normalizeError")},5141066605:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(735940183),n=e(5549390246),s=e(4761125736);const i=new t.Ay("files");function l(o,a){if(!o.is_external)return null;if((0,s._Z)(a,"file_consistency")==="treatment"){let d="File";switch(o.external_type){case"gdrive":switch(o.filetype){case"gsheet":d=i.t("Google Sheet");break;case"gdoc":d=i.t("Google Doc");break;case"gpres":d=i.t("Google Slide");break;case"gdraw":d=i.t("Google Drawing");break;default:d=i.t("Google {fileType}",{fileType:o.pretty_type})}break;case"dropbox":case"box":case"onedrive":case"app":d=i.t("{fileType}",{fileType:o.pretty_type});break;default:d=i.t("File")}return d}switch(o.external_type){case"gdrive":switch(o.filetype){case"gsheet":return i.t("Spreadsheet from Google Drive");case"gdoc":return i.t("Document from Google Drive");case"gpres":return i.t("Presentation from Google Drive");case"gdraw":return i.t("Drawing from Google Drive");default:return i.t("{fileType} from Google Drive",{fileType:o.pretty_type})}case"dropbox":return i.t("{fileType} from Dropbox",{fileType:o.pretty_type});case"box":return i.t("{fileType} from Box",{fileType:o.pretty_type});case"onedrive":return i.t("{fileType} from OneDrive",{fileType:o.pretty_type});case"app":return i.t("{fileType} from {appName}",{fileType:o.pretty_type,appName:(0,n.Y)(a,o)||""});default:return i.t("File")}}c(l,"getExternalFiletypeDescription")},8642919232:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(8950789382),l=e(8677230210);const o=(0,s.Ay)("Opens a member profile in a tile",function(){var r=(0,t.coroutine)(function*(d,u,_){(0,l.wC)(u(),_)&&d((0,i.s)({viewId:"rimeto_profile",params:{memberId:_}}))});return function(d,u,_){return r.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkopenProfileInWindow",description:"Opens a member profile in a tile"};const a=o},6565762531:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){return!!(n&&n!=="-")}c(t,"isValidFieldValue")},7969928607:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5734673180),s=e(8509961938),i=e(1030162945),l=e(6818330210);function o(r){let{text:d="",inputIsEscaped:u=!1,emojiSize:_=i.lw.SMALL,showTooltips:v=!0,stopAnimations:h=!1,emojiDisplayInfo:f={}}=r;const I=[];let p=0;const y=u?(0,n.A)(d??""):d??"";if(y.replace((0,s.A)(),(g,E,M)=>{if(M>p){const C=y.slice(p,M);I.push(t.createElement(t.Fragment,{key:`${M}-${C}`},C))}const{name:T=g,url:D=void 0}=(0,l.H)(g,f);return I.push(t.createElement(i.Ay,{text:T,emojiSize:_,key:`${M}-${T}`,showTooltip:v,stopAnimations:h,isEmojiInlineWithText:!0,url:D})),p=M+g.length,""}),!I.length)return t.createElement(t.Fragment,null,y);if(p<y.length){const g=y.substr(p);I.push(t.createElement(t.Fragment,{key:`last-${g}`},g))}return t.createElement(t.Fragment,null,I)}c(o,"FormatTextWithEmoji"),o.displayName="FormatTextWithEmoji";const a=t.memo(o)},6159136815:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5734673180),s=e(7969928607);const i=/\ue000([^\ue001]*)\ue001/g;function l(a){let{text:r="",inputIsEscaped:d=!1,showTooltips:u=!0,stopAnimations:_=!1}=a;const v=[];let h=0;const f=d?(0,n.A)(r??""):r??"";if(f.replace(i,(I,p,y)=>{if(y>h){const g=f.slice(h,y);v.push(t.createElement(s.A,{key:`${y}-${g}`,text:g,showTooltips:u,inputIsEscaped:d,stopAnimations:_}))}v.push(t.createElement("span",{className:"c-mrkdwn__highlight",key:`${y}-${p}`},t.createElement(s.A,{text:p,showTooltips:u,inputIsEscaped:d,stopAnimations:_}))),h=y+I.length}),!v.length&&r)return t.createElement(t.Fragment,null,t.createElement(s.A,{text:r,showTooltips:u,inputIsEscaped:d,stopAnimations:_}));if(r&&h<r.length){const I=f.substr(h);v.push(t.createElement(s.A,{key:`last-${I}`,text:I,showTooltips:u,inputIsEscaped:d,stopAnimations:_}))}return t.createElement(t.Fragment,null,v)}c(l,"FormatTextWithHighlightMarkers"),l.displayName="FormatTextWithHighlightMarkers";const o=t.memo(l)},1743656885:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(8951118047);const n=t.A},8808892924:(x,A,e)=>{"use strict";e.d(A,{i:()=>P});var t=e(3134334389),n=e(8212623464),s=e(5255740490),i=e(7715417323),l=e(3391133100),o=e(2562405183),a=e(8847766420),r=e(3288846409),d=e(6533394955),u=e(6470070112),_=e(4775127335),v=e(1563996154),h=e(5286203919),f=e(1766818988),I=e(9548972574),p=e(8683010724),y=e(543174729);const g=t.memo(R=>{let{id:L}=R;return t.createElement("svg",{className:"sr-only"},t.createElement("clipPath",{id:L,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0.03,1 h0.742 a0.258,0.2,0,0,0,0.258,-0.2 V0.2 a0.258,0.2,0,0,0,-0.258,-0.2 H0.03 a0.385,0.299,0,0,1,0.098,0.2 v0.6 A0.385,0.299,0,0,1,0.03,1"})))});var E=e(1407713935),M=e(9101533895),T=e(796111729);function D(){return D=Object.assign||function(R){for(var L=1;L<arguments.length;L++){var V=arguments[L];for(var B in V)Object.prototype.hasOwnProperty.call(V,B)&&(R[B]=V[B])}return R},D.apply(this,arguments)}c(D,"_extends");const C=2;function m(R){let{channelId:L,withTooltip:V,className:B,excludeIcon:K,excludeMemberOverflowCount:b,maxMembers:S=C,avatarSize:G=_.RG.verySmall,includeChannelNameInTooltip:H=!1,excludeSelf:U=!1}=R;const F=(0,t.useMemo)(()=>`huddles-mask-${(0,l.r9)()}`,[]),Y=(0,t.useMemo)(()=>({"--huddles-mask":`url(#${F})`,"--huddles-avatar-size":`${G}px`}),[F,G]),Z=(0,o.d4)(N=>(0,u.pt)(N)||(0,f.s)(N)),ee=(0,o.d4)(N=>(0,M.OL)(N,L)),j=(0,r.cw)(h.hc),ge=(0,r.cw)(h.vO),ue=j===L&&(0,u.pZ)(ge),he=(0,o.Z2)(N=>(0,I.A7)(N,L,U)),be=he.length,xe=be>S,Le=xe?be-2:0,fe=xe?he.slice(0,S):he,se=(0,t.useMemo)(()=>{const N=H&&!(0,E.PC)(ee),$=t.createElement(y.A,{channelId:L,includeChannelName:N});return $||(0,T.Wo)().info("HUDDLE-FACEPILE",`channelId: ${L}, includeChannelName: ${N}`),$},[L,H,ee]);if(!Z||!be)return null;const Q=t.createElement("div",{className:(0,s.A)("p-huddle_avatar_stack",B),"data-qa":"huddle_avatar_stack__avatars_container",style:Y},t.createElement(g,{id:F}),!K&&t.createElement("div",{className:"p-huddle_avatar_stack__icon_container"},t.createElement(p.A,{name:"headphones",size:"18"})),fe.map((N,$)=>t.createElement(_.Ay,{key:N,"data-qa":"huddle_avatar_stack__member",className:(0,s.A)("p-huddle_avatar_stack__avatar",{"p-huddle_avatar_stack__avatar--first":$===0}),userId:N,size:G,renderCustomBadge:i.A,isInteractive:!1})),!b&&xe&&t.createElement("div",{className:"p-huddle_avatar_stack__plus-member-count","data-qa":"huddle_avatar_stack__plus_member_count"},`+${Le}`)),k=V&&se?t.createElement(v.Ay,{tip:se},Q):Q;return ue?null:k}c(m,"HuddleAvatarStackContent"),m.displayName="HuddleAvatarStackContent";const O=t.memo(m),P=t.memo(R=>{const{channelId:L}=R,V=(0,o.d4)(S=>(0,I.LY)(S,L)),B=(0,r.cw)(h.l4),K=(0,r.cw)(h.hc),b=(0,o.d4)(a.ZT);if(!V)return null;if(K===L){const S=(0,d.getStoreInstanceByTeamId)(B||b);return t.createElement(n.Kq,{store:S},t.createElement(O,D({},R)))}return t.createElement(O,D({},R))})},3496486794:(x,A,e)=>{"use strict";e.d(A,{A:()=>U,g:()=>G});var t=e(3134334389),n=e(735940183),s=e(9679390338),i=e.n(s),l=e(4553218033),o=e.n(l),a=e(5475210953),r=e.n(a),d=e(7485089530),u=e.n(d),_=e(3342291988),v=e.n(_),h=e(9631995895),f=e.n(h),I=e(5908540923),p=e.n(I),y=e(553949882),g=e.n(y),E=e(7000154057),M=e.n(E),T=e(1672115571),D=e.n(T),C=e(7234375712),m=e.n(C),O=e(4136357865),P=e.n(O),R=e(8514307482),L=e.n(R),V=e(5738074488),B=e.n(V),K=e(3607863955),b=e.n(K);const S=new n.Ay("huddles"),G=[{key:"NONE",preview:p()},{key:"BLUR",preview:p()},{key:"LIVING_ROOM",url:B(),preview:b()},{key:"REMOTE_WORK",url:P(),preview:L()},{key:"TOKYO_SIGHT",url:D(),preview:m()},{key:"GYM",url:g(),preview:M()},{key:"HOME",url:v(),preview:f()},{key:"OFFICE",url:r(),preview:u()},{key:"BEACH",url:i(),preview:o()}],U=c(()=>(0,t.useMemo)(()=>G.map(Y=>{let Z,ee;switch(Y.key){case"NONE":Z=S.t("No Background",{fallbackHash:"e47fc484f6e2f4bb4d93eff83f6dd16ed8da67a6",fallbackHashNs:"canvas"});break;case"BLUR":Z=S.t("Blur",{fallbackHash:"900aa998d3550d438fc20a414d3938fc3a1630ab",fallbackHashNs:"canvas"});break;case"LIVING_ROOM":Z=S.t("Living Room",{fallbackHash:"c7b60f3edf3318e80575d5e28c1ce24aa99a9025",fallbackHashNs:"canvas"}),ee=S.t("Art by Haley Tippmann",{fallbackHash:"e81e1f67d7c01d9dd464871bece52a2c87443190",fallbackHashNs:"canvas"});break;case"REMOTE_WORK":Z=S.t("Remote Work",{fallbackHash:"42a38f6c51f22fed5086c12e2e747c90b17a2201",fallbackHashNs:"canvas"}),ee=S.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"TOKYO_SIGHT":Z=S.t("Tokyo Sight",{fallbackHash:"eccff2285de126d6179c36b1fbc60c06b039a6e0",fallbackHashNs:"canvas"}),ee=S.t("Art by Luis Mendo",{fallbackHash:"4c1b393549c87100c23c7fe3e258fb7380736dfa",fallbackHashNs:"canvas"});break;case"GYM":Z=S.t("Gym",{fallbackHash:"bc4359231d615dc65e372bac1bb5e0f2bf37639f",fallbackHashNs:"canvas"}),ee=S.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"HOME":Z=S.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"canvas"});break;case"OFFICE":Z=S.t("Office",{fallbackHash:"6c3a72eaf6235dfa967f2bba4dfc3e431c3e1180",fallbackHashNs:"canvas"});break;case"BEACH":Z=S.t("Beach",{fallbackHash:"911fbb65335023a0800e5bf4a2dcc3ff13b2f9e3",fallbackHashNs:"canvas"});break;default:Z="NO_NAME",ee="NO_DESCRIPTION"}return{...Y,name:Z,description:ee}}),[]),"useGetVideoBackgrounds")},8088586193:(x,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(6533394955),l=e(4250409994),o=e(8736071954),a=e(2457673737),r=e(6664301844),d=e(6673728906),u=e(8157829725),_=e(571104883),v=e(462591818);const f=c(I=>{let{videoRef:p,preferredCameraId:y,startOnMount:g=!0,isVideoElementReady:E=!0,handleCameraStreamError:M}=I;const T=(0,s.useRef)(null),D=(0,s.useRef)(!0),[C,m]=(0,s.useState)(!1),[O,P]=(0,s.useState)(void 0),R=(0,s.useCallback)(()=>{const b=T.current;b&&(b==null||b.getTracks().forEach(S=>S.stop()),T.current=null,P(void 0),p.current&&r.xc.disconnectVideoStreamFromVideoElement(p.current,!1),m(!1))},[p]),L=(0,s.useCallback)((0,t.coroutine)(function*(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const S=p.current;if(!(0,_.y3)()&&(yield navigator.permissions.query({name:v.mT.CAMERA})).state===o.eJ.Denied){M==null||M();return}!E||T.current!==null||!S||!y||C&&!b||navigator.mediaDevices.getUserMedia({video:{deviceId:y,width:a.hX,height:a.Qs,frameRate:a.LD},audio:!1}).then(G=>{m(!0),P(y),T.current=G,r.xc.connectVideoStreamToVideoElement(G,S,!0),D.current||R()}).catch(G=>{M==null||M(G)})}),[p,E,y,C,R,M]),V=(0,s.useCallback)(b=>{(0,d.cT)(b,o.lW.Camera),(0,i.dispatchForClientStore)((0,l.WM)({setVideoEnabled:!0}))},[]);(0,s.useEffect)(()=>{O!==y&&y!==void 0&&O!==void 0&&E&&(R(),L(!0))},[y,O,L,R,E]),(0,u.A)(()=>(g&&L(),()=>{D.current=!1,R()}),[]),(0,s.useEffect)(()=>{E&&!C&&!g&&L()},[E,C,L,g]);const B=(0,s.useCallback)(()=>{const b=p.current;b&&((0,i.dispatchForClientStore)((0,l.yi)({videoElement:b})),R())},[R,p]),K=(0,s.useCallback)(()=>{const b=p.current;E&&(!b||!y||L())},[E,y,L,p]);return{turnOnCamera:V,turnOffCameraPreview:B,turnOnCameraPreview:K,previewCameraIsOn:C}},"usePreviewCamera")},5203103513:(x,A,e)=>{"use strict";e.d(A,{Mz:()=>s,NY:()=>i,VW:()=>n,_q:()=>t,aI:()=>o,xX:()=>l});const t="huddles_play_music_when_last",n="huddles_play_music_timeout",s="huddles_music_player_song_key",i="calendar_huddles_default_access_policy",l="calendar_huddles_default_auto_start_summary",o="huddles_show_join_preview"},3622858354:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(7969928607),s=e(1030162945);const i=c(o=>{let{text:a,emojiSize:r=s.lw.SMALL}=o;return t.createElement(t.Fragment,null,t.createElement(n.A,{text:a,emojiSize:r}))},"FormattedHuddleTopic");i.displayName="FormattedHuddleTopic";const l=i},7723800688:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>_,Hi:()=>d,uV:()=>u});var t=e(3134334389),n=e(6122756707),s=e(2562405183),i=e(3288846409),l=e(6251210828),o=e(8239363237),a=e(5286203919),r=e(6470070112),d;(function(v){v.CANVAS_OPEN="canvas_open",v.CANVAS_JOIN="canvas_join",v.CANVAS_LEAVE="canvas_leave",v.CANVAS_TOOLBAR="canvas_toolbar",v.EMOJI_PICKER_OPEN="emoji_picker_open",v.EMOJI_SENT="emoji_sent",v.LINK_OPEN="link_open",v.FOCUS_OPEN="focus_open",v.FOCUS_CLOSE="focus_close",v.MINI_PLAYER_THREAD_BUTTON="mini_player_thread_button",v.MINI_PLAYER_OPEN_WINDOW_BUTTON="mini_player_open_window_button",v.MINI_PLAYER_VIEW_START="mini_player_view_start",v.MINI_PLAYER_VIEW_END="mini_player_view_end",v.SCREENSHARE_START="screenshare_start",v.SCREENSHARE_END="screenshare_end",v.THREAD_FLEXPANE_VIEW_START="thread_flexpane_view_start",v.THREAD_FLEXPANE_VIEW_END="thread_flexpane_view_end",v.THREAD_WINDOW_VIEW_START="thread_window_view_start",v.THREAD_WINDOW_VIEW_END="thread_window_view_end",v.THREAD_OPEN="thread_open",v.THREAD_CLOSE="thread_close",v.SELF_VIDEO="self_video",v.WINDOW_COMPACT_VIEW_START="window_compact_view_start",v.WINDOW_COMPACT_VIEW_END="window_compact_view_end",v.WINDOW_FULL_VIEW_START="window_full_view_start",v.WINDOW_FULL_VIEW_END="window_full_view_end",v.WINDOW_RESIZE_BUTTON="window_resize_button",v.BACKGROUND_CHANGED="background_changed",v.JUKEBOX_SONG_SELECTED="huddles_jukebox_song_selected",v.JUKEBOX_STOP_MUSIC="huddles_jukebox_stop_music",v.CAPTIONS_START="huddles_captions_start",v.CAPTIONS_STOP="huddles_captions_stop",v.INVITATION_SENT="invitation_sent",v.MUSIC_PLAYER_STARTED="huddles_music_player_start_music",v.MUSIC_PLAYER_SONG_SELECTED="huddles_music_player_song_selected",v.MUSIC_PLAYER_STOP="huddles_music_player_stop_music",v.NOTES_OPEN="notes_open",v.NOTES_CLOSE="notes_close",v.CHANNEL_SPACE_OPEN="channel_space_open",v.CHANNEL_SPACE_CLOSE="channel_space_close",v.CHANNEL_SPACE_AUTO_OPEN="channel_space_auto_open"})(d||(d={}));var u;(function(v){v.HUDDLE_MINI_PLAYER_BADGE_ICON="huddle_mini_player_badge_icon",v.HUDDLE_MINI_PLAYER_SCREENSHARE="huddle_mini_player_screenshare",v.HUDDLE_MINI_PLAYER_PEER_TILES="huddle_mini_player_peer_tiles",v.HUDDLE_MINI_PLAYER_OVERFLOW_BUTTON="huddle_mini_player_overflow_button",v.HUDDLE_MINI_PLAYER_OPEN_WINDOW_BUTTON="huddle_mini_player_open_window_button",v.HUDDLE_MINI_PLAYER_THREAD_BUTTON="huddle_mini_player_thread_button",v.CANVAS_WINDOW="canvas_window",v.LEAVE_CALL="leave_call",v.CLOSE_MODAL="close_modal",v.EMOJI_PICKER="emoji_picker",v.JUKEBOX_MENU="jukebox_menu",v.JUKEBOX_MUSIC_BANNER="jukebox_menu_banner",v.REACTION_BUBBLE="reaction_bubble",v.CHANGE_BACKGROUND_DIALOG="change_background_dialog",v.CONNECT_WITH_HUDDLES_CANVAS_EDUCATION="connect_with_huddles_canvas_education",v.HUDDLE_MINI_PLAYER_MUSIC_PLAYER="huddle_music_player",v.HUDDLE_WINDOW_MUSIC_PLAYER="huddle_window_music_player"})(u||(u={}));function _(){const v=(0,i.cw)(a.E9),h=(0,s.Z2)(E=>(0,r.$t)(E,{huddleId:v})),f=(0,i.cw)(r.kn,n.bN),I=(0,i.cw)(r.UE,n.bN),p=(0,s.d4)(E=>(0,l.Ec)(E,{huddleId:v})),y=(0,s.d4)(o.Tk);return(0,t.useMemo)(()=>({canvasThreadChannelId:h.canvas_thread_channel_id,canvasThreadId:h.canvas_thread_id,canvasHuddleSessionId:f.canvas_huddle_session_id,callsRoomId:I.room_id,callsChannelId:I.channel_id,uiPage:p?p.toString():null,fileId:y}),[h.canvas_thread_channel_id,h.canvas_thread_id,f.canvas_huddle_session_id,I.room_id,I.channel_id,p,y])}c(_,"useHuddleClogContext")},4233000497:(x,A,e)=>{"use strict";e.d(A,{A:()=>l,H:()=>i});var t=e(3134334389),n=e(2562405183),s=e(6470070112),i;(function(o){o.HUDDLES_SCHEDULED_ADD="huddles_scheduled_add",o.HUDDLES_SCHEDULED_NUX="huddles_scheduled_nux",o.HUDDLES_SCHEDULED_CANCEL="huddles_scheduled_cancel"})(i||(i={}));function l(o){const a=(0,n.Z2)(r=>o?(0,s.w1)(r,o):{});return(0,t.useMemo)(()=>({callsChannelId:a.channel_id,callsChannelType:a.channel_type,callsNumParticipants:a.num_participants,callsRoomId:a.room_id}),[a.channel_id,a.channel_type,a.num_participants,a.room_id])}c(l,"useHuddlesClogContext")},5169680368:(x,A,e)=>{"use strict";e.d(A,{k:()=>a});var t=e(2562405183),n=e(387328355),s=e(735940183),i=e(9365970888),l=e(8736071954);const o=new s.Ay("huddles"),a=c(()=>{var r;const d=(0,t.d4)(f=>!!(0,n.WQ)(f,"isMicrophoneEnabled")),u=(0,t.Z2)(f=>(0,i.ql)(f,l.lW.Microphone)),_=d?o.t("Mute mic"):o.t("Unmute mic"),v=o.t("Mute microphone"),h=(u==null||(r=u.label)===null||r===void 0?void 0:r.replace(/ *?\([^)]*?\) *?/g,""))||void 0;return{microphoneLabel:_,isMicrophoneEnabled:d,deviceLabel:h,ariaLabel:v}},"useMicrophoneOnOff")},1638377365:(x,A,e)=>{"use strict";e.d(A,{z:()=>r});var t=e(2562405183),n=e(387328355),s=e(735940183),i=e(9365970888),l=e(8736071954),o=e(416787925);const a=new s.Ay("huddles"),r=c(()=>{const d=(0,t.d4)(y=>!!(0,n.WQ)(y,"isHidingSelf")),u=!!(0,t.d4)(y=>(0,n.WQ)(y,"isCameraEnabled"))||!1,_=(0,t.Z2)(y=>(0,i.ql)(y,l.lW.Camera));let v;_!=null&&_.label&&(v=(0,o.On)(_.label));const h=a.t("Turn on video"),f=a.t("Turn off video"),I=u?f:h,p=a.t("Enable video",{fallbackHash:"3007beee8017f0f6378579cbb4d3dc70a5745024",fallbackHashNs:"call_buttons"});return{videoLabel:I,isCameraEnabled:u,isHidingSelf:d,deviceLabel:v,ariaLabel:p}},"useVideoOnOff")},4385664584:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(8212623464),s=e(5950652755);const i=c(o=>{let{store:a,children:r}=o;const d=(0,t.useMemo)(()=>({...a,subscribe:u=>a.subscribeImmediate((0,s.A)(u,16))}),[a]);return t.createElement(n.Kq,{store:d}," ",r," ")},"BackgroundableProvider");i.displayName="BackgroundableProvider";const l=i},7280065019:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5255740490);const s=c(a=>{let{className:r,wasCameraEverEnabled:d}=a;return t.createElement("div",{className:(0,n.A)("p-huddle_camera_icon","p-huddle_camera_icon__container",r),"data-qa":"huddle_video_icon_camera_off"},t.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M14.6694 6.44613L13.0988 8.21302C13.1635 8.32628 13.2578 8.42265 13.3746 8.4902C13.6064 8.62424 13.8922 8.62449 14.1242 8.49088L17.5 6.54725V13.4528L14.1242 11.5091C13.8922 11.3755 13.6064 11.3758 13.3746 11.5098C13.1428 11.6438 13 11.8913 13 12.1591V14.75C13 15.1642 12.6642 15.5 12.25 15.5H6.62151L5.28818 17H12.25C13.4926 17 14.5 15.9926 14.5 14.75V13.4563L17.1263 14.9684C17.9596 15.4482 19 14.8468 19 13.8852V6.11483C19 5.15324 17.9596 4.55176 17.1263 5.03155L14.6694 6.44613ZM1.5 14.4883V5.25C1.5 4.00736 2.50736 3 3.75 3H11.7118L10.3785 4.5H3.75C3.33579 4.5 3 4.83579 3 5.25V12.8008L1.5 14.4883Z",fill:"currentColor"}),t.createElement("path",{className:(0,n.A)({"p-huddle_camera_icon--slash_animated":d}),d:"M2 17.25L15.5 2.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))},"renderCameraOff");s.displayName="renderCameraOff";const i=c(a=>{let{className:r}=a;return t.createElement("div",{className:(0,n.A)("p-huddle_camera_icon","p-huddle_camera_icon__container",r),"data-qa":"huddle_video_icon_camera_on"},t.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M3.75 3.75C2.92157 3.75 2.25 4.42157 2.25 5.25V14.75C2.25 15.5784 2.92157 16.25 3.75 16.25H12.25C13.0784 16.25 13.75 15.5784 13.75 14.75V12.1591L17.5005 14.3185C17.8339 14.5104 18.25 14.2698 18.25 13.8852V6.11483C18.25 5.7302 17.8338 5.4896 17.5005 5.68152L13.75 7.84091V5.25C13.75 4.42157 13.0784 3.75 12.25 3.75H3.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),t.createElement("circle",{className:"p-huddle_camera_icon--dot",cx:"8",cy:"10",r:"2.5",fill:"currentColor"})))},"renderCameraOn");i.displayName="renderCameraOn";const l=c(a=>{let{isCameraEnabled:r,className:d}=a;const[u,_]=(0,t.useState)(r);return(0,t.useEffect)(()=>{r&&_(!0)},[r]),r?i({className:d}):s({className:d,wasCameraEverEnabled:u})},"HuddleCameraIcon"),o=t.memo(l)},543174729:(x,A,e)=>{"use strict";e.d(A,{A:()=>T,z:()=>M});var t=e(3134334389),n=e(2562405183),s=e(5135324409),i=e(9548972574),l=e(1766818988),o=e(4742719639),a=e(5795074931),r=e(4775127335),d=e(3622858354),u=e(6470070112),_=e(3534324375),v=e(8701485242),h=e(735940183),f=e(9101533895),I=e(9884588328),p=e(796111729);const y=new h.Ay("huddles"),g=5,E=8,M=c(D=>{let{channelId:C}=D;const m=(0,n.Z2)(L=>(0,i.A7)(L,C,!1)),O=m.length,P=O>g,R=P?m.slice(0,g):m;return O===0?null:t.createElement("div",{className:"p-huddle_channel_tooltip__avatar_stack"},R.map((L,V)=>{const B=V===R.length-1;return t.createElement("div",{key:L,className:"p-huddle_channel_tooltip__avatar_container",style:{width:B?"auto":r.RG.medium-E}},t.createElement(r.Ay,{className:"p-huddle_channel_tooltip__avatar",userId:L,size:r.RG.medium,renderCustomBadge:s.Q,isInteractive:!1,additionalOverlay:P&&B?O-R.length+1:void 0}))}))},"HuddleTooltipAvatarStack");M.displayName="HuddleTooltipAvatarStack";function T(D){let{channelId:C,includeChannelName:m=!1}=D;const O=(0,n.d4)(Y=>(0,f.OL)(Y,C)),P=(0,n.d4)(Y=>{const Z=(0,u.Bn)(Y,O),ee=(0,l.s)(Y),j=Z||ee;return j||(0,p.Wo)().info("HUDDLE-FACEPILE",`isHuddlesEnabled: ${j}, doesChannelSupportHuddles: ${Z}, isHuddlesEnabledForSponsoredTeam: ${ee}`),j}),R=(0,n.d4)(a.WR),L=(0,n.Z2)(Y=>(0,i.ft)(Y,C)),V=(0,n.d4)(u.df),B=(0,I.Mn)(O),K=L.length,S=K>g?L.slice(0,g):L,G=(0,n.Z2)(Y=>S.map(Z=>({id:Z.id,name:Z.id===R?y.t("you",{fallbackHash:"8af56de68279cb6f5ed022f31af18b9fcdcc2e92",fallbackHashNs:"a11y"}):(0,_.sE)(Y,Z)})).sort((Z,ee)=>Z.id===R?1:ee.id===R?-1:(0,v.Ay)(Z.name,ee.name)).map(Z=>{let{name:ee}=Z;return ee})),H=(0,n.d4)(Y=>(0,o.o)(Y,C)),U=(0,t.useMemo)(()=>m?G.length===1?L[0].id===R?y.rt("Just you in the huddle #{channelName}",{fallbackHash:"9c06151657f5f165820e8137ffe359a9f128d6a4",channelName:B}):y.rt("{name} is in the huddle #{channelName}",{name:G[0],fallbackHash:"296abf823386caa202e6d84323121c5454a50ff0",channelName:B}):y.rt("{memberCount} people in the huddle #{channelName}",{memberCount:K,fallbackHash:"d8a4c5ef1bc88840241821fced733296db51cc36",channelName:B}):G.length===1?L[0].id===R?y.rt("Just you in the huddle"):y.rt("{name} is in the huddle",{name:G[0]}):y.rt("{memberCount} people in the huddle",{memberCount:K}),[m,G,K,B,L,R]);let F=H!=null&&H.trim()?t.createElement(d.A,{text:H}):null;return L.length>=V&&(F=y.t("Only {maxParticipants} people can join a huddle",{maxParticipants:V})),P?t.createElement("div",{className:"p-huddle_channel_tooltip"},t.createElement(M,{channelId:C}),t.createElement("div",{className:"margin_bottom_25","data-qa":"tooltip_action_text"},F),t.createElement("div",{className:"c-tooltip__subtitle","data-qa":"tooltip_member_text"},U)):null}c(T,"HuddleChannelTooltip")},9477894139:(x,A,e)=>{"use strict";e.d(A,{A:()=>d,g:()=>r});var t=e(3134334389),n=e(6122756707),s=e(5253428843),i=e(9712681361),l=e(3837503631),o=e(2825968873);const a=(0,o.tZ)("HUDDLE-ERROR");var r;(function(u){u.Huddles="huddles",u.Sidebar="huddles_pro_max-sidebar",u.Flexpane="huddles_pro_max-flexpane",u.CompactWindow="huddles_pro_max-compact_window",u.LargeWindow="huddles_pro_max-large_window",u.WindowFooter="huddles_pro_max-window_footer",u.AlertBanner="huddles_pro_max-alert_banner",u.InviteWindow="huddles_invite_window",u.ControlStripButton="huddles_control_strip_button",u.ChannelHeader="huddles_channel_header",u.Composer="huddles_composer",u.HuddleSpecialReactions="huddle_special_reactions"})(r||(r={}));function d(u){let{children:_,onError:v,isQuiet:h=!0,shouldStopHuddle:f=!1,subtype:I=r.Huddles}=u;const p=(0,n.wA)(),y=(0,t.useCallback)(()=>{f&&p((0,s.A)({terminalState:i.M6.ClientUIError}))},[p,f]),g=(0,t.useCallback)(M=>{a.error(`${I} ${M}`),v?v():y()},[y,v,I]),E=h?l.H:l.A;return t.createElement(E,{subtype:I,onError:g},_)}c(d,"HuddleErrorBoundary")},4695727674:(x,A,e)=>{"use strict";e.d(A,{A:()=>Y});var t=e(3134334389),n=e(6122756707),s=e(462591818),i=e(2562405183),l=e(825587348),o=e(8739505998),a=e(6470070112),r=e(9712681361),d=e(735940183),u=e(5363983309),_=e(9101533895),v=e(9884588328),h=e(5881236351),f=e(5286203919),I=e(3037015781),p=e(2350349607),y=e(3288846409),g=e(5332875232),E=e(3677514771),M=e(6839188756),T=e(6323355797),D=e(7914553163),C=e(2279207117),m=e(3245843483),O=e(8193414630),P=e(4096483543),R=e(6533394955),L=e(3810478625);function V(Z,ee,j){const ge=(0,R.getStoreInstanceByTeamId)(j);if(!ge)return null;const ne=(0,P.A)(),ue=(0,L.g)(ge.getState());if(!Z||Z===D.MX.TrialFetching)return null;const he=(0,C.FK)(Z,ue);switch(Z){case D.MX.TrialIneligible:return{text:he,onClick:()=>{(0,m.Pxz)((0,T.m6)(ge.getState()))}};case D.MX.TrialEligible:return{text:he,onClick:(0,C.w9)(ge.dispatch,ee,Z)};case D.MX.TrialIneligibleUserCannotUpgrade:return{text:he,onClick:()=>{(0,m.Pxz)((0,C.aD)(Z))}};case D.MX.TrialTeam:return{text:he,onClick:()=>{if(ne){(0,C.uY)(ge.dispatch)();return}(0,m.Pxz)((0,C.aD)(Z))}};case D.MX.TrialExpiry:return{text:he,onClick:()=>{(0,m.Pxz)((0,T.m6)(ge.getState(),{action:T.um.CHECKOUT}))}};default:(0,O.Kh)(Z)}}c(V,"freemiumPrimaryCtaAttributes");var B=e(8847766420);const K=new d.Ay("huddles");function b(Z){let{closeModal:ee}=Z;const j=T.zG.Vhq,ge=(0,D.Ay)({promoSubtype:j}),ne=(0,i.d4)(B.ZT)||"",ue=(0,t.useMemo)(()=>V(ge,j,ne),[ge,j,ne]),he=(0,t.useCallback)(()=>{ue==null||ue.onClick(),ee==null||ee()},[ue,ee]);return!ue||ge!==D.MX.TrialEligible&&ge!==D.MX.TrialIneligible&&ge!==D.MX.TrialIneligibleUserCannotUpgrade?null:t.createElement(l.A,{overlayClassName:"p-huddle_error_modal__overlay",onClose:ee,onCancel:ee,onSubmit:he,showCancelButton:!0,cancelButtonText:K.t("Dismiss"),showSubmitButton:!0,title:K.t("Your huddle has ended"),submitButtonText:ue.text},K.t("On the free version of Slack, your huddles are limited to {min} minutes. You may restart the huddle if you\u2019d like.",{min:30}))}c(b,"HuddleTimeLimitReachedModal"),b.displayName="HuddleTimeLimitReachedModal";const S=new d.Ay("huddles");function G(Z){let{errorCode:ee,isJoinError:j,closeModal:ge}=Z;var ne;const ue=(0,n.wA)(),he=(ne=(0,y.cw)(f.Qn))===null||ne===void 0?void 0:ne.channelId,be=(0,i.d4)(g.TM),xe=(0,i.d4)(Te=>(0,_.OL)(Te,he)),Le=(0,i.d4)(Te=>(0,I.uz)(xe)?(0,v.SB)(Te,xe,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0),fe=(0,i.d4)(a.df),se=S.rt("This huddle already has {maxAmount} people, which is the maximum allowed.",{maxAmount:fe}),Q=(0,t.useCallback)(()=>{ue((0,h.RX)())},[ue]),k=(0,t.useCallback)(()=>{ue((0,h.e$)())},[ue]),N=(0,p.V)(xe),$=(0,i.d4)(E.H7),W=c(Te=>t.createElement(o.A,{target:"_blank",href:`${(0,M.Zl)($)}help/requests/new`},Te),"renderContactUsLink");if(!(0,i.d4)(a.pl)&&!be)return null;if(ee===r.M6.FreemiumMaxParticipants)return Q(),null;const re=(()=>{switch(ee){case r.M6.MaxParticipants:return se;case r.M6.AudioJoinedFromAnotherDevice:return S.rt("To keep things nice and neat, you\u2019re no longer in the huddle here.");case r.M6.ChimeMeetingEnded:return j?S.rt("The Huddle has ended."):N?S.rt("We ended the huddle since you were the only one there for a bit."):S.rt("We ended your huddle since you were the only one there for a bit.");case r.M6.PermissionDenied:return be?S.rt("You are unable to join the Huddle as you do not have permission to join Huddles."):null;case s.uZ.CallEnded:return S.rt("The Huddle has ended.");case r.M6.DeviceLocked:return S.rt("When your computer locks, you automatically leave any huddle you\u2019re in. You can change this in <a>Preferences</a>.",null,Te=>{let{text:Ne,tag:pe}=Te;return pe==="a"?t.createElement(o.A,{onClick:k},Ne):null});case r.M6.FailedStartingRecording:case r.M6.FailedResumingRecording:return S.rt("We\u2019re not sure what went wrong, but try giving it another go in a few minutes.");case r.M6.FailedStartingRecordingUser:case r.M6.FailedResumingRecordingUser:return S.rt("It looks like not everyone on this huddle has access to this feature just yet.");case r.M6.FailedPausingRecording:return S.rt("We\u2019re not sure what went wrong, but please give it another go. If this continues to be an issue, you can try deleting the notes, or <a>contact us</a> for support.",null,Te=>{let{text:Ne,tag:pe}=Te;return pe==="a"?W(Ne):null});case r.M6.FailedDeletingRecording:return S.rt("We\u2019re not sure what went wrong, but please give it another go. If this continues to be an issue, you can try ending the huddle and deleting the canvas once it\u2019s ready, or <a>contact us</a> for support.",null,Te=>{let{text:Ne,tag:pe}=Te;return pe==="a"?W(Ne):null});default:return S.rt("You\u2019ll have to go back and give it another try.")}})(),le=(()=>j?S.t("Can\u2019t join the huddle"):ee===r.M6.AudioJoinedFromAnotherDevice?S.t("You\u2019ve joined the huddle on a different device"):ee===r.M6.ChimeMeetingEnded&&!j?N?S.t("You\u2019re no longer in a huddle in #{channelDisplayName}",{channelDisplayName:Le}):S.t("You\u2019re no longer in a huddle"):ee===r.M6.DeviceLocked?S.t("You\u2019re no longer in a huddle"):ee===r.M6.FailedStartingRecording||ee===r.M6.FailedStartingRecordingUser?S.rt("Couldn\u2019t start Slack AI notes"):ee===r.M6.FailedResumingRecording||ee===r.M6.FailedResumingRecordingUser?S.rt("Couldn\u2019t resume Slack AI notes"):ee===r.M6.FailedPausingRecording?S.rt("Couldn\u2019t stop Slack AI notes"):ee===r.M6.FailedDeletingRecording?S.rt("Couldn\u2019t delete Slack AI notes"):S.t("Something went wrong with your huddle"))(),Ae=(()=>ee===r.M6.AudioInputStreamEnded||ee===r.M6.MaxParticipants||ee===r.M6.ChimeMeetingEnded&&!j?S.t("Got It"):S.t("OK"))();return t.createElement(l.A,{overlayClassName:"p-huddle_error_modal__overlay",onClose:ge,onSubmit:ge,showCancelButton:!1,showSubmitButton:!0,title:le,submitButtonText:Ae},re)}c(G,"HuddleErrorModal"),G.displayName="HuddleErrorModal";const H={HuddleErrorModal:G},U="huddle_error_modal";function F(Z){switch(Z.errorCode){case r.M6.ChimeMeetingEndedFromTimeLimit:return b(Z);default:return G(Z)}}c(F,"HuddleErrorModalManager");const Y=(0,u.A)(F,{modalName:U,allowMultiple:!1,isStackable:!0})},5933621899:(x,A,e)=>{"use strict";e.d(A,{Wx:()=>H,YM:()=>B});var t=e(2003990933),n=e(3134334389),s=e(6122756707),i=e(735940183),l=e(2562405183),o=e(825587348),a=e(5363983309),r=e(1407713935),d=e(9101533895),u=e(1471580244),_=e(8286248123),v=e(1779488764),h=e.n(v),f=e(7268021173),I=e(3677514771),p=e(6839188756),y=e(8871937520),g=e(1224315998),E=e(4481313819),M=e(7003004874),T=e(6259241484),D=e(4902318931),C=e(2938177083),m=e(1273480023),O=e(3810478625);function P(){return P=Object.assign||function(U){for(var F=1;F<arguments.length;F++){var Y=arguments[F];for(var Z in Y)Object.prototype.hasOwnProperty.call(Y,Z)&&(U[Z]=Y[Z])}return U},P.apply(this,arguments)}c(P,"_extends");const R=new i.Ay("huddles"),L={elementName:"cancel",onClick:{enableClogAction:!0}},V={elementName:"start-huddle",onClick:{enableClogAction:!0}},B=c(U=>{let{channelId:F,channelType:Y,channelMembersCount:Z,isTeamOnTrial:ee,isFreeTeam:j,trialExpirationTS:ge,handleOnSubmit:ne,closeModal:ue,UNSAFE_parentSelector:he,isCurrentTeamSponsoredInSlackConnectChannel:be=!1}=U;const xe=(0,l.d4)(O.g),Le=R.t("Continue this conversation in a huddle",{fallbackHash:"e5dda045c4edc7e85d1a347f7051533c494e1904"}),fe=n.createElement(u.A,{channelId:F});let se,Q;switch(ee&&!be?Q=g.UiComponentVariant.TRIAL_TEAM:j&&!be?Q=g.UiComponentVariant.FREE_TEAM:Q=g.UiComponentVariant.PAID_TEAM,Y){case r.Cu.mpim:{const k=c(()=>R.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of this conversation will be able to join.",{channelMembersCount:Z}),"genericCopy");xe?se=k():ee?se=R.rt("Use this message as a jumping off point for a huddle with anyone in this conversation. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{trialEndDate:(0,y.Pd)(ge),fallbackHash:"2955534d96227983f0f85447fb8f3f044131c94f"}):j?se=R.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from the conversation will be able to join."):se=k();break}case r.Cu.im:se=R.t("Use this message as a jumping off point for a huddle.",{fallbackHash:"563c2f46cf094d773cfedd52e582a385faea3753"});break;default:{const k=c(()=>R.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of <strong>{channelName}</strong> will be able to join.",{channelMembersCount:Z,channelName:fe}),"genericCopy");xe||be?se=k():ee?se=R.rt("Use this message as a jumping off point for a huddle with anyone in <strong>{channelName}</strong>. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{channelName:fe,trialEndDate:(0,y.Pd)(ge)}):j?se=R.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from <strong>{channelName}</strong> will be able to join.",{channelName:fe}):se=k()}}return n.createElement(E.A,{uiComponentName:g.UiComponentName.HUDDLES_IN_THREAD_SPEEDBUMP,eventId:g.EventId.CANVAS_EVENT,uiComponentVariant:Q},n.createElement(o.A,{onClose:ue,"data-qa":"huddle_in_thread_speed_bump_modal",submitButtonText:R.t("Start Huddle",{fallbackHash:"d9a37dbb2c259a1534d34ec9a94d2e9013f7b445"}),title:Le,onSubmit:ne,submitAutoClogProps:V,onCancel:ue,cancelAutoClogProps:L,headerImageSrc:h(),className:"p-huddle_in_thread_speed_bump_modal",headerImageAlt:R.t("Brainstorm, make decisions or have a lightweight catch-up with whoever\u2019s online."),UNSAFE_parentSelector:he},n.createElement("p",{className:"p-huddle_in_thread_speed_bump_modal__body_text",id:"huddle-in-thread-speed-bump-modal-body-text"},se)))},"BaseHuddleInThreadSpeedBumpModalBase");B.displayName="BaseHuddleInThreadSpeedBumpModalBase";const K=c(U=>{let{channelId:F,onConfirm:Y,closeModal:Z}=U;const ee=(0,s.wA)(),j=(0,l.d4)(se=>(0,d.OL)(se,F)),ge=(0,r.mz)(j),ne=(0,l.d4)(se=>(0,_.q8)(se,F)),ue=(0,t.A)(ne,"counts.member_count")||0,he=(0,p.tc)((0,l.d4)(I.H7)),be=(0,l.d4)(f.iH),xe=(0,l.d4)(f.Sk),Le=(0,l.d4)(se=>(0,m.u)(se,j));(0,n.useEffect)(()=>(ee((0,M.A)({notificationName:T.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL,action:T.hw.IMPRESSION})),()=>{ee((0,C.A)({spaceName:T.xu.LAUNCH_MODAL,action:T.hw.DISMISS}))}),[ee]);const fe=(0,n.useCallback)(()=>{Y(),Z==null||Z()},[Z,Y]);return n.createElement(B,{channelType:ge,channelMembersCount:ue,isFreeTeam:he,isTeamOnTrial:be,trialExpirationTS:xe,handleOnSubmit:fe,channelId:F,onConfirm:Y,closeModal:Z,isCurrentTeamSponsoredInSlackConnectChannel:Le})},"HuddleInThreadSpeedBumpModalBase");K.displayName="HuddleInThreadSpeedBumpModalBase";const b={spaceName:T.xu.LAUNCH_MODAL,notifications:{[T.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL]:{component:K}}},S=c(U=>{let{channelId:F,onConfirm:Y,closeModal:Z}=U;return n.createElement(D.Ay,P({},b,{channelId:F,onConfirm:Y,closeModal:Z}))},"HuddleInThreadSpeedBumpModal");S.displayName="HuddleInThreadSpeedBumpModal";var G=null;const H=(0,a.A)(S)},7843142872:(x,A,e)=>{"use strict";e.d(A,{D7:()=>_,Lk:()=>f,Vp:()=>I,g6:()=>h});var t=e(3134334389),n=e(6304789565),s=e(6533394955),i=e(4423055085),l=e(6122756707),o=e(2562405183),a=e(5492559860),r=e(9719951405),d=e(2832209848);let u=1;const _=c((p,y)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:g=!1,component:E=d.G7.HuddleCallNudgesBanner}=y;if(!g||!(0,r.kI)(p,E,d.X8.Click)&&!(0,r.kI)(p,E,d.X8.Dismiss))return!1;var M;const T=(M=(0,r.ky)(p,E,d.X8.Click))!==null&&M!==void 0?M:0;var D;const C=(D=(0,r.ky)(p,E,d.X8.Dismiss))!==null&&D!==void 0?D:0;return!(T>=u||C>=u)},"shouldShowHuddleDiscoveryBanner"),v=c(function(){let{experimentHuddlesDiscoveryCallsGroupTreatment:p=!1,component:y=UiComponent.HuddleCallNudgesBanner}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{experimentHuddlesDiscoveryCallsGroupTreatment:!1,component:UiComponent.HuddleCallNudgesBanner};const g=useDispatch();useEffect(()=>{p&&g(loadUserInteractions({interactions:[{component:y,type:InteractionType.Click},{component:y,type:InteractionType.Dismiss}],useCache:!0,cacheFilter:hasLoadedInteraction,reason:"huddle-discovery-calls"}))},[g,p,y])},"useHuddleDiscoveryCallsUserInteractions"),h=(0,n.Ay)("Send interaction to dismiss nudge",(p,y,g)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:E,interactionType:M}=g;if(!E)return;const T=y();(0,r.ky)(T,d.G7.HuddleCallNudgesBanner,M)>u||p((0,a.z)({component:d.G7.HuddleCallNudgesBanner,type:M,reason:"huddle-discovery-calls"}))});h.meta={name:"createThunk",key:"createThunkincrementUserInteractionCount",description:"Send interaction to dismiss nudge"};const f=c(p=>{let{component:y,type:g}=p;const E=(0,l.wA)();return(0,t.useEffect)(()=>{E((0,a.b)({interactions:[{component:y,type:g}],reason:y}))},[E,y,g]),(0,o.d4)(M=>(0,r.kI)(M,y,g)?(0,r.PU)(M,y):null)},"useTrialProBannerInteraction"),I=(0,n.Ay)("Record trial pro banner interaction",(p,y,g)=>{let{component:E,type:M}=g;return p((0,a.z)({component:E,type:M,reason:E}))});I.meta={name:"createThunk",key:"createThunkrecordTrialProBannerInteraction",description:"Record trial pro banner interaction"},(0,i.ul)("huddleInteractionUtils",{addOneMoreThanClickCount:p=>{const y=(0,s.getStateByTeamId)(p);u=(0,r.ky)(y,d.G7.HuddleCallNudgesBanner,d.X8.Click)+1},addOneMoreThanDismissCount:p=>{const y=(0,s.getStateByTeamId)(p);u=(0,r.ky)(y,d.G7.HuddleCallNudgesBanner,d.X8.Dismiss)+1}})},8330768070:(x,A,e)=>{"use strict";e.d(A,{G$:()=>P,Oe:()=>B,Y6:()=>L});var t=e(3134334389),n=e(6122756707),s=e(3037015781),i=e(2562405183),l=e(1471580244),o=e(6496493732),a=e(7138682671),r=e(3989454579),d=e(4481313819),u=e(1407713935),_=e(5363983309),v=e(5795074931),h=e(9101533895),f=e(8286248123),I=e(9884588328),p=e(8798294025),y=e(8921478798),g=e(1224315998),E=e(735940183),M=e(387484329),T=e(2047021170);function D(){return D=Object.assign||function(K){for(var b=1;b<arguments.length;b++){var S=arguments[b];for(var G in S)Object.prototype.hasOwnProperty.call(S,G)&&(K[G]=S[G])}return K},D.apply(this,arguments)}c(D,"_extends");const C=new E.Ay("huddles"),m={elementName:"huddles_confirmation_dialog_ok",eventId:g.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}},O={elementName:"huddles_confirmation_dialog_cancel",eventId:g.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},P=c(K=>{let{children:b,closeModal:S,onConfirm:G,uiComponentName:H,...U}=K;const F=(0,t.useCallback)(()=>{G(),S==null||S()},[S,G]);return t.createElement(d.A,{uiComponentName:H,eventId:g.EventId.HUDDLES_CONFIRM_DIALOG_SHOWN,clogImpression:!0},t.createElement(o.A,D({overlayClassName:"p-huddle_join_modal__overlay","data-qa":"huddle_join_modal",onCancel:S,onClose:S,onSubmit:F,submitButtonText:C.t("OK"),submitAutoClogProps:m,cancelAutoClogProps:O},U),b))},"HuddleJoinModal");P.displayName="HuddleJoinModal";const R=c(K=>{let{prevChannelId:b,nextChannelId:S,onConfirm:G,closeModal:H}=K;const U=(0,i.d4)(ge=>(0,h.OL)(ge,b)),F=(0,i.Z2)(ge=>{if(!U)return[];let ne=[];if((0,u.LI)(U))ne=[(0,p.e)(U)];else if((0,u.yz)(U)){const ue=(0,I.Ug)(U);if(ue&&ue.length){const he=(0,v.WR)(ge);ne=ue.filter(be=>be!==he)}}return ne.map(ue=>(0,y.I)(ge,ue))}),Y=(0,i.d4)(ge=>(0,h.OL)(ge,S)),Z=(0,i.Z2)(ge=>{if(!Y)return[];let ne=[];if((0,u.LI)(Y))ne=[(0,p.e)(Y)];else if((0,u.yz)(Y)){const ue=(0,I.Ug)(Y);if(ue&&ue.length){const he=(0,v.WR)(ge);ne=ue.filter(be=>be!==he)}}return ne.map(ue=>(0,y.I)(ge,ue))});let ee=C.rt("You\u2019re already in a huddle.");F.length?ee=C.rt("You\u2019re already in a huddle with {listOfPersons}.",{listOfPersons:(0,E.jd)(F).join("")}):U&&(0,s.uz)(U)&&(ee=C.rt("You\u2019re already in a huddle in {channel}.",{channel:t.createElement(l.A,{channel:U,channelId:b})}));let j=C.rt("Would you like to leave it and join this one instead?");return Z.length?j=C.rt("Would you like to leave it and join a huddle with {listOfPersons} instead?",{listOfPersons:t.createElement("strong",null,(0,E.jd)(Z).join(""))}):Y&&(0,s.uz)(Y)&&(j=C.rt("Would you like to leave it and join a huddle in {channel} instead?",{channel:t.createElement("strong",null,t.createElement(l.A,{channel:Y,channelId:S}))})),t.createElement(P,{uiComponentName:g.UiComponentName.HUDDLES_CONFIRMATION_DIALOG,title:C.t("Switch to this huddle?"),onConfirm:G,closeModal:H},t.createElement("p",null,ee," ",j))},"HuddleSwitchModal");R.displayName="HuddleSwitchModal";const L=(0,_.A)(R),V=c(K=>{let{channelId:b,onConfirm:S,closeModal:G}=K;const H=(0,i.d4)(he=>(0,h.OL)(he,b));var U;const F=(0,i.d4)(he=>{var be,xe;return(U=(be=(0,f.q8)(he,b))===null||be===void 0||(xe=be.counts)===null||xe===void 0?void 0:xe.member_count)!==null&&U!==void 0?U:0}),Y=(0,i.d4)(he=>(0,T.ty)(he,"huddles_show_shouty_rooster")),[Z,ee]=(0,t.useState)(Y),j=(0,n.wA)(),ge=H&&(0,s.uz)(H)&&t.createElement("strong",null,t.createElement(l.A,{channelId:b,channel:H})),ne=F>1?C.rt("You\u2019ll be starting a huddle that all {count} members of {channel} can join.",{count:t.createElement("strong",null,F),channel:ge}):C.rt("You\u2019ll be starting a huddle that every member of {channel} can join.",{channel:ge}),ue=(0,t.useCallback)(()=>{const he=!Z;ee(he),j((0,M.AZ)({pref:"huddles_show_shouty_rooster",value:he}))},[Z,j]);return t.createElement(P,{uiComponentName:g.UiComponentName.HUDDLES_SHOUTY_ROOSTER_DIALOG,title:C.t("Start a huddle in this channel?"),onConfirm:S,closeModal:G},t.createElement("p",null,ne),t.createElement(a.A,{text:C.t("Don\u2019t show this message again."),type:"inline",cursor:"pointer"},t.createElement(r.A,{name:"ns",checked:!Z,onChange:ue,"data-qa":"huddle_join_modal_show_checkbox"})))},"HuddleShoutyRoosterModal");V.displayName="HuddleShoutyRoosterModal";const B=(0,_.A)(V)},3143500799:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(5255740490),s=e(2047021170),i=e(2562405183),l=e(3677363342),o=e.n(l);const a=t.memo(_=>{let{className:v,iconClassName:h,allowMuteAnimation:f,wasMicEverEnabled:I,isMicStrikethroughRed:p}=_;return t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",v),"data-qa":"huddle_mic_icon_unmute"},t.createElement("svg",{className:h,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{d:"M5.35086 10.3436C5.12445 9.77312 5 9.15109 5 8.5V8.25C5 7.83579 4.66421 7.5 4.25 7.5C3.83579 7.5 3.5 7.83579 3.5 8.25V8.5C3.5 9.60794 3.7772 10.6511 4.26603 11.564L5.35086 10.3436ZM7.62904 14.554C8.36362 14.8419 9.16335 15 10 15C13.5899 15 16.5 12.0899 16.5 8.5V8.25C16.5 7.83579 16.1642 7.5 15.75 7.5C15.3358 7.5 15 7.83579 15 8.25V8.5C15 11.2614 12.7614 13.5 10 13.5C9.55549 13.5 9.12453 13.442 8.71427 13.3331L7.62904 14.554Z",fill:"currentColor"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.1271 2.72031C11.5376 2.2685 10.8001 2 10 2C8.067 2 6.5 3.567 6.5 5.5V8.5C6.5 8.67302 6.51255 8.84311 6.5368 9.0094L8 7.3633V5.5C8 4.39543 8.89543 3.5 10 3.5C10.4175 3.5 10.8051 3.62793 11.1258 3.84674L12.1271 2.72031ZM9.90052 11.9986C9.93357 11.9995 9.96673 12 10 12C11.933 12 13.5 10.433 13.5 8.5V7.9492L9.90052 11.9986Z",fill:"currentColor"}),t.createElement("path",{className:(0,n.A)({"p-huddle_mic_icon__microphone--slash_animated":f&&I,"p-huddle_mic_icon__microphone--slash":p}),d:"M4 15.25L15.5 2.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),r=t.memo(_=>{let{volumeLevel:v=0,className:h,iconClassName:f,allowUnmutedAnimation:I}=_;const[p,y]=(0,t.useState)(0);(0,t.useEffect)(()=>{if(v!=="auto"){y(Math.min(1,v||0));return}const M=setInterval(()=>{const T=(Math.floor(Math.random()*100)+1)/100;y(T)},100);return()=>{clearInterval(M)}},[v]);const g=(0,i.d4)(M=>!(0,s.ty)(M,"a11y_animations")),E=(0,t.useMemo)(()=>I?g?t.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M3 8.9V11M5.8 6.1V13.8M8.6 4V16.6M11.4 7.5V12.4M14.2 5.4V14.5M17 8.9V11",stroke:"#178F65",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})):t.createElement("img",{className:"p-huddle_mic_icon__img",src:o(),alt:""}):t.createElement("svg",{className:f,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{className:"p-huddle_mic_icon__microphone--input_level",style:{transform:`scaleY(${p})`},d:"M10 11V3",stroke:"currentColor",strokeWidth:"4"}),t.createElement("path",{d:"M7.25 5.5C7.25 3.98122 8.48122 2.75 10 2.75V2.75C11.5188 2.75 12.75 3.98122 12.75 5.5V8.5C12.75 10.0188 11.5188 11.25 10 11.25V11.25C8.48122 11.25 7.25 10.0188 7.25 8.5V5.5Z",stroke:"currentColor",strokeWidth:"1.5"}),t.createElement("path",{d:"M4.25 8.25V8.5C4.25 11.6756 6.82436 14.25 10 14.25V14.25C13.1756 14.25 15.75 11.6756 15.75 8.5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})),[I,f,p,g]);return t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",h),"data-qa":"huddle_mic_icon_mute"},E)}),d=c(_=>{let{type:v,volumeLevel:h,className:f,iconClassName:I,allowMuteAnimation:p=!1,isMicStrikethroughRed:y=!1,allowUnmutedAnimation:g=!1}=_;const[E,M]=(0,t.useState)(v==="unmuted");return(0,t.useEffect)(()=>{v==="unmuted"&&M(!0)},[v]),v==="unmuted"?t.createElement(r,{className:f,iconClassName:I,volumeLevel:h,allowUnmutedAnimation:g}):t.createElement(a,{className:f,iconClassName:I,allowMuteAnimation:p,wasMicEverEnabled:E,isMicStrikethroughRed:y})},"HuddleMicIcon");d.displayName="HuddleMicIcon";const u=t.memo(d)},5043394918:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(7715417323),s=e(1829947126),i=e(1337358413),l=e(3143500799);function o(a){let{peerId:r,isMicrophoneEnabled:d,className:u,allowMuteIconAnimation:_=!1,isMicStrikethroughRed:v=!1}=a;const[h,f]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(!d)return n.A;const I=c(p=>{const y=(0,i.Ft)(p);f(y)},"onLevelUpdated");return s.A.subscribe(r,I),()=>{s.A.unsubscribe(r,I)}},[r,d]),t.createElement(l.A,{type:d?"unmuted":"muted",volumeLevel:h,className:u||"",allowMuteAnimation:_,isMicStrikethroughRed:v})}c(o,"HuddleMicVolumeIndicator")},438845125:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(2023515700);function s(l){let{slackId:o,displayName:a}=l;return!o&&!a?null:o?t.createElement(n.A,{isBold:!1,id:o}):t.createElement("span",null,a)}c(s,"HuddleMsgTextUser"),s.displayName="HuddleMsgTextUser";const i=s},1051015021:(x,A,e)=>{"use strict";e.d(A,{V:()=>I});var t=e(3134334389),n=e(7433432223),s=e(9548972574),i=e(2562405183),l=e(735940183),o=e(5255740490),a=e(7914553163),r=e(6005700845),d=e(6323355797),u=e(7949425452),_=e(3810478625),v=e(7573583373),h=e.n(v);const f=new l.Ay("huddles");function I(p){let{showProBadge:y,className:g}=p;const E=(0,i.d4)(s.qr),M=(0,i.d4)(_.g),T=d.zG.Vhq,D=(0,a.Ay)({promoSubtype:T}),C=(0,t.useMemo)(()=>t.createElement(r.A,{useLink:!0,variant:D,promoSubtype:d.zG.Vhq,ctaClassName:h().cta}),[D]);return!E||!M||D!==a.MX.TrialEligible&&D!==a.MX.TrialIneligible&&D!==a.MX.TrialIneligibleUserCannotUpgrade?null:t.createElement("div",{className:(0,o.A)(h().container,g)},t.createElement(n.A,null,t.createElement("div",{className:h().alertBanner},y&&t.createElement(u.Ay,{size:u.vj.Medium,className:h().proBadge}),t.createElement("span",null,f.t("On the free version of Slack, your huddles are limited to {min} minutes.",{min:30}),"\xA0",C))))}c(I,"HuddleTimeLimitUpgradeAlert"),I.displayName="HuddleTimeLimitUpgradeAlert"},4745917661:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(735940183);const s=new n.Ay("huddles");function i(o){let{actionLabel:a,deviceLabel:r,audioOnlyModeEnabledWarning:d}=o;if(d){const u=s.t("Audio only mode will be disabled if you turn on your camera",{fallbackHash:"27892acc411157e52b1022f480b10c11e51b2350"});return t.createElement("div",{className:"p-huddle_tooltip_device_content"},t.createElement("div",{className:"p-huddle_tooltip_action_label"},u))}return t.createElement("div",{className:"p-huddle_tooltip_device_content"},t.createElement("div",{className:"p-huddle_tooltip_action_label"},a),r&&t.createElement("div",{className:"p-huddle_tooltip_device_label"},r))}c(i,"HuddlesToolTipDeviceContent"),i.displayName="HuddlesToolTipDeviceContent";const l=i},8320929653:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>N,e3:()=>fe,lc:()=>se});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(5255740490),l=e(6122756707),o=e(2562405183),a=e(3288846409),r=e(1149563359),d=e(3037015781),u=e(9012396182),_=e(1289024643),v=e(5795074931),h=e(9101533895),f=e(5286203919),I=e(8746998952),p=e(9712681361),y=e(4742719639),g=e(5332875232),E=e(6251210828),M=e(2802517438),T=e(4481313819),D=e(3622858354),C=e(4233000497),m=e(6749400491),O=e(9373230523),P=e(1407713935),R=e(8798294025),L=e(9884588328),V=e(6470070112),B=e(8683010724),K=e(3708320478),b=e(4775127335),S=e(2683115972),G=e(3165300465),H=e(1471580244),U=e(2527782504),F=e(4275787242),Y=e(735940183),Z=e(1224315998),ee=e(8869383561),j=e(5519146941),ge=e(3193155968),ne=e(7429662208);function ue(){return ue=Object.assign||function($){for(var W=1;W<arguments.length;W++){var q=arguments[W];for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&($[re]=q[re])}return $},ue.apply(this,arguments)}c(ue,"_extends");const he=new Y.Ay("huddles"),be={elementName:"huddles_invite_decline",eventId:Z.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},xe={elementName:"huddles_invite_joining_soon",eventId:Z.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},Le={elementName:"huddles_invite_join",eventId:Z.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},fe=c($=>{let{topic:W,formattedTopic:q,channel:re,channelName:le,otherMemberNamesString:Ae,imMemberName:Te,experimentHuddlesLaterGroupOn:Ne}=$;if(!Ne)return s.createElement(s.Fragment,null);let pe=W?he.rt("Join the scheduled huddle about {topic}",{topic:q}):he.rt("Join the scheduled huddle");return(0,P.LI)(re)&&Te?pe=W?he.rt("Join the scheduled huddle with {imMemberName} about {topic}",{topic:q,imMemberName:Te}):he.rt("Join the scheduled huddle with {imMemberName}",{imMemberName:Te}):(0,P.yz)(re)?pe=W?he.rt("Join the scheduled huddle about {topic} with {otherMemberNamesString}",{topic:q,otherMemberNamesString:Ae}):he.rt("Join the scheduled huddle with {otherMemberNamesString}",{otherMemberNamesString:Ae}):(0,d.uz)(re)&&!(0,P.LI)(re)&&(pe=W?he.rt("Join the scheduled huddle in {channelName} about {topic}",{topic:q,channelName:le}):he.rt("Join the scheduled huddle in {channelName}",{channelName:le})),pe},"getScheduledHuddleInviteCopy");function se($){let{channelId:W,senderUserId:q,callId:re,teamId:le,isInviter:Ae}=$;const Te=(0,l.wA)(),{shouldUseNavigate:Ne,activeTab:pe}=(0,s.useContext)(j.A),Ee=(0,o.d4)(g.MJ),oe=(0,o.d4)(v.WR),ce=(0,o.d4)(wt=>(0,O.A)(wt,q)),ke=(0,o.d4)(wt=>(0,h.OL)(wt,W)),Ce=(0,o.d4)(wt=>{if(!ke||!Ee||!(0,P.LI)(ke))return;const Bt=(0,R.e)(ke);if(Bt)return(0,O.A)(wt,Bt)}),Me=(0,o.Z2)(wt=>(0,P.yz)(ke)?((0,L.Ug)(ke)||[]).filter(Wt=>Wt!==q&&Wt!==oe).map(Wt=>(0,O.A)(wt,Wt)).filter(Wt=>Wt):[]),Se=(0,a.cw)(f.vO),Ue=(0,V.eu)(Se),Ye=(0,o.d4)(wt=>(0,_.Ck)(wt,re,oe))==="joining_soon",J=(0,o.d4)(wt=>(0,_.H6)(wt,re));var ae;const Ve=(ae=J==null?void 0:J.isScheduled)!==null&&ae!==void 0?ae:!1,Be=(0,o.d4)(M.A),Ke=(0,o.d4)(wt=>{if(Ne){var Bt;return(Bt=(0,ne.F8)(wt,{tab:pe,container:ge.mq.Primary}))===null||Bt===void 0?void 0:Bt.id}return Be}),Re=(0,a.cw)(u.getFocusedWorkspace),Fe=W===Ke&&Re&&le&&Re===le,Ie=(0,s.useCallback)(()=>{Te((0,m.A)({callId:re,channelId:W,inviteResponse:m.J.DECLINE}))},[re,W,Te]),[ze,qe]=(0,s.useState)(!1),[st,ut]=(0,s.useState)(!1),tt=(0,s.useCallback)(()=>{(function(){var Bt=(0,t.coroutine)(function*(){ut(!0),qe(!1);const Wt=Te((0,m.A)({callId:re,channelId:W,inviteResponse:m.J.JOINING_SOON}));if(Wt)try{yield Wt}catch{qe(!0)}finally{ut(!1)}else ut(!1)});return c(function(){return Bt.apply(this,arguments)},"respondToInvite")})()()},[re,W,Te]),_t=(0,s.useCallback)(()=>{Te((0,I.A)({channelId:W,callId:re,entryPoint:p.su.SIDEBAR_HUDDLE_INVITE}))},[W,re,Te]),yt=(0,o.d4)(wt=>W&&(0,y.o)(wt,W))||"",Kt=yt?s.createElement("span",{className:"p-huddle_invite__topic"},s.createElement(D.A,{text:yt})):null,Qt=s.createElement("span",{className:"p-huddle_invite__sender_name"},ce);let Jt;if(Ve){const wt=s.createElement(H.A,{channelId:W,boldIcon:!0});Jt=fe({topic:yt,formattedTopic:Kt,channel:ke,channelName:wt,experimentHuddlesLaterGroupOn:!0})}else if((0,P.LI)(ke))Ae?Jt=fe({topic:yt,formattedTopic:Kt,channel:ke,imMemberName:Ce,experimentHuddlesLaterGroupOn:Ee}):Jt=he.rt("Join huddle with {senderName}",{senderName:Qt});else if((0,P.yz)(ke)){const wt=(0,ee.A)(Me,{react:!0}).join("");if(Ae)Jt=fe({topic:yt,formattedTopic:Kt,channel:ke,otherMemberNamesString:wt,experimentHuddlesLaterGroupOn:Ee});else{const Bt=(0,ee.A)([ce].concat(Me),{react:!0}).join(""),Wt=s.createElement("span",{className:"p-huddle_invite__all_member_names"},Bt);Jt=he.rt("Join huddle with {allMemberNames}",{allMemberNames:Wt})}}else{const wt=s.createElement(H.A,{channelId:W,boldIcon:!0});Ae?Jt=fe({topic:yt,formattedTopic:Kt,channel:ke,channelName:wt,experimentHuddlesLaterGroupOn:Ee}):Fe?Jt=he.rt("{senderName} is inviting you to a huddle in this channel",{senderName:Qt}):Jt=he.rt("{senderName} is inviting you to a huddle in {channelName}",{senderName:Qt,channelName:wt})}return{avatarOverflowBadgeCount:(0,P.yz)(ke)?Me.length+1:0,didRespondingToInviteFail:ze,formattedTopic:Kt,handleDecline:Ie,handleJoiningSoon:tt,handleJoin:_t,inviteText:Jt,isCurrentUserJoiningSoon:Ye,isJoiningSoonResponsePending:st,isLoading:Ue}}c(se,"useHuddleInviteProps"),se.displayName="useHuddleInviteProps";const Q={name:"warning"},k=c($=>{let{channelId:W,senderUserId:q,callId:re,teamId:le}=$;const Ae=(0,o.d4)(g.MJ),Te=(0,o.d4)(v.WR),Ne=Ae&&Te===q,pe=(0,C.A)(W),{avatarOverflowBadgeCount:Ee,didRespondingToInviteFail:oe,formattedTopic:ce,handleDecline:ke,handleJoiningSoon:Ce,handleJoin:Me,inviteText:Se,isCurrentUserJoiningSoon:Ue,isJoiningSoonResponsePending:He,isLoading:Ye}=se({channelId:W,senderUserId:q,callId:re,teamId:le,isInviter:Ne}),J=(0,s.useRef)(null),ae=(0,s.useCallback)(()=>{var ut;(ut=J.current)===null||ut===void 0||ut.focus()},[]);(0,r.A)(U.Ay.HUDDLE_INVITE_JOIN,ae);const Ve="huddle-invite-text",Be=s.createElement(S.Ay,{type:"outline",className:"p-huddle_invite__button",onClick:ke,"data-qa":"huddle_invite_declined",disabled:Ye,autoClogProps:be},s.createElement("span",{className:"p-huddle_invite__label"},he.t("Decline"))),Ke=s.createElement(G.A,{type:"outline",className:"p-huddle_invite__button p-huddle_invite__button--joining_soon",loading:He,onClick:Ce,disabled:Ye,autoClogProps:xe,"aria-label":he.t("Be there soon")},s.createElement("span",{className:"p-huddle_invite__label"},he.t("Be there soon"))),[Re,Fe]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let ut=0;return Ue&&(Fe(!0),ut=window.setTimeout(()=>{Fe(!1)},6e3)),()=>{ut&&clearTimeout(ut)}},[Ue]);const Ie=Re?s.createElement("div",{className:"p-huddle_invite__header_notif"},s.createElement("div",{className:"p-huddle_invite__header_notif_content"},s.createElement(B.A,{name:"clock",size:"20"}),s.createElement("span",{className:"margin_left_50"},he.t("Join when you\u2019re ready!")))):null,ze=s.createElement(G.A,{ref:J,type:"primary",className:"p-huddle_invite__button p-huddle_invite__button--accept",loading:Ye,onClick:Me,"data-qa":"huddle_invite_join",autoClogProps:Le,"aria-label":he.t("Join")},s.createElement("span",{className:"p-huddle_invite__label p-huddle_invite__label--join"},he.t("Join"))),qe=(0,o.d4)(E.jI),st=qe?{width:qe}:null;return s.createElement(T.A,ue({eventId:Z.EventId.CANVAS_EVENT,uiComponentName:Z.UiComponentName.HUDDLES_INVITE,clogImpression:!0},pe),s.createElement("div",ue({className:(0,i.A)("p-huddle_invite",{"p-huddle_invite--with_header":!!ce})},st&&{style:st}),s.createElement("div",{className:"p-huddle_invite__content"},Ie,ce&&s.createElement("div",{className:"p-huddle_invite__message_header"},ce),s.createElement("div",{className:"p-huddle_invite__message"},!Ne&&s.createElement("div",{className:(0,i.A)("p-huddle_invite__avatar_container",{"p-huddle_invite__avatar_container--with_overflow":!!Ee})},s.createElement(b.Ay,{key:q,className:"p-huddle_invite__avatar",size:Ee?14:20,userId:q,isInteractive:!1}),!!Ee&&s.createElement("div",{className:"p-huddle_invite__avatar_overflow_overlay"},Ee)),s.createElement(K.z,null,s.createElement("div",{className:"p-huddle_invite__text",id:Ve},Se,s.createElement("span",{className:"offscreen"},he.rt("Press {key} to join",{key:(0,V.$z)(),fallbackHash:"bd062cb22cea3388535c0f834ebf6df702757691",fallbackHashNs:"keyboard_keys"}))))),s.createElement("div",{className:"p-huddle_invite__buttons",role:"group","aria-labelledby":Ve},ze,!Ue&&Ke,Be)),oe&&s.createElement(F.A,{svgIconProps:Q},he.t("Something went wrong responding to the invite."))))},"HuddleInvite");k.displayName="HuddleInvite";const N=k},6749400491:(x,A,e)=>{"use strict";e.d(A,{A:()=>d,J:()=>a});var t=e(6304789565),n=e(6533394955),s=e(4250409994),i=e(1070786785),l=e(5319025363),o=e(5170073955),a;(function(u){u.ACCEPT="accept",u.DECLINE="decline",u.JOINING_SOON="joining_soon"})(a||(a={}));const r=(0,t.Ay)("Respond to an invitation to a huddle",(u,_,v)=>{let{channelId:h,inviteResponse:f,callId:I}=v;u((0,l.z)());let p;return f!==a.ACCEPT&&(p=u((0,o.Q)({response:f,channelId:h,roomId:I,reason:"respond-to-huddle-invite"}))),f===a.DECLINE&&((0,n.dispatchForClientStore)((0,s.u8)(h)),u((0,i.V3)(h))),p});r.meta={name:"createThunk",key:"createThunkrespondToHuddleInvite",description:"Respond to an invitation to a huddle"};const d=r},4983989341:(x,A,e)=>{"use strict";e.d(A,{x:()=>a});var t=e(6422693406),n=e(6304789565),s=e(1070786785),i=e(1452921056),l=e(9712681361),o=e(7631186994);const a=(0,n.Ay)("Creates a new huddle in mpim where all huddle participants are channel members",(r,d,u)=>{let{channelId:_,memberIds:v}=u;return r((0,o.r)({memberIds:v})).then(h=>{r((0,s.Ay)(_)),r((0,i.A)({channelId:h.id,entryPoint:l.su.CREATE_NEW_MPIM}))}).catch(h=>t.S.reject(h))});a.meta={name:"createThunk",key:"createThunkcreateNewHuddleInMpimWithUsers",description:"Creates a new huddle in mpim where all huddle participants are channel members"}},5907086961:(x,A,e)=>{"use strict";e.d(A,{A:()=>B});var t=e(3134334389),n=e(6084388622),s=e(6122756707),i=e(9003400431),l=e(2562405183),o=e(2527994834),a=e(4761125736),r=e(3288846409),d=e(5658567578),u=e(581167618),_=e(980293773),v=e(9101533895),h=e(5286203919),f=e(735940183),I=e(4446301238),p=e(1471580244),y=e(5363983309),g=e(7868634217),E=e(4061200313),M=e(9183417278),T=e(1612857492),D=e(5743225531),C=e(8847766420);const m=new f.Ay("huddles"),O=c(K=>{let{numOfExternalMembers:b,members:S}=K;const G=(0,l.d4)(C.Kc),H=(0,r.cw)(h.hc)||"",U=(0,l.d4)(N=>(0,v.OL)(N,H)),F=(0,l.d4)(N=>(0,a._Z)(N,"invite_to_channel_permission")==="on"),Y=(0,l.d4)(N=>(0,M.Q)(N,U)),Z=(0,l.d4)(N=>(0,T.q)(N,U)),ee=b===S.length,j=b>0,ge=!b,ne=S.length-b>0,ue=!(S.length-b),he=m.rt("They can join the huddle, but since you are not allowed to invite external people to this channel, they won\u2019t be able to see messages or reply to the thread."),be=t.createElement(t.Fragment,null,t.createElement("p",null,m.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,m.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(D.A,{id:G}),channelName:t.createElement(p.A,{className:"bold",channel:U})})),t.createElement("p",null,m.t("You don\u2019t have permission to add external people to this channel."))),xe=t.createElement(t.Fragment,null,t.createElement("p",null,m.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,m.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(D.A,{id:G}),channelName:t.createElement(p.A,{className:"bold",channel:U})}))),Le=m.rt("They can join the huddle, but since you are not allowed to invite people from {org} to this channel, they won\u2019t be able to see messages or reply to the thread.",{org:t.createElement(D.A,{id:G})}),fe=t.createElement(t.Fragment,null,t.createElement("p",null,m.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,m.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(D.A,{id:G}),channelName:t.createElement(p.A,{className:"bold",channel:U})})),t.createElement("p",null,m.t("You don\u2019t have permission to add internal people to this channel."))),se=t.createElement(t.Fragment,null,t.createElement("p",null,m.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,m.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(D.A,{id:G}),channelName:t.createElement(p.A,{className:"bold",channel:U})}))),Q=m.rt("They can join the huddle, but since you are not allowed to invite people to this channel, they won\u2019t be able to see messages or reply to the thread."),k=m.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(p.A,{className:"bold",channel:U})});switch(!0){case(!F&&!Z&&ee):return he;case(!F&&!Z&&j):return be;case(!F&&!Z&&ge):return xe;case(!F&&Z):return k;case(F&&Y&&!Z&&ee):return he;case(F&&Y&&!Z&&j):return be;case(F&&Y&&!Z&&ge):return xe;case(F&&!Y&&Z&&ge):return Le;case(F&&!Y&&Z&&ne):return fe;case(F&&!Y&&Z&&ue):return se;case(F&&!Y&&!Z):return Q;default:return k}},"DisallowedHuddleInviteSubtitle");O.displayName="DisallowedHuddleInviteSubtitle";const P=O,R=new f.Ay("huddles");function L(K){let{members:b}=K;const S=(0,s.wA)(),[G,H]=(0,t.useState)(null),[U,F]=(0,t.useState)([]),[Y,Z]=(0,t.useState)(!1),ee=(0,r.cw)(h.hc)||"",j=(0,l.d4)(Ne=>(0,v.OL)(Ne,ee)),ge=(0,t.useCallback)(()=>S((0,i.O)()),[S]),ne=(0,t.useCallback)(()=>S((0,i.O)({closeAll:!0})),[S]),ue=(0,t.useCallback)(Ne=>{H(Ne),S((0,I.Cw)({channelId:ee,users:Ne})).then(()=>{U.push(Ne),F(U),H(null)}).catch(()=>{H(null),Z(!0)})},[ee,S,U]),he=(0,l.d4)(Ne=>(0,a._Z)(Ne,"invite_to_channel_permission")==="on"),be=(0,l.d4)(Ne=>(0,a._Z)(Ne,"shared_channel_invite_requested_event_ga")==="on"),xe=(0,l.d4)(Ne=>(0,o.Q)(Ne,"shared_channel_invite_requested",j.id)&&be),Le=(0,l.d4)(Ne=>(0,g.Z)(Ne,b)),fe=(0,t.useMemo)(()=>({addedToChannel:R.t("Added to channel"),notInChannel:R.t("Not in channel"),inviteRequestPending:be?R.t("Invitation request pending approval"):"",added:R.t("Added"),pending:be?R.t("Pending"):"",inviteToChannel:R.t("Invite to channel"),cantBeInvitedToChannel:R.t("Can\u2019t be invited to channel")}),[be]),se=(0,l.d4)(Ne=>(0,M.Q)(Ne,j)),Q=(0,l.d4)(Ne=>(0,T.q)(Ne,j)),k=(0,l.Z2)(Ne=>b.filter(pe=>(0,E.i)(Ne,pe))),N=k.length,$=!he&&!Q,W=he&&se&&!Q,q=N===b.length,re=!N,le=(0,t.useMemo)(()=>R.rt("{count, plural, =1 {This person is not a member} other {These people are not members}} of {channelName}",{count:b.length,channelName:t.createElement(p.A,{channel:j})}),[j,b]),Ae=(0,t.useCallback)(Ne=>Ne&&xe?fe.inviteRequestPending:Ne?fe.addedToChannel:fe.notInChannel,[xe,fe.addedToChannel,fe.inviteRequestPending,fe.notInChannel]),Te=(0,t.useCallback)((Ne,pe)=>{let Ee;switch(pe&&xe?Ee=fe.pending:Ee=pe?fe.added:fe.inviteToChannel,!0){case(($||W)&&q):return null;case(($||W)&&k.includes(Ne)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},fe.cantBeInvitedToChannel);case(he&&!se&&Q&&re):return null;case(he&&!se&&Q&&!k.includes(Ne)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},fe.cantBeInvitedToChannel);case(he&&!se&&!Q):return null;default:return t.createElement(n.lV,{type:"outline",size:"small",disabled:pe,loading:G===Ne,onClick:()=>ue(Ne),"aria-label":Ee},Ee)}},[xe,fe.pending,fe.added,fe.inviteToChannel,fe.cantBeInvitedToChannel,$,W,q,k,he,se,Q,re,G,ue]);return t.createElement(_.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:ge,contentLabel:le,shouldReturnFocusAfterClose:!0},t.createElement(_.rQ,null,t.createElement(_.Rc,{title:le}),t.createElement("div",{className:"p-huddle_invite_add_to_channel__subtitle"},t.createElement(P,{numOfExternalMembers:N,members:b}))),t.createElement(_.$m,null,t.createElement(_.qf,null,Y&&t.createElement(u.Ay,{className:"margin_bottom_150",level:u.A_.error,type:u.QE.inline},R.t("Oops, something went wrong. Please try again.",{fallbackHash:"92c404bc05c04cc6c63491f463f0ec39688f741a",fallbackHashNs:"client"})),Le.map(Ne=>{const pe=U.includes(Ne);return t.createElement("div",{className:"p-huddle_invite_add_to_channel__user_list",key:Ne},t.createElement(d.Ay,{id:Ne,useShortMode:!0,showPresence:!0,showStatus:!0,showSubtext:!0,subtext:t.createElement("small",{className:"sk_dark_gray"},Ae(pe))}),Te(Ne,pe))}))),t.createElement(_.jl,null,t.createElement(_.ox,null,t.createElement(n.Ay,{onClick:ne,type:"primary"},he&&!se||!Q?R.t("OK"):R.t("Done")))))}c(L,"HuddleInviteAddToChannel"),L.displayName="HuddleInviteAddToChannel";const V={HuddleInviteAddToChannel:L},B=(0,y.A)(L,{isStackable:!0})},5911067953:(x,A,e)=>{"use strict";e.d(A,{A:()=>ze});var t=e(9706240641),n=e(3134334389),s=e(6122756707),i=e(235108050),l=e(4775127335),o=e(6084388622),a=e(581167618),r=e(2023515700),d=e(1563996154),u=e(2562405183),_=e(7937864072),v=e(2689960678),h=e(980293773),f=e(3339229351),I=e(5795074931),p=e(5332875232),y=e(6470070112),g=e(7631186994),E=e(735940183),M=e(3730613858),T=e(666760496),D=e(1407713935),C=e(8746998952),m=e(9712681361),O=e(4481313819),P=e(1224315998),R=e(7268021173),L=e(3677514771),V=e(6839188756),B=e(9548972574),K=e(716227588),b=e(1743656885),S=e(6259241484),G=e(9953252450),H=e(3288846409),U=e(9101533895),F=e(5286203919),Y=e(1471580244),Z=e(3534324375),ee=e(8276911661),j=e(7576317051),ge=e(2823938397);function ne(qe){let{memberId:st}=qe;const ut=(0,u.d4)(_t=>(0,ee.nv)(_t,st)),tt=(0,u.d4)(_t=>(0,Z.sE)(_t,ut,!1,!1));return(0,ge.mX)(ut)?n.createElement(j.A,{type:"unknown"}):(0,ge.lv)(ut)?n.createElement(j.A,{type:"non-existent"}):n.createElement("span",null,tt)}c(ne,"DeprecatedHuddleName"),ne.displayName="DeprecatedHuddleName";const ue=new E.Ay("huddles");function he(qe){let{unknownMemberIds:st}=qe;const ut=(0,H.cw)(F.hc),tt=(0,u.d4)(Kt=>(0,U.OL)(Kt,ut)),_t=(0,n.useMemo)(()=>ut?st:[],[ut,st]);let yt;if(_t.length===1)yt=ue.rt("{name1} is not a member of {channel}.",{name1:n.createElement(ne,{memberId:_t[0]}),channel:n.createElement(Y.A,{channel:tt})});else if(_t.length===2)yt=ue.rt("{name1} and {name2} are not a member of {channel}.",{name1:n.createElement(ne,{memberId:_t[0]}),name2:n.createElement(ne,{memberId:_t[1]}),channel:n.createElement(Y.A,{channel:tt})});else if(_t.length===3)yt=ue.rt("{name1}, {name2}, and {name3} are not a member of {channel}.",{name1:n.createElement(ne,{memberId:_t[0]}),name2:n.createElement(ne,{memberId:_t[1]}),name3:n.createElement(ne,{memberId:_t[2]}),channel:n.createElement(Y.A,{channel:tt})});else if(_t.length>3){const[Kt,Qt,Jt,...Gt]=_t,wt=Gt.map(Bt=>n.createElement(ne,{key:Bt,memberId:Bt}));yt=ue.rt("{name1}, {name2}, {name3} and {numOthers} more are not a member of {channel}.",{name1:n.createElement(ne,{memberId:Kt}),name2:n.createElement(ne,{memberId:Qt}),name3:n.createElement(ne,{memberId:Jt}),channel:n.createElement(Y.A,{channel:tt}),numOthers:_t.length-3},Bt=>{let{text:Wt}=Bt;return n.createElement(d.Ay,{tip:(0,E.jd)(wt,{noEscape:!0})},n.createElement("span",null,Wt))})}return n.createElement("small",null,yt)}c(he,"HuddleInviteNotAMember"),he.displayName="HuddleInviteNotAMember";const be=he;var xe=e(5907086961),Le=e(7396657731),fe=e(9236164662),se=e(9645800439),Q=e(6011052675),k=e(3109955471),N=e(5103024697),$=e(1681415537),W=e(3215419563),q=e(2293211408),re=e(7889060196),le=e(6007206761),Ae=e(8170643398),Te=e(4562579337),Ne=e(8040098042),pe=e(181849556);const Ee=new E.Ay("huddles");var oe;(function(qe){qe.CHANNEL="channel",qe.PEOPLE="people"})(oe||(oe={}));const ce=c(qe=>{let{isFreeTeam:st,onSuggestedChannelSelected:ut,onSuggestedUserSelected:tt,selectedChannelId:_t,selectedMemberIds:yt}=qe;const Kt=(0,u.d4)(I.WR),Qt=(0,u.wz)(pe.b5),Jt=(0,u.wz)(pe.mc),Gt=(0,u.wz)(Rt=>{if(!Qt)return[];if(yt.length)return[];const hn=[];return Qt.forEach(Nn=>{if(Nn.id===_t)return;const rt=(0,U.OL)(Rt,Nn.id);(0,le.F)(rt)||hn.push(Nn)}),hn}),wt=(0,n.useMemo)(()=>Gt.map(Rt=>Rt.id),[Gt]),Bt=(0,u.wz)(Rt=>{if(!Jt)return[];if(_t)return[];const hn=[];return Jt.forEach(Nn=>{if(Nn.id===Kt||yt.includes(Nn.id))return;const rt=(0,ee.nv)(Rt,Nn.id);(0,Te.A)(rt)||(0,Ae.oy)(rt)||hn.push(Nn)}),hn}),Wt=(0,n.useMemo)(()=>Bt.map(Rt=>Rt.id),[Bt]),Tn=(0,n.useMemo)(()=>{const Nn=Wt.length*60,rt=32,vt=wt.length*rt;return Math.min(Math.max(Nn,vt),240)},[wt,Wt]),Ot=(0,n.useCallback)(Rt=>{if(!Rt.id)return;(0,Ne.A)(Rt.id)?ut(Rt.id):tt(Rt.id)},[ut,tt]),Ft=(0,n.useCallback)(Rt=>{const hn=Gt[Rt];if(hn)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(W.A,{channelId:hn.id}))},[Gt]),rn=(0,n.useCallback)(()=>n.createElement(N.A,{disableHeight:!0},Rt=>{let{width:hn}=Rt;return n.createElement(re.A,{"aria-label":Ee.t("Channel"),keys:wt,rowRenderer:Ft,onItemClick:Ot,width:hn,height:Tn})}),[Ot,Ft,wt,Tn]),ln=(0,n.useCallback)(Rt=>{const hn=Bt[Rt];if(hn)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement($.A,{id:hn.id}))},[Bt]),_n=(0,n.useCallback)(()=>n.createElement(N.A,{disableHeight:!0},Rt=>{let{width:hn}=Rt;return n.createElement(re.A,{"aria-label":Ee.t("People"),keys:Wt,rowRenderer:ln,onItemClick:Ot,width:hn,height:Tn})}),[Ot,ln,Wt,Tn]),[en,Xt]=(0,n.useState)(oe.PEOPLE),vn=(0,n.useCallback)(Rt=>{Xt(Rt)},[]);(0,n.useEffect)(()=>{en===oe.PEOPLE&&_t?Xt(oe.CHANNEL):en===oe.CHANNEL&&yt.length&&Xt(oe.PEOPLE)},[en,_t,yt]);const je=(0,n.useMemo)(()=>{const Rt=[];return Wt.length&&Rt.push({title:Ee.t("People"),id:oe.PEOPLE,content:_n()}),wt.length&&Rt.push({title:Ee.t("Channels",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),id:oe.CHANNEL,content:rn()}),Rt},[wt,Wt,rn,_n]);return st?null:n.createElement("div",{className:"p-huddle_start_suggestion_tabs"},n.createElement(q.A,{fullHeight:!0,tabs:je,currentTabId:en,onTabChange:vn,tabMenuClassnames:"p-huddle_start_suggestion_tabs__tab_menu"}))},"HuddleStartSuggestionTabs");ce.displayName="HuddleStartSuggestionTabs";const ke=n.memo(ce);var Ce=e(8808892924),Me=e(1794107122),Se=e(5142752606);const Ue=new E.Ay("huddles"),He=n.memo(qe=>{let{error:st}=qe;const ut=(0,u.d4)(Kt=>(0,ee.nv)(Kt,st.invitedMemberId)),tt=(0,u.d4)(Kt=>(0,Z.sE)(Kt,ut));if(!(0,u.d4)(p.TM))return null;let yt=Ue.t("{userName} could not be invited to the Huddle.",{userName:tt});return st.inviteRejectionReason===Se.g.RecipientHuddlesDisabled&&(yt=Ue.t("{userName} could not be invited as Huddles is not enabled for them.",{userName:tt})),n.createElement(a.Ay,{level:"error"},yt)});var Ye=e(9623497342),J=e(5255740490),ae=e(1051015021),Ve=e(952756744);function Be(){return Be=Object.assign||function(qe){for(var st=1;st<arguments.length;st++){var ut=arguments[st];for(var tt in ut)Object.prototype.hasOwnProperty.call(ut,tt)&&(qe[tt]=ut[tt])}return qe},Be.apply(this,arguments)}c(Be,"_extends");var Ke;(function(qe){qe.COMPOSER="composer",qe.PUBLIC_CHANNEL="public_channel",qe.PRIVATE_CHANNEL="private_channel"})(Ke||(Ke={}));function Re(qe){let{channel:st}=qe;return st?st&&(0,D.Zp)(st)?Ke.PRIVATE_CHANNEL:Ke.PUBLIC_CHANNEL:Ke.COMPOSER}c(Re,"getModalContext");const Fe=new E.Ay("huddles");function Ie(qe){let{closeModal:st,callId:ut,channel:tt,channelSuggestion:_t,memberSuggestionId:yt,selectedMemberIds:Kt=v.Ml}=qe;const Qt=(0,s.wA)(),Jt=(0,_.A)(),Gt=Re({channel:tt}),wt=Gt===Ke.PRIVATE_CHANNEL&&!(0,D.PC)(tt),Bt=Gt===Ke.COMPOSER,[Wt,Tn]=(0,n.useState)(Kt),[Ot,Ft]=(0,n.useState)(),[rn,ln]=(0,n.useState)(!1),[_n,en]=(0,n.useState)(!1),Xt=(0,u.d4)(p.TM),[vn,je]=(0,n.useState)(void 0),Rt=(0,u.d4)(I.WR),hn=(0,u.d4)(L.H7),Nn=(0,V.tc)(hn),rt=(0,u.d4)(R.iH),vt=(0,u.d4)(De=>(0,Me.$)(De,(tt==null?void 0:tt.id)||"")),Mt=(0,u.d4)(p.Si),Ct=(0,u.d4)(B.qr),Yt=(0,u.d4)(Ye.$J),Un=(0,u.d4)(De=>(0,K.Hp)(De,S.xu.HUDDLE_INVITE_MODAL))===S.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER,En=(0,u.Z2)(De=>(0,B.ft)(De,tt==null?void 0:tt.id).filter(Ge=>Ge.id!==Rt).map(Ge=>Ge.id)),Bn=(0,u.d4)(y.pl),Mn=(0,u.Z2)(De=>wt?Wt.filter(Ge=>{const et=tt&&(0,M.Sv)(De,tt.id,Ge);return et&&et.isKnown&&!(et!=null&&et.isMember)}):[]);(0,n.useEffect)(()=>{_t&&Ft({id:_t.id,isCurrentSuggestedChannel:!0})},[_t]),(0,n.useEffect)(()=>{yt&&Tn([yt])},[yt]);const Vn=(0,n.useCallback)(De=>Tn(De),[]),rs=(0,n.useCallback)(De=>{if(De===(Ot==null?void 0:Ot.id)&&(Ot!=null&&Ot.isCurrentSuggestedChannel)){Ft({id:De,isCurrentSuggestedChannel:!0});return}Ft({id:De,isCurrentSuggestedChannel:!1})},[Ot==null?void 0:Ot.id,Ot==null?void 0:Ot.isCurrentSuggestedChannel]),as=(0,n.useCallback)(De=>{Tn(Wt.concat(De))},[Wt]),jn=(0,n.useCallback)(()=>{Ft({id:tt==null?void 0:tt.id,isCurrentSuggestedChannel:!0})},[tt==null?void 0:tt.id]),es=(0,n.useCallback)(()=>{Ot!=null&&Ot.id&&(Qt((0,C.A)({channelId:Ot.id,entryPoint:m.su.COMPOSER_HUDDLE_START})),st())},[Ot,Qt,st]),Qn=(0,n.useCallback)((0,t.coroutine)(function*(){ln(!0),yield Qt((0,g.r)({memberIds:Wt})).then(De=>{Qt((0,C.A)({channelId:De.id,entryPoint:m.su.COMPOSER_HUDDLE_START})),st(),ln(!1),en(!1)}).catch(De=>{Jt.error(De),ln(!1);const{message:Ge}=De;(Ge==null?void 0:Ge.indexOf(f.O3.INVALID_USER_COMBINATION))!==-1&&en(!0)})}),[Wt,Qt,Jt,st]),ss=(0,n.useCallback)((0,t.coroutine)(function*(){if(!tt)return;ln(!0);let De=Wt;(Ot==null?void 0:Ot.id)===tt.id&&(Ot!=null&&Ot.isCurrentSuggestedChannel)&&(De=(0,i.A)([...Wt,...vt])),yield Qt((0,T.A)({channelId:tt.id,userIds:De})).then(()=>{ln(!1),Mn&&Mn.length>0&&wt?Qt((0,xe.A)({members:Mn})):st()}).catch(Ge=>{Jt.error(Ge),ln(!1),Xt&&je(Ge)})}),[tt,vt,st,Qt,Xt,wt,Jt,Ot==null?void 0:Ot.id,Ot==null?void 0:Ot.isCurrentSuggestedChannel,Wt,Mn]),ft=(0,n.useMemo)(()=>Gt===Ke.COMPOSER?Ot!=null&&Ot.id?es:Qn:ss,[ss,Qn,Gt,Ot,es]),pt={[Ke.COMPOSER]:{eventId:P.EventId.HUDDLES_COMPOSER_HEADER_CLICKED,uiStep:P.UiStep.HUDDLE_COMPOSER_INVITES_SENT,elementName:"huddle_composer_dialog",entryPoint:"composer"},[Ke.PUBLIC_CHANNEL]:{eventId:P.EventId.HUDDLES_PUBLIC_CHANNEL_INVITE,elementName:"huddle_public_channel_invite"},[Ke.PRIVATE_CHANNEL]:{eventId:P.EventId.HUDDLES_PRIVATE_CHANNEL_INVITE,elementName:"huddle_private_channel_invite"}},Ht=c(()=>Nn&&!Mt&&!Ct?n.createElement(Le.A,null):rt&&!Un?n.createElement(G.A,{v2ClassName:(0,J.A)({"p-huddle_invite_modal_banner":Yt})}):null,"maybeRenderBanner");Ht.displayName="maybeRenderBanner";const nn=pt[Gt],kn=(0,n.useMemo)(()=>Bt?Fe.t("Start a Huddle"):Wt.length>1?Fe.t("Send Invites"):Fe.t("Send Invite"),[Bt,Wt]);if(!Bn)return null;const xt=Fe.t("You can invite people from outside this private conversation, but they may have restricted access to messages."),Dn=c(De=>n.createElement(b.A,{articleId:4402059015315,ariaLabel:Fe.t("Learn more about Huddles"),forceOpenInBrowser:!0},De),"renderLearnMoreLink");let Fn,wn,It,Je;const X=c(De=>{const Ge=De.map(et=>n.createElement(r.A,{key:et,isBold:!1,id:et}));return Ge&&(0,E.jd)(Ge)},"listifiedOverflowMembers");if(X.displayName="listifiedOverflowMembers",Nn&&Mt&&!Ct)wn=Fe.t("Invite someone to your huddle"),Fn=wt?Fe.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. You can invite anyone until someone joins \u2014 they won\u2019t be added to {channelName}. <a>Learn more</a>",{channelName:n.createElement(Y.A,{channel:tt}),"<a>":De=>{let{text:Ge}=De;return Dn(Ge)}}):Fe.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. They\u2019ll receive a notification to join. <a>Learn more</a>",{"<a>":De=>{let{text:Ge}=De;return Dn(Ge)}});else if(Bt?(wn=Fe.t("Start a Huddle"),It=Yt?Fe.t("You can invite whomever you\u2019d like to the huddle, they\u2019ll receive a notification in Slack to join."):Fe.t("Find a person or channel to huddle with")):(wn=Fe.t("Invite people to your huddle"),It=wt?xt:Fe.t("You can invite whomever you\u2019d like to the huddle, and they\u2019ll receive a notification to join.")),tt!=null&&tt.id&&En.length){const De=Fe.rt("{participants, plural, =0 {{firstParticipant} and <b>you</b> are} =1 {{firstParticipant}, {secondParticipant}, and <b>you</b> are} other {{firstParticipant}, {secondParticipant}, <a>and # others</a> are}} in this huddle.",{participants:En.length-1,firstParticipant:n.createElement(r.A,{isBold:!0,id:En[0]}),secondParticipant:n.createElement(r.A,{isBold:!0,id:En[1]}),"<a>":Ge=>{let{text:et}=Ge;return n.createElement(d.Ay,{zIndex:"above_fs",tip:X(En.slice(2))},n.createElement("span",null,et))}});Je=n.createElement("div",{className:"p-huddle_invite_channel_or_start__active_members_container"},n.createElement(Ce.i,{channelId:tt.id,className:"p-huddle_invite_channel_or_start__avatar_stack",avatarSize:l.RG.tiny,excludeIcon:!0,excludeMemberOverflowCount:!0,maxMembers:3}),n.createElement("div",null,De))}const _e=Xt&&vn!==void 0,ye="huddle-invite-description";return n.createElement(h.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:st,contentLabel:wn,describedby:ye,shouldReturnFocusAfterClose:!0,dataQa:"huddle_invite_channel_modal"},n.createElement(h.rQ,null,n.createElement(h.Rc,{title:wn,subtitle:It})),n.createElement(h.$m,null,n.createElement(h.qf,null,Je,Fn&&n.createElement("p",{id:ye},Fn),n.createElement(se.A,{isFreeTeam:Nn&&!Ct,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Mt,channel:tt,otherMembersInHuddle:En,onSelectedMembersChange:Vn,onSelectedChannelChange:rs,selectedMemberIds:Wt,selectedChannel:Ot}),wt&&Mn&&Mn.length>0&&n.createElement(be,{unknownMemberIds:Mn}),_n&&n.createElement(a.Ay,{"data-qa":"huddle-invite-invalid-user-combo-alert",level:"error"},Fe.t("All external people must already be in at least one channel together to send this invitation.")),_e&&n.createElement(He,{error:vn})),Ht(),n.createElement(Ve.s,null),Ct&&Nn&&!Un&&n.createElement(ae.V,{showProBadge:!0,className:"p-huddle_invite_channel_or_start__upgrade_alert"}),ut&&n.createElement(k.A,{activeHuddleCallId:ut,channel:tt,isFreeTeam:Nn&&!Ct,onSuggestedUserSelected:as,otherMembersInHuddle:En,selectedMemberIds:Wt,onChannelSelected:jn,channelSuggestionOptionSelected:Ot==null?void 0:Ot.isCurrentSuggestedChannel}),!ut&&n.createElement(ke,{isFreeTeam:Nn&&!Ct,onSuggestedChannelSelected:rs,onSuggestedUserSelected:as,selectedChannelId:Ot==null?void 0:Ot.id,selectedMemberIds:Wt})),n.createElement(h.jl,null,n.createElement(h.ox,{className:"p-huddle_invite_channel_or_start_footer_actions"},n.createElement(Q.A,{channelId:tt==null?void 0:tt.id}),n.createElement(h.s_,{type:"outline",className:"p-huddle_invite_channel_or_start_footer_actions_close","aria-label":Fe.t("Cancel")},Fe.t("Cancel")),n.createElement(O.A,Be({},nn,{clogImpression:!0}),n.createElement(o.lV,{"data-qa":"send_invite_button",loading:rn,onClick:ft,type:"primary",disabled:!Wt.length&&!(Ot!=null&&Ot.id),"aria-label":kn},kn)))),Mt&&Nn&&!Ct&&n.createElement(fe.A,{selectedMemberIds:Wt}))}c(Ie,"HuddleInviteChannelOrStart"),Ie.displayName="HuddleInviteChannelOrStart";const ze=Ie},6011052675:(x,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(6122756707),s=e(735940183),i=e(6084388622),l=e(5904726069);const o=new s.Ay("huddles"),a=c(d=>{let{channelId:u}=d;const _=(0,n.wA)(),v=(0,t.useCallback)(()=>{_((0,l.r)({channelId:u}))},[_,u]);return u?t.createElement(i.Ay,{onClick:v,type:"outline",className:"p-huddle_invite_link_button__copy_link"},o.t("Copy Huddle Link")):null},"HuddleInviteLinkButton");a.displayName="HuddleInviteLinkButton";const r=a},9236164662:(x,A,e)=>{"use strict";e.d(A,{A:()=>O});var t=e(4481313819),n=e(1224315998),s=e(2689960678),i=e(735940183),l=e(3134334389),o=e(2562405183),a=e(8739505998),r=e(6323355797),d=e(6122756707),u=e(1267040415),_=e(236241007),v=e(5641442783),h=e(3994181705),f=e(5332875232),I=e(5881236351),p=e(7268021173),y=e(1384076438),g=e(2607644860),E=e(8112788848),M=e(8214116048);const T=new i.Ay("trials_highlight_paid_features"),D={onClick:{enableClogAction:!0},elementName:"start_trial"},C={elementName:"upgrade_link",onClick:{enableClogAction:!0}},m=c(P=>{let{selectedMemberIds:R=s.Ml}=P;const L=(0,d.wA)(),V=r.ZO.PaidFeatureTrial,B=r.zG.Vhq,K=(0,o.d4)(F=>(0,p.hq)(F,V,B)),b=(0,o.d4)(F=>(0,p.bp)(F,V,B)),S=(0,o.d4)(f.Si),G=(0,l.useCallback)(()=>{L((0,I.Ov)(R))},[L,R]),H=(0,l.useCallback)(()=>{L((0,_.A)({uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,onSpeedbumpContinue:G}))},[L,G]);if((0,l.useEffect)(()=>{L((0,y.A)({campaignType:V,campaignSubType:B,reason:"huddle_invite_modal",context:g.y.huddleInviteModal}))},[L,V,B]),!S||b)return null;const U=K?T.rt("To use huddles with more people, <a>start a free trial.</a>",{"<a>":F=>{let{text:Y}=F;return l.createElement(a.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",onClick:H,autoClogProps:D},Y)}}):T.rt("To use huddles with more people, <a>see upgrade options.</a>",{"<a>":F=>{let{text:Y}=F;return l.createElement(u.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",autoClogProps:C,useLink:!0},Y)}});return l.createElement(t.A,{eventId:n.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:n.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},l.createElement("div",{className:"p-huddle_invite_modal_footer_banner"},l.createElement(v.A,{variant:h.G.HuddlesFreemiumDeprecated,promoType:V,promoSubtype:B,uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:E.m.AboveFullScreen,toolTipPosition:M.yX.Bottom}),l.createElement("span",{className:"margin_left_50"},U)))},"HuddleInviteModalFooterBanner");m.displayName="HuddleInviteModalFooterBanner";const O=m},7396657731:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(735940183),s=e(1224315998),i=e(4481313819),l=e(1743656885),o=e(3328083357),a=e(5712872315);const r=new n.Ay("trials_highlight_paid_features"),d=c(v=>{let{text:h}=v;return t.createElement(l.A,{articleId:4402059015315,ariaLabel:r.t("Learn more about Huddles")},h)},"AlertBannerHelpLink"),_=c(()=>t.createElement(i.A,{eventId:s.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:s.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(o.A,{theme:a.B.NONE,"data-qa":"huddle_invite_modal_free_banner"},r.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. <a>Learn more</a>",{"<a>":d})))),"HuddleInviteModalFreeBanner")},9645800439:(x,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3134334389),n=e(2562405183),s=e(735940183),i=e(3215419563),l=e(5882561377),o=e(1407713935),a=e(3730613858),r=e(1289024643),d=e(8040098042),u=e(4327331459);const _=new s.Ay("huddles");var v;(function(m){m.CHANNEL="channel",m.MEMBER="member"})(v||(v={}));function h(m){let{id:O,entity:P,channel:R,huddleId:L}=m,V;(0,d.A)(O)?V=v.CHANNEL:(0,u.A)(O)&&(V=v.MEMBER);const B=(0,n.d4)(F=>R&&(0,a.Sv)(F,R.id,O)),K=B&&B.isKnown&&(B==null?void 0:B.isMember),b=R&&(0,o.JM)(R),S=(0,n.d4)(F=>(0,r.Ck)(F,L,O)),G=!!S&&S==="joining_soon";let H=null;if(S?H=G?_.t("Joining soon"):_.t("Invited"):R&&b&&!K?H=_.t("Not in conversation"):R&&!b&&!K&&(H=_.t("Not in channel")),!V)return null;let U;return V===v.CHANNEL?U=t.createElement(i.A,{channelId:O,channel:P}):V===v.MEMBER&&(U=t.createElement(l.A,{id:O,member:P,showPresence:!0,secondaryContent:H})),t.createElement("div",{className:"display_flex"},U)}c(h,"HuddleInviteMultiSelectRenderOption"),h.displayName="HuddleInviteMultiSelectRenderOption";const f=(0,t.memo)(h);var I=e(7090824688),p=e(630868093),y=e(3288846409),g=e(5286203919),E=e(2689960678);function M(){return M=Object.assign||function(m){for(var O=1;O<arguments.length;O++){var P=arguments[O];for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(m[R]=P[R])}return m},M.apply(this,arguments)}c(M,"_extends");const T=new s.Ay("huddles"),D=c(m=>{let{isFreeTeam:O,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:P,channel:R,otherMembersInHuddle:L,onSelectedMembersChange:V,onSelectedChannelChange:B,selectedMemberIds:K=E.Ml,selectedChannel:b}=m;const S=(0,y.cw)(g.E9),G=(0,t.useMemo)(()=>B&&!R&&!O&&!(K!=null&&K.length),[R,O,B,K]),H=(0,t.useMemo)(()=>b!=null&&b.id&&b.isCurrentSuggestedChannel?!0:!(b!=null&&b.id),[b]),U=(0,t.useMemo)(()=>({entities:{...G&&{channels:{canPost:!0,includeArchived:!1}},...H&&{members:{includeSelf:!1,includeSlackbot:!1,includeBots:!1},userGroups:!1}},sort:{frecency:!0,preferChannelMembers:!0,preferChannelsUserBelongsTo:!0,currentChannel:R},allowEmptyQuery:!0,filter:ne=>!L.includes(ne.id)}),[G,H,R,L]),F=(0,t.useCallback)(ne=>{B&&(0,d.A)(ne.value)?B(ne.value):V([ne.value])},[B,V]),Y=(0,t.useCallback)(ne=>{const ue=[];let he;ne.forEach(be=>{(0,d.A)(be.value)?(!he||be.value!==(b==null?void 0:b.id))&&(he=be.value):ue.push(be.value)}),B==null||B(he),V(ue)},[B,V,b]),Z=(0,t.useCallback)(ne=>{let{value:ue,entity:he}=ne;return t.createElement(f,{channel:R,id:ue,entity:he,huddleId:S})},[R,S]),ee=(0,t.useCallback)(ne=>{let{value:ue}=ne;return(0,d.A)(ue)?t.createElement(i.A,{channelId:ue}):t.createElement(l.A,{id:ue,showAvatar:!0})},[]),j=(0,t.useMemo)(()=>({className:"padding_top_50 padding_bottom_50",searcherOptions:U,renderOption:Z,selectId:"invite_participants",size:"medium",width:"100%",expandOnFocus:O,focusOnMount:!0}),[U,Z,O]),ge=(0,t.useMemo)(()=>{const ne=K.map(ue=>({value:ue}));return b!=null&&b.id&&ne.push({value:b.id}),ne},[b,K]);return O&&P?t.createElement(p.uR,M({},j,{onOptionSelected:F,placeholderText:T.t("Find someone to invite\u2026"),renderSelectedOption:ee,selectedOption:ge[0]})):t.createElement(I.h7,M({},j,{onSelectedItemsChange:Y,selectedOptions:ge,placeholderText:T.t("Search by name")}))},"HuddleInviteModalSelect");D.displayName="HuddleInviteModalSelect";const C=D},605594140:(x,A,e)=>{"use strict";e.d(A,{A:()=>le});var t=e(3134334389),n=e(2562405183),s=e(3288846409),i=e(7715417323),l=e(2689960678),o=e(5363983309),a=e(9101533895),r=e(5286203919),d=e(6470070112),u=e(1407713935),_=e(5911067953),v=e(9706240641),h=e(4075246222),f=e(6122756707),I=e(6084388622),p=e(7937864072),y=e(3730613858),g=e(666760496),E=e(1563996154),M=e(2023515700),T=e(980293773),D=e(9548972574),C=e(5795074931),m=e(5332875232),O=e(735940183),P=e(9884588328),R=e(581167618),L=e(3534324375),V=e(8276911661),B=e(8739505998),K=e(438845125);const b=new O.Ay("huddles");function S(Ae){let{members:Te,createNewMpim:Ne}=Ae;var pe,Ee,oe;const ce=(0,n.Z2)(Me=>Te.map(Se=>(0,L.sE)(Me,(0,V.nv)(Me,Se.slackId))));if(!Te)return null;const ke=ce&&ce.slice(3),Ce=b.rt("{unknownMembers, plural, =1 {<strong>{name1}</strong>} =2 {<strong>{name1}</strong> and <strong>{name2}</strong>} =3 {<strong>{name1}</strong>, <strong>{name2}</strong>, and <strong>{name3}</strong>} other {<strong>{name1}</strong>, <strong>{name2}</strong>, <strong>{name3}</strong> and <strong>{numOthers}</strong> more}} won\u2019t be able to see messages sent in thread because this huddle began in a direct message. You can <a>start a new huddle</a> instead.",{unknownMembers:Te.length,name1:t.createElement(K.A,{slackId:(pe=Te[0])===null||pe===void 0?void 0:pe.slackId}),name2:t.createElement(K.A,{slackId:(Ee=Te[1])===null||Ee===void 0?void 0:Ee.slackId}),name3:t.createElement(K.A,{slackId:(oe=Te[2])===null||oe===void 0?void 0:oe.slackId}),numOthers:t.createElement(E.Ay,{zIndex:"above_fs",position:"top",tip:(0,O.jd)(ke)},t.createElement("span",null,Te.length-3))},Me=>{let{text:Se,tag:Ue}=Me;return Ue==="a"?t.createElement(B.A,{onClick:Ne},Se):null});return t.createElement(R.Ay,{level:R.A_.info,type:R.QE.custom},Ce)}c(S,"HuddleInviteMpimAlert"),S.displayName="HuddleInviteMpimAlert";const G=S;var H=e(7268021173),U=e(3677514771),F=e(6839188756),Y=e(4983989341),Z=e(4481313819),ee=e(1224315998),j=e(1743656885),ge=e(9953252450),ne=e(7396657731),ue=e(9236164662),he=e(9645800439),be=e(6011052675),xe=e(3109955471),Le=e(9623497342),fe=e(1051015021),se=e(952756744),Q=e(716227588),k=e(6259241484);const N=new O.Ay("huddles"),$={elementName:"learn_more",onClick:{enableClogAction:!0}};function W(Ae){let{closeModal:Te,callId:Ne,channelId:pe,selectedMemberIds:Ee=l.Ml}=Ae;const oe=(0,f.wA)(),ce=(0,p.A)(),ke=(0,n.d4)(C.WR),Ce=(0,n.d4)(d.pl),Me=(0,n.d4)(Ot=>(0,a.OL)(Ot,pe)),Se=(0,n.d4)(D.qr),Ue=(0,n.d4)(m.Si),He=(0,n.d4)(Le.$J),Ye=(0,n.Z2)(Ot=>(0,D.ft)(Ot,pe).filter(Ft=>Ft.id!==ke).map(Ft=>Ft.id)),ae=(0,n.d4)(Ot=>(0,Q.Hp)(Ot,k.xu.HUDDLE_INVITE_MODAL))===k.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER,[Ve,Be]=(0,t.useState)(Ee),[Ke,Re]=(0,t.useState)(!1),Fe=(0,n.Z2)(Ot=>!pe||!(Ve!=null&&Ve.length)?[]:Ve.filter(rn=>{const ln=(0,y.Sv)(Ot,pe,rn);return ln&&ln.isKnown&&!(ln!=null&&ln.isMember)?rn:!1})),Ie=(0,n.d4)(U.H7),ze=(0,F.tc)(Ie),qe=(0,n.d4)(H.iH),st=(0,t.useCallback)(Ot=>{Be(Ot)},[]),ut=(0,t.useCallback)(Ot=>{Be(Ve.concat(Ot))},[Ve]),tt=(0,t.useMemo)(()=>{const Ot=(0,P.Hd)(Me);return Array.isArray(Ot)?Ot:[]},[Me]),_t=tt.filter(Ot=>Ot!==ke),yt=(0,t.useCallback)((0,v.coroutine)(function*(){if(!pe)return;let Ot=Ve.concat(Ye);return tt&&(Ot=(0,h.A)(Ot,tt)),oe((0,Y.x)({channelId:pe,memberIds:Ot})).then(()=>{Te()}).catch(Ft=>{ce.error(Ft),Re(!1)})}),[pe,Ve,Ye,tt,oe,Te,ce]),Kt=(0,t.useCallback)((0,v.coroutine)(function*(){if(!pe)return;Re(!0);const Ot=Ve.concat(Ye);return oe((0,g.A)({channelId:pe,userIds:Ot})).then(()=>{Te()}).catch(Ft=>{ce.error(Ft),Re(!1)})}),[pe,Te,oe,ce,Ye,Ve]),Qt=c(()=>ze&&!Ue&&!Se?t.createElement(ne.A,null):qe&&!Se&&!He?t.createElement(ge.A,null):null,"maybeRenderBanner");Qt.displayName="maybeRenderBanner";let Jt,Gt,wt,Bt;const Wt=c(Ot=>{const Ft=Ot.map(rn=>t.createElement(M.A,{key:rn,isBold:!1,id:rn}));return Ft&&(0,O.jd)(Ft)},"listifiedOverflowMembers");Wt.displayName="listifiedOverflowMembers",ze&&Ue&&!Se?(Jt=N.t("Invite someone else to your huddle"),wt=N.rt("{participants, plural, =0 {<b>{firstParticipant}</b> is} =1 {<b>{firstParticipant}</b> and <b>{secondParticipant}</b> were} other {<b>{firstParticipant}</b> <a>and # others</a> were}} already invited, but {participants, plural, =0 {hasn\u2019t} =1 {haven\u2019t} other {haven\u2019t}} joined. ",{participants:(_t==null?void 0:_t.length)-1,firstParticipant:t.createElement(M.A,{isBold:!1,id:_t[0]}),secondParticipant:t.createElement(M.A,{isBold:!1,id:_t[1]}),"<a>":Ot=>{let{text:Ft}=Ot;return t.createElement(E.Ay,{zIndex:"above_fs",tip:Wt(_t==null?void 0:_t.slice(1))},t.createElement("span",null,Ft))},"<b>":Ot=>{let{text:Ft}=Ot;return t.createElement("b",null,Ft)}}),Bt=N.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. Invite anyone until someone joins. <a>Learn more</a>",{"<a>":Ot=>{let{text:Ft}=Ot;return t.createElement(j.A,{articleId:4402059015315,ariaLabel:N.t("Learn more about Huddles"),forceOpenInBrowser:!0,autoClogProps:$},Ft)},fallbackHash:"53e44c4bd8bcf67461de7b54ef1ec275b05f4829"})):(Jt=N.t("Invite people to your huddle"),Gt=N.t("You can invite people from outside this private conversation, but they may have restricted access to messages."));const Tn=(0,t.useMemo)(()=>Ve.length>1?N.t("Send Invites"):N.t("Send Invite"),[Ve]);return!Ce||!pe?null:t.createElement(T.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Te,contentLabel:Jt,shouldReturnFocusAfterClose:!0},t.createElement(T.rQ,null,t.createElement(T.Rc,{title:Jt,subtitle:Gt})),t.createElement(T.$m,null,t.createElement(T.qf,null,(wt||Bt)&&t.createElement("p",null,wt,Bt),t.createElement(he.A,{isFreeTeam:ze&&!Se,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Ue,channel:Me,otherMembersInHuddle:Ye,onSelectedMembersChange:st,selectedMemberIds:Ve}),(Fe==null?void 0:Fe.length)>0&&t.createElement(G,{members:Fe.map(Ot=>({slackId:Ot})),createNewMpim:yt})),Qt(),He&&t.createElement(se.s,null),Se&&ze&&!ae&&t.createElement(fe.V,{showProBadge:!0,className:"p-huddle_invite_channel_or_start__upgrade_alert"}),t.createElement(xe.A,{activeHuddleCallId:Ne,channel:Me,isFreeTeam:ze&&!Se,onSuggestedUserSelected:ut,otherMembersInHuddle:Ye,selectedMemberIds:Ve})),t.createElement(T.jl,null,t.createElement(be.A,{channelId:pe}),t.createElement(T.ox,null,t.createElement(T.s_,{type:"outline","aria-label":N.t("Cancel")},N.t("Cancel")),t.createElement(Z.A,{clogImpression:!0,eventId:ee.EventId.HUDDLES_MPIM_INVITE},t.createElement(I.lV,{loading:Ke,onClick:Kt,type:"primary",disabled:!Ve.length,"aria-label":Tn},Tn)))),Ue&&ze&&!Se&&t.createElement(ue.A,{selectedMemberIds:Ve}))}c(W,"HuddleInviteMpim"),W.displayName="HuddleInviteMpim";const q=W;function re(Ae){let{closeModal:Te=i.A,selectedMemberIds:Ne=l.Ml}=Ae;const pe=(0,n.d4)(d.pl),Ee=(0,s.cw)(r.E9),oe=(0,s.cw)(r.hc),ce=(0,n.d4)(ke=>(0,a.OL)(ke,oe));return pe?(0,u.JM)(ce)?t.createElement(q,{callId:Ee,channelId:oe,closeModal:Te,selectedMemberIds:Ne}):t.createElement(_.A,{callId:Ee,channel:ce,closeModal:Te,selectedMemberIds:Ne}):null}c(re,"HuddleInviteOrStartModal"),re.displayName="HuddleInviteOrStartModal";const le=(0,o.A)(re,{isStackable:!0})},3109955471:(x,A,e)=>{"use strict";e.d(A,{A:()=>Z});var t=e(3134334389),n=e(2003990933),s=e(7156798807),i=e(5103024697),l=e(2562405183),o=e(5795074931),a=e(3730613858),r=e(8276911661),d=e(1289024643),u=e(1681415537),_=e(2293211408),v=e(7889060196),h=e(8683010724),f=e(9884588328),I=e(1407713935),p=e(8798294025),y=e(4562579337),g=e(8170643398),E=e(863407566),M=e(181849556),T=e(735940183),D=e(2828836153),C=e(3877384923);const m=new T.Ay("huddles");var O;(function(ee){ee[ee.Channel=0]="Channel",ee[ee.Here=1]="Here"})(O||(O={}));const P=c(ee=>{let{variation:j}=ee;const ge=(0,t.useMemo)(()=>{const ne=j===O.Channel?m.t("@channel",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}):m.t("@here",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),ue=j===O.Channel?m.t("Invite every member in this channel",{fallbackHash:"356143f00ea36746c3a9c41765b940644ca651cf",fallbackHashNs:"broadcast_keywords"}):m.t("Invite every online member in this channel",{fallbackHash:"d6f32ea27e0fd9186b386de54a63fc72a17a2075",fallbackHashNs:"broadcast_keywords"});return t.createElement("div",{className:"p-huddle_invite_channel_list_entity"},t.createElement("div",{className:"p-huddle_invite_channel_list_entity__icon_container"},t.createElement(h.A,{name:"mentions",size:"24"})),t.createElement("div",{className:"p-huddle_invite_channel_list_entity_text_container"},t.createElement("span",{className:"c-base_entity__text p-huddle_invite_channel_list_entity__title"},ne),t.createElement("span",{className:"c-base_entity__subtext"},ue)))},[j]);return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(D.A,{size:C.ny.medium,padding:C.FK.normal,primaryContent:ge}))},"HuddleInviteChannelListEntity");P.displayName="HuddleInviteChannelListEntity";const R=P;var L=e(8286248123),V=e(9548972574),B=e(2689960678),K=e(9680914051),b=e(6470070112);const S=new T.Ay("huddles");var G;(function(ee){ee.SUGGESTIONS="suggestions",ee.INVITED="invited"})(G||(G={}));function H(ee,j,ge,ne,ue,he,be){return!(!ee||j||ge||ee===ne||ue.includes(ee)||he.includes(ee)||be.includes(ee))}c(H,"shouldSuggestMember");const U="channelEntityId",F="channelHereEntityId",Y=c(ee=>{let{activeHuddleCallId:j,channel:ge,isFreeTeam:ne,onSuggestedUserSelected:ue,onChannelSelected:he,onChannelHereSelected:be,otherMembersInHuddle:xe,selectedMemberIds:Le,channelSuggestionOptionSelected:fe=!1}=ee;const se=(0,l.d4)(o.WR),Q=(0,l.d4)(Ie=>(0,L.q8)(Ie,ge==null?void 0:ge.id)),k=(0,l.d4)(b.df),N=(0,n.A)(Q,"counts.member_count")||void 0,$=(0,I.JM)(ge),W=(0,l.d4)(V.Sx),q=(0,l.d4)(Ie=>(0,d.k9)(Ie,j)),re=(0,l.d4)(Ie=>(0,d.I1)(Ie,j)),Ae=W+1+q+re,Te=(0,l.Z2)(Ie=>(0,d.Kx)(Ie,j)),Ne=(0,t.useMemo)(()=>Te?Object.keys(Te):[],[Te]),pe=Ne.length,Ee=25,oe=(0,l.Z2)(Ie=>(0,E.A)(Ie,(ge==null?void 0:ge.id)||"",Ee,Ee,!0).map(qe=>qe.id));let ce=[];if((0,I.LI)(ge)){const Ie=(0,p.e)(ge);Ie&&ce.push(Ie)}else if((0,I.yz)(ge)){const Ie=(0,f.Ug)(ge);Ie&&Ie.length&&(ce=[...Ie])}else ce=oe;const ke=(0,l.wz)(Ie=>{if(fe||!ce||!ce.length)return B.Ml;const ze=[];return ce.forEach(qe=>{const st=(0,r.nv)(Ie,qe);H(qe,(0,y.A)(st),(0,g.oy)(st),se,xe,Ne,Le)&&ze.push({id:qe,isMemberOfChannel:!0})}),ze}),Ce=(0,l.wz)(M.mc),Me=(0,l.wz)(Ie=>{if(!Ce||!Ce.length)return B.Ml;const ze=[];return Ce.forEach(qe=>{const st=(0,r.nv)(Ie,qe.id);if(!H(qe.id,(0,y.A)(st),(0,g.oy)(st),se,xe,Ne,Le)||ce.includes(qe.id))return;const ut=ge&&(0,a.Sv)(Ie,ge.id,qe.id),tt=ut&&ut.isKnown&&ut.isMember;ze.push({id:qe.id,isMemberOfChannel:tt})}),ze}),Se=(0,t.useMemo)(()=>!he||(0,I.PC)(ge)?!1:N<=K.XG&&Ae+N<=k&&!fe,[N,fe,Ae,k,he,ge]),Ue=(0,t.useMemo)(()=>ke.length>=Ee?ke.slice(0,Ee):[...ke,...Me].slice(0,Ee),[ke,Me]),He=(0,t.useMemo)(()=>Ue.map(Ie=>Ie.id),[Ue]),Ye=(0,t.useMemo)(()=>(0,s.A)(Ue,"id"),[Ue]),J=(0,t.useMemo)(()=>Math.min(60*Math.max(pe,He.length),240),[He,pe]),ae=(0,t.useCallback)((Ie,ze)=>{if(ze.key===U)return t.createElement(R,{variation:O.Channel});if(ze.key===F)return t.createElement(R,{variation:O.Here});const qe=Ye[ze.key];if(!qe)return;let st=null;return qe.isMemberOfChannel===!1&&($||(0,I.PC)(ge)?st=S.t("Not in conversation"):st=S.t("Not in channel")),t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(u.A,{id:qe.id,secondaryContent:st}))},[$,Ye,ge]),Ve=(0,t.useCallback)(Ie=>{if(Ie.id){if(Ie.id===U){he&&he();return}if(Ie.id===F){be&&be();return}ue(Ie.id)}},[be,he,ue]),Be=(0,t.useCallback)(()=>{let Ie=He;return Se&&(Ie=[U,...He]),t.createElement(i.A,{disableHeight:!0},ze=>{let{width:qe}=ze;return t.createElement(v.A,{"aria-label":S.t("Suggested"),keys:Ie,rowRenderer:ae,onItemClick:Ve,width:qe,height:J})})},[Se,ae,He,Ve,J]),Ke=(0,t.useCallback)(Ie=>{const ze=Ne[Ie],qe=Te==null?void 0:Te[ze];if(!qe)return null;const st=qe==="joining_soon",ut=t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__pending_status_container"},t.createElement(h.A,{name:st?"clock":"paper-plane",size:"20"}),t.createElement("span",null,st?S.t("Joining soon"):S.t("Invited")));return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__list_entity"},t.createElement(u.A,{id:ze,secondaryContent:ut}))},[Ne,Te]),Re=(0,t.useCallback)(()=>t.createElement(i.A,{disableHeight:!0},Ie=>{let{width:ze}=Ie;return t.createElement(v.A,{"aria-label":S.t("Invited"),keys:Ne,rowRenderer:Ke,width:ze,height:J})}),[Ne,Ke,J]),Fe=(0,t.useMemo)(()=>{const Ie=[];return He.length&&Ie.push({title:S.t("Suggested"),id:G.SUGGESTIONS,content:Be()}),Ie.push({title:S.t("Invited"),id:G.INVITED,titleCount:pe,content:Re()}),Ie},[He,pe,Re,Be]);return!j||ne?null:t.createElement("div",{className:"p-huddle_invite_suggestion_tabs"},t.createElement(_.A,{fullHeight:!0,tabs:Fe,tabMenuClassnames:"p-huddle_invite_suggestion_tabs__tab_menu"}))},"HuddleInviteSuggestionTabs");Y.displayName="HuddleInviteSuggestionTabs";const Z=t.memo(Y)},9301413712:(x,A,e)=>{"use strict";e.d(A,{s:()=>ae,_:()=>Ve});var t=e(3134334389),n=e(825587348),s=e(5363983309),i=e(1593595278),l=e(8801078943),o=e(9948866681),a=e(9706240641),r=e(7396150282),d=e(8157829725),u=e(571104883),_=e(462591818),v=e(8736071954);function h(Be){let{microphoneDeviceId:Ke,handleMicrophoneStreamError:Re}=Be;const[Fe,Ie]=(0,t.useState)(!1),ze=(0,t.useRef)(null),qe=(0,t.useRef)(null),[st,ut]=(0,t.useState)(void 0),tt=(0,t.useCallback)((0,a.coroutine)(function*(){let Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(Fe&&!Jt)){if(!(0,u.y3)()&&(yield navigator.permissions.query({name:_.mT.MICROPHONE})).state===v.eJ.Denied){Re==null||Re();return}if(!(!Ke||ze.current))try{const Gt=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:Ke}});ze.current=Gt,qe.current=new r.x,qe.current.setPreviewStream(Gt),Ie(!0),ut(Ke)}catch{Re==null||Re()}}}),[Re,Fe,Ke]),_t=(0,t.useCallback)(()=>{qe.current&&(qe.current.cleanup(),qe.current=null),ze.current&&(ze.current.getTracks().forEach(Jt=>Jt.stop()),ze.current=null),Ie(!1)},[]),yt=(0,t.useCallback)(Jt=>{Jt!==st&&(_t(),tt({isMicSwitch:!0}),ut(Jt))},[tt,st,_t]);(0,d.A)(()=>(tt(),()=>{_t()}),[]),(0,t.useEffect)(()=>{Ke&&Ke!==st&&st!==void 0&&yt(Ke)},[Ke,st,yt]);const Kt=(0,t.useCallback)(()=>{tt()},[tt]),Qt=(0,t.useCallback)(()=>{_t()},[_t]);return{turnOn:Kt,turnOff:Qt}}c(h,"useGetHuddleJoinPreviewMicLevels");var f=e(2562405183),I=e(9365970888),p=e(387328355),y=e(1535211300),g=e.n(y);const E=t.memo(Be=>{let{handleMicrophonePermissionsError:Ke,microphonePermissionDenied:Re,cameraPermissionDenied:Fe}=Be;const Ie=(0,f.Z2)(I.oG),ze=(0,f.d4)(tt=>!!(0,p.WQ)(tt,"isMicrophoneEnabled")),qe=(0,t.useCallback)(()=>{Ke==null||Ke()},[Ke]),st=(0,t.useMemo)(()=>Ie.microphone.filter(tt=>!!tt.id).map(tt=>({label:tt.label,value:tt.id})),[Ie.microphone]),ut=st==null?void 0:st[0];return h({microphoneDeviceId:ut==null?void 0:ut.value,handleMicrophoneStreamError:qe}),t.createElement("div",{className:g().container},t.createElement(i.A,{className:g().device,audioMeterLayout:i.Y.Inline,selectSize:"medium",isEnabled:ze,microphonePermissionDenied:Re}),t.createElement(o.A,{className:g().device,selectSize:"medium",showTestSpeaker:!0,microphonePermissionDenied:Re}),t.createElement(l.A,{className:g().device,selectSize:"medium",cameraPermissionDenied:Fe}))});var M=e(5011231008),T=e(4745917661),D=e(1638377365),C=e(2312625946),m=e(735940183),O=e(7280065019),P=e(6084388622),R=e(8683010724),L=e(5255740490),V=e(2688127376),B=e.n(V);const K=new m.Ay("huddles"),b=t.memo(Be=>{let{turnOffCameraHandler:Ke,turnOnCameraHandler:Re,cameraIsOn:Fe,cameraPermissionDenied:Ie,microphonePermissionDenied:ze}=Be;const qe=!0,{videoLabel:st,deviceLabel:ut}=(0,D.z)(),tt=(0,t.useCallback)(()=>{if(Fe){Ke==null||Ke();return}Re==null||Re()},[Ke,Re,Fe]),_t=(0,t.useMemo)(()=>Ie?K.t("Camera permission denied",{fallbackHash:"3bca281bb714e2057db7a3b764b3502a1915a27a",fallbackHashNs:"huddles_audio_video_prefs"}):t.createElement(T.A,{actionLabel:st,deviceLabel:ut,audioOnlyModeEnabledWarning:!1}),[ut,Ie,st]);return t.createElement("div",{className:B().container},t.createElement(M.A,{className:B().toolbarButton,microphonePermissionDenied:ze}),qe&&t.createElement(C.Ay,{tip:_t},t.createElement(P.Nm,{htmlType:"button",onClick:tt,role:"switch","aria-label":K.t("Video"),"aria-checked":Fe,"data-qa":"huddle_camera_huddle_toolbar",className:(0,L.A)(B().toolbarButton,{[B().cameraDisabled]:Ie}),"aria-disabled":Ie},t.createElement(O.A,{isCameraEnabled:Fe,className:"p-huddle_toolbar__video_button"}),Ie&&t.createElement("div",{className:B().warningBadgeContainer},t.createElement("div",{className:B().warningBadge},t.createElement(R.A,{name:"warning",variation:"filled"}))))))});var S=e(8419239240),G=e(9632269965),H=e.n(G);const U=t.memo(Be=>{let{channelId:Ke}=Be;const Re=(0,S.I)({channelId:Ke});return t.createElement("div",{className:H().container},Re)});var F=e(6122756707),Y=e(8088586193),Z=e(4775127335),ee=e(5795074931),j=e(6251210828),ge=e(7434063642),ne=e(581167618),ue=e(8739505998),he=e(9289216704),be=e(5332875232);const xe=new m.Ay("huddles"),Le=t.memo(Be=>{let{cameraPermissionDenied:Ke,microphonePermissionDenied:Re}=Be;const Fe=(0,f.d4)(be.Rk),Ie=(0,t.useMemo)(()=>{if(!Re)return null;const qe=Fe?xe.rt("Open your device\u2019s system preferences and grant microphone access to Slack. If you\u2019ve already done so, quit and reopen Slack."):"Open your device\u2019s system preferences and grant microphone access to Slack. If you\u2019ve already done so, quit and reopen Slack.";let st=null;return he.mt&&(st=t.createElement(ue.A,{href:he.mt},Fe?xe.t("Open system preferences"):"Open system preferences")),t.createElement(ne.Ay,{type:ne.QE.boxed,level:ne.A_.error,icon:"info-circle",align:ne.AO.left,heading:Fe?xe.rt("Allow microphone access"):"Allow microphone access"},qe,t.createElement("br",null),t.createElement("br",null),st)},[Fe,Re]),ze=(0,t.useMemo)(()=>{if(!Ke)return null;const qe=Fe?xe.rt("Open your device\u2019s system preferences and grant camera access to Slack. If you\u2019ve already done so, quit and reopen Slack."):"Open your device\u2019s system preferences and grant camera access to Slack. If you\u2019ve already done so, quit and reopen Slack.";let st=null;return he.Oi&&(st=t.createElement(ue.A,{href:he.Oi},Fe?xe.t("Open system preferences"):"Open system preferences"," ")),t.createElement(ne.Ay,{type:ne.QE.boxed,level:ne.A_.warning,icon:"info-circle",align:ne.AO.left,heading:Fe?xe.rt("Slack doesn\u2019t have camera access"):"Slack doesn\u2019t have camera access"},qe,t.createElement("br",null),t.createElement("br",null),st)},[Ke,Fe]);return Fe?t.createElement("div",{className:"margin_bottom_100"},Ie,t.createElement("br",null),ze):null});var fe=e(9295473340),se=e.n(fe);const Q=320,k=t.memo(Be=>{let{channelId:Ke}=Be;const Re=(0,F.wA)(),Fe=(0,t.useRef)(null),Ie=(0,f.d4)(Ct=>(0,j.gW)(Ct,{channelId:Ke})),ze=(0,f.d4)(Ct=>(0,j.zK)(Ct,{channelId:Ke})),qe=(0,f.Z2)(I.oG),st=(0,f.d4)(ee.WR),ut=(0,f.d4)(Ct=>!!(0,p.WQ)(Ct,"isMicrophoneEnabled")),tt=(0,t.useMemo)(()=>qe.camera.filter(Ct=>!!Ct.id).map(Ct=>({label:Ct.label,value:Ct.id})),[qe.camera]),_t=(0,t.useMemo)(()=>qe.microphone.filter(Ct=>!!Ct.id).map(Ct=>({label:Ct.label,value:Ct.id})),[qe.microphone]),[yt,Kt]=(0,t.useState)(!1),[Qt,Jt]=(0,t.useState)(!1),[Gt,wt]=(0,t.useState)(!0),[Bt,Wt]=(0,t.useState)(tt!=null&&tt.length?tt[0]:void 0),[Tn,Ot]=(0,t.useState)(_t!=null&&_t.length?_t[0]:void 0),[Ft,rn]=(0,t.useState)(!1),[ln,_n]=(0,t.useState)(!1),en=(0,t.useCallback)(()=>{rn(!0)},[]),Xt=(0,t.useCallback)(()=>{_n(!0)},[]),{turnOffCameraPreview:vn,previewCameraIsOn:je}=(0,Y.A)({videoRef:Fe,preferredCameraId:Bt==null?void 0:Bt.value,isVideoElementReady:Qt,startOnMount:!1,handleCameraStreamError:en});(0,t.useEffect)(()=>()=>{vn()},[vn]);const Rt=(0,t.useCallback)(()=>{vn(),Gt&&(Jt(!1),wt(!1))},[Gt,vn]),hn=(0,t.useCallback)(()=>{Gt||(Jt(!1),wt(!0))},[Gt]),Nn=(0,t.useCallback)(Ct=>{if((Ct==null?void 0:Ct.value)===(Bt==null?void 0:Bt.value))return;const Yt=Gt;Rt(),Wt(Ct),Yt&&(wt(!0),hn())},[Bt==null?void 0:Bt.value,Gt,Rt,hn]);(0,t.useEffect)(()=>{if(tt.length>0){const Ct=tt[0];(Ct==null?void 0:Ct.value)!==(Bt==null?void 0:Bt.value)&&Nn(Ct)}},[tt,Bt,Nn]),(0,t.useEffect)(()=>{if(_t.length>0){const Ct=_t[0];(Ct==null?void 0:Ct.value)!==(Tn==null?void 0:Tn.value)&&Ot(Ct)}},[tt,_t,Bt,Tn==null?void 0:Tn.value,Nn]);const rt=(0,t.useCallback)(Ct=>{Ct!=null&&Ct.value&&Wt(Ct)},[Wt]);(0,t.useEffect)(()=>{tt.length!==0&&yt&&(rt(tt[0]),Kt(!1))},[tt,yt,rt]);const vt=(0,t.useCallback)(Ct=>{Fe.current!==Ct&&(!Ct&&Qt&&Fe!==void 0&&je&&vn(),!(!Ct&&!Qt)&&(Fe.current=Ct,Jt(!0)))},[Qt,vn,je]),Mt=(0,t.useMemo)(()=>(je||Gt)&&!Ft?t.createElement("video",{className:se().videoPreview,ref:vt}):t.createElement(Z.Ay,{size:Q,userId:st,isInteractive:!1,className:se().videoAvatar}),[st,vt,je,Gt,Ft]);return(0,t.useEffect)(()=>{(je!==Ie||ze!==ut)&&Re((0,ge.fP)({channelId:Ke,cameraEnabled:je,microphoneEnabled:ut}))},[Re,je,Ke,ut,Ie,ze]),t.createElement("div",null,t.createElement(Le,{cameraPermissionDenied:Ft,microphonePermissionDenied:ln}),t.createElement(U,{channelId:Ke}),t.createElement("div",{className:se().videoAndDevicesContainer},t.createElement("div",{className:se().videoContainer},t.createElement("div",{className:se().videoInnerContainer},Mt),t.createElement(b,{turnOffCameraHandler:Rt,turnOnCameraHandler:hn,cameraIsOn:je,microphonePermissionDenied:ln,cameraPermissionDenied:Ft})),t.createElement(E,{handleMicrophonePermissionsError:Xt,microphonePermissionDenied:ln,cameraPermissionDenied:Ft})))});var N=e(1973246490),$=e(2164739987),W=e(9101533895),q=e(9884588328);const re=new m.Ay("huddles");function le(Be){let{channelId:Ke,isHost:Re}=Be;const Fe=(0,f.d4)(tt=>(0,W.OL)(tt,Ke)),{memberCount:Ie}=(0,N.W)({channelId:Ke}),ze=Ie>0,qe=(0,$.f)(Fe),st=(0,f.d4)(tt=>(0,q.SB)(tt,Fe,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}));return(0,t.useMemo)(()=>Re?qe&&!ze?re.t("Ready to start {displayName}?",{displayName:(0,m.nr)(st)}):!qe&&!ze?re.t("Ready to start the huddle?",{displayName:st}):qe?re.t("Ready to join {displayName}?",{displayName:(0,m.nr)(st)}):re.t("Ready to join the huddle?",{displayName:(0,m.nr)(st)}):qe?re.t("Ready to join {displayName}?",{displayName:(0,m.nr)(st)}):re.t("Ready to join the huddle?",{displayName:(0,m.nr)(st)}),[Re,qe,st,ze])}c(le,"useGetHuddleJoinPreviewTitle");var Ae=e(6533394955),Te=e(4250409994),Ne=e(1407713935),pe=e(3052395304),Ee=e(1641606663),oe=e(3989454579),ce=e(7138682671),ke=e(2047021170),Ce=e(387484329),Me=e(5203103513);const Se=new m.Ay("huddles"),Ue=t.memo(()=>{const Be=(0,F.wA)(),Ke=(0,f.d4)(be.Rk),Re=!(0,f.d4)(Ie=>(0,ke.ty)(Ie,Me.aI)||!1),Fe=(0,t.useCallback)(()=>{Be((0,Ce.AZ)({pref:Me.aI,value:Re}))},[Be,Re]);return Ke?t.createElement("div",null,t.createElement(ce.A,{text:Se.t("Don\u2019t show this preview again"),type:"inline",cursor:"pointer"},t.createElement(oe.A,{name:"agc",checked:Re,onChange:Fe}))):null});var He=e(2458754542),Ye=e.n(He);const J=new m.Ay("huddles"),ae=t.memo(Be=>{let{channelId:Ke,closeModal:Re,handleJoin:Fe}=Be;const Ie=(0,f.d4)(ee.WR),ze=(0,f.d4)(Ft=>(0,W.OL)(Ft,Ke)),qe=(0,Ne.PC)(ze),st=(0,f.d4)(Ft=>(0,j.Ln)(Ft,{channelId:Ke})),ut=(0,f.d4)(be.Rk),{memberCount:tt}=(0,N.W)({channelId:Ke}),_t=qe||st,yt=(0,pe.q)(Ke),{windowId:Kt,windowRef:Qt}=(0,t.useContext)(Ee.Mn),Jt=yt===Kt;let Gt=!0;_t&&(Gt=(0,q.Wb)(ze)===Ie);const wt=le({isHost:Gt,channelId:Ke}),Bt=(0,t.useCallback)(()=>{if(Re==null||Re(),Jt){var Ft;(Ft=Qt.deref())===null||Ft===void 0||Ft.close()}},[Re,Qt,Jt]),Wt=(0,t.useCallback)(()=>{Re==null||Re()},[Re]),Tn=(0,t.useCallback)(()=>{(0,Ae.dispatchForClientStore)((0,Te._o)({channelId:Ke})),Fe==null||Fe(),Re==null||Re()},[Re,Fe,Ke]),Ot=(0,t.useMemo)(()=>tt===0?J.t("Start huddle"):J.t("Join huddle"),[tt]);return ut?t.createElement(n.A,{onClose:Wt,title:wt,onSubmit:Tn,onCancel:Bt,showCancelButton:!0,submitButtonText:Ot,className:Ye().modal,footerText:t.createElement(Ue,null)},t.createElement(k,{channelId:Ke})):null}),Ve=(0,s.A)(ae)},4869203191:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>g,Gr:()=>y,Lv:()=>_,jc:()=>I,z2:()=>p});var t=e(9706240641),n=e.n(t),s=e(735940183),i=e(2778217221),l=e(8664881451),o=e(2854284421),a=e(2047021170),r=e(5203103513),d=e(6673728906);const u=new s.Ay("huddles"),_="LOUNGE_MUSIC_PLAYER",v=[o.N3,o._4,o.j1,o._V,o.PM,o.tn,o.uu,o.jc];var h;(function(E){E.WaitingRoom="waiting",E.Subway="subway",E.Whistle="whistle",E.Jazz="jazz",E.Focus="focus",E.DiscoParty="disco",E.Zen="zen",E.Nature="nature"})(h||(h={}));const f=h.Jazz,I=c(E=>E?!!Object.values(h).includes(E):!1,"isValidSongKey"),p=c(E=>(0,a.ty)(E,r.Mz)||f,"getSongKeyFromUserPref"),y=c(()=>({[h.WaitingRoom]:{key:h.WaitingRoom,urlName:"waitingRoom",url:o.tn,displayName:u.t("Waiting Room")},[h.Subway]:{key:h.Subway,urlName:"subwayMusic",url:o.PM,displayName:u.t("Subway Music")},[h.Whistle]:{key:h.Whistle,urlName:"whistleTune",url:o.jc,displayName:u.t("Whistle Tune")},[h.Jazz]:{key:h.Jazz,urlName:"waitingMuzak",url:o.uu,displayName:u.t("Smooth Jazz")},[h.Focus]:{key:h.Focus,urlName:"focusBeats",url:o._4,displayName:u.t("Focus Beats")},[h.DiscoParty]:{key:h.DiscoParty,urlName:"discoParty",url:o.N3,displayName:u.t("Happy Bass")},[h.Zen]:{key:h.Zen,urlName:"momentOfZen",url:o.j1,displayName:u.t("Sound Bath")},[h.Nature]:{key:h.Nature,urlName:"natureMeditation",url:o._V,displayName:u.t("Nature Meditation")}}),"getSongsMetadata");let g=c(class To{static getInstance(){return To.instance||(To.instance=new To),To.instance}constructor(){this.getCurrentTrackDisplayName=()=>{const T=v[this.activeTrackIndex],D=y(),C=Object.values(D).find(m=>m.url===T);return C==null?void 0:C.displayName};var M=this;this.playMusic=(0,t.coroutine)(function*(){let{songKey:T,registerOnEndedCallback:D,logger:C,fromFirstTrack:m,loopSong:O}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{registerOnEndedCallback:!1,fromFirstTrack:!0,loopSong:!1};m&&(M.activeTrackIndex=0),D&&v.forEach(B=>{(0,l.TQ)(B,{ended:M.playNextTrack})});let P=v[M.activeTrackIndex];const R=(0,l.Dd)(P);if(T){var L;R&&(0,l.ds)(P);const K=(L=y()[T])===null||L===void 0?void 0:L.url,b=K?v.findIndex(S=>S===K):-1;b>-1&&(P=K,M.activeTrackIndex=b)}const V=(0,d._o)();if(V&&R)try{yield R.setSinkId(V),C==null||C.info(i.o7,`setSinkId success for lounge music on deviceID: ${V}`)}catch{C==null||C.info(i.o7,`setSinkId failed for lounge music on deviceID: ${V}`)}(0,l.ZH)(P,{loop:!!O})}),this.stopMusic=T=>{let{clearOnEndedCallback:D,logger:C,logContext:m}=T;D&&v.forEach(O=>{(0,l.Rj)(O,"ended",this.playNextTrack)}),(0,l.ds)(v[this.activeTrackIndex],{logFailure:!1}),C.info(i.o7,`stopped lounge music [${m}]`)},this.incrementActiveTrackIndex=()=>{this.activeTrackIndex<v.length-1?this.activeTrackIndex+=1:this.activeTrackIndex=0},this.playNextTrack=()=>{(0,l.ds)(v[this.activeTrackIndex]),this.incrementActiveTrackIndex(),(0,l.ZH)(v[this.activeTrackIndex],{loop:!1})},this.activeTrackIndex=0}},"HuddleLoungeMusicManager")},8419239240:(x,A,e)=>{"use strict";e.d(A,{I:()=>l});var t=e(3134334389),n=e(1973246490),s=e(735940183);const i=new s.Ay("huddles");function l(o){let{channelId:a}=o;const{firstMemberName:r,secondMemberName:d,memberCount:u}=(0,n.W)({channelId:a});return(0,t.useMemo)(()=>u===0?i.t("No one is in the huddle yet.",{fallbackHash:"84a5772a945fb7be09c48235d3fbb096591da4c6"}):u===1?i.rt("{firstMemberName} is currently in the huddle.",{firstMemberName:r}):u===2?i.rt("{firstMemberName} and {secondMemberName} are currently in the huddle.",{firstMemberName:r,secondMemberName:d}):i.rt("{firstMemberName}, {secondMemberName}, and {memberCount, plural, =0 {} =1 {1 other} other {# others}} are currently in the huddle.",{fallbackHash:"e851e92374eb17ce86e7497a3ce9a691b8515b61",firstMemberName:r,secondMemberName:d,memberCount:u-2}),[r,d,u])}c(l,"useGetCopyForMembersInHuddle")},1973246490:(x,A,e)=>{"use strict";e.d(A,{W:()=>i});var t=e(2562405183),n=e(9548972574),s=e(3534324375);function i(l){let{channelId:o}=l;const a=(0,t.d4)(_=>(0,n.ft)(_,o)),r=a?a.length:0,d=(0,t.d4)(_=>!a||a.length<1?null:(0,s.sE)(_,a[0])),u=(0,t.d4)(_=>!a||a.length<2?null:(0,s.sE)(_,a[1]));return{firstMemberName:d,secondMemberName:u,memberCount:r}}c(i,"useGetMembersInHuddle")},2164739987:(x,A,e)=>{"use strict";e.d(A,{f:()=>t});function t(n){var s,i;return!(((s=n.topic)===null||s===void 0?void 0:s.value)===""||(n==null||(i=n.topic)===null||i===void 0?void 0:i.value)===void 0)}c(t,"huddleChannelHasTopic")},5011231008:(x,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3134334389),n=e(6122756707),s=e(5255740490),i=e(2562405183),l=e(387328355),o=e(1224315998),a=e(735940183),r=e(1563996154),d=e(9194155027),u=e(440635146),_=e(6084388622),v=e(1049642794),h=e(5043394918),f=e(6251210828),I=e(4745917661),p=e(5169680368),y=e(7723800688),g=e(8683010724),E=e(571104883);const M=new a.Ay("huddles"),T=[u.tc.CmdOrCtrl,"Shift"],D=c(m=>{let{className:O,microphonePermissionDenied:P=!1}=m;const R=(0,n.wA)(),L=(0,i.d4)(ee=>!!(0,l.WQ)(ee,"isMicrophoneEnabled")&&!P),V=(0,y.Ay)(),B=(0,i.d4)(ee=>(0,f.U7)(ee,{key:y.Hi.CANVAS_OPEN})),{microphoneLabel:K,deviceLabel:b,ariaLabel:S}=(0,p.k)(),G=(0,t.useCallback)(()=>{P||R((0,v.A)(!L))},[R,L,P]),H=(0,t.useMemo)(()=>({elementName:y.Hi.CANVAS_TOOLBAR,eventId:L?o.EventId.HUDDLES_MUTE:o.EventId.HUDDLES_UNMUTE,onClick:{enableClogAction:!0},interactionId:B,...V}),[V,B,L]),U=(0,E.cX)()?"Meta":"Control",F=t.createElement(t.Fragment,null,t.createElement(_.Nm,{className:(0,s.A)("c-icon_button","c-icon_button--size_medium","p-huddle_toolbar__button",O,{"p-huddle_toolbar__button--toggled_on":L,"p-huddle_toolbar__mic--disabled":P}),htmlType:"button",onClick:G,autoClogProps:H,"aria-label":S,"aria-describedby":"microphone-info","aria-keyshortcuts":`Space+${U}+Shift`,"aria-pressed":!L,"data-qa":"huddle_video_modal_footer",tabIndex:-1,"aria-disabled":P},t.createElement(h.A,{className:"p-huddle_toolbar__mic_volume_indicator",peerId:"self",isMicrophoneEnabled:L,allowMuteIconAnimation:!0}),P&&t.createElement("div",{className:"p-huddle_toolbar__mic_alert_container"},t.createElement("div",{className:"p-huddle_toolbar__mic_alert"},t.createElement(g.A,{name:"warning",variation:"filled"})))),t.createElement("div",{hidden:!0,id:"microphone-info"},b)),Y=(0,t.useMemo)(()=>{if(P)return M.t("Microphone permission denied",{fallbackHash:"fb28c69013a2f5cff9d5ad4f7c2ca97cb1d14d4a",fallbackHashNs:"huddles_audio_video_prefs"});const ee=t.createElement(I.A,{actionLabel:K,deviceLabel:b});return t.createElement(d.A,{title:ee,mainKey:"Space",modifiers:T})},[b,K,P]);return t.createElement(r.Ay,{tip:Y},F)},"HuddleToolbarMuteButton");D.displayName="HuddleToolbarMuteButton";const C=t.memo(D)},3674485380:(x,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(3134334389),n=e(735940183),s=e(8736071954),i=e(9365970888),l=e(5536692738),o=e(6673728906),a=e(2562405183);const r=new n.Ay("huddles"),d=390,u=278,_=c(h=>{let{deviceType:f,isBlocked:I,widthStyle:p,size:y}=h;const g=(0,t.useMemo)(()=>({[s.lW.Microphone]:r.t("Microphone devices"),[s.lW.Camera]:r.t("Camera devices"),[s.Q4]:r.t("Audio output devices")}),[]),M=(0,a.d4)(i.oG)[f],T=(0,t.useMemo)(()=>I?[{label:r.t("Permission not yet granted"),value:"no_access",type:f}]:M.map(P=>({label:I||!P.label?r.t("Permission not yet granted"):P.label,value:P.id,type:f})),[M,f,I]),D=(0,t.useCallback)(P=>{(0,o.cT)(P.value,f)},[f]);if(!g)return null;const C=T[0],m=g[f];let O;switch(p){case"inline":O=`${d}px`;break;case"default":O=`${u}px`;break;case"stretch":O="100%";break;default:throw new Error(`unhandled type ${p}`)}return t.createElement(l.Ay,{isDisabled:I,ariaLabel:m,selectId:f,options:T,selectedOption:C,width:O,onOptionSelected:D,className:"p-huddle_troubleshooting_panel__device-selector",size:y})},"DeviceSelector");_.displayName="DeviceSelector";const v=_},8801078943:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(2465464861),s=e(3674485380),i=e(735940183),l=e(2562405183),o=e(8736071954);const a=new i.Ay("huddles"),r=c(u=>{let{className:_,selectSize:v="small",cameraPermissionDenied:h=!1}=u;const{isCameraBlocked:f}=(0,l.Z2)(n.FP)||{};return t.createElement("div",{className:_},t.createElement("div",{className:"audio-section"},t.createElement("span",{className:"p-device-label"},a.t("Camera"))),t.createElement(s.A,{deviceType:o.lW.Camera,isBlocked:f||h,widthStyle:"stretch",size:v}))},"Camera");r.displayName="Camera";const d=r},1593595278:(x,A,e)=>{"use strict";e.d(A,{A:()=>f,Y:()=>v});var t=e(3134334389),n=e(5255740490),s=e(2465464861),i=e(3674485380),l=e(735940183),o=e(2562405183),a=e(8736071954),r=e(1337358413),d=e(5671227444),u=e.n(d);const _=new l.Ay("huddles");var v;(function(I){I[I.Default=0]="Default",I[I.Inline=1]="Inline",I[I.Hidden=2]="Hidden"})(v||(v={}));const h=c(I=>{let{className:p,audioMeterLayout:y=v.Default,selectSize:g="small",isEnabled:E=!0,microphonePermissionDenied:M=!1}=I;const{isMicrophoneBluetooth:T}=(0,o.Z2)(s.h)||{},{isMicrophoneBlocked:D}=(0,o.Z2)(s.FP)||{},C=y===v.Default||y===v.Inline;return t.createElement("div",{className:p},t.createElement("div",{className:(0,n.A)("audio-section",{[u().inlineAudioMeterContainer]:y===v.Inline})},t.createElement("span",{className:"p-device-label"},_.t("Microphone")),C&&t.createElement(r.Ay,{initNumBubbles:9,containerClassName:(0,n.A)("p-audio-levels-container",{[u().inlineAudioMeter]:y===v.Inline}),bubbleClassname:"p-audio-bubble",ariaLabel:_.t("Input Level"),isEnabled:E})),t.createElement(i.A,{deviceType:a.lW.Microphone,isBlocked:D||M,widthStyle:"stretch",size:g}),T&&t.createElement("div",{className:"bluetooth-warning"},_.t("Bluetooth can degrade audio quality")))},"Microphone");h.displayName="Microphone";const f=h},9948866681:(x,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(2465464861),l=e(3674485380),o=e(735940183),a=e(2562405183),r=e(8736071954),d=e(2854284421),u=e(6673728906),_=e(8739505998),v=e(571104883);const h=new o.Ay("huddles"),f=c(p=>{let{className:y,selectSize:g="small",showTestSpeaker:E=!1,microphonePermissionDenied:M=!1}=p;const{isSpeakerBluetooth:T}=(0,a.Z2)(i.h)||{},D=(0,s.useRef)(null),C=(0,s.useCallback)((0,t.coroutine)(function*(){if(D.current){const O=(0,u._o)();yield D.current.setSinkId(O),D.current.play()}}),[]);(0,s.useEffect)(()=>(D.current=new Audio(d.pW),()=>{D.current&&(D.current=null)}),[]);const m=M&&!(0,v.y3)();return s.createElement("div",{className:y},s.createElement("div",{className:"audio-section"},s.createElement("span",{className:"p-device-label"},h.t("Speakers")),E&&s.createElement(_.A,{onClick:C},h.t("Test Speaker",{fallbackHash:"d890e6d8efa58744e75a0a5e0017242b538d3aa2",fallbackHashNs:"huddles_audio_video_prefs"}))),s.createElement(l.A,{deviceType:r.Q4,widthStyle:"stretch",size:g,isBlocked:m}),T&&s.createElement("div",{className:"bluetooth-warning"},h.t("Bluetooth can degrade audio quality")))},"Speaker");f.displayName="Speaker";const I=f},124213367:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(9391594207),s=e(3297051565),i=e.n(s),l=e(4979382452),o=e(4636370173),a=e(2465132699),r=e(6308822),d=e(9003400431);const u={className:i().string,closeModal:i().func.isRequired},_={className:void 0};function v(f){return t.createElement(l.A,{className:f.className,closeModal:f.closeModal},t.createElement(o.A,null,t.createElement(a.A,null,t.createElement("div",{className:"c-lazy_modal"},t.createElement(r.A,null)))))}c(v,"LoadingModal"),v.displayName="LoadingModal",v.propTypes=u,v.defaultProps=_;const h=(0,n.N)(null,f=>({closeModal:function(){for(var I=arguments.length,p=new Array(I),y=0;y<I;y++)p[y]=arguments[y];return f((0,d.O)(...p))}}))(v)},79199995:(x,A,e)=>{"use strict";e.d(A,{WJ:()=>d,eW:()=>r,fJ:()=>h,g2:()=>v,kY:()=>u,oE:()=>a});var t=e(4418517660),n=e.n(t),s=e(583204418),i=e(735940183),l=e(6471801899);const o=new i.Ay("lists");var a;(function(f){f.Today="today",f.Yesterday="yesterday",f.Tomorrow="tomorrow",f.ThisWeek="this_week",f.NextWeek="next_week",f.LastWeek="last_week",f.SinceILastViewed="since_i_last_viewed"})(a||(a={}));const r=c(f=>!f.options||f.options.dateFormat===s.cf.Default?l.Wl:f.options.dateFormat,"getDateFormat"),d=c(f=>Object.values(a).includes(f),"isDateFilterOption"),u=c(f=>{switch(f){case a.Today:return o.t("Today");case a.Yesterday:return o.t("Yesterday");case a.Tomorrow:return o.t("Tomorrow");case a.ThisWeek:return o.t("This week");case a.NextWeek:return o.t("Next week");case a.LastWeek:return o.t("Last week");case a.SinceILastViewed:return o.t("Since last time you viewed");default:return f}},"formatDateForMenu"),_=c(f=>{const I=n()(f).startOf("isoWeek"),p=n()(f).endOf("isoWeek"),y=[];let g=I;for(;g<=p;)y.push(g),g=g.clone().add(1,"days");return y},"getWeekdays"),v=c(f=>{let I;switch(f){case a.Today:I=n()().format(l.DX);break;case a.Yesterday:I=n()().subtract(1,"days").format(l.DX);break;case a.Tomorrow:I=n()().add(1,"days").format(l.DX);break;case a.ThisWeek:I=_(n()()).map(p=>p.format(l.DX));break;case a.NextWeek:I=_(n()().add(1,"weeks")).map(p=>p.format(l.DX));break;case a.LastWeek:I=_(n()().subtract(1,"weeks")).map(p=>p.format(l.DX));break;case a.SinceILastViewed:I=n()().format(l.DX);break;default:I=f}return I},"getStaticDateValue"),h=n()().format(l.DX)},3001769570:(x,A,e)=>{"use strict";e.d(A,{Mu:()=>v,OQ:()=>g,PL:()=>r,R8:()=>D,U3:()=>h,UE:()=>p,Ui:()=>y,aI:()=>I,aN:()=>E,bV:()=>f,lx:()=>M,nM:()=>T,rD:()=>u});var t=e(1649982175),n=e(166097325),s=e(7682358855),i=e(8191156954),l=e(4097827290),o=e(735940183);const a=new o.Ay("lists"),r=c((C,m)=>C.indexOf(m)===-1?[...C,m]:C.filter(P=>P!==m),"toggleValueInFilterValues"),d=c(C=>{if(!C.length)return C;const m=C==null?void 0:C.flatMap(P=>P.split("|"));return[...new Set(m)]},"parseUserIdsAndRemoveDupes"),u=c((C,m)=>{const O=[];return Object.values(C??{}).forEach(R=>{if(R.fields&&R.fields[m]){const L=R.fields[m];O.push(L.trim())}}),[s._4,...d(O)]},"getUserIdsInUserColumns"),_=c(C=>{try{return JSON.stringify(C)}catch{return"[]"}},"safeStringify"),v=c((C,m)=>{var O;const P=c(V=>V.map(B=>({...(0,t.A)(B,["columnId"]),ascending:(O=B.ascending)!==null&&O!==void 0?O:!1})),"normalizeSorts"),R=P(C),L=P(m);return(0,n.A)(R,L)},"isLocalAndServerSortEqual"),h=c((C,m)=>{const O=c(L=>L.map(V=>({...(0,t.A)(V,["columnId"]),values:_(V.values||[]),typedValues:_(V.typedValues||[])})),"normalizeFilters"),P=O(C),R=O(m);return(0,n.A)(P,R)},"isLocalAndServerFilterEqual"),f=c((C,m)=>{var O;const P=m.get((O=C.key)!==null&&O!==void 0?O:"");return P?!(0,n.A)(P.operator,C.operator)||!(0,n.A)(new Set(P.values),new Set(C.values)):!0},"isFilterUnsavedOrModified"),I=c(C=>{let m=C;return Boolean(m.find(P=>P.type===i.$.CreatedTime))||(m=[...m,{id:i.$.CreatedTime,name:"Created time",key:i.$.CreatedTime,type:i.$.CreatedTime,isPrimaryColumn:!1}]),m},"appendCreatedTimeDataColumn"),p=c(C=>{switch(C.type){case i.$.Checkbox:case i.$.Completed:case i.$.Message:case i.$.Link:case i.$.TodoCompleted:return[l.t.IsEmpty,l.t.IsNotEmpty];case i.$.Assignee:case i.$.CreatedBy:case i.$.LastEditedBy:case i.$.Rating:case i.$.Select:case i.$.User:case i.$.Text:case i.$.TodoAssignee:return[l.t.Contains,l.t.DoesNotContain,l.t.IsEmpty,l.t.IsNotEmpty];case i.$.Currency:case i.$.Number:case i.$.Date:case i.$.TodoDueDate:return[l.t.Equal,l.t.NotEqual,l.t.LessThan,l.t.GreaterThan,l.t.IsEmpty,l.t.IsNotEmpty];default:return[l.t.Equal,l.t.NotEqual,l.t.IsEmpty,l.t.IsNotEmpty]}},"getOperatorsFromColumn"),y=c(C=>C.type===i.$.Checkbox,"isCheckboxFilter"),g=c(C=>C.type===i.$.Completed||C.type===i.$.TodoCompleted,"isCompletedFilter"),E=c(C=>C===l.t.IsEmpty||C===l.t.IsNotEmpty,"isEmptyOperator"),M=c(C=>C===l.t.IsMe||C===l.t.IsNotMe,"isMeOperator"),T=c(C=>C.type===i.$.Date||C.type===i.$.DueDate||C.type===i.$.CreatedTime||C.type===i.$.LastEditedTime||C.type===i.$.TodoDueDate,"isDateFilter"),D=c((C,m)=>{switch(C){case l.t.IsEmpty:return y(m)?a.t("is not checked"):g(m)?a.t("Not completed"):a.t("is empty");case l.t.IsNotEmpty:return y(m)?a.t("is checked"):g(m)?a.t("Completed"):a.t("is not empty");case l.t.Equal:return T(m)?a.t("is"):a.t("is equal to");case l.t.NotEqual:return T(m)?a.t("is not"):a.t("is not equal to");case l.t.GreaterThan:return T(m)?a.t("is after"):a.t("is greater than");case l.t.LessThan:return T(m)?a.t("is before"):a.t("is less than");case l.t.GreaterThanOrEqual:return a.t("is greater than or equal to");case l.t.LessThanOrEqual:return a.t("is less than or equal to");case l.t.Contains:return a.t("includes");case l.t.DoesNotContain:return a.t("does not include");case l.t.IsMe:return a.t("is me");case l.t.IsNotMe:return a.t("is not me");default:return""}},"getFilterOperatorLabel")},9216332371:(x,A,e)=>{"use strict";e.d(A,{AO:()=>ue,Hs:()=>Q,Jn:()=>T,M1:()=>xe,Nh:()=>ne,Po:()=>b,Q6:()=>G,RO:()=>N,Rw:()=>k,Sb:()=>be,c$:()=>fe,g2:()=>se,iT:()=>Le,kv:()=>U,u1:()=>he,us:()=>j});var t=e(3783723764),n=e(1703559452),s=e(2240330919),i=e(2101927269),l=e(4418517660),o=e.n(l),a=e(7682358855),r=e(79199995),d=e(8191156954),u=e(4097827290),_=e(2647703359),v=e(7334104107),h=e(4919145213),f=e(583204418),I=e(5045557812),p=e(3342113153),y=e(3802883493),g=e(8088280230),E=e(6471801899),M=e(7606781622);const T=c($=>{let{record:W,colKey:q}=$;var re,le,Ae,Te,Ne;if(!(W==null||(re=W.fallback)===null||re===void 0)&&re[q])return W.fallback[q];if(!(W==null||(le=W.fields)===null||le===void 0||(Ae=le.fallback)===null||Ae===void 0)&&Ae[q])return W==null||(Te=W.fields)===null||Te===void 0||(Ne=Te.fallback)===null||Ne===void 0?void 0:Ne[q];if(W[q]){if((0,I.A)(W[q])){var pe,Ee,oe,ce,ke;return(ke=(ce=(oe=(pe=W[q])===null||pe===void 0||(Ee=pe[0])===null||Ee===void 0?void 0:Ee.elements[0])===null||oe===void 0?void 0:oe.elements[0])===null||ce===void 0?void 0:ce.text)!==null&&ke!==void 0?ke:""}return W[q].toString()}return""},"getStringValue"),D=c($=>{const W=o()($).startOf("isoWeek"),q=o()($).endOf("isoWeek"),re=[];let le=W;for(;le<=q;)re.push(le),le=le.clone().add(1,"days");return re},"getWeekdays"),C=c(($,W)=>{const q="YYYY-MM-DD";let re;switch($){case r.oE.Today:re=o()().format(q);break;case r.oE.Yesterday:re=o()().subtract(1,"days").format(q);break;case r.oE.Tomorrow:re=o()().add(1,"days").format(q);break;case r.oE.ThisWeek:re=D(o()()).map(Ae=>Ae.format(q));break;case r.oE.NextWeek:re=D(o()().add(1,"weeks")).map(Ae=>Ae.format(q));break;case r.oE.LastWeek:re=D(o()().subtract(1,"weeks")).map(Ae=>Ae.format(q));break;case r.oE.SinceILastViewed:return re=o().unix(W),re;default:re=o()($,q).format(q)}return Array.isArray(re)?re.map(Ae=>o()(Ae,q)):o()(re,q)},"convertDynamicDateToStatic"),m=c($=>$.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),"normalizeText"),O=c(function($,W,q){let re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const le=re?W:W==null?void 0:W.clone().startOf("day"),Ae=re?q:q==null?void 0:q.clone().startOf("day");switch($){case u.t.NotEqual:return!(le!=null&&le.isSame(Ae));case u.t.GreaterThan:return le==null?void 0:le.isBefore(Ae);case u.t.GreaterThanOrEqual:return le==null?void 0:le.isSameOrBefore(Ae);case u.t.LessThan:return le==null?void 0:le.isAfter(Ae);case u.t.LessThanOrEqual:return le==null?void 0:le.isSameOrAfter(Ae);case u.t.Equal:default:return le==null?void 0:le.isSame(Ae)}},"multiDateOperatorFilterValueCheck"),P=c(($,W,q,re,le)=>{if(!W.values[0])return $;let Ae=q;const Te=W.values[0]===r.oE.SinceILastViewed;return Te&&(Ae=u.t.GreaterThan),$.filter(Ne=>{if(le!=null&&le.has(Ne.id))return!0;const pe=Ne[W.key];let Ee=pe?o()(pe).startOf("day"):void 0;return isNaN(pe)||(Ee=o().unix(pe)),W.values.some(oe=>{if(!oe)return!1;const ce=C(oe.toString(),re);return Array.isArray(ce)?Ae===u.t.NotEqual?!ce.some(ke=>ke&&Ee?ke.clone().startOf("day").isSame(Ee):!1):ce.some(ke=>ke&&Ee?O(Ae,ke,Ee):!1):ce&&Ee?O(Ae,ce,Ee,Te):!1})})},"multiDateFilter"),R=c(($,W,q,re)=>{const le=W.values[0]||"";return $.filter(Ae=>{if(re!=null&&re.has(Ae.id))return!0;const Te=Ae[W.key]||"";switch(q){case u.t.DoesNotContain:return!Te.toLowerCase().includes(le.toString().toLowerCase());case u.t.Contains:default:return Te.toLowerCase().includes(le.toString().toLowerCase())}})},"textFilter"),L=c(($,W,q,re)=>{const le=W.values[0]||"";return $.filter(Ae=>{if(re!=null&&re.has(Ae.id))return!0;const Te=T({record:Ae,colKey:W.key});switch(q){case u.t.DoesNotContain:return!Te.toLowerCase().includes(le.toString().toLowerCase());case u.t.Contains:default:return Te.toLowerCase().includes(le.toString().toLowerCase())}})},"richTextFilter"),V=c(($,W,q,re)=>{if(!W.values.length)return $;var le;const Ae=Number((le=W.values[0])!==null&&le!==void 0?le:"");return $.filter(Te=>{if(re!=null&&re.has(Te.id))return!0;const Ne=Te[W.key],pe=Number(Ne??"");if(Ne!=null)switch(q){case u.t.NotEqual:return pe!==Ae;case u.t.GreaterThan:return pe>Ae;case u.t.GreaterThanOrEqual:return pe>=Ae;case u.t.LessThan:return pe<Ae;case u.t.LessThanOrEqual:return pe<=Ae;case u.t.Equal:default:return pe===Ae}})},"numberFilter"),B=c(($,W,q,re)=>{const le=new Set(W.values);return le.size?$.filter(Ae=>{if(re!=null&&re.has(Ae.id))return!0;var Te;const Ne=String((Te=Ae[W.key])!==null&&Te!==void 0?Te:"");switch(q){case u.t.Contains:return le.has(Ne);case u.t.DoesNotContain:return!le.has(Ne);case u.t.IsEmpty:return Ne===null;case u.t.IsNotEmpty:return Ne!==null;default:return!0}}):$},"multiRatingFilter"),K=c(($,W,q,re,le,Ae)=>{const Te=W.values.map(pe=>pe===a._4&&Ae?Ae:pe),Ne=new Set(Te);return Ne.size?$.filter(pe=>{if(le!=null&&le.has(pe.id))return!0;const Ee=pe[W.key],oe=(Ee??"").split(a.eY).filter(Boolean);let ce=!1;for(const ke of oe){if(Ne.has(ke)){ce=!0;break}if(!re)break}return q===u.t.Equal?ce:q===u.t.NotEqual?!ce:q===u.t.Contains?ce:q===u.t.DoesNotContain?!ce:!0}):$},"multiOptionFilter");function b($){return $===0?!1:!$||Array.isArray($)&&$.length===0}c(b,"isEmptyValue");const S=c(($,W,q,re,le,Ae)=>{let Te=$;return W.forEach(Ne=>{const pe=q.find(ke=>ke.key===Ne.key);if(!pe)return;const Ee=Ne.operator;if(Ee===u.t.IsEmpty){Te=Te.filter(ke=>Ae!=null&&Ae.has(ke.id)?!0:b(ke[Ne.key]));return}if(Ee===u.t.IsNotEmpty){Te=Te.filter(ke=>Ae!=null&&Ae.has(ke.id)?!0:!b(ke[Ne.key]));return}switch(pe.type){case d.$.Text:Te=L(Te,Ne,Ee,Ae);break;case d.$.Email:case d.$.Phone:Te=R(Te,Ne,Ee,Ae);break;case d.$.Number:case d.$.Currency:Te=V(Te,Ne,Ee,Ae);break;case d.$.Rating:Te=B(Te,Ne,Ee,Ae);break;case d.$.Date:case d.$.DueDate:case d.$.TodoDueDate:case d.$.CreatedTime:case d.$.LastEditedTime:Te=P(Te,Ne,Ee,le,Ae);break;case d.$.Checkbox:case d.$.Completed:case d.$.TodoCompleted:case d.$.Link:return;case d.$.Select:var oe;Te=K(Te,Ne,Ee,((oe=pe.options)===null||oe===void 0?void 0:oe.format)===f.YP.MultiSelect,Ae);break;case d.$.Channel:case d.$.Canvas:case d.$.User:case d.$.Assignee:case d.$.TodoAssignee:case d.$.CreatedBy:case d.$.LastEditedBy:switch(Ee){case u.t.IsMe:Te=Te.filter(ke=>{var Ce;return Ae!=null&&Ae.has(ke.id)?!0:(Ce=ke[Ne.key])===null||Ce===void 0?void 0:Ce.includes(re)});break;case u.t.IsNotMe:Te=Te.filter(ke=>{var Ce;return Ae!=null&&Ae.has(ke.id)?!0:!(!((Ce=ke[Ne.key])===null||Ce===void 0)&&Ce.includes(re))});break;default:var ce;Te=K(Te,Ne,Ee,((ce=pe.options)===null||ce===void 0?void 0:ce.format)===f.hx.MultiEntity,Ae,re)}break;default:Te=R(Te,Ne,Ee,Ae);break}}),Te},"applyFiltersToRecords"),G=new Map([[d.$.Text,""],[d.$.Email,""],[d.$.Date,""],[d.$.TodoDueDate,""],[d.$.Checkbox,!1],[d.$.Completed,!1],[d.$.TodoCompleted,!1],[d.$.Number,0],[d.$.Rating,0],[d.$.CreatedTime,0],[d.$.LastEditedTime,0],[d.$.Channel,""],[d.$.User,""],[d.$.TodoAssignee,""],[d.$.CreatedBy,""],[d.$.LastEditedBy,""]]);function H($){if(!Array.isArray($)||$.length===0)return"";const W=c(q=>{for(const re of q){if(re.type==="text"&&re.text)return re.text;if(re.elements&&Array.isArray(re.elements)){const le=W(re.elements);if(le)return le}}return""},"findTextRecursively");for(const q of $)if(q.elements&&Array.isArray(q.elements)){const re=W(q.elements);if(re)return re}return""}c(H,"extractFirstTextElement");const U=c(($,W,q,re)=>{const le=W.map(pe=>pe.ascending?"asc":"desc"),Ae=new Map;for(const pe of q)if(pe.type===d.$.Select){var Te;const Ee=((Te=pe.options)===null||Te===void 0?void 0:Te.choices)||[];for(let oe=0;oe<Ee.length;oe++){const ce=Ee[oe],ke=`${pe.key}:${ce.value}`;Ae.set(ke,oe)}}const Ne=W.map(pe=>Ee=>{const oe=q.find(Ue=>Ue.key===pe.key),ce=pe.ascending;if(!oe)return"";const ke=Ee[pe.key];let Ce=ke??G.get(oe.type||d.$.Text);if(Ce==null&&(Ce=ce?Number.MAX_SAFE_INTEGER:-1/0),oe.type===d.$.Select){var Me;const Ue=(((Me=oe.options)===null||Me===void 0?void 0:Me.choices)||[]).length,He=(ke??"").split(a.eY).filter(Boolean);if(Ue===0||He.length===0)Ce=ce?Number.MAX_SAFE_INTEGER:-1/0;else{let Ye=Ue;for(const J of He){const ae=`${oe.key}:${J}`;var Se;const Ve=(Se=Ae.get(ae))!==null&&Se!==void 0?Se:Ue;Ye=Math.min(Ye,Ve)}Ye<Ue?Ce=Ye:Ce=ce?Number.MAX_SAFE_INTEGER:-1/0}}if((oe.type===d.$.User||oe.type===d.$.TodoAssignee)&&re&&(ke==null||ke===""?Ce=ce?"zzzzzzzz":"":re[ke]?Ce=re[ke].toLowerCase():Ce=ce?"zzzzzzzz":""),oe.type===d.$.Text&&(ke==null||ke===""||Array.isArray(ke)&&ke.length===0?Ce=ce?"zzzzzzzz":"":typeof ke=="string"?Ce=ke.toLowerCase():Ce=H(ke).toLowerCase()),oe.type===d.$.Vote){const Ue=(ke??"").split(a.eY).filter(Boolean);Ue.length>0?Ce=Ue.length:ce?Ce=Number.MAX_SAFE_INTEGER:Ce=-1/0}if((oe.type===d.$.Number||oe.type===d.$.Currency||oe.type===d.$.Rating)&&(ke==null||ke===""?Ce=ce?Number.MAX_SAFE_INTEGER:-1/0:Ce=Number(ke)),oe.type===d.$.Date||oe.type===d.$.DueDate||oe.type===d.$.TodoDueDate||oe.type===d.$.CreatedTime||oe.type===d.$.LastEditedTime){const Ue=new Date(ke);ke==null||ke===""?Ce=ce?Number.MAX_SAFE_INTEGER:-1/0:isNaN(Ue.getTime())||(Ce=Ue.getTime())}return Ce});return(0,t.A)($,Ne,le)},"applySortToRecords"),F=new Set([d.$.Text,d.$.Email,d.$.Phone,d.$.Number,d.$.Rating,d.$.Select,d.$.User,d.$.Channel,d.$.Vote]),Y=c(($,W,q,re,le)=>{const Ae=W.filter(oe=>F.has(oe.type)),Te=new Map;for(const oe of Ae)if(oe.type===d.$.Select){var Ne,pe;const ce=(pe=(Ne=oe.options)===null||Ne===void 0?void 0:Ne.choices)!==null&&pe!==void 0?pe:[];for(const{value:ke,label:Ce}of ce){const Me=`${oe.key}:${ke}`;Te.set(Me,Ce)}}const Ee=q.toLowerCase();return $.filter(oe=>(0,n.A)(Ae,ce=>{const ke=T({record:oe,colKey:ce.key});if(ce.type===d.$.Select){var Ce;let Ye=ke.split(a.eY).filter(Boolean);((Ce=ce.options)===null||Ce===void 0?void 0:Ce.format)===f.YP.MultiSelect||(Ye=Ye.slice(0,1));for(const ae of Ye){const Ve=`${ce.key}:${ae}`;var Me;if(((Me=Te.get(Ve))!==null&&Me!==void 0?Me:ke).toLowerCase().includes(Ee))return!0}}if(ce.type===d.$.Channel&&le){var Se;const Ye=(Se=le[ke])!==null&&Se!==void 0?Se:"";return Ye&&m(Ye).includes(Ee)}if(ce.type===d.$.User&&re){var Ue;const Ye=(Ue=re[ke])!==null&&Ue!==void 0?Ue:"";return Ye&&Ye.toLowerCase().includes(Ee)}if(ce.type===d.$.Vote){const Ye=oe[ce.key],J=typeof Ye=="string"?Ye:void 0;var He;return`${(He=J==null?void 0:J.split("|").length)!==null&&He!==void 0?He:0}`.includes(Ee)}return m(ke).includes(Ee)}))},"applySearchStringToRecords"),Z=c($=>{let{listRecords:W,records:q}=$;return q.map(re=>{const le=W==null?void 0:W[re.id];return{...re,highlightAsNew:le==null?void 0:le.highlightAsNew}})},"applyHighlightAsNew"),ee=c($=>{let{listRecords:W,records:q}=$;return q.map(re=>{const le=W==null?void 0:W[re.id];return{...re,isOpenInFlexpane:le==null?void 0:le.isOpenInFlexpane}})},"applyIsOpenInFlexpane"),j=c($=>{let{listRecords:W,records:q,schema:re,filterObj:le,sorts:Ae,searchString:Te,lastReadTimestamp:Ne,bottomRecordIds:pe,userNames:Ee,channelNames:oe}=$,ce=q;if(le){const{filters:ke,currentUserId:Ce}=le;ce=S(ce,ke,re,Ce,Ne,pe)}return Ae&&(ce=U(ce,Ae,re,Ee)),Te&&(ce=Y(ce,re,Te,Ee,oe)),ce=Z({listRecords:W,records:ce}),ce=ee({listRecords:W,records:ce}),ce},"applyModifiersToRecords");function ge($,W,q){const re=(0,M.Ld)($,W,q);return re&&!(0,h.A)(re)&&!(0,v.aw)(re)&&!(0,v.aH)(re)}c(ge,"isValidMarkedMessageForListThread");function ne($,W,q){return(0,s.A)((0,i.A)(q,re=>ge($,W,re)))}c(ne,"maxRealTsForListThread");function ue($,W,q,re){const le=(0,E.Dv)(re,Object.values(q)),Ae=le.get($==null?void 0:$.id),Te=le.get(W==null?void 0:W.id);let Ne=null,pe=null;if($&&W){if(Ae)Ne=Ae;else{var Ee,oe;Ne=!((Ee=q[$.id])===null||Ee===void 0)&&Ee.position?`${(oe=q[$.id])===null||oe===void 0?void 0:oe.position}`:null}if(Te)pe=Te;else{var ce,ke;pe=!((ce=q[W.id])===null||ce===void 0)&&ce.position?`${(ke=q[W.id])===null||ke===void 0?void 0:ke.position}`:null}}else if($)if(Ae)Ne=Ae;else{var Ce,Me;Ne=!((Ce=q[$.id])===null||Ce===void 0)&&Ce.position?`${(Me=q[$.id])===null||Me===void 0?void 0:Me.position}`:null}else if(W)if(Te)pe=Te;else{var Se,Ue;pe=!((Se=q[W.id])===null||Se===void 0)&&Se.position?`${(Ue=q[W.id])===null||Ue===void 0?void 0:Ue.position}`:null}return(0,y.TU)(Ne,pe)}c(ue,"calculateFractionalRecordPosition");const he=c($=>{var W;const q=(0,g.A)({input:$});return q&&q[0]&&q[0].offset===0&&((W=q[0].url)===null||W===void 0?void 0:W.length)===($==null?void 0:$.length)?[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"link",url:q[0].url||""}]}]}]:[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"text",text:$||""}]}]}]},"convertStringToBlocks"),be=c($=>{if($ instanceof HTMLElement){if($ instanceof HTMLInputElement&&["checkbox","radio"].includes($.type))return!0;if(["input","textarea","select"].includes($.tagName.toLowerCase())||$.isContentEditable)return!1}return!0},"shouldHandleUndoFrom"),xe=c(($,W)=>{const q=[];var re;const le=(re=(0,_.Df)($))!==null&&re!==void 0?re:[],Ae=(0,_.Jq)($).length||(0,_.Si)($);return W.forEach((Te,Ne)=>{const pe=le.some(Me=>(Me==null?void 0:Me.user_id)===(Te==null?void 0:Te.id));var Ee;const oe=(Ee=Te==null?void 0:Te.is_profile_only_user)!==null&&Ee!==void 0?Ee:!1;var ce;const ke=(ce=Te==null?void 0:Te.is_self)!==null&&ce!==void 0?ce:!1;!oe&&!ke&&!pe&&!Ae&&q.push(Ne)}),q},"getRestrictedSelectedTokenIndexes"),Le=c($=>["created_time","created_by","last_edited_time","last_edited_by"].includes($.type),"isMetaColumn"),fe=c(($,W)=>{if(!$)return"";const q=T({record:$,colKey:"name"});if(!q)return"";let re=(0,p.Kx)(q==null?void 0:q.toLowerCase().split(/[ :/-]/).filter(Boolean).join("-"));return re=re.split("-").filter(Boolean).join("-"),W&&!re.startsWith(W)&&(re=`${W}${re}`),re.slice(0,(0,p.zU)())},"generateChannelNameFromRecordName"),se=c(($,W)=>((W==null?void 0:W.editors)||[]).filter(q=>q!==$),"getListRecordChannelInitialInvitedMemberIds"),Q=c(($,W)=>{var q,re;return $?W&&(W.type===d.$.MultiSelect||W.type===d.$.Select&&(W==null||(q=W.options)===null||q===void 0?void 0:q.format)===f.YP.MultiSelect||(W.type===d.$.User||W.type===d.$.Channel||W.type===d.$.Canvas)&&(W==null||(re=W.options)===null||re===void 0?void 0:re.format)===f.hx.MultiEntity)?new Set($.split(a.eY).filter(Boolean)):new Set([$]):new Set},"splitMultiValueField"),k=c($=>$==null?void 0:$.includes("/lists/"),"isListLink"),N=c($=>({key:$.key,operator:$.operator,values:$.values,columnId:$.columnId}),"convertListViewFilterToViewFilter")},2670882607:(x,A,e)=>{"use strict";e.d(A,{e:()=>o});var t=e(3134334389),n=e(5255740490),s=e(2562405183),i=e(6422693406),l=e(2047021170);const o=t.memo(t.forwardRef((a,r)=>{let{getAnimationImport:d,className:u,minHeight:_,svgClassName:v,loadingClassName:h,errorClassName:f,description:I,loop:p=!1,autoplay:y=!1,renderLoading:g,renderError:E,preserveAspectRatio:M}=a;const T=(0,s.d4)(B=>(0,l.ty)(B,"a11y_animations")),[D,C]=(0,t.useState)(!0),[m,O]=(0,t.useState)(!1),P=(0,t.useRef)(null),R=(0,t.useRef)(null),L=(0,t.useRef)(null);L.current||(L.current=i.S.all([e.e("gantry-v2-async-lottie-web").then(e.t.bind(e,221124150,23)),d()]).then(B=>{let[K,b]=B;if(!P.current)throw new Error("Lottie animation missing container");return C(!1),R.current=K.loadAnimation({container:P.current,renderer:"svg",loop:p,autoplay:!!(T&&y),animationData:b,rendererSettings:{className:(0,n.A)("p-lottie__svg",v),description:I,preserveAspectRatio:M}}),i.S.resolve(R.current)}).catch(B=>(O(!0),i.S.reject(B)))),(0,t.useEffect)(()=>()=>{L.current&&L.current.cancel(),R.current&&R.current.destroy()},[L,R]),(0,t.useImperativeHandle)(r,()=>L.current,[L]);const V=(0,t.useMemo)(()=>D&&g?g():m&&E?E():null,[g,E,D,m]);return t.createElement("div",{ref:P,style:_!==void 0?{minHeight:_}:void 0,className:(0,n.A)("p-lottie",u,D&&h,m&&f)},V)}))},5460331959:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(7715417323),s=e(4978843660),i=e(166097325),l=e(6696292586),o=e(6650208157);const a=4;function r(u){let{children:_,fallbackWidth:v=void 0,onResize:h=n.A}=u;const[f,I]=(0,t.useState)({width:0,height:0}),[p,y]=(0,t.useState)(!1),g=(0,t.useRef)([]);function E(T){let{width:D}=T;if(g.current.unshift(D),g.current.length<a)return!1;g.current.length>a&&(g.current.length=a);const C=(0,s.A)(g.current,2);return C.slice(1).every(m=>(0,i.A)(m,C[0]))}c(E,"looksLikeResizeLoop");const M=(0,t.useCallback)(T=>{h(T),I(T.bounds),(0,l.A)(v)&&!p&&y(E(T.bounds))},[v,h,p]);return t.createElement(o.A,{bounds:!0,onResize:M},T=>{let{measureRef:D}=T;return _({...f,width:p&&v?v:f.width,measureRef:D})})}c(r,"Measure"),r.displayName="Measure";const d=r},9446966957:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(1641606663),s=e(8646591923),i=e(7592430824),l=e(3262078016);const a=c(r=>{let{value:d,max:u,tick:_,jump:v,onChange:h,renderContainer:f,renderTrack:I,renderInner:p,onMouseDown:y,onMouseUp:g,"aria-label":E,"aria-valuetext":M,vertical:T,autoFocus:D}=r;const C=(0,t.useRef)(null),{embeddedUiData:m}=(0,t.useContext)(i.N),{windowRef:O}=(0,t.useContext)(n.Mn),P=(0,t.useCallback)(H=>{let{pageX:U,pageY:F}=H;const Y=C.current;if(!Y)return;const Z=Y.getBoundingClientRect(),ee=T?Z.y:Z.x,j=Math.max(0,(T?F:U)-ee),ge=T?Z.height:Z.width,ue=(T?1-Math.min(1,j/ge):Math.min(1,j/ge))*u;h(ue)},[u,h,T]),R=(0,t.useCallback)(H=>{P(H)},[P]),L=(0,t.useCallback)(H=>{var U,F;(U=O.deref())===null||U===void 0||U.document.removeEventListener("mousemove",R),(F=O.deref())===null||F===void 0||F.document.removeEventListener("mouseup",L),g==null||g(H)},[R,g,O]),V=(0,t.useCallback)(H=>{var U,F;H.button!==0||H.ctrlKey||(P(H),H.preventDefault(),(U=O.deref())===null||U===void 0||U.document.addEventListener("mousemove",R),(F=O.deref())===null||F===void 0||F.document.addEventListener("mouseup",L),y==null||y(H))},[R,L,P,y,O]),B=(0,t.useCallback)(H=>{switch(H.which){case s.LE:case s.i7:h(d+(_??1));break;case s.UQ:case s.n6:h(d-(_??1));break;case s.w_:h(d+(v??u*.1));break;case s.dB:h(d-(v??u*.1));break;case s.yZ:h(0);break;case s.Kp:h(u);break;default:return}H.preventDefault()},[d,u,_,v,h]);(0,t.useEffect)(()=>{var H;return C==null||(H=C.current)===null||H===void 0||H.toggleAttribute(l.EmbeddedUIAttributes.NO_DRAG_ON_MOUSE_MOVE,!!m),()=>{var U,F;(U=O.deref())===null||U===void 0||U.document.removeEventListener("mousemove",R),(F=O.deref())===null||F===void 0||F.document.removeEventListener("mouseup",L)}},[m,R,L,O]),(0,t.useEffect)(()=>{D&&C.current&&C.current.focus()},[D]);const K=`${((u>0?d/u:0)*100).toFixed(2)}%`,b=p({style:T?{height:K}:{width:K}}),S=I({children:b,tabIndex:0,role:"slider","aria-label":E,"aria-valuemin":0,"aria-valuemax":u,"aria-valuenow":Math.floor(d),"aria-valuetext":M,onKeyDown:B,ref:C});return f({children:S,onMouseDown:V})},"CustomizableSlider")},3118200703:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(735940183),s=e(2312625946),i=e(6105929840),l=e(7592430824),o=e(1224315998);const a=new n.Ay("stories_av"),r={eventId:o.EventId.BK_USER_INTERACTION,interactionElement:o.InteractionElement.VIDEO,onClick:{enableClogAction:!0,interaction:o.Interaction.EXPAND}};function d(_){let{onClick:v,size:h,classPrefix:f}=_;const{embeddedUiData:I}=(0,t.useContext)(l.N),y=!!I?a.t("View full screen",{fallbackHash:"de8414755b5ff3c3e9f07661b8a127f5e5f57865",fallbackHashNs:"file"}):a.t("Expand",{fallbackHash:"5de840011e47d74fc17266744fc23d99a5f90716"});return t.createElement(s.Ay,{tip:y,position:"top"},t.createElement(i.A,{className:`${f}__controls_overlay_fullscreen`,onClick:v,"aria-label":y,icon:"expand",backgroundStyle:"dark",size:h,autoClogProps:r}))}c(d,"FullscreenButton"),d.displayName="FullscreenButton";const u=d},1942976385:(x,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(3134334389),n=e(6122756707),s=e(5255740490),i=e(2664504268),l=e(735940183),o=e(2602118042),a=e(3391133100),r=e(2562405183),d=e(2047021170),u=e(387484329),_=e(5204962244),v=e(3207321841),h=e(7592430824);const f=new l.Ay("stories_av"),I=c(y=>{let{onSpeedChange:g,isInlinePlayer:E,onMouseEnter:M,onMouseLeave:T,className:D}=y;const C=(0,n.wA)(),[m]=(0,t.useState)({}),O=(0,r.d4)(S=>(0,d.ty)(S,"media_playback_speed")),[P,R]=(0,t.useState)(O||1),{embeddedUiData:L}=(0,t.useContext)(h.N),V=(0,_.d)(()=>`playback-speed-${(0,a.r9)()}`);(0,t.useEffect)(()=>{O&&Object.keys(m).length===0&&O!==P&&R(O)},[m,O,P]);const B=(0,t.useCallback)(S=>{const G=S.value,H=P;R(G);const U=(0,i.A)();m[U]=!0,C((0,u.AZ)({pref:"media_playback_speed",value:G})).finally(()=>{delete m[U]}),g==null||g(G,H)},[C,m,P,g]),K=(0,t.useMemo)(()=>[{label:f.t("Playback speed"),options:v.Cv.map(S=>({label:f.t("{speed}x",{speed:S,fallbackHash:"399e68d4ef7e131fd1ddd396dfb6bcf815269ef4"}),value:S}))}],[]),b=(0,t.useMemo)(()=>{var S;if(!((S=K[0])===null||S===void 0)&&S.options){for(const G of K[0].options)if(G.value===P)return G}return null},[P,K]);return t.createElement(o.A,{options:K,className:(0,s.A)("p-media_controls__control--playback-speed",D,{"p-video_controls_overlay__controls__speed":E}),size:"small",minOptionsListWidth:140,selectedOption:b,onOptionSelected:B,ariaLabel:f.t("Set playback speed: currently {mediaPlaybackSpeed}\xD7",{mediaPlaybackSpeed:P}),onMouseEnter:M,onMouseLeave:T,selectId:V,preventScroll:!!L})},"MediaPlaybackSpeedControl");I.displayName="MediaPlaybackSpeedControl";const p=I},8371678613:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(2562405183),s=e(5602423845),i=e(1224315998),l=e(735940183),o=e(2047021170),a=e(1942976385),r=e(2312625946);const d=new l.Ay("stories_av");function u(v){let{isInlinePlayer:h,videoRef:f,sharedClogProps:I={},className:p}=v;const y=(0,s.A)(),g=(0,n.d4)(M=>(0,o.ty)(M,"media_playback_speed"));(0,t.useEffect)(()=>{var M;f==null||(M=f.current)===null||M===void 0||M.setPlaybackRate(g)},[g,f]);const E=(0,t.useCallback)((M,T)=>{y.track(i.EventId.MEDIA_PLAYER,{...I,contexts:{...I.contexts,ui_context:{ui_step:h?"embedded":"fullscreen",action:"click",ui_properties:{element_type:"button",element_name:"playback_speed"}}},from:`${T??1}x`,to:`${M??1}x`})},[y,I,h]);return t.createElement(r.Ay,{tip:d.t("Playback speed"),position:"top",delay:r.n1},t.createElement(a.A,{onSpeedChange:E,isInlinePlayer:h,className:p}))}c(u,"PlaybackSpeedButton"),u.displayName="PlaybackSpeedButton";const _=u},3242899446:(x,A,e)=>{"use strict";e.d(A,{A:()=>D});var t=e(3134334389),n=e(6122756707),s=e(2562405183),i=e(2047021170),l=e(387484329),o=e(735940183),a=e(5946832122),r=e(2036354333),d=e(1610251172),u=e(2312625946),_=e(9194155027),v=e(5255740490),h=e(3749524846),f=e(9446966957);function I(){return I=Object.assign||function(C){for(var m=1;m<arguments.length;m++){var O=arguments[m];for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(C[P]=O[P])}return C},I.apply(this,arguments)}c(I,"_extends");const p=new o.Ay("stories_av");var y;(function(C){C.Normal="normal",C.Popover="popover",C.Vertical="vertical"})(y||(y={}));const g=c(C=>{let{children:m,volume:O,onChange:P,onMouseDown:R,onMouseUp:L,mode:V=y.Normal,setIsVerticalVolumeActive:B}=C;const K=(0,t.useContext)(h.A),b=(0,t.useCallback)(ee=>{P(Math.round(ee)/100)},[P]),S=(0,t.useCallback)(()=>{B==null||B(!0)},[B]),G=(0,t.useCallback)(()=>{B==null||B(!1)},[B]),H=Math.floor(O*100),U=(0,t.useCallback)(ee=>t.createElement("div",I({className:"p-media_volume_slider__slider"},ee)),[]),F=(0,t.useCallback)(ee=>t.createElement("div",I({className:"p-media_volume_slider__track"},ee)),[]),Y=(0,t.useCallback)(ee=>t.createElement("div",I({className:"p-media_volume_slider__fill"},ee)),[]),Z=t.createElement(f.A,{value:H,max:100,onChange:b,renderContainer:U,renderTrack:F,renderInner:Y,onMouseDown:R,onMouseUp:L,"aria-label":p.t("Volume"),"aria-valuetext":`${H}%`,vertical:V===y.Vertical});return t.createElement("div",{className:(0,v.A)("p-media_volume_slider",{"p-media_volume_slider--keyboard_focus":K,[`p-media_volume_slider--${V}`]:V}),onMouseEnter:V===y.Vertical?S:void 0,onMouseLeave:V===y.Vertical?G:void 0,onFocus:V===y.Vertical?S:void 0,onBlur:V===y.Vertical?G:void 0},t.createElement("div",{className:"p-media_volume_slider__children"},m),t.createElement("div",{className:"p-media_volume_slider__slider_container"},Z))},"MediaVolumeSlider");g.displayName="MediaVolumeSlider";const E=g,M=new o.Ay("stories_av");function T(C){let{isInlinePlayer:m,useVerticalVolume:O,videoRef:P,className:R,backgroundStyle:L,setIsVerticalVolumeActive:V}=C;const B=(0,n.wA)(),K=(0,s.d4)(Le=>(0,i.ty)(Le,"media_muted"));var b;const S=(b=(0,s.d4)(Le=>(0,i.ty)(Le,"media_volume")))!==null&&b!==void 0?b:1,[G,H]=(0,t.useState)(S),U=(0,t.useRef)(!1);(0,t.useEffect)(()=>{var Le;P==null||(Le=P.current)===null||Le===void 0||Le.setMuted(K)},[K,P]),(0,t.useEffect)(()=>{var Le;P==null||(Le=P.current)===null||Le===void 0||Le.setVolume(G)},[P,G]);const F=(0,t.useCallback)(()=>{B((0,l.AZ)({pref:"media_muted",value:!K})),K&&H(S)},[B,K,S]),Y=(0,t.useCallback)(function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G;Le===0?K||B((0,l.AZ)({pref:"media_muted",value:!0})):(K&&B((0,l.AZ)({pref:"media_muted",value:!1})),!U.current&&Le!==S&&B((0,l.AZ)({pref:"media_volume",value:Le})))},[B,G,K,S]),Z=(0,t.useRef)(Y);Z.current=Y;const ee=(0,t.useCallback)(Le=>{H(Le),Z.current(Le)},[]),j=(0,t.useCallback)(()=>{U.current=!0},[]),ge=(0,t.useCallback)(()=>{U.current=!1,Z.current()},[]);(0,t.useEffect)(()=>{U.current||H(S)},[S]);const ne=K?M.t("Unmute"):M.t("Mute"),ue=M.t("Mute");let he="volume-off-alt";K||(G>=.6?he="volume-up":G>=.3?he="volume-medium":he="volume-down");const be=(0,t.useMemo)(()=>t.createElement(_.A,{title:ne,mainKey:M.t("M")}),[ne]);if(m){const Le=t.createElement(u.Ay,{tip:ne,position:O?"bottom":"top",delay:u.n1,hideFromScreenReader:!0},t.createElement(r.A,{className:"p-video_controls_overlay__controls__button p-video_controls_overlay__controls__button--mute","aria-label":ue,"aria-pressed":K,onClick:F},t.createElement(d.A,{type:he,size:"inherit"})));return t.createElement(E,{volume:K?0:G,onChange:ee,onMouseDown:j,onMouseUp:ge,setIsVerticalVolumeActive:V,mode:O?y.Vertical:y.Popover},Le)}const xe=t.createElement(u.Ay,{tip:be,position:"top",delay:u.PK,hideFromScreenReader:!0},t.createElement(a.A,{onClick:F,"aria-label":ue,"aria-pressed":K,icon:he,size:"medium",className:R,backgroundStyle:L||"light"}));return t.createElement(E,{volume:K?0:G,onChange:ee,onMouseDown:j,onMouseUp:ge},xe)}c(T,"ToggleMute"),T.displayName="ToggleMute";const D=T},4250078557:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(735940183),s=e(6422693406),i=e(7937864072);const l="MEDIA-PLAYER";function o(_){const v=(0,i.A)(),[h,f]=(0,t.useState)(!0),[I,p]=(0,t.useState)(),[y,g]=(0,t.useState)();return(0,t.useEffect)(()=>{if(p(void 0),g(void 0),!_){f(!1);return}f(!0);let E;const M=new s.S((T,D,C)=>{const m=new XMLHttpRequest;let O=!1;m.addEventListener("load",()=>{v.info(l,"vtt loaded"),f(!1);const P=m.response;E=URL.createObjectURL(P),p(E),T(m.response),P.text().then(R=>{O||g(R)})}),m.addEventListener("error",()=>{v.warn(l,"error fetching vtt"),f(!1),D(new Error(`VTT load request failed with status ${m.status}`))}),C&&C(()=>{m.abort(),O=!0}),m.responseType="blob",m.withCredentials=!0,m.open("GET",_),m.send(),v.info(l,"fetching vtt")});return()=>{M.isPending()&&M.cancel(),E&&URL.revokeObjectURL(E)}},[v,_]),{vttLoading:h,vttSrc:I,vttText:y}}c(o,"useVtt");const a=o,r=new n.Ay("stories_av");function d(_){let{vtt:v,enableMediaCaptions:h}=_;const{vttSrc:f}=a(v);return!v||!f?null:t.createElement("track",{label:r.t("Captions"),kind:"captions",src:f,default:h})}c(d,"TextTrack"),d.displayName="TextTrack";const u=d},4916948857:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(8800777280);function s(){const[l,o]=(0,t.useState)(!1),a=(0,t.useRef)(),r=(0,t.useRef)(!1),d=(0,t.useRef)(!1),u=(0,t.useCallback)(()=>{clearTimeout(a.current),a.current=setTimeout(()=>{r.current||o(!1)},1300)},[]),_=(0,t.useCallback)(()=>{o(!1),d.current=!1},[]),v=(0,t.useCallback)(()=>{o(!0),d.current=!0,u()},[u]),h=(0,t.useCallback)(()=>{d.current&&(o(!0),u())},[u]),f=(0,t.useCallback)(I=>{const p=(0,n.A)(I.target,y=>(y==null?void 0:y.dataset.preventFade)==="true");r.current=p},[]);return(0,t.useEffect)(()=>()=>clearTimeout(a.current),[]),{mouseIsOverElement:l,onMouseLeave:_,onMouseEnter:v,onMouseMove:h,onMouseOver:f}}c(s,"useDetectMouseOverElement");const i=s},9758574739:(x,A,e)=>{"use strict";e.d(A,{e:()=>T});var t=e(3134334389),n=e(2683115972),s=e(7138682671),i=e(5375115868),l=e(4967176632),o=e(7811786890),a=e(6259241484),r=e(6122756707),d=e(3603672985),u=e(8452232783),_=e(2432967967),v=e(581167618),h=e(8739505998),f=e(1224315998),I=e(4481313819),p=e(3416652175),y=e.n(p);const g={elementName:"dispatch",onClick:{enableClogAction:!0}},E=(0,o.Wz)({notificationName:[o.mw]}),M={picked:"",notificationName:""},T=c(D=>{let{initialValues:C=M,validate:m=E,onCloseModal:O,megaphoneSpaceName:P,notificationList:R}=D;const[L,V]=(0,t.useState)(""),[B,K]=(0,t.useState)(!1),[b,S]=(0,t.useState)(!1),G=(0,r.wA)(),[H,U]=(0,t.useState)(""),F=(0,t.useCallback)(ee=>U(ee),[]),Y=(0,t.useCallback)(()=>{if(!L){K(!0);return}let ee={};if(H.length)try{ee=JSON.parse(H)}catch{S(!0);return}O==null||O(),G((0,d.G0)({spaceName:P,notificationName:L,notificationData:ee})),P===a.xu.LAUNCH_MODAL&&G((0,_.A)())},[L,H,G,P,O]),Z=(0,t.useCallback)((ee,j)=>{V(ee),j("picked",ee),K(!1),S(!1)},[]);return t.createElement(I.A,{eventId:f.EventId.ANALYTICS_EVENT,uiComponentName:f.UiComponentName.MEGAPHONE_DISPATCHER,megaphoneSpaceName:P,clogImpression:!0},t.createElement(l.A,{initialValues:C,validate:m,onSubmit:Y},ee=>{let{isSubmitting:j,values:ge,setFieldValue:ne}=ee;return t.createElement(t.Fragment,null,t.createElement("h2",null,"\u{1F4E3} Megaphone Dispatcher"),"Click the Dispatch button below to instantly render Megaphone Notifications on the UI.",t.createElement("div",{className:y().spaceNameContainer},"Space Name",t.createElement("div",{className:y().spaceName},P)),t.createElement("div",{className:y().notificationName},"Notification Name"),t.createElement("div",{className:y().notificationList},Object.keys(R).sort().map((ue,he)=>t.createElement(s.A,{text:ue,htmlFor:`field-radio-${he}`,type:"inline",cursor:"pointer",key:ue},t.createElement(i.A,{id:`field-radio-${he}`,name:"picked",value:ue,checked:ge.picked===ue,onChange:()=>Z(ue,ne)})))),t.createElement(s.A,{text:"Notification Data",optional:!0},t.createElement(u.A,{name:"notification_data",id:"notification_data",placeholder:'Ex: { "Field Name": "<String Value>", "Field Name": <Numeric Value> }',onChange:F,value:H,className:y().textArea})),t.createElement("div",{className:y().alert},t.createElement(v.Ay,{type:"boxed",level:"warning",icon:"warning",align:"left"},t.createElement("span",{className:y().alertText},t.createElement("b",null,"Some Megaphone notifications may not be dispatched due to various reasons, such as but not limited to:"),t.createElement("li",null," Missing notification data "),t.createElement("li",null,"The notification being part of an experiment "),"For questions or further assistance, reach out to us at"," ",t.createElement("b",null,t.createElement(h.A,{href:"https://app.slack.com/client/E12KS1G65/C0765PUTPDL",target:"_blank"},"#proj-megaphone-dispatcher")),"."))),B&&t.createElement("div",{className:y().formError},"Please select a notification."),b&&t.createElement("div",{className:y().formError},"There was an error parsing Notification Data, please try again."),t.createElement(n.Ay,{autoClogProps:g,onClick:Y,disabled:j},"Dispatch"))}))},"DispatcherForm");T.displayName="DispatcherForm"},4445888975:(x,A,e)=>{"use strict";e.d(A,{R:()=>a,h:()=>r});var t=e(3134334389),n=e(6122756707),s=e(2562405183),i=e(3603672985),l=e(716227588),o=e(4724591729);const a=c(()=>{const d=!(0,o.KV)()||(0,o.b3)(),u=(0,n.wA)(),_=(0,s.d4)(l.y$);return(0,t.useEffect)(()=>{const v=c(h=>{d&&h.ctrlKey&&h.shiftKey&&h.key==="M"&&u((0,i.cv)(!_))},"handleKeydown");return window.addEventListener("keydown",v),()=>{window.removeEventListener("keydown",v)}},[d,u,_]),{shouldShowDispatcherViewer:_}},"useDispatcherToggleShortcut"),r=c(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const[u,_]=(0,t.useState)(d),v=(0,t.useCallback)(h=>{_(h)},[]);return{isModalOpen:u,toggleModal:v}},"useModal")},5062503310:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});const t={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",border:0,padding:0,background:"transparent"},overlay:{backgroundColor:"rgba(208, 208, 208, 0.4)",zIndex:1e4}}},4902318931:(x,A,e)=>{"use strict";e.d(A,{$W:()=>b,sl:()=>G,Ay:()=>H});var t=e(3134334389),n=e(6122756707),s=e(2562405183),i=e(716227588),l=e(6259241484),o=e(7487228876),a=e(7003004874),r=e(1655938719),d=e(2938177083),u=e(101973425),_=e(4481313819),v=e(2567914105),h=e(3603672985),f=e(9881565722),I=e(4761125736),p=e(4798756512),y=e(4003148341),g=e(4244379358),E=e(6258289677),M=e(9758574739),T=e(2312625946),D=e(4445888975),C=e(5062503310),m=e(397939223),O=e.n(m);const P=c(U=>{let{megaphoneSpaceName:F,notificationList:Y}=U;const{isModalOpen:Z,toggleModal:ee}=(0,D.h)(!1);return t.createElement("div",{className:O().container},t.createElement(T.Ay,{tip:F,position:"top",zIndex:"menu_above_fs"},t.createElement("span",{className:O().dispatcherViewerIcon,role:"button",tabIndex:0,"aria-label":"Open Viewer Modal",onClick:()=>ee(!0)})),t.createElement(E.A,{isOpen:Z,onRequestClose:()=>ee(!1),style:C.A},t.createElement("div",{className:O().dispatcherViewerDetails},t.createElement(M.e,{megaphoneSpaceName:F,notificationList:Y,onCloseModal:()=>ee(!1)}))))},"DispatcherViewer");P.displayName="DispatcherViewer";const R=(0,g.A)(P),L=c(U=>{let{children:F,megaphoneSpaceName:Y,notificationList:Z}=U;const{shouldShowDispatcherViewer:ee}=(0,D.R)();return t.createElement(t.Fragment,null,ee&&t.createElement("div",{className:O().dispatcherViewer},t.createElement(R,{megaphoneSpaceName:Y,notificationList:Z})),F)},"DispatcherToggle");L.displayName="DispatcherToggle";const V=(0,g.A)(L),B={isInMegaphoneContainerContext:!0},K={isInMegaphoneContainerContext:!1},b=(0,t.createContext)(K),S=c(U=>{let{fetchDataOnMount:F,notifications:Y,spaceName:Z,children:ee,shouldAlwaysRenderChildren:j,shouldPassPropsToChildren:ge,channelScopedId:ne,componentClassName:ue,...he}=U;var be;const xe=(0,n.wA)(),Le=(0,y.x)(),fe=(0,s.d4)(v.oY),se=(0,s.d4)(i.up),Q=(0,s.d4)(Ne=>(0,I._Z)(Ne,"megaphone_coachmark_suppression")==="on"),{isInsideModal:k}=(0,f.k)(),N=(0,s.d4)(Ne=>(0,i.Hp)(Ne,Z,ne)),$=(0,s.d4)(Ne=>(0,i.OL)(Ne,Z,ne)),W=(0,t.useCallback)(()=>{xe((0,a.A)({notificationName:N,action:l.hw.IMPRESSION}))},[xe,N]),q=(0,t.useCallback)(Ne=>{xe((0,d.A)({spaceName:Z,action:Ne}))},[xe,Z]),re=(0,t.useCallback)(()=>{xe((0,r.iR)({event:{type:l.jo.REQUEST_SPACES,spaces:[Z]}}))},[xe,Z]),le=c(()=>j?ge&&t.isValidElement(ee)?t.cloneElement(ee,{...he}):t.createElement(V,{megaphoneSpaceName:Z,notificationList:Y},ee):t.createElement(V,{megaphoneSpaceName:Z,notificationList:Y},null),"maybeRenderChildren");le.displayName="maybeRenderChildren",(0,t.useEffect)(()=>{Z&&F&&re()},[F,Z,re]);const Ae=Y==null||(be=Y[N])===null||be===void 0?void 0:be.component,Te=Q&&Ae&&!k&&fe&&Z===l.xu.IN_PRODUCT_COACHMARK;if(Te&&!se){xe((0,h.co)(!0));const Ne=Le.createMetricsTrace({label:"megaphone",samplingOptions:{sampleType:p.tS.SESSION,sampleRate:.1}}),pe=Ne.count({name:"megaphone_coachmark_suppress"});pe.addTags({notification:N}),pe.close(),Le.reportTrace(Ne)}return!Z||!N||Q&&Z===l.xu.IN_PRODUCT_COACHMARK&&se||Te?le():Ae?t.createElement(_.A,{megaphoneSpaceName:Z,megaphoneNotificationName:N},t.createElement(b.Provider,{value:B},t.createElement(V,{megaphoneSpaceName:Z,notificationList:Y},null),t.createElement(t.Suspense,{fallback:null},t.createElement(Ae,{...$,recordNotificationEventImpression:W,recordAndClearNotificationEvent:q,notificationName:N,className:ue,channelScopedId:ne,...he},ee)))):(Y||(0,o.h)({spaceName:Z,notificationName:N}),le())},"MegaphoneContainer");S.displayName="MegaphoneContainer";const G=(0,u.Ay)(S),H=S},3656161791:(x,A,e)=>{"use strict";e.d(A,{C:()=>t});const t={showStrangerProfile:!1,hideRestriction:!0,maybeShowPresenceIndicator:!1,maybeShowTitle:!1,maybeShowVerifiedFooter:!0,maybeShowEmailField:{showLabel:!1,showValue:!0},showFullProfileLink:!1,showOrganizationField:{showLabel:!0,showValue:!0},showProfilePicture:!0,showMemberProfileFields:!1,showMemberProfileButtons:!1}},9887985562:(x,A,e)=>{"use strict";e.d(A,{V:()=>n});var t=e(3134334389);class n extends t.PureComponent{render(){return t.createElement(t.Fragment,null,this.props.children)}}c(n,"PassThrough"),n.displayName="PassThrough"},8950789382:(x,A,e)=>{"use strict";e.d(A,{s:()=>g});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(352142497),l=e(82287009),o=e(8999545852),a=e(3193155968),r=e(9938554271),d=e(3110884894),u=e(6514066170),_=e(755982243),v=e(796111729),h=e(485355941),f=e(6695353875),I=e(9932860381),p=e(7176966205),y=e(9629572172);const g=(0,s.Ay)("Opens a view in a new child window",function(){var E=(0,t.coroutine)(function*(M,T,D,C){let{viewId:m,params:O,clogParams:P}=D;if(!(0,h.M2)())return;const R=T(),{isMainWindow:L}=C(y.U);if((0,f.yZ)(R)&&L&&(0,I.Xy)(m)){M((0,p.$)({viewId:m,params:O}));return}let V=!1;if((0,u.A)(R,m)){let B,K={[a.mq.Primary]:{id:m,params:O,viewType:(0,r.A)(m)}};K=M((0,o.VO)({viewSet:K,windowId:a.N2}));const b=(0,_.w)(m),S=b;if(m==="thread"&&(O!=null&&O.threadId)){const G=(0,d.Sb)(O==null?void 0:O.threadId).channelId;V=!0,K={[a.mq.Primary]:{id:G||(O==null?void 0:O.entityId),params:void 0,viewType:i.D.Channel},[a.mq.Secondary]:{id:m,params:O,viewType:i.D.Thread}},B=a.mq.Secondary}m==="channel_canvas"&&(K={[a.mq.Primary]:{id:O==null?void 0:O.channelId,params:void 0,viewType:i.D.Channel},[a.mq.Secondary]:{id:"channel_canvas",params:O,viewType:i.D.ChannelCanvas}}),M((0,l.Bb)({viewSet:K,shouldNavigateInContext:b,shouldShowSearch:S,...B&&{containerOrigin:B},clogParams:P??{uiComponentName:origin,entryPoint:"cmd_click"},forceSingleColumnMode:V}))}else(0,v.Ay)({getState:T}).action("CHILD-WINDOWS","skipped opening a Conversation View because the ID is not supported:",m)});return function(M,T,D,C){return E.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkmaybeOpenInWindow",description:"Opens a view in a new child window"}},3652828077:(x,A,e)=>{"use strict";e.d(A,{O:()=>d});var t=e(3134334389),n=e(2844658640),s=e.n(n),i=e(1641606663),l=e(2233780559);function o(){return o=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},o.apply(this,arguments)}c(o,"_extends");const a=(0,l.eF)(l.vt.REACT_VIRTUALIZED,u=>s()(u));function r(u){let{refToForward:_,...v}=u;const{windowRef:h}=(0,t.useContext)(i.Mn),f=a(h.deref()).List;return t.createElement(f,o({ref:_},v))}c(r,"PortableReactVirtualizedList"),r.displayName="PortableReactVirtualizedList";const d=t.forwardRef((u,_)=>t.createElement(r,o({refToForward:_},u)))},7439773700:(x,A,e)=>{"use strict";e.d(A,{C_:()=>u,MH:()=>v,Zj:()=>f,ik:()=>I,kh:()=>o,tl:()=>d,tw:()=>_,vu:()=>h,xu:()=>p});var t=e(3564619745),n=e(735940183),s=e(9421999304);const i=new n.Ay("prefs"),l=c(function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,s.JK)();return t.nW[y]},"getLocaleSpecificDefaults"),o=c(function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,s.JK)();return{default:!0,fontFamily:l(y),label:t.qH,value:"lato"}},"getDefaultFontOption"),a=c(()=>{const y=i.t("{font} (Default)",{font:"Lato"}),g=i.t("{font} (System)",{font:t.qL}),E=t.qL?{label:g,value:"system-font",fontFamily:t.fd}:void 0,M=[{...o(),label:y},t.xw,t.ew,t.Ig,t.k7,t.zZ,t.Z2,t.qS];return E?M.concat([E]):M},"getSupportedFontOptions"),r={default:!1,label:"Custom Font",value:"custom-font"},d=c(y=>{let{includeCustomFont:g}=y;const E=a();return g?E.concat([r]):E},"getAllFontOptions"),u=c(y=>{let{customFont:g,locale:E}=y;const M=E||(0,s.JK)(),T=l(M);return{...r,fontFamily:`${g} , ${T}`}},"getCustomFontOption"),_=c(y=>y.slice().sort((g,E)=>{var M,T;return((M=g==null?void 0:g.label)!==null&&M!==void 0?M:"")<((T=E==null?void 0:E.label)!==null&&T!==void 0?T:"")?-1:1}),"sortFonts"),v=c(y=>Object.values(t.xo).some(g=>g.includes(y.toLowerCase())),"isSupportedFont"),h=c(y=>y.default===!0,"isDefaultFont"),f=c(y=>Object.keys(t.xo).find(g=>t.xo[g].includes(y.toLowerCase())),"getSupportedFontValue"),I=c(y=>{let{fontValue:g,includeCustomFont:E}=y;var M;return(M=d({includeCustomFont:E}).find(T=>T.value===g))!==null&&M!==void 0?M:void 0},"getFontOptionForFontValue"),p=c(y=>!t.hb.includes(y),"isCustomTypefaceSupportedLocale")},4173072539:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(6839188756),s=e(5743225531),i=e(2312625946),l=e(6968387112);const o=c(r=>{let{invitingTeam:d}=r;const u=d.domain&&`${(0,n.k7)(d.id,d.domain)}.${(0,l.Xk)()}`,_=t.createElement(s.A,{id:d.id,team:d,shouldMaybeOpenOrgCard:!0,shouldMaybeShowVerified:!0,bold:!0,tabIndex:u?0:void 0});return u?t.createElement(i.Ay,{tip:u},t.createElement("span",null,_)):_},"InvitingTeamName");o.displayName="InvitingTeamName";const a=o},3694049677:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(9574544148),s=e(2312625946);const i=c(o=>{let{invitingUser:a,showEmailTooltip:r=!0}=o;var d;const u=a==null||(d=a.profile)===null||d===void 0?void 0:d.email,_=r&&u,v=t.createElement(n.A,{member:a,skipPrefCompliance:!0,tabIndex:_?0:void 0});return _?t.createElement(s.Ay,{tip:u},v):v},"InvitingUserName");i.displayName="InvitingUserName";const l=i},2408732225:(x,A,e)=>{"use strict";e.d(A,{n:()=>d});var t=e(3134334389),n=e(3656161791),s=e(4775127335),i=e(698013937),l=e(6415587347);let o=null;const r=c(()=>(o===null&&(o=document&&document.documentElement&&document.documentElement.hasAttribute("data-primer")),o),"isPrimer");class d extends t.PureComponent{render(){var _,v;const{className:h,team:f,user:I,size:p,allowDefaultProfileImage:y,fallbackUserIcon:g,fallbackUserIcon2x:E,isInteractive:M,hideUserIcon:T}=this.props,D=!!(!((_=I.profile)===null||_===void 0)&&_.is_custom_image),C=!!g||!!E,m=!(!((v=f.icon)===null||v===void 0)&&v.image_default),{imageUrl:O,imageUrl2x:P}=this.getProfileImages();if((D||y||C)&&!T){const R=I.profile.real_name;return t.createElement(s.f1,{className:h,imageUrl:D||y?O:g,imageUrl2x:D||y?P:E,memberOrBotName:R,size:p,teamId:f.id,team:f,isInteractive:M&&!r()&&!!I.id,renderCustomBadge:this.renderTeamBadge,showCard:!0,userId:I.id,profileCardProps:{allowOutsideOfSonic:!0,maybeAllowInteract:!1,...n.C}})}return m?t.createElement(i.U,{teamName:f.name,icon:f.icon,size:p,className:h}):null}constructor(_){super(_),this.renderTeamBadge=()=>null,this.getProfileImages=()=>{var p;const{team:y,user:g,size:E}=this.props,M=(0,l.Ay)({size:E,teamOrEnterpriseId:y.id,memberId:g.id,avatarHash:(p=g.profile)===null||p===void 0?void 0:p.avatar_hash}),T=(M==null?void 0:M.imageUrl)||"",D=M!=null&&M.imageUrl2x?`${M.imageUrl2x} 2x`:"";return{imageUrl:T,imageUrl2x:D}};const{team:v,allowTeamInitials:h,shouldRenderTeamBadge:f,teamIconSize:I}=_;f&&(this.renderTeamBadge=(0,s.fp)({isExternal:!0,team:v,teamId:v.id,allowTeamInitials:h,teamIconSize:I}))}}c(d,"UserIcon"),d.displayName="UserIcon",d.defaultProps={shouldRenderTeamBadge:!1,allowTeamInitials:!1,allowDefaultProfileImage:!1,className:"p-shared_channel_invite_header__avatar",isInteractive:!0,hideUserIcon:!1}},7599421656:(x,A,e)=>{"use strict";e.d(A,{B:()=>s});var t=e(2384831516),n=e(4761125736);const s=(0,t.Mz)(i=>(0,n._Z)(i,"shortcuts_workspace_picker")==="on");s.meta={name:"createSelector",key:"createSelectorshouldShowShortcutsSpeedbump",description:i=>(0,n._Z)(i,"shortcuts_workspace_picker")==="on"}},9874616273:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(8214116048);const s=c(l=>{let{width:o=20,height:a=20,className:r="",theme:d}=l;const u=d===n.Sx.Dark?"/img/slack_logo_white_text.svg":"/img/slack_logo.svg";return t.createElement("div",{role:"banner"},t.createElement("img",{className:r,src:u,alt:"Slack",width:o,height:a}))},"SlackLogo");s.displayName="SlackLogo";const i=s},6989432693:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(2562405183),s=e(8276911661),i=e(8921478798),l=e(8170643398),o=e(735940183),a=e(7576317051);const r=new o.Ay("channel_token"),d=c(_=>{let{userId:v,isFirst:h,isSelf:f}=_;var I;const p=(I=(0,n.d4)(g=>(0,s.nv)(g,v)))!==null&&I!==void 0?I:void 0;let y=(0,n.d4)(g=>(0,i.I)(g,v));return(0,l.t8)(p)?t.createElement(a.A,{type:"unknown",subtler:!0}):(0,l.QR)(p)?t.createElement(a.A,{type:"non-existent",subtler:!0}):(f&&(y=h?r.t("You"):r.t("you")),t.createElement(t.Fragment,null,y))},"TooltipMemberName");d.displayName="TooltipMemberName";const u=t.memo(d)},5139044823:(x,A,e)=>{"use strict";e.d(A,{Ab:()=>s,Rk:()=>n,T6:()=>t,Uy:()=>i});var t;(function(l){l.ListItem="list_item",l.NewTask="new_task",l.CompletedHeader="completed_header",l.GroupHeader="group_header",l.RefineHeader="refine_header"})(t||(t={}));var n;(function(l){l.ListItem="list_item",l.CompletedHeader="completed_header",l.RefineHeader="refine_header",l.EmptyState="empty_state"})(n||(n={}));var s;(function(l){l.All="all",l.Open="open",l.Completed="completed"})(s||(s={}));var i;(function(l){l.RecentlyAssigned="recently_assigned",l.DueDate="due_date",l.RecentlyUpdated="recently_updated"})(i||(i={}))},2806459763:(x,A,e)=>{"use strict";e.d(A,{HY:()=>o,No:()=>i,Vr:()=>_,cp:()=>v,fw:()=>l,gk:()=>u,nr:()=>h,qC:()=>r,sD:()=>d,zm:()=>a});var t=e(5139044823),n=e(8191156954),s=e(583204418);const i=c(f=>!!f&&"message"in f,"isMessageReference"),l=c(f=>!!f&&"message"in f,"isMessageReferenceApi"),o=c(f=>!!f&&"list_record"in f,"isListRecordReferenceApi"),a=c(f=>{var I;return f.type===n.$.Select&&((I=f.options)===null||I===void 0?void 0:I.format)!==s.YP.MultiSelect},"isSingleSelectField"),r=c(f=>{if(i(f)){const p=f.message;return p.threadTs?`message-${p.channelId}-${p.ts}-${p.threadTs}`:`message-${p.channelId}-${p.ts}`}const I=f==null?void 0:f.listRecord;return I?`list_record-${I.listId}-${I.rowId}`:""},"makeReferenceTrackerStoreKey"),d=c(f=>{if(l(f)){const p=f.message;return p.thread_ts?`message-${p.channel_id}-${p.ts}-${p.thread_ts}`:`message-${p.channel_id}-${p.ts}`}const I=f==null?void 0:f.list_record;return I?`list_record-${I.list_id}-${I.row_id}`:""},"makeReferenceApiTrackerStoreKey"),u=c(f=>{var I;return!!(!(f==null||(I=f.fields)===null||I===void 0)&&I.todo_completed)},"isMyTaskItemCompleted"),_=c(f=>l(f)?{message:{channelId:f.message.channel_id,ts:f.message.ts,threadTs:f.message.thread_ts}}:{listRecord:{listId:f.list_record.list_id,rowId:f.list_record.row_id}},"convertReferenceApiToReference"),v=c(f=>{let{rowId:I}=f;return I===t.T6.NewTask||I.endsWith(`---${t.T6.NewTask}`)},"isNewTaskRow"),h=c(f=>{let{groupKey:I}=f;return`${I}---${t.T6.NewTask}`},"createNewTaskRowId")},924300050:(x,A,e)=>{"use strict";e.d(A,{A:()=>Ue});var t=e(3134334389),n=e(980293773),s=e(6820844347),i=e.n(s),l=e(5006029593),o=e.n(l),a=e(7749140866),r=e.n(a),d=e(7626894131),u=e.n(d),_=e(29804293),v=e.n(_),h=e(6636363964),f=e.n(h),I=e(5913806097),p=e.n(I),y=e(9916635837),g=e.n(y),E=e(555040584),M=e.n(E),T=e(8187362417),D=e.n(T),C=e(2005200212),m=e.n(C),O=e(2563333228),P=e.n(O),R=e(5760619139),L=e.n(R),V=e(668694090),B=e.n(V),K=e(6754250580),b=e.n(K),S=e(1714394002),G=e.n(S),H=e(6435768457),U=e.n(H),F=e(7417918922),Y=e.n(F),Z=e(6869712815),ee=e.n(Z),j=e(8089589194),ge=e.n(j),ne=e(5748605292),ue=e.n(ne),he=e(4071181961),be=e.n(he),xe=e(8071475775),Le=e.n(xe),fe=e(9733499682),se=e.n(fe),Q=e(9753292423),k=e.n(Q),N=e(3289703835),$=e.n(N),W=e(1347747715),q=e.n(W),re=e(6050136004),le=e.n(re),Ae=e(7949425452),Te=e(2683115972),Ne=e(5220162857),pe=e(4931940375),Ee=e(1388835426),oe=e(2664504268),ce=e(9598582073),ke=e.n(ce);function Ce(){return Ce=Object.assign||function(He){for(var Ye=1;Ye<arguments.length;Ye++){var J=arguments[Ye];for(var ae in J)Object.prototype.hasOwnProperty.call(J,ae)&&(He[ae]=J[ae])}return He},Ce.apply(this,arguments)}c(Ce,"_extends");const Me={elementName:"explore_pro_features_btn",onClick:{enableClogAction:!0}},Se=c(He=>{let{featureList:Ye,modalTitle:J,modalSubtitle:ae,buttonText:Ve,onCTAClick:Be,customFooter:Ke,maxWidth:Re,onRequestClose:Fe,UNSAFE_parentSelector:Ie,videoTitle:ze,experimentPnpGoGroupTreatment:qe}=He;const st=c(()=>t.createElement(Ne.Ay,{listItems:Ye}),"renderFeatureList"),ut={closeModal:Fe,shouldCloseOnOverlayClick:!0,centered:!0,maxWidth:Re,UNSAFE_parentSelector:Ie},{translation:tt,enableMediaCaptions:_t}=(0,Ee.S)({"de-DE":qe?u():b(),"en-GB":qe?v():G(),"en-US":qe?r():U(),"es-ES":qe?p():Y(),"es-LA":qe?f():ee(),"fr-FR":qe?g():ge(),"it-IT":qe?L():ue(),"ja-JP":qe?B():be(),"ko-KR":qe?M():Le(),"pt-BR":qe?D():se(),"zh-CN":qe?m():k(),"zh-TW":qe?P():$()}),yt=(0,oe.A)(),Kt=(0,oe.A)(),Qt=[yt,Kt].join(" "),Jt=(0,t.useMemo)(()=>{let Gt=o(),wt=le();return qe&&(Gt=i(),wt=q()),{video:Gt,videoPoster:wt}},[qe]);return t.createElement(n.dW,Ce({closeButtonTone:"dark",className:ke().modalBackground,labelledby:Qt},ut),t.createElement(n.$m,{className:ke().modalBackground},t.createElement("div",{className:ke().bodyContainer},t.createElement("div",{className:ke().listContainer},t.createElement(Ae.Ay,{ariaHidden:!0,className:ke().proBadge,size:Ae.vj.Large}),t.createElement("h1",{id:yt,className:ke().title},J),t.createElement("h2",{id:Kt,className:ke().subtitle},ae),st(),Ke||t.createElement(Te.Ay,{size:"medium",onClick:Be,className:ke().ctaButton,autoClogProps:Me},Ve)),t.createElement("div",{className:ke().videoContainer},t.createElement("div",{className:ke().videoPlayer},t.createElement(pe.A,{src:Jt.video,vtt:tt,enableMediaCaptions:_t,videoPoster:Jt.videoPoster,enableControls:!0,autoPlay:!1,title:ze}))))))},"Modal");Se.displayName="Modal";const Ue=Se},5220162857:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>U,CQ:()=>b,L_:()=>S,XC:()=>R,wj:()=>L});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(5255740490),l=e(7260399618),o=e.n(l),a=e(3555024406),r=e.n(a),d=e(6362113145),u=e.n(d),_=e(5612399517),v=e.n(_),h=e(9754713110),f=e.n(h),I=e(8644018899),p=e.n(I),y=e(8720577475),g=e.n(y),E=e(735940183),M=e(8683010724),T=e(3801841745),D=e(2689960678),C=e(9421999304),m=e(6696573656),O=e.n(m);const P=new E.Ay("trial_expiration_modals"),R={history:f(),headphones:u(),canvas:r(),buildings:p(),bolt:o(),play:o(),tools:g(),lists:v(),"shared-channel":""},L={history:()=>{switch((0,C.JK)()){case"de-DE":return e.e("gantry-v2-async-lottie-trial-modal-messages.json").then(e.t.bind(e,3828726715,23));case"en-GB":return e.e("gantry-v2-async-lottie-trial-modal-messages.json").then(e.t.bind(e,4311997919,23));case"fr-FR":return e.e("gantry-v2-async-lottie-trial-modal-messages.json").then(e.t.bind(e,8274489555,23));case"ja-JP":return e.e("gantry-v2-async-lottie-trial-modal-messages.json").then(e.t.bind(e,1968927099,23));case"en-US":default:return e.e("gantry-v2-async-lottie-trial-modal-messages.json").then(e.t.bind(e,4244940908,23))}},headphones:()=>e.e("gantry-v2-async-lottie-trial-modal-huddles.json").then(e.t.bind(e,3020879619,23)),canvas:()=>e.e("gantry-v2-async-lottie-trial-modal-canvas.json").then(e.t.bind(e,5417726912,23)),buildings:()=>{switch((0,C.JK)()){case"de-DE":return e.e("gantry-v2-async-lottie-trial-modal-slack-connect.json").then(e.t.bind(e,6800060962,23));case"en-GB":return e.e("gantry-v2-async-lottie-trial-modal-slack-connect.json").then(e.t.bind(e,5190658834,23));case"fr-FR":return e.e("gantry-v2-async-lottie-trial-modal-slack-connect.json").then(e.t.bind(e,647591414,23));case"ja-JP":return e.e("gantry-v2-async-lottie-trial-modal-slack-connect.json").then(e.t.bind(e,9297924654,23));case"en-US":default:return e.e("gantry-v2-async-lottie-trial-modal-slack-connect.json").then(e.t.bind(e,6342268209,23))}},play:()=>e.e("gantry-v2-async-lottie-trial-modal-apps.json").then(e.t.bind(e,9702269844,23)),bolt:()=>e.e("gantry-v2-async-lottie-trial-modal-apps.json").then(e.t.bind(e,9702269844,23)),tools:()=>e.e("gantry-v2-async-lottie-trial-modal-templates.json").then(e.t.bind(e,8131963541,23)),"shared-channel":(0,t.coroutine)(function*(){return null}),lists:()=>e.e("gantry-v2-async-lottie-trial-modal-lists.json").then(e.t.bind(e,1734664547,23))},V={history:{"en-GB":()=>e.e("gantry-v2-async-lottie-trial-modal-messages-en-GB.json").then(e.t.bind(e,9570554074,23)),"fr-FR":()=>e.e("gantry-v2-async-lottie-trial-modal-messages-fr-FR.json").then(e.t.bind(e,7096086790,23)),"ja-JP":()=>e.e("gantry-v2-async-lottie-trial-modal-messages-ja-JP.json").then(e.t.bind(e,3015913705,23)),"de-DE":()=>e.e("gantry-v2-async-lottie-trial-modal-messages-de-DE.json").then(e.t.bind(e,3095723524,23))},buildings:{"en-GB":()=>e.e("gantry-v2-async-lottie-trial-modal-slack-connect-en-GB.json").then(e.t.bind(e,2450338219,23)),"fr-FR":()=>e.e("gantry-v2-async-lottie-trial-modal-slack-connect-fr-FR.json").then(e.t.bind(e,8873227255,23)),"ja-JP":()=>e.e("gantry-v2-async-lottie-trial-modal-slack-connect-ja-JP.json").then(e.t.bind(e,8007093194,23)),"de-DE":()=>e.e("gantry-v2-async-lottie-trial-modal-slack-connect-de-DE.json").then(e.t.bind(e,2760408041,23))}},B=c(F=>F in V,"isLocalizedIconName"),K=c((F,Y)=>Y in F,"isLocale"),b=c((F,Y)=>{if(!B(F))return;const Z=V[F];return K(Z,Y)?Z[Y]:void 0},"getIconToAnimationMapLocalized"),S=c(function(){let{experimentPnpGoGroupTreatment:F=!1,newCopyVariant:Y=!1,trialAwarenessModalVariant:Z=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee={history:{iconName:"history",title:P.t("Unlimited message and file history"),text:P.t("Keep and find answers in your team\u2019s archive")},huddles:{iconName:"headphones",title:P.t("Group huddles"),text:P.t("Voice and video conversations with your team")},files:{iconName:"canvas",title:P.t("Canvases and lists"),text:P.t("Share and track work in Slack")},slackConnect:{iconName:"buildings",title:P.t("Slack Connect channels"),text:P.t("Work with people from other organizations")},workflows:{iconName:"bolt",title:P.t("More apps and unlimited workflows"),text:P.t("Connect tools to Slack and build no-code automations")}};return Y&&(ee={...ee,history:{...ee.history,title:P.t("Unlimited message history",{fallbackHash:"df3b6ffa2b734c91a477ef99c651e8368a8de52a"}),text:P.t("Search and view all of your team\u2019s public messages and files, which are stored indefinitely on a paid plan.",{fallbackHash:"6b06612199a2ba4edd538aeab59a0729f0157104"})},huddles:{...ee.huddles,text:P.t("Talk things out live with audio and video huddles. Share your screen, annotate and enable live captions.",{fallbackHash:"9630412b89af32fa5fa77827dafce24e4ff1c61b"})},tools:{iconName:"tools",title:P.t("Premium productivity tools and templates",{fallbackHash:"b65871634e6d8a24479ff1ef8f00bc312fdb516a",fallbackHashNs:"solution_gallery"}),text:P.t("Share, track and manage work with canvases, lists, workflows and more.",{fallbackHash:"46c05e3ac87ab9122d103b976d20f8b16c468e2a",fallbackHashNs:"solution_gallery"})},slackConnect:{...ee.slackConnect,title:P.t("Work with people at other organizations",{fallbackHash:"213e16e29cb2be31a8927a8749fbc5c0e997cefe"}),text:P.t("Make collaborating with outside partners and clients as fast and simple as working with in-house teams.",{fallbackHash:"213e16e29cb2be31a8927a8749fbc5c0e997cefe"})},workflows:{...ee.workflows,iconName:"play",title:P.t("More connected apps",{fallbackHash:"d8abd1625ab6793a75a91c4f759f6deb8aa56399",fallbackHashNs:"reverse-trial"}),text:P.t("Schedule meetings, file tickets, track tasks, and more, by bringing tools your team already uses into Slack.",{fallbackHash:"1a8374bae29b9a54d537703c4906950192fbb822",fallbackHashNs:"reverse-trial"})}}),F&&(ee={...ee,files:{...ee.files,iconName:"tools",title:P.t("Premium productivity tools and templates"),text:P.t("Track and share work with lists and unlimited canvases")},slackConnect:{...ee.slackConnect,iconName:"shared-channel",title:P.t("Slack Connect channels"),text:P.t("Work with people from other organizations")},huddles:{...ee.huddles,title:P.t("Group voice and video huddles"),text:P.t("Instantly connect with screen sharing and more")},workflows:{...ee.workflows,title:P.t("Unlimited apps and workflows"),text:P.t("Access tools you use everyday and automate tasks")}},Z&&(ee={...ee,files:{...ee.files,text:P.t("Share, track and manage work with canvases and lists")},slackConnect:{...ee.slackConnect,title:P.t("Slack Connect")},huddles:{...ee.huddles,title:P.t("Group huddles"),text:P.t("Talk it out on a video call with screen sharing")},workflows:{...ee.workflows,title:P.t("Unlimited apps and workflows"),text:P.t("Access tools you use everyday and automate tasks")}})),[ee.history,ee.huddles,...ee.tools?[ee.tools]:D.Ml,...Y?D.Ml:[ee.files],ee.slackConnect,ee.workflows]},"getFeatureList"),G=c(F=>{let{iconClassName:Y,iconName:Z,title:ee,text:j}=F;return s.createElement(T.A,{alignItems:"flex-start"},s.createElement("div",{className:(0,i.A)(O().icon,Y)},s.createElement(M.A,{name:Z,size:"20","aria-describedby":Z,role:"img","data-qa":`icon-${Z}`})),s.createElement(T.A,{flexDirection:"column"},s.createElement("div",{className:O().title},ee),s.createElement("div",{className:O().text},j)))},"FeaturesListItem");G.displayName="FeaturesListItem";const U=c(F=>{let{className:Y,iconClassName:Z,listItems:ee}=F;return s.createElement(T.A,{gap:12,flexDirection:"column",className:(0,i.A)(O().featuresListContainer,Y)},ee.map(j=>s.createElement(G,{key:j.title,iconClassName:Z,iconName:j.iconName,title:j.title,text:j.text})))},"FeaturesList")},8108449081:(x,A,e)=>{"use strict";e.d(A,{A:()=>L});var t=e(3134334389),n=e(2562405183),s=e(6122756707),i=e(735940183),l=e(4481313819),o=e(924300050),a=e(4963725897),r=e(6518038516),d=e(9003400431),u=e(1224315998),_=e(5220162857),v=e(6259241484),h=e(6323355797),f=e(2683115972),I=e(3677514771),p=e(7914553163),y=e(9623497342),g=e(2612353366),E=e(8871937520),M=e(6839188756);const T=new i.Ay("trials"),D={elementName:"trial_start",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},C={elementName:"compare_plans_cta",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},m={elementName:"explore_all_pro_features_cta",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},O={elementName:"upgrade_to_pro_cta",onClick:{enableClogAction:!0}},P=h.ew.PAID_FEATURE_TRIAL,R=c(V=>{let{promoType:B,uiStep:K,freemiumVariant:b,trialExpirationDate:S}=V;const G=(0,s.wA)(),H=(0,n.d4)(y.$J),U=(0,n.d4)(I.H7),F=(0,M.F1)(U),Y=(0,p.Ay)({promoType:B}),Z=b||Y,ee=(0,t.useCallback)(()=>{G((0,d.O)())},[G]),j=(0,t.useMemo)(()=>[v.xu.SIDEBAR_MENU_HEADER],[]),ge=(0,t.useCallback)(()=>{G((0,d.O)())},[G]),ne=(0,t.useCallback)(()=>{G((0,d.O)()),G((0,g.A)())},[G]),ue=(0,t.useCallback)(()=>{let Le=T.rt("Explore the premium features of our most popular plan with a free {trialDuration}-day trial. No credit card required.",{trialDuration:P});return H&&(Z===p.MX.TrialIneligible||Z===p.MX.TrialIneligibleUserCannotUpgrade)&&(Le=T.rt("Get access to the premium features of our most popular plan.")),H&&S&&(Le=T.rt("Explore all the premium features of our most popular plan, Slack Pro, through {expirationDate}.",{expirationDate:(0,E.Pd)(S)})),Le},[H,Z,S]),he=c(()=>{if(H){if(S){const fe=H?T.t("Explore All Pro Features"):"";return t.createElement(f.Ay,{size:"medium",autoClogProps:m,onClick:ne,title:fe},fe)}if(Z===p.MX.TrialEligible)return t.createElement(a.A,{autoClogProps:D,reason:"all_features_modal",onRequestComplete:ge,promoType:B,megaphoneSpacesToRefresh:j},T.t("Start Pro Trial"));const Le="all_features_modal";if(Z===p.MX.TrialIneligible){const fe=H?T.t("Upgrade Now"):"";return t.createElement(f.z9,{size:"medium",autoClogProps:O,href:(0,h.Qn)({team:U,entryPoint:Le}),title:fe},fe)}if(Z===p.MX.TrialIneligibleUserCannotUpgrade){const fe=H?T.t("Compare Plans"):"";return t.createElement(f.z9,{size:"medium",autoClogProps:C,href:(0,h.hZ)({entryPoint:Le}),title:fe},fe)}return null}return t.createElement(t.Fragment,null,t.createElement(a.A,{autoClogProps:D,reason:"all_features_modal",onRequestComplete:ge,promoType:B,megaphoneSpacesToRefresh:j},T.t("Start Pro Trial")),t.createElement(r.A,{buttonType:"outline",entryPoint:"global_trial_entrypoint",openInNewTab:!0,planLevel:h.i6.standard.name}))},"getCustomFooterButtons");he.displayName="getCustomFooterButtons";const be=c(()=>t.createElement("div",{className:"p-free_teams_showcase_all_features_modal__ctas"},he()),"getCustomFooter"),xe=H&&S?T.t("{teamName} is on a free trial \u{1F389}",{teamName:F}):T.t("Do even more with Slack Pro");return t.createElement(l.A,{eventId:u.EventId.UPGRDEXP_TRIAL,uiComponentName:u.UiComponentName.FREE_TEAMS_SHOWCASE_ALL_FEATURES_MODAL,uiStep:K},t.createElement(o.A,{featureList:(0,_.L_)({experimentPnpGoGroupTreatment:H,trialAwarenessModalVariant:Boolean(S)}),experimentPnpGoGroupTreatment:H,modalTitle:xe,modalSubtitle:ue(),customFooter:be(),onRequestClose:ee,maxWidth:832,videoTitle:T.t("Comparison of free vs. paid Slack Video for users on free teams",{fallbackHash:"9398938f8b7049969c93c2f18f103f217bd68228"})}))},"FreeTeamsAllFeaturesModal");R.displayName="FreeTeamsAllFeaturesModal";const L=R},1267040415:(x,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(735940183),s=e(9391594207),i=e(1224315998),l=e(6323355797),o=e(2562405183),a=e(3677514771),r=e(7268021173),d=e(4481313819),u=e(2683115972),_=e(8739505998),v=e(2312625946);function h(){return h=Object.assign||function(E){for(var M=1;M<arguments.length;M++){var T=arguments[M];for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(E[D]=T[D])}return E},h.apply(this,arguments)}c(h,"_extends");const f=new n.Ay("plan_change"),I=c(E=>{let{children:M,planLevel:T,entryPoint:D,feature:C,hash:m,action:O,useLink:P,refToForward:R,productId:L,productLevel:V,team:B,isTeamInTrial:K,tooltipProps:b,...S}=E;const G=(0,o.d4)(F=>(0,l.m6)(F,{entryPoint:D,productId:L,productLevel:V,action:O,feature:C,hash:m,planLevel:T})),H=P?_.A:u.z9,U=t.createElement(H,h({ref:R},S,{href:G}),M);return t.createElement(d.A,{eventId:i.EventId.UPGRDEXP_UPSELL_PROMPTS,clogImpression:!0},b?t.createElement(v.Ay,h({tip:f.t("Upgrade")},b),U):U)},"PlansPageCTABase");I.displayName="PlansPageCTABase";const p=c(E=>({team:(0,a.H7)(E),isTeamInTrial:(0,r.iH)(E)}),"mapStateToProps"),y=(0,s.N)(p)(I),g=t.forwardRef((E,M)=>t.createElement(y,h({},E,{refToForward:M})))},4177200783:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(3134334389),n=e(6122756707),s=e(2562405183),i=e(735940183),l=e(1224315998),o=e(4761125736),a=e(9003400431),r=e(4481313819),d=e(8719380546),u=e(5712872315),_=e(1743656885);const v=new i.Ay("msg_input"),h={elementName:"learn_more",onClick:{enableClogAction:!0}},f=c(M=>{let{isScheduledMessage:T}=M;const D=(0,n.wA)(),C=(0,t.useCallback)(()=>{D((0,a.O)())},[D]);if(!(0,s.d4)(R=>(0,o._Z)(R,"upgrd_5684")==="on"))return null;const O=T?v.t("Message not scheduled"):v.t("Message not sent"),P=v.rt("Your team isn\u2019t able to send messages right now. Review any apps or webhooks that may be sending a high-volume of messages. <learnMoreLink>Learn more</learnMoreLink> about message limits.",{fallbackHash:"a15c5b3859af53dcefc79016b421009c7adc9bf6","<learnMoreLink>":R=>{let{text:L}=R;return t.createElement(_.A,{"data-qa":"Message-limit-error-modal-learn-more-link",articleId:115002422943,hash:"message-and-file-visibility-limit",autoClogProps:h,forceOpenInBrowser:!0},L)}});return t.createElement(r.A,{eventId:l.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,clogImpression:!0,uiComponentName:l.UiComponentName.MESSAGE_LIMIT_ERROR_MODAL},t.createElement(d.A,{"data-qa":"message-limit-error-modal",title:O,titleIcon:"warning",bodyContent:P,onRequestClose:C,theme:u.B.ERROR}))},"MessageLimitErrorModal");f.displayName="MessageLimitErrorModal";const I=f;var p=e(6304789565),y=e(2375333597);const g=(0,p.Ay)("Open modal when a message send fails due to team having hit the message limit",function(M,T){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M((0,y.q)({element:t.createElement(I,D)}))});g.meta={name:"createThunk",key:"createThunkopenMessageLimitErrorModal",description:"Open modal when a message send fails due to team having hit the message limit"};const E=g},6518038516:(x,A,e)=>{"use strict";e.d(A,{A:()=>P});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(9391594207),l=e(5255740490),o=e(735940183),a=e(2786906754),r=e(7994296598),d=e(9022734571),u=e(6839188756),_=e(6323355797),v=e(3554387543),h=e(3677514771),f=e(3559164431),I=e(8368515877),p=e(2222994823),y=e(6084388622),g=e(8739505998),E=e(8683010724),M=e(4761125736);function T(){return T=Object.assign||function(R){for(var L=1;L<arguments.length;L++){var V=arguments[L];for(var B in V)Object.prototype.hasOwnProperty.call(V,B)&&(R[B]=V[B])}return R},T.apply(this,arguments)}c(T,"_extends");const D=new o.Ay("page_pricing");let C=c(class extends s.Component{getElementName(){const{isSmallFeaturesColumnButton:L,planLevel:V,activePlanLevel:B,isTeamOnTrial:K,isInvoiceCustomer:b,includeFreePlan:S}=this.props;let G;return V===_.i6.enterprise.name?G=`${V}_plan_contact_us`:b?G=`${V}_plan_contact_accounts`:!V&&S?G="free_plan_upgrade":L&&B===V&&!K?G=`${V}_get_slack_ai`:G=`${V}_plan_upgrade`,G}getHref(L){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const B=L+(0,d.iU)({...this.parsedUrlQueryParams,...V});return(0,u.Zl)(this.props.team,B)}navigateToCheckoutFlow(L){var V=this;return(0,t.coroutine)(function*(){const{isSlackAIOptedInByDefault:B,isTeamOnTrial:K,activePlanLevel:b}=V.props;V.setState(()=>({isCTALoading:!0}));try{yield V.props.fetchConfigurationData({productId:L})}catch(H){var S;(H==null||(S=H.data)===null||S===void 0?void 0:S.error)==="invalid_request"?(0,r.A)(`/account/request?entry_point=${V.props.entryPoint}`):(0,r.A)("/admin/billing");return}if(V.props.redirectUrl&&(0,p.I)(V.props.redirectUrl)){V.props.redirectUrl&&(0,r.A)(V.props.redirectUrl);return}const G=(0,_.Qn)({team:V.props.team,entryPoint:V.props.entryPoint,productId:L,addonTypes:B&&!K&&b===""?[_.wi.SlackAI]:void 0});(0,r.A)(G)})()}handleClick(){const{team:L,planLevel:V,activePlanLevel:B,isSmallFeaturesColumnButton:K,productId:b,slackAIAddonId:S,isTeamOnTrial:G,isSlackAIOptedInByDefault:H}=this.props;if(K&&B===V&&!G){const F=(0,_.Qn)({team:L,entryPoint:"plans_page",addon:S,addonTypes:H?[_.wi.SlackAI]:void 0});(0,r.A)(F)}else b&&this.navigateToCheckoutFlow(b)}renderPlanCTA(){const{activePlanLevel:L,planLevel:V,productId:B,activeProductId:K,"data-qa":b,isInvoiceCustomer:S,clogStepId:G,useLink:H,buttonType:U,openInNewTab:F,entryPoint:Y,isSmallFeaturesColumnButton:Z,isTeamOnTrial:ee,discountPromoType:j,discountPromoSubtype:ge,discountPercent:ne,experimentPnpDiscountsGroupOn:ue,className:he}=this.props;let be="outline",xe="",Le;const fe=F?"_blank":"_self";if(V===_.i6.enterprise.name)xe=D.t("Contact Sales"),Le=this.getHref("/contact-sales",{from_plans:1,campaign:"7013y000002UvizAAC"}),be="primary";else if(S)xe=D.t("Contact Accounts"),Le=this.getHref("/help/requests/new");else{if(V===_.i6.free.name)return null;if(be="primary",Z)L===V&&!ee?xe=D.t("Get Slack AI"):j===_.k2.PricingAndPackagingPromo?xe=(0,_.$K)({discountPromoSubtype:ge,activePlanLevel:L,discountPercent:ne,planLevel:V,experimentPnpDiscountsGroupOn:ue}):xe=D.t("Upgrade");else{xe=D.t("Upgrade Now");const k=K?2:1;Le=this.getHref(`/${_.nc}`,{s:k,entry_point:Y})}}const se={className:(0,l.A)("p-upgrade_cta plan_page",he),type:U||be,"data-qa":b,autoClogProps:{elementName:this.getElementName(),isPrimaryCTA:U==="primary",onClick:{enableClogAction:!0},clogStepId:G,productId:B}};let Q=s.createElement(y.z9,T({href:Le,target:fe},se),xe);return V!==_.i6.enterprise.name&&!S&&B&&!H?Q=s.createElement(y.lV,T({onClick:this.handleClick,loading:this.state.isCTALoading},se,{"aria-label":xe}),xe):H&&(Q=s.createElement(g.A,T({href:Le,target:fe},se,{className:"p-upgrade_cta--link"}),xe,s.createElement("span",{className:"margin_left_25"},s.createElement(E.A,{name:"arrow-right"})))),Q}render(){return this.renderPlanCTA()}constructor(L){super(L),this.state={isCTALoading:!1},this.handleClick=this.handleClick.bind(this),this.parsedUrlQueryParams=(0,a.qN)(window.location.href)||{}}},"UpgradeCta");C.displayName="UpgradeCta",C.defaultProps={"data-qa":"plans_page_upgrade_cta",clogStepId:"",entryPoint:"plans_page"};const m=c((R,L)=>{const V=(0,v.EV)(R),B=(0,h.H7)(R),K=(0,v.$f)(R);return{team:B,productId:(0,v.UO)(R,L.planLevel,V),slackAIAddonId:(0,v.Zg)(R,K,V),activeProductId:(0,v.xU)(R),activePlanLevel:K,isTeamOnTrial:(0,v.yQ)(R),isInvoiceCustomer:(0,v.Nd)(R),redirectUrl:(0,f.oy)(R),nextPlanLevel:(0,v.Jf)(R),isSlackAIOptedInByDefault:(0,v.qK)(R),discountPercent:(0,v.WG)(R),discountPromoType:(0,v.ZQ)(R),discountPromoSubtype:(0,v.$3)(R),experimentPnpDiscountsGroupOn:(0,M._Z)(R,"pnp_discounts")==="on"}},"mapStateToProps"),O=c(R=>({fetchConfigurationData:L=>R((0,I.l)(L))}),"mapDispatchToProps"),P=(0,i.N)(m,O)(C)},8576613356:(x,A,e)=>{"use strict";e.d(A,{C:()=>T});var t=e(3134334389),n=e(5255740490),s=e(73855031),i=e(6518038516),l=e(2670882607);const o=(0,t.memo)(D=>{let{onLoad:C}=D;return(0,t.useEffect)(()=>()=>{C()},[C]),null});var a=e(2562405183),r=e(2047021170),d=e(5577296129),u=e.n(d);const _=(0,t.memo)(D=>{let{alt:C,className:m,getAnimationImport:O,index:P,onLoad:R,src:L,autoplay:V=!0,loop:B=!0}=D;const K=(0,t.useCallback)(()=>R(P),[P,R]),b=(0,t.useCallback)(()=>t.createElement(o,{onLoad:K}),[K]);return(0,a.d4)(G=>(0,r.ty)(G,"a11y_animations"))&&O?t.createElement(l.e,{autoplay:V,className:(0,n.A)(u().featureImage,m),description:C,getAnimationImport:O,loop:B,renderLoading:b}):t.createElement("img",{alt:C,className:(0,n.A)(u().featureImage,m),key:L,onLoad:K,src:L,"aria-hidden":"true","data-qa":"feature_image_static"})});var v=e(5641442783),h=e(6308822),f=e(6044196829),I=e(980293773),p=e(1224315998),y=e(6323355797),g=e(8985946788),E=e.n(g);const M={subtitle:"accordion-feature-list-modal-subtitle",imageContainer:"accordion-feature-list-modal-image-container",textContent:"accordion-feature-list-modal-text-content"},T=c(D=>{let{accordionClassNames:C={},className:m="",customFooter:O,customHeaderIcon:P,autoClogProps:R,closeModal:L,entryPoint:V,featureListItems:B,featureImageClassName:K="",hideProBadge:b,imageContainerBackground:S="horchata",linkButtonText:G,linkButtonAutoClogProps:H,listContainerClassName:U="",onClickLink:F,subtitle:Y,subtitleClassName:Z="",title:ee,ariaLabel:j="",UNSAFE_parentSelector:ge}=D;const[ne,ue]=(0,t.useState)(0),he=(0,t.useCallback)(se=>{ue(se)},[]),be=(0,t.useMemo)(()=>B.map((se,Q)=>({...se,onExpand:()=>{var k;he(Q),(k=se.onExpand)===null||k===void 0||k.call(se)}})),[B,he]),xe=(0,t.useRef)(new Array(be.length).fill(!0)),Le=(0,t.useCallback)(se=>{xe.current=[...xe.current.slice(0,se),!1,...xe.current.slice(se+1)]},[]),fe="accordion-feature-list-modal-description";return t.createElement(I.dW,{autoClogProps:R,centered:!0,className:(0,n.A)(E().accordionFeatureListModal,m),closeModal:L,maxWidth:900,UNSAFE_parentSelector:ge,contentLabel:j,describedby:fe},t.createElement("div",{className:(0,n.A)(E().bodyContainer,{[E().horchataBg]:S==="horchata",[E().aubergineBg]:S==="aubergine"})},t.createElement("div",{className:(0,n.A)(E().listContainer,U),"data-qa":M.textContent},t.createElement("div",{className:E().header},!b&&(P??t.createElement("div",{className:"display_flex full_width justify_content_center margin_bottom_50"},t.createElement(v.A,{uiComponentVariant:p.UiComponentVariant.SOLUTIONS_GALLERY_UPGRADE_MODAL,"aria-hidden":!0}))),t.createElement("h1",{id:fe,className:E().title},ee),t.createElement("h2",{className:(0,n.A)(E().subtitle,Z),"data-qa":M.subtitle},Y)),t.createElement("div",{className:(0,n.A)(E().accordionListContainer,C==null?void 0:C.listContainerClassName)},t.createElement(s.n,{accordionItems:be,className:C==null?void 0:C.className,showImageCaret:!0,showItemBorder:!1,itemClassName:E().accordionItem,itemHeaderClassName:(0,n.A)(E().accordionItemHeader,C==null?void 0:C.itemHeaderClassName),itemHeaderButtonClassName:(0,n.A)(E().accordionItemHeaderButton,C==null?void 0:C.itemHeaderButtonClassName),itemDescriptionClassName:(0,n.A)(E().accordionItemDescription,C==null?void 0:C.itemDescriptionClassName),expandedIconClassName:(0,n.A)(E().accordionExpandedIcon,C==null?void 0:C.expandedIconClassName),collapsedIconClassName:(0,n.A)(E().accordionCollapsedIcon,C==null?void 0:C.collapsedIconClassName),imageCaretClassName:(0,n.A)({[E().horchataCaret]:S==="horchata",[E().aubergineCaret]:S==="aubergine"}),applyCustomAnimation:!0})),O??t.createElement("div",{className:E().footer},t.createElement(i.A,{"button-type":"primary",className:E().upgradeCta,entryPoint:V,openInNewTab:!0,planLevel:y.i6.standard.name}),G&&t.createElement(f.A,{className:"margin_top_100",onClick:F,autoClogProps:H},t.createElement("span",null,G)))),t.createElement("div",{className:(0,n.A)(E().imageContainer),"data-qa":M.imageContainer},xe.current[ne]&&t.createElement(h.A,{className:E().spinner,size:"large"}),be.map((se,Q)=>{let{getAnimationImport:k,getLocalizedAnimationImport:N,imageAlt:$,imageSrc:W}=se;return t.createElement(_,{key:`${W}-${ne}`,getAnimationImport:N??k,index:Q,src:W,alt:$,autoplay:ne===Q,loop:!1,className:(0,n.A)(E().featureImage,{flex:ne===Q,align_items_center:ne===Q,display_none:ne!==Q},K),onLoad:Le})}))))},"AccordionFeatureListModal");T.displayName="AccordionFeatureListModal"},5270990260:(x,A,e)=>{"use strict";e.d(A,{J:()=>K});var t=e(3134334389),n=e(6122756707),s=e(1030162945),i=e(5220162857),l=e(8576613356),o=e(5267010247),a=e(8822892075),r=e(4030956226),d=e(9421999304),u=e(7940058138),_=e(6839188756),v=e(677609895),h=e(6084388622),f=e(8739505998),I=e(659648890),p=e(571104883),y=e(735940183),g=e(698347924),E=e(6323355797),M=e(2562405183),T=e(4761125736),D=e(9003400431),C=e(3554387543),m=e(4005238080),O=e(9623497342),P=e(3677514771),R=e(3366751172),L=e.n(R);const V=new y.Ay("trials");function B(b,S,G,H){return b?S:H?V.rt("{price} per person/month after trial. ",{price:G}):""}c(B,"getFooterText");function K(b){let{onCloseModal:S,entryPoint:G,isEligibleForTrial:H,experimentPaidFeatureTrialAutoChargeGroupTreatment:U,promoType:F,promoSubtype:Y,trialEndDate:Z}=b;const ee=(0,n.wA)(),j=(0,t.useCallback)(()=>ee((0,D.O)()),[ee]),ge=(0,M.d4)(P.H7),ne=(0,_.F1)(ge),ue=(0,_.tc)(ge),he=(0,M.d4)(O.$J),be=(0,M.d4)(C.Pr),xe=(0,M.d4)(Ye=>(0,T._Z)(Ye,"paid_feature_trial_auto_charge_translation",!1)==="on"),Le=(0,M.d4)(C.nc),fe=(0,M.d4)(Ye=>(0,C.MO)(Ye,E.i6.standard.name,E.ck.monthly)),se=(0,M.d4)(Ye=>(0,C.UO)(Ye,E.i6.standard.name,E.ck.monthly)),Q=(0,M.d4)(v.X),k=(0,M.d4)(Ye=>(0,C.iR)(Ye,E.i6.standard.name,E.ck.monthly)),N=(0,M.d4)(Ye=>(0,C.h$)(Ye,E.i6.standard.name,E.ck.monthly)),$=(0,M.d4)(Ye=>(0,C.Tm)(Ye,E.i6.standard.name,E.ck.monthly)),W=Boolean(k),q=(0,I.Ay)(Z).format("MMMM Do"),re=fe?(0,g.ZV)(fe,(0,y.Yp)(),{style:"currency",currency:Le,currencyDisplay:"symbol"}):void 0,le=xe?V.rt("Free {featureTrialLength} day trial, then a {discountPercent}% off for {discountDuration, plural, =1 {month} other {# months}}, then {monthlyPrice} per person/month. ",{featureTrialLength:E.ew.PAID_FEATURE_TRIAL,monthlyPrice:re,discountPercent:N,discountDuration:$}):"",Ae=(0,E.tc)(ge,F,Y),Te=(0,E.Qn)({team:ge,productId:se,excludeDomain:!0,entryPoint:F}),Ne=(0,E.hZ)({planLevel:ue?void 0:E.i6.standard.id,entryPoint:F}),pe=B(W,le,re,be),Ee=(0,t.useCallback)(()=>{window.open(Ae,(0,p.y3)()?"_blank":"_self")},[Ae]),oe=(0,t.useCallback)(()=>{ee((0,o.o)((0,a.ZF)(u.c.PaidBenefits))),j()},[ee,j]),ce=(0,t.useCallback)(()=>{const Ye=(0,d.JK)();return(0,i.L_)({experimentPnpGoGroupTreatment:he}).map(Ve=>({id:Ve.iconName,header:Ve.title,description:Ve.text,iconProps:{name:Ve.iconName},imageAlt:Ve.title,imageSrc:i.XC[Ve.iconName],getAnimationImport:i.wj[Ve.iconName],getLocalizedAnimationImport:(0,i.CQ)(Ve.iconName,Ye)}))},[he]);(0,r.A)(()=>{be||ee((0,m.A)())});const ke=(0,t.useMemo)(()=>Q?t.createElement(t.Fragment,null,t.createElement(h.z9,{href:Te,type:"primary",className:L().cta},U?V.t("Upgrade to Pro"):""),t.createElement(f.A,{href:Ne,className:L().link},U?V.t("View all paid features"):"")):t.createElement(h.z9,{href:Ne,className:L().cta},U?V.t("View all paid features"):""),[Q,U,Ne,Te]),Ce=(0,t.useMemo)(()=>t.createElement("div",{className:L().footer},H&&Q?t.createElement(t.Fragment,null,t.createElement(h.z9,{onClick:Ee,type:"primary",className:L().cta},U?V.rt("Try Slack Pro <span>Free for 30 days</span>",null,Ye=>{let{text:J}=Ye;return t.createElement("span",{className:L().light},J)}):""),t.createElement("p",{className:L().disclaimer},pe,U?V.t("Cancel anytime."):"")):ke),[U,ke,H,Q,pe,Ee]),Me=(0,t.useMemo)(()=>t.createElement("div",{className:L().footer},t.createElement(h.z9,{onClick:oe,className:L().cta},U?V.t("View all Pro Benefits"):"")),[U,oe]),Se=(0,t.useMemo)(()=>t.createElement("div",{className:"display_flex full_width justify_content_center margin_bottom_50"},t.createElement(s.Ay,{text:"tada",emojiSize:s.lw.LARGE})),[]);let Ue=U?V.rt("Explore the premium features of our most popular plan with a free {trialLength}-day trial.",{trialLength:E.ew.PAID_FEATURE_TRIAL}):"";(!H||!Q)&&(Ue=U?V.t("Get access to the premium features of our most popular plan."):"");let He=U?V.t("Do even more with Slack Pro"):"";return ue||(He=U?V.t("{teamName} now on Slack Pro",{teamName:ne}):"",Ue=U?V.rt("Your team now has access to all the goodness of Slack\u2019s Pro plan for free until <strong>{trialEndDate}</strong>",{trialEndDate:q}):""),t.createElement(l.C,{closeModal:S||j,customFooter:ue?Ce:Me,entryPoint:G,featureListItems:ce(),subtitle:Ue,title:He,customHeaderIcon:ue?void 0:Se})}c(K,"AutoChargeTrialEntryModal"),K.displayName="AutoChargeTrialEntryModal"},2279207117:(x,A,e)=>{"use strict";e.d(A,{FK:()=>_,aD:()=>u,uY:()=>h,w9:()=>v});var t=e(6001125587),n=e(7914553163),s=e(5267010247),i=e(8822892075),l=e(7940058138),o=e(8193414630),a=e(6968387112),r=e(735940183);const d=new r.Ay("trials_highlight_paid_features");function u(f){switch(f){case n.MX.TrialTeam:return`https://${(0,a.Xk)()}/help/articles/115003205446-Slack-plans-and-features`;case n.MX.TrialIneligibleUserCannotUpgrade:return`https://${(0,a.Xk)()}/help/articles/115002422943`;default:(0,o.Kh)(f)}}c(u,"getHref");function _(f){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(f){case void 0:case null:case n.MX.TrialFetching:return"";case n.MX.TrialIneligible:return I?d.t("Upgrade Now"):d.t("See Upgrade Options");case n.MX.TrialEligible:return I?d.t("Try Slack Pro"):d.t("Start Free Trial");case n.MX.TrialIneligibleUserCannotUpgrade:case n.MX.TrialTeam:return I?d.t("Compare Plans"):d.t("Learn More");case n.MX.TrialExpiry:return d.t("Upgrade Now");default:(0,o.Kh)(f)}}c(_,"getDefaultCopy");function v(f,I,p,y){return()=>{f((0,t.A)({uiComponentVariant:y,promoSubtype:I,freemiumVariant:p}))}}c(v,"getTrialEligibleHandler");function h(f){return()=>f((0,s.o)((0,i.ZF)(l.c.PaidBenefits)))}c(h,"getTrialTeamHandler")},6005700845:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(3134334389),n=e(6122756707),s=e(1267040415),i=e(2279207117),l=e(7914553163),o=e(6084388622),a=e(8739505998),r=e(8193414630),d=e(4096483543),u=e(6323355797),_=e(2562405183),v=e(3810478625);const h={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},f={elementName:"learn_more_usage_limits",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},I={elementName:"learn_more_plans_and_features",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},p={isPrimaryCTA:!0,elementName:"upgrade_link",onClick:{enableClogAction:!0}},y={isPrimaryCTA:!0,elementName:"upgrade_now",onClick:{enableClogAction:!0}},g=c(M=>{let{variant:T,children:D,promoSubtype:C,modalVariant:m,useLink:O=!1,ctaClassName:P}=M;const R=(0,n.wA)(),L=(0,_.d4)(v.g),V=(0,d.A)();if(!T||T===l.MX.TrialFetching)return null;const B=O?a.A:o.z9,K=(0,i.FK)(T,L);switch(T){case l.MX.TrialIneligible:return t.createElement(s.A,{useLink:O,autoClogProps:p,className:P},D??K);case l.MX.TrialEligible:return t.createElement(B,{onClick:(0,i.w9)(R,C,T,m),autoClogProps:h,className:P},D??K);case l.MX.TrialIneligibleUserCannotUpgrade:return t.createElement(B,{href:(0,i.aD)(T),autoClogProps:f,className:P},D??K);case l.MX.TrialTeam:return t.createElement(B,{href:V?void 0:(0,i.aD)(T),autoClogProps:I,onClick:V?(0,i.uY)(R):void 0,className:P},D??K);case l.MX.TrialExpiry:return t.createElement(s.A,{useLink:O,action:u.um.CHECKOUT,autoClogProps:y},D??K);default:(0,r.Kh)(T)}},"FreemiumPrimaryCTA");g.displayName="FreemiumPrimaryCTA";const E=g},6001125587:(x,A,e)=>{"use strict";e.d(A,{A:()=>V});var t=e(9706240641),n=e(3134334389),s=e(6422693406),i=e(8108449081),l=e(1152226587),o=e(8300630630),a=e(1267040415),r=e(5791262841),d=e(9240394198),u=e(266169032),_=e(1224315998),v=e(735940183),h=e(6323355797),f=e(2562405183),I=e(4761125736);const p=new v.Ay("trials_highlight_paid_features"),y=h.ew.PAID_FEATURE_TRIAL,g=c(B=>{let{isEligibleForTrial:K,promoType:b,promoSubtype:S,uiComponentVariant:G,uiPage:H}=B;const U=(0,f.d4)(be=>(0,I._Z)(be,"wfb_freemium")==="on"),F=(0,n.useMemo)(()=>U?[p.t("Automate repetitive, simple tasks"),p.t("Create code-free solutions"),p.t("Customize and share with your team")]:[],[U]),Y=(0,n.useMemo)(()=>U?[p.t("Bring tools you already use into Slack"),p.t("Use apps just for you or with your whole team"),p.t("Streamline your work right from Slack")]:[],[U]);if(!U)return null;const Z=c(be=>{let{text:xe}=be;return n.createElement(a.A,{"data-qa":"workflow_builder_freemium_trial_offer_modal-plans_page_link",useLink:!0},xe)},"renderPlansPageLink"),ee=G===_.UiComponentVariant.UNLIMITED_WORKFLOWS_TRIAL_OFFER_MODAL;let j,ge,ne,ue,he;return ee?(j=p.t("Save time with unlimited workflows"),ne=p.t("With workflows, you can:"),ge=K?p.rt(" You can also install unlimited apps, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:y,"<plansPageLink>":Z}):p.rt("You can also install unlimited apps, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":Z}),ue=F,he="/marketing/img/feature/workflow-builder/hero-wfb-lp.jpg"):(j=p.t("Bring all your tools into Slack"),ne=p.t("With apps, you can:"),ge=K?p.rt(" You can also publish unlimited workflows, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:y,"<plansPageLink>":Z}):p.rt("You can also install unlimited workflows, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":Z}),ue=Y,he="/marketing/img/feature/workflow-builder/hero-wfb-apps.png"),n.createElement(r.A,{"data-qa":"workflow_builder_freemium_trial_offer_modal",imgSrc:he,modalBannerBackgroundColor:"#4a144a",modalCloseButtonTheme:d.N.LIGHT,modalTitle:j,modalSubtitle:ge,modalChecklistHeading:ne,modalChecklistItems:ue,onSpeedbumpContinueLabel:H===_.UiPage.WORKFLOW_BUILDER_FREEMIUM_TRIAL_PUBLISH?p.t("Publish Workflow"):p.t("Continue"),promoType:b,promoSubtype:S,startTrialContext:u.M.workflowBuilderFreemiumTrialOfferModal,uiComponentVariant:G,isEligibleForTrial:K})},"WorkflowBuilderFreemiumTrialOfferModal");g.displayName="WorkflowBuilderFreemiumTrialOfferModal";const E=g;var M=e(6304789565),T=e(2375333597),D=e(7268021173),C=e(962959561),m=e(8448112102),O=e(398781533),P=e(9623497342);function R(){return R=Object.assign||function(B){for(var K=1;K<arguments.length;K++){var b=arguments[K];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S])}return B},R.apply(this,arguments)}c(R,"_extends");const L=(0,M.Ay)("Open freemium trial offer modal",function(){var B=(0,t.coroutine)(function*(K,b,S){let G=h.ZO.GlobalEntrypointTrial;const{promoSubtype:H}=S,U=(0,P.$J)(b());let F=null;switch(H){case h.zG.WorkflowBuilder:G=h.ZO.PaidFeatureTrial,F=E;break;case h.zG.Vhq:G=U?h.ZO.GlobalEntrypointTrial:h.ZO.PaidFeatureTrial,F=U?i.A:l.A;break;default:return s.S.resolve()}K((0,O.Q)({entryPoint:"open_trial_offer_modal",campaignType:G,campaignSubType:H,reason:"freemium_all_features_modal"})),yield K((0,o.A)({campaignType:G,campaignSubType:H,reason:H}));const Y=(0,D.hq)(b(),G,H);return(0,C.L9)(b())?K((0,m.r)({promoType:G,promoSubtype:H,entryPoint:"freemium_all_auto_charge_trial_entry_point"})):K((0,T.q)({element:n.createElement(F,R({},S,{promoType:G,promoSubtype:H,isEligibleForTrial:Y}))}))});return function(K,b,S){return B.apply(this,arguments)}}());L.meta={name:"createThunk",key:"createThunkopenFreemiumTrialOfferModal",description:"Open freemium trial offer modal"};const V=L},7914553163:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>I,MX:()=>_});var t=e(3134334389),n=e(6122756707),s=e(6839188756),i=e(677609895),l=e(6323355797),o=e(2562405183),a=e(8871937520),r=e(7268021173),d=e(1384076438),u=e(3677514771);const _={TrialFetching:"trial_fetching",TrialTeam:"trial_team",TrialExpiry:"trial_expiry",TrialEligible:"trial_eligible",TrialIneligible:"trial_ineligible",TrialIneligibleUserCannotUpgrade:"trial_ineligible_user_cannot_upgrade"},v=c(p=>p===_.TrialFetching||p===_.TrialEligible||p===_.TrialIneligible||p===_.TrialIneligibleUserCannotUpgrade,"isFreeVariant"),h=c(p=>p===_.TrialTeam||p===_.TrialExpiry,"isTrialVariant"),I=c(p=>{let{promoType:y=l.ZO.PaidFeatureTrial,promoSubtype:g,context:E,reason:M,isEligibleForTrial:T,trialEndDate:D,isEnabled:C=!0}=p;const m=(0,n.wA)(),O=(0,o.d4)(S=>(0,s.tc)((0,u.H7)(S))),P=(0,o.d4)(r.iH),R=(0,o.d4)(i.X),L=(0,o.d4)(S=>(0,r.hq)(S,y,g)),[V,B]=(0,t.useState)(O);if((0,t.useEffect)(()=>{C&&O&&m((0,d.A)({campaignType:y,campaignSubType:g,context:E,reason:M})).then(()=>{B(!1)})},[m,O,y,g,E,M,L,C]),!C||!(O||P))return null;const K=T!=null;if(V&&!K)return _.TrialFetching;if(P){const G=(0,a.qe)(D);return D!==void 0&&G<=7?_.TrialExpiry:_.TrialTeam}const b=K&&V?T:L;return!b&&!R?_.TrialIneligibleUserCannotUpgrade:b?_.TrialEligible:_.TrialIneligible},"useFreemium")},952756744:(x,A,e)=>{"use strict";e.d(A,{s:()=>l});var t=e(3134334389),n=e(4902318931),s=e(6259241484);const i={[s.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER]:{component:t.lazy(()=>Promise.resolve().then(e.bind(e,8240993983)))}},l=c(()=>t.createElement(n.Ay,{spaceName:s.xu.HUDDLE_INVITE_MODAL,notifications:i}),"HuddleInviteModalTrialBannerV2MegaphoneWrapper");l.displayName="HuddleInviteModalTrialBannerV2MegaphoneWrapper"},8240993983:(x,A,e)=>{"use strict";e.r(A),e.d(A,{HuddleInviteModalTrialBannerV2:()=>E,default:()=>M});var t=e(3134334389),n=e(6122756707),s=e(4481313819),i=e(1267040415),l=e(5641442783),o=e(7433432223),a=e(4030956226),r=e(6084388622),d=e(8112788848),u=e(1224315998),_=e(735940183),v=e(6323355797),h=e(2562405183),f=e(8871937520),I=e(9623497342);const p=new _.Ay("guided_trials"),y={elementName:"upgrade_now_cta",onClick:{enableClogAction:!0}},g={elementName:"see_upgrade_options_cta",onClick:{enableClogAction:!0}},E=c(T=>{let{trialEndDate:D,canUserPurchase:C}=T;const m=(0,n.wA)(),O=(0,h.d4)(I.$J),P=(0,h.d4)(L=>(0,v.m6)(L,{action:v.um.CHECKOUT,productLevel:v.i6.standard.id,entryPoint:"guided_trials_peek_upgrade_cta"}));(0,a.A)(()=>{m((0,I.E5)())});const R=c(()=>C?t.createElement(r.z9,{autoClogProps:y,href:P,className:"p-huddle_invite_modal__cta_upgrade",size:"small","data-qa":"huddle-invite-modal-upgrade-cta"},O?p.t("Upgrade to Pro"):p.t("Upgrade Now")):t.createElement(i.A,{feature:v.c4.SLACK_HUDDLES,autoClogProps:g,size:"small",type:O?"primary":"outline"},O?p.t("Compare plans"):p.t("See Upgrade Options")),"getCTA");return R.displayName="getCTA",t.createElement(s.A,{eventId:u.EventId.UPGRDEXP_TRIAL,uiComponentName:u.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement(o.A,{className:"p-huddle_invite_modal_trial_banner_v2__container","data-qa":"huddle_invite_modal_trial_banner",primaryCTA:R(),withMargins:!0},t.createElement("div",null,O?p.rt("<strong>Huddles will soon be limited to two people</strong>"):p.rt("<strong>Group huddles aren\u2019t available for much longer</strong>"),t.createElement(l.A,{className:"p-huddle_invite_modal_trial_banner_v2__pro_tooltip",uiComponentVariant:u.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:d.m.MenuAboveFullScreen})),O?p.rt("Upgrade to continue using group huddles with your team."):p.rt("If you choose not to upgrade by {trialEndDate}, your team won\u2019t be able to huddle with more than one other person.",{trialEndDate:(0,f.Pd)(D),fallbackHash:"e680e704766e6c0c74ca66a78c581927a4b36bdf"})))},"HuddleInviteModalTrialBannerV2");E.displayName="HuddleInviteModalTrialBannerV2";const M=E},9953252450:(x,A,e)=>{"use strict";e.d(A,{A:()=>M,x:()=>g});var t=e(3134334389),n=e(6122756707),s=e(4481313819),i=e(2481088989),l=e(7433432223),o=e(3328083357),a=e(4030956226),r=e(8739505998),d=e(1224315998),u=e(735940183),_=e(6323355797),v=e(2562405183),h=e(8871937520),f=e(7268021173),I=e(9623497342);const p=new u.Ay("trials_highlight_paid_features"),y={elementName:"view_all_pro_features",onClick:{enableClogAction:!0}},g=c(T=>{let{trialEndTs:D,experimentPnpGoGroupTreatment:C,viewAllProFeaturesLink:m,v2ClassName:O}=T;return C?t.createElement(s.A,{eventId:d.EventId.UPGRDEXP_TRIAL,uiComponentName:d.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:O},t.createElement(l.A,{className:"padding_left_125"},(0,i.A)(p.rt("Huddles with more than two people is a paid feature, available with your free trial through <strong>{trialExpirationDate}. <viewAllProFeaturesLink>View all Pro features</viewAllProFeaturesLink></strong>",{trialExpirationDate:(0,h.Pd)(D),"<viewAllProFeaturesLink>":m}),{position:i.D.LEFT_ALIGNED})))):t.createElement(s.A,{eventId:d.EventId.UPGRDEXP_TRIAL,uiComponentName:d.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(o.A,{iconType:"clock-o","data-qa":"huddle_invite_modal_trial_banner"},p.rt("<strong>Huddles with more than two people is a paid feature,</strong> available with your free trial through {trialExpirationDate}.",{trialExpirationDate:(0,h.Pd)(D)}))))},"HuddleInviteModalTrialBanner");g.displayName="HuddleInviteModalTrialBanner";const E=c(T=>{let{v2ClassName:D}=T;const C=(0,n.wA)();(0,a.A)(()=>{C((0,I.E5)())});const m=(0,v.d4)(I.$J),O=(0,v.d4)(f.Sk),P=(0,t.useCallback)(R=>{let{text:L}=R;return t.createElement(r.A,{href:(0,_.hZ)({entryPoint:"huddle_invite_modal_trial_banner"}),autoClogProps:y},L)},[]);return t.createElement(g,{trialEndTs:O,experimentPnpGoGroupTreatment:m,viewAllProFeaturesLink:P,v2ClassName:D})},"ConnectedHuddleInviteModalTrialBanner");E.displayName="ConnectedHuddleInviteModalTrialBanner";const M=E},1152226587:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(2670882607),s=e(1267040415),i=e(5791262841),l=e(266169032),o=e(735940183),a=e(6323355797);const r=new o.Ay("huddles"),d=a.ew.PAID_FEATURE_TRIAL,u=c(v=>{let{startTrialContext:h=l.M.huddlesTrialEntryPointModal,uiComponentVariant:f,onSpeedbumpContinue:I,promoType:p,promoSubtype:y,isEligibleForTrial:g}=v;const E=c(P=>{let{text:R}=P;return t.createElement(s.A,{"data-qa":"huddles_trial_entry_point-plans_page_link",useLink:!0},R)},"renderPlansPageLink"),M=r.t("Try huddles with more people"),T=g?r.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:d,"<plansPageLink>":E}):r.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":E}),D=r.t("With more people, you can:"),C=(0,t.useCallback)(()=>[r.t("Host a team brainstorm from anywhere"),r.t("Get the group\u2019s feedback with a live screenshare"),r.t("Touch base on the go, without all the typing")],[]),m=(0,t.useCallback)(()=>e.e("gantry-v2-async-lottie-huddles-trial").then(e.t.bind(e,7378585700,23)),[]),O=(0,t.useMemo)(()=>t.createElement(n.e,{getAnimationImport:m,autoplay:!0,loop:!0}),[m]);return t.createElement(i.A,{modalTitle:M,modalSubtitle:T,modalLottieAnimation:O,modalBannerBackgroundColor:"#fdd37f",modalChecklistHeading:D,modalChecklistItems:C(),promoType:p,promoSubtype:y,startTrialContext:h,uiComponentVariant:f,onSpeedbumpContinue:I,isEligibleForTrial:g})},"HuddleTrialEntryPointModal");u.displayName="HuddleTrialEntryPointModal";const _=u},236241007:(x,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(1152226587),l=e(8300630630),o=e(6323355797),a=e(6304789565),r=e(2375333597),d=e(7268021173),u=e(962959561),_=e(8448112102),v=e(398781533);function h(){return h=Object.assign||function(p){for(var y=1;y<arguments.length;y++){var g=arguments[y];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(p[E]=g[E])}return p},h.apply(this,arguments)}c(h,"_extends");const f=(0,a.Ay)("Open huddles trial entry point modal",function(){var p=(0,t.coroutine)(function*(y,g,E){const M=o.ZO.PaidFeatureTrial,T=o.zG.Vhq;y((0,v.Q)({entryPoint:"open_huddle_trial_entry_point_modal",campaignType:M,campaignSubType:T,reason:"huddle_trial_entry_point_modal"})),yield y((0,l.A)({campaignType:M,campaignSubType:T,reason:"huddle_trial_entry_point_modal"}));const D=(0,d.hq)(g(),M,T);return(0,u.L9)(g())?y((0,_.r)({promoType:M,promoSubtype:T,entryPoint:"slack_connect_auto_charge_trial_entry_point"})):y((0,r.q)({element:s.createElement(i.A,h({},E,{promoType:M,promoSubtype:T,isEligibleForTrial:D}))}))});return function(y,g,E){return p.apply(this,arguments)}}());f.meta={name:"createThunk",key:"createThunkopenHuddlesTrialEntryPointModal",description:"Open huddles trial entry point modal"};const I=f},2612353366:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(5267010247),n=e(8822892075),s=e(7940058138),i=e(6304789565);const l=(0,i.Ay)("Navigates to paid benefits page",a=>{a((0,t.o)((0,n.ZF)(s.c.PaidBenefits)))});l.meta={name:"createThunk",key:"createThunkopenPaidBenefitsPage",description:"Navigates to paid benefits page"};const o=l},8300630630:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(124213367),l=e(6304789565),o=e(2375333597),a=e(1384076438);const r=(0,l.Ay)("Display loading modal and fetch data for trial entry point modal",function(){var u=(0,t.coroutine)(function*(_,v,h){return _((0,o.q)({element:s.createElement(i.A,{className:"p-trial_entry_point_modal__loading_modal"})})),_((0,a.A)(h))});return function(_,v,h){return u.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkopenTrialLoadingModal",description:"Display loading modal and fetch data for trial entry point modal"};const d=r},7949425452:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>h,Vu:()=>d,vj:()=>u});var t=e(3134334389),n=e(5255740490),s=e(9113979368),i=e(4481313819),l=e(1224315998),o=e(735940183);function a(){return a=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}return f},a.apply(this,arguments)}c(a,"_extends");const r=new o.Ay("trials"),d={Purple:"purple",White:"white"},u={Medium:"medium",Large:"large"},_={eventId:l.EventId.UPGRDEXP_TRIAL,uiComponentName:l.UiComponentName.TRIAL_PRO_BADGE,clogImpression:!0},v=c(f=>{let{ariaHidden:I=!1,className:p,autoClogProps:y,badgeTheme:g=d.Purple,size:E=u.Medium}=f;const M=I?{"aria-hidden":!0}:{"aria-label":r.t("Pro feature",{fallbackHash:"f3b218b5b69cf46f83217a4c553335005e49633f"}),role:"img"},T=t.createElement("div",a({className:(0,n.A)("p-pro_badge",`p-pro_badge--${g}`,`p-pro_badge--${E}`,p),"data-qa":"pro_badge"},M),r.t("PRO"));return(0,s.A)(y)?T:t.createElement(i.A,a({},_,y),T)},"ProBadge");v.displayName="ProBadge";const h=v},5641442783:(x,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(3134334389),n=e(5255740490),s=e(7949425452),i=e(9371668729),l=e(6839188756),o=e(735940183),a=e(6323355797),r=e(2562405183),d=e(7268021173),u=e(3677514771);function _(){return _=Object.assign||function(I){for(var p=1;p<arguments.length;p++){var y=arguments[p];for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(I[g]=y[g])}return I},_.apply(this,arguments)}c(_,"_extends");const v=new o.Ay("trials"),h=c(I=>{let{badgeTheme:p=s.Vu.Purple,badgeSize:y=s.vj.Medium,className:g,hideTooltip:E,uiComponentVariant:M,...T}=I;const D=(0,r.d4)(P=>(0,l.tc)((0,u.H7)(P))),C=(0,r.d4)(P=>(0,d.tu)(P)===a.i6.standard.id),m=(0,t.useMemo)(()=>({uiComponentVariant:M}),[M]);if(!(D||C))return null;const O=v.t("PRO");return E?t.createElement(s.Ay,{autoClogProps:m,badgeTheme:p,className:g,size:y}):t.createElement(i.A,_({ariaLabel:O,uiComponentVariant:M},T),t.createElement("span",{className:(0,n.A)("p-trial_pro_badge",g),"data-qa":"trial_pro_badge"},t.createElement(s.Ay,{autoClogProps:m,badgeTheme:p,size:y})))},"TrialProBadge");h.displayName="TrialProBadge";const f=h},3994181705:(x,A,e)=>{"use strict";e.d(A,{A:()=>h,G:()=>u});var t=e(3134334389),n=e(6122756707),s=e(735940183),i=e(6323355797),l=e(2562405183),o=e(3810478625),a=e(7268021173),r=e(1384076438);const d=new s.Ay("trials");var u;(function(f){f.HuddlesFreemiumDeprecated="huddles_freemium"})(u||(u={}));const _=i.ew.PAID_FEATURE_TRIAL,h=c(f=>{let{isFreemium:I,tooltipText:p,promoType:y,promoSubtype:g,variant:E}=f;const M=(0,n.wA)(),T=(0,l.d4)(o.g),D=(0,l.d4)(a.iH);(0,t.useEffect)(()=>{y&&M((0,r.A)({campaignType:y,campaignSubType:g,reason:"trial_tooltip"}))},[M,y,g]);const C=(0,l.d4)(L=>y?(0,a.bp)(L,y,g):!1),m=(0,l.d4)(L=>y?(0,a.hq)(L,y,g):!1),O=c(()=>{if(D)switch(E){case u.HuddlesFreemiumDeprecated:return T?void 0:d.t("Huddles with more than two people are a paid feature, available with your free trial");default:return d.t("This is a paid feature, available with your free trial")}if(m)switch(E){case u.HuddlesFreemiumDeprecated:return T?void 0:d.t("Huddles with more than two people are a paid feature, available with a free, {trialLength}-day trial",{trialLength:_});default:return d.t("This is a paid feature, available with a free, {trialLength}-day trial",{trialLength:_})}switch(E){case u.HuddlesFreemiumDeprecated:return T?void 0:d.t("Huddles with more than two people are a paid feature, available with an upgrade");default:return d.t("This is a paid feature, available with an upgrade")}},"getTooltipText"),P=c(()=>D?d.t("This feature is unlimited with your free trial"):m?d.t("This feature is unlimited with a free trial, {trialLength}-day trial",{trialLength:_}):d.t("This feature is unlimited with an upgrade"),"getFreemiumTooltipText");if(C)return{};const R=I?P():O();return p?{tooltipTitle:p,tooltipBody:R}:{tooltipTitle:R}},"useTrialProBadgeTooltipText")},2481088989:(x,A,e)=>{"use strict";e.d(A,{A:()=>o,D:()=>i});var t=e(3134334389),n=e(7949425452),s=e(5641442783);const i={RIGHT_ALIGNED:"right_aligned",LEFT_ALIGNED:"left_aligned"};function l(a){let{position:r=i.RIGHT_ALIGNED,isTrialVariant:d,uiComponentVariant:u,size:_}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{position:i.RIGHT_ALIGNED,isTrialVariant:!1,uiComponentVariant:void 0,size:n.vj.Medium};const v=t.createElement("span",{className:`p-with_pro_badge__text--${r}`},a),h=d?t.createElement(s.A,{className:"p-with_pro_badge__badge",uiComponentVariant:u,badgeSize:_}):t.createElement(n.Ay,{className:"p-with_pro_badge__badge",size:_});let f;return r===i.RIGHT_ALIGNED?f=t.createElement(t.Fragment,null,v,h):f=t.createElement(t.Fragment,null,h,v),t.createElement("div",{className:"p-with_pro_badge"},f)}c(l,"WithProBadge"),l.displayName="WithProBadge";const o=l},5791262841:(x,A,e)=>{"use strict";e.d(A,{A:()=>B});var t=e(9706240641),n=e(3134334389),s=e(6122756707),i=e(4481313819),l=e(1267040415),o=e(2934784510),a=e(4963725897),r=e(267465465),d=e(280819219),u=e(8719380546),_=e(8683010724);const h=c(K=>{let{checklistItems:b,checklistHeading:S}=K;return n.createElement("div",{className:"p-modal_content_checklist__checklist"},n.createElement("div",{className:"p-modal_content_checklist__heading"},S),b.map(G=>n.createElement("div",{key:G,className:"p-modal_content_checklist__checklist_item"},n.createElement("div",{className:"p-modal_content_checklist__checklist_check"},n.createElement(_.A,{name:"check",size:"16",variation:"filled"})),n.createElement("div",null,G))))},"ModalContentChecklist");var f=e(5267010247),I=e(8822892075),p=e(7940058138),y=e(980293773),g=e(1224315998),E=e(2689960678),M=e(735940183),T=e(2562405183),D=e(6259241484),C=e(8871937520),m=e(9003400431),O=e(5512605238);const P=new M.Ay("trials"),R={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},L={elementName:"upgrade_link",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},V=c(K=>{let{modalClassName:b,modalCloseButtonTheme:S,modalSubtitle:G,modalTitle:H,modalType:U=r.H.VERTICAL_BANNER,modalVideoClassName:F,modalVideoFileName:Y,modalLottieAnimation:Z,modalVideoPosterExtension:ee="",modalBannerBackgroundColor:j="",modalChecklistHeading:ge="",modalChecklistItems:ne=E.Ml,promoType:ue,promoSubtype:he,imgSrc:be,isEligibleForTrial:xe,startTrialContext:Le,uiPage:fe,uiComponentVariant:se,uiStep:Q,onSpeedbumpContinue:k,onSpeedbumpContinueLabel:N,onTrialStart:$,skipSpeedbump:W,"data-qa":q,omitSecondaryCTA:re=!1}=K;const le=(0,s.wA)(),Ae=(0,T.d4)(O.F),[Te,Ne]=(0,n.useState)(!1),pe=(0,n.useRef)(""),Ee=(0,n.useCallback)(()=>{le((0,m.O)())},[le]),oe=(0,n.useCallback)((0,t.coroutine)(function*(){let{trialExpirationDate:Be}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Be&&(pe.current=Be,$==null||$(),W?Ee():Ne(!0))}),[Ee,$,W]),ce=(0,n.useCallback)(()=>{Ee(),le((0,f.o)((0,I.ZF)(p.c.PaidBenefits)))},[le,Ee]),ke=(0,n.useCallback)(()=>{Ee(),k==null||k()},[Ee,k]),Ce=n.createElement(h,{checklistHeading:ge,checklistItems:ne}),Me=(0,n.useMemo)(()=>[D.xu.SIDEBAR_MENU_HEADER],[]),Se=n.createElement(a.A,{"data-qa":"trial_entry_point_modal_start_trial_button",autoClogProps:R,reason:"start_trial_from_trial_entry_point_modal",context:Le,promoType:ue,promoSubtype:he,onRequestComplete:oe,megaphoneSpacesToRefresh:Me},P.t("Start Free Trial")),Ue=n.createElement(l.A,{"data-qa":"trial_entry_point_modal_plans_page_button",type:"primary",autoClogProps:L,onClick:Ee},P.t("See Upgrade Options")),He=xe?Se:Ue,Ye=r.H.HORIZONTAL_BANNER?"800px":"586px",J=c(()=>{if(!pe.current)return null;const Be=n.createElement("div",{className:"display_flex"},n.createElement(d.A,{className:"p-trial_entry_point_modal__speedbump_icon",type:"sparkles-filled"}),P.t("Ta-da! Your team\u2019s on a free trial")),Ke=n.createElement("div",{className:"p-trial_entry_point_modal__speedbump_description"},P.rt("You\u2019re on the most popular premium plan, Slack Pro \u2014 with features designed to help teams work better, together \u2014 through {trialExpirationDate}, absolutely free.",{trialExpirationDate:(0,C.Pd)(pe.current)})),Fe=c(()=>N||(k?P.t("Continue"):P.t("Find Out More")),"getContinueButtonLabel")();let Ie=P.t("Dismiss"),ze=ce,qe=Ee,st="speedbump_learn_more",ut="speedbump_dismiss";return k&&(Ie=P.t("Learn More"),ze=ke,qe=ce,st="speedbump_continue",ut="speedbump_learn_more"),n.createElement(y.ty,{className:"p-trial_entry_point_modal__speedbump","data-qa":"trial_entry_point_modal_speedbump",heading:Be,description:Ke,continueButtonLabel:Fe,cancelButtonLabel:Ie,onCancel:re?void 0:qe,onContinue:ze,continueButtonType:"primary",autoFocusContinueButton:!0,autoClogProps:{continueButton:{elementName:st,onClick:{enableClogAction:!0}},cancelButton:{elementName:ut,onClick:{enableClogAction:!0}}}})},"renderSpeedbump");J.displayName="renderSpeedbump";const ae=n.createElement("div",{className:"p-trial_entry_point_modal__footer_text","data-qa":"trial_entry_point_modal_footer_text"},P.t("No credit card required.")),Ve=n.createElement("div",{className:"p-trial_entry_point_modal__footer"},He,xe&&ae,xe&&n.createElement(o.A,{shouldShow:Ae}),Te&&J());return n.createElement(i.A,{eventId:g.EventId.UPGRDEXP_TRIAL,clogImpression:!0,uiComponentName:g.UiComponentName.TRIAL_ENTRY_POINT_MODAL,uiComponentVariant:se,uiStep:Q,uiPage:fe},n.createElement(u.A,{bannerBackgroundColor:j,"data-qa":q,imgSrc:be,title:H,subtitle:G,bodyContent:Ce,footerContent:Ve,onRequestClose:Ee,maxWidth:Ye,className:b,closeButtonTheme:S,type:U,videoFilename:Y,videoPosterExtension:ee,videoClassName:F,lottieAnimation:Z}))},"TrialEntryPointModal");V.displayName="TrialEntryPointModal";const B=V},2934784510:(x,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(6122756707),s=e(2670882607),i=e(2562405183),l=e(2047021170),o=e(1939990292);const r=t.memo(d=>{let{shouldShow:u=!1}=d;const _=(0,n.wA)(),[v,h]=(0,t.useState)(),[f,I]=(0,t.useState)(!1),p=(0,t.useCallback)(E=>{E&&E.then(M=>h(M))},[h]),y=(0,i.d4)(E=>!(0,l.ty)(E,"a11y_animations")),g=(0,t.useCallback)(()=>e.e("trial-celebration-confetti.json").then(e.t.bind(e,4831955131,23)),[]);return!u||y||f?null:(v&&v._cbs&&v.addEventListener("complete",()=>{_((0,o.DJ)(!1)),I(!0)}),t.createElement(s.e,{autoplay:!0,className:"p-trial_start_confetti",getAnimationImport:g,ref:p}))})},4963725897:(x,A,e)=>{"use strict";e.d(A,{A:()=>V});var t=e(3134334389),n=e(6122756707),s=e(7715417323),i=e(4481313819),l=e(4585652590),o=e(6084388622),a=e(8739505998),r=e(5733135148),d=e(1224315998),u=e(735940183),_=e(2562405183),v=e(1655938719),h=e(1939990292),f=e(962959561),I=e(398781533),p=e(9706240641),y=e(6304789565),g=e(1384076438),E=e(677609895),M=e(6323355797),T=e(3677514771);const D=(0,y.Ay)("Open trial checkout or plans page if user can purchase",function(){var B=(0,p.coroutine)(function*(K,b,S){let{campaignType:G,campaignSubType:H}=S;const U=(0,T.H7)(b()),F=(0,M.tc)(U,G,H),Y=(0,M.hZ)({entryPoint:G,team:U}),{isEligible:Z}=yield K((0,g.A)({campaignType:G,campaignSubType:H,reason:"auto_charge_trial_start_cta"}));Z&&(0,f.L9)(b())&&(0,E.X)(b())?window.open(F,"_blank"):window.open(Y,"_blank")});return function(K,b,S){return B.apply(this,arguments)}}());D.meta={name:"createThunk",key:"createThunkpaidFeatureTrialAutoChargeOpenTrialCheckout",description:"Open trial checkout or plans page if user can purchase"};var C=e(5773584938);function m(){return m=Object.assign||function(B){for(var K=1;K<arguments.length;K++){var b=arguments[K];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S])}return B},m.apply(this,arguments)}c(m,"_extends");const O=new u.Ay("trials"),P={name:"warning"},R=c(B=>{let{children:K,reason:b,context:S,megaphoneSpacesToRefresh:G,promoType:H,promoSubtype:U,onClick:F,onRequestComplete:Y=s.A,onRequestError:Z=s.A,useLink:ee,refToForward:j,...ge}=B;const ne=(0,n.wA)(),ue=(0,_.d4)(C.Ii),he=(0,f.aJ)({campaignType:H,campaignSubType:U}),[be,xe]=(0,t.useState)(!1),[Le,fe]=(0,t.useState)(!1),se=(0,t.useCallback)(()=>{xe(!0),fe(!1),Z()},[Z]),Q=(0,t.useCallback)(()=>{Le||(fe(!0),xe(!1),ne((0,l.a)({reason:b,campaignType:H,campaignSubType:U,context:S})).then($=>{let{trial_expiration_date:W}=$;ne((0,h.DJ)(!0)),Y({trialExpirationDate:W}),ne((0,v.yJ)({additionalSpaces:G,megaphoneReason:"trial_start_request_complete"})),W||se()}).catch(se))},[Le,ne,b,H,U,S,se,Y,G]),k=(0,t.useCallback)(()=>{ne((0,I.Q)({entryPoint:"trial_start_cta",campaignType:H,campaignSubType:U,reason:"auto_charge_trial_check"})),ue&&he?ne(D({campaignType:H,campaignSubType:U})):Q(),F==null||F()},[F,Q,ne,H,U,ue,he]),N=ee?t.createElement(a.A,m({ref:j},ge,{onClick:k}),K):t.createElement(o.lV,m({ref:j},ge,{onClick:k,loading:Le,"aria-label":void 0}),K);return t.createElement(i.A,{eventId:d.EventId.UPGRDEXP_TRIAL_START,clogImpression:!0},N,be&&t.createElement(r.Ay,{svgIconProps:P,svgIconClassName:"align_self_start",shouldAutoFade:!1},O.t("Something went wrong. Try again later.",{fallbackHash:"248cbe7878bb83237a17ae6abe635e6251a6517a",fallbackHashNs:"channel_modal"})))},"TrialStartCTABase");R.displayName="TrialStartCTABase";const V=t.forwardRef((B,K)=>t.createElement(R,m({},B,{refToForward:K})))},1388835426:(x,A,e)=>{"use strict";e.d(A,{S:()=>n});var t=e(735940183);const n=c(s=>{switch((0,t.Yp)()){case"de-DE":return{translation:s["de-DE"],enableMediaCaptions:!0};case"en-GB":return{translation:s["en-GB"],enableMediaCaptions:!1};case"en-US":return{translation:s["en-US"],enableMediaCaptions:!1};case"es-ES":return{translation:s["es-ES"],enableMediaCaptions:!0};case"es-LA":return{translation:s["es-LA"],enableMediaCaptions:!0};case"fr-FR":return{translation:s["fr-FR"],enableMediaCaptions:!0};case"it-IT":return{translation:s["it-IT"],enableMediaCaptions:!0};case"ja-JP":return{translation:s["ja-JP"],enableMediaCaptions:!0};case"ko-KR":return{translation:s["ko-KR"],enableMediaCaptions:!0};case"pt-BR":return{translation:s["pt-BR"],enableMediaCaptions:!0};case"zh-CN":return{translation:s["zh-CN"],enableMediaCaptions:!0};case"zh-TW":return{translation:s["zh-TW"],enableMediaCaptions:!0};default:return{translation:s["en-US"],enableMediaCaptions:!0}}},"useVideoTranslation")},5712872315:(x,A,e)=>{"use strict";e.d(A,{B:()=>n,D:()=>t});var t;(function(s){s.SMALL="small",s.MEDIUM="medium",s.LARGE="large"})(t||(t={}));var n;(function(s){s.NONE="none",s.PURPLE="purple",s.LIGHT_PURPLE="light_purple",s.BLUE="blue",s.ERROR="error",s.HORCHATA="horchata",s.SUNFLOWER="sunflower"})(n||(n={}))},3328083357:(x,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(3134334389),n=e(5255740490),s=e(5712872315),i=e(280819219),l=e(581167618),o=e(6105929840),a=e(1224315998),r=e(735940183);const d=new r.Ay("upgrades_kit"),u={action:a.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:a.ElementType.X},_=c(h=>{let{className:f,iconType:I,customIcon:p,image:y,heading:g,children:E,onDismiss:M,useRoundedCorners:T=!0,showBorder:D=!0,size:C=s.D.MEDIUM,theme:m=s.B.PURPLE,"data-qa":O="",primaryCTA:P,secondaryCTA:R}=h;const L=c(()=>{let S;const G="p-upgrades_alert_banner__icon";return p?S=t.createElement("div",{className:G},p):y?S=t.createElement("div",{className:(0,n.A)(G,"p-upgrades_alert_banner__icon--image")},y):I&&(S=t.createElement(i.A,{className:G,size:C,theme:m,type:I})),S},"renderIcon");L.displayName="renderIcon";const V=c(()=>t.createElement(o.A,{className:"p-upgrades_alert_banner__close_icon","data-qa":"alert_banner_close_button",icon:"times",size:"small","aria-label":d.t("Dismiss"),onClick:M,autoClogProps:u}),"renderCloseIcon");V.displayName="renderCloseIcon";const B=c(()=>!P&&!R?null:t.createElement("div",{className:"p-upgrades_alert_banner__button_container"},P,R),"renderButtons");B.displayName="renderButtons";const K=L(),b=(0,n.A)("p-upgrades_alert_banner",`p-upgrades_alert_banner--${C}`,`p-upgrades_alert_banner--${m}`,f,{"p-upgrades_alert_banner--with_close_icon":!!M,"p-upgrades_alert_banner--rounded_corners":T,"p-upgrades_alert_banner--no_border":!D,"p-upgrades_alert_banner--with_image":!!y});return t.createElement("div",{className:"full_width"},t.createElement(l.Ay,{className:b,"data-qa":O,customIcon:K,heading:g,type:K?l.QE.boxed:l.QE.custom},t.createElement("div",{className:"p-upgrades_alert_banner__body"},E),B(),M&&V()))},"AlertBanner");_.displayName="AlertBanner";const v=_},7433432223:(x,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(5255740490),s=e(5712872315),i=e(6755588906),l=e(581167618),o=e(6084388622),a=e(6308822),r=e(6105929840),d=e(8683010724),u=e(1224315998),_=e(735940183);function v(){return v=Object.assign||function(E){for(var M=1;M<arguments.length;M++){var T=arguments[M];for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(E[D]=T[D])}return E},v.apply(this,arguments)}c(v,"_extends");const h=new _.Ay("upgrades_kit"),f=425,I={action:u.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:u.ElementType.X},p=c(E=>{let{className:M,image:T,heading:D,isLoading:C,children:m,onDismiss:O,useRoundedCorners:P=!0,showBorder:R=!0,size:L=s.D.MEDIUM,theme:V=s.B.HORCHATA,primaryCTA:B,secondaryCTA:K,withMargins:b,iconProps:S,"data-qa":G,columnWidth:H=0}=E;const U=c(()=>t.createElement(r.A,{className:"p-upgrades_alert_banner_v2__close_icon",icon:"times",size:"small","aria-label":h.t("Dismiss"),onClick:O,autoClogProps:I}),"renderCloseIcon"),F=c(()=>{const j=t.createElement("div",null,t.createElement("div",{className:"p-upgrades_alert_banner_v2__heading"},D),t.createElement("div",{className:"p-upgrades_alert_banner_v2__body"},m));if(S){const ge={inline:!0,size:"20",...S};return t.createElement("div",{className:"display_flex"},t.createElement("span",{className:`margin_right_50 p-upgrades_alert_banner_v2__icon--${V}`},t.createElement(d.A,v({},ge))),t.createElement("div",{className:"display_flex flex_direction_column"},j))}return j},"renderContent");F.displayName="renderContent";const Y=c(()=>!B&&!K?null:t.createElement("div",{className:"p-upgrades_alert_banner_v2__button_container"},C?t.createElement(o.lV,{loading:!0,"aria-label":void 0}):t.createElement(t.Fragment,null,B,K)),"renderButtons");Y.displayName="renderButtons";const Z=H<f,ee=(0,n.A)("p-upgrades_alert_banner_v2",`p-upgrades_alert_banner_v2--${L}`,`p-upgrades_alert_banner_v2--${V}`,M,{"p-upgrades_alert_banner_v2--with_close_icon":!!O,"p-upgrades_alert_banner_v2--rounded_corners":P,"p-upgrades_alert_banner_v2--no_border":!R,"p-upgrades_alert_banner_v2--with_image":!!T,"p-upgrades_alert_banner_v2--with_margins":b,"p-upgrades_alert_banner_v2--narrow":Z});return t.createElement("div",{className:"full_width"},t.createElement(l.Ay,{className:ee,type:l.QE.inline,"data-qa":G},t.createElement("div",{className:"p-upgrades_alert_banner_v2__content"},C?t.createElement(a.A,{color:"white",inline:!0}):F(),Y(),O&&U())))},"AlertBanner");p.displayName="AlertBanner";const g=(0,i.t)(p)},267465465:(x,A,e)=>{"use strict";e.d(A,{H:()=>t});var t;(function(n){n.MULTI_PANE="multi_pane",n.SINGLE_PANE="single_pane",n.VERTICAL_BANNER="vertical_banner",n.HORIZONTAL_BANNER="horizontal_banner"})(t||(t={}))},280819219:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(5712872315);const l=t.memo(u=>{let{animationDelay:_,size:v="large"}=u;const h=48,f=h-(v==="large"?48:36),I=h*2,p="#1D9BD1",y="#F2C744",g="#007A5A",E="#E01E5A",M={animationDelay:`${_||0}s`},T=c((O,P)=>t.createElement("path",{d:"M2 10.3L6 10.39C8.2 10.4 10 8.6 10 6.3C10 4 8.2 2.1 6 2C3.79 2 2 3.85 2 6.15L2 10.3Z",fill:P,className:O,style:M}),"renderDrop"),D=c((O,P)=>t.createElement("circle",{r:"4",fill:P,className:O,style:M}),"renderCircle"),C=c((O,P)=>t.createElement("path",{d:"M6.47 1.27C6.3 0.83 5.69 0.83 5.53 1.27L4.46 4.16C4.4 4.3 4.3 4.41 4.16 4.46L1.27 5.53C0.83 5.69 0.831 6.3 1.27 6.47L4.16 7.5C4.3 7.59 4.41 7.7 4.46 7.84L5.53 10.73C5.69 11.17 6.31 11.17 6.47 10.73L7.54 7.84C7.59 7.7 7.7 7.59 7.84 7.54L10.73 6.47C11.17 6.31 11.17 5.69 10.73 5.53L7.84 4.46C7.7 4.41 7.59 4.3 7.54 4.16L6.47 1.27Z",fill:P,className:O,style:M}),"renderStar"),m=c((O,P)=>t.createElement("path",{d:"M1 5.5C1 4.12 2.12 3 3.5 3H8.5C9.88 3 11 4.12 11 5.5V5.5C11 6.88 9.88 8 8.5 8H3.5C2.12 8 1 6.88 1 5.5V5.5Z",fill:P,className:O,style:M}),"renderSprinkle");return t.createElement("svg",{className:(0,n.A)("position_absolute",`p-upgrades_icon_celebration_animation--${v}`),style:{top:`-${h/2+f/2}px`,left:`-${h/2+f/2}px`},width:I,height:I,viewBox:`0 0 ${I} ${I}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},T("p-upgrades_icon_celebration_animation__drop_top_right",p),D("p-upgrades_icon_celebration_animation__circle_top_right",y),D("p-upgrades_icon_celebration_animation__circle_right",g),C("p-upgrades_icon_celebration_animation__star_bottom_right",y),D("p-upgrades_icon_celebration_animation__circle_bottom_right",y),m("p-upgrades_icon_celebration_animation__sprinkle_bottom_left",E),T("p-upgrades_icon_celebration_animation__drop_left",y),D("p-upgrades_icon_celebration_animation__circle_top_left",p),C("p-upgrades_icon_celebration_animation__star_top_left",g),m("p-upgrades_icon_celebration_animation__sprinkle_top_left",E))});var o=e(1610251172);function a(){return a=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},a.apply(this,arguments)}c(a,"_extends");const r=c(u=>{let{className:_,animationProps:v,hasBorder:h,type:f,size:I=s.D.MEDIUM,theme:p=s.B.PURPLE,showAnimation:y}=u;const g=(0,n.A)(`p-upgrades_icon--${I}`,`p-upgrades_icon--${p}`,_),E=t.createElement(o.A,{className:g,size:"inherit",type:f});if(!h)return E;const M=(0,n.A)("p-upgrades_icon_container",`p-upgrades_icon_container--${I}`,`p-upgrades_icon_container--${p}`,{"p-upgrades_icon_container--with_animation":y});return t.createElement("div",{className:M},E,y&&t.createElement(l,a({size:I},v)))},"UpgradesIcon");r.displayName="UpgradesIcon";const d=r},5207331754:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(980293773);const l=c(o=>{let{children:a,className:r}=o;return t.createElement(s.qf,{className:(0,n.A)("p-upgrades_modal__content_section",r)},a)},"ModalBody")},9240394198:(x,A,e)=>{"use strict";e.d(A,{N:()=>g,A:()=>M});var t=e(3134334389),n=e(5255740490),s=e(267465465),i=e(7949425452),l=e(5207331754),o=e(6000244203),a=e(3357053101),r=e(1935364562),d=e(3801841745),u=e(581167618),_=e(980293773);const h=c(T=>{let{banner:D,bodyContent:C,footerContent:m,showProBadge:O=!0,subtitle:P,title:R,error:L}=T;return t.createElement(t.Fragment,null,t.createElement("div",{className:"p-upgrades_modal_with_banner_horizontal__left_panel"},t.createElement(d.A,{flexDirection:"column",gap:20},L&&t.createElement(u.Ay,{icon:"warning",level:"error",className:"p-upgrades_modal_with_banner_horizontal__error_alert"},L),t.createElement(a.A,{headerClassName:"p-upgrades_modal_with_banner_horizontal__header",titleClassName:"padding_top_0",title:R},O&&t.createElement(i.Ay,{className:"p-upgrades_modal_with_banner_horizontal__pro_badge"}))),t.createElement(_.$m,null,P&&t.createElement(r.A,{className:"p-upgrades_modal_with_banner_horizontal__subtitle",subtitle:P}),t.createElement(l.A,{className:"p-upgrades_modal_with_banner_horizontal__body"},C)),t.createElement(o.A,{className:"p-upgrades_modal_with_banner_horizontal__footer"},m)),D)},"ModalContentHorizontalBanner"),f=c(T=>{let{banner:D,bodyContent:C,footerContent:m,showProBadge:O=!0,subtitle:P,title:R}=T;const L=t.createElement(t.Fragment,null,R,O&&t.createElement(i.Ay,{className:"p-upgrades_modal_with_banner_vertical__pro_badge"}));return t.createElement(t.Fragment,null,t.createElement(a.A,{titleClassName:"p-upgrades_modal_with_banner_vertical__title",title:L},D),t.createElement(_.$m,null,P&&t.createElement(r.A,{className:"p-upgrades_modal_with_banner_vertical__subtitle",subtitle:P}),t.createElement(l.A,{className:"p-upgrades_modal_with_banner_vertical__body"},C)),t.createElement(o.A,null,m))},"ModalContentVerticalBanner");f.displayName="ModalContentVerticalBanner";const I=f;var p=e(9421999304);function y(){return y=Object.assign||function(T){for(var D=1;D<arguments.length;D++){var C=arguments[D];for(var m in C)Object.prototype.hasOwnProperty.call(C,m)&&(T[m]=C[m])}return T},y.apply(this,arguments)}c(y,"_extends");var g;(function(T){T.LIGHT="light",T.DARK="dark",T.GOLD="gold",T.GRAY="gray"})(g||(g={}));const E=c(T=>{let{bannerBackgroundColor:D,bodyContent:C,centered:m,className:O,closeButtonTheme:P=g.DARK,closeModal:R,dataQa:L,footerContent:V,hero:B,imgSrc:K,imgSrcSet:b,maxWidth:S,shouldCloseOnOverlayClick:G,showProBadge:H=!0,subtitle:U,title:F,error:Y,type:Z,videoFilename:ee,videoPosterExtension:j="png",videoClassName:ge,lottieAnimation:ne,...ue}=T;const he=(0,p.JK)(),be=`${ee}${he==="en-US"?"":`.${he}`}`,xe=`p-upgrades_modal_with_banner__banner--${Z}`,Le=c(()=>B?t.createElement("div",{className:xe},B):b?t.createElement("img",{className:xe,alt:"",srcSet:b}):K?t.createElement("img",{className:xe,alt:"",src:K}):ee?t.createElement("video",{playsInline:!0,autoPlay:!0,muted:!0,className:(0,n.A)(xe,ge),poster:`${be}.${j}`},t.createElement("source",{type:"video/mp4",src:`${be}.mp4`}),t.createElement("source",{type:"video/webm",src:`${be}.webm`})):ne?t.createElement("div",{className:"p-upgrades_modal__lottie_container"},ne):null,"getModalBanner");Le.displayName="getModalBanner";const fe=t.createElement("div",{style:{backgroundColor:D},className:`p-upgrades_modal_with_banner__banner_container--${Z}`},Le());return t.createElement(_.dW,y({className:(0,n.A)("p-upgrades_modal_with_banner",`p-upgrades_modal_with_banner__base_modal--${Z}`,`p-upgrades_modal_with_banner--close_button_${P}`,"p-upgrades_modal_with_banner--close_button",O),centered:m,closeModal:R,dataQa:L,maxWidth:S,shouldCloseOnOverlayClick:G},ue),Z===s.H.VERTICAL_BANNER?t.createElement(I,{banner:fe,bodyContent:C,footerContent:V,showProBadge:H,subtitle:U,title:F}):t.createElement(h,{banner:fe,bodyContent:C,footerContent:V,showProBadge:H,subtitle:U,title:F,error:Y}))},"ModalContentWithBanner");E.displayName="ModalContentWithBanner";const M=E},6000244203:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(980293773);const l=c(o=>{let{children:a,className:r}=o;return t.createElement(s.jl,{className:"p-upgrades_modal__footer"},t.createElement(s.ox,{className:(0,n.A)("p-upgrades_modal__footer_actions",r)},a))},"ModalFooter")},3357053101:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(980293773);const l=c(o=>{let{headerClassName:a,titleClassName:r,children:d,title:u}=o;return t.createElement(s.rQ,{className:(0,n.A)("p-upgrades_modal__header",a)},d,t.createElement(s.Rc,{className:(0,n.A)("p-upgrades_modal__title",r),title:u}))},"ModalHeader")},1935364562:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(5255740490);const i=c(l=>{let{className:o,subtitle:a}=l;return t.createElement("div",{className:(0,n.A)("p-upgrades_modal__subtitle",o)},a)},"ModalSubtitle")},8719380546:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(5255740490),s=e(267465465),i=e(5712872315),l=e(280819219),o=e(5207331754),a=e(6000244203),r=e(3357053101),d=e(1935364562),u=e(980293773);const v=c(g=>{let{subtitle:E,bodyContent:M,footerContent:T,title:D,titleImage:C,titleVideo:m,titleVideoClassName:O,titleIcon:P,showTitleIconAnimation:R,headerClassName:L,footerActionsClassName:V,theme:B}=g;return t.createElement(t.Fragment,null,t.createElement(r.A,{headerClassName:(0,n.A)(L,{"p-upgrades_modal__header--with_animation":R}),title:D},C,m&&t.createElement("div",{className:(0,n.A)(O)},m),P&&t.createElement("div",{className:"p-upgrades_modal__icon"},t.createElement(l.A,{hasBorder:!0,size:i.D.LARGE,type:P,showAnimation:!!R,theme:B}))),E&&t.createElement(d.A,{subtitle:E}),M&&t.createElement(u.$m,null,t.createElement(o.A,null,M)),t.createElement(a.A,{className:V},T))},"ModalContent");var h=e(9240394198),f=e(4376397139);function I(){return I=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var M=arguments[E];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(g[T]=M[T])}return g},I.apply(this,arguments)}c(I,"_extends");const p=c(g=>{const{className:E,maxWidth:M,onRequestClose:T,type:D,"data-qa":C,UNSAFE_parentSelector:m}=g,P={className:(0,n.A)("p-upgrades_modal__container",E),closeModal:T,shouldCloseOnOverlayClick:!0,centered:!0,maxWidth:M,dataQa:C,UNSAFE_parentSelector:m};return D===s.H.MULTI_PANE?t.createElement(f.A,I({},g,P)):D===s.H.VERTICAL_BANNER||D===s.H.HORIZONTAL_BANNER?t.createElement(h.A,I({},g,P)):t.createElement(u.dW,I({},P),t.createElement(v,I({},g)))},"Modal");p.displayName="Modal";const y=p},9371668729:(x,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(3134334389),n=e(5255740490),s=e(4481313819),i=e(7949425452),l=e(3994181705),o=e(2312625946),a=e(1224315998),r=e(2562405183),d=e(7268021173);function u(){return u=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var I=arguments[f];for(var p in I)Object.prototype.hasOwnProperty.call(I,p)&&(h[p]=I[p])}return h},u.apply(this,arguments)}c(u,"_extends");const _=c(h=>{let{ariaLabel:f,tooltipText:I,children:p,onClick:y,isFreemium:g,promoType:E,promoSubtype:M,showProBadge:T,tooltipClassName:D,uiComponentVariant:C,variant:m,toolTipZIndex:O,toolTipPosition:P,...R}=h;const{tooltipTitle:L,tooltipBody:V}=(0,l.A)({isFreemium:g,tooltipText:I,promoType:E,promoSubtype:M,variant:m}),B=(0,r.d4)(S=>(0,d.bp)(S,E,M)),K=V?`${L} - ${V}`:L;if(B)return p;const b=t.createElement(s.A,{clogImpression:!0,eventId:a.EventId.UPGRDEXP_TRIAL,uiComponentName:a.UiComponentName.TRIAL_FEATURE_TOOLTIP,uiComponentVariant:C},t.createElement("div",{className:"p-trial_feature_tooltip"},t.createElement("span",{className:"p-trial_feature_tooltip__title"},T&&t.createElement(i.Ay,{badgeTheme:i.Vu.White,className:"p-trial_feature_tooltip__pro_badge"}),t.createElement("div",{className:"p-trial_feature_tooltip__title_text"},L)),t.createElement("div",{className:"p-trial_feature_tooltip__body"},V)));return t.createElement(o.Ay,u({tipClassName:(0,n.A)("p-trial_feature_tooltip__container",D),tip:b,onClick:y,zIndex:O,position:P,"aria-label":f?`${f}: ${K}`:`${K}`},R),p)},"TrialFeatureTooltip");_.displayName="TrialFeatureTooltip";const v=_},4874502712:(x,A,e)=>{"use strict";e.d(A,{P1:()=>r,RU:()=>d,jv:()=>l,yq:()=>i,zs:()=>a});var t=e(2384831516),n=e(4761125736),s=e(5868036555);const i=(0,t.Mz)(u=>(0,n._Z)(u,"improved_workflows_to_channel",!1)==="on");i.meta={name:"createSelector",key:"createSelectorisImprovedWorkflowsToChannelEnabled",description:u=>(0,n._Z)(u,"improved_workflows_to_channel",!1)==="on"};const l=(0,t.Mz)(u=>(0,n._Z)(u,"workflow_composer_pills",!1)==="treatment_2_wf_hats"&&!(0,s.Fv)(u));l.meta={name:"createSelector",key:"createSelectorisWorkflowComposerHatV3Enabled",description:u=>(0,n._Z)(u,"workflow_composer_pills",!1)==="treatment_2_wf_hats"&&!(0,s.Fv)(u)};const o=(0,t.Mz)(u=>(0,n._Z)(u,"workflow_composer_pills",!1)==="treatment_wf_hat");o.meta={name:"createSelector",key:"createSelectorisWorkflowComposerHatV2Enabled",description:u=>(0,n._Z)(u,"workflow_composer_pills",!1)==="treatment_wf_hat"};const a=(0,t.Mz)(u=>(0,n._Z)(u,"workflow_composer_pills",!1)==="treatment");a.meta={name:"createSelector",key:"createSelectorisWorkflowComposerPillsEnabled",description:u=>(0,n._Z)(u,"workflow_composer_pills",!1)==="treatment"};const r=(0,t.Mz)(u=>(0,n._Z)(u,"composer_workflow_access")==="on");r.meta={name:"createSelector",key:"createSelectorisComposerWorkflowAccessEnabled",description:u=>(0,n._Z)(u,"composer_workflow_access")==="on"};const d=(0,t.Mz)(u=>(0,n._Z)(u,"composer_button_workflow_access")==="on");d.meta={name:"createSelector",key:"createSelectorisComposerButtonWorkflowAccessEnabled",description:u=>(0,n._Z)(u,"composer_button_workflow_access")==="on"}},4387298515:(x,A,e)=>{"use strict";e.d(A,{$m:()=>l,AH:()=>y,Ac:()=>a,D0:()=>h,Mh:()=>I,VR:()=>_,th:()=>d});var t=e(9706240641),n=e.n(t),s=e(6045824189);const i=(0,s.Nh)(["callsScreenshare","createBorderWindow"]),l=function(){var g=(0,t.coroutine)(function*(E,M){i.isAvailable()&&i(E,M)});return c(function(M,T){return g.apply(this,arguments)},"createBorderWindow")}(),o=(0,s.Nh)(["callsScreenshare","showBorder"]),a=function(){var g=(0,t.coroutine)(function*(){o.isAvailable()&&o()});return c(function(){return g.apply(this,arguments)},"showBorder")}(),r=(0,s.Nh)(["callsScreenshare","hideBorder"]),d=function(){var g=(0,t.coroutine)(function*(){r.isAvailable()&&r()});return c(function(){return g.apply(this,arguments)},"hideBorder")}(),u=(0,s.Nh)(["callsScreenshare","setWindowOrScreenId"]),_=function(){var g=(0,t.coroutine)(function*(E){u.isAvailable()&&u(E)});return c(function(M){return g.apply(this,arguments)},"setWindowOrScreenId")}(),v=(0,s.Nh)(["callsScreenshare","setWindowBorderWidth"]),h=function(){var g=(0,t.coroutine)(function*(E){v.isAvailable()&&v(E)});return c(function(M){return g.apply(this,arguments)},"setWindowBorderWidth")}(),f=(0,s.Nh)(["callsScreenshare","setWindowBorderColor"]),I=function(){var g=(0,t.coroutine)(function*(E,M,T,D){f.isAvailable()&&f(E,M,T,D)});return c(function(M,T,D,C){return g.apply(this,arguments)},"setWindowBorderColor")}(),p=(0,s.Nh)(["callsScreenshare","getWindowPositionAndDimensions"]),y=function(){var g=(0,t.coroutine)(function*(){if(p.isAvailable())return p()});return c(function(){return g.apply(this,arguments)},"getWindowPositionAndDimensions")}()},9289216704:(x,A,e)=>{"use strict";e.d(A,{Oi:()=>s,XC:()=>n,aH:()=>l,mt:()=>i});var t=e(571104883);const n=(0,t.cX)()?"x-apple.systempreferences:com.apple.preference.security?Privacy_ScreenCapture":(0,t.uF)()?"ms-settings:privacy":null,s=(0,t.cX)()?"x-apple.systempreferences:com.apple.preference.security?Privacy_Camera":(0,t.uF)()?"ms-settings:privacy-webcam":null,i=(0,t.cX)()?"x-apple.systempreferences:com.apple.preference.security?Privacy_Microphone":(0,t.uF)()?"ms-settings:privacy-microphone":null,l=(0,t.cX)()?"x-apple.systempreferences:com.apple.preference.Sound.prefPane":(0,t.uF)()?"ms-settings:sound":null},1583163054:(x,A,e)=>{"use strict";e.d(A,{Ce:()=>_,Pe:()=>d,fI:()=>v,zS:()=>l});var t=e(3245843483),n=e(571104883),s=e(735940183);const i=new s.Ay("prefs"),l=(0,t.g9M)()&&t.MD7.isAvailable()?(0,t.MD7)():"nightly",o={PROD:"prod",BETA:"beta",DOGFOOD:l},a=[o.PROD,o.BETA],r=[o.PROD,o.BETA,o.DOGFOOD];function d(h){return(h?r:a).map(I=>({value:I,label:u(I)}))}c(d,"getReleaseChannelOptions");function u(h){switch(h){case o.PROD:return i.t("Production");case o.BETA:return i.t("Beta");case o.DOGFOOD:return i.t("Dogfood",{fallbackHash:"c9e429b1798d0142b8b31e82c1f9da5d8e0c9420"});default:return i.t("Unknown")}}c(u,"getReleaseChannelDisplayName");function _(){return(0,t.g9M)()&&!(0,t.Z9F)()&&!(0,n.j9)()}c(_,"canSeeReleaseChannel");function v(){return _()&&["MSI","SlackSonic","SlackPilot"].every(h=>!navigator.userAgent.includes(h))}c(v,"canModifyReleaseChannel")},4923013394:(x,A,e)=>{"use strict";e.d(A,{Jd:()=>u,X6:()=>_,bO:()=>o,c6:()=>r,fD:()=>I,lJ:()=>f,ve:()=>a,zb:()=>d});var t=e(3398586081),n=e(571104883),s=e(3259512346),i=e(3245843483);const l="sunroof_init",o="fullscreen-ui",a=(0,t.A)(()=>!1),r=(0,t.A)(()=>(0,s.s)("25.1.1")),d=(0,t.A)(()=>(0,i.Z9F)()?(0,n.dY)("38.0.0"):!0),u=(0,t.A)(()=>{if(!(0,n.y3)())return!1;const{titleBarStyle:p}=(0,i.oQe)("environment")||{},{debugFeatures:y}=(0,i.oQe)("settings")||{};return p==="custom-extension"||(y==null?void 0:y.includes("window-chrome"))}),_=(0,t.A)(()=>(0,n.WB)()&&(0,n.dY)("4.33.90")),v=c(()=>{if(!_())return!1;const{useHwAcceleration:p,windowVibrancy:y}=(0,i.oQe)("settings")||{};return p&&y},"shouldEnableWindowSunroof"),h=(0,t.A)(()=>!(0,n.dY)("4.35.97")),f=c(()=>v()?(0,n.cX)()?{transparent:h(),vibrancy:o,backgroundColor:null}:{}:{},"maybeGetSunroofWindowOptions");function I(p){const{windowVibrancy:y}=(0,i.oQe)("settings")||{};if(typeof y>"u")return;if(y&&(!p.experimentDesktopIa4SunroofEnabled||!v())){(0,i.cGU)({name:"windowVibrancy",value:!1});try{localStorage.removeItem(l)}catch{}return}const g=!!localStorage.getItem(l);if(p.experimentDesktopIa4SunroofEnabled&&!g&&!y&&_()){(0,i.cGU)({name:"windowVibrancy",value:!0});try{localStorage.setItem(l,"1")}catch{}}}c(I,"maybeToggleSunroof")},4979734995:(x,A,e)=>{"use strict";e.d(A,{d:()=>o,j:()=>l});var t=e(6422693406),n=e(4724591729),s=e(796111729),i=e(4096483543);function l(a,r,d){const u="noversion",_=Date.now()/1e3,v=`/api/${a}?_x_id=${u}-${_}`,h=new XMLHttpRequest;h.onreadystatechange=()=>{if(h.readyState===4){h.onreadystatechange=null;let y;if(h.status===200||h.status===429)try{y=JSON.parse(h.responseText)}catch{(0,s.Wo)().warn("API","Unable to do anything with api response")}y=y||{ok:!1},d?d(y.ok,y,r):(0,n.Cu)()&&((0,s.Wo)().warn("API","No callback provided. Printing response"),(0,s.Wo)().warn("API",y.ok,y,r))}};const f=!0;h.open("POST",v,f);const I=new FormData;let p=!1;r?Object.keys(r).forEach(y=>{y[0]!=="_"&&(I.append(y,r[y]),p=!0)}):(0,n.Cu)()&&(0,s.Wo)().warn("API","No args provided. Bold, very bold."),p?h.send(I):h.send()}c(l,"callSlackApiUnauthed");const o=c((a,r)=>new t.S(d=>{l(a,r,(u,_)=>{d(_)})}),"callSlackApiUnauthedAsync");(0,i.A)()||(window.callSlackAPIUnauthed=(a,r,d)=>{(0,s.Wo)().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.ts"),l(a,r,d)})},4540171876:(x,A,e)=>{"use strict";e.d(A,{Db:()=>d,O3:()=>u,OB:()=>_,TE:()=>h,xB:()=>v});var t=e(2101927269),n=e(4525554634),s=e(2384831516),i=e(5109269968),l=e(6422693406),o=e(796111729),a=e(462591818),r=e(8935621861);const d=(0,s.C6)("Get call info from callId",(f,I,p)=>{let{callIds:y,reason:g}=p;const E=(0,o.Ay)({getState:I});return y.length>3&&E.warn(`fetchCallByIds being called for unexpectedly many calls at once: ${y.length}`),l.S.map(y,M=>f((0,i.apiCall)({method:"screenhero.rooms.info",args:{room:M},reason:g||"huddles-call-info"})).then(T=>{let{room:D}=T;return(0,n.Q)(D)}).catch(T=>(E.error(T,`Error while fetching call: ${M}`),null))).then(t.A)});d.meta={name:"createFetcher",key:"createFetcherfetchCallsByIds",description:"Get call info from callId"};const u=(0,s.C6)("Join a calls / huddle room",(f,I,p)=>{let{channelId:y,roomId:g,threadTs:E,shouldFetchRegion:M,teamId:T,traceId:D,parentSpanId:C,reason:m,isMultiDevice:O=!1}=p;return(M?r.A.getInstance().getNearestChimeMediaRegion(T):l.S.resolve("")).then(P=>f((0,i.apiCall)({method:"rooms.join",args:{...g&&{id:g},...y&&{channel_id:y},...E&&{thread_ts:E},regions:P,multidevice:O},traceId:D,parentSpanId:C,reason:m||"calls-api/joinRoom"})).then(R=>{var L;return{server:(0,a.YY)(R.call),roomId:R.call.call_id,regions:"",inviteResponses:void 0,virtualRoomId:g,channelId:(L=R.huddle)===null||L===void 0?void 0:L.channels[0],...R.canvas&&R.canvas.root_thread_ts&&{rootThreadTs:R.canvas.root_thread_ts},...R.canvas&&R.canvas.canvas_file_id&&{canvasFileId:R.canvas.canvas_file_id}}}))});u.meta={name:"createFetcher",key:"createFetcherjoinRoom",description:"Join a calls / huddle room"};const _=(0,s.C6)("Notify member to join huddle",(f,I,p)=>{let{reason:y,channelId:g,userId:E}=p;return f((0,i.apiCall)({method:"rooms.notifyMember",args:{channel_id:g,user_id:E},reason:y}))});_.meta={name:"createFetcher",key:"createFetchernotifyMember",description:"Notify member to join huddle"};const v=(0,s.C6)("Set a huddle topic / rename the call",(f,I,p)=>{let{roomId:y,name:g}=p;return f((0,i.apiCall)({method:"screenhero.rooms.rename",reason:"huddles-topic",args:{room:y,room_name:g}}))});v.meta={name:"createFetcher",key:"createFetcherrenameCall",description:"Set a huddle topic / rename the call"};const h=(0,s.C6)("Get a link to a huddle",(f,I,p)=>{let{reason:y,channelId:g}=p;return f((0,i.apiCall)({method:"rooms.getLink",reason:y,args:{channel_id:g}}))});h.meta={name:"createFetcher",key:"createFetchergetLink",description:"Get a link to a huddle"}},6580433553:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3297051565),n=e.n(t),s=e(5257368278),i=e(5109269968),l=e(6932877194),o=e(4423055085),a=e(6422693406),r=e(1874577777);let d=!1;const u=(0,s.A)("Sends a message",function(h,f){let{message:I,traceId:p,parentSpanId:y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const g={...I},E=f();return I.blocks&&typeof I.blocks=="object"&&(g.blocks=JSON.stringify(I.blocks)),I.unfurl&&typeof I.unfurl=="object"&&(g.unfurl=JSON.stringify(I.unfurl)),d?new a.K((M,T)=>{setTimeout(()=>{T(new Error({data:{error:"testing"},message:"testing"}))},2e3)}):(0,r.A)(E)?h((0,l.apiCallPersisted)({method:"chat.postMessage",args:g,reason:"webapp_message_send_offline",EXPEDITED:!0,traceId:p,parentSpanId:y})):h((0,i.apiCall)({method:"chat.postMessage",args:g,reason:"webapp_message_send",EXPEDITED:!0,traceId:p,parentSpanId:y}))});u.meta={name:"createFetcher",key:"createFetcherchatPostMessage",description:"Sends a message"},u.propTypes={message:n().shape({channel:n().string.isRequired,client_msg_id:n().string}).isRequired,traceId:n().string,parentSpanId:n().string};const _=u,v=c(h=>{d=!!h},"setForceMessageFailure");(0,o.ul)("setForceMessageFailure",v)},9694536345:(x,A,e)=>{"use strict";e.d(A,{O:()=>_});var t=e(8840779375),n=e(3297051565),s=e.n(n),i=e(5257368278),l=e(5109269968),o=e(796111729),a=e(28129577),r=e(5795074931),d=e(3683482182),u=e(5657872960);const _=(0,i.A)("Calls client.counts endpoint",function(v,h){let{reason:f="client-counts-api/fetchClientCounts"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const I={thread_counts_by_channel:!0,org_wide_aware:!0,include_file_channels:!0},p=(0,d.Cc)(h());return p&&(I.dry_run_last_fetched=p),v((0,l.apiCall)({method:"client.counts",args:I,reason:f})).then(y=>{if(!y||!y.ok)return{};try{const L=["U0620EL8G","WFKHTCZ29","WKLQEGRRB"],V=(0,r.WR)(h());if(L.indexOf(V)>-1){const B=(0,t.A)(y.ims,b=>({id:b.id})),K=(0,t.A)(y.mpims,b=>({id:b.id}));(0,o.Ay)({getState:h}).error("guest_to_guest_visibility",{type:"client_counts_api_results",im_list:B,mpim_list:K})}}catch(L){(0,o.Ay)({getState:h}).error("guest_to_guest_visibility",{type:"client_counts_api_results",error:L})}const{activity:g={},channels:E=[],ims:M=[],mpims:T=[],threads:D={},file_channels:C={has_unreads:!1,mention_count:0},channel_badges:m={},alerts:O=null,counts_last_fetched:P=null}=y,R={activity:g,channels:E,ims:M.map(L=>({...L,is_im:!0})),mpims:T.map(L=>({...L,is_mpim:!0})),threads:D,alerts:O,fileChannels:C,channelBadges:m,countsLastFetched:P};return(0,u.c)(h())&&y.saved&&(R.saved=(0,a.XK)(y.saved)),R})});_.meta={name:"createFetcher",key:"createFetcherfetchClientCounts",description:"Calls client.counts endpoint"},_.propTypes={reason:s().string}},1194535350:(x,A,e)=>{"use strict";e.d(A,{KO:()=>o,_J:()=>a,zx:()=>r});var t=e(3297051565),n=e.n(t),s=e(5109269968),i=e(5257368278),l=e(4318855015);const o=(0,i.A)("Fetch all available and installed emoji collections from the API",function(d,u){let{reason:_}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return d((0,s.apiCall)({method:"emoji.collections.list",reason:_,args:{installed_only:"0"}}))});o.meta={name:"createFetcher",key:"createFetcherfetchEmojiCollections",description:"Fetch all available and installed emoji collections from the API"},o.propTypes={reason:n().string.isRequired};const a=(0,i.A)("Add an emoji collection",(d,u,_)=>{let{collectionId:v,reason:h}=_;return d((0,s.apiCall)({method:"emoji.addCollection",args:{collection_id:v},reason:h})).catch(f=>{if(f.name!=="already_installed")throw f})});a.meta={name:"createFetcher",key:"createFetcheraddEmojiCollection",description:"Add an emoji collection"},a.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired};const r=(0,i.A)("Remove an emoji collection",(d,u,_)=>{let{collectionId:v,reason:h}=_;return d((0,l.$x)({collectionId:v})),d((0,s.apiCall)({method:"emoji.removeCollection",reason:h,args:{collection_id:v}}))});r.meta={name:"createFetcher",key:"createFetcherremoveEmojiCollection",description:"Remove an emoji collection"},r.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired}},490494914:(x,A,e)=>{"use strict";e.d(A,{Cl:()=>d,Is:()=>u,af:()=>r});var t=e(9706240641),n=e.n(t),s=e(5257368278),i=e(6892115804),l=e(8847766420),o=e(2149300053),a=e(1026257987);const r=(0,s.A)("Queries Flannel for a list of external connected orgs/teams",(_,v,h)=>{let{count:f,filter:I,marker:p}=h;return(0,o.P)((0,l.JY)(v()),{method:o.J8.EXTERNAL_TEAMS_LIST,args:{count:f,filter:I,marker:p}}).then(y=>y)});r.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsList",description:"Queries Flannel for a list of external connected orgs/teams"};const d=(0,s.A)("Queries Flannel for channel counts of external connected orgs/teams",(_,v,h)=>{let{teamIds:f,count:I,marker:p}=h;return(0,o.P)((0,l.JY)(v()),{method:o.J8.EXTERNAL_TEAMS_COUNTS,args:{team_ids:f,count:I,marker:p}}).then(y=>y)});d.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsCounts",description:"Queries Flannel for channel counts of external connected orgs/teams"};const u=(0,s.A)("Fetches and upserts external teams that match a query",function(){var _=(0,t.coroutine)(function*(v,h,f){const I=(0,l.JY)(h());return(0,a.Cj)(I,f).then(p=>{let{objects:y,next_marker:g}=p;return v((0,i.OU)({teams:y})),{externalTeams:y,nextMarker:g}})});return function(v,h,f){return _.apply(this,arguments)}}());u.meta={name:"createFetcher",key:"createFetcherfetchAndUpsertExternalTeamsWithQuery",description:"Fetches and upserts external teams that match a query"}},165535451:(x,A,e)=>{"use strict";e.d(A,{iV:()=>y,ib:()=>M,oP:()=>v,oQ:()=>E,uV:()=>g});var t=e(2927826522),n=e(28129577),s=e(5109269968),i=e(5257368278),l=e(796111729),o=e(6323355797),a=e(3246555800),r=e(3559164431),d=e(3554387543);const u=c(D=>{let{taxName:C,isVat:m,effectiveTaxPercentage:O=0,salesTaxAmt:P,taxPercentage:R}=D,L=o.Zt.sales_tax;C?L=o.Zt[C.toString().toLowerCase()]||o.Zt.sales_tax:m&&(L=o.Zt.vat);const V=O>0?O:null;return{value:P||0,type:L,percentage:V||R||0}},"formatTaxData"),_=c(D=>{const C=D.tax;return u({taxName:C==null?void 0:C.tax_name,isVat:C==null?void 0:C.is_vat,effectiveTaxPercentage:C==null?void 0:C.effective_tax_percentage,salesTaxAmt:C==null?void 0:C.sales_tax_amt,taxPercentage:C==null?void 0:C.tax_percentage})},"getTaxData"),v=c(D=>u(D),"getAddonTaxData"),h=c(D=>{var C;const m=D.term==="12m"?o.ck.yearly:o.ck.monthly,O=D.term==="12m"?o.OY.yearly:o.OY.monthly,P=(C=D.available_addons)===null||C===void 0?void 0:C.map(R=>({id:R.addon_id,addonType:R.addon_type,upfrontUnitCostPerM:R.upfront_unit_cost_per_m,upfrontUnitCostPerTerm:R.upfront_unit_cost_per_term}));return{id:D.product_id,term:m,currency:D.currency,level:D.level,lengthOfTermInMonths:O,costPerMonth:D.cost_per_m,costPerTerm:D.cost_per_term,isInvoice:D.is_inv||!1,maxInvoiceSeats:D.max_invoice_seats,minInvoiceSeats:D.min_invoice_seats,availableAddons:P}},"getPlanDataInstance"),f=c(D=>Object.keys(D).reduce((C,m)=>{const O=D[m];return C.availablePlans[m]={[o.i6.standard.id]:{[o.uq.CREDIT_CARD]:{[o.ck.monthly]:{default:h(O.std_m)},[o.ck.yearly]:{default:h(O.std_y)}},[o.uq.INVOICE]:{[o.ck.yearly]:{default:h(O.inv_std_y)}}},[o.i6.plus.id]:{[o.uq.CREDIT_CARD]:{[o.ck.monthly]:{default:h(O.plus_m)},[o.ck.yearly]:{default:h(O.plus_y)}},[o.uq.INVOICE]:{[o.ck.yearly]:{default:h(O.inv_plus_y)}}},[o.i6.compliance.id]:{[o.uq.CREDIT_CARD]:{[o.ck.yearly]:{default:h(O.compliance_y)}},[o.uq.INVOICE]:{[o.ck.yearly]:{default:h(O.inv_compliance_y)}}}},C},{availablePlans:{}}),"parsePlanAPIResponse"),I=c(D=>{var C,m,O,P,R,L;const V=_(D),B={currentCredits:D.credits.total_credits,creditsRemaining:D.credits.credits_remaining,creditsApplied:D.credits.credits_applied,proratedRefundCredits:D.prorated_refund,totalCreditsRemaining:D.credits.total_credits_remaining||0,totalCreditsApplied:D.credits.total_credits_applied||0},K=D.discount?(0,t.A)(D.discount):void 0,b={purchase:!((C=D.addons)===null||C===void 0)&&C.purchase&&Object.keys((m=D.addons)===null||m===void 0?void 0:m.purchase).length>0?Object.entries((O=D.addons)===null||O===void 0?void 0:O.purchase).reduce((G,H)=>{let[U,F]=H;return[...G,{id:U,addonType:F.addon_type,baseUpfrontUnitCost:F.base_upfront_unit_cost,term:F.term,baseProratedSubtotal:F.base_prorated_subtotal,numUsers:F.num_users}]},[]):[],refund:!((P=D.addons)===null||P===void 0)&&P.refund&&Object.keys((R=D.addons)===null||R===void 0?void 0:R.refund).length>0?Object.entries((L=D.addons)===null||L===void 0?void 0:L.refund).reduce((G,H)=>{let[U,F]=H;return[...G,{id:U,addonType:F.addon_type,term:F.term,amount:F.amount,numUsers:F.num_users}]},[]):[]};return{activePlanCost:{id:D.product_id,subtotal:D.subtotal,undiscountedSubtotal:D.undiscounted_subtotal,billableActiveUsers:D.billable_active_users,discount:K,tax:V,credits:B,totalRecurring:D.total_recurring,totalDueToday:D.total_due_today,quotedTermEnd:D.quoted_term_end,quotedTermStart:D.quoted_term_start,paidSeats:D.paid_seats,outstandingInvoiceAmount:D.outstanding_invoice_amount||0,addons:b}}},"mapCostToPropsFromAPI"),p=c(D=>{const C=f(D.plans).availablePlans;if(D.additional_addon_info){const m={isSlackAiLanguageUnsupported:D.additional_addon_info.is_slack_ai_language_unsupported};return{availablePlans:C,additionalAddonInfo:m}}return{availablePlans:C}},"parseRetailPlansAPIResponse"),y=(0,i.A)("Fetch Available Plans",(D,C,m)=>D((0,s.apiCall)({reason:"payments-plans-fetch-available-plans",method:"retail.plans",args:m})).then(O=>p(O)));y.meta={name:"createFetcher",key:"createFetcherfetchAvailablePlans",description:"Fetch Available Plans"};const g=(0,i.A)("Fetch Available Plans",(D,C,m)=>{let{productId:O,country:P,region:R,postalCode:L,street:V,isBusinessPurchase:B,isInvoice:K,numInvoiceSeats:b,isFinalReview:S,isFutureProductSwitch:G,vatId:H,regionalId:U,countryMap:F}=m;const Y=C(),Z=(0,a.KV)(F,P,R),ee=(0,r.lK)(Y),j=(0,r.IK)(Y),ge=(0,d.L)(Y);let ne;if(j!=null&&j.length){const he=[];j.forEach(be=>{const xe=ge.find(Le=>Le.addonType===be);xe!=null&&xe.id&&he.push(xe.id)});try{ne=he.length?JSON.stringify(he):void 0}catch(be){(0,l.Wo)().error(`Error with JSON.stringify in fetchCost, ${be}`)}}const ue={state:R,product_id:O,addon_ids:ne,is_final_review:S,checkout_step:ee,is_future_switch:G,...S?{}:{country:P,street1:V,zip:L,is_business:Z?!1:B,is_vat_registered:Z?B:!1,vat_id:H||"",regional_tax_id:U},...K?{requested_invoice_seats:b}:{}};return D((0,s.apiCall)({reason:"payments-plans-fetch-cost-data",method:"retail.cost",args:ue})).then(he=>{const be=he.plan_cost;if(!be)throw new Error("retail.cost: plan_cost is undefined");return I(be)})});g.meta={name:"createFetcher",key:"createFetcherfetchCost",description:"Fetch Available Plans"};const E=(0,i.A)("Fetch Cost Data for Addons Flow",(D,C,m)=>{let O;try{O=JSON.stringify([m.addonId])}catch(P){(0,l.Wo)().error(`Error with JSON.stringify in fetchCost, ${P}`)}return D((0,s.apiCall)({reason:"payments-plans-fetch-cost-for-addons",method:"retail.cost",args:{addon_ids:O}})).then(P=>c(L=>{var V;const B=L==null?void 0:L.addon_costs;if(!B)return null;const K=((V=B.addons)===null||V===void 0?void 0:V[m.addonId])||null;return K?{currency:B.currency,freeUsageLimit:K.free_usage_limit,upfrontUnitCost:K.base_upfront_unit_cost,usageUnitCost:K.base_usage_unit_cost,addonType:K.addon_type,term:K.term,recurringUpfrontSubtotal:K.recurring_upfront_subtotal,dueToday:(0,n.XK)(B.due_today),recurringCosts:(0,n.XK)(B.recurring_costs)}:null},"formatApiResponse")(P))});E.meta={name:"createFetcher",key:"createFetcherfetchCostForAddons",description:"Fetch Cost Data for Addons Flow"};const M=(0,i.A)("Fetch Plans Page Boot Data",D=>D((0,s.apiCall)({reason:"payments-plans-fetch-plans-page-boot-data",method:"retail.getAvailablePlans",args:{}})));M.meta={name:"createFetcher",key:"createFetcherfetchPlansPageBootData",description:"Fetch Plans Page Boot Data"};const T={mapCostToPropsFromAPI:I,getTaxData:_,getAddonTaxData:v}},9109082163:(x,A,e)=>{"use strict";e.d(A,{Rs:()=>u,eS:()=>d,xs:()=>r});var t=e(3297051565),n=e.n(t),s=e(8703681551),i=e(8571983633),l=e(5257368278),o=e(5109269968);const a={"pins.list":{}},r=(0,l.A)("Get pinned items for channel",function(v,h){let{channelId:f,reason:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const p=a["pins.list"];return p[f]||(p[f]=v((0,o.apiCall)({method:"pins.list",args:{channel:f},reason:I})),p[f].finally(()=>delete p[f])),p[f]});r.meta={name:"createFetcher",key:"createFetcherpinsList",description:"Get pinned items for channel"},r.propTypes={channelId:n().string.isRequired,reason:n().string.isRequired};const d=(0,l.A)("Pin Message to channel",(v,h,f)=>{let{ts:I,fileId:p,fileCommentId:y,channelId:g,reason:E}=f;return v((0,o.apiCall)({method:"pins.add",reason:E,args:(0,s.A)({channel:g,timestamp:I,file:p,file_comment:y},i.A)}))});d.meta={name:"createFetcher",key:"createFetcherpinsAdd",description:"Pin Message to channel"},d.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const u=(0,l.A)("Unpin Message from channel",(v,h,f)=>{let{ts:I,fileId:p,fileCommentId:y,channelId:g,reason:E}=f;return v((0,o.apiCall)({method:"pins.remove",reason:E,args:(0,s.A)({channel:g,timestamp:I,file:p,file_comment:y},i.A)}))});u.meta={name:"createFetcher",key:"createFetcherpinsRemove",description:"Unpin Message from channel"},u.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const _={resetActiveCalls:()=>{Object.keys(a).forEach(v=>{a[v]={}})}}},9349021185:(x,A,e)=>{"use strict";e.d(A,{lp:()=>et,SI:()=>Yn,DC:()=>Os,Yb:()=>is,aw:()=>Rs,g2:()=>gn,U7:()=>at,eR:()=>ve,sr:()=>Oe,Do:()=>Jn,EM:()=>Ln,AC:()=>sn,FF:()=>Et,A$:()=>we,mi:()=>fn,mK:()=>de,bE:()=>Xe,AQ:()=>$t,Cs:()=>Is,J6:()=>Sn,LR:()=>dt,cD:()=>w,jl:()=>Xn,QH:()=>$e,DF:()=>$n,UC:()=>z,fx:()=>te,lS:()=>Zt,A1:()=>Nt,H9:()=>xn,ZD:()=>Ms,$P:()=>_s,G2:()=>Ts,S:()=>Ds});var t=e(8571983633),n=e(7715417323),s=e(7174777686),i=e(2141441167),l=e(897091071),o=e(1703559452),a=e(9113979368),r=e(9746734072),d=e(5503876160),u=e(4103274853),_=e(1566461842),v=e(6422693406),h=e(2664504268),f=e(5513050121),I=e(7599421656),p=e(6644049054),y=e(8956161330),g=e(4078437571),E=e(1340402138),M=e(4446301238),T=e(6554371307),D=e(8017028002),C=e(490494914),m=e(5984521287),O=e(8419094353),P=e(9552526132),R=e(8352634987),L=e(4423055085),V=e(5613323535),B=e(735940183),K=e(571104883),b=e(7148679525),S=e(3677514771),G=e(3683888369),H=e(6839188756),U=e(1507833885);const F=new B.Ay("modals");function Y(Ze){return[{id:"downloads",name:F.t("Downloads"),icon:"download",isEnabled:()=>(0,K.y3)()},{id:"invite_to_workspace",name:F.t("Invite people to {workspaceName}",{workspaceName:(0,H.F1)((0,S.H7)(Ze))}),icon:"add-user",isEnabled:()=>(0,b.Lz)(Ze)},{id:"create_a_channel",name:F.t("Create a Channel"),icon:"plus",isEnabled:()=>(0,U.MM)(Ze)},{id:"create_a_canvas",name:F.t("Create a canvas",{fallbackHash:"6ac4a1edc6d12317e9fc711b1fd00c073b191bdd",fallbackHashNs:"classic_nav"}),icon:"plus",isEnabled:()=>(0,G.l)(Ze)}]}c(Y,"getAllModals");function Z(Ze){return Y(Ze).filter(Ut=>Ut.isEnabled())}c(Z,"getAllEnabledModals");var ee=e(7940058138),j=e(7520119303),ge=e(8414867410),ne=e(9884588328),ue=e(1407713935),he=e(5274604535),be=e(2298581483),xe=e(7969244833),Le=e(6007206761),fe=e(6495946979),se=e(4001737397),Q=e(1197508738),k=e(2647703359),N=e(5455782105),$=e(8170643398),W=e(4562579337),q=e(5096647761),re=e(3792998666),le=e(3479134063),Ae=e(6536982570),Te=e(9889493721),Ne=e(6120301420),pe=e(9001455011),Ee=e(340763958),oe=e(3212336858),ce=e(2801540778),ke=e(2023092677),Ce=e(4827886670),Me=e(9931116838),Se=e(3559837422),Ue=e(3307632080),He=e(7645285332),Ye=e(411655882),J=e(2229186),ae=e(1224315998),Ve=e(2689960678),Be=e(82287009),Ke=e(9190452268),Re=e(5770715593),Fe=e(6617433054),Ie=e(352142497);const ze=new B.Ay("ia4"),qe={get[Ie.D.BrowseCanvases](){return ze.t("All canvases",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[Ie.D.BrowseChannels](){return ze.t("All channels",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[Ie.D.BrowsePeople](){return ze.t("All people",{fallbackHash:"7aeeec03f7c076af275e9b7c0e187a40bd193acc",fallbackHashNs:"enterprise_dashboard"})},get[Ie.D.BrowseFiles](){return ze.t("All files",{fallbackHash:"f7857dcc71d3ce6a9095d1fbca5acb8cc9319005",fallbackHashNs:"search"})},get[Ie.D.ExternalWorkspaceAllowedOrgPane](){return ze.t("Organization",{fallbackHash:"519255ae1f74ffc5ddd29979295c7572f048ad81",fallbackHashNs:"member_profile"})},get[Ie.D.RecentFiles](){return ze.t("Recently Viewed Files",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ie.D.FilesSharedWithYou](){return ze.t("Files shared with you",{fallbackHash:"72f2b0dfa1e68a34813db5999ff8098f60ef699d",fallbackHashNs:"search"})},get[Ie.D.FilesCreatedByYou](){return ze.t("Files created by you",{fallbackHash:"8c292710d9aa5d3b598cf24b70f804cb0341e24e",fallbackHashNs:"search"})},get[Ie.D.RecentCanvases](){return ze.t("Recently Viewed Canvases",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ie.D.CanvasesSharedWithYou](){return ze.t("Canvases shared with you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ie.D.CanvasesCreatedByYou](){return ze.t("Canvases created by you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ie.D.FileFolder](){return ze.t("Folders",{fallbackHash:"f7857dcc71d3ce6a9095d1fbca5acb8cc9319005",fallbackHashNs:"search"})},[Ie.D.DeletedCanvases]:void 0,[Ie.D.DmsList]:void 0,[Ie.D.LaterList]:void 0,[Ie.D.Channel]:void 0,[Ie.D.AppSpace]:void 0,[Ie.D.BrowseApps]:void 0,get[Ie.D.ExternalOrganizations](){return ze.t("External organizations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ie.D.ExternalOrganization](){return ze.t("External organization",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ie.D.ExternalPeople](){return ze.t("External people",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ie.D.SlackConnectChannels](){return ze.t("Slack Connect channels",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ie.D.SlackConnectInvitations](){return ze.t("Slack Connect invitations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},[Ie.D.BrowseExternalWorkspace]:void 0,[Ie.D.PostEvent]:void 0,[Ie.D.BrowseShortcuts]:void 0,[Ie.D.BrowseWorkflowsManagedByYou]:void 0,[Ie.D.BrowseYourWorkflowTemplates]:void 0,[Ie.D.BrowseWorkflowTemplates]:void 0,[Ie.D.BrowseUserGroups]:void 0,[Ie.D.OrgDirectory]:void 0,get[Ie.D.RecentPlatform](){return ze.t("Recently used workflows",{fallbackHash:"f97d1ab1f281e78d5e61024eee5be84679fd60ac",fallbackHashNs:"search"})},[Ie.D.SlackConnect]:void 0,[Ie.D.Page]:void 0,[Ie.D.Threads]:void 0,[Ie.D.Thread]:void 0,[Ie.D.Profile]:void 0,[Ie.D.FileDetails]:void 0,[Ie.D.Help]:void 0,[Ie.D.UserGroup]:void 0,[Ie.D.KeyboardShortcuts]:void 0,[Ie.D.WhatsNew]:void 0,[Ie.D.Feedback]:void 0,[Ie.D.List]:void 0,[Ie.D.ListRecord]:void 0,[Ie.D.ListRecordDetails]:void 0,[Ie.D.ListRecordThread]:void 0,[Ie.D.ListRecordHistory]:void 0,[Ie.D.ListHistory]:void 0,[Ie.D.ComposeList]:void 0,[Ie.D.Compose]:void 0,[Ie.D.QuipCommentThread]:void 0,[Ie.D.QuipCommentStream]:void 0,[Ie.D.QuipActivityHistory]:void 0,[Ie.D.QuipAutomationsOverview]:void 0,[Ie.D.Quip]:void 0,[Ie.D.Canvas]:void 0,[Ie.D.ChannelCanvas]:void 0,[Ie.D.CanvasBrowser]:void 0,[Ie.D.HuddlePageCanvas]:void 0,[Ie.D.PaidBenefits]:void 0,[Ie.D.Setup]:void 0,[Ie.D.SearchEmpty]:void 0,[Ie.D.AboutWorkspace]:void 0,[Ie.D.Unknown]:void 0,[Ie.D.MorePeopleSidebar]:void 0,[Ie.D.MoreCanvasesSidebar]:void 0,[Ie.D.MoreSolutionsSidebar]:void 0,[Ie.D.AppPopout]:void 0,[Ie.D.MorePlatformSidebar]:void 0,[Ie.D.Search]:void 0,[Ie.D.ChannelList]:void 0,[Ie.D.BrowseLists]:void 0,[Ie.D.DeletedLists]:void 0,[Ie.D.Tasks]:void 0,[Ie.D.AssignedTasks]:void 0,[Ie.D.Reminders]:void 0,[Ie.D.Saved]:void 0,[Ie.D.BrowseList]:void 0,[Ie.D.ActivityList]:void 0,[Ie.D.MoreFilesSidebar]:void 0,[Ie.D.MoreListsSidebar]:void 0,[Ie.D.MoreTodosSidebar]:void 0,[Ie.D.UnifiedFilesSidebar]:void 0,[Ie.D.MoreChannelsSidebar]:void 0,[Ie.D.MoreHuddlesSidebar]:void 0,[Ie.D.MoreExternalConnectionsSidebar]:void 0,[Ie.D.HelpBrowser]:void 0,[Ie.D.Huddle]:void 0,[Ie.D.BrowseHuddles]:void 0,[Ie.D.KeyboardShortcutsBrowser]:void 0,[Ie.D.WhatsNewBrowser]:void 0,[Ie.D.FeedbackBrowser]:void 0,[Ie.D.ExternalWorkspaceSidebar]:void 0,[Ie.D.ExternalWorkspacePeopleBrowser]:void 0,[Ie.D.ExternalWorkspaceChannelBrowser]:void 0,[Ie.D.AiSummaryDetails]:void 0,[Ie.D.DailyDigest]:void 0,[Ie.D.MoreAiSummarySidebar]:void 0,[Ie.D.SearchSummary]:void 0,[Ie.D.AssistantList]:void 0,[Ie.D.BrowseUnifiedFiles]:void 0,[Ie.D.DeletedUnifiedFiles]:void 0,[Ie.D.Today]:void 0,[Ie.D.Record]:void 0,[Ie.D.TableauDetails]:void 0,[Ie.D.WorkObject]:void 0,[Ie.D.RecordChannelCreate]:void 0,[Ie.D.RecordChannelRelatedList]:void 0,[Ie.D.SalesAdministration]:void 0,[Ie.D.SalesBulkGrid]:void 0,[Ie.D.SalesHome]:void 0,[Ie.D.SalesListViewBrowser]:void 0,[Ie.D.SalesLogActivity]:void 0,[Ie.D.SalesCreateRecord]:void 0,[Ie.D.SalesNotifications]:void 0,[Ie.D.SalesSidebar]:void 0,[Ie.D.AssistantThread]:void 0,[Ie.D.AssistantHome]:void 0,[Ie.D.Solutions]:void 0,[Ie.D.Agents]:void 0,[Ie.D.PendingAgents]:void 0,[Ie.D.AgentConversation]:void 0,[Ie.D.MoreAgentsSidebar]:void 0,[Ie.D.SolutionsFiltered]:void 0,[Ie.D.BrowseYourSolutions]:void 0,[Ie.D.BrowseYourCompanySolutions]:void 0,[Ie.D.ChannelFiles]:void 0,[Ie.D.SlackKitPlayground]:void 0,[Ie.D.AiApp]:void 0,[Ie.D.AboutAiApp]:void 0,[Ie.D.BookmarksFolder]:void 0,[Ie.D.ActionItems]:void 0,[Ie.D.Inbox]:void 0,[Ie.D.HuddleTranscriptDetails]:void 0,get[Ie.D.WorkflowDetails](){return ze.t("Workflow details",{fallbackHash:"badd385121c5861ac693b59ad8c160fdf7994344",fallbackHashNs:"channel_details"})},get[Ie.D.WorkflowEditor](){return ze.t("Workflow Editor",{fallbackHash:"792c81a4cfdcb5b45d688cb03c2fd2e816f86d44",fallbackHashNs:"workflow_builder"})},get[Ie.D.BBMMain](){return ze.t("Main",{fallbackHash:"b28b7af69320201d1cf206ebf28373980add1451",fallbackHashNs:"recordchannels"})},[Ie.D.BBMWorkspaceSwitcher]:void 0,[Ie.D.SearchInChannel]:void 0,[Ie.D.BBMMore]:void 0},ut=c(Ze=>Ze in qe?qe[Ze]:"","getDisplayNameForViewType");var tt=e(4240442510),_t=e(6910192640),yt=e(505908973),Kt=e(4096483543),Qt=e(5600190572),Jt=e(4256321479),Gt=e(8195161e3),wt=e(1948374838),Bt=e(1917953477),Wt=e(181849556),Tn=e(8003851355),Ot=e(1072784641),Ft=e(6897117289),rn=e(8956261571),ln=e(4342685672),_n=e(6304789565),en=e(8847766420),Xt=e(7260478587),vn=e(4119164726),je=e(6533394955),Rt=e(6451390137),hn=e(2854654447),Nn=e(5795074931),rt=e(9107158149),vt=e(7688940281),Mt=e(207659888),Ct=e(2235302340),Yt=e(9101533895),In=e(6728717861),Un=e(3829348308),En=e(4761125736),Bn=e(937317117),Mn=e(761034736),Vn=e(9706240641),rs=e(8840779375),as=e(9268023148),jn=e(6494470131),es=e(5380461521),Qn=e(5209876365),ss=e(796111729);const ft=(0,_n.Ay)("Fetch triggers with query",function(){var Ze=(0,Vn.coroutine)(function*(Ut,Lt,it){let{query:At,currentChannelId:gt,includeAutomatedTriggers:Pt=!1,strictExposureRules:Vt=!0}=it;const an=Lt(),Pn=(0,en.ZT)(an),mn=(0,wt.X)(an),Tt=Pt?["shortcut","event","webhook","scheduled","service"]:["shortcut"];if(!mn.containsPrefixOf(At))try{const An=(yield Ut((0,jn.v)({query:At,currentChannelId:gt,strictExposureRules:Vt,triggerTypes:Tt,reason:"hermes_triggers_store:fetch_and_upsert_triggers"}))).triggers,yn=5;return An.length<yn&&(mn.addAsPrefix(At),mn.clearRequestInFlight()),Pn&&(0,es.X)().markObjectsAsFresh(Pn,(0,rs.A)(An,"id")),Ut((0,Qn.z4)({triggers:An})),An}catch(tn){return(0,ss.Wo)().error(tn,"There was an issue fetching triggers with query"),[]}return[]});return function(Ut,Lt,it){return Ze.apply(this,arguments)}}());ft.meta={name:"createThunk",key:"createThunkfetchAndUpsertTriggersWithQuery",description:"Fetch triggers with query"};const pt=500,Ht=(0,as.A)((Ze,Ut)=>{let{query:Lt,includeAutomatedTriggers:it,strictExposureRules:At}=Ut;return Ze(ft({query:Lt,includeAutomatedTriggers:it,strictExposureRules:At}))},pt,{leading:!0,trailing:!0}),nn=(0,_n.Ay)("debounced fetch and upsert triggers with query",(Ze,Ut,Lt)=>{let{query:it,includeAutomatedTriggers:At,strictExposureRules:gt}=Lt;return Ht(Ze,{query:it,includeAutomatedTriggers:At,strictExposureRules:gt})});nn.meta={name:"createThunk",key:"createThunkdebouncedFetchAndUpsertTriggersWithQuery",description:"debounced fetch and upsert triggers with query"};const kn=null,xt={DEBOUNCE_MS:pt};var Dn=e(8227942655),Fn=e(4224126550),wn=e(8276911661),It=e(5688490863),Je=e(8149648525),X=e(2047021170),_e=e(4135820365),ye=e(6892115804),De=e(1835177371),Ge=e(6508028729);const et={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeIms:!1,includeArchived:!0,onlyIfMember:!1,onlyVisibleMpims:!1,onlyVisibleIms:!1,includeExternallyShared:!0,includeOnlyExternallyShared:!0,allowedInternalTeams:void 0,shouldAllowedInternalTeamsMatchAny:void 0,onlyExternallyShared:!1,onlyFromTeamId:void 0,includeRecordChannels:!0},members:{includeSelf:!1,includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,includeAllExternal:!1,onlyLocalTeam:!1,includeGuests:!0,includeProfileOnlyUsers:!1,onlyExternalFromTeams:void 0,onlyFromExternalTeamId:void 0},userGroups:{includeDeleted:!1,includeFromAnotherTeam:!1},channelSections:{includeTypes:{[Mt.VZ.Standard]:!0,[Mt.VZ.Stars]:!0}}},limit:24,sort:{preferExactMatch:!0,frecency:!0,preferChannelsUserBelongsTo:!0,preferMpimsWithActiveMembers:!0,model:ln.KV},fuzzyLimit:3,fuzzyJumpLimit:20,fuzzyCJK:!0,returnMetadata:!1};function bt(Ze){let{query:Ut,options:Lt}=Ze;var it,At,gt;const Pt=(gt=Lt==null?void 0:Lt.entities)!==null&&gt!==void 0?gt:{},Vt=Pt==null?void 0:Pt.members;let an=!1;return Vt&&Vt!==!0&&(an=!!(Vt!=null&&Vt.matchEmailField)),{source:Lt==null||(it=Lt.sort)===null||it===void 0?void 0:it.source,tiered:Lt==null?void 0:Lt.tiered,is_searcher_sessions:!1,entities:Object.keys(Pt).filter(Pn=>!!Pt[Pn]).sort().toString(),query_length:Ut.length,is_member_email_search:(Lt==null||(At=Lt.sort)===null||At===void 0?void 0:At.source)==="use-team-and-people-search"&&an}}c(bt,"getTraceTags");function sn(Ze,Ut){var Lt,it;const{excludeElmChannels:At,includePublic:gt,includePrivate:Pt,includeFromAnotherTeam:Vt,allowedInternalTeams:an,shouldAllowedInternalTeamsMatchAny:Pn}=(it=(Lt=Ut.entities)===null||Lt===void 0?void 0:Lt.channels)!==null&&it!==void 0?it:{};let mn=[];return gt&&(mn=[...mn,...(0,Yt.Wr)(Ze,{includeFromAnotherTeam:!!Vt})]),Pt&&(mn=[...mn,...(0,Yt.sE)(Ze,{includeFromAnotherTeam:!!Vt})]),At&&(mn=mn.filter(Tt=>!(0,Ue.A)(Ze,Tt))),an&&(mn=mn.filter(Tt=>{if((0,se.O)(Tt))return!!Pn;const tn=(0,be.R)(Ze,Tt),An=Pn?tn==null?void 0:tn.some(yn=>an.includes(yn)):tn==null?void 0:tn.every(yn=>an.includes(yn));return(tn==null?void 0:tn.length)&&An})),mn}c(sn,"getLocalChannels");function fn(Ze,Ut){var Lt;const it=(0,en.ZT)(Ze),At=Ut==null||(Lt=Ut.entities)===null||Lt===void 0?void 0:Lt.teams;var gt;const Pt=Object.values((gt=Ge._===null||Ge._===void 0?void 0:(0,Ge._)())!==null&&gt!==void 0?gt:{}).filter(Tt=>Tt.id!==it);if(At!=null&&At.onlyNavigable){const Tt=(0,_e._)(Ze);return Tt.length?[...Pt,...Tt]:Pt}var Vt;const an=(Vt=(0,S.iK)(Ze))!==null&&Vt!==void 0?Vt:{},Pn=Pt.map(Tt=>Tt.id),mn=Object.values(an).filter(Tt=>!Pn.includes(Tt.id));return[...Pt,...mn].filter(Nt(Ze,At))}c(fn,"getLocalTeams");const Sn=(0,_n.Ay)("Get channels from flannel by query",(Ze,Ut,Lt)=>{let{query:it,options:At}=Lt;var gt,Pt,Vt,an;const{includeFromAnotherTeam:Pn,includeExternallyShared:mn,includeOnlyExternallyShared:Tt,onlyExternallyShared:tn,onlyFromTeamId:An,onlyFromExternalWorkspaceId:yn,allowedInternalTeams:jt,shouldAllowedInternalTeamsMatchAny:ts,includeRecordChannels:Hn}=(an=(gt=At.entities)===null||gt===void 0?void 0:gt.channels)!==null&&an!==void 0?an:{},Rn=((Pt=At.entities)===null||Pt===void 0||(Vt=Pt.channels)===null||Vt===void 0?void 0:Vt.remoteLimit)||At.limit,Cs=Ut(),us=[],ms=" AND ",vs={query:it,count:Rn||et.limit||24,fuzz:(0,En._Z)(Cs,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,En._Z)(Cs,"searcher_flannel_cjk")==="cjk"};return Pn&&us.push("xws"),!(0,t.A)(mn)&&!mn&&us.push("NOT shared"),!(0,t.A)(Tt)&&!Tt&&us.push("NOT external"),!(0,t.A)(tn)&&tn&&us.push("shared"),us.length&&(vs.filter=us.join(ms)),An&&(vs.external_team=An),yn&&(vs.external_team=yn),jt&&(vs.allowed_internal_teams=jt),ts&&(vs.should_allowed_internal_teams_match_any=ts),Hn&&(vs.include_record_channels=!0),Ze((0,M.hq)({query:vs})).timeout(2e3).catch(n.A)});Sn.meta={name:"createThunk",key:"createThunkgetRemoteChannels",description:"Get channels from flannel by query"};const dt=(0,_n.Ay)("Get emoji from flannel by query",(Ze,Ut,Lt)=>{let{query:it,options:At}=Lt;var gt,Pt;const Vt=((gt=At.entities)===null||gt===void 0||(Pt=gt.emoji)===null||Pt===void 0?void 0:Pt.remoteLimit)||At.limit;return Ze((0,D.l8)({query:{query:it,count:Vt}})).timeout(2e3).catch(n.A)});dt.meta={name:"createThunk",key:"createThunkgetRemoteEmoji",description:"Get emoji from flannel by query"};const z=(0,_n.Ay)("Get user groups from the search.team endpoint by query",(Ze,Ut,Lt)=>{let{query:it,options:At}=Lt;var gt,Pt,Vt,an,Pn,mn;const Tt=((gt=At.entities)===null||gt===void 0||(Pt=gt.userGroups)===null||Pt===void 0?void 0:Pt.remoteLimit)||At.limit;return Ze((0,O.cn)({query:{query:it,count:Tt,org_wide:(Vt=At.entities)===null||Vt===void 0||(an=Vt.userGroups)===null||an===void 0?void 0:an.includeFromAnotherTeam,channel:(Pn=At.entities)===null||Pn===void 0||(mn=Pn.userGroups)===null||mn===void 0?void 0:mn.channel}})).timeout(2e3).catch(n.A)});z.meta={name:"createThunk",key:"createThunkgetRemoteUserGroups",description:"Get user groups from the search.team endpoint by query"};const te=(0,_n.Ay)("Get remote triggers with query",(Ze,Ut,Lt)=>{let{query:it,includeAutomatedTriggers:At}=Lt;return Ze(nn({query:it,includeAutomatedTriggers:At}))});te.meta={name:"createThunk",key:"createThunkgetRemoteWorkflowTriggers",description:"Get remote triggers with query"};const ve=(0,_n.Ay)("Get bulk user groups from the userGroups.searchBulk endpoint by query",(Ze,Ut,Lt)=>{let{queries:it,options:At}=Lt;var gt,Pt,Vt,an,Pn,mn;const Tt=((gt=At.entities)===null||gt===void 0||(Pt=gt.userGroups)===null||Pt===void 0?void 0:Pt.remoteLimit)||At.limit;return Ze((0,O.MZ)({query:{queries:it,count:Tt,org_wide:(Vt=At.entities)===null||Vt===void 0||(an=Vt.userGroups)===null||an===void 0?void 0:an.includeFromAnotherTeam,channel:(Pn=At.entities)===null||Pn===void 0||(mn=Pn.userGroups)===null||mn===void 0?void 0:mn.channel}})).timeout(2e3).catch(n.A)});ve.meta={name:"createThunk",key:"createThunkgetBulkRemoteUserGroups",description:"Get bulk user groups from the userGroups.searchBulk endpoint by query"};function Oe(Ze,Ut){const{includeArchived:Lt,includeRequired:it,onlyIfMember:At,canPost:gt,includeExternallyShared:Pt,includeOnlyExternallyShared:Vt,onlyExternallyShared:an,onlyFromTeamId:Pn,onlyFromExternalWorkspaceId:mn}=Ut??{};return Tt=>{let tn=!0;if(Lt||(tn=tn&&!(0,Le.F)(Tt)),!(0,t.A)(it)&&!it&&(tn=tn&&!(0,ue.gx)(Tt)),an&&(tn=tn&&(0,Ee.ju)(Tt)),(!Pt||!Vt)&&(tn=tn&&!(0,Ee.ju)(Tt)),At&&(tn=tn&&(0,fe.bl)(Tt)),gt&&(tn=tn&&(0,Ce.E)(Ze,Tt.id)),Pn){var An;tn=tn&&(((An=(0,he.A)(Ze,Tt))===null||An===void 0?void 0:An.includes(Pn))||!1)}return mn&&(tn=tn&&(0,ne.ne)(Ze,Tt)===mn),tn}}c(Oe,"getChannelFilterFunction");const $e=(0,_n.Ay)("Get members from flannel by query",(Ze,Ut,Lt)=>{let{query:it,options:At}=Lt;var gt,Pt,Vt;const{includeDeleted:an,matchEmailField:Pn,onlyExternal:mn,includeExternal:Tt,includeAllExternal:tn,includeBots:An,onlyFromExternalTeamId:yn,onlyFromExternalWorkspaceId:jt}=(Vt=At.entities.members)!==null&&Vt!==void 0?Vt:{},ts=((gt=At.entities)===null||gt===void 0||(Pt=gt.members)===null||Pt===void 0?void 0:Pt.remoteLimit)||At.limit,Hn=Ut(),Rn=[],Cs=(0,H.r7)((0,S.H7)(Hn))||!!(0,en.jV)(Hn),us=Cs?["NOT org"]:["NOT team"],ms=Cs?["org"]:["team"],vs=!an,Zn=" AND ",Es={query:it,count:ts||et.limit||24,fuzz:(0,En._Z)(Hn,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"||At.fuzzyLimit===0?0:1,uax29_tokenizer:(0,En._Z)(Hn,"searcher_flannel_cjk")==="cjk"};return vs&&Rn.push("NOT deactivated"),(mn||yn)&&Rn.push(...us),(yn||jt)&&(Es.external_team=yn||jt),An||Rn.push("NOT bots"),Tt||Rn.push(...ms),Tt&&tn&&(Es.include_all_external=!0),Pn&&(Es.search_email=!0),Rn.length&&(Es.filter=Rn.join(Zn)),Ze((0,m.Wr)({query:Es})).timeout(2e3).catch(n.A)});$e.meta={name:"createThunk",key:"createThunkgetRemoteMembers",description:"Get members from flannel by query"};const at=(0,_n.Ay)("Get members from flannel by query",(Ze,Ut,Lt)=>{let{queries:it,options:At}=Lt;var gt,Pt,Vt,an;const{includeDeleted:Pn,matchEmailField:mn}=(an=(gt=At.entities)===null||gt===void 0?void 0:gt.members)!==null&&an!==void 0?an:{},Tt=((Pt=At.entities)===null||Pt===void 0||(Vt=Pt.members)===null||Vt===void 0?void 0:Vt.remoteLimit)||At.limit||24,tn=Ut(),An=[],yn=!Pn,jt=" AND ",ts={queries:it,count:Tt,fuzz:(0,En._Z)(tn,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,En._Z)(tn,"searcher_flannel_cjk")==="cjk"};return yn&&An.push("NOT deactivated"),mn&&(ts.match_email=!0),An.length&&(ts.filter=An.join(jt)),Ze((0,m.W9)({query:ts})).timeout(2e3).catch(n.A)});at.meta={name:"createThunk",key:"createThunkgetBulkRemoteMembers",description:"Get members from flannel by query"};function Xe(Ze,Ut){const{includeSelf:Lt,includeSlackbot:it,includeBots:At,includeWorkflows:gt,includeDeleted:Pt,includeExternal:Vt,includeGuests:an,includeProfileOnlyUsers:Pn,onlyLocalTeam:mn,onlyExternal:Tt,onlyExternalFromTeams:tn,onlyFromExternalTeamId:An}=Ut??{};return yn=>{let jt=!0;if(Tt&&(jt=jt&&(0,q.g)(yn)&&!(0,W.A)(yn)),Lt||(jt=jt&&!(0,$.fy)(yn)),it||(jt=jt&&!(0,le.U)(yn)),tn)return(0,s.A)(tn,(0,Ae.dQ)(yn));if(An)return Lt&&(0,$.fy)(yn)?!0:(0,q.g)(yn)&&(0,Ae.dQ)(yn)===An;if(At||(jt=jt&&!(0,W.A)(yn)&&!(0,le.U)(yn)),gt||(jt=jt&&!(0,$.v3)(yn)),Pt||(jt=jt&&!(0,$.oy)(yn)),Vt||(jt=jt&&!(0,q.g)(yn)),an||(jt=jt&&!(0,re.P)(yn)),Pn||(jt=jt&&!(0,$.hh)(yn)),Pn&&(0,$.hh)(yn)&&(jt=jt&&!(0,$.oy)(yn)),mn){const ts=(0,en.ZT)(Ze);(0,$.hh)(yn)&&Pn||(jt=jt&&(0,Ae.nO)(yn,ts))}return jt}}c(Xe,"getMemberFilterFunction");function Nt(Ze,Ut){var Lt;const{includeCurrentTeam:it,includeExternal:At,onlyExternal:gt,onlyCurrentOrg:Pt,onlyAvailableToCurrentOrg:Vt,onlyMemberOnCurrentOrg:an}=Ut??{},Pn=(0,en.Kc)(Ze),mn=(0,Nn.WR)(Ze),Tt=(0,wn.nv)(Ze,mn),tn=(Tt==null||(Lt=Tt.enterprise_user)===null||Lt===void 0?void 0:Lt.teams)||[];return An=>!(!it&&An.id===(0,en.ZT)(Ze)||gt&&!(0,ce.z)(Ze,An)||!At&&!gt&&!Vt&&(0,ce.z)(Ze,An)||Pt===!0&&An.id!==Pn&&(0,H.Ss)(An)!==Pn||Vt===!0&&An.id!==Pn&&(0,H.Ss)(An)!==Pn&&!(0,ce.z)(Ze,An)||an===!0&&!tn.includes(An.id))}c(Nt,"getTeamFilterFunction");function $t(Ze,Ut){const{onlyVisibleMpims:Lt,onlyExternallyShared:it,includeExternallyShared:At,onlyFromTeamId:gt}=Ut??{};return Pt=>{let Vt=!0;if(Lt&&(Vt=Vt&&(0,ne.w6)(Ze,Pt)),it&&(Vt=Vt&&(0,Ee.ju)(Pt)),At===!1&&(Vt=Vt&&!(0,Ee.ju)(Pt)),gt){var an;Vt=Vt&&(((an=(0,he.A)(Ze,Pt))===null||an===void 0?void 0:an.includes(gt))||!1)}return Vt}}c($t,"getMpimFilterFunction");function Ln(Ze,Ut){const{onlyExternallyShared:Lt,includeExternallyShared:it,onlyFromTeamId:At,onlyVisibleIms:gt}=Ut??{};return Pt=>{let Vt=!0;if(gt&&(Vt=Vt&&(0,ne.PE)(Ze,Pt)),Lt&&(Vt=Vt&&(0,Ee.ju)(Pt)),it||(Vt=Vt&&!(0,Ee.ju)(Pt)),At){var an;Vt=Vt&&(((an=(0,he.A)(Ze,Pt))===null||an===void 0?void 0:an.includes(At))||!1)}return Vt}}c(Ln,"getImFilterFunction");function xn(Ze,Ut){const{includeDeleted:Lt,includeFromAnotherTeam:it,onlyFromExternalWorkspaceId:At}=Ut??{};return gt=>{let Pt=!0;return it||(Pt=Pt&&!(0,De.dk)(Ze,gt.id)),Lt||(Pt=Pt&&(0,ke.V1)(gt)),At&&(Pt=Pt&&(0,ke.$Q)(gt)===At),Pt}}c(xn,"getUserGroupFilterFunction");function Jn(Ze,Ut){const{onlyCanvases:Lt=!1,onlyLists:it=!1,onlyWriteable:At=!1,onlyChannelCanvases:gt=!1,onlyTemplateCanvases:Pt=!1,onlySlackNative:Vt=!1,includeChannelCanvases:an=!1,excludeTemplateCanvases:Pn=!1}=Ut??{},mn=(0,Ne.hq)(Ze),Tt=(0,en.Kc)(Ze),tn=(0,S._J)(Ze,Tt),An=tn&&!(0,H.qR)(tn);return yn=>{let jt=!0;const ts=(0,k.wL)(yn)&&!An||mn&&an&&(0,k.aD)(yn),Hn=(0,k.l7)(yn);return Lt&&(jt=jt&&ts,(0,k.dE)(yn)&&Pn)?!1:(mn&&(gt||An)&&(jt=jt&&!(0,k.wL)(yn)&&(0,k.aD)(yn)),Pt&&(jt=jt&&(0,k.dE)(yn)),it&&(jt=jt&&Hn),At&&(jt=jt&&(0,k.mW)(yn)),Vt&&(jt=Hn||ts),jt)}}c(Jn,"getFileFilterFunction");const $n=(0,_n.Ay)("Get teams via API by query",(Ze,Ut,Lt)=>{let{query:it,options:At}=Lt;var gt,Pt;const{onlyExternal:Vt,includeExternal:an,remoteLimit:Pn}=(Pt=(gt=At.entities)===null||gt===void 0?void 0:gt.teams)!==null&&Pt!==void 0?Pt:{},mn=Ut();if((0,Se.DM)(mn))return v.S.resolve();if(Vt||an)return Ze((0,C.Is)(it)).timeout(2e3).catch(n.A);const Tt=Pn||At.limit||24;return Ze((0,ye.vB)({query:it,count:Tt})).timeout(2e3).catch(n.A)});$n.meta={name:"createThunk",key:"createThunkgetRemoteTeams",description:"Get teams via API by query"};const w=(0,_n.Ay)("Get files via API by query",(Ze,Ut,Lt)=>{let{query:it,options:At}=Lt;var gt,Pt;const{onlyCanvases:Vt,onlyChannelCanvases:an,onlyTemplateCanvases:Pn,onlyLists:mn,excludeTemplateCanvases:Tt,bypassCache:tn}=(Pt=(gt=At.entities)===null||gt===void 0?void 0:gt.files)!==null&&Pt!==void 0?Pt:{};let An=it;return Pn?An=`type:canvas_template ${it}`:Vt||an?An=`${Tt?"type:quip -type:canvas_template":"type:quip"} ${it}`:mn&&(An=`type:list ${it}`),Ze((0,T.yF)({query:An,includeShares:!0,bypassCache:tn})).timeout(2e3).catch(n.A)});w.meta={name:"createThunk",key:"createThunkgetRemoteFiles",description:"Get files via API by query"};function de(Ze){const Ut=(0,ge.A4)(),Lt={},it=[];f.cw.forEach(gt=>{const Pt=(0,tt.A)({tab:gt});(0,_t.A)(Ze,gt)&&Pt&&!(Pt in Lt)&&(it.push({id:gt,name:Pt,is_view:!0,is_tab_view:!0}),Lt[Pt]=Pt)}),f.g5.forEach(gt=>{const Pt=ut(gt);(0,yt.A)(Ze,gt)&&Pt&&!(Pt in Lt)&&(it.push({id:gt,name:Pt,is_view:!0,is_mva_view:!0}),Lt[Pt]=Pt)}),Ut.forEach(gt=>{if(!(0,ge.cH)(Ze,gt)&&!(gt.id==="Pslack-connect"&&!(0,p.A)(Ze))&&gt.id!=="Pactivity"&&!(gt.id===ee.c.Apps&&!(0,pe.t)(Ze))&&!(gt.id===ee.c.Shortcuts&&!(0,Te.Bf)(Ze))&&!(gt.id===ee.c.BrowseWorkflowTemplates&&!(0,Te.fh)(Ze))&&!(gt.id===ee.c.BrowseWorkflowsManagedByYou&&!(0,Te.EH)(Ze))&&!(gt.id===ee.c.BrowseYourWorkflowTemplates&&!(0,Te.M7)(Ze))&&((0,ge.l1)(Ze,gt)||gt.id==="Punreads"&&(0,X.ty)(Ze,"enable_unread_view"))){const Pt=(0,j.yb)(Ze,gt);Pt&&!(Pt in Lt)&&(it.push({...gt,name:Pt,is_view:!0,is_page_view:!0}),Lt[Pt]=Pt)}});const At=(0,Qt.lI)("Vall_threads");return At&&(0,X.ty)(Ze,"enable_threads_view")&&!(0,E.R)(Ze)&&it.push(At),it}c(de,"getLocalViews");function we(Ze){return Z(Ze)}c(we,"getLocalModals");function Et(Ze){return(0,He.xf)(Ze)?[{id:Ze,score:0,item:{id:Ze,value:Ze,isEmail:!0}}]:[]}c(Et,"getLocalEmails");function gn(Ze,Ut){const Lt=!Ut;let it=Ve.Ml;if(Ut){const At=(0,Yt.OL)(Ze,Ut);it=At&&(0,xe.f)(Ze,At)||Ve.Ml}return(0,Rt.PL)(Ze).flatMap(At=>{if(At.teams&&(it.length||Lt)&&!At.isWorkspaceAgnostic){const gt=Lt?At.teams:At.teams.filter(Pt=>it.includes(Pt));if(gt.length>1)return gt.map(Pt=>{const Vt=(0,S._J)(Ze,Pt),an=(0,H.F1)(Vt);return{...At,name:`${At.name} ${an}`,applicableTeamId:Pt}})}return[At]})}c(gn,"getAppActionsWithEntriesPerApplicableTeam");function Zt(Ze,Ut,Lt){const it=(0,Yt.OL)(Ze,Ut),At=it?(0,xe.f)(Ze,it)||[]:[];return(0,Be.A_)(Ze,Ut,!!Lt,!0).flatMap(gt=>{if(gt.teams&&At.length&&gt.appName!=="Slack"&&!gt.isWorkspaceAgnostic){const Pt=gt.teams.filter(Vt=>At.includes(Vt));if(Pt.length>1)return Pt.map(Vt=>({...gt,id:(0,oe.Bs)(gt),isSlashCommand:!0,applicableTeamId:Vt}))}return[{...gt,id:(0,oe.Bs)(gt),isSlashCommand:!0}]})}c(Zt,"getSlashCommandsListWithEntriesPerApplicableTeam");function cn(Ze,Ut){let Lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";Ms(Ut);const it={},{members:At,channels:gt,teams:Pt,userGroups:Vt,appActions:an,views:Pn,broadcastKeywords:mn,emoji:Tt,files:tn,topEngagedFiles:An,lists:yn,channelSections:jt,emails:ts,modals:Hn,shortcuts:Rn,workflowTriggers:Cs,helpArticles:us,salesListViews:ms,canvasAiSuggestions:vs}=Ut.entities;if(gt&&(gt.includePublic||gt.includePrivate)&&(it.channels=sn(Ze,Ut)),gt&&gt.includeMpims&&(it.mpims=(0,Yt.FS)(Ze)),gt&&gt.includeIms&&(it.ims=(0,Yt._B)(Ze)),At&&(it.members=At.onlyFromExternalWorkspaceId?Ve.Ml:(0,wn.I_)(Ze).filter(hs=>(0,rt.zP)(Ze,hs.id))),Pt&&(it.teams=fn(Ze,Ut)),Vt&&(it.userGroups=(0,De.jJ)(Ze)),an&&(it.appActions=(0,I.B)(Ze)?(0,Rt.PL)(Ze):gn(Ze,an.channel)),tn&&(it.files=(0,Bn.Gn)(Ze)),An){const hs=(0,en.ZT)(Ze);if(hs){const fs=(0,Jt.E)({teamId:hs}).getStaleWhileRevalidate([]);it.topEngagedFiles=fs}}if(yn&&(it.lists=(0,Fn.C0)(Ze)),Pn&&(it.views=de(Ze)),Hn&&(it.modals=we(Ze)),mn){var Zn;if(mn.includeAll)it.broadcastKeywords=(0,Ye.A)();else if(!(mn==null||(Zn=mn.currentChannel)===null||Zn===void 0)&&Zn.id){var Es;it.broadcastKeywords=(0,J.A)(Ze,mn==null||(Es=mn.currentChannel)===null||Es===void 0?void 0:Es.id)}else it.broadcastKeywords=[]}if(Tt&&(it.emoji=(0,Un.Gt)(Ze)),jt&&(it.channelSections=(0,i.A)((0,Ct.jV)(Ze))),(Rn!=null&&Rn.slashCommands||Rn!=null&&Rn.fakeGlobalActions)&&!(Rn!=null&&Rn.isAnnounceOnly)&&(it.slashCommands=(0,Be.A_)(Ze,Rn.channel,!!Rn.threadTs,!0).map(hs=>({...hs,id:(0,oe.Bs)(hs),isSlashCommand:!0}))),Rn!=null&&Rn.slackGlobalActions&&(it.slackGlobalActions=(0,Be.Yk)(Ze,Rn.channel,Rn.threadTs)),Rn!=null&&Rn.quipShortcutCommands&&(it.quipShortcutCommands=(0,vn.Aw)(Ze,!!Lt)),Rn!=null&&Rn.channelActions&&(it.channelActions=(0,vt.fo)(Ze,Rn.channel)),Rn!=null&&Rn.fakeGlobalActions&&(it.fakeGlobalActions=(0,Be.JL)(Ze,Rn.channel,Rn.threadTs)),Rn!=null&&Rn.callActions&&(it.callActions=(0,Be.Uw)(Ze,Rn.channel,Rn.threadTs,Rn.isAnnounceOnly)),Cs){let hs=(0,Be.NJ)(Ze);Cs.includeAutomated||(hs=hs.filter(fs=>fs.type===P.M.Shortcut)),Cs.includeSalesHome||(hs=hs.filter(fs=>!(0,Dn.U)(fs))),it.workflowTriggers=hs}ts&&(it.emails=Et(Lt));const ks=(0,Re.dL)(Ze);if(us&&ks&&(it.helpArticles=(0,Mn.Fb)(Ze,"searcher/fetch_all_articles")),ms){const{objectType:hs,salesforceOrgId:fs}=ms,Bs=(0,It.Up)(Ze),js=hs?(0,It.Zs)(Ze,fs,hs):(0,l.A)(Object.values((0,It.m3)(Ze,fs)));it.salesListViews=js.map(Us=>Bs[Us])}return vs&&(it.canvasAiSuggestions=(0,Xt.rW)(Ze,Ut)),Ds(),it}c(cn,"fetchLocal");const qt=(0,_n.Ay)("Search for local entities within Slack based on options",(Ze,Ut,Lt)=>{let{query:it,options:At,autoTraceId:gt,parentSpanId:Pt}=Lt;var Vt;const an=Ut(),Pn=(Vt=V.LI.get({label:V.gC.Searcher,id:gt}))===null||Vt===void 0?void 0:Vt.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:Pt}}),mn=[],Tt=[],{channels:tn,files:An,members:yn,teams:jt,userGroups:ts,appActions:Hn,emoji:Rn,helpArticles:Cs,workflowTriggers:us,salesListViews:ms}=At.entities;if(yn){const Zn=Ze($e({query:it,options:At}));yn.runaway?Tt.push(Zn):mn.push(Zn)}if(tn){const Zn=Ze(Sn({query:it,options:At}));tn.runaway?Tt.push(Zn):mn.push(Zn)}if(Rn){const Zn=Ze(dt({query:it,options:At}));Rn.runaway?Tt.push(Zn):mn.push(Zn)}if(An&&((0,Fe.A)(it)||it.length>3)){const Zn=(0,Gt.G)(Ut());if(!Zn.contains(it)&&!Zn.isRequestInFlight()){Zn.add(it),Zn.setRequestInFlight();const Es=Ze(w({query:it,options:At}));An.runaway?Tt.push(Es):mn.push(Es)}}if(ts){const Zn=Ze(z({query:it,options:At}));ts.runaway?Tt.push(Zn):mn.push(Zn)}if(jt&&((0,N.k)(an)||jt.onlyExternal||jt.includeExternal)&&!jt.onlyLocal){const Zn=Ze($n({query:it,options:At}));jt.runaway?Tt.push(Zn):mn.push(Zn)}if(us){const Zn=(0,wt.X)(an);if(!Zn.contains(it)&&!Zn.isRequestInFlight()){Zn.add(it),Zn.setRequestInFlight();const Es=Ze(te({query:it,includeAutomatedTriggers:us.includeAutomated}));Es&&(us.runaway?Tt.push(Es):mn.push(Es))}}if((0,Me.e)(an)&&Hn){const Zn=Ze((0,hn.G)()).timeout(2e3).catch(n.A);Hn.runaway?Tt.push(Zn):mn.push(Zn)}const vs=(0,Re.dL)(an);if(Cs&&vs&&(0,Mn.Fb)(an,"searcher/fetch_all_articles"),(0,g.u)(it)&&ms){const{objectType:Zn,salesforceOrgId:Es}=ms;mn.push(Ze((0,Je.b)({query:it,objectType:Zn,salesforceOrgId:Es})))}return v.S.all(mn).then(Zn=>{const Es=Ut(),ks=cn(Es,At,it);if(ks.remoteIds=Xn(Zn),yn&&yn.onlyFromExternalWorkspaceId){var hs,fs;ks.members=(fs=(hs=Zn.find(js=>!!js.members))===null||hs===void 0?void 0:hs.members)!==null&&fs!==void 0?fs:Ve.Ml}const Bs=(0,o.A)((0,i.A)(ks),"length");return Tt.length&&!Bs?v.S.all(Tt).then(()=>cn(Ut(),At)):(Pn==null||Pn.close(),ks)})});qt.meta={name:"createThunk",key:"createThunkfetchRemote",description:"Search for local entities within Slack based on options"};function Xn(Ze){const Ut={};return Ze.forEach(Lt=>{Lt&&(Lt.appActions&&(Ut.appActions=new Set(Lt.appActions.map(it=>it.id))),Lt.channels&&(Ut.channels=new Set(Lt.channels.map(it=>it.id))),Lt.emoji&&(Ut.emoji=new Set(Lt.emoji.map(it=>it.name))),Lt.files&&(Ut.files=new Set(Lt.files.map(it=>it.id))),Lt.members&&(Ut.members=new Set(Lt.members.map(it=>it.id))),Lt.userGroups&&(Ut.userGroups=new Set(Lt.userGroups.map(it=>it.id))),Lt.teams&&(Ut.teams=new Set(Lt.teams.map(it=>it.id))))}),Ut}c(Xn,"getRemoteIds");const _s=(0,_n.Ay)("Search for entities within Slack by query",(Ze,Ut,Lt)=>{let{query:it="",options:At=et}=Lt;var gt;if(!it.length&&!At.allowEmptyQuery)return v.S.resolve([]);const Pt=Ut(),Vt=(0,Ke.Cy)({state:Pt}),an=(0,h.A)();Vt.mark(`modern-searcher-search-mark-${an}`);const Pn=(0,Bt.O)(it,{shouldTrimEmoji:!1,shouldTrimDocument:!1});var mn;V.LI.start({label:V.gC.Searcher,id:an,options:{teamId:(mn=(0,en.ZT)(Pt))!==null&&mn!==void 0?mn:null,tags:bt({query:Pn,options:At})}});const Tt=(gt=V.LI.get({label:V.gC.Searcher,id:an}))===null||gt===void 0?void 0:gt.createChildSpan({name:"searcher:search"}),tn=Rs(At,et,it);if((0,a.A)(tn))return v.S.resolve([]);if((0,Q.x)(Pt)!==In.M9.ONLINE||!(At!=null&&At.allowEmptyQueryRemoteSearch)&&!Pn.length&&(0,Kt.A)()&&(0,En._Z)(Pt,"searcher_local_empty_string")==="treatment")return v.S.resolve(Ts(Pt,{query:Pn,options:tn,autoTraceId:an,parentSpanId:Tt==null?void 0:Tt.getId()}));const An=v.S.delay(0).then(()=>Ze(qt({query:Pn,options:tn,autoTraceId:an,parentSpanId:Tt==null?void 0:Tt.getId()}))).then(yn=>{const jt=Ut();return dn(jt,{query:Pn,data:yn,options:tn,autoTraceId:an,parentSpanId:Tt==null?void 0:Tt.getId()})});if(tn.tiered){const yn=Ts(Pt,{query:Pn,options:tn,autoTraceId:an,parentSpanId:Tt==null?void 0:Tt.getId()}),jt=An.finally(()=>{Tt==null||Tt.close(),V.LI.stop({label:V.gC.Searcher,id:an})}),ts=Object.assign(yn,{promise:jt});return v.S.resolve(ts).finally(()=>{Vt.measureAndClear(`modern-searcher-search-mark-${an}`,"modern-searcher-search-tiered")})}return An.finally(()=>{Vt.measureAndClear(`modern-searcher-search-mark-${an}`,"modern-searcher-search"),Tt==null||Tt.close(),V.LI.stop({label:V.gC.Searcher,id:an})})});_s.meta={name:"createThunk",key:"createThunksearch",description:"Search for entities within Slack by query"};function Ts(Ze,Ut){let{query:Lt="",options:it,autoTraceId:At,parentSpanId:gt}=Ut;var Pt;let Vt=At;if(!Vt){Vt=(0,h.A)();var an;V.LI.start({label:V.gC.Searcher,id:Vt,options:{teamId:(an=(0,en.ZT)(Ze))!==null&&an!==void 0?an:null,tags:bt({query:Lt,options:it})}})}const Pn=(Pt=V.LI.get({label:V.gC.Searcher,id:Vt}))===null||Pt===void 0?void 0:Pt.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:gt}});if(!Lt.length&&!it.allowEmptyQuery)return[];const mn=Rs(it,et,Lt);if((0,a.A)(mn))return[];const Tt=(0,Bt.O)(Lt,{shouldTrimEmoji:!1}),tn=cn(Ze,mn),An=dn(Ze,{query:Tt,data:tn,options:mn,autoTraceId:Vt,parentSpanId:Pn==null?void 0:Pn.getId()});return Pn==null||Pn.close(),An}c(Ts,"searchLocal");const As=15,Os=c(Ze=>{let{clogger:Ut,data:Lt}=Ze;const{source:it,query:At,results:gt,selectedItemId:Pt,displayedItemIds:Vt,openMethod:an}=Lt,Pn=Vt?Vt.length:gt.length,mn=Vt&&Pt?Vt.indexOf(Pt):gt.findIndex(us=>us.item.id===Pt);if(mn<0)return;const Tt=gt.find(us=>us.item.id===Pt);if(!Tt)return;const tn=Tt.type||"other",An=(0,Bt.O)(At),yn=Tt.source||"local";let jt;Tt.type==="mpim"?jt=Tt.scoreDetailsByMember:Tt.type==="member"&&Pt?jt={[Pt]:{is_exact_match:Tt.isExactMatch,exact_match_details:Tt.exactMatchDetails,score_details:Tt.scoreDetails}}:Tt.type==="emoji"&&Pt&&(jt={[Pt]:{is_exact_match:Tt.isExactMatch}});let ts=[];gt.some(us=>us.featureVector)&&(Vt?ts=Vt.map(us=>{const ms=gt.find(vs=>vs.item.id===us);return ms&&ms.featureVector.serialize()||""}):ts=gt.map(us=>{var ms,vs;return us==null||(ms=us.featureVector)===null||ms===void 0||(vs=ms.serialize)===null||vs===void 0?void 0:vs.call(ms)}));let Rn;(0,r.A)(At)?Rn=At.reduce((us,ms)=>us+Is((0,Bt.O)(ms)),0):Rn=Is(An);const Cs={source:it,query_length:An.length?An.length:0,query_terms_length:Rn,results_length:Pn,selected_position:mn,selected_type:tn,selected_source:yn,selected_match_details:jt,feature_vector_list:ts.slice(0,As),open_method:an};Ut.track(ae.EventId.SEARCHER_ACCEPT,Cs)},"clogSearcherAccept"),is=c(Ze=>{let{clogger:Ut,data:Lt}=Ze;const{source:it,query:At,results:gt,displayedItemIds:Pt}=Lt,Vt=Pt!==void 0?Pt.length:gt.length,an=(0,Bt.O)(At);let Pn;(0,r.A)(At)?Pn=At.reduce((Tt,tn)=>Tt+Is((0,Bt.O)(tn)),0):Pn=Is(an);const mn={source:it,query_length:an.length?an.length:0,query_terms_length:Pn,results_length:Vt};Ut.track(ae.EventId.SEARCHER_REJECT,mn)},"clogSearcherReject");function Is(Ze){return Ze?Ze.split(Tn.u).filter(Ut=>Ut.length).length:0}c(Is,"getQueryTermsLength");function dn(Ze,Ut){let{query:Lt,data:it,options:At,autoTraceId:gt,parentSpanId:Pt}=Ut;var Vt,an,Pn,mn,Tt;const tn=(Vt=V.LI.get({label:V.gC.Searcher,id:gt}))===null||Vt===void 0?void 0:Vt.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:Pt}});Ms(At);const An=(0,En._Z)(Ze,"searcher_avoid_exact_member_match")==="treatment",yn=(0,En._Z)(Ze,"nerf_email_fuzzy_match")==="treatment",jt={},ts=c((Us,Ws)=>{const Fs=new Map;return[...Us,...Ws].forEach(Ks=>{Fs.set(Ks.id,Ks)}),Array.from(Fs.values())},"mergeAndDeduplicate"),Hn=new Ot.A({query:Lt,options:{...At,sort:{...At.sort,avoidExactMatchForMembers:An},fuzzyEmailSearchForwardOnly:yn}}),Rn=(0,Ke.Cy)({state:Ze});Rn.mark("modern-searcher-matching-mark");const Cs=(an=V.LI.get({label:V.gC.Searcher,id:gt}))===null||an===void 0?void 0:an.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:tn==null?void 0:tn.getId()}});it.channels&&(jt.channels=Hn.filterChannels(Ze,it.channels,Oe(Ze,At.entities.channels))),it.members&&(jt.members=Hn.filterMembers(Ze,it.members,Xe(Ze,At.entities.members))),it.emails&&it.members&&!(!(jt==null||(Pn=jt.members)===null||Pn===void 0)&&Pn.length)&&(jt.emails=it.emails),it.mpims&&(jt.mpims=Hn.filterMpims(Ze,it.mpims,$t(Ze,At.entities.channels))),it.ims&&(jt.ims=Hn.filterIms(Ze,it.ims,Ln(Ze,At.entities.channels))),it.userGroups&&(jt.userGroups=Hn.filterUserGroups(Ze,it.userGroups,xn(Ze,At.entities.userGroups))),it.teams&&(jt.teams=Hn.filterTeams(Ze,it.teams,Nt(Ze,At.entities.teams))),it.views&&(jt.views=Hn.filterViews(Ze,it.views)),it.modals&&(jt.modals=Hn.filterModals(Ze,it.modals)),it.appActions&&(jt.appActions=Hn.filterAppActions(Ze,it.appActions)),it.slashCommands&&(jt.slashCommands=Hn.filterShortcuts(Ze,it.slashCommands,!0)),it.slackGlobalActions&&(jt.slackGlobalActions=Hn.filterShortcuts(Ze,it.slackGlobalActions)),it.quipShortcutCommands&&(jt.quipShortcutCommands=Hn.filterShortcuts(Ze,it.quipShortcutCommands)),it.canvasAiSuggestions&&(jt.canvasAiSuggestions=Hn.filterShortcuts(Ze,it.canvasAiSuggestions)),it.channelActions&&(jt.channelActions=Hn.filterShortcuts(Ze,it.channelActions)),it.fakeGlobalActions&&(jt.fakeGlobalActions=Hn.filterShortcuts(Ze,it.fakeGlobalActions)),it.callActions&&(jt.callActions=Hn.filterShortcuts(Ze,it.callActions)),it.workflowTriggers&&(jt.workflowTriggers=Hn.filterWorkflowTriggers(Ze,it.workflowTriggers)),it.appActions&&(!(At==null||(mn=At.entities)===null||mn===void 0||(Tt=mn.shortcuts)===null||Tt===void 0)&&Tt.apps)&&(jt.apps=Hn.filterApps(Ze,it.appActions,it.fakeGlobalActions,it.slashCommands)),it.broadcastKeywords&&(jt.broadcastKeywords=Hn.filterBroadcastKeywords(Ze,it.broadcastKeywords)),it.emoji&&(jt.emoji=Hn.filterEmoji(Ze,it.emoji)),it.channelSections&&(jt.channelSections=Hn.filterChannelSections(Ze,it.channelSections,Us=>{var Ws,Fs;return!!(!((Ws=At.entities.channelSections)===null||Ws===void 0||(Fs=Ws.includeTypes)===null||Fs===void 0)&&Fs[Us.type])})),it.files&&(jt.files=Hn.filterFiles(Ze,it.files,Jn(Ze,At.entities.files))),it.topEngagedFiles&&(jt.topEngagedFiles=Hn.filterFiles(Ze,it.topEngagedFiles,Jn(Ze,At.entities.topEngagedFiles))),it.lists&&(jt.lists=Hn.filterLists(Ze,it.lists));const us=(0,Re.dL)(Ze);it.helpArticles&&us&&(jt.helpArticles=Hn.filterHelpArticles(Ze,it.helpArticles)),it.salesListViews&&(0,y.hx)(Ze)&&(jt.salesListViews=Hn.filterSalesListViews(Ze,it.salesListViews)),Rn.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),Cs==null||Cs.close();const ms=Yn(jt,it.remoteIds||{});let vs;vs=ms.topEngagedFiles,delete ms.topEngagedFiles;const Zn=500,Es=3;var ks;const hs=Math.min(((ks=At==null?void 0:At.limit)!==null&&ks!==void 0?ks:1)*Es,Zn);let fs=(0,l.A)(Object.values(ms));if(At.sort&&!At.sort.bypassSorting){var Bs;let Us=!1;fs.length<hs&&(Us=!0);const Ws=new Ft.A({query:Lt,options:{modelOnly:Us,...At.sort}}),Fs=(Bs=V.LI.get({label:V.gC.Searcher,id:gt}))===null||Bs===void 0?void 0:Bs.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:tn==null?void 0:tn.getId()}});fs=Ws.sort(Ze,ms),Fs==null||Fs.close(),vs&&(vs=(0,Wt.jW)(Ze,{query:Lt,list:vs,bonusPoints:Ws.getFrecencyBonusPointsFunction(Ze)}))}if(vs&&(fs=ts(fs,vs)),At.sort&&At.sort.frecency&&!At.sort.bypassSorting){var js;const Us=(js=V.LI.get({label:V.gC.Searcher,id:gt}))===null||js===void 0?void 0:js.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:tn==null?void 0:tn.getId()}});fs=new rn.A({query:Lt,options:{...At.sort},teamId:(0,en.ZT)(Ze),enterpriseId:(0,N.k)(Ze)&&(0,en.jV)(Ze)?(0,en.jV)(Ze):void 0}).sort(Ze,fs.slice(0,hs)),Us==null||Us.close()}return At.limit&&(fs=(0,d.A)(fs,At.limit)),At.returnMetadata||(fs=fs.map(Us=>Us.item)),Ds(),fs||[]}c(dn,"processFetchedEntities");function Yn(Ze,Ut){return(0,u.A)(Ze,(Lt,it)=>{const At=ht(it),gt=Ut[it];let Pt=!1;return it==="topEngagedFiles"&&(Pt=!0),Lt.map(Vt=>{const an=gt&&gt.has(Vt.item.id)?"remote":"local";return{...Vt,type:At,source:an,isTopEngagedFile:Pt}})})}c(Yn,"addResultMetadata");function ht(Ze){switch(Ze){case"channels":return"channel";case"members":return"member";case"mpims":return"mpim";case"ims":return"ims";case"userGroups":return"userGroup";case"teams":return"team";case"views":return"view";case"modals":return"modal";case"appActions":return"appAction";case"apps":return"app";case"broadcastKeywords":return"broadcastKeyword";case"emoji":return"emoji";case"files":return"file";case"topEngagedFiles":return"file";case"slashCommands":return"slashCommand";case"quipShortcutCommands":return"quipShortcutCommand";case"slackGlobalActions":return"globalAction";case"channelActions":return"channelAction";case"fakeGlobalActions":return"appAction";case"callActions":return"channelAction";case"workflowTriggers":return"workflowTrigger";case"helpArticles":return"helpArticles";case"salesListViews":return"salesListViews";case"canvasAiSuggestion":return"canvasAiSuggestions";default:return"other"}}c(ht,"getTypeFromGroup");function Rs(Ze,Ut,Lt){const{members:it,channels:At,userGroups:gt,broadcastKeywords:Pt,emoji:Vt}=Ze.entities,{members:an,channels:Pn,userGroups:mn}=Ut.entities;let Tt={},tn="";Lt!=null&&Lt.length&&(tn=Array.isArray(Lt)?"@":Lt.charAt(0)),(tn==="@"||tn==="\uFF20")&&(it||gt||Pt)?(it&&(Tt.members=ls(it,an)),gt&&(Tt.userGroups=ls(gt,mn)),Pt&&(Tt.broadcastKeywords=ls(Pt,{}))):(tn==="#"||tn==="\uFF03")&&At?Tt.channels=ls(At,Pn):tn===":"&&Vt?Tt.emoji=ls(Vt,{}):Tt=Object.keys(Ze.entities).reduce((hs,fs)=>{const Bs=Ze.entities[fs];return Bs&&(hs[fs]=ls(Bs,Ut.entities[fs])),hs},{});var An;const yn=ls((An=Ze==null?void 0:Ze.sort)!==null&&An!==void 0?An:{},Ut.sort);var jt;const ts=(jt=Ze.limit)!==null&&jt!==void 0?jt:Ut.limit;var Hn;const Rn=(Hn=Ze.fuzzyLimit)!==null&&Hn!==void 0?Hn:Ut.fuzzyLimit;var Cs;const us=(Cs=Ze.fuzzyJumpLimit)!==null&&Cs!==void 0?Cs:Ut.fuzzyJumpLimit,ms=Ze.fuzzyCJK||Ut.fuzzyCJK,vs=Ze.tiered,Zn=Ze.filter,Es=Ze.allowEmptyQuery,ks=Ze.returnMetadata||Ut.returnMetadata;return yn&&(yn.model=yn.model||(0,ln.In)()),{entities:Tt,sort:yn,limit:ts,tiered:vs,filter:Zn,allowEmptyQuery:Es,fuzzyLimit:Rn,fuzzyJumpLimit:us,fuzzyCJK:ms,returnMetadata:ks,searchViewContext:Ze.searchViewContext}}c(Rs,"getAllOptions");function ls(Ze,Ut){if(!Ut||Ze===!1)return Ze;const Lt=Ze===!0?{}:Ze,it=Ut===!0?{}:Ut;return(0,_.A)(Lt,it)}c(ls,"mergeOptions");function Ms(Ze){const{members:Ut,channels:Lt,teams:it,userGroups:At,appActions:gt,files:Pt}=Ze.entities;(Ut||Lt||it||At||gt||Pt)&&R.Ay.pauseRefetchIndefinitely()}c(Ms,"pauseConditionalFetching");function Ds(){R.Ay.unpauseRefetchImmediately()}c(Ds,"unpauseConditionalFetching"),(0,L.ul)("searcher",{search:(Ze,Ut)=>(0,je.dispatchForTeamId)(Ze,_s({options:Ut})),searchLocal:(Ze,Ut)=>{const Lt=(0,je.getStateByTeamId)(Ze);return Ts(Lt,{options:Ut})}})},3275490582:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5519146941);function s(){return s=Object.assign||function(o){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(o[d]=r[d])}return o},s.apply(this,arguments)}c(s,"_extends");function i(o){const a=o,r=t.forwardRef((d,u)=>t.createElement(n.A.Consumer,null,_=>{let{view:v,closeView:h,windowId:f,container:I,isMainWindow:p,isChildWindow:y,shouldUseNavigate:g,activeTab:E,forceTabWhenNavigating:M,getSiblingView:T,getPrimaryView:D,getSecondaryView:C,getViewSet:m}=_;return t.createElement(a,s({ref:u},d,{view:v,closeView:h,windowId:f,container:I,isMainWindow:p,isChildWindow:y,shouldUseNavigate:g,activeTab:E,forceTabWhenNavigating:M,getSiblingView:T,getPrimaryView:D,getSecondaryView:C,getViewSet:m}))}));return r.displayName=`withViewContainerContext(${a.displayName})`,r}c(i,"withViewContainerContext"),i.displayName="withViewContainerContext";const l=i},1149563359:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3134334389),n=e(9053431150);function s(i,l){const{addFocusTransitionListener:o,removeFocusTransitionListener:a}=(0,t.useContext)(n.Ay);(0,t.useEffect)(()=>(o(i,l),()=>{a(i,l)}),[o,l,a,i])}c(s,"useFocusTransitionListener")},5204962244:(x,A,e)=>{"use strict";e.d(A,{d:()=>n});var t=e(3134334389);function n(s){const i=(0,t.useRef)();return i.current===void 0&&(i.current=s()),i.current}c(n,"useRefCreator")},3107743571:(x,A,e)=>{"use strict";e.d(A,{Z:()=>n});var t=e(3134334389);const n=c(function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const o=(0,t.useRef)(),a=(0,t.useCallback)(()=>{const r=o.current;r&&(window.clearTimeout(r),o.current=void 0)},[]);return(0,t.useEffect)(()=>(a(),o.current=window.setTimeout(s,i),a),[s,a,i].concat(l)),a},"useTimeout")},4003148341:(x,A,e)=>{"use strict";e.d(A,{x:()=>s});var t=e(6122756707),n=e(3855029223);function s(){const{getState:i}=(0,t.Pj)();return(0,n.E)({getState:i})}c(s,"useTracer")},3320454392:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){const s=c(()=>{window.Cypress||n()},"unloadHandler");window.addEventListener("beforeunload",s)}c(t,"addUnloadHandler")},9853754481:(x,A,e)=>{"use strict";e.d(A,{Ep:()=>l,n2:()=>a,Ay:()=>d});var t=e(6313685253),n=e(7299481592);const s=window.AudioContext||window.webkitAudioContext,i=window.AnalyserNode,l=6;function o(u){let _=1;for(;_*2<u;)_*=2;return _}c(o,"getPowerof2LessThan");function a(u){let v=.01;for(const f of u)v=Math.max(v,(f-128)/128);const h=(Math.log(.01)-Math.log(v))/Math.log(.01);return Math.min(Math.max(h,0),1)}c(a,"computeStrength");function r(u){return(0,t.A)(u,(_,v)=>{const h=v.getSettings().sampleRate;return h!==void 0&&_!==void 0?Math.max(_,h):h},void 0)}c(r,"getMaxTrackSampleRate");let d=c(class{getLevel(){var _;return(_=this.analyserNode)===null||_===void 0||_.getByteTimeDomainData(this.data),a(this.data)/l}stop(){var _;if(this.analyserNode){var v;(v=this.audioNode)===null||v===void 0||v.disconnect(this.analyserNode)}delete this.audioNode,this.audioNode=void 0,delete this.analyserNode,this.analyserNode=void 0,(_=this.audioCtx)===null||_===void 0||_.close(),delete this.audioCtx,this.audioCtx=void 0}constructor(_,v){(0,n.M)(v>=0,"Level poll interval must be positive"),this.audioCtx=new s;const h=_.getAudioTracks();(0,n.M)(!!h.length,"Need audio tracks to run analyser");const I=(r(h)||48e3)*v/1e3,p=Math.max(32,Math.min(32768,o(I)));this.data=new Uint8Array(p),this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.fftSize=p,this.audioNode=this.audioCtx.createMediaStreamSource(_),this.audioNode.connect(this.analyserNode)}},"AudioAnalyser")},1829947126:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(6267571562);class n{createPublisher(l){return this.publishers[l]=new t.G,this.publishers[l]}createAllPublisher(){return this.allPublisher=new t.G,this.allPublisher}publish(l,o){const a=this.publishers[l];a&&a.publish(o)}publishAll(l,o){var a;const r={peerId:l,value:o};(a=this.allPublisher)===null||a===void 0||a.publish(r)}subscribe(l,o){(this.publishers[l]||this.createPublisher(l)).subscribe(o)}subscribeAll(l){this.createAllPublisher().subscribe(l)}unsubscribe(l,o){const a=this.publishers[l];a&&a.unsubscribe(o)}constructor(){this.publishers={}}}c(n,"PeerPubSub");const s=new n},7396150282:(x,A,e)=>{"use strict";e.d(A,{x:()=>l});var t=e(9009528296),n=e(1829947126),s=e(9853754481);const i=100;class l{setPreviewStream(a){if(!a){this.previewAudioAnalyser=void 0;return}this.previewAudioAnalyser=new s.Ay(a,i)}cleanup(){var a,r;this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=0),(a=this.previewAudioAnalyser)===null||a===void 0||a.stop(),this.previewAudioAnalyser=void 0,(r=this.selfAudioAnalyser)===null||r===void 0||r.stop(),this.selfAudioAnalyser=void 0}constructor(){this.intervalHandle=window.setInterval(()=>{this.selfAudioAnalyser&&n.A.publish("self",this.selfAudioAnalyser.getLevel()),this.previewAudioAnalyser&&t.A.publish(this.previewAudioAnalyser.getLevel())},i)}}c(l,"PreviewAudioLevelMonitor")},9009528296:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6267571562);const n=new t.G},5046160032:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(2016742660);const n=window.navigator&&typeof window.navigator.sendBeacon=="function";function s(i){let{apiUrl:l,method:o,token:a,args:r={},versionTs:d="",versionUid:u=""}=i,_=!1;const v=(0,t.DI)();let h=`${l}${o}?_x_id=${u.substring(0,8)}-${Date.now()/1e3}`;v!==null&&(h+=`&fp=${v}`);const f=new FormData;if(f.append("token",a),Object.keys(r).forEach(I=>f.append(I,r[I])),n)_=navigator.sendBeacon(h,f);else{const I=new XMLHttpRequest;I.addEventListener("load",()=>{const{readyState:p,status:y,DONE:g}=I;p===g&&y===200&&(_=!0)}),I.open("POST",h,!0),I.setRequestHeader("X-Slack-Version-Ts",d),I.send(f)}return _}c(s,"beaconApiCall")},8935621861:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(9706240641),n=e(6273911963),s=e(2801744021);function i(f){return l.apply(this,arguments)}c(i,"fetchNearestChimeMediaRegion");function l(){return l=(0,t.coroutine)(function*(f){const I=new n.A({url:f?"https://nearest-us-gov-media-region.l.chime.aws/":"https://nearest-media-region.l.chime.aws"});try{const p=yield new s.Ay().q(I);return JSON.parse(p).region}catch{return""}}),l.apply(this,arguments)}c(l,"_fetchNearestChimeMediaRegion");var o=e(6422693406),a=e(3390261877),r=e(3320454392),d=e(504058561),u=e(322597465),_=e(796111729);let v=c(class lo{writeRegions(I,p){const y=p?lo.GOV_REGION_STORAGE_KEY:lo.REGION_STORAGE_KEY,g={regions:I,timestamp:Date.now(),version:lo.VERSION};try{localStorage.setItem(y,JSON.stringify(g))}catch(E){(0,_.Wo)({label:"REGION-PROVIDER"}).error("Could not write chime media regions to localStorage: ",E.message)}}readRegions(I){const p=I?lo.GOV_REGION_STORAGE_KEY:lo.REGION_STORAGE_KEY,y=localStorage.getItem(p);if(!y)return null;let g=null;try{g=JSON.parse(y)}catch(E){return(0,_.Wo)({label:"REGION-PROVIDER"}).error("Could not parse chime media regions from localStorage: ",E.message),null}return g.version!==lo.VERSION||this.ttl&&Date.now()-g.timestamp>this.ttl?null:g}constructor(I){this.ttl=I}},"ChimeRegionStorage");v.REGION_STORAGE_KEY="ChimeRegionStorage-chimeRegionCache",v.GOV_REGION_STORAGE_KEY="ChimeRegionStorageGov-chimeRegionCache",v.VERSION=1;let h=c(class zs{static getInstance(){return zs.instance||(zs.instance=new zs),zs.instance}getNearestChimeMediaRegion(I){var p=this;return(0,t.coroutine)(function*(){return(I?(0,u.H)(I):!1)?p.getNearestChimeGovMediaRegion():p.getNearestChimeCommercialMediaRegion()})()}getNearestChimeCommercialMediaRegion(){var I=this;return(0,t.coroutine)(function*(){if(!I.commercialRegions){const p=I.storage.readRegions(!1);p&&(I.commercialRegions=p.regions)}return I.commercialRegions?I.commercialRegions:I.remoteGetNearestChimeMediaRegion(!1)})()}getNearestChimeGovMediaRegion(){var I=this;return(0,t.coroutine)(function*(){if(!I.govRegions){const p=I.storage.readRegions(!0);p&&(I.govRegions=p.regions)}return I.govRegions?I.govRegions:I.remoteGetNearestChimeMediaRegion(!0)})()}remoteGetNearestChimeMediaRegion(I){var p=this;return(0,t.coroutine)(function*(){const y=yield o.S.resolve(i(I));return I?p.govRegions=y:p.commercialRegions=y,p.storage.writeRegions(y,I),y})()}init(){if(this.initialized)return 0;this.initialized=!0;const I=(0,d.z$)();let p=zs.INITIAL_LOAD_DELAY;const y=this.storage.readRegions(I);y&&(I?this.govRegions=y.regions:this.commercialRegions=y.regions,p=Math.max(zs.INITIAL_LOAD_DELAY,zs.REFRESH_INTERVAL-(Date.now()-y.timestamp)));var g=this;const E=setTimeout((0,t.coroutine)(function*(){yield g.remoteGetNearestChimeMediaRegion(I);const M=new a.A(zs.REFRESH_INTERVAL);M.start((0,t.coroutine)(function*(){yield g.remoteGetNearestChimeMediaRegion(I)})),(0,r.A)(()=>{M.stop()})}),p);return(0,r.A)(()=>{clearTimeout(E)}),p}getRawRegions(){return this.commercialRegions}clear(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1}constructor(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1,this.storage=new v(zs.REFRESH_INTERVAL)}},"ChimeRegionProvider");h.REFRESH_INTERVAL=3*24*60*60*1e3,h.INITIAL_LOAD_DELAY=5*1e3},3390261877:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});let t=c(class{start(s){this.stop(),this.timer=setInterval(s,this.intervalMs)}stop(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)}constructor(s){this.intervalMs=s,this.timer=null}},"IntervalScheduler")},6728003438:(x,A,e)=>{"use strict";e.d(A,{F4:()=>P,GC:()=>K,lP:()=>B,no:()=>m});var t=e(9113979368),n=e(6533394955),s=e(4423055085),i=e(8847766420),l=e(3346431019),o=e(3855029223),a=e(2250002584),r=e(796111729),d=e(3158767748),u=e(8802876335),_=e(4798756512);const v="RTM-EVENT-METRICS",h=4;let f=!1,I;const p=50;function y(){return f?!0:(0,l.A)()?(I===void 0&&(I=(0,d.A)(p),I&&(0,r.Wo)({label:v}).info("Metrics collection enabled for the current interval.")),I):!1}c(y,"shouldSampleForInterval");let g={},E={},M={},T={},D={},C={};function m(U){let{teamOrEnterpriseId:F,rtmEventType:Y,rtmEventSubtype:Z,duration:ee,msgs:j,fromEvtLog:ge}=U;var ne;if(!y())return;const ue=(0,i.Kc)((ne=(0,n.getStoreOrSharedStoreInstanceByTeamOrEnterpriseId)(F))===null||ne===void 0?void 0:ne.getState());if(!ue)return;const he=Y==="message"?`message/${Z}`:Y;ge&&O({bucket:D,teamOrEnterpriseId:ue,eventType:he,value:j.length}),O({bucket:E,teamOrEnterpriseId:ue,eventType:he,value:1}),O({bucket:M,teamOrEnterpriseId:ue,eventType:he,value:j.length}),O({bucket:T,teamOrEnterpriseId:ue,eventType:he,value:ee})}c(m,"incrementMetrics");function O(U){let{bucket:F,teamOrEnterpriseId:Y,eventType:Z,value:ee}=U;var j;const ge=(j=F[Y])!==null&&j!==void 0?j:{};var ne;const ue=(ne=ge[Z])!==null&&ne!==void 0?ne:0;ge[Z]=ue+ee,F[Y]=ge}c(O,"incrementBucket");function P(U,F){if((0,t.A)(M)&&(0,t.A)(g)){b();return}const Y=Object.keys({...M,...g}),Z=setInterval(()=>{const ee=(0,r.Wo)({label:v}),j=Y.pop();if(!j){ee.info("Completed metrics aggregation",{traceId:U.getTraceId()}),clearInterval(Z);return}ee.info(`Sending metric report for id: ${j}`),V({teamOrEnterpriseId:j,clientMetricsTrace:U,performanceTracingTags:F}),L({teamOrEnterpriseId:j,clientMetricsTrace:U,performanceTracingTags:F}),S(j)},1e3)}c(P,"reportRtmMetrics");function R(U,F){const Y=(0,n.getStateByTeamId)(U);return{...F,metric_version:h,slow_connection_count:(0,u.d4)(Y)}}c(R,"getMetricsTraceMetatags");function L(U){let{teamOrEnterpriseId:F,clientMetricsTrace:Y,performanceTracingTags:Z}=U;const ee=g[F];if(!ee)return;const j=(0,o.E)({teamOrEnterpriseId:F}),ge=j.createMetricsTrace({label:"rtm_incoming",tags:R(F,Z),traceId:Y.getTraceId(),parentSpanId:Y.getRootSpanId()});var ne;const ue=(ne=C[F])!==null&&ne!==void 0?ne:{};let he=0,be=0;Object.entries(ee).forEach(xe=>{let[Le,fe=0]=xe;var se;const Q=(se=ue[Le])!==null&&se!==void 0?se:0;he+=fe,be+=Q,ge.store({name:"rtm_incoming:event_count",value:fe}).addTags({event_type:Le,eventlog_count:Q,socket_count:fe-Q})}),ge.store({name:"rtm_incoming:total_event_count",value:he}),ge.store({name:"rtm_incoming:total_event_count:socket",value:he-be}),ge.store({name:"rtm_incoming:total_event_count:eventlog",value:be}),(0,r.Wo)({label:v}).info(`${F} total incoming event count: ${he}`),j.reportTrace(ge)}c(L,"maybeReportRawEventCount");function V(U){let{teamOrEnterpriseId:F,clientMetricsTrace:Y,performanceTracingTags:Z}=U;const ee=M[F];if(!ee)return;const j=(0,o.E)({teamOrEnterpriseId:F}),ge=j.createMetricsTrace({label:"rtm_dispatch",tags:R(F,Z),traceId:Y.getTraceId(),parentSpanId:Y.getRootSpanId()});var ne;const ue=(ne=E[F])!==null&&ne!==void 0?ne:{};var he;const be=(he=T[F])!==null&&he!==void 0?he:{};var xe;const Le=(xe=D[F])!==null&&xe!==void 0?xe:{};let fe=0,se=0;Object.entries(ee).forEach(Q=>{let[k,N]=Q;const $=ue[k],W=be[k];if($===void 0||W===void 0)return;var q;const re=(q=Le[k])!==null&&q!==void 0?q:0;fe+=N,se+=re,ge.store({name:"rtm_dispatch:duration",value:W}).addTags({event_type:k,total_events:N,total_batches:$,per_event_duration:W/N,eventlog_count:re,socket_count:N-re})}),ge.store({name:"rtm_dispatch:total_event_count",value:fe}),ge.store({name:"rtm_dispatch:total_event_count:socket",value:fe-se}),ge.store({name:"rtm_dispatch:total_event_count:eventlog",value:se}),(0,r.Wo)({label:v}).info(`${F} total dispatch event count: ${fe}`),j.reportTrace(ge)}c(V,"maybeReportEventMetrics");function B(U){let{teamId:F,msgs:Y}=U;if(!y())return;const Z=(0,n.getStateByTeamId)(F);var ee;const j=(ee=(0,i.Kc)(Z))!==null&&ee!==void 0?ee:F,ge=Y.reduce((ne,ue)=>(!ue||!ue.type||(ne[ue.type]?ne[ue.type]+=1:ne[ue.type]=1),ne),{});Object.entries(ge).forEach(ne=>{let[ue,he]=ne;O({bucket:g,teamOrEnterpriseId:j,eventType:ue,value:he}),O({bucket:C,teamOrEnterpriseId:j,eventType:ue,value:he})})}c(B,"countRawEventsVolumeFromEventLog");function K(U){let{teamId:F,msg:Y}=U;if(!y()||!Y||!Y.type)return;const Z=(0,n.getStateByTeamId)(F);var ee;const j=(ee=(0,i.Kc)(Z))!==null&&ee!==void 0?ee:F;O({bucket:g,teamOrEnterpriseId:j,eventType:Y.type,value:1})}c(K,"countRawEventVolume");function b(){I=void 0,g={},M={},E={},T={},D={},C={},(0,r.Wo)({label:v}).info("Metrics collection sampling has been reset.")}c(b,"resetAllCollections");function S(U){I=void 0,delete g[U],delete M[U],delete E[U],delete T[U],delete D[U],delete C[U],(0,r.Wo)({label:v}).info(`Metrics collection sampling has been reset for id: ${U}`)}c(S,"resetCollections");const G=c(()=>({rawEventCountBuckets:g,eventCountBuckets:M,batchCountBuckets:E,durationBuckets:T,eventLogEventCountBuckets:D,eventLogRawEventCountBuckets:C}),"debugGetBuckets");(0,s.ul)("rtmEventMetrics",{debugGetBuckets:G,debugToggleSampling:()=>{f=!f,b(),(0,r.Wo)({label:v}).info(`Interval sampling: ${f?"ON":"OFF"}`)},debugReportMetrics:()=>{const U=(0,a.F)(),F=U.createMetricsTrace({samplingOptions:{sampleType:_.tS.ALWAYS}});P(F,{}),U.reportTrace(F)}}),Object.defineProperty({resetAllCollections:b,debugGetBuckets:G,reportRtmMetrics:P,intervalSampleCache:I},"intervalSampleCache",{get:()=>I,set:U=>{I=U}})},3945243579:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(5950652755),n=e(796111729);let s=!1;const i=c(d=>{var u;if(!d)return;let _="";const v=d.srcElement||d.target,h=n.Wo&&(0,n.Wo)();if(v&&v.nodeName){if(v.nodeName==="SCRIPT"){const p=v.src;_=`[${d.type||"error"}] from script at ${p} (failed to load?)`}else if(v.nodeName==="IMG"){const p=v.src||v.currentSrc||"unknown";h.warn(`<img> fired error with url = ${p}`);return}}if(d.message==="ResizeObserver loop limit exceeded"||d.message==="ResizeObserver loop completed with undelivered notifications"){h.warn("ResizeObserver observation target modified in handler");return}if(d.message==="can't access dead object"||d.message==="rambox is not defined")return;if(d.error&&d.error.stack&&(_+=` ${d.error.stack}`),d.filename){const p=d.filename,y=d.lineno,g=d.colno;_+=` from ${p}`,y&&(_+=` @ line ${y}, col ${g}`)}let f;if(d.error&&d.error.stack?f=_:f=`${d.message||""} ${_}`,f&&f.replace&&(f=f.replace(/\s+/g," ").trim()),!f||!f.length)if(v){const p=v.nodeName||"unknown";if(p==="VIDEO")return;f=`error event from node of ${p}, no message provided?`}else f="error event fired, no relevant message or node found";f=`\u{1F41E} ${f}`;const I=((u=d.error)===null||u===void 0?void 0:u.subtype)||"js_runtime_error";l({error:d.error||d,msg:f,subtype:I})},"globalErrorHandler");function l(d){const{error:u,msg:_,subtype:v}=d,h={subtype:v};(0,n.Wo)().error(u,_,h)}c(l,"logError");const a=c(d=>{const u=d||window;if(s)return;u.bootGlobalErrorHandler&&(u.removeEventListener("error",u.bootGlobalErrorHandler,!0),u.removeEventListener("unhandledrejection",u.bootGlobalUnhandledRejectionHandler),delete u.bootGlobalErrorHandler,delete u.bootGlobalUnhandledRejectionHandler);const _=!0,v=(0,t.A)(i,1e4);u.addEventListener("error",v,_),u.addEventListener("unhandledrejection",h=>{var f;const I=h==null||(f=h.detail)===null||f===void 0?void 0:f.reason;I&&I instanceof Error&&(I.constructor!==Error||I.subtype)&&i({error:I,filename:"promise_rejection"})}),s=!0},"registerGlobalErrorHandler"),r={globalErrorHandler:i};Object.defineProperty(r,"logError",{get:()=>l,set:d=>{l=d}}),Object.defineProperty(r,"hasRegisteredGlobalErrorHandler",{get:()=>s,set:d=>{s=d}})},7542104324:(x,A,e)=>{"use strict";e.d(A,{dj:()=>tt,d1:()=>_t,uH:()=>ut,bo:()=>Kt,lI:()=>rs,sw:()=>jn,mt:()=>as,rH:()=>He});var t=e(9706240641),n=e(6422693406),s=e(3398586081),i=e(7715417323),l=e(796111729),o=e(6304789565),a=e(6533394955),r=e(8847766420),d=e(5795074931),u=e(8003339552),_=e(1658558415),v=e(4423055085),h=e(8352634987),f=e(4096483543),I=e(8233775522),p=e(6728003438),y=e(3078252698),g=e(9101533895),E=e(7042557635),M=e(4446301238),T=e(8040098042),D=e(7334104107),C=e(1407713935),m=e(9884588328);function O(ft,pt,Ht){return!ft.text||!(D.$2.test(ft.text)||D.Oh.test(ft.text)||D.K0.test(ft.text)||D.y7.test(ft.text))||!(0,g.hh)(Ht(),ft.channel)?n.K.resolve():pt((0,E.L)({channelId:ft.channel})).catch(i.A)}c(O,"maybeEnsureMemberCount");let P=function(){var ft=(0,t.coroutine)(function*(pt,Ht){const nn=Ht(),kn=c(function(){for(var wn=arguments.length,It=new Array(wn),Je=0;Je<wn;Je++)It[Je]=arguments[Je];return(0,a.dispatchForTeamId)((0,r.ZT)(nn),...It)},"dispatch"),xt=pt.subtype?`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${pt.type} and subtype: ${pt.subtype}`:`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${pt.type}`,Fn=(0,y.A)(pt.channel)&&(0,T.A)(pt.channel)&&!(0,g.hh)(nn,pt.channel)?kn((0,M.pX)({ids:[pt.channel],reason:xt,callSource:M.aI.EnsureModelObsArePresent})):n.K.resolve();yield n.K.all([Fn,O(pt,kn,Ht)]).catch(i.A)});return c(function(Ht,nn){return ft.apply(this,arguments)},"ensureModelObsInMessageArePresent")}();function R(ft,pt){return L.apply(this,arguments)}c(R,"ensureModelObsInMessageAreOpen");function L(){return L=(0,t.coroutine)(function*(ft,pt){if(ft.subtype)return;const Ht=!1,nn=(0,g.OL)(pt(),ft.channel,Ht);nn&&(0,C.JM)(nn)&&((0,m.nT)(nn)||(yield(0,a.dispatchForTeamId)((0,r.ZT)(pt()),(0,M.jP)({channel:nn.id,reason:"preprocess-rtm-message/ensureModelObsInMessageAreOpen"}))))}),L.apply(this,arguments)}c(L,"_ensureModelObsInMessageAreOpen");function V(ft,pt){return B.apply(this,arguments)}c(V,"preprocessRtmMessage");function B(){return B=(0,t.coroutine)(function*(ft,pt){if(ft.type==="message")try{yield P(ft,pt),yield R(ft,pt)}catch{}}),B.apply(this,arguments)}c(B,"_preprocessRtmMessage"),Object.defineProperty({maybeEnsureMemberCount:O,ensureModelObsInMessageAreOpen:R},"ensureModelObsInMessageArePresent",{get:()=>P,set:ft=>{P=ft}});var b=e(5154341017),S=e(6890312250),G=e(2240330919),H=e(5238395322),U=e(9190452268),F=e(2250002584),Y=e(3158767748),Z=e(4798756512),ee=e(2791814261);const j=7;let ge;const ne=[],ue=[];let he,be;(0,v.zv)("rtmMetrics",()=>({enqueuedEventCounts:{allTeams:ne.concat(he),backgroundTeams:ue.concat(be)}}));const xe=(0,s.A)(()=>(0,Y.A)(1)||(0,ee.c)());function Le(){let ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!(0,f.A)()||!xe())return;const pt=Math.floor(Date.now()/1e3);if(ge!==pt){let Ht=0;if(ge){const nn=pt-ge;nn>60?(he=void 0,be=void 0,ne.length=0,ue.length=0):nn>1&&(Ht=pt-ge)}if(ge=pt,he!==void 0){ne.push(he),ue.push(be);for(let kn=0;kn<Ht;kn++)ne.push(0),ue.push(0);const nn=15*60;if(ne.length>=nn){const kn=(0,U.rh)(),xt=(0,b.A)((0,S.A)(ne),1),Dn=(0,G.A)(ne)||0,Fn=(0,H.A)(ne);(0,l.Wo)({label:"RTM-ENQUEUE-STATS"}).info(`Enqueue times (all teams): ${Fn} total, ${Dn} per second at peak, ${xt} per second average`);const It={is_count:!0,allow_zero:!0};kn.store(`rtm_nq_at${j}_avg`,xt,It),kn.store(`rtm_nq_at${j}_max`,Dn,It),kn.store(`rtm_nq_at${j}_total`,Fn,It),ne.length=0,ue.length=0}}he=0,be=0}he=(he||0)+ft}c(Le,"maybeMeasureEnqueueVelocity");let fe=0,se=0,Q=Date.now(),k=Date.now();const N=5*60*1e3;function $(ft){const pt=Date.now();fe=Math.max(fe,ft.length),Q+N<pt&&((0,U.rh)().count("rtm_queue_length_max",fe),fe=0,Q=pt)}c($,"maybeMeasureMaxQueueLength");function W(ft){const Ht=ft[0]._enqueuedAt,nn=Date.now(),kn=Ht&&nn-Ht;if(se=kn?Math.max(se,kn):se,k+N<nn){const xt=(0,F.F)(),Dn=xt.createMetricsTrace({label:"rtm_queue"});Dn.store({name:"rtm_queue_delay_max",value:se}),xt.reportTrace(Dn),se=0,k=nn}}c(W,"maybeMeasureMaxQueueDelay");function q(ft,pt){const Ht=(0,F.F)(),nn=Ht.createMetricsTrace({label:"rtm_state_modified",samplingOptions:{sampleType:Z.tS.CALL,sampleRate:.01}}),kn=pt?`${ft}/${pt}`:ft;nn.count({name:`rtm_state_modified:${kn}`}),Ht.reportTrace(nn)}c(q,"countRTMStateModified");var re=e(7578217447),le=e(5071086688),Ae=e(5470425448),Te=e(4761125736),Ne=e(2681892953),pe=e(8634352961),Ee=e(1369898444);const oe="RTM",ce=100;let ke={};const Ce=c(function(){let ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return ke[`${ft}${pt?`_${pt}`:""}`]||1},"getCurrentMaxBatchSize"),Me=c(function(){let ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;ke[`${ft}${pt?`_${pt}`:""}`]=Ht},"setCurrentMaxBatchSize");let Se=!1;const Ue={},He=c(ft=>{Se=ft},"setIsActiveHuddle"),Ye=c(ft=>{let{teamOrEnterpriseId:pt,msg:Ht}=ft;Ue[pt]||(Ue[pt]=[]),Ue[pt].push(Ht)},"queueUntilHuddleEnds"),J=c(ft=>{const pt=Ue[ft];Ue[ft]=[],pt.length&&rs(ft,pt)},"drainHuddleQueue"),ae=16;let Ve={},Be={},Ke={},Re={};function Fe(ft){var pt;return(pt=Be[ft])!==null&&pt!==void 0?pt:Ve[ft]}c(Fe,"getHandler");function Ie(ft){return ft.__isShared}c(Ie,"isSharedHandler");function ze(ft){return ft.teamOrEnterpriseId}c(ze,"getTeamOrEnterpriseId");function qe(ft){let{messages:pt,teamOrEnterpriseId:Ht}=ft;if(pt.msgs.length===0)return;const nn=Fe(pt.rtmEventType);if(nn)return{handler:nn,messages:pt,teamOrEnterpriseId:Ht}}c(qe,"getRoutedHandler");function st(ft,pt){if(Ke[ft]){const nn=isJasmine()||isJest()?`addRtmErrorHandler: duplicate call to add a handler for ${ft}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, 'handlers', {});\` to work around it.`:`addRtmErrorHandler: a handler is already registered for ${ft}`;throw new Error(nn)}Ke[ft]=pt}c(st,"addRtmErrorHandler");function ut(ft,pt){yt({functionName:"addSharedRtmHandler",handlersName:"sharedHandlers",rtmEventType:ft});const Ht=Object.assign(pt,{__isShared:!0});Be[ft]=Ht}c(ut,"addSharedRtmHandler");function tt(ft,pt){yt({functionName:"addBatchRtmHandler",handlersName:"handlers",rtmEventType:ft}),Ve[ft]=pt}c(tt,"addBatchRtmHandler");function _t(ft,pt){tt(ft,(Ht,nn,kn)=>{for(const xt of Ht)pt(xt,nn,kn)})}c(_t,"addRtmHandler");function yt(ft){let{functionName:pt,handlersName:Ht,rtmEventType:nn}=ft;if(!Ve[nn]&&!Be[nn])return;const xt=(0,u.A)()||(0,_.A)()?`${pt}: duplicate call to add a handler for ${nn}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, '${Ht}', {});\` to work around it.`:`${pt}: a handler is already registered for ${nn}`;throw new Error(xt)}c(yt,"throwIfHandlerRegistered");function Kt(ft){return!!Ve[ft]}c(Kt,"doesHandlerExist");function Qt(){return Ve}c(Qt,"debugGetHandlers");function Jt(){return Re}c(Jt,"debugGetPendingMessages");const Gt=(0,s.A)(ft=>{var pt;if(!(0,Ee.M)())return!1;const Ht=(pt=(0,a.getStoreInstanceByTeamId)(ft))===null||pt===void 0?void 0:pt.getState();return Ht&&(0,Te._Z)(Ht,"profile_rtm")==="on"});let wt=null,Bt={},Wt=null;function Tn(){Bt={},wt=new Profiler({maxBufferSize:1e4,sampleInterval:0}),wt.addEventListener("samplebufferfull",c(function(){const pt=this.sampleInterval,Ht=Bt;this.stop().then(nn=>{const kn=performance.timeOrigin;for(const[xt,Dn]of Object.entries(Ht)){if(!Dn.length)continue;const Fn=new Date(kn+Dn[0].start),wn=new Date(kn+Dn[Dn.length-1].end);(0,Ne.lM)("rtm",xt,(0,Ee.W)(nn,Dn),{from:Fn,until:wn,sample_interval:pt})}}),Tn()},"samplebufferfull"))}c(Tn,"startProfiling");let Ot=!1;function Ft(ft){try{if(Ot||!Gt(ft))return;wt||Tn(),Wt=performance.now()}catch(pt){Ot=!0,(0,l.Ay)({label:oe,teamOrEnterpriseId:ft}).warn("Unable to begin profiled section",pt)}}c(Ft,"beginProfiledSection");function rn(ft){!wt||Wt===null||(ft in Bt||(Bt[ft]=[]),Bt[ft].push({start:Wt,end:performance.now()}),Wt=null)}c(rn,"endProfiledSection");function ln(ft){const{rtmEventType:pt,rtmEventSubtype:Ht,msgs:nn,fromEvtLog:kn}=ft.messages,xt=ze(ft),Dn=(0,l.Ay)({label:oe,teamOrEnterpriseId:xt});Ft(xt);const Fn=performance.now();try{h.Ay.pauseRefetchIndefinitely();const Je=ft.handler,X=(0,a.getStoreInstanceByTeamId)(ft.teamOrEnterpriseId),_e=X==null?void 0:X.getState();Ie(Je)?Je(nn,ft.teamOrEnterpriseId):Je(nn,X.dispatch,X.getState);const ye=X==null?void 0:X.getState();_e!==ye&&q(pt,Ht)}catch(Je){throw Dn.error(`Error processing ${pt}: ${Je.message}`),Je}finally{h.Ay.unpauseRefetchImmediately()}const wn=performance.now();rn(xt);const It=wn-Fn;try{(0,p.no)({teamOrEnterpriseId:xt,rtmEventType:pt,rtmEventSubtype:Ht,duration:It,msgs:nn,fromEvtLog:kn}),le.A.publish({type:Ae.lx.RtmMetrics,update:It})}catch{}if(It>ae){let Je=`Processed ${nn.length} ${pt}`;Ht&&(Je+=`:${Ht}`),Je+=" event(s)";const X=[];nn.forEach(_e=>{var ye;const De=(ye=_e)===null||ye===void 0?void 0:ye.channel;De&&X.push(De)}),X.length&&(Je+=` in channel(s) ${X.join(",")}`),Je+=` over ${It.toFixed(2)}ms`,Dn.info(Je)}}c(ln,"dispatchMessages");const _n=50,en=100,Xt=.75,vn=1.1;function je(ft){return ft>_n}c(je,"shouldDefer");function Rt(ft){return hn.apply(this,arguments)}c(Rt,"preprocessRtmMessagesWithTimeout");function hn(){return hn=(0,t.coroutine)(function*(ft){let{msgs:pt,getState:Ht}=ft;const nn={},kn=3e4,xt=n.S.delay(kn,nn),Dn=n.S.map(pt,wn=>V(wn,Ht).catch(i.A),{concurrency:1});(yield n.S.race([Dn,xt]))===nn&&(0,l.Ay)({getState:Ht}).warn("Preprocessing messages took too long; continue to process queue")}),hn.apply(this,arguments)}c(hn,"_preprocessRtmMessagesWithTimeout");function Nn(ft){return rt.apply(this,arguments)}c(Nn,"routeMessages");function rt(){return rt=(0,t.coroutine)(function*(ft){let{messages:pt,teamOrEnterpriseId:Ht,elapsed:nn}=ft;const kn=qe({messages:pt,teamOrEnterpriseId:Ht});return!kn||es(Ht)?nn:vt({routedHandler:kn,elapsed:nn})}),rt.apply(this,arguments)}c(rt,"_routeMessages");function vt(ft){return Mt.apply(this,arguments)}c(vt,"dispatchMessagesWithPreprocessing");function Mt(){return Mt=(0,t.coroutine)(function*(ft){let{routedHandler:pt,elapsed:Ht}=ft;const nn=performance.now(),kn=(0,a.getStoreInstanceByTeamId)(pt.teamOrEnterpriseId);yield Rt({msgs:pt.messages.msgs,getState:kn.getState});const xt=performance.now();ln(pt);let Dn=Ht;return xt-nn>_n&&(Dn=0),Dn+=performance.now()-xt,Dn}),Mt.apply(this,arguments)}c(Mt,"_dispatchMessagesWithPreprocessing");function Ct(ft){return Yt.apply(this,arguments)}c(Ct,"handleNextMessageFromQueue");function Yt(){return Yt=(0,t.coroutine)(function*(ft){let{queue:pt,teamOrEnterpriseId:Ht,elapsed:nn=0}=ft;for(var kn;pt&&pt.length>0&&!(!((kn=pt[0])===null||kn===void 0)&&kn.type);)pt.shift();if(!pt||!pt.length)return n.S.resolve();const xt=(0,l.Ay)({teamOrEnterpriseId:Ht,label:oe});try{$(pt),W(pt)}catch{}const Dn=pt[0].type,Fn=pt[0].subtype,wn=(0,re.Wu)(pt[0]);let It=Ce(Dn,Fn);const Je=[pt[0]],X=[];for(let et=1;et<pt.length&&Je.length<It&&X.length<It;et++)if(pt[et].type===Dn&&pt[et].subtype===Fn)Je.push(pt[et]);else if(re.Sj.has(pt[et].type))X.push(pt[et]);else break;const _e=Je.length;_e>1&&xt.debug(oe,`Batch processing ${_e} of type ${Dn}, skipping ${X.length} interleaved events ${X.map(et=>et.type).join(",")}`);let ye=nn;try{ye=yield Nn({messages:{rtmEventType:Dn,rtmEventSubtype:Fn,msgs:Je,fromEvtLog:wn},teamOrEnterpriseId:Ht,elapsed:ye})}catch(et){xt.error(`Error while processing ${_e} ${Dn} event(s)`,et)}finally{_e!==Je.length&&(xt.error(`Message batch size for type (${Dn}) changed during handling`),xt.warn(`Original batch size: ${_e} Post-handler batch size: ${Je.length}`));const et=_e+X.length;pt.splice(0,et,...X)}const De=je(ye),Ge=document.visibilityState==="visible";return It=Ce(Dn,Fn),Ge&&(De?It>1&&ye>en&&(Me(Dn,Fn,Math.max(1,Math.floor(It*Xt))),xt.debug(oe,`Maximum batch size decreased to ${Ce(Dn,Fn)}`)):It<ce&&Je.length===It&&(Me(Dn,Fn,Math.min(ce,Math.ceil(It*vn))),xt.debug(oe,`Maximum batch size increased to ${Ce(Dn,Fn)}`))),pt.length?Ge&&De?n.S.delay(_n).then(()=>{Vn(Ht)}):Ct({queue:pt,teamOrEnterpriseId:Ht,elapsed:ye}):n.S.resolve()}),Yt.apply(this,arguments)}c(Yt,"_handleNextMessageFromQueue");let In=0,Un,En=100;function Bn(){let ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,l.Wo)();if(Un)return;const pt=Date.now()-In;if(pt<En){const Ht=Math.min(En-pt,En),nn=(0,f.A)()&&!(0,I.ko)((0,a.getStateForClientStore)());nn&&ft.info(oe,`Setting a timeout of ${Ht} ms to process more rtm events`),Un=window.setTimeout(()=>{Un=void 0,nn&&ft.info(oe,`Waited ${Ht} ms, processing more rtm events now`),Mn()},Ht);return}Mn()}c(Bn,"maybeDrainQueues");function Mn(){In=Date.now(),c(()=>{const pt=Object.keys(Re);for(const Ht of pt)Vn(Ht)},"drainQueuesFn")()}c(Mn,"drainQueues");function Vn(ft){!Re[ft]||!Re[ft].length||Ct({queue:Re[ft],teamOrEnterpriseId:ft})}c(Vn,"drainQueue");function rs(ft,pt){var Ht;let nn=0;const kn=pt.filter(Fn=>Fn!=null&&Fn.type?Se&&(0,pe.Zr)(Fn)?(Ye({teamOrEnterpriseId:ft,msg:Fn}),!1):((0,re.Wu)(Fn)||(nn+=1),!0):((0,l.Ay)({teamOrEnterpriseId:ft,label:oe}).warn("Received attempt to enqueue an invalid message; dropping it",Fn),!1));try{Le(nn)}catch{}Re[ft]=Re[ft]||[];const xt=Re[ft].length,Dn=Date.now();for(const Fn of kn)Fn._enqueuedAt=Dn;Re[ft].push(...kn),!xt&&Re[ft].length>0&&Bn(),!Se&&(!((Ht=Ue[ft])===null||Ht===void 0)&&Ht.length)&&J(ft)}c(rs,"enqueueMessages");const as=(0,o.Ay)("Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)",(ft,pt,Ht)=>{const nn=(0,r.ZT)(pt()),kn=qe({messages:{rtmEventType:Ht.type,rtmEventSubtype:Ht.subtype,msgs:[Ht],fromEvtLog:(0,re.Wu)(Ht)},teamOrEnterpriseId:nn});kn&&ln(kn)});as.meta={name:"createThunk",key:"createThunkhandleMessageImmediatelyWithoutPreprocessing",description:"Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)"};const jn=(0,o.Ay)("Calls the relevant handler for the given message",(ft,pt,Ht)=>{if(!Ke[Ht]){if(Ht&&Ht.includes&&Ht.includes("started_with_org_token")){var nn;(0,l.Ay)({getState:pt}).error(new Error(`Unexpected start error: ${Ht}`),JSON.stringify({error:Ht,pathname:window==null||(nn=window.location)===null||nn===void 0?void 0:nn.pathname}),{subtype:"gs_start_error"})}else(0,l.Ay)({getState:pt}).error(new Error(`Unexpected start error: ${Ht}`),JSON.stringify({error:Ht}),{subtype:"gs_start_error"});return}Ke[Ht](Ht,ft,pt)});jn.meta={name:"createThunk",key:"createThunkhandleErrorMessage",description:"Calls the relevant handler for the given message"};function es(ft){const pt=(0,a.getStateByTeamId)(ft);return(0,d.wx)(pt)&&!(0,d.$U)(pt)}c(es,"shouldIgnoreRtmStream");const Qn=(0,o.Ay)("Fake an RTM event for testing only",(ft,pt,Ht)=>{const nn=(0,r.ZT)(pt()),kn=qe({messages:{rtmEventType:Ht[0].type,rtmEventSubtype:Ht[0].subtype,msgs:Ht,fromEvtLog:(0,re.Wu)(Ht[0])},teamOrEnterpriseId:nn});kn&&ln(kn)});Qn.meta={name:"createThunk",key:"createThunkhandleMessagesForTest",description:"Fake an RTM event for testing only"};const ss={handleNextMessageFromQueue:Ct,shouldIgnoreRtmStream:es,errorHandlers:Ke,handlers:Ve,sharedHandlers:Be,currentMaxBatchSize:ke,drainQueues:Mn,drainQueue:Vn,maybeDrainQueues:Bn,queueDrainTimeout:Un,lastQueueDrainTimestamp:In,pendingMessages:Re};Object.defineProperty(ss,"handleNextMessageFromQueue",{get:()=>Ct,set:ft=>{Ct=ft}}),Object.defineProperty(ss,"errorHandlers",{get:()=>Ke,set:ft=>{Ke=ft}}),Object.defineProperty(ss,"handlers",{get:()=>Ve,set:ft=>{Ve=ft}}),Object.defineProperty(ss,"sharedHandlers",{get:()=>Be,set:ft=>{Be=ft}}),Object.defineProperty(ss,"currentMaxBatchSize",{get:()=>ke,set:ft=>{ke=ft}}),Object.defineProperty(ss,"drainQueues",{get:()=>Mn,set:ft=>{Mn=ft}}),Object.defineProperty(ss,"drainQueue",{get:()=>Vn,set:ft=>{Vn=ft}}),Object.defineProperty(ss,"maybeDrainQueues",{get:()=>Bn,set:ft=>{Bn=ft}}),Object.defineProperty(ss,"queueDrainTimeout",{get:()=>Un,set:ft=>{Un=ft}}),Object.defineProperty(ss,"lastQueueDrainTimestamp",{get:()=>In,set:ft=>{In=ft}}),Object.defineProperty(ss,"pendingMessages",{get:()=>Re,set:ft=>{Re=ft}}),(0,v.ul)("rtm",{handlers:Ve,errorHandlers:Ke,interceptHandler:(ft,pt)=>{const Ht=Ve[ft];Ve[ft]=function(){for(var nn=arguments.length,kn=new Array(nn),xt=0;xt<nn;xt++)kn[xt]=arguments[xt];pt(Ht,...kn)}},getPendingMessages:()=>Re,globalQueue:{drainQueues:Mn,drainQueue:Vn,maybeDrainQueues:Bn,getCurrentMaxBatchSize:()=>ke,setCurrentMaxBatchSize:ft=>{ke=ft},setQueueDrainInterval:ft=>{En=ft}}})},5387083734:(x,A,e)=>{"use strict";e.d(A,{IE:()=>f});var t=e(862210999),n=e(4518410378),s=e(796111729),i=e(4473827453),l=e.n(i),o;(function(I){I.Background="background",I.UserVisible="user-visible",I.UserBlocking="user-blocking"})(o||(o={}));const a=(0,s.Wo)({label:"SCHEDULER"}),r="scheduler"in n.J&&(0,t.A)(n.J.scheduler.postTask),d=50;let u=0,_=null;const v=c((I,p)=>{let{label:y,priority:g,delay:E}=p;if(!r)return I();u+=1;const M=performance.now();return n.J.scheduler.postTask(()=>{const T=performance.now(),D=T-M,C=_?T-_:0;_=T,D-E>d&&a.debug(`${y} task (${g}) executed with delay of ${Math.round(D)}ms and a configured delay of ${E}ms - time since last task: ${C}ms - Task queue length: ${u}`);const O=I();return u-=1,O},{priority:g,delay:E})},"runWithPriority"),h=c(()=>{if(r)return u},"getTaskQueueLength"),f=c((I,p,y)=>v(p,{label:I,priority:o.Background,delay:(y==null?void 0:y.delay)||0}),"runWithBackgroundPriority")},2180140255:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(5255740490),s=e(1251564078),i=e(3202757386),l=e(735940183),o=e(268083624),a=e(1610251172),r=e(6084388622),d=e(5249175977),u=e(9874616273),_=e(5057176955),v=e(2786906754);function h(){return h=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var M=arguments[E];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(g[T]=M[T])}return g},h.apply(this,arguments)}c(h,"_extends");const f=new l.Ay("find_team");function I(g,E){if((0,i.A)())return(0,v.M6)(location.href,"locale",E);const M=location.href.replace(`${location.protocol}//${location.hostname}`,"").replace(/^\/intl\/[^/]+\//,"/");return g==="en-us"?M:`/intl/${g}${M}`}c(I,"getUrlForLocale");let p=c(class extends t.Component{render(){const{hideRegionPicker:E,showLogo:M,govSlackTheme:T,joinerRedesignTreatment:D}=this.props,C=(0,n.A)("p-refreshed_page__footer_link p-refreshed_page__footer_link--main",{"p-refreshed_page__footer_link--gov_slack":T}),m=(0,n.A)("full_width",{"p-refreshed_page__full_width_footer":D}),O=t.createElement("footer",{className:"p-refreshed_page__footer"},t.createElement(r.jV,{href:(0,s.v)("/legal"),className:C,autoClogProps:{elementName:"get_started_footer_link_legal",onClick:{enableClogAction:!0}}},f.rt("Privacy & Terms")),t.createElement(r.jV,{href:(0,s.v)("/help/requests/new"),className:C,autoClogProps:{elementName:"get_started_footer_link_contact",onClick:{enableClogAction:!0}}},f.rt("Contact Us")),!E&&t.createElement(d.Wv,{allowanceX:0,overlayClassName:"p-refreshed_page__footer_overlay",position:"top",renderPopover:P=>t.createElement(d.AM,h({offsetX:-9,offsetY:-5,modalBodyOpenClassName:"p-refreshed_page__footer_modal--open",ariaLabel:f.t("Change region"),ariaRole:"dialog",shouldAnchorAtInitialPosition:!0},P),t.createElement("div",{className:"p-refreshed_page__footer_locales"},t.createElement("div",{className:"bold margin_bottom_50"},f.rt("Change region")),t.createElement("div",{className:"margin_bottom_100"},f.rt("Selecting a different region will change the language and content of Slack.com.")),t.createElement("div",{className:"display_flex"},[{title:f.t("Americas"),locales:[{locale:"es-LA",geocode:"es-la",name:"Latinoam\xE9rica (Espa\xF1ol)"},{locale:"pt-BR",geocode:"pt-br",name:"Brasil (Portugu\xEAs)"},{locale:"en-US",geocode:"en-us",name:"United States (English)"}]},{title:f.t("Europe"),locales:[{locale:"de-DE",geocode:"de-de",name:"Deutschland (Deutsch)"},{locale:"es-ES",geocode:"es-es",name:"Espa\xF1a (Espa\xF1ol)"},{locale:"fr-FR",geocode:"fr-fr",name:"France (Fran\xE7ais)"},{locale:"it-IT",geocode:"it-it",name:"Italia (italiano)"},{locale:"en-GB",geocode:"en-gb",name:"United Kingdom (English)"}]},{title:f.t("Asia Pacific"),locales:[{locale:"zh-CN",geocode:"zh-cn",name:"\u7B80\u4F53\u4E2D\u6587"},{locale:"zh-TW",geocode:"zh-tw",name:"\u7E41\u9AD4\u4E2D\u6587"},{locale:"en-IN",geocode:"en-in",name:"India (English)"},{locale:"ja-JP",geocode:"ja-jp",name:"\u65E5\u672C (\u65E5\u672C\u8A9E)"},{locale:"ko-KR",geocode:"ko-kr",name:"\uD55C\uAD6D\uC5B4"}]}].map(R=>{let{title:L,locales:V}=R;return t.createElement("div",{className:"margin_right_50 display_flex flex_direction_column",key:L},t.createElement("div",{className:"bold margin_bottom_50"},L),V.map(B=>{let{locale:K,geocode:b,name:S}=B;return t.createElement(r.jV,{key:K,href:I(b,K),target:"_self",className:"p-refreshed_page__footer_link margin_bottom_50",autoClogProps:{elementName:"get_started_footer_link_change_region_locale",elementValue:K,onClick:{enableClogAction:!0}},onClick:this.onClickLocale({locale:K,geocode:b})},S)}))}))))},t.createElement("div",null,t.createElement(r.jV,{onClick:this.onClickChangeRegion,href:"#",className:C,autoClogProps:{elementName:"get_started_footer_link_change_region",onClick:{enableClogAction:!0}}},t.createElement(a.A,{type:"globe",size:"inherit",className:"margin_right_25"}),f.rt("Change region"),t.createElement(a.A,{type:"chevron-medium-down",size:"inherit"})))));return t.createElement("div",{className:m},t.createElement("div",{className:(0,n.A)("p-refreshed_page__footer_container",{"p-refreshed_page__footer_container--gov_slack":T})},t.createElement(t.Fragment,null,M&&t.createElement(u.A,{width:80,height:20,className:"p-app_slack_logo"}),O)))}constructor(E){super(E),this.onClickChangeRegion=M=>{M.preventDefault()},this.onClickLocale=M=>{let{locale:T,geocode:D}=M;return()=>{const C=(0,_.LL)((0,o.v8)("c")||"")||{};C.geocode=D;const m=(0,_.Zf)(C,{space:""});(0,o.n0)("i18n_locale",T,365*10,"slack.com"),m&&(0,o.n0)("c",m,365*10,"slack.com")}},this.popoverTriggerRef=t.createRef(),this.state={}}},"RefreshedFooter");p.displayName="RefreshedFooter";const y=p},2308565927:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(5255740490);const s=c(l=>{let{children:o,heading:a,subHeading:r,titleImage:d,headingClassName:u,subHeadingClassName:_,dataQa:v,showFullWidthContent:h,className:f,isSharedWorkspaceInvite:I}=l;return t.createElement("div",{className:(0,n.A)("p-refreshed_page",{"p-refreshed_page--workspace":I,full_width:h},f),"data-qa":v},d&&d,a&&t.createElement("h1",{className:(0,n.A)("p-refreshed_page__heading",u,{margin_bottom_200:!r,full_width:h,"p-refreshed_page__heading--workspace":I})},a),r&&t.createElement("div",{className:(0,n.A)("p-refreshed_page__sub_heading",_,{full_width:h})},r),o)},"RefreshedPageContent");s.displayName="RefreshedPageContent";const i=s},9539184071:(x,A,e)=>{"use strict";e.d(A,{A:()=>B});var t=e(3134334389),n=e(2301861866),s=e.n(n),i=e(5255740490),l=e(6764196364),o=e(735940183),a=e(8739505998),r=e(6176558010),d=e(2527471159),u=e.n(d),_=e(7972463975),v=e.n(_),h=e(9994038664),f=e.n(h),I=e(8214116048);const p=new o.Ay("refreshed_header"),y={elementName:"header_slack_logo",onClick:{enableClogAction:!0}},g={elementName:"header_signin",onClick:{enableClogAction:!0}},E={elementName:"header_create_account",onClick:{enableClogAction:!0}},M={elementName:"header_create_workspace",onClick:{enableClogAction:!0}},T=u()&&v()?`${u()}, ${v()} 2x`:void 0,C=c(K=>{let{showSignInLink:b=!1,showCreateAccountLink:S=!1,showCreateWorkspaceLink:G=!1,showHorchataBackground:H=!1,confirmedEmailPill:U,hideLogo:F=!1,isSSBBrowserSignin:Y=!1,showSfLogo:Z=!1,isWarningBannerDisplayed:ee=!1,govSlackTheme:j=!1,isLandingPage:ge=!1,clientTheme:ne,joinerRedesignTreatment:ue=!1}=K;return t.createElement("header",{className:(0,i.A)("p-refreshed_page__header",{"p-refreshed_page__header--should_wrap":!!U,"p-refreshed_page__header--is_horchata_landing_bg":H,"p-refreshed_page__header--no_logo":!!F,"p-refreshed_page__header--sf_slack_logo":Z,"p-refreshed_page__header--display_warning_banner":ee,"p-refreshed_page__header--gov_slack":j,"p-refreshed_page__header--landing":ge,"p-refreshed_page__full_background":ue})},t.createElement("div",{className:"left-col"}),t.createElement("div",{className:"center-col"},Z&&F&&t.createElement("img",{srcSet:T??void 0,src:u(),alt:""}),!F&&t.createElement(a.A,{href:(0,l.A)(),autoClogProps:y,target:"_self"},t.createElement("img",{alt:"Slack",src:j||ne===I.Sx.Dark?f():s(),height:"26",title:"Slack"})),U),t.createElement("div",{className:"right-col"},b&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},p.t("Already have an account?"),t.createElement("br",null),t.createElement(a.A,{href:"/signin",className:"bold",autoClogProps:g,target:"_self"},p.t("Sign in instead"))),S&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},p.t("Don\u2019t have an account yet?"),t.createElement("br",null),t.createElement(a.A,{href:`/signup${window.location.search}`,className:"bold",autoClogProps:E,target:"_self"},p.t("Create an account"))),G&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},p.t("New to Slack?",{fallbackHash:"2f63cb0ff8e7e3d18574aa36be246a7723cef6fc"}),t.createElement("br",null),t.createElement(a.A,{href:`${Y?"/ssb":""}/get-started${window.location.search}#${r.EU.CreateNew}`,className:"bold",autoClogProps:M,target:"_self"},p.t("Create an account")))))},"RefreshedHeader");var m=e(2180140255),O=e(8178126019),P=e(7216810781);const R=c(K=>{let{inviteDetails:b,children:S}=K;return!b||!(0,O.YB)(b)?S:t.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__container"},t.createElement(P.z,{invite:b,bottomMargin:!0}),t.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__contents"},S))},"ExternalWorkspaceInviteBrandingWrapper");R.displayName="ExternalWorkspaceInviteBrandingWrapper";const L=R,V=c(K=>{let{children:b,showHorchataBackground:S,showSignInLink:G,showCreateAccountLink:H,showCreateWorkspaceLink:U,hideRegionPicker:F,clientTheme:Y,hideFooter:Z=!1,confirmedEmailPill:ee,hideHeader:j=!1,isSSBBrowserSignin:ge=!1,showSfLogo:ne=!1,isWarningBannerDisplayed:ue=!1,govSlackTheme:he=!1,isLandingPage:be=!1,joinerRedesignTreatment:xe=!1,inviteDetails:Le}=K;return t.createElement(L,{inviteDetails:Le},t.createElement(t.Fragment,null,!j&&t.createElement(C,{showSignInLink:G,showCreateAccountLink:H,showCreateWorkspaceLink:U,showHorchataBackground:S,confirmedEmailPill:ee,isSSBBrowserSignin:ge,showSfLogo:ne,hideLogo:ne,isWarningBannerDisplayed:ue,govSlackTheme:he,isLandingPage:be,clientTheme:Y,joinerRedesignTreatment:xe}),he?t.createElement("div",{className:"p-refreshed_page_layout__children--gov_slack"},b):b,!Z&&t.createElement(m.A,{hideRegionPicker:F,govSlackTheme:he,joinerRedesignTreatment:xe})))},"RefreshedPageLayout");V.displayName="RefreshedPageLayout";const B=V},6176558010:(x,A,e)=>{"use strict";e.d(A,{EU:()=>n});var t=e(1224315998),n;(function(a){a.Start="/",a.Find="/find",a.Create="/create",a.CreateNew="/createnew",a.Confirm="/confirm",a.Check="/check",a.FindAgain="/find_again",a.Email="/email",a.Error="/error",a.ConfirmationCode="/confirmemail",a.DomainClaimed="/domain",a.Landing="/landing",a.ConfirmTrust="/confirmtrust",a.IgnoreInvite="/ignoreinvite",a.SignIn="/signin",a.Workspaces="/workspaces",a.SharedInviteLoggedOut="/sharedinvite",a.SharedInviteLanding="/sharedinvitelanding",a.SelectWorkspaces="/select",a.AppleSignIn="/apple",a.AddName="/addname"})(n||(n={}));var s;(function(a){a.SharedChannelInviteAlreadyAccepted="invite_used",a.SharedChannelInviteInvlidLink="invalid_link",a.DirectMessageInviteInactive="inactive_invite",a.Generic="generic"})(s||(s={}));const i={[n.Start]:t.UiStep.START_WITH_A_WORKSPACE,[n.Create]:t.UiStep.CREATE_NEW_WORKSPACE,[n.CreateNew]:t.UiStep.CREATE_NEW_WORKSPACE,[n.Find]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Check]:t.UiStep.CHECK_YOUR_EMAIL,[n.FindAgain]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Email]:t.UiStep.ENTER_EMAIL,[n.Confirm]:t.UiStep.ENTER_EMAIL,[n.Error]:t.UiStep.GET_STARTED_ERROR,[n.ConfirmationCode]:t.UiStep.GET_STARTED_CONFIRM_CODE,[n.DomainClaimed]:t.UiStep.GET_STARTED_DOMAIN_CLAIMED,[n.Landing]:t.UiStep.GET_STARTED_CREATOR_LANDING,[n.SignIn]:t.UiStep.GET_STARTED_SIGN_IN,[n.Workspaces]:t.UiStep.GET_STARTED_WORKSPACES,[n.SharedInviteLoggedOut]:t.UiStep.SHARED_INVITE_LOGGED_OUT,[n.SharedInviteLanding]:t.UiStep.SHARED_INVITE_LANDING,[n.SelectWorkspaces]:t.UiStep.GET_STARTED_SELECT_WORKSPACES,[n.AppleSignIn]:t.UiStep.GET_STARTED_APPLE_SIGN_IN,[n.ConfirmTrust]:t.UiStep.GET_STARTED_CONFIRM_TRUST,[n.IgnoreInvite]:t.UiStep.GET_STARTED_IGNORE_INVITE,[n.AddName]:t.UiStep.GET_STARTED_ADD_NAME};var l;(function(a){a.Invited="invited",a.Joined="joined",a.Whitelisted="whitelisted"})(l||(l={}));var o;(function(a){a.Email="email",a.GoogleIdToken="google_id_token",a.Apple="apple_id_token"})(o||(o={}))},3700949338:(x,A,e)=>{"use strict";e.d(A,{$:()=>n,A:()=>t});function t(s){return s>=48&&s<=57}c(t,"isNumericKey");function n(s){const i=String.fromCharCode(s);return!!/[a-zA-Z0-9]/.test(i)}c(n,"isAlphaNumericKey")},7520119303:(x,A,e)=>{"use strict";e.d(A,{K_:()=>E,XR:()=>y,yb:()=>g});var t=e(735940183),n=e(7909758472),s=e(7940058138),i=e(796111729),l=e(4465846026),o=e(7100005318),a=e(760547858);const r=new t.Ay("channel_sidebar"),d=new t.Ay("app_launcher"),u=new t.Ay("setup_page"),_=new t.Ay("client"),v=new t.Ay("search"),h=new t.Ay("solution_guide"),f=new t.Ay("tenured_team_solutions"),I={[s.c.Composer]:()=>r.t("New message"),[s.c.Drafts]:()=>r.t("Drafts & sent"),[s.c.ScheduledMessages]:()=>r.t("Scheduled",{ns:"channel_sidebar"}),[s.c.Sent]:()=>r.t("Sent"),Pthread:()=>r.t("Thread"),[s.c.Empty]:()=>{},[s.c.Unreads]:()=>r.t("Unreads"),[s.c.Apps]:()=>d.t("Apps",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[s.c.Shortcuts]:()=>d.t("Workflows",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[s.c.BrowseWorkflowsManagedByYou]:M=>(0,l.oF)(M)?r.t("Workflows managed by you"):"",[s.c.BrowseYourWorkflowTemplates]:()=>r.t("Your workflow templates"),[s.c.BrowseWorkflowTemplates]:()=>d.t("Templates",{fallbackHash:"f25b700ed9f092123a43acb205a6869342cf9dd6",fallbackHashNs:"workflow_builder"}),[s.c.Activity]:()=>r.t("Activity"),[s.c.Saved]:()=>r.t("Saved items"),[s.c.PaidBenefits]:()=>r.t("Paid Plan Benefits"),[s.c.BrowseChannels]:()=>r.t("All channels"),[s.c.SetupTeamName]:()=>u.t("Setup Team Name"),[s.c.SetupProfile]:()=>u.t("Profile"),[s.c.SetupChannels]:()=>u.t("Setup Channels"),[s.c.SetupInvites]:()=>u.t("Setup Invites"),[s.c.SetupCalendarContactImport]:()=>"Setup Contact Import",[s.c.SetupTada]:()=>"Setup Tada",[s.c.SetupWelcome]:()=>u.t("Setup Welcome"),[s.c.SetupPeople]:()=>u.t("Setup People"),[s.c.SetupStraightToPaidPlans]:()=>u.t("Setup Plans"),[s.c.JoinerLaunchpad]:()=>r.t("Get started"),[s.c.ResurrectedUserWelcome]:()=>r.t("Welcome back"),[s.c.SolutionGuide]:M=>(0,o.qV)(M)?h.t("Set up your workspace"):"",[s.c.TenuredTeamSolutions]:M=>(0,a.OO)(M)?f.t("Tips for how you work"):"","Pbrowse-channels-prototype":()=>r.t("All channels"),[s.c.BrowseFiles]:()=>v.t("All files"),[s.c.Calendar]:M=>(0,n.A)(M)?r.t("Calendar"):"",[s.c.BrowsePeople]:()=>r.t("All people"),[s.c.BrowseExternalContacts]:()=>r.t("External people"),[s.c.BrowseUserGroups]:()=>r.t("User groups"),[s.c.BrowseExternalWorkspaces]:()=>r.t("Spaces",{fallbackHash:"9486bd3487a34fb3b120cb47d5b2180f456c9f80"}),[s.c.AllDms]:()=>r.t("Direct messages"),[s.c.Search]:()=>_.t("Search Results",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049",fallbackHashNs:"search"}),[s.c.SlackConnect]:()=>r.t("Slack Connect"),[s.c.SlackConnectInvitation]:()=>r.t("Slack Connect Invitation"),[s.c.OfflineOutbox]:()=>"Offline outbox",[s.c.Huddles]:()=>r.t("Huddles",{fallbackHash:"cfed893a3dc774c76cbd9efb20d641aad32eff33",fallbackHashNs:"page_huddles"}),[s.c.BrowseHuddles]:()=>r.t("Huddles",{fallbackHash:"cfed893a3dc774c76cbd9efb20d641aad32eff33",fallbackHashNs:"page_huddles"}),[s.c.Today]:()=>"Today",[s.c.Later]:()=>r.t("Later"),[s.c.BrowseOrgChart]:()=>v.t("Org chart"),"Pasync-modals":()=>"Modals",[s.c.BrowseCanvases]:()=>r.t("Canvases"),[s.c.BrowseLists]:()=>"Lists",[s.c.Todos]:()=>"Todos",[s.c.Recents]:()=>v.t("Recently viewed"),[s.c.DailyDigest]:()=>r.t("Recap"),[s.c.ActionItems]:()=>r.t("Action items"),[s.c.Inbox]:()=>r.t("Activity"),[s.c.BrowseUnifiedFiles]:()=>r.t("Docs",{fallbackHash:"68a4194227be4ab74bc3d32363417c0fc1f30055",fallbackHashNs:"quip-files-browser"})},p={Pdms:()=>r.t("All direct messages")};function y(M){return!M||!I[M]?((0,i.Wo)().error(`getLabelFunctionForPage called with invalid pageId: ${M}`),null):I[M]}c(y,"getLabelFunctionForPage");const g=c((M,T)=>y(T.id)(M),"getPageLabel");function E(M){if(M)return p[M]}c(E,"getAriaLabelFunctionForPage")},4066669727:(x,A,e)=>{"use strict";e.d(A,{KH:()=>V,MC:()=>S,PL:()=>b,SV:()=>B,a$:()=>P,gO:()=>R});var t=e(9706240641),n=e.n(t),s=e(7542104324),i=e(2141099977),l=e(8802876335),o=e(796111729),a=e(6533394955),r=e(1345902898),d=e(8778137680),u=e(5795074931),_=e(7592559649),v=e(4949104520),h=e(6066600258),f=e(9240258658),I=e(6304789565),p=e(5332875232);const y="AWARENESS-MANAGER",g="AWARENESS-MANAGER-CHIME",E=`[${y}] unknown awareness subtype`,M=3e4,T=250,D=5e3,C=15,m=(0,I.Ay)("Query for awareness state from other users who are subscribed to the topic",function(){var H=(0,t.coroutine)(function*(U,F,Y){const Z=F();if(!(0,l.ON)(Z))return;const ee=(0,u.WR)(Z),j={channel:Y,type:"awareness",subtype:r.Pz.QUERY,user:ee};try{U((0,i.tN)(j))}catch(ge){(0,o.Ay)({getState:F}).warn("Failed to send awareness query: ",ge)}});return function(U,F,Y){return H.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkmaybeSendAwarenessQuery",description:"Query for awareness state from other users who are subscribed to the topic"};const O=(0,I.Ay)("Send awareness state to other users who are subscribed to the topic",function(){var H=(0,t.coroutine)(function*(U,F,Y){const Z=F();if(!(0,l.ON)(Z))return;const ee=(0,u.WR)(Z),j=(0,_.fL)(Z,Y,ee),ge={channel:Y,type:"awareness",subtype:r.Pz.BROADCAST,user:ee,awareness_state:j};try{U((0,i.tN)(ge))}catch(ne){(0,o.Ay)({getState:F}).warn("Failed to send awareness query: ",ne)}});return function(U,F,Y){return H.apply(this,arguments)}}());O.meta={name:"createThunk",key:"createThunkmaybeSendCurrentAwarenessState",description:"Send awareness state to other users who are subscribed to the topic"};const P=(0,I.Ay)("Temporarily subscribe to a topic for updates",(H,U,F)=>{const Y=U();if((0,l.ON)(Y))try{H((0,i.tN)({channel_id:F,type:"temp_channel_sub"}))}catch(Z){(0,o.Ay)({getState:U}).warn("Failed to subscribe to awareness topic: ",Z)}});P.meta={name:"createThunk",key:"createThunksubscribeToAwarenessTopic",description:"Temporarily subscribe to a topic for updates"};const R=(0,I.Ay)("Temporarily unsubscribe from topic updates",(H,U,F)=>{const Y=U();if((0,l.ON)(Y))try{H((0,i.tN)({channel_id:F,type:"temp_channel_unsub"}))}catch(Z){(0,o.Ay)({getState:U}).warn("Failed to unsubscribe from awareness topic: ",Z)}});R.meta={name:"createThunk",key:"createThunkunsubscribeFromAwarenessTopic",description:"Temporarily unsubscribe from topic updates"};const L=(0,I.Ay)("Alert other users who are subscribed to the topic that a subscriber has left",function(){var H=(0,t.coroutine)(function*(U,F,Y){const Z=F();if(!(0,l.ON)(Z))return;const ee=(0,u.WR)(Z),j={channel:Y,type:"awareness",subtype:r.Pz.CLOSE,user:ee};try{U((0,i.tN)(j))}catch(ge){(0,o.Ay)({getState:F}).warn("Failed to send awareness query: ",ge)}});return function(U,F,Y){return H.apply(this,arguments)}}());L.meta={name:"createThunk",key:"createThunkmaybeSendCloseState",description:"Alert other users who are subscribed to the topic that a subscriber has left"};class V{maybeSendCurrentAwarenessState(U){const F=(0,a.getStoreInstanceByTeamId)(this.teamId);return F?(F.dispatch(O(U)),!0):!1}maybeSendAwarenessQuery(U){const F=(0,a.getStoreInstanceByTeamId)(this.teamId);return F?(F.dispatch(m(U)),!0):!1}maybeSendAwarenessCloseState(U){const F=(0,a.getStoreInstanceByTeamId)(this.teamId);return F?(F.dispatch(L(U)),!0):!1}constructor({teamId:U}){this.onShutdownDataChannelSubscriber=()=>{},this.teamId=U}}c(V,"RtmBroadcaster");class B{onDisconnectDataChannel(){var U;(U=this.audioVideoFacade)===null||U===void 0||U.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),this.connected=!1}onConnectDatachannel(U){this.audioVideoFacade=U,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),this.connected=!0,(0,o.Wo)().warn(g,`broadcaster connected ${this.peerId}`),this.maybeSendAwarenessQuery(this.topicId)}onInitializeDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(U){}maybeSendCurrentAwarenessState(U){var F;if(!this.connected)return(0,o.Wo)().info(g,`${this.connected} ${U} Can't send yet, not connected`),!1;const Y=(0,a.getStoreInstanceByTeamId)(this.teamId);if(!Y)return(0,o.Wo)().warn(g,`${this.connected} ${U} Can't find teamstore for ${this.teamId}, not sending awareness state`),!1;const Z=Y.getState(),ee=(0,u.WR)(Z);Y.dispatch((0,d.c6)({topicId:U,userId:ee}));const j=(0,p.pL)(Z),ne=(0,_.fL)(Z,U,ee,j?"self":void 0).map(he=>new f.Y.AwarenessPayload({fieldName:he.field_name,fieldValue:he.field_value,...this.isHuddlesAwarenessTimestampEnabled&&!!he.field_timestamp_ms&&{fieldTimestampMs:he.field_timestamp_ms}})),ue=new f.Y.AwarenessBroadcast({channel:U,user:(0,u.WR)(Y.getState()),awarenessState:ne});return(F=this.audioVideoFacade)===null||F===void 0||F.realtimeSendDataMessage(this.dataChannelTopic,f.Y.encode(new f.Y({awarenessBroadcast:ue})).finish()),!0}maybeSendAwarenessQuery(U){var F;if(!this.connected)return(0,o.Wo)().info(g,`${this.connected} ${U} Can't send yet, not connected`),!1;(0,o.Wo)().warn(g,`${this.connected} ${U} Sending awareness query`);const Y=(0,a.getStoreInstanceByTeamId)(this.teamId);if(!Y)return(0,o.Wo)().warn(g,`${this.connected} ${U} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const Z=new f.Y.AwarenessQuery({channel:U,user:(0,u.WR)(Y.getState())});return(F=this.audioVideoFacade)===null||F===void 0||F.realtimeSendDataMessage(this.dataChannelTopic,f.Y.encode(new f.Y({awarenessQuery:Z})).finish()),!0}maybeSendAwarenessCloseState(U){var F;if(!this.connected)return(0,o.Wo)().info(g,`${this.connected} ${U} Can't send yet, not connected`),!1;(0,o.Wo)().warn(g,`${this.connected} ${U} Sending awareness query`);const Y=(0,a.getStoreInstanceByTeamId)(this.teamId);if(!Y)return(0,o.Wo)().warn(g,`${this.connected} ${U} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const Z=new f.Y.AwarenessClose({channel:U,user:(0,u.WR)(Y.getState())});return(F=this.audioVideoFacade)===null||F===void 0||F.realtimeSendDataMessage(this.dataChannelTopic,f.Y.encode(new f.Y({awarenessClose:Z})).finish()),!0}constructor({teamId:U,peerId:F,topicId:Y,isHuddlesAwarenessTimestampEnabled:Z}){this.dataChannelTopic="awareness-sync-channel",this.isHuddlesAwarenessTimestampEnabled=!1,this.onShutdownDataChannelSubscriber=()=>{this.maybeSendAwarenessCloseState(this.topicId),this.connected=!1},this.teamId=U,this.peerId=F,this.connected=!1,this.topicId=Y,this.isHuddlesAwarenessTimestampEnabled=!!Z}}c(B,"ChimeChannelBroadcaster");class K{maybeTTL(){[...new Set(this.topicToTeamMap.values())].forEach(F=>{(0,o.Wo)().debug(y,`Running TTL for ${F}`);const Y=(0,a.getStoreInstanceByTeamId)(F);Y&&Y.dispatch((0,d._y)())}),this.watchedTopics.size===0&&((0,o.Wo)().info(y,"Stopping the TTL timer, nothing to watch"),clearInterval(this.periodicTTLId),this.periodicTTLId=null)}broadcastChanges(){if(Date.now()-this.lastDirtyBroadcastTime<500)return;const U=(0,v.A)(C,-.25,.25);this.dirtyTopics.forEach(F=>{(0,h.A)(()=>{const Y=this.dataChannels.get(F);Y&&Y.maybeSendCurrentAwarenessState(F)&&this.dirtyTopics.delete(F)},U)}),this.lastDirtyBroadcastTime=Date.now(),this.watchedTopics.size===0&&((0,o.Wo)().info(y,"Stopping the dirty broadcast timer, nothing to watch"),clearInterval(this.dirtyBroadcastTimeoutId),this.dirtyBroadcastTimeoutId=null)}broadcastPerodicallyToWatchedTopics(){this.watchedTopics.forEach(U=>{const F=this.dataChannels.get(U);F&&F.maybeSendCurrentAwarenessState(U)&&this.dirtyTopics.delete(U)}),this.watchedTopics.size===0&&((0,o.Wo)().info(y,"Stopping the periodic broadcast timer, nothing to watch"),clearInterval(this.perodicBroadcastTimeoutId),this.perodicBroadcastTimeoutId=null)}query(){Date.now()-this.lastQueryTime<15e3||(this.watchedTopics.forEach(U=>{if(this.topicToTeamMap.get(U)){const Y=this.dataChannels.get(U);Y&&Y.maybeSendAwarenessQuery(U)&&this.dirtyTopics.delete(U)}}),this.broadcastChanges(),this.lastQueryTime=Date.now())}markTopicChanged(U){if(!this.watchedTopics.has(U)){(0,o.Wo)().info(y,`Ignoring topic change for unwatched topic ${U}`);return}this.dirtyTopics.add(U),this.dirtyBroadcastTimeoutId||((0,o.Wo)().info(y,"Starting the dirty broadcast timer"),this.dirtyBroadcastTimeoutId=setInterval(this.broadcastChanges.bind(this),T)),this.perodicBroadcastTimeoutId||((0,o.Wo)().info(y,"Starting the periodic broadcast timer"),this.perodicBroadcastTimeoutId=setInterval(this.broadcastPerodicallyToWatchedTopics.bind(this),M)),this.periodicTTLId||((0,o.Wo)().info(y,"Starting the TTL timer"),this.periodicTTLId=setInterval(this.maybeTTL.bind(this),D))}removeTopicId(U){this.dirtyTopics.delete(U),this.watchedTopics.delete(U)}watch(U,F,Y){this.watchedTopics.add(F),this.topicToTeamMap.set(F,U),this.dataChannels.set(F,Y),this.markTopicChanged(F),this.query()}unwatch(U){this.broadcastChanges(),this.removeTopicId(U)}unwatchAll(){if(this.watchedTopics.size){const U=[...this.watchedTopics].join(" ");(0,o.Wo)().warn(y,`Clearing unexpected remaining topics: ${U}`),this.broadcastChanges(),this.watchedTopics.clear()}this.dataChannels.clear()}constructor(){this.dirtyTopics=new Set,this.watchedTopics=new Set,this.topicToTeamMap=new Map,this.dataChannels=new Map,this.lastDirtyBroadcastTime=0,this.lastQueryTime=0}}c(K,"AwarenessManager");const b=new K;class S{onConnectDatachannel(U){this.audioVideoFacade=U,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback.bind(this)),(0,o.Wo)().warn(g,"listener connected")}onDisconnectDataChannel(){}onInitializeDataChannelSubscriber(){}onShutdownDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(U){let F;try{F=f.Y.decode(U.data)}catch(Y){(0,o.Wo)().debug(g,`Peer Message failed during decode, ignoring peer message.
				| Error: ${Y}
				| Data Sender Attendee ID: ${U.senderAttendeeId}
				| Data Sender External Attendee ID: ${U.senderExternalUserId}
				| Topic: ${U.topic}`);return}if(F.awarenessQuery&&F.awarenessQuery.channel)b.markTopicChanged(F.awarenessQuery.channel);else if(F.awarenessBroadcast){const Y=(0,a.getStoreInstanceByTeamId)(this.teamId),Z=(0,p.pL)(Y.getState()),ee=F.awarenessBroadcast.user,j=F.awarenessBroadcast.channel,ge=F.awarenessBroadcast.awarenessState;if(ee&&j&&ge){const ne=ge.map(he=>{var be,xe;return{field_name:(be=he.fieldName)!==null&&be!==void 0?be:"unknown_field",field_value:(xe=he.fieldValue)!==null&&xe!==void 0?xe:"unknown_value",...!!he.fieldTimestampMs&&{field_timestamp_ms:he.fieldTimestampMs}}}),ue={user:ee,channel:j,awarenessEntries:ne,...Z&&{uniqueId:U.senderAttendeeId}};Y&&Y.dispatch((0,d.zZ)(ue))}}else if(F.awarenessClose){const Y=(0,a.getStoreInstanceByTeamId)(this.teamId),Z=(0,p.pL)(Y.getState()),ee=F.awarenessClose.user,j=F.awarenessClose.channel;ee&&j&&Y&&Y.dispatch((0,d.DQ)({topicId:j,userId:ee,...Z&&{uniqueId:U.senderAttendeeId}}))}}constructor({teamId:U}){this.dataChannelTopic="awareness-sync-channel",this.teamId=U}}c(S,"ChimeChannelListener");const G=c((H,U,F)=>{const Y=F(),Z=(0,u.WR)(Y),ee=H.awareness_state;switch(H.subtype){case"query":Z!==H.user&&b.markTopicChanged(H.channel);break;case"broadcast":if(ee&&Z!==H.user){const j={user:H.user,channel:H.channel,awarenessEntries:ee};U((0,d.zZ)(j))}break;case"close":Z!==H.user&&U((0,d.DQ)({topicId:H.channel,userId:H.user}));break;default:throw new Error(E)}},"onAwarenessEvent");(0,s.d1)("awareness",G)},9781145568:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(6304789565),n=e(7053828403),s=e(395285811),i=e(1407713935),l=e(9101533895),o=e(56548687),a=e(1224315998);const r=(0,t.Ay)("Clogs a message sent or resent",function(u,_){let{channelId:v,msgTs:h,resent:f=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const I=_(),p=v?(0,l.OL)(I,v):null;let y={message_timestamp:h,channel_id:v,channel_type:v?v.charAt(0):null,channel_privacy_type:p?(0,i.K5)(p):null,is_file_channel:p?(0,s.jT)(p):null};const g=(0,n.ZR)(I);g!==null&&(y={...y,channel_session_id:g});const E=(0,o.e)({state:I}),M=f?a.EventId.MSG_RESENT:a.EventId.MSG_SENT;E.track(M,y)});r.meta={name:"createThunk",key:"createThunkclogMessageSent",description:"Clogs a message sent or resent"};const d=r},5904726069:(x,A,e)=>{"use strict";e.d(A,{r:()=>_});var t=e(3134334389),n=e(6304789565),s=e(4540171876),i=e(9236644324),l=e(5258584090),o=e(5060694341),a=e(4275787242),r=e(735940183),d=e(5332875232);const u=new r.Ay("huddles"),_=(0,n.Ay)("Copies Huddle link by Channel Id",(v,h,f,I)=>{let{channelId:p,suppressToast:y}=f;const{windowRef:g}=I(l.S),E=(0,d.Eo)(h());if(p&&(v((0,s.TE)({reason:"copy",channelId:p})).then(M=>{(0,i.x3)(M.link,g.deref())}),E&&!y)){const M={name:"check"};v((0,o.M)({element:t.createElement(a.A,{svgIconProps:M,duration:3e3},u.rt("Huddle link copied"))}))}});_.meta={name:"createThunk",key:"createThunkcopyHuddleLinkByChannelId",description:"Copies Huddle link by Channel Id"}},3694676182:(x,A,e)=>{"use strict";e.d(A,{Q7:()=>se,TE:()=>ge.A,Uf:()=>Te});var t=e(6422693406),n=e(362134992),s=e(7530630315),i=e(6304789565),l=e(5795074931),o=e(157328471),a=e(1827030018),r=e(9132245692),d=e(796111729),u=e(9665027958),_=e(9706240641),v=e(9113979368),h=e(8840779375),f=e(9746734072),I=e(2101927269),p=e(9101533895),y=e(5467378328),g=e(9530687876);const E=(0,i.Ay)(g.rd.BULK_UPDATE_CHANNELS,function(Ne,pe){let{channels:Ee}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const oe=pe();if(!Ee||!Ee.length||!(0,f.A)(Ee))return;const ce=(0,I.A)(Ee,"id"),ke=[],Ce=!1;ce.length&&(ce.forEach(Me=>{const Se=(0,p.OL)(oe,Me.id,Ce);ke.push({...Se,...Me})}),Ne((0,y.U)({channels:ke,reason:g.rd.BULK_UPDATE_CHANNELS})))});E.meta={name:"createThunk",key:"createThunkbulkUpdateChannels",description:g.rd.BULK_UPDATE_CHANNELS};var M=e(6613382951),T=e(7438375976),D=e(4446301238),C=e(8455301571),m=e(8571983633),O=e(4013618389),P=e(7486305635),R=e(8802876335),L=e(3683482182),V=e(3106223098);const B=(0,i.Ay)("Update the unread counts in response to client.counts",(Ne,pe,Ee)=>{if(!Ee)return;const oe=pe(),ce={},ke={},Ce={},Me=(0,V.G)(oe);Ee.forEach(Se=>{const{id:Ue,unread_cnt:He,unread_highlight_cnt:Ye}=Se,J=Me&&!(0,m.A)(Se==null?void 0:Se.vip_count)?Se==null?void 0:Se.vip_count:void 0;ce[Ue]={unreadCnt:He||0,unreadHighlightCnt:Ye||0,unreadVIPMentionCnt:Me?J||0:void 0};const ae=(0,p.OL)(oe,Ue);if(!He&&!Ye||!(0,O.F)(oe,ae))return;(0,P.d$)(oe,ae)&&(Ce[Ue]=!0);const Ve=(0,O.v)(oe,ae)?He:Ye,{reachedEnd:Be}=(0,C.tp)(oe,Ue),Ke=(0,R.UJ)(oe);Be&&Ke?ke[Ue]=(0,L.Lh)(oe,Ue):ke[Ue]={unreadCnt:He,unreadHighlightCnt:Ve||Ye,unreadVIPMentionCnt:Me?J:void 0}}),Ne((0,o.SO)({initialUnreads:ce,countsPerChannel:ke,channelsToSuppress:Ce}))});B.meta={name:"createThunk",key:"createThunkinitializeUnreadCountsFromChannels",description:"Update the unread counts in response to client.counts"};var K=e(4368281601),b=e(6007206761),S=e(9884588328),G=e(6495946979),H=e(395285811),U=e(1407713935),F=e(9762304444);const Y=(0,F.Ay)("TS.ensureFullyBooted",()=>{throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var Z=e(4096483543),ee=e(1949656963),j=e(4191588167),ge=e(4660031767),ne=e(6695353875);const ue="COUNTS",he=(0,i.Ay)("Apply counts to channel objects and update stores",function(){var Ne=(0,_.coroutine)(function*(pe,Ee){let{counts:oe=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,Z.A)()||(yield Y());let ce=Ee();const ke=[],Ce={},Me={},Se=[],Ue=(0,R.UJ)(ce),He=(0,R.yf)(ce),Ye=(0,ne.lc)(ce),J=(0,V.G)(ce);(0,d.Ay)({state:ce}).info(ue,`Applying counts to channels. wasLastConnectFast: ${He} isConnected: ${Ue}`);const ae=oe.filter(Be=>{let{has_unreads:Ke,mention_count:Re}=Be;return Ke||Re}).filter(function(){let{id:Be}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!(0,p.hh)(ce,Be)}).map(function(){let{id:Be}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be});ae.length&&(yield pe((0,D.pX)({ids:ae,reason:"apply-counts-to-channels/ensure-channels",callSource:D.aI.ApplyCounts})),ce=Ee());const Ve=(0,C.jg)(ce);oe.forEach(Be=>{const Ke=(0,p.OL)(ce,Be.id,!1);if(!Ke||(0,U.QR)(Ke)){if(!Be.has_unreads&&!Be.mention_count)return;(0,d.Ay)({state:ce}).warn(ue,{id:Be.id,has_unreads:Be.has_unreads,nonExistent:(0,U.QR)(Ke)},"applyCountsToChannels_missing_channel");return}if((0,b.F)(Ke)||(0,U.rW)(Ke)&&!(0,G.bl)(Ke))return;if((0,H.jT)(Ke)){pe((0,K.k)({channelId:Ke.id,mentionCount:Be.mention_count,shouldSuppress:(0,P.d$)(ce,Ke)}));return}const Re={},{reachedEnd:Fe}=(0,C.tp)(ce,Ke.id),ze=Be.has_unreads?1:0;let qe=0,st=0,ut=0,tt=!1;(0,U.LI)(Ke)||(0,U.LI)(Be)||(0,U.yz)(Ke)||(0,U.yz)(Be)?qe=Be.mention_count||ze:(tt=!0,qe=ze,st=Be.mention_count||0,ut=(Be==null?void 0:Be.vip_count)||0),!qe&&st&&((0,d.Ay)({state:ce}).warn(ue,`Ignoring positive mention_count_display because has_unreads == false for ${Ke.id}`,{subtype:"ignoring_positive_mention_count_display"}),st=0),Me[Ke.id]={unreadCnt:qe,unreadHighlightCnt:st,unreadVIPMentionCnt:J?ut:void 0},!Ye&&Fe&&Ue?Se.push(Ke.id):(qe!==(0,S.$M)(Ke)&&(Re.unread_cnt=qe),J&&ut!==(0,S.OJ)(Ke)&&(Re.vip_count=ut),tt&&st!==(0,S.BP)(Ke)&&(Re.unread_highlight_cnt=st)),Be.updated&&Be.history_invalid&&(Ce[Ke.id]={historyInvalidTs:Be.history_invalid,updatedTs:Be.updated},Ve!=null&&Ve[Ke.id]&&pe((0,j.A)({channelId:Ke.id,newHistoryInvalidTs:Be.history_invalid,newUpdatedTs:Be.updated}))),(0,v.A)(Re)||(Re.id=Ke.id,ke.push(Re))}),(0,v.A)(ke)||pe(E({channels:ke})),(0,v.A)(Ce)||pe((0,ee.ih)({updates:Ce})),pe((0,M.M)(oe)),pe((0,T.f)(oe.map(Be=>({channelId:Be.id,ts:Be.last_read})))),pe((0,o.iz)(Me)),pe(B((0,h.A)(Me,function(){let{unreadCnt:Be,unreadHighlightCnt:Ke,unreadVIPMentionCnt:Re}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:arguments.length>1?arguments[1]:void 0,unread_cnt:Be,unread_highlight_cnt:Ke,vip_count:J?Re:void 0}}))),Se.forEach(Be=>{pe((0,ge.A)({channelId:Be}));const Ke=(0,p.OL)(Ee(),Be,!1);if(Ke){const Re={unreadCnt:(0,S.$M)(Ke),unreadHighlightCnt:(0,S.BP)(Ke),unreadVIPMentionCnt:(0,S.OJ)(Ke)};(0,d.Ay)({state:ce}).info(ue,`Recounted ${Be}; initial: ${JSON.stringify(Me[Be])}; after: ${JSON.stringify(Re)}`)}})});return function(pe,Ee){return Ne.apply(this,arguments)}}());he.meta={name:"createThunk",key:"createThunkapplyCountsToChannels",description:"Apply counts to channel objects and update stores"};const be=he,xe="COUNTS",Le=(0,i.Ay)("Apply counts to channels and threads",function(Ne,pe){let{channels:Ee,groups:oe,ims:ce,mpims:ke,threads:Ce,alerts:Me,saved:Se,fileChannels:Ue,channelBadges:He,countsLastFetched:Ye}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const J=pe();if(!(0,l.TZ)(J))return t.S.resolve();Ne((0,o.iz)({})),Ne((0,r.y)(Me||{})),Ne((0,o.t)(Ye));const ae=fe(Ue),Ve=(0,n.A)((0,s.A)(Ee,oe,ce,ke,ae));return Ne(be({counts:Ve})).then(()=>{const Be=(0,d.Ay)({getState:pe});Ce&&(Be.info(xe,`Threads has_unreads:${Ce.has_unreads} mention_count:${Ce.mention_count}`),Ne((0,a._)({threadsHasUnreads:Ce.has_unreads,threadsUnreadCountByChannel:Ce.unread_count_by_channel,threadsMentionCountByChannel:Ce.mention_count_by_channel}))),Se&&Ne((0,u.yO)(Se)),He&&Ne((0,o.$m)(He)),Be.info(xe,"Completed counts processing")})});Le.meta={name:"createThunk",key:"createThunkapplyCountsToChannelsAndThreads",description:"Apply counts to channels and threads"};function fe(Ne){if(!Ne||!Ne.quip)return[];const pe=Ne.quip.mention_count_by_channel;return Object.keys(pe).map(ce=>({id:ce,mention_count:pe[ce],has_unreads:!0}))}c(fe,"transformFileChannels");const se=Le;var Q=e(9290914927),k=e(6957597272),N=e(7606781622),$=e(8276911661),W=e(6866036454),q=e(5899351761),re=e(4726390364);const le="COUNTS",Ae=(0,i.Ay)("Update unread counts",function(Ne,pe){let{channelId:Ee,messageTs:oe}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const ce=pe(),ke=!1,Ce=(0,p.OL)(ce,Ee,ke);if(!Ce||!(0,re.A)(Ce,{countFileChannels:!0}))return t.S.resolve(!0);const Me=(0,$.cA)(ce),Se=(0,Q.gd)(ce,Me.id)==="away",Ue=Me._presence_last_changed||(0,l.tV)(ce,"start_ms"),He=(0,q.A)({state:ce,messages:[(0,N.Ld)(ce,Ce.id,oe)],channel:Ce,currentUserId:Me.id,userIsAway:Se,userPresenceLastChanged:Ue,highlightWords:(0,W.A)(ce)}),Ye=He==null?void 0:He.unreadHighlightCnt;return Ye!==Ce.unread_highlight_cnt&&((0,d.Ay)({state:ce}).info(le,`Updated unread_highlight_cnt for ${Ce.id}: ${Ye}`),Ne((0,k.b)({id:Ce.id,unread_highlight_cnt:Ye}))),t.S.resolve(!1)});Ae.meta={name:"createThunk",key:"createThunkupdateUnreadCountsForThreadMentionBroadcasts",description:"Update unread counts"};const Te=Ae},574001087:(x,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Triggers a side-effect that fetches and upserts list records");n.meta={name:"createAction",key:"createActionfetchAndUpsertRecordsCircular",description:"Triggers a side-effect that fetches and upserts list records"};var s=null},4191588167:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(6304789565),n=e(8847766420),s=e(4405788578),i=e(8455301571),l=e(4350638406),o=e(796111729),a=e(9536404279);const r=(0,t.Ay)("Possibly purge or invalidate channel history .",(u,_,v)=>{let{channelId:h,newHistoryInvalidTs:f,newUpdatedTs:I}=v;const p=_(),y=(0,s.Kq)(p,h),g=(0,s.QO)(p,h);f!=="0000000000.000000"&&(!y||f>y)?((0,o.Ay)({state:p}).info("COUNTS",`purging cached history for channel ${h} since counts history_invalid ${f} > cached historyInvalidTs ${y}`),u((0,a.bz)({channelId:h,includeThreads:!0}))):I!=="0000000000.000000"&&(!g||I>g)&&((0,o.Ay)({state:p}).info("COUNTS",`invalidating history for channel ${h} since counts updated ${I} > cached updatedTs ${g}`),(0,l.D1)((0,n.ZT)(p),h,(0,i.m3)(p,h)))});r.meta={name:"createThunk",key:"createThunkmaybePurgeChannelHistoryAfterMutations",description:"Possibly purge or invalidate channel history ."};const d=r},9609912577:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(6304789565),s=e(2375333597),i=e(3677514771),l=e(56548687),o=e(1224315998),a=e(9364044512),r=e(8847766420),d=e(3707193570),u=e(5795074931),_=e(6839188756);const v=(0,n.Ay)("Opens the apps browser modal",function(f,I){let{initialTab:p,emojiNameSuggestion:y,elementName:g,emojiUrl:E,megaphoneEventOnClose:M}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const T=I(),D=(0,r.JY)(T);let C;D&&(0,d.JV)(D)?C=(0,i.H2)(T):(0,u.u8)(T)&&(C=(0,_.mf)((0,i.H7)(T))),(0,l.e)({getState:I}).track(o.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_properties:{element_type:"button",element_name:g}}}}),f((0,s.q)({element:t.createElement(a.A,{showEmojiPacks:!E,orgName:C,initialTab:p,emojiNameSuggestion:y,emojiUrl:E,megaphoneEventOnClose:M}),isStackable:!0}))});v.meta={name:"createThunk",key:"createThunkopenAddCustomEmojiModal",description:"Opens the apps browser modal"};const h=v},9786721596:(x,A,e)=>{"use strict";e.d(A,{U:()=>v});var t=e(6304789565),n=e(8677230210),s=e(613926746),i=e(8847766420),l=e(3244118357),o=e(4910963364),a=e(8276911661),r=e(5267010247),d=e(8822892075),u=e(4427921758);const _=(0,t.Ay)("Shows message pane for bots",function(h,f){let{memberId:I,serviceId:p,botProfile:y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var g;const{member:E,bot:M,memberIsHuman:T}=(0,n.Od)(f(),{userId:I,botId:p,botProfile:y}),D=(0,i.ZT)(f())||"",C=!T||p?(0,l.AW)({member:E||void 0,bot:M,botProfile:y,currentTeamId:D}):void 0,m=(0,o.G2)(f(),{serviceId:p,homeWorkspaceId:C,memberId:I});var O;const P=(0,a.nv)(f(),I||((O=m==null||(g=m.app_user)===null||g===void 0?void 0:g.id)!==null&&O!==void 0?O:void 0));var R;return h((0,s.Z)({memberId:(R=P==null?void 0:P.id)!==null&&R!==void 0?R:void 0}))});_.meta={name:"createThunk",key:"createThunkopenMessagesForBot",description:"Shows message pane for bots"};const v=(0,t.Ay)("Shows the flexpane profile for humans or messages for bots",(h,f,I,p)=>{let{memberId:y,serviceId:g,botProfile:E}=I;const{currentTab:M,channelId:T}=p(u.j);return y&&(0,n.wC)(f(),y)?h(M?(0,r.o)((0,d.sL)((0,d.Fo)({memberId:y}),T,M.id)):(0,r.o)((0,d.Fo)({memberId:y}))):h(_({memberId:y,serviceId:g,botProfile:E}))});v.meta={name:"createThunk",key:"createThunkopenProfile",description:"Shows the flexpane profile for humans or messages for bots"}},5241075893:(x,A,e)=>{"use strict";e.d(A,{ET:()=>p,Fd:()=>g,Wb:()=>E,xz:()=>y});var t=e(3297051565),n=e.n(t),s=e(5950652755),i=e(6304789565),l=e(2141099977),o=e(796111729),a=e(8847766420),r=e(4423055085),d=e(440999534),u=e(8802876335);const _="PRESENCE-MANAGER",v={},h=c((D,C)=>{const m=(0,a.ZT)(C()),O=Object.keys(v[m]),P={type:"presence_sub",ids:O},R=(0,o.Ay)({getState:C});R.debug(_,`Sending a 'presence_sub' event with the following ids: ${O}`),D((0,l.tN)(P)).catch(L=>{L&&L.message===d.qk||R.error(`Received an error while trying to send 'presence_sub' with the following ids: ${O}, error = ${L}`)})},"sendMessageEvent");let f;function I(){return f||(f=(0,s.A)(h,100,{leading:!1})),f}c(I,"getThrottledSendMessageEvent");const p=(0,i.Ay)("Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for",(D,C)=>{if(!(0,u.ON)(C())){(0,o.Ay)({getState:C}).debug(_,"The presence subscription changed while the WebSocket disconnected; will send the updated subscription once we are connected");return}I()(D,C)});p.meta={name:"createThunk",key:"createThunksendPresenceSubEvent",description:"Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for"};const y=(0,i.Ay)("Adds the member to the presence subscription or increments the associated count",function(D,C){let{memberId:m}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!m||m==="USLACKBOT")return;const O=(0,a.ZT)(C());if(v[O]||(v[O]={}),v[O][m]){(0,o.Ay)({getState:C}).debug(_,`Increasing the count for ${m} by 1`),v[O][m]+=1;return}(0,o.Ay)({getState:C}).debug(_,`Adding ${m} to the presence subscription`),v[O][m]=1,D(p())});y.meta={name:"createThunk",key:"createThunkaddMemberToPresenceSubscription",description:"Adds the member to the presence subscription or increments the associated count"},y.propTypes={memberId:n().string.isRequired};const g=(0,i.Ay)("Removes the member from the presence subscription or decrements the associated count",function(D,C){let{memberId:m}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!m)return;const O=(0,a.ZT)(C());if(!(!v[O]||!v[O][m])){if(v[O][m]>1){(0,o.Ay)({getState:C}).debug(_,`Decreasing the count for ${m} by 1`),v[O][m]-=1;return}(0,o.Ay)({getState:C}).debug(_,`Removing ${m} from the presence subscription`),delete v[O][m],D(p())}});g.meta={name:"createThunk",key:"createThunkremoveMemberFromPresenceSubscription",description:"Removes the member from the presence subscription or decrements the associated count"},g.propTypes={memberId:n().string.isRequired};const E=c(D=>v[D],"getPresenceSubscriptionByTeamId"),M=c(D=>{delete v[D]},"deletePresenceSubscriptionByTeamId"),T={sendMessageEvent:h};(0,r.ul)("presenceManager",{getPresenceSubscriptionByTeamId:E})},5583430912:(x,A,e)=>{"use strict";e.d(A,{Ap:()=>i,Pv:()=>n,Ui:()=>s});var t=e(7223729463);const n=new t.a;function s(){return n.entries().filter(l=>l.value&&!l.value.isRejected()&&!l.value.isCancelled()).length}c(s,"getActiveCollabClientCount");const i=c(l=>{const o=n.get(l);return o!=null&&o.isFulfilled()?o.value():void 0},"getInitializedClient")},7260478587:(x,A,e)=>{"use strict";e.d(A,{AP:()=>_,Ai:()=>f,Ex:()=>o,F$:()=>I,cy:()=>r,hM:()=>a,nK:()=>h,rW:()=>g});var t=e(3385422400),n=e(735940183),s=e(9421999304),i=e(3677514771);const l=new n.Ay("slack_docs");var o;(function(E){E.WRITE="write",E.SUMMARIZE="summarize",E.BRAINSTORM="brainstorm",E.TABLE="table",E.OUTLINE="outline",E.AGENDA="agenda",E.FAQ="faq",E.SHORTEN="shorten",E.SIMPLIFY="simplify",E.CHANGE_TONE="change_tone",E.ELABORATE="elaborate",E.CONVERT_TO_TABLE="convert_to_table"})(o||(o={}));var a;(function(E){E.COMMAND="command",E.QUESTION="question",E.REFINE="refine"})(a||(a={}));var r;(function(E){E.PROMPT="prompt",E.REFINEMENT="refinement"})(r||(r={}));const d=new Map([[o.WRITE,a.COMMAND],[o.SUMMARIZE,a.COMMAND],[o.BRAINSTORM,a.COMMAND],[o.TABLE,a.COMMAND],[o.OUTLINE,a.COMMAND],[o.AGENDA,a.COMMAND],[o.FAQ,a.COMMAND],[o.CHANGE_TONE,a.REFINE],[o.CONVERT_TO_TABLE,a.REFINE],[o.ELABORATE,a.REFINE],[o.SHORTEN,a.REFINE],[o.SIMPLIFY,a.REFINE]]),u=new Map([[a.COMMAND,r.PROMPT],[a.QUESTION,r.PROMPT],[a.REFINE,r.REFINEMENT]]),_=new Map([[o.WRITE,{name:"compose",size:"20"}],[o.SUMMARIZE,{name:"ai-summary",size:"20"}],[o.BRAINSTORM,{name:"magic-wand",size:"20"}],[o.TABLE,{name:"table",size:"20"}],[o.OUTLINE,{name:"bulleted-list",size:"20"}],[o.AGENDA,{name:"check-list",size:"20"}],[o.FAQ,{name:"ai-sparkle",size:"20"}],[o.SHORTEN,{name:"ai-sparkle",size:"20"}],[o.SIMPLIFY,{name:"ai-sparkle",size:"20"}],[o.CHANGE_TONE,{name:"ai-sparkle",size:"20"}],[o.ELABORATE,{name:"ai-sparkle",size:"20"}],[o.CONVERT_TO_TABLE,{name:"ai-sparkle",size:"20"}]]),v=c(E=>{switch(E){case o.WRITE:return l.t("Write");case o.SUMMARIZE:return l.t("Summarize",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.BRAINSTORM:return l.t("Brainstorm",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.TABLE:return l.t("Create a table",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.OUTLINE:return l.t("Draft an outline",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.AGENDA:return l.t("Draft a meeting agenda",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.FAQ:return l.t("Write FAQs",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.SHORTEN:return l.t("Shorten",{fallbackHash:"ea87755fea79a65bf04c1712362b512aec10d350",fallbackHashNs:"composer"});case o.SIMPLIFY:return l.t("Simplify",{fallbackHash:"9763dad72dd460e5575210b5538e3f1b017bce2c",fallbackHashNs:"activity"});case o.CHANGE_TONE:return l.t("Change the tone",{fallbackHash:"376990dbb495e279e5f310e03b2ca591277110a1",fallbackHashNs:"composer"});case o.ELABORATE:return l.t("Elaborate",{fallbackHash:"9869e506c38f643f1fe985347c015deace6baa22",fallbackHashNs:"stories_av"});case o.CONVERT_TO_TABLE:return l.t("Convert to a table",{fallbackHash:"77a06ec399aaf5d81ece63c9ef42cd04f25f7b59",fallbackHashNs:"csv_tsv_paste_toast"});default:return""}},"getSuggestionName"),h=c(E=>{switch(E){case o.WRITE:return l.t("Write about");case o.SUMMARIZE:return l.t("Summarize",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.BRAINSTORM:return l.t("Brainstorm",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.TABLE:return l.t("Create a table:",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.OUTLINE:return l.t("Draft an outline for",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.AGENDA:return l.t("Draft a meeting agenda for",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});case o.FAQ:return l.t("Write FAQs for",{fallbackHash:"206911c09b910a072e5876f7f8d35acdef71e4e2",fallbackHashNs:"quip_shortcut_handlers"});default:return v(E)}},"getSuggestionInsertionText"),f=c(E=>{const M=new Map(Object.values(o).map(D=>[h(D).toLowerCase(),D]));var T;return(T=M.get(E.toLowerCase()))!==null&&T!==void 0?T:null},"getSuggestionIdForInsertedText"),I=c(E=>{switch(E){case a.COMMAND:return l.t("Create",{fallbackHash:"564d3571acd1b3f669f762d196b6156b7aa88834",fallbackHashNs:"workflow_builder"});case a.QUESTION:return l.t("Find",{fallbackHash:"df251b06eefdaa932e97b54fbe9a74d3e606fa61",fallbackHashNs:"shortcuts_flexpane"});case a.REFINE:return l.t("Refine",{fallbackHash:"267e6e2f6a25dafaf92b9844b78c67ce0af55aa9",fallbackHashNs:"workflow_builder"});default:return""}},"getCategoryLabel"),p=c(E=>{const M=v(E),T=d.get(E),D=_.get(E);return{id:E,category:T,name:M,icon:D,canonicalName:`/${E}`,aliases:[T]}},"getSuggestionObjectForId"),y=c(E=>Object.values(o).filter(M=>{const T=d.get(M);return T&&u.get(T)===E}).map(M=>p(M)),"getSuggestions"),g=(0,t.Mz)([i.H7,()=>(0,s.JK)(),(E,M)=>{let{searchViewContext:T}=M;return T}],(E,M,T)=>{var D;if(T!=null&&T.includes(r.REFINEMENT)){var C;return(C=y(r.REFINEMENT))===null||C===void 0?void 0:C.map(m=>({...m,type:"client"}))}return(D=y(r.PROMPT))===null||D===void 0?void 0:D.map(m=>({...m,type:"client"}))})},4119164726:(x,A,e)=>{"use strict";e.d(A,{Aw:()=>g,Zj:()=>f,vK:()=>I});var t=e(3385422400),n=e(735940183),s=e(9421999304),i=e(4761125736),l=e(8079225585),o=e(7731278967),a=e(9084547259),r=e(4843305308),d=e(3262078016),u=e(3677514771),_=e(6839188756),v=e(6642124196);const h=new n.Ay("quip_shortcut_handlers");var f;(function(E){E[E.BASICS=0]="BASICS",E[E.MEDIA=1]="MEDIA",E[E.SLACK=2]="SLACK",E[E.LAYOUT=3]="LAYOUT",E[E.AI=4]="AI"})(f||(f={}));const I=c(E=>({[f.BASICS]:h.t("Basics"),[f.MEDIA]:h.t("Media"),[f.SLACK]:h.t("Slack"),[f.LAYOUT]:h.t("Layout"),...E?{[f.AI]:h.t("AI")}:{}}),"getCategoryDetailsV2"),p=c(E=>{let{currentTeam:M,experimentCanvasInsertWorkflowMenuGroupOn:T,experimentCanvasSetReminderFromDatePickerOn:D,experimentCanvasCreateListPrototypeGroupOn:C,experimentCanvasCalloutsGroupOn:m,experimentCanvasAiContentCreationGroupOn:O,teamHasListsAccess:P}=E;const R=(0,_.qR)(M),L=I(O),V=L[f.AI],B=L[f.BASICS],K=L[f.MEDIA],b=L[f.SLACK],S=L[f.LAYOUT],G=c((H,U,F,Y)=>({id:H,name:U,canonicalName:F,hideOnEmptyQuery:Y,autocomplete:!0,icon:(0,r.P)(o.r.DATE_MENTION).name,category:f.BASICS}),"dateShortcut");return[...O?[{id:d.SlackShortcutCommandType.AI_ASSISTANT,name:h.t("Write with AI"),canonicalName:"/ai",autocomplete:!0,icon:"sparkles",category:f.AI,aliases:[V,h.t("assistant"),h.t("ask")]}]:[],{id:d.SlackShortcutCommandType.CANVAS,name:(0,l.O)(o.r.CANVAS),canonicalName:"/canvas",autocomplete:!0,icon:(0,r.P)(o.r.CANVAS).name,category:f.BASICS,aliases:["canvas",B]},{id:d.SlackShortcutCommandType.CHECKLIST,name:(0,l.O)(o.r.CHECK_LIST),canonicalName:"/checklist",autocomplete:!0,icon:(0,r.P)(o.r.CHECK_LIST).name,category:f.BASICS,aliases:["checklist",B]},{id:d.SlackShortcutCommandType.H1,name:(0,l.O)(o.r.H1),canonicalName:"/largeheading",autocomplete:!0,icon:(0,r.P)(o.r.H1).name,category:f.BASICS,aliases:["h1","heading",B]},{id:d.SlackShortcutCommandType.H2,name:(0,l.O)(o.r.H2),canonicalName:"/mediumheading",autocomplete:!0,icon:(0,r.P)(o.r.H2).name,category:f.BASICS,aliases:["h2","heading",B]},{id:d.SlackShortcutCommandType.H3,name:(0,l.O)(o.r.H3),canonicalName:"/smallheading",autocomplete:!0,icon:(0,r.P)(o.r.H3).name,category:f.BASICS,aliases:["h3","heading",B]},{id:d.SlackShortcutCommandType.PLAIN,name:(0,l.O)(o.r.PARAGRAPH),canonicalName:"/paragraph",autocomplete:!0,icon:(0,r.P)(o.r.PARAGRAPH).name,category:f.BASICS,aliases:["plain",h.t("plain"),B]},{id:d.SlackShortcutCommandType.TABLE,name:(0,l.O)(o.r.TABLE),canonicalName:"/table",autocomplete:!0,icon:(0,r.P)(o.r.TABLE).name,category:f.BASICS,aliases:["table",h.t("grid"),h.t("spreadsheet"),B]},{id:d.SlackShortcutCommandType.DIVIDER,name:(0,l.O)(o.r.DIVIDER),canonicalName:"/divider",autocomplete:!0,icon:(0,r.P)(o.r.DIVIDER).name,category:f.BASICS,aliases:["divider",h.t("horizontal line"),B]},{id:d.SlackShortcutCommandType.BULLET_LIST,name:(0,l.O)(o.r.BULLET_LIST),canonicalName:"/bulletedlist",autocomplete:!0,icon:(0,r.P)(o.r.BULLET_LIST).name,category:f.BASICS,aliases:["list",B]},{id:d.SlackShortcutCommandType.ORDERED_LIST,name:(0,l.O)(o.r.ORDERED_LIST),canonicalName:"/orderedlist",autocomplete:!0,icon:(0,r.P)(o.r.ORDERED_LIST).name,category:f.BASICS,aliases:["list",B]},{id:d.SlackShortcutCommandType.BLOCKQUOTE,name:(0,l.O)(o.r.BLOCKQUOTE),canonicalName:"/blockquote",autocomplete:!0,icon:(0,r.P)(o.r.BLOCKQUOTE).name,category:f.BASICS,aliases:["blockquote",B]},...m?[{id:d.SlackShortcutCommandType.CALLOUT,name:(0,l.O)(o.r.CALLOUT),canonicalName:"/callout",autocomplete:!0,icon:(0,r.P)(o.r.CALLOUT).name,category:f.BASICS,aliases:["callout"]}]:[],{id:d.SlackShortcutCommandType.CODE,name:(0,l.O)(a.L.CODE),canonicalName:"/code",autocomplete:!0,icon:(0,r.P)(a.L.CODE).name,category:f.BASICS,aliases:["code",B]},{...G(d.SlackShortcutCommandType.DATE_GENERIC,(0,l.O)(o.r.DATE_MENTION),"/date"),aliases:["date",B]},{...G(d.SlackShortcutCommandType.DATE_TODAY,h.t("Today"),"/today",!0),aliases:["today"]},{...G(d.SlackShortcutCommandType.DATE_TOMORROW,h.t("Tomorrow"),"/tomorrow",!0),aliases:["tomorrow"]},{...G(d.SlackShortcutCommandType.DATE_YESTERDAY,h.t("Yesterday"),"/yesterday",!0),aliases:["yesterday"]},...D?[{...G(d.SlackShortcutCommandType.DATE_GENERIC,h.t("Reminder",{fallbackHash:"b87a1929f78bee9f6f3a2ac9e30465cd226ab5ec",fallbackHashNs:"slack_docs"}),"/reminder"),aliases:["reminder",B]}]:[],{id:d.SlackShortcutCommandType.VIDEO,name:(0,l.O)(o.r.VIDEO_CLIP),canonicalName:"/videoclip",autocomplete:!0,icon:(0,r.P)(o.r.VIDEO_CLIP).name,category:f.MEDIA,aliases:["video",K]},{id:d.SlackShortcutCommandType.AUDIO,name:(0,l.O)(o.r.AUDIO_CLIP),canonicalName:"/audioclip",autocomplete:!0,icon:(0,r.P)(o.r.AUDIO_CLIP).name,category:f.MEDIA,aliases:["audio",K]},{id:d.SlackShortcutCommandType.IMAGE,name:(0,l.O)(o.r.IMAGE),canonicalName:"/image",autocomplete:!0,icon:(0,r.P)(o.r.IMAGE).name,category:f.MEDIA,aliases:["image",K]},{id:d.SlackShortcutCommandType.FILE,name:(0,l.O)(o.r.FILE),canonicalName:"/file",autocomplete:!0,icon:"file",category:f.MEDIA,aliases:["file",K]},...T&&R?[{id:d.SlackShortcutCommandType.WORKFLOW,name:(0,l.O)(o.r.WORKFLOW,{experimentCanvasInsertWorkflowMenuGroupOn:T}),canonicalName:"/workflow",autocomplete:!0,icon:(0,r.P)(o.r.WORKFLOW).name,category:f.SLACK,aliases:["workflow",b]}]:[],...C&&P?[{id:d.SlackShortcutCommandType.LIST,name:(0,l.O)(o.r.LIST),canonicalName:"/list",autocomplete:!0,icon:(0,r.P)(o.r.LIST).name,category:f.SLACK,aliases:["list",b]}]:[],{id:d.SlackShortcutCommandType.PROFILE,name:h.t("Profile"),canonicalName:"/profile",autocomplete:!0,icon:"user",category:f.SLACK,aliases:["user",b,h.t("user"),h.t("mention")]},{id:d.SlackShortcutCommandType.CHANNEL,name:h.t("Channel"),canonicalName:"/channel",autocomplete:!0,icon:"channel-add",category:f.SLACK,aliases:["channel",b]},{id:d.SlackShortcutCommandType.TWO_COLUMNS,name:(0,l.O)(o.r.LAYOUT_2_COLUMNS),canonicalName:"/twocolumns",autocomplete:!0,icon:(0,r.P)(o.r.LAYOUT_2_COLUMNS).name,category:f.LAYOUT,aliases:["layout",S]},{id:d.SlackShortcutCommandType.THREE_COLUMNS,name:(0,l.O)(o.r.LAYOUT_3_COLUMNS),canonicalName:"/threecolumns",autocomplete:!0,icon:(0,r.P)(o.r.LAYOUT_3_COLUMNS).name,category:f.LAYOUT,aliases:["layout",S]},{id:d.SlackShortcutCommandType.CODEBLOCK,name:(0,l.O)(o.r.CODE_BLOCK),canonicalName:"/codeblock",autocomplete:!0,icon:(0,r.P)(o.r.CODE_BLOCK).name,category:f.LAYOUT,aliases:["code",S]}]},"getCommandsV2");function y(E){return{...E,type:"client"}}c(y,"formatShortcut");const g=(0,t.Mz)([u.H7,E=>(0,i._Z)(E,"canvas_insert_workflow_menu")==="on",E=>(0,i._Z)(E,"canvas_set_reminder_from_date_picker")==="on",E=>(0,i._Z)(E,"canvas_create_list_prototype")==="on",E=>(0,i._Z)(E,"canvas_callouts")==="on",E=>(0,i._Z)(E,"canvas_ai_inline_creation")==="on",E=>(0,v.teamHasFullListsAccess)(E),()=>(0,s.JK)(),(E,M)=>M],(E,M,T,D,C,m,O,P,R)=>p({currentTeam:E,experimentCanvasInsertWorkflowMenuGroupOn:M,experimentCanvasSetReminderFromDatePickerOn:T,experimentCanvasCreateListPrototypeGroupOn:D,experimentCanvasCalloutsGroupOn:C,experimentCanvasAiContentCreationGroupOn:m,teamHasListsAccess:O}).map(y).filter(V=>R||!V.hideOnEmptyQuery))},9121476043:(x,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(6304789565),n=e(9536404279),s=e(10127715),i=e(7606781622),l=e(3164289453),o=e(3110884894);const a=(0,t.Ay)("Remove a message and its timestamp",function(d,u){let{channelId:_,ts:v,threadTs:h,broadcastDelete:f=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!_||!v))if(f)d((0,s.E$)({channelId:_,ts:v}));else{d((0,n.Np)({channelId:_,timestamp:v}));const I=!1,p=(0,i.Ld)(u(),_,v,I),y=p&&p.thread_ts||h;if(y){const g=(0,o.Iu)(_,y)||"";d((0,n.Np)({channelId:g,timestamp:v}))}d((0,s.QN)({message:{channel:_,ts:v}})),d((0,l.A)({channelId:_,item:p}))}});a.meta={name:"createThunk",key:"createThunkremoveMessageAndTimestamp",description:"Remove a message and its timestamp"};const r=a},3164289453:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3297051565),n=e.n(t),s=e(2140362605);const i=(0,s.Ay)("(noop) Remove a pinned item via side-effect");i.meta={name:"createAction",key:"createActionremovePinnedItemCircular",description:"(noop) Remove a pinned item via side-effect"},i.propTypes=n().shape({item:n().object.isRequired,channelId:n().string.isRequired}).isRequired;const l=i},8391820676:(x,A,e)=>{"use strict";e.d(A,{A:()=>L});var t=e(6422693406),n=e(6696292586),s=e(8086952004),i=e(12126472),l=e(3398586081),o=e(5950652755),a=e(6304789565),r=e(6533394955),d=e(5795074931),u=e(8847766420),_=e(2155512519),v=e(1116859610),h=e(9101533895),f=e(9536404279),I=e(1407713935),p=e(1581380967),y=e(3110884894),g=e(10127715),E=e(3087402890),M=e(6704899486),T=e(796111729),D=e(8802876335);const C=1e3,m=c((B,K,b)=>{if(K==="Vall_threads")return(0,r.dispatchForTeamId)(B,(0,E.r8)()),t.K.resolve();const S=!1,G=(0,h.OL)((0,r.getStateByTeamId)(B),K,S);if(!G)return t.K.resolve();if(b)return O(B,K,b);const H=(0,I.mz)(G);return(0,r.dispatchForTeamId)(B,(0,_.Ay)({channelId:K,type:H,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:U,hasMore:F,isLimited:Y,pinCount:Z,deleted:ee}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const j=(0,r.getStateByTeamId)(B);(0,D.UJ)(j)&&!(0,M.N)(j,K)&&!(0,M.N)(j,(0,d.WR)(j))||((0,r.dispatchForTeamId)(B,(0,f.Jt)({channelId:K})),(0,r.dispatchForTeamId)(B,(0,v.A)({msgs:U,channelId:K,isLimited:Y,pinCount:Z,hasMore:{hasMoreStart:F,hasMoreEnd:!1},oldest:null,latest:null,deleted:ee})),(0,n.A)(Z)&&(0,r.dispatchForTeamId)(B,(0,p.K)({channelId:K,count:Z})))}).catch(U=>{(0,T.Ay)({state:(0,r.getStateByTeamId)(B)}).error(`Failed to fetch offline history for ${K}: ${U}`)})},"fetchOfflineHistory");function O(B,K,b){const S=(0,y.Iu)(K,b);return(0,r.dispatchForTeamId)(B,(0,_.$b)({channelId:K,threadTs:b,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:G,deleted:H,hasMore:U}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const F=(0,r.getStateByTeamId)(B);if((0,D.UJ)(F)&&!(0,M.N)(F,K)&&!(0,M.N)(F,(0,d.WR)(F)))return;let Y=G;const Z=(0,s.A)(G,{ts:b});U&&(Y=(0,i.A)(G,{ts:b})),(0,r.dispatchForTeamId)(B,(0,f.Jt)({channelId:S})),(0,r.dispatchForTeamId)(B,(0,v.A)({msgs:Y,channelId:S,hasMore:{hasMoreStart:U,hasMoreEnd:!1},oldest:null,latest:null,deleted:H})),Z&&(0,r.dispatchForTeamId)(B,(0,g.Kc)([Z]))})}c(O,"fetchOfflineHistoryForThread");const P=(()=>{const B=(0,l.A)(()=>(0,o.A)(m,C),function(){for(var K=arguments.length,b=new Array(K),S=0;S<K;S++)b[S]=arguments[S];return JSON.stringify(b)});return function(){for(var K=arguments.length,b=new Array(K),S=0;S<K;S++)b[S]=arguments[S];return B(...b)(...b)}})(),R=(0,a.Ay)("Request offline history",function(B,K){let{channelId:b,threadTs:S}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P((0,u.ZT)(K()),b,S)});R.meta={name:"createThunk",key:"createThunkrequestOfflineHistory",description:"Request offline history"},R.propTypes={};const L=R,V={fetchOfflineHistory:m,fetchOfflineHistoryForThread:O}},4587446194:(x,A,e)=>{"use strict";e.d(A,{NU:()=>Q,e8:()=>k,Ay:()=>Ne,IY:()=>le});var t=e(2003990933),n=e(7174777686),s=e(3571452446),i=e(1649982175),l=e(3110884894),o=e(5795074931),a=e(8847766420),r=e(9536404279),d=e(9101533895),u=e(10127715),_=e(6483201417),v=e(6704899486),h=e(6304789565),f=e(796111729),I=e(9190452268),p=e(3855029223),y=e(3158767748),g=e(7715417323),E=e(9762304444);const M=(0,E.Ay)("TS.channels.read_only.stashAndFetchChannelPostingUpdates",g.A);var T=e(2664504268),D=e(662226046),C=e(9121476043),m=e(8391820676),O=e(6422693406),P=e(6580433553),R=e(6533394955),L=e(2872463257);const V={},B="cse-message-send",K="cse-message-send";let b=c(class{_send(){var Ee;const{message:oe,trace:ce,parentSpanId:ke}=this._activeRequest||{};(0,f.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Sending message with clientMsgId ${oe==null?void 0:oe.client_msg_id}`);const Ce=c(()=>{var Me;return(Me=this._store)===null||Me===void 0?void 0:Me.dispatch((0,P.A)({message:oe,traceId:ce==null?void 0:ce.getTraceId(),parentSpanId:ke}))},"postMessageP");return(Ee=this._maybeTraceMessageSend(Ce))===null||Ee===void 0?void 0:Ee.then(this._activeRequest?this._activeRequest.resolve:g.A).catch(this._activeRequest?this._activeRequest.reject:g.A).finally(()=>this.resolve(oe))}_next(){if(this._activeRequest||!this._queue.length)return!1;this._activeRequest=this._queue.shift();const{messageEnqueueSpan:Ee}=this._activeRequest||{};return Ee==null||Ee.addTags({count:this._queue.length}),Ee==null||Ee.close(),this._send(),(0,f.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Shifting queue, now has ${this._queue.length} messages`),!0}_maybeTraceMessageSend(Ee){var oe;if(!this.shouldTraceMessageSend())return Ee();const ce=(oe=this._tracer)===null||oe===void 0?void 0:oe.createTrace({traceName:B,tags:{event_type:"/api/chat.postMessage"},samplingOptions:{sampleType:L.nl.ALWAYS}}),ke=c(()=>{var Me;ce&&((Me=this._tracer)===null||Me===void 0||Me.clearTrace(ce))},"onResolve"),Ce=c((Me,Se)=>{var Ue;const He={state:L.$m.ERROR};Se.status&&(He.status=Se.status),Se.message&&(He.message=Se.message),Se.data&&Se.data.error&&(He.reason=Se.data.error),Me==null||Me.addTags(He),Me==null||Me.close(),ce&&((Ue=this._tracer)===null||Ue===void 0||Ue.reportTrace(ce))},"onError");return ce==null?void 0:ce.traceFn({name:K,onError:Ce,onResolve:ke},Ee)}enqueue(Ee){let{trace:oe,parentSpanId:ce}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new O.S((ke,Ce)=>{const Me=oe==null?void 0:oe.startSpan("message_send_attempt:enqueue",{parentSpanId:ce});this._queue.push({message:Ee,messageEnqueueSpan:Me,trace:oe,parentSpanId:ce,resolve:ke,reject:Ce}),(0,f.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Enqueueing message with clientMsgId ${Ee.client_msg_id}, queue has ${this._queue.length} messages`),this._next()})}resolve(Ee){return!Ee||!this._activeRequest||!this._activeRequest.message||Ee.client_msg_id!==this._activeRequest.message.client_msg_id?!1:((0,f.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Resolving active request with clientMsgId ${Ee.client_msg_id}`),this._activeRequest=null,this._next())}shouldTraceMessageSend(){return this._tracer}constructor(Ee){if(!Ee)throw new Error("MessageQueue requires a teamId.");if(this._teamId=Ee,this._activeRequest=null,this._queue=[],this._store=(0,R.getStoreInstanceByTeamId)(Ee),!this._store)throw new Error(`MessageQueue requires a store; No store matching ${Ee} found.`);const oe=this._store.getState();this._tracer=(0,p.E)({state:oe})}},"MessageQueue");function S(pe){return V[pe]||(V[pe]=new b(pe)),V[pe]}c(S,"getInstance");const G={MESSAGE_SEND_TRACE_LABEL:B,MESSAGE_SEND_SPAN_LABEL:K};var H=e(9781145568),U=e(8802876335),F=e(5345057011),Y=e(5774398667),Z=e(4177200783),ee=e(7759525289),j=e(4761125736);const ge=6,ne=7,ue=8,he="restricted_action_read_only_channel",be="restricted_action_thread_only_channel",xe="restricted_action_non_threadable_channel",Le="ekm_access_denied",fe="dlp_user_warning",se="message_limit_exceeded";var Q;(function(pe){pe.BLOCK_FILES_LINK_TYPE="slack_connect_file_link_sharing_blocked",pe.BLOCK_CANVAS_CONTAIN_FILES_TYPE="slack_connect_canvas_contain_file_sharing_blocked",pe.BLOCK_CANVAS_CONTAIN_EMBEDDED_FILES_TYPE="slack_connect_canvas_contain_embedded_files_blocked",pe.BLOCK_LIST_CONTAIN_FILES_TYPE="slack_connect_list_contain_file_sharing_blocked"})(Q||(Q={}));var k;(function(pe){pe.SLACK_CONNECT_CANVAS_SHARING_BLOCKED="slack_connect_canvas_sharing_blocked",pe.SLACK_CONNECT_FILE_UPLOAD_SHARING_BLOCKED="slack_connect_file_upload_sharing_blocked",pe.SLACK_CONNECT_TEAM_BLOCKED="slack_connect_team_blocked"})(k||(k={}));const N={[he]:ge,[be]:ne,[xe]:ue};function $(pe,Ee){pe((0,u.Kc)([Ee]));const oe={channelId:Ee.channel,timestamps:[Ee.ts],oldest:Ee.ts,hasMore:!1,append:!0};if(pe((0,r.VG)(oe)),Ee.thread_ts){const ce=(0,l.Iu)(Ee.channel,Ee.thread_ts);pe((0,r.VG)({...oe,channelId:ce}))}}c($,"addMsgToEnd");const W={};function q(pe,Ee,oe){W[pe]||(W[pe]={}),W[pe][Ee]=oe}c(q,"addResolutionTimer");function re(pe,Ee){!W[pe]||!W[pe][Ee]||(clearTimeout(W[pe][Ee]),delete W[pe][Ee])}c(re,"cancelResolutionTimer");function le(pe,Ee,oe,ce){const ke=(0,a.ZT)(pe())||"",Ce=(0,Y.I)(pe(),ce.client_msg_id);if(Ce){(0,f.Ay)({getState:pe}).action("MESSAGE",`Resolved a message with clientMsgId ${ce.client_msg_id} in ${oe.channel} with ts ${ce.ts}`),Ee((0,F.s)(Ce.clientMsgId)),re(ke,Ce.clientMsgId),Ee((0,C.A)({channelId:Ce.channelId,ts:Ce.ts}));const Me=!1;(0,d.OL)(pe(),oe.channel,Me)&&Ee((0,H.A)({channelId:oe.channel,msgTs:oe.ts,resent:!1}))}S(ke).resolve(ce)}c(le,"resolveMessage");const Ae="cse-message-send:send",Te=(0,h.Ay)("Send a message",(pe,Ee,oe)=>{let{messageSendTrace:ce,notificationTracePassthroughData:ke,skipDLPUserWarning:Ce,...Me}=oe;const Se=(0,p.E)({getState:Ee});let Ue,He;ce&&(Ue=ce.startSpan("message_send_attempt:send"),He=ce.startSpan("message_send_attempt:placeholder",{parentSpanId:Ue==null?void 0:Ue.getId()}));const Ye=Se.createMetricsTrace({label:"cse-message-send"});Ye.count({name:Ae,label:"pending"}),Se.reportTrace(Ye);const J=(0,y.A)(1),{channel:ae,reply_broadcast:Ve,thread_ts:Be,client_msg_id:Ke,xArgs:Re}=Me,Fe=(0,f.Ay)({getState:Ee}),Ie=(0,a.ZT)(Ee())||"",ze=Be?{_hidden_reply:!0,_was_reply_broadcast:Ve}:null,qe=Ke||(0,T.A)();ke&&(0,D.qe)(Ee(),{notificationTracePassthroughData:ke,clientMsgId:qe});const st=(0,j._Z)(Ee(),"fe_message_rendering_perf_m1")==="on",ut=Me.blocks,tt={...Me,...ze,user:(0,o.WR)(Ee()),showResend:!1,showCancel:!1,is_pending:!0,client_msg_id:qe,blocksProcessed:(0,ee.R)({blocks:ut,experimentFeMessageRenderingPerfM1GroupOn:st})};Fe.action("MESSAGE",`Sent a message to ${ae} via HTTP, clientMsgId: ${qe}`);const _t={...Me,...Re,include_channel_perm_error:!0,client_msg_id:qe,skip_dlp_user_warning:Ce};J&&q(Ie,qe,window.setTimeout(()=>{if((0,Y.I)(Ee(),tt.client_msg_id)){const Kt=Ee();(0,U.UJ)(Kt)&&(0,I.Cy)({state:Kt}).count("msg_send_placeholder_not_resolved_connected_60s")}},1e3*60));const yt=S((0,a.ZT)(Ee())||"").enqueue(_t,{trace:ce,parentSpanId:Ue==null?void 0:Ue.getId()});return $(pe,tt),pe((0,F.T)({clientMsgId:tt.client_msg_id,channelId:tt.channel,ts:tt.ts})),Be||pe((0,_.A)({ts:null})),He==null||He.close(),yt.tap(()=>{const Kt=Ee();(!(0,U.UJ)(Kt)||(0,v.N)(Kt,ae)||(0,v.N)(Kt,(0,o.WR)(Kt)))&&(pe((0,m.A)({channelId:ae,threadTs:Be})),Ve&&pe((0,m.A)({channelId:ae}))),Ye.count({name:Ae,label:"success"}),Se.reportTrace(Ye),ce&&(ce.addTags({success:!0}),Ue==null||Ue.close(),Se.reportTrace(ce))}).catch(Kt=>{const Qt=(0,t.A)(Kt,"data.error"),Jt=(0,t.A)(Kt,"data.dlp_custom_message");Ye.count({name:Ae,label:"failure"}).setTag("error",Qt||(Kt==null?void 0:Kt.message)),Se.reportTrace(Ye);const Gt=Qt===Le,wt=Qt===fe,Bt=Qt===se,Wt=Object.values(k).includes(Qt)?Qt:void 0,Tn=Object.values(Q).includes(Qt)?Qt:void 0;if(!Qt&&!(0,Y.I)(Ee(),tt.client_msg_id)){Fe.info("MESSAGE","Ignoring non-backend chat.postMessage error since the message already came in over socket");return}const Ot=N[Qt];let Ft=!0;const rn=!0,ln=[ge,ne,ue,he,be,xe];(0,n.A)(ln,Qt)&&(M(ae,Ot,"send-message/sendMessage.catch"),Ft=!1),Gt&&(Ft=!1),Tn&&(Ft=!1),Bt&&(Ft=!1,pe((0,Z.A)())),Wt&&(Ft=!1);const _n="Message failed to send",en=(0,s.A)(Kt,["status","retryAfter","attempts","data.ok","data.error","args._x_reason","args.channel","args.ts","args.thread_ts","args.reply_broadcast"]);en.client_msg_id=qe,en.channel=ae,en.thread_ts=Be;const Xt=Kt&&Kt.status===429?"message_send_ratelimit":"message_send_fail";Fe.error(en instanceof Error?en:new Error(_n),`${_n}: ${Qt} | ${JSON.stringify(en)}`,{subtype:Xt});const vn=Qt?(0,i.A)(en,["response"]):Kt;Fe.error("MESSAGE",_n,Qt,vn);const je={...tt,showResend:Ft,showCancel:rn,isEKMError:Gt,isDLPUserWarningError:wt,canvasSharingError:Wt,blockFileLinkSharingError:Tn,dlpCustomMessage:Jt};(0,Y.I)(Ee(),tt.client_msg_id)?pe((0,u.Kc)([je])):$(pe,je),!Ft&&J&&re(Ie,tt.client_msg_id),ce&&(Ft?(ce.addTags({success:!1}),Ue==null||Ue.close(),Se.reportTrace(ce)):Se.clearTrace(ce))})});Te.meta={name:"createThunk",key:"createThunksendMessage",description:"Send a message"};const Ne=Te},5363983309:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(8212623464),s=e(6304789565),i=e(6533394955),l=e(8847766420),o=e(2567914105),a=e(2375333597),r=e(8726613433),d=e(5258584090),u=e(4518410378);function _(){return _=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}return f},_.apply(this,arguments)}c(_,"_extends");const h=c((f,I)=>(0,s.Ay)(`XWS open ${f.displayName} modal`,(p,y,g,E)=>{const{modalName:M,allowMultiple:T=!0,isStackable:D=!1,renderInChildWindow:C=!1}=I||{};let m,O=C;const P=E(d.S);if((P==null?void 0:P.windowRef.deref())!==u.J&&(P!=null&&P.windowId)&&(O=!0,m=P.windowId),!T&&M&&(0,o.wc)(y(),m).find(G=>{let{name:H}=G;return H===M}))return;const R=(0,l.ZT)(y()),L=(0,r.vB)(y()),V=(0,i.getStoreInstanceByTeamId)(R);let B,K=t.createElement(f,_({},g,{closeModal:()=>B==null?void 0:B()}));O||(K=t.createElement(n.Kq,{store:V},K));let b;return O?b=p((0,a.q)({element:K,name:M||void 0,isStackable:D})):b=(0,i.dispatchForTeamId)(L,(0,a.q)({element:K,name:M||void 0,isStackable:D})),B=b==null?void 0:b.close,b}),"createXWSModalThunk")},2371143272:(x,A,e)=>{"use strict";e.d(A,{b:()=>l,i:()=>i});var t=e(3398586081),n=e(6917917245),s=e(1658558415);const i="sentry_fe_perf",l=(0,t.A)(()=>(0,s.A)()?!1:(0,n.fW)(i))},7206394193:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(8571983633),n=e(9686962598),s=e(6926388022),i=e(1527536225),l=e(5219503691);const o=(0,i.Ay)("Logs helpful messages to the console if you do something incorrect",(r,d,u)=>{if((0,t.A)(u)||(0,n.A)(u))return l.Qs&&(0,s.z3)("It looks like you dispatched null or undefined, instead of an action or a thunk. Check the stack trace of this error to see where this mistake is occurring."),null;if(u.isThunkCreator||u.isActionCreator){if(l.Qs){const _=u.isThunkCreator?"thunk":"action",v=u.meta?u.meta.name:`${_}Creator`;(0,s.z3)(`
	It looks like you dispatched a ${_} creator instead of the ${_} itself!
	This is a common mistake, and the solution is to call dispatch(${v}(payload)) instead of just dispatch(${v}), note the extra parens at the end.
				`)}return null}return(0,l.ZR)(u),d(u)});o.meta={name:"createMiddleware",key:"createMiddlewarehelpfulMessagingMiddleware",description:"Logs helpful messages to the console if you do something incorrect"};const a=o},773865333:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(862210999),n=e(796111729),s=e(4724591729),i=e(1527536225),l=e(4423055085);let o=[];const a=(0,n.Wo)(),r=(0,i.Ay)("Allows devs to get console logging or trigger breakpoints when state they care about changes",(v,h,f)=>{const I=[],p=v.getState();o.forEach(E=>{I.push(E(p,f))});const y=h(f),g=v.getState();return o.forEach((E,M)=>{const T=E(g,f);if(I[M]!==T){const D=["Redux Watcher:",`Value has changed! 
Action: `,f,`
Before: `,I[M],`
After:  `,T];if(I[M]!==void 0&&T!==void 0){const C=I[M]===void 0?{}:I[M],m=T===void 0?{}:T;D.push(`
Diff: `,Object.keys({...C,...m}).filter(O=>C[O]!==m[O]).map(O=>({key:O,before:C[O],after:m[O]})))}if(a.warn(...D),(0,s.Cu)()||(0,s.b3)())debugger}}),y});r.meta={name:"createMiddleware",key:"createMiddlewarereduxWatcherMiddleware",description:"Allows devs to get console logging or trigger breakpoints when state they care about changes"};const d=r;function u(v){if(!(0,t.A)(v)){a.error("watcherFn passed in to addWatcher must be a function");return}o.push(v)}c(u,"addWatcher");function _(){o=[]}c(_,"clearAllWatchers"),(0,l.ul)("reduxWatcher",{addWatcher:u,clearAllWatchers:_})},7156104699:(x,A,e)=>{"use strict";e.d(A,{N:()=>v,A:()=>_});var t=e(1527536225),n=e(6152845331),s=e(8161242485);const i=(0,s.Ay)(h=>{var f;return h==null||(f=h.sideEffects)===null||f===void 0?void 0:f.sideEffectsMap});i.meta={name:"createSelector",key:"createSelectorgetSideEffectsMap",description:h=>{var f;return h==null||(f=h.sideEffects)===null||f===void 0?void 0:f.sideEffectsMap}};const l=(0,s.Ay)(h=>{var f;return h==null||(f=h.clientSideEffects)===null||f===void 0?void 0:f.clientSideEffectsMap});l.meta={name:"createSelector",key:"createSelectorgetClientSideEffectsMap",description:h=>{var f;return h==null||(f=h.clientSideEffects)===null||f===void 0?void 0:f.clientSideEffectsMap}};var o=e(796111729),a=e(6422693406);function r(){return(0,t.Ay)("Handle client side effects",(h,f,I)=>{var p;if(!((p=I.__test)===null||p===void 0)&&p.disableSideEffects)return f(I);const y=h.getState(),g=l(y);return u({store:h,action:I,sideEffectsMap:g}),f(I)})}c(r,"createClientSideEffectsMiddleware");function d(){return(0,t.Ay)("Handle side effects",(h,f,I)=>{var p;if(!((p=I.__test)===null||p===void 0)&&p.disableSideEffects)return f(I);const y=h.getState(),g=i(y);return u({store:h,action:I,sideEffectsMap:g}),f(I)})}c(d,"createSideEffectsMiddleware");function u(h){let{store:f,action:I,sideEffectsMap:p}=h;const y=p&&p[I.type],g=c(E=>((0,n.S$)(I,E),f.dispatch(E)),"wrappedDispatch");y!=null&&y.length&&a.S.resolve().then(()=>{y.forEach(E=>{if(!E)return;const{thunk:M}=E;try{g(M(I))}catch(T){(0,o.Ay)({getState:f.getState}).error("SIDE-EFFECTS",`Error in side effect for '${I.type}'`,T,{subtype:"side_effect_error"})}})})}c(u,"runSideEffects");const _=d(),v=r()},8333842125:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(1416482128),n=e(4724591729),s=e(3202757386),i=e(4157777698);const l=c(u=>{switch(u.type){case i.f0.getType():return{...u,payload:"Channel bulk add payload is too big to output to redux devtools"};default:return u}},"actionSanitizer"),o=(0,s.A)()?void 0:()=>({apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}),r={autoPause:!0,actionSanitizer:l,stateSanitizer:o,maxAge:1e3,features:{pause:!0}};function d(u){let{teamOrEnterpriseId:_,appName:v="",customEnhancers:h,middlewares:f,disableDevTools:I}=u;return(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&!I&&((0,n.Cu)()||(0,n.b3)())?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({...r,name:["Slack",_,v].filter(g=>g&&g.length>0).join("-")}):t.Zz)((0,t.Tw)(...f??[]),...h??[])}c(d,"configureEnhancers")},582577127:(x,A,e)=>{"use strict";e.d(A,{g:()=>n});var t=e(3371371503);function n(s){const o={sideEffectsMap:{},clientSideEffectsMap:{}};return!s||!s.length?o:s.reduce((a,r)=>{const{actions:d,scope:u}=r;let _;switch(u){case t.RE.client:_=a.clientSideEffectsMap;break;default:case t.RE.workspace:_=a.sideEffectsMap;break}return d.forEach(v=>{var h;const f=v==null||(h=v.getType)===null||h===void 0?void 0:h.call(v);f&&(_[f]=_[f]||[],_[f].push(r))}),a},o)}c(n,"generateSideEffectsMaps")},2732935554:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(9139930183),n=e(1004520977);const s={hasKeyboardFocus:!1},l=(0,t.Ay)({},s,{storeKey:"accessibilityPersistent",persistenceEnabled:!0,persistImmediately:!0}).on(n.w,function(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return o.hasKeyboardFocus===a?o:{...o,hasKeyboardFocus:a}})},5105455463:(x,A,e)=>{"use strict";e.d(A,{As:()=>l,N9:()=>n,V_:()=>s,WB:()=>u,X8:()=>i,bb:()=>r,c7:()=>_,dH:()=>a,lf:()=>d,og:()=>t,rf:()=>o});const t="(prefers-contrast: more)",n="useAriaApplicationForListViews",s="composerUpArrowShortcutBehavior",i="messageTextLineSpacing",l="messageSpacing",o="messageTextWordSpacing",a="conversationIncomingMessageSound",r="conversationSentMessageSound",d="conversationIncomingMessageAnnouncement",u="peeksEnabledOnMouseEnter",_=!0},3034787354:(x,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3245843483),n=e(8646192222),s=e(9139930183),i=e(25586007),l=e(5105455463),o=e(8439865561),a=e(9733150292);let r=!1;(0,n.Nu)()?r=window.matchMedia(l.og).matches:(0,n.hk)()&&(r=(0,t.oQe)("settings","shouldUseHighContrastColors"));let d=!1;try{d=!!(0,a.W6)(l.N9)}catch{}let u;try{u=(0,a.W6)(l.V_)}catch{}let _;try{_=(0,a.W6)(l.X8)||1}catch{}let v;try{v=(0,a.W6)(l.As)||1}catch{}let h;try{h=(0,a.W6)(l.rf)||"0"}catch{}let f;try{var I;f=(I=(0,a.W6)(l.dH))!==null&&I!==void 0?I:""}catch{f=""}let p;try{var y;p=(y=(0,a.W6)(l.bb))!==null&&y!==void 0?y:""}catch{p=""}let g;try{g=(0,a.W6)(l.lf)}catch{g=void 0}let E;try{var M;E=(M=(0,a.W6)(l.WB))!==null&&M!==void 0?M:l.c7}catch{E=l.c7}const T={screenReaderEnabled:!1,shouldUseHighContrastColors:r,useARIAApplicationForListViews:d,composerUpArrowShortcutBehavior:u,messageTextLineSpacing:_,messageSpacing:v,messageTextWordSpacing:h,conversationIncomingMessageSound:f,conversationSentMessageSound:p,conversationIncomingMessageAnnouncement:g,peeksEnabledOnMouseEnter:E},C=(0,s.Ay)({},T,{storeKey:"accessibility",persistenceEnabled:!1}).on(o.rl,(m,O)=>O!=null&&O.message?{...m,announcerAPIAnnouncement:O}:m).on(o.Jq,(m,O)=>typeof O!="boolean"||O===m.screenReaderEnabled?m:{...m,screenReaderEnabled:O}).on(o.N,function(m){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof O!="boolean"||O===m.shouldUseHighContrastColors?m:{...m,shouldUseHighContrastColors:O}}).on(o.KQ,function(m){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...m,useARIAApplicationForListViews:O}}).on(o.Tv,function(m){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.v.LIST;return{...m,composerUpArrowShortcutBehavior:O}}).on(o.C_,function(m){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...m,messageTextLineSpacing:O}}).on(o.XE,function(m){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...m,messageSpacing:O}}).on(o.Mq,function(m){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return{...m,messageTextWordSpacing:O}}).on(o.Sr,(m,O)=>({...m,conversationIncomingMessageSound:O})).on(o.mw,(m,O)=>({...m,conversationSentMessageSound:O})).on(o.Ap,(m,O)=>({...m,conversationIncomingMessageAnnouncement:O})).on(o.V_,(m,O)=>({...m,peeksEnabledOnMouseEnter:O}))},8365110903:(x,A,e)=>{"use strict";e.d(A,{T:()=>o});var t=e(6304789565),n=e(4134037340),s=e(5105455463),i=e(8439865561),l=e(9733150292);const o=(0,t.Ay)("Set the behavior of the up arrow shortcut when focus is in the MessageInput",(a,r,d)=>{if((0,n.A)(r()))try{(0,l.q9)(s.V_,d)}catch{}a((0,i.Tv)(d))});o.meta={name:"createThunk",key:"createThunksetComposerUpArrowShortcutBehavior",description:"Set the behavior of the up arrow shortcut when focus is in the MessageInput"}},2633701976:(x,A,e)=>{"use strict";e.d(A,{p:()=>o});var t=e(6304789565),n=e(4134037340),s=e(5105455463),i=e(8439865561),l=e(9733150292);const o=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(a,r,d)=>{if((0,n.A)(r()))try{(0,l.q9)(s.lf,d)}catch{}a((0,i.Ap)(d))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageAnnouncement",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"}},2517531287:(x,A,e)=>{"use strict";e.d(A,{R:()=>o,r:()=>a});var t=e(6304789565),n=e(4134037340),s=e(5105455463),i=e(8439865561),l=e(9733150292);const o=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(r,d,u)=>{if((0,n.A)(d()))try{(0,l.q9)(s.dH,u)}catch{}r((0,i.Sr)(u))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageSound",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"};const a=(0,t.Ay)("Set the pref for the sound that plays when a message is sent to the focused conversation",(r,d,u)=>{if((0,n.A)(d()))try{(0,l.q9)(s.bb,u)}catch{}r((0,i.mw)(u))});a.meta={name:"createThunk",key:"createThunksetPersistentConversationSentMessageSound",description:"Set the pref for the sound that plays when a message is sent to the focused conversation"}},25586007:(x,A,e)=>{"use strict";e.d(A,{v:()=>t});var t;(function(n){n[n.LIST=1]="LIST",n[n.LIST_IF_EMPTY=2]="LIST_IF_EMPTY",n[n.EDIT=3]="EDIT"})(t||(t={}))},3087402890:(x,A,e)=>{"use strict";e.d(A,{FX:()=>o,X5:()=>l,ZY:()=>h,cD:()=>d,cQ:()=>u,cw:()=>r,dj:()=>_,fe:()=>i,hc:()=>f,lB:()=>v,qK:()=>n,r8:()=>a,s2:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Set the thread root keys");n.meta={name:"createAction",key:"createActionsetThreads",description:"Set the thread root keys"};const s=(0,t.Ay)("Append more thread root keys");s.meta={name:"createAction",key:"createActionappendThreads",description:"Append more thread root keys"};const i=(0,t.Ay)("Insert a thread at the beginning");i.meta={name:"createAction",key:"createActionprependThread",description:"Insert a thread at the beginning"};const l=(0,t.Ay)("Increments totalUnreadReplies");l.meta={name:"createAction",key:"createActionincrementTotalUnreadReplies",description:"Increments totalUnreadReplies"};const o=(0,t.Ay)("Sets totalNewThreads to 0");o.meta={name:"createAction",key:"createActionclearTotalNewThreads",description:"Sets totalNewThreads to 0"};const a=(0,t.Ay)("Increments allThreadsRefreshCounter");a.meta={name:"createAction",key:"createActionincrementAllThreadsRefreshCounter",description:"Increments allThreadsRefreshCounter"};const r=(0,t.Ay)("Set the thread key that should be focused");r.meta={name:"createAction",key:"createActionsetFocusRequestedThreadKey",description:"Set the thread key that should be focused"};const d=(0,t.Ay)("Set the thread timestamp that should be focused");d.meta={name:"createAction",key:"createActionsetFocusRequestedReplyTs",description:"Set the thread timestamp that should be focused"};const u=(0,t.Ay)("Add a thread key to an array of threads that were manually marked unread");u.meta={name:"createAction",key:"createActionappendThreadToManuallyMarkedUnread",description:"Add a thread key to an array of threads that were manually marked unread"};const _=(0,t.Ay)("set object of threads that have been manually marked as unread");_.meta={name:"createAction",key:"createActionsetManuallyMarkedThreads",description:"set object of threads that have been manually marked as unread"};const v=(0,t.Ay)("Remove a thread key from an array of threads that were manually marked unread");v.meta={name:"createAction",key:"createActionremoveThreadFromManuallyMarkedUnread",description:"Remove a thread key from an array of threads that were manually marked unread"};const h=(0,t.Ay)("Sets manuallyMarkedUnread to empty");h.meta={name:"createAction",key:"createActionclearThreadsFromManuallyMarkedUnread",description:"Sets manuallyMarkedUnread to empty"};const f=(0,t.Ay)("Sets selected tab in threads view");f.meta={name:"createAction",key:"createActionsetSelectedTab",description:"Sets selected tab in threads view"}},8778137680:(x,A,e)=>{"use strict";e.d(A,{DQ:()=>l,Lm:()=>a,RZ:()=>d,S:()=>h,X$:()=>i,_y:()=>u,c6:()=>_,fv:()=>o,rk:()=>s,yT:()=>v,z7:()=>r,zZ:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set Awareness State for another user");n.meta={name:"createAction",key:"createActionsetAwarenessStateForOtherUser",description:"Set Awareness State for another user"};const s=(0,t.Ay)("Set Awareness State for me");s.meta={name:"createAction",key:"createActionsetMyAwarenessState",description:"Set Awareness State for me"};const i=(0,t.Ay)("Remove Awareness State for me");i.meta={name:"createAction",key:"createActionremoveMyAwarenessState",description:"Remove Awareness State for me"};const l=(0,t.Ay)("Clear the full awareness state for a user");l.meta={name:"createAction",key:"createActionclearUserAwarenessState",description:"Clear the full awareness state for a user"};const o=(0,t.Ay)("Set my screenshare view");o.meta={name:"createAction",key:"createActionsetMyScreenshareView",description:"Set my screenshare view"};const a=(0,t.Ay)("Remove my screenshare view");a.meta={name:"createAction",key:"createActionremoveMyScreenshareView",description:"Remove my screenshare view"};const r=(0,t.Ay)("Set my sticky reaction");r.meta={name:"createAction",key:"createActionsetMyStickyReaction",description:"Set my sticky reaction"};const d=(0,t.Ay)("Remove my sticky reaction");d.meta={name:"createAction",key:"createActionremoveMyStickyReaction",description:"Remove my sticky reaction"};const u=(0,t.Ay)("Clear any stale awareness entries");u.meta={name:"createAction",key:"createActionttlAwarenessEntries",description:"Clear any stale awareness entries"};const _=(0,t.Ay)("Sets updatedTimestamp for my awareness entries to current time");_.meta={name:"createAction",key:"createActionrenewMyUpdatedTimestamps",description:"Sets updatedTimestamp for my awareness entries to current time"};const v=(0,t.Ay)("Set my active song");v.meta={name:"createAction",key:"createActionsetMyActiveSong",description:"Set my active song"};const h=(0,t.Ay)("Remove my active song");h.meta={name:"createAction",key:"createActionremoveMyActiveSong",description:"Remove my active song"}},7592559649:(x,A,e)=>{"use strict";e.d(A,{$G:()=>E,Ae:()=>T,Fb:()=>g,M3:()=>p,fL:()=>y,gV:()=>M,sW:()=>I,xP:()=>f});var t=e(8161242485),n=e(3385422400),s=e(6418055367),i=e(166097325),l=e(9113979368),o=e(2689960678),a=e(1345902898),r=e(6324645806);const d=(0,n.Ad)(s.UI,i.A),u=c(C=>{var m;return(C==null||(m=C.awareness)===null||m===void 0?void 0:m.awarenessEntries)||o.Ml},"selectAwarenessEntries"),_=(0,n.Mz)([u,(C,m)=>m,(C,m,O)=>O,(C,m,O,P)=>P],(C,m,O,P)=>{if(m===void 0)return o.t0;const R=C.filter(V=>{const B=V.channel===m,K=V.fieldName===O,b=P?V.uniqueId===P:!0,S=!(0,r.h)(V);return B&&K&&b&&S}).map(V=>[V.user,V.fieldValue]),L=Object.fromEntries(R);return(0,l.A)(L)?o.t0:L}),v=(0,n.Mz)([u,(C,m)=>m,(C,m,O)=>O],(C,m,O)=>{if(m===void 0)return o.t0;const P=C.filter(L=>{const V=L.channel===m,B=L.fieldName===O,K=!(0,r.h)(L);return V&&B&&K}).map(L=>[L.uniqueId,[L.user,L.fieldValue]]),R=Object.fromEntries(P);return(0,l.A)(R)?o.t0:R}),h=(0,n.Mz)([u,(C,m)=>m,(C,m,O)=>O],(C,m,O)=>{if(m===void 0)return o.t0;var P,R;const L=C.filter(B=>{const K=B.channel===m,b=B.fieldName===O,S=!(0,r.h)(B);return K&&b&&S}).sort((B,K)=>((P=B.fieldTimestampMs)!==null&&P!==void 0?P:Number.MAX_SAFE_INTEGER)-((R=K.fieldTimestampMs)!==null&&R!==void 0?R:Number.MAX_SAFE_INTEGER)).map(B=>[B.user,B.fieldValue]);return Object.fromEntries(L)}),f=(0,t.Ay)((C,m)=>{const O=h(C,m,a.p4.STICKYEMOJI);return(0,l.A)(O)?o.t0:O});f.meta={name:"createSelector",key:"createSelectorgetStickyEmojisForTopicByUser",description:(C,m)=>{const O=h(C,m,a.p4.STICKYEMOJI);return(0,l.A)(O)?o.t0:O}};const I=(0,t.Ay)((C,m)=>_(C,m,a.p4.CONTENTVIEW));I.meta={name:"createSelector",key:"createSelectorgetContentViewsForTopicByUser",description:(C,m)=>_(C,m,a.p4.CONTENTVIEW)};const p=(0,t.Ay)((C,m)=>v(C,m,a.p4.CONTENTVIEW));p.meta={name:"createSelector",key:"createSelectorgetContentViewsKeyedByPeerId",description:(C,m)=>v(C,m,a.p4.CONTENTVIEW)};const y=(0,t.Ay)((C,m,O,P)=>{var R;return(C==null||(R=C.awareness)===null||R===void 0?void 0:R.awarenessEntries).filter(B=>{const K=B.channel===m,b=B.user===O,S=!P||(0,r.I)(B.fieldName)?!0:B.uniqueId===P,G=!(0,r.h)(B);return K&&b&&S&&G}).map(B=>({field_name:B.fieldName,field_value:B.fieldValue,...!!B.fieldTimestampMs&&{field_timestamp_ms:B.fieldTimestampMs}}))});y.meta={name:"createSelector",key:"createSelectorgetAwarenessForMe",description:(C,m,O,P)=>{var R;return(C==null||(R=C.awareness)===null||R===void 0?void 0:R.awarenessEntries).filter(B=>{const K=B.channel===m,b=B.user===O,S=!P||(0,r.I)(B.fieldName)?!0:B.uniqueId===P,G=!(0,r.h)(B);return K&&b&&S&&G}).map(B=>({field_name:B.fieldName,field_value:B.fieldValue,...!!B.fieldTimestampMs&&{field_timestamp_ms:B.fieldTimestampMs}}))}};const g=(0,t.Ay)((C,m,O,P)=>{const R=y(C,m,O,P);for(const L of R)if(L.field_name===a.p4.STICKYEMOJI)return L;return null});g.meta={name:"createSelector",key:"createSelectorgetAwarenessStickyEmoji",description:(C,m,O,P)=>{const R=y(C,m,O,P);for(const L of R)if(L.field_name===a.p4.STICKYEMOJI)return L;return null}};const E=(0,t.Ay)((C,m)=>{let{callId:O,userId:P,uniqueId:R}=m;return O?_(C,O,a.p4.STICKYEMOJI,R)[P]:void 0});E.meta={name:"createSelector",key:"createSelectorgetStickyReactionsByUserId",description:(C,m)=>{let{callId:O,userId:P,uniqueId:R}=m;return O?_(C,O,a.p4.STICKYEMOJI,R)[P]:void 0}};const M=(0,t.Ay)((C,m)=>{let{callId:O,userId:P}=m;if(!O)return;const R=_(C,O,a.p4.HUDDLE_ACTIVE_SONG);if((0,l.A)(R))return;if(P)return R[P];const L=Object.values(R);if(L.length!==0)return L[0]});M.meta={name:"createSelector",key:"createSelectorgetRequestedSong",description:(C,m)=>{let{callId:O,userId:P}=m;if(!O)return;const R=_(C,O,a.p4.HUDDLE_ACTIVE_SONG);if((0,l.A)(R))return;if(P)return R[P];const L=Object.values(R);if(L.length!==0)return L[0]}};const T=d([u,(C,m,O,P,R)=>`${m},${O},${P},${R}`],(C,m)=>{const[O,P,R,L]=m.split(","),V=C.filter(B=>{const K=B.channel===O,b=B.user!==P,S=B.fieldName===a.p4.ACTIVE_CELL&&B.fieldValue&&B.fieldValue.rowId===R&&B.fieldValue.colId===L,G=!(0,r.h)(B);return K&&b&&S&&G}).map(B=>[[`${B.fieldValue.rowId},${B.fieldValue.colId}`],B.user]);return V.length?Object.fromEntries(V):o.t0}),D=(0,n.Mz)([u,(C,m)=>m],(C,m)=>m===void 0?o.Ml:C.filter(P=>{const R=P.channel===m,L=P.fieldName===a.p4.ACTIVE_CELL;return R&&L}).map(P=>P.user))},1345902898:(x,A,e)=>{"use strict";e.d(A,{Pz:()=>t,mO:()=>s,p4:()=>n});var t;(function(i){i.BROADCAST="broadcast",i.QUERY="query",i.CLOSE="close"})(t||(t={}));var n;(function(i){i.CONTENTVIEW="contentView",i.STICKYEMOJI="stickyEmoji",i.ACTIVE_CELL="activeCell",i.HUDDLE_ACTIVE_SONG="huddleActiveSong"})(n||(n={}));const s=60*1e3},6324645806:(x,A,e)=>{"use strict";e.d(A,{I:()=>s,h:()=>n});var t=e(1345902898);const n=c(i=>{const l=Date.now();var o;return l-((o=i.updatedTimestamp)!==null&&o!==void 0?o:l)>=t.mO},"isAwarenessEntryExpired"),s=c(i=>i?[t.p4.HUDDLE_ACTIVE_SONG].includes(i):!1,"skipUniquenessCheck")},3749529250:(x,A,e)=>{"use strict";e.d(A,{K:()=>s,z:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Enable big button mode");n.meta={name:"createAction",key:"createActionenableBBM",description:"Enable big button mode"};const s=(0,t.Ay)("Disable big button mode");s.meta={name:"createAction",key:"createActiondisableBBM",description:"Disable big button mode"}},4614661813:(x,A,e)=>{"use strict";e.d(A,{Y:()=>i});var t=e(9139930183),n=e(3749529250);const s={enabled:!1},i=(0,t.Ay)({},s,{storeKey:"bbm",persistenceEnabled:!0,persistImmediately:!0}).on(n.z,l=>({...l,enabled:!0})).on(n.K,l=>({...l,enabled:!1}))},8677230210:(x,A,e)=>{"use strict";e.d(A,{pO:()=>I,AF:()=>f,E6:()=>E,vu:()=>g,wC:()=>p,Od:()=>y});var t=e(3037015781),n=e(8161242485),s=e(9464746668),i=e(4588963228),l=e(8847766420),o=e(2762206868),a=e(8276911661);const r=["B01","BSLACKBOT","B03"];var d=e(3447104916),u=e(4562579337);function _(M){return!!(M&&(0,t.uz)(M)&&!(0,u.A)(M))}c(_,"isMemberHuman");var v=e(9887599716),h=e(9354158662);const f=(0,n.Ay)(function(M,T){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const C=(0,l.ZT)(M);if(!T)return!1;const m=(0,v.o)(M,T);return!m&&(0,i.A)(T)&&D&&r.indexOf(T)<0?(0,d.Ss)().fetchObjectWithId(C,T):((0,d.ez)(C,T),m||!1)});f.meta={name:"createSelector",key:"createSelectorgetBotById",description:function(M,T){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const C=(0,l.ZT)(M);if(!T)return!1;const m=(0,v.o)(M,T);return!m&&(0,i.A)(T)&&D&&r.indexOf(T)<0?(0,d.Ss)().fetchObjectWithId(C,T):((0,d.ez)(C,T),m||!1)}};const I=(0,n.Ay)((M,T)=>{if(!T)return;const D=(0,h.iO)(M);let C;return D&&(C=Object.values(D).find(m=>m.app_id===T)),C});I.meta={name:"createSelector",key:"createSelectorgetBotByAppId",description:(M,T)=>{if(!T)return;const D=(0,h.iO)(M);let C;return D&&(C=Object.values(D).find(m=>m.app_id===T)),C}};const p=(0,n.Ay)((M,T)=>{const D=(0,a.nv)(M,T);return _(D)});p.meta={name:"createSelector",key:"createSelectorgetMemberIsHuman",description:(M,T)=>{const D=(0,a.nv)(M,T);return _(D)}};const y=(0,n.Ay)(function(M){let{userId:T,botId:D,botProfile:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,O;T&&(m=(0,a.nv)(M,T)),D&&(O=f(M,D)||void 0);const P=m?_(m):!1;let R;!(0,t.uz)(O)&&(0,t.uz)(m)&&(R=(0,s.A)(M,m),R&&R!==D&&(O=f(M,R)||void 0));let L;if(!(0,t.uz)(O)&&C&&(L=C.id,L&&L!==R&&L!==D&&(O=f(M,L)||void 0),(0,t.uz)(O)||(O=C)),!(0,t.uz)(m)&&(0,t.uz)(O)&&O.app_id){const V=(0,o.sO)(M,O.app_id);if((0,t.uz)(V)){const B=V.app_user_id;B&&B!==T&&(m=(0,a.nv)(M,B))}}return{bot:O,member:m,memberIsHuman:P}});y.meta={name:"createSelector",key:"createSelectormaybeGetBotAndMemberByIds",description:function(M){let{userId:T,botId:D,botProfile:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,O;T&&(m=(0,a.nv)(M,T)),D&&(O=f(M,D)||void 0);const P=m?_(m):!1;let R;!(0,t.uz)(O)&&(0,t.uz)(m)&&(R=(0,s.A)(M,m),R&&R!==D&&(O=f(M,R)||void 0));let L;if(!(0,t.uz)(O)&&C&&(L=C.id,L&&L!==R&&L!==D&&(O=f(M,L)||void 0),(0,t.uz)(O)||(O=C)),!(0,t.uz)(m)&&(0,t.uz)(O)&&O.app_id){const V=(0,o.sO)(M,O.app_id);if((0,t.uz)(V)){const B=V.app_user_id;B&&B!==T&&(m=(0,a.nv)(M,B))}}return{bot:O,member:m,memberIsHuman:P}}};const g=(0,n.Ay)((M,T)=>{const D=f(M,T);if(D&&D.name)return D.name});g.meta={name:"createSelector",key:"createSelectorgetBotNameById",description:(M,T)=>{const D=f(M,T);if(D&&D.name)return D.name}};const E=(0,n.Ay)((M,T)=>{if(!M||!T)return null;const D=(0,a.nv)(M,T.user),C=T.bot_id||(0,s.A)(M,D);if(!C)return null;if(T.bot_profile)return T.bot_profile.id!==C?{...T.bot_profile,id:C}:T.bot_profile;const m=f(M,C);return m||null});E.meta={name:"createSelector",key:"createSelectorgetBotByMsg",description:(M,T)=>{if(!M||!T)return null;const D=(0,a.nv)(M,T.user),C=T.bot_id||(0,s.A)(M,D);if(!C)return null;if(T.bot_profile)return T.bot_profile.id!==C?{...T.bot_profile,id:C}:T.bot_profile;const m=f(M,C);return m||null}}},6252535684:(x,A,e)=>{"use strict";e.d(A,{M:()=>s,h:()=>n});var t=e(8161242485);const n=5*60*1e3,s=(0,t.Ay)((i,l)=>{var o;const a=i==null||(o=i.channelActiveTabStore)===null||o===void 0?void 0:o[l];if(a&&a.timestamp>Date.now()-n)return a.tab});s.meta={name:"createSelector",key:"createSelectorgetLastActiveTabForChannel",description:(i,l)=>{var o;const a=i==null||(o=i.channelActiveTabStore)===null||o===void 0?void 0:o[l];if(a&&a.timestamp>Date.now()-n)return a.tab}}},9536404279:(x,A,e)=>{"use strict";e.d(A,{CD:()=>a,Jt:()=>l,Np:()=>s,VG:()=>n,bz:()=>i,fp:()=>o,hX:()=>r});var t=e(2140362605);const n=(0,t.Ay)("Add timestamps to channel history");n.meta={name:"createAction",key:"createActionaddTimestamps",description:"Add timestamps to channel history"};const s=(0,t.Ay)("Remove timestamps from channel history");s.meta={name:"createAction",key:"createActionremoveTimestamp",description:"Remove timestamps from channel history"};const i=(0,t.Ay)("Remove all history for a channel");i.meta={name:"createAction",key:"createActionremoveAllTimestamps",description:"Remove all history for a channel"};const l=(0,t.Ay)("Was disconnected; reset reachedEnd to false");l.meta={name:"createAction",key:"createActionresetReachedEnd",description:"Was disconnected; reset reachedEnd to false"};const o=(0,t.Ay)("Drop messages from before a given timestamp");o.meta={name:"createAction",key:"createActiontruncateChannelHistoryPriorToTimestamp",description:"Drop messages from before a given timestamp"};const a=(0,t.Ay)("Drop old messages if there are too many");a.meta={name:"createAction",key:"createActiontruncateChannelHistory",description:"Drop old messages if there are too many"};const r=(0,t.Ay)("Remove all history for every channel");r.meta={name:"createAction",key:"createActionclearChannelHistory",description:"Remove all history for every channel"}},4350638406:(x,A,e)=>{"use strict";e.d(A,{Hw:()=>be,e3:()=>se,mY:()=>ne,D1:()=>ue,Zc:()=>fe,ez:()=>ge});var t=e(3398586081),n=e(7715417323),s=e(6533394955),i=e(8352634987);function l(Q,k){return`${Q}:${k}`}c(l,"serialize_serialize");function o(Q){const[k,N]=Q.split(":");return{channelId:k,ts:N}}c(o,"deserialize");var a=e(4423055085),r=e(2208015175),d=e(1703559452),u=e(9816084745),_=e(8289365785),v=e(8786006583),h=e(6422693406),f=e(6304789565),I=e(796111729),p=e(7334104107),y=e(6457401668),g=e(4919145213),E=e(9986847041),M=e(4365697073),T=e(3110884894),D=e(7606781622),C=e(8040098042),m=e(2155512519),O=e(12126472),P=e(1116859610);const R="HISTORY-CFM";function L(Q,k){return c(function N(){let{channelId:$,oldest:W,latest:q,cursor:re="",msgsInRange:le=[],deletedInRange:Ae=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Te={channelId:$,oldest:W,latest:q,cursor:re,inclusive:!0,includePinCount:!1,reason:"channel-history-store.CFM.fetch"};return Q((0,m.Ay)(Te)).then(function(){let{msgs:Ne=[],deleted:pe=[],isLimited:Ee,hasMore:oe,responseMetadata:ce={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.push(...Ne),Ae.push(...pe),oe&&!Ee&&ce.next_cursor?N({channelId:$,oldest:W,latest:q,cursor:ce.next_cursor,msgsInRange:le,deletedInRange:Ae}):(Q((0,P.A)({msgs:le,channelId:$,isLimited:Ee,latest:q,oldest:W,deletedInRange:Ae})),h.S.resolve())})},"fetchHistoryRangeHelper")(k)}c(L,"fetchHistoryRange");function V(Q,k){return c(function N(){let{channelId:$,threadTs:W,oldest:q,latest:re,cursor:le="",msgsInRange:Ae=[],deletedInRange:Te=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Ne={channelId:$,threadTs:W,oldest:q,latest:re,cursor:le,inclusive:!0,reason:"channel-history-store.CFM.fetch"};return Q((0,m.$b)(Ne)).then(function(){let{msgs:pe=[],deleted:Ee=[],hasMore:oe,responseMetadata:ce={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ae.push(...le?(0,O.A)(pe,{ts:W}):pe),Te.push(...Ee),oe&&ce.next_cursor)return N({channelId:$,threadTs:W,oldest:q,latest:re,cursor:ce.next_cursor,msgsInRange:Ae,deletedInRange:Te});const Ce=q===W||re===W?Ae:(0,O.A)(Ae,{ts:W});return Q((0,P.A)({msgs:Ce,channelId:(0,T.Iu)($,W),latest:re,oldest:q,deletedInRange:Te})),h.S.resolve()})},"fetchRepliesRangeHelper")(k)}c(V,"fetchRepliesRange");const B=(0,f.Ay)("Fetches a range of messages",(Q,k,N)=>{let{channelId:$,oldest:W,latest:q}=N;return(0,I.Ay)({getState:k,label:R}).info(`Re-fetching ${$} ${W} - ${q}`),(0,C.A)($)?L(Q,{channelId:$,oldest:W,latest:q}):V(Q,{...(0,T.Sb)($),oldest:W,latest:q})});B.meta={name:"createThunk",key:"createThunkfetchRange",description:"Fetches a range of messages"};var K=e(8455301571);function b(Q){const k={};return Q.forEach(N=>{const{channelId:$,ts:W}=o(N);k[$]=k[$]||[],k[$].push(W)}),k}c(b,"groupTimestampsByChannel");function S(Q){let k,N;return(0,r.A)(Q,($,W)=>{k===void 0&&(k=W),N===void 0&&(N=W),W<k&&(k=W),W>N&&(N=W)}),{minTs:k,maxTs:N}}c(S,"getMinAndMaxTs");function G(){let Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,d.A)(k,(N,$)=>Q[$])}c(G,"hasIntersection");function H(Q,k){return(0,u.A)(k,(N,$)=>Q[$])}c(H,"isSuperset");function U(Q){let{ranges:k={},tsMaps:N=[]}=Q;const $={...k};let W=N[0];return N.forEach(q=>{W!==q&&(G(W,q)?H(W,q)?delete $[q.rangeId]:H(q,W)?(delete $[W.rangeId],W=q):(0,r.A)(q,(re,le)=>delete W[le]):W=q)}),Object.values($)}c(U,"dedupe");function F(Q,k){let N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const $=(0,I.Ay)({state:Q,label:R}),W={},q=[];return N.sort().forEach(re=>{const Ae=(0,D.Ld)(Q,k,re,!1);if(!Ae){$.warn(`No message for ${re} in ${k}`);return}if((0,p.aw)(Ae)||(0,g.A)(Ae))return;const Te=[];(!(0,M.n)(Ae)||(0,p.jX)(Ae)||(0,y.SM)(Ae))&&Te.push(k),((0,p.jX)(Ae)||(0,M.n)(Ae))&&Te.push((0,T.Iu)(k,(0,E.L)(Ae))),Te.forEach(Ne=>{if(!Ne)return;const pe=(0,K.tp)(Q,Ne,re);if(!pe||pe===K.Vl)return;const{start:Ee,end:oe,timestamps:ce}=pe,ke=`${Ee}-${oe}`;if(!W[ke]){const Me={};Object.defineProperty(Me,"rangeId",{enumerable:!1,value:ke}),W[ke]={id:Ne,firstTs:(0,_.A)(ce),lastTs:(0,v.A)(ce),start:Ee,end:oe,tsMap:Me},q.push(Me)}const Ce=W[ke];Ce.tsMap[re]=!0})}),{ranges:W,tsMaps:q}}c(F,"segment");function Y(Q,k){let N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return(U(F(Q,k,N))||[{}]).map(W=>{let{id:q,firstTs:re,lastTs:le,start:Ae,end:Te,tsMap:Ne}=W;const{minTs:pe,maxTs:Ee}=S(Ne);return{id:q,oldest:pe===re?Ae:pe,latest:Ee===le?Te:Ee}})}c(Y,"rangify");const Z=(0,f.Ay)("Fetches chunks of channel history for the given message IDs",(Q,k,N)=>{let{ids:$}=N;const W=b($),q={};return(0,r.A)(W,(re,le)=>{const Ae=Y(k(),le,re);q[le]=h.S.map(Ae,Te=>{let{oldest:Ne,latest:pe,id:Ee}=Te;return Q(B({channelId:Ee,oldest:Ne,latest:pe}))})}),h.S.all(Object.values(q))});Z.meta={name:"createThunk",key:"createThunkrefetchChannelHistory",description:"Fetches chunks of channel history for the given message IDs"};const ee=Z,j=(0,t.A)(()=>new i.Ay({storeKey:"channelHistory",fetch:(Q,k)=>(0,s.dispatchForTeamId)(Q,ee({ids:k})),metricsName:"channel-history",isEnabled:()=>!0,markStaleAfterSlowReconnect:()=>!1})),ge=c((Q,k,N)=>j().maybeRefetch(Q,l(k,N)),"maybeRefetch"),ne=c((Q,k,N)=>j().markObjectsAsFresh(Q,N.map($=>l(k,$))),"markObjectsAsFresh"),ue=c((Q,k,N)=>j().markObjectsAsStale(Q,N.map($=>l(k,$))),"markObjectsAsStale"),he=c((Q,k,N)=>j().isObjectFresh(Q,serialize(k,N)),"isObjectFresh"),be=c(Q=>j().getFreshObjects(Q).map(o),"getFreshObjects");(0,a.zv)("conditionalFetchManagerChannelHistory",j);const xe="reachedEnd",Le=(0,t.A)(()=>new i.Ay({storeKey:"channelHistory",fetch:n.A,metricsName:"channel-history-reached-end",isEnabled:()=>!0})),fe=c(Q=>Le().markObjectsAsFresh(Q,[xe]),"markReachedEndAsFresh"),se=c(Q=>Le().isObjectFresh(Q,[xe]),"isReachedEndFresh")},7097022175:(x,A,e)=>{"use strict";e.d(A,{Y:()=>s,r:()=>n});var t=e(7933637612);const{addObjects:n,removeObjects:s}=t.o1},7933637612:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>o,Tp:()=>l,o1:()=>i});var t=e(7538465478);const n={storeKey:"channelLoading",persistenceEnabled:!1},{reducer:s,actions:i,selectors:l}=(0,t.A)(n,{idKey:"channelId",transform:a=>{const{channelId:r,...d}=a;return{id:r,object:d}}}),o=s},8298125694:(x,A,e)=>{"use strict";e.d(A,{Ah:()=>i,Qr:()=>l,c:()=>o});var t=e(8161242485),n=e(7933637612);const{getObjectById:s}=n.Tp,i=c((r,d)=>s(r,d),"innerGetChannelLoadingDataById"),l=(0,t.Ay)((r,d)=>{var u;return!!(!((u=i(r,d))===null||u===void 0)&&u.loading)});l.meta={name:"createSelector",key:"createSelectorisChannelLoading",description:(r,d)=>{var u;return!!(!((u=i(r,d))===null||u===void 0)&&u.loading)}};const o=(0,t.Ay)((r,d)=>{const u=i(r,d);return!!(u!=null&&u.loading&&(u!=null&&u.loadingOlder))});o.meta={name:"createSelector",key:"createSelectorisChannelLoadingOlder",description:(r,d)=>{const u=i(r,d);return!!(u!=null&&u.loading&&(u!=null&&u.loadingOlder))}};const a={innerGetChannelLoadingDataById:i}},3528815215:(x,A,e)=>{"use strict";e.d(A,{f:()=>s});var t=e(6304789565),n=e(7097022175);const s=(0,t.Ay)("Finished loading history for a channel",(i,l,o)=>{const{channelId:a}=o||{};i((0,n.Y)({ids:[a]}))});s.meta={name:"createThunk",key:"createThunkdoneLoading",description:"Finished loading history for a channel"}},1284885799:(x,A,e)=>{"use strict";e.d(A,{v:()=>i});var t=e(6304789565),n=e(8298125694),s=e(7097022175);const i=(0,t.Ay)("Started loading history for a channel",(l,o,a)=>{const{channelId:r,loadingOlder:d,request:u}=a||{},_=(0,n.Ah)(o(),r);_&&_.loading&&_.request&&_.request.cancel(),l((0,s.r)({objects:[{channelId:r,loading:!0,loadingOlder:d,request:u}]}))});i.meta={name:"createThunk",key:"createThunkstartLoading",description:"Started loading history for a channel"}},1949656963:(x,A,e)=>{"use strict";e.d(A,{U:()=>s,ih:()=>i,k9:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set the history invalid timestamp for a channel");n.meta={name:"createAction",key:"createActionsetHistoryInvalidTimestamp",description:"Set the history invalid timestamp for a channel"};const s=(0,t.Ay)("Set the updated timestamp for a channel");s.meta={name:"createAction",key:"createActionsetUpdatedTimestamp",description:"Set the updated timestamp for a channel"};const i=(0,t.Ay)("Bulk update the history invalid timestamps for a channel");i.meta={name:"createAction",key:"createActionbulkUpdateMutationTimestamps",description:"Bulk update the history invalid timestamps for a channel"}},4405788578:(x,A,e)=>{"use strict";e.d(A,{Kq:()=>l,QO:()=>i});var t=e(8161242485);const n=(0,t.Ay)(o=>o==null?void 0:o.channelMutationTimestamps);n.meta={name:"createSelector",key:"createSelectorgetAllMutationTimestamps",description:o=>o==null?void 0:o.channelMutationTimestamps};const s=(0,t.Ay)((o,a)=>{var r;return(r=n(o))===null||r===void 0?void 0:r[a]});s.meta={name:"createSelector",key:"createSelectorgetMutationTimestampsByChannelId",description:(o,a)=>{var r;return(r=n(o))===null||r===void 0?void 0:r[a]}};const i=(0,t.Ay)((o,a)=>{var r;return(r=s(o,a))===null||r===void 0?void 0:r.updatedTs});i.meta={name:"createSelector",key:"createSelectorgetUpdatedTimestamp",description:(o,a)=>{var r;return(r=s(o,a))===null||r===void 0?void 0:r.updatedTs}};const l=(0,t.Ay)((o,a)=>{var r;return(r=s(o,a))===null||r===void 0?void 0:r.historyInvalidTs});l.meta={name:"createSelector",key:"createSelectorgetHistoryInvalidTimestamp",description:(o,a)=>{var r;return(r=s(o,a))===null||r===void 0?void 0:r.historyInvalidTs}}},9606603587:(x,A,e)=>{"use strict";e.d(A,{B:()=>i});var t=e(6304789565),n=e(3430841143),s=e(9530687876);const i=(0,t.Ay)(s.rd.ADD_CHANNEL,function(l,o){let{channel:a}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};!a||!a.id||l((0,n.F)({channel:a,reason:s.rd.ADD_CHANNEL}))});i.meta={name:"createThunk",key:"createThunkaddChannel",description:s.rd.ADD_CHANNEL}},1761027239:(x,A,e)=>{"use strict";e.d(A,{t:()=>r});var t=e(6422693406),n=e(6304789565),s=e(4446301238),i=e(3430841143),l=e(9530687876),o=e(5267010247),a=e(8822892075);const r=(0,n.Ay)("Archives a private channel, creates and upserts a new one with the same name, then adds users",(d,u,_)=>{let{channelId:v,users:h,subteams:f,inviteAll:I,force:p,propagateInviteResult:y}=_;return d((0,s.wb)({channelId:v,reason:l.rd.CHILD_CHANNEL_CREATED})).then(function(){let{channel:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d((0,i.F)({channel:g,reason:l.rd.CHILD_CHANNEL_CREATED})),d((0,o.o)((0,a.pr)(g.id))),y?I||h||f?d((0,s.Cw)({channelId:g.id,users:h,subteams:f,inviteAll:I,force:p})).then(E=>({channel:g,inviteResult:E})):t.S.resolve({channel:g,inviteResult:{ok:!0}}):(d((0,s.Cw)({channelId:g.id,users:h,subteams:f})),t.S.resolve({channel:g}))})});r.meta={name:"createThunk",key:"createThunkcreateChildChannelAndAddMembers",description:"Archives a private channel, creates and upserts a new one with the same name, then adds users"}},613926746:(x,A,e)=>{"use strict";e.d(A,{Z:()=>s});var t=e(6304789565),n=e(7631186994);const s=(0,t.Ay)("Create or open an IM",function(i,l){let{memberId:o,shouldNavigateToChannel:a=!0,reason:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const d=o?[o]:[];return i((0,n.r)({memberIds:d,shouldNavigateToChannel:a,reason:r}))});s.meta={name:"createThunk",key:"createThunkstartImByMemberId",description:"Create or open an IM"}},7631186994:(x,A,e)=>{"use strict";e.d(A,{r:()=>v});var t=e(6422693406),n=e(9113979368),s=e(235108050),i=e(6304789565),l=e(5795074931),o=e(9884588328),a=e(4446301238),r=e(8822892075),d=e(9101533895),u=e(3430841143),_=e(5267010247);const v=(0,i.Ay)("Create or open an MPIM",function(h,f){let{memberIds:I,shouldNavigateToChannel:p=!0,isQuiet:y=!1,reason:g="startMpimByMemberIds"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if((0,n.A)(I))return t.S.resolve();const E=f(),M=c(C=>(h((0,_.o)((0,r.pr)(C.id))),t.S.resolve(C)),"navigateToChannel");let T,D;if(I.length===1)D=I,T=(0,d.Pu)(E,I[0]);else{const C=(0,l.WR)(E);D=(0,s.A)([C,...I]),T=(0,d.FB)(E,D)}return(0,o.nT)(T)?p?M(T):t.S.resolve(T):h((0,a.jP)({isQuiet:y,memberIds:D,reason:g})).then(C=>!C||!C.channel?t.S.reject(new Error("missing-channel")):(h((0,u.F)({channel:C.channel})),p?M(C.channel):t.S.resolve(C.channel)))});v.meta={name:"createThunk",key:"createThunkstartMpimByMemberIds",description:"Create or open an MPIM"}},4711657482:(x,A,e)=>{"use strict";e.d(A,{CS:()=>u,HM:()=>i,IX:()=>h,JC:()=>y,JT:()=>D,Kv:()=>B,MC:()=>M,MD:()=>ne,Ov:()=>E,PV:()=>ee,RS:()=>m,Ri:()=>H,VM:()=>T,Xr:()=>f,Xu:()=>a,Y5:()=>j,Ye:()=>g,Yr:()=>n,Yy:()=>C,Z8:()=>Z,_Q:()=>s,ai:()=>K,e0:()=>R,f:()=>F,fc:()=>P,fl:()=>I,ho:()=>S,i9:()=>r,kB:()=>v,ke:()=>p,l3:()=>U,mP:()=>V,mt:()=>ge,qC:()=>O,r5:()=>Y,r6:()=>_,rl:()=>G,uN:()=>d,vp:()=>l,yK:()=>L,yQ:()=>o,yg:()=>b});var t=e(2140362605);const n=(0,t.Ay)("Checkout Address Form Data Loaded");n.meta={name:"createAction",key:"createActioncheckoutAddressFormDataLoaded",description:"Checkout Address Form Data Loaded"};const s=(0,t.Ay)("Checkout Credit Card Form Loaded");s.meta={name:"createAction",key:"createActionupdateCheckoutCreditCardFormLoaded",description:"Checkout Credit Card Form Loaded"};const i=(0,t.Ay)("Checkout States and Countries Data Loaded");i.meta={name:"createAction",key:"createActioncheckoutStatesAndCountriesDataLoaded",description:"Checkout States and Countries Data Loaded"};const l=(0,t.Ay)("Checkout Company Address Data Loaded");l.meta={name:"createAction",key:"createActioncheckoutCompanyAddressDataLoaded",description:"Checkout Company Address Data Loaded"};const o=(0,t.Ay)("Checkout Action for setting isFetchingCurrencyAfterCountryChange");o.meta={name:"createAction",key:"createActionsetIsFetchingCurrencyAfterCountryChange",description:"Checkout Action for setting isFetchingCurrencyAfterCountryChange"};const a=(0,t.Ay)("Update Company Address Field");a.meta={name:"createAction",key:"createActionupdateCompanyAddressField",description:"Update Company Address Field"};const r=(0,t.Ay)("Update is country from auto detect");r.meta={name:"createAction",key:"createActionupdateIsCountryFromAutoDetect",description:"Update is country from auto detect"};const d=(0,t.Ay)("Company Address Validated");d.meta={name:"createAction",key:"createActioncompanyAddressValidated",description:"Company Address Validated"};const u=(0,t.Ay)("Company Address Form Field Validated");u.meta={name:"createAction",key:"createActioncompanyAddressFormFieldValidated",description:"Company Address Form Field Validated"};const _=(0,t.Ay)("Clear Company Address Form Field Validation Errors");_.meta={name:"createAction",key:"createActionclearCompanyAddressFormFieldValidationErrors",description:"Clear Company Address Form Field Validation Errors"};const v=(0,t.Ay)("Upgrade Response Received");v.meta={name:"createAction",key:"createActiononUpgradeResponseReceived",description:"Upgrade Response Received"};const h=(0,t.Ay)("Purchase Attempt Response Received");h.meta={name:"createAction",key:"createActiononPurchaseAttemptResponseReceived",description:"Purchase Attempt Response Received"};const f=(0,t.Ay)("Addon Purchase Attempt Response Received");f.meta={name:"createAction",key:"createActiononAddonPurchaseResponseReceived",description:"Addon Purchase Attempt Response Received"};const I=(0,t.Ay)("Purchase Attempt Confirmation Response Received");I.meta={name:"createAction",key:"createActiononPurchaseAttemptConfirmationResponseReceived",description:"Purchase Attempt Confirmation Response Received"};const p=(0,t.Ay)("Update Stripe API Key");p.meta={name:"createAction",key:"createActionupdateStripeApiKey",description:"Update Stripe API Key"};const y=(0,t.Ay)("Update Invoice Data Field");y.meta={name:"createAction",key:"createActionupdateInvoiceDataField",description:"Update Invoice Data Field"};const g=(0,t.Ay)("Invoice Data Validated");g.meta={name:"createAction",key:"createActioninvoiceDataValidated",description:"Invoice Data Validated"};const E=(0,t.Ay)("Invoice Form Field Validated");E.meta={name:"createAction",key:"createActioninvoiceDataFieldValidated",description:"Invoice Form Field Validated"};const M=(0,t.Ay)("Clear Any Existing Payment Status or Errors");M.meta={name:"createAction",key:"createActionclearPaymentStatus",description:"Clear Any Existing Payment Status or Errors"};const T=(0,t.Ay)("Self User Data Loaded");T.meta={name:"createAction",key:"createActionselfUserDataLoaded",description:"Self User Data Loaded"};const D=(0,t.Ay)("Update Is Processing Payment");D.meta={name:"createAction",key:"createActionupdateIsProcessingPayment",description:"Update Is Processing Payment"};const C=(0,t.Ay)("Update Payment Method Selected");C.meta={name:"createAction",key:"createActionupdatePaymentMethodSelected",description:"Update Payment Method Selected"};const m=(0,t.Ay)("Update Show App Disconnect Dialog");m.meta={name:"createAction",key:"createActionupdateIsAppDisconnectedDialogShown",description:"Update Show App Disconnect Dialog"};const O=(0,t.Ay)("Update Active Checkout Step");O.meta={name:"createAction",key:"createActionupdateActiveCheckoutStep",description:"Update Active Checkout Step"};const P=(0,t.Ay)("Update Active Checkout Step");P.meta={name:"createAction",key:"createActionupdateActiveSteppedCheckoutStep",description:"Update Active Checkout Step"};const R=(0,t.Ay)("Update Active Country");R.meta={name:"createAction",key:"createActionupdateActiveCountry",description:"Update Active Country"};const L=(0,t.Ay)("Checkout configuration data loaded");L.meta={name:"createAction",key:"createActioncheckoutConfigurationDataLoaded",description:"Checkout configuration data loaded"};const V=(0,t.Ay)("Update Checkout Flow API Error Indicator");V.meta={name:"createAction",key:"createActionupdateIsCheckoutFlowAPIError",description:"Update Checkout Flow API Error Indicator"};const B=(0,t.Ay)("Update checkout store values with configuration data");B.meta={name:"createAction",key:"createActionupdateCheckoutWithConfigData",description:"Update checkout store values with configuration data"};const K=(0,t.Ay)("Redeem partner promo code failed");K.meta={name:"createAction",key:"createActionredeemPartnerPromoCodeFailed",description:"Redeem partner promo code failed"};const b=(0,t.Ay)("Redeem partner promo code success");b.meta={name:"createAction",key:"createActionredeemPartnerPromoCodeSuccess",description:"Redeem partner promo code success"};const S=(0,t.Ay)("Sets boolean regarding whether we are currently loading Stripe, i.e. getting a new Stripe library initializing promise and a new Setup Intent Client Secret");S.meta={name:"createAction",key:"createActionsetIsLoadingStripeCustomerAndPaymentMethods",description:"Sets boolean regarding whether we are currently loading Stripe, i.e. getting a new Stripe library initializing promise and a new Setup Intent Client Secret"};const G=(0,t.Ay)("Sets Active Payment Method Id");G.meta={name:"createAction",key:"createActionsetActivePaymentMethodId",description:"Sets Active Payment Method Id"};const H=(0,t.Ay)("Sets Active Stripe Customer Id");H.meta={name:"createAction",key:"createActionsetActiveStripeCustomerId",description:"Sets Active Stripe Customer Id"};const U=(0,t.Ay)("Sets Active Stripe Customer Payment Method Types for UPE");U.meta={name:"createAction",key:"createActionsetPaymentMethodTypes",description:"Sets Active Stripe Customer Payment Method Types for UPE"};const F=(0,t.Ay)("Sets Payment Methods");F.meta={name:"createAction",key:"createActionsetPaymentMethods",description:"Sets Payment Methods"};const Y=(0,t.Ay)("Sets the PaymentElementError, i.e. the error message");Y.meta={name:"createAction",key:"createActionsetPaymentElementError",description:"Sets the PaymentElementError, i.e. the error message"};const Z=(0,t.Ay)("Stripe UPE credit card form is complete");Z.meta={name:"createAction",key:"createActionsetIsStripeUpeComplete",description:"Stripe UPE credit card form is complete"};const ee=(0,t.Ay)("Stripe UPE credit card form has interactiono");ee.meta={name:"createAction",key:"createActionsetHasUPEInteraction",description:"Stripe UPE credit card form has interactiono"};const j=(0,t.Ay)("Is address form collapsed and not editable");j.meta={name:"createAction",key:"createActionsetIsAddressFormCollapsed",description:"Is address form collapsed and not editable"};const ge=(0,t.Ay)("Select or deselect an addon by type");ge.meta={name:"createAction",key:"createActiontoggleSelectedAddon",description:"Select or deselect an addon by type"};const ne=(0,t.Ay)("Select or deselect an addon by type");ne.meta={name:"createAction",key:"createActionsetAddonsForPurchase",description:"Select or deselect an addon by type"}},6460545324:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>a,bE:()=>o,eM:()=>i,gW:()=>l,x:()=>n,xj:()=>s});const t={form:"form",review:"review",success:"success",addons:"addons",addon_success:"addon_success",trial_review:"trial_review",trial_success:"trial_success"},n={overview:"overview",address:"address",payment:"payment",review:"review"},s=200,i={educational:"educational",local:{brazil:"local_discount_real",india:"local_discount_rupee"},nonprofit:"nonprofit",tenured_teams:"tenured_teams_discount",wfh_bundle:"wfhbundle",atlassian_2020:"atlassian_2020",smart_discount:"smart_discount",paid_acquisition_self_serve:"paid_acquisition_self_serve",price_increase_churn_prevention:"price_increase_churn_prevention",sfdc_customer_coupon_2022:"sfdc_customer_coupon_2022",slack_grb_campaign_coupon_2022:"slack_grb_campaign_coupon_2022",straight_to_paid:"straight_to_paid",self_serve_affiliates:"self_serve_affiliates",milestone_tenured_team_promo:"milestone_tenured_team_promo",winback_promo:"winback_promo",pricing_and_packaging_promo:"pricing_and_packaging_promo"},l="partner_growth",o={TEAM_INELIGIBLE:"team_ineligible",CODE_ALREADY_REDEEMED:"code_already_redeemed"},a=t},3559164431:(x,A,e)=>{"use strict";e.d(A,{$3:()=>y,BD:()=>Ne,Bj:()=>be,Bo:()=>d,Cb:()=>oe,D5:()=>j,E$:()=>p,EX:()=>q,Ex:()=>G,GG:()=>ke,Hg:()=>ce,IK:()=>Ue,J5:()=>v,Ju:()=>Ce,M:()=>m,MA:()=>D,Oe:()=>k,S_:()=>a,U$:()=>h,VE:()=>B,VV:()=>_,Vs:()=>V,WP:()=>ee,Wq:()=>r,X:()=>ne,YW:()=>f,Yv:()=>o,Zl:()=>g,Zn:()=>U,bB:()=>E,bW:()=>le,bm:()=>Ee,c9:()=>se,cR:()=>ge,ch:()=>$,d2:()=>Y,fD:()=>Ye,fx:()=>pe,gr:()=>C,h0:()=>ue,hy:()=>Se,iD:()=>W,k7:()=>I,kr:()=>xe,lK:()=>Q,oi:()=>b,oy:()=>S,p:()=>fe,qR:()=>Le,qn:()=>P,r2:()=>Me,r8:()=>H,rn:()=>F,t5:()=>K,tG:()=>u,vO:()=>re,wz:()=>M,y4:()=>He,zj:()=>O});var t=e(8161242485),n=e(5597672932),s=e(9113979368),i=e(6323355797),l=e(2689960678);const o=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.companyAddress||!J.checkoutFlow.companyAddress.validationErrors?!1:Object.values(J.checkoutFlow.companyAddress.validationErrors).some(ae=>ae));o.meta={name:"createSelector",key:"createSelectorhasAddressFormErrors",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.companyAddress||!J.checkoutFlow.companyAddress.validationErrors?!1:Object.values(J.checkoutFlow.companyAddress.validationErrors).some(ae=>ae)};const a=(0,t.Ay)(J=>{var ae;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.activeStripeCustomerId)||null});a.meta={name:"createSelector",key:"createSelectorgetActiveCustomerId",description:J=>{var ae;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.activeStripeCustomerId)||null}};const r=(0,t.Ay)(J=>{var ae;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.isFetchingCurrencyAfterCountryChange)||!1});r.meta={name:"createSelector",key:"createSelectorgetIsFetchingCurrencyAfterCountryChange",description:J=>{var ae;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.isFetchingCurrencyAfterCountryChange)||!1}};const d=(0,t.Ay)(J=>{var ae,Ve;return!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.activeStripeCustomerId)||!(!(J==null||(Ve=J.checkoutFlow)===null||Ve===void 0)&&Ve.activePaymentMethodIdMap)?null:J.checkoutFlow.activePaymentMethodIdMap[J.checkoutFlow.activeStripeCustomerId]});d.meta={name:"createSelector",key:"createSelectorgetActivePaymentMethodId",description:J=>{var ae,Ve;return!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.activeStripeCustomerId)||!(!(J==null||(Ve=J.checkoutFlow)===null||Ve===void 0)&&Ve.activePaymentMethodIdMap)?null:J.checkoutFlow.activePaymentMethodIdMap[J.checkoutFlow.activeStripeCustomerId]}};const u=(0,t.Ay)(J=>{var ae;return!J||!J.checkoutFlow?null:(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.activePaymentMethodIdMap});u.meta={name:"createSelector",key:"createSelectorgetActivePaymentMethodIdMap",description:J=>{var ae;return!J||!J.checkoutFlow?null:(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.activePaymentMethodIdMap}};const _=(0,t.Ay)(J=>{var ae;return!J||!J.checkoutFlow?null:(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.paymentMethodTypes});_.meta={name:"createSelector",key:"createSelectorgetPaymentMethodTypes",description:J=>{var ae;return!J||!J.checkoutFlow?null:(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.paymentMethodTypes}};const v=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.paymentMethods);v.meta={name:"createSelector",key:"createSelectorgetPaymentMethods",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.paymentMethods};const h=(0,t.Ay)(J=>{const ae=d(J);if(!ae||(0,s.A)(ae))return null;const Ve=v(J);return!ae||!Array.isArray(Ve)?null:Ve.find(Be=>Be.id===ae)});h.meta={name:"createSelector",key:"createSelectorgetActivePaymentMethod",description:J=>{const ae=d(J);if(!ae||(0,s.A)(ae))return null;const Ve=v(J);return!ae||!Array.isArray(Ve)?null:Ve.find(Be=>Be.id===ae)}};const f=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.companyAddress?null:J.checkoutFlow.companyAddress);f.meta={name:"createSelector",key:"createSelectorgetCompanyAddress",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.companyAddress?null:J.checkoutFlow.companyAddress};const I=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isAddressFormCollapsed)});I.meta={name:"createSelector",key:"createSelectorgetIsAddressFormCollapsed",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isAddressFormCollapsed)}};const p=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isPaymentMethodSectionDisplayed)});p.meta={name:"createSelector",key:"createSelectorgetIsPaymentMethodSectionDisplayed",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isPaymentMethodSectionDisplayed)}};const y=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.isLoadingStripeCustomerAndPaymentMethods?null:J.checkoutFlow.isLoadingStripeCustomerAndPaymentMethods);y.meta={name:"createSelector",key:"createSelectorgetIsLoadingStripeCustomerAndPaymentMethods",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.isLoadingStripeCustomerAndPaymentMethods?null:J.checkoutFlow.isLoadingStripeCustomerAndPaymentMethods};const g=(0,t.Ay)(J=>{var ae,Ve;return!(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.config)===null||Ve===void 0)&&Ve.countryMap?J.checkoutFlow.config.countryMap:null});g.meta={name:"createSelector",key:"createSelectorgetCountryMap",description:J=>{var ae,Ve;return!(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.config)===null||Ve===void 0)&&Ve.countryMap?J.checkoutFlow.config.countryMap:null}};const E=(0,t.Ay)(J=>{var ae;return J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.paymentElementError});E.meta={name:"createSelector",key:"createSelectorgetPaymentElementError",description:J=>{var ae;return J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.paymentElementError}};const M=(0,t.Ay)(J=>{const ae=f(J);return ae?ae.country:null});M.meta={name:"createSelector",key:"createSelectorgetCompanyAddressCountry",description:J=>{const ae=f(J);return ae?ae.country:null}};const T=(0,t.Ay)(J=>{const ae=f(J);return!ae||!ae.validationErrors||!ae.validationErrors.country?null:ae.validationErrors.country.errorText});T.meta={name:"createSelector",key:"createSelectorgetCompanyAddressCountryError",description:J=>{const ae=f(J);return!ae||!ae.validationErrors||!ae.validationErrors.country?null:ae.validationErrors.country.errorText}};const D=(0,t.Ay)(J=>{var ae,Ve,Be;return(ae=f(J))===null||ae===void 0||(Ve=ae.validationErrors)===null||Ve===void 0||(Be=Ve.vatId)===null||Be===void 0?void 0:Be.errorText});D.meta={name:"createSelector",key:"createSelectorgetCompanyAddressVatIdError",description:J=>{var ae,Ve,Be;return(ae=f(J))===null||ae===void 0||(Ve=ae.validationErrors)===null||Ve===void 0||(Be=Ve.vatId)===null||Be===void 0?void 0:Be.errorText}};const C=(0,t.Ay)(J=>{const ae=f(J);return ae?ae.postalCode:null});C.meta={name:"createSelector",key:"createSelectorgetCompanyAddressPostalCode",description:J=>{const ae=f(J);return ae?ae.postalCode:null}};const m=(0,t.Ay)(J=>{const ae=f(J);return ae?ae.region:null});m.meta={name:"createSelector",key:"createSelectorgetCompanyAddressRegion",description:J=>{const ae=f(J);return ae?ae.region:null}};const O=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.config?null:J.checkoutFlow.config);O.meta={name:"createSelector",key:"createSelectorgetConfig",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.config?null:J.checkoutFlow.config};const P=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration?null:J.checkoutFlow.checkoutConfiguration);P.meta={name:"createSelector",key:"createSelectorgetCheckoutPreConfig",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration?null:J.checkoutFlow.checkoutConfiguration};const R=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.currentTerm?null:J.checkoutFlow.checkoutConfiguration.currentTerm===i.ck.yearly);R.meta={name:"createSelector",key:"createSelectorgetCheckoutPreConfigTermIsYearly",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.currentTerm?null:J.checkoutFlow.checkoutConfiguration.currentTerm===i.ck.yearly};const L=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.currentPlanLevel?null:J.checkoutFlow.checkoutConfiguration.currentPlanLevel);L.meta={name:"createSelector",key:"createSelectorgetCheckoutPreConfigPlanLevel",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.currentPlanLevel?null:J.checkoutFlow.checkoutConfiguration.currentPlanLevel};const V=(0,t.Ay)(J=>{var ae,Ve;return(Ve=J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.isCheckoutConfigurationDataLoaded)!==null&&Ve!==void 0?Ve:!1});V.meta={name:"createSelector",key:"createSelectorisCheckoutPreConfigLoaded",description:J=>{var ae,Ve;return(Ve=J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.isCheckoutConfigurationDataLoaded)!==null&&Ve!==void 0?Ve:!1}};const B=(0,t.Ay)(J=>{var ae,Ve;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0)&&Ve.isFutureSwitch)});B.meta={name:"createSelector",key:"createSelectorselectIsFutureProductSwitch",description:J=>{var ae,Ve;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0)&&Ve.isFutureSwitch)}};const K=(0,t.Ay)(J=>{var ae,Ve;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0?void 0:Ve.availableTerms)||null});K.meta={name:"createSelector",key:"createSelectorselectAvailableTerms",description:J=>{var ae,Ve;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0?void 0:Ve.availableTerms)||null}};const b=(0,t.Ay)(J=>{var ae,Ve;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0?void 0:Ve.upeSelectedAvailableTerms)||null});b.meta={name:"createSelector",key:"createSelectorgetUpeSelectedAvailableTerms",description:J=>{var ae,Ve;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0?void 0:Ve.upeSelectedAvailableTerms)||null}};const S=(0,t.Ay)(J=>{var ae,Ve;return J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0?void 0:Ve.redirectUrl});S.meta={name:"createSelector",key:"createSelectorselectRedirectUrl",description:J=>{var ae,Ve;return J==null||(ae=J.checkoutFlow)===null||ae===void 0||(Ve=ae.checkoutConfiguration)===null||Ve===void 0?void 0:Ve.redirectUrl}};const G=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isCheckoutAddressFormDataLoaded)});G.meta={name:"createSelector",key:"createSelectorisCheckoutAddressFormDataLoaded",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isCheckoutAddressFormDataLoaded)}};const H=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isCountryFromAutoDetect)});H.meta={name:"createSelector",key:"createSelectorgetIsCountryFromAutoDetect",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isCountryFromAutoDetect)}};const U=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isCheckoutCreditCardFormLoaded)});U.meta={name:"createSelector",key:"createSelectorgetIsCheckoutCreditCardFormLoaded",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isCheckoutCreditCardFormLoaded)}};const F=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isStripeUpeComplete)});F.meta={name:"createSelector",key:"createSelectorgetIsStripeUpeComplete",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.isStripeUpeComplete)}};const Y=(0,t.Ay)(J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.hasUPEInteraction)});Y.meta={name:"createSelector",key:"createSelectorgetHasUPEInteraction",description:J=>{var ae;return!!(!(J==null||(ae=J.checkoutFlow)===null||ae===void 0)&&ae.hasUPEInteraction)}};const Z=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.paymentStatus);Z.meta={name:"createSelector",key:"createSelectorgetPaymentStatus",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.paymentStatus};const ee=(0,t.Ay)(J=>{const ae=Z(J);return ae?ae.ok===!0&&!ae.error&&!ae.isActionRequiredOnPurchaseAttempt:!1});ee.meta={name:"createSelector",key:"createSelectordidUpgradeSucceed",description:J=>{const ae=Z(J);return ae?ae.ok===!0&&!ae.error&&!ae.isActionRequiredOnPurchaseAttempt:!1}};const j=(0,t.Ay)(J=>{const ae=Z(J);return ae?ae.error&&ae.msg?ae.msg:ae.error:""});j.meta={name:"createSelector",key:"createSelectorgetUpgradeError",description:J=>{const ae=Z(J);return ae?ae.error&&ae.msg?ae.msg:ae.error:""}};const ge=(0,t.Ay)(J=>{const ae=Z(J);return!!(ae!=null&&ae.isProcessingPayment)});ge.meta={name:"createSelector",key:"createSelectorselectIsProcessingPayment",description:J=>{const ae=Z(J);return!!(ae!=null&&ae.isProcessingPayment)}};const ne=(0,t.Ay)(J=>{const ae=O(J);return ae?ae.stripeApiKey:null});ne.meta={name:"createSelector",key:"createSelectorselectStripeApiKey",description:J=>{const ae=O(J);return ae?ae.stripeApiKey:null}};const ue=(0,t.Ay)(J=>{const ae=O(J);return ae?ae.sourcesPayable:null});ue.meta={name:"createSelector",key:"createSelectorselectSourcesPayable",description:J=>{const ae=O(J);return ae?ae.sourcesPayable:null}};const he=(0,t.Ay)((J,ae)=>{if(ae===null)return{};const Ve=ue(J);if(!Ve)return{};const Be=Object.values(Ve).find(Ke=>Ke.id===ae);return Be||{}});he.meta={name:"createSelector",key:"createSelectorselectSourcePayableById",description:(J,ae)=>{if(ae===null)return{};const Ve=ue(J);if(!Ve)return{};const Be=Object.values(Ve).find(Ke=>Ke.id===ae);return Be||{}}};const be=(0,t.Ay)(J=>{const ae=O(J);return!ae||!ae.user?!1:ae.user.is_owner});be.meta={name:"createSelector",key:"createSelectorselectIsSelfUserOwner",description:J=>{const ae=O(J);return!ae||!ae.user?!1:ae.user.is_owner}};const xe=(0,t.Ay)(J=>{const ae=O(J);return!ae||!ae.user||!J||!J.checkoutFlow});xe.meta={name:"createSelector",key:"createSelectorgetIsInvoiceFormLoading",description:J=>{const ae=O(J);return!ae||!ae.user||!J||!J.checkoutFlow}};const Le=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.invoiceData);Le.meta={name:"createSelector",key:"createSelectorgetInvoiceData",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.invoiceData};const fe=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.paymentMethodSelected);fe.meta={name:"createSelector",key:"createSelectorselectPaymentMethodSelected",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.paymentMethodSelected};const se=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.isAppDisconnectedDialogShown);se.meta={name:"createSelector",key:"createSelectorselectIsAppDisconnectedDialogShown",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.isAppDisconnectedDialogShown};const Q=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.activeCheckoutStep);Q.meta={name:"createSelector",key:"createSelectorselectActiveCheckoutStep",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.activeCheckoutStep};const k=(0,t.Ay)(J=>{var ae;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.activeSteppedCheckoutStep)||null});k.meta={name:"createSelector",key:"createSelectorselectActiveSteppedCheckoutStep",description:J=>{var ae;return(J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.activeSteppedCheckoutStep)||null}};const N=(0,t.Ay)(J=>{var ae;return J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.promoCodeRedeem});N.meta={name:"createSelector",key:"createSelectorselectPromoCodeRedeem",description:J=>{var ae;return J==null||(ae=J.checkoutFlow)===null||ae===void 0?void 0:ae.promoCodeRedeem}};const $=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.failed)||!1});$.meta={name:"createSelector",key:"createSelectorselectDidPromoCodeRedeemFail",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.failed)||!1}};const W=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.errorName)||""});W.meta={name:"createSelector",key:"createSelectorselectPromoCodeRedeemErrorName",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.errorName)||""}};const q=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.discountName)||""});q.meta={name:"createSelector",key:"createSelectorselectPromoCodeRedeemFailedDiscountName",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.discountName)||""}};const re=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.discountPercentage)||0});re.meta={name:"createSelector",key:"createSelectorselectPromoCodeRedeemFailedDiscountPercentage",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.discountPercentage)||0}};const le=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.discountDuration)||0});le.meta={name:"createSelector",key:"createSelectorselectPromoCodeRedeemFailedDiscountDuration",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.discountDuration)||0}};const Ae=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.attempted)||!1});Ae.meta={name:"createSelector",key:"createSelectorselectDidAttemptPromoCodeRedeem",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.attempted)||!1}};const Te=(0,t.Ay)(J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.code)||null});Te.meta={name:"createSelector",key:"createSelectorselectPromoCode",description:J=>{var ae;return((ae=N(J))===null||ae===void 0?void 0:ae.code)||null}};const Ne=(0,t.Ay)(J=>!J||!J.checkoutFlow?null:J.checkoutFlow.isCheckoutFlowAPIError);Ne.meta={name:"createSelector",key:"createSelectorselectIsCheckoutFlowAPIError",description:J=>!J||!J.checkoutFlow?null:J.checkoutFlow.isCheckoutFlowAPIError};const pe=(0,t.Ay)(J=>{const ae=Z(J);return!!(ae!=null&&ae.isActionRequiredOnPurchaseAttempt)});pe.meta={name:"createSelector",key:"createSelectorselectIsActionRequiredOnPurchaseAttempt",description:J=>{const ae=Z(J);return!!(ae!=null&&ae.isActionRequiredOnPurchaseAttempt)}};const Ee=(0,t.Ay)(J=>{const ae=Z(J);return ae&&ae.intentSecret||""});Ee.meta={name:"createSelector",key:"createSelectorselectIntentSecret",description:J=>{const ae=Z(J);return ae&&ae.intentSecret||""}};const oe=(0,t.Ay)(J=>{const ae=Z(J);return ae&&ae.billingItemId||""});oe.meta={name:"createSelector",key:"createSelectorselectBillingItemId",description:J=>{const ae=Z(J);return ae&&ae.billingItemId||""}};const ce=(0,t.Ay)(J=>(0,n.xp)(J,"self_serve_select"));ce.meta={name:"createSelector",key:"createSelectorselectCanViewEnterpriseSelect",description:J=>(0,n.xp)(J,"self_serve_select")};const ke=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.addons?null:J.checkoutFlow.checkoutConfiguration.addons[0].id);ke.meta={name:"createSelector",key:"createSelectorselectAddonId",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.addons?null:J.checkoutFlow.checkoutConfiguration.addons[0].id};const Ce=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration?!1:J.checkoutFlow.checkoutConfiguration.isPayingByInvoice);Ce.meta={name:"createSelector",key:"createSelectorselectIsPayingByInvoice",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration?!1:J.checkoutFlow.checkoutConfiguration.isPayingByInvoice};const Me=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.addons?null:J.checkoutFlow.checkoutConfiguration.addons.map(ae=>ae.id));Me.meta={name:"createSelector",key:"createSelectorselectArrayOfAddonIds",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.addons?null:J.checkoutFlow.checkoutConfiguration.addons.map(ae=>ae.id)};const Se=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.addons?null:J.checkoutFlow.checkoutConfiguration.addons[0].type);Se.meta={name:"createSelector",key:"createSelectorselectAddonType",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.addons?null:J.checkoutFlow.checkoutConfiguration.addons[0].type};const Ue=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.selectedAddonTypes?l.Ml:J.checkoutFlow.selectedAddonTypes);Ue.meta={name:"createSelector",key:"createSelectorselectAddonsForPurchase",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.selectedAddonTypes?l.Ml:J.checkoutFlow.selectedAddonTypes};const He=(0,t.Ay)(J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.nextPossibleBillingDate?null:J.checkoutFlow.checkoutConfiguration.nextPossibleBillingDate);He.meta={name:"createSelector",key:"createSelectorselectAddonBillingDate",description:J=>!J||!J.checkoutFlow||!J.checkoutFlow.checkoutConfiguration||!J.checkoutFlow.checkoutConfiguration.nextPossibleBillingDate?null:J.checkoutFlow.checkoutConfiguration.nextPossibleBillingDate};const Ye=(0,t.Ay)(J=>{var ae;return!J||!J.checkoutFlow?null:(ae=J.checkoutFlow.checkoutConfiguration)===null||ae===void 0?void 0:ae.isEligibleForDataDeletion});Ye.meta={name:"createSelector",key:"createSelectorselectIsEligibleForDataDeletion",description:J=>{var ae;return!J||!J.checkoutFlow?null:(ae=J.checkoutFlow.checkoutConfiguration)===null||ae===void 0?void 0:ae.isEligibleForDataDeletion}}},8368515877:(x,A,e)=>{"use strict";e.d(A,{l:()=>g});var t=e(9706240641),n=e(6304789565),s=e(3048437087),i=e(1649982175),l=e(9113979368),o=e(2927826522),a=e(6422693406),r=e(165535451),d=e(7520484642);const u=(0,n.Ay)("fetches all available pricing plans for the team.",(E,M,T)=>new a.S(D=>{E((0,r.iV)(T)).then(C=>{E((0,d.wt)(C)),D()})}));u.meta={name:"createThunk",key:"createThunkfetchPlansData",description:"fetches all available pricing plans for the team."};const _=u;var v=e(6460545324),h=e(4711657482),f=e(6323355797);const I=c(E=>{var M,T;const D=((M=E.product)===null||M===void 0?void 0:M.level)===E.current_product.level,C=((T=E.product)===null||T===void 0?void 0:T.term)===E.current_product.term,m=E.selected_payment_method===f.uq.CREDIT_CARD;return D&&C&&m?[f.uq.CREDIT_CARD]:E.allowed_payment_methods},"filterAllowedPaymentMethods"),p=c(E=>{var M,T;const D=((M=E.product)===null||M===void 0?void 0:M.level)===E.current_product.level,C=((T=E.product)===null||T===void 0?void 0:T.term)===E.current_product.term;return E.selected_payment_method===f.uq.INVOICE&&D?C?[f.ck.monthly]:[f.ck.yearly]:E.available_terms},"getUpeSelectedAvailableTerms"),y=(0,n.Ay)("Load configuration data for checkout",function(){var E=(0,t.coroutine)(function*(M,T,D){let{checkoutConfigData:C}=D,m=(0,i.A)(C,["clientRequestId","requestId","args","method","ok"]);const O=!(0,l.A)(m);if(O){var P,R,L,V,B;m=Object.assign(m,{planLevel:(P=m.product)===null||P===void 0?void 0:P.level,term:(R=m.product)===null||R===void 0?void 0:R.term,isTrial:(L=m.product)===null||L===void 0?void 0:L.is_trial,isPayingByInvoice:m.current_product.is_invoice,currency:(V=m.product)===null||V===void 0?void 0:V.currency,productId:(B=m.product)===null||B===void 0?void 0:B.id,currentPlanLevel:m.current_product.level,currentTerm:m.current_product.term,currentIsTrial:m.current_product.is_trial,currentCurrency:m.current_product.currency,currentProductId:m.current_product.id,allowedPaymentMethods:I(m),upeSelectedAvailableTerms:p(m),isEligibleForDataDeletion:m.is_eligible_for_data_deletion}),delete m.product,delete m.current_product}m=(0,o.A)(m),M((0,h.yK)(m)),O&&(M((0,h.Kv)(m)),yield M(_({checkout_step:v.Ay.form})))});return function(M,T,D){return E.apply(this,arguments)}}());y.meta={name:"createThunk",key:"createThunkloadCheckoutConfigurationData",description:"Load configuration data for checkout"};const g=(0,n.Ay)("Fetch configuration data for checkout",function(){var E=(0,t.coroutine)(function*(M,T,D){let{productId:C=null}=D;const m="fetchConfigurationData",O=yield M((0,s.n)(C?{productId:C,reason:m}:{reason:m}));yield M(y({checkoutConfigData:O}))});return function(M,T,D){return E.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkfetchConfigurationData",description:"Fetch configuration data for checkout"}},2222994823:(x,A,e)=>{"use strict";e.d(A,{I:()=>o});var t=e(2774532222),n=e(6323355797),s=e(4252064756),i=e(8234448831);const l=c(r=>{const d=(0,i.Ay)(r),u=d&&d.pathname;return(0,s.D)(d)&&(0,t.A)(u,(0,n.hZ)())},"isPlansAppUrl"),o=c(r=>r&&!l(r),"shouldCheckoutRedirect"),a={isPlansAppUrl:l}},4653418008:(x,A,e)=>{"use strict";e.d(A,{LA:()=>i,Th:()=>l,kl:()=>s,yg:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set the current theme field in redux (do not use this)");n.meta={name:"createAction",key:"createActionsetClientThemeInternal",description:"Set the current theme field in redux (do not use this)"};const s=(0,t.Ay)("Set the OS system sync field in redux (do not use this)");s.meta={name:"createAction",key:"createActionsetSystemSyncInternal",description:"Set the OS system sync field in redux (do not use this)"};const i=(0,t.Ay)("Set the OS system theme field in redux (do not use this)");i.meta={name:"createAction",key:"createActionsetSystemTheme",description:"Set the OS system theme field in redux (do not use this)"};const l=(0,t.Ay)("Set the client typeface");l.meta={name:"createAction",key:"createActionsetClientTypeface",description:"Set the client typeface"}},5922222922:(x,A,e)=>{"use strict";e.d(A,{C3:()=>s,k4:()=>t,u7:()=>n});const t="slack-client-theme",n="slack-client-theme-os-sync",s="client-typeface"},5923036663:(x,A,e)=>{"use strict";e.d(A,{A:()=>M});var t=e(1703559452),n=e(796111729),s=e(4096483543),i=e(958961878),l=e(3245843483),o=e(9139930183),a=e(6533394955),r=e(5922222922),d=e(4653418008),u=e(3328068409),_=e(767804497),v=e(7439773700),h=e(9012396182),f=e(9733150292);let I="light",p=!1,y="light",g;try{g=(0,f.W6)(r.C3)||void 0}catch{}try{i.w2&&(0,s.A)()&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(T=>{const D=T.matches?"dark":"light";y=D,p&&(I=y);const C=(0,a.getClientStoreInstance)();if(C){const m=C.getState(),O=(0,h.getBootedWorkspaces)(m),P=(0,t.A)(O.map(R=>(0,i.Ay)((0,a.getStateByTeamId)(R))));C.dispatch((0,d.LA)(D)),P&&(0,u.FW)(m)&&C.dispatch((0,_.P)(D))}})}catch(T){(0,n.Wo)().warn("CLIENT-THEME-STORE","window.matchMedia hook failed; system theme will not be updated.",T)}try{const T=window.localStorage.getItem(r.k4),D=window.localStorage.getItem(r.u7);I=T||"light",i.w2&&(D?p=D==="true":p=!T,window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(y="dark"),p&&(I=y)),(0,l.g9M)()&&((0,l.cGU)({name:"userTheme",value:I}),(0,l.cGU)({name:"systemThemeSyncEnabled",value:p}))}catch(T){(0,n.Wo)().warn("CLIENT-THEME-STORE","localStorage read failed; client theme will not be persisted.",T)}const M=(0,o.Ay)({},{clientTheme:I,systemSync:p,systemTheme:y,clientTypeface:g},{storeKey:"clientTheme",persistenceEnabled:!1}).on(d.yg,function(T){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...T,clientTheme:D}}).on(d.kl,function(T){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...T,systemSync:D}}).on(d.LA,function(T){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...T,systemTheme:D}}).on(d.Th,function(T){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(0,v.kh)();return{...T,clientTypeface:D}})},767804497:(x,A,e)=>{"use strict";e.d(A,{P:()=>o});var t=e(796111729),n=e(3245843483),s=e(6304789565),i=e(5922222922),l=e(4653418008);const o=(0,s.Ay)("Set the current theme for the device",function(a,r){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"light";try{window.localStorage.setItem(i.k4,d)}catch{(0,t.Wo)().warn("CLIENT-THEME-STORE","localStorage write failed; client theme will not be persisted.")}a((0,l.yg)(d)),(0,n.cGU)({name:"userTheme",value:d})});o.meta={name:"createThunk",key:"createThunksetClientTheme",description:"Set the current theme for the device"}},5670953896:(x,A,e)=>{"use strict";e.d(A,{$_:()=>I,Ci:()=>l,Dn:()=>i,F8:()=>u,MJ:()=>h,N2:()=>r,RX:()=>a,Xc:()=>f,ij:()=>s,pq:()=>_,qE:()=>o,rj:()=>v,sR:()=>n,vN:()=>d});var t=e(2140362605);const n=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound connect invites");n.meta={name:"createAction",key:"createActionresetConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound connect invites"};const s=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound pending connect invites");s.meta={name:"createAction",key:"createActionresetPendingConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound pending connect invites"};const i=(0,t.Ay)("Upserts a Slack Connect Invite");i.meta={name:"createAction",key:"createActionupsertConnectInvite",description:"Upserts a Slack Connect Invite"};const l=(0,t.Ay)("Upserts a pending Slack Connect Invite");l.meta={name:"createAction",key:"createActionupsertPendingConnectInvite",description:"Upserts a pending Slack Connect Invite"};const o=(0,t.Ay)("Removes a Slack Connect Invite");o.meta={name:"createAction",key:"createActionremoveConnectInvite",description:"Removes a Slack Connect Invite"};const a=(0,t.Ay)("Removes a pending Slack Connect Invite");a.meta={name:"createAction",key:"createActionremovePendingConnectInvite",description:"Removes a pending Slack Connect Invite"};const r=(0,t.Ay)("Sets freshness flag for Slack Connect invites");r.meta={name:"createAction",key:"createActionsetAreInvitesFresh",description:"Sets freshness flag for Slack Connect invites"};const d=(0,t.Ay)("Sets whether logged-in member's email has been verified for Slack Connect visibility purposes");d.meta={name:"createAction",key:"createActionsetIsEmailVerified",description:"Sets whether logged-in member's email has been verified for Slack Connect visibility purposes"};const u=(0,t.Ay)("Sets whether logged-in member's email verification has failed");u.meta={name:"createAction",key:"createActionsetIsUserVerificationFetchError",description:"Sets whether logged-in member's email verification has failed"};const _=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect channel invite");_.meta={name:"createAction",key:"createActionupsertChannelConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect channel invite"};const v=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect DM invite");v.meta={name:"createAction",key:"createActionupsertDmConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect DM invite"};const h=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect space invite");h.meta={name:"createAction",key:"createActionupsertSpaceConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect space invite"};const f=(0,t.Ay)("Upserts whether an acceptance attempt has failed for a specific Slack Connect invite");f.meta={name:"createAction",key:"createActionupsertHasConnectInviteAcceptanceFailed",description:"Upserts whether an acceptance attempt has failed for a specific Slack Connect invite"};const I=(0,t.Ay)("Sets whether we are currently switching workspaces");I.meta={name:"createAction",key:"createActionsetIsSwitchingWorkspaces",description:"Sets whether we are currently switching workspaces"}},1496122061:(x,A,e)=>{"use strict";e.d(A,{d:()=>u});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(320199792),l=e(5914498199),o=e(5670953896),a=e(1605540670),r=e(3243667193),d=e(2368561198);const u=(0,s.Ay)("Fetch and reset the result of connectInvites.list with only pending invites for inbound/outbound invites",function(){var _=(0,t.coroutine)(function*(v,h,f){let{reason:I}=f,p;const y=[r.k.Channel,r.k.Im];(0,d.i)(h())&&y.push(r.k.Workspace);const E=yield v((0,a.O)({reason:I,inviteTypes:y,onlyPendingInvites:!0}));if(E!=null&&E.connect_invites){p=E.connect_invites;const M=p.filter(i.Ef),T=p.filter(i.I4);v((0,l.R)({connectInvites:p})),v((0,o.ij)({pendingInboundConnectInvites:M,pendingOutboundConnectInvites:T}))}return p||[]});return function(v,h,f){return _.apply(this,arguments)}}());u.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingConnectInvites",description:"Fetch and reset the result of connectInvites.list with only pending invites for inbound/outbound invites"}},6111266013:(x,A,e)=>{"use strict";e.d(A,{p:()=>u});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(3622175906),l=e(1605540670),o=e(5914498199),a=e(5670953896),r=e(3243667193),d=e(2368561198);const u=(0,s.Ay)("Fetch and upsert the result of connectInvites.list for inbound/outbound invites",function(){var _=(0,t.coroutine)(function*(v,h,f){let{reason:I,direction:p,includeInviteRequests:y}=f,g;const E=[r.k.Channel,r.k.Im];(0,d.i)(h())&&E.push(r.k.Workspace);const T=yield v((0,l.O)({reason:I,direction:p,inviteTypes:E,includeInviteRequests:y}));if(T!=null&&T.connect_invites){g=T.connect_invites,v((0,o.R)({connectInvites:g}));const D={inboundConnectInvites:p===i.D.Incoming?g:void 0,outboundConnectInvites:p===i.D.Outgoing?g:void 0};v((0,a.sR)(D))}return g||[]});return function(v,h,f){return _.apply(this,arguments)}}());u.meta={name:"createThunk",key:"createThunkfetchAndResetConnectInvites",description:"Fetch and upsert the result of connectInvites.list for inbound/outbound invites"}},5914498199:(x,A,e)=>{"use strict";e.d(A,{R:()=>o});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(7679955939),l=e(320199792);const o=(0,s.Ay)("Upsert any non-local members referenced in the specified connect invites",function(){var a=(0,t.coroutine)(function*(r,d,u){let{connectInvites:_}=u;const v=[];_.forEach(h=>{const f=(0,l.$N)(h);if((0,l.I4)(h)&&f&&f.forEach(I=>{v.push((0,l.mZ)(I))}),(0,l.Ef)(h)){v.push((0,l.y1)(h));const I=(0,l.kR)(h);I&&v.push(I)}}),r((0,i.Ay)({members:v}))});return function(r,d,u){return a.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkupsertMembersFromConnectInvites",description:"Upsert any non-local members referenced in the specified connect invites"}},6168781067:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(9139930183),n=e(2456103428);const s={serviceOnline:!0,lastSocketActivity:0,clientOnline:!0,lastClientConnection:Date.now(),lastSocketConnection:0},l=(0,t.Ay)({},s,{storeKey:"connectivity",persistenceEnabled:!1}).on(n.pm,(o,a)=>({...o,serviceOnline:!!a})).on(n.Uj,o=>o===s?{...o,lastSocketActivity:Date.now()}:(o.lastSocketActivity=Date.now(),o)).on(n.p9,(o,a)=>({...o,clientOnline:!!a,lastClientConnection:Date.now()})).on(n.hM,o=>({...o,lastSocketConnection:Date.now()}))},1314103953:(x,A,e)=>{"use strict";e.d(A,{b:()=>s,k:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set a value that represents whether we are currently in the boot phase");n.meta={name:"createAction",key:"createActionsetBootInFlight",description:"Set a value that represents whether we are currently in the boot phase"};const s=(0,t.Ay)("Set a value that represents whether we are currently performing a warm boot");s.meta={name:"createAction",key:"createActionsetWarmBootInFlight",description:"Set a value that represents whether we are currently performing a warm boot"}},9469211187:(x,A,e)=>{"use strict";e.d(A,{d:()=>s,f:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Remove prefs for a given channel");n.meta={name:"createAction",key:"createActionremovePrefsForConversation",description:"Remove prefs for a given channel"};const s=(0,t.Ay)("Set channel prefs associated with a given channel");s.meta={name:"createAction",key:"createActionsetConversationsListPrefs",description:"Set channel prefs associated with a given channel"}},7914670207:(x,A,e)=>{"use strict";e.d(A,{Dq:()=>f,YO:()=>I,im:()=>y});var t=e(9706240641),n=e.n(t),s=e(3398586081),i=e(6639221719),l=e(8352634987),o=e(6422693406),a=e(4423055085),r=e(6304789565),d=e(6533394955),u=e(9469211187),_=e(8081461848);const v=(0,r.Ay)("Fetch and upsert channel list prefs",function(){var E=(0,t.coroutine)(function*(M,T,D){let{channelId:C,teamId:m}=D;const O=yield M((0,i.U)({channel:C,reason:"client_redux_store"})),{prefs:P}=O;M((0,u.d)({channelId:C,prefs:P})),p(m,C)});return function(M,T,D){return E.apply(this,arguments)}}());v.meta={name:"createThunk",key:"createThunkfetchAndUpsertConversationsListPrefs",description:"Fetch and upsert channel list prefs"};const h=(0,s.A)(()=>new l.Ay({storeKey:_.U,fetch:(E,M)=>o.S.map(M,T=>(0,d.dispatchForTeamId)(E,v({channelId:T,teamId:E}))),isEnabled:()=>!0,metricsName:_.U})),f=c((E,M)=>h().markObjectsAsStale(E,[M]),"markConversationsListPrefsAsStale"),I=c((E,M)=>h().markObjectsAsStale(E,M),"markConversationsListPrefsAsStaleForMultipleChannels"),p=c((E,M)=>h().markObjectsAsFresh(E,[M]),"markConversationsListPrefsAsFresh"),y=c((E,M)=>h().maybeRefetch(E,M),"maybeRefetchConversationsListPrefs"),g={fetchAndUpsertConversationsListPrefs:v};(0,a.zv)("conditionalFetchManagerConversationsListPrefs",h)},8081461848:(x,A,e)=>{"use strict";e.d(A,{A:()=>o,U:()=>s});var t=e(9139930183),n=e(9469211187);const s="conversationsListPrefs",i={},o=(0,t.Ay)({},i,{storeKey:s,persistenceEnabled:!0}).on(n.f,(a,r)=>{let{channelId:d}=r;if(!d||!a[d])return a;const u={...a};return delete u[d],u}).on(n.d,(a,r)=>{let{channelId:d,prefs:u}=r;return d?{...a,[d]:u}:a})},2527994834:(x,A,e)=>{"use strict";e.d(A,{Q:()=>o});var t=e(3385422400),n=e(8847766420),s=e(7914670207),i=e(8040098042);const l=c((a,r)=>{var d;const u=(0,n.ZT)(a);if(!u||!(0,i.A)(r))return null;(0,s.im)(u,r);var _;return(_=a==null||(d=a.conversationsListPrefs)===null||d===void 0?void 0:d[r])!==null&&_!==void 0?_:null},"getConversationsListPrefsByChannelId"),o=(0,t.Mz)((a,r,d)=>l(a,d),(a,r)=>r,(a,r)=>a==null?void 0:a[r])},330221449:(x,A,e)=>{"use strict";e.d(A,{Ot:()=>s,S9:()=>l,X8:()=>n,d$:()=>a,d1:()=>r,en:()=>o,gx:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Adds the new set of custom emoji to the existing store");n.meta={name:"createAction",key:"createActionaddCustomEmoji",description:"Adds the new set of custom emoji to the existing store"};const s=(0,t.Ay)("Resets the array of custom emoji in the store");s.meta={name:"createAction",key:"createActionsetNewCustomEmojiData",description:"Resets the array of custom emoji in the store"};const i=(0,t.Ay)("Removes the specified custom emoji from the store");i.meta={name:"createAction",key:"createActionremoveCustomEmoji",description:"Removes the specified custom emoji from the store"};const l=(0,t.Ay)("Renames a disabled custom emoji");l.meta={name:"createAction",key:"createActionrenameCustomEmoji",description:"Renames a disabled custom emoji"};const o=(0,t.Ay)("Set the loading status for the API request when a new page is loading");o.meta={name:"createAction",key:"createActionsetIsLoadingNewPage",description:"Set the loading status for the API request when a new page is loading"};const a=(0,t.Ay)("Set the loading status for the API request when a user searches for emojis");a.meta={name:"createAction",key:"createActionsetIsLoadingNewSearchQuery",description:"Set the loading status for the API request when a user searches for emojis"};const r=(0,t.Ay)("Set the current sort category and direction for the table");r.meta={name:"createAction",key:"createActionsetSort",description:"Set the current sort category and direction for the table"}},1484767411:(x,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Record that a message was deleted");n.meta={name:"createAction",key:"createActionrecordMessageDeleted",description:"Record that a message was deleted"}},6739248722:(x,A,e)=>{"use strict";e.d(A,{k:()=>n});var t=e(8161242485);const n=(0,t.Ay)((s,i)=>{let{channelId:l,ts:o}=i;return s&&s.deletedMessages&&s.deletedMessages[l]&&!!s.deletedMessages[l][o]});n.meta={name:"createSelector",key:"createSelectorwasMessageDeleted",description:(s,i)=>{let{channelId:l,ts:o}=i;return s&&s.deletedMessages&&s.deletedMessages[l]&&!!s.deletedMessages[l][o]}}},1378315125:(x,A,e)=>{"use strict";e.d(A,{$3:()=>r,Bt:()=>o,Ez:()=>s,LS:()=>u,Mk:()=>i,NN:()=>v,XF:()=>l,Y$:()=>h,Yv:()=>n,_F:()=>d,jC:()=>_,n9:()=>f,oR:()=>p,um:()=>I,yz:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Sets the highlight property of a download");n.meta={name:"createAction",key:"createActioninternalSetDownloadHighlight",description:"Sets the highlight property of a download"};const s=(0,t.Ay)("An update of the desktop state from the desktop app");s.meta={name:"createAction",key:"createActionupdateFromDesktop",description:"An update of the desktop state from the desktop app"};const i=(0,t.Ay)("An update of the window frame state");i.meta={name:"createAction",key:"createActionupdateWindowFrameState",description:"An update of the window frame state"};const l=(0,t.Ay)("Starts a download on the desktop app");l.meta={name:"createAction",key:"createActionstartDesktopDownload",description:"Starts a download on the desktop app"};const o=(0,t.Ay)("Pauses a download on the desktop app");o.meta={name:"createAction",key:"createActionpauseDesktopDownload",description:"Pauses a download on the desktop app"};const a=(0,t.Ay)("Resumes a download on the desktop app");a.meta={name:"createAction",key:"createActionresumeDesktopDownload",description:"Resumes a download on the desktop app"};const r=(0,t.Ay)("Cancels a download on the desktop app");r.meta={name:"createAction",key:"createActioncancelDesktopDownload",description:"Cancels a download on the desktop app"};const d=(0,t.Ay)("Clears all stopped downloads for the active team");d.meta={name:"createAction",key:"createActionclearTeamDesktopDownloads",description:"Clears all stopped downloads for the active team"};const u=(0,t.Ay)("Removes a download on the desktop app");u.meta={name:"createAction",key:"createActionremoveDesktopDownload",description:"Removes a download on the desktop app"};const _=(0,t.Ay)("Retries a download on the desktop app");_.meta={name:"createAction",key:"createActionretryDesktopDownload",description:"Retries a download on the desktop app"};const v=(0,t.Ay)("Opens a file downloaded by the desktop app");v.meta={name:"createAction",key:"createActionopenDesktopDownload",description:"Opens a file downloaded by the desktop app"};const h=(0,t.Ay)("Shows the folder that contains the downloaded file");h.meta={name:"createAction",key:"createActionshowDesktopDownload",description:"Shows the folder that contains the downloaded file"};const f=(0,t.Ay)("Toggles the performance monitor");f.meta={name:"createAction",key:"createActiontogglePerformanceMonitor",description:"Toggles the performance monitor"};const I=(0,t.Ay)("Sets the currently active team in the SSB");I.meta={name:"createAction",key:"createActionsetActiveTeam",description:"Sets the currently active team in the SSB"};const p=(0,t.Ay)("Update canvas system text settings in the SSB");p.meta={name:"createAction",key:"createActionsetCanvasSystemTextSettings",description:"Update canvas system text settings in the SSB"}},7902571278:(x,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(9139930183),n=e(4103274853),s=e(3571452446),i=e(2003990933),l=e(7715417323),o=e(3245843483),a=e(1378315125);const r=c((h,f)=>(0,n.A)(h,(I,p)=>(0,n.A)(I,(y,g)=>f(p,g,y))),"mapDownloads"),d=c(h=>({...{app:{},environment:{},settings:{},...(0,s.A)(h,["app","settings","environment"]),windows:(0,n.A)((h==null?void 0:h.windows)||{},I=>({frame:(0,s.A)(I.frame,["isFullScreen","isFocused","isVisible","hasVibrancy","isCurrentlyAudible"])})),downloads:r((h==null?void 0:h.downloads)||{},(I,p,y)=>({...y,highlight:!1})),debug:{isPerformanceMonitorEnabled:!1}},activeTeamId:(0,i.A)(window,"desktop.reduxHelper.state.selectedTeamId")}),"initializeState"),u=(0,o.g9M)()?d((0,i.A)(window,"desktop.redux.getState",l.A)()):null,v=(0,t.Ay)({},u,{storeKey:"desktop",persistenceEnabled:!1}).on(a.Ez,(h,f)=>{const I=f.downloads?r(f.downloads,(p,y,g)=>({...g,highlight:(0,i.A)(h.downloads,[p,y,"highlight"],!1)})):h.downloads;return{...h,...f,downloads:I}}).on(a.Mk,(h,f)=>{let{windowId:I,property:p,value:y}=f;var g,E,M;return{...h,windows:{...h.windows,[I]:{...((g=h.windows)===null||g===void 0?void 0:g[I])||{},frame:{...((E=h.windows)===null||E===void 0||(M=E[I])===null||M===void 0?void 0:M.frame)||{},[p]:y}}}}}).on(a.Yv,(h,f)=>{let{fileId:I,teamId:p,highlight:y}=f;return(0,i.A)(h.downloads,[p,I])?{...h,downloads:{...h.downloads,[p]:{...h.downloads[p],[I]:{...h.downloads[p][I],highlight:y}}}}:h}).on(a.n9,h=>({...h,debug:{...h.debug,isPerformanceMonitorEnabled:!h.debug.isPerformanceMonitorEnabled}})).on(a.um,(h,f)=>f?{...h,activeTeamId:f}:h)},7600673124:(x,A,e)=>{"use strict";e.d(A,{y:()=>n});var t=e(5818203962);const n=c((s,i)=>(0,t.I$)(s,i),"getIsMemberDisconnectedById")},4318855015:(x,A,e)=>{"use strict";e.d(A,{$x:()=>l,H9:()=>n,at:()=>a,j_:()=>d,jy:()=>r,o2:()=>i,qw:()=>s,su:()=>o});var t=e(2140362605);const n=(0,t.Ay)("Mark emoji collections as fetch (or not fetched");n.meta={name:"createAction",key:"createActionsetEmojiCollectionsFetched",description:"Mark emoji collections as fetch (or not fetched"};const s=(0,t.Ay)("Set and replace emoji collections");s.meta={name:"createAction",key:"createActionsetEmojiCollections",description:"Set and replace emoji collections"};const i=(0,t.Ay)("Signals that an emoji collection has been installed");i.meta={name:"createAction",key:"createActioninstallEmojiCollection",description:"Signals that an emoji collection has been installed"};const l=(0,t.Ay)("Signals that an emoji collection has been uninstalled");l.meta={name:"createAction",key:"createActionuninstallEmojiCollection",description:"Signals that an emoji collection has been uninstalled"};const o=(0,t.Ay)("Signals that badges should be added post-install");o.meta={name:"createAction",key:"createActionbadgeEmojiCollection",description:"Signals that badges should be added post-install"};const a=(0,t.Ay)("Signals that the message input badge should be removed");a.meta={name:"createAction",key:"createActionremoveEmojiCollectionInputBadge",description:"Signals that the message input badge should be removed"};const r=(0,t.Ay)("Signals that the message tab badge should be removed from the emoji picker");r.meta={name:"createAction",key:"createActionremoveEmojiCollectionTabBadge",description:"Signals that the message tab badge should be removed from the emoji picker"};const d=(0,t.Ay)("Increments emoji click count");d.meta={name:"createAction",key:"createActionincrementEmojiClickCount",description:"Increments emoji click count"}},3004085654:(x,A,e)=>{"use strict";e.d(A,{Cs:()=>v,Ur:()=>p,_J:()=>y,_o:()=>f,fl:()=>g,nQ:()=>h,pG:()=>I,uI:()=>_});var t=e(2101927269),n=e(9113979368),s=e(2141441167),i=e(2048121586),l=e(6696292586),o=e(8161242485),a=e(3385422400),r=e(2047021170);const d=60*60*24*14,u=(0,o.Ay)((E,M)=>E&&E.emojiCollections&&E.emojiCollections.collections&&E.emojiCollections.collections[M]);u.meta={name:"createSelector",key:"createSelectorgetEmojiCollection",description:(E,M)=>E&&E.emojiCollections&&E.emojiCollections.collections&&E.emojiCollections.collections[M]};const _=(0,o.Ay)(E=>E&&E.emojiCollections&&E.emojiCollections.collections);_.meta={name:"createSelector",key:"createSelectorgetEmojiCollections",description:E=>E&&E.emojiCollections&&E.emojiCollections.collections};const v=(0,a.Mz)(_,E=>(0,t.A)(E,M=>M.installed)),h=(0,o.Ay)(E=>E&&E.emojiCollections&&E.emojiCollections.hasFetched);h.meta={name:"createSelector",key:"createSelectorhasFetchedEmojiCollections",description:E=>E&&E.emojiCollections&&E.emojiCollections.hasFetched};const f=(0,o.Ay)(E=>E&&E.emojiCollections&&E.emojiCollections.inputBadge);f.meta={name:"createSelector",key:"createSelectorgetInputBadge",description:E=>E&&E.emojiCollections&&E.emojiCollections.inputBadge};const I=(0,o.Ay)(E=>E&&E.emojiCollections&&E.emojiCollections.tabBadge);I.meta={name:"createSelector",key:"createSelectorgetTabBadge",description:E=>E&&E.emojiCollections&&E.emojiCollections.tabBadge};const p=(0,o.Ay)(E=>E&&E.emojiCollections&&E.emojiCollections.emojiClickCount);p.meta={name:"createSelector",key:"createSelectorgetEmojiClickCount",description:E=>E&&E.emojiCollections&&E.emojiCollections.emojiClickCount};const y=(0,o.Ay)(E=>{const M=_(E);if((0,n.A)(M))return null;const T=(0,s.A)(M);return(0,i.A)(T,D=>D.date_create)});y.meta={name:"createSelector",key:"createSelectorgetMostRecentPack",description:E=>{const M=_(E);if((0,n.A)(M))return null;const T=(0,s.A)(M);return(0,i.A)(T,D=>D.date_create)}};const g=(0,o.Ay)(E=>{const M=(0,r.ty)(E,"emoji_packs_most_recent_available_time");if(!(0,l.A)(M))return!1;const T=M+d;return Date.now()/1e3<T});g.meta={name:"createSelector",key:"createSelectorisWithinExpirationDateOfNewPack",description:E=>{const M=(0,r.ty)(E,"emoji_packs_most_recent_available_time");if(!(0,l.A)(M))return!1;const T=M+d;return Date.now()/1e3<T}}},7564917982:(x,A,e)=>{"use strict";e.d(A,{H:()=>h});var t=e(7156798807),n=e(6304789565),s=e(1194535350),i=e(4724591729),l=e(3004085654),o=e(4318855015),a=e(2048121586),r=e(2047021170),d=e(5510392579),u=e(387484329);const _=(0,n.Ay)("handle updating prefs if new emoji pack has become available",(f,I,p)=>{let{collections:y}=p;const g=I(),E=(0,d.h3)(g),M=(0,r.ty)(g,"emoji_packs_most_recent_available_time")||0,T=(0,a.A)(y,O=>O.date_create),{date_create:D,installed:C}=T||{};(E||C)&&D>M&&f((0,u.Hj)({emoji_packs_most_recent_available_time:Date.now()/1e3,emoji_packs_clicked_picker_cta:!1,emoji_packs_clicked_picker_post_install_cta:!1,emoji_packs_clicked_collection_cta:!1}))});_.meta={name:"createThunk",key:"createThunkhandlePotentialNewPack",description:"handle updating prefs if new emoji pack has become available"};const v=_,h=(0,n.Ay)("Process and add emoji collections",(f,I,p)=>{let{reason:y}=p;const g=I();(0,l.nQ)(g)||(f((0,o.H9)({hasFetched:!0})),f((0,s.KO)({reason:y})).then(E=>{const M=E.installed||[],T=E.available||[],D=(0,t.A)(M,"id"),C=T.map(m=>({...m,installed:!!D[m.id],localEmoji:D[m.id]?D[m.id].emoji:m.emoji}));f(v({collections:C})),(0,i.Cu)()?f((0,o.qw)({collections:C.filter(m=>!["1044122771874","11"].includes(m.id))})):f((0,o.qw)({collections:C}))}).catch(()=>{f((0,o.H9)({hasFetched:!1}))}))});h.meta={name:"createThunk",key:"createThunkfetchAllEmojiCollections",description:"Process and add emoji collections"}},1890276164:(x,A,e)=>{"use strict";e.d(A,{R:()=>n,t:()=>i});var t=e(8161242485);const n=(0,t.Ay)((o,a)=>{var r;return!!(!((r=o.externalTeamIds)===null||r===void 0)&&r[a])});n.meta={name:"createSelector",key:"createSelectorisTeamExternalById",description:(o,a)=>{var r;return!!(!((r=o.externalTeamIds)===null||r===void 0)&&r[a])}};var s;const i=(0,t.Ay)(o=>!!Object.keys((s=o.externalTeamIds)!==null&&s!==void 0?s:{}).length);var l;i.meta={name:"createSelector",key:"createSelectorhasAnyExternalTeam",description:o=>!!Object.keys((l=o.externalTeamIds)!==null&&l!==void 0?l:{}).length}},5549390246:(x,A,e)=>{"use strict";e.d(A,{Y:()=>f});var t=e(9113979368),n=e(8161242485),s=e(2647703359),i=e(8276911661),l=e(8677230210),o=e(8170643398),a=e(9464746668),r=e(3244118357),d=e(1002129445),u=e(4910963364),_=e(8847766420),v=e(735940183);const h=new v.Ay("files"),f=(0,n.Ay)((I,p)=>{if(!p||!(0,s.Vx)(p))return null;let y=h.t("External App");const g=(p==null?void 0:p.bot_user_id)||(p==null?void 0:p.user);if(g){var E;const M=(E=(0,i.nv)(I,g))!==null&&E!==void 0?E:void 0;if((0,o.po)(M)){const T=(0,a.A)(I,M),D=(0,l.AF)(I,T)||void 0,C=(0,r.Hg)(D);if(y=C||y,(0,t.A)(C)&&T){const m=(0,u.G2)(I,{serviceId:T,homeWorkspaceId:(0,r.AW)({bot:D,member:M,currentTeamId:(0,_.ZT)(I)})});y=(0,d.fj)(m)||y}}}return y});f.meta={name:"createSelector",key:"createSelectorgetAppNameForRemoteFile",description:(I,p)=>{if(!p||!(0,s.Vx)(p))return null;let y=h.t("External App");const g=(p==null?void 0:p.bot_user_id)||(p==null?void 0:p.user);if(g){var E;const M=(E=(0,i.nv)(I,g))!==null&&E!==void 0?E:void 0;if((0,o.po)(M)){const T=(0,a.A)(I,M),D=(0,l.AF)(I,T)||void 0,C=(0,r.Hg)(D);if(y=C||y,(0,t.A)(C)&&T){const m=(0,u.G2)(I,{serviceId:T,homeWorkspaceId:(0,r.AW)({bot:D,member:M,currentTeamId:(0,_.ZT)(I)})});y=(0,d.fj)(m)||y}}}return y}}},6415612447:(x,A,e)=>{"use strict";e.d(A,{Y:()=>r,r:()=>a});var t=e(8161242485),n=e(9101533895),s=e(3634593162),i=e(497761763),l=e(2960290117),o=e(6078549397);const a=c(d=>{if((0,l.Ay)(d)){const{fileIdOrQuipThreadId:v=null}=(0,o.EX)(d)||{};if(v&&(0,i.A)(v)){const h=v,f=(0,s.p)(h);return{fileId:h,channelId:f}}}if((0,i.A)(d)){const v=d,h=(0,s.p)(v);return{fileId:v,channelId:h}}const u=d;return{fileId:(0,s.l)(u),channelId:u}},"getIds"),r=(0,t.Ay)(function(d,u){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:v}=a(u);return(0,n.OL)(d,v,_)});r.meta={name:"createSelector",key:"createSelectorgetFileChannelById",description:function(d,u){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:v}=a(u);return(0,n.OL)(d,v,_)}}},6403218297:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(8086952004),n=e(3571452446),s=e(6217320234),i=e(6626377467);function l(o,a){if(!o||!a)return a;const r=a.comments||[],d=(0,t.A)(r,p=>p.id===o.id),u=(0,n.A)(d,["is_starred","_rxn_key"]),_={...d,...o,...u},v=(0,s.A)((0,i.A)([_,...r],"id"),"timestamp"),f=a.initial_comment&&o.id===a.initial_comment.id?_:a.initial_comment,I={...a,comments:v};return f&&(I.initial_comment=f),I}c(l,"addCommentToFile")},9553287e3:(x,A,e)=>{"use strict";e.d(A,{n:()=>l});var t=e(6304789565),n=e(2384831516);const s=(0,n.Mz)(o=>o.fullscreenHistory);s.meta={name:"createSelector",key:"createSelectorgetFullscreenHistory",description:o=>o.fullscreenHistory};var i=e(8646192222);const l=(0,t.Ay)("Find view container for a specific window history entry",(o,a,r)=>{let{id:d}=r;const u=a();return(0,i.iB)(u)?s(u)[d]:void 0});l.meta={name:"createThunk",key:"createThunkgetFullscreenContainerByHistoryId",description:"Find view container for a specific window history entry"}},56562029:(x,A,e)=>{"use strict";e.d(A,{G:()=>l});var t=e(9139930183),n=e(848813706),s=e(3193155968);const i={enabled:!1,containers:{}},l=(0,t.Ay)({},i,{storeKey:"fullscreen",persistenceEnabled:!1}).on(n.K$,o=>({...o,enabled:!0})).on(n.sM,o=>({...o,enabled:!1,containers:{}})).on(n.BR,(o,a)=>{let{container:r,windowId:d}=a;const u=d===s.N2?"main":d;if(o.containers[u]===r)return o;if(r)return{...o,containers:{...o.containers,[u]:r}};const _={...o};return delete _.containers[u],_})},2332058678:(x,A,e)=>{"use strict";e.d(A,{r:()=>t,u:()=>n});const t={openCount:0,unreadCount:0},n={issues:{},stats:t,locale:"",zdLocale:"",helpSearchArticles:[],productReleaseCards:[],recommendedArticles:{articles:[],requestId:""},helpSections:[],helpCategories:[],helpNavigation:{categoryId:null},helpTour:null,anchorId:null,isArticleLoaded:!1,isHelpTipHistoryTourActive:!1}},761034736:(x,A,e)=>{"use strict";e.d(A,{fE:()=>ue,ZL:()=>xe,Fb:()=>U,wB:()=>ge,Cb:()=>ee,sv:()=>j,wg:()=>ne,tL:()=>he,aN:()=>Le,Mu:()=>be,Kb:()=>F,cN:()=>Z,ZO:()=>Y,Eq:()=>fe,PN:()=>se});var t=e(8161242485),n=e(8847766420),s=e(3398586081),i=e(2141441167),l=e(8352634987),o=e(6533394955),a=e(4848430086),r=e(6304789565),d=e(930270247),u=e(7629299684),_=e(2927826522);const v=(0,r.Ay)("Fetch product release cards into the store",(k,N,$)=>{let{locale:W}=$;return k((0,d.l)({count:3,type:"product_release_card",locale:W,reason:"client/fetch_published_product_release_cards"})).then(q=>{let{cards:re}=q;k((0,u.M0)((0,_.t)(re)))})});v.meta={name:"createThunk",key:"createThunkfetchProductReleaseCards",description:"Fetch product release cards into the store"};var h=e(9532047472);const f=(0,r.Ay)("Fetch helpdesk articles into the store",(k,N,$)=>{let{locale:W,reason:q}=$;return k((0,h.a)({locale:W,reason:q})).then(re=>{let{articles:le}=re;k((0,u.NX)((0,_.t)(le))),k((0,u.a4)(W))})});f.meta={name:"createThunk",key:"createThunkfetchHelpArticles",description:"Fetch helpdesk articles into the store"};var I=e(9706240641),p=e(3593297427),y=e(138202077),g=e(6422693406);const E=(0,r.Ay)("Fetch recommended articles into the store",(k,N,$)=>{let{locale:W,reason:q}=$;return k((0,y.H)({reason:q})).then(function(){var re=(0,I.coroutine)(function*(le){let{articles:Ae,request_id:Te}=le;const Ne=yield g.S.all(Ae.map(function(){var pe=(0,I.coroutine)(function*(Ee){return k((0,p.w)({articleId:Ee.id,locale:W,reason:q})).then(oe=>{let{article:ce}=oe;return{id:ce.article_id,title:ce.title}})});return function(Ee){return pe.apply(this,arguments)}}()));k((0,u.LV)({articles:Ne,requestId:Te??""}))});return function(le){return re.apply(this,arguments)}}())});E.meta={name:"createThunk",key:"createThunkfetchRecommendedArticles",description:"Fetch recommended articles into the store"};var M=e(8745755260);const T=(0,r.Ay)("Fetch help sections into the store",(k,N,$)=>{let{categoryId:W,locale:q,reason:re}=$;return k((0,M.h)({categoryId:W,locale:q,reason:re})).then(le=>{let{sections:Ae}=le;return k((0,u.CK)((0,_.t)(Ae)))})});T.meta={name:"createThunk",key:"createThunkfetchHelpSections",description:"Fetch help sections into the store"};var D=e(6936450040);const C=(0,r.Ay)("Fetch help categories into the store",(k,N,$)=>{let{locale:W,reason:q}=$;return k((0,D.G)({locale:W,reason:q})).then(re=>{let{categories:le}=re;k((0,u.KO)((0,_.t)(le))),k((0,u.WL)(W))})});C.meta={name:"createThunk",key:"createThunkfetchHelpCategories",description:"Fetch help categories into the store"};const m=(0,s.A)(()=>new l.Ay({storeKey:"help",fetch:k=>(0,o.dispatchForTeamId)(k,(0,a.w)()),isEnabled:()=>!0})),O=(0,s.A)(k=>new l.Ay({storeKey:"help",fetch:N=>(0,o.dispatchForTeamId)(N,v({locale:k})),isEnabled:()=>!0})),P=(0,s.A)((k,N)=>new l.Ay({storeKey:"help",fetch:$=>(0,o.dispatchForTeamId)($,f({locale:k,reason:N})),isEnabled:()=>!0})),R=(0,s.A)((k,N)=>new l.Ay({storeKey:"help",fetch:$=>(0,o.dispatchForTeamId)($,E({locale:k,reason:N})),isEnabled:()=>!0,maxAge:()=>86400})),L=(0,s.A)((k,N,$)=>new l.Ay({storeKey:"help",fetch:W=>(0,o.dispatchForTeamId)(W,T({categoryId:k,locale:N,reason:$})),isEnabled:()=>!0}),(k,N)=>(0,i.A)([k,N]).join("_")),V=(0,s.A)((k,N)=>new l.Ay({storeKey:"help",fetch:$=>(0,o.dispatchForTeamId)($,C({locale:k,reason:N})),isEnabled:()=>!0}));var B=e(2332058678),K=e(735940183),b=e(9907843289);const S=new K.Ay("help"),G="",H=(0,t.Ay)(k=>k&&k.help||B.u);H.meta={name:"createSelector",key:"createSelectorgetHelpState",description:k=>k&&k.help||B.u};const U=(0,t.Ay)((k,N)=>{const $=(0,n.ZT)(k),W=(0,b.db)();return H(k).zdLocale!==W&&P(W,N).markObjectsAsStale($,[W]),P(W,N).maybeRefetch($,W),H(k).helpSearchArticles||[]});U.meta={name:"createSelector",key:"createSelectorgetHelpArticles",description:(k,N)=>{const $=(0,n.ZT)(k),W=(0,b.db)();return H(k).zdLocale!==W&&P(W,N).markObjectsAsStale($,[W]),P(W,N).maybeRefetch($,W),H(k).helpSearchArticles||[]}};const F=(0,t.Ay)(k=>{const N=(0,n.ZT)(k),$=(0,K.Yp)();return H(k).locale!==$&&O($).markObjectsAsStale(N,[$]),O($).maybeRefetch(N,$),H(k).productReleaseCards||[]});F.meta={name:"createSelector",key:"createSelectorgetProductReleaseCards",description:k=>{const N=(0,n.ZT)(k),$=(0,K.Yp)();return H(k).locale!==$&&O($).markObjectsAsStale(N,[$]),O($).maybeRefetch(N,$),H(k).productReleaseCards||[]}};const Y=(0,t.Ay)((k,N)=>{var $;const W=(0,n.ZT)(k),q=(0,K.Yp)();return H(k).locale!==q&&R(q,N).markObjectsAsStale(W,[q]),R(q,N).maybeRefetch(W,q),(($=H(k).recommendedArticles)===null||$===void 0?void 0:$.articles)||[]});Y.meta={name:"createSelector",key:"createSelectorgetRecommendedArticles",description:(k,N)=>{var $;const W=(0,n.ZT)(k),q=(0,K.Yp)();return H(k).locale!==q&&R(q,N).markObjectsAsStale(W,[q]),R(q,N).maybeRefetch(W,q),(($=H(k).recommendedArticles)===null||$===void 0?void 0:$.articles)||[]}};const Z=(0,t.Ay)(k=>{var N;return((N=H(k).recommendedArticles)===null||N===void 0?void 0:N.requestId)||""});Z.meta={name:"createSelector",key:"createSelectorgetRecommendArticlesRequestId",description:k=>{var N;return((N=H(k).recommendedArticles)===null||N===void 0?void 0:N.requestId)||""}};const ee=(0,t.Ay)(k=>H(k).helpNavigation||B.u.helpNavigation);ee.meta={name:"createSelector",key:"createSelectorgetHelpNavigation",description:k=>H(k).helpNavigation||B.u.helpNavigation};const j=(0,t.Ay)((k,N,$)=>{var W,q;const re=(0,n.ZT)(k),le=(0,K.Yp)(),Ae=H(k).locale,Te=$??((W=H(k).helpNavigation)===null||W===void 0?void 0:W.categoryId),Ne=(q=H(k).helpSections[0])===null||q===void 0?void 0:q.categoryId;return Te?(Ne&&Te!==Ne?(L(Te,le,N).markObjectsAsStale(re,[Te.toString()]),L(Te,le,N).maybeRefetch(re,Te.toString())):Ae!==le&&L(Te,le,N).markObjectsAsStale(re,[le]),L(Te,le,N).maybeRefetch(re,le),H(k).helpSections||[]):H(k).helpSections||[]});j.meta={name:"createSelector",key:"createSelectorgetHelpSections",description:(k,N,$)=>{var W,q;const re=(0,n.ZT)(k),le=(0,K.Yp)(),Ae=H(k).locale,Te=$??((W=H(k).helpNavigation)===null||W===void 0?void 0:W.categoryId),Ne=(q=H(k).helpSections[0])===null||q===void 0?void 0:q.categoryId;return Te?(Ne&&Te!==Ne?(L(Te,le,N).markObjectsAsStale(re,[Te.toString()]),L(Te,le,N).maybeRefetch(re,Te.toString())):Ae!==le&&L(Te,le,N).markObjectsAsStale(re,[le]),L(Te,le,N).maybeRefetch(re,le),H(k).helpSections||[]):H(k).helpSections||[]}};const ge=(0,t.Ay)((k,N)=>{const $=(0,n.ZT)(k),W=(0,K.Yp)();return H(k).locale!==W&&V(W,N).markObjectsAsStale($,[W]),V(W,N).maybeRefetch($,W),H(k).helpCategories||[]});ge.meta={name:"createSelector",key:"createSelectorgetHelpCategories",description:(k,N)=>{const $=(0,n.ZT)(k),W=(0,K.Yp)();return H(k).locale!==W&&V(W,N).markObjectsAsStale($,[W]),V(W,N).maybeRefetch($,W),H(k).helpCategories||[]}};const ne=(0,t.Ay)(k=>H(k).helpTour||B.u.helpTour);ne.meta={name:"createSelector",key:"createSelectorgetHelpTour",description:k=>H(k).helpTour||B.u.helpTour};const ue=(0,t.Ay)(k=>H(k).anchorId||B.u.anchorId);ue.meta={name:"createSelector",key:"createSelectorgetAnchorId",description:k=>H(k).anchorId||B.u.anchorId};const he=(0,t.Ay)(k=>H(k).isArticleLoaded||B.u.isArticleLoaded);he.meta={name:"createSelector",key:"createSelectorgetIsHelpArticleLoaded",description:k=>H(k).isArticleLoaded||B.u.isArticleLoaded};const be=(0,t.Ay)(k=>{var N,$;if(!((N=k.desktop)===null||N===void 0||($=N.app)===null||$===void 0)&&$.updateInfo){var W;const{releaseName:q}=k.desktop.app.updateInfo;if(!((W=k.desktop)===null||W===void 0)&&W.environment){const{appVersion:re}=k.desktop.environment;if(q.endsWith(re))return null}return q}return null});be.meta={name:"createSelector",key:"createSelectorgetPendingAppUpdateReleaseName",description:k=>{var N,$;if(!((N=k.desktop)===null||N===void 0||($=N.app)===null||$===void 0)&&$.updateInfo){var W;const{releaseName:q}=k.desktop.app.updateInfo;if(!((W=k.desktop)===null||W===void 0)&&W.environment){const{appVersion:re}=k.desktop.environment;if(q.endsWith(re))return null}return q}return null}};const xe=(0,t.Ay)(k=>{if(k.desktop&&k.desktop.app&&k.desktop.app.updateInfo){const{releaseName:N,releaseNotes:$,releaseDate:W}=k.desktop.app.updateInfo;return{timestamp:W?W.getTime():Date.now(),title:N,description:S.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:$,url_title:S.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null});xe.meta={name:"createSelector",key:"createSelectorgetAppUpdate",description:k=>{if(k.desktop&&k.desktop.app&&k.desktop.app.updateInfo){const{releaseName:N,releaseNotes:$,releaseDate:W}=k.desktop.app.updateInfo;return{timestamp:W?W.getTime():Date.now(),title:N,description:S.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:$,url_title:S.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null}};const Le=(0,t.Ay)(k=>{const N=xe(k)||null;return N?N.timestamp:-1});Le.meta={name:"createSelector",key:"createSelectorgetLatestAppUpdateTimeStamp",description:k=>{const N=xe(k)||null;return N?N.timestamp:-1}};const fe=(0,t.Ay)(k=>{const N=(0,n.ZT)(k);return m().maybeRefetch(N,G),H(k).stats||B.r});fe.meta={name:"createSelector",key:"createSelectorgetTicketStats",description:k=>{const N=(0,n.ZT)(k);return m().maybeRefetch(N,G),H(k).stats||B.r}};const se=(0,t.Ay)(k=>fe(k).unreadCount);se.meta={name:"createSelector",key:"createSelectorgetUnreadTickets",description:k=>fe(k).unreadCount};const Q=(0,t.Ay)(k=>H(k).isHelpTipHistoryTourActive||B.u.isHelpTipHistoryTourActive);Q.meta={name:"createSelector",key:"createSelectorgetIsHelpTipHistoryTourActive",description:k=>H(k).isHelpTipHistoryTourActive||B.u.isHelpTipHistoryTourActive}},4848430086:(x,A,e)=>{"use strict";e.d(A,{w:()=>i});var t=e(6304789565),n=e(8726791251),s=e(7629299684);const i=(0,t.Ay)("Fetch and upsert ticket stats into the store",l=>l((0,n.I)({reason:"fetchAndUpsertTicketStats"})).then(o=>{const a={unreadCount:o.unread_count||0,openCount:o.open_count||0};return l((0,s.SX)(a)),a}));i.meta={name:"createThunk",key:"createThunkfetchAndUpsertTicketStats",description:"Fetch and upsert ticket stats into the store"}},8239363237:(x,A,e)=>{"use strict";e.d(A,{GF:()=>d,Tk:()=>u,UI:()=>p,X_:()=>_,iN:()=>I,pm:()=>h,t6:()=>y,vc:()=>v,xA:()=>f});var t=e(3385422400),n=e(2647703359),s=e(937317117),i=e(1990810649),l=e(387328355);const o=c((g,E)=>{var M;return E?(M=(0,s.Lp)(g,E))===null||M===void 0?void 0:M.localUpdated:null},"getFileLocalUpdated"),a=c(g=>(0,l.lt)(g),"getFileId"),r=c(g=>(0,t.Mz)([E=>(0,l.JC)(E),E=>{const M=a(E);return o(E,M)},E=>{const M=a(E);return M?(0,s.Lp)(E,M):null}],(E,M,T)=>T!=null&&T.id&&(E===i.cM.CanvasFile||E===i.cM.QuipFile)?g(T):null),"selectFromUpdatedFile"),d=r(g=>g),u=r(g=>g==null?void 0:g.id),_=r(g=>g?(0,n.sJ)(g):!1),v=r(g=>g?(0,n.uO)(g):!1),h=r(g=>g?(0,n.WP)(g):null),f=r(g=>g==null?void 0:g.user),I=r(g=>!!g),p=r(g=>g?(0,n.l7)(g):!1),y=r(g=>g?(0,n.wL)(g):!1)},5145584581:(x,A,e)=>{"use strict";e.d(A,{x:()=>g});var t=e(8628145494),n=e(6304789565),s=e(6533394955),i=e(4250409994),l=e(5286203919),o=e(387328355),a=e(1990810649),r=e(7434063642),d=e(6251210828),u=e(7723800688),_=e(2664504268),v=e(6470070112),h=e(1224315998),f=e(56548687),I=e(5737576046),p=e(7884000776);const y=c((M,T,D,C)=>{const m=(0,s.getStateForClientStore)(),O=(0,l.E9)(m),P=(0,v.$t)(T,{huddleId:O}),R=(0,v.kn)(m),L=(0,v.UE)(m),V=(0,d.Ec)(T,{huddleId:O});let B,K,b=null,S=null,G=null;if(D===a.cM.None)B=u.Hi.FOCUS_CLOSE,K=(0,d.U7)(T,{key:u.Hi.FOCUS_OPEN});else{var H;switch(B=u.Hi.FOCUS_OPEN,K=(0,_.A)(),G=(C==null||(H=C.item)===null||H===void 0?void 0:H.id)||null,D){case a.cM.Screenshare:b="focus_screenshare",S="screenshare";break;default:b="focus_file",S="file"}M((0,r.Mn)({key:u.Hi.FOCUS_OPEN,value:K}))}(0,f.e)({state:T}).track(h.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_page:V?V.toString():null,ui_properties:{element_name:B},action:h.UiAction.IMPRESSION},calls:L},...P,...R,interaction_id:K,canvas_dimension_marker:b,type:S,item_file_id:G})},"clogCanvasEvent"),g=(0,n.Ay)("Sets a user content view which represents what the user is focused on in the canvas",(M,T,D)=>{if(!D||(0,t.A)(D.contentViewType))return;const C=T(),m=D.contentViewType,O=!1;if(m===a.cM.Screenshare){const R=(0,o.JC)(C),L=E(C);R===a.cM.None&&!L&&M((0,r.fI)({isThreadOpen:!1})),M((0,r.Zx)({userId:""}))}M((0,r.YC)({isFullscreen:O})),M((0,r.s7)({isNotesOpen:m===a.cM.QuipFile}));const P=D.contentViewType===a.cM.None||!D.contentViewConfig?{}:D.contentViewConfig;M((0,o.sK)({id:D.peerId,contentViewType:m,contentViewConfig:P})),(0,s.dispatchForClientStore)((0,i.xq)({contentViewType:m,contentViewConfig:P})),y(M,C,m,P)});g.meta={name:"createThunk",key:"createThunksetContentView",description:"Sets a user content view which represents what the user is focused on in the canvas"};function E(M){const T=(0,s.getStateForClientStore)(),D=(0,l.E9)(T),C=(0,l.hc)(T),m=(0,d.fG)(M,{huddleId:D});if(!(m!=null&&m.ts)||!C)return!1;const O=(0,I.zC)({viewContext:p.Y.HUDDLE_THREADS,channelId:C,threadTs:m.ts});return(O==null?void 0:O.hasFocus())||!1}c(E,"doesThreadInputHaveFocus")},6758774099:(x,A,e)=>{"use strict";e.d(A,{Lm:()=>i,T3:()=>s,U$:()=>l,WO:()=>n,dD:()=>a,h2:()=>o,jL:()=>r});var t=e(2140362605);const n=(0,t.Ay)("Enable huddle event log");n.meta={name:"createAction",key:"createActionenableEventLog",description:"Enable huddle event log"};const s=(0,t.Ay)("Disable huddle event log");s.meta={name:"createAction",key:"createActiondisableEventLog",description:"Disable huddle event log"};const i=(0,t.Ay)("Set loading state for huddle event log");i.meta={name:"createAction",key:"createActionsetEventLogLoading",description:"Set loading state for huddle event log"};const l=(0,t.Ay)("Add non-transcription event");l.meta={name:"createAction",key:"createActionpushNonTranscriptionEvent",description:"Add non-transcription event"};const o=(0,t.Ay)("Update with latest transcription events");o.meta={name:"createAction",key:"createActionupdateTranscriptions",description:"Update with latest transcription events"};const a=(0,t.Ay)("Set enabled state for huddle captions side-by-side view");a.meta={name:"createAction",key:"createActionsetSideBySideEnabled",description:"Set enabled state for huddle captions side-by-side view"};const r=(0,t.Ay)("Set enabled state for huddle closed captions view");r.meta={name:"createAction",key:"createActionsetClosedCaptionsEnabled",description:"Set enabled state for huddle closed captions view"}},8409540889:(x,A,e)=>{"use strict";e.d(A,{u:()=>n,y:()=>t});const t=2e3,n=2e3},4988306802:(x,A,e)=>{"use strict";e.d(A,{Cb:()=>_,M3:()=>r,TP:()=>o,VN:()=>d,gL:()=>a,iv:()=>v});var t=e(3385422400),n=e(8161242485),s=e(8409540889),i=e(8783285437);const l=(0,n.Ay)(h=>h.huddleEvents);l.meta={name:"createSelector",key:"createSelectorgetHuddleEventsData",description:h=>h.huddleEvents};const o=(0,n.Ay)(h=>l(h).enabled);o.meta={name:"createSelector",key:"createSelectorareHuddleEventsEnabled",description:h=>l(h).enabled};const a=(0,n.Ay)(h=>l(h).isLoading);a.meta={name:"createSelector",key:"createSelectorareHuddleEventsLoading",description:h=>l(h).isLoading};const r=(0,n.Ay)(h=>h.huddleEvents.isSideBySideEnabled);r.meta={name:"createSelector",key:"createSelectorisHuddleSideBySideCaptionsEnabled",description:h=>h.huddleEvents.isSideBySideEnabled};const d=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);d.meta={name:"createSelector",key:"createSelectorisHuddleClosedCaptionsEnabled",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const u=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);u.meta={name:"createSelector",key:"createSelectorHuddlesPersistTranscriptToggle",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const _=(0,t.Mz)(h=>l(h).events,h=>{const f=[];let I,p=[];const y=c(()=>{I&&f.push({...I,content:p.join(" ")})},"maybeCommit");return h.forEach(g=>{I&&g.type===i.v.TRANSCRIBE&&I.memberId===g.memberId&&g.timestampMs-I.endTimeMs<s.y?(p.push(g.content),I.endTimeMs=g.endTimeMs):(y(),g.type===i.v.TRANSCRIBE?(I={type:i.v.TRANSCRIBE,resultId:"",memberId:g.memberId,content:"",timestampMs:g.timestampMs,endTimeMs:g.endTimeMs},p=[g.content]):(I=null,p=[],f.push(g)))}),y(),f}),v=(0,t.Mz)(h=>_(h),h=>h.filter(f=>f.type===i.v.TRANSCRIBE||f.type===i.v.START_TRANSCRIPTION).slice(-5))},1889537412:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(727128009),l=e(6422693406),o=e(9640070512),a=e(2527782504),r=e(6758774099),d=e(4988306802),u=e(7004355564),_=e(6533394955),v=e(796111729),h=e(5286203919),f=e(8783285437),I=e(6694086724),p=e(8872167513),y=e(2709531527);const g=(0,s.Ay)("Start transcription for current huddle",function(){var M=(0,t.coroutine)(function*(T,D){if((0,d.TP)(D())||(0,d.gL)(D()))return l.S.resolve();const C=(0,_.getStateForClientStore)(),m=(0,h.E9)(C);return m?(T((0,r.WO)()),T((0,r.Lm)(!0)),yield(0,u.A)(),T((0,I.e)({clearOnEndedCallback:!0,logContext:"huddles-captions-turned-on",isStoppedByUser:!0})),T((0,i.i)({reason:"start-event-log",callId:m})).catch(O=>{var P;if(((P=O.data)===null||P===void 0?void 0:P.error)==="permission_denied")return l.S.delay(5e3).then(()=>T((0,i.i)({reason:"start-event-log/retry",callId:m})));throw O}).catch(O=>{(0,v.Ay)({getState:D}).error(O),T((0,r.T3)())}).finally(()=>{T((0,r.Lm)(!1)),T((0,o.H)({focusKey:a.Ay.HUDDLE_CAPTIONS_TAB})),T((0,r.U$)({type:f.v.START_TRANSCRIPTION,memberId:"USLACKBOT",timestampMs:0}));const{huddleEventsTrace:O}=(0,p.A)().getAllTraceHandlers();O==null||O.update({name:y.p.TRANSCRIPT,type:y.G.START})})):l.S.reject(new Error("No active call ID for huddle"))});return function(T,D){return M.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkstartEventLog",description:"Start transcription for current huddle"};const E=g},6855917924:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(6304789565),n=e(580220061),s=e(6422693406),i=e(6758774099),l=e(4988306802),o=e(6533394955),a=e(5286203919),r=e(8872167513),d=e(2709531527);const u=(0,t.Ay)("Stop transcription for current huddle",(v,h)=>{if(!(0,l.TP)(h())||(0,l.gL)(h()))return s.S.resolve();const f=(0,o.getStateForClientStore)(),I=(0,a.E9)(f);return I?(v((0,i.T3)()),v((0,i.Lm)(!0)),v((0,n.W)({reason:"stop-event-log",callId:I})).finally(()=>{v((0,i.Lm)(!1));const{huddleEventsTrace:p}=(0,r.A)().getAllTraceHandlers();p==null||p.update({name:d.p.TRANSCRIPT,type:d.G.STOP})})):s.S.reject(new Error("No active call ID for huddle"))});u.meta={name:"createThunk",key:"createThunkstopEventLog",description:"Stop transcription for current huddle"};const _=u},8783285437:(x,A,e)=>{"use strict";e.d(A,{v:()=>t});var t;(function(n){n.JOIN="JOIN",n.LEAVE="LEAVE",n.SCREENSHARE_START="SCREENSHARE_START",n.SCREENSHARE_STOP="SCREENSHARE_STOP",n.TRANSCRIBE="TRANSCRIBE",n.SEND_REACTION="SEND_REACTION",n.START_TRANSCRIPTION="START_TRANSCRIPTION"})(t||(t={}))},4250409994:(x,A,e)=>{"use strict";e.d(A,{Ag:()=>F,B5:()=>re,Bk:()=>L,Db:()=>N,Dj:()=>pe,Gx:()=>he,HC:()=>m,HF:()=>C,Hg:()=>Ae,I9:()=>d,JM:()=>Le,Jc:()=>I,Ko:()=>V,Lx:()=>Q,M4:()=>_,OA:()=>k,QZ:()=>T,Rb:()=>R,Rh:()=>f,Rr:()=>D,Sd:()=>l,Sn:()=>E,TK:()=>Te,VU:()=>s,WB:()=>K,WM:()=>H,WY:()=>se,YA:()=>M,Yi:()=>B,_H:()=>ne,_I:()=>o,_U:()=>Z,_o:()=>ae,_u:()=>fe,aO:()=>G,bV:()=>ee,bk:()=>xe,cx:()=>be,f2:()=>S,fP:()=>g,hB:()=>p,kg:()=>le,kn:()=>i,nI:()=>q,nU:()=>u,nw:()=>$,o9:()=>W,og:()=>Ye,ol:()=>O,pl:()=>r,qW:()=>a,qr:()=>j,so:()=>v,t2:()=>Ne,u8:()=>y,wr:()=>J,xf:()=>h,xq:()=>Y,yR:()=>P,yi:()=>ue});var t=e(2140362605),n=e(6304789565);const s=(0,t.Ay)("Set flag to indicate if Huddles is enabled.");s.meta={name:"createAction",key:"createActionsetIsHuddlesEnabled",description:"Set flag to indicate if Huddles is enabled."};const i=(0,t.Ay)("Stores audio reference that will be passed to SDK");i.meta={name:"createAction",key:"createActionstoreHuddlesAudioRef",description:"Stores audio reference that will be passed to SDK"};const l=(0,t.Ay)("Start video shariing");l.meta={name:"createAction",key:"createActionstartVideoSharing",description:"Start video shariing"};const o=(0,t.Ay)("Stop video shariing");o.meta={name:"createAction",key:"createActionstopVideoSharing",description:"Stop video shariing"};const a=(0,t.Ay)("Connect to Huddle media server");a.meta={name:"createAction",key:"createActionconnectToHuddlesMediaServer",description:"Connect to Huddle media server"};const r=(0,t.Ay)("Leave the huddle and stop media transmission");r.meta={name:"createAction",key:"createActiondisconnectHuddlesFromMediaServer",description:"Leave the huddle and stop media transmission"};const d=(0,t.Ay)("Enable or disable local microphone");d.meta={name:"createAction",key:"createActionenableSelfMicrophone",description:"Enable or disable local microphone"};const u=(0,t.Ay)("Send an emoji reaction");u.meta={name:"createAction",key:"createActionsendReactionMessage",description:"Send an emoji reaction"};const _=(0,t.Ay)("Send a sticky emoji reaction");_.meta={name:"createAction",key:"createActionsendStickyReactionMessage",description:"Send a sticky emoji reaction"};const v=(0,t.Ay)("Send a mute request");v.meta={name:"createAction",key:"createActionsendMuteRequestMessage",description:"Send a mute request"};const h=(0,t.Ay)("Insert new active huddle reference with teamId channelId, etc.");h.meta={name:"createAction",key:"createActionaddActiveHuddleReference",description:"Insert new active huddle reference with teamId channelId, etc."};const f=(0,t.Ay)("Upsert existing active huddle reference");f.meta={name:"createAction",key:"createActionupdateActiveHuddleReference",description:"Upsert existing active huddle reference"};const I=(0,t.Ay)("Upsert existing active huddle channel");I.meta={name:"createAction",key:"createActionupdateActiveHuddleChannel",description:"Upsert existing active huddle channel"};const p=(0,t.Ay)("Set active huddle invite");p.meta={name:"createAction",key:"createActionupsertInvite",description:"Set active huddle invite"};const y=(0,t.Ay)("Clear invite for given channel ID");y.meta={name:"createAction",key:"createActionclearInviteForChannelId",description:"Clear invite for given channel ID"};const g=(0,t.Ay)("Mark invite notifications as viewed by clearing them.");g.meta={name:"createAction",key:"createActionmarkInvitesSeenForTeam",description:"Mark invite notifications as viewed by clearing them."};const E=(0,n.Ay)("Mark invite notifications as viewed by clearing them after a delay",(Ve,Be,Ke)=>{let{delay:Re,teamId:Fe}=Ke;setTimeout(()=>{Ve(g({teamId:Fe,markBeforeMs:Date.now()-Re}))},Re)});E.meta={name:"createThunk",key:"createThunkmarkInvitesReadOnDelay",description:"Mark invite notifications as viewed by clearing them after a delay"};const M=(0,t.Ay)("Start screen share for current user with given mediaSourceId");M.meta={name:"createAction",key:"createActionstartScreenShare",description:"Start screen share for current user with given mediaSourceId"};const T=(0,t.Ay)("Stop screen share for current user");T.meta={name:"createAction",key:"createActionstopScreenShare",description:"Stop screen share for current user"};const D=(0,t.Ay)("Notify peers of changes to isDrawEnabled");D.meta={name:"createAction",key:"createActionpropagateDrawEnabled",description:"Notify peers of changes to isDrawEnabled"};const C=(0,t.Ay)("Enabled annotations for screen share host");C.meta={name:"createAction",key:"createActionpropagateHostDrawEnabled",description:"Enabled annotations for screen share host"};const m=(0,t.Ay)("Notify middleware that a new preferred device was selected");m.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware that a new preferred device was selected"};const O=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");O.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const P=(0,t.Ay)("Notify middleware that noise suppression setting has changed");P.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"};const R=(0,t.Ay)("Notify middleware that video background setting has changed");R.meta={name:"createAction",key:"createActionsetVideoBackgroundEffect",description:"Notify middleware that video background setting has changed"};const L=(0,t.Ay)("Toggle global keyboard shortcut support for muting / unmuting a huddle");L.meta={name:"createAction",key:"createActiontoggleGlobalMuteShortcut",description:"Toggle global keyboard shortcut support for muting / unmuting a huddle"};const V=(0,t.Ay)("Internal store update for mini-panel visibility");V.meta={name:"createAction",key:"createActioninternalUpdateMiniPanelVisibility",description:"Internal store update for mini-panel visibility"};const B=(0,t.Ay)("Upsert join credentials for a channel");B.meta={name:"createAction",key:"createActionupsertJoinCredentialsForChannel",description:"Upsert join credentials for a channel"};const K=(0,t.Ay)("Clear the join credentials for a specific channel");K.meta={name:"createAction",key:"createActionclearJoinCredentialsForChannel",description:"Clear the join credentials for a specific channel"};const b=(0,t.Ay)("Store and/or remote push Chime meeting events");b.meta={name:"createAction",key:"createActionhandleMeetingEvents",description:"Store and/or remote push Chime meeting events"};const S=(0,t.Ay)("Transition from the prejoin state to started");S.meta={name:"createAction",key:"createActiontransitionFromPrejoinToStarted",description:"Transition from the prejoin state to started"};const G=(0,t.Ay)("Action to update the store to either show or hide discovery banner");G.meta={name:"createAction",key:"createActionupdateDiscoveryBannerVisibility",description:"Action to update the store to either show or hide discovery banner"};const H=(0,t.Ay)("Toggle Video");H.meta={name:"createAction",key:"createActiontoggleVideo",description:"Toggle Video"};const U=(0,t.Ay)("Reporting CPU and memory usage stats");U.meta={name:"createAction",key:"createActionreportAppMetrics",description:"Reporting CPU and memory usage stats"};const F=(0,t.Ay)("Set true to specify that lounge music is playing, false otherwise.");F.meta={name:"createAction",key:"createActionsetIsLoungeMusicPlaying",description:"Set true to specify that lounge music is playing, false otherwise."};const Y=(0,t.Ay)("Set current focused view type");Y.meta={name:"createAction",key:"createActionsetContentView",description:"Set current focused view type"};const Z=(0,t.Ay)("Set last huddle start time");Z.meta={name:"createAction",key:"createActionsetLastHuddleStartTs",description:"Set last huddle start time"};const ee=(0,t.Ay)("Set last huddle end time");ee.meta={name:"createAction",key:"createActionsetLastHuddleEndTs",description:"Set last huddle end time"};const j=(0,t.Ay)("Set last huddle duration time");j.meta={name:"createAction",key:"createActionsetLastHuddleDurationTs",description:"Set last huddle duration time"};const ge=(0,t.Ay)("Toggle video background filter");ge.meta={name:"createAction",key:"createActiontoggleVideoBackgroundFilter",description:"Toggle video background filter"};const ne=(0,t.Ay)("Starts the video preview on the video element using the specified device");ne.meta={name:"createAction",key:"createActionstartVideoPreview",description:"Starts the video preview on the video element using the specified device"};const ue=(0,t.Ay)("Stops the video preview on the video element");ue.meta={name:"createAction",key:"createActionstopVideoPreview",description:"Stops the video preview on the video element"};const he=(0,t.Ay)("Identifies which screenshare is being viewed in the mini-player");he.meta={name:"createAction",key:"createActionsetScreenshareActivePanel",description:"Identifies which screenshare is being viewed in the mini-player"};const be=(0,t.Ay)("Resets the store");be.meta={name:"createAction",key:"createActionresetClientHuddleStore",description:"Resets the store"};const xe=(0,t.Ay)("Start the canvas jukebox using content share");xe.meta={name:"createAction",key:"createActionstartContentShareJukebox",description:"Start the canvas jukebox using content share"};const Le=(0,t.Ay)("Stop the canvas jukebox");Le.meta={name:"createAction",key:"createActionstopJukebox",description:"Stop the canvas jukebox"};const fe=(0,t.Ay)("Set selected song");fe.meta={name:"createAction",key:"createActionsetSongPlaying",description:"Set selected song"};const se=(0,t.Ay)("Send jukebox active song");se.meta={name:"createAction",key:"createActionsendJukeboxActiveSong",description:"Send jukebox active song"};const Q=(0,t.Ay)("Request a jukebox song");Q.meta={name:"createAction",key:"createActionrequestJukeboxSong",description:"Request a jukebox song"};const k=(0,t.Ay)("Request the jukebox stops");k.meta={name:"createAction",key:"createActionrequestJukeboxStop",description:"Request the jukebox stops"};const N=(0,t.Ay)("Send recording start notification");N.meta={name:"createAction",key:"createActionsendRecordingStartNotification",description:"Send recording start notification"};const $=(0,t.Ay)("Sets whether the active invite card in the sidebar can be rendered");$.meta={name:"createAction",key:"createActionsetCanRenderActiveInviteCardInSidebar",description:"Sets whether the active invite card in the sidebar can be rendered"};const W=(0,t.Ay)("Sets whether the huddle window of an active huddle is in focus or not.");W.meta={name:"createAction",key:"createActionsetIsHuddleWindowFocused",description:"Sets whether the huddle window of an active huddle is in focus or not."};const q=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");q.meta={name:"createAction",key:"createActiontoggleAllIncomingVideo",description:"Sets whether the huddle window of an active huddle is open or not."};const re=(0,t.Ay)("Reports to the SDK when the client is offline");re.meta={name:"createAction",key:"createActionreportClientOffline",description:"Reports to the SDK when the client is offline"};const le=(0,t.Ay)("Sets whether audio only mode is active or not.");le.meta={name:"createAction",key:"createActionsetIsAudioOnlyMode",description:"Sets whether audio only mode is active or not."};const Ae=(0,t.Ay)("Sets whether the camera was enabled when audio only mode was activated.");Ae.meta={name:"createAction",key:"createActionsetAudioOnlyModeCameraWasEnabled",description:"Sets whether the camera was enabled when audio only mode was activated."};const Te=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");Te.meta={name:"createAction",key:"createActionsetIsHuddleWindowOpen",description:"Sets whether the huddle window of an active huddle is open or not."};const Ne=(0,t.Ay)("True if huddle mini player is hidden, false if shown.");Ne.meta={name:"createAction",key:"createActionsetIsHuddleMiniPlayerHidden",description:"True if huddle mini player is hidden, false if shown."};const pe=(0,t.Ay)("Asks for video permission and enumerates devices");pe.meta={name:"createAction",key:"createActioninitVideoPermission",description:"Asks for video permission and enumerates devices"};const Ee=(0,t.Ay)("Execute readiness check for audio input");Ee.meta={name:"createAction",key:"createActionexecuteHuddlesAudioInputReadinessCheck",description:"Execute readiness check for audio input"};const oe=(0,t.Ay)("Execute readiness check for audio output");oe.meta={name:"createAction",key:"createActionexecuteHuddlesAudioOutputReadinessCheck",description:"Execute readiness check for audio output"};const ce=(0,t.Ay)("Execute readiness check for video input");ce.meta={name:"createAction",key:"createActionexecuteHuddlesVideoInputReadinessCheck",description:"Execute readiness check for video input"};const ke=(0,t.Ay)("Execute readiness check for a particular camera resolution");ke.meta={name:"createAction",key:"createActionexecuteHuddlesCameraResolutionReadinessCheck",description:"Execute readiness check for a particular camera resolution"};const Ce=(0,t.Ay)("Execute readiness check for audio connectivity");Ce.meta={name:"createAction",key:"createActionexecuteHuddlesAudioConnectivityReadinessCheck",description:"Execute readiness check for audio connectivity"};const Me=(0,t.Ay)("Execute readiness check for video connectivity");Me.meta={name:"createAction",key:"createActionexecuteHuddlesVideoConnectivityReadinessCheck",description:"Execute readiness check for video connectivity"};const Se=(0,t.Ay)("Execute readiness check for content share connectivity");Se.meta={name:"createAction",key:"createActionexecuteHuddlesContentShareConnectivityReadinessCheck",description:"Execute readiness check for content share connectivity"};const Ue=(0,t.Ay)("Execute readiness check for network UDP connectivity");Ue.meta={name:"createAction",key:"createActionexecuteHuddlesNetworkUDPConnectivityReadinessCheck",description:"Execute readiness check for network UDP connectivity"};const He=(0,t.Ay)("Execute readiness check for network TCP connectivity");He.meta={name:"createAction",key:"createActionexecuteNetworkTCPConnectivityReadinessCheck",description:"Execute readiness check for network TCP connectivity"};const Ye=(0,t.Ay)("Sets that the Huddle was joined via prejoin");Ye.meta={name:"createAction",key:"createActionsetHuddleWasJoinedFromPrejoin",description:"Sets that the Huddle was joined via prejoin"};const J=(0,t.Ay)("Sets Huddle device based on preview entry");J.meta={name:"createAction",key:"createActionsetDeviceStateBasedOnPreviewEntry",description:"Sets Huddle device based on preview entry"};const ae=(0,t.Ay)("Sets the channel ID for the Huddle when joining through the Huddle Join Preview flow");ae.meta={name:"createAction",key:"createActionsetHuddleJoinPreviewChannel",description:"Sets the channel ID for the Huddle when joining through the Huddle Join Preview flow"}},5702042015:(x,A,e)=>{"use strict";e.d(A,{A:()=>l,p:()=>o});var t=e(5286203919),n=e(4250409994),s=e(6304789565);let i;const l=(0,s.Ay)("Temporarily show mini-panel",function(a,r){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2500;clearTimeout(i),a((0,n.Ko)(!0)),i=setTimeout(()=>a((0,n.Ko)(!1)),d)});l.meta={name:"createThunk",key:"createThunkshowMiniPanelForDuration",description:"Temporarily show mini-panel"};const o=(0,s.Ay)("Temporarily pause mini-panel visibility transition",(a,r)=>{const d=r();(0,t.Ae)(d)&&clearTimeout(i)});o.meta={name:"createThunk",key:"createThunkpauseMiniPanelTimeout",description:"Temporarily pause mini-panel visibility transition"}},2778217221:(x,A,e)=>{"use strict";e.d(A,{WS:()=>s,nq:()=>n,o7:()=>t});const t="HUDDLES",n=864e5,s=2},5378147939:(x,A,e)=>{"use strict";e.d(A,{A:()=>pe});var t=e(9706240641),n=e(3398586081),s=e(387328355),i=e(1289024643),l=e(462591818),o=e(6533394955),a=e(5795074931),r=e(2047021170),d=e(1889537412),u=e(6758774099),_=e(4250409994),v=e(5881236351),h=e(6304789565),f=e(6562711329);const I=(0,h.Ay)("Fetch channel membership info for huddle member",(Ee,oe,ce)=>{let{channelId:ke,userId:Ce}=ce;return Ee((0,f.z)({channelId:ke,userIds:[Ce]})).then(Me=>{let{membershipInfo:Se}=Me;return Se[Ce]&&"isMember"in Se[Ce]?!Se[Ce].isMember:!0})});I.meta={name:"createThunk",key:"createThunkisUserNotHuddleChannelMember",description:"Fetch channel membership info for huddle member"};var p=e(2778217221),y=e(7434063642),g=e(9548972574),E=e(5332875232),M=e(3677514771),T=e(8305649700),D=e(1883693579),C=e(9712681361),m=e(9680914051),O=e(4695727674),P=e(4540171876),R=e(6422693406),L=e(6470070112),V=e(6839188756),B=e(56548687),K=e(1224315998),b=e(5741354339),S=e(6929023741),G=e(4476913522),H=e(5286203919),U=e(4423055085),F=e(2141441167),Y=e(4949104520),Z=e(796111729),ee=e(9190452268),j=e(1651628626),ge=e(2664504268),ne=e(1921074781),ue=e(5203103513);const he=60*1e3,be=15*1e3,xe=1e3*10,Le=1e3*60,fe=5e3;let se=!1;const Q=500,k=25;let N=c(class{setTargetState(oe){var ce=this;return(0,t.coroutine)(function*(){ce.targetState=oe;const{huddleState:ke,huddleSubState:Ce}=ce.targetState;ce.isValidHuddleSubState(ke,Ce)||(ce.targetState.huddleSubState=ce.getInitialSubStateForHuddleState(ke)),(0,o.dispatchForClientStore)((0,_.Rh)(ce.getOptimisticState(oe))),yield ce.process()})()}setTargetChannel(oe){this.targetState.channelId=oe}setTargetSubState(oe){var ce=this;return(0,t.coroutine)(function*(){ce.isValidHuddleSubState(ce.targetState.huddleState,oe)&&(ce.targetState.huddleSubState=oe,yield ce.process())})()}transitionFromPrejoinToStarted(){this.setTargetState({huddleState:C.RJ.STARTED,teamId:this.targetState.teamId,channelId:this.targetState.channelId,muted:this.targetState.muted,callId:this.targetState.callId})}getTimeOfLastStateChange(){return this.timeOfLastStateChange}getTimeOfLastSubStateChange(){return this.timeOfLastSubStateChange}waitForStartStop(){var oe=this;return(0,t.coroutine)(function*(){return oe.startStopDeferred||R.S.resolve()})()}isProcessing(){var oe;return(oe=this.startStopDeferred)===null||oe===void 0?void 0:oe.isPending()}isTargetState(){const{teamId:oe,channelId:ce,huddleState:ke}=this.getClientHuddleState();return(0,L.Ft)(this.targetState.huddleState)?ke===this.targetState.huddleState:oe===this.targetState.teamId&&ce===this.targetState.channelId&&ke===this.targetState.huddleState}isTargetSubState(){return this.getClientHuddleState().huddleSubState===this.targetState.huddleSubState}hasBeenInSubStateForAtLeastApproxTime(oe){return this.timeOfLastSubStateChange?Date.now()-this.timeOfLastSubStateChange>oe-Q:!1}isValidHuddleSubState(oe,ce){return oe===C.RJ.STARTED?ce===void 0?!1:(0,F.A)(C.J_).includes(ce):ce===void 0}getInitialSubStateForHuddleState(oe){if(oe===C.RJ.STARTED)return C.J_.INITIAL_ALONE}process(){var oe=this;return(0,t.coroutine)(function*(){if(oe.isProcessing())return oe.waitForStartStop();oe.startStopDeferred=(0,b.u)();const ce=setTimeout((0,t.coroutine)(function*(){var ke;if(!((ke=oe.startStopDeferred)===null||ke===void 0)&&ke.isPending()){const Ce=new R.S.TimeoutError("HuddleStateManager timeout");yield oe.handleErrorAndDisconnect(Ce)}}),oe.startStopTimeout);try{yield oe.runLoop(),clearTimeout(ce),oe.startStopDeferred.resolve()}catch(ke){yield oe.handleErrorAndDisconnect(ke)}finally{clearTimeout(ce)}oe.startStopDeferred=null})()}runLoop(){var oe=this;return(0,t.coroutine)(function*(){let ce=0;for(;!oe.isTargetState();){if(!oe.isProcessing())return;if(ce+=1,ce>k)throw new Error("runLoop was stuck");const{teamId:Me,channelId:Se,huddleState:Ue}=oe.getClientHuddleState(),{teamId:He,channelId:Ye,huddleState:J,callId:ae}=oe.targetState;if(Me!==He&&(delete oe.clogger,delete oe.logger,delete oe.telemeter),[C.RJ.STARTED,C.RJ.PRE_JOINED].includes(J)){if(Me!==He||Se!==Ye){switch(Ue){case C.RJ.PENDING:case C.RJ.STARTED:case C.RJ.PRE_JOINED:yield oe.goToNext(C.RJ.ENDING);break;default:yield oe.goToNext(C.RJ.STARTING)}continue}switch(Ue){case C.RJ.NOT_STARTED:yield oe.goToNext(C.RJ.STARTING);break;case C.RJ.STARTING:try{yield oe.goToNext(C.RJ.PENDING)}catch(Ve){var ke;if(!((ke=oe.credentials)===null||ke===void 0)&&ke.isQuickJoinCredentials){if(delete oe.credentials,yield oe.clearQuickJoinCredentials(),Ve.message===C.M6.ChimeMeetingEnded)throw Ve;if(ae){const Ie=(0,g.P_)(oe.getState(),ae);if(Ie&&Ie.hasEnded)throw new Error(C.M6.ChimeMeetingEnded)}const Be=Date.now(),Ke=!0;yield oe.safelyDisconnect(Ke);const Fe=Date.now()-Be;oe.getLogger().info(`Disconnecting after failed attempt to join huddle added ${Fe}ms to TTI`),yield oe.goToNext(C.RJ.STARTING)}else throw Ve}break;case C.RJ.PENDING:yield oe.goToNext(oe.targetState.huddleState);break;case C.RJ.PRE_JOINED:yield oe.goToNext(C.RJ.COMPLETING_PRE_JOIN);break;case C.RJ.COMPLETING_PRE_JOIN:yield oe.completePrejoin({isStartMuted:oe.targetState.muted}),yield oe.goToNext(C.RJ.STARTED);break;case C.RJ.STARTED:throw new Error("This should not be possible");case C.RJ.ENDING:case C.RJ.SURVEY:case C.RJ.SURVEY_GOOD:default:yield oe.goToNext(C.RJ.STARTING);break}continue}if([C.RJ.PENDING,C.RJ.STARTED,C.RJ.PRE_JOINED].includes(Ue)){yield oe.goToNext(C.RJ.ENDING);continue}yield oe.goToNext(J)}let Ce=0;for(;!oe.isTargetSubState();){if(Ce+=1,Ce>k)throw new Error("runLoop() for huddle substate was stuck");const{huddleState:Me,huddleSubState:Se}=oe.getClientHuddleState(),{huddleSubState:Ue}=oe.targetState;if(!oe.isValidHuddleSubState(Me,Ue)){const He=oe.getInitialSubStateForHuddleState(Me);oe.targetState.huddleSubState=He,yield oe.goToNextSubState(He),oe.getLogger().warn(p.o7,`attempted to reach invalid huddleSubstate (${Ue}) for the given huddleState (${Me})`);continue}if(Me===C.RJ.STARTED){switch(Se){case C.J_.INITIAL_ALONE:if(Ue===C.J_.INITIAL_ALONE_NOTICE_ACTIVE){yield oe.goToNextSubState(Ue);break}yield oe.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.INITIAL_ALONE_NOTICE_ACTIVE:if(Ue===C.J_.INITIAL_ALONE_NOTICE_DISMISSED){yield oe.goToNextSubState(Ue);break}yield oe.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.INITIAL_ALONE_NOTICE_DISMISSED:yield oe.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.IN_PROGRESS_TOGETHER:yield oe.goToNextSubState(C.J_.IN_PROGRESS_ALONE);break;case C.J_.IN_PROGRESS_ALONE:if(Ue===C.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE){yield oe.goToNextSubState(Ue);break}yield oe.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE:if(Ue===C.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED){yield oe.goToNextSubState(Ue);break}yield oe.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED:yield oe.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;default:yield oe.goToNextSubState(C.J_.INITIAL_ALONE)}continue}yield oe.goToNextSubState(void 0)}})()}goToNext(oe){var ce=this;return(0,t.coroutine)(function*(){var ke,Ce,Me,Se;ce.getLogger().info(`Marking huddle as ${oe} [${(Me=(ke=ce.targetState)===null||ke===void 0?void 0:ke.teamId)!==null&&Me!==void 0?Me:"N/A"}, ${(Se=(Ce=ce.targetState)===null||Ce===void 0?void 0:Ce.channelId)!==null&&Se!==void 0?Se:"N/A"}]`);const Ue=Date.now();ce.timeOfLastStateChange=Ue,ce.timeOfLastSubStateChange=Ue;const He=ce.getInitialSubStateForHuddleState(oe);if(oe===C.RJ.STARTING){var Ye,J;const Be=ce.assertTargetTeamAndChannel(C.RJ.STARTING),Ke=ce.getOptimisticState(ce.targetState);ce.getLogger().info(`Optimistic state: ${Ke.optimisticHuddleState}`),(0,o.dispatchForClientStore)((0,_.xf)({huddleState:oe,huddleSubState:He,...Be,...Ke,isPrejoin:((Ye=ce.targetState)===null||Ye===void 0?void 0:Ye.huddleState)===C.RJ.PRE_JOINED,sessionId:(0,ge.A)()})),ce.credentials=yield ce.fetchCredentials(),(J=ce.getTelemeter())===null||J===void 0||J.mark(m.Bq);return}if(oe===C.RJ.PENDING){const Be=ce.assert(ce.credentials,"Expected credentials to be set before PENDING");(0,o.dispatchForClientStore)((0,_.Rh)({huddleState:oe,huddleSubState:He,...ce.assertTargetTeamAndChannel(C.RJ.PENDING),callId:Be.roomId})),yield ce.connectToChime(Be,ce.targetState),delete ce.credentials;return}if(oe===C.RJ.STARTED){var ae;const Be=ce.assertTargetTeamAndChannel(C.RJ.STARTED);(0,o.dispatchForClientStore)((0,_.Rh)({huddleState:oe,huddleSubState:He,optimisticHuddleState:null,...Be,isPrejoin:!1})),(0,r.ty)(ce.getState(),"huddles_set_status")&&ce.scheduleHuddleStateExpirationIncrement(),ce.setCoachmarkTimeout(He),(ae=ne.F.getInstance())===null||ae===void 0||ae.request()}else{var Ve;(Ve=ne.F.getInstance())===null||Ve===void 0||Ve.release()}if(oe===C.RJ.PRE_JOINED&&(0,o.dispatchForClientStore)((0,_.Rh)({huddleState:oe,huddleSubState:He,optimisticHuddleState:null,...ce.assertTargetTeamAndChannel(C.RJ.PRE_JOINED)})),oe===C.RJ.ENDING){(0,o.dispatchForClientStore)((0,_.Rh)({huddleState:oe,huddleSubState:He})),yield ce.safelyDisconnect();return}(0,o.dispatchForClientStore)((0,_.Rh)({huddleState:oe,huddleSubState:He,optimisticHuddleState:null}))})()}goToNextSubState(oe){var ce=this;return(0,t.coroutine)(function*(){oe===C.J_.IN_PROGRESS_ALONE&&setTimeout(()=>{var ke;((ke=ce.getClientHuddleState())===null||ke===void 0?void 0:ke.huddleSubState)===C.J_.IN_PROGRESS_ALONE&&ce.hasBeenInSubStateForAtLeastApproxTime(xe)&&ce.setTargetSubState(C.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE)},xe),ce.timeOfLastSubStateChange=Date.now(),(0,o.dispatchForClientStore)((0,_.Rh)({huddleSubState:oe}))})()}handleErrorAndDisconnect(oe){var ce=this;return(0,t.coroutine)(function*(){var ke;ce.getLogger().error(oe);const{huddleState:Ce}=ce.getClientHuddleState();if([C.RJ.PENDING,C.RJ.STARTED].includes(Ce))try{yield R.S.race([new R.S((Me,Se)=>{setTimeout(()=>Se(new Error("HuddleStateManager disconnect timeout")),ce.disconnectTimeout)}),ce.safelyDisconnect()])}catch(Me){ce.getLogger().error(Me)}(0,o.dispatchForClientStore)((0,_.Rh)({huddleState:C.RJ.NOT_STARTED,optimisticHuddleState:null})),yield R.S.resolve(ce.handleError(oe,Ce)),(ke=ce.startStopDeferred)===null||ke===void 0||ke.reject(oe)})()}getInitialAloneInHuddleTimeOutValue(){if(se)return fe;const oe=this.getState(),ce=(0,r.ty)(oe,ue.VW);return ce?ce*1e3:(this.getLogger().info("User pref 'huddles_play_music_timeout' is undefined, using default 60 seconds"),Le)}setCoachmarkTimeout(oe){oe===C.J_.INITIAL_ALONE&&(setTimeout(()=>{var ce;((ce=this.getClientHuddleState())===null||ce===void 0?void 0:ce.huddleSubState)===C.J_.INITIAL_ALONE&&this.hasBeenInSubStateForAtLeastApproxTime(this.getInitialAloneInHuddleTimeOutValue())&&(this.setTargetSubState(C.J_.INITIAL_ALONE_NOTICE_ACTIVE),this.getLogger().info("setTimeout executed on substate: initial_alone"))},this.getInitialAloneInHuddleTimeOutValue()),this.getLogger().info("setTimeout started on substate: initial_alone"))}isMicEnabled(){var oe;return!!(!((oe=(0,s.Ng)(this.getState()))===null||oe===void 0)&&oe.isMicrophoneEnabled)}getClientHuddleState(){const oe=(0,o.getStateForClientStore)(),ce=(0,H.EG)(oe),{channelId:ke,teamId:Ce}=(0,H.Qn)(oe)||{};if(!ce||ce===C.RJ.NOT_STARTED)return{huddleState:C.RJ.NOT_STARTED,channelId:ke,teamId:Ce};const Me=(0,H.EO)(oe);return{huddleState:ce,huddleSubState:Me,channelId:ke,teamId:Ce}}assertTargetTeamAndChannel(oe){const{teamId:ce,channelId:ke}=this.targetState;return{teamId:this.assert(ce,`Expected teamId to be set for ${oe}`),channelId:this.assert(ke,`Expeted channelId to be set for ${oe}`)}}getChannelIdOrDie(){const{channelId:oe}=this.getClientHuddleState(),{channelId:ce}=this.targetState,ke=oe||ce;return this.assert(ke,"No channel ID or active huddle")}getThreadTsOrNothing(){const{threadTs:oe}=this.getClientHuddleState(),{threadTs:ce}=this.targetState;return oe||ce}getIsMultiDevice(){return!!this.targetState.isMultiDevice}getIsExperimentStandaloneHuddlesOn(){return!!this.targetState.experimentStandaloneHuddlesOn}getTeamIdOrDie(){const{teamId:oe}=this.getClientHuddleState(),{teamId:ce}=this.targetState,ke=oe||ce;return this.assert(ke,"No team ID or active huddle")}getCallIdOrDie(){const oe=(0,o.getStateForClientStore)(),ce=(0,H.E9)(oe);return this.assert(ce,"No call ID or active huddle")}getHuddleState(){const{huddleState:oe}=this.getClientHuddleState();return oe}dispatch(oe){const ce=this.getTeamIdOrDie();return(0,o.dispatchForTeamId)(ce,oe)}getState(oe){const ce=oe||this.getTeamIdOrDie();return(0,o.getStateByTeamId)(ce)}assert(oe,ce){if(oe==null)throw new Error(ce);return oe}getClogger(){if(this.clogger)return this.clogger;const{teamId:oe}=this.getClientHuddleState();return this.clogger=oe?(0,B.e)({state:(0,o.getStateByTeamId)(oe)}):(0,B.e)(),this.clogger}getLogger(){return this.logger?this.logger:(this.logger=(0,Z.Wo)({label:this.logLabel}),this.logger)}getTelemeter(){if(this.telemeter)return this.telemeter;const{teamId:oe}=this.getClientHuddleState();return oe?this.telemeter=(0,ee.Cy)({state:(0,o.getStateByTeamId)(oe)}):this.telemeter=(0,ee.rh)(),this.telemeter}constructor({logLabel:oe=p.o7,startStopTimeout:ce=he,disconnectTimeout:ke=be}={}){this.targetState={huddleState:C.RJ.NOT_STARTED},this.startStopDeferred=null;var Ce=this;this.safelyDisconnect=(0,t.coroutine)(function*(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;try{yield Ce.disconnect(Se)}catch(Ue){Ce.getLogger().error("Failed to disconnect from the Huddle. This may mean the user is still connected to the media server",Ue)}});var Me=this;this.scheduleHuddleStateExpirationIncrement=(0,t.coroutine)(function*(){if(Me.isTargetState()&&Me.targetState.huddleState!==C.RJ.STARTED)return;const Se=60*5,Ue={huddle_state_expiration_ts:new Date().getTime()/1e3+Se};yield Me.dispatch((0,j.c)({profile:Ue,reason:"increment-huddle-state-expiration-ts"})),setTimeout(Me.scheduleHuddleStateExpirationIncrement,(0,Y.A)(24e4,-.1,.1))}),this.logLabel=oe,this.startStopTimeout=ce,this.disconnectTimeout=ke,this.timeOfLastStateChange=null,this.timeOfLastSubStateChange=null}},"BaseHuddleStateManager");(0,U.ul)("baseHuddleStateManager",{setShortTimeoutValue:()=>{se=!0},resetShortTimeoutValue:()=>{se=!1}}),Object.defineProperty({shouldUseDebugTimeout:se},"shouldUseDebugTimeout",{get:()=>se,set:()=>{se=!0}});var W=e(7004355564),q=e(4715430489),re=e(6251210828),le=e(415910655),Ae=e(8872167513);class Te extends N{start(oe,ce,ke,Ce,Me,Se,Ue){var He=this;return(0,t.coroutine)(function*(){yield He.startHuddleWithTargetState(C.RJ.STARTED,oe,ce,ke,Ce,Me,Se,Ue)})()}prejoin(oe,ce,ke,Ce){var Me=this;return(0,t.coroutine)(function*(){yield Me.startHuddleWithTargetState(C.RJ.PRE_JOINED,oe,ce,ke,Ce,void 0)})()}setOthersInHuddle(){var oe=this;return(0,t.coroutine)(function*(){yield oe.setTargetSubState(C.J_.IN_PROGRESS_TOGETHER)})()}setAloneInHuddle(){var oe=this;return(0,t.coroutine)(function*(){yield oe.setTargetSubState(C.J_.IN_PROGRESS_ALONE)})()}dismissAloneInHuddleWarning(oe){var ce=this;return(0,t.coroutine)(function*(){const ke=oe?C.J_.INITIAL_ALONE_NOTICE_DISMISSED:C.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED;yield ce.setTargetSubState(ke)})()}startHuddleWithTargetState(oe,ce,ke,Ce,Me,Se,Ue,He){var Ye=this;return(0,t.coroutine)(function*(){var J;!((J=Ye.currentHuddleDeferred)===null||J===void 0)&&J.isPending()||(Ye.currentHuddleDeferred=(0,b.u)()),yield Ye.setTargetState({huddleState:oe,teamId:ce,channelId:ke,muted:Ce,callId:Me,threadTs:Se,isMultiDevice:Ue,experimentStandaloneHuddlesOn:He})})()}stop(){var oe=this;return(0,t.coroutine)(function*(){var ce;const ke=oe.getState(),Ce=oe.getHuddleState()!==C.RJ.PRE_JOINED&&(0,g.Cd)(ke)&&!oe.isProcessing();Ce&&(oe.getLogger().info(`Show huddle survey in ${oe.getChannelIdOrDie()}`),oe.dispatch((0,D.Cd)({timeSeen:new Date().toISOString()}))),yield oe.setTargetState({huddleState:Ce?C.RJ.SURVEY:C.RJ.NOT_STARTED}),oe.getHuddleState()===C.RJ.NOT_STARTED&&(!((ce=oe.currentHuddleDeferred)===null||ce===void 0)&&ce.isPending())&&oe.currentHuddleDeferred.resolve()})()}enterTerminalState(oe){var ce=this;return(0,t.coroutine)(function*(){var ke;!((ke=ce.pendingHuddleStart)===null||ke===void 0)&&ke.isPending()?ce.pendingHuddleStart.reject(oe):yield ce.handleErrorAndDisconnect(oe)})()}waitForHuddleToEnd(){return R.S.resolve(this.currentHuddleDeferred)}handleError(oe,ce){var ke;this.getLogger().error(oe);const Ce=ce===C.RJ.STARTING||ce===C.RJ.PENDING;this.dispatch((0,O.A)({errorCode:(0,C.dJ)(oe.name)?oe.name:oe.message,isJoinError:Ce})),!((ke=this.currentHuddleDeferred)===null||ke===void 0)&&ke.isPending()&&this.currentHuddleDeferred.resolve()}getOptimisticState(oe){let{teamId:ce,channelId:ke,huddleState:Ce}=oe;if([C.RJ.NOT_STARTED].includes(Ce))return{optimisticHuddleState:C.RJ.ENDING};if([C.RJ.SURVEY].includes(Ce))return{optimisticHuddleState:null};if(Ce===C.RJ.PRE_JOINED)return{optimisticHuddleState:C.RJ.PRE_JOINED,isPrejoin:!0};if(Ce===C.RJ.STARTED&&ce){var Me,Se;const Ue=(0,o.getStateByTeamId)(ce),He=(0,o.getStateForClientStore)(),Ye=(0,H.aQ)(He),J=(Ye==null?void 0:Ye.channelId)===ke||!((Me=(0,g.Yw)(Ue,ke))===null||Me===void 0||(Se=Me.activeParticipants)===null||Se===void 0)&&Se.length?null:C.RJ.STARTED;return(0,r.ty)(Ue,"huddles_global_mute")&&(0,o.dispatchForClientStore)((0,_.Bk)(!0)),{isPrejoin:!1,optimisticHuddleState:J}}return{}}fetchCredentials(){var oe=this;return(0,t.coroutine)(function*(){const ce=oe.getTeamIdOrDie(),ke=oe.getChannelIdOrDie(),Ce=oe.getThreadTsOrNothing(),Me=(0,o.getStateForClientStore)(),Se=(0,g.Yw)(oe.getState(),ke),{ttiTrace:Ue}=(0,Ae.A)().getAllTraceHandlers(),He=(0,H.WL)(Me,ke),Ye=oe.getIsMultiDevice(),J=(0,q.x)(oe.getState());if(Ue==null||Ue.createFetchCredentialsSpan(),He){Ue==null||Ue.setCachedTag({cached:!0});const ae=(Se==null?void 0:Se.id)||(0,L.RW)(He.credentials);if(ae){const Ve=(0,g.P_)(oe.getState(),ae);if(Ve&&Ve.hasEnded)throw yield oe.clearQuickJoinCredentials(),new Error(C.M6.ChimeMeetingEnded)}return oe.getTelemeter().count(m.K7),Ue==null||Ue.closeFetchCredentialsSpan(),{roomId:ae,server:He.credentials,isQuickJoinCredentials:!0}}if((0,E.CI)(oe.getState(ce))){const ae=(0,re._6)(oe.getState(),{channelId:ke});if(ae){const Ve=(0,g.it)(oe.getState(ce),ke),Be=(0,re.G5)(oe.getState(),{channelId:ke}),Ke=(0,L.RW)(ae);return Ve&&Be&&oe.dispatch((0,T.KN)({channelId:ke,threadTs:Ve,lastRead:Ve,reason:"huddles-rooms-join-kte"})),{roomId:Ke,server:ae,isQuickJoinCredentials:!1}}}return oe.getTelemeter().mark(m.aW),Ue==null||Ue.setCachedTag({cached:!1}),oe.dispatch((0,P.O3)({teamId:ce,channelId:ke,shouldFetchRegion:!Se,traceId:Ue==null?void 0:Ue.getTTITraceId(),parentSpanId:Ue==null?void 0:Ue.getFetchCredentialsSpanId(),...Ce&&{threadTs:Ce},...Ye&&{isMultiDevice:Ye}})).then(ae=>{var Ve,Be;if(!(!(ae==null||(Ve=ae.server)===null||Ve===void 0)&&Ve.meeting)||!(!(ae==null||(Be=ae.server)===null||Be===void 0)&&Be.attendee))throw new Error("create_meeting_failed");Ue==null||Ue.closeFetchCredentialsSpan(),oe.getTelemeter().mark(m.bW);const Ke=oe.getTelemeter().measure(m.aW,m.iE,m.bW);oe.getTelemeter().count(m.iE,Ke),(0,le.jm)({roomsJoinTime:Ke});let Re=ke;return oe.getIsExperimentStandaloneHuddlesOn()&&ae.channelId&&(Re=ae.channelId,oe.setTargetChannel(Re),(0,o.dispatchForClientStore)((0,_.Jc)(Re))),(0,o.dispatchForClientStore)((0,_.Yi)({channelId:Re,joinCredentials:ae.server,expiry:Date.now()+p.nq,fromInvite:!1})),ae.rootThreadTs&&ae.roomId&&(oe.dispatch((0,y.ZL)({huddleId:ae.roomId,thread:{channelId:Re,ts:ae.rootThreadTs}})),oe.dispatch((0,T.KN)({channelId:Re,threadTs:ae.rootThreadTs,lastRead:ae.rootThreadTs,reason:"canvas-rooms-join-api"})),oe.dispatch(J?(0,G.a)({channelId:Re,threadTs:ae.rootThreadTs,oldest:ae.rootThreadTs}):(0,S.a)({channelId:Re,threadTs:ae.rootThreadTs,oldest:ae.rootThreadTs}))),ae})})()}connectToChime(oe,ce){let{server:ke,roomId:Ce}=oe,{muted:Me,huddleState:Se}=ce;var Ue=this;return(0,t.coroutine)(function*(){const{ttiTrace:He}=(0,Ae.A)().getAllTraceHandlers();return He==null||He.createConnectToMediaServiceSpan(),(0,o.dispatchForClientStore)((0,_.qW)({callResult:{server:ke,roomId:Ce,regions:"",inviteResponses:[],virtualRoomId:""},isStartMuted:Me,waitForHuddleStart:(0,b.u)(),isPrejoin:Se===C.RJ.PRE_JOINED})),Ue.pendingHuddleStart=(0,b.u)(),Se===C.RJ.PRE_JOINED?R.S.resolve():Ue.pendingHuddleStart})()}resolvePendingJoin(oe){var ce=this;return(0,t.coroutine)(function*(){try{var ke;const Me=ce.getChannelIdOrDie(),{ttiTrace:Se}=(0,Ae.A)().getAllTraceHandlers(),Ue=ce.getState(),He=(0,o.getStateForClientStore)(),{callId:Ye,optimisticHuddleState:J}=(0,H.Qn)(He)||{},ae=(0,g.dy)(Ue);if(ce.getLogger().info(`Resolve pending huddle (${Me}, optimisticHuddleState: ${J}, has optimisticTopic: ${!!ae})`),!(!((ke=ce.pendingHuddleStart)===null||ke===void 0)&&ke.isPending()))throw new Error("No pending huddle start in resolvePendingJoin");const Ve=ce.assert(Ye,"Room ID is not defined for pending join"),Be=(0,r.ty)(Ue,"huddles_cc_by_default");if((0,L.UA)(Ue,Me)&&Be&&(ce.dispatch((0,d.A)()),ce.dispatch((0,u.dD)(!0)),ce.dispatch((0,u.jL)(!0))),ae){try{yield ce.dispatch((0,P.xB)({roomId:Ve,name:ae})),ce.dispatch((0,i.oU)({id:Ve,name:ae}))}catch(Re){ce.getLogger().error(Re)}ce.dispatch((0,v.Jc)(null))}(0,o.dispatchForClientStore)((0,_.u8)(Me)),Se==null||Se.closeConnectToMediaServiceSpan(),(0,B.e)({state:Ue}).track(K.EventId.HUDDLES_TIME_AUDIO_SESSION_STARTED,{contexts:{calls:{room_id:Ve,duration_ms:Math.round(oe),channel_id:Me}}}),(0,le.jm)({audioConnectedTime:oe}),(0,o.dispatchForClientStore)((0,_.Rh)({isSelfJoined:!0})),ce.pendingHuddleStart.resolve()}catch(Me){var Ce;(Ce=ce.pendingHuddleStart)===null||Ce===void 0||Ce.reject(Me)}})()}completePrejoin(oe){var ce=this;return(0,t.coroutine)(function*(){const ke=ce.getChannelIdOrDie(),Ce=(0,o.getStateForClientStore)(),{ttiTrace:Me}=(0,Ae.A)().getAllTraceHandlers(),Se=(0,H.WL)(Ce,ke);return Me==null||Me.setCachedTag({cached:!!Se}),Me==null||Me.createConnectToMediaServiceSpan(),(0,o.dispatchForClientStore)((0,_.f2)({...oe}))})()}clearQuickJoinCredentials(){return(0,t.coroutine)(function*(){const oe=(0,o.getStateForClientStore)(),{channelId:ce}=(0,H.Qn)(oe)||{};return(0,o.dispatchForClientStore)((0,_.WB)({channelId:ce}))})()}disconnect(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var ce=this;return(0,t.coroutine)(function*(){var ke;const Ce=ce.getState(),Me=(0,o.getStateForClientStore)(),{channelId:Se,teamId:Ue}=(0,H.Qn)(Me)||{};if(!oe)try{(0,Ae.A)().cleanup()}catch(He){ce.getLogger().error(`Error cleaning up huddle tracing: ${He}`)}try{(0,o.dispatchForClientStore)((0,_.Bk)(!1)),(0,E.Eg)(Ce)&&((0,o.dispatchForClientStore)((0,_.JM)()),(0,o.dispatchForClientStore)((0,_._u)({song:void 0}))),(0,o.dispatchForClientStore)((0,_.Rh)({isSelfJoined:!1}));const Ye=(0,a.WR)(Ce),J=Se&&(0,g.Yw)(Ce,Se);if(J&&Se){const ae=(J.activeParticipants||[]).filter(Be=>!((0,l.MZ)(Be)&&Be.slackId===Ye));ce.dispatch((0,i.oU)({id:J.id,activeParticipants:ae}));const Ve=(0,i.H6)(ce.getState(),J.id);Ve&&ce.dispatch((0,v.mr)({call:Ve,channelId:Se}))}if(Se){const ae=yield(0,o.dispatchForTeamId)(Ue,I({channelId:Se,userId:Ye})),Ve=(0,M.H7)(Ce),Be=(0,V.tc)(Ve);(ae||Be)&&(yield ce.clearQuickJoinCredentials()),(0,o.dispatchForClientStore)((0,_.u8)(Se))}}catch(He){ce.getLogger().error("An error occurred cleaning up huddle redux state. Proceeding to disconnect from media server.",He)}try{const He=(0,b.u)();(0,o.dispatchForClientStore)((0,_.pl)({waitForHuddleEnd:He})),yield He}catch(He){ce.getLogger().error("An error occurred while disconnecting from the media server.",He)}ce.dispatch((0,s.VL)({huddlesVideoActive:!1})),ce.dispatch((0,y.np)()),(0,o.dispatchForClientStore)((0,_.cx)()),!((ke=ce.pendingHuddleStart)===null||ke===void 0)&&ke.isPending()&&ce.pendingHuddleStart.reject(new Error("HuddleStateManager shutdown"))})()}}c(Te,"HuddleStateManager");const pe=(0,n.A)(()=>{const Ee=new Te;return(0,W.R)(Ee.waitForStartStop.bind(Ee)),Ee})},7004355564:(x,A,e)=>{"use strict";e.d(A,{A:()=>i,R:()=>s});var t=e(6422693406);let n;const s=c(l=>{n=l},"setWaitForStartStop"),i=c(()=>n?n():t.S.resolve(),"__WEBPACK_DEFAULT_EXPORT__")},3065433701:(x,A,e)=>{"use strict";e.d(A,{CE:()=>o,Gu:()=>a,vT:()=>n.vT});var t=e(6304789565),n=e(7366481123);const s=3*1e3,i={[n.vT.NoUserAudioStream]:!0,[n.vT.NoUserVideoStream]:!0,[n.vT.NoAudioOutputAudioElementError]:!0,[n.vT.NoAudioOutputAudioLevelError]:!0,[n.vT.PeerMuteRequest]:!0};let l={};const o=(0,t.Ay)("Display alert message for huddle call",(d,u,_)=>{let{alert:v,peerId:h}=_;if(!l[v]){if(i[v]){l[v]=setTimeout(()=>{l[v]&&(clearTimeout(l[v]),delete l[v]),d((0,n.Sb)({alert:v,peerId:h}))},s);return}d((0,n.Sb)({alert:v,peerId:h}))}});o.meta={name:"createThunk",key:"createThunkdisplayAlertMessage",description:"Display alert message for huddle call"};const a=(0,t.Ay)("Undisplay an alert message for huddle call",(d,u,_)=>{l[_]&&(clearTimeout(l[_]),delete l[_]),d((0,n.LL)(_))});a.meta={name:"createThunk",key:"createThunkhideAlertMessage",description:"Undisplay an alert message for huddle call"},Object.defineProperty({alertTimeouts:l},"alertTimeouts",{get:()=>l,set:d=>{l=d}})},5253428843:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(6304789565),n=e(5378147939);const s=(0,t.Ay)("Handle huddle error",(l,o,a)=>(0,n.A)().enterTerminalState(new Error(a.terminalState)));s.meta={name:"createThunk",key:"createThunkenterTerminalState",description:"Handle huddle error"};const i=s},2766373332:(x,A,e)=>{"use strict";e.d(A,{N$:()=>Ce,KD:()=>oe,kq:()=>Ee,HU:()=>ce});var t=e(9706240641),n=e(6304789565),s=e(6533394955),i=e(387328355),l=e(9864164947),o=e(7067820909),a=e(7621809678),r=e(3245843483),d=e(2778217221),u=e(6134475965),_=e(1049642794),v=e(2802517438),h=e(3134334389),f=e(3288846409),I=e(3037015781),p=e(4979382452),y=e(8029613601),g=e(4947127560),E=e(4636370173),M=e(2465132699),T=e(8523371695),D=e(3606117573),C=e(2683115972),m=e(3165300465),O=e(1610251172),P=e(4481313819),R=e(2562405183),L=e(5363983309),V=e(5286203919),B=e(9101533895),K=e(9884588328),b=e(8921478798),S=e(1407713935),G=e(1224315998),H=e(735940183),U=e(8320929653),F=e(4233000497);function Y(){return Y=Object.assign||function(Me){for(var Se=1;Se<arguments.length;Se++){var Ue=arguments[Se];for(var He in Ue)Object.prototype.hasOwnProperty.call(Ue,He)&&(Me[He]=Ue[He])}return Me},Y.apply(this,arguments)}c(Y,"_extends");const Z=new H.Ay("huddles"),ee={elementName:"huddles_invite_confirmation_dialog_cancel",eventId:G.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},j={elementName:"huddles_invite_confirmation_dialog_ok",eventId:G.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}};function ge(Me){let{closeModal:Se,...Ue}=Me;const{channelId:He,senderUserId:Ye}=Ue,J=(0,F.A)(He),{handleDecline:ae,handleJoin:Ve,isLoading:Be,inviteText:Ke}=(0,U.lc)(Ue),Re=(0,R.d4)(tt=>(0,b.I)(tt,Ye));let Fe=Z.t("Huddle with {dmPersons}",{dmPersons:Re,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"});const Ie=(0,R.d4)(tt=>(0,B.OL)(tt,He)),ze=(0,R.d4)(tt=>(0,I.uz)(Ie)?(0,K.SB)(tt,Ie,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0);ze&&(Fe=(0,S.JM)(Ie)?Z.t("Huddle with {dmPersons}",{dmPersons:ze,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}):Z.t("Huddle in {channelName}",{channelName:ze,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}));const qe=(0,f.cw)(V.hc)===He;(0,h.useEffect)(()=>{qe&&!Be&&(Se==null||Se())},[qe,Be,Se]);const st=(0,h.useCallback)(()=>{ae(),Se==null||Se()},[Se,ae]),ut="huddle-invite-join-modal";return h.createElement(P.A,Y({uiComponentName:G.UiComponentName.HUDDLES_INVITE_CONFIRMATION_DIALOG},J),h.createElement(p.A,{labelledby:ut,dataQa:ut,closeModal:Se,role:"dialog",className:"p-huddle_invite_join_modal",overlayClassName:"p-huddle_invite_join_modal__overlay",shouldReturnFocusAfterClose:!0},h.createElement(y.A,null,h.createElement(g.A,{title:Fe,id:ut})),h.createElement(E.A,null,h.createElement(M.A,null,Ke)),h.createElement(T.A,null,h.createElement(D.A,null,h.createElement(C.Ay,{type:"outline",onClick:st,"data-qa":"huddle_invite_join_cancel",autoClogProps:ee},Z.t("Not Now")),h.createElement(m.A,{type:"primary",loading:Be,onClick:Ve,"data-qa":"huddle_invite_join_go",autoClogProps:j,autoFocus:!0,"aria-label":Z.t("Join")},h.createElement(O.A,{type:"headphones"}),h.createElement("span",{className:"p-huddle_invite_join_modal__join_label"},Z.t("Join")))))))}c(ge,"HuddleInviteJoinModal"),ge.displayName="HuddleInviteJoinModal";const ne={HuddleInviteJoinModal:ge},ue=(0,L.A)(ge);var he=e(605594140),be=e(6422693406),xe=e(796111729),Le=e(8040098042),fe=e(2960290117),se=e(6415612447),Q=e(6470070112),k=e(56548687),N=e(571104883),$=e(8746998952),W=e(9712681361),q=e(5702042015),re=e(7429662208),le=e(3193155968),Ae=e(6695353875),Te=e(9629572172),Ne=e(352142497);const pe=c((Me,Se,Ue)=>{(0,k.e)({state:Me}).track(Se,{contexts:{calls:(0,Q.gG)(Me,Ue),ui_context:{action:G.UiAction.KEYDOWN}}})},"clogHuddlesEvent"),Ee=(0,n.Ay)("Start huddle in highlighted channel or current primary view",function(){var Me=(0,t.coroutine)(function*(Se,Ue,He){let{highlightedChannelId:Ye}=He;const J=(0,s.getStateForClientStore)(),ae=Ue(),Ve=(0,Ae.cc)(ae),Be=Ve,Ke=(0,re.e6)(ae),Re=(0,v.A)(ae),Fe=Be?(0,re.F8)(ae,{tab:Ke,container:le.mq.Primary}):null,Ie=Be?Fe==null?void 0:Fe.id:Re,ze=Ye||Ie,{channelId:qe,teamId:st}=(0,V.Ak)(J)||{};if(qe&&st&&(!Ye||Ye===qe)){(0,s.dispatchForTeamId)(st,(0,u.A)()),pe(ae,G.EventId.HUDDLES_LEAVE,qe);return}const ut=(0,V.aQ)(J);if(ut&&!Ye){const{channelId:_t,senderUserId:yt,callId:Kt,teamId:Qt}=ut;(0,s.dispatchForTeamId)(Qt,ue({channelId:_t,senderUserId:yt,callId:Kt}));return}if(!ze||!(0,Le.A)(ze)&&!(0,fe.Ay)(ze)){Ve&&Se((0,he.A)());return}const tt=(0,se.Y)(ae,ze);tt&&(0,Q.Bn)(ae,tt)&&(pe(ae,G.EventId.HUDDLES_JOIN,tt.id),Se((0,$.A)({channelId:tt.id,forceFocus:!0,entryPoint:W.su.KEYBOARD_SHORTCUT_JOIN_HUDDLE})))});return function(Se,Ue,He){return Me.apply(this,arguments)}}());Ee.meta={name:"createThunk",key:"createThunktoggleHuddleInHighlightedChannel",description:"Start huddle in highlighted channel or current primary view"};const oe=(0,n.Ay)("Start huddle in the current view",function(){var Me=(0,t.coroutine)(function*(Se,Ue,He,Ye){var J,ae;const Ve=Ue(),{shouldUseNavigate:Be,isChildWindow:Ke,getViewSet:Re}=Ye(Te.U),Fe=Re(Ve);(!Be||!Ke||(Fe==null||(J=Fe[le.mq.Primary])===null||J===void 0?void 0:J.viewType)!==Ne.D.Channel)&&Se(Ee({highlightedChannelId:void 0}));const Ie=Fe==null||(ae=Fe[le.mq.Primary])===null||ae===void 0?void 0:ae.id;Se(Ee({highlightedChannelId:Ie}))});return function(Se,Ue,He,Ye){return Me.apply(this,arguments)}}());oe.meta={name:"createThunk",key:"createThunktoggleHuddleInCurrentView",description:"Start huddle in the current view"};const ce=(0,n.Ay)("Toggle microphone from current value to opposite value",(Me,Se)=>{const Ue=(0,s.getStateForClientStore)(),{teamId:He,channelId:Ye}=(0,V.Ak)(Ue)||{};if(!He)return;const J=(0,s.getStateByTeamId)(He),ae=(0,i.Ng)(J),Ve=ae==null?void 0:ae.isMicrophoneEnabled;(0,s.dispatchForTeamId)(He,(0,_.A)(!Ve)),Me(Ve?(0,l.Ho)():(0,l.qc)()),(0,xe.Ay)({state:J}).info(d.o7,`Keyboard shortcut invoked -- toggling mic to ${Ve?G.EventId.HUDDLES_MUTE:G.EventId.HUDDLES_UNMUTE}`),Ye&&pe(J,Ve?G.EventId.HUDDLES_MUTE:G.EventId.HUDDLES_UNMUTE,Ye)});ce.meta={name:"createThunk",key:"createThunktoggleSelfMicrophone",description:"Toggle microphone from current value to opposite value"};let ke=!1;const Ce=c(Me=>{var Se;return(0,N.dY)("4.13.0")?(Me&&!ke&&((0,r.zin)(a.Sr.TOGGLE_MUTE,(0,t.coroutine)(function*(){const Ue=(0,s.getStateForClientStore)(),{teamId:He}=(0,V.Ak)(Ue)||{};He&&((0,s.dispatchForTeamId)(He,ce()),(0,o.Sr)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,q.A)()))})),ke=!0),(Se=(0,r.wzE)(a.Sr.TOGGLE_MUTE,Me))===null||Se===void 0?void 0:Se.then(()=>Me)):be.S.resolve(!1)},"maybeToggleGlobalMuteShortcut")},1883693579:(x,A,e)=>{"use strict";e.d(A,{uZ:()=>be,Tn:()=>Le,Cd:()=>xe});var t=e(796111729),n=e(6304789565),s=e(6533394955),i=e(387484329),l=e(2778217221),o=e(4250409994),a=e(9712681361),r=e(6422693406),d=e(5046160032),u=e(4914127094),_=e(8445020572),v=e(7299481592),h;(function(fe){fe.HuddleSurvey="huddle-survey",fe.ListsSurvey="lists-survey"})(h||(h={}));var f;(function(fe){fe.NoAudioInput="no-audio-input",fe.NoAudioOutput="no-audio-output",fe.LowVideoQuality="low-video-quality",fe.LowAudioQuality="low-audio-quality",fe.VideoNotWorking="video-not-working",fe.DeviceSelectionError="device-selection-error",fe.Disconnected="disconnected",fe.SomethingElse="something-else",fe.Dismiss="dismiss"})(f||(f={}));function I(fe){return fe.isOk}c(I,"isOkResult");const p=(0,n.Ay)("Send survey results",(fe,se,Q)=>{var k,N;const $=se();var W;const q=(W=Q.callId)!==null&&W!==void 0?W:$.activeCall.id;if(!q)return(0,v.M)(!1,"There should have been a call in order to send survey results."),r.S.reject(new Error("SendSurveyResult: No call"));var re;const le=(re=Q.type)!==null&&re!==void 0?re:"vo-survey",Ae=I(Q)?void 0:{response_requested:!1,comments:Q.comments,is_video:(k=$.activeCall)===null||k===void 0?void 0:k.hasVideoBeenEnabled,is_ss:(N=$.activeCall)===null||N===void 0?void 0:N.hasScreenshareBeenEnabled,list_id:Q==null?void 0:Q.listId,list_entry_point:Q==null?void 0:Q.listEntryPoint},Te=I(Q)||le===h.ListsSurvey?"ok":Q.notOkResponses.join(","),Ne={room:q,event_type:le,event_value:Te,event_metadata:JSON.stringify(Ae)};return(0,d.A)({apiUrl:"/api/",method:"screenhero.rooms.userEvent",token:(0,u.F)($),versionTs:(0,_.HF)(),versionUid:(0,_.X3)(),args:Ne})?r.S.resolve():r.S.reject(new Error("SendSurveyResult: beacon failed"))});p.meta={name:"createThunk",key:"createThunksendSurveyResult",description:"Send survey results"};var y=e(3134334389),g=e(2562405183),E=e(6313685253),M=e(6122756707),T=e(6084388622),D=e(3989454579),C=e(6948117092),m=e(5016574668),O=e(3855029223),P=e(4798756512),R=e(6310192986),L=e(1616072515);const V="survey";var B;(function(fe){fe.Good="good",fe.Bad="bad",fe.Dismiss="dismiss"})(B||(B={}));const K="HUDDLES-SURVEY-TRACE",b=c(fe=>{let{teamId:se,callId:Q,results:k}=fe;const N=se?(0,t.Ay)({label:K,teamId:se}):(0,t.Wo)({label:K});if(!se){N.warn("Missing team id. Exiting early");return}const $=(0,O.E)({teamOrEnterpriseId:se}),W=$.createTrace({traceName:m.Sq,tags:{__dataset:m.RN},samplingOptions:{sampleRate:1,sampleType:P.tS.SESSION}}),q=W.startSpan(V),re={...k};(0,C.A)(re,"comments");const{notOkResponses:le,summary:Ae}=re||{};if(!Q){N.warn("Missing callId. Exiting early");return}if(!Ae){N.warn("Missing summary. Exiting early");return}try{N.info(`Processing huddle survey response. callId: ${Q} - traceId: ${W.getTraceId()} - results: ${JSON.stringify(re)}`)}catch(pe){N.error(pe)}const Te={teamId:se,callId:Q,surveySummary:Ae,surveyResponseCount:(le==null?void 0:le.length)||0,surveyResponses:le==null?void 0:le.join(" ")},Ne=(0,L.tT)({...Te,...(0,R.vP)()});q.addTags(Ne),q.close(),N.info(`Reporting huddle survey trace with ${Object.keys(Ne).length} tags (${W.getTraceId()})`),N.debug("Tags attached",Ne),$.reportTrace(W),$.clearTrace(W)},"reportHuddleSurveyResultsTrace");var S=e(8847766420),G=e(980293773),H=e(7138682671),U=e(8472205500),F=e(735940183),Y=e(8739505998),Z=e(5363983309),ee=e(6968387112);const j=new F.Ay("huddles");function ge(fe){return(0,E.A)(fe,(se,Q,k)=>(Q&&se.push(k),se),[])}c(ge,"collectResponses");const ne=c(fe=>{let{closeModal:se,callId:Q}=fe;const k=(0,g.d4)(S.ZT),[N,$]=(0,y.useState)({}),[W,q]=(0,y.useState)(""),[re,le]=(0,y.useState)(!1),Ae=`https://${(0,ee.qF)()}`,Te=(0,M.wA)(),Ne=[{value:f.NoAudioInput,text:j.t("Others couldn\u2019t hear me")},{value:f.NoAudioOutput,text:j.t("I couldn\u2019t hear others")},{value:f.DeviceSelectionError,text:j.t("Slack selected the wrong microphone/speaker, or couldn\u2019t find my device")},{value:f.LowAudioQuality,text:j.t("Audio was low quality (e.g., it lagged or sounded choppy/robotic)")},{value:f.LowVideoQuality,text:j.t("Video was low quality (e.g., slow, not in sync with audio, or pixelated)")},{value:f.VideoNotWorking,text:j.t("Video didn\u2019t work at all")},{value:f.Disconnected,text:j.t("I got disconnected from the Huddle")},{value:f.SomethingElse,text:j.t("Something else went wrong")}],pe=h.HuddleSurvey,Ee=(0,y.useCallback)(()=>{le(!0);const Me={isOk:!1,notOkResponses:ge(N),comments:W,callId:Q,type:pe};Te(p(Me)).then(()=>{k&&b({teamId:k,callId:Q,results:{summary:B.Bad,...Me}}),le(!1),se==null||se()})},[Q,N,se,k,W,Te,pe]),oe=(0,y.useCallback)(()=>{Te(p({isOk:!1,notOkResponses:[f.Dismiss],callId:Q,type:pe})),se==null||se()},[se,Q,pe,Te]),ce=(0,y.useCallback)(Me=>q(Me),[]),Ce=!!N[f.SomethingElse];return y.createElement(G.dW,{closeModal:oe,showCloseButton:!0,centered:!0,maxWidth:600},y.createElement(y.Fragment,null,y.createElement(G.rQ,null,y.createElement(G.Rc,{title:j.t("What went wrong?")})),y.createElement(G.$m,null,y.createElement(G.qf,null,Ne.map(Me=>{let{value:Se,text:Ue}=Me;return y.createElement(H.A,{text:Ue,key:Se,id:Se,type:"inline",cursor:"pointer",className:"p-huddle_survey_modal_checkbox"},y.createElement(D.A,{name:Se,value:Se,checked:!!N[Se],onChange:He=>$(Ye=>({...Ye,[Se]:He.target.checked}))}))}),Ce&&y.createElement(H.A,{className:"padding_top_75",text:j.t("If you\u2019d like, please share any other details here:"),id:"details",optional:!0},y.createElement(U.A,{name:"details",id:"details",onChange:ce,value:W})))),y.createElement(G.jl,null,y.createElement(Y.A,{href:`${Ae}/privacy-policy`,target:"_blank"},j.t("Privacy Policy")),y.createElement(G.ox,null,y.createElement(T.$n,{onClick:oe,type:"outline"},j.t("Dismiss")),y.createElement(T.lV,{loading:re,onClick:Ee,"aria-label":j.t("Send")},j.t("Send"))))))},"HuddleSurveyModal");ne.displayName="HuddleSurveyModal";const ue=(0,Z.A)(ne);var he=e(5286203919);const be=(0,n.Ay)("Close the mini survey after a postive response",(fe,se,Q)=>{let{channelId:k}=Q;(0,s.dispatchForClientStore)((0,o.Rh)({channelId:k,optimisticHuddleState:null,huddleState:a.RJ.NOT_STARTED}))});be.meta={name:"createThunk",key:"createThunkcloseMiniSurvey",description:"Close the mini survey after a postive response"};const xe=(0,n.Ay)("Set the date for when the user last saw the huddle survey",(fe,se,Q)=>{let{timeSeen:k}=Q;fe((0,i.AZ)({pref:"huddle_survey_last_seen",value:k}))});xe.meta={name:"createThunk",key:"createThunksetHuddleLastSeenSurvey",description:"Set the date for when the user last saw the huddle survey"};const Le=(0,n.Ay)("Record the result of the mini survey we first display the user after a huddle ends.",(fe,se,Q)=>{let{result:k}=Q;const N=(0,s.getStateForClientStore)(),$=(0,he.E9)(N),W=(0,he.hc)(N),q=(0,he.l4)(N),re=h.HuddleSurvey;let le=a.RJ.NOT_STARTED,Ae;switch(k){case"bad":$&&fe(ue({callId:$}));break;case"good":le=a.RJ.SURVEY_GOOD,fe(p({isOk:!0,callId:$,type:re})),Ae=B.Good;break;case"dismiss":Ae=B.Dismiss,fe(p({isOk:!1,callId:$,notOkResponses:[f.Dismiss]}));break;default:}Ae&&b({teamId:q,callId:$,results:{summary:Ae}}),(0,s.dispatchForClientStore)((0,o.Rh)({channelId:W,optimisticHuddleState:null,huddleState:le})),(0,t.Ay)({getState:se}).info(l.o7,`Marking huddle as ${le} in component: huddle-survey`)});Le.meta={name:"createThunk",key:"createThunkrecordMiniSurvey",description:"Record the result of the mini survey we first display the user after a huddle ends."}},6741408957:(x,A,e)=>{"use strict";e.d(A,{GD:()=>f,Ss:()=>p,iz:()=>g});var t=e(3398586081),n=e(1289024643),s=e(4540171876),i=e(6422693406),l=e(3037015781),o=e(8352634987),a=e(6304789565),r=e(6533394955),d=e(9640070512),u=e(2527782504),_=e(5286203919),v=e(5881236351);const h=c((M,T)=>(0,r.dispatchForTeamId)(M,(0,s.Db)({callIds:T,reason:"all-calls-store/conditional-fetch"})).then(D=>D.map(C=>(0,r.dispatchForTeamId)(M,(0,n.oU)(C)))),"fetchAndUpsert"),f=(0,t.A)(()=>new o.Ay({storeKey:"allCalls",fetch:h,isEnabled:()=>!0})),I=c((M,T)=>{const D=T.map(C=>((0,r.dispatchForTeamId)(M,(0,n.oU)(C)),C.id));f().markObjectsAsFresh(M,D)},"upsertCalls"),p=(0,t.A)(()=>new l.Ay({fetch:(M,T)=>(0,r.dispatchForTeamId)(M,(0,s.Db)({callIds:T,reason:"all-calls-store/unknown-fetch"})),upsertKnown:I,upsertNonExistent:(M,T)=>I(M,T.map(D=>{let{id:C}=D;return{id:C,name:""}}))}));let y=0;const g=(0,a.Ay)("Set a huddle topic",(M,T,D)=>{let{channelId:C,topic:m}=D;const O=(0,r.getStateForClientStore)();if((0,_.aS)(O))return M((0,v.Jc)(m)),i.S.resolve();const P=(0,_.E9)(O);if(!P)return i.S.reject(new Error(`No callId for channel ${C}`));M((0,v.Jc)(m)),y+=1;const R=y;return M((0,s.xB)({roomId:P,name:m})).then(()=>M((0,n.oU)({id:P,name:m}))).finally(()=>{R===y&&M((0,v.Jc)(null)),M((0,d.H)({focusKey:u.Ay.HUDDLE_SIDEBAR_TOPIC,forceFocus:!0}))})});g.meta={name:"createThunk",key:"createThunksetHuddleTopic",description:"Set a huddle topic"};const E={fetchAndUpsert:h}},666760496:(x,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(9706240641),n=e.n(t),s=e(4540171876),i=e(6422693406),l=e(6304789565),o=e(387328355),a=e(6533394955),r=e(9548972574),d=e(7723800688),u=e(1224315998),_=e(56548687),v=e(6470070112);const h=(0,l.Ay)("Notify members to join huddle",function(){var I=(0,t.coroutine)(function*(p,y,g){let{channelId:E,userIds:M}=g;const T=[];if(M&&M.length>0){M.forEach(L=>{p((0,o.oN)({userId:L})),T.push(new i.S((V,B)=>{p((0,s.OB)({userId:L,channelId:E,reason:"huddle-notify-member"})).then(V).catch(K=>{const b=new Error(K.message);b.invitedMemberId=L,b.inviteRejectionReason=K.name,B(b)})}))});const D=(0,a.getStateForClientStore)(),C=y(),m=(0,r.Yw)(C,E),O=(0,v.$t)(C,{huddleId:m==null?void 0:m.id}),P=(0,v.kn)(D),R=(0,v.UE)(D);(0,_.e)({state:C}).track(u.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_properties:{element_name:d.Hi.INVITATION_SENT},action:u.UiAction.INVITE_PEOPLE},calls:R},invited_user_ids:M,...O,...P})}return i.S.all(T).then(D=>D)});return function(p,y,g){return I.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkinviteMembers",description:"Notify members to join huddle"};const f=h},1070786785:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>r,V3:()=>o,kb:()=>a});var t=e(6304789565),n=e(6533394955),s=e(6134475965),i=e(5286203919);const l=(0,t.Ay)("End huddle for channelId if any",(d,u,_)=>{const v=(0,n.getStateForClientStore)(),h=(0,i.hc)(v);h&&h===_&&d((0,s.A)())});l.meta={name:"createThunk",key:"createThunkmaybeEndHuddle",description:"End huddle for channelId if any"};const o=(0,t.Ay)("End last active huddle for channelId if any",(d,u,_)=>{var v;const h=(0,n.getStateForClientStore)(),f=(v=(0,i.Qn)(h))===null||v===void 0?void 0:v.channelId,I=(0,i.Ak)(h);(f&&f===_||I===null&&f&&f!==_)&&d((0,s.A)())});o.meta={name:"createThunk",key:"createThunkmaybeEndLastActiveHuddleByChannelId",description:"End last active huddle for channelId if any"};const a=(0,t.Ay)("End huddle for call Id and channelId if any",(d,u,_)=>{let{channelId:v,callId:h}=_;const f=(0,n.getStateForClientStore)(),{channelId:I,callId:p}=(0,i.Qn)(f)||{};I&&I===v&&p===h&&d((0,s.A)())});a.meta={name:"createThunk",key:"createThunkmaybeEndHuddleByChannelAndCallId",description:"End huddle for call Id and channelId if any"};const r=l},9864164947:(x,A,e)=>{"use strict";e.d(A,{Gt:()=>K,Ho:()=>R,LW:()=>P,Md:()=>C,OF:()=>U,Ux:()=>V,Wf:()=>H,dr:()=>y,fH:()=>m,gA:()=>O,gV:()=>S,qc:()=>L,rV:()=>B,s5:()=>b});var t=e(6998663753),n=e(5950652755),s=e(6304789565),i=e(2778217221),l=e(796111729),o=e(8664881451),a=e(2854284421),r=e(2047021170),d=e(3986753718),u=e(7022928841),_=e(5332875232),v=e(2791814261),h=e(5387083734),f=e(735940183);const I=(0,l.Wo)({label:"HUDDLE-SOUNDS"}),p=[a.o8,a.CZ,a.Ji,a.PV,a.wg,a.sQ,a.o3,a.nP,a.zd,a.qP],y=(0,t.A)(()=>{(0,h.IE)("pre-cache-huddles-sounds",()=>{p.forEach(F=>{I.info(`Adding huddle sound effect to in-memory cache: ${F}`),(0,o.qG)(F)})},{delay:1e3})}),g=(0,n.A)(function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(F?a.Ji:a.o8,{loop:!1})},7e3,{leading:!0,trailing:!1}),E=(0,n.A)(function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(F?a.PV:a.CZ,{loop:!1})},7e3,{leading:!0,trailing:!1}),M=(0,n.A)(function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(F?a.DT:a.o,{loop:!1})},0,{leading:!0,trailing:!1}),T=(0,n.A)((F,Y,Z)=>{let ee=Y?a.sQ:a.wg;const j=.25,ge=(0,v.L)(Z),ne=(0,_.DR)(Z);Y&&F==="gong"&&ne&&ge&&(ee=a.o3);const ue=(0,_.Ey)(Z);Y&&F==="duck"&&ue&&ge&&(ee=a.nP),(0,o.ZH)(ee,{loop:!1,volume:j})},5e3,{leading:!0,trailing:!1}),D=c(F=>!(0,r.ty)(F,"mute_huddle_sounds"),"canPlayHuddleSound"),C=(0,s.Ay)("Play sound when user joins",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnUserJoin"),g(!1))});C.meta={name:"createThunk",key:"createThunkplaySoundOnUserJoin",description:"Play sound when user joins"};const m=(0,s.Ay)("Play sound when user leaves",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnUserLeft"),E(!1))});m.meta={name:"createThunk",key:"createThunkplaySoundOnUserLeft",description:"Play sound when user leaves"};const O=(0,s.Ay)("Play sound when you join",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnYouJoin"),g(!0))});O.meta={name:"createThunk",key:"createThunkplaySoundOnYouJoin",description:"Play sound when you join"};const P=(0,s.Ay)("Play sound when you leave",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnYouLeft"),E(!0))});P.meta={name:"createThunk",key:"createThunkplaySoundOnYouLeft",description:"Play sound when you leave"};const R=(0,s.Ay)("Play sound when user mutes the mic using keyboard shortcut",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnMicMute"),M(!0))});R.meta={name:"createThunk",key:"createThunkplaySoundOnMicMute",description:"Play sound when user mutes the mic using keyboard shortcut"};const L=(0,s.Ay)("Play sound when user unmutes the mic using keyboard shortcut",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnMicUnmute"),M(!1))});L.meta={name:"createThunk",key:"createThunkplaySoundOnMicUnmute",description:"Play sound when user unmutes the mic using keyboard shortcut"};const V=(0,s.Ay)("Play sound when reaction is received",(F,Y,Z)=>{let{emoji:ee,isEffect:j}=Z;const ge=Y();(0,r.ty)(ge,"huddles_reactions_play_sound")&&D(ge)?((0,l.Ay)({getState:Y}).info(i.o7,"playSoundOnReaction"),T(ee,j,ge)):(0,l.Ay)({getState:Y}).info(i.o7,"did not playSoundOnReaction")});V.meta={name:"createThunk",key:"createThunkplaySoundOnReaction",description:"Play sound when reaction is received"};const B=(0,s.Ay)("Plays the huddle invite sound",(F,Y)=>{const Z=Y();(0,d.YX)(Z)||!D(Z)||(0,o.ZH)((0,u.qF)(Z))});B.meta={name:"createThunk",key:"createThunkplayHuddleInviteSound",description:"Plays the huddle invite sound"};const K=(0,s.Ay)("Plays the huddle new requester sound",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playHuddleNewRequesterSound"),(0,o.ZH)(a.rT,{loop:!1}))});K.meta={name:"createThunk",key:"createThunkplayHuddleNewRequesterSound",description:"Plays the huddle new requester sound"};const b=(0,s.Ay)("Plays the huddle request accepted sound",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playHuddleNewRequestAcceptedSound"),(0,o.ZH)(a.rT,{loop:!1}))});b.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestAcceptedSound",description:"Plays the huddle request accepted sound"};const S=(0,s.Ay)("Plays the huddle request expired sound",(F,Y)=>{D(Y())&&((0,l.Ay)({getState:Y}).info(i.o7,"playHuddleNewRequestExpiredSound"),(0,o.ZH)(a.xE,{loop:!1}))});S.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestExpiredSound",description:"Plays the huddle request expired sound"};const G=c(F=>{let Y={onSound:void 0,offSound:void 0};switch(F){case"ja-JP":Y={onSound:a.Q6,offSound:a.uv};break;case"es-LA":case"es-ES":Y={onSound:a.ll,offSound:a.PK};break;default:Y={onSound:a.sH,offSound:a.IZ};break}return Y},"getHuddleSounds"),H=(0,s.Ay)("Plays the huddle recording on sound",(F,Y)=>{const Z=(0,f.Yp)(),{onSound:ee,offSound:j}=G(Z);ee&&j&&((0,o.ds)(ee),(0,o.ds)(j),(0,o.ZH)(ee,{loop:!1}))});H.meta={name:"createThunk",key:"createThunkplayHuddleRecordingOnSound",description:"Plays the huddle recording on sound"};const U=(0,s.Ay)("Plays the huddle recording off sound",(F,Y)=>{const Z=(0,f.Yp)(),{onSound:ee,offSound:j}=G(Z);ee&&j&&((0,o.ds)(ee),(0,o.ds)(j),(0,o.ZH)(j,{loop:!1}))});U.meta={name:"createThunk",key:"createThunkplayHuddleRecordingOffSound",description:"Plays the huddle recording off sound"}},4156857608:(x,A,e)=>{"use strict";e.d(A,{a:()=>y});var t=e(6304789565),n=e(6533394955),s=e(4250409994),i=e(7434063642),l=e(8783285437),o=e(6758774099),a=e(1990810649),r=e(387328355),d=e(8872167513),u=e(2709531527),_=e(5795074931),v=e(4921059838),h=e(3829348308),f=e(8847766420),I=e(488107601),p=e(5332875232);const y=(0,t.Ay)("Dispatch a reaction to the middleware and the current store to notify user has sent a reaction",(g,E,M)=>{let{emoji:T,emojiUrl:D,reactionType:C=a.o.Standard}=M;if(C===a.o.Sticker)g((0,i.Kp)({emoji:T})),(0,n.dispatchForClientStore)((0,s.M4)(T));else{const P=E(),R=(0,f.ZT)(P),L=(0,p.hw)(P);let V=D;if(L&&!D&&!(0,v.A)(P,T)){var m;V=(m=(0,h.Ez)(P,{text:T,teamId:R,emojiMode:I.VZ.AS_TEXT,emojiSize:I.lw.MEDIUM}))!==null&&m!==void 0?m:void 0}(0,n.dispatchForClientStore)((0,s.nU)({emoji:T,reactionType:C,emojiUrl:V})),g((0,r._x)({peerId:"self",emoji:T,isEmoji:!0,reactionType:C,emojiUrl:V}));const{huddleEventsTrace:B}=(0,d.A)().getAllTraceHandlers();B==null||B.update({name:u.p.REACTION,type:u.G.ONCE,tags:{reactionType:C}})}const O=(0,_.WR)(E());O&&g((0,o.U$)({type:l.v.SEND_REACTION,memberId:O,timestampMs:Date.now(),emoji:T}))});y.meta={name:"createThunk",key:"createThunksendReaction",description:"Dispatch a reaction to the middleware and the current store to notify user has sent a reaction"}},1049642794:(x,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(9706240641),n=e.n(t),s=e(8571983633),i=e(6304789565),l=e(6533394955),o=e(8847766420),a=e(2778217221),r=e(4250409994),d=e(6694086724),u=e(5286203919),_=e(571104883),v=e(796111729),h=e(462591818),f=e(7434063642),I=e(6251210828),p=e(387328355),y=e(9365970888),g=e(3065433701),E=e(700984029);const M=(0,i.Ay)("Enable or disable local microphone",function(){var D=(0,t.coroutine)(function*(C,m,O){const P=(0,l.getStateForClientStore)(),R=m(),L=(0,v.Ay)({state:R}),V=(0,y.Hc)(R);if((0,I.RT)(R)||C((0,f.G4)({canShowMutedBanner:!0})),(0,_.y3)()||(yield(0,l.dispatchForClientStore)((0,E.e$)({mediaResourceType:h.mT.MICROPHONE}))),L.info(a.o7,`Set microphone to ${O}`),V&&O){L.warn(a.o7,"Microphone could not be set to enabled as access to the device was blocked"),(0,_.y3)()?C((0,g.CE)({alert:g.vT.NoSystemAudio})):C((0,g.CE)({alert:g.vT.NoBrowserAudioPermission}));return}const{teamId:K}=(0,u.Qn)(P)||{};if(K&&K!==(0,o.ZT)(R)){(0,l.dispatchForTeamId)(K,M(O));return}(0,s.A)(O)||((0,l.dispatchForClientStore)((0,r.I9)(O)),O&&(0,u.wQ)(P)&&C((0,d.e)({clearOnEndedCallback:!0,logContext:"huddle-set-self-microphone"}))),C((0,p.kT)({id:"self",isMicrophoneEnabled:O}))});return function(C,m,O){return D.apply(this,arguments)}}());M.meta={name:"createThunk",key:"createThunksetSelfMicrophone",description:"Enable or disable local microphone"};const T=M},8746998952:(x,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(6304789565),n=e(6422693406),s=e(796111729),i=e(9190452268),l=e(1452921056),o=e(5319025363),a=e(6533394955),r=e(6470070112),d=e(5286203919),u=e(5933621899),_=e(9680914051),v=e(8330768070),h=e(6259241484),f=e(716227588),I=e(1655938719),p=e(5332875232),y=e(5881236351),g=e(9712681361),E=e(9301413712),M=e(2047021170),T=e(5203103513);const D=(0,t.Ay)("Join/start huddle, but confirm with shouty rooster modal first",(O,P,R)=>{let{channelId:L,threadTs:V,muted:B,callId:K,forceFocus:b,entryPoint:S,forceConfirmation:G,markTelemeter:H,isMultiDevice:U,isStandaloneHuddle:F}=R,Y=!1;const Z=(0,p.Rk)(P()),ee=(0,M.ty)(P(),T.aI)||!1;if(Z){const ue=(0,a.getClientStoreInstance)().getState(),he=(0,d.J0)(ue);Y=L!==void 0&&he!==L&&ee}const j=c(()=>{var ne;H&&(0,i.Cy)({state:P()}).mark(_.qr),(ne=O((0,l.A)({channelId:L,threadTs:V,muted:B,callId:K,forceFocus:b,entryPoint:S,isMultiDevice:U,isStandaloneHuddle:F})))===null||ne===void 0||ne.catch(ue=>{(0,s.Ay)({getState:P}).error("Could not start huddle",ue)})},"onConfirm"),ge=c(()=>{Y&&L&&O((0,E._)({channelId:L,handleJoin:j}))},"showHuddlesJoinPreview");if((0,r.Qj)(P(),L,V)||G){V?O((0,I.iR)({event:{type:h.jo.HUDDLE_STARTED_FROM_THREAD}})).then(()=>{(0,f.Hp)(P(),h.xu.LAUNCH_MODAL)===h.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL?O((0,u.Wx)({channelId:L??"",onConfirm:j})):Y?ge():j()}):O((0,v.Oe)({channelId:L??"",onConfirm:j}));return}Y?ge():j()});D.meta={name:"createThunk",key:"createThunkstartHuddleWithShoutyRooster",description:"Join/start huddle, but confirm with shouty rooster modal first"};const C=(0,t.Ay)("Join/start huddle, but confirm if already in another huddle",(O,P,R)=>{const{channelId:L}=R,V=P(),B=(0,p.pL)(V),K=(0,a.getStateForClientStore)(),b=(0,d.hc)(K),S=(0,d.EG)(K),G=(0,d.$V)(K),H=(0,r.r5)(V,{channelId:L});if(O((0,o.z)()),b&&L!==b&&!G){O((0,v.Y6)({prevChannelId:b,nextChannelId:L??"",onConfirm:()=>{O(D({...R,markTelemeter:!1}))}}));return}if(B&&H){O((0,y.$Z)({channelId:L??"",onConfirm:U=>{let{isMultiDevice:F}=U;return O(D({...R,markTelemeter:!1,isMultiDevice:F}))}}));return}return b&&L===b&&S===g.RJ.STARTED?n.S.resolve():O(D({...R,markTelemeter:!0}))});C.meta={name:"createThunk",key:"createThunkstartHuddleWithConfirmation",description:"Join/start huddle, but confirm if already in another huddle"};const m=C},1452921056:(x,A,e)=>{"use strict";e.d(A,{A:()=>se});var t=e(9706240641),n=e(92886754);let s=null;const i=c(()=>s,"getOpenChannelId"),l=c(Q=>{s=Q},"setOpenChannelId");var o=e(3134334389),a=e(2562405183),r=e(3051824855),d=e(825587348),u=e(8739505998),_=e(4481313819),v=e(1224315998),h=e(6968387112),f=e(735940183),I=e(3078708518),p=e(4761125736);const y=new f.Ay("huddles");function g(Q){let{closeModal:k}=Q;const N=(0,a.d4)(I.A),$=(0,a.d4)(re=>(0,p._Z)(re,"adoption_instant_slack"))==="treatment";let W,q;if((0,n.yh)())W=y.t("Your browser does not support Huddles"),q=N&&$?y.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend switching to <chrome-link>Chrome</chrome-link>.",{},re=>{let{text:le}=re;return o.createElement(u.A,{href:"https://www.google.com/chrome"},le)}):y.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend downloading the <desktop-link>Slack desktop app</desktop-link>, or you can switch to <chrome-link>Chrome</chrome-link>.",{},re=>{let{tag:le,text:Ae}=re;switch(le){case"desktop-link":return o.createElement(u.A,{href:`https://${(0,h.qF)()}/downloads`},Ae);case"chrome-link":return o.createElement(u.A,{href:"https://www.google.com/chrome"},Ae);default:return null}});else if((0,n.WT)())W=y.t("Please update Slack"),q=y.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to Huddles \u2014 as well as bug fixes and an all-around smoother experience.");else return null;return o.createElement(_.A,{eventId:v.EventId.HUDDLES_ALERT_SHOWN,uiComponentName:v.UiComponentName.HUDDLES_UNSUPPORTED_ALERRT,clogImpression:!0},o.createElement(d.A,{onClose:k,onSubmit:k,showCancelButton:!1,showSubmitButton:!0,title:W,submitButtonText:y.t("OK")},q))}c(g,"HuddleUnsupportedAlert"),g.displayName="HuddleUnsupportedAlert";const E=(0,r.e)(g);var M=e(6422693406),T=e(6304789565),D=e(5881236351),C=e(5378147939),m=e(6758774099),O=e(8847766420),P=e(1289024643),R=e(7304871158);const L=(0,T.Ay)("End active call",(Q,k)=>{const N=(0,P.J2)(k());if(N){const $=(0,P.Ms)(N);$&&!$.isClosed()&&(0,R.R)($,"endActiveCall")}});L.meta={name:"createThunk",key:"createThunkmaybeEndActiveCall",description:"End active call"};var V=e(9640070512),B=e(2527782504),K=e(2832209848),b=e(7843142872),S=e(6533394955),G=e(9548972574),H=e(8935621861),U=e(5332875232),F=e(5795074931),Y=e(2791814261),Z=e(5286203919),ee=e(9712681361),j=e(7723800688),ge=e(56548687),ne=e(6470070112),ue=e(6290537170),he=e(5470425448),be=e(5071086688),xe=e(4250409994),Le=e(8872167513);const fe=(0,T.Ay)("Start huddle",function(){var Q=(0,t.coroutine)(function*(k,N,$){let{channelId:W,threadTs:q,muted:re,callId:le,forceFocus:Ae,entryPoint:Te=ee.su.UNKNOWN,isMultiDevice:Ne,isStandaloneHuddle:pe}=$;const Ee=N();if((0,ue.Vo)(Ee)?(0,S.dispatchForClientStore)((0,xe.t2)(!1)):(0,S.dispatchForClientStore)((0,xe.t2)(!0)),k(L()),k((0,m.Lm)(!1)),k((0,m.T3)()),(0,n.WT)()||(0,n.yh)())return k(E()),M.S.resolve();k((0,b.g6)({experimentHuddlesDiscoveryCallsGroupTreatment:(0,U.Ms)(Ee),interactionType:K.X8.Click})),i()!==W&&k((0,D.Es)({channelId:W??"",open:!1}));const ce=(0,Y.L)(Ee),ke=(0,O.ZT)(Ee);(0,Le.A)().initializeTraces({teamId:ke,isTinySpeck:ce});const Ce=!!(0,Z.gj)((0,S.getStateForClientStore)()),Me=yield H.A.getInstance().getNearestChimeMediaRegion(ke),{ttiTrace:Se,huddleEventsTrace:Ue}=(0,Le.A)().getAllTraceHandlers();Se.addTTIMetaTags({entryPoint:Te,preferredMediaRegion:Me,isPrejoin:Ce,isCreate:!(0,G.Yw)(Ee,W)}),Ue==null||Ue.recordEntryPoint(Te),be.A.publish({type:he.lx.PreferredMediaRegion,update:{mediaRegionPreferred:Me}});const He=(0,C.A)(),Ye=(0,F.WR)(Ee);return He.start(ke,W??"",re,le,q,Ne,pe).then((0,t.coroutine)(function*(){const J=(0,S.getStateForClientStore)(),ae=(0,ne.$t)(Ee,{huddleId:le}),Ve=(0,ne.kn)(J),Be=(0,ne.UE)(J);(0,ge.e)({state:Ee}).track(v.EventId.CANVAS_EVENT,{contexts:{ui_context:{entry_point:Te,ui_properties:{element_name:j.Hi.CANVAS_JOIN},action:v.UiAction.TOGGLE},calls:Be},...ae,...Ve}),k((0,V.H)({focusKey:B.Ay.HUDDLE_SIDEBAR_FOOTER,forceFocus:Ae})),k((0,D.xb)(!1)),le&&k((0,P.r_)({callId:le,userId:Ye}))}))});return function(k,N,$){return Q.apply(this,arguments)}}());fe.meta={name:"createThunk",key:"createThunkstartHuddle",description:"Start huddle"};const se=fe},5319025363:(x,A,e)=>{"use strict";e.d(A,{z:()=>i});var t=e(6304789565),n=e(7022928841),s=e(8664881451);const i=(0,t.Ay)("Stop the huddle invite sound",(l,o)=>{(0,s.ds)((0,n.qF)(o()),{logFailure:!1})});i.meta={name:"createThunk",key:"createThunkstopHuddleInviteSound",description:"Stop the huddle invite sound"}},6694086724:(x,A,e)=>{"use strict";e.d(A,{e:()=>u});var t=e(6304789565),n=e(796111729),s=e(4869203191),i=e(4250409994),l=e(6533394955),o=e(5332875232),a=e(5286203919),r=e(7434063642),d=e(6251210828);const u=(0,t.Ay)("Stops huddle lounge music from playing",(_,v,h)=>{let{clearOnEndedCallback:f,logContext:I,isStoppedByUser:p}=h;const y=v(),g=(0,n.Ay)({state:y}),E=(0,o.CI)(y),M=(0,d.jr)(y),T=(0,d.K8)(y),D=(0,l.getStateForClientStore)(),C=(0,a.E9)(D);s.Ay.getInstance().stopMusic({clearOnEndedCallback:f,logger:g,logContext:I}),(0,l.dispatchForClientStore)((0,i.Ag)(!1)),p&&C&&_((0,r.sH)({huddleId:C,hasUserStoppedLoungeMusic:p})),E&&(p||T)&&M&&_((0,r.ju)({stopMusic:!0}))});u.meta={name:"createThunk",key:"createThunkstopHuddleLoungeMusic",description:"Stops huddle lounge music from playing"}},6134475965:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(6304789565),n=e(5378147939),s=e(6533394955),i=e(6694086724),l=e(6855917924),o=e(5332875232),a=e(4250409994),r=e(7366481123);const d=(0,t.Ay)("Stop the active huddle",(_,v)=>{const h=v(),f=(0,o.Eg)(h);return(0,s.dispatchForClientStore)((0,a.yi)({})),_((0,l.A)()),_((0,i.e)({clearOnEndedCallback:!0,logContext:"stop-huddle-thunk"})),f&&(0,s.dispatchForClientStore)((0,a.JM)()),_((0,r.LL)(r.vT.HiddenUserJoinedHuddle)),(0,n.A)().stop()});d.meta={name:"createThunk",key:"createThunkstopHuddle",description:"Stop the active huddle"};const u=d},6310192986:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>Q,vP:()=>Le});var t=e(6313685253),n=e(9137897911),s=e(3398586081),i=e(716022512),l=e(6696292586),o=e(4518410378),a=e(9548972574),r=e(8233775522),d=e(6470070112),u=e(3245843483),_=e(5286203919),v=e(4988306802),h=e(9012396182),f=e(9101533895),I=e(6533394955),p=e(2767624118),y=e(6664301844),g=e(7429662208),E=e(387328355),M=e(1990810649),T=e(9365970888),D=e(6117529990),C=e(8736071954),m=e(610288365),O=e(5332875232),P=e(6251210828),R=e(2465464861),L=e(571104883),V=e(9195837907),B=e(1473609332),K=e(3193155968),b=e(6839188756);function S(k){return k?(0,b.tc)(k)?"free":(0,b.r7)(k)?"enterprise":"pro":"unknown"}c(S,"getTeamTier");var G=e(3677514771),H=e(4724591729),U=e(4761125736),F=e(8634352961),Y=e(415910655),Z=e(5795074931),ee=e(7366481123);const j=navigator.hardwareConcurrency,ge=(0,L.zS)(),ne=(0,H.b3)(),ue=(0,H.$i)(),he=c(k=>(0,t.A)(k,(N,$,W)=>{if(W===K.N2)return N;const q=W.split(/-|_/).slice(0,-1).join("-"),re=(0,n.A)(`windows-${q}-count`);return N[re]?N[re]+=1:N[re]=1,N},{}),"countWindowsByType"),be=c(k=>{if(!k)return"";let N=k;const $=/Default -/g;N=k.replace($,"");const W=/ *?\([^)]*?\) *?/g;return N=N.replace(W,""),N=N.trim(),N},"scrubDeviceLabelForReporting");let xe;const Le=c(()=>xe,"getMostRecentStableTags"),fe=(0,s.A)((k,N)=>{let{teamState:$,clientState:W}=k;var q;const re=(0,_.E9)(W),le=(0,_.hc)(W),Ae=(0,D.OV)($),Te=(0,O.MJ)($),Ne=(0,O.nC)($),pe=(0,O.ZI)($),Ee=(0,O.DP)($),oe=y.zF.sdkVersion,ce=(0,d.R8)($),ke=(0,O.Qq)($),Ce=(0,_.sQ)(W),Me=(0,O.Jf)($),Se=(0,U._Z)($,"huddles_filter_worker",!1),Ue=(0,_.l4)(W),He=(0,G.H7)($),Ye=S(He);var J;const ae=(J=(q=(0,h.getBootedWorkspaces)(W))===null||q===void 0?void 0:q.length)!==null&&J!==void 0?J:0,Ve=(0,f.D5)($),Be=(Ve==null?void 0:Ve.length)||0,Ke=(0,Y.s2)()||{},Re={teamId:Ue,huddleId:re,huddleChannelId:le,workspaceCount:ae,chimeSdkVersion:oe,teamTier:Ye,isPreWarmed:ke,isPrejoin:Ce,isHuddlesIncreaseMaxParticipantsEnabled:Ne,isTranscriptAllowed:ce,isChimeSdkExpEnabled:Ae,isHuddlesLaterEnabled:Te,isVideoQualityIncreaseEnabled:Me,isDevicesExpEnabled:pe,isRtmFilteringEnabled:Ee,osVersion:ge,envIsJsPath:ne,envIsQa:ue,xwsChannelCount:Be,filterWorkerGroup:Se,...Ke};return xe=Re,Re},(k,N)=>N),Q=c(k=>{let{state:N,appMetrics:$}=k;var W,q,re,le,Ae,Te,Ne,pe;const Ee=(0,I.getClientStoreInstance)().getState(),oe=(0,_.cN)(Ee),ce=(0,_.E9)(Ee),ke=`${oe}${ce??""}`,Ce=fe({teamState:N,clientState:Ee},ke),{huddleId:Me,huddleChannelId:Se,workspaceCount:Ue,isRtmFilteringEnabled:He}=Ce,Ye={},J=(0,g.e6)(N),ae=J?(0,g.Le)(N,{tab:J}):{},{primary:Ve,secondary:Be,sidebar:Ke}=ae||{};Object.assign(Ye,{viewPrimary:Ve==null?void 0:Ve.viewType,viewSecondary:Be==null?void 0:Be.viewType,viewSidebar:Ke==null?void 0:Ke.viewType,viewTab:J});const Re=(0,T.Hc)(N),Fe=(0,T.AZ)(N),Ie=(0,T.IO)(N),ze=(0,T.JM)(N),qe=(0,T.SR)(N),st=(0,T.f3)(N),ut=(0,T.aA)(N),tt={microphoneIsBlocked:Re,microphoneIsAvailable:Fe,cameraIsBlocked:qe,cameraIsAvailable:st,isMicrophoneBluetooth:Ie,isSpeakerBluetooth:ze,isMicrophoneAndSpeakerOnSameDevice:ut},_t=(0,r.fq)(N),yt={};if(_t){const z=Object.keys(_t);Object.assign(yt,{windowsTotalOpen:z.length,windowsOpenTypes:z.length?z.join(" "):"",windowsTypeWithFocus:(0,i.A)(_t,te=>!!te.isFocused),...he(_t)})}const Kt=(0,d.Fm)(N),Qt=Kt&&Kt.type===ee.vT.ConnectionUnstable,Jt=(0,R._R)(N),Gt=Jt!==null,wt={isTroubleshootingPanelOpen:Gt,isAudioOnlyModeEnabled:(0,_.Rv)(Ee),troubleshootingPanelTab:Gt?(0,R.Eh)(N):null,troubleshootingPillPage:(0,R.Wg)(N),troubleshootingEntryPointWas:(0,R.qV)(N),troubleshootingSessionId:Gt?`${(0,Z.WR)(N)}${Me}:${(0,R.$i)(N)}`:null,troubleshootingBannerInView:Qt,troubleshootingSource:Jt},Bt=(0,a.UK)(N),Wt=(W=(0,T.ql)(N,C.lW.Camera))===null||W===void 0?void 0:W.label,Tn=(q=(0,T.ql)(N,C.lW.Microphone))===null||q===void 0?void 0:q.label,Ot=(re=(0,T.ql)(N,C.Q4))===null||re===void 0?void 0:re.label,{isScreenshareEnabled:Ft,isHostDrawEnabled:rn,isHostDrawRendererActive:ln,isCameraEnabled:_n,isMicrophoneEnabled:en,isConnected:Xt}=(0,E.Ng)(N),vn=!!Ft,je=!!_n,Rt=(0,E.fU)(N,{id:"self"}),hn=(0,E.MY)(N),Nn=hn==="self",rt=Bt.filter(z=>z.isCameraEnabled).length,vt=(0,p.H)(Se),Mt=(0,B.Bh)(),Ct=je&&(Mt==null||(le=Mt.video)===null||le===void 0?void 0:le.effect)===V.t.Blur,Yt=!!(!(Mt==null||(Ae=Mt.audio)===null||Ae===void 0)&&Ae.enableNoiseSuppression),In=Yt&&Nn,Un=je&&(Mt==null||(Te=Mt.video)===null||Te===void 0?void 0:Te.effect)===V.t.Background&&(Mt==null||(Ne=Mt.video)===null||Ne===void 0?void 0:Ne.effectBgKey)!==void 0,En=!!hn,Bn=!!rt,Vn=(0,E.nD)(N).length,rs=!!Vn,as=Vn+(vn?1:0),jn=as===2,es=rs||vn,Qn=(0,R.gA)(N),ss=(0,v.VN)(N),ft=(0,v.M3)(N),pt=En?(pe=Bt.find(z=>z.id===hn))===null||pe===void 0?void 0:pe.userId:void 0,Ht=(0,P.dj)(N,{huddleId:Me})||!1,nn=o.J.document.visibilityState==="visible",kn={isBackgroundBlurActive:Ct,isNoiseSuppressionEnabled:Yt,isNoiseSuppressionActive:In,isCustomVideoBackgroundActive:Un,isClosedCaptionsEnabled:ss,isSideBySideCaptionsEnabled:ft},xt=He?(0,F.zT)():void 0,Dn=He?(0,F.kB)():void 0,Fn=(0,F.oB)(),wn={callId:ce,isMicrophoneEnabled:en,isActiveSpeaker:Nn,isSomeoneSpeaking:En,isSomeoneSharingScreen:es,isVideoEnabledForSomeone:Qn,isSharingScreen:vn,isHostDrawEnabled:rn,isHostDrawActive:ln,isSelfVideoEnabled:je,isPeerVideoEnabled:Bn,isHuddleWindowVisible:vt,selectedCamera:be(Wt),selectedMicrophone:be(Tn),selectedSpeakers:be(Ot),activeSpeakerUserId:pt,isPeerSharingScreen:rs,isDualScreenshareActive:jn,cpuCount:j,remotePeerCount:Bt.length,remotePeersWithVideoCount:rt,peersScreensharingCount:Vn,activeScreenshareCount:as,workspaceCount:Ue,huddleStartTimestamp:oe,isDisconnected:Xt===!1,isMainWindowVisible:nn,rtmPercentSkipped:xt,rtmTopAllowedTypes:Dn,rtmRatePerSecond:Fn,isHuddleSummaryActive:Ht};let It={};if($){const{cpu:z,memory:te,gpu:ve,thermalState:Oe,speedLimit:$e}=$,at=(0,l.A)(z)?Math.round(z*j):void 0,Xe=(0,l.A)(ve)?Math.round(ve*j):void 0,Nt=(0,u.oQe)("settings")||{};It={cpuUseRelative:z?Math.round(z):void 0,cpuUse:at,gpuUse:Xe,memoryUse:(te==null?void 0:te.workingSetSize)||void 0,isHardwareAccelerationEnabled:!!Nt.useHwAcceleration,osThermalState:Oe,osSpeedLimit:$e,osIsThrottlingCpu:(0,l.A)($e)&&$e!==0?$e<30:void 0}}let Je={huddleViewMode:(0,P.HH)(N,{huddleId:Me})};if(vt){var X;const z=(0,P.Ec)(N,{huddleId:Me}),te=(0,P.SC)(N,{huddleId:Me,surface:z});Je={...Je,huddleWindowSurface:z,huddleWindowFocusedContentType:(Rt==null||(X=Rt.item)===null||X===void 0?void 0:X.type)||M.cM.None,huddleWindowIsFullscreen:(0,P.g0)(N),huddleWindowIsSelfDrawingEnabled:(0,P.ny)(N),huddleWindowWindowHeight:te==null?void 0:te.height,huddleWindowWindowWidth:te==null?void 0:te.width}}const _e=(0,m.Ay)(),ye={batteryIsUsing:_e.isUsingBatteryPower(),batteryPercentRemaining:_e.getLevel()},{osIsThrottlingCpu:De,osThermalState:Ge}=It,{batteryIsUsing:et,batteryPercentRemaining:bt}=ye,Sn={powerThrottlingActive:!!De&&!!et&&(0,l.A)(bt)&&bt<100,thermalThrottlingActive:!!De&&(Ge==="critical"||Ge==="serious")};return{...wn,...kn,...It,...Je,...Ye,...tt,...ye,...wt,...yt,...Ce,...Sn}},"getHuddleStateSnapshot")},4742719639:(x,A,e)=>{"use strict";e.d(A,{o:()=>l});var t=e(2384831516),n=e(9548972574),s=e(8847766420),i=e(6741408957);const l=(0,t.Mz)((o,a)=>{const r=(0,n.dy)(o);if(r)return r;const d=(0,n.Yw)(o,a);if(!d)return null;const u=(0,s.ZT)(o);return d.name===void 0?((0,i.Ss)().fetchObjectWithId(u,d.id),null):((0,i.GD)().maybeRefetch(u,d.id),d.name)});l.meta={name:"createSelector",key:"createSelectorgetHuddleTopic",description:(o,a)=>{const r=(0,n.dy)(o);if(r)return r;const d=(0,n.Yw)(o,a);if(!d)return null;const u=(0,s.ZT)(o);return d.name===void 0?((0,i.Ss)().fetchObjectWithId(u,d.id),null):((0,i.GD)().maybeRefetch(u,d.id),d.name)}}},1921074781:(x,A,e)=>{"use strict";e.d(A,{F:()=>a});var t=e(9706240641),n=e.n(t),s=e(8571983633),i=e(6422693406),l=e(796111729),o=e(2778217221);class a{static getInstance(){if(!a.wakeLockManager)try{a.wakeLockManager=new a}catch(d){(0,l.Wo)({label:o.o7}).warn("Error instantiating WakeLockManager,",d.message)}return a.wakeLockManager}static doesInstanceExist(){return!(0,s.A)(a.wakeLockManager)}request(){var d=this;return(0,t.coroutine)(function*(){if(d.wakeLockSentinel)return i.S.resolve();d.wakeLockSentinel=yield d.wakeLock.request("screen").catch(u=>(d.logger.warn("WakeLock acquire failed",u.message),null)),d.addHandlers()})()}release(){var d=this;return(0,t.coroutine)(function*(){if(!d.wakeLockSentinel)return i.S.resolve();d.shouldRemoveVisibilityHandler=!0,yield d.wakeLockSentinel.release(),d.logger.info("WakeLock released")})()}addHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.addEventListener("release",this.handleWakeLockReleased),document.addEventListener("visibilitychange",this.handleDocumentVisibilityChange))}cleanupHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.removeEventListener("release",this.handleWakeLockReleased),this.wakeLockSentinel=null,this.shouldRemoveVisibilityHandler&&(document.removeEventListener("visibilitychange",this.handleDocumentVisibilityChange),this.shouldRemoveVisibilityHandler=!1))}handleWakeLockReleased(){var d=this;return(0,t.coroutine)(function*(){d.logger.info("WakeLock released by browser"),d.cleanupHandlers()})()}handleDocumentVisibilityChange(){var d=this;return(0,t.coroutine)(function*(){document.visibilityState==="visible"&&d.request()})()}constructor(){if(this.logger=(0,l.Wo)({label:o.o7}),this.shouldRemoveVisibilityHandler=!1,!navigator.wakeLock)throw Error("navigator.wakeLock undefined");this.wakeLock=navigator.wakeLock,this.handleDocumentVisibilityChange=this.handleDocumentVisibilityChange.bind(this),this.handleWakeLockReleased=this.handleWakeLockReleased.bind(this)}}c(a,"WakeLockManager")},8478954380:(x,A,e)=>{"use strict";e.d(A,{Li:()=>h,ML:()=>l,Rt:()=>a,_6:()=>v,aS:()=>r,al:()=>o,bW:()=>u,it:()=>_,qO:()=>d});var t=e(2140362605),n=e(6304789565),s=e(5071086688),i=e(5470425448);const l=(0,t.Ay)("Update the state of the active tab in the huddle troubleshooting panel");l.meta={name:"createAction",key:"createActionupdateTroubleshootingActiveAccordionViewTrace",description:"Update the state of the active tab in the huddle troubleshooting panel"};const o=(0,t.Ay)("Makes troubleshoot panel V2 visible in source view or clears it");o.meta={name:"createAction",key:"createActionsetTroubleshootingSource",description:"Makes troubleshoot panel V2 visible in source view or clears it"};const a=(0,n.Ay)("Set the screen sharing of a peer.",(f,I,p)=>{s.A.publish({type:i.lx.TroubleshootingEntryPoint,update:(p==null?void 0:p.entryPoint)||null}),f(o(p))});a.meta={name:"createThunk",key:"createThunksetTroubleshootingSourceWithTrace",description:"Set the screen sharing of a peer."};const r=(0,t.Ay)("Sets active pill page for tracing.");r.meta={name:"createAction",key:"createActionsetTroubleshootingPillPageTrace",description:"Sets active pill page for tracing."};const d=(0,t.Ay)("Update stable metrics state");d.meta={name:"createAction",key:"createActionupdateStableMetrics",description:"Update stable metrics state"};const u=(0,t.Ay)("Update unstable metrics and warnings state");u.meta={name:"createAction",key:"createActionupdateUnstableMetricsAndWarnings",description:"Update unstable metrics and warnings state"};const _=(0,t.Ay)("Update stable warnings state");_.meta={name:"createAction",key:"createActionupdateStableWarnings",description:"Update stable warnings state"};const v=(0,t.Ay)("Update stable alert state");v.meta={name:"createAction",key:"createActionupdateStableAlerts",description:"Update stable alert state"};const h=(0,t.Ay)("Update unstable alert state");h.meta={name:"createAction",key:"createActionupdateUnstableAlerts",description:"Update unstable alert state"}},2465464861:(x,A,e)=>{"use strict";e.d(A,{$i:()=>u,Eh:()=>a,FP:()=>y,Ku:()=>E,Wf:()=>p,Wg:()=>d,Z8:()=>o,_R:()=>r,cB:()=>f,gA:()=>M,h:()=>I,m:()=>g,qV:()=>_});var t=e(8161242485),n=e(2689960678),s=e(6790819894),i=e(7091646278),l=e(387328355);const o=3,a=(0,t.Ay)(T=>T.huddleTroubleshooting.view.activeAccordionView);a.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelActiveAccordionView",description:T=>T.huddleTroubleshooting.view.activeAccordionView};const r=(0,t.Ay)(T=>T.huddleTroubleshooting.view.source);r.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelSource",description:T=>T.huddleTroubleshooting.view.source};const d=(0,t.Ay)(T=>T.huddleTroubleshooting.view.activePillPage);d.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPillPageTrace",description:T=>T.huddleTroubleshooting.view.activePillPage};const u=(0,t.Ay)(T=>T.huddleTroubleshooting.view.source?T.huddleTroubleshooting.view.openCounter:-1);u.meta={name:"createSelector",key:"createSelectorgetTroubleshootingSessionCounterIdTrace",description:T=>T.huddleTroubleshooting.view.source?T.huddleTroubleshooting.view.openCounter:-1};const _=(0,t.Ay)(T=>T.huddleTroubleshooting.view.entryPoint);_.meta={name:"createSelector",key:"createSelectorgetTroubleshootingEntryPointTrace",description:T=>T.huddleTroubleshooting.view.entryPoint};const v=(0,t.Ay)(T=>T.huddleTroubleshooting.view.alertCount>=o);v.meta={name:"createSelector",key:"createSelectorshouldDisplaySupportLink",description:T=>T.huddleTroubleshooting.view.alertCount>=o};const h=(0,t.Ay)(T=>T.huddleTroubleshooting.metrics.stable);h.meta={name:"createSelector",key:"createSelectorgetStableMetrics",description:T=>T.huddleTroubleshooting.metrics.stable};const f=(0,t.Ay)(T=>T.huddleTroubleshooting.metrics.unstable);f.meta={name:"createSelector",key:"createSelectorgetUnstableMetrics",description:T=>T.huddleTroubleshooting.metrics.unstable};const I=(0,t.Ay)(T=>T.huddleTroubleshooting.warnings.stable);I.meta={name:"createSelector",key:"createSelectorgetStableWarnings",description:T=>T.huddleTroubleshooting.warnings.stable};const p=(0,t.Ay)(T=>T.huddleTroubleshooting.warnings.unstable);p.meta={name:"createSelector",key:"createSelectorgetUnstableWarnings",description:T=>T.huddleTroubleshooting.warnings.unstable};const y=(0,t.Ay)(T=>T.huddleTroubleshooting.alerts.stable);y.meta={name:"createSelector",key:"createSelectorgetStableAlerts",description:T=>T.huddleTroubleshooting.alerts.stable};const g=(0,t.Ay)(T=>T.huddleTroubleshooting.alerts.unstable);g.meta={name:"createSelector",key:"createSelectorgetUnstableAlerts",description:T=>T.huddleTroubleshooting.alerts.unstable};const E=(0,s.F)(T=>y(T)||n.t0,T=>g(T)||n.t0,T=>I(T)||n.t0,(T,D,C)=>{const{isMicrophoneBlocked:m,isCameraBlocked:O,isDisconnected:P,isMicrophoneNotSendingAudio:R,isPowerThrottlingActive:L}=T,{isAudioQualityPoor:V,isCpuCompetitionPoor:B,isNetworkQualityPoor:K,networkQualityHealth:b}=D,{isCameraProbablyIphone:S,isSpeakerBluetooth:G,isHardwareAccelerationDisabled:H}=C,U=!!(V&&K),F=!!(V&&(B||L)),Y=!!(G&&V||O||m||R||S),Z=!!(U||F||O||m||R||P),ee=V||P?i.bz.Bad:b,j=B||L||H?i.bz.Warn:i.bz.Good;return{shouldSurfaceGeneralWarning:Z,shouldSurfaceSystemWarning:F,shouldSurfaceDevicesWarning:Y,aggregateNetworkHealth:ee,aggregateSystemHealth:j}}),M=(0,s.F)(l.Ng,l.nt,(T,D)=>{const{isCameraEnabled:C}=T;return!!(C||D)})},7091646278:(x,A,e)=>{"use strict";e.d(A,{ML:()=>n,bz:()=>s,pK:()=>t});var t;(function(i){i.Network="network",i.System="system",i.Devices="devices",i.Overview="overview"})(t||(t={}));var n;(function(i){i.EnlargedWindow="EnlargedWindow",i.CompactWindow="CompactWindow",i.MiniPlayer="MiniPlayer"})(n||(n={}));var s;(function(i){i.Good="good",i.Warn="warn",i.Bad="bad"})(s||(s={}))},9943020700:(x,A,e)=>{"use strict";e.d(A,{$W:()=>d,$o:()=>p,Am:()=>I,At:()=>k,C2:()=>m,C9:()=>Ae,CO:()=>v,Cj:()=>y,DB:()=>xe,Dx:()=>O,EX:()=>Y,FV:()=>S,Fm:()=>h,GI:()=>u,IC:()=>K,IE:()=>be,I_:()=>o,KF:()=>Le,KJ:()=>ne,Lu:()=>ue,OG:()=>f,Ot:()=>se,Qk:()=>s,Qq:()=>$,RL:()=>V,TD:()=>Q,TW:()=>H,To:()=>P,Tt:()=>ee,U_:()=>g,Uo:()=>j,VV:()=>a,Wn:()=>Ne,XB:()=>B,ZE:()=>L,_L:()=>D,_R:()=>U,ab:()=>C,av:()=>N,aw:()=>q,d0:()=>Z,fg:()=>F,fq:()=>Te,g:()=>E,iI:()=>W,k$:()=>_,kJ:()=>re,k_:()=>R,qD:()=>fe,se:()=>le,tK:()=>n,w$:()=>b,wW:()=>ge,w_:()=>G,yw:()=>r,zD:()=>T,zl:()=>he});var t=e(2140362605);const n=(0,t.Ay)("Remove a list");n.meta={name:"createAction",key:"createActionremoveList",description:"Remove a list"};const s=(0,t.Ay)("trigger animation for view");s.meta={name:"createAction",key:"createActiontriggerAnimationForViewId",description:"trigger animation for view"};const i=(0,t.Ay)("Add / update a list column");i.meta={name:"createAction",key:"createActionupsertColumn",description:"Add / update a list column"};const l=(0,t.Ay)("Remove a list column");l.meta={name:"createAction",key:"createActionremoveColumn",description:"Remove a list column"};const o=(0,t.Ay)("Fill column with info data or default value");o.meta={name:"createAction",key:"createActionfillColumnData",description:"Fill column with info data or default value"};const a=(0,t.Ay)("Replace all of a list's records");a.meta={name:"createAction",key:"createActionreplaceRecords",description:"Replace all of a list's records"};const r=(0,t.Ay)("Add / update multiple records");r.meta={name:"createAction",key:"createActionbulkUpsertRecords",description:"Add / update multiple records"};const d=(0,t.Ay)("Add / update a list record");d.meta={name:"createAction",key:"createActionupsertRecord",description:"Add / update a list record"};const u=(0,t.Ay)("Remove a list record");u.meta={name:"createAction",key:"createActionremoveRecord",description:"Remove a list record"};const _=(0,t.Ay)("Archive a list record");_.meta={name:"createAction",key:"createActionarchiveRecord",description:"Archive a list record"};const v=(0,t.Ay)("Add/update a record position in a view");v.meta={name:"createAction",key:"createActionupsertRecordPosition",description:"Add/update a record position in a view"};const h=(0,t.Ay)("Add / update multiple templates");h.meta={name:"createAction",key:"createActionbulkUpsertTemplates",description:"Add / update multiple templates"};const f=(0,t.Ay)("Add / update multiple starter templates");f.meta={name:"createAction",key:"createActionbulkUpsertStarterTemplates",description:"Add / update multiple starter templates"};const I=(0,t.Ay)("Remove a starter template by ID");I.meta={name:"createAction",key:"createActionremoveStarterTemplate",description:"Remove a starter template by ID"};const p=(0,t.Ay)("Set the list's banner message");p.meta={name:"createAction",key:"createActionsetBannerMessageForList",description:"Set the list's banner message"};const y=(0,t.Ay)("Clear the specified type of banner message for this list");y.meta={name:"createAction",key:"createActionclearBannerMessageForList",description:"Clear the specified type of banner message for this list"};const g=(0,t.Ay)("Add / update a list record field");g.meta={name:"createAction",key:"createActionupsertField",description:"Add / update a list record field"};const E=(0,t.Ay)("Add / update a list cell");E.meta={name:"createAction",key:"createActionupsertCell",description:"Add / update a list cell"};const M=(0,t.Ay)("Add / update a workflow for a list");M.meta={name:"createAction",key:"createActionupsertWorkflow",description:"Add / update a workflow for a list"};const T=(0,t.Ay)("Apply an edit action to a list");T.meta={name:"createAction",key:"createActionapplyEditAction",description:"Apply an edit action to a list"};const D=(0,t.Ay)("Clear edit history for a list");D.meta={name:"createAction",key:"createActionclearEditHistory",description:"Clear edit history for a list"};const C=(0,t.Ay)("Update local filters");C.meta={name:"createAction",key:"createActionchangeViewLocalFilters",description:"Update local filters"};const m=(0,t.Ay)("Update local sorts");m.meta={name:"createAction",key:"createActionchangeViewLocalSorts",description:"Update local sorts"};const O=(0,t.Ay)("Update local collapsed grids");O.meta={name:"createAction",key:"createActionchangeViewLocalCollapsedGrids",description:"Update local collapsed grids"};const P=(0,t.Ay)("Update the current viewId set by refine in the active window");P.meta={name:"createAction",key:"createActionsetRefineView",description:"Update the current viewId set by refine in the active window"};const R=(0,t.Ay)("Update the default list view id set for the specific List channel tab");R.meta={name:"createAction",key:"createActionsetChannelTabDefaultRefineView",description:"Update the default list view id set for the specific List channel tab"};const L=(0,t.Ay)("Set filter pill to auto open");L.meta={name:"createAction",key:"createActionsetFilterPillKeyById",description:"Set filter pill to auto open"};const V=(0,t.Ay)("Set group by pill to auto open");V.meta={name:"createAction",key:"createActionsetGroupByPillAutoOpen",description:"Set group by pill to auto open"};const B=(0,t.Ay)("Set search query for list");B.meta={name:"createAction",key:"createActionsetListSearchQuery",description:"Set search query for list"};const K=(0,t.Ay)("Destroy local refinements");K.meta={name:"createAction",key:"createActiondestroyLocalRefinements",description:"Destroy local refinements"};const b=(0,t.Ay)("Add / update my items");b.meta={name:"createAction",key:"createActionupsertMyItems",description:"Add / update my items"};const S=(0,t.Ay)("Add / update a single my item");S.meta={name:"createAction",key:"createActionupsertMyItem",description:"Add / update a single my item"};const G=(0,t.Ay)("Add / update a list cell edit");G.meta={name:"createAction",key:"createActionupsertCellEdit",description:"Add / update a list cell edit"};const H=(0,t.Ay)("set refinement pill to auto open in view");H.meta={name:"createAction",key:"createActionsetRefinePillAutoOpenByViewId",description:"set refinement pill to auto open in view"};const U=(0,t.Ay)("Add / update last read timestamp by list ID");U.meta={name:"createAction",key:"createActionupsertLastReadTimestampById",description:"Add / update last read timestamp by list ID"};const F=(0,t.Ay)("Mark records as new to highlight it");F.meta={name:"createAction",key:"createActionhighlightRecordsAsNew",description:"Mark records as new to highlight it"};const Y=(0,t.Ay)("Mark record read to unhighlight it");Y.meta={name:"createAction",key:"createActionremoveRecordHighlight",description:"Mark record read to unhighlight it"};const Z=(0,t.Ay)("Set record as open in flexpane");Z.meta={name:"createAction",key:"createActionrecordFlexpaneOpen",description:"Set record as open in flexpane"};const ee=(0,t.Ay)("Set record flexpane closed");ee.meta={name:"createAction",key:"createActionrecordFlexpaneClosed",description:"Set record flexpane closed"};const j=(0,t.Ay)("Load all recently viewed lists");j.meta={name:"createAction",key:"createActionloadRecentlyViewedLists",description:"Load all recently viewed lists"};const ge=(0,t.Ay)("Add recently opened list to the store");ge.meta={name:"createAction",key:"createActionaddToRecentlyViewedLists",description:"Add recently opened list to the store"};const ne=(0,t.Ay)("Remove deleted lists from the store");ne.meta={name:"createAction",key:"createActionremoveFromRecentlyViewedLists",description:"Remove deleted lists from the store"};const ue=(0,t.Ay)("Update local field visibility");ue.meta={name:"createAction",key:"createActionchangeLocalViewFieldVisibility",description:"Update local field visibility"};const he=(0,t.Ay)("Update local view type");he.meta={name:"createAction",key:"createActionchangeLocalViewType",description:"Update local view type"};const be=(0,t.Ay)("Update local show completed items");be.meta={name:"createAction",key:"createActionchangeLocalShowCompletedItems",description:"Update local show completed items"};const xe=(0,t.Ay)("Update local group by");xe.meta={name:"createAction",key:"createActionchangeLocalViewGroupBy",description:"Update local group by"};const Le=(0,t.Ay)("Subscribe/unsubscribe a list record");Le.meta={name:"createAction",key:"createActionsetRecordIsSubscribed",description:"Subscribe/unsubscribe a list record"};const fe=(0,t.Ay)("Set new view ids for badging");fe.meta={name:"createAction",key:"createActionsetListNewViewBadgingById",description:"Set new view ids for badging"};const se=(0,t.Ay)("Set highlight column in the item flexpane");se.meta={name:"createAction",key:"createActionsetHighlightColumnId",description:"Set highlight column in the item flexpane"};const Q=(0,t.Ay)("Clear highlight column in the item flexpane");Q.meta={name:"createAction",key:"createActionclearHighlightColumnId",description:"Clear highlight column in the item flexpane"};const k=(0,t.Ay)("Set local views for optimistic updates");k.meta={name:"createAction",key:"createActionsetLocalViewsByListId",description:"Set local views for optimistic updates"};const N=(0,t.Ay)("Updates the UI state for the refine edit view menu component");N.meta={name:"createAction",key:"createActionrefineEditViewMenuComponentState",description:"Updates the UI state for the refine edit view menu component"};const $=(0,t.Ay)("Sets the reference tracker map for my tasks list");$.meta={name:"createAction",key:"createActionsetMyTasksReferenceTracker",description:"Sets the reference tracker map for my tasks list"};const W=(0,t.Ay)("Adds a reference to the reference tracker map for my tasks list");W.meta={name:"createAction",key:"createActionaddToMyTasksReferenceTracker",description:"Adds a reference to the reference tracker map for my tasks list"};const q=(0,t.Ay)("Removes a reference from the reference tracker map for my tasks list");q.meta={name:"createAction",key:"createActionremoveFromMyTasksReferenceTracker",description:"Removes a reference from the reference tracker map for my tasks list"};const re=(0,t.Ay)("Should show list description");re.meta={name:"createAction",key:"createActionsetShowListDescriptionById",description:"Should show list description"};const le=(0,t.Ay)("Set list history version by list id");le.meta={name:"createAction",key:"createActionsetSelectedListVersionByListId",description:"Set list history version by list id"};const Ae=(0,t.Ay)("Set the type for the change to task list coachmark");Ae.meta={name:"createAction",key:"createActionsetChangeToTaskListCoachmarkType",description:"Set the type for the change to task list coachmark"};const Te=(0,t.Ay)("Allow an AI-generated title to override the list record's title");Te.meta={name:"createAction",key:"createActionsetAiTitleAllowed",description:"Allow an AI-generated title to override the list record's title"};const Ne=(0,t.Ay)("Do not allow an AI-generated title to override the list record's title");Ne.meta={name:"createAction",key:"createActionclearAiTitleAllowed",description:"Do not allow an AI-generated title to override the list record's title"}},4001611198:(x,A,e)=>{"use strict";e.d(A,{ez:()=>r,mY:()=>d});var t=e(3398586081),n=e(6422693406),s=e(8352634987),i=e(574001087),l=e(6533394955);const o=(0,t.A)(u=>new s.Ay({storeKey:"lists",fetch:(_,v)=>((0,l.dispatchForTeamId)(_,(0,i.o)({idsToFetch:v,listId:u})),n.S.resolve()),isEnabled:()=>!0,metricsName:"lists-record-fetcher"})),a=c((u,_,v)=>o(v).markObjectsAsStale(u,_),"markObjectsAsStale"),r=c((u,_,v)=>o(v).maybeRefetch(u,_),"maybeRefetch"),d=c((u,_,v)=>o(v).markObjectsAsFresh(u,_),"markObjectsAsFresh")},4224126550:(x,A,e)=>{"use strict";e.d(A,{XB:()=>Je,w9:()=>Ee,uu:()=>Un,mJ:()=>ut,av:()=>It,Uw:()=>Xt,vg:()=>ue,K0:()=>qe,rm:()=>se,kS:()=>Q,E4:()=>Rt,fc:()=>xt,Yq:()=>Tn,k7:()=>rn,$8:()=>hn,nh:()=>Nn,Jc:()=>Ce,$N:()=>Wt,zH:()=>Gt,lq:()=>Ie,Te:()=>ae,YI:()=>Ye,dR:()=>rt,iP:()=>En,Ui:()=>ss,qC:()=>as,Ws:()=>rs,tu:()=>es,hA:()=>In,PH:()=>ft,Tj:()=>Kt,jv:()=>Qt,vS:()=>j,PZ:()=>Yt,I9:()=>oe,DU:()=>xe,C0:()=>q,C5:()=>vt,vD:()=>re,Rl:()=>ge,jH:()=>vn,P6:()=>ne,Mr:()=>be,El:()=>Fn,bA:()=>Ot,ot:()=>Mt,Bj:()=>Mn,qO:()=>st,Cf:()=>pt,rh:()=>Bt,iM:()=>_t,dE:()=>yt,EI:()=>Le,kG:()=>k,_H:()=>Ct,wx:()=>fe,Xb:()=>pe,nZ:()=>Ne,X0:()=>tt,hL:()=>en,uJ:()=>wn,BO:()=>Jt,K1:()=>Ue,gu:()=>je,aY:()=>Be,hY:()=>Qn,Pj:()=>Dn,Yb:()=>Vn,XR:()=>Re,WE:()=>Fe,x2:()=>W,$F:()=>N,yv:()=>$,n7:()=>J,iX:()=>he,Es:()=>ln,mc:()=>Ht,TF:()=>Bn,le:()=>He,jW:()=>Ke});var t=e(166097325),n=e(3385422400),s=e(1737183214),i=e(3001769570),l=e(9216332371),o=e(2806459763),a=e(8191156954),r=e(9884588328),d=e(2647703359),u=e(5917710436),_=e(6642124196),v=e(2009641291),h=e(1521013946),f=e(6106034567),I=e(3110884894),p=e(1305633231),y=e(3339229351),g=e(2689960678),E=e(796111729),M=e(6471801899),T=e(8161242485),D=e(8847766420),C=e(4813703725),m=e(8455301571),O=e(937317117),P=e(6415612447),R=e(4001611198),L=e(3398586081),V=e(3037015781),B=e(6533394955),K=e(164394607);const b=(0,L.A)(X=>new V.Ay({fetch:(_e,ye)=>(0,B.dispatchForTeamId)(_e,(0,K.q5)({idsToFetch:ye,listId:X})),upsertKnown:(_e,ye)=>(0,B.dispatchForTeamId)(_e,(0,K.x3)({records:ye,listId:X})),upsertNonExistent:(_e,ye)=>(0,B.dispatchForTeamId)(_e,(0,K.x3)({records:ye,listId:X})),isEnabled:()=>!0}));var S=e(5942687316),G=e(7606781622),H=e(2567914105),U=e(9113979368);const F=(0,T.Ay)(X=>!(0,U.A)(X.overlays));F.meta={name:"createSelector",key:"createSelectorisOverlayOpen",description:X=>!(0,U.A)(X.overlays)};var Y=e(2047021170);const Z=1e3*60*60*24,ee=c(X=>X.lists,"getListsState"),j=(0,T.Ay)((X,_e)=>(0,O.Lp)(X,_e));j.meta={name:"createSelector",key:"createSelectorgetList",description:(X,_e)=>(0,O.Lp)(X,_e)};const ge=(0,T.Ay)((X,_e)=>{var ye;return _e&&((ye=ee(X).listsById[_e])===null||ye===void 0?void 0:ye.records)||g.t0});ge.meta={name:"createSelector",key:"createSelectorgetListRecords",description:(X,_e)=>{var ye;return _e&&((ye=ee(X).listsById[_e])===null||ye===void 0?void 0:ye.records)||g.t0}};const ne=(0,n.Mz)(j,X=>X==null?void 0:X.title),ue=(0,T.Ay)(X=>ee(X).clock);ue.meta={name:"createSelector",key:"createSelectorgetClock",description:X=>ee(X).clock};const he=(0,T.Ay)(X=>ee(X).triggerAnimationForViewId);he.meta={name:"createSelector",key:"createSelectorgetViewToAnimate",description:X=>ee(X).triggerAnimationForViewId};const be=(0,T.Ay)(X=>(0,O.Im)(X));be.meta={name:"createSelector",key:"createSelectorgetLists",description:X=>(0,O.Im)(X)};const xe=(0,T.Ay)((X,_e)=>X.files[_e].list_limits);xe.meta={name:"createSelector",key:"createSelectorgetListLimits",description:(X,_e)=>X.files[_e].list_limits};const Le=(0,T.Ay)((X,_e,ye)=>{var De,Ge;const et=(0,D.ZT)(X);if(!et)return;const bt=(De=ee(X).listsById[_e])===null||De===void 0||(Ge=De.records)===null||Ge===void 0?void 0:Ge[ye];return bt?(!(0,u.z7)(bt)&&!b(_e).isFetchPendingForId(et,ye)&&(0,R.ez)(et,ye,_e),bt):b(_e).fetchObjectWithId(et,ye)});Le.meta={name:"createSelector",key:"createSelectorgetRecord",description:(X,_e,ye)=>{var De,Ge;const et=(0,D.ZT)(X);if(!et)return;const bt=(De=ee(X).listsById[_e])===null||De===void 0||(Ge=De.records)===null||Ge===void 0?void 0:Ge[ye];return bt?(!(0,u.z7)(bt)&&!b(_e).isFetchPendingForId(et,ye)&&(0,R.ez)(et,ye,_e),bt):b(_e).fetchObjectWithId(et,ye)}};const fe=(0,T.Ay)((X,_e,ye)=>{var De,Ge;return(0,p.A)(X,(De=Le(X,_e,ye))===null||De===void 0||(Ge=De.fields)===null||Ge===void 0?void 0:Ge.name)});fe.meta={name:"createSelector",key:"createSelectorgetRecordNameAsPlainText",description:(X,_e,ye)=>{var De,Ge;return(0,p.A)(X,(De=Le(X,_e,ye))===null||De===void 0||(Ge=De.fields)===null||Ge===void 0?void 0:Ge.name)}};const se=(0,T.Ay)((X,_e,ye)=>{const De=j(X,_e),Ge=(0,u.uA)(De);return Ge==null?void 0:Ge.find(et=>et.key===ye)});se.meta={name:"createSelector",key:"createSelectorgetColumnByKey",description:(X,_e,ye)=>{const De=j(X,_e),Ge=(0,u.uA)(De);return Ge==null?void 0:Ge.find(et=>et.key===ye)}};const Q=(0,T.Ay)((X,_e,ye)=>{var De;return(De=se(X,_e,ye))===null||De===void 0?void 0:De.id});Q.meta={name:"createSelector",key:"createSelectorgetColumnIdByColumnKey",description:(X,_e,ye)=>{var De;return(De=se(X,_e,ye))===null||De===void 0?void 0:De.id}};const k=(0,T.Ay)((X,_e,ye)=>{var De;const Ge=(De=ee(X).listsById[_e])===null||De===void 0?void 0:De.records;if(Ge)return Object.values(Ge).find(et=>et.threadTs===ye)});k.meta={name:"createSelector",key:"createSelectorgetRecordByThreadTs",description:(X,_e,ye)=>{var De;const Ge=(De=ee(X).listsById[_e])===null||De===void 0?void 0:De.records;if(Ge)return Object.values(Ge).find(et=>et.threadTs===ye)}};const N=(0,T.Ay)((X,_e)=>ee(X).templatesById[_e]);N.meta={name:"createSelector",key:"createSelectorgetTemplate",description:(X,_e)=>ee(X).templatesById[_e]};const $=(0,T.Ay)(X=>ee(X).templatesById);$.meta={name:"createSelector",key:"createSelectorgetTemplates",description:X=>ee(X).templatesById};const W=(0,T.Ay)(X=>ee(X).starterTemplatesById);W.meta={name:"createSelector",key:"createSelectorgetStarterTemplates",description:X=>ee(X).starterTemplatesById};const q=(0,T.Ay)(X=>{const _e=[],ye=be(X);for(const Ge of ye){var De;const et={id:Ge.id,title:(De=Ge.title)!==null&&De!==void 0?De:""};_e.push(et)}return _e});q.meta={name:"createSelector",key:"createSelectorgetListMentions",description:X=>{const _e=[],ye=be(X);for(const Ge of ye){var De;const et={id:Ge.id,title:(De=Ge.title)!==null&&De!==void 0?De:""};_e.push(et)}return _e}};const re=(0,T.Ay)((X,_e)=>{const ye=be(X),De=(0,M.V3)(_e);if(!De)return[];const{listTitle:Ge}=De,et=(0,M.xL)(ye,Ge);if(!et)return[];const bt=(0,O.Lp)(X,et.id),sn=le(et),fn=[],Sn=ge(X,et.id);for(const ve of Object.values(Sn??{})){var dt,z;const Oe=(z=ve==null||(dt=ve.fields)===null||dt===void 0?void 0:dt[sn])!==null&&z!==void 0?z:[];var te;const $e={id:ve.id,name:(0,p.A)(X,Oe),blocks:Oe,listId:bt.id,listTitle:(te=bt.title)!==null&&te!==void 0?te:""};fn.push($e)}return fn});re.meta={name:"createSelector",key:"createSelectorgetListRecordMentions",description:(X,_e)=>{const ye=be(X),De=(0,M.V3)(_e);if(!De)return[];const{listTitle:Ge}=De,et=(0,M.xL)(ye,Ge);if(!et)return[];const bt=(0,O.Lp)(X,et.id),sn=le(et),fn=[],Sn=ge(X,et.id);for(const ve of Object.values(Sn??{})){var dt,z;const Oe=(z=ve==null||(dt=ve.fields)===null||dt===void 0?void 0:dt[sn])!==null&&z!==void 0?z:[];var te;const $e={id:ve.id,name:(0,p.A)(X,Oe),blocks:Oe,listId:bt.id,listTitle:(te=bt.title)!==null&&te!==void 0?te:""};fn.push($e)}return fn}};function le(X){let _e;const ye=(0,u.uA)(X);for(const De of ye??[])if(De.type==="text"&&(_e||(_e=De),De.key.toUpperCase()==="NAME"))return De.key;return _e?_e.key:"name"}c(le,"findColumnKeyForMention");const Ae=(0,T.Ay)(X=>(0,_.isListsEnabled)(X)?!!(0,Y.ty)(X,"seen_onboarding_lists"):!0);Ae.meta={name:"createSelector",key:"createSelectorhasSeenOnboardingLists",description:X=>(0,_.isListsEnabled)(X)?!!(0,Y.ty)(X,"seen_onboarding_lists"):!0};const Te=(0,T.Ay)((X,_e)=>{var ye;const De=j(X,_e);return(ye=(0,u.uA)(De))===null||ye===void 0?void 0:ye.find(Ge=>(Ge==null?void 0:Ge.key)==="name")});Te.meta={name:"createSelector",key:"createSelectorgetListDefaultColumn",description:(X,_e)=>{var ye;const De=j(X,_e);return(ye=(0,u.uA)(De))===null||ye===void 0?void 0:ye.find(Ge=>(Ge==null?void 0:Ge.key)==="name")}};const Ne=(0,T.Ay)((X,_e,ye)=>{const De=Le(X,_e,ye),Ge=(0,P.Y)(X,_e),et=(0,r.FB)(Ge),bt=De!=null&&De.threadTs?(0,G.Ld)(X,et,De.threadTs):void 0;var sn;return(sn=bt==null?void 0:bt.reply_count)!==null&&sn!==void 0?sn:null});Ne.meta={name:"createSelector",key:"createSelectorgetRecordThreadReplyCount",description:(X,_e,ye)=>{const De=Le(X,_e,ye),Ge=(0,P.Y)(X,_e),et=(0,r.FB)(Ge),bt=De!=null&&De.threadTs?(0,G.Ld)(X,et,De.threadTs):void 0;var sn;return(sn=bt==null?void 0:bt.reply_count)!==null&&sn!==void 0?sn:null}};const pe=(0,T.Ay)((X,_e,ye)=>{const De=Le(X,_e,ye),Ge=(0,P.Y)(X,_e),et=(0,r.FB)(Ge),bt=De!=null&&De.threadTs?(0,G.Ld)(X,et,De.threadTs):void 0,sn=(0,I.Iu)(et,De==null?void 0:De.threadTs),fn=bt&&sn?(0,m.r7)(X,sn)||{timestamps:[],reachedStart:!0}:null,Sn=bt?(0,l.Nh)(X,et,(fn==null?void 0:fn.timestamps)||[])||(bt==null?void 0:bt.ts):"";var dt;const z=(dt=bt==null?void 0:bt._subscribed)!==null&&dt!==void 0?dt:!1;var te;const ve=(te=bt==null?void 0:bt._last_read)!==null&&te!==void 0?te:"0";return z?Sn>ve:!1});pe.meta={name:"createSelector",key:"createSelectorgetRecordThreadIsUnread",description:(X,_e,ye)=>{const De=Le(X,_e,ye),Ge=(0,P.Y)(X,_e),et=(0,r.FB)(Ge),bt=De!=null&&De.threadTs?(0,G.Ld)(X,et,De.threadTs):void 0,sn=(0,I.Iu)(et,De==null?void 0:De.threadTs),fn=bt&&sn?(0,m.r7)(X,sn)||{timestamps:[],reachedStart:!0}:null,Sn=bt?(0,l.Nh)(X,et,(fn==null?void 0:fn.timestamps)||[])||(bt==null?void 0:bt.ts):"";var dt;const z=(dt=bt==null?void 0:bt._subscribed)!==null&&dt!==void 0?dt:!1;var te;const ve=(te=bt==null?void 0:bt._last_read)!==null&&te!==void 0?te:"0";return z?Sn>ve:!1}};const Ee=(0,T.Ay)((X,_e)=>ee(X).listBannerMessagesbyId[_e]);Ee.meta={name:"createSelector",key:"createSelectorgetBannerMessagesForList",description:(X,_e)=>ee(X).listBannerMessagesbyId[_e]};const oe=(0,T.Ay)((X,_e)=>{const ye=(0,v.A)(X),De=(0,O.Lp)(X,_e);return!De||!De.access||!(0,d.mW)(De)||!ye});oe.meta={name:"createSelector",key:"createSelectorgetListIsViewOnly",description:(X,_e)=>{const ye=(0,v.A)(X),De=(0,O.Lp)(X,_e);return!De||!De.access||!(0,d.mW)(De)||!ye}};const ce=(0,T.Ay)(X=>(0,D.ZT)(X)==="T024BE7LD");ce.meta={name:"createSelector",key:"createSelectoronTinySpeckDevOrg",description:X=>(0,D.ZT)(X)==="T024BE7LD"};const ke=(0,T.Ay)(X=>(0,D.jV)(X)===y.uh);ke.meta={name:"createSelector",key:"createSelectoronTinySpeckOrg",description:X=>(0,D.jV)(X)===y.uh};const Ce=(0,T.Ay)((X,_e)=>ee(X).historyById[_e]);Ce.meta={name:"createSelector",key:"createSelectorgetEditHistory",description:(X,_e)=>ee(X).historyById[_e]};const Me=(0,T.Ay)((X,_e)=>{const ye=j(X,_e),De=ge(X,_e);if(!ye||!De)return null;let Ge="";for(const bt of Object.values(De)){bt.position&&Ge<bt.position&&(Ge=bt.position);var et;for(const sn of Object.values((et=bt.viewPositions)!==null&&et!==void 0?et:{}))Ge<sn&&(Ge=sn)}return Ge||null});Me.meta={name:"createSelector",key:"createSelectorgetBiggestRecordPosition",description:(X,_e)=>{const ye=j(X,_e),De=ge(X,_e);if(!ye||!De)return null;let Ge="";for(const bt of Object.values(De)){bt.position&&Ge<bt.position&&(Ge=bt.position);var et;for(const sn of Object.values((et=bt.viewPositions)!==null&&et!==void 0?et:{}))Ge<sn&&(Ge=sn)}return Ge||null}};const Se=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localFiltersById[De]});Se.meta={name:"createSelector",key:"createSelectorgetLocalFiltersByViewId",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localFiltersById[De]}};const Ue=(0,C.Rb)((X,_e,ye)=>j(X,_e),(X,_e,ye)=>ye,(X,_e)=>{const ye=(0,u.Qq)(X,_e);var De;const Ge=(De=ye==null?void 0:ye.filters)!==null&&De!==void 0?De:[];var et;const bt=(et=ye==null?void 0:ye.infoColumnFilters)!==null&&et!==void 0?et:[];return[...Ge,...bt]}),He=c((X,_e)=>(0,n.Mz)(ye=>Ue(ye,X,_e),ye=>ye),"makeGetServerFiltersByViewIdSelector"),Ye=(0,n.Mz)(Se,Ue,(X,_e)=>X?X.length!==(_e==null?void 0:_e.length)?!0:!(0,i.U3)(X,_e):!1),J=(0,n.Mz)(Se,Ue,(X,_e)=>{if(!X)return new Set;const ye=new Map(_e==null?void 0:_e.map(Ge=>[Ge.key,Ge])),De=X.filter(Ge=>(0,i.bV)(Ge,ye)).map(Ge=>Ge.key);return new Set(De)}),ae=(0,n.Mz)(Se,Ue,(X,_e)=>X!==void 0?X:_e||[]),Ve=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localSortsById[De]});Ve.meta={name:"createSelector",key:"createSelectorgetLocalSortsByViewId",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localSortsById[De]}};const Be=(0,C.Rb)((X,_e,ye)=>j(X,_e),(X,_e,ye)=>ye,(X,_e)=>{const ye=(0,u.Qq)(X,_e);return(ye==null?void 0:ye.sorts)||[]}),Ke=c((X,_e)=>(0,n.Mz)(ye=>Be(ye,X,_e),ye=>ye),"makeGetServerSortsByViewIdSelector"),Re=(0,n.Mz)(Ve,Be,(X,_e)=>X!==void 0?X:_e||[]),Fe=(0,n.Mz)(Ve,Be,(X,_e)=>X?X.length!==(_e==null?void 0:_e.length)?!0:!(0,i.Mu)(X,_e):!1),Ie=(0,T.Ay)((X,_e,ye)=>{var De,Ge;const et=(0,S.zZ)({listId:_e,viewId:ye});return(De=ee(X))===null||De===void 0||(Ge=De.filterPillKeyById)===null||Ge===void 0?void 0:Ge[et]});Ie.meta={name:"createSelector",key:"createSelectorgetFilterPillKeyById",description:(X,_e,ye)=>{var De,Ge;const et=(0,S.zZ)({listId:_e,viewId:ye});return(De=ee(X))===null||De===void 0||(Ge=De.filterPillKeyById)===null||Ge===void 0?void 0:Ge[et]}};const ze=(0,T.Ay)(X=>{var _e;return(_e=ee(X))===null||_e===void 0?void 0:_e.groupByPillAutoOpen});ze.meta={name:"createSelector",key:"createSelectorgetGroupByPillAutoOpen",description:X=>{var _e;return(_e=ee(X))===null||_e===void 0?void 0:_e.groupByPillAutoOpen}};const qe=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localCollapsedGridsById[De]});qe.meta={name:"createSelector",key:"createSelectorgetCollapsedGridsByViewId",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localCollapsedGridsById[De]}};const st=(0,T.Ay)(X=>ee(X).myItemMap);st.meta={name:"createSelector",key:"createSelectorgetMyItemMap",description:X=>ee(X).myItemMap};const ut=(0,T.Ay)((X,_e)=>ee(X).editActivityMap[_e]);ut.meta={name:"createSelector",key:"createSelectorgetCellEditByTimestamp",description:(X,_e)=>ee(X).editActivityMap[_e]};const tt=(0,T.Ay)((X,_e)=>{var ye;return(ye=ee(X).refinePillAutoOpenByViewId)===null||ye===void 0?void 0:ye[_e]});tt.meta={name:"createSelector",key:"createSelectorgetRefinePillAutoOpenByViewId",description:(X,_e)=>{var ye;return(ye=ee(X).refinePillAutoOpenByViewId)===null||ye===void 0?void 0:ye[_e]}};const _t=(0,T.Ay)(X=>ee(X).recentlyViewedLists);_t.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedLists",description:X=>ee(X).recentlyViewedLists};const yt=(0,T.Ay)(X=>ee(X).recentlyViewedListsLastLoadedMs);yt.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedListsLastLoadedMs",description:X=>ee(X).recentlyViewedListsLastLoadedMs};const Kt=(0,T.Ay)(X=>{const _e=yt(X);return _e?Date.now()-_e>Z:!0});Kt.meta={name:"createSelector",key:"createSelectorgetIsRecentlyViewedListsExpired",description:X=>{const _e=yt(X);return _e?Date.now()-_e>Z:!0}};const Qt=(0,T.Ay)((X,_e)=>{var ye;return(ye=ee(X).lastReadTimestampById)===null||ye===void 0?void 0:ye[_e]});Qt.meta={name:"createSelector",key:"createSelectorgetLastReadTimestampByListId",description:(X,_e)=>{var ye;return(ye=ee(X).lastReadTimestampById)===null||ye===void 0?void 0:ye[_e]}};const Jt=(0,n.Mz)((X,_e,ye)=>{const De=j(X,_e);return(0,u.cv)(De,ye)},X=>{var _e;return X==null||(_e=X.columns)===null||_e===void 0?void 0:_e.reduce((De,Ge)=>{let{key:et,visible:bt}=Ge;return bt!==void 0&&(De[et]=bt),De},{})}),Gt=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye}),Ge=ee(X).localFieldVisibilityByViewId[De];if(!Ge)return;const et=Jt(X,_e,ye);return Object.entries(Ge).filter(sn=>{let[fn,Sn]=sn;return Sn!==(et==null?void 0:et[fn])}).map(sn=>{let[fn,Sn]=sn;return{key:fn,visible:Sn}})});Gt.meta={name:"createSelector",key:"createSelectorgetFieldsThatChangedVisibility",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye}),Ge=ee(X).localFieldVisibilityByViewId[De];if(!Ge)return;const et=Jt(X,_e,ye);return Object.entries(Ge).filter(sn=>{let[fn,Sn]=sn;return Sn!==(et==null?void 0:et[fn])}).map(sn=>{let[fn,Sn]=sn;return{key:fn,visible:Sn}})}};const wt=(0,C.eI)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye}),Ge=ee(X).localFieldVisibilityByViewId[De],et=Jt(X,_e,ye);return Ge&&{...et,...Ge}}),Bt=(0,C.eI)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localFieldVisibilityByViewId[De]}),Wt=(0,n.Mz)(wt,Jt,(X,_e)=>X?!(0,t.A)(X,_e):!1),Tn=(0,T.Ay)((X,_e,ye)=>{const De=wt(X,_e,ye);return De||Jt(X,_e,ye)});Tn.meta={name:"createSelector",key:"createSelectorgetCurrentViewFieldVisibilityByViewId",description:(X,_e,ye)=>{const De=wt(X,_e,ye);return De||Jt(X,_e,ye)}};const Ot=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localViewTypeByViewId[De]});Ot.meta={name:"createSelector",key:"createSelectorgetLocalViewType",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localViewTypeByViewId[De]}};const Ft=(0,C.ow)((X,_e,ye)=>{const De=j(X,_e),Ge=(0,u.Qq)(De,ye);return Ge==null?void 0:Ge.type}),rn=(0,T.Ay)((X,_e,ye)=>{const De=Ot(X,_e,ye);return De!==void 0?De:Ft(X,_e,ye)});rn.meta={name:"createSelector",key:"createSelectorgetCurrentViewTypeByViewId",description:(X,_e,ye)=>{const De=Ot(X,_e,ye);return De!==void 0?De:Ft(X,_e,ye)}};const ln=(0,T.Ay)((X,_e,ye)=>{const De=Ot(X,_e,ye);if(!De)return!1;const Ge=Ft(X,_e,ye);return De!==Ge});ln.meta={name:"createSelector",key:"createSelectorgetViewTypeHasChanged",description:(X,_e,ye)=>{const De=Ot(X,_e,ye);if(!De)return!1;const Ge=Ft(X,_e,ye);return De!==Ge}};const _n=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localGroupByViewId[De]});_n.meta={name:"createSelector",key:"createSelectorgetLocalGroupBy",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localGroupByViewId[De]}};const en=(0,T.Ay)((X,_e)=>{var ye;return(ye=ee(X))===null||ye===void 0?void 0:ye.refineViewByWindowId[_e]});en.meta={name:"createSelector",key:"createSelectorgetRefineView",description:(X,_e)=>{var ye;return(ye=ee(X))===null||ye===void 0?void 0:ye.refineViewByWindowId[_e]}};const Xt=(0,T.Ay)((X,_e)=>{var ye;return(ye=ee(X))===null||ye===void 0?void 0:ye.channelTabDefaultRefineView[_e]});Xt.meta={name:"createSelector",key:"createSelectorgetChannelTabDefaultRefineView",description:(X,_e)=>{var ye;return(ye=ee(X))===null||ye===void 0?void 0:ye.channelTabDefaultRefineView[_e]}};const vn=(0,T.Ay)((X,_e)=>{var ye;return(ye=ee(X))===null||ye===void 0?void 0:ye.listSearchQueriesByWindowId[_e]});vn.meta={name:"createSelector",key:"createSelectorgetListSearchQuery",description:(X,_e)=>{var ye;return(ye=ee(X))===null||ye===void 0?void 0:ye.listSearchQueriesByWindowId[_e]}};const je=(0,C.ow)((X,_e,ye)=>{const De=j(X,_e),Ge=(0,u.Qq)(De,ye);return Ge==null?void 0:Ge.grouping}),Rt=(0,T.Ay)((X,_e,ye)=>{const De=_n(X,_e,ye);return De||je(X,_e,ye)});Rt.meta={name:"createSelector",key:"createSelectorgetCurrentGroupByViewId",description:(X,_e,ye)=>{const De=_n(X,_e,ye);return De||je(X,_e,ye)}};const hn=(0,T.Ay)(X=>(0,Y.ty)(X,"lists_add_to_list_default_list"));hn.meta={name:"createSelector",key:"createSelectorgetDefaultListForAddToList",description:X=>(0,Y.ty)(X,"lists_add_to_list_default_list")};const Nn=(0,n.Mz)(X=>(0,Y.ty)(X,"lists_default_view"),X=>{try{return JSON.parse(X||"{}")}catch(_e){return(0,E.Ay)({label:"lists"}).error("error parsing default lists view prefs",_e),{}}}),rt=(0,T.Ay)((X,_e,ye)=>{var De;const Ge=_n(X,_e,ye);if(!Ge)return!1;const et=je(X,_e,ye);return!(!(Ge==null||(De=Ge.groupBy)===null||De===void 0)&&De.length)&&!(et!=null&&et.groupBy)?!1:(Ge==null?void 0:Ge.groupBy)!==(et==null?void 0:et.groupBy)});rt.meta={name:"createSelector",key:"createSelectorgetHasGroupByChanged",description:(X,_e,ye)=>{var De;const Ge=_n(X,_e,ye);if(!Ge)return!1;const et=je(X,_e,ye);return!(!(Ge==null||(De=Ge.groupBy)===null||De===void 0)&&De.length)&&!(et!=null&&et.groupBy)?!1:(Ge==null?void 0:Ge.groupBy)!==(et==null?void 0:et.groupBy)}};const vt=(0,T.Ay)((X,_e)=>ee(X).listNewViewBadgingById[_e]);vt.meta={name:"createSelector",key:"createSelectorgetListNewViewBadgingById",description:(X,_e)=>ee(X).listNewViewBadgingById[_e]};const Mt=(0,T.Ay)((X,_e)=>{var ye;return((ye=ee(X).localViewsByListId)===null||ye===void 0?void 0:ye[_e])||g.Ml});Mt.meta={name:"createSelector",key:"createSelectorgetLocalViewsByListId",description:(X,_e)=>{var ye;return((ye=ee(X).localViewsByListId)===null||ye===void 0?void 0:ye[_e])||g.Ml}};const Ct=(0,T.Ay)((X,_e,ye)=>{var De,Ge,et;return(De=ee(X).listsById[_e])===null||De===void 0||(Ge=De.records)===null||Ge===void 0||(et=Ge[ye])===null||et===void 0?void 0:et.isSubscribed});Ct.meta={name:"createSelector",key:"createSelectorgetRecordIsSubscribed",description:(X,_e,ye)=>{var De,Ge,et;return(De=ee(X).listsById[_e])===null||De===void 0||(Ge=De.records)===null||Ge===void 0||(et=Ge[ye])===null||et===void 0?void 0:et.isSubscribed}};const Yt=(0,T.Ay)((X,_e)=>{var ye;if(oe(X,_e))return!1;const De=(0,O.Lp)(X,_e);if(!De||!((ye=De.editors)===null||ye===void 0)&&ye.length)return!1;const Ge=Ce(X,_e);if(Ge!=null&&Ge.undoStack.length||Ge!=null&&Ge.redoStack.length)return!1;const et=ge(X,_e);for(const bt of Object.values(et??{}))if(String(bt.dateCreated)!==bt.updatedTimestamp)return!1;return!0});Yt.meta={name:"createSelector",key:"createSelectorgetListIsEditableAndNeverUpdated",description:(X,_e)=>{var ye;if(oe(X,_e))return!1;const De=(0,O.Lp)(X,_e);if(!De||!((ye=De.editors)===null||ye===void 0)&&ye.length)return!1;const Ge=Ce(X,_e);if(Ge!=null&&Ge.undoStack.length||Ge!=null&&Ge.redoStack.length)return!1;const et=ge(X,_e);for(const bt of Object.values(et??{}))if(String(bt.dateCreated)!==bt.updatedTimestamp)return!1;return!0}};const In=(0,T.Ay)(X=>(0,Y.ty)(X,"lists_template_sidebar_collapsed"));In.meta={name:"createSelector",key:"createSelectorgetIsListsTemplateSidebarCollapsedUserPref",description:X=>(0,Y.ty)(X,"lists_template_sidebar_collapsed")};const Un=(0,T.Ay)((X,_e)=>{const ye=j(X,_e);return Yt(X,_e)&&(0,u.BS)(ye)});Un.meta={name:"createSelector",key:"createSelectorgetCanShowListEmptyStateSidebar",description:(X,_e)=>{const ye=j(X,_e);return Yt(X,_e)&&(0,u.BS)(ye)}};const En=(0,T.Ay)((X,_e,ye,De)=>{const Ge=(0,S.pe)(_e,ye,De);return ee(X).highlightColumnMap[Ge]});En.meta={name:"createSelector",key:"createSelectorgetHighlightColumnId",description:(X,_e,ye,De)=>{const Ge=(0,S.pe)(_e,ye,De);return ee(X).highlightColumnMap[Ge]}};const Bn=(0,T.Ay)(X=>(0,H.oY)(X)||F(X));Bn.meta={name:"createSelector",key:"createSelectorisModalOrOverlayOpen",description:X=>(0,H.oY)(X)||F(X)};const Mn=(0,T.Ay)((X,_e)=>{if(!_e)return null;const ye=(0,h.$N)(X,_e);return!ye||ye.type!==h.im.MESSAGE||!ye.channelId||!ye.ts?null:(0,G.Ld)(X,ye.channelId,ye.ts)});Mn.meta={name:"createSelector",key:"createSelectorgetMessageFromCellValue",description:(X,_e)=>{if(!_e)return null;const ye=(0,h.$N)(X,_e);return!ye||ye.type!==h.im.MESSAGE||!ye.channelId||!ye.ts?null:(0,G.Ld)(X,ye.channelId,ye.ts)}};const Vn=(0,T.Ay)((X,_e)=>(0,_.isListsAutomationsEntrypointsEnabled)(X)&&(0,s.I)(X)&&!oe(X,_e));Vn.meta={name:"createSelector",key:"createSelectorgetShowListAutomationsEntrypoint",description:(X,_e)=>(0,_.isListsAutomationsEntrypointsEnabled)(X)&&(0,s.I)(X)&&!oe(X,_e)};const rs=(0,T.Ay)(X=>{const _e=(0,f.p)(X),ye=_e===f.v.IMAGES_ONLY,De=_e===f.v.DISABLE_ALL;return ye||De});rs.meta={name:"createSelector",key:"createSelectorgetIsListCsvImportDisabled",description:X=>{const _e=(0,f.p)(X),ye=_e===f.v.IMAGES_ONLY,De=_e===f.v.DISABLE_ALL;return ye||De}};const as=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.o2)(_e,ye),Ge=ee(X).refineComponentsState[De];var et;return(et=Ge==null?void 0:Ge.isEditViewMenuOpen)!==null&&et!==void 0?et:!1});as.meta={name:"createSelector",key:"createSelectorgetIsEditViewMenuComponentOpen",description:(X,_e,ye)=>{const De=(0,S.o2)(_e,ye),Ge=ee(X).refineComponentsState[De];var et;return(et=Ge==null?void 0:Ge.isEditViewMenuOpen)!==null&&et!==void 0?et:!1}};const jn=(0,T.Ay)(X=>ee(X).myTasksReferenceTrackingMap);jn.meta={name:"createSelector",key:"createSelectorgetMyTasksReferenceTrackingMap",description:X=>ee(X).myTasksReferenceTrackingMap};const es=(0,T.Ay)((X,_e)=>{const ye=_e==null?void 0:_e.slack_list;if(!ye||!ye.list_id||!ye.list_record_id)return!1;const De=Le(X,ye.list_id,ye.list_record_id);return De==null?void 0:De.isDeleted});es.meta={name:"createSelector",key:"createSelectorgetIsListRootDeletedFromMsg",description:(X,_e)=>{const ye=_e==null?void 0:_e.slack_list;if(!ye||!ye.list_id||!ye.list_record_id)return!1;const De=Le(X,ye.list_id,ye.list_record_id);return De==null?void 0:De.isDeleted}};const Qn=(0,T.Ay)((X,_e)=>ee(X).shouldShowListDescriptionByListId[_e]);Qn.meta={name:"createSelector",key:"createSelectorgetShouldShowListDescriptionById",description:(X,_e)=>ee(X).shouldShowListDescriptionByListId[_e]};const ss=(0,T.Ay)((X,_e)=>(0,Y.iN)(X)===_e);ss.meta={name:"createSelector",key:"createSelectorgetIsAssignedToList",description:(X,_e)=>(0,Y.iN)(X)===_e};const ft=(0,T.Ay)((X,_e)=>{if(ss(X,_e))return!0;const ye=(0,Y.N$)(X);var De;return((De=ye==null?void 0:ye[0])!==null&&De!==void 0?De:void 0)===_e});ft.meta={name:"createSelector",key:"createSelectorgetIsMyTasksList",description:(X,_e)=>{if(ss(X,_e))return!0;const ye=(0,Y.N$)(X);var De;return((De=ye==null?void 0:ye[0])!==null&&De!==void 0?De:void 0)===_e}};const pt=(0,T.Ay)((X,_e)=>{var ye;if(!(0,_.isTodosEnabled)(X))return;const De=(0,Y.N$)(X);var Ge;const et=(Ge=De==null?void 0:De[0])!==null&&Ge!==void 0?Ge:void 0,bt=j(X,et),sn=(0,u.uA)(bt),fn=ge(X,et),Sn=sn==null?void 0:sn.find(z=>z.type===a.$.Reference);return!Sn||!fn?null:(ye=Object.values(fn))===null||ye===void 0?void 0:ye.find(z=>{var te,ve,Oe;if((0,o.gk)(z))return!1;const $e=z==null||(te=z.fields)===null||te===void 0?void 0:te[Sn.key];if((0,o.No)(_e)){var at,Xe;return($e==null||(at=$e.message)===null||at===void 0?void 0:at.channel_id)===_e.message.channelId&&($e==null||(Xe=$e.message)===null||Xe===void 0?void 0:Xe.ts)===_e.message.ts}return($e==null||(ve=$e.list_record)===null||ve===void 0?void 0:ve.list_id)===_e.listRecord.listId&&($e==null||(Oe=$e.list_record)===null||Oe===void 0?void 0:Oe.row_id)===_e.listRecord.rowId})});pt.meta={name:"createSelector",key:"createSelectorgetMyTasksItem",description:(X,_e)=>{var ye;if(!(0,_.isTodosEnabled)(X))return;const De=(0,Y.N$)(X);var Ge;const et=(Ge=De==null?void 0:De[0])!==null&&Ge!==void 0?Ge:void 0,bt=j(X,et),sn=(0,u.uA)(bt),fn=ge(X,et),Sn=sn==null?void 0:sn.find(z=>z.type===a.$.Reference);return!Sn||!fn?null:(ye=Object.values(fn))===null||ye===void 0?void 0:ye.find(z=>{var te,ve,Oe;if((0,o.gk)(z))return!1;const $e=z==null||(te=z.fields)===null||te===void 0?void 0:te[Sn.key];if((0,o.No)(_e)){var at,Xe;return($e==null||(at=$e.message)===null||at===void 0?void 0:at.channel_id)===_e.message.channelId&&($e==null||(Xe=$e.message)===null||Xe===void 0?void 0:Xe.ts)===_e.message.ts}return($e==null||(ve=$e.list_record)===null||ve===void 0?void 0:ve.list_id)===_e.listRecord.listId&&($e==null||(Oe=$e.list_record)===null||Oe===void 0?void 0:Oe.row_id)===_e.listRecord.rowId})}};const Ht=(0,T.Ay)((X,_e)=>{if(!(0,_.isTodosEnabled)(X))return!1;var ye;const De=(ye=jn(X))!==null&&ye!==void 0?ye:{},Ge=(0,o.qC)(_e),et=De[Ge];return!!et&&!(0,o.gk)(et)});Ht.meta={name:"createSelector",key:"createSelectorisAddedToMyTasks",description:(X,_e)=>{if(!(0,_.isTodosEnabled)(X))return!1;var ye;const De=(ye=jn(X))!==null&&ye!==void 0?ye:{},Ge=(0,o.qC)(_e),et=De[Ge];return!!et&&!(0,o.gk)(et)}};const nn=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localShowCompletedItemsByViewId[De]});nn.meta={name:"createSelector",key:"createSelectorgetLocalShowCompletedItems",description:(X,_e,ye)=>{const De=(0,S.zZ)({listId:_e,viewId:ye});return ee(X).localShowCompletedItemsByViewId[De]}};const kn=(0,C.ow)((X,_e,ye)=>{const De=j(X,_e),Ge=(0,u.Qq)(De,ye);var et;return(et=Ge==null?void 0:Ge.showCompletedItems)!==null&&et!==void 0?et:!1}),xt=(0,T.Ay)((X,_e,ye)=>{if(ft(X,_e))return!0;const De=nn(X,_e,ye);return De!==void 0?De:kn(X,_e,ye)});xt.meta={name:"createSelector",key:"createSelectorgetCurrentShowCompletedItemsByViewId",description:(X,_e,ye)=>{if(ft(X,_e))return!0;const De=nn(X,_e,ye);return De!==void 0?De:kn(X,_e,ye)}};const Dn=(0,n.Mz)(nn,kn,(X,_e)=>X===void 0?!1:!(0,t.A)(X,_e)),Fn=(0,T.Ay)(X=>(0,Y.ty)(X,"lists_message_todo_reaction")||"eyes");Fn.meta={name:"createSelector",key:"createSelectorgetListsMessageTodoReaction",description:X=>(0,Y.ty)(X,"lists_message_todo_reaction")||"eyes"};const wn=(0,T.Ay)((X,_e)=>ee(X).selectedListVersionByListId[_e]);wn.meta={name:"createSelector",key:"createSelectorgetSelectedListVersionByListId",description:(X,_e)=>ee(X).selectedListVersionByListId[_e]};const It=(0,T.Ay)(X=>ee(X).changeToTaskListCoachmarkType);It.meta={name:"createSelector",key:"createSelectorgetChangeToTaskListCoachmarkType",description:X=>ee(X).changeToTaskListCoachmarkType};const Je=(0,T.Ay)((X,_e,ye)=>{const De=(0,S.Ro)(_e,ye);return Boolean(ee(X).aiTitleAllowedMap[De])});Je.meta={name:"createSelector",key:"createSelectorgetAllowedToUseAiTitle",description:(X,_e,ye)=>{const De=(0,S.Ro)(_e,ye);return Boolean(ee(X).aiTitleAllowedMap[De])}}},4525672255:(x,A,e)=>{"use strict";e.d(A,{E:()=>u});var t=e(9706240641),n=e.n(t),s=e(5513050121),i=e(6554371307),l=e(2634516670),o=e(796111729),a=e(6304789565),r=e(474652310),d=e(832411022);const u=(0,a.Ay)("Fetch lists",function(){var _=(0,t.coroutine)(function*(v,h){let{query:f,sort:I,reason:p}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{const y=yield f?v((0,i.yz)({query:`type:list ${f}`,includeShares:!0,reason:p||"get-lists",bypassCache:!0})):v((0,l.jQ)({module:"files",query:"type:list",sort:I||d.VU.lastRead,reason:p||"get-lists",context:s.Oj.ListsDefault})).then(g=>{let{items:E}=g;return E});v((0,r.b)({files:y}))}catch(y){(0,o.Ay)({label:"lists"}).error("error fetching lists",y)}});return function(v,h){return _.apply(this,arguments)}}());u.meta={name:"createThunk",key:"createThunkfetchLists",description:"Fetch lists"}},164394607:(x,A,e)=>{"use strict";e.d(A,{ky:()=>I,q5:()=>h,x3:()=>f});var t=e(9706240641),n=e.n(t),s=e(2694081143),i=e(796111729),l=e(6471801899),o=e(6304789565),a=e(8847766420),r=e(5795074931),d=e(9943020700),u=e(4001611198),_=e(9629831899);const v=(0,o.Ay)("Fetch list and list record",function(){var p=(0,t.coroutine)(function*(y,g,E){let{listId:M,id:T,includeIsSubscribed:D,reason:C="get-list-record"}=E;try{const{list:K,record:b}=yield y((0,s.T)({listId:M,id:T,includeIsSubscribed:D,reason:C}));y((0,_.y)({lists:[K]}));var m,O,P,R,L,V;const S=(0,l.jG)({id:b.id,fields:b.fields,dateCreated:b.date_created,createdBy:(m=b.created_by)!==null&&m!==void 0?m:"",threadTs:(O=b.thread_ts)!==null&&O!==void 0?O:"",position:(P=b.position)!==null&&P!==void 0?P:"",updatedTimestamp:(R=b.updated_timestamp)!==null&&R!==void 0?R:"",updatedBy:(L=b.updated_by)!==null&&L!==void 0?L:"",viewPositions:b.view_positions,platformRefs:b.platform_refs,saved:b.saved,savedFields:b.saved_fields,isSubscribed:b.is_subscribed,archived:(V=b.archived)!==null&&V!==void 0?V:!1});return y((0,d.$W)({listId:M,record:S})),null}catch(K){var B;return(0,i.Ay)({label:"lists"}).error("error fetching list record",K),{error:K==null||(B=K.data)===null||B===void 0?void 0:B.error}}});return function(y,g,E){return p.apply(this,arguments)}}());v.meta={name:"createThunk",key:"createThunkfetchRecord",description:"Fetch list and list record"};const h=(0,o.Ay)("Fetch and upsert list record",(p,y,g)=>{let{idsToFetch:E,listId:M}=g;return n().all(E.map(function(){var T=(0,t.coroutine)(function*(D){try{const B=(yield p((0,s.T)({listId:M,id:D,includeIsSubscribed:!0,reason:"get-list-record"}))).record;var C,m,O,P,R,L;return(0,l.jG)({id:B.id,fields:B.fields,dateCreated:B.date_created,createdBy:(C=B.created_by)!==null&&C!==void 0?C:"",threadTs:(m=B.thread_ts)!==null&&m!==void 0?m:"",position:(O=B.position)!==null&&O!==void 0?O:"",updatedTimestamp:(P=B.updated_timestamp)!==null&&P!==void 0?P:"",updatedBy:(R=B.updated_by)!==null&&R!==void 0?R:"",viewPositions:B.view_positions,platformRefs:B.platform_refs,saved:B.saved,savedFields:B.saved_fields,archived:(L=B.archived)!==null&&L!==void 0?L:!1})}catch(V){return V.data.error==="record_deleted"?{id:D,isDeleted:!0}:{id:D,isNonExistent:!0}}});return function(D){return T.apply(this,arguments)}}()))});h.meta={name:"createThunk",key:"createThunkfetchRecordsForList",description:"Fetch and upsert list record"};const f=(0,o.Ay)("Format and upsert list records",(p,y,g)=>{let{records:E,listId:M}=g;p((0,d.yw)({listId:M,records:E}));const T=(0,r.WR)(y());p((0,d.fg)({listId:M,currentUserId:T}));const D=E.map(m=>m.id),C=(0,a.ZT)(y())||"";(0,u.mY)(C,D,M)});f.meta={name:"createThunk",key:"createThunkupsertRecordsForList",description:"Format and upsert list records"};const I=(0,o.Ay)("Fetch and upsert list record",function(){var p=(0,t.coroutine)(function*(y,g,E){let{idsToFetch:M,listId:T}=E;return y(h({idsToFetch:M,listId:T})).then(D=>{y(f({records:D,listId:T}))})});return function(y,g,E){return p.apply(this,arguments)}}());I.meta={name:"createThunk",key:"createThunkfetchAndUpsertRecordsForList",description:"Fetch and upsert list record"}},9174292896:(x,A,e)=>{"use strict";e.d(A,{D:()=>r});var t=e(9706240641),n=e.n(t),s=e(444762595),i=e(796111729),l=e(6471801899),o=e(6304789565),a=e(9943020700);const r=(0,o.Ay)("Fetch list records",function(){var d=(0,t.coroutine)(function*(u,_,v){let{listId:h,currentUserId:f,includeArchived:I=!1}=v;try{const p=yield u((0,s.z)({listId:h,reason:"get-list-records"}));let y=p.records;if(I)try{const E=yield u((0,s.z)({listId:h,reason:"get-list-archived-records",archived:!0}));y=p.records.concat(...E.records)}catch(E){(0,i.Ay)({label:"lists"}).error("error fetching list archived records",E)}const g=y.map(E=>{var M,T,D,C,m,O;return(0,l.jG)({id:E.id,fields:E.fields,dateCreated:E.date_created,createdBy:(M=E.created_by)!==null&&M!==void 0?M:"",threadTs:(T=E.thread_ts)!==null&&T!==void 0?T:"",position:(D=E.position)!==null&&D!==void 0?D:"",updatedTimestamp:(C=E.updated_timestamp)!==null&&C!==void 0?C:"",updatedBy:(m=E.updated_by)!==null&&m!==void 0?m:"",viewPositions:E.view_positions,platformRefs:E.platform_refs,saved:E.saved,savedFields:E.saved_fields,archived:(O=E.archived)!==null&&O!==void 0?O:!1})});return u((0,a.VV)({listId:h,records:g})),u((0,a.fg)({listId:h,currentUserId:f})),g}catch(p){(0,i.Ay)({label:"lists"}).error("error fetching list records",p)}return null});return function(u,_,v){return d.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkfetchRecords",description:"Fetch list records"}},9629831899:(x,A,e)=>{"use strict";e.d(A,{y:()=>o});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(3237710044),l=e(937317117);const o=(0,s.Ay)("Fetch list",function(){var a=(0,t.coroutine)(function*(r,d,u){let{lists:_}=u;_.forEach(v=>{const h=(0,l.Lp)(d(),v.id);r((0,i.sM)({...h,...v}))})});return function(r,d,u){return a.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkupsertLocalListFiles",description:"Fetch list"}},5942687316:(x,A,e)=>{"use strict";e.d(A,{Ro:()=>i,o2:()=>s,pe:()=>n,zZ:()=>t});const t=c(l=>{let{listId:o,viewId:a}=l;return`${o}-${a}`},"getLocalRefinementsId"),n=c((l,o,a)=>`${l.toString()}-${o}-${a}`,"makeHighlightStoreKey"),s=c((l,o)=>`${l.toString()}-${o}`,"makeRefineComponentStateStoreKey"),i=c(function(){for(var l=arguments.length,o=new Array(l),a=0;a<l;a++)o[a]=arguments[a];return o.join("-")},"makeCompoundKey")},2938177083:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(796111729),n=e(6304789565),s=e(6422693406),i=e(6259241484),l=e(716227588),o=e(3603672985),a=e(7003004874),r=e(3707193570);const d=(0,n.Ay)("record a dismissal on a megaphone notification",(_,v,h)=>{const{spaceName:f,...I}=h,p=h.channelId||h.entityId,y=(0,t.Wo)();if(!f)return y.error(i.cK,"spaceName is required when dispatching recordAndClearNotification."),s.S.resolve();const g=v(),E=(0,l.Hp)(g,f,p);return(0,r.Ay)(p)&&h.entityType==="team"?_((0,o.pn)({spaceName:f,channelId:p})):_((0,o.KT)({spaceName:f,channelId:p})),_((0,a.A)({notificationName:E,...I}))});d.meta={name:"createThunk",key:"createThunkrecordAndClearNotification",description:"record a dismissal on a megaphone notification"};const u=d},7003004874:(x,A,e)=>{"use strict";e.d(A,{A:()=>_,j:()=>u});var t=e(796111729),n=e(6304789565),s=e(8760181906),i=e(6485511687),l=e(6422693406),o=e(6259241484);const a=(0,n.Ay)("record an event (e.g. dismissal, impression, etc) on a megaphone notification",(v,h,f)=>{const{notificationName:I,...p}=f,y=(0,t.Wo)();var g;const E=(g=f.reason)!==null&&g!==void 0?g:"record-notification-event";if(!I)return y.error(o.cK,"notificationName is required when dispatching recordNotificationEvent."),l.S.resolve();const M={notification:I,...p,reason:E};return v((0,i.a)(M))});a.meta={name:"createThunk",key:"createThunkrecordNotificationEvent",description:"record an event (e.g. dismissal, impression, etc) on a megaphone notification"};const r=6e4,d=!1,u=(0,s.A)(a,r,d,void 0,!1),_=a},7487228876:(x,A,e)=>{"use strict";e.d(A,{h:()=>i});var t=e(796111729),n=e(6259241484);const s=(0,t.Wo)(),i=c(l=>{let{spaceName:o,notificationName:a}=l;a&&s.error(n.cK,`${a} is not a recognized notification name for space ${o}.`)},"maybeLogUnrecognizedNotification")},2374999399:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(8161242485),n=e(8276911661);const s=(0,t.Ay)((l,o)=>(0,n.nv)(l,o).profile.statusEmojiDisplayInfo||void 0);s.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusEmojiDisplayInfo",description:(l,o)=>(0,n.nv)(l,o).profile.statusEmojiDisplayInfo||void 0};const i=s},1345620242:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(8161242485),n=e(8170643398),s=e(8276911661),i=e(3428522109);const l=(0,t.Ay)((a,r)=>{const d=(0,s.nv)(a,r),{status_text_canonical:u}=d.profile;return u?(0,n.UM)(d):(0,i.K)(a,d)?0:(0,n.UM)(d)});l.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusExpiration",description:(a,r)=>{const d=(0,s.nv)(a,r),{status_text_canonical:u}=d.profile;return u?(0,n.UM)(d):(0,i.K)(a,d)?0:(0,n.UM)(d)}};const o=l},2072540560:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(8086952004),n=e(8161242485),s=e(8276911661),i=e(8956918631),l=e(3428522109);const o=(0,n.Ay)((r,d)=>{const u=(0,s.nv)(r,d),{status_text_canonical:_}=u.profile;if(_){let v;const h=(0,i.A)(r);return h&&(v=((0,t.A)(h,f=>f.canonical===_)||{}).text||null),_.toLowerCase()==="on a call"&&(v=s.Ru.t("On a call")),v||u.profile.status_text||""}return(0,l.K)(r,u)?s.Ru.t("In a huddle"):u.profile.status_text||""});o.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusText",description:(r,d)=>{const u=(0,s.nv)(r,d),{status_text_canonical:_}=u.profile;if(_){let v;const h=(0,i.A)(r);return h&&(v=((0,t.A)(h,f=>f.canonical===_)||{}).text||null),_.toLowerCase()==="on a call"&&(v=s.Ru.t("On a call")),v||u.profile.status_text||""}return(0,l.K)(r,u)?s.Ru.t("In a huddle"):u.profile.status_text||""}};const a=o},1651628626:(x,A,e)=>{"use strict";e.d(A,{c:()=>o});var t=e(5797466484),n=e(6304789565),s=e(6422693406),i=e(6333950786),l=e(9291336591);const o=(0,n.Ay)("Submits changes to the current user\u2019s profile",(a,r,d)=>{let{profile:u,reason:_="submitProfileChange"}=d;if(!(0,t.A)(u))return s.S.resolve();const v={...u},h=r();return u.status_text&&(v.status_text=(0,i.A)(h,u.status_text)),a((0,l.n)({profile:JSON.stringify(v),reason:_}))});o.meta={name:"createThunk",key:"createThunksubmitProfileChange",description:"Submits changes to the current user\u2019s profile"}},7651407571:(x,A,e)=>{"use strict";e.d(A,{p:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Upsert fetched ordered membership list for channel");n.meta={name:"createAction",key:"createActionupsertFetchedChannelOrderedMemberList",description:"Upsert fetched ordered membership list for channel"}},8188087967:(x,A,e)=>{"use strict";e.d(A,{GD:()=>f,Nd:()=>p});var t=e(3398586081),n=e(8352634987),s=e(6422693406),i=e(6533394955),l=e(3339229351),o=e(7058495549),a=e(8847766420),r=e(7651407571),d=e(6304789565),u=e(8760181906),_=e(4949104520),v=e(796111729);const h=1e4,f=(0,t.A)(()=>new n.Ay({storeKey:"membershipOrdered",fetch:(g,E)=>s.S.all(E.map(M=>(0,i.dispatchForTeamId)(g,y({channelId:M,count:l.Ql})))),isEnabled:()=>!0,metricsName:"member-list"})),I=(0,d.Ay)("marks objects as stale via CFM for Membership List",function(g,E){let{teamId:M,channelId:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f().markObjectsAsStale(M,[T])});I.meta={name:"createThunk",key:"createThunkmarkObjectsAsStale",description:"marks objects as stale via CFM for Membership List"};const p=(0,u.A)(I,(0,_.A)(h,0,.5)),y=(0,d.Ay)("Fetches top members for the channel",function(g,E){let{channelId:M,count:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(0,o.ds)(g,E,M,T).then(D=>{const C=(0,a.ZT)(E());if(!C){(0,v.Wo)().info("MOS","No teamId found");return}return f().markObjectsAsFresh(C,[M]),g((0,r.p)({channelId:M,memberList:D}))})});y.meta={name:"createThunk",key:"createThunkfetchAndUpsertFirstNMembersForChannel",description:"Fetches top members for the channel"}},1794107122:(x,A,e)=>{"use strict";e.d(A,{$:()=>l});var t=e(8161242485),n=e(8847766420),s=e(8188087967),i=e(2689960678);const l=(0,t.Ay)((o,a)=>{const r=(0,n.ZT)(o);return r&&(0,s.GD)().maybeRefetch(r,a),o&&o.membershipOrdered&&o.membershipOrdered[a]?o.membershipOrdered[a]:i.Ml});l.meta={name:"createSelector",key:"createSelectorgetMemberListForChannel",description:(o,a)=>{const r=(0,n.ZT)(o);return r&&(0,s.GD)().maybeRefetch(r,a),o&&o.membershipOrdered&&o.membershipOrdered[a]?o.membershipOrdered[a]:i.Ml}}},6562711329:(x,A,e)=>{"use strict";e.d(A,{z:()=>h});var t=e(6422693406),n=e(7823346015),s=e(8403493408),i=e(6304789565),l=e(1407713935),o=e(8798294025),a=e(6533394955),r=e(5795074931),d=e(8847766420),u=e(9101533895),_=e(3730613858),v=e(2480881364);const h=(0,i.Ay)("Gets the channel membership for a set of users and returns a promise when the store is updated accordingly",function(f,I){let{channelId:p,userIds:y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const g=I(),[E,M]=(0,n.A)(y,C=>(0,_.wr)(g,p,C)),T=(0,u.OL)(g,p);if((0,l.LI)(T)){const C=(0,o.e)(T),m=(0,r.WR)(g);(0,s.A)(M,C,m),y!=null&&y.includes(C)&&E.push(C),y!=null&&y.includes(m)&&E.push(m)}const D={};return E.forEach(C=>{D[C]=(0,_.Ql)(g,p,C)}),M.length?(0,a.dispatchForTeamId)((0,d.ZT)(g),(0,v.R)({channelId:p,userIds:M})).then(C=>C&&C.payload&&C.payload.membershipInfo?{membershipInfo:{...C.payload.membershipInfo,...D}}:{membershipInfo:D}):t.S.resolve({membershipInfo:D})});h.meta={name:"createThunk",key:"createThunkgetChannelMembershipInfoForUsers",description:"Gets the channel membership for a set of users and returns a promise when the store is updated accordingly"}},5345057011:(x,A,e)=>{"use strict";e.d(A,{T:()=>n,s:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Add a placeholder to the store");n.meta={name:"createAction",key:"createActionaddPlaceholder",description:"Add a placeholder to the store"};const s=(0,t.Ay)("Remove a placeholder from the store by client_msg_id");s.meta={name:"createAction",key:"createActionremovePlaceholder",description:"Remove a placeholder from the store by client_msg_id"}},6445408916:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(8161242485);const n=(0,t.Ay)(s=>s==null?void 0:s.messagePlaceholders);n.meta={name:"createSelector",key:"createSelectorgetAllPlaceholders",description:s=>s==null?void 0:s.messagePlaceholders}},5774398667:(x,A,e)=>{"use strict";e.d(A,{I:()=>s});var t=e(8161242485),n=e(6445408916);const s=(0,t.Ay)((i,l)=>{var o;return(o=(0,n.A)(i))===null||o===void 0?void 0:o[l]});s.meta={name:"createSelector",key:"createSelectorgetPlaceholderByClientMsgId",description:(i,l)=>{var o;return(o=(0,n.A)(i))===null||o===void 0?void 0:o[l]}}},6347367879:(x,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Start delete animation for a message");n.meta={name:"createAction",key:"createActionanimateDeleteMessage",description:"Start delete animation for a message"}},1508337910:(x,A,e)=>{"use strict";e.d(A,{h:()=>l});var t=e(8161242485),n=e(2689960678);const s=(0,t.Ay)(a=>a==null?void 0:a.messagesMeta);s.meta={name:"createSelector",key:"createSelectorgetMessagesMetaState",description:a=>a==null?void 0:a.messagesMeta};var i;const l=(0,t.Ay)((a,r)=>{let{channelId:d,ts:u}=r;var _,v;return(i=(_=s(a))===null||_===void 0||(v=_[d])===null||v===void 0?void 0:v[u])!==null&&i!==void 0?i:n.t0});var o;l.meta={name:"createSelector",key:"createSelectorgetMessageMetaData",description:(a,r)=>{let{channelId:d,ts:u}=r;var _,v;return(o=(_=s(a))===null||_===void 0||(v=_[d])===null||v===void 0?void 0:v[u])!==null&&o!==void 0?o:n.t0}}},3521202413:(x,A,e)=>{"use strict";e.d(A,{j:()=>y});var t=e(6304789565),n=e(7606781622),s=e(9101533895),i=e(8289365785),l=e(8726613433),o=e(8233775522),a=e(6347367879),r=e(9121476043),d=e(9629572172),u=e(4096483543),_=e(3110884894);const v=(0,t.Ay)("Checks if the message is in an active view before doing the animation",function(g,E){let{channelId:M,ts:T,threadTs:D}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments.length>3?arguments[3]:void 0;const m=E(),{getViewSet:O}=C(d.U),P=!(0,u.A)()||(0,l.T2)(m),R=(0,o.ko)(m)&&P,L=(0,l.Qm)(m);var V;const{primary:B,secondary:K}=(V=O(m))!==null&&V!==void 0?V:{},b=B==null?void 0:B.id,S=K==null?void 0:K.id,G=c(()=>g((0,a.o)({channelId:M,ts:T})),"doAnimation");if(R){if(D&&(S==="convo"||S==="thread")&&(0,i.A)(L)===(0,_.Iu)(M,D)){G();return}if(b===M){G();return}}g((0,r.A)({channelId:M,ts:T,threadTs:D}))});v.meta={name:"createThunk",key:"createThunkmaybeAnimateDeleteMessage",description:"Checks if the message is in an active view before doing the animation"};const h=v;var f=e(1484767411),I=e(1508337910),p=e(796111729);const y=(0,t.Ay)("Delete a message by channel ID and timestamp",function(g,E){let{deleted_ts:M,channel:T,_from_evt_log:D,previous_message:C}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var m;const O=E(),P=(0,p.Ay)({state:O});if(!M){P.error("Error in messageDeleted: no deleted_ts");return}if(!((0,s.gT)(O,T)&&(0,s.OL)(O,T))){P.error(`Unknown channelId: ${T}`);return}if((m=(0,I.h)(O,{channelId:T,ts:M}))===null||m===void 0?void 0:m.isDeleting)return;const V=!1,K=(0,n.Ld)(O,T,M,V)||C;g(K?h({channelId:T,ts:M,threadTs:K.thread_ts,fromEvtLog:D}):(0,r.A)({channelId:T,ts:M})),g((0,f.o)({channelId:T,ts:M}))});y.meta={name:"createThunk",key:"createThunksetMessageDeleted",description:"Delete a message by channel ID and timestamp"}},5688490863:(x,A,e)=>{"use strict";e.d(A,{J_:()=>r,QI:()=>f,Up:()=>l,V1:()=>h,Zs:()=>a,iN:()=>i,m3:()=>o,oh:()=>_,qA:()=>u,qj:()=>v,yw:()=>d});var t=e(2689960678),n=e(8161242485);const s=(0,n.Ay)(I=>I.modernSelling.salesListViews);s.meta={name:"createSelector",key:"createSelectorgetSalesListViews",description:I=>I.modernSelling.salesListViews};const i=(0,n.Ay)(I=>s(I).listViewActiveObjectOption);i.meta={name:"createSelector",key:"createSelectorgetListViewActiveObjectOption",description:I=>s(I).listViewActiveObjectOption};const l=(0,n.Ay)(I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.listViewSearchResults});l.meta={name:"createSelector",key:"createSelectorgetListViewSearchResults",description:I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.listViewSearchResults}};const o=(0,n.Ay)((I,p)=>{var y;const g=(y=s(I))===null||y===void 0?void 0:y.listViewIdSearchResultsMap;return(g==null?void 0:g[p])||t.t0});o.meta={name:"createSelector",key:"createSelectorgetListViewObjectMapByOrg",description:(I,p)=>{var y;const g=(y=s(I))===null||y===void 0?void 0:y.listViewIdSearchResultsMap;return(g==null?void 0:g[p])||t.t0}};const a=(0,n.Ay)((I,p,y)=>o(I,p)[y]||t.Ml);a.meta={name:"createSelector",key:"createSelectorgetListViewIdsByOrgAndObject",description:(I,p,y)=>o(I,p)[y]||t.Ml};const r=(0,n.Ay)(I=>{var p;return((p=s(I))===null||p===void 0?void 0:p.listViewActiveSearchResultIds)||t.Ml});r.meta={name:"createSelector",key:"createSelectorgetListViewActiveSearchResultIds",description:I=>{var p;return((p=s(I))===null||p===void 0?void 0:p.listViewActiveSearchResultIds)||t.Ml}};const d=(0,n.Ay)(I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.listViewActiveSearchQuery});d.meta={name:"createSelector",key:"createSelectorgetListViewActiveSearchQuery",description:I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.listViewActiveSearchQuery}};const u=(0,n.Ay)(I=>{var p;return((p=s(I))===null||p===void 0?void 0:p.adminSuggestedListViews)||t.Ml});u.meta={name:"createSelector",key:"createSelectorgetAdminSuggestedListViewsForSidebar",description:I=>{var p;return((p=s(I))===null||p===void 0?void 0:p.adminSuggestedListViews)||t.Ml}};const _=(0,n.Ay)(I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.areAdminSuggestedListViewsForSidebarFresh});_.meta={name:"createSelector",key:"createSelectorgetAreAdminSuggestedListViewsForSidebarFresh",description:I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.areAdminSuggestedListViewsForSidebarFresh}};const v=(0,n.Ay)(I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.adminConfiguredObjects});v.meta={name:"createSelector",key:"createSelectorgetAdminConfiguredObjects",description:I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.adminConfiguredObjects}};const h=(0,n.Ay)(I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.selectedExplorerRowListViewId});h.meta={name:"createSelector",key:"createSelectorgetSelectedExplorerRowListViewId",description:I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.selectedExplorerRowListViewId}};const f=(0,n.Ay)(I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.selectedExplorerRowListViewType});f.meta={name:"createSelector",key:"createSelectorgetSelectedExplorerRowListViewType",description:I=>{var p;return(p=s(I))===null||p===void 0?void 0:p.selectedExplorerRowListViewType}}},8149648525:(x,A,e)=>{"use strict";e.d(A,{b:()=>a});var t=e(5104468117),n=e(6304789565),s=e(7146087658),i=e(5688490863),l=e(1670025826),o=e(146149780);const a=(0,n.Ay)("Search list views by query",(r,d,u)=>{let{isFullSearch:_=!1,objectType:v,query:h,salesforceOrgId:f}=u;const I=d(),p=_?t.Iq:t.TD;let y;return v?y=[v]:y=(0,i.qj)(I).map(E=>E.sobject_api_name),r((0,l.R)({limit:p,listviewObjectScopes:y,query:h,sobjects:[{sobjectApiName:"ListView",fields:["Name","LastViewedDate","SobjectType"]}],salesforceOrgId:f,reason:"list_view_search"})).then(g=>{let{records:E}=g;const M=E.map(D=>({id:D.value,label:D.label,objectType:D.extras.SobjectType,salesforceOrgId:f})),T=r((0,o.x)({listViews:M,salesforceOrgId:f}));return _&&r((0,s.hA)(T)),M})});a.meta={name:"createThunk",key:"createThunksearchListViews",description:"Search list views by query"}},146149780:(x,A,e)=>{"use strict";e.d(A,{x:()=>s});var t=e(6304789565),n=e(7146087658);const s=(0,t.Ay)("Upsert list views fetched by search or other API",(i,l,o)=>{let{listViews:a,salesforceOrgId:r}=o;const d=[],u={},_={};return a.forEach(v=>{const h=v.id,f=v.objectType;u[h]={id:h,label:v.label,lastViewedDate:v.lastViewedDate,objectType:f,salesforceOrgId:r,url:v.url},_[f]=_[f]||[],_[f].push(h),d.push(h)}),i((0,n.TO)(u)),i((0,n.KT)({salesforceOrgId:r,listViewObjMap:_})),d});s.meta={name:"createThunk",key:"createThunkupsertFetchedListViews",description:"Upsert list views fetched by search or other API"}},2413251042:(x,A,e)=>{"use strict";e.d(A,{p$:()=>n,rB:()=>s,x8:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Set whether inverted sidebar was enabled before starting BBM");n.meta={name:"createAction",key:"createActionsetInvertedSidebarInternal",description:"Set whether inverted sidebar was enabled before starting BBM"};const s=(0,t.Ay)("Set whether peeks were enabled on mouse enter before starting BBM");s.meta={name:"createAction",key:"createActionsetPeeksEnabledOnMouseEnterInternal",description:"Set whether peeks were enabled on mouse enter before starting BBM"};const i=(0,t.Ay)("Set what zoom value was set in the client before starting BBM");i.meta={name:"createAction",key:"createActionsetZoomInternal",description:"Set what zoom value was set in the client before starting BBM"}},6303140164:(x,A,e)=>{"use strict";e.d(A,{UY:()=>s,Vb:()=>t,_J:()=>n});const t="slack-inverted-sidebar-initial-setting",n="slack-peeks-enabled-on-mouse-enter-initial-setting",s="slack-zoom-initial-setting"},1838435986:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(4423055085),n=e(9139930183),s=e(2140362605);const i=(0,s.Ay)("NOOP");i.meta={name:"createAction",key:"createActionnoopAction",description:"NOOP"};var l=e(6533394955),o=e(7893624209);const a=0,d=(0,n.Ay)({},a,{storeKey:"noop",persistenceEnabled:!1}).on(i,u=>u+1);(0,t.ul)("dispatchNoop",()=>{(0,l.dispatchForTeamId)((0,o.oI)(),i())})},4309043566:(x,A,e)=>{"use strict";e.d(A,{l:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Relay observed overlays state from OverlaysContextProvider to Redux");n.meta={name:"createAction",key:"createActionrelayOverlays",description:"Relay observed overlays state from OverlaysContextProvider to Redux"}},3180420025:(x,A,e)=>{"use strict";e.d(A,{y:()=>o});var t=e(2384831516),n=e(4309043566),s=e(2689960678);const i=s.t0,l={persistenceEnabled:!1,storeKey:"overlays"},o=(0,t.vy)({},i,l).on(n.l,(a,r)=>r)},983004675:(x,A,e)=>{"use strict";e.d(A,{OI:()=>a,cg:()=>s,kK:()=>n,ot:()=>o,qH:()=>l,us:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Sets the current loading state for a channel");n.meta={name:"createAction",key:"createActionsetLoadingState",description:"Sets the current loading state for a channel"};const s=(0,t.Ay)("Adds pinned item identifiers for files and messages to list of pinned items");s.meta={name:"createAction",key:"createActionaddPinnedItems",description:"Adds pinned item identifiers for files and messages to list of pinned items"};const i=(0,t.Ay)("Remove an item from the pinned items list for a channel");i.meta={name:"createAction",key:"createActionremovePinnedItem",description:"Remove an item from the pinned items list for a channel"};const l=(0,t.Ay)("Adds a pinned item to the beginning of the pinned items list (used for pinning an item in the UI)");l.meta={name:"createAction",key:"createActionprependPinnedItem",description:"Adds a pinned item to the beginning of the pinned items list (used for pinning an item in the UI)"};const o=(0,t.Ay)("Clears the existing pinned items for a channel and sets the loading state");o.meta={name:"createAction",key:"createActionclearPinnedItems",description:"Clears the existing pinned items for a channel and sets the loading state"};const a=(0,t.Ay)("Sets the scrollTop value of the pins popover so that it can be opened to the same spot again");a.meta={name:"createAction",key:"createActionsetPopoverScrollTop",description:"Sets the scrollTop value of the pins popover so that it can be opened to the same spot again"}},4352409775:(x,A,e)=>{"use strict";e.d(A,{G:()=>a});var t=e(3398586081),n=e(6422693406),s=e(8352634987),i=e(6533394955),l=e(983004675),o=e(6701536972);const a=(0,t.A)(()=>new s.Ay({storeKey:"pins",fetch:(r,d)=>n.S.map(d,u=>((0,i.dispatchForTeamId)(r,(0,l.ot)({channelId:u})),(0,i.dispatchForTeamId)(r,(0,o.b)({channelId:u})))),isEnabled:()=>!0,metricsName:"pins"}))},6247263305:(x,A,e)=>{"use strict";e.d(A,{R:()=>t,b:()=>n});const t={FILE:"file",FILE_COMMENT:"file_comment",MESSAGE:"message"},n={NOT_LOADED:void 0,LOADING:"loading",LOADED:"loaded"}},7158699554:(x,A,e)=>{"use strict";e.d(A,{$U:()=>u,A_:()=>_,Wt:()=>v,YG:()=>f,c7:()=>h,jR:()=>d});var t=e(2384831516),n=e(8847766420),s=e(7606781622),i=e(6457401668),l=e(937317117),o=e(4352409775),a=e(6247263305),r=e(4813703725);const d=(0,t.Mz)(function(p,y){let{refetchIfNeeded:g=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(g){const E=(0,n.ZT)(p);(0,o.G)().maybeRefetch(E,y)}return p&&p.pins&&p.pins.pinsByChannel[y]});d.meta={name:"createSelector",key:"createSelectorgetPinnedItemsForChannel",description:function(p,y){let{refetchIfNeeded:g=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(g){const E=(0,n.ZT)(p);(0,o.G)().maybeRefetch(E,y)}return p&&p.pins&&p.pins.pinsByChannel[y]}};const u=(0,t.Mz)((p,y)=>{var g,E;return p&&p.pins&&p.pins.pinsByChannel[y]?(g=p.pins.pinsByChannel)===null||g===void 0||(E=g[y])===null||E===void 0?void 0:E.length:0});u.meta={name:"createSelector",key:"createSelectorgetPinCountForChannel",description:(p,y)=>{var g,E;return p&&p.pins&&p.pins.pinsByChannel[y]?(g=p.pins.pinsByChannel)===null||g===void 0||(E=g[y])===null||E===void 0?void 0:E.length:0}};const _=(0,t.Mz)((p,y)=>p&&p.pins&&p.pins.loadingStateByChannel[y]);_.meta={name:"createSelector",key:"createSelectorgetLoadingState",description:(p,y)=>p&&p.pins&&p.pins.loadingStateByChannel[y]};const v=(0,t.Mz)((p,y)=>{let{channelId:g,ts:E}=y;const M=!1,T=(0,s.Ld)(p,g,E,M);if(!T)return!1;if((0,i.m)(T)&&T.comment){const D=(0,l.yd)(p,T.file,T.comment.id);return D?!!(D.pinned_to&&D.pinned_to.includes(g)):!1}return!!(T.pinned_to&&T.pinned_to.includes(g))});v.meta={name:"createSelector",key:"createSelectorisMessagePinned",description:(p,y)=>{let{channelId:g,ts:E}=y;const M=!1,T=(0,s.Ld)(p,g,E,M);if(!T)return!1;if((0,i.m)(T)&&T.comment){const D=(0,l.yd)(p,T.file,T.comment.id);return D?!!(D.pinned_to&&D.pinned_to.includes(g)):!1}return!!(T.pinned_to&&T.pinned_to.includes(g))}};const h=c((p,y)=>{switch(y.type){case a.R.MESSAGE:return{...(0,s.Ld)(p,y.channel,y.ts),type:a.R.MESSAGE};case a.R.FILE:return{...(0,l.Lp)(p,y.id),type:a.R.FILE};case a.R.FILE_COMMENT:return{...(0,l.yd)(p,y.fileId,y.id),fileId:y.fileId,type:a.R.FILE_COMMENT};default:return{}}},"getItemWithPinIdentifier"),f=(0,r.eI)((p,y)=>{const g=d(p,y);return g?g.map(E=>h(p,E)):[]}),I=(0,t.Mz)(p=>p&&p.pins&&p.pins.popoverScrollTop);I.meta={name:"createSelector",key:"createSelectorgetPopoverScrollTop",description:p=>p&&p.pins&&p.pins.popoverScrollTop}},6701536972:(x,A,e)=>{"use strict";e.d(A,{b:()=>f});var t=e(796111729),n=e(9109082163),s=e(474652310),i=e(6304789565),l=e(8847766420),o=e(6403218297),a=e(6665892446),r=e(10127715),d=e(6247263305),u=e(983004675),_=e(1581380967),v=e(4352409775),h=e(5792544570);const f=(0,i.Ay)("Fetch pinned items list for channel",(I,p,y)=>{const g=y.channelId;return I((0,u.kK)({loadingState:d.b.LOADING,channelId:g})),I((0,n.xs)({reason:"fetchPinsList",...y})).then(function(){let{items:E}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const M=E.filter(C=>C.type.includes(d.R.FILE)).map(C=>{if(C.type===d.R.FILE_COMMENT){const{comment:m,file:O,...P}=C,R=(0,o.A)(m,O);return{...P,file:R}}return C}),T=E.filter(C=>C.type===d.R.MESSAGE);if(M.length){const C=M.filter(O=>O.type!==d.R.FILE_COMMENT),m=M.filter(O=>O.type===d.R.FILE_COMMENT);I((0,s.b)({files:C.map(O=>O.file)})),I((0,s.b)({files:m.map(O=>O.file)}))}if(T.length){const C=T.map(O=>{let{message:P}=O;return P}),m=I((0,a.A)({imsgs:C,channelId:g}));I((0,r.Kc)(m))}I((0,_.K)({channelId:g,count:E.length})),I((0,u.cg)({items:E.map(h.B),channelId:g})),I((0,u.kK)({loadingState:d.b.LOADED,channelId:g}));const D=(0,l.ZT)(p());(0,v.G)().markObjectsAsFresh(D,[g])}).catch(E=>{throw I((0,u.kK)({loadingState:d.b.NOT_LOADED,channelId:g})),(0,t.Ay)({getState:p}).error(`Error in fetchPinsList: ${JSON.stringify(E)}`),E})});f.meta={name:"createThunk",key:"createThunkfetchPinsList",description:"Fetch pinned items list for channel"}},1581380967:(x,A,e)=>{"use strict";e.d(A,{K:()=>a});var t=e(6304789565),n=e(9606603587),s=e(9101533895),i=e(796111729),l=e(6247263305),o=e(7158699554);const a=(0,t.Ay)("update a pin count for a channel",(r,d,u)=>{let{channelId:_,count:v,forceUpdate:h=!1}=u;const f=d(),I={...(0,s.OL)(f,_)},p=(0,o.jR)(f,_,{refetchIfNeeded:!1}),y=(0,o.A_)(f,_),g=!h&&y===l.b.LOADED?p==null?void 0:p.length:v;if(g===I.pinned_items_count)return;(0,i.Ay)({state:f}).info("PINS",`Pins count updated for channel ${_}: ${g}`);const E={...I,pinned_items_count:g};r((0,n.B)({channel:E}))});a.meta={name:"createThunk",key:"createThunkupdatePinCount",description:"update a pin count for a channel"}},5792544570:(x,A,e)=>{"use strict";e.d(A,{B:()=>n});var t=e(6247263305);const n=c(s=>{switch(s.type){case t.R.MESSAGE:var i;return{type:s.type,channel:s.channel,ts:(i=s.message)===null||i===void 0?void 0:i.ts};case t.R.FILE:var l,o;return{type:s.type,id:s.file?s.file.id:(l=s.files)===null||l===void 0||(o=l[0])===null||o===void 0?void 0:o.id};case t.R.FILE_COMMENT:var a;return{type:s.type,id:s.comment.id,fileId:(a=s.file)===null||a===void 0?void 0:a.id};default:return{}}},"formatPinFromAPI")},7665060966:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(8161242485),n=e(2047021170);const s=(0,t.Ay)(l=>(0,n.ty)(l,"messages_theme")==="dense"?"dense":"light");s.meta={name:"createSelector",key:"createSelectorgetUserMessagesTheme",description:l=>(0,n.ty)(l,"messages_theme")==="dense"?"dense":"light"};const i=s},1317368584:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(8161242485),n=e(9599231336),s=e(2047021170),i=e(7665060966);const l=(0,t.Ay)(a=>!(0,n.P)(a)&&!!(0,s.ty)(a,"jumbomoji")&&(0,i.A)(a)!=="dense");l.meta={name:"createSelector",key:"createSelectorshouldDisplayJumbomoji",description:a=>!(0,n.P)(a)&&!!(0,s.ty)(a,"jumbomoji")&&(0,i.A)(a)!=="dense"};const o=l},7520484642:(x,A,e)=>{"use strict";e.d(A,{$n:()=>f,DS:()=>n,Eu:()=>d,JB:()=>h,Lk:()=>I,QU:()=>y,UR:()=>l,Ye:()=>u,aF:()=>p,cl:()=>a,dz:()=>i,gJ:()=>_,mC:()=>o,mo:()=>r,wt:()=>s,zG:()=>v});var t=e(2140362605);const n=(0,t.Ay)("Switch currently active plan");n.meta={name:"createAction",key:"createActionswitchPlans",description:"Switch currently active plan"};const s=(0,t.Ay)("Successfully fetched available plans");s.meta={name:"createAction",key:"createActionplansFetchSuccess",description:"Successfully fetched available plans"};const i=(0,t.Ay)("Successfully fetched cost for current plan");i.meta={name:"createAction",key:"createActioncostFetchSuccess",description:"Successfully fetched cost for current plan"};const l=(0,t.Ay)("Successfully fetched cost for current addon");l.meta={name:"createAction",key:"createActionaddonsCostFetchSuccess",description:"Successfully fetched cost for current addon"};const o=(0,t.Ay)("Received an API error");o.meta={name:"createAction",key:"createActionsetErrorState",description:"Received an API error"};const a=(0,t.Ay)("Plans and cost data loaded");a.meta={name:"createAction",key:"createActionplansAndCostDataLoaded",description:"Plans and cost data loaded"};const r=(0,t.Ay)("Mark plans and cost data as not loaded");r.meta={name:"createAction",key:"createActionmarkPlansAndCostDataAsNotLoaded",description:"Mark plans and cost data as not loaded"};const d=(0,t.Ay)("Set Plan Level");d.meta={name:"createAction",key:"createActionsetPlanLevel",description:"Set Plan Level"};const u=(0,t.Ay)("Set Payment Method");u.meta={name:"createAction",key:"createActionsetPaymentMethod",description:"Set Payment Method"};const _=(0,t.Ay)("Update Is Plans Data Loading");_.meta={name:"createAction",key:"createActionupdateIsPlansDataLoading",description:"Update Is Plans Data Loading"};const v=(0,t.Ay)("Update Is Cost Data Loading");v.meta={name:"createAction",key:"createActionupdateIsCostDataLoading",description:"Update Is Cost Data Loading"};const h=(0,t.Ay)("Load Plans Page Boot Data Success");h.meta={name:"createAction",key:"createActionloadPlansPageBootDataSuccess",description:"Load Plans Page Boot Data Success"};const f=(0,t.Ay)("Mark plans page boot data as not loaded");f.meta={name:"createAction",key:"createActionmarkPlansPageBootDataAsNotLoaded",description:"Mark plans page boot data as not loaded"};const I=(0,t.Ay)("Mark plan payment status data as not loaded");I.meta={name:"createAction",key:"createActionmarkPlanStatusDataAsNotLoaded",description:"Mark plan payment status data as not loaded"};const p=(0,t.Ay)("Set when toggling between base plan and Slack AI on plans page");p.meta={name:"createAction",key:"createActionsetIsSlackAiToggleSelected",description:"Set when toggling between base plan and Slack AI on plans page"};const y=(0,t.Ay)("Team plan status loaded");y.meta={name:"createAction",key:"createActionteamPlanStatusFetchSuccess",description:"Team plan status loaded"}},4005238080:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(6304789565),n=e(165535451),s=e(7520484642);const i=(0,t.Ay)("Load Plans Page Boot Data",o=>(o((0,s.$n)()),o((0,n.ib)()).then(a=>{let r=!0;return a!=null&&a.team_current_product&&a.team_current_product!==""&&(r=!1),o((0,s.aF)({isSelected:r})),o((0,s.JB)(a))})));i.meta={name:"createThunk",key:"createThunkloadPlansPageBootData",description:"Load Plans Page Boot Data"};const l=i},962959561:(x,A,e)=>{"use strict";e.d(A,{L9:()=>f,aJ:()=>v,jv:()=>h});var t=e(8161242485),n=e(7268021173),s=e(1960898919),i=e(3677514771),l=e(6839188756),o=e(6323355797),a=e(5773584938),r=e(3245843483);const d=[{promoType:o.ZO.PaidFeatureTrial,promoSubtype:o.zG.MessageLimit},{promoType:o.ZO.PaidFeatureTrial,promoSubtype:o.zG.Vhq},{promoType:o.ZO.PaidFeatureTrial,promoSubtype:o.zG.Canvas},{promoType:o.ZO.PaidFeatureTrial,promoSubtype:o.zG.SharedChannels},{promoType:o.ZO.GlobalEntrypointTrial},{promoType:o.ZO.SolutionsGalleryPromo,promoSubtype:o.zG.SolutionsGalleryInProduct}],u=(0,t.Ay)(p=>d.some(y=>{let{promoType:g,promoSubtype:E}=y;return(0,n.G)(p,g,E)}));u.meta={name:"createSelector",key:"createSelectorisCurrentTrialEligiblePromoCampaign",description:p=>d.some(y=>{let{promoType:g,promoSubtype:E}=y;return(0,n.G)(p,g,E)})};const _=(0,t.Ay)(p=>d.some(y=>{let{promoType:g,promoSubtype:E}=y;return(0,n.hq)(p,g,E)}));_.meta={name:"createSelector",key:"createSelectorisEligiblePromoCampaign",description:p=>d.some(y=>{let{promoType:g,promoSubtype:E}=y;return(0,n.hq)(p,g,E)})};const v=c(p=>{let{campaignType:y,campaignSubType:g}=p;return d.some(E=>{let{promoType:M,promoSubtype:T}=E;return M===y&&T===g})},"checkIfEligiblePromoCampaign"),h=(0,t.Ay)(p=>{const y=(0,i.H7)(p);return!!(0,s.ax)(p,"has_started_feature_auto_charge_trial")&&!(0,l.tc)(y)&&(0,n.tV)(p)&&u(p)&&(0,a.Ii)(p)});h.meta={name:"createSelector",key:"createSelectorisCurrentlyOnAutoChargeFeatureTrial",description:p=>{const y=(0,i.H7)(p);return!!(0,s.ax)(p,"has_started_feature_auto_charge_trial")&&!(0,l.tc)(y)&&(0,n.tV)(p)&&u(p)&&(0,a.Ii)(p)}};const f=(0,t.Ay)(function(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const E=(0,i.H7)(p);return!(0,r.Z9F)()&&(0,l.tc)(E)&&!(0,n.iH)(p)&&(g||_(p))&&(y||(0,a.Ii)(p))});f.meta={name:"createSelector",key:"createSelectorisEligibleAutoChargeFeatureTrial",description:function(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const E=(0,i.H7)(p);return!(0,r.Z9F)()&&(0,l.tc)(E)&&!(0,n.iH)(p)&&(g||_(p))&&(y||(0,a.Ii)(p))}};const I=(0,t.Ay)(p=>f(p)&&(0,o.jo)());I.meta={name:"createSelector",key:"createSelectorisEligibleAutoChargeAndCheckoutRoute",description:p=>f(p)&&(0,o.jo)()}},5512605238:(x,A,e)=>{"use strict";e.d(A,{F:()=>n});var t=e(8161242485);const n=(0,t.Ay)(s=>s&&s.promo&&s.promo.showTrialStartedCelebration);n.meta={name:"createSelector",key:"createSelectorgetShowTrialStartedCelebration",description:s=>s&&s.promo&&s.promo.showTrialStartedCelebration}},8448112102:(x,A,e)=>{"use strict";e.d(A,{r:()=>d});var t=e(9706240641),n=e.n(t),s=e(3134334389),i=e(5270990260),l=e(6304789565),o=e(2375333597),a=e(1384076438),r=e(5773584938);const d=(0,l.Ay)("Open Auto Charge Trial entry modal",function(){var u=(0,t.coroutine)(function*(_,v,h){let{promoType:f,promoSubtype:I,entryPoint:p}=h;const{isEligible:y}=yield _((0,a.A)({campaignType:f,campaignSubType:I,reason:"auto_charge_trial_entry"})),g=(0,r.Ii)(v());return _((0,o.q)({element:s.createElement(i.J,{entryPoint:p||"auto_charge_trial_entry_point",isEligibleForTrial:y,promoType:f,promoSubtype:I,experimentPaidFeatureTrialAutoChargeGroupTreatment:g})}))});return function(_,v,h){return u.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkopenAutoChargeTrialEntryModal",description:"Open Auto Charge Trial entry modal"}},398781533:(x,A,e)=>{"use strict";e.d(A,{Q:()=>_});var t=e(9706240641),n=e.n(t),s=e(6304789565),i=e(962959561),l=e(56548687),o=e(1224315998),a=e(5773584938),r=e(1384076438),d=e(4761125736),u=e(8847766420);const _=(0,s.Ay)("Maybe try logging exposure after checking eligibility",function(){var v=(0,t.coroutine)(function*(h,f,I){if(!(0,i.aJ)({campaignType:I==null?void 0:I.campaignType,campaignSubType:I==null?void 0:I.campaignSubType}))return;const{isEligible:p}=yield h((0,r.A)(I)),y=f(),g=(0,u.ZT)(y);if(!p&&!(0,i.L9)(y,!0))return;const E=(0,l.e)({state:y}),M=(0,d.KK)(y,"paid_feature_trial_auto_charge");E.track(o.EventId.NEWXP_TEAM_CREATE,{contents:{ui_context:{step_variant:M==null?void 0:M.group,ui_step:I.entryPoint,ui_component_variant:g,ui_properties:{element_name:"autocharge_exposure_clog",element_value:`${I==null?void 0:I.campaignType}-${I==null?void 0:I.campaignSubType}`},action:o.UiAction.IMPRESSION}},assignment:M,exposureEntryPoint:I.entryPoint,campaignType:I==null?void 0:I.campaignType,campaignSubType:I==null?void 0:I.campaignSubType,team_id:g}),h((0,a.Fg)())});return function(h,f,I){return v.apply(this,arguments)}}());_.meta={name:"createThunk",key:"createThunkpaidFeatureTrialAutoChargeMaybeLogExposureAndCheck",description:"Maybe try logging exposure after checking eligibility"}},6822097892:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(9706240641),n=e.n(t),s=e(7307560139),i=e(2346425530),l=e(9629572172),o=e(3193155968),a=e(6078549397),r=e(5033667e3),d=e(7429662208),u=e(9108490430),_=e(6304789565);const v=(0,_.Ay)("Open a document on a specific version",function(){var f=(0,t.coroutine)(function*(I,p,y,g){const{fileId:E,windowId:M,version:T,isFromCloseActivityHistory:D,replaceHistoryState:C}=y,m=p(),{versionId:O,sequence:P}={...T};if(!E)return;const{isMainWindow:R,closeView:L,getViewSet:V}=g(l.U),B=(0,d.e6)(m),K=(0,i.xu)(m,M),{versionId:b,sequence:S}={...K},G=D?void 0:O||b,H=D?void 0:P||S;if(D||I((0,s.fw)({windowId:M,versionId:O||b})),C){const U=R?V(m):(0,d.hZ)(m,{windowId:M});if(U){const F=U[o.mq.Primary];if(F){const Y={...U,[o.mq.Primary]:{...U[o.mq.Primary],params:{...F.params,versionId:G,sequence:H}}};I(R?(0,r.A)({windowId:o.N2,tab:B,viewSet:Y}):(0,r.A)({windowId:M.toString(),viewSet:Y}))}}}else{const U={id:(0,a.Lo)({id:E}),versionId:G,sequence:H,preserveExistingSecondaryView:!D};I(R?(0,u.IZ)({windowId:o.N2,tab:B,container:o.mq.Primary,params:U}):(0,u.IZ)({windowId:M.toString(),container:o.mq.Primary,params:U})),D&&L(o.mq.Secondary)}D&&I((0,s.NA)({windowId:M}))});return function(I,p,y,g){return f.apply(this,arguments)}}());v.meta={name:"createThunk",key:"createThunkopenDocVersion",description:"Open a document on a specific version"};const h=v},7115106069:(x,A,e)=>{"use strict";e.d(A,{Bi:()=>s,d0:()=>l,oj:()=>i});var t=e(8161242485);const n=(0,t.Ay)(o=>o==null?void 0:o.quipDocEmbeds);n.meta={name:"createSelector",key:"createSelectorgetQuipDocEmbedsStoreState",description:o=>o==null?void 0:o.quipDocEmbeds};const s=(0,t.Ay)(o=>{const a=n(o);return a&&Object.keys(a).length>0});s.meta={name:"createSelector",key:"createSelectorisSpaceOpen",description:o=>{const a=n(o);return a&&Object.keys(a).length>0}};const i=(0,t.Ay)(o=>{const a=n(o);return Object.keys(a)});i.meta={name:"createSelector",key:"createSelectorgetOpenSpaces",description:o=>{const a=n(o);return Object.keys(a)}};const l=(0,t.Ay)((o,a)=>{const r=n(o);var d;return((d=r[a])!==null&&d!==void 0?d:0)>0});l.meta={name:"createSelector",key:"createSelectorisSpaceOpenForThreadId",description:(o,a)=>{const r=n(o);var d;return((d=r[a])!==null&&d!==void 0?d:0)>0}}},4368281601:(x,A,e)=>{"use strict";e.d(A,{Kt:()=>r,al:()=>o,jw:()=>l,k:()=>n,uo:()=>s,yw:()=>i,z5:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Store/replace client.counts for this channel");n.meta={name:"createAction",key:"createActionsetQuipUnreadCount",description:"Store/replace client.counts for this channel"};const s=(0,t.Ay)("increment mention count for the channel");s.meta={name:"createAction",key:"createActionincQuipUnreadCountForChannel",description:"increment mention count for the channel"};const i=(0,t.Ay)("decrement mention count for the channel");i.meta={name:"createAction",key:"createActiondecQuipUnreadCountForChannel",description:"decrement mention count for the channel"};const l=(0,t.Ay)("Add canvases to hide on undo");l.meta={name:"createAction",key:"createActionsetCanvasesToHideOnClearAll",description:"Add canvases to hide on undo"};const o=(0,t.Ay)("clear new mention flag for the channel");o.meta={name:"createAction",key:"createActionclearNewMentionFlagForChannel",description:"clear new mention flag for the channel"};const a=(0,t.Ay)("Set the list of enterprise file channels (canvases) to exclude from total counts");a.meta={name:"createAction",key:"createActionsetCanvasesToSuppress",description:"Set the list of enterprise file channels (canvases) to exclude from total counts"};const r=(0,t.Ay)("Set the last seen timestamp for a badged canvas animation");r.meta={name:"createAction",key:"createActionsetLastSeenCanvasAnimationTimestamp",description:"Set the last seen timestamp for a badged canvas animation"}},117899263:(x,A,e)=>{"use strict";e.d(A,{_:()=>s});var t=e(8161242485),n=e(1960898919);const s=(0,t.Ay)(i=>{var l;return(l=(0,n.ax)(i,"is_new_human"))!==null&&l!==void 0?l:!1});s.meta={name:"createSelector",key:"createSelectorisNewHuman",description:i=>{var l;return(l=(0,n.ax)(i,"is_new_human"))!==null&&l!==void 0?l:!1}}},5773584938:(x,A,e)=>{"use strict";e.d(A,{Fg:()=>_,Ii:()=>a});var t=e(8161242485),n=e(6304789565),s=e(6209625934),i=e(4761125736);const l=(0,t.Ay)(v=>(0,i._Z)(v,"paid_feature_trial_auto_charge",!1));l.meta={name:"createSelector",key:"createSelectorpaidFeatureTrialAutoChargeGetAssignment",description:v=>(0,i._Z)(v,"paid_feature_trial_auto_charge",!1)};const o=(0,t.Ay)(v=>(0,i._Z)(v,"paid_feature_trial_auto_charge",!1)==="control");o.meta={name:"createSelector",key:"createSelectorpaidFeatureTrialAutoChargeIsControl",description:v=>(0,i._Z)(v,"paid_feature_trial_auto_charge",!1)==="control"};const a=(0,t.Ay)(v=>(0,i._Z)(v,"paid_feature_trial_auto_charge",!1)==="treatment");a.meta={name:"createSelector",key:"createSelectorpaidFeatureTrialAutoChargeIsTreatment",description:v=>(0,i._Z)(v,"paid_feature_trial_auto_charge",!1)==="treatment"};const r=(0,t.Ay)(v=>{var h;return["treatment"].includes((h=(0,i._Z)(v,"paid_feature_trial_auto_charge",!1))!==null&&h!==void 0?h:"")});r.meta={name:"createSelector",key:"createSelectorpaidFeatureTrialAutoChargeIsAnyTreatment",description:v=>{var h;return["treatment"].includes((h=(0,i._Z)(v,"paid_feature_trial_auto_charge",!1))!==null&&h!==void 0?h:"")}};const d=(0,t.Ay)(v=>o(v)||r(v));d.meta={name:"createSelector",key:"createSelectorpaidFeatureTrialAutoChargeIsExposed",description:v=>o(v)||r(v)};const u=c(v=>{const h=(0,i.KK)(v,"paid_feature_trial_auto_charge");h&&h.log_exposures&&(0,s.K)("paid_feature_trial_auto_charge",h,v)},"paidFeatureTrialAutoChargeLogExposure"),_=(0,n.Ay)("Log exposure for the paid_feature_trial_auto_charge experiment if it is exposed",(v,h)=>{d(h())&&u(h())});_.meta={name:"createThunk",key:"createThunkpaidFeatureTrialAutoChargeMaybeLogExposure",description:"Log exposure for the paid_feature_trial_auto_charge experiment if it is exposed"}},9623497342:(x,A,e)=>{"use strict";e.d(A,{$J:()=>a,E5:()=>v});var t=e(8161242485),n=e(6304789565),s=e(6209625934),i=e(4761125736);const l=(0,t.Ay)(h=>(0,i._Z)(h,"pnp_go",!1));l.meta={name:"createSelector",key:"createSelectorpnpGoGetAssignment",description:h=>(0,i._Z)(h,"pnp_go",!1)};const o=(0,t.Ay)(h=>(0,i._Z)(h,"pnp_go",!1)==="control");o.meta={name:"createSelector",key:"createSelectorpnpGoIsControl",description:h=>(0,i._Z)(h,"pnp_go",!1)==="control"};const a=(0,t.Ay)(h=>(0,i._Z)(h,"pnp_go",!1)==="treatment");a.meta={name:"createSelector",key:"createSelectorpnpGoIsTreatment",description:h=>(0,i._Z)(h,"pnp_go",!1)==="treatment"};const r=(0,t.Ay)(h=>{var f;return["treatment"].includes((f=(0,i._Z)(h,"pnp_go",!1))!==null&&f!==void 0?f:"")});r.meta={name:"createSelector",key:"createSelectorpnpGoIsAnyTreatment",description:h=>{var f;return["treatment"].includes((f=(0,i._Z)(h,"pnp_go",!1))!==null&&f!==void 0?f:"")}};const d=(0,t.Ay)(h=>o(h)||r(h));d.meta={name:"createSelector",key:"createSelectorpnpGoIsExposed",description:h=>o(h)||r(h)};const u=(0,t.Ay)(h=>{var f;return["aa_control","aa_treatment"].includes((f=(0,i._Z)(h,"pnp_go",!1))!==null&&f!==void 0?f:"")});u.meta={name:"createSelector",key:"createSelectorpnpGoIsAAExposed",description:h=>{var f;return["aa_control","aa_treatment"].includes((f=(0,i._Z)(h,"pnp_go",!1))!==null&&f!==void 0?f:"")}};const _=c(h=>{const f=(0,i.KK)(h,"pnp_go");f&&f.log_exposures&&(0,s.K)("pnp_go",f,h)},"pnpGoLogExposure"),v=(0,n.Ay)("Log exposure for the pnp_go experiment if it is exposed",(h,f)=>{const I=f();(d(I)||u(I))&&_(I)});v.meta={name:"createThunk",key:"createThunkpnpGoMaybeLogExposure",description:"Log exposure for the pnp_go experiment if it is exposed"}},1302213854:(x,A,e)=>{"use strict";e.d(A,{C7:()=>n,Ln:()=>i,Mb:()=>s,UM:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Have we already sent boot metrics");n.meta={name:"createAction",key:"createActionsetShouldLogAppBootMetrics",description:"Have we already sent boot metrics"};const s=(0,t.Ay)("Should we log team switch metrics");s.meta={name:"createAction",key:"createActionsetShouldLogTeamSwitchMetrics",description:"Should we log team switch metrics"};const i=(0,t.Ay)("Set whether we should continue logging time to visible metrics");i.meta={name:"createAction",key:"createActionsetShouldLogTTVMetrics",description:"Set whether we should continue logging time to visible metrics"};const l=(0,t.Ay)("Set whether we should continue logging time to usable metrics");l.meta={name:"createAction",key:"createActionsetShouldLogTTUMetrics",description:"Set whether we should continue logging time to usable metrics"}},4476913522:(x,A,e)=>{"use strict";e.d(A,{a:()=>h});var t=e(8086952004),n=e(12126472),s=e(6626377467),i=e(235108050),l=e(7530630315),o=e(5729325965),a=e(2240330919),r=e(1116859610),d=e(6422693406),u=e(6304789565),_=e(3110884894),v=e(2155512519);const h=(0,u.Ay)("gets thread replies from the API",(f,I,p)=>{const{channelId:y,threadTs:g,oldest:E,limit:M}=p;let T=p.latest;E===T&&T===p.threadTs&&(T=null);const D=(0,_.Iu)(y,g);return E&&T?d.S.all([f((0,v.$b)({channelId:y,threadTs:g,latest:T,limit:M})),f((0,v.$b)({channelId:y,threadTs:g,oldest:E,limit:M}))]).then(C=>{let[m,O]=C;const P=(0,t.A)(m.msgs,{ts:g})||(0,t.A)(O.msgs,{ts:g}),R=(0,n.A)(m.msgs,{ts:g}),L=(0,n.A)(O.msgs,{ts:g}),V=m.deleted,B=O.deleted,K=(0,s.A)(R.concat(L),"ts"),b=(0,i.A)((0,l.A)(V,B));!m.hasMore&&P&&K.unshift(P);const S=K.map(G=>G.ts);return f((0,r.A)({msgs:K,channelId:D,hasMore:{hasMoreStart:m.hasMore,hasMoreEnd:O.hasMore},oldest:(0,o.A)([E,(0,o.A)(S)]),latest:(0,a.A)([T,(0,a.A)(S)]),deleted:b})),{msgs:K}}):f((0,v.$b)({channelId:y,threadTs:g,oldest:E,latest:T,limit:M})).then(function(){let{msgs:C,deleted:m,hasMore:O}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const P=T&&!O||E===g||T===g||!E&&!T&&!O;let R=C;P||(R=(0,n.A)(C,{ts:g}));let L=O;!E&&!T&&(L={hasMoreStart:O,hasMoreEnd:!1}),f((0,r.A)({msgs:R,channelId:D,hasMore:L,oldest:E,latest:T,deleted:m}));const V=(0,t.A)(C,{ts:g});return V&&E===g&&f((0,r.A)({msgs:[V],channelId:D,hasMore:!1,latest:g})),{msgs:R}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},6929023741:(x,A,e)=>{"use strict";e.d(A,{a:()=>h});var t=e(8086952004),n=e(12126472),s=e(6626377467),i=e(235108050),l=e(7530630315),o=e(5729325965),a=e(2240330919),r=e(1116859610),d=e(6422693406),u=e(6304789565),_=e(3110884894),v=e(2155512519);const h=(0,u.Ay)("gets thread replies from the API",(f,I,p)=>{const{channelId:y,threadTs:g,oldest:E,limit:M}=p;let T=p.latest;E===T&&T===p.threadTs&&(T=null);const D=(0,_.Iu)(y,g);return E&&T?d.S.all([f((0,v.$b)({channelId:y,threadTs:g,latest:T,limit:M})),f((0,v.$b)({channelId:y,threadTs:g,oldest:E,limit:M}))]).then(C=>{let[m,O]=C;const P=(0,t.A)(m.msgs,{ts:g})||(0,t.A)(O.msgs,{ts:g}),R=(0,n.A)(m.msgs,{ts:g}),L=(0,n.A)(O.msgs,{ts:g}),V=m.deleted,B=O.deleted,K=(0,s.A)(R.concat(L),"ts"),b=(0,i.A)((0,l.A)(V,B));!m.hasMore&&P&&K.unshift(P);const S=K.map(G=>G.ts);return f((0,r.A)({msgs:K,channelId:D,hasMore:{hasMoreStart:m.hasMore,hasMoreEnd:O.hasMore},oldest:(0,o.A)([E,(0,o.A)(S)]),latest:(0,a.A)([T,(0,a.A)(S)]),deleted:b})),{msgs:K}}):f((0,v.$b)({channelId:y,threadTs:g,oldest:E,latest:T,limit:M})).then(function(){let{msgs:C,deleted:m,hasMore:O}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const P=T&&!O||E===g||T===g||!E&&!T&&!O;let R=C;P||(R=(0,n.A)(C,{ts:g}));let L=O;!E&&!T&&(L={hasMoreStart:O,hasMoreEnd:!1}),f((0,r.A)({msgs:R,channelId:D,hasMore:L,oldest:E,latest:T,deleted:m}));const V=(0,t.A)(C,{ts:g});return V&&E===g&&f((0,r.A)({msgs:[V],channelId:D,hasMore:!1,latest:g})),{msgs:R}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},1827030018:(x,A,e)=>{"use strict";e.d(A,{_:()=>r});var t=e(9746734072),n=e(5238395322),s=e(2101927269),i=e(7486305635),l=e(6304789565),o=e(9101533895),a=e(157328471);const r=(0,l.Ay)("Update the unread count for the all threads view",(d,u,_)=>{let{threadsHasUnreads:v,threadsUnreadCountByChannel:h,threadsMentionCountByChannel:f,threadsLastUpdatedTimestamp:I}=_;const p=(0,t.A)(f)?{}:f,y=u(),g=(0,n.A)((0,s.A)(p,(M,T)=>{const D=(0,o.OL)(y,T);return(0,i.WK)(y,D)&&!(0,i.fA)(y,D)}));let E=0;h?E=(0,n.A)((0,s.A)(h,(M,T)=>{const D=(0,o.OL)(y,T);return(0,i.WK)(y,D)})):E=v?1:0,d((0,a.LI)({threadsUnreadCount:E,threadsUnreadCountByChannel:h,threadsMentionCount:g,threadsMentionCountByChannel:p,threadsLastUpdatedTimestamp:I,suppressThreads:(0,i.dQ)(y)}))});r.meta={name:"createThunk",key:"createThunkthreadsUnreadCountChanged",description:"Update the unread count for the all threads view"}},9132245692:(x,A,e)=>{"use strict";e.d(A,{g:()=>n,y:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Update unread counts for the specified user alert types");n.meta={name:"createAction",key:"createActionupdateUserAlertsUnreadCount",description:"Update unread counts for the specified user alert types"};const s=(0,t.Ay)("Reset the user alerts store to the specified alert counts map");s.meta={name:"createAction",key:"createActionresetAllUserAlertsUnreadCounts",description:"Reset the user alerts store to the specified alert counts map"}},2696160384:(x,A,e)=>{"use strict";e.d(A,{D_:()=>s,FI:()=>n,Sr:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Sets whether the mini player is open or not");n.meta={name:"createAction",key:"createActionsetIsDocked",description:"Sets whether the mini player is open or not"};const s=(0,t.Ay)("Sets mini video player config");s.meta={name:"createAction",key:"createActionsetMiniPlayerConfig",description:"Sets mini video player config"};const i=(0,t.Ay)("Clears mini video player config");i.meta={name:"createAction",key:"createActionclearMiniPlayerConfig",description:"Clears mini video player config"}},9813790040:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3750057149),n=e(9121100949),s=e(9139930183),i=e(1201539379),l=e(6803195599),o=e(9733150292);const a={persistenceEnabled:!1,storeKey:"viewLayout"},r={sidebarWidthIntent:void 0,sidebarWidthMode:l.tR.AUTO,sidebarWideWidthIntent:void 0,sidebarWideWidthMode:l.tR.AUTO,sidebarExtraWideWidthIntent:void 0,sidebarExtraWideWidthMode:l.tR.AUTO,secondaryWidthIntent:void 0,secondaryWidthMode:l.tR.AUTO,splitWidthIntent:void 0,splitWidthMode:l.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isWorkspaceSwitcherVisible:!1,isCompactModeEnabled:!1};try{r.sidebarWidthIntent=(0,o.W6)(n.ke)||void 0,r.sidebarWideWidthIntent=(0,o.W6)(n.u1)||void 0,r.sidebarExtraWideWidthIntent=(0,o.W6)(n.jt)||void 0,r.secondaryWidthIntent=(0,o.W6)(n.gN)||void 0,r.sidebarWidthMode=(0,o.W6)(n.ts)||l.tR.AUTO,r.splitWidthIntent=(0,o.W6)(n.qD)||void 0,r.splitWidthMode=(0,o.W6)(n.$D)||l.tR.AUTO,r.sidebarWidthMode=(0,o.W6)(n.ts)||l.tR.AUTO,r.sidebarWideWidthMode=(0,o.W6)(n.r1)||l.tR.AUTO,r.sidebarExtraWideWidthMode=(0,o.W6)(n.OR)||l.tR.AUTO,r.secondaryWidthMode=(0,o.W6)(n.Ts)||l.tR.AUTO;const _=(0,o.W6)(n.jG);r.isSidebarVisible=(0,t.A)(_)?_:!0;const v=(0,o.W6)(n.WU);r.isWorkspaceSwitcherVisible=(0,t.A)(v)?v:!1;const h=(0,o.W6)(n.RC);r.isCompactModeEnabled=(0,t.A)(h)?h:!1}catch{}const u=(0,s.Ay)({},r,a).on(i.SP,(_,v)=>{let{sidebarWidthIntent:h,sidebarWidthMode:f}=v;return{..._,sidebarWidthIntent:h,sidebarWidthMode:f}}).on(i.hk,(_,v)=>{let{sidebarWideWidthIntent:h,sidebarWideWidthMode:f}=v;return{..._,sidebarWideWidthIntent:h,sidebarWideWidthMode:f}}).on(i.$t,(_,v)=>{let{sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:f}=v;return{..._,sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:f}}).on(i.ie,(_,v)=>{let{secondaryWidthIntent:h,secondaryWidthMode:f}=v;return{..._,secondaryWidthIntent:h,secondaryWidthMode:f}}).on(i.yL,(_,v)=>{let{splitWidthIntent:h,splitWidthMode:f}=v;return{..._,splitWidthIntent:h,splitWidthMode:f}}).on(i.KY,(_,v)=>({..._,isSidebarVisible:v})).on(i.Eo,(_,v)=>({..._,isSidebarVisibleWhenFloating:v})).on(i.mV,(_,v)=>({..._,isWorkspaceSwitcherVisible:v})).on(i.Fe,(_,v)=>({..._,isCompactModeEnabled:v}))},4172221507:(x,A,e)=>{"use strict";e.d(A,{F:()=>o});var t=e(9121100949),n=e(6304789565),s=e(6533394955),i=e(1201539379),l=e(9733150292);const o=(0,n.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(a,r,d)=>{(0,l.q9)(t.jG,d),a((0,i.KY)(d)),(0,s.dispatchForClientStore)((0,i.KY)(d))});o.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"}},8707579690:(x,A,e)=>{"use strict";e.d(A,{J:()=>o});var t=e(9121100949),n=e(6304789565),s=e(1201539379),i=e(6533394955),l=e(9733150292);const o=(0,n.Ay)("Set the user-specified secondary width and mode",(a,r,d)=>{let{secondaryWidthIntent:u,secondaryWidthMode:_}=d;(0,l.q9)(t.gN,u),(0,l.q9)(t.Ts,_),a((0,s.ie)({secondaryWidthIntent:u,secondaryWidthMode:_})),(0,i.dispatchForClientStore)((0,s.ie)({secondaryWidthIntent:u,secondaryWidthMode:_}))});o.meta={name:"createThunk",key:"createThunksetSecondaryColumn",description:"Set the user-specified secondary width and mode"}},2779520532:(x,A,e)=>{"use strict";e.d(A,{R:()=>o});var t=e(9121100949),n=e(6304789565),s=e(1201539379),i=e(6533394955),l=e(9733150292);const o=(0,n.Ay)("Set the user-specified sidebar width and mode",(a,r,d)=>{let{sidebarWidthIntent:u,sidebarWidthMode:_}=d;(0,l.q9)(t.ke,u),(0,l.q9)(t.ts,_),a((0,s.SP)({sidebarWidthIntent:u,sidebarWidthMode:_})),(0,i.dispatchForClientStore)((0,s.SP)({sidebarWidthIntent:u,sidebarWidthMode:_}))});o.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"}},7128275929:(x,A,e)=>{"use strict";e.d(A,{a:()=>o});var t=e(9121100949),n=e(6304789565),s=e(1201539379),i=e(6533394955),l=e(9733150292);const o=(0,n.Ay)("Set the user-specified extra wide sidebar width and mode",(a,r,d)=>{let{sidebarExtraWideWidthIntent:u,sidebarExtraWideWidthMode:_}=d;(0,l.q9)(t.jt,u),(0,l.q9)(t.OR,_),a((0,s.$t)({sidebarExtraWideWidthIntent:u,sidebarExtraWideWidthMode:_})),(0,i.dispatchForClientStore)((0,s.$t)({sidebarExtraWideWidthIntent:u,sidebarExtraWideWidthMode:_}))});o.meta={name:"createThunk",key:"createThunksetSidebarExtraWideColumn",description:"Set the user-specified extra wide sidebar width and mode"}},9341298:(x,A,e)=>{"use strict";e.d(A,{q:()=>o});var t=e(9121100949),n=e(6304789565),s=e(1201539379),i=e(6533394955),l=e(9733150292);const o=(0,n.Ay)("Set the user-specified wide sidebar width and mode",(a,r,d)=>{let{sidebarWideWidthIntent:u,sidebarWideWidthMode:_}=d;(0,l.q9)(t.u1,u),(0,l.q9)(t.r1,_),a((0,s.hk)({sidebarWideWidthIntent:u,sidebarWideWidthMode:_})),(0,i.dispatchForClientStore)((0,s.hk)({sidebarWideWidthIntent:u,sidebarWideWidthMode:_}))});o.meta={name:"createThunk",key:"createThunksetSidebarWideColumn",description:"Set the user-specified wide sidebar width and mode"}},9938554271:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(352142497),n=e(8834730594),s=e(2960290117),i=e(8040098042),l=e(1826991857),o=e(4862221402);const a=c(f=>!!(f!=null&&f.includes(t.D.SalesCreateRecord)),"looksLikeSalesforceRecordCreateId");var r=e(6471801899),d=e(8813411026),u=e(8414867410);const _={activity:t.D.ActivityList,threads:t.D.Threads,rimeto_profile:t.D.Profile,files:t.D.FileDetails,help:t.D.Help,shortcuts:t.D.KeyboardShortcuts,whats_new:t.D.WhatsNew,feedback:t.D.Feedback,comment_thread:t.D.QuipCommentThread,comment_stream:t.D.QuipCommentStream,activity_history:t.D.QuipActivityHistory,quip_automations_overview:t.D.QuipAutomationsOverview,channel_canvas:t.D.ChannelCanvas,thread:t.D.Thread,ai_summary_details:t.D.AiSummaryDetails,search_summary:t.D.SearchSummary,channel_files:t.D.ChannelFiles,ai_app:t.D.AiApp,about_ai_app:t.D.AboutAiApp,workflow_details:t.D.WorkflowDetails,list_record:t.D.ListRecord,record:t.D.Record},h=c(f=>f?(0,n.A)(f)?t.D.AppSpace:(0,s.Ay)(f)?t.D.Canvas:(0,i.A)(f)?t.D.Channel:(0,r.pI)(f)?t.D.List:(0,r.or)(f)?t.D.ListRecord:(0,d.T)(f)?(0,u.F8)(f):f&&f[0]==="V"?t.D.Threads:(0,l.A)(f)?t.D.Thread:(0,o.A)(f)?t.D.UserGroup:a(f)?t.D.SalesCreateRecord:f===t.D.BrowseCanvases?f:_[f]?_[f]:t.D.Unknown:t.D.Unknown,"convertIdToViewType")},9936094925:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>p,cB:()=>h,ds:()=>v,w9:()=>f,wg:()=>_});var t=e(9113979368),n=e(498506970),s=e(1618349278),i=e(1649982175),l=e(9139930183),o=e(3193155968),a=e(7590914282);const r=100,d={},u={persistenceEnabled:!1,storeKey:"windowHistory"};function _(y){let{windowState:g,entry:E}=y;const M=g?g.stack:[],T=(0,t.A)(M)?null:1;return{stack:[(0,n.A)(E)].concat(M).slice(0,r),index:0,previousIndex:T}}c(_,"handlePushHistoryEntryForWindow");function v(y){let{windowState:g,index:E,previousIndex:M}=y;return{stack:g.stack,index:E,previousIndex:M}}c(v,"handleUpdateIndexForWindow");function h(y){let{windowState:g,index:E}=y;return{stack:(0,s.A)(g.stack,E),index:g.index,previousIndex:null}}c(h,"handlePopHistoryAboveIndexForWindow");function f(y){let{windowState:g,entry:E}=y;const M=[...g.stack];return M[g.index]=(0,n.A)(E),{...g,stack:M}}c(f,"handleReplaceCurrentHistoryEntryForWindowInternal");const p=(0,l.Ay)({},d,u).on(a.xU,(y,g)=>{let{windowId:E,entry:M}=g;return!E||!M?y:{...y,[E]:_({windowState:y[E],entry:M})}}).on(a.aV,(y,g)=>{let{windowId:E}=g;return(0,i.A)(y,E)}).on(a.Nr,(y,g)=>{let{windowId:E,index:M,previousIndex:T}=g;return{...y,[E]:v({windowState:y[E],index:M,previousIndex:T})}}).on(a.o1,(y,g)=>{let{windowId:E,entry:M}=g;return{...y,[E]:{stack:[(0,n.A)(M)],index:0,previousIndex:null}}}).on(a.s0,(y,g)=>{let{windowId:E,index:M}=g;return y[E]?{...y,[E]:h({windowState:y[E],index:M})}:y}).on(a.iV,(y,g)=>{let{windowId:E,entry:M}=g;return y[E]?{...y,[E]:f({windowState:y[E],entry:M})}:y}).on(a.$Z,(y,g)=>{let{windowId:E,viewParams:M,index:T}=g;if(!y[E])return y;const C=[...y[E]?y[E].stack:[]];if(!C[T])return y;const{id:m,...O}=(0,n.A)(C[T]),P=O[o.mq.Primary];if(!(P!=null&&P.id))return y;const R={...O,[o.mq.Primary]:{...P,params:{...P.params,...M}}};return C[T]={id:m,...R},{...y,[E]:{...y[E],stack:C}}})},4256476552:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(9139930183),n=e(1780675971),s=e(3193155968);const i={[s.N2]:{isFocused:void 0,isUnloading:!1,timeCreation:0,timeLastBlurEvent:0,timeLastFocusEvent:0}},o=(0,t.Ay)({},i,{storeKey:"window",persistenceEnabled:!1}).on(n._p,(a,r)=>{let{windowId:d=s.N2,...u}=r;if(!a[d])return a;const _={[s.N2]:{...a[s.N2]}};return _[d]={...a[d],...u},Reflect.ownKeys(a).forEach(v=>{v!==d&&u.isFocused&&(_[v]={...a[v],isFocused:!1})}),{...a,..._}}).on(n.w3,(a,r)=>{let{windowId:d=s.N2,...u}=r;return a[d]?{...a,[d]:{...a[d],isUnloading:u.isUnloading}}:a}).on(n.d1,(a,r)=>{let{windowId:d=s.N2,...u}=r;return{...a,[d]:{...a[d],...u,windowId:d}}}).on(n.pb,(a,r)=>{let{windowId:d=s.N2,...u}=r;return a[d]?{...a,[d]:{...a[d],bootType:u.bootType}}:a}).on(n.jO,(a,r)=>{let{windowId:d}=r;if(d===s.N2||!a[d])return a;const u={...a};return delete u[d],u}).on(n.NV,(a,r)=>{let{windowId:d,viewport:u}=r;return a[d]?{...a,[d]:{...a[d],viewport:u}}:a})},2802517438:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(4096483543),n=e(8414867410),s=e(5084575109),i=e(4522919696),l=e(3080748521);const a=c(r=>{if((0,t.A)()){const d=(0,l.MC)(r),u=d&&d.entityId,_=(0,n.US)(u);return(0,n.l1)(r,_)?_.id:(0,s.n)(u)?Object.keys(i.F).find(v=>i.F[v]===u):u}return r&&r.workspace&&r.workspace.primaryViewId},"getPrimaryView")},9083290776:(x,A,e)=>{"use strict";e.d(A,{Gy:()=>u,HO:()=>n,Hu:()=>o,K$:()=>a,Lo:()=>l,fw:()=>r,j0:()=>v,k0:()=>_,lH:()=>h,nG:()=>i,ne:()=>d,xW:()=>f});var t=e(2140362605);const n=(0,t.Ay)("Sets the primary view in workspace store");n.meta={name:"createAction",key:"createActionsetPrimaryViewInternal",description:"Sets the primary view in workspace store"};const s=n.getType(),i=(0,t.Ay)("Sets the secondary view in workspace store");i.meta={name:"createAction",key:"createActionsetSecondaryViewInternal",description:"Sets the secondary view in workspace store"};const l=(0,t.Ay)("Sets the flexpane origin store");l.meta={name:"createAction",key:"createActionsetFlexOriginInternal",description:"Sets the flexpane origin store"};const o=(0,t.Ay)("Sets the flexpane restore store");o.meta={name:"createAction",key:"createActionsetFlexRestoreInternal",description:"Sets the flexpane restore store"};const a=(0,t.Ay)("Sets the focused workspaces from the client-store");a.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspaces",description:"Sets the focused workspaces from the client-store"};const r=(0,t.Ay)("Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused");r.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspacesTimestamps",description:"Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused"};const d=(0,t.Ay)("Sets the props we need to re-open the last flexpane");d.meta={name:"createAction",key:"createActionsetPreviousFlexpane",description:"Sets the props we need to re-open the last flexpane"};const u=(0,t.Ay)("Sets channelDetailsOpen");u.meta={name:"createAction",key:"createActionsetChannelDetailsOpen",description:"Sets channelDetailsOpen"};const _=(0,t.Ay)("Sets flexpane highlight state");_.meta={name:"createAction",key:"createActionsetFlexpaneHighlight",description:"Sets flexpane highlight state"};const v=(0,t.Ay)("Sets flexpane section currently docked");v.meta={name:"createAction",key:"createActionsetDockedFlexpaneSection",description:"Sets flexpane section currently docked"};const h=(0,t.Ay)("Add or remove from list expanded inputs");h.meta={name:"createAction",key:"createActionsetMessageInputExpanded",description:"Add or remove from list expanded inputs"};const f=(0,t.Ay)("Sets the last tab for a given channel id");f.meta={name:"createAction",key:"createActionsetLastTabForChannelId",description:"Sets the last tab for a given channel id"}},1116859610:(x,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(2101927269),n=e(8840779375),s=e(3750057149),i=e(6304789565),l=e(9536404279),o=e(4350638406),a=e(10127715),r=e(3521202413),d=e(8847766420),u=e(3110884894),_=e(8040098042),v=e(6739248722),h=e(2791814261),f=e(4587446194),I=e(796111729),p=e(9190452268),y=e(1284885799),g=e(3528815215),E=e(2689960678);const M=(0,i.Ay)("Add messages from history",(D,C,m)=>{let{msgs:O,channelId:P,isLimited:R,latest:L,oldest:V,hasMore:B,loading:K,forceUnreadCount:b,deleted:S=[]}=m;const G=C(),H=(0,p.Cy)({getState:C});(0,h.L)(G)&&H.mark("rmsgs_addMessagesFromHistory");const U=(0,t.A)(O,ee=>{const j=(0,v.k)(G,{channelId:P,ts:ee.ts});return j&&(0,I.Ay)({getState:C}).warn(`Filtering out ${ee.ts} in ${P} history response because it was deleted`),!j}),F=R?O.filter(ee=>ee.is_beyond_free_limit).map(ee=>ee.ts):E.Ml,Y=(0,n.A)(U,"ts"),Z=(0,_.A)(P)?P:(0,u.Sb)(P).channelId;Z&&(0,o.mY)((0,d.ZT)(G),Z,Y),D((0,a.tT)(U)),D((0,l.VG)({channelId:P,timestamps:Y,isLimited:R,blurredMessages:F,latest:L,oldest:V,hasMore:B,loading:K,forceUnreadCount:b})),(0,s.A)(K)&&D(K?(0,y.v)({channelId:P,loadingOlder:!!L}):(0,g.f)({channelId:P})),(0,h.L)(G)&&H.measureAndClear("rmsgs_addMessagesFromHistory","rmsgs_addMessagesFromHistory"),S.forEach(ee=>D((0,r.j)({deleted_ts:ee,channel:Z}))),U.forEach(ee=>(0,f.IY)(C,D,ee,ee))});M.meta={name:"createThunk",key:"createThunkaddMessagesFromHistory",description:"Add messages from history"};const T=M},8243624171:(x,A,e)=>{"use strict";e.d(A,{Fj:()=>V,Vq:()=>L});var t=e(9706240641),n=e.n(t),s=e(6422693406),i=e(1069376685),l=e(4446301238),o=e(5274604535),a=e(5373179915),r=e(8170643398),d=e(5096647761),u=e(148278831),_=e(6536982570),v=e(2023092677),h=e(5184226701),f=e(3339229351),I=e(4327331459),p=e(4862221402),y=e(6304789565),g=e(1761027239),E=e(4761125736),M=e(8276911661),T=e(3730613858);const D=c((B,K)=>K.map(b=>b.pasted&&!b.entity?{value:b.value,entity:(0,M.nv)(B,b.value)}:b),"getMemberInfoForPastedMembers"),C=c(B=>{const K=B.entity||{};return(0,I.A)(B==null?void 0:B.value)||(0,r.NB)(K)},"isAMember"),m=c(B=>{const K=B.entity||{};return(0,p.A)(B.value)||(0,v.PH)(K)},"isAUserGroup"),O={[f.IS.ALREADY_IN_CHANNEL]:!0,[f.IS.CANNOT_INVITE_SELF]:!0,[f.IS.ALREADY_IN_CHANNEL_UG]:!0},P={},R=c(B=>{let{shouldPreserve:K,teamId:b}=B;P[b]=K},"setShouldPreserveModalsOnNavigation"),L=c(B=>{let{teamId:K}=B;return P[K]},"getShouldPreserveModalsOnNavigation"),V=(0,y.Ay)("Add users and user groups to channel",function(){var B=(0,t.coroutine)(function*(K,b,S){let{selectedMembers:G,addMemberMode:H,channel:U,keepChannelHistory:F,teamId:Y,shouldSkipInitialStage:Z}=S;const ee={channelId:U.id,force:!0,reason:"submit-invite-channel-invite-modal"};let j,ge;if(H===i.D.AllMembers)ee.inviteAll=!0,j=[],ge=[];else{const fe=D(b(),G),se=(0,o.A)(b(),U),Q=(0,a.R)(b(),U);j=fe.reduce((k,N)=>{if(N&&C(N)&&N.entity){const $=N,W=(0,T.Sv)(b(),U.id,$.value);if(!W.isKnown||!W.isMember){const q=(0,_.dQ)($.entity),re=(0,u.S)(b(),$.entity,U);(Q||(0,d.g)($.entity)&&q&&se.includes(q)||re)&&k.push($.value)}}return k},[]),ee.users=j.join(","),ge=G.reduce((k,N)=>(N&&m(N)&&k.push(N.value),k),[]),ee.subteams=ge.join(",")}const ne=ee.inviteAll||!!ee.users||!!ee.subteams,ue=(0,E._Z)(b(),"shared_channel_invite_requested_event")==="on",he={addedExistingMembers:ne,userInviteResults:j.map(fe=>({ok:!0,invitee:fe,inviteeType:h.T0.User,accessType:h.BD.Member,error:""})),groupInviteResults:ge.map(fe=>({ok:!0,invitee:fe,inviteeType:h.T0.UserGroup,accessType:h.BD.Member})),newChannelId:void 0};let be;try{if(F)ne&&(yield K((0,l.Cw)(ee)).then(fe=>{const{requested_invites:se=[]}=fe;be=se}),ue&&(he.userInviteResults=he.userInviteResults.map(fe=>{const se=be.find(Q=>Q.user_id===fe.invitee);return{...fe,accessType:se?h.BD.SharedChannel:fe.accessType,inviteeType:se?h.T0.Email:fe.inviteeType,...ue&&{isRequestedInvite:!!se}}})));else{R({shouldPreserve:!Z,teamId:Y}),ee.propagateInviteResult=!0;const{channel:fe}=yield K((0,g.t)(ee));he.newChannelId=fe.id,R({shouldPreserve:!1,teamId:Y})}}catch(fe){var xe;R({shouldPreserve:!1,teamId:Y});const se=fe==null||(xe=fe.data)===null||xe===void 0?void 0:xe.errors;if(!se){var Le;if(!O[fe==null||(Le=fe.data)===null||Le===void 0?void 0:Le.error])throw fe}se==null||se.forEach(Q=>{if(O[Q.error])return;const k=he.userInviteResults.filter($=>$.invitee===Q.user);if(k.length)k[0].ok=!1,k[0].error=Q.error;else if(G.length===1&&!Q.user&&Z){var N;he.userInviteResults=[{ok:!1,invitee:(N=G[0])===null||N===void 0?void 0:N.value,inviteeType:h.T0.User,error:Q.error,accessType:h.BD.Member}]}else he.userInviteResults.push({ok:!1,invitee:Q.user,inviteeType:h.T0.User,error:Q.error,accessType:h.BD.Member})})}return s.S.resolve(he)});return function(K,b,S){return B.apply(this,arguments)}}());V.meta={name:"createThunk",key:"createThunkaddUsersAndGroupsToChannel",description:"Add users and user groups to channel"}},8854307618:(x,A,e)=>{"use strict";e.d(A,{r:()=>o});var t=e(6304789565),n=e(8620339321),s=e(6533394955),i=e(6695353875),l=e(4326266690);const o=(0,t.Ay)("Go back in history",(a,r)=>{const d=r();if((0,i.yZ)(d)){(0,l.ud)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,n.oX)());return}window.history.back()});o.meta={name:"createThunk",key:"createThunkgoBackInWindowHistory",description:"Go back in history"}},7606925238:(x,A,e)=>{"use strict";e.d(A,{h:()=>s});var t=e(6304789565),n=e(6695353875);const s=(0,t.Ay)("Go forward in history",(i,l)=>{const o=l();(0,n.yZ)(o)||window.history.forward()});s.meta={name:"createThunk",key:"createThunkgoForwardInWindowHistory",description:"Go forward in history"}},8496310524:(x,A,e)=>{"use strict";e.d(A,{I:()=>l,u:()=>i});var t=e(2689960678),n=e(7969244833),s=e(9101533895);const i=c(o=>(o==null?void 0:o.name)||"","getActionName"),l=c((o,a,r)=>{const d=!r;let u=t.Ml;if(r){const _=(0,s.OL)(o,r);u=_&&(0,n.f)(o,_)||t.Ml}return a.teams&&(u.length||d)&&!a.isWorkspaceAgnostic?d?a.teams:a.teams.filter(v=>u.includes(v)):t.Ml},"getActionRelatedWorkspaces")},3982416567:(x,A,e)=>{"use strict";e.d(A,{O4:()=>i,OB:()=>o});var t=e(937317117),n=e(5597672932);const s="canvas_version_history_enabled",i=c(a=>(0,n.xp)(a,s),"getCanvasVersionHistoryEnabledTeamPref"),l=c((a,r)=>{const d=(0,t.Lp)(a,r);return d?d.team_pref_version_history_enabled:!1},"getOwnerCanvasVersionHistoryEnabledTeamPref"),o=c((a,r)=>r?!!i(a)&&!!l(a,r):!1,"isCanvasVersionHistoryEnabled")},2063075339:(x,A,e)=>{"use strict";e.d(A,{Z:()=>i});var t=e(1407713935),n=e(6007206761),s=e(6113051341);const i=c((l,o)=>!(0,t.JM)(o)&&!(0,n.F)(o)&&!(0,s.N)(o),"canBeExternallyShared")},2912967402:(x,A,e)=>{"use strict";e.d(A,{B2:()=>a,Bw:()=>f,CM:()=>v,FA:()=>d,Jr:()=>h,Kg:()=>E,QS:()=>o,Vp:()=>y,bS:()=>g,bw:()=>r,oP:()=>_});var t=e(3078252698),n=e(4724591729),s=e(796111729),i=e(735940183);const l=new i.Ay("channels"),o=250,a=250;function r(T){return(0,t.A)(T)?T.length>o:((0,n.Cu)()&&(0,s.Wo)().warn("Argument `topic` passed to `channelTopicExceedsLimit()` is not a string"),!1)}c(r,"channelTopicExceedsLimit");const d="too_long",u="restricted_action",_="user_is_restricted",v="method_not_supported_for_channel_type",h="method_not_supported_for_dm";function f(T){switch(T){case d:return l.t("Channel topics can only include up to {max} characters \u2014 please make this topic shorter.",{max:o});case u:case _:return l.t("It looks like you don\u2019t have permission to change the channel topic. Please check with your workspace admin.");case v:return l.t("It\u2019s not possible to set a topic here, unfortunately.");case h:return l.t("Regrettably, direct messages do not have topics.");default:return l.t("It looks like setting the channel topic didn\u2019t work, for some reason. Try again?")}}c(f,"getChannelTopicError");const I="too_long",p="restricted_action",y="user_is_restricted",g="method_not_supported_for_channel_type",E="method_not_supported_for_dm";function M(T){switch(T){case I:return l.t("That purpose is too long. Please try again with fewer than {max} characters.",{max:a});case p:case y:return l.t("Uh oh! You don\u2019t have permission to change the purpose. Talk to your workspace admin.");case g:return l.t("It\u2019s not possible to set a purpose here, unfortunately.");case E:return l.t("Regrettably, direct messages do not have purposes.");default:return l.t("Uh oh! Something went wrong with setting the purpose. Please try again.")}}c(M,"getChannelPurposeError")},4559887502:(x,A,e)=>{"use strict";e.d(A,{i:()=>s});var t=e(9884588328),n=e(1407713935);const s=c((i,l)=>{if((0,n.JM)(l)||!i)return!1;const o=(0,t.mG)(l),a=o?i.get(o):null;return a?(a==null?void 0:a.length)>1:!1},"doesChannelHaveNonUniqueName")},7868634217:(x,A,e)=>{"use strict";e.d(A,{Z:()=>r,Y:()=>d});var t=e(8921478798),n=e(8276911661),s=e(3037015781),i=e(9262712126);function l(u,_,v){const h=!v;var f;const I=(f=(0,n.nv)(u,_,{preferNonExistentToNull:!1,fetchIfMissing:h}))!==null&&f!==void 0?f:void 0;return!I||v&&(0,s.mX)(I)?_:(0,i.wg)(I)}c(l,"getRealMemberNameById");var o=e(2689960678),a=e(8701485242);const r=c((u,_)=>_?_.map(v=>({id:v,name:(0,t.I)(u,v)})).sort((v,h)=>(0,a.Ay)(v.name,h.name)).map(v=>v.id):o.Ml,"getAlphabeticallySortedMemberIds"),d=c((u,_)=>!_||!_.length?o.Ml:_.map(v=>({id:v,name:l(u,v)})).sort((v,h)=>(0,a.Ay)(v.name,h.name)).map(v=>v.id),"getRealNameAlphabeticallySortedMemberIds")},6045879501:(x,A,e)=>{"use strict";e.d(A,{H:()=>t});function t(n){return n&&n.emoji}c(t,"getEmojiCollectionEmoji")},370406050:(x,A,e)=>{"use strict";e.d(A,{M:()=>t});function t(n){return n&&n.name}c(t,"getEmojiCollectionName")},5071545805:(x,A,e)=>{"use strict";e.d(A,{j:()=>t});function t(n){return n&&n.installed}c(t,"isEmojiCollectionInstalled")},3890290905:(x,A,e)=>{"use strict";e.d(A,{Y:()=>t});const t=c(n=>n&&n.name,"getEmojiName")},4282439381:(x,A,e)=>{"use strict";e.d(A,{x:()=>n});var t=e(4761125736);const n=c(s=>(0,t._Z)(s,"a11y_emoji_group")==="on","isEmojiGroupEnabled")},9362126998:(x,A,e)=>{"use strict";e.d(A,{$R:()=>L,BM:()=>Le,DC:()=>U,JC:()=>B,Jn:()=>ne,Kj:()=>ee,NG:()=>xe,RI:()=>Z,UF:()=>b,Wg:()=>ge,cG:()=>F,hP:()=>H,lL:()=>he,p4:()=>fe,qh:()=>be,rY:()=>G,y0:()=>j,yD:()=>K});var t=e(9113979368),n=e(8840779375),s=e(1703559452),i=e(2384831516),l=e(1316483933),o=e(571104883),a=e(5795074931),r=e(9101533895),d=e(8455301571),u=e(7606781622),_=e(5597672932),v=e(8276911661),h=e(3534324375),f=e(937317117),I=e(4827886670),p=e(340763958),y=e(3110884894),g=e(2647703359),E=e(1257883628),M=e(4702704067),T=e(9884588328),D=e(9536443280),C=e(735940183),m=e(2689960678),O=e(3207321841),P=e(6946629059);const R=new C.Ay("stories_av"),L=c((se,Q)=>{const k=!!Q&&(0,p.ju)(Q);let N=!0;return k?N=(0,_.xp)(se,"allow_video_clips")&&(0,_.xp)(se,"allow_video_clip_sharing_slack_connect"):N=(0,_.xp)(se,"allow_video_clips"),N},"isVideoClipSharingEnabledForChannel"),V=c((se,Q,k)=>{const N=(0,r.OL)(se,Q),$=L(se,N);return(!Q||!k&&(0,I.E)(se,Q)||!!k&&(0,T.NI)(se,N))&&$},"canDestinationReceiveVideoClips"),B=c((se,Q,k)=>V(se,Q,k),"canPostVideoClipInDestination"),K=c((se,Q,k)=>V(se,Q,k)&&B(se,Q,k)&&!!window.MediaRecorder,"shouldRenderVideoRecorderButtonInComposer"),b=c((se,Q)=>{const k=!!Q&&(0,p.ju)(Q);let N=!0;return k?N=(0,_.xp)(se,"allow_audio_clips")&&(0,_.xp)(se,"allow_audio_clip_sharing_slack_connect"):N=(0,_.xp)(se,"allow_audio_clips"),N},"isAudioClipSharingEnabledForChannel"),S=c((se,Q,k)=>{const N=(0,r.OL)(se,Q),$=b(se,N);return(!Q||!k&&(0,I.E)(se,Q)||!!k&&(0,T.NI)(se,N))&&$},"canDestinationReceiveAudioClips"),G=c((se,Q,k)=>S(se,Q,k),"canPostAudioMessageInDestination"),H=c((se,Q,k)=>S(se,Q,k)&&G(se,Q,k)&&!!window.MediaRecorder,"shouldRenderAudioRecorderButtonInComposer"),U=c((se,Q)=>{if(!ne(Q))return!0;const k=(0,_.xp)(se,"allow_clip_downloads"),N=(0,a.WR)(se),$=(0,l.qc)(se,N);if(k==="anyone"||$)return!0;const W=Q.user!==null&&Q.user===N;return!!(k==="creator_and_admins"&&W)},"canDownloadClip"),F=c((se,Q)=>U(se,Q)||(0,o.y3)(),"canOpenClipInNewWindow"),Y=(0,i.Mz)((se,Q)=>{if(!Q)return!1;if((0,t.A)(Q.files))return m.Ml;const k=(0,n.A)(Q.files,N=>(0,f.Lp)(se,N));return(0,s.A)(k,E.A)});Y.meta={name:"createSelector",key:"createSelectorisStoryMessage",description:(se,Q)=>{if(!Q)return!1;if((0,t.A)(Q.files))return m.Ml;const k=(0,n.A)(Q.files,N=>(0,f.Lp)(se,N));return(0,s.A)(k,E.A)}};function Z(se){let{state:Q,threadKey:k,includeAllMessages:N=!1,startTs:$}=se;const{channelId:W,threadTs:q}=(0,y.Sb)(k),{timestamps:re,reachedStart:le,reachedEnd:Ae}=(0,d.r7)(Q,k,$||q)||{},Te=re!=null&&re.length&&W?re.map(Ne=>(0,u.Ld)(Q,W,Ne)).filter(P.b):[];return{messages:N?Te:Te.filter(Ne=>Y(Q,Ne)),reachedStart:!!le,reachedEnd:!!Ae}}c(Z,"getMediaThread");function ee(se){var Q;return se!=null&&se.vtt?D.D.available:(se==null||(Q=se.transcription)===null||Q===void 0?void 0:Q.status)==="processing"?D.D.processing:D.D.none}c(ee,"getCaptionsAvailability");const j=c(se=>(0,_.xp)(se,"allow_media_transcriptions"),"shouldAllowMediaTranscriptions");function ge(se,Q){let k="";if(Q.user){const $=(0,v.nv)(se,Q.user);k=$?(0,h.sE)(se,$):""}let N;return k?N=(0,M.A)(Q)?R.t("Audio clip from {memberName}",{memberName:k}):R.t("Video clip from {memberName}",{memberName:k}):N=(0,M.A)(Q)?R.t("Audio clip"):R.t("Video clip"),N}c(ge,"getLabelForClip");function ne(se){return se!=null&&se.subtype?ue(se.subtype):!1}c(ne,"isClip");function ue(se){let{clipsSubtypes:Q=O.Y1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Q.includes(se)}c(ue,"isClipsSubtype");function he(se){return se===O.iN}c(he,"isAudioClipSubtype");function be(se){return se&&se.some(Q=>ue(Q.subtype))}c(be,"containsClip");function xe(se){return se?se.filter(Q=>ue(Q.subtype)):[]}c(xe,"findClips");function Le(se,Q){const k=(0,a.WR)(se);return(Q==null?void 0:Q.user)===k}c(Le,"canRemoveTranscriptPreview");function fe(se){return(0,g.pI)(se)?(se==null?void 0:se.aac)||(se==null?void 0:se.url_private):(se==null?void 0:se.mp4)||(se==null?void 0:se.url_private)}c(fe,"getMediaSrc")},102566929:(x,A,e)=>{"use strict";e.d(A,{Fh:()=>d,Iz:()=>r,gC:()=>a});var t=e(8161242485),n=e(937317117),s=e(497761763),i=e(6078549397),l=e(2823938397);const o=(0,t.Ay)((u,_)=>{const{fileIdOrQuipThreadId:v}=(0,i.EX)(_);if((0,s.A)(v)){var h;return(h=(0,n.Lp)(u,v))!==null&&h!==void 0?h:null}return null});o.meta={name:"createSelector",key:"createSelectormaybeGetFileByCompoundId",description:(u,_)=>{const{fileIdOrQuipThreadId:v}=(0,i.EX)(_);if((0,s.A)(v)){var h;return(h=(0,n.Lp)(u,v))!==null&&h!==void 0?h:null}return null}};const a=(0,t.Ay)((u,_)=>{const v=o(u,_);return v&&(0,l.uz)(v)?v:null});a.meta={name:"createSelector",key:"createSelectormaybeGetExistentFileByCompoundId",description:(u,_)=>{const v=o(u,_);return v&&(0,l.uz)(v)?v:null}};function r(u){return u.linked_channel_id}c(r,"getLinkedChannelId");function d(u){return["spaces-example-onboarding-canvas","spaces-example-team-meeting"].includes(u)}c(d,"isSampleCanvas")},7148679525:(x,A,e)=>{"use strict";e.d(A,{eY:()=>m,QX:()=>R,dL:()=>O,oG:()=>L,Lz:()=>P,L7:()=>G,J5:()=>S,XH:()=>V,nY:()=>B});var t=e(2837660778),n=e(1340402138),s=e(7969244833),i=e(3792998666),l=e(8323393403),o=e(6839188756),a=e(9950739645),r=e(7112191091),d=e(6693783993),u=e(4761125736),_=e(9951956014),v=e(8289365785);function h(H){return H&&{...H,type:(0,v.A)(H==null?void 0:H.type)==="owner"?["org_admin"]:["admin"]}}c(h,"mapToWhoCanStyle");function f(H,U){return(0,_.g)(H,"who_can_manage_guests",[U],h)}c(f,"canUserDoManageGuestsTeamPrefForTeamId");const I={mapToWhoCanStyle:h};var p=e(5795074931);const y=c((H,U)=>{if((0,u._Z)(H,"light_read_who_can_manage_guests_pref_migration")==="on"){const Y=(0,p.TZ)(H);return U&&Y?(0,d.l0)(H).includes(U.id):(0,d.mZ)(H)}return U?(0,o.r7)(U)?f(H,U.id)||!1:(0,r.Me)(H,U.id):!1},"canUserInviteGuests");var g=e(5184226701),E=e(504058561),M=e(9101533895),T=e(8276911661),D=e(5597672932),C=e(3677514771);function m(H){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const F=(0,T.cA)(H),Y=U??(0,C.H7)(H);if(!Y)return!1;const Z=(0,r.Me)(H,Y.id),ee=(0,d.tx)(H,{teamOrEnterpriseIds:[Y.id]});return Z||ee?!0:(0,i.P)(F)?!1:(0,D.xp)(H,"invites_only_admins",U==null?void 0:U.id)?y(H,Y):!0}c(m,"canUserInviteMembersToWorkspace");function O(H,U,F){const Y=U||(0,T.cA)(H),Z=F||(0,C.H7)(H);return!(!Z&&!Z||(0,i.P)(Y)||!(0,D.xp)(H,"invite_requests_enabled",Z.id))}c(O,"canUserRequestToInvite");function P(H){const U=(0,T.cA)(H),F=(0,C.H7)(H);return!F||(0,n.R)(H)?!1:(0,o.r7)(F)?!!(0,t.Mo)(H).filter(Z=>O(H,U,Z)||m(H,Z)).length:!!(O(H,U,F)||m(H))}c(P,"canUserSeeInviteModal");function R(H,U){const F=(0,C.H7)(H);if(!F)return!1;const Y=(0,M.OL)(H,U),Z=(0,o.tc)(F),ee=(0,o.r7)(F),j=(0,l.D7)(H,U),ge=ee?!B(H,Y):P(H);return Z&&ge||!Z&&(ge||j)}c(R,"canUserInviteToChannelByEmail");function L(H,U){const F=(0,T.cA)(H),Y=U?(0,C._J)(H,U):(0,C.H7)(H);return!Y||(0,o.tc)(Y)?!1:O(H,F,Y)?!0:y(H,Y)}c(L,"canUserSeeAccountTypeOptions");function V(H,U){let{ignoreGuestSettings:F}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Y=(0,T.cA)(H),Z=U?(0,C._J)(H,U):(0,C.H7)(H);if(!(0,o.r7)(Z))return!1;const ee=(0,r.Me)(H,Z.id),j=(0,d.tx)(H,{teamOrEnterpriseIds:[Z.id]});return ee||j||!(0,D.xp)(H,"invites_only_admins",Z.id)||O(H,Y,Z)?!1:F?!0:y(H,Z)}c(V,"shouldDisableFullMemberInviteOption");function B(H,U){const F=(0,s.f)(H,U);return!!(F!=null&&F.every(Y=>V(H,Y,{ignoreGuestSettings:!0})))}c(B,"shouldDisableFullMemberInviteOptionForChannel");function K(H){let{state:U,team:F,inviteType:Y}=H,Z=F;if(!F&&(Z=getCurrentTeam(U),!Z))return!1;const ee=getTeamPref(U,"auth_mode"),j=ee==="google"||ee==="saml";return isEnterpriseOrEnterpriseWorkspace(Z)&&Y===AccessType.Member||j&&getTeamPref(U,"sso_auth_restrictions")===0}c(K,"shouldShowSsoAlert");function b(H){let{state:U,inviteType:F}=H;const Y=getTeamPref(U,"auth_mode"),Z=getTeamPref(U,"sso_auth_restrictions");return Y==="google"?F===AccessType.Member&&(Z===0||Z===1)||(F===AccessType.MultiChannelGuest||F===AccessType.SingleChannelGuest)&&Z===0:!1}c(b,"shouldShowGoogleDomainsNotice");function S(H){let{state:U,inviteType:F,team:Y}=H;if(!F||!(0,g.LX)(F))throw new Error(`Invalid invite type: ${F}`);const Z=Y||(0,C.H7)(U);if(!Z||(0,a.N)(Y))return!1;const ee=(0,D.xp)(U,"invites_only_admins",Z==null?void 0:Z.id),j=(0,r.Me)(U,Z.id),ge=(0,d.tx)(U,{teamOrEnterpriseIds:[Z.id]}),ne=y(U,Z);switch(F){case g.BD.Member:return j||ge?!1:!!ee;case g.BD.MultiChannelGuest:case g.BD.SingleChannelGuest:return!ne;default:return!0}}c(S,"isRequestingInvitesForType");function G(H){let{state:U}=H;const F=(0,C.H7)(U);return(0,E.z$)()?!0:(0,o.r7)(F)?!!(0,D.xp)(U,"hide_gsuite_invite_option"):!1}c(G,"isGoogleDirectoryDisabled")},9438480351:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(9101533895),n=e(9884588328);function s(i,l){const o=(0,t.Pu)(i,l&&l.id);return o?(0,n.$M)(o):null}c(s,"getImUnreadCountByMember")},9541658228:(x,A,e)=>{"use strict";e.d(A,{P:()=>o});var t=e(2003990933),n=e(5096647761),s=e(8847766420),i=e(6536982570),l=e(8170643398);function o(a,r){if(!a||!r||(0,n.g)(r))return!1;const d=(0,i.QI)(r);return(0,l.dk)(r)&&(d===(0,s.jV)(a)||d===(0,t.A)(r,"enterprise_user.enterprise_id"))}c(o,"isMemberFromOrg")},148278831:(x,A,e)=>{"use strict";e.d(A,{S:()=>r});var t=e(918457931),n=e(2298581483),s=e(6536982570),i=e(5096647761),l=e(2003903489),o=e(9541658228),a=e(893266994);const r=c((d,u,_)=>{if((0,i.g)(u))return!1;if((0,o.P)(d,u)){if((0,l.S)(_))return!0;if((0,t.t)(_))return(0,n.R)(d,_).some(f=>(0,s.nO)(u,f))}const v=(0,a.c)(_);return(0,s.nO)(u,v)},"isMemberOnSomeChannelWorkspace")},863407566:(x,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(8455301571),n=e(2155512519),s=e(7606781622),i=e(3730613858),l=e(5795074931),o=e(8276911661),a=e(8170643398),r=e(4562579337),d=e(7334104107),u=e(9187449049),_=e(7616363684),v=e(1794107122),h=e(9290914927),f=e(1809170903);const I=23;function p(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Math.max((0,n.UL)(),E),T=arguments.length>4?arguments[4]:void 0;if(!(0,t.si)(y,g))return[];const D=(0,t.r7)(y,g);if(!D||!D.timestamps)return[];const C=(0,s.h8)(y,g),m=D.timestamps.slice(-M),O=(0,l.WR)(y);let P=[],R=[],L=!1;const V=[],B=[],K=[],b=[],S=[],G=[];let H=!1;for(let F=m.length-1;F>=0;F--){const Y=C[m[F]],Z=(0,d.Hr)(Y);if(!Z)continue;if(T&&Z===O){H=!0;continue}if(!(T?V.includes(Z)||K.includes(Z)||S.includes(Z):P.includes(Z))&&!(0,_.A)(Y)&&(0,u.A)(Y,O)){const j=(0,i.Sv)(y,g,Z),ge=(0,o.nv)(y,Z);if(L||(L=!(j!=null&&j.isKnown)||(0,a.t8)(ge)),!L&&(j!=null&&j.isKnown)&&(j!=null&&j.isMember)&&!(0,r.A)(ge)&&!(0,a.oy)(ge)){if(T){if((0,h.gd)(y,Z)==="active"?(0,f.Vd)(y,Z)?(K.push(Z),b.push(ge)):(V.push(Z),B.push(ge)):(S.push(Z),G.push(ge)),B.length===E||K.length+G.length===I-E)break}else if(P.push(Z),R.push(ge),R.length===E)break}}}if(L)return[];if(T&&(B.length===E?(R=B,P=V):(R=B.concat(b.slice(0,E-B.length)),P=V.concat(K.slice(0,E-S.length)),R.length<E&&(R=R.concat(G.slice(0,E-B.length)),P=P.concat(S.slice(0,E-S.length))))),R.length>=E)return R;const U=(0,v.$)(y,g);if(!U.length)return[];for(let F=0;F<U.length;F++){const Y=U[F];if(Y&&!P.includes(Y)&&(T&&Y===O?H=!0:(P.push(Y),R.push((0,o.nv)(y,Y)))),R.length===E)break}return R.length===0&&H&&(P.push(O),R.push((0,o.nv)(y,O))),R}c(p,"getLastNRelevantMembersInChannel")},7616363684:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(7334104107),n=e(3339229351);function s(i){return(0,t.Hr)(i)===n.Q$}c(s,"isSlackbotMessage")},9951956014:(x,A,e)=>{"use strict";e.d(A,{L:()=>d,g:()=>a});var t=e(9507365519),n=e(1328783052),s=e(8847766420),i=e(7969244833),l=e(9101533895),o=e(497537177);const a=c((u,_,v,h)=>{if((0,o.X)(u))return!0;const f=(0,t.p)(u,_,v);return Object.entries(f).map(I=>{let[p,y]=I;return[p,h(y)]}).some(I=>{let[p,y]=I;return(0,n.Ic)(u,y,p)})},"canUserDoCustomTeamPrefForTeamIds"),r=c((u,_,v,h)=>{if(!v)return!1;const f=(0,i.f)(u,v);return f?a(u,_,f,h):!1},"canUserDoCustomTeamPrefForChannel"),d=c(u=>({getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:(_,v)=>(0,s.VO)(_).filter(f=>a(_,v,[f],u)),canUserDoCustomTeamPrefInSomeWorkspace:(_,v)=>{const h=(0,s.VO)(_);return a(_,v,h,u)},canUserDoCustomTeamPrefForChannel:(_,v,h)=>r(_,v,h,u),canUserDoCustomTeamPrefForChannelById:(_,v,h)=>{const f=(0,l.OL)(_,h);return r(_,v,f,u)}}),"createUserCanDoCustomTeamPrefRules")},3683888369:(x,A,e)=>{"use strict";e.d(A,{l:()=>i});var t=e(1552255081),n=e(6839188756),s=e(3677514771);const i=c(l=>(0,t.F)(l)&&!(0,n.tc)((0,s.H7)(l)),"teamCanCreateStandaloneCanvas")},5757070316:(x,A,e)=>{"use strict";e.d(A,{J:()=>s});var t=e(78546762),n=e(1802262330);const s=c((i,l)=>{var o,a;let r,d,u;i&&(i.subtype==="file_comment"?[d,r]=["file_comment",i.comment]:(0,t.A)(i.subtype)?[d,r]=["file",l]:[d,r,u]=["message",i,i.channel]);const _=d==="message"?(o=r)===null||o===void 0?void 0:o.ts:(a=r)===null||a===void 0?void 0:a.id;return r&&(r._rxn_key||(0,n.B)(d,_,u))},"getReactionKey")},9001455011:(x,A,e)=>{"use strict";e.d(A,{t:()=>s});var t=e(8161242485),n=e(9889493721);const s=(0,t.Ay)(i=>!((0,n.Bf)(i)||!(0,n.pr)(i)));s.meta={name:"createSelector",key:"createSelectorshouldShowAppsLink",description:i=>!((0,n.Bf)(i)||!(0,n.pr)(i))}},2585735826:(x,A,e)=>{"use strict";e.d(A,{R:()=>d});var t=e(1407713935),n=e(6113051341),s=e(340763958);const i=c((u,_)=>!(0,t.JM)(_)&&(0,s.ju)(_)&&!(0,n.N)(_),"canBeDisconnected");var l=e(1359849784),o=e(6839188756),a=e(6025726268),r=e(3677514771);function d(u,_){if(_&&!i(u,_))return!1;if(_&&(0,a.M)(u,_))return!0;const v=(0,r.H7)(u);return(0,o.tc)(v)?!0:(0,l.I)(u,_)}c(d,"canUserDisconnectExternalSharedChannel")},4803097854:(x,A,e)=>{"use strict";e.d(A,{RY:()=>d,cG:()=>l,l6:()=>r});var t=e(7358758030),n=e(1650729052),s=e(5861086925),i=e(6841796315);const l={RestrictedAction:Symbol("restricted_action"),CanCreateExternalLimitedPref:Symbol("can_create_external_limited_pref"),WhoCanCreateExternalLimitedPref:Symbol("who_can_create_external_limited_pref")},o={ok:!1,reason:l.CanCreateExternalLimitedPref},a={ok:!1,reason:l.WhoCanCreateExternalLimitedPref},r=c(u=>{if(!(0,t.i)(u))return o;const v=s.yY.WHO_CAN_CREATE_EXTERNAL_LIMITED_INVITE;return(0,n.y)(u,v)?i.O:a},"canUserInviteExternalLimitedMembersWithReason"),d=c(u=>r(u).ok,"canUserInviteExternalLimitedMembers")},8323393403:(x,A,e)=>{"use strict";e.d(A,{D7:()=>E,JO:()=>p,NU:()=>g,wi:()=>_});var t=e(6027162153),n=e(2063075339),s=e(1407713935),i=e(7969244833),l=e(5455782105),o=e(3916100664),a=e(6839188756),r=e(6841796315),d=e(9101533895),u=e(3677514771);const _={InvalidParams:Symbol("invalid_params"),FreeTeam:Symbol("free_team"),CannotRequest:Symbol("cannot_request_ext_shared"),InvalidChannel:Symbol("invalid_channel")},v={ok:!1,reason:_.InvalidParams},h={ok:!1,reason:_.FreeTeam},f={ok:!1,reason:_.CannotRequest},I={ok:!1,reason:_.InvalidChannel},p=c((M,T)=>{if(!(0,s.jq)(T))return v;const D=(0,l.k)(M),C=(0,a.qR)((0,u.H7)(M));if(!D&&!C)return h;const O=(0,o.lR)(M,{mustEveryWorkspaceBeAllowed:!0,teamIds:(0,i.f)(M,T)});return!(O!=null&&O.ok)&&(0,t.A)(O==null?void 0:O.reasons,o.jM.UserCannotCreateChannel,o.jM.AllowedWorkspacePref).length>0?f:(0,n.Z)(M,T)?r.O:I},"canUserInviteExternalMembersToChannelWithReason"),y=c((M,T)=>{const C=(0,d.OL)(M,T,!1);return C?p(M,C):v},"canUserInviteExternalMembersToChannelWithReasonById"),g=c((M,T)=>p(M,T).ok,"canUserInviteExternalMembersToChannel"),E=c((M,T)=>y(M,T).ok,"canUserInviteExternalMembersToChannelById")},3916100664:(x,A,e)=>{"use strict";e.d(A,{jM:()=>E,Tc:()=>T,lR:()=>M});var t=e(5455782105),n=e(4803097854),s=e(2643151579),i=e(6839188756),l=e(6992769897),o=e(9087248458),a=e(5980399196),r=e(3071940241),d=e(8359728598),u=e(4761125736);const _=(0,d.A)((D,C)=>{const{teams:m,value:O}=C;switch(O){case"ONLY_SELECTED":return(0,o.A)(D,m).length===D.length;case"ALL_EXCEPT_SELECTED":return(0,a.A)(D,m).length===D.length;default:return!0}},2);function v(D){let{slackConnectAllowedWorkspacesPref:C,teamIds:m}=D;return m!=null&&m.length?_(m,C):!1}c(v,"isEveryTargetWorkspaceAllowedToHaveSharedChannelsStateless");function h(D,C){return!(0,t.k)(D)||(0,u._Z)(D,"sc_allowed_workspaces_pref_override")==="on"?!0:v({slackConnectAllowedWorkspacesPref:(0,r.a)(D),teamIds:C})}c(h,"isEveryTargetWorkspaceAllowedToHaveSharedChannels");var f=e(1507833885),I=e(3559837422),p=e(8847766420),y=e(3677514771);const g={ok:!0},E={...n.cG,...s.Xg,InvalidParams:Symbol("invalid_params"),UserIsRestricted:Symbol("user_is_restricted"),FreeTeam:Symbol("free_team"),NoOneCanManagePref:Symbol("who_can_manage_ext_shared_channels_pref_no_one"),UserCannotCreateChannel:Symbol("create_channel_restricted_action"),AllowedWorkspacePref:Symbol("slack_connect_allowed_workspaces_pref")},M=c(function(D){let{mustEveryWorkspaceBeAllowed:C,teamIds:m}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const O=[],P=(0,y.H7)(D),R=(0,t.k)(D),L=(0,i.qR)(P),V=!R&&!L;if((0,I.AB)(D)||(0,I.sV)(D))return O.push(E.UserIsRestricted),{ok:!1,reasons:O};var B;const K=(B=m??(0,p.kN)(D))!==null&&B!==void 0?B:[];(C?f._t:f.Uq)(D,K)||O.push(E.UserCannotCreateChannel),(C?h:l.A)(D,K)||O.push(E.AllowedWorkspacePref),V&&O.push(E.FreeTeam);const G=(0,n.l6)(D),H=(0,s._d)(D);return!G.ok&&!H.ok&&O.push(G.reason,H.reason),O.length>0?{ok:!!V,reasons:O}:g},"canUserInviteExternalMembersWithReason"),T=c((D,C)=>M(D,C).ok,"canUserInviteExternalMembers")},2643151579:(x,A,e)=>{"use strict";e.d(A,{Xg:()=>l,_d:()=>r,ml:()=>d});var t=e(5225510813),n=e(1650729052),s=e(5861086925),i=e(6841796315);const l={RestrictedAction:Symbol("restricted_action"),CanCreateExternalUnlimitedPref:Symbol("can_create_slack_connect_channel_pref"),WhoCanCreateExternalUnlimitedPref:Symbol("who_can_create_slack_connect_channel_pref")},o={ok:!1,reason:l.CanCreateExternalUnlimitedPref},a={ok:!1,reason:l.WhoCanCreateExternalUnlimitedPref},r=c(u=>{if(!(0,t.C)(u))return o;const v=s.yY.WHO_CAN_CREATE_SLACK_CONNECT_CHANNEL_INVITE;return(0,n.y)(u,v)?i.O:a},"canUserInviteExternalUnlimitedMembersWithReason"),d=c(u=>r(u).ok,"canUserInviteExternalUnlimitedMembers")},1359849784:(x,A,e)=>{"use strict";e.d(A,{I:()=>E,r:()=>g});var t=e(7174777686),n=e(9087248458),s=e(9884588328),i=e(1407713935),l=e(5455782105),o=e(7224980887),a=e(3792998666),r=e(5861086925),d=e(5331698805),u=e(6839188756),_=e(7112191091),v=e(5510392579),h=e(4761125736),f=e(8276911661),I=e(6693783993),p=e(3677514771),y=e(598369692);function g(M){const T=(0,h._Z)(M,"light_read_who_can_manage_ext_shared_channels_pref_migration")==="on",D=(0,p.H7)(M);if(T)return(0,u.tc)(D)?!1:(0,I.Du)(M);const C=(0,f.cA)(M),m=(0,d.u)(M);if(!(m!=null&&m.value))return!1;if((0,l.k)(M)){let O=[];switch(m.value){case r.GX.ALL_ADMINS_AND_OWNERS:return(0,_.EC)(M)||(0,o.n5)(C)||(0,o.rr)(C);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,o.n5)(C)||(0,o.rr)(C)?!0:(O=(0,y.QF)(M),!!((0,t.A)(m.users,C==null?void 0:C.id)||(0,n.A)(m.userGroups,O).length));case r.GX.EVERYONE:return!(0,a.Ez)(C);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,o.n5)(C)||(0,o.rr)(C)}}if((0,u.qR)(D))switch(m.value){case r.GX.TOPLEVEL_OWNERS:return(0,v.p2)(M);case r.GX.EVERYONE:return!(0,a.Ez)(C);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,v.p2)(M)||(0,v.Zo)(M)}return!1}c(g,"canUserManageExternalSharedChannels");function E(M,T){const D=(0,h._Z)(M,"light_read_who_can_manage_ext_shared_channels_pref_migration")==="on",C=(0,p.H7)(M);if(D){if((0,u.tc)(C)||!(0,i.jq)(T))return!1;const P=(0,s.FB)(T);return(0,I.Du)(M,{channelId:P})}const m=(0,f.cA)(M),O=(0,d.u)(M);if(!(O!=null&&O.value))return!1;if((0,l.k)(M)){let P=[];switch(O.value){case r.GX.ALL_ADMINS_AND_OWNERS:return(0,_.S4)(M,T);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,o.n5)(m)||(0,o.rr)(m)?!0:(P=(0,y.QF)(M),!!((0,t.A)(O.users,m==null?void 0:m.id)||(0,n.A)(O.userGroups,P).length));case r.GX.EVERYONE:return!(0,a.Ez)(m);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,o.n5)(m)||(0,o.rr)(m)}}if((0,u.qR)(C))switch(O.value){case r.GX.TOPLEVEL_OWNERS:return(0,v.p2)(M);case r.GX.EVERYONE:return!(0,a.Ez)(m);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,v.p2)(M)||(0,v.Zo)(M)}return!1}c(E,"canUserManageSlackConnectChannel")},1273480023:(x,A,e)=>{"use strict";e.d(A,{u:()=>l});var t=e(2063075339),n=e(340763958),s=e(6839188756),i=e(3677514771);const l=c((o,a)=>{const r=(0,i.H7)(o);return(0,s.tc)(r)&&(0,n.ju)(a)&&(0,t.Z)(o,a)},"getIsCurrentTeamSponsoredInSlackConnectChannel")},8767621462:(x,A,e)=>{"use strict";e.d(A,{S:()=>o});var t=e(8170643398),n=e(5096647761),s=e(9107158149),i=e(7600673124),l=e(8276911661);const o=c((a,r)=>{const d=(0,l.nv)(a,r);return(0,t.Zx)(d)?!1:(0,n.g)(d)?!!((0,s.bo)(a,r)&&(0,s.zP)(a,r)&&!(0,i.y)(a,r)):!0},"isMemberConnectedById")},3071940241:(x,A,e)=>{"use strict";e.d(A,{_:()=>o,a:()=>a});var t=e(2003990933),n=e(5455782105),s=e(2689960678),i=e(6790819894),l=e(766806);const o={All:"ALL",AllExceptSelected:"ALL_EXCEPT_SELECTED",OnlySelected:"ONLY_SELECTED"},a=(0,i.F)(n.k,r=>(0,l.SI)(r,"slack_connect_allowed_workspaces"),(r,d)=>r?{value:(0,t.A)(d,"type[0]"),teams:(d==null?void 0:d.team)||s.Ml}:{value:o.All,teams:s.Ml})},7358758030:(x,A,e)=>{"use strict";e.d(A,{i:()=>a});var t=e(5455782105),n=e(5861086925),s=e(6839188756),i=e(766806),l=e(5597672932),o=e(3677514771);const a=c(r=>{const d=(0,t.k)(r),u=(0,o.H7)(r);return!d&&(0,s.tc)(u)?!1:(d?i.SI:l.xp)(r,n.yY.CAN_CREATE_EXTERNAL_LIMITED_INVITE)},"getCanCreateExternalLimitedInvitePref")},5225510813:(x,A,e)=>{"use strict";e.d(A,{C:()=>a});var t=e(5455782105),n=e(5861086925),s=e(6839188756),i=e(766806),l=e(5597672932),o=e(3677514771);const a=c(r=>{const d=(0,t.k)(r),u=(0,o.H7)(r);return!d&&(0,s.tc)(u)?!1:(d?i.SI:l.xp)(r,n.yY.CAN_CREATE_SLACK_CONNECT_CHANNEL_INVITE)},"getCanCreateSlackConnectChannelInvitePref")},1650729052:(x,A,e)=>{"use strict";e.d(A,{y:()=>h});var t=e(7174777686),n=e(9087248458),s=e(5455782105),i=e(5861086925),l=e(8087758879),o=e(6839188756),a=e(5343157203),r=e(5510392579),d=e(3559837422),u=e(5795074931),_=e(3677514771),v=e(598369692);const h=c((f,I)=>{const p=(0,u.WR)(f);var y;const g=(y=(0,_.H7)(f))!==null&&y!==void 0?y:void 0;if((0,d.AB)(f)||(0,d.sV)(f))return!1;const E=(0,r.p2)(f),M=(0,r.Zo)(f),T=(0,a.C)(f),D=(0,s.k)(f),C=(0,o.qR)(g),m=(0,l.o)(f,I);if(D){const O=(0,r.hu)(f),P=(0,r.FQ)(f);switch(m.value){case i.GX.TOPLEVEL_ADMINS_AND_OWNERS:return O||P;case i.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return O||P?!0:!!(0,t.A)(m.users,p);case i.GX.ALL_ADMINS_AND_OWNERS:return O||P||T;case i.GX.EVERYONE:return!0;default:return!1}}if(C)switch(m.value){case i.GX.TOPLEVEL_OWNERS:return E;case i.GX.TOPLEVEL_ADMINS_AND_OWNERS:return E||M;case i.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return E||M||(0,t.A)(m.users,p)?!0:!!(0,n.A)(m.userGroups,(0,v.QF)(f)).length;case i.GX.EVERYONE:return!0;default:return!1}return!1},"isUserWhoCanDoSlackConnectPref")},5861086925:(x,A,e)=>{"use strict";e.d(A,{GX:()=>n,cM:()=>i,d5:()=>s,yY:()=>t});const t={CAN_CREATE_EXTERNAL_LIMITED_INVITE:"can_create_external_limited_invite",WHO_CAN_CREATE_EXTERNAL_LIMITED_INVITE:"who_can_create_external_limited_invite",CAN_CREATE_SLACK_CONNECT_CHANNEL_INVITE:"can_create_slack_connect_channel_invite",WHO_CAN_CREATE_SLACK_CONNECT_CHANNEL_INVITE:"who_can_create_slack_connect_channel_invite",CAN_ACCEPT_SLACK_CONNECT_CHANNEL_INVITES:"can_accept_slack_connect_channel_invites",WHO_CAN_ACCEPT_SLACK_CONNECT_CHANNEL_INVITES:"who_can_accept_slack_connect_channel_invites",WHO_CAN_MANAGE_SHARED_CHANNELS:"who_can_manage_ext_shared_channels",WHO_CAN_SLACK_CONNECT_DM:"who_can_dm_anyone"},n={TOPLEVEL_OWNERS:"TOPLEVEL_OWNERS",ALL_ADMINS_AND_OWNERS:"ORG_AND_WORKSPACE_ADMINS_OWNERS",TOPLEVEL_ADMINS_AND_OWNERS:"TOPLEVEL_ADMINS_AND_OWNERS",TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:"TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED",EVERYONE:"EVERYONE"},s={...n,NO_ONE:"NO_ONE",DEFAULT:n.EVERYONE},i={CAN_FREE_TEAMS_JOIN_SC_CHANNELS:"allow_sponsored_slack_connections"}},5331698805:(x,A,e)=>{"use strict";e.d(A,{u:()=>s});var t=e(5861086925),n=e(8087758879);const s=c(i=>{const l=t.yY.WHO_CAN_MANAGE_SHARED_CHANNELS;return(0,n.o)(i,l)},"getWhoCanManageSharedChannelsPref")},8087758879:(x,A,e)=>{"use strict";e.d(A,{o:()=>d});var t=e(5455782105),n=e(5861086925),s=e(6839188756),i=e(2689960678),l=e(766806),o=e(5597672932),a=e(3677514771);const r={plan:"",value:"",users:i.Ml,userGroups:i.Ml},d=c((u,_)=>{var v;const h=(0,a.H7)(u),f=(0,t.k)(u);if(!f&&(0,s.tc)(h))return r;const I=(f?"enterprise":h.plan)||"",p=f?(0,l.SI)(u,_):(0,o.xp)(u,_),y=(p==null||(v=p.type)===null||v===void 0?void 0:v[0])||"",g=y===n.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED,E=g&&(p==null?void 0:p.user)||r.users,M=g&&(p==null?void 0:p.subteam)||r.userGroups;return{plan:I,value:y,users:E,userGroups:M}},"getWhoCanPref")},3212336858:(x,A,e)=>{"use strict";e.d(A,{DP:()=>k,qc:()=>re,qA:()=>Te,Bs:()=>q,Hv:()=>$,fK:()=>N,tY:()=>Ne,GE:()=>le,b:()=>W,iH:()=>pe,mE:()=>ce});var t=e(7174777686),n=e(4761125736),s=e(3245843483),i=e(5597672932),l=e(8276911661),o=e(9101533895),a=e(3792998666),r=e(3339229351),d=e(2791814261),u=e(8904182388),_=e(6165525655),v=e(591259428),h=e(9884588328),f=e(1407713935),I=e(395285811),p=e(918457931),y=e(2585735826),g=e(340763958),E=e(5343157203),M=e(9416626),T=e(6693783993);const D={...M.u9,CantDisconnectExtShared:Symbol("cant_disconnect_ext_shared"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},C={ok:!1,reason:D.ChannelNotFound},m={ok:!1,reason:D.ChannelTypeNotSupported},O={ok:!1,reason:D.CantDisconnectExtShared},P={ok:!1,reason:D.WhoCanManagePref},R={ok:!0},L=c((Ce,Me)=>{const Se=(0,n._Z)(Ce,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,f.jq)(Me))return C;if((0,I.K3)(Ce,Me))return m;if((0,g.ju)(Me)&&!(0,y.R)(Ce,Me))return O;const Ue=(0,h.FB)(Me),He=(0,T.Om)(Ce,{channelId:Ue});if(!Se&&(0,p.t)(Me)){if(He)return R;if(!(0,E.E)(Ce))return P}return(0,M.iz)(Ce,Me)},"canUserArchiveChannelWithReasons"),V=c((Ce,Me)=>L(Ce,Me).ok,"canUserArchiveChannel");var B=e(7563681762),K=e(7148679525),b=e(6495946979),S=e(2912967402),G=e(571104883),H=e(735940183),U=e(5156662944);const F=c(Ce=>Ce&&(0,n._Z)(Ce,"feedback_disabled_orgs")==="treatment","isOrgInFeedbackDisabledList");var Y=e(529357503),Z=e(7969244833),ee=e(6934022494);const j=new H.Ay("cmd_handlers"),{UNKNOWN_COMMAND:ge,UNSUPPORTED_IN_THREAD:ne,UNSUPPORTED_IN_SHORTCUTS_MENU:ue,CUSTOM_ERROR:he}=r.SLASH_COMMAND_ERRORS,be=["/away","/collapse","/color","/colour","/dm","/expand","/feedback","/keys","/me","/msg","/s","/search","/shortcuts","/shrug","/slack_diagnostic_report","/slackdevtools","/star","/gif","/active","/giphy","/iamcal","/mute","/remind"],xe=["/asana","/adobe-manage","/adobe-subscribe","/adobe-feedback","/adobe-help","/cohere-help","/cohere-settings","/cohere-summarize","/cohere-quiet"],Le=["/away","/active","/keys","/shortcuts","/apps","/rename","/feedback","/mute","/dnd","/leave","/part","/close","/call"],fe=["/slackdebugunreads","/slackgov","/slackjspath","/slackstaging"],se=["/slackaccessibility","/slackgov"],Q=["/leave","/close","/part","/archive","/topic"],k=c(Ce=>Ce&&Ce.alias_of,"getCommandAliasOf"),N=c(Ce=>Ce&&Ce.name,"getCommandName"),$=c(Ce=>Ce&&(Ce.desc||Ce.description),"getCommandDesc"),W=c(Ce=>Ce&&Ce.usage,"getCommandUsage"),q=c(Ce=>Ce&&(Ce.canonical_name||Ce.name),"getCommandCanonicalName"),re=c(Ce=>Ce&&Ce.aliases,"getCommandAliases"),le=c(Ce=>Ce&&Ce.type,"getCommandType"),Ae=c(Ce=>Ce&&Ce.app,"getCommandApp"),Te=c(Ce=>Ce==null?void 0:Ce.appName,"getCommandAppName"),Ne=c((Ce,Me,Se)=>{const Ue=(0,o.OL)(Ce,Se),He=Ue?(0,Z.f)(Ce,Ue)||[]:[];return Me.teams&&He.length&&Me.appName!=="Slack"&&!Me.isWorkspaceAgnostic?Me.teams.filter(J=>He.includes(J)):[]},"getCommandRelatedWorkspaces"),pe=c(function(Ce,Me){let{channelId:Se}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!Me)return!1;const Ue=q(Me);return Ue==="/leave"?(0,_.Y9)(Ce,Se):Ue==="/remove"?(0,u.Vj)(Ce,Se):["/topic","/search","/invite","/invite_people","/status","/dm","/msg"].indexOf(Ue)>-1?!1:!!Me.autocomplete},"isAutocompleteCommand"),Ee=c(Ce=>!!(Ce&&Ce.isServer),"isServerCommand"),oe=c(function(Ce){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(Ce){case B.a_.InvalidDm:return j.t("Direct messages don\u2019t even have a name! Ergo, regrettably, you can\u2019t change it.");case B.a_.OwnerRequired:return j.t("Only Workspace Admins (or the channel creator) are allowed to rename channels.");case B.a_.InvalidParams:return Me?j.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"):j.t("You don\u2019t have permission to rename.");case B.a_.RestrictedUser:return Me?j.t("Your admins have limited who can rename multi-workspace channels."):j.t("You don\u2019t have permission to rename.");case B.a_.OrgSharedSettings:return Me?j.t("Your admins have limited who can rename multi-workspace channels."):j.t("You don\u2019t have permission to rename.");case B.a_.InvalidChannelType:return j.t("This channel can\u2019t be renamed.",{fallbackHash:"796ff139eccb4a046e980e400012eb16b22449d8"});default:return j.t("You don\u2019t have permission to rename.")}},"getRenameDisabledFeedback"),ce=c(function(Ce,Me){let{channelId:Se,isThread:Ue,isShortcutsMenu:He}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!Ce||!Me)return{isEnabled:!1,reason:ge};const Ye=(0,n._Z)(Ce,"ai_apps_feature")==="on",J=q(Me),ae=le(Me),Ve=(0,o.OL)(Ce,Se);if(!(0,d.L)(Ce)&&(0,t.A)(fe,J))return{isEnabled:!1,reason:ge};if(!(0,G.y3)()&&(0,t.A)(se,J))return{isEnabled:!1,reason:ge};if((0,I.jT)(Ve)&&(0,t.A)(Q,J))return{isEnabled:!1,reason:ge};if(Ue&&!((0,t.A)(be,J)||Ye&&(0,t.A)(xe,J)))return{isEnabled:!1,reason:ne};if(He&&(0,t.A)(Le,J))return{isEnabled:!1,reason:ue};if(ae==="custom"||ae==="service"){const Ke=(0,i.xp)(Ce,"commands_only_regular"),Re=(0,l.cA)(Ce);if(Ke&&(0,a.Ez)(Re))return{isEnabled:!1,reason:ge}}if(Me.teams){const Ke=(0,Z.f)(Ce,Ve)||[];if(!Me.teams.filter(Fe=>Ke.includes(Fe)).length){const Fe=`Command not run. No intersection found between channel teams (${Ke}) and command teams (${Me.teams})`;return{isEnabled:!1,reason:he,logString:Fe,feedback:j.t("This command is not available in this channel")}}}if(J==="/open"||J==="/feed"){const Ke=(0,l.cA)(Ce);if((0,a.Ez)(Ke))return{isEnabled:!1,reason:ge}}else if(J==="/topic"){const{ok:Ke,reason:Re}=(0,v.X)(Ce,Se);if(!Ke)return{isEnabled:!1,reason:he,feedback:(0,S.Bw)(Re)}}else if(J==="/invite"){const Ke=(0,l.cA)(Ce);if((0,a.Yd)(Ke))return{isEnabled:!1,reason:ge};if(!(0,b.bl)(Ve))return{isEnabled:!1,reason:he,feedback:j.t("You don\u2019t have permission to invite people.")};if((0,a.Ez)(Ke)&&!(0,f.Zp)(Ve)||(0,Y.A)(Ce,Ke,Ve))return{isEnabled:!1,reason:he,feedback:j.t("You don\u2019t have permission to invite people.")}}else if(J==="/invite_people"){if(!(0,K.Lz)(Ce))return{isEnabled:!1,reason:he,feedback:j.t("You don\u2019t have permission to invite people.")}}else if(J==="/rename"){const{ok:Ke,reason:Re}=(0,B.be)(Ce,Se);if(!Ke)return{isEnabled:!1,reason:he,feedback:oe(Re)}}else if(J==="/archive"){if(!V(Ce,Ve))return{isEnabled:!1,reason:ge}}else if(J==="/call"){if(!(0,U.lp)(Ce,Se)||(0,U.tO)(Ce))return{isEnabled:!1,reason:ge}}else if(J==="/slacktrace"){if(!(0,s.Rg4)())return{isEnabled:!1,reason:he,feedback:j.t("Please run /slacktrace in the latest version of the Slack desktop app.")}}else if(J==="/feedback"){if(F(Ce))return{isEnabled:!1,reason:ge}}else if(J==="/gif"){if(!(0,ee.R4)(Ce))return{isEnabled:!1,reason:ge};if(!(0,ee.BH)(Ce))return{isEnabled:!1,reason:he,feedback:j.t("Attach a GIF is not enabled.")}}return{isEnabled:!0}},"isSlashCommandEnabled"),ke={getRenameDisabledFeedback:oe,TS_ONLY_COMMANDS:fe,DESKTOP_APP_ONLY_COMMANDS:se}},6992769897:(x,A,e)=>{"use strict";e.d(A,{A:()=>d,O:()=>r});var t=e(9087248458),n=e(5980399196),s=e(5455782105),i=e(3071940241),l=e(8359728598),o=e(4761125736);const a=(0,l.A)((u,_)=>{const{teams:v,value:h}=_;switch(h){case"ONLY_SELECTED":return!!(0,t.A)(u,v).length;case"ALL_EXCEPT_SELECTED":return!!(0,n.A)(u,v).length;default:return!0}},2);function r(u){let{slackConnectAllowedWorkspacesPref:_,teamIds:v}=u;return v!=null&&v.length?a(v,_):!1}c(r,"areSomeTargetWorkspacesAllowedToHaveSharedChannelsStateless");function d(u,_){return!(0,s.k)(u)||(0,o._Z)(u,"sc_allowed_workspaces_pref_override")==="on"?!0:r({slackConnectAllowedWorkspacesPref:(0,i.a)(u),teamIds:_})}c(d,"areSomeTargetWorkspacesAllowedToHaveSharedChannels")},2801540778:(x,A,e)=>{"use strict";e.d(A,{z:()=>i});var t=e(6839188756),n=e(8847766420),s=e(1890276164);function i(l,o){if(!l||!o)return!1;const a=(0,t.ZT)(o);if((0,n.Kc)(l)===a||(0,n.ZT)(l)===a)return!1;const r=(0,n.jV)(l);return r&&r===o.enterprise_id?!1:(0,s.R)(l,o.id)}c(i,"isTeamExternal")},958961878:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>y,w2:()=>I});var t=e(8161242485),n=e(3202757386),s=e(4096483543),i=e(6564475562),l=e(2249017398),o=e(2615100822),a=e(5731054235),r=e(6089972488);const u=c(()=>(0,n.A)(),"isDarkModeFeatureEnabled");var _=e(571104883),v=e(506684971),h=e.n(v);const f=c(()=>{var E;const M=(0,_.y3)()||((E=window.matchMedia)===null||E===void 0?void 0:E.call(window,"(prefers-color-scheme)").media)!=="not all",T=(0,_.cX)()&&(0,r.Z)((0,r.P)(h().osversion),(0,r.P)("10.14"))>=0,D=(0,_.jy)(),C=(0,_.j9)()&&(0,_.dY)("4.36.136"),m=T||D||C,O=(0,_.y3)()||(0,s.A)()||(0,i.A)()||(0,l.A)()||(0,o.A)()||(0,a.A)();return(0,n.A)()&&M&&m&&O},"computeSystemSyncIsSupportedOnBoot"),I=f(),p=(0,t.Ay)(E=>!!I&&!!u(E));p.meta={name:"createSelector",key:"createSelectorgetSystemSyncIsSupported",description:E=>!!I&&!!u(E)};const y=p,g={computeSystemSyncIsSupportedOnBoot:f}},677609895:(x,A,e)=>{"use strict";e.d(A,{X:()=>l});var t=e(2384831516),n=e(5510392579),s=e(5597672932),i=e(3677514771);const l=(0,t.Mz)(o=>{const a=(0,i.Yc)(o);return(0,n.p2)(o,a.id)||(0,s.xp)(o,"all_users_can_purchase")});l.meta={name:"createSelector",key:"createSelectorgetCanCurrentUserUpgradeSlack",description:o=>{const a=(0,i.Yc)(o);return(0,n.p2)(o,a.id)||(0,s.xp)(o,"all_users_can_purchase")}}},317660850:(x,A,e)=>{"use strict";e.d(A,{D:()=>n});var t=e(6693783993);const n=c(s=>(0,t.eq)(s),"canUserAddEmoji")},324756633:(x,A,e)=>{"use strict";e.d(A,{S:()=>l});var t=e(9101533895),n=e(201941576),s=e(6693783993),i=e(1407713935);function l(o,a){const r=(0,t.gT)(o,a)&&(0,t.OL)(o,a)||void 0;return((0,i.yz)(r)?(0,s.E2)(o):(0,s.E2)(o,{channelId:a}))&&!(0,n.i)(o,r==null?void 0:r.id,{allowToAdmins:!0})}c(l,"canUserAtChannelInChannelById")},641827819:(x,A,e)=>{"use strict";e.d(A,{W:()=>o});var t=e(9101533895),n=e(201941576),s=e(6113051341),i=e(5795074931),l=e(6693783993);const o=c((a,r)=>{const d=(0,t.gT)(a,r)&&(0,t.OL)(a,r)||void 0;return!r||!d||!(0,s.N)(d)?!1:(0,i.u8)(a)?(0,l._7)(a,{channelId:r})&&!(0,n.i)(a,d==null?void 0:d.id,{allowToAdmins:!0}):(0,l._7)(a,{channelId:r})},"canUserAtEveryoneInChannelById")},1507833885:(x,A,e)=>{"use strict";e.d(A,{MM:()=>l,Uq:()=>o,_t:()=>a});var t=e(3385422400),n=e(5962670951),s=e(241752795),i=e(1340402138);const l=c(r=>((0,s.HV)(r)||(0,n.R)(r))&&!(0,i.R)(r),"canUserCreateChannelsInSomeWorkspace"),o=(0,t.Mz)(s.y5,n.S,(r,d)=>d,(r,d,u)=>u.some(_=>r.includes(_)||d.includes(_))),a=(0,t.Mz)(s.y5,n.S,(r,d)=>d,(r,d,u)=>u.every(_=>r.includes(_)||d.includes(_)))},5962670951:(x,A,e)=>{"use strict";e.d(A,{R:()=>i,S:()=>l});var t=e(3078708518),n=e(6693783993);const s=c(o=>!(0,t.A)(o),"isPermittedToPrecondition"),i=c(o=>s(o)?(0,n.lM)(o):!1,"canUserCreatePrivateChannelsInSomeWorkspace"),l=c(o=>s(o)?(0,n.f$)(o):[],"getWorkspaceIdsOnWhichUserCanCreatePrivateChannels")},241752795:(x,A,e)=>{"use strict";e.d(A,{HV:()=>u,YD:()=>v,y5:()=>_});var t=e(3078708518),n=e(1407713935),s=e(6495946979),i=e(1190344069),l=e(7304011293),o=e(3307632080),a=e(7112191091),r=e(6693783993);const d=c(h=>!(0,t.A)(h),"isPermittedToPrecondition"),u=c(h=>d(h)?(0,r.F5)(h):!1,"canUserCreatePublicChannelsInSomeWorkspace"),_=c(h=>d(h)?(0,r.qm)(h):[],"getWorkspaceIdsOnWhichUserCanCreatePublicChannels"),v=c((h,f)=>!(0,n.Zp)(f)||!d(h)||(0,o.A)(h,f)?!1:(0,r.Mz)(h,{channelId:f.id})&&(0,s.bl)(f)||(0,a.yG)(h,f)||(0,i.hm)(h)&&(0,n.rI)(f)&&(0,l.O)(h,f.id)?!0:!!(0,a.yG)(h,f),"canUserCreatePublicChannelFromPrivateChannel")},1612857492:(x,A,e)=>{"use strict";e.d(A,{i:()=>d,q:()=>r});var t=e(9884588328),n=e(6495946979),s=e(7112191091),i=e(1407713935),l=e(9101533895),o=e(6693783993),a=e(8250322877);const r=c((u,_)=>{if(!(0,i.jq)(_))return!1;const v=(0,t.FB)(_);return(0,a.D)(u,_)&&((0,s.S4)(u,_)||(0,n.bl)(_)&&(0,o.MN)(u,{channelId:v}))},"canUserInviteExternalUsersToChannel"),d=c((u,_)=>{const h=(0,l.OL)(u,_,!1);return h?r(u,h):!1},"canUserInviteExternalUsersToChannelById")},9183417278:(x,A,e)=>{"use strict";e.d(A,{Q:()=>d,e:()=>u});var t=e(9884588328),n=e(6495946979),s=e(1407713935),i=e(7112191091),l=e(9101533895),o=e(4761125736),a=e(6693783993),r=e(8250322877);const d=c((_,v)=>{const h=(0,o._Z)(_,"invite_to_channel_permission")==="on";if(!(0,s.jq)(v))return!1;const f=(0,t.FB)(v),I=(0,r.D)(_,v);return h&&(0,s.Zp)(v)?I&&((0,i.S4)(_,v)||(0,n.bl)(v)&&(0,a.oo)(_,{channelId:f})):I},"canUserInviteInternalUsersToChannel"),u=c((_,v)=>{const f=(0,l.OL)(_,v,!1);return f?d(_,f):!1},"canUserInviteInternalUsersToChannelById")},8250322877:(x,A,e)=>{"use strict";e.d(A,{D:()=>h,X:()=>f});var t=e(1340402138),n=e(9884588328),s=e(1407713935),i=e(6007206761),l=e(5373179915),o=e(6495946979),a=e(2350349607),r=e(7112191091),d=e(3559837422),u=e(9101533895),_=e(4761125736),v=e(6693783993);const h=c((I,p)=>{const y=(0,_._Z)(I,"invite_to_channel_permission")==="on";if(!(0,s.jq)(p))return!1;const g=(0,n.FB)(p);return(0,d.AB)(I)||(0,i.F)(p)||!(0,a.V)(p)||(0,t.R)(I)&&(0,l.R)(I,p)?!1:y&&(0,s.Zp)(p)?(0,r.S4)(I,p)||(0,o.bl)(p)&&((0,v.oo)(I,{channelId:g})||(0,v.MN)(I,{channelId:g})):(0,r.S4)(I,p)||(0,o.bl)(p)},"canUserInviteToChannel"),f=c((I,p)=>{const g=(0,u.OL)(I,p,!1);return g?h(I,g):!1},"canUserInviteToChannelById")},8904182388:(x,A,e)=>{"use strict";e.d(A,{CE:()=>f,Vj:()=>M,VJ:()=>E});var t=e(1407713935),n=e(6007206761),s=e(6841796315),i=e(9101533895);const l={InvalidDm:Symbol("invalid_dm"),ArchivedChannel:Symbol("archived_channel"),RequiredChannel:Symbol("required_channel")},o={ok:!1,reason:l.ArchivedChannel},a={ok:!1,reason:l.InvalidDm},r={ok:!1,reason:l.RequiredChannel};function d(T,D){const C=(0,i.gT)(T,D)?(0,i.OL)(T,D):null;return(0,n.F)(C)?o:(0,t.LI)(C)||(0,t.yz)(C)?a:(0,t.gx)(C)?r:s.O}c(d,"isChannelKickableWithReason");function u(T,D){return d(T,D).ok}c(u,"isChannelKickable");var _=e(6915262278),v=e(3559837422),h=e(6693783993);const f={...l,InvalidParams:Symbol("invalid_params"),UserIsRestricted:Symbol("user_is_restricted"),RestrictedPublicChannel:Symbol("restricted_public_channel"),RestrictedPrivateChannel:Symbol("restricted_private_channel")},I={ok:!1,reason:f.InvalidParams},p={ok:!1,reason:f.UserIsRestricted},y={ok:!1,reason:f.RestrictedPublicChannel},g={ok:!1,reason:f.RestrictedPrivateChannel};function E(T,D){const C=(0,i.gT)(T,D)?(0,i.OL)(T,D):null;if(!(0,t.jq)(C))return I;if((0,v.sV)(T))return p;const m=d(T,D);if(!m.ok)return{ok:!1,reason:m.reason};const O=(0,h.ou)(T,{channelId:D}),P=(0,h.sX)(T,{channelId:D}),R=(0,t.rW)(C)?"public":"private",L=R==="private"?_.Po:_.LI,V=R==="private"?_.tU:_.H7;return!(L(T)||V(T))&&!(R==="private"?P:O)?R==="private"?g:y:s.O}c(E,"canUserKickFromChannelWithReason");function M(T,D){return E(T,D).ok}c(M,"canUserKickFromChannel")},6915262278:(x,A,e)=>{"use strict";e.d(A,{H7:()=>d,LI:()=>a,Po:()=>r,tU:()=>u});var t=e(5597672932),n=e(3677514771),s=e(5455782105),i=e(6839188756),l=e(5510392579),o=e(6693783993);const a=c(_=>(0,s.k)(_)?(0,o.fl)(_):!1,"canUserManagePublicChannelsInOrgDash"),r=c(_=>(0,s.k)(_)?(0,o.$5)(_):!1,"canUserManagePrivateChannelsInOrgDash"),d=c(_=>{const v=(0,n.H7)(_);return(0,i.Ny)(v)?(0,l.h3)(_):!1},"canUserManagePublicChannelsInTeamSite"),u=c(_=>{const v=(0,n.H7)(_);return!(0,i.Ny)(v)||(0,i.NB)(v)&&!(0,t.xp)(_,"has_compliance_export")?!1:(0,o.Ny)(_)},"canUserManagePrivateChannelsInTeamSite")},5343157203:(x,A,e)=>{"use strict";e.d(A,{C:()=>f,E:()=>I});var t=e(7530630315),n=e(235108050),s=e(9087248458),i=e(5455782105),l=e(7876109014),o=e(5510392579),a=e(3559837422),r=e(8847766420),d=e(5795074931),u=e(4761125736),_=e(6693783993),v=e(766806),h=e(598369692);const f=c(p=>{if((0,a.sV)(p))return!1;const y=(0,r.jV)(p);if((0,o.V7)(p,y)||(0,o.PY)(p,y))return!0;const g=(0,r.ZT)(p),E=(0,t.A)(g,(0,r.kN)(p));return(0,n.A)(E).some(T=>!!((0,o.$G)(p,T)||(0,o.h3)(p,T)))},"isCurrentUserAnyAdminOrOwner");function I(p){if((0,u._Z)(p,"light_read_who_can_manage_shared_channels_pref_migration")==="on")return(0,_.Tg)(p);const g=(0,v.SI)(p,"who_can_manage_shared_channels");if(!g)return!0;if(!(0,i.k)(p)||(0,a.sV)(p))return!1;const E=(0,d.WR)(p);if((0,l.v)(g,"user")&&g.user.includes(E))return!0;if((0,l.v)(g,"subteam")){const T=(0,h.QF)(p);if((0,s.A)(g.subteam,T).length>0)return!0}const M=g==null?void 0:g.type;return M!=null&&M.includes("regular")?!0:M!=null&&M.includes("admin")?f(p):M!=null&&M.includes("owner")?(0,o.PY)(p):!1}c(I,"canUserManageOrgSharedChannels")},7563681762:(x,A,e)=>{"use strict";e.d(A,{JJ:()=>O,a_:()=>f,be:()=>C,rY:()=>m});var t=e(1407713935),n=e(918457931),s=e(7112191091),i=e(6915262278),l=e(5343157203),o=e(6025726268),a=e(3559837422),r=e(6841796315),d=e(5795074931),u=e(9101533895),_=e(4761125736),v=e(3490825458),h=e(6693783993);const f={InvalidChannelType:Symbol("invalid_channel_type"),InvalidDm:Symbol("invalid_dm"),InvalidParams:Symbol("invalid_params"),OrgSharedSettings:Symbol("org_shared_settings"),OwnerRequired:Symbol("owner_required"),RestrictedUser:Symbol("restricted_user"),RestrictedAction:Symbol("restricted_action"),UserHasNoPermissions:Symbol("user_has_no_permissions")},I={ok:!1,reason:f.InvalidParams},p={ok:!1,reason:f.InvalidDm},y={ok:!1,reason:f.InvalidChannelType},g={ok:!1,reason:f.RestrictedUser},E={ok:!1,reason:f.OrgSharedSettings},M={ok:!1,reason:f.OwnerRequired},T={ok:!1,reason:f.UserHasNoPermissions},D=c((P,R)=>{const L=(0,_._Z)(P,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,t.jq)(R))return I;if((0,t.LI)(R)||(0,t.yz)(R))return p;if((0,t.rI)(R))return y;const V=(0,d.TZ)(P),B=(0,v.s)(P),K=(0,v.R)(P);if(!V)return B&&((0,t.Zp)(R)&&(0,i.Po)(P)||(0,t.rW)(R)&&(0,i.LI)(P))||K&&((0,t.Zp)(R)&&(0,i.tU)(P)||(0,t.rW)(R)&&(0,i.H7)(P))?r.O:T;if(L)return(0,h.bT)(P,{channelId:R.id})?r.O:T;const b=(0,l.E)(P)||(0,h.LN)(P);return(0,n.t)(R)&&!b?E:(0,o.M)(P,R)||(0,h.bT)(P,{channelId:R.id})?r.O:(0,a.sV)(P)||(0,a.AB)(P)?g:(0,s.S4)(P,R)?r.O:M},"canUserRenameChannelWithReason"),C=c((P,R)=>{const V=(0,u.OL)(P,R,!1);return V?D(P,V):I},"canUserRenameChannelWithReasonById"),m=c((P,R)=>D(P,R).ok,"canUserRenameChannel"),O=c((P,R)=>C(P,R).ok,"canUserRenameChannelById")},9416626:(x,A,e)=>{"use strict";e.d(A,{NG:()=>P,iz:()=>O,u9:()=>h});var t=e(9884588328),n=e(1407713935),s=e(6007206761),i=e(6495946979),l=e(918457931),o=e(2585735826),a=e(340763958),r=e(9846841407),d=e(7112191091),u=e(5343157203),_=e(4761125736),v=e(6693783993);const h={ChannelNotFound:Symbol("channel_not_found"),ChannelTypeNotSupported:Symbol("channel_type_not_supported"),CantArchiveGeneral:Symbol("cant_archive_general"),NotInChannel:Symbol("not_in_channel"),AlreadyArchived:Symbol("already_archived"),NotAllowedHomeExternallyShared:Symbol("not_allowed_home_ext_shared"),AwayExternallyShared:Symbol("away_ext_shared"),UserHasNoPermissions:Symbol("user_has_no_permissions"),DefaultOrgWideChannel:Symbol("default_org_wide_channel"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},f={ok:!1,reason:h.ChannelNotFound},I={ok:!1,reason:h.ChannelTypeNotSupported},p={ok:!1,reason:h.CantArchiveGeneral},y={ok:!1,reason:h.NotInChannel},g={ok:!1,reason:h.AlreadyArchived},E={ok:!1,reason:h.NotAllowedHomeExternallyShared},M={ok:!1,reason:h.AwayExternallyShared},T={ok:!1,reason:h.UserHasNoPermissions},D={ok:!1,reason:h.DefaultOrgWideChannel},C={ok:!1,reason:h.WhoCanManagePref},m={ok:!0},O=c((R,L)=>{const V=(0,_._Z)(R,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,n.jq)(L))return f;if((0,n.LI)(L)||(0,n.yz)(L))return I;if((0,n.gx)(L))return p;if((0,s.F)(L))return g;if((0,r.b)(R,L))return M;if(!(0,d.S4)(R,L)&&!(0,i.bl)(L))return y;const K=(0,t.FB)(L);if((0,a.ju)(L)&&!(0,r.b)(R,L)&&!(0,o.R)(R,L))return E;const b=(0,v.Om)(R,{channelId:K});return!V&&(0,l.t)(L)&&!(0,u.E)(R)&&!(0,v.LN)(R,{channelId:K})?C:b?m:T},"canUserSeeArchiveChannelOptionWithReasons"),P=c((R,L)=>O(R,L).ok,"canUserSeeArchiveChannelOption")},591259428:(x,A,e)=>{"use strict";e.d(A,{P:()=>p,X:()=>I});var t=e(9101533895),n=e(4761125736),s=e(6495946979),i=e(2912967402),l=e(1407713935),o=e(6007206761),a=e(3559837422),r=e(340763958),d=e(4827886670),u=e(6693783993);const _={ok:!0},v={ok:!1,reason:i.CM},h={ok:!1,reason:i.Jr},f={ok:!1,reason:i.oP},I=c((y,g)=>{const E=(0,t.gT)(y,g)&&(0,t.OL)(y,g);return E?(0,l.JM)(E)&&(0,r.ju)(E)?h:(0,o.F)(E)?f:(0,n._Z)(y,"channel_manager_enhancements")==="on"&&(0,u.ig)(y,{channelId:g})?_:!(0,s.bl)(E)||!(0,d.c)(y,E)||(0,a.sV)(y)||(0,a.AB)(y)?f:_:v},"canUserSetTopicForChannelWithReasonById"),p=c((y,g)=>I(y,g).ok,"canUserSetTopicForChannelById")},3307632080:(x,A,e)=>{"use strict";e.d(A,{A:()=>i,G:()=>s});var t=e(6545221113),n=e(8847766420);const s=c((l,o)=>{if(!l||!o)return!1;const a=(0,n.Kc)(l);return(0,t.A)(l,a,o)},"isExternalLimited"),i=s},7645285332:(x,A,e)=>{"use strict";e.d(A,{Xw:()=>n,l0:()=>a,xf:()=>s,gU:()=>l,XT:()=>d});var t=e(7732872146);const n=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function s(u){const _=typeof u=="string"&&u.match(n);return _&&_.length===1&&_[0]===u||!1}c(s,"isEmail");function i(u){const{pathname:_,protocol:v}=parseUrl(u);return v==="mailto:"&&s(_)}c(i,"isEmailUrl");function l(u){const{pathname:_,protocol:v}=u;return v==="mailto:"&&s(_)}c(l,"isEmailUrlFromUrlObject");const o=/^[\w.-]+(?:\.[\w.-]+)+[\w\-.]+$/i;function a(u){const _=typeof u=="string"&&u.match(o);return _&&_.length===1&&_[0]===u||!1}c(a,"isDomain");function r(u){return u.includes("@slack-bots.com")}c(r,"isSlackBotEmail");function d(u){let{csv:_,min:v=0,max:h=10}=u;const f=_.split(/\s*,\s*/).length;return{minViolation:f<v,maxViolation:f>h}}c(d,"validateCSV")},1471580244:(x,A,e)=>{"use strict";e.d(A,{A:()=>D,k:()=>y});var t=e(3134334389),n=e(5255740490),s=e(1407713935),i=e(4559887502),l=e(6007206761),o=e(1921529647),a=e(7594425517),r=e(1442695153),d=e(2671211451),u=e(3877384923),_=e(9285382326),v=e(796111729),h=e(4757466470),f=e(9391594207),I=e(9101533895);function p(){return p=Object.assign||function(C){for(var m=1;m<arguments.length;m++){var O=arguments[m];for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(C[P]=O[P])}return C},p.apply(this,arguments)}c(p,"_extends");function y(C){return!(0,s.LI)(C)&&!(0,s.yz)(C)}c(y,"shouldUseInlineChannelEntity");const g="INLINE-CHANNEL-ENTITY";function E(C){let{className:m,channel:O,bestFormerName:P,displayFormerNames:R=u.P.false,logger:L,boldIcon:V=!1,showTeam:B=!0,truncate:K=!1,truncateWidth:b,overrideHiddenName:S,overrideHiddenIcon:G,withTruncationTooltip:H,channelNameClassName:U,omitNonExistentTooltip:F,channelHasNonUniqueName:Y=!1,showDisambiguatingTeamName:Z=!1}=C;const ee=(0,s.t8)(O),j=(0,s.QR)(O||null),ge=(0,t.useCallback)(fe=>{let{className:se,...Q}=fe;return(!j||G)&&t.createElement(r.A,p({},Q,{bold:V,className:se,channel:O,overrideHiddenIcon:G}))},[O,V,j,G]);if(!y(O||null))return L==null||L.warn(g,"InlineChannelEntity should not display IMs or MPIMs"),null;const ne=(0,n.A)(m,"c-inline_channel_entity"),ue=(0,l.F)(O)?u.pI.dim:void 0,he=O&&S?{...O,name:S}:O||void 0,be=(0,n.A)(U,"c-inline_channel_entity__content"),xe=Y&&Z,Le=(ee||j)&&!S?t.createElement(_.A,{"data-qa":"inline_channel_entity__missing",type:ee?"unknown":"non-existent",size:"small",width:b,omitNonExistentTooltip:F}):t.createElement("span",{className:be},t.createElement(o.A,{bold:V,channel:he,bestFormerName:P,displayFormerNames:R,showTeam:B,showTeamForLocalChannel:xe,width:b,"data-qa":"inline_channel_entity__name",overrideHiddenName:S}));return t.createElement(d.A,{avatar:ge,className:ne,"data-qa":"inline_channel_entity","data-channel-id":O&&O.id,style:ue,truncate:K,truncateWidth:b,withTruncationTooltip:H,primaryContent:Le,secondaryContent:b&&t.createElement(t.Fragment,null,B&&t.createElement(a.A,{className:"c-inline_channel_entity__team",iconSize:14,channel:he,"data-qa":"inline_channel_entity__team"}))})}c(E,"InlineChannelEntity"),E.displayName="InlineChannelEntity";function M(C){return Object.prototype.hasOwnProperty.call(C,"channel")}c(M,"propsContainsChannel");function T(C,m){const O=M(m)?m.channel:(0,I.OL)(C,m.channelId);let P;return m.showDisambiguatingTeamName&&(P=(0,i.i)((0,I.MS)(C),O)),{channel:O,channelHasNonUniqueName:P,logger:(0,v.Ay)({state:C})}}c(T,"mapStateToProps");const D=(0,f.N)(T,null,null,{areStatePropsEqual:h.kt})(E)},6850680508:(x,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(3134334389),n=e(5255740490),s=e(6696292586),i=e(9884588328),l=e(1407713935),o=e(4559887502),a=e(6007206761),r=e(8597130189),d=e(1921529647),u=e(5273017660),_=e(3877384923),v=e(9285382326),h=e(796111729),f=e(735940183),I=e(9391594207),p=e(9101533895),y=e(8286248123);function g(){return g=Object.assign||function(O){for(var P=1;P<arguments.length;P++){var R=arguments[P];for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&(O[L]=R[L])}return O},g.apply(this,arguments)}c(g,"_extends");const E=new f.Ay("channel_entity"),M="SMALL-CHANNEL-ENTITY";function T(O){let{className:P,channel:R,bestFormerName:L,inlineNameSuffix:V,invert:B=!1,logger:K,displayFormerNames:b=_.P.false,showTeamForLocalChannel:S,showDraftIcon:G=!1,showFilledIcon:H=!1,showTeam:U,memberCount:F,onlyBoldIfUnread:Y=!1,showTruncatedChannelNameTooltip:Z=!1,"data-qa":ee="small_channel_entity",channelHasNonUniqueName:j=!1,showDisambiguatingTeamName:ge=!1}=O;const ne=(0,t.useCallback)($=>t.createElement(r.A,g({},$,{className:"c-small_channel_entity__icon",channel:R,size:_.RG.small,showDraftIcon:G,showFilledIcon:H})),[R,G,H]);if((0,l.LI)(R)||(0,l.yz)(R))return K==null||K.warn(M,"SmallChannelEntity should not display IMs or MPIMs"),null;const ue=(0,n.A)(P,"c-small_channel_entity"),he=!Y||(0,i.KJ)(R),be=(0,l.t8)(R),xe=(0,l.QR)(R);let Le=(0,a.F)(R)?_.pI.dim:void 0;B&&(Le=_.pI.highlightDark);let fe=null;if((0,s.A)(F)){const $=E.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:F,fallbackHash:"c8e3bc8a761a13ce8f87cea7ebb3009bccee1a21",fallbackHashNs:"user_group_entity"});fe=t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix normal","aria-label":$},"(",F,")")}const se=j&&ge,Q=t.createElement(d.A,{channel:R,bestFormerName:L,inlineNameSuffix:V,displayFormerNames:b,showTeamForLocalChannel:S||se,showTeam:U,bold:!!he}),k=Z?t.createElement(u.CG,{withTruncationTooltip:!0},Q):Q,N=(0,n.A)("c-small_channel_entity__content","c-small_channel_entity__content--xws",{"c-small_channel_entity__content--show-truncated-tooltip":Z});return t.createElement(u.Ay,{avatar:ne,className:ue,"data-qa":ee,size:"small",style:Le,text:t.createElement(u.CG,null,be||xe?t.createElement(v.A,{type:be?"unknown":"non-existent",invert:B,size:"small"}):t.createElement("span",{className:N},k,V&&t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix"},V),fe))})}c(T,"SmallChannelEntity"),T.displayName="SmallChannelEntity";function D(O){return Object.prototype.hasOwnProperty.call(O,"channel")}c(D,"propsContainsChannel");function C(O,P){let R;if(P.showMemberCounts){var L;const K=(0,y.q8)(O,D(P)?(0,i.FB)(P.channel):P.channelId);R=K?K==null||(L=K.counts)===null||L===void 0?void 0:L.member_count:null}const V=D(P)?P.channel:(0,p.OL)(O,P.channelId);let B;return P.showDisambiguatingTeamName&&(B=(0,o.i)((0,p.MS)(O),V)),{memberCount:R,channel:V,logger:(0,h.Ay)({state:O,label:M}),channelHasNonUniqueName:B}}c(C,"mapStateToProps");const m=(0,I.N)(C)(T)},3215419563:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(6850680508),s=e(2828836153),i=e(3877384923),l=e(9163962844),o=e(9391594207),a=e(9101533895);function r(){return r=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}return f},r.apply(this,arguments)}c(r,"_extends");function d(f,I,p){if(f)return I||p?i.pI.highlightDim:i.pI.highlightDark;if(I||p)return i.pI.dim}c(d,"getBaseStyle");function u(f){let{className:I,secondaryContent:p,isActive:y=!1,isDeactivated:g=!1,isDisabled:E=!1,showUnreadBadge:M=!1,badgeCount:T=0,onlyBoldIfUnread:D=!1,...C}=f,m=p;M&&(m=t.createElement("div",{className:"c-small_channel_entity__secondary-content-badge"},p,t.createElement(l.A,{count:T,className:"c-channel_entity__mentions",style:y?"white":"red"})));const O=d(y,E,g);return t.createElement(s.A,{className:I,primaryContent:t.createElement(n.A,r({invert:O===i.pI.highlightDark,onlyBoldIfUnread:D},C)),secondaryContent:m,size:"small",style:O})}c(u,"SmallChannelListEntity"),u.displayName="SmallChannelListEntity";function _(f){return Object.prototype.hasOwnProperty.call(f,"channel")}c(_,"propsContainsChannel");function v(f,I){const p=_(I)?I.channel:(0,a.OL)(f,I.channelId),y=I.showUnreadBadge?I.badgeCount||(0,a.TJ)(f,p):0;return{channel:p,badgeCount:y}}c(v,"mapStateToProps");const h=(0,o.N)(v)(u)},8597130189:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(5255740490),s=e(1407713935),i=e(1694643415),l=e(3877384923),o=e(8683010724),a=e(2562405183);function r(){return r=Object.assign||function(_){for(var v=1;v<arguments.length;v++){var h=arguments[v];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(_[f]=h[f])}return _},r.apply(this,arguments)}c(r,"_extends");function d(_){let{size:v=l.RG.medium,className:h,channel:f,showDraftIcon:I=!1,showFilledIcon:p=!1}=_;const y=(0,s.t8)(f),g=(0,a.d4)(E=>(0,i.Ay)(E,f,{filled:p,showDraftIcon:I}));return v!==l.RG.small&&(g.inline=!0),t.createElement("span",{className:(0,n.A)("c-channel_icon",{"c-channel_icon--unknown":y,"c-channel_icon--with-background":v!==l.RG.small},h),"data-channel-type-icon":(g==null?void 0:g.name)||"unknown"},!y&&t.createElement(o.A,r({},v===l.RG.small?{size:"18"}:{},g)))}c(d,"ChannelIcon"),d.displayName="ChannelIcon";const u=d},1921529647:(x,A,e)=>{"use strict";e.d(A,{A:()=>P});var t=e(3134334389),n=e(5255740490),s=e(9113979368),i=e(6159136815),l=e(9884588328),o=e(6007206761),a=e(395285811),r=e(4630136761),d=e(2647703359),u=e(3634593162),_=e(6839188756),v=e(7594425517),h=e(1442695153),f=e(3877384923),I=e(82287009),p=e(4518138713),y=e(735940183),g=e(9391594207),E=e(937317117),M=e(3677514771);function T(){return T=Object.assign||function(R){for(var L=1;L<arguments.length;L++){var V=arguments[L];for(var B in V)Object.prototype.hasOwnProperty.call(V,B)&&(R[B]=V[B])}return R},T.apply(this,arguments)}c(T,"_extends");const D=new y.Ay("search"),C=new y.Ay("inline_channel");function m(R){const{bestFormerName:L,bold:V=!0,channel:B,channelName:K,overrideHiddenName:b,width:S,displayFormerNames:G=f.P.true,isChannelFrozenAndInGracePeriod:H,showTeam:U=!0,showTeamForLocalChannel:F=!1,showTeamName:Y,titleBlocks:Z}=R,ee=(0,o.F)(B)&&!H;let j=`${b??K}${ee?` ${D.t("(archived)")}`:""}`,ge;if(G)if(L){const ue=t.createElement(h.A,{bold:V,className:"c-channel_name__former_channel_icon",channel:B}),he=t.createElement("span",{className:"c-channel_name__former_name_text"},t.createElement(i.A,{text:L,showTooltips:!1}));ge=L&&t.createElement("span",{className:"c-channel_name__suffix"},C.rt(" (formerly {icon}{name})",{icon:ue,name:he,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"',fallbackHash:"b574996f0134b62e0fae6797e7d969b04de6b482"}))}else{let ue;const he=(0,l.Hx)(B);if(he&&!(0,s.A)(he)){const be=he.map(Le=>`#${Le}`);ue=(0,y.jd)(be,{noConj:!0}).join("")}ue&&(j+=` ${C.t("(formerly {names})",{names:ue,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"'})}`)}const ne=(0,n.A)("c-channel_entity__name",{"c-channel_entity__name--bold":V});return t.createElement(t.Fragment,null,t.createElement("span",T({className:ne},(0,p.A)(R)),Z??t.createElement(t.Fragment,null,t.createElement(i.A,{text:j,showTooltips:!1}),G&&ge)),!S&&t.createElement(t.Fragment,null,U&&t.createElement(v.A,{className:"c-channel_entity__team",iconSize:f.RG.inline,channel:B,"data-qa":"channel_entity__team",shouldRender:F,showTeamName:Y})))}c(m,"ChannelName"),m.displayName="ChannelName";function O(R,L){let{channel:V,includeChannelPrefix:B}=L;const K=(0,M.H7)(R)||(0,M.lp)(R),b=(0,_.ZT)(K),S=V&&(0,a.jT)(V)&&(0,u.l)(V.id),G=S?(0,E.Lp)(R,S):void 0,H=G&&(0,d.U9)(G)?(0,I.GU)({id:S,fileId:S,size:"caption",truncate:!1}):null;var U;return{channelName:(U=(0,l.SB)(R,V,{publicChannelIncludeHashSign:!!B,imIncludeAtSign:!1}))!==null&&U!==void 0?U:void 0,titleBlocks:H,isChannelFrozenAndInGracePeriod:(0,r.sP)(b,V)}}c(O,"mapStateToProps");const P=(0,g.N)(O)(m)},7594425517:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(9884588328),i=e(5373179915),l=e(6839188756),o=e(9391594207),a=e(9101533895),r=e(3677514771);let d=c(class extends t.Component{render(){const{shouldRender:h,team:f,className:I}=this.props;return!h||!f?null:t.createElement("div",{className:(0,n.A)("c-channel_team","c-channel_team--xws",I),"data-qa":"channel_team"},t.createElement("span",{className:"c-channel_team__name"},(0,l.F1)(f)))}},"ChannelTeam");d.displayName="ChannelTeam";const u=c((v,h)=>{let{channel:f,channelId:I,shouldRender:p}=h;const y=f||(0,a.OL)(v,I),g=(0,i.R)(v,y);let E;if((0,s.lo)(y))E=(0,r._J)(v,(0,s.bK)(v,y));else if(p||g){const M=(0,s.ne)(v,y);E=(M?(0,r._J)(v,M):void 0)||(0,r.H7)(v)}return{shouldRender:p||g||!!(0,s.lo)(y),team:E??void 0}},"mapStateToProps"),_=(0,o.N)(u)(d)},1442695153:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(1407713935),i=e(1694643415),l=e(8683010724),o=e(2562405183);function a(){return a=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},a.apply(this,arguments)}c(a,"_extends");const r=c(u=>{let{className:_,filled:v,bold:h,channel:f,disableArchived:I,overrideHiddenIcon:p}=u;const y=(0,o.d4)(E=>p||(0,i.Ay)(E,f,{filled:v||(0,s.Zp)(f),bold:h,disableArchived:I})),g=(0,n.A)(_,{"c-inline_channel_icon c-inline_channel_icon--space":!0});return t.createElement("span",{className:g,"data-inline-channel-type-icon":y.name},t.createElement(l.A,a({inline:!0},y)))},"InlineChannelIcon");r.displayName="InlineChannelIcon";const d=t.memo(r)},1694643415:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>m,PR:()=>D,pH:()=>M});var t=e(5892132962),n=e(9884588328),s=e(1407713935),i=e(6007206761),l=e(395285811),o=e(4630136761),a=e(2647703359),r=e(3634593162),d=e(6839188756),u=e(9101533895),_=e(937317117),v=e(3677514771);const h={name:"archive"},f={name:"archive",variation:"filled"},I={name:"edit"},p={name:"edit",variation:"filled"},y={name:"file"},g={name:"lists"},E={name:"lock"},M={name:"lock",variation:"filled"},T={name:"channel"},D={name:"channel",variation:"filled"},C={name:"canvas"};function m(O,P){let{filled:R,bold:L,disableArchived:V,showDraftIcon:B}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{filled:!1,bold:!1,disableArchived:!1,showDraftIcon:!1};const K=(0,v.H7)(O)||(0,v.lp)(O),b=(0,d.ZT)(K);if(!(0,o.sP)(b,P)&&((0,i.F)(P)&&!V||(0,o.Zz)(P)))return R?f:h;if(B&&(0,n.yc)(O,P.id))return R?p:I;if((0,l.jT)(P)){const G=(0,_.Lp)(O,(0,r.l)(P.id));if((0,a.wL)(G))return C;if((0,a.aD)(G)){const H=(0,u.Pf)(O,G.id),U=(0,u.OL)(O,H);return(0,s.Zp)(U)||(0,s.JM)(U)?R?M:E:C}return(0,a.l7)(G)?g:y}const S=(0,t.sc)(P);return S||((0,s.Zp)(P)?R?M:E:L?D:T)}c(m,"getChannelIconType")},2023515700:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(5255740490),s=e(3750057149),i=e(3037015781),l=e(8170643398),o=e(9262712126),a=e(4562579337),r=e(479227507),d=e(2671211451),u=e(3877384923),_=e(9391594207),v=e(5761207079),h=e(8276911661),f=e(3146663623);function I(g){const{className:E,forceRealName:M=!1,id:T,member:D,truncate:C=!1,truncateWidth:m,withTruncationTooltip:O=!1,"data-qa":P="inline_member_entity",isBold:R=!0,showAppOrBotBadge:L,isUserHidden:V=!1}=g,B=(0,n.A)(E,"c-inline_member_entity"),K=(0,a.A)(D),b=(0,l.v3)(D),S=(0,l.oy)(D),G=(0,i.lv)(D),H=(0,i.mX)(D),U=(0,o.wg)(D),F=(0,o.Fh)(D);let Y;M||!F?Y=U:Y=F;const Z=S?u.pI.dim:void 0;return t.createElement(d.A,{className:B,"data-qa":P,"data-member-id":T||(D==null?void 0:D.id),style:Z,truncate:C,truncateWidth:m,withTruncationTooltip:O,primaryContent:t.createElement("span",{className:"c-inline_member_entity__content"},t.createElement(r.A,{isBold:R,name:Y,inline:!0,"data-qa":"inline_member_entity__name",isAppOrBot:K,isWorkflowBot:b,isDeleted:S,isNonExistent:G,isUnknown:H,showAppOrBotBadge:L,isUserHidden:V}))})}c(I,"InlineMemberEntity"),I.displayName="InlineMemberEntity";function p(g,E){let{forceRealName:M,member:T,id:D}=E;const C=T||(0,h.nv)(g,D);return{member:C??void 0,forceRealName:(0,s.A)(M)?M:(0,f.E)(g),isUserHidden:C&&(0,v.a)(g,C.id)}}c(p,"mapStateToProps");const y=(0,_.N)(p)(I)},5658567578:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>V,lP:()=>P});var t=e(3134334389),n=e(5255740490),s=e(2486585453),i=e(3037015781),l=e(9884588328),o=e(8170643398),a=e(9262712126),r=e(3534324375),d=e(4562579337),u=e(4775127335),_=e(479227507),v=e(1464713483),h=e(51460783),f=e(161084047),I=e(3534100833),p=e(3877384923),y=e(9828955991),g=e(8683010724),E=e(82287009),M=e(9391594207),T=e(9101533895),D=e(5761207079),C=e(8276911661),m=e(8011352381);function O(){return O=Object.assign||function(B){for(var K=1;K<arguments.length;K++){var b=arguments[K];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S])}return B},O.apply(this,arguments)}c(O,"_extends");const P={right:"right",bottom:"bottom"};function R(B){const{className:K,id:b,invert:S=!1,member:G,memberPrimaryName:H,memberSecondaryName:U,secondaryContent:F,secondaryContentPosition:Y=P.bottom,subtext:Z,showSubtext:ee=!0,showAvatar:j=!0,showDraftIcon:ge=!1,showPresence:ne=!0,showStatus:ue=!0,showTooltip:he=!0,showAppOrBotBadge:be=!0,isDeactivated:xe=!1,useShortMode:Le,showHoverCard:fe=!1,forwardedRef:se,"data-sk":Q="medium_member_entity","data-qa":k="medium_member_entity",isUserHidden:N=!1,noStatusText:$=!1,showBadgeOnTextTruncation:W,description:q=""}=B,re=(0,d.A)(G),le=(0,o.v3)(G),Ae=(0,o.oy)(G),Te=(0,o.fy)(G),Ne=(0,o.hh)(G),pe=(0,i.lv)(G),Ee=(0,i.mX)(G),oe=t.createElement(_.A,{"data-qa":"member-entity__primary-name",name:H,invert:S&&!xe,isAppOrBot:re,isWorkflowBot:le,showAppOrBotBadge:be,isDeleted:Ae,isSelf:Te,isNonExistent:pe,isUnknown:Ee,isUserHidden:N,showBadgeOnTextTruncation:W}),ce=(0,E.yN)({memberId:b,children:oe}),ke=!N&&t.createElement(I.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},U),Ce=G&&t.createElement(f.A,{className:"c-member__title","data-qa":"member-entity__title"},(0,o.rN)(G)),Me=!Ae&&!Ne&&t.createElement(y.Ay,{memberId:b,className:"c-member__presence",invert:S&&!xe,"data-qa":"member-entity__presence",inline:!1}),Se=t.createElement(s.A,{memberId:b,tooltip:he,animated:Le,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status",noText:$}),Ue=Y===P.bottom&&F?t.createElement(h.A,{"data-qa":"member-entity__metadata"},F):null,He=t.createElement("span",{className:"c-member__primary_content__description"},t.createElement(m.A,{lines:1,withTooltip:!0,breakWords:!1},q)),Ye=t.createElement("span",{className:"c-member__primary_content"},fe?ce:oe,ne&&Me,!Le&&ke,ue&&Se,q&&He),J=Ae||xe?p.pI.dim:void 0,ae=(0,n.A)(K,"c-member","c-member--medium",{"c-member--with-presence":ne}),Ve=(0,t.useCallback)(Be=>j&&(ge?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(g.A,{name:"edit"})):t.createElement(u.Ay,O({},Be,{size:p.RG.medium,userId:b,"data-qa":"member-entity__avatar",isInteractive:!1}))),[j,ge,b]);return t.createElement(v.A,{avatar:Ve,className:ae,size:"medium",style:J,text:Ye,subtext:ee&&(Z||Ce),metadata:!Ae&&Ue,"data-qa":k,"data-sk":Q,forwardedRef:se})}c(R,"MediumMemberEntity"),R.displayName="MediumMemberEntity";function L(B,K){let{id:b,isDraftContext:S,member:G,showStatus:H}=K;const U=G||(0,C.nv)(B,b);let F=!1;if(S&&b){const Z=(0,T.Pu)(B,b);F=!!(Z&&(0,l.yc)(B,Z.id))}const Y=b||(U==null?void 0:U.id);return{id:Y,member:U??void 0,memberPrimaryName:(0,r.sE)(B,U,!1,!1),memberSecondaryName:(0,a.Mu)(B,U),showDraftIcon:F,showStatus:H&&(0,o.aH)(U),isUserHidden:!!Y&&(0,D.a)(B,Y)}}c(L,"mapStateToProps");const V=(0,M.N)(L)(R)},1681415537:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(9438480351),i=e(5658567578),l=e(2828836153),o=e(3877384923),a=e(2762351398),r=e(9391594207),d=e(8276911661);function u(){return u=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}return f},u.apply(this,arguments)}c(u,"_extends");let _=c(class extends t.Component{render(){const{className:I,isActive:p=!1,isDeactivated:y=!1,isDisabled:g=!1,secondaryContent:E,secondaryContentPosition:M=i.lP.right,showUnreadCount:T=!1,showStatus:D,showPresence:C,useShortMode:m=!1,showHoverCard:O,forwardedRef:P,unreadCount:R,ariaLabel:L}=this.props,V=T&&R&&t.createElement(a.Ay,{className:"c-member__unread_count",count:R,style:a.rY.red}),B=E&&t.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},E),K=(M===i.lP.right&&B||V)&&t.createElement("span",{className:"c-member__secondary_content"},M===i.lP.right&&B,V),b=(0,n.A)(I,"c-medium_member_list_entity");let S;return p?g||y?S=o.pI.highlightDim:S=o.pI.highlightLight:(g||y)&&(S=o.pI.dim),t.createElement(l.A,{"data-qa":"medium_member_list_entity",className:b,style:S,primaryContent:t.createElement(i.Ay,u({},this.props,{secondaryContent:M===i.lP.right?null:E,showStatus:D,showPresence:C,showHoverCard:O,useShortMode:m,forwardedRef:P})),secondaryContent:K,size:"medium",ariaLabel:L})}},"MediumMemberListEntity");_.displayName="MediumMemberListEntity";function v(f,I){let{id:p}=I;const y=(0,d.nv)(f,p);return{member:y??void 0,unreadCount:(0,s.A)(f,y)}}c(v,"mapStateToProps");const h=(0,r.N)(v,null,null,{forwardRef:!0})(_)},6216960938:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>Y,Cg:()=>G});var t=e(3134334389),n=e(5255740490),s=e(3750057149),i=e(7278430876),l=e(3037015781),o=e(9884588328),a=e(8170643398),r=e(9438480351),d=e(9262712126),u=e(4562579337),_=e(4587082424),v=e(5096647761),h=e(6536982570),f=e(4775127335),I=e(479227507),p=e(5273017660),y=e(3534100833),g=e(3877384923),E=e(2762351398),M=e(8028620372),T=e(9828955991),D=e(8683010724),C=e(5484624422),m=e(735940183),O=e(9391594207),P=e(9101533895),R=e(4761125736),L=e(5761207079),V=e(8276911661),B=e(3146663623),K=e(5624319675);function b(){return b=Object.assign||function(Z){for(var ee=1;ee<arguments.length;ee++){var j=arguments[ee];for(var ge in j)Object.prototype.hasOwnProperty.call(j,ge)&&(Z[ge]=j[ge])}return Z},b.apply(this,arguments)}c(b,"_extends");const S=20,G=16,H=new m.Ay("members");function U(Z){const{className:ee,id:j,invert:ge=!1,member:ne,teamId:ue,showAvatar:he=!0,showDraftIcon:be=!1,showPresence:xe=!0,showBadge:Le=!0,showStatus:fe=!0,showTooltip:se=!0,showUnreadCount:Q=!1,showDeactivated:k=!0,showAppOrBotBadge:N=!0,isDeactivated:$=!1,unreadCount:W,useShortMode:q=!1,forceRealName:re=!1,tokenSize:le,truncateStatus:Ae=!1,withTruncationTooltip:Te,"data-sk":Ne="small_member_entity","data-qa":pe="small_member_entity",isBold:Ee,experimentSidebarPrefsApplyToMenusGroupOn:oe=!1,isUserHidden:ce=!1,hasNoAccess:ke=!1,forceAvatarPresenceIndicator:Ce=!1,isAiApp:Me=!1,experimentAgentforceGroupOn:Se=!1}=Z,Ue=(0,u.A)(ne),He=(0,a.v3)(ne),Ye=(0,a.oy)(ne),J=(0,v.g)(ne),ae=(0,a.fy)(ne),Ve=(0,a.hh)(ne),Be=(0,l.lv)(ne),Ke=(0,l.mX)(ne),Re=Be||Ke,Fe=ge&&!$,Ie=k&&Ye,ze=(0,d.wg)(ne),qe=(0,d.Fh)(ne);let st,ut;ce?(st=H.t("Name hidden"),ut=H.t("Name hidden")):re||!qe?(st=ze,ut=qe):(st=qe,ut=ze);const tt=t.createElement(I.A,{"data-qa":"member-entity__primary-name",className:"c-member__member-name",name:st,invert:Fe,isAppOrBot:Ue,isWorkflowBot:He,isDeleted:Ie,isSelf:ae,isNonExistent:Be,isUnknown:Ke,withTruncationTooltip:Te,isBold:Ee,isAiApp:Se&&Me,showAppOrBotBadge:N}),_t=!ce&&!Ve&&t.createElement(y.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},ut),yt=(0,t.useMemo)(()=>!ce&&!Ye&&!Ve&&t.createElement(T.Ay,{memberId:j||(ne==null?void 0:ne.id),className:"c-member__presence",invert:Fe,inline:!1}),[ce,Ye,Ve,j,Fe,ne]),Kt=(0,t.useCallback)(Ot=>he?ce?t.createElement("span",{className:"c-search_autocomplete__hidden_member_icon "},t.createElement(D.A,{size:"20",name:"user-hide"})):Re?t.createElement(M.A,b({},Ot,{"data-qa":"member-entity__missing",isNonExistent:Be,size:S})):be?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(D.A,{name:"edit"})):t.createElement(f.Ay,b({},Ot,{"data-qa":"member-entity__avatar",size:g.RG.small,userId:j,user:ne,showBadge:Le,tabIndex:-1,isInteractive:!1,tokenSize:le,hasNoAccess:ke,showPresence:Ce})):xe&&oe?yt:null,[he,j,Be,Re,ne,le,be,ce,yt,xe,Le,oe,ke,Ce]),Qt=J&&t.createElement(C.A,b({},Z,{"data-qa":"member-entity__team-icon",id:ue,size:G,className:"c-member__team_icon"})),Jt=t.createElement(i.A,{memberId:j||"",tooltip:se,animated:q,className:(0,n.A)("c-member__current-status","c-member__current-status--small",{overflow_ellipsis:Ae}),"data-qa":"member-entity__status"}),Gt=Q&&!!W&&t.createElement(E.Ay,{className:"c-member__unread_count",count:W,style:Fe?"white":"red","data-qa":"member-entity__mention-badge"}),wt=t.createElement("span",{className:"c-member__primary_content"},tt,xe&&!Re&&he&&yt,!q&&_t,fe&&Jt),Bt=(Qt||Gt)&&t.createElement("span",{className:"c-member__secondary_content"},Qt,Gt),Wt=Ye&&!ge?g.pI.dim:void 0,Tn=(0,n.A)(ee,"c-member","c-member--small",{"c-member--with-presence":xe,"c-member--deleted":Ye,"c-base_entity--dim":ce});return t.createElement(p.Ay,{avatar:Kt,className:Tn,text:wt,size:"small",style:Wt,subtext:Bt,"data-qa":pe,"data-sk":Ne})}c(U,"SmallMemberEntity"),U.displayName="SmallMemberEntity";function F(Z,ee){let{forceRealName:j,member:ge,id:ne,isDraftContext:ue,showStatus:he,onlyBoldIfUnread:be,useShortMode:xe,neverBold:Le}=ee;const fe=ge||(0,V.nv)(Z,ne);let se;const Q=ne||(fe==null?void 0:fe.id);Q&&(ue||be)&&(se=(0,P.Pu)(Z,Q));const k=(0,L.a)(Z,Q);let N=!0;k?N=!!xe:be?N=!!(se&&(0,o.KJ)(se)):Le&&(N=!1);let $;return ue&&($=!!(se&&(0,o.yc)(Z,se.id))),{id:ne||(fe==null?void 0:fe.id),member:fe??void 0,teamId:(0,h.Ux)(Z,fe),forceRealName:(0,s.A)(j)?j:(0,B.E)(Z),unreadCount:(0,r.A)(Z,fe),showDraftIcon:$,showStatus:he&&(0,a.aH)(fe),isBold:N,experimentSidebarPrefsApplyToMenusGroupOn:(0,R._Z)(Z,"sidebar_prefs_apply_to_menus")==="on",isUserHidden:k,isAiApp:(0,_.iX)(Z,fe==null?void 0:fe.id),experimentAgentforceGroupOn:(0,K.mr)(Z)}}c(F,"mapStateToProps");const Y=(0,O.N)(F)(U)},5882561377:(x,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(6216960938),i=e(2828836153),l=e(3877384923);function o(){return o=Object.assign||function(d){for(var u=1;u<arguments.length;u++){var _=arguments[u];for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(d[v]=_[v])}return d},o.apply(this,arguments)}c(o,"_extends");let a=c(class extends t.Component{render(){const{className:u,id:_,isActive:v=!1,isDeactivated:h=!1,isDisabled:f=!1,isDraftContext:I,showAvatar:p,showBadge:y,showPresence:g,showAppOrBotBadge:E,showStatus:M,showTooltip:T,withTruncationTooltip:D,showUnreadCount:C,useShortMode:m,secondaryContent:O,onlyBoldIfUnread:P=!1,forceRealName:R,hasNoAccess:L,forceAvatarPresenceIndicator:V,removePadding:B}=this.props;let K;return v?f||h?K=l.pI.highlightDim:K=l.pI.highlightDark:(f||h)&&(K=l.pI.dim),t.createElement(i.A,{className:(0,n.A)(u,"c-small_member_list_entity"),primaryContent:t.createElement(s.Ay,o({id:_,invert:K===l.pI.highlightDark,isDeactivated:h,truncateStatus:!!O,showAvatar:p,showPresence:g,showBadge:y,showAppOrBotBadge:E,useShortMode:m,showStatus:M,showTooltip:T,withTruncationTooltip:D,showUnreadCount:C,isDraftContext:I,onlyBoldIfUnread:P,forceRealName:R,hasNoAccess:L,forceAvatarPresenceIndicator:V},this.props)),secondaryContent:O,size:"small",style:K,padding:B?l.FK.none:l.FK.normal})}},"SmallMemberListEntity");a.displayName="SmallMemberListEntity";const r=a},479227507:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(9509635375),i=e(5273017660),l=e(3229001818),o=e(4518138713),a=e(5734745215),r=e(2562405183),d=e(4761125736);function u(){return u=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}return f},u.apply(this,arguments)}c(u,"_extends");const _=new a.Ay("inline_member");function v(f){const{className:I,multiline:p=!1,inline:y=!1,invert:g=!1,name:E,isSelf:M=!1,isAppOrBot:T=!1,isWorkflowBot:D=!1,showAppOrBotBadge:C=!0,isDeleted:m=!1,isUnknown:O=!1,isNonExistent:P=!1,withTruncationTooltip:R=!1,isBold:L=!0,isUserHidden:V=!1,isChannelFiles:B=!1,isCreator:K=!1,showMemberNameIfHidden:b=!1,showBadgeOnTextTruncation:S,isAiApp:G=!1}=f,H=(0,r.d4)(ee=>(0,d._Z)(ee,"member_name_channel_files_view_two")==="on");let U;if(O||P)U=t.createElement(l.A,{type:P?"non-existent":"unknown","data-qa":"member_name__missing"});else if(V&&!b)U=_.t("Name hidden");else if(B){const ee=H?_.rt("Created by {name}",{name:E}):`Created by ${E}`;U=K?ee:_.rt("Shared by {name}",{name:E})}else U=E;const F=(0,n.A)(I,"c-member_name",{"c-member_name--deactivated":m,"c-member_name--inverted":g}),Y=L?"strong":"span",Z=(T||D)&&C;return t.createElement(i.CG,u({className:F,multiline:p,inline:y,withTruncationTooltip:R},(0,o.A)(f)),t.createElement(Y,{className:(0,n.A)({"c-member_name__container":Z&&S}),"data-qa":"member_name"},Z&&S?t.createElement("span",{className:"c-member_name__text"},U):U,M&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__you"},_.t("(you)")),m&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__deactivated"},_.t("(deactivated)")),Z&&t.createElement(s.A,{className:"c-member_name__indicator","data-qa":"member_name__app",inverse:g,isWorkflow:D,isAiApp:G})))}c(v,"MemberName"),v.displayName="MemberName";const h=v},2704661e3:(x,A,e)=>{"use strict";e.d(A,{A:()=>he});var t=e(3134334389),n=e(5255740490),s=e(3297051565),i=e.n(s),l=e(2562405183),o=e(5795074931),a=e(6989432693),r=e(735940183);const d=new r.Ay("channel_token"),u=10,_=c(be=>{let{memberIds:xe}=be;var Le;const fe=(Le=(0,l.d4)(o.WR))!==null&&Le!==void 0?Le:void 0;let se=xe.map((Q,k)=>t.createElement(a.A,{key:Q,userId:Q,isFirst:k===0,isSelf:fe===Q}));return xe.length>u+1&&(se=se.slice(0,u).concat(d.rt("{count} others",{count:xe.length-u}))),t.createElement(t.Fragment,null,(0,r.jd)(se))},"TooltipMemberNames");_.displayName="TooltipMemberNames";const v=_;var h=e(3037015781),f=e(9884588328),I=e(4775127335),p=e(3330998079),y=e(8170643398),g=e(3534324375),E=e(4562579337),M=e(479227507),T=e(3877384923),D=e(8028620372),C=e(9391594207),m=e(8276911661);const O=20,P={id:i().string.isRequired,invert:i().bool,isDeactivated:i().bool,isHidden:i().bool,member:i().object,memberPrimaryName:i().string},R={member:void 0,memberPrimaryName:void 0,invert:!1,isDeactivated:!1,isHidden:!1},L=t.forwardRef((be,xe)=>{const{id:Le,invert:fe,member:se,memberPrimaryName:Q,isDeactivated:k,isHidden:N}=be,$=(0,E.A)(se),W=(0,y.v3)(se),q=(0,y.oy)(se),re=(0,h.lv)(se),le=(0,h.mX)(se),Ae=re||le,Te=fe&&!k,Ne=t.createElement(M.A,{"data-qa":"mpim-entity__name",name:Q,invert:Te,isAppOrBot:$,isWorkflowBot:W,isDeleted:q,isNonExistent:re,isUnknown:le});let pe;Ae?pe=t.createElement(D.A,{isNonExistent:re,size:O}):pe=t.createElement(I.Ay,{className:"c-small_mpim_entity__member_avatar","data-qa":"mpim-entity__avatar",size:T.RG.small,userId:Le,tabIndex:-1,isInteractive:!1});const Ee=(0,n.A)("c-small_mpim_entity__member",{"c-small_mpim_entity__member--deleted":q,"c-small_mpim_entity__member--hidden":N});return t.createElement("div",{className:Ee,"data-id":Le,ref:xe},pe,Ne)});L.propTypes=P,L.defaultProps=R;function V(be,xe){let{id:Le}=xe;const fe=(0,m.nv)(be,Le);return{member:fe,memberPrimaryName:(0,g.sE)(be,fe,!1,!1)}}c(V,"mapStateToProps");const B=(0,C.N)(V,null,null,{forwardRef:!0})(L);var K=e(5273017660),b=e(2762351398),S=e(2312625946),G=e(8170659516),H=e(3852424459),U=e(9101533895),F=e(3328068409),Y=e(4761125736);function Z(){return Z=Object.assign||function(be){for(var xe=1;xe<arguments.length;xe++){var Le=arguments[xe];for(var fe in Le)Object.prototype.hasOwnProperty.call(Le,fe)&&(be[fe]=Le[fe])}return be},Z.apply(this,arguments)}c(Z,"_extends");const ee=T.RG.small,j={className:i().string,"data-qa":i().string,"data-sk":i().string,mpim:i().object,id:i().string,invert:i().bool,isDeactivated:i().bool,memberIds:i().array,isActive:i().bool,clientTheme:i().oneOf(["light","dark"]),matchData:i().array,onlyBoldIfUnread:i().bool,showUnreadBadge:i().bool,unreadCount:i().number,shortenTooltipContents:i().bool,showAvatar:i().bool,experimentSidebarPrefsApplyToMenusGroupOn:i().bool,tooltipPosition:i().string},ge={className:void 0,"data-qa":void 0,"data-sk":"small_mpim_entity",mpim:void 0,id:void 0,invert:!1,isDeactivated:!1,memberIds:[],isActive:!1,clientTheme:"light",matchData:[],onlyBoldIfUnread:!1,showUnreadBadge:!1,unreadCount:0,shortenTooltipContents:!1,showAvatar:!0,experimentSidebarPrefsApplyToMenusGroupOn:!1,tooltipPosition:"top-right"};function ne(be){let{className:xe,"data-qa":Le,"data-sk":fe,id:se,invert:Q,isDeactivated:k,mpim:N,memberIds:$,isActive:W,clientTheme:q,matchData:re,onlyBoldIfUnread:le,showUnreadBadge:Ae,unreadCount:Te,shortenTooltipContents:Ne,showAvatar:pe,experimentSidebarPrefsApplyToMenusGroupOn:Ee,tooltipPosition:oe}=be;const ce=(0,h.lv)(N),ke=(0,h.mX)(N),Ce=(0,f.N4)(N),Me=se||(N==null?void 0:N.id),Se=Q&&!k,Ue=Ae&&!!Te&&t.createElement(b.Ay,{className:"c-member__unread_count",count:Te,style:Se?"white":"red","data-qa":"member-entity__mention-badge"}),He=Ue&&t.createElement("span",{className:"c-member__secondary_content"},Ue),Ye=(0,t.useCallback)(Be=>{if(ce||ke)return t.createElement(D.A,Z({},Be,{isNonExistent:ce,size:ee,invert:Se}));const Ke=$==null?void 0:$[0];return t.createElement("span",{className:(0,n.A)("c-small_mpim_entity__mpim_avatars","c-small_mpim_entity__count",xe,{"c-small_mpim_entity__mpim_avatars--inverted":Se,[`c-small_mpim_entity__mpim_avatars--${q}`]:q!=="light"})},pe&&t.createElement(I.Ay,{userId:Ke,className:"c-small_mpim_entity__mpim_avatars_mpim1",size:14,isInteractive:!1,"data-qa":"small-mpim-entity-mpim-avatar"}),t.createElement("div",{className:(0,n.A)("c-small_mpim_entity__mpim_counter",{"c-small_mpim_entity__mpim_counter--count-only":!pe&&Ee}),"data-qa":"small-mpim-entity-mpim-counter"},t.createElement("div",{"aria-hidden":!0,className:"c-small_mpim_entity__mpim_counter_inner"},Ce)))},[xe,q,ce,ke,Ce,Se,$,pe,Ee]),J=(0,t.useCallback)(()=>{let Be;return Ne?Be=t.createElement(v,{memberIds:$}):Be=$.map(Ke=>t.createElement(B,{id:Ke,key:Ke})),t.createElement(t.Fragment,null,Be)},[$,Ne]);let ae=k?T.pI.dim:null;Se&&(ae=T.pI.highlightDark);const Ve=t.createElement(K.Ay,{"data-id":Me,"data-qa":Le,"data-sk":fe,avatar:Ye,className:xe,size:"small",style:ae,subtext:He,text:t.createElement(p.A,{"data-qa":"name",id:Me,mpim:N,invert:Se,matchData:re,onlyBoldIfUnread:le})});return t.createElement(S.Ay,{tip:J(),tipClassName:Ne?"":"c-small_mpim_entity__tooltip",position:oe,shouldForceVisible:W,shouldOnlyShowWhenTruncated:W,zIndex:"above_fs"},t.createElement("div",null,Ve))}c(ne,"SmallMpimEntity"),ne.displayName="SmallMpimEntity",ne.propTypes=j,ne.defaultProps=ge;function ue(be,xe){let{id:Le,mpim:fe,matchData:se}=xe;const Q=fe||(0,U.OL)(be,Le),k=(0,H.B)(be,Le),N=(0,Y._Z)(be,"sidebar_prefs_apply_to_menus")==="on",$=(0,G.A)({state:be,mpim:Q,matchData:se}),W=(0,F.to)(be),q=(0,f.kR)(Q,k);return{mpim:Q,experimentSidebarPrefsApplyToMenusGroupOn:N,memberIds:$,clientTheme:W,unreadCount:q}}c(ue,"small_mpim_entity_mapStateToProps");const he=(0,C.N)(ue)(ne)},3330998079:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(3134334389),n=e(9867500491),s=e(1703559452),i=e(3297051565),l=e.n(i),o=e(3037015781),a=e(9884588328),r=e(5273017660),d=e(7026348746),u=e(8170659516),_=e(9391594207),v=e(9101533895),h=e(8276911661);const f=4,I={className:l().string,mpim:l().object,multiline:l().bool,name:l().string,isAnyMemberUnknown:l().bool,invert:l().bool,inline:l().bool,onlyBoldIfUnread:l().bool},p={className:void 0,mpim:void 0,multiline:!1,name:void 0,isAnyMemberUnknown:!1,invert:!1,inline:void 0,onlyBoldIfUnread:!1};function y(M){let{className:T,mpim:D,multiline:C,name:m,invert:O,isAnyMemberUnknown:P,inline:R,onlyBoldIfUnread:L}=M;const V=(0,o.lv)(D),B=(0,o.mX)(D),K=(0,a.N4)(D),b=!L||(0,a.KJ)(D);let S;return B||V||P?S=(0,n.A)(K||f).map(G=>t.createElement(d.A,{key:G,className:"c-mpim_entity__missing_text",isNonExistent:V,size:"random",invert:O})):S=b?t.createElement("strong",{"data-qa":"mpim_name"},m):t.createElement("span",{"data-qa":"mpim_name"},m),t.createElement(r.CG,{className:T,multiline:C,breakWords:!1,inline:R},S)}c(y,"MpimName"),y.displayName="MpimName",y.propTypes=I,y.defaultProps=p;const g=c((M,T)=>{let{id:D,mpim:C,matchData:m}=T;const O=C||(0,v.OL)(M,D),P=(0,u.A)({state:M,mpim:O,matchData:m}),R=P&&P.map(B=>(0,h.nv)(M,B)),L=(0,s.A)(R,o.GU),V=(0,a.Xx)(M,O,P);return{mpim:O,name:V,isAnyMemberUnknown:L}},"mapStateToProps"),E=(0,_.N)(g)(y)},2966224896:(x,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(5255740490),s=e(6839188756),i=e(2023092677),l=e(5273017660),o=e(3877384923),a=e(4816967449),r=e(8683010724),d=e(735940183),u=e(9391594207),_=e(8847766420),v=e(3677514771),h=e(1835177371);function f(){return f=Object.assign||function(E){for(var M=1;M<arguments.length;M++){var T=arguments[M];for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(E[D]=T[D])}return E},f.apply(this,arguments)}c(f,"_extends");const I=new d.Ay("user_group_entity");function p(E){let{className:M,invert:T,showDescription:D=!0,userGroup:C,userGroupTeamName:m,isDeactivated:O}=E;const P=O||!(0,i.V1)(C),R=(0,t.useCallback)(G=>t.createElement("span",{className:"margin_right_50"},t.createElement(r.A,f({},G,{name:"user-groups",size:"18"}))),[]);if((0,i.t8)(C)||(0,i.QR)(C)){const G=(0,n.A)("c-small_user_group__missing_icon",{"c-small_user_group__missing_icon--inverted":T});return t.createElement("div",{className:"c-small_user_group__missing"},t.createElement("div",{className:G},t.createElement(r.A,{name:"user-groups",size:"18"})),t.createElement(a.A,{type:(0,i.t8)(C)?"unknown":"non-existent",invert:T}))}const L=(0,i.ue)(C),V=t.createElement("span",{className:"c-user_group__name c-small_user_group__name"},L),B=(0,i.Br)(C),K=m&&t.createElement(t.Fragment,null,"\xA0\xA0",t.createElement("span",{className:"c-small_user_group__team"},m)),b=t.createElement(t.Fragment,null,t.createElement("span",{className:"c-small_user_group__count"},"(",I.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:B}),")"),K);let S;return P?S=o.pI.dim:T&&(S=o.pI.highlightDark),t.createElement(l.Ay,{avatar:R,className:M,size:"small",style:S,text:t.createElement(l.CG,null,V,D&&b),"data-usergroup-id":C.id})}c(p,"SmallUserGroupEntity"),p.displayName="SmallUserGroupEntity";const y=c((E,M)=>{let{id:T,userGroup:D}=M;const C=D||(0,h.lJ)(E,T),m=(0,_.ZT)(E),O=(0,i.$Q)(C),P=O!==m&&(0,s.F1)((0,v._J)(E,O));return{userGroup:C,userGroupTeamName:P}},"mapStateToProps"),g=(0,u.N)(y)(p)},4931940375:(x,A,e)=>{"use strict";e.d(A,{A:()=>Q});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(4481313819),l=e(307717037),o=e(2208015175),a=e(2664504268),r=e(4250078557),d=e(3207321841),u=e(5602423845),_=e(8157829725),v=e(7937864072),h=e(5204962244),f=e(6308822),I=e(1224315998),p=e(735940183),y=e(2562405183),g=e(2047021170);const E=new p.Ay("slack_kit_video"),T=(0,t.forwardRef)((k,N)=>{let{src:$,vtt:W,videoPoster:q,title:re,label:le,autoPlay:Ae=!0,enableMediaCaptions:Te,onLoadedMetadata:Ne,isLoading:pe,setIsLoading:Ee,isPlaying:oe,setIsPlaying:ce,duration:ke,setDuration:Ce,setElapsed:Me,enableControls:Se=!1,controlsList:Ue,shiftCaptionsUp:He,setHasError:Ye,videoContainerClassName:J}=k;const ae=(0,v.A)(),Ve=(0,u.A)(),Be=(0,t.useRef)(null),Ke=(0,h.d)(a.A),[Re,Fe]=(0,t.useState)(!1),Ie=(0,t.useRef)(),ze=(0,t.useRef)(0),[qe,st]=(0,t.useState)(null),ut=(0,y.d4)(Xt=>(0,g.ty)(Xt,"media_muted"));var tt;const _t=(tt=(0,y.d4)(Xt=>(0,g.ty)(Xt,"media_volume")))!==null&&tt!==void 0?tt:1,yt=(0,y.d4)(Xt=>(0,g.ty)(Xt,"media_playback_speed")),Kt=(0,t.useRef)({});(0,t.useEffect)(()=>{Be.current&&qe&&(Kt.current={file_src:qe,media_type:"video",duration_ms:ke*1e3,playback_session:Ke,title:re})},[Ke,qe,re,ke]),(0,t.useEffect)(()=>{fetch($).then(Xt=>Xt.blob()).then(Xt=>{const vn=URL.createObjectURL(Xt);st(vn)}).catch(Xt=>{ae.error(`Video player err: ${Xt}`),Ye(!0)})},[ae,Ye,st,$]);const Qt=(0,t.useRef)(!1),Jt=(0,t.useCallback)(()=>{!Qt.current&&Re&&(Ie.current&&(ze.current+=Date.now()-Ie.current,Ie.current=void 0),Ve.track(I.EventId.SK_VIDEO_PLAYER,(0,l.A)({},Kt.current,{contexts:{ui_context:{action:"impression",ui_properties:{element_type:"video",element_name:"playback_finished"}}},closed_captions:Te?"on":"off",playback_speed:`${yt??1}x`,duration_watched_ms:ze.current})),Qt.current=!0,ze.current=0)},[Ve,Re,Te,yt]),Gt=(0,t.useRef)(Jt);Gt.current=Jt,(0,_.A)(()=>()=>Gt.current(),[]);const wt=(0,t.useCallback)(()=>{Jt()},[Jt]);(0,t.useEffect)(()=>{if(!Be.current)return;const Xt=c(()=>{oe&&ce(!1),Ee(!0)},"onWaiting"),vn=c(()=>{Ee(!1),ce(!0),Ve.track(I.EventId.SK_VIDEO_PLAYER,(0,l.A)({},Kt.current,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"play"}}}})),Re||(Fe(!0),Ve.track(I.EventId.SK_VIDEO_PLAYER,(0,l.A)({},Kt.current,{contexts:{ui_context:{action:"impression",ui_properties:{element_name:"media"}}}}))),Ie.current=Date.now()},"onPlay"),je=c(()=>{ce(!1),Ee(!1),Ve.track(I.EventId.MEDIA_PLAYER,(0,l.A)({},Kt.current,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"pause"}}}})),Ie.current&&(ze.current+=Date.now()-Ie.current,Ie.current=void 0)},"onPause"),Rt=Be.current,hn=c(()=>{if(!Rt.buffered)return;const vt=Rt.duration||0;Ce(vt)},"onProgress"),Nn=c(()=>{Ee(!1);const vt=Rt.duration;Ce(vt),Me(Rt.currentTime)},"onTimeUpdate"),rt=c(()=>{const vt=Rt.playbackRate;d.Cv.includes(vt)&&(Rt.playbackRate=vt)},"handleRateChange");return Rt.addEventListener("waiting",Xt),Rt.addEventListener("progress",hn),Rt.addEventListener("timeupdate",Nn),Rt.addEventListener("play",vn),Rt.addEventListener("playing",vn),Rt.addEventListener("pause",je),Rt.addEventListener("ratechange",rt),Rt.addEventListener("ended",wt),()=>{Rt.addEventListener("waiting",Xt),Rt.removeEventListener("progress",hn),Rt.removeEventListener("timeupdate",Nn),Rt.removeEventListener("play",vn),Rt.removeEventListener("playing",vn),Rt.removeEventListener("pause",je),Rt.removeEventListener("ratechange",rt),Rt.removeEventListener("ended",wt)}},[Be,pe,oe,Ce,Ee,Me,ce,Re,Fe,wt,Ve]),(0,t.useEffect)(()=>{var Xt;const vn=(Xt=Be.current)===null||Xt===void 0?void 0:Xt.textTracks[0];vn&&(vn.mode=Te?"showing":"hidden")},[Te]),(0,t.useEffect)(()=>{if(Te){var Xt,vn;const je=(Xt=Be.current)===null||Xt===void 0?void 0:Xt.textTracks[0];if(!je)return;const Rt=((vn=Be.current)===null||vn===void 0?void 0:vn.clientWidth)<500?50:80;je.mode="hidden",He?(0,o.A)(je==null?void 0:je.cues,hn=>{(hn.text.match(/\n/g)||[]).length>=2||hn.text.length>Rt?hn.line=-6:hn.line=-5}):(0,o.A)(je==null?void 0:je.cues,hn=>{hn.line="auto"}),je.mode="showing"}},[Te,He]);const Bt=(0,t.useCallback)(function(Xt){let vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Be!=null&&Be.current&&(Be.current.currentTime=Xt,vn&&Be.current.play())},[Be]),Wt=(0,t.useCallback)(()=>{Be!=null&&Be.current&&(Be.current.paused?Be.current.play():Be.current.pause())},[Be]),Tn=(0,t.useCallback)(()=>{var Xt;Be!=null&&Be.current&&((Xt=Be.current)===null||Xt===void 0||Xt.pause())},[Be]),Ot=(0,t.useCallback)(Xt=>{Be!=null&&Be.current&&(Be.current.muted=Xt)},[Be]),Ft=(0,t.useCallback)(Xt=>{Be!=null&&Be.current&&(Be.current.volume=Xt)},[Be]),rn=(0,t.useCallback)(Xt=>{Be!=null&&Be.current&&d.Cv.includes(Xt)&&(Be.current.playbackRate=Xt)},[Be]);(0,t.useImperativeHandle)(N,()=>({setCurrentTime:Bt,togglePlayPause:Wt,setMuted:Ot,setVolume:Ft,setPlaybackRate:rn,pause:Tn})),(0,t.useEffect)(()=>{ut&&Ot(ut),_t&&Ft(_t),yt&&!Se&&rn(yt)});const ln=(0,t.useCallback)(()=>{var Xt;const vn=(Xt=Be.current)===null||Xt===void 0?void 0:Xt.error;vn&&(Ye(!0),ae.error(`error code: ${vn.code}, msg: ${vn.message}`))},[Be,ae,Ye]),_n=(0,t.useCallback)(()=>{Ee(!1)},[Ee]),en=(0,n.A)("c-video_player-video-container",J);return t.createElement("div",{className:en,"data-media-focus-container":!0,tabIndex:-1},pe&&t.createElement("div",{className:"c-video_player-video-container_spinner"},t.createElement(f.A,{color:"white"})),t.createElement("video",{preload:"auto",autoPlay:Ae,"aria-label":le,className:"c-video_player-video",controls:Se&&!pe?!0:void 0,controlsList:Se?Ue:void 0,title:re,ref:Be,poster:q,disablePictureInPicture:!0,onLoadedMetadata:Ne,onCanPlay:_n,onError:ln},qe&&t.createElement("source",{src:qe,type:"video/mp4"}),E.t("Your browser does not support the video tag"),W&&t.createElement(r.A,{vtt:W,enableMediaCaptions:Te})))});var D=e(5460331959),C=e(3118200703),m=e(8371678613),O=e(3242899446),P=e(4916948857),R=e(3749524846),L=e(6084388622),V=e(6122756707),B=e(9362126998),K=e(2036354333),b=e(5946832122),S=e(8683010724),G=e(2312625946),H=e(387484329);const U=new p.Ay("video_player"),F=c(k=>{let{vtt:N,isInlinePlayer:$,className:W,backgroundStyle:q}=k;const re=(0,V.wA)(),le=(0,y.d4)(oe=>(0,g.ty)(oe,"enable_media_captions")),Ae=(0,y.d4)(B.y0),Te=(0,t.useCallback)(()=>{re((0,H.AZ)({pref:"enable_media_captions",value:!le}))},[re,le]),Ne=le&&N?U.t("Turn off captions",{fallbackHash:"c344bd39683fc6566ab53b0d886e93230fd21cbf",fallbackHashNs:"stories_av"}):U.t("Turn on captions",{fallbackHash:"6761b8af97254fcb93590208ff4ee1f03481c900",fallbackHashNs:"stories_av"}),pe=U.t("Display captions",{fallbackHash:"6761b8af97254fcb93590208ff4ee1f03481c900",fallbackHashNs:"stories_av"});if(!Ae)return null;const Ee=le?t.createElement(S.A,{name:"closed-caption",variation:"filled",size:"inherit"}):t.createElement(S.A,{name:"closed-caption",size:"inherit"});return t.createElement(G.Ay,{tip:Ne,position:"top",delay:G.n1,hideFromScreenReader:!0},$?t.createElement(K.A,{className:(0,n.A)("c-video_controls_overlay__controls__button c-video_controls_overlay__controls__caption"),"aria-label":pe,"aria-pressed":le,onClick:Te},Ee):t.createElement(b.A,{"aria-label":pe,"aria-pressed":le,icon:le?"cc-filled":"cc",onClick:Te,size:"medium",className:W,backgroundStyle:q},"CC"))},"VideoCaptionsButton");F.displayName="VideoCaptionsButton";const Y=F;var Z=e(5874162200),ee=e(9446966957);function j(){return j=Object.assign||function(k){for(var N=1;N<arguments.length;N++){var $=arguments[N];for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&(k[W]=$[W])}return k},j.apply(this,arguments)}c(j,"_extends");const ge=new p.Ay("video_scrubber"),ne=c(k=>{let{elapsed:N,duration:$,setTime:W}=k;const q=(0,t.useRef)(null);(0,t.useEffect)(()=>{var Te;(Te=q.current)===null||Te===void 0||Te.toggleAttribute("data-no-drag-on-mouse-move",!0)},[q]);const re=(0,t.useCallback)(Te=>t.createElement("div",j({className:"c-video_player_controls_scrubber c-video_player_controls_overlay__hover",ref:q},Te)),[]),le=(0,t.useCallback)(Te=>t.createElement("div",j({className:"c-video_player_controls_scrubber__track"},Te)),[]),Ae=(0,t.useCallback)(Te=>t.createElement("div",j({className:"c-video_player_controls_scrubber__elapsed"},Te)),[]);return t.createElement(ee.A,{value:N,max:$,onChange:W,renderContainer:re,renderTrack:le,renderInner:Ae,"aria-label":ge.t("Time scrubber",{currentTime:(0,Z.A)(N),totalTime:(0,Z.A)($),fallbackHash:"638b3954642581b284074f5e0f0f6dd701690df1",fallbackHashNs:"stories_av"}),"aria-valuetext":(0,Z.A)(N)})},"VideoControlsScrubber");ne.displayName="VideoControlsScrubber";const ue=ne;var he=e(5034080361);const be=new p.Ay("slack_kit_video"),xe=c(k=>{let{onClickOverlay:N,showControls:$=!0,duration:W,elapsed:q,setTime:re,isPlaying:le,isLoading:Ae,videoRef:Te,vtt:Ne,setShiftCaptionsUp:pe=s.A,onFullscreenButtonClicked:Ee,isFullScreen:oe}=k;const ce=(0,t.useContext)(R.A),[ke,Ce]=(0,t.useState)(!1),[Me,Se]=(0,t.useState)(!1),Ue=(0,t.useRef)(null),He=(0,t.useRef)(null),Ye=le?be.t("Pause",{fallbackHash:"781961bc81c25697841ecce5d4d9dad9f6b261c6",fallbackHashNs:"stories_av"}):be.t("Play",{fallbackHash:"5d12bd53552cafc41ca6146c04870df2e1574e13",fallbackHashNs:"stories_av"}),J=(0,t.useCallback)(st=>{var ut,tt;const _t=st.target,yt=!!(ce&&(!((ut=Ue.current)===null||ut===void 0)&&ut.contains(_t)||!((tt=He.current)===null||tt===void 0)&&tt.contains(_t)));Se(yt)},[ce]),ae=(0,t.useCallback)(st=>{var ut,tt;const _t=st.relatedTarget,yt=!!(ce&&(!((ut=Ue.current)===null||ut===void 0)&&ut.contains(_t)||!((tt=He.current)===null||tt===void 0)&&tt.contains(_t)));Se(yt)},[ce]),{mouseIsOverElement:Ve,onMouseLeave:Be,onMouseEnter:Ke,onMouseMove:Re,onMouseOver:Fe}=(0,P.A)(),Ie=(0,t.useCallback)(()=>{Ke()},[Ke]);(0,t.useEffect)(()=>{pe(Ve)},[Ve,pe]);const ze=(()=>q?(0,he.A)(q*1e3):W?(0,he.A)(W*1e3):be.t("Video",{fallbackHash:"bc17c1f0179a888f2a7e8389f67d4f2cf5cf4531",fallbackHashNs:"call_buttons"}))(),qe=Ae?t.createElement(f.A,{size:"medium",color:"white",className:"c-video_player_controls_overlay__controls__spinner",noMargin:!0}):t.createElement(S.A,{name:le?"pause":"play",variation:"filled",inline:!0});return $?t.createElement(D.A,null,st=>{let{measureRef:ut,width:tt}=st;const _t=tt||360,yt=!!(_t&&_t<=330);return t.createElement("div",{className:(0,n.A)("c-video_player_controls_overlay","c-video_player_controls_overlay--controls",{"c-video_player_controls_overlay--active":Me,"p-video_player_controls_overlay--vertical_volume_active":ke}),onFocus:J,onBlur:ae,onMouseEnter:Ie,onMouseLeave:Be,onMouseMove:Re,onMouseOver:Fe,"data-prevent-fade":"true",role:"group",ref:ut},t.createElement(L.Nm,{className:"c-video_player_controls_overlay__button",onClick:N,tabIndex:-1,"aria-hidden":"true"}),t.createElement("div",{className:"c-video_player_controls_overlay__controls_container",ref:Ue},t.createElement(ue,{elapsed:q,duration:W,setTime:re}),t.createElement("div",{className:"c-video_player_controls_overlay--controls"},t.createElement(L.Nm,{className:(0,n.A)("c-video_player_controls_overlay__controls__pill",{"c-video_player_controls_overlay__controls__pill--playing":le}),"aria-label":Ye,"aria-pressed":le,onClick:N},qe,t.createElement("div",{className:"c-video_player_controls_overlay__time"},ze)),t.createElement(O.A,{className:"c-video_player_media_volume_slider",isInlinePlayer:!0,useVerticalVolume:yt,setIsVerticalVolumeActive:Ce,videoRef:Te}),t.createElement("div",{className:"c-video_player_controls--right-controls"},t.createElement(m.A,{isInlinePlayer:!0,videoRef:Te}),Ne&&t.createElement(Y,{vtt:Ne,isInlinePlayer:!0})))),t.createElement("div",{className:"c-video_player_controls_overlay__corner c-video_controls_overlay__hover",ref:He},!oe&&Ee&&t.createElement(C.A,{classPrefix:"c-video_player",onClick:Ee})))}):null},"VideoOverlay");xe.displayName="VideoOverlay";const Le=xe,fe=new p.Ay("slack_kit_video"),se=c(k=>{let{className:N,styleProps:$,title:W,label:q,src:re,vtt:le,enableMediaCaptions:Ae=!1,autoPlay:Te,videoPoster:Ne,enableControls:pe=!1,controlsList:Ee,bubbleErrorOrLoadingStateToParent:oe=s.A,videoContainerClassName:ce}=k;const ke=(0,t.useRef)(null),[Ce,Me]=(0,t.useState)(!1),[Se,Ue]=(0,t.useState)(!1),[He,Ye]=(0,t.useState)(!0),[J,ae]=(0,t.useState)(0),[Ve,Be]=(0,t.useState)(0),[Ke,Re]=(0,t.useState)(!1),Fe=(0,y.d4)(st=>(0,g.ty)(st,"enable_media_captions"))||Ae;(0,t.useEffect)(()=>{oe&&oe({hasError:Se,isLoading:He})},[Se,He,oe]);const Ie=(0,t.useCallback)(st=>{if(ke!=null&&ke.current){var ut;(ut=ke.current)===null||ut===void 0||ut.setCurrentTime(st,!1)}else ae(st)},[ke,ae]),ze=(0,t.useCallback)((st,ut)=>{ut&&Be(ut)},[]),qe=(0,t.useCallback)(st=>{var ut;st.stopPropagation(),(ut=ke.current)===null||ut===void 0||ut.togglePlayPause()},[ke]);return t.createElement(i.A,{clogImpression:!0,eventId:I.EventId.SK_VIDEO_PLAYER},t.createElement("div",{className:(0,n.A)("c-video_player",N),style:$},t.createElement(T,{title:W,label:q,src:re,vtt:le,ref:ke,autoPlay:Te,videoPoster:Ne,enableControls:pe,controlsList:Ee,setIsLoading:Ye,isLoading:He,isPlaying:Ce,setIsPlaying:Me,duration:Ve,setDuration:Be,setElapsed:ae,onLoadedMetadata:ze,enableMediaCaptions:Fe,shiftCaptionsUp:Ke,setHasError:Ue,videoContainerClassName:ce}),Se&&t.createElement("div",{className:"c-video_player__error_overlay"},t.createElement("p",null,fe.t("Error loading video. Please try again later."))),t.createElement(Le,{onClickOverlay:qe,elapsed:J,duration:Ve,showControls:!pe,setTime:Ie,isPlaying:Ce,isLoading:He,videoRef:ke,vtt:le,setShiftCaptionsUp:Re,onFullscreenButtonClicked:s.A,isFullScreen:!1})))},"VideoPlayer");se.displayName="VideoPlayer";const Q=t.memo(se)},8049923572:(x,A,e)=>{"use strict";e.d(A,{BM:()=>_,IN:()=>a});var t=e(3134334389),n=e(5950652755),s=e(5460331959),i=e(1641606663),l=e(4761125736);function o(){return o=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},o.apply(this,arguments)}c(o,"_extends");const a=c(v=>(0,l._Z)(v,"sk_responsive_menus")==="on","isSkResponsiveMenusEnabled");function r(v){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const{windowRef:f}=(0,t.useContext)(i.Mn),I=c(y=>{!Array.isArray(y)||!y.length||requestAnimationFrame(()=>v(y))},"observer"),p=f.deref();return new p.ResizeObserver((0,n.A)(I,h))}c(r,"useResizeObserver");const d=c(()=>{var v,h,f;const{windowRef:I}=(0,t.useContext)(i.Mn),p=(0,t.useRef)((v=I.deref())===null||v===void 0?void 0:v.document.body),y=((h=p.current)===null||h===void 0?void 0:h.clientWidth)||0,g=((f=p.current)===null||f===void 0?void 0:f.clientHeight)||0,[E,M]=(0,t.useState)(y),[T,D]=(0,t.useState)(g),C=r(()=>{var m,O;M(((m=p.current)===null||m===void 0?void 0:m.clientWidth)||0),D(((O=p.current)===null||O===void 0?void 0:O.clientHeight)||0)},100);return(0,t.useEffect)(()=>{const m=p.current;return m&&C.observe(m),()=>{I&&m&&C.unobserve(m)}},[C,I]),{width:E,height:T}},"useWindowSize");function u(v){return h=>{const f=d();return t.createElement(v,o({},h,{windowSize:f}))}}c(u,"withWindowSize"),u.displayName="withWindowSize";function _(v){return h=>h.experimentSkResponsiveMenusGroupOn?t.createElement(s.A,null,f=>{let{measureRef:I,width:p,height:y}=f;return t.createElement(v,o({},h,{measureRef:I,containerSize:{width:p,height:y}}))}):t.createElement(v,o({},h))}c(_,"withContainerSize"),_.displayName="withContainerSize"},581167618:(x,A,e)=>{"use strict";e.d(A,{AO:()=>h,A_:()=>v,Ay:()=>y,QE:()=>_});var t=e(3134334389),n=e(5255740490),s=e(6105929840),i=e(1610251172),l=e(2201208793),o=e(4882164428),a=e(8683010724),r=e(1224315998),d=e(735940183);const u=new d.Ay("sk_banner");var _;(function(g){g.default="default",g.boxed="boxed",g.inlineBoxed="inline_boxed",g.nestedBox="nested_box",g.inline="inline",g.custom="custom"})(_||(_={}));var v;(function(g){g.default="default",g.info="info",g.success="success",g.warning="warning",g.error="error"})(v||(v={}));var h;(function(g){g.left="left",g.center="center",g.right="right"})(h||(h={}));const f={elementName:"close",elementType:r.ElementType.X,action:r.UiAction.CLOSE,onClick:{enableClogAction:!0}},I=new Map([["default","slack-pillow"],["info","info-circle"],["success","check-circle-o-large"],["error","warning"],["warning","warning"]]),p=c(g=>{let{align:E=h.left,className:M,heading:T,icon:D,customIcon:C,id:m,level:O=v.default,type:P=_.boxed,children:R,"data-qa":L,isIconVisible:V=!0,showCloseButton:B=!1,onClose:K,ariaLabelForCloseBtn:b,closeBackgroundStyle:S}=g;const G=(0,o.f)(l.j.Alert),[H,U]=(0,t.useState)(!1),F=(0,n.A)("c-alert",`c-alert--${P}`,`c-alert--level_${O}`,`c-alert--align_${E}`,{"c-alert--multiline":!!T},M,G),Y=I.get(O)||"slack-pillow",Z=(C||Y)&&P!==_.inline&&P!==_.custom,ee=P===_.nestedBox?"inherit":void 0,j=P!==_.custom&&T,ge=(0,t.useCallback)(()=>{U(!0),K==null||K()},[K]);return H?null:t.createElement("div",{className:F,id:m,"data-qa":L,"data-qa-alert":!0,"data-qa-alert-level":O,"data-qa-alert-type":P,"data-qa-alert-align":E},V&&Z&&(C||t.createElement(i.A,{type:D||Y,className:"c-alert__icon",size:ee,inline:!0,"data-qa-alert-icon":!0,"data-qa-alert-icon-type":D||Y})),t.createElement("span",{className:"c-alert__message","data-qa-alert-message":!0},j&&t.createElement("strong",{className:"c-alert__heading","data-qa-alert-heading":!0},T),R),B&&t.createElement("div",{className:"c-alert__close","data-qa":"alert_close_btn"},t.createElement(s.A,{onClick:ge,backgroundStyle:S,"aria-label":b??u.t("Dismiss"),autoClogProps:f,size:"small"},t.createElement(a.A,{name:"close",size:"20"}))))},"Alert");p.displayName="Alert",p.displayName="Alert";const y=p},3824874166:(x,A,e)=>{"use strict";e.d(A,{RG:()=>P,f1:()=>V,fp:()=>L});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(1030162945),l=e(8822892075),o;(function(B){B.BaseHeart="mask__base-heart",B.SmallHeart="mask__small-heart",B.BaseSingleChannelGuestDnd="mask__base-single-channel-guest-dnd",B.BaseSingleChannelGuest="mask__base-single-channel-guest",B.SmallSingleChannelGuestDnd="mask__small-single-channel-guest-dnd",B.SmallSingleChannelGuest="mask__small-single-channel-guest",B.BaseGuestDnd="mask__base-guest-dnd",B.BaseGuest="mask__base-guest",B.SmallGuestDnd="mask__small-guest-dnd",B.SmallGuest="mask__small-guest",B.BaseMemberDnd="mask__base-member-dnd",B.BaseMember="mask__base-member",B.SmallMemberDnd="mask__small-member-dnd",B.SmallMember="mask__small-member",B.NoAccess="mask__base-no-access"})(o||(o={}));function a(B){let{size:K="base",userType:b="member",isDnd:S=!1,hasNoAccess:G=!1}=B;return G?t.createElement("svg",{className:"sr-only"},t.createElement("clipPath",{id:o.NoAccess,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.542 V0.825 C0.542,0.745,0.587,0.676,0.653,0.642 C0.662,0.481,0.795,0.353,0.958,0.353 C0.972,0.353,0.986,0.354,1,0.356 V0"}))):t.createElement("svg",{className:"sr-only"},b==="slackbot"&&(K==="base"?t.createElement("clipPath",{id:o.BaseHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0,0 H1 V0.673 C0.986,0.669,0.971,0.667,0.954,0.667 C0.929,0.667,0.907,0.673,0.889,0.682 C0.87,0.673,0.849,0.667,0.824,0.667 C0.764,0.667,0.719,0.697,0.694,0.736 C0.672,0.77,0.667,0.807,0.667,0.832 C0.667,0.854,0.669,0.894,0.696,0.942 C0.707,0.962,0.721,0.981,0.739,1 H0 V0"})):t.createElement("clipPath",{id:o.SmallHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.801 C0.75,0.958,0.714,0.915,0.69,0.872 C0.653,0.807,0.65,0.753,0.65,0.723 C0.65,0.689,0.658,0.64,0.687,0.594 C0.721,0.541,0.781,0.5,0.862,0.5 C0.896,0.5,0.925,0.508,0.95,0.521 C0.965,0.513,0.982,0.507,1,0.504 V0"}))),b==="ura"&&(K==="base"?S?t.createElement("clipPath",{id:o.BaseSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.825,0.763 C0.821,0.752,0.819,0.741,0.819,0.729 C0.819,0.672,0.866,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.87,0.718 C0.907,0.68,0.958,0.673,1,0.688 V0"})):S?t.createElement("clipPath",{id:o.SmallSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.864,0.63 C0.859,0.615,0.856,0.6,0.856,0.584 C0.856,0.507,0.919,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:o.SmallSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.924,0.569 C0.947,0.546,0.973,0.532,1,0.525 V0"}))),(b==="ra"||b==="external")&&(K==="base"?S?t.createElement("clipPath",{id:o.BaseGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.753,0.695,0.825,0.694 C0.84,0.654,0.878,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.754,0.694,0.826,0.694 H0.951 C0.969,0.694,0.985,0.698,1,0.704 V0"})):S?t.createElement("clipPath",{id:o.SmallGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"})):t.createElement("clipPath",{id:o.SmallGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"}))),b==="member"&&(K==="base"?S?t.createElement("clipPath",{id:o.BaseMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.795,0.742,0.716,0.827,0.69 C0.843,0.652,0.88,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.774,0.774,0.681,0.889,0.681 C0.93,0.681,0.968,0.692,1,0.713 V0"})):S?t.createElement("clipPath",{id:o.SmallMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.674,0.752,0.567,0.867,0.531 C0.888,0.48,0.938,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:o.SmallMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.645,0.795,0.519,0.95,0.519 C0.967,0.519,0.984,0.52,1,0.523 V0"}))))}c(a,"AvatarMasks");var r=e(9270432170),d=e(9332393661),u=e(2036354333),_=e(1610251172),v=e(9742374352),h=e(3501104594),f=e(698013937),I=e(2855755676),p=e(1563996154),y=e(82287009),g=e(735940183),E=e(485355941),M=e(1060768686),T=e.n(M),D=e(2979422297),C=e.n(D);function m(){return m=Object.assign||function(B){for(var K=1;K<arguments.length;K++){var b=arguments[K];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S])}return B},m.apply(this,arguments)}c(m,"_extends");const O=new g.Ay("avatar"),P={xlarge:72,large:56,medium:36,small:24,verySmall:20,tiny:16},R=t.memo(B=>{let{botEmoji:K,canRenderEmoji:b}=B;return K?b?t.createElement(i.Ay,{className:"c-avatar__emoji",text:K,emojiSize:i.lw.LARGE,stopAnimations:!0,forceDisplay:!0}):t.createElement("img",{className:"c-avatar__image c-avatar__image--fallback",src:T(),srcSet:`${C()} 2x`,alt:""}):null});function L(B){let{isExternal:K,teamId:b,team:S,showTooltip:G,badgeIconType:H,badgeIconClassName:U,allowTeamInitials:F=!0}=B;if(H){const Y=U?{[U]:!!U}:{};return()=>t.createElement(_.A,{className:(0,n.A)("c-avatar__icon c-avatar__nonteam_icon",{...Y}),type:H})}return K&&b?()=>t.createElement(f.A,{className:"c-avatar__icon c-avatar__team_icon",id:b,team:S,size:16,showTooltip:G,allowTeamInitials:F,ariaHidden:!0}):()=>null}c(L,"getCustomBadgeIconRenderer"),L.displayName="getCustomBadgeIconRenderer";const V=c(B=>{let{size:K,userId:b,isAdHocMember:S,botId:G,botProfile:H=void 0,imageUrl:U,imageUrl2x:F,additionalOverlay:Y,onClick:Z=void 0,className:ee,teamId:j,isExternal:ge=!1,isRestricted:ne=!1,isUltraRestricted:ue=!1,isInToken:he=!1,isDeleted:be=!1,tokenSize:xe=void 0,memberOrBotName:Le=void 0,showTooltip:fe=!1,showCard:se=!1,showBadge:Q=!0,showPresence:k=!1,badgeIconType:N=void 0,badgeIconClassName:$=void 0,isInteractive:W=!0,clogLinkClick:q=s.A,tabIndex:re=0,ariaHidden:le=void 0,team:Ae=void 0,botEmoji:Te=void 0,canRenderEmoji:Ne=void 0,renderCustomBadge:pe=void 0,autoClogProps:Ee=void 0,openProfile:oe=s.A,showMemberProfileInWindow:ce=s.A,propagateClickEvent:ke=!1,fromQuipDoc:Ce=!1,allowTeamInitials:Me=!0,disableLink:Se=!1,isUserHidden:Ue=!1,onLoad:He=s.A,onError:Ye=s.A,navigate:J,resetIA:ae,userType:Ve,isDnd:Be,isSlackbot:Ke,hasNoAccess:Re,"data-qa":Fe,"data-stringify-ignore":Ie}=B;const ze=(0,t.useCallback)(hn=>(hn.preventDefault(),W?(ke||hn.stopPropagation(),q(),Ce||((0,E.Cz)(hn)?ce(b):J&&b?J((0,l.Fo)({memberId:b})):oe({memberId:b,serviceId:G,botProfile:H})),Z?Z(hn):null):null),[b,G,H,q,Ce,Z,W,J,oe,ke,ce]),qe=c(()=>b?`/team/${b}`:G&&!Se?`/services/${G}`:"","getHrefAttr"),st=c(()=>F?`${F} 2x`:"","getSrcSetAttribute"),ut=c(()=>{if(Y){const hn=Y>9?"9+":`+${Y}`;return t.createElement("div",{className:"c-avatar__additional_overlay"},hn)}return null},"renderAdditionalOverlay");ut.displayName="renderAdditionalOverlay";const tt=c(hn=>{let{tooltipText:Nn,className:rt}=hn,vt=t.createElement("span",{className:"c-avatar__badge_inner"});fe&&(vt=t.createElement(p.Ay,{tip:Nn},vt));const Mt=(0,n.A)("c-avatar__badge",rt);return t.createElement("span",{className:Mt},vt)},"renderBadgeElement");tt.displayName="renderBadgeElement";const _t=c(()=>{const hn=xe?I.n[xe]:K;if(pe!==void 0&&hn>=32){const Nn=pe();if(Nn)return Nn}if(pe===void 0&&hn>=32){const Nn=L({isExternal:ge,teamId:j,team:Ae,showTooltip:fe,badgeIconType:N,badgeIconClassName:$,allowTeamInitials:Me})();if(Nn)return Nn}return k?t.createElement(h.A,{memberId:b,inline:!1,className:"c-avatar__presence",inheritIconSize:!0,hasNoAccess:Re}):ue&&hn>=32?tt({tooltipText:c(()=>O.rt("Single-Channel Guests <span>see a partial directory and can only access messages and files from the channel they belong to.</span>",null,rt=>{let{text:vt}=rt;return t.createElement("span",{className:"c-avatar__tooltip_detail"},vt)}),"tooltipText"),className:"c-avatar__badge--ultra_restricted"}):ne&&hn>=32?tt({tooltipText:c(()=>O.rt("Multi-Channel Guests <span>see only a partial directory and can only access messages and files from selected channels.</span>",null,rt=>{let{text:vt}=rt;return t.createElement("span",{className:"c-avatar__tooltip_detail"},vt)}),"tooltipText"),className:"c-avatar__badge--restricted"}):null},"renderBadgeOrPresence");_t.displayName="renderBadgeOrPresence";const yt=c(()=>{let hn=U||F;return xe?(xe==="large"&&F&&(hn=F),t.createElement(d.A,{image:hn,classes:"c-base_icon--token",srcSet:st(),size:I.n[xe],ariaHidden:!0,ariaRole:"img",widthOnly:!0,onLoad:He,onError:Ye,resetIA:ae})):null},"renderTokenAvatar");yt.displayName="renderTokenAvatar";const Kt=c(()=>U||F?xe||he?yt():t.createElement(d.A,{image:U||F,size:K,srcSet:st(),ariaHidden:!0,widthOnly:!0,onLoad:He,onError:Ye,resetIA:ae}):null,"renderImageTag");Kt.displayName="renderImageTag";const Qt=c(hn=>{let{fallback:Nn=null}=hn,rt=Nn;return(U||F)&&(rt=Kt()),rt},"renderImageOrFallback"),Jt=Te?t.createElement(R,{botEmoji:Te,canRenderEmoji:Ne}):null,Gt=K>26?"base":"small",wt=Ve==="member",Bt=Ve==="ra"||Ve==="external",Wt=Ve==="ura",Tn=t.useMemo(()=>k?Re?o.NoAccess:Ke&&Gt==="base"?o.BaseHeart:Ke&&Gt==="small"?o.SmallHeart:wt&&Gt==="base"&&Be?o.BaseMemberDnd:wt&&Gt==="base"?o.BaseMember:wt&&Gt==="small"&&Be?o.SmallMemberDnd:wt&&Gt==="small"?o.SmallMember:Bt&&Gt==="base"&&Be?o.BaseGuestDnd:Bt&&Gt==="base"?o.BaseGuest:Bt&&Gt==="small"&&Be?o.SmallGuestDnd:Bt&&Gt==="small"?o.SmallGuest:Wt&&Gt==="base"&&Be?o.BaseSingleChannelGuestDnd:Wt&&Gt==="base"?o.BaseSingleChannelGuest:Wt&&Gt==="small"&&Be?o.SmallSingleChannelGuestDnd:Wt&&Gt==="small"?o.SmallSingleChannelGuest:"":"",[k,Be,Gt,Bt,wt,Wt,Ke,Re]),Ot=(0,n.A)(ee,"c-avatar",{"c-avatar--no_image":!(U||F||Jt),"c-avatar--interactive":W&&!S&&!Se,"c-avatar--ad_hoc_member":S,"c-avatar--deleted_member":be,"c-avatar--resetIA":ae}),Ft=xe?I.n[xe]:K,rn={height:`${Ft}px`,width:`${Ft}px`};let ln;G&&(ln=W&&qe());const _n=Le&&(W||ln)?O.t("View {name}\u2019s Profile",{name:Le}):void 0,en=Qt({fallback:Jt}),Xt={...rn,"--avatar-image-size":`${Ft}px`},vn=Ke?"slackbot":Ve,je=k||Q;let Rt=t.createElement(t.Fragment,null,k&&Ve&&t.createElement(a,{isDnd:Be,userType:vn,hasNoAccess:Re,size:Gt}),Ue?t.createElement(r.A,{className:ee,size:Ft}):en,je&&_t(),ut());return ln?Rt=t.createElement(v.A,{href:ln,target:"_blank",rel:"noopener noreferrer",style:rn,className:Ot,onClick:ze,tabIndex:re,"aria-hidden":le,"aria-label":_n,autoClogProps:Ee,"data-qa":Fe,"data-stringify-ignore":Ie},Rt):W&&!Se?Rt=t.createElement(u.A,{style:rn,className:Ot,"data-qa":Fe,"data-stringify-ignore":Ie,"aria-hidden":le,"aria-label":_n,tabIndex:re,onClick:ze,autoClogProps:Ee},Rt):Rt=t.createElement("span",m({style:Xt,className:Ot},Tn?{"data-mask":Tn}:{},{"data-qa":Fe,"data-stringify-ignore":Ie,"aria-hidden":le}),Rt),W&&se&&K>=P.medium?(0,y.yN)({memberId:b,serviceId:G,botProfile:H,children:Rt}):Rt},"BaseAvatar");V.displayName="BaseAvatar"},1912114396:(x,A,e)=>{"use strict";e.d(A,{A:()=>b});var t=e(3134334389),n=e(6122756707),s=e(8642919232),i=e(1212974695),l=e(5267010247),o=e(8822892075),a=e(3275490582),r=e(3244118357),d=e(6052448919),u=e(8170643398),_=e(3534324375),v=e(4562579337),h=e(6536982570),f=e(3824874166),I=e(3339229351),p=e(4724591729),y=e(6415587347),g=e(92812954),E=e(6045540917),M=e(8847766420),T=e(9786721596),D=e(2562405183),C=e(8677230210),m=e(6273556946),O=e(3829348308),P=e(4761125736),R=e(5761207079),L=e(3677514771);function V(){return V=Object.assign||function(S){for(var G=1;G<arguments.length;G++){var H=arguments[G];for(var U in H)Object.prototype.hasOwnProperty.call(H,U)&&(S[U]=H[U])}return S},V.apply(this,arguments)}c(V,"_extends");const B=(0,t.forwardRef)((S,G)=>{const H=(0,n.wA)();t.useImperativeHandle(G,()=>({props:S}),[S]);const{user:U,userId:F,botId:Y,botProfile:Z,size:ee,icons:j,emoji:ge,team:ne,slackbotFeels:ue,isUnknown:he,showPresence:be,isExternal:xe,hasNoAccess:Le}=S;let fe=null,se=null,Q,k,N,$,W,q=ge,re,le;const{member:Ae,bot:Te,memberIsHuman:Ne}=(0,D.Z2)(Ie=>(0,C.Od)(Ie,{userId:F,botId:Y,botProfile:Z})),{currentTab:pe,channelId:Ee}=(0,t.useContext)(i.d),oe=U||F||he,ce=oe?U||Ae:void 0,ke=ce&&!ce.isUnknown&&!ce.is_unknown,Ce=(0,D.d4)(Ie=>(0,P._Z)(Ie,"bot_team_id_from_member")==="on");if(ke){var Me;Y||(re=Te==null?void 0:Te.id);let Ie;Ce?Ie=(0,h.dQ)(ce):Ie=(0,v.A)(ce)?(0,h.D5)(ce):(0,h.dQ)(ce);const ze=(0,y.Ay)({size:ee,teamOrEnterpriseId:Ie,memberId:ce==null?void 0:ce.id,avatarHash:ce==null||(Me=ce.profile)===null||Me===void 0?void 0:Me.avatar_hash,slackbotFeels:ue});fe=ze==null?void 0:ze.imageUrl,se=ze==null?void 0:ze.imageUrl2x,Q=xe||(ce==null?void 0:ce.isExternal),k=ce==null?void 0:ce.is_restricted,N=ce.is_ultra_restricted,$=ce.id,W=(0,u.oy)(ce)}le=(0,D.d4)(Ie=>ke&&Q?(0,h.Ux)(Ie,ce):void 0);let Se=oe?void 0:j||Z&&Z.icons;if(!oe){if(Te){Se=Se||Te.icons;const Ie=(0,p.Cu)()?m.O:m.U;(Te==null?void 0:Te.app_id)===Ie&&(Se=(Te==null?void 0:Te.icons)||Se)}if(!q&&Se&&(q=Se.emoji),!q){const Ie=(0,y.Ay)({size:ee,botImages:Se,isBot:!0});fe=Ie.imageUrl,se=Ie.imageUrl2x}}le=(0,D.d4)(Ie=>oe?le:(ne==null?void 0:ne.id)||(0,d.s)(Ie,{bot:Te,botProfile:Z,botId:Y})||void 0),Q=(0,D.d4)(Ie=>oe?Q:le?le!==(0,M.Kc)(Ie):!1);const Ue=(0,D.d4)(Ie=>{if(ke)return(0,_.sE)(Ie,ce);if(!oe)return(0,r.Hg)(Te)}),He=(0,D.d4)(Ie=>{let ze=q&&le&&(0,O.ux)(Ie,{text:q,teamId:le});if(!ze&&q&&le===(0,M.Kc)(Ie)){const qe=(0,L.H7)(Ie),st=qe&&qe.id;st&&st!==le&&(ze=(0,O.ux)(Ie,{text:q,teamId:st}))}return ze}),Ye=(0,D.d4)(Ie=>be?(0,g.d)(Ie,F):void 0),J=(0,D.d4)(Ie=>be?(0,E.h)(Ie,F):!1);var ae;const Ve=(ae=F??$)!==null&&ae!==void 0?ae:"",Be=(0,D.d4)(Ie=>Ve?(0,R.a)(Ie,Ve):!1),Ke=(0,t.useCallback)(Ie=>H((0,T.U)(Ie)),[H]),Re=(0,t.useCallback)(Ie=>H((0,s.A)(Ie)),[H]),Fe=(0,t.useCallback)(Ie=>H(pe&&Ee?(0,l.o)((0,o.sL)(Ie,Ee,pe.id)):(0,l.o)(Ie)),[H,pe,Ee]);return t.createElement(f.f1,V({},S,{userId:F,imageUrl:fe||void 0,imageUrl2x:se||void 0,botEmoji:q,canRenderEmoji:!!He,teamId:le,isRestricted:k,isUltraRestricted:N,isDeleted:W,memberOrBotName:Ue,botId:re||Y,disableLink:!Ne&&(!Te||(0,u.v3)(Te)),isExternal:Q,isUserHidden:Be,userType:Ye,isDnd:J,isSlackbot:F===I.Q$,size:ee,openProfile:Ke,showMemberProfileInWindow:Re,navigate:Fe,hasNoAccess:Le,showPresence:be}))}),K=(0,a.A)(t.memo(B));K.displayName="ConnectedAvatar";const b=K},4775127335:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>s,RG:()=>n.RG,f1:()=>n.f1,fp:()=>n.fp});var t=e(1912114396),n=e(3824874166);const s=t.A},9270432170:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(8683010724);function i(o){let{className:a="",size:r,"data-qa":d}=o;return t.createElement("span",{className:(0,n.A)(a,"c-hidden_user_avatar",{"c-hidden_user_avatar--small":r===16}),style:{width:`${r}px`,height:`${r}px`},"data-qa":d},t.createElement("span",{className:"c-hidden_user_avatar--icon"},t.createElement(s.A,{size:r<=24?"16":"24",name:"user-hide"})))}c(i,"HiddenUserAvatar"),i.displayName="HiddenUserAvatar";const l=t.memo(i)},9332393661:(x,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(3134334389),n=e(5255740490),s=e(3398586081),i=e(7715417323),l=e(1610251172);const o=(0,s.A)(I=>({height:`${I}px`,width:`${I}px`}));function a(I){let{icon:p,classes:y=null,size:g=20,ariaHidden:E=void 0,ariaRole:M="img",ariaLabel:T=void 0}=I;const D=(0,n.A)("c-base_font_icon",y);return t.createElement("div",{className:D,style:o(g),"aria-hidden":E,role:M,"aria-label":T},t.createElement(l.A,{type:p}))}c(a,"BaseFontIcon"),a.displayName="BaseFontIcon";const r=a;var d=e(796111729);const u=(0,d.Wo)(),_=(0,s.A)(I=>({height:`${I}px`,width:`${I}px`})),v=(0,s.A)(I=>({width:`${I}px`}));function h(I){let{image:p=void 0,size:y=20,srcSet:g="",classes:E=void 0,icon:M=void 0,ariaHidden:T=!1,ariaRole:D="img",ariaLabel:C=void 0,widthOnly:m=!1,onLoad:O=i.A,onError:P=i.A,resetIA:R,"data-qa":L}=I;p&&M&&u.warn("BaseIcon: cannot pass in both image and icon!"),!T&&!C&&u.warn("BaseIcon: if ariaHidden is false, we must have an ariaLabel for a11y!");const V=(0,n.A)("c-base_icon",E,{"c-base_icon--unknown":!p&&!M,"c-base_icon--image":p,"c-base_icon--resetIA":R});if(M)return t.createElement(r,{icon:M,classes:V,size:y,ariaHidden:T,ariaRole:D,ariaLabel:C});const B=t.createElement("img",{src:p,srcSet:g,className:V,style:m?v(y):_(y),"aria-hidden":T,role:D,"aria-label":C,alt:"",onLoad:O,onError:P,"data-qa":L});return m?t.createElement("span",{className:(0,n.A)("c-base_icon__width_only_container",{"c-base_icon--resetIA":R}),style:_(y)},B):B}c(h,"BaseIcon"),h.displayName="BaseIcon";const f=h},9574544148:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(1649982175),s=e(3297051565),i=e.n(s),l=e(9262712126),o=e(8921478798),a=e(3534324375),r=e(735940183),d=e(9391594207),u=e(5761207079);function _(){return _=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var M=arguments[E];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(g[T]=M[T])}return g},_.apply(this,arguments)}c(_,"_extends");const v=new r.Ay("files"),h={name:i().string.isRequired,isChannelFiles:i().bool,showMemberNameIfHidden:i().bool},f={isChannelFiles:!1,showMemberNameIfHidden:!1},I=c(g=>{const E=(0,n.A)(g,["id","name","dispatch","firstName","skipPrefCompliance","isChannelFiles","showMemberNameIfHidden"]);let M=g.name;if(g.isChannelFiles){const T=g.name;M=v.t("Shared by {memberName}",{memberName:T})}return t.createElement("span",_({},E),M)},"MemberName");I.displayName="MemberName",I.propTypes=h,I.defaultProps=f;const p=c((g,E)=>{const{id:M,member:T,skipPrefCompliance:D,showMemberNameIfHidden:C}=E;if(D)return{name:(0,l.wg)(T)};let m;return!C&&(0,u.a)(g,M)?m=v.t("Name hidden"):m=T?(0,a.sE)(g,T,!1,!1,D,!1):(0,o.I)(g,M,!1,!1,!1,!1),{name:m}},"mapStateToProps"),y=(0,d.N)(p)(I)},6496493732:(x,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(7715417323),s=e(7968796288),i=e(6084388622),l=e(4979382452),o=e(4636370173),a=e(2465132699),r=e(8523371695),d=e(3606117573),u=e(8029613601),_=e(4947127560),v=e(735940183);const h=new v.Ay("generic_dialog"),f=c(p=>{let{title:y,children:g,submitButtonType:E="primary",submitButtonText:M=h.t("Confirm"),submitButtonIsDisabled:T=!1,submitButtonIsLoading:D=!1,showCancelButton:C=!0,showCloseButton:m=!0,showSubmitButton:O=!0,cancelButtonText:P=h.t("Cancel"),onSubmit:R=n.A,onCancel:L=n.A,onClose:V=n.A,"data-qa":B="dialog",className:K,overlayClassName:b,submitAutoClogProps:S,cancelAutoClogProps:G,shouldReturnFocusAfterClose:H=!0}=p;const U=(0,s.A)(),F=(0,s.A)();return t.createElement(l.A,{describedby:F,labelledby:U,closeModal:V,role:"dialog",className:K,overlayClassName:b,dataQa:B,shouldReturnFocusAfterClose:H,showCloseButton:m},t.createElement(u.A,null,t.createElement(_.A,{id:U,title:y,"data-qa":`${B}_header`})),t.createElement(o.A,null,t.createElement(a.A,{id:F,"data-qa":`${B}_body`},g)),(C||O)&&t.createElement(r.A,{"data-qa":`${B}_footer`},t.createElement(d.A,null,C&&t.createElement(i.Ay,{type:"outline",onClick:L,"data-qa":`${B}_cancel`,autoClogProps:G},P),O&&t.createElement(i.lV,{type:E,onClick:R,loading:D,disabled:T,"data-qa":`${B}_go`,autoClogProps:S,"aria-label":M},M))))},"DialogModalProps");f.displayName="DialogModalProps";const I=f},51460783:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5255740490),s=e(4518138713);function i(){return i=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(a[u]=d[u])}return a},i.apply(this,arguments)}c(i,"_extends");function l(a){const{children:r,className:d}=a;return r?t.createElement("span",i({className:(0,n.A)(d,"c-base_entity__metadata")},(0,s.A)(a)),r):null}c(l,"BaseEntityMetadata"),l.displayName="BaseEntityMetadata";const o=l},161084047:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5255740490),s=e(4518138713);function i(){return i=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(a[u]=d[u])}return a},i.apply(this,arguments)}c(i,"_extends");function l(a){const{children:r,className:d}=a;return r?t.createElement("span",i({className:(0,n.A)(d,"c-base_entity__subtext")},(0,s.A)(a)),r):null}c(l,"BaseEntitySubtext"),l.displayName="BaseEntitySubtext";const o=l},3534100833:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(8011352381),i=e(4518138713);function l(){return l=Object.assign||function(r){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(r[_]=u[_])}return r},l.apply(this,arguments)}c(l,"_extends");function o(r){const{children:d=null,className:u="",multiline:_=!1,inline:v=!1,breakWords:h=!0,withTruncationTooltip:f=!1}=r;if(!d)return null;const I=_?2:1;return v?t.createElement("span",l({className:(0,n.A)(u,"c-base_entity__text")},(0,i.A)(r)),d):t.createElement("span",l({className:(0,n.A)(u,"c-base_entity__text")},(0,i.A)(r)),t.createElement(s.A,{lines:I,breakWords:h,withTooltip:f},d))}c(o,"BaseEntityText"),o.displayName="BaseEntityText";const a=o},1464713483:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(3877384923),l=e(4518138713);function o(){return o=Object.assign||function(_){for(var v=1;v<arguments.length;v++){var h=arguments[v];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(_[f]=h[f])}return _},o.apply(this,arguments)}c(o,"_extends");const a=c((_,v,h,f)=>!(_!==i.ny.medium||!h||f||v),"shouldVerticallyCenter"),r={className:"c-base_entity__avatar"},d=c(_=>{const{size:v,style:h=i.pI.normal,text:f=null,className:I="",subtext:p=null,avatar:y=s.A,metadata:g=null,forwardedRef:E=null}=_,M=y(r),T=!!M;return t.createElement("div",o({className:(0,n.A)(I,"c-base_entity",`c-base_entity--${v}`,{"c-base_entity--has-avatar":T,"c-base_entity--dim":h===i.pI.dim,"c-base_entity--vertically-center":a(v,p,T,g)})},(0,l.A)(_),{ref:E}),M,t.createElement("div",{className:"c-base_entity__text-contents"},f,p,g))},"BaseEntity");d.displayName="BaseEntity";const u=d},5273017660:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>l,CG:()=>i.A,Q:()=>n.A,sT:()=>s.A});var t=e(1464713483),n=e(51460783),s=e(161084047),i=e(3534100833);const l=t.A},2671211451:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(8011352381),l=e(3877384923),o=e(4518138713);function a(){return a=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},a.apply(this,arguments)}c(a,"_extends");const r=c(v=>{let{children:h,truncate:f=!1,truncateWidth:I,withTruncationTooltip:p=!1}=v;const y=(0,t.useMemo)(()=>({maxWidth:I||void 0}),[I]);if(!f)return t.createElement("span",null,h);let g;return I?g=t.createElement("span",{className:"c-base_inline_entity__inline_wrapper",style:y},h):g=t.createElement("span",null,t.createElement(i.A,{lines:1,withTooltip:p},h)),g},"MaybeTruncate");r.displayName="MaybeTruncate";const d={className:"c-base_inline_entity__avatar","data-qa":"base_inline_entity__avatar"};let u=c(class extends t.Component{render(){const{className:h,avatar:f=s.A,primaryContent:I,secondaryContent:p,style:y=l.pI.normal,truncate:g=!1,truncateWidth:E,withTruncationTooltip:M=!1}=this.props,T=f(d),D=!!T;return t.createElement("span",a({className:(0,n.A)(h,"c-base_inline_entity",{"c-base_inline_entity--has_avatar":D,"c-base_inline_entity--truncate_block":g&&!E,"c-base_inline_entity--truncate_inline":g&&E,"c-base_inline_entity--dim":y===l.pI.dim,"c-base_inline_entity--highlight-dark":y===l.pI.highlightDark,"c-base_inline_entity--highlight-dim":y===l.pI.highlightDim,"c-base_inline_entity--highlight-light":y===l.pI.highlightLight})},(0,o.A)(this.props)),t.createElement(r,{truncate:g,truncateWidth:E,withTruncationTooltip:M},T,t.createElement("span",{className:"c-base_inline_entity__primary_content"},I),p&&t.createElement("span",{className:"c-base_inline_entity__secondary_content"},p)))}},"BaseInlineEntity");u.displayName="BaseInlineEntity";const _=u},2828836153:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(3877384923),i=e(4518138713);function l(){return l=Object.assign||function(r){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(r[_]=u[_])}return r},l.apply(this,arguments)}c(l,"_extends");let o=c(class extends t.Component{render(){const{className:d,ariaLabel:u,primaryContent:_,secondaryContent:v,size:h=s.ny.medium,style:f=s.pI.normal,padding:I=s.FK.normal}=this.props;return t.createElement("div",l({className:(0,n.A)(d,"c-base_list_entity",`c-base_list_entity--${h}`,{"c-base_list_entity--dim":f===s.pI.dim,"c-base_list_entity--highlight-dark":f===s.pI.highlightDark,"c-base_list_entity--highlight-dim":f===s.pI.highlightDim,"c-base_list_entity--highlight-light":f===s.pI.highlightLight,"c-base_list_entity--no-pad":I===s.FK.none})},(0,i.A)(this.props),{"aria-label":u}),t.createElement("div",{className:"c-base_list_entity__primary_content"},_),v&&t.createElement("div",{className:"c-base_list_entity__secondary_content"},v))}},"BaseListEntity");o.displayName="BaseListEntity";const a=o},3877384923:(x,A,e)=>{"use strict";e.d(A,{FK:()=>s,P:()=>l,RG:()=>t,ny:()=>i,pI:()=>n});const t={xxlarge:102,xlarge:72,large:56,medium:36,small:20,inline:14},n={normal:"normal",dim:"dim",highlightDark:"highlight-dark",highlightDim:"highlight-dim",highlightLight:"highlight-light"},s={normal:"12px",none:"0"},i={small:"small",medium:"medium"},l={true:!0,bestOnly:"best_only",false:!1}},3989454579:(x,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(5617110048),l=e(3753517560),o=e(2201208793),a=e(4882164428),r=e(1224315998),d=e(3817509504),u=e(4954329752);function _(){return _=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}return f},_.apply(this,arguments)}c(_,"_extends");const v=t.forwardRef((f,I)=>{let{className:p,isRequired:y=!1,"aria-disabled":g,indeterminate:E=!1,checked:M,hasKeyboardFocus:T,unstyled:D,autoClogProps:C,onChange:m,focusOnMount:O,...P}=f;const R=(0,t.useRef)(null),[L,V]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(E&&M==null)throw new Error("The indeterminate prop is only supported for the controlled Checkbox. Please provide the checked prop.");R.current&&(R.current.indeterminate=E)},[M,E]),(0,t.useEffect)(()=>{if(O){var U;(U=R.current)===null||U===void 0||U.focus()}},[O]);const B=(0,t.useCallback)(U=>{M===void 0&&C&&V(U.target.checked),m==null||m(U)},[C,M,m]),K=(0,a.f)(o.j.Checkbox),b=D?(0,n.A)("c-input_unstyled_checkbox",p,K,{"c-input_unstyled_checkbox--focus-visible":T,"c-input_unstyled_checkbox--checked":M}):(0,n.A)("c-input_checkbox",p,K,{"c-input_checkbox--focus-visible":T,"c-input_checkbox--disabled":g}),S=t.createElement("input",_({},P,(0,d.A)(P),{"aria-disabled":g,"aria-checked":E?"mixed":void 0,checked:M,type:"checkbox",required:y,className:b,ref:(0,u.P)(R,I),onChange:g?s.A:B})),G=M!==void 0?M:L,H=(0,t.useMemo)(()=>({onChange:{action:G?r.UiAction.UNCHECK:r.UiAction.CHECK}}),[G]);return C?t.createElement(i.A,{autoClogProps:C,actionProps:H,elementType:r.ElementType.CHECKBOX},S):S});v.displayName="Checkbox";const h=(0,l.A)(v)},5797272849:(x,A,e)=>{"use strict";e.d(A,{E:()=>t});const t={small:"c-form--small",large:"c-form--large"}},3391133100:(x,A,e)=>{"use strict";e.d(A,{Es:()=>s,Yk:()=>l,r7:()=>a,r9:()=>i,zI:()=>o});var t=e(735940183);const n=new t.Ay("form_inputs");function s(r,d){return`${r}_${d}`}c(s,"getInputBuddyId");function i(){return Math.random().toString(36).substring(2,10)}c(i,"getRandomId");const l=c(r=>{const d=r.filter(u=>u);if(d.length!==0)return d.join(" ")},"makeAriaComboIds"),o=c(r=>n.t("You can\u2019t enter more than {maxCharacterLimit, plural, =1 {# character} other {# characters}}.",{maxCharacterLimit:r}),"getMaximumCharacterErrorText"),a=c(r=>n.t("You must enter at least {minCharacterLimit, plural, =1 {# character} other {# characters}}.",{minCharacterLimit:r}),"getMinimumCharacterErrorText")},2660476100:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3134334389),n=e(5255740490);function s(i){let{children:l,className:o,id:a}=i;return l?t.createElement("div",{className:(0,n.A)("c-hint",o),id:a},l):null}c(s,"Hint")},7138682671:(x,A,e)=>{"use strict";e.d(A,{A:()=>d,Q:()=>o});var t=e(3134334389),n=e(5255740490),s=e(735940183);function i(){return i=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},i.apply(this,arguments)}c(i,"_extends");const l=new s.Ay("app_dialog"),o={block:"block",inline:"inline"};var a;let r=c(class extends(a=t.Component){getCursor(){const{cursor:_,htmlFor:v,isDisabled:h}=this.props;return h?null:typeof _>"u"&&v?"pointer":_}renderOptionalTextMaybe(){const{optional:_}=this.props,v=l.t("(optional)");return _?t.createElement("span",{className:"c-label__optional_tag","data-qa-label-optional-tag":!0},v):null}renderSubtextMaybe(){const{subtext:_}=this.props;return _?t.createElement("span",{className:"c-label__subtext","data-qa-label-subtext":!0},_):null}render(){const{className:_,cursor:v,htmlFor:h,optional:f,subtext:I,text:p,type:y,isDisabled:g,dataQaLabel:E,...M}=this.props,T=(0,n.A)("c-label",_,{"c-label--block":y===o.block,"c-label--inline":y===o.inline,"c-label--with_subtext":I,"c-label--pointer":this.getCursor()==="pointer","c-label--disabled":g,"c-label--with_formatted_text":typeof p!="string"});return t.createElement("label",i({},M,{htmlFor:h,className:T,"data-qa-label":E,"data-qa-label-type":y}),t.createElement("span",{className:"c-label__text","data-qa-label-text":!0},p,this.renderOptionalTextMaybe(),this.renderSubtextMaybe()),t.createElement("span",{className:"c-label__children","data-qa-label-children":!0},this.props.children))}},"Label");r.displayName="Label",r.defaultProps={children:null,className:null,cursor:void 0,htmlFor:null,optional:!1,subtext:null,type:"block",isDisabled:!1,dataQaLabel:"true"};const d=r},5375115868:(x,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(5617110048),i=e(1224315998);function l(){return l=Object.assign||function(d){for(var u=1;u<arguments.length;u++){var _=arguments[u];for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(d[v]=_[v])}return d},l.apply(this,arguments)}c(l,"_extends");const o={onChange:{action:i.UiAction.CLICK}};let a=c(class extends t.PureComponent{componentDidMount(){const{focusOnMount:u,autoFocus:_}=this.props;(u||_)&&this.focus()}componentDidUpdate(){const{autoFocus:u}=this.props;u&&this.focus()}focus(){var u;(u=this.inputRef.current)===null||u===void 0||u.focus()}render(){const{className:u,autoClogProps:_,autoFocus:v,focusOnMount:h,...f}=this.props,I=(0,n.A)("c-input_radio",u),p=t.createElement("input",l({},f,{className:I,ref:this.inputRef,type:"radio"}));return _?t.createElement(s.A,{autoClogProps:_,actionProps:o,elementType:i.ElementType.RADIO},p):p}constructor(u){super(u),this.inputRef=t.createRef()}},"Radio");a.displayName="Radio",a.defaultProps={autoFocus:!1};const r=a},9205344153:(x,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(5255740490),s=e(3708320478),i=e(5166368300),l=e(4426213732),o=e(3514889545),a=e(735940183);const r=new a.Ay("form_inputs"),d={inline:"inline",multiline:"multiline"},u=c((p,y)=>p>y,"isCurrentCountInvalid"),_=c((p,y)=>y-p,"getCharacterCount"),v=c((p,y,g)=>!g||p>=g?_(p,y):"","getCharacterCountDisplay"),h=c(p=>p.toString().length,"getCharacterCountLength");let f=c(class extends t.Component{getSnapshotBeforeUpdate(y){if(y.currentCount!==this.props.currentCount){this.updateCharactersRemainingMessage(this.props.currentCount,this.props.maxCharacterLimit);const g=_(this.props.currentCount,this.props.maxCharacterLimit),E=h(g);this.shouldReadCharactersRemainingMessage=!1,this.state.characterCountLength!==E&&this.setCharacterCountLength(E)}return null}componentDidUpdate(y,g){this.props.type===d.inline&&g.characterCountLength!==this.state.characterCountLength&&this.measureCountWidth()}onBlur(){this.shouldReadCharactersRemainingMessage=!0,this.setState(()=>({hasFocus:!1}))}onFocus(){this.setState(()=>({hasFocus:!0}))}getCharacterCountWidth(){return this.characterCountWidth||this.measureCountWidth()}setCharacterCountLength(y){this.setState(()=>({characterCountLength:y}))}setCharactersRemainingMessage(y,g){const E=this.makeCharactersRemainingMessage(y,g);this.setState(()=>({charactersRemainingMessage:E}))}setCharactersRemainingRef(y){this.charactersRemainingElement=y}makeCharactersRemainingMessage(y,g){const E=_(y,g);return r.t("{count, plural, =1 {# character} other {# characters}} remaining",{count:E})}measureCountWidth(){const y=this.charactersRemainingElement&&this.charactersRemainingElement.offsetWidth||0;return this.characterCountWidth=y,y}renderCharactersRemaining(){if(!this.state.hasFocus)return null;const{currentCount:y,maxCharacterLimit:g,counterMinimumCharacters:E}=this.props,M=v(y,g,E);return t.createElement("div",{"aria-hidden":"true",className:"c-input_character_count__characters-remaining",ref:this.setCharactersRemainingRef},M)}render(){const{className:y,currentCount:g,maxCharacterLimit:E,children:M,isDisabled:T,size:D,type:C,id:m}=this.props,O=(0,n.A)(y,"c-input_character_count",{"c-input_character_count--multiline":C===d.multiline,"c-input_character_count--large":D===i.F.large,"c-input_character_count--small":D===i.F.small,"c-input_character_count--invalid":this.state.hasFocus&&u(g,E),"c-input_character_count--disabled":T}),P=this.shouldReadCharactersRemainingMessage&&t.createElement("div",{id:m,hidden:!0},this.state.charactersRemainingMessage);let R;return this.shouldReadCharactersRemainingMessage||(R=t.createElement(s.A,{assertive:!0,message:this.state.charactersRemainingMessage})),t.createElement("div",{role:"presentation",className:O,"data-qa":"input_character_count",onFocus:this.onFocus,onBlur:this.onBlur},M,this.renderCharactersRemaining(),R,P)}constructor(y){super(y);const g=this.makeCharactersRemainingMessage(y.currentCount,y.maxCharacterLimit);this.state={characterCountLength:0,charactersRemainingMessage:g,hasFocus:!1},this.characterCountWidth=0,this.shouldReadCharactersRemainingMessage=!0,(0,l.v)(this,["setCharactersRemainingRef","setCharactersRemainingMessage","onFocus","onBlur"]),this.updateCharactersRemainingMessage=(0,o.A)(this.setCharactersRemainingMessage,1500)}},"CharacterCount");f.displayName="CharacterCount",f.defaultProps={className:void 0,currentCount:0,isDisabled:!1,type:d.inline,size:i.F.medium,counterMinimumCharacters:0,id:void 0};const I=f},2219904496:(x,A,e)=>{"use strict";e.d(A,{A:()=>P});var t=e(3134334389),n=e(5255740490),s=e(2003990933),i=e(7715417323),l=e(581167618),o=e(3391133100),a=e(2660476100),r=e(9205344153),d=e(5166368300),u=e(1610251172);const _={small:"small",medium:"medium",large:"large"},v=c(R=>{let{size:L,icon:V,children:B}=R;const K=(0,n.A)("c-input_text_icon",{"c-input_text_icon--small":L===_.small,"c-input_text_icon--large":L===_.large}),b=(0,n.A)("c-input_text_icon__icon",{"c-input_text_icon__icon--small":L===_.small,"c-input_text_icon__icon--large":L===_.large});return t.createElement("div",{className:K},t.createElement(u.A,{type:V,className:b,size:"inherit"}),B)},"TextInputIcon");v.displayName="TextInputIcon";const h=t.memo(v);let f=c(class extends t.PureComponent{getOverlayText(){return this.props.value||this.props.placeholder}renderOverlay(){const{size:L,prefix:V,suffix:B}=this.props,K=(0,n.A)("c-input_text_overlay",{"c-input_text_overlay--large":L===d.F.large},this.props.className);return t.createElement("div",{className:K,"data-overlay-prefix":V,"data-overlay-suffix":B,"aria-hidden":"true","data-qa":"text_overlay_suffix"},this.getOverlayText())}render(){const{children:L,suffix:V}=this.props;return t.createElement("div",{className:"position_relative","aria-describedby":`Text input with ${V} appended to the text value.`},this.renderOverlay(),L)}},"TextInputOverlay");f.displayName="TextInputOverlay",f.defaultProps={className:"",placeholder:"",size:d.F.medium,value:"",prefix:"",suffix:""};const I=f;var p=e(434544446),y=e.n(p),g=e(8509961938);function E(R,L){const V=M(R);return L&&V.length?V.replace((0,g.A)(),"E").replace(y()(),"E").length:V.length}c(E,"getTextLength");function M(R){return R==null?"":typeof R=="string"?R:String(R)}c(M,"coerceValueToString");var T=e(9665283624),D=e(4426213732);function C(){return C=Object.assign||function(R){for(var L=1;L<arguments.length;L++){var V=arguments[L];for(var B in V)Object.prototype.hasOwnProperty.call(V,B)&&(R[B]=V[B])}return R},C.apply(this,arguments)}c(C,"_extends");const m=12;let O=c(class extends t.PureComponent{componentDidMount(){this.maybeFocusAndSelectOnMount(this.props)}componentDidUpdate(L,V){(this.props.value!==L.value||this.state.isFocused!==V.isFocused)&&this.getTextStyle(),this.props.value!==L.value&&!this.state.everReceivedUserInput&&this.setEverReceivedUserInput(),this.maybeFocusAndSelectOnMount(L)}onBlur(L){const{onBlur:V}=this.props;this.setState(()=>({isFocused:!1})),V&&V(L)}onFocus(L){const{onFocus:V}=this.props;this.setState(()=>({isFocused:!0,everFocused:!0})),V&&V(L)}getPrefixStyle(){const{size:L,prefix:V}=this.props;if(!V)return;let B;const b=document.createElement("canvas").getContext("2d");return b&&(L===d.F.medium?(b.font="15px Slack-Lato",B=b.measureText(V).width+m):L===d.F.small?(b.font="13px Slack-Lato",B=b.measureText(V).width+m):(b.font="18px Slack-Lato",B=b.measureText(V).width+m)),{paddingLeft:B}}getTextStyle(){var L;const{maxCharacterLimit:V}=this.props;if(!V){this.setTextStyle({});return}const K={paddingRight:(L=this.characterCount)===null||L===void 0?void 0:L.getCharacterCountWidth()};this.setTextStyle(K)}setTextStyle(L){this.setState(()=>({textStyle:L}))}setEverReceivedUserInput(){this.setState(()=>({everReceivedUserInput:!0}))}focus(){this.input.current&&this.input.current.focus()}maybeFocusAndSelectOnMount(L){const{focusOnMount:V,forceSelectAll:B}=this.props;this.state.everFocused&&V&&L&&L.focusOnMount===V||!this.input||!this.input.current||!V||(this.props.focusOnMount&&this.props.preventScrollOnFocus?this.input.current.focus({preventScroll:!0}):this.input.current.focus(),B&&this.input.current.select())}getIsInputLengthTooShort(){const{emojisShouldCountAsSingleCharacter:L,isRequired:V,minCharacterLimit:B,value:K}=this.props,{everReceivedUserInput:b}=this.state;if(!b||B==null)return!1;const S=E(K,L);return!V&&S===0?!1:S<B}getIsInputLengthTooLong(){const{maxCharacterLimit:L,value:V,emojisShouldCountAsSingleCharacter:B}=this.props;return L==null?!1:E(V,B)>L}renderDeprecatedErrorMaybe(){const{errorLevel:L,errorText:V,errorType:B,minCharacterLimit:K,maxCharacterLimit:b}=this.props;return V?t.createElement(l.Ay,{id:this.state.errorId,level:L,type:B,className:"margin_bottom_100","data-qa":"form_text_input_alert_on_error_text"},V):this.getIsInputLengthTooLong()?t.createElement(l.Ay,{id:this.state.errorId,level:l.A_.error,type:B,className:"margin_bottom_100"},(0,o.zI)(b)):this.getIsInputLengthTooShort()?t.createElement(l.Ay,{id:this.state.errorId,level:l.A_.error,type:B,className:"margin_bottom_100"},(0,o.r7)(K)):null}renderErrorMaybe(){const{errorText:L,minCharacterLimit:V,maxCharacterLimit:B}=this.props;return L?t.createElement(T.A,{id:this.state.errorId,className:"margin_bottom_100","data-qa":"form-text-inline-alert"},L):this.getIsInputLengthTooLong()?t.createElement(T.A,{id:this.state.errorId,className:"margin_bottom_100","data-qa":"form-text-max-char-alert"},(0,o.zI)(B)):this.getIsInputLengthTooShort()?t.createElement(T.A,{id:this.state.errorId,className:"margin_bottom_100","data-qa":"form-text-max-char-alert"},(0,o.r7)(V)):null}renderHintMaybe(){const{hintText:L}=this.props;return L?t.createElement(a.A,{id:this.state.hintId,"data-qa":"form-text-hint"},L):null}renderTextInput(){const{className:L,errorId:V,errorLevel:B,errorText:K,errorType:b,hintId:S,hintText:G,id:H,isRequired:U,isInvalid:F,labelId:Y,name:Z,onBlur:ee,onChange:j,onCopy:ge,forceSelectAll:ne,onFocus:ue,size:he,prefix:be,suffix:xe,maxCharacterLimit:Le,minCharacterLimit:fe,emojisShouldCountAsSingleCharacter:se,counterMinimumCharacters:Q,icon:k,focusOnMount:N,useInlineAlert:$,showError:W,inputRef:q,preventScrollOnFocus:re,ariaDescribedById:le,autoComplete:Ae,type:Te,readOnly:Ne,...pe}=this.props,Ee=!!K||this.getIsInputLengthTooLong()||this.getIsInputLengthTooShort()||F,oe=(0,n.A)({[`c-input_text--with_${B}`]:Ee,"c-input_text--with_hint":G,"c-input_text--with_icon":k},L),ce=(0,o.Yk)([Y,Ee?this.state.errorId:null]),ke=(0,o.Yk)([le,this.state.hintId,this.characterCounterId]),Ce={...this.state.textStyle,...this.getPrefixStyle()};return t.createElement(d.A,C({},pe,{style:Ce,onFocus:this.onFocus,onBlur:this.onBlur,ariaDescribedby:ke,isInvalid:Ee,ariaLabelledby:ce,ariaRequired:U,className:oe,id:H,name:Z,onChange:j,onCopy:ge,forceSelectAll:ne,ref:this.input,size:he,autoComplete:Ae,type:Te,readOnly:Ne??void 0}))}renderWrappedTextMaybe(){const{prefix:L,suffix:V,value:B,placeholder:K,maxCharacterLimit:b,counterMinimumCharacters:S,size:G,isDisabled:H,icon:U}=this.props;let F=this.renderTextInput();if(b){const Y=E(B,this.props.emojisShouldCountAsSingleCharacter);F=t.createElement(r.A,{id:this.characterCounterId,currentCount:Y,isDisabled:H,maxCharacterLimit:b,counterMinimumCharacters:S,size:G,ref:Z=>{this.characterCount=Z}},F)}return(L||V)&&(F=t.createElement(I,{className:U&&"c-input_text_overlay--icon",placeholder:K,size:G,prefix:L,suffix:V,value:B??void 0},F)),U&&(F=t.createElement(h,{icon:U,size:G},F)),F}render(){const L=this.props.useInlineAlert?this.renderErrorMaybe():this.renderDeprecatedErrorMaybe();return t.createElement("div",{"data-qa-formtext":!0,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},this.renderWrappedTextMaybe(),this.props.showError&&L,this.renderHintMaybe())}constructor(L){super(L),(0,D.v)(this,["onFocus","onBlur","getPrefixStyle"]);const{id:V}=L;this.state={errorId:(0,s.A)(this.props,"errorId",(0,o.Es)(V,"error")),everReceivedUserInput:!1,hintId:(0,s.A)(this.props,"hintId",(0,o.Es)(V,"hint")),isFocused:!1,everFocused:!1,textStyle:{}},L.maxCharacterLimit&&(this.characterCounterId=(0,o.Es)(V,"character-count")),this.input=L.inputRef||t.createRef()}},"FormTextInput");O.displayName="FormTextInput",O.defaultProps={className:null,errorId:void 0,errorLevel:l.A_.error,errorText:null,errorType:l.QE.nestedBox,useInlineAlert:!1,hintId:void 0,hintText:null,isDisabled:!1,isInvalid:!1,isRequired:!1,labelId:null,maxCharacterLimit:null,minCharacterLimit:null,counterMinimumCharacters:0,emojisShouldCountAsSingleCharacter:!1,onBlur:i.A,onChange:i.A,onCopy:i.A,forceSelectAll:!1,readOnly:!1,onFocus:i.A,placeholder:void 0,size:d.F.medium,prefix:void 0,suffix:null,value:"",icon:void 0,focusOnMount:!1,preventScrollOnFocus:!1,showError:!0,inputRef:void 0,ariaDescribedById:void 0,onMouseEnter:i.A,onMouseLeave:i.A,autoComplete:"off",type:void 0,spellCheck:!1,min:0,max:0,autoCorrect:void 0,ariaLabel:void 0,width:0,autoClogProps:void 0,autoFocus:!1,role:void 0,onPaste:i.A,onKeyDown:i.A,onCompositionStart:i.A,onCompositionEnd:i.A};const P=O},8472205500:(x,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(3134334389),n=e(5255740490),s=e(2003990933),i=e(7715417323),l=e(5617110048),o=e(581167618),a=e(3391133100),r=e(2660476100),d=e(9205344153),u=e(8452232783),_=e(9665283624),v=e(4426213732),h=e(1224315998);function f(){return f=Object.assign||function(y){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var M in E)Object.prototype.hasOwnProperty.call(E,M)&&(y[M]=E[M])}return y},f.apply(this,arguments)}c(f,"_extends");const I={onChange:{action:h.UiAction.ENTER_TEXT}};let p=c(class extends t.PureComponent{componentDidMount(){if(this.getTextStyle(),this.props.focusOnMount){var g;(g=this.input.current)===null||g===void 0||g.focus()}}componentDidUpdate(g,E){if((this.props.value!==g.value||this.state.isFocused!==E.isFocused)&&this.getTextStyle(),this.props.value!==g.value&&!this.state.everReceivedUserInput&&this.setEverReceivedUserInput(),this.props.focusOnMount&&g.focusOnMount!==this.props.focusOnMount&&!this.state.isFocused){var M;(M=this.input.current)===null||M===void 0||M.focus()}}onBlur(){const{onBlur:g}=this.props;this.setFocus(!1),g&&g()}onFocus(){const{onFocus:g}=this.props;this.setFocus(!0),g&&g()}getTextStyle(){var g;const{maxCharacterLimit:E}=this.props;if(!E){this.setTextStyle({});return}const T={paddingRight:(g=this.characterCount)===null||g===void 0?void 0:g.getCharacterCountWidth()};this.setTextStyle(T)}setCharacterCountRef(g){this.characterCount=g}setEverReceivedUserInput(){this.setState(()=>({everReceivedUserInput:!0}))}setFocus(g){this.setState(()=>({isFocused:g}))}setInputRef(g){this.input=g}setTextStyle(g){this.setState(()=>({textStyle:g}))}blur(){this.input.current&&this.input.current.blur()}focus(){this.input.current&&this.input.current.focus()}getIsInputLengthTooShort(){const{isRequired:g,minCharacterLimit:E,value:M}=this.props,{everReceivedUserInput:T}=this.state;return!T||E==null||!g&&M.length===0?!1:M.length<E}getIsInputLengthTooLong(){const{maxCharacterLimit:g,value:E}=this.props;return g==null?!1:E.length>g}renderDeprecatedErrorMaybe(){const{showError:g,errorLevel:E,errorText:M,errorType:T,isRequired:D,maxCharacterLimit:C,minCharacterLimit:m,value:O}=this.props;return g?M?t.createElement(o.Ay,{id:this.state.errorId,level:E,type:T,className:"margin_bottom_100"},M):!D&&O.length===0?null:this.getIsInputLengthTooLong()?t.createElement(o.Ay,{id:this.state.errorId,level:o.A_.error,type:T,className:"margin_bottom_100"},(0,a.zI)(C)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(o.Ay,{id:this.state.errorId,level:o.A_.error,type:T,className:"margin_bottom_100"},(0,a.r7)(m)):null:null}renderErrorMaybe(){const{showError:g,errorText:E,isRequired:M,maxCharacterLimit:T,minCharacterLimit:D,value:C}=this.props;return g?E?t.createElement(_.A,{"data-qa":"form-text-area-inline-alert",id:this.state.errorId},E):!M&&C.length===0?null:this.getIsInputLengthTooLong()?t.createElement(_.A,{id:this.state.errorId,"data-qa":"form-text-area-max-char-alert"},(0,a.zI)(T)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(_.A,{id:this.state.errorId,"data-qa":"form-text-area-min-char-alert"},(0,a.r7)(D)):null:null}renderHintMaybe(){const{hintText:g}=this.props;return g?t.createElement(r.A,{id:this.state.hintId},g):null}renderTextArea(){const{className:g,showError:E,errorId:M,errorLevel:T,errorText:D,errorType:C,hintId:m,hintText:O,useInlineAlert:P,id:R,isRequired:L,isInvalid:V,labelId:B,name:K,onChange:b,onFocus:S,onBlur:G,maxCharacterLimit:H,minCharacterLimit:U,focusOnMount:F,autoClogProps:Y,ariaDescribedById:Z,inputRef:ee,...j}=this.props,{textStyle:ge}=this.state,ne=!!D||this.getIsInputLengthTooLong()||this.getIsInputLengthTooShort()||V,ue=(0,n.A)({[`c-input_textarea--with_${T}`]:ne,"c-input_textarea--with_hint":O,"c-input_textarea--with_character_count":!!H,"c-input_text--with_inline_alert":P},g),he=(0,a.Yk)([B,ne?this.state.errorId:void 0]),be=(0,a.Yk)([Z,this.state.hintId,this.characterCounterId]),xe=t.createElement(u.A,f({},j,{ref:this.setInputRef,style:ge,ariaDescribedby:be,isInvalid:ne,ariaLabelledby:he,ariaRequired:L,className:ue,id:R,"data-qa":j["data-qa"]||R,name:K,onChange:b,onFocus:this.onFocus,onBlur:this.onBlur}));return Y?t.createElement(l.A,{autoClogProps:Y,actionProps:I,elementType:h.ElementType.TEXTAREA},xe):xe}renderWrappedTextareaMaybe(){const{value:g,maxCharacterLimit:E,size:M,isDisabled:T}=this.props;let D=this.renderTextArea();return E&&(D=t.createElement(d.A,{id:this.characterCounterId,ref:this.setCharacterCountRef,currentCount:g==null?void 0:g.length,isDisabled:T,maxCharacterLimit:E,type:"multiline",size:M},D)),D}render(){const g=this.props.useInlineAlert?this.renderErrorMaybe():this.renderDeprecatedErrorMaybe();return t.createElement("div",{"data-qa-formtextarea":!0,className:"c-input_textarea__wrapper"},this.renderWrappedTextareaMaybe(),g,this.renderHintMaybe())}constructor(g){super(g);const{id:E}=this.props;(0,v.v)(this,["onFocus","onBlur","setInputRef","setCharacterCountRef"]),this.state={errorId:(0,s.A)(this.props,"errorId",(0,a.Es)(E,"error")),hintId:(0,s.A)(this.props,"hintId",(0,a.Es)(E,"hint")),isFocused:!1,everReceivedUserInput:!1,textStyle:{}},this.props.maxCharacterLimit&&(this.characterCounterId=(0,a.Es)(E,"character-count")),this.input=t.createRef()}},"FormTextareaInput");p.displayName="FormTextareaInput",p.defaultProps={className:null,showError:!0,errorId:void 0,errorLevel:o.A_.error,errorText:null,errorType:o.QE.nestedBox,useInlineAlert:!1,hintText:null,hintId:void 0,isDisabled:!1,isRequired:!1,isInvalid:!1,labelId:null,onChange:i.A,onFocus:i.A,onBlur:i.A,placeholder:void 0,size:u.F.medium,value:"",maxCharacterLimit:null,minCharacterLimit:null,focusOnMount:!1,autoClogProps:void 0,type:void 0,ariaDescribedById:void 0,role:void 0,inputRef:void 0}},5166368300:(x,A,e)=>{"use strict";e.d(A,{A:()=>_,F:()=>r});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(5617110048),l=e(5797272849),o=e(1224315998);function a(){return a=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},a.apply(this,arguments)}c(a,"_extends");const r={small:"small",medium:"medium",large:"large"};var d;let u=c(class extends(d=t.Component){componentDidMount(){if(this.props.focusOnMount){var h;(h=this.props.refToForward.current)===null||h===void 0||h.focus()}}onChange(h){this.props.onChange&&this.props.onChange(h.target.value)}onCopy(){this.props.onCopy&&this.props.onCopy()}onClick(h){this.props.readOnly&&this.props.forceSelectAll&&h.currentTarget.select()}blur(){var h;(h=this.props.refToForward.current)===null||h===void 0||h.blur()}focus(){var h;(h=this.props.refToForward.current)===null||h===void 0||h.focus()}render(){const{ariaDescribedby:h,isInvalid:f,ariaLabelledby:I,ariaRequired:p,className:y,id:g,isDisabled:E,name:M,placeholder:T,size:D,type:C,refToForward:m,ariaLabel:O,forceSelectAll:P,focusOnMount:R,autoClogProps:L,autoComplete:V,...B}=this.props,K=(0,n.A)("c-input_text",{"c-input_text--large":D===r.large,"c-input_text--small":D===r.small,"c-input_text--with_error":f,"c-input_text--with_inline_alert":f,[l.E.small]:D===r.small,[l.E.large]:D===r.large},y),b=t.createElement("input",a({},B,{"aria-describedby":B["aria-describedby"]||h,"aria-invalid":B["aria-invalid"]||f,"aria-labelledby":B["aria-labelledby"]||I,"aria-required":B["aria-required"]||p,"aria-label":B["aria-label"]||O,autoComplete:V,className:K,disabled:E,id:g,name:M,onChange:this.onChange,onCopy:this.onCopy,onClick:this.onClick,placeholder:T,ref:m,type:C}));return L?t.createElement(i.A,{autoClogProps:L,actionProps:{onChange:{action:o.UiAction.ENTER_TEXT},onCopy:{action:o.UiAction.COPY_TO_CLIPBOARD}},elementType:o.ElementType.INPUT},b):b}constructor(h){super(h),this.onChange=this.onChange.bind(this),this.onCopy=this.onCopy.bind(this),this.onClick=this.onClick.bind(this)}},"TextInput");u.displayName="TextInput",u.defaultProps={ariaDescribedby:"",isInvalid:!1,ariaLabelledby:"",ariaRequired:!1,ariaLabel:"",className:null,isDisabled:!1,onChange:s.A,onCopy:s.A,forceSelectAll:!1,readOnly:!1,placeholder:"",size:"medium",value:"",type:"text",focusOnMount:!1,autoComplete:"off"};const _=t.forwardRef((v,h)=>t.createElement(u,a({},v,{refToForward:h||t.createRef()})))},8452232783:(x,A,e)=>{"use strict";e.d(A,{A:()=>v,F:()=>r});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(5617110048),l=e(5797272849),o=e(1224315998);function a(){return a=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var I=arguments[f];for(var p in I)Object.prototype.hasOwnProperty.call(I,p)&&(h[p]=I[p])}return h},a.apply(this,arguments)}c(a,"_extends");const r={small:"small",medium:"medium",large:"large"},d={onBlur:{action:o.UiAction.SAVE}};var u;let _=c(class extends(u=t.Component){componentDidMount(){var f;this.props.focusOnMount&&(!((f=this.textAreaRef)===null||f===void 0)&&f.current)&&this.textAreaRef.current.focus()}onChange(f){this.props.onChange(f.target.value)}render(){const{ariaDescribedby:f,isInvalid:I,ariaLabelledby:p,ariaRequired:y,className:g,placeholder:E,id:M,isDisabled:T,name:D,resize:C,size:m,focusOnMount:O,autoClogProps:P,...R}=this.props,L=(0,n.A)("c-input_textarea",{"c-input_textarea--large":m===r.large,"c-input_textarea--small":m===r.small,"c-input_textarea--resize_none":C==="none","c-input_textarea--resize_both":C==="both","c-input_textarea--resize_h":C==="horizontal","c-input_textarea--with_error":I,"c-input_textarea--with_inline_alert":I,[l.E.small]:m===r.small,[l.E.large]:m===r.large},g),V=t.createElement("textarea",a({},R,{"aria-describedby":f,"aria-invalid":I,"aria-labelledby":p,"aria-required":y,className:L,disabled:T,id:M,name:D,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:E,ref:this.textAreaRef,value:this.props.value,style:this.props.style,maxLength:this.props.maxLength}));return P?t.createElement(i.A,{autoClogProps:P,actionProps:d,elementType:o.ElementType.TEXTAREA},V):V}constructor(f){super(f),this.onChange=this.onChange.bind(this),this.textAreaRef=t.createRef()}},"TextareaInput");_.displayName="TextareaInput",_.defaultProps={ariaDescribedby:"",isInvalid:!1,ariaLabelledby:"",ariaRequired:!1,className:null,isDisabled:!1,onChange:s.A,onFocus:s.A,onBlur:s.A,placeholder:"",resize:null,size:r.medium,style:void 0,maxLength:void 0,value:"",focusOnMount:!1,autoClogProps:void 0};const v=_},4967176632:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(3564666345);function s(){return s=Object.assign||function(o){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(o[d]=r[d])}return o},s.apply(this,arguments)}c(s,"_extends");function i(o){let{className:a=void 0,initialValues:r,initialErrors:d=void 0,validate:u=void 0,validationSchema:_=void 0,validateOnBlur:v=!0,validateOnChange:h=!0,validateOnMount:f=!1,onReset:I=void 0,onSubmit:p,children:y,...g}=o;const E=I?{onReset:I}:{};return t.createElement(n.l1,s({initialValues:r,initialErrors:d,validate:u,validationSchema:_,validateOnBlur:v,validateOnChange:h,validateOnMount:f,onSubmit:p},E,g),M=>{let{handleSubmit:T,handleReset:D,...C}=M;return t.createElement("form",{className:a,onSubmit:T,onReset:D},y({...C}))})}c(i,"Form"),i.displayName="Form";const l=i},3155323475:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(9665283624);function i(l){let{className:o,errors:a}=l;var r;return a&&a.length>0?t.createElement(t.Fragment,null,a.map(d=>(0,t.isValidElement)(d.message)?t.cloneElement(d.message,{key:d.id,id:d.id,className:(0,n.A)(o,"c-field_input__helpers")}):(r=!!d.message&&t.createElement(s.A,{className:(0,n.A)(o,"c-field_input__helpers"),key:d.id,id:d.id},d.message))!==null&&r!==void 0?r:null)):null}c(i,"FieldErrors")},7811786890:(x,A,e)=>{"use strict";e.d(A,{DQ:()=>u,IM:()=>o,T$:()=>d,Wz:()=>h,Zr:()=>f,m4:()=>i,mw:()=>l});var t=e(9746734072),n=e(6313685253),s=e(9113979368);const i={email:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,phone:/^[0-9._+-]{8,15}$/i},l=c(I=>{const p=typeof I=="boolean",y=typeof I=="string",g=p&&!I,E=y&&(!I||!I.trim()),M=(0,t.A)(I)&&!I.length;return g||E||M||I===null?"Required":null},"required"),o=c((I,p)=>y=>(i[I]||I).test(y)?null:p,"regexPattern"),a=o(i.email,"Please enter a valid email address."),r=o(i.phone,"Please enter a valid phone number."),d=c(I=>p=>!p||p.length<I?`Minimum of ${I} characters`:null,"minCharacterCount"),u=c(I=>p=>p.length>I?`Max character limit is ${I}`:null,"maxCharacterCount"),_=c(I=>p=>{let y=null;return I.forEach(g=>{p===g&&(y=`Cannot use ${p}`)}),y},"tokenNotAllowed"),v=c(I=>p=>{let y=null,g;return p&&p.length&&(p.includes(",")?(g=p.split(",").filter(E=>!!I.includes(E)),y=`Cannot use ${g}`):I.includes(p)&&(g=p,y=`Cannot use ${g}`)),y},"tokensNotAllowed"),h=c(I=>p=>{const y=(0,n.A)(I,(g,E,M)=>{const T=E.map(D=>D(p[M],p)).filter(Boolean);return T.length>0&&(g[M]=T),g},{});return(0,s.A)(y)?void 0:y},"createValidation"),f=c(I=>p=>{const y=I.map(g=>g(p)).filter(Boolean);return(0,s.A)(y)?void 0:y},"createValidate")},9665283624:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(3708320478),i=e(8683010724);function l(){return l=Object.assign||function(r){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(r[_]=u[_])}return r},l.apply(this,arguments)}c(l,"_extends");let o=c(class extends t.PureComponent{render(){const{children:d,className:u,id:_,...v}=this.props,h=(0,n.A)("c-inline_alert",u);return t.createElement("div",l({},v,{className:h,id:_,"data-qa-error":!0}),t.createElement(i.A,{name:"info"}),t.createElement(s.z,{assertive:!0},t.createElement("span",{className:"c-inline_alert__text"},d)))}},"InlineAlert");o.displayName="InlineAlert",o.defaultProps={className:"",id:""};const a=o},440635146:(x,A,e)=>{"use strict";e.d(A,{ed:()=>f,tc:()=>u,zG:()=>I});var t=e(3134334389),n=e(5255740490),s=e(1610251172),i=e(8214116048),l=e(571104883),o=e(735940183);const a=new o.Ay("keyboard_key");var r;(function(p){p.ArrowUp="\u2191",p.ArrowDown="\u2193",p.ArrowLeft="\u2190",p.ArrowRight="\u2192"})(r||(r={}));var d;(function(p){p.CmdOrCtrl="CmdOrCtrl",p.OptOrAlt="OptOrAlt"})(d||(d={}));const u={...r,...d},_=Object.values(r).map(p=>p.toString()),v={Cmd:"cmd-small",[r.ArrowUp]:"caret-up",[r.ArrowDown]:"caret-down",[r.ArrowLeft]:"caret-left",[r.ArrowRight]:"caret-right"},h=c(p=>p===d.CmdOrCtrl?(0,l.cX)()?"Cmd":"Ctrl":p===d.OptOrAlt?(0,l.cX)()?"Option":"Alt":p,"getKeyForOS"),f=c(p=>({"\u2191":a.t("up arrow"),"\u2193":a.t("down arrow"),"\u2190":a.t("left arrow"),"\u2192":a.t("right arrow"),Ctrl:a.t("control"),"\u2318":a.t("command"),Cmd:a.t("command"),Option:a.t("option"),Alt:a.t("alt"),".":a.t("period"),",":a.t("comma"),"[":a.t("left bracket"),"]":a.t("right bracket"),"+":a.t("plus"),"-":a.t("minus"),Esc:a.t("escape"),Strg:"Steuerung"}[p]||String(p)).toLowerCase(),"getNameForKey"),I=c(p=>{let{label:y,className:g,slim:E=!1,theme:M=i.Sx.Light,tooltip:T=!1}=p;const D=String(y),C=_.includes(D),m=h(D),O=v[m],P=(0,n.A)(g,{"c-keyboard_key":!0,"c-keyboard_key__arrow_key":C,"c-keyboard_key--slim":E,"c-keyboard_key--dark":M===i.Sx.Dark,"c-keyboard_key__tooltip":T}),R=f(m);return t.createElement("div",{role:"img","aria-label":R,className:P},O?t.createElement(s.A,{type:O,size:E?"inherit":20,inline:E}):m)},"KeyboardKey");I.displayName="KeyboardKey"},9194155027:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(440635146),i=e(571104883);const l=c(()=>(0,i.cX)()?t.createElement("span",{"data-qa":"keyboard-keys-tip-key-delimiter",className:"c-keyboard_keys--delimiter"},"\xA0"):t.createElement("span",{"data-qa":"keyboard-keys-tip-key-delimiter",className:"c-keyboard_keys--delimiter"},"+"),"Delimiter");l.displayName="Delimiter";const o=c(r=>{let{isInline:d=!1,title:u,mainKey:_,modifier:v,modifiers:h,className:f,useSlimModifiers:I}=r;const p=(0,n.A)("c-keyboard_keys",{"c-keyboard_keys--inline":d,"c-keyboard_key__tooltip_text":!(v||h)},f),y=(0,n.A)("c-keyboard_keys--title",{"c-keyboard_keys--title-inline":d}),g=v?[v]:h,E=g==null?void 0:g.map(M=>t.createElement(t.Fragment,{key:`${M}_key`},t.createElement(s.zG,{label:M,tooltip:!0,slim:I}),t.createElement(l,null)));return t.createElement(t.Fragment,null,t.createElement("span",{className:y,"aria-hidden":"true"},u),t.createElement("span",{className:p},E,t.createElement(s.zG,{label:_,tooltip:!0})))},"KeyboardKeysTooltip");o.displayName="KeyboardKeysTooltip";const a=o},9742374352:(x,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(5617110048),i=e(3753517560),l=e(6538933722),o=e(1224315998),a=e(6695894399);function r(){return r=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},r.apply(this,arguments)}c(r,"_extends");const d={onClick:{action:o.UiAction.CLICK}},u=t.forwardRef(c(function(h,f){let{autoClogProps:I,className:p,href:y,invert:g=!1,children:E,hasKeyboardFocus:M=!1,...T}=h;const D=(0,n.A)("c-link",{"c-link--focus-visible":M,"c-link--invert":g},p),C=T.target==="_blank"||(y==null?void 0:y.startsWith("mailto:")),m=t.createElement("a",r({},(0,a.A)(T),{className:D,href:y,ref:f}),E,C&&t.createElement(l.A,null));return I?t.createElement(s.A,{autoClogProps:I,actionProps:d,elementType:o.ElementType.LINK},m):m},"BaseLink"));u.displayName="BaseLink";const _=(0,i.A)(u)},9163962844:(x,A,e)=>{"use strict";e.d(A,{A:()=>n,r:()=>t.rY});var t=e(2762351398);const n=t.Ay},2762351398:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>r,rY:()=>l});var t=e(3134334389),n=e(5255740490),s=e(2312625946);function i(){return i=Object.assign||function(d){for(var u=1;u<arguments.length;u++){var _=arguments[u];for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(d[v]=_[v])}return d},i.apply(this,arguments)}c(i,"_extends");const l={transparent:"transparent",black:"black",red:"red",white:"white",blue:"blue",minGray:"min_gray",minGrayDarken:"min_gray_darken",themed:"themed"},o=c((d,u)=>d>u?`${u}+`:String(d),"getCountText"),a=c(d=>{let{className:u,count:_,maxCount:v=9,style:h="black",toolTipText:f=""}=d;if(!_||_<0)return null;const I=f?s.Ay:t.Fragment,p=f?{tip:f}:{};return t.createElement(I,i({},p),t.createElement("span",{"aria-hidden":"true",className:(0,n.A)(u,"c-mention_badge",`c-mention_badge--${h}`,{"c-mention_badge--max":_>v},f&&"c-mention_badge--default"),"data-qa":"mention_badge"},o(_,v)))},"MentionBadge");a.displayName="MentionBadge";const r=t.memo(a)},3514831633:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>r,Dr:()=>s.A,YJ:()=>t.YJ,a:()=>n.A,bX:()=>l.Ay,c$:()=>i.Ay,cQ:()=>o.A});var t=e(1865069963),n=e(8383646472),s=e(8245211418),i=e(7417231112),l=e(8184841524),o=e(7433650413),a=e(101973425);const r=t.Ay},8383646472:(x,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(3134334389),n=e(2141441167),s=e(862210999),i=e(3297051565),l=e.n(i),o=e(1658558415),a=e(4902318931),r=e(6308822),d=e(1865069963),u=e(8245211418),_=e(7417231112),v=e(8184841524),h=e(8773153312),f=e(1959847761);function I(){return I=Object.assign||function(M){for(var T=1;T<arguments.length;T++){var D=arguments[T];for(var C in D)Object.prototype.hasOwnProperty.call(D,C)&&(M[C]=D[C])}return M},I.apply(this,arguments)}c(I,"_extends");const p={type:l().oneOf((0,n.A)(h.A)),label:l().node,description:l().oneOfType([l().string,l().element]),children:l().element,key:l().string,click:l().func,danger:l().bool,dataQa:l().string,checked:l().bool,indeterminate:l().bool,ariaHidden:l().bool,target:l().string,href:l().string,download:l().string,action:l().func,payload:l().object,autoClogProps:l().object},y={template:l().arrayOf(l().shape({...p,renderSubmenu:l().func,template:l().arrayOf(l().shape(p)),submenu:l().arrayOf(l().shape(p)),checked:l().bool})).isRequired};let g=c(class nr extends t.PureComponent{render(){const{template:T,...D}=this.props,C=T.map((m,O)=>{if(!m)return null;if(m.type===h.A.separator)return t.createElement(v.Ay,I({},m,{key:m.key||`separator-${O}`}));if(m.type===h.A.sub_separator)return t.createElement(v.Ay,I({},m,{className:"c-menu_separator__li--sub",key:m.key||`separator-${O}`}));if(m.type===h.A.header)return t.createElement(_.Ay,{key:m.key||`header-${O}`,label:m.label,className:m.className});if(m.type===h.A.loading)return t.createElement(r.A,{key:m.key||"loading",size:"large"});const P={children:m.children,className:m.className,classNameListItem:m.classNameListItem,label:m.label,description:m.description,icon:m.icon,badgeCount:m.badgeCount,badgeLabel:m.badgeLabel,badgeClassName:m.badgeClassName,shortcut:m.shortcut,showEnter:m.showEnter,onSelected:m.click,target:m.target,href:m.href,download:m.download,danger:m.danger,type:m.type,"data-qa":m.dataQa,disabled:m.disabled,showOfflineIcon:m.showOfflineIcon,showLinkIndicatorIcon:m.showLinkIndicatorIcon,checked:m.checked,indeterminate:m.indeterminate,width:m.submenuWidth,autoClogProps:m.autoClogProps,megaphoneSpaceName:m.megaphoneSpaceName,megaphoneNotificationName:m.megaphoneNotificationName,onMount:m.onMount,onUnmount:m.onUnmount,ariaDescribedBy:m.ariaDescribedBy,ariaRole:m.ariaRole,ariaLabel:m.ariaLabel},R=m.key||m.label;if(m.type===h.A.submenu){const V=(0,s.A)(m.renderSubmenu)?m.renderSubmenu:B=>t.createElement(nr,I({template:m.template||m.submenu},B,{width:m.submenuWidth}));return t.createElement(f.A,I({},P,{label:m.label,renderSubmenu:V,key:R}))}if(m.type===h.A.custom)return m.ariaHidden===!1&&!(0,o.A)()?m.children:t.createElement("div",{"aria-hidden":m.ariaHidden===!1?"false":"true",key:m.key,"data-qa":m.dataQa},m.children);if(m.type===h.A.subheaderChild)return t.createElement(u.A,I({key:R,type:h.A.subheaderChild},P));const L=t.createElement(u.A,I({key:R},P));return m.megaphoneSpaceName&&m.megaphoneNotificationName?t.createElement(a.Ay,{key:R,spaceName:m.megaphoneSpaceName,notifications:{[m.megaphoneNotificationName]:{component:()=>L}}}):L});return t.createElement(d.Ay,I({},D),C)}},"MenuFromTemplate");g.displayName="MenuFromTemplate",g.propTypes=y;const E=g},7417231112:(x,A,e)=>{"use strict";e.d(A,{$b:()=>d,Ay:()=>a,a6:()=>r});var t=e(3134334389),n=e(5255740490),s=e(7715417323);function i(){return i=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},i.apply(this,arguments)}c(i,"_extends");const l="_isSlackMenuItemHeader";function o(u){let{for:_,label:v,className:h,onMouseEnter:f=s.A}=u;return t.createElement("div",i({},_&&{id:d(_)},{"aria-hidden":"true",className:(0,n.A)("c-menu_item__header",h),onMouseEnter:f,"data-qa":"menu-item-header"}),v)}c(o,"MenuItemHeader"),o.displayName="MenuItemHeader",o[l]=!0;const a=o;function r(u){return!!(u!=null&&u[l])}c(r,"isMenuItemHeader");function d(u){return`${u}-label`}c(d,"getMenuItemHeaderIdForGroup")},8245211418:(x,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(3134334389),n=e(5255740490),s=e(3078252698),i=e(7715417323),l=e(8049923572),o=e(6084388622),a=e(7420598276),r=e(1610251172),d=e(2762351398),u=e(8773153312),_=e(101973425),v=e(8683010724),h=e(1224315998),f=e(571104883),I=e(735940183),p=e(9391594207);const y=new I.Ay("menu");let g=c(class extends t.Component{componentDidMount(){this.props.onMount&&this.props.onMount()}componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount()}onSelected(C){var m,O;(O=(m=this.props).menuCallbackBefore)===null||O===void 0||O.call(m,C),this.props.onSelected(C),this.props.menuCallback(this.props.menuCallbackId,C)}determineMenuRole(){const{type:C,ariaRole:m}=this.props;if(m)return m;switch(C){case u.A.radio:return"menuitemradio";case u.A.checkbox:return"menuitemcheckbox";default:return"menuitem"}}renderBadgeMaybe(){const{badgeLabel:C,badgeCount:m,badgeClassName:O,badgeVariant:P,highlighted:R}=this.props;return m?t.createElement(d.Ay,{count:m,style:R?d.rY.white:d.rY.red}):C?t.createElement(a.A,{className:O,variant:P},C):null}renderAdditionalIconMaybe(){const{additionalIcon:C}=this.props;return C?t.createElement("div",{className:"c-menu_item__additional-icon","data-qa":"menu_item_additional_icon",role:"presentation"},C):null}renderCaret(){return!this.props.withSubmenu||this.props.disabled?null:t.createElement("div",{className:"c-menu_item__submenu-indicator","data-qa":"menu_item_submenu_indicator",role:"presentation"},t.createElement(v.A,{name:this.props.showFullCarat?"caret-right-full":"caret-right"}))}renderEnterMaybe(){const{showEnter:C,highlighted:m}=this.props;return!C||!m?null:t.createElement(r.A,{legacy:!0,type:"enter",className:"c-menu_item__enter","data-qa":"menu_item_enter",role:"presentation"})}renderCheckmarkMaybe(){const{type:C,checked:m,indeterminate:O}=this.props,P=C===u.A.radio||C===u.A.checkbox;return P&&O?t.createElement(r.A,{className:"c-menu_item__checkbox_dash","data-qa":"menu_item_checkbox_dash",type:"form-checkbox-dash",size:"inherit",inline:!0}):P&&m?t.createElement("div",{className:"c-menu_item__checkmark"},t.createElement(v.A,{name:"check",size:"16",inline:!0,"data-qa":"menu_item_checkmark"})):null}renderIconMaybe(){const{icon:C}=this.props;return C?t.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},C):null}renderLinkIconMaybe(){const{href:C,showLinkIndicatorIcon:m}=this.props;return m===!1||m!==!0&&!C?null:t.createElement("div",{className:"c-menu_item__link_icon","data-qa":"menu_item_link_icon",role:"presentation"},t.createElement(v.A,{name:"new-window","data-qa":"menu_item_link_indicator"}))}renderShortcutMaybe(){const{shortcut:C,containerSize:m,experimentSkResponsiveMenusGroupOn:O,isResponsive:P}=this.props;if(!C||O&&P&&m&&m.width<300)return null;if(!(0,s.A)(C)&&"label"in C){const{label:R}=C;if(R&&(0,s.A)(R))return t.createElement("div",{className:"c-menu_item__shortcut"},R)}return t.createElement("div",{className:"c-menu_item__shortcut"},C)}render(){const{autoClogProps:C,children:m,className:O,classNameListItem:P,danger:R,link:L,description:V,disabled:B,showOfflineIcon:K,highlighted:b,label:S,onMouseEnter:G,onMouseLeave:H,href:U,target:F,download:Y,type:Z,withSubmenu:ee,standaloneHoverEffect:j,checked:ge,indeterminate:ne,measureRef:ue,containerSize:he,experimentSkResponsiveMenusGroupOn:be,isResponsive:xe,ariaDescribedBy:Le,ariaLabelledBy:fe,ariaLabel:se,disableHoverStyling:Q}=this.props,k=(0,n.A)(O,"c-menu_item__button",{"c-menu_item__button--highlighted":b&&!B&&!Q,"c-menu_item__button--danger":R,"c-menu_item__button--link":L,"c-menu_item__button--disabled":B,"c-menu_item__button--with_submenu":ee,"c-menu_item--button--subheader_child":Z===u.A.subheaderChild,"c-menu_item__button--checked":(Z===u.A.radio||Z===u.A.checkbox)&&(ge||ne),"c-menu_item--compact":Z===u.A.compactItem,"c-menu_item--standalone":j}),N=(0,n.A)(P,"c-menu_item__li",{"c-menu_item__li--highlighted":b&&!Q}),$=(0,n.A)(P,"c-menu_item__label",{"c-menu_item__label--with_description":V}),W=ee?"true":void 0,q=V?t.createElement("div",{className:"c-menu_item__description"},V):"",re=this.props.activeMenuId,le=this.props.featureSubmenuRoleDescription?y.t("submenu"):void 0,Ae=(0,f.cX)()&&ee?le:void 0;return t.createElement("div",{ref:ue,className:N,onMouseEnter:G,onMouseLeave:H,"data-qa":`${this.props["data-qa"]}-wrapper`},t.createElement(o.Nm,{autoClogProps:{...C,elementType:h.ElementType.MENU_ITEM},ref:this.buttonRef,id:re,className:k,disabled:B,onClick:this.onSelected,href:U,target:F,download:Y,"data-qa":this.props["data-qa"],role:this.determineMenuRole(),checked:ge,"aria-checked":ne?"mixed":ge,"aria-haspopup":W,tabIndex:-1,"aria-roledescription":Ae,"aria-describedby":Le,"aria-labelledby":fe,"aria-label":se},this.renderCheckmarkMaybe(),this.renderIconMaybe(),t.createElement("div",{className:$},S,m,!(be&&xe&&he&&he.width<300)&&q),this.renderShortcutMaybe(),this.renderBadgeMaybe(),this.renderAdditionalIconMaybe(),this.renderCaret(),this.renderEnterMaybe(),this.renderLinkIconMaybe(),K&&t.createElement("div",{className:"c-menu_item__icon c-menu_item__icon--offline","data-qa":"menu_item_icon",role:"presentation"},t.createElement(r.A,{type:"cloud-offline-small"}))))}constructor(C){super(C),this.onSelected=this.onSelected.bind(this),this.buttonRef=t.createRef()}},"MenuItem");g.displayName="MenuItem",g.defaultProps={children:void 0,highlighted:!1,onMouseEnter:i.A,onMouseLeave:i.A,onSelected:i.A,menuCallback:i.A,menuCallbackBefore:i.A,menuCallbackId:null,className:"",classNameListItem:"",label:"",description:"",danger:!1,link:!1,disabled:!1,showOfflineIcon:!1,href:null,showLinkIndicatorIcon:void 0,icon:null,shortcut:void 0,badgeCount:void 0,badgeLabel:void 0,badgeClassName:void 0,badgeVariant:void 0,showEnter:!1,target:void 0,download:void 0,type:u.A.default,withSubmenu:!1,"data-qa":"menu_item_button",activeMenuId:void 0,standaloneHoverEffect:void 0,autoClogProps:void 0,checked:void 0,indeterminate:void 0,featureSubmenuRoleDescription:!1,group:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0,ariaDescribedBy:void 0,ariaLabel:void 0,onMount:i.A,onUnmount:i.A,showFullCarat:!1,disableHoverStyling:!1};const E={MenuItem:g},M=c(D=>({experimentSkResponsiveMenusGroupOn:(0,l.IN)(D)}),"mapStateToProps"),T=(0,_.Ay)((0,p.N)(M)((0,l.BM)(g)))},8184841524:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>l,Ex:()=>s,HP:()=>o});var t=e(3134334389),n=e(5255740490);const s="_isSlackMenuSeparator";function i(a){let{className:r,noPadding:d,noPaddingAbove:u,noPaddingBelow:_,noFirstChild:v,noLastChild:h,dataQa:f="menu_separator__separator"}=a;const I=(0,n.A)("c-menu_separator__li",{padding_0:d,padding_top_0:u,padding_bottom_0:_,"c-menu_separator__li--no_first_child":v,"c-menu_separator__li--no_last_child":h},r);return t.createElement("div",{className:I},t.createElement("hr",{className:"c-menu_separator__separator","data-qa":f}))}c(i,"MenuSeparator"),i.displayName="MenuSeparator",i[s]=!0;const l=i;function o(a){return!!(a!=null&&a[s])}c(o,"isMenuSeparator")},7433650413:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5249175977),s=e(2689960678);function i(){return i=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(a[u]=d[u])}return a},i.apply(this,arguments)}c(i,"_extends");const l=c(a=>{const{renderMenu:r,onPopoverOpen:d,onPopoverClose:u,isDisabled:_=!1,closeOnSelect:v=!0,onTriggerClose:h,onMenuItemSelected:f,onMenuKeyDown:I,...p}=a,y=c(()=>{d&&d()},"onOpenProp"),g=c(M=>{const{onClose:T,...D}=M,C=c((R,L)=>{T&&T(R),u&&u(R)},"onCloseProp"),P=r({...M,onTriggerClose:c(R=>{T&&T(R),h&&h(R)},"onTriggerClose"),onMenuItemSelected:c((R,L)=>{v&&(T&&T(L),u&&u(L)),f&&f(R,L)},"onMenuItemSelected"),onMenuKeyDown:I});return P?t.createElement(n.AM,i({shouldFade:!1,onClose:C,onOpen:y},D),P):!1},"renderPopover");if(g.displayName="renderPopover",_)return typeof a.children=="function"?a.children(s.t0):a.children;const E=a.isContextMenu?s.t0:{...p.triggerProps,"aria-haspopup":"menu"};return t.createElement(n.Wv,i({},p,{triggerProps:E,renderPopover:g}),a.children)},"MenuTrigger");l.displayName="MenuTrigger";const o=l},8773153312:(x,A,e)=>{"use strict";e.d(A,{A:()=>n,y:()=>t});const t={default:"default",compactItem:"compact_item",separator:"separator",sub_separator:"sub_separator",submenu:"submenu",header:"header",loading:"loading",custom:"custom",subheaderChild:"subheader_child",radio:"radio",checkbox:"checkbox"},n=t},1865069963:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>G,YJ:()=>B});var t=e(3134334389),n=e(5255740490),s=e(3078252698),i=e(9746734072),l=e(8424846741),o=e(7715417323),a=e(4481313819),r=e(4244379358),d=e(8049923572);const u=c(H=>{let{"aria-labelledby":U,"aria-owns":F}=H;return F?t.createElement("div",{className:"offscreen",role:"group","aria-owns":F,"aria-labelledby":U}):null},"MenuItemGroup");u.displayName="MenuItemGroup";const _=u;var v=e(7417231112),h=e(8184841524),f=e(101973425),I=e(1959847761),p=e(1224315998);function y(H){return t.isValidElement(H)&&"children"in H.props}c(y,"hasChildren");function g(H){return H!=null&&typeof H=="object"&&"type"in H&&H.type===t.Fragment}c(g,"isFragment");function E(H){return H instanceof Array?H.map(E):g(H)&&y(H)?E(H.props.children):H}c(E,"defragment");function M(H){return t.Children.toArray(E(H))}c(M,"flattenChildren");var T=e(796111729),D=e(3821598679),C=e(9391594207);function m(){return m=Object.assign||function(H){for(var U=1;U<arguments.length;U++){var F=arguments[U];for(var Y in F)Object.prototype.hasOwnProperty.call(F,Y)&&(H[Y]=F[Y])}return H},m.apply(this,arguments)}c(m,"_extends");function O(H){const U=H&&H.type;return!!U&&(0,f.l0)(U)}c(O,"isMenuItem");function P(H){const U=H&&H.type;return!!U&&(0,I.e)(U)}c(P,"isSubmenu");function R(H){const U=H&&H.type;return U&&(0,h.HP)(U)}c(R,"isSeparator");function L(H){const U=H&&H.type;return U&&(0,v.a6)(U)}c(L,"isMenuItemHeader");let V=0;function B(){return V>0}c(B,"isMenuVisible");const K={ArrowUp:"selectprevious",Up:"selectprevious",ArrowDown:"selectnext",Down:"selectnext",ArrowLeft:"closesubmenu",Left:"closesubmenu",ArrowRight:"opensubmenu",Right:"opensubmenu",Escape:"closemenu",Enter:"select"," ":"select",Home:"selectfirst",End:"selectlast"};let b=c(class extends t.Component{componentDidMount(){this.focus(),V+=1}componentDidUpdate(U){this.props.kbNavActive&&!U.kbNavActive&&this.activateKBNav()}componentWillUnmount(){V-=1,this.props.onUnmount&&this.props.onUnmount()}menuItemHtmlId(U){return`${this.activeMenuId}-${U}`}onMenuNavigation(U){const F=this.getIndexOfNextMenuItemInDirection(U);this.setState(()=>({highlightedMenuItemIndex:F,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}))}onMouseEnterMenuItem(U){const F=this.state.highlightCanChangeOnMouseMovement?U:this.state.highlightedMenuItemIndex;if(this.setState(()=>({highlightedMenuItemIndex:F,contingentHighlightedMenuItemIndex:U,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!1})),!!this.state.highlightCanChangeOnMouseMovement&&document.activeElement!==this.ariaMenuNode){var Y;(Y=this.ariaMenuNode)===null||Y===void 0||Y.focus()}}getAllMenuItemIndices(){const U=[];return M(this.props.children).filter(t.isValidElement).forEach((F,Y)=>{var Z;!((Z=this.ariaMenuNode)===null||Z===void 0)&&Z.querySelector(`#${this.menuItemHtmlId(Y)}`)&&(O(F)||P(F))&&U.push(Y)}),U}getIndexOfNextMenuItemInDirection(U){const F=this.getAllMenuItemIndices(),Y=F.indexOf(this.state.highlightedMenuItemIndex),Z=F.length-1;if(U==="selectnext"){const j=Y<Z?Y+1:0;return F[j]}const ee=Y-1>=0?Y-1:Z;return F[ee]}getSelectedMenuItem(){const{highlightedMenuItemIndex:U}=this.state;if(!(U<0)&&this.menuChildren)return this.menuChildren[U]}focus(){const{kbNavActive:U,isSubmenu:F}=this.props;if(!U)return;if(!F){this.ariaMenuNode&&this.ariaMenuNode.focus();return}const Y=this.getAllMenuItemIndices();if(!Y.length){var Z;(Z=this.ariaMenuNode)===null||Z===void 0||Z.focus();return}this.setState(()=>({highlightedMenuItemIndex:Y[0]}),()=>{var ee;(ee=this.ariaMenuNode)===null||ee===void 0||ee.focus()})}registerKeyboardShortcutForMenuItem(U,F){if(!U||!F)return;const{label:Y,key:Z}=U;(0,s.A)(Y)&&((0,s.A)(Z)||(0,i.A)(Z))&&(0,l.A)(Z).forEach(ee=>{this.keyboardShortcutsMap[ee]=F})}renderMenuItem(U,F){const Y=this.onMouseEnterMenuItem.bind(this,F),{highlightedMenuItemIndex:Z,highlightedMenuItemKbNavActive:ee,isKeyboardHighlight:j}=this.state,{onMenuItemSelectedBefore:ge,stripTerminalSeparators:ne,isResponsive:ue}=this.props;L(U)&&U.props.for&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[U.props.for]={key:U.props.for,"aria-labelledby":(0,v.$b)(U.props.for),"aria-owns":[],index:F});const he={...U.props,onMouseEnter:Y,key:F},be=this.menuItemHtmlId(F),{shortcut:xe}=U.props;if(xe&&this.registerKeyboardShortcutForMenuItem(xe,be),O(U)||P(U)){const Q=Z===F;if(he.activeMenuId=be,Q&&j){var Le,fe,se;(fe=(Le=this.ariaMenuNode)===null||Le===void 0?void 0:Le.querySelector(`#${he.activeMenuId}`))===null||fe===void 0||(se=fe.scrollIntoView)===null||se===void 0||se.call(fe)}he.menuCallbackBefore=ge,he.menuCallback=this.onMenuItemSelected,he.menuCallbackId||(he.menuCallbackId=F),he.highlighted=Z===F,he.isKeyboardHighlight=he.highlighted&&j,he.group&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[he.group]||(this.menuGroups[he.group]={key:he.group,"aria-owns":[],index:F}),this.menuGroups[he.group]["aria-owns"].push(he.activeMenuId))}if(P(U)&&(he.isOpen=he.highlighted&&!j||he.highlighted&&ee,he.kbNavActive=he.highlighted&&ee,he.returnKBNav=this.activateKBNav,he.preventHighlightChange=this.preventHighlightChange,he.allowHighlightChange=this.allowHighlightChange),R(U)&&ne)if(!this.menuChildren)(0,T.Wo)().warn("Menu.renderMenuItem called without this.menuChildren");else{const Q=this.menuChildren[F-1];if(R(Q))return null;he.noFirstChild=!0,he.noLastChild=!0}return O(U)&&(he.isResponsive=ue),t.cloneElement(U,he)}renderMenuGroups(){return this.menuGroups?Object.values(this.menuGroups).filter(U=>U["aria-owns"].length>0).map(U=>({group:t.createElement(_,{key:U.key,"aria-labelledby":U["aria-labelledby"],"aria-owns":U["aria-owns"].join(" ")}),index:U.index})).sort((U,F)=>F.index-U.index):[]}renderMenuItems(){this.menuChildren=M(this.props.children).filter(t.isValidElement);const U=this.menuChildren.map(this.renderMenuItem,this);return this.renderMenuGroups().forEach(Y=>{let{group:Z,index:ee}=Y;U.splice(ee,0,Z)}),U}renderMenu(){const{noMargin:U,menuClassNames:F,"data-qa":Y,isUnstyled:Z,isResponsive:ee,experimentSkResponsiveMenusGroupOn:j}=this.props,ge=(0,n.A)("c-menu__items",{"c-menu__items--no_margin":U}),ne=this.state.highlightedMenuItemIndex!==-1?this.menuItemHtmlId(this.state.highlightedMenuItemIndex):null,ue=(0,n.A)({"c-menu":!Z,"c-menu--responsive":ee&&j},F);return t.createElement("div",{className:ue,"data-qa":Y,style:{width:this.props.width}},t.createElement("div",{className:"c-menu__items_scroller"},t.createElement("div",{"aria-activedescendant":ne??void 0,ref:this.setAriaMenuRef,className:ge,onKeyDown:this.onMenuKeyDown,onMouseLeave:this.onMouseLeaveMenu,"data-qa":"menu_items",role:"menu","aria-label":this.props["aria-label"],"aria-describedby":this.props["aria-describedby"],"aria-labelledby":this.props["aria-labelledby"],tabIndex:-1,"no-bootstrap":1},this.renderMenuItems())))}render(){const U=this.renderMenu(),{autoClogProps:F}=this.props;return F?t.createElement(a.A,m({elementType:p.ElementType.MENU},F),U):U}constructor(U){super(U),this.activeMenuId=`menu-${(0,D.A)()}`,this.menuChildren=[],this.keyboardShortcutsMap={},this.menuGroups={},this.onMenuItemSelected=(F,Y)=>{this.props.onMenuItemSelected&&this.props.onMenuItemSelected(F,Y)},this.onMenuKeyDown=F=>{var Y;const{kbNavActive:Z,onMenuKeyDown:ee,onCloseSubmenu:j,onTriggerClose:ge,windowRef:ne}=this.props;if(!Z)return;const{key:ue}=F,he=K[ue],be=(Y=this.keyboardShortcutsMap)===null||Y===void 0?void 0:Y[ue],xe=this.getSelectedMenuItem(),Le=xe&&P(xe),fe=this.getAllMenuItemIndices();(he||be)&&(F.stopPropagation(),F.preventDefault()),(he==="selectnext"||he==="selectprevious")&&this.onMenuNavigation(he),he==="closesubmenu"&&(j==null||j(F)),(he==="select"||he==="opensubmenu")&&Le&&this.setState(()=>({highlightedMenuItemKbNavActive:!0})),he==="closemenu"&&(ge==null||ge(F)),he==="selectfirst"&&this.setState(()=>({highlightedMenuItemIndex:fe[0],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0})),he==="selectlast"&&this.setState(()=>({highlightedMenuItemIndex:fe[fe.length-1],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}));const se=this.menuItemHtmlId(this.state.highlightedMenuItemIndex);if(he==="select"&&se&&!Le){var Q,k;(k=(Q=ne.deref())===null||Q===void 0?void 0:Q.document.getElementById(se))===null||k===void 0||k.click(),ge==null||ge(F)}if(be){var N,$;($=(N=ne.deref())===null||N===void 0?void 0:N.document.getElementById(be))===null||$===void 0||$.click(),ge==null||ge(F)}ee==null||ee(F,{isCurrentItemSubmenu:Le,closeMenu:ge,selectedMenuItem:xe})},this.onMouseLeaveMenu=()=>{const F=this.state.highlightCanChangeOnMouseMovement?-1:this.state.highlightedMenuItemIndex;this.setState(()=>({highlightedMenuItemIndex:F,contingentHighlightedMenuItemIndex:-1}))},this.setAriaMenuRef=F=>{this.ariaMenuNode=F},this.activateKBNav=()=>{var F;(F=this.ariaMenuNode)===null||F===void 0||F.focus(),this.setState(Y=>({highlightedMenuItemKbNavActive:!1,highlightedMenuItemIndex:Y.highlightedMenuItemIndex===-1?this.getIndexOfNextMenuItemInDirection("selectnext"):Y.highlightedMenuItemIndex}))},this.allowHighlightChange=()=>{this.setState(F=>({highlightedMenuItemIndex:F.contingentHighlightedMenuItemIndex,highlightCanChangeOnMouseMovement:!0})),this.props.allowHighlightChange&&this.props.allowHighlightChange()},this.preventHighlightChange=()=>{this.setState(()=>({highlightCanChangeOnMouseMovement:!!this.props.resetHighlightOnChange})),this.props.preventHighlightChange&&this.props.preventHighlightChange()},this.state={highlightedMenuItemIndex:-1,contingentHighlightedMenuItemIndex:-1,highlightedMenuItemKbNavActive:!1,highlightCanChangeOnMouseMovement:!0,isKeyboardHighlight:!1}}},"Menu");b.displayName="Menu",b.defaultProps={menuClassNames:void 0,onMenuItemSelected:o.A,onMenuItemSelectedBefore:o.A,onTriggerClose:o.A,onCloseSubmenu:o.A,width:void 0,noMargin:!1,kbNavActive:!0,stripTerminalSeparators:!1,preventHighlightChange:o.A,allowHighlightChange:o.A,resetHighlightOnChange:!1,"data-qa":"menu","aria-label":void 0,onMenuKeyDown:o.A,onUnmount:o.A,isSubmenu:!1,isUnstyled:!1,autoClogProps:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0};const S=c(H=>({experimentSkResponsiveMenusGroupOn:(0,d.IN)(H)}),"mapStateToProps"),G=(0,r.A)((0,C.N)(S,null,null,{forwardRef:!0})(b))},101973425:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>d,KJ:()=>o,LN:()=>a,l0:()=>r});var t=e(2208015175),n=e(3297051565),s=e.n(n),i=e(4724591729),l=e(796111729);const o="_isSlackMenuItem",a={menuCallback:s().func,menuCallbackId:s().number,highlighted:s().bool};function r(u){return!!u[o]}c(r,"isMenuItem");function d(u){if((0,i.Cu)()){const _=u.propTypes||{};let v;Object.defineProperty(u,"propTypes",{get:()=>v,set:h=>{const f=u.displayName||u.name||"Component";(0,t.A)(a,(I,p)=>{const y=h[p];y&&y!==I&&y!==I.isRequired&&(0,l.Wo)().warn(`${f}'s ${p} prop type doesn't match menu item`)}),v={...a,...h}}}),u.propTypes=_}return u[o]=!0,u}c(d,"wrapMenuItem")},9285382326:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6162189146);const n=t.A},6162189146:(x,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(3134334389),n=e(5255740490),s=e(7026348746),i=e(8683010724),l=e(2312625946),o=e(653780586),a=e(735940183);const r=new a.Ay("channel_token"),d=c(_=>{let{type:v=o.A.Unknown,subtler:h=!1,size:f=o.o.Small,width:I="random",invert:p=!1,showHash:y=!0,omitNonExistentTooltip:g=!1}=_;const E=(0,n.A)("c-missing_channel",{"c-missing_channel--unknown":v===o.A.Unknown,"c-missing_channel--nonexistent":v===o.A.Nonexistent,"c-missing_channel--subtler":h,"c-missing_channel--medium":f===o.o.Medium,"c-missing_channel--unknown_inverted":v===o.A.Unknown&&p,"c-missing_channel--non_existent_inverted":v===o.A.Nonexistent&&p}),M=(0,n.A)("c-missing_channel--medium_hash",{"c-missing_channel--subtler":h});let T;if(v===o.A.Unknown)T=r.t("Loading...");else if(v===o.A.Nonexistent)T=r.t("You don\u2019t have access to this channel (ex. it\u2019s private or in a workspace you\u2019re not a part of), so its name isn\u2019t shown",{fallbackHash:"b63975b75ce4c6d6e1e8b8057209fc25f351bbcf"});else return null;if(v===o.A.Nonexistent){const D=t.createElement("span",{className:"c-missing_channel--private"},t.createElement(i.A,{name:"lock"}),t.createElement("span",null,r.t("private channel")));return g?D:t.createElement(l.Ay,{tip:T},D)}return f===o.o.Medium?t.createElement("div",null,t.createElement("div",{className:"c-missing_channel--medium-top"},y&&t.createElement("span",{className:M},t.createElement(i.A,{name:"channel"})),t.createElement(s.A,{tooltip:T,isNonExistent:!1,size:I,className:E})),t.createElement(s.A,{tooltip:T,isNonExistent:!1,size:I,className:E})):t.createElement(s.A,{tooltip:T,isNonExistent:!1,size:I,className:E})},"MissingChannel");d.displayName="MissingChannel";const u=t.memo(d)},8028620372:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(653780586);const i=c(o=>{let{className:a,isNonExistent:r=!1,size:d,subtler:u=!1,invert:_=!1,dataQa:v}=o;const{Unknown:h,Nonexistent:f}=s.A,I=r?f:h,p=(0,t.useMemo)(()=>({height:d,width:d}),[d]);return t.createElement("span",{className:(0,n.A)(a,"c-missing_icon",`c-missing_icon--${I}`,{"c-missing_icon--unknown_inverted":I===h&&_,"c-missing_icon--non_existent_inverted":I===f&&_,"c-missing_icon--subtler":u}),style:p,"data-qa":v})},"MissingIcon");i.displayName="MissingIcon";const l=i},7576317051:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(3229001818);const n=t.A},3229001818:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(7026348746),s=e(653780586),i=e(735940183);const l=new i.Ay("member_token"),{Unknown:o,Nonexistent:a}=s.A,r=c(u=>{let{type:_=o,subtler:v=!1,className:h,"data-qa":f}=u;const I=_===o?l.t("Loading\u2026"):l.t("Private user info");return t.createElement(n.A,{className:h??"",isNonExistent:_===a,subtler:v,tooltip:I,"data-qa":f})},"MissingMember");r.displayName="MissingMember";const d=t.memo(r)},4816967449:(x,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(3134334389),n=e(7026348746),s=e(653780586),i=e(735940183);const l=new i.Ay("user_group_token"),{Unknown:o,Nonexistent:a}=s.A,{Small:r,Medium:d}=s.o,u=c(h=>{let{invert:f=!1,size:I=r,type:p=o,subtler:y=!1}=h;const g=p===o?l.t("Loading..."):l.t("Private user group info");if(I===d){const E="\xA0\xA0\xB7\xA0\xA0";return t.createElement("div",{className:"p-browse_page_user_group_entity--missing"},t.createElement("div",null,t.createElement(n.A,{tooltip:g,isNonExistent:p===a,size:"small",invert:f})," ",t.createElement(n.A,{tooltip:g,isNonExistent:p===a,size:"small",invert:f})),t.createElement("div",null,t.createElement(n.A,{tooltip:g,isNonExistent:p===a,size:"small",invert:f}),E,t.createElement(n.A,{tooltip:g,isNonExistent:p===a,size:"large",invert:f})))}return t.createElement(n.A,{tooltip:g,isNonExistent:p===a,size:"random",subtler:y,invert:f})},"MissingUserGroup");u.displayName="MissingUserGroup";const v=u},4376397139:(x,A,e)=>{"use strict";e.d(A,{j:()=>o,A:()=>r});var t=e(3134334389),n=e(6105929840),s=e(735940183);const i=new s.Ay("generic_dialog");function l(d){let{onClick:u,..._}=d;return t.createElement(n.A,{className:"c-multi_pane_modal__back",icon:"chevron-large-left",onClick:u,"aria-label":i.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8",fallbackHashNs:"member_actions"}),"data-qa":_["data-qa"]})}c(l,"ModalBackButton"),l.displayName="ModalBackButton";const o=t.memo(l);var a=e(1427522952);const r=a.A},1427522952:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(7937864072),i=e(4979382452);function l(){return l=Object.assign||function(r){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(r[_]=u[_])}return r},l.apply(this,arguments)}c(l,"_extends");function o(r){let{defaultPane:d,panes:u,forceFullRerenderOnPageChange:_=!0,...v}=r;const h=(0,s.A)(),[f,I]=(0,t.useState)({pane:d}),p=(0,t.useCallback)((E,M)=>I({pane:E,props:M}),[]),{render:y,modalProps:g}=u[f.pane];return y||h.error("MULTI_PANE_MODAL",`Unknown pane "${f.pane}"`),t.createElement(i.A,l({},v,g,{className:(0,n.A)(v.className,g==null?void 0:g.className,"c-multi_pane_modal")}),_?t.createElement(t.Fragment,{key:f.pane},y({switchPane:p,...f.props})):y({switchPane:p,...f.props}))}c(o,"MultiPaneModal"),o.displayName="MultiPaneModal";const a=o},3501104594:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(7715417323),s=e(8157829725),i=e(1251589538);function l(){return l=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var M=arguments[E];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(g[T]=M[T])}return g},l.apply(this,arguments)}c(l,"_extends");const o=(0,t.memo)(g=>{let{addMemberToPresenceSubscription:E=n.A,memberId:M,removeMemberFromPresenceSubscription:T=n.A,renderDoublePresence:D=!1,firstElementExtraClassName:C="",...m}=g;return(0,s.A)(()=>(E(M),()=>T(M)),[M]),D?t.createElement(t.Fragment,null,t.createElement(i.Ay,l({},m,{className:`${m.className||""} ${C}`})),t.createElement(i.Ay,l({},m))):t.createElement(i.Ay,l({},m))});o.displayName="PresenceWithSubscriptions";const a=o;var r=e(3339229351),d=e(92812954),u=e(6045540917),_=e(9391594207),v=e(5241075893),h=e(5795074931),f=e(9290914927);const I=c((g,E)=>{const M=(0,f.gd)(g,E.memberId),T=(0,d.d)(g,E.memberId),D=(0,u.h)(g,E.memberId),C=(0,h.WR)(g)===E.memberId;return{...E,userType:T,isDnd:D,isSelf:C,isSlackbot:E.memberId===r.Q$,isActive:M==="active"}},"mapStateToProps"),p=c(g=>({addMemberToPresenceSubscription:E=>g((0,v.xz)({memberId:E})),removeMemberFromPresenceSubscription:E=>g((0,v.Fd)({memberId:E}))}),"mapDispatchToProps"),y=(0,_.N)(I,p)(a)},9828955991:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>s});var t=e(3501104594),n=e(1251589538);const s=t.A},1251589538:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>_});var t=e(3134334389),n=e(5255740490),s=e(2036354333),i=e(8683010724),l=e(1563996154),o=e(735940183);function a(){return a=Object.assign||function(v){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var I in f)Object.prototype.hasOwnProperty.call(f,I)&&(v[I]=f[I])}return v},a.apply(this,arguments)}c(a,"_extends");const r=new o.Ay("presence");function d(v,h){return v?h?r.t("Active, notifications snoozed"):r.t("Active"):h?r.t("Away, notifications snoozed"):r.t("Away")}c(d,"getPresenceText");const u=c(v=>{let{inheritIconSize:h=!1,inline:f=!0,isActive:I=!1,isDnd:p=!1,isSelf:y=!1,isSlackbot:g=!1,invert:E=!1,userType:M="member",focusable:T=!1,showText:D=!1,resetIA:C=!1,hasNoAccess:m=!1,className:O}=v,P=I?{name:"status-member",variation:"filled"}:{name:"status-member"};const R=(0,n.A)(O,"c-presence",{"c-presence--active":I&&!E,"c-presence--resetIA":C,"c-presence--away":!I&&!E,"c-presence--inverted":E,"is-inline":f,block:!f}),L=d(I,p);m?P={name:"lock",variation:"filled"}:M==="member"?p?P=I?{name:"status-member-dnd",variation:"filled"}:{name:"status-member-dnd"}:g&&(P={name:"status-slackbot",variation:"filled"}):M==="ra"||M==="external"?p?P=I?{name:"status-guest-dnd",variation:"filled"}:{name:"status-guest-dnd"}:P=I?{name:"status-guest",variation:"filled"}:{name:"status-guest"}:M==="ura"&&(p?P=I?{name:"status-single-channel-guest-dnd",variation:"filled"}:{name:"status-single-channel-guest-dnd"}:P=I?{name:"status-single-channel-guest",variation:"filled"}:{name:"status-single-channel-guest"});const V=t.createElement("span",{className:R},t.createElement(i.A,a({},P,{title:L,"aria-label":L,"aria-hidden":"false",size:h?"inherit":"20",inline:f,"data-qa":"presence_indicator","data-qa-type":P.name,"data-qa-presence-self":y,"data-qa-presence-active":I,"data-qa-presence-dnd":p})));return T?t.createElement(t.Fragment,null,t.createElement(l.Ay,{tip:L},t.createElement(s.A,null,V)),D&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},L)):t.createElement(t.Fragment,null,V,D&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},L))},"Presence");u.displayName="Presence";const _=t.memo(u)},5846524816:(x,A,e)=>{"use strict";e.d(A,{A:()=>b});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(3398586081),l=e(5617110048),o=e(3391133100),a=e(2660476100),r=e(3155323475),d=e(45851552),u=e(5404505308),_=e(6696292586),v=e(4244379358),h=e(7074822529),f=e(7193040700),I=e(8683010724),p=e(4426213732),y=e(735940183);function g(){return g=Object.assign||function(S){for(var G=1;G<arguments.length;G++){var H=arguments[G];for(var U in H)Object.prototype.hasOwnProperty.call(H,U)&&(S[U]=H[U])}return S},g.apply(this,arguments)}c(g,"_extends");const E=new y.Ay("select");let M=c(class extends t.Component{componentDidMount(){const{focusOnMount:G=!1}=this.props;G&&this.onClick()}onKeyDown(G){const{shiftKey:H,ctrlKey:U,metaKey:F,altKey:Y,key:Z}=G;if(!(H||U||F)){if(Z==="Escape"&&!Y){this.onEsc(G);return}if(Z===" "&&!Y){this.onSpacebar(G);return}if(Z==="Enter"&&!Y){this.onEnter(G);return}if(Z==="ArrowUp"&&Y){this.onAltArrowUp(G);return}if(Z==="ArrowUp"&&!Y){this.onArrowUp(G);return}if(Z==="ArrowDown"){this.onArrowDown(G);return}if(Z==="Home"&&!Y){this.onHome(G);return}if(Z==="End"&&!Y){this.onEnd(G);return}Z==="Tab"&&!Y&&this.onTab()}}onEsc(G){const{selectState:H,setSelectState:U}=this.props,{isExpanded:F}=H;F&&(G.stopPropagation(),U(()=>({activeRowIndex:void 0,activeOption:void 0,initialActiveOption:void 0,isExpanded:!1})))}onArrowUp(G){const{selectState:H,setSelectState:U}=this.props,{isExpanded:F,options:Y}=H;if(F)return;G.preventDefault(),G.stopPropagation(),this.updateOptionsListPosition();const Z=(0,d.A)(Y,j=>(0,h.oj)(j),0),ee=Y[Z];U(()=>({initialActiveOption:ee,isExpanded:!0}))}onAltArrowUp(G){const{selectState:H}=this.props,{isExpanded:U}=H;if(!U)return;const F=this.props.listRef.current;F&&(G.stopPropagation(),G.preventDefault(),F.onEnter(G))}onArrowDown(G){const{selectState:H,setSelectState:U}=this.props,{isExpanded:F}=H;F||(G.preventDefault(),G.stopPropagation(),this.updateOptionsListPosition(),U(()=>({isExpanded:!0})))}onHome(G){const{selectState:H,setSelectState:U}=this.props,{isExpanded:F,options:Y}=H;if(F)return;G.preventDefault(),G.stopPropagation(),this.updateOptionsListPosition();const Z=(0,d.A)(Y,j=>(0,h.oj)(j),0),ee=Y[Z];U(()=>({initialActiveOption:ee,isExpanded:!0}))}onEnd(G){const{selectState:H,setSelectState:U}=this.props,{isExpanded:F,options:Y}=H;if(F)return;G.preventDefault(),G.stopPropagation(),this.updateOptionsListPosition();const Z=(0,u.A)(Y,j=>(0,h.oj)(j)),ee=Y[Z];U(()=>({initialActiveOption:ee,isExpanded:!0}))}onEnter(G){const{selectState:H}=this.props,{isExpanded:U}=H;U||(G.stopPropagation(),this.onClick())}onSpacebar(G){const{selectState:H}=this.props,{isExpanded:U}=H;U||(G.preventDefault(),G.stopPropagation(),this.onClick())}onTab(){const{setSelectState:G}=this.props;G(()=>({isExpanded:!1}))}onClick(){const{onClick:G=s.A,setSelectState:H,selectState:U}=this.props;this.updateOptionsListPosition(),G&&G(),H(()=>({isExpanded:!U.isExpanded}))}updateOptionsListPosition(){const{selectState:G}=this.props,{isExpanded:H}=G;if(!H&&this.measurePopoverEvent){var U;(U=this.props.windowRef.deref())===null||U===void 0||U.dispatchEvent(this.measurePopoverEvent)}}renderContent(G){const{renderSelectedOption:H,selectState:U,textSelect:F=!1,textSelectLabel:Y=void 0,selectDataQa:Z=void 0,placeholderText:ee=void 0}=this.props,{selectedOption:j}=U,ge=j?H(j):t.createElement("span",{className:"c-select_button__placeholder"},ee||E.t("Please select an option")),ne=F&&Y?t.createElement("span",{className:"c-select_button--text-select-label"},Y):void 0;return t.createElement("div",{id:G,"data-qa":Z?`${Z}-button-content`:null,className:"c-select_button__content",role:"none"},ne,ge)}render(){const{ariaLabelledBy:G=void 0,ariaDescribedBy:H=void 0,ariaLabel:U=void 0,ariaControls:F=void 0,selectState:Y,size:Z,width:ee,textSelect:j=!1,selectDataQa:ge=void 0,classPrefix:ne=void 0,onBlur:ue=s.A,onMouseEnter:he=void 0,onMouseLeave:be=void 0,refToForward:xe}=this.props,{isDisabled:Le,isExpanded:fe,isInvalid:se,selectId:Q,activeRowIndex:k}=Y,N=(0,n.A)("c-select_button",`c-select_button--${Z}`,{"c-select_button--disabled":Le,"c-select_button--expanded":fe,"c-select_button--text-select":j,"c-select_button--invalid":se,[`${ne}__select_button`]:ne}),$=j?{}:{width:ee},W=(0,o.Es)(Q,"button"),q=`${W}-option`,re=(0,_.A)(k)&&fe?(0,o.Es)(Q,`option_${k}`):void 0;return t.createElement("div",{tabIndex:0,className:N,style:$,"data-qa":ge?`${ge}-button`:null,id:W,ref:xe,role:"combobox","aria-disabled":Le?!0:void 0,"aria-labelledby":G,"aria-describedby":H,"aria-label":U,"aria-invalid":se,"aria-activedescendant":re,"aria-expanded":fe,"aria-haspopup":"listbox","aria-controls":F,onBlur:ue,onMouseEnter:he,onMouseLeave:be,onClick:this.onClick,onKeyDown:this.onKeyDown},this.renderContent(q),t.createElement("div",{className:`c-select_button__icon c-select_button__icon--${Z}`},t.createElement(I.A,{name:"caret-down",size:Z===f.hu.SMALL?"inherit":"20"})))}constructor(G){super(G),(0,p.v)(this,["updateOptionsListPosition","onKeyDown","onClick"]);const{measurePopoverEventName:H=null}=this.props;H&&(this.measurePopoverEvent=new Event(H))}},"SelectButton");M.displayName="SelectButton";const T=(0,v.A)(M),D=t.forwardRef((S,G)=>t.createElement(T,g({},S,{refToForward:G})));var C=e(4640201401),m=e(3650946343),O=e(1224315998);function P(){return P=Object.assign||function(S){for(var G=1;G<arguments.length;G++){var H=arguments[G];for(var U in H)Object.prototype.hasOwnProperty.call(H,U)&&(S[U]=H[U])}return S},P.apply(this,arguments)}c(P,"basic_select_extends");const R=10,L={onOptionSelected:{action:O.UiAction.SELECT}},V=c(S=>S.map(G=>{let{id:H}=G;return H}),"getIdsFromHintOrErrors");let B=c(class extends t.Component{onHome(G){const H=this.listRef.current;if(!H||(H.isMouseMoveEnabled=!1,!H.shouldInterceptKeyEvent(G)))return;const{isExpanded:U}=this.props.selectState;U&&G.preventDefault(),H.movePrevious(0)}onEnd(G){const H=this.listRef.current;if(!H||(H.isMouseMoveEnabled=!1,!H.shouldInterceptKeyEvent(G)))return;const{isExpanded:U}=this.props.selectState;U&&G.preventDefault();const F=H.getOptionsList();if(!F)return;const Y=F.length-1;H.moveNext(Y)}onPageUp(G){const H=this.listRef.current;if(!H||(H.isMouseMoveEnabled=!1,!H.shouldInterceptKeyEvent(G)))return;const{isExpanded:U,activeRowIndex:F}=this.props.selectState;U&&G.preventDefault();const Y=F?Math.floor(F/R):0,Z=Y>1?(Y-1)*R:0;H.movePrevious(Z)}onPageDown(G){const H=this.listRef.current;if(!H||(H.isMouseMoveEnabled=!1,!H.shouldInterceptKeyEvent(G)))return;const{activeRowIndex:U,isExpanded:F}=this.props.selectState;F&&G.preventDefault();const Y=H.getOptionsList();if(!Y)return;const Z=Y.length,ee=Math.ceil(Z/R),j=U?Math.floor(U/R):0,ge=j===ee-1?Z-1:(j+1)*R;H.moveNext(ge)}renderOptionsList(){const{ariaLabel:G,onOptionSelected:H,onOptionsListClose:U,renderOption:F,resultsInPopover:Y,overlayClassName:Z,listClassName:ee,selectState:j,setSelectState:ge,width:ne,classPrefix:ue,minOptionsListWidth:he,optionsRowHeight:be,maxListHeight:xe,onScrollablePage:Le,dynamicHeight:fe,forceMaxHeight:se,includePadding:Q,includeDividers:k,preventScroll:N,autoClogProps:$}=this.props,{isDisabled:W}=j;if(W)return null;const q=Y?t.createElement(C.A,{selectOptionsListRef:this.listRef,className:ee,selectState:j,setSelectState:ge,renderOption:F,ariaLabel:G,onOptionSelected:H,onOptionsListClose:U,width:ne,inputRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,classPrefix:ue,selectDataQa:this.fallbackDataQa,minOptionsListWidth:he,optionsRowHeight:be,popoverProps:Z?{overlayClassName:Z}:void 0,shouldAlwaysHaveActiveRow:!0,maxListHeight:xe,onScrollablePage:Le,dynamicHeight:fe,forceMaxHeight:se,includePadding:Q,includeDividers:k,preventScroll:N,keyCommandShortcuts:this.keyCommandShortcuts,shouldTokenizeOnSpace:!0}):t.createElement(h.Ay,{ref:this.listRef,className:ee,selectState:j,setSelectState:ge,renderOption:F,ariaLabel:G,onOptionSelected:H,onOptionsListClose:U,width:ne,inputRef:this.inputContainerRef,classPrefix:ue,selectDataQa:this.fallbackDataQa,optionsRowHeight:be,maxListHeight:xe,shouldAlwaysHaveActiveRow:!0,dynamicHeight:fe,forceMaxHeight:se,includePadding:Q,includeDividers:k,preventScroll:N,keyCommandShortcuts:this.keyCommandShortcuts,shouldTokenizeOnSpace:!0});return $?t.createElement(l.A,{autoClogProps:$,actionProps:L,elementType:O.ElementType.DROPDOWN},q):q}render(){const{resultsInPopover:G,selectState:H,setSelectState:U,className:F,textSelect:Y,textSelectLabel:Z,focusOnMount:ee,onBlur:j,ariaLabel:ge,ariaLabelledBy:ne,ariaDescribedBy:ue,buttonRef:he,errors:be,hints:xe,size:Le,renderSelectedOption:fe}=this.props,{isExpanded:se,isInvalid:Q,selectId:k}=H,N=(0,m.A)(be),$=(0,m.A)(xe);let W;be&&(W=N?V(be):void 0);let q;xe&&(q=$?V(xe):void 0);const re=(0,o.Yk)([ue,W,q]);return t.createElement("div",{className:(0,n.A)(F,"c-basic-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(D,P({},this.props,{size:Le,renderSelectedOption:fe,selectDataQa:this.fallbackDataQa,selectState:H,setSelectState:U,measurePopoverEventName:G?this.measurePopoverEventName:void 0,textSelect:Y,textSelectLabel:Z,focusOnMount:ee,onBlur:j,ariaLabel:ge,ariaLabelledBy:ne,ariaDescribedBy:re,"aria-invalid":Q},se?{ariaControls:(0,o.Es)(k,"listbox")}:{},{ref:he,listRef:this.listRef})),N&&be&&t.createElement(r.A,{errors:be}),$&&xe&&xe.map(Ae=>{let{id:Te,message:Ne}=Ae;return t.createElement(a.A,{key:Te,id:Te},Ne)}),this.renderOptionsList())}constructor(G){super(G),(0,p.v)(this,["renderOptionsList","onHome","onEnd","onPageUp","onPageDown"]),this.inputContainerRef=t.createRef(),this.listRef=t.createRef();const{selectId:H}=G.selectState;this.measurePopoverEventName=`measureSelectPopover--${H}`,this.fallbackDataQa=G.selectDataQa||H,this.keyCommandShortcuts=[{keys:["home"],handler:this.onHome},{keys:["end"],handler:this.onEnd},{keys:["pageup"],handler:this.onPageUp},{keys:["pagedown"],handler:this.onPageDown}]}},"ControlledBasicSelect");B.displayName="ControlledBasicSelect",B.defaultProps={renderOption:S=>S.label,renderSelectedOption:S=>S.label,size:f.hu.MEDIUM,width:225,optionsRowHeight:f.bJ,errors:[],hints:[],ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,selectDataQa:void 0,resultsInPopover:!0,overlayClassName:void 0,listClassName:void 0,onClick:s.A,onOptionSelected:s.A,onOptionsListClose:s.A,className:void 0,classPrefix:void 0,textSelect:!1,textSelectLabel:void 0,minOptionsListWidth:void 0,focusOnMount:!1,onBlur:s.A,maxListHeight:void 0,autoClogProps:void 0,onScrollablePage:!1,buttonRef:void 0,dynamicHeight:!1,forceMaxHeight:!1,includePadding:!0,includeDividers:!0};let K=c(class extends t.Component{static getDerivedStateFromProps(G,H){const{selectedOption:U}=G,{selectedOption:F}=H;return!F||U!==void 0&&U!==F?{selectedOption:U}:null}setSelectState(G,H){return this.setState(G,H)}render(){const{isDisabled:G,isInvalid:H,isRequired:U,errors:F}=this.props,Y=H||(0,m.A)(F),Z=(0,i.A)(()=>({...this.state,isDisabled:G,isInvalid:Y,isRequired:U}));return t.createElement(B,P({},this.props,{selectState:Z(),setSelectState:this.setSelectState}))}constructor(G){super(G),this.state={activeRowIndex:void 0,isDisabled:G.isDisabled,isExpanded:G.isExpanded,isInvalid:G.isInvalid,isRequired:G.isRequired,options:G.options,selectId:G.selectId,selectedOption:G.selectedOption,selectType:f.US.BASIC},(0,p.v)(this,["setSelectState"])}},"BasicSelect");K.displayName="BasicSelect",K.defaultProps={isDisabled:!1,isExpanded:!1,isRequired:!0,isInvalid:!1,errors:[],hints:[],onOptionSelected:s.A,onOptionsListClose:s.A,selectedOption:void 0,selectId:`basic-select-${(0,o.r9)()}`,maxListHeight:void 0,autoClogProps:void 0};const b=K},5536692738:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>l,HH:()=>s.A,P2:()=>i.A,Z1:()=>n.A});var t=e(5846524816),n=e(2727264612),s=e(8274994582),i=e(320706952);const l=t.A},7090824688:(x,A,e)=>{"use strict";e.d(A,{$c:()=>R,Ay:()=>O,Gn:()=>L,h7:()=>P,xn:()=>V,yW:()=>C});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(3398586081),l=e(5617110048),o=e(3391133100),a=e(2660476100),r=e(3155323475),d=e(868047630),u=e(7074822529),_=e(4640201401),v=e(9573786552),h=e(2742076544),f=e(3239909785),I=e(7193040700),p=e(3650946343),y=e(7772530643),g=e(4426213732),E=e(1224315998);function M(){return M=Object.assign||function(B){for(var K=1;K<arguments.length;K++){var b=arguments[K];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S])}return B},M.apply(this,arguments)}c(M,"_extends");const T={onOptionSelected:{action:E.UiAction.SELECT}},D=c(B=>B.map(K=>{let{id:b}=K;return b}),"getIdsFromHintOrErrors");let C=c(class extends t.Component{renderOptionsList(K){var b;const{selectState:S,setSelectState:G,renderOption:H,emptyStateMessage:U,enableLoadingState:F,width:Y,maxOptionsListHeight:Z,inputRef:ee,resultsInPopover:j,isLoading:ge,classPrefix:ne,optionsRowHeight:ue,onOptionsListOpen:he,onOptionsListClose:be,overlayClassName:xe,onScrollablePage:Le,onOptionSelected:fe,shouldOptionBeSelected:se,shouldTokenizeOnComma:Q,shouldTokenizeOnSpace:k,autoClogProps:N,dynamicHeight:$,shouldAllowUnselectInMultiSelectMode:W,stayExpandedAfterSelection:q,optionsListFooterBannerContent:re,offsetY:le,offsetX:Ae}=this.props,{isDisabled:Te,loadInBackground:Ne}=S;if(Te)return null;const pe={key:`${S.selectId}-popover`};xe&&(pe.overlayClassName=xe),le&&(pe.offsetY=le);const Ee=(b=this.additionalInfoContainerRef)===null||b===void 0?void 0:b.current;K&&Ee&&(pe.offsetY=-Ee.offsetHeight),Ae&&(pe.offsetX=Ae);const oe=j?t.createElement(_.A,{selectState:S,setSelectState:G,renderOption:H,emptyStateMessage:U,enableLoadingState:F,width:Y,maxListHeight:Z,multiSelectMode:!0,inputRef:ee,inputContainerRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,isLoading:ge&&!Ne,classPrefix:ne,selectDataQa:this.fallbackDataQa,optionsRowHeight:ue,onOpen:he,onOptionsListClose:be,popoverProps:pe,onScrollablePage:Le,onOptionSelected:fe,shouldOptionBeSelected:se,shouldTokenizeOnComma:Q,shouldTokenizeOnSpace:k,autoClogProps:N,dynamicHeight:$,shouldAllowUnselectInMultiSelectMode:W,stayExpandedAfterSelection:q,footerBannerContent:re}):t.createElement(u.Ay,{selectState:S,setSelectState:G,renderOption:H,emptyStateMessage:U,enableLoadingState:F,width:Y,maxListHeight:Z,multiSelectMode:!0,classPrefix:ne,selectDataQa:this.fallbackDataQa,optionsRowHeight:ue,onOptionsListClose:be,onOptionSelected:fe,shouldOptionBeSelected:se,shouldTokenizeOnComma:Q,shouldTokenizeOnSpace:k,dynamicHeight:$,footerBannerContent:re});return N?t.createElement(l.A,{elementType:E.ElementType.DROPDOWN,actionProps:T,autoClogProps:N},oe):oe}render(){const{selectState:K,setSelectState:b,inputRef:S,maxHeight:G,placeholderText:H,size:U,width:F,isLoading:Y,focusOnMount:Z,resultsInPopover:ee,onSelectedItemsChange:j,onKeyDown:ge,onKeyUp:ne,className:ue,classPrefix:he,onFilterQueryChange:be,onFilterQueryPaste:xe,processOptions:Le,onBlur:fe,onOptionsListClosedBlur:se,onOptionsListClose:Q,expandOnFocus:k,ariaLabel:N,ariaLabelledBy:$,ariaDescribedBy:W,onTokenSelect:q,onInputFocused:re,forceRealName:le,autoClogProps:Ae,errors:Te,hints:Ne,disableIdParsing:pe,customizeTokenProps:Ee,iconType:oe,isTokenEditable:ce,ignoreSelectAllTokensAfterMount:ke,disableCloseOnTab:Ce,throttleForceRenderSelectContainer:Me,forceRenderSelectContainerThrottleRate:Se}=this.props;let Ue;Te&&(Ue=(0,p.A)(Te));let He;Ne&&(He=(0,p.A)(Ne));let Ye;Te&&(Ye=Ue?D(Te):void 0);let J;Ne&&(J=He?D(Ne):void 0);const ae=(0,o.Yk)([W,Ye,J]),Ve=!!(Ue&&Te||He&&Ne);return t.createElement("div",{className:(0,n.A)(ue,"c-multi-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(d.A,{selectState:K,setSelectState:b,size:U,width:F,maxHeight:G,placeholderText:H,isLoading:Y,inputRef:S,focusOnMount:Z,measurePopoverEventName:ee&&this.measurePopoverEventName,onSelectedItemsChange:j,selectDataQa:this.fallbackDataQa,onKeyDown:ge,onKeyUp:ne,classPrefix:he,onFilterQueryChange:be,onFilterQueryPaste:xe,processOptions:Le,onBlur:fe,onOptionsListClosedBlur:se,onOptionsListClose:Q,expandOnFocus:k,ariaLabel:N,ariaLabelledBy:$,ariaDescribedBy:ae,onTokenSelect:q,onInputFocused:re,forceRealName:le,autoClogProps:Ae,customizeTokenProps:Ee,iconType:oe,disableIdParsing:pe,isTokenEditable:ce,ignoreSelectAllTokensAfterMount:ke,disableCloseOnTab:Ce,throttleForceRenderSelectContainer:Me,forceRenderSelectContainerThrottleRate:Se}),t.createElement("div",{className:"flow_root",ref:this.additionalInfoContainerRef},Ue&&Te&&t.createElement(r.A,{errors:Te}),He&&Ne&&Ne.map(Be=>{let{id:Ke,message:Re,className:Fe}=Be;return t.createElement(a.A,{key:Ke,id:Ke,className:Fe},Re)})),this.renderOptionsList(Ve))}constructor(K){super(K),(0,g.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef(),this.additionalInfoContainerRef=t.createRef();const{selectId:b}=K.selectState;this.measurePopoverEventName=`measureSelectPopover--${b}`,this.fallbackDataQa=K.selectDataQa||b}},"ControlledMultiSelect");C.displayName="ControlledMultiSelect",C.defaultProps={renderOption:B=>B.label,size:I.hu.MEDIUM,width:300,optionsRowHeight:I.bJ,maxHeight:void 0,maxOptionsListHeight:void 0,errors:[],hints:[],placeholderText:"",prefix:void 0,emptyStateMessage:void 0,isLoading:!1,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,enableLoadingState:!0,selectDataQa:void 0,focusOnMount:!1,onSelectedItemsChange:s.A,onKeyDown:s.A,onKeyUp:s.A,className:void 0,classPrefix:void 0,onFilterQueryChange:s.A,onFilterQueryPaste:s.A,processOptions:s.A,onBlur:s.A,onOptionsListClosedBlur:s.A,ariaLabelledBy:void 0,ariaDescribedBy:void 0,expandOnFocus:!1,onTokenSelect:s.A,onInputFocused:s.A,forceRealName:void 0,onOptionsListOpen:s.A,onOptionsListClose:s.A,onScrollablePage:!1,onOptionSelected:s.A,shouldOptionBeSelected:s.A,shouldTokenizeOnComma:!1,shouldTokenizeOnSpace:!1,autoClogProps:void 0,dynamicHeight:!1,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,isTokenEditable:!1,ignoreSelectAllTokensAfterMount:!1,optionsListFooterBannerContent:void 0,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:void 0};let m=c(class extends t.Component{setSelectState(K,b){this.setState(S=>{let G=K();const{filter:H,options:U}=this.props;return G.filterQuery!==void 0&&G.filterQuery!==S.filterQuery&&H&&(G=H(U,G)),G},b)}render(){const{isDisabled:K,isInvalid:b,isRequired:S,customControlledMultiSelectComponent:G,errors:H}=this.props,U=b||(0,p.A)(H),F=G??C,Y=(0,i.A)(()=>({...this.state,isDisabled:K,isInvalid:U,isRequired:S}));return t.createElement(F,M({},this.props,{selectState:Y(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(K){super(K),this.state={filterQuery:"",options:K.options,isDisabled:K.isDisabled,isExpanded:K.isExpanded,isInvalid:K.isInvalid,isRequired:K.isRequired,selectId:K.selectId,selectedOptions:K.selectedOptions||[],shouldRefocusInputAfterSelection:!!K.showConfirmDialog,selectedTokenIndexes:K.selectedTokenIndexes||[]},this.inputRef=t.createRef(),(0,g.v)(this,["setSelectState"])}},"MultiSelect");m.displayName="MultiSelect",m.defaultProps={selectedOptions:null,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,className:void 0,errors:[],hints:[],filter:y.k,selectId:`multi-select-${(0,o.r9)()}`,customControlledMultiSelectComponent:null,showConfirmDialog:void 0,autoClogProps:void 0,selectedTokenIndexes:[]};const O=m,P=(0,f.A)(C),R=(0,f.A)((0,v.A)(C)),L=(0,v.A)(C),V=(0,h.A)(C)},630868093:(x,A,e)=>{"use strict";e.d(A,{AM:()=>L,Ay:()=>P,Fw:()=>m,JJ:()=>C,mH:()=>V,uR:()=>R});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(3398586081),l=e(5617110048),o=e(3391133100),a=e(2660476100),r=e(3155323475),d=e(581574686),u=e(7074822529),_=e(4640201401),v=e(9573786552),h=e(2742076544),f=e(3239909785),I=e(7193040700),p=e(3650946343),y=e(7772530643),g=e(4426213732),E=e(1224315998);function M(){return M=Object.assign||function(B){for(var K=1;K<arguments.length;K++){var b=arguments[K];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S])}return B},M.apply(this,arguments)}c(M,"_extends");const T={onOptionSelected:{action:E.UiAction.SELECT}},D=c(B=>B.map(K=>{let{id:b}=K;return b}),"getIdsFromHintOrErrors");let C=c(class extends t.Component{maybeRenderOptionsList(){const{selectState:K,setSelectState:b,renderOption:S,width:G,inputRef:H,ariaLabel:U,resultsInPopover:F,overlayClassName:Y,offsetY:Z,offsetX:ee,onOptionSelected:j,className:ge,classPrefix:ne,optionsRowHeight:ue,onOpen:he,emptyStateMessage:be,minOptionsListWidth:xe,maxOptionsListHeight:Le,isLoading:fe,onOptionsListClose:se,onScrollablePage:Q,enableLoadingState:k,autoClogProps:N,shouldAllowUnselectInSingleSelectMode:$,shouldOptionBeSelected:W,optionsListFooterBannerContent:q,includeWrapper:re=!0}=this.props;if(F&&(!this.props.inputRef||!this.props.inputRef.current))return null;const le={key:`${K.selectId}-popover`};Y&&(le.overlayClassName=Y),Z&&(le.offsetY=Z),ee&&(le.offsetX=ee);const Ae=F?t.createElement(_.A,{selectState:K,setSelectState:b,renderOption:S,width:G,inputRef:H,ariaLabel:U,onOptionSelected:j,popoverProps:le,measurePopoverEventName:this.measurePopoverEventName,className:ge,classPrefix:ne,selectDataQa:this.fallbackDataQa,optionsRowHeight:ue,onOpen:he,emptyStateMessage:be,minOptionsListWidth:xe,maxListHeight:Le,isLoading:fe,onOptionsListClose:se,onScrollablePage:Q,enableLoadingState:k,autoClogProps:N,dropdownContainer:this.dropdownContainer,shouldAllowUnselectInSingleSelectMode:$,shouldOptionBeSelected:W,footerBannerContent:q,includeWrapper:re}):t.createElement(u.Ay,{selectState:K,setSelectState:b,renderOption:S,width:G,inputRef:H,ariaLabel:U,onOptionSelected:j,classPrefix:ne,selectDataQa:this.fallbackDataQa,emptyStateMessage:be,maxListHeight:Le,optionsRowHeight:ue,onOptionsListClose:se,enableLoadingState:k,shouldAllowUnselectInSingleSelectMode:$,shouldOptionBeSelected:W,footerBannerContent:q,includeWrapper:re});return t.createElement(l.A,{elementType:E.ElementType.DROPDOWN,actionProps:T,autoClogProps:N},Ae)}render(){const{renderSelectedOption:K,className:b,classPrefix:S,placeholderText:G,size:H,width:U,selectState:F,setSelectState:Y,inputRef:Z,focusOnMount:ee,showDropdownIcon:j,isLoading:ge,resultsInPopover:ne,isDisabled:ue,isRequired:he,onFocus:be,onEsc:xe,ariaLabelledBy:Le,ariaDescribedBy:fe,inputIcon:se,maxCharacterLimit:Q,onOptionsListClose:k,ariaLabel:N,expandOnClick:$,searchOnClick:W,autoClogProps:q,errors:re,hints:le,expandOnFocus:Ae,hideSelectedOptionOnDropdownOpen:Te,retainPreviousSelectionOnDelete:Ne}=this.props,{isInvalid:pe}=F,Ee=(0,p.A)(re),oe=(0,p.A)(le);let ce;re&&(ce=Ee?D(re):void 0);let ke;le&&(ke=oe?D(le):void 0);const Ce=(0,o.Yk)([fe,ce,ke]),Me=pe||Ee;return t.createElement("div",{className:(0,n.A)(b,"c-search-select"),"data-qa":this.fallbackDataQa},t.createElement(d.Ay,{selectState:{...F,isInvalid:Me,isRequired:he,isDisabled:ue},setSelectState:Y,renderSelectedOption:K,placeholderText:G,size:H,width:U,selectDataQa:this.fallbackDataQa,inputRef:Z,focusOnMount:ee,showDropdownIcon:j,isLoading:ge,resultsInPopover:ne,measurePopoverEventName:ne?this.measurePopoverEventName:void 0,classPrefix:S,onBlur:this.onBlur,onFocus:be,onEsc:xe,"aria-label":N,ariaLabelledBy:Le,ariaDescribedBy:Ce,icon:se,maxCharacterLimit:Q,onOptionsListClose:k,expandOnClick:$,autoClogProps:q,searchOnClick:W,expandOnFocus:Ae,hideSelectedOptionOnDropdownOpen:Te,retainPreviousSelectionOnDelete:Ne}),Ee&&re&&t.createElement(r.A,{errors:re}),oe&&le&&le.map(Se=>{let{id:Ue,message:He,className:Ye}=Se;return He&&t.createElement(a.A,{key:Ue,id:Ue,className:Ye},He)}),this.maybeRenderOptionsList())}constructor(K){super(K),this.onBlur=S=>{if(this.dropdownContainer){const G=this.dropdownContainer.current;if(G&&G.contains(S.relatedTarget)&&!this.props.isInvalidStateControlled){this.props.setSelectState(()=>({isInvalid:!1}));return}}this.props.onBlur&&this.props.onBlur(S)};const{selectId:b}=K.selectState;this.measurePopoverEventName=`measureSelectPopover--${b}`,this.fallbackDataQa=K.selectDataQa||b,this.dropdownContainer=t.createRef()}},"ControlledSearchSelect");C.displayName="ControlledSearchSelect",C.defaultProps={autoClogProps:void 0,className:void 0,classPrefix:void 0,renderOption:B=>B.label,renderSelectedOption:B=>B.label,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,size:I.hu.MEDIUM,width:360,optionsRowHeight:I.bJ,errors:[],hints:[],ariaLabel:null,ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,onOptionSelected:s.A,selectDataQa:void 0,showDropdownIcon:!0,focusOnMount:!1,isLoading:!1,isDisabled:!1,isInvalid:!1,isRequired:!0,onBlur:s.A,onFocus:s.A,onEsc:s.A,onOpen:s.A,onOptionsListClose:s.A,emptyStateMessage:void 0,minOptionsListWidth:void 0,maxOptionsListHeight:void 0,inputIcon:void 0,maxCharacterLimit:void 0,onScrollablePage:!1,expandOnClick:!0,enableLoadingState:!0,searchOnClick:!1,shouldAllowUnselectInSingleSelectMode:!0,shouldOptionBeSelected:s.A,isInvalidStateControlled:!1};const m=(0,v.A)(C);let O=c(class extends t.Component{setSelectState(K,b){this.setState(S=>{let G=K();const{filter:H,options:U}=this.props;return G.filterQuery!==void 0&&G.filterQuery!==S.filterQuery&&H&&(G=H(U,G)),G},b)}render(){const{isRequired:K,isInvalid:b,isDisabled:S,showConfirmDialog:G}=this.props,H=G?m:C,U=(0,i.A)(()=>({...this.state,isInvalid:b,isRequired:K,isDisabled:S}));return t.createElement(H,M({},this.props,{selectState:U(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(K){super(K),this.state={filterQuery:"",displayQuery:"",options:K.options,selectId:K.selectId,isExpanded:K.isExpanded,isInvalid:K.isInvalid,isDisabled:K.isDisabled,selectedOption:K.selectedOption},this.inputRef=this.props.inputRef?this.props.inputRef:t.createRef(),(0,g.v)(this,["setSelectState"])}},"SearchSelect");O.displayName="SearchSelect",O.defaultProps={autoClogProps:void 0,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,errors:[],hints:[],filter:y.k,onOptionSelected:s.A,selectId:`search-select-${(0,o.r9)()}`,selectedOption:void 0,showConfirmDialog:void 0,inputIcon:void 0,maxCharacterLimit:void 0,inputRef:void 0};const P=O,R=(0,f.A)(C),L=(0,f.A)((0,v.A)(C)),V=(0,h.A)(C)},2727264612:(x,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(6044196829),s=e(8683010724),i=e(735940183);const l=new i.Ay("form_inputs"),o=c(r=>{let{onCtaClick:d,errorCopy:u,ctaCopy:_}=r;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--error"},t.createElement(s.A,{name:"warning",inline:!0})),t.createElement("span",null,u||l.t("Selected entries contain errors."),t.createElement(n.A,{onClick:d,className:"margin_left_25"},_||l.t("Delete all errors"))))},"MultiSelectErrorText");o.displayName="MultiSelectErrorText";const a=o},868047630:(x,A,e)=>{"use strict";e.d(A,{A:()=>B});var t=e(3134334389),n=e(5255740490),s=e(8571983633),i=e(6696292586),l=e(3398586081),o=e(5950652755),a=e(7715417323),r=e(6422693406),d=e(5617110048),u=e(9797002255),_=e(4244379358),v=e(6308822),h=e(5797272849),f=e(3391133100),I=e(1610251172),p=e(7193040700),y=e(561151542),g=e(4426213732),E=e(1224315998),M=e(571104883),T=e(4757466470);function D(){return D=Object.assign||function(K){for(var b=1;b<arguments.length;b++){var S=arguments[b];for(var G in S)Object.prototype.hasOwnProperty.call(S,G)&&(K[G]=S[G])}return K},D.apply(this,arguments)}c(D,"_extends");const C={onChange:{action:E.UiAction.ENTER_TEXT}},m={onClick:{action:E.UiAction.CLICK}},O=new Array(95).fill("").map((K,b)=>String.fromCharCode(b+32)),P=c(K=>t.createElement("span",D({className:"c-multi_select_input__space"},K),"\xA0"),"makeSpace"),R=1e3,L={leading:!0,trailing:!1};let V=c(class extends t.PureComponent{componentDidMount(){this.inputHeight=this.getInputHeight(),this.props.focusOnMount&&this.focus(),this.attachMutationObserver()}componentDidUpdate(b){var S;const G=b.selectState,{selectState:H,onTokenSelect:U,onSelectedItemsChange:F,setSelectState:Y,hasKeyboardFocus:Z,isTokenEditable:ee}=this.props,{selectedOptions:j,isExpanded:ge,isDisabled:ne}=H,ue=this.getSelectedTokenIndexes();if(this.doesMutationObserverExist()||(this.attachMutationObserver(),this.focus()),this.props.focusOnMount&&b.focusOnMount!==this.props.focusOnMount&&this.focus(),((S=H.filterQuery)===null||S===void 0?void 0:S.length)&&H.filterQuery!==G.filterQuery&&this.caretPosInFilterQuery!==-1&&this.updateCaretPosInFilterQuery(),this.possiblyRepositionOptionsList(G),this.haveSelectedTokens()&&!(0,T.Ay)(G.selectedTokenIndexes,ue)&&j&&(ue==null||ue.forEach(fe=>{U&&U(j[fe])}),ge&&Y(()=>({isExpanded:!1})),this.scrollSelectedTokenIntoView()),G.isDisabled&&!ne&&this.moveCursorAndScrollToFilterQuery(),!(0,T.Ay)(G.selectedOptions,j,3)){if(F&&typeof j<"u"){if(ee){var xe;const{isCurrentlyEditingToken:fe}=this.state;if((((xe=G.selectedOptions)===null||xe===void 0?void 0:xe.length)||0)<j.length){if(fe){const se=j.pop();se&&j.splice(this.state.editTokenIndex,0,se),this.setTokenState(!1,0)}}else fe&&j.length===0&&this.setTokenState(!1,0)}F(j)}this.scrollFilterQueryIntoView()}this.inputHeight=this.getInputHeight(),Z&&!b.hasKeyboardFocus&&(0,s.A)(H.activeRowIndex)&&!this.allTokensAreSelected()&&this.selectAllTokens()}componentWillUnmount(){this.doesMutationObserverExist()&&this.removeMutationObserver(),this.updateQueryTimer&&clearTimeout(this.updateQueryTimer),this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel()}onBlur(b){const{selectState:S,setSelectState:G,hideFilterQueryOnBlur:H,onBlur:U,onOptionsListClosedBlur:F}=this.props,{selectedOptions:Y,filterQuery:Z,isExpanded:ee}=S,j=H&&Z&&!ee;this.setState(()=>({focused:!1})),this.deselectAllTokens(),j&&G(()=>({filterQuery:""})),this.caretPosInFilterQuery=-1,this.mouseDownOnToken=!1,U&&U(b,Y),!ee&&F&&F()}onChange(){this.state.composing||this.onFilterQueryChanged()}setTokenState(b,S){this.props.isTokenEditable&&this.setState(()=>({isCurrentlyEditingToken:b,editTokenIndex:S}))}onFilterQueryChanged(){const{setSelectState:b,selectState:S,onFilterQueryChange:G}=this.props,H=this.filterQueryRef.current,U=H==null?void 0:H.textContent,F=S.filterQuery!==U;if(this.backspaceWasPressed&&!F){this.backspaceWasPressed=!1;return}const Y=U?U.length>0:!1;this.saveCaretPosInFilterQuery(),b(()=>({filterQuery:U,isExpanded:Y})),G&&G(U)}onFocus(b){this.setState(()=>({focused:!0}));const{expandOnFocus:S,onInputFocused:G,setSelectState:H,onFocus:U}=this.props;S&&H(()=>({isExpanded:!0})),this.mouseDownOnToken||this.moveCursorAndScrollToFilterQuery(),G&&G(b),this.mouseDownOnToken=!1,U&&U(b)}onCaretSelectionChange(){this.isCaretOutSideFilterQuery()?this.updateCaretPosInFilterQuery():this.saveCaretPosInFilterQuery()}onRangeSelectionChange(){var b;const S=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection(),G=S==null?void 0:S.getRangeAt(0),H=this.getTokensAsArray(),{selectState:U}=this.props,{filterQuery:F}=U,Y=H.reduce((he,be,xe)=>S!=null&&S.containsNode(be)?[...he,xe]:he,[]),Z=Y.length>0;if(!F&&!Z&&!(S!=null&&S.isCollapsed)){this.ignoreSelectionChange=!0,S==null||S.collapseToEnd();return}if(this.isEntireFilterQuerySelected()&&!Z){var ee;this.ignoreSelectionChange=!0,G==null||G.setStartBefore((ee=this.filterQueryRef.current)===null||ee===void 0?void 0:ee.firstChild);return}const j=Y[0],ge=Y[Y.length-1],ne=H[j],ue=H[ge];if(!F&&Z){this.ignoreSelectionChange=!0,G==null||G.setStartBefore(ne),this.ignoreSelectionChange=!0,G==null||G.setEndAfter(ue),this.setSelectedTokenIndexes(Y);return}this.isEntireFilterQuerySelected()&&Z&&(this.ignoreSelectionChange=!0,G==null||G.setStartBefore(ne),this.setSelectedTokenIndexes(Y))}onSelectionChange(){var b;if(this.ignoreSelectionChange){this.ignoreSelectionChange=!1;return}const S=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection();let G=null;if(S){const{type:H}=S;G=H}G==="Caret"&&this.onCaretSelectionChange(),G==="Range"&&this.onRangeSelectionChange()}onKeyDown(b){if(this.state.composing)return;const{key:S,ctrlKey:G,metaKey:H,altKey:U,shiftKey:F}=b,{selectState:Y,onKeyDown:Z}=this.props,ee=(0,M.cX)()?H:G,j=S==="Delete"&&((0,M.cX)()&&U||(0,M.uF)()&&ee);(S==="Backspace"||j)&&this.onBackspace(b),!j&&S==="Delete"&&this.onDelete(b),S==="Escape"&&this.onEscape(b),(S==="Home"||H&&!F&&S==="ArrowLeft"||H&&!F&&S==="ArrowUp")&&this.onHome(b),(S==="End"||H&&!F&&S==="ArrowRight"||H&&!F&&S==="ArrowDown")&&this.onEnd(b),!H&&S==="ArrowLeft"&&!this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!0,this.onLeftArrow(b)),!H&&S==="ArrowRight"&&this.onRightArrow(b),S==="Tab"&&this.onTab(b),(S==="ArrowUp"||S==="ArrowDown")&&b.preventDefault(),S==="Enter"&&b.preventDefault(),!ee&&O.includes(S)&&this.onCharacterKey(),Z&&Z(b,{hasActiveRowIndex:(0,i.A)(Y.activeRowIndex),isExpanded:!!Y.isExpanded})}onHome(b){b.preventDefault();const{selectState:S}=this.props,{selectedOptions:G}=S;G!=null&&G.length?this.setSelectedTokenIndexes([0],{initiator:b.type}):this.moveCursorToFilterQuery({cursorAtStart:!0})}onEnd(b){b.preventDefault();const{selectState:S}=this.props,{selectedTokenIndexes:G}=S;G!=null&&G.length&&this.deselectAllTokens(),this.moveCursorAndScrollToFilterQuery()}onKeyUp(b){const{selectState:S,onKeyUp:G}=this.props,H=this.getSelectedTokenIndexes(),U=this.getTokensAsArray();this.shouldMoveCursorToFilterQuery&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.shouldMoveCursorToFilterQuery=!1),this.updateSelectionOnKeyUp&&(H!=null&&H.length)&&(this.selectTextInNode(U[H[0]]),this.updateSelectionOnKeyUp=!1),this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!1),G&&G(b,{hasActiveRowIndex:(0,i.A)(S.activeRowIndex)})}onInputContainerMouseDown(b){b.preventDefault(),this.haveSelectedTokens()&&this.deselectAllTokens(),this.state.focused?this.moveCursorAndScrollToFilterQuery():this.focus()}onPaste(b){if(!b||!b.clipboardData)return;const{selectState:S}=this.props,{filterQuery:G}=S,{onFilterQueryPaste:H,setSelectState:U}=this.props;b.preventDefault();const F=b.clipboardData.getData("text"),Y=this.caretPosInFilterQuery||0,Z=G||"",ee=(G==null?void 0:G.length)||0,j=Y<=ee?Y:ee,ge=Z.slice(0,j)+F+Z.slice(j);U(()=>({filterQuery:ge})),H&&H(b)}onCharacterKey(){if(!this.haveSelectedTokens())return;const{setSelectState:b}=this.props,{selectState:S}=this.props,{filterQuery:G,selectedOptions:H}=S,U=this.getSelectedTokenIndexes(),F=H==null?void 0:H.filter((ee,j)=>(U==null?void 0:U.indexOf(j))===-1),Y=this.getSelectedFilterQueryText(),Z=G==null?void 0:G.replace(Y,"");b(()=>({selectedOptions:F,selectedTokenIndexes:[],filterQuery:Z})),this.moveCursorToFilterQuery()}onBackspace(b){const{setSelectState:S}=this.props,{selectState:G,isTokenEditable:H}=this.props,{filterQuery:U}=G;if(this.ignoreSelectionChange=!0,this.allTokensAreSelected()&&(this.isEntireFilterQuerySelected()||!U)){b.preventDefault(),S(()=>({selectedOptions:[],selectedTokenIndexes:[],filterQuery:"",isExpanded:!1}));return}if(H&&(U==null?void 0:U.length)===1){b.preventDefault(),S(()=>({filterQuery:"",isExpanded:!1})),this.setTokenState(!1,0),this.moveCursorToFilterQuery();return}if(this.isEntireFilterQuerySelected()){b.preventDefault(),S(()=>({filterQuery:"",isExpanded:!1}));return}const Y=this.getTokensAsArray().length,Z=this.getSelectedTokenIndexes(),ee=this.isCaretAtStartOfFilterQuery();if(this.backspaceWasPressed=!0,ee&&Y===0){b.preventDefault();return}if(!ee&&!this.haveSelectedTokens()&&U)return;if(b.preventDefault(),!this.haveSelectedTokens()){this.setSelectedTokenIndexes([Y-1],{initiator:b.type});return}Z==null||Z.forEach(ue=>{this.removeToken(ue,"backspaceKey")});const j=Z&&Z[0],ge=j===0;let ne=null;j&&(ne=ge?[0]:[j-1]),ne!=null&&ne.length&&this.setSelectedTokenIndexes(ne,{initiator:b.type})}onDelete(b){const{setSelectState:S}=this.props;if(this.ignoreSelectionChange=!0,this.isEntireFilterQuerySelected()){b.preventDefault(),S(()=>({filterQuery:"",isExpanded:!1}));return}const H=this.getTokensAsArray().length,U=this.getSelectedTokenIndexes();if(H===0||!this.haveSelectedTokens()||(b.preventDefault(),U==null||U.forEach(ee=>{this.removeToken(ee,"deleteKey")}),!(U!=null&&U.length)))return;const Y=U[U.length-1]===H-1,Z=(U==null?void 0:U.length)===H;(Y||Z)&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.deselectAllTokens())}onEscape(b){const{selectState:S,setSelectState:G,onOptionsListClose:H}=this.props;S.isExpanded&&(b.stopPropagation(),H&&H(),G(()=>({isExpanded:!1})))}onLeftArrow(b){var S;const H=this.getTokensAsArray().length,U=this.getSelectedTokenIndexes(),F=(U==null?void 0:U.length)&&U[0],Y=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();let Z=null,ee=null;if(Y){const{type:be,anchorOffset:xe}=Y;Z=be,ee=xe}const j=Z==="Caret",ge=Z==="Range";if(b.shiftKey&&ge&&this.isRangeSelectionOfFilterQueryComplete(ee)){b.preventDefault();return}const ne=j&&this.isCaretAtStartOfFilterQuery();if(H===0&&ne){b.preventDefault();return}if(H===0)return;if(this.props.isTokenEditable&&this.state.isCurrentlyEditingToken&&ne){b.preventDefault();return}if(this.allTokensAreSelected()){this.setSelectedTokenIndexes([0],{initiator:b.type});return}if(!this.haveSelectedTokens()&&ne){this.setSelectedTokenIndexes([H-1],{initiator:b.type});return}if(ge&&this.haveSelectedTokens()&&F===0){b.preventDefault();return}this.haveSelectedTokens()&&typeof F=="number"&&this.setSelectedTokenIndexes([F-1],{initiator:b.type})}onRightArrow(b){var S;const G=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),H=(G==null?void 0:G.type)==="Range",F=this.getTokensAsArray().length,Y=this.getSelectedTokenIndexes(),Z=(Y==null?void 0:Y.length)&&Y[0];if(typeof Z!="number")return;if(!(H&&this.haveSelectedTokens()&&Z<F-1)&&this.haveSelectedTokens()||this.allTokensAreSelected()){b.preventDefault(),this.shouldMoveCursorToFilterQuery=!0,this.deselectAllTokens();return}this.haveSelectedTokens()&&typeof Z=="number"&&this.setSelectedTokenIndexes([Z+1],{initiator:b.type})}onTab(b){const{shiftKey:S}=b,{expandOnFocus:G,selectState:H,onOptionsListClose:U,setSelectState:F,disableCloseOnTab:Y}=this.props;Y||(U&&U(),(S||G&&(0,s.A)(H.activeRowIndex))&&F(()=>({isExpanded:!1})))}onTokenMouseDown(b,S){const{focused:G,isCurrentlyEditingToken:H}=this.state,{selectState:U,isTokenEditable:F}=this.props;if(U.isDisabled)return;if(b.preventDefault(),this.mouseDownOnToken=!0,b.stopPropagation(),F&&!H){this.onTokenEdit(S);return}G||this.focus();const Y=this.getTokensAsArray();this.selectTextInNode(Y[S]);const Z=this.getSelectedTokenIndexes();S!==(Z==null?void 0:Z[0])&&this.setSelectedTokenIndexes([S])}onTokenEdit(b){const{selectState:S,setSelectState:G,processOptions:H}=this.props,{selectedOptions:U}=S;this.setTokenState(!0,b);let F="";U&&U[b]&&(typeof U[b].label=="string"&&U[b].label!==U[b].value?F=U[b].label:F=U[b].value),this.removeToken(b,"editToken"),this.updateFilterQueryValue(F),H&&H([],F).then(Y=>{G(()=>({isExpanded:!0,options:Y,filterQuery:F}))})}onTokenRemoveMouseDown(b,S){const{focused:G,isCurrentlyEditingToken:H,editTokenIndex:U}=this.state;b.preventDefault(),this.mouseDownOnToken=!0,b.stopPropagation(),G||this.focus(),this.moveCursorToFilterQuery(),this.props.isTokenEditable&&H&&S<U&&this.setTokenState(!0,U-1),this.removeToken(S,"iconClick")}onFilterQueryMouseDown(b){var S;this.state.focused&&(!((S=this.filterQueryRef.current)===null||S===void 0)&&S.textContent)&&b.stopPropagation(),this.haveSelectedTokens()&&this.deselectAllTokens()}updateFilterQueryValue(b){const{onFilterQueryChange:S}=this.props;this.updateQueryTimer=setTimeout(()=>{S&&S(b),this.moveCursorToFilterQuery(),clearTimeout(this.updateQueryTimer)})}onPlaceholderMouseDown(){this.focus()}onSelectAll(b){var S;const{setSelectState:G}=this.props;b.preventDefault(),G(()=>({selectedTokenIndexes:[],isExpanded:!1}));const H=(S=this.filterQueryRef)===null||S===void 0?void 0:S.current;H!=null&&H.textContent&&this.selectTextInNode(H)}onCompositionStart(){this.setState(()=>({composing:!0}))}onCompositionEnd(){this.setState(()=>({composing:!1})),this.onFilterQueryChanged()}onCut(){const{selectState:b}=this.props,{filterQuery:S,selectedOptions:G}=b,H=this.getSelectedTokenIndexes(),U=G==null?void 0:G.filter((Z,ee)=>(H==null?void 0:H.indexOf(ee))===-1),F=this.getSelectedFilterQueryText(),Y=S==null?void 0:S.replace(F,"");this.selectStateAfterMutation={selectedTokenIndexes:[],selectedOptions:U,filterQuery:Y,isExpanded:!1}}onNodeAdded(b){const{nodeName:S}=b;(S==="B"||S==="I")&&(this.removeMutationObserver(),this.runForceRenderSelectContainer())}onNodeRemoved(b){const{setSelectState:S}=this.props;if(this.selectStateAfterMutation){this.caretPosInFilterQuery=0,this.removeMutationObserver(),this.runForceRenderSelectContainer(!0),S(()=>this.selectStateAfterMutation),this.selectStateAfterMutation=null;return}b===this.filterQueryRef.current&&(this.removeMutationObserver(),this.runForceRenderSelectContainer(!0))}onMutation(b){b.forEach(S=>{S.addedNodes.forEach(this.onNodeAdded),S.removedNodes.forEach(this.onNodeRemoved)})}getAriaPlaceholderText(){const{selectState:b,placeholderText:S}=this.props,{filterQuery:G,selectedOptions:H}=b;if(!G&&!(H&&H.length>0))return S}getAriaActiveDescendant(){const{selectState:b}=this.props,{selectId:S,activeRowIndex:G}=b;return(0,i.A)(G)?(0,f.Es)(S,`option_${G}`):void 0}getInputHeight(){const{inputRef:b}=this.props,S=b==null?void 0:b.current;return S?S.offsetHeight:null}getTokensAsArray(){var b,S;const G=(b=this.props.inputRef)===null||b===void 0||(S=b.current)===null||S===void 0?void 0:S.querySelectorAll(".c-token");return Array.prototype.slice.call(G)}getSelectedFilterQueryText(){var b;const{selectState:S}=this.props,{filterQuery:G}=S;if((G==null?void 0:G.length)===0)return"";const H=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection(),U=H==null?void 0:H.toString();if(!(H==null?void 0:H.containsNode(this.filterQueryRef.current,!0)))return"";const Y=U==null?void 0:U.split(`
`);return Y!=null&&Y.length?Y[Y.length-1].trim():""}setSelectedTokenIndexes(b){let{initiator:S}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S==="keydown"&&(this.updateSelectionOnKeyUp=!0,this.ignoreSelectionChange=!0);const{setSelectState:G}=this.props;G(()=>({selectedTokenIndexes:b}))}getSelectedTokenIndexes(){const{selectState:b}=this.props,{selectedTokenIndexes:S}=b;return S||[]}allTokensAreSelected(){const b=this.getSelectedTokenIndexes(),S=this.getTokensAsArray();return b!=null&&b.length?b.length>0&&b.length===S.length:!1}attachMutationObserver(){var b;if(this.mutationObserver=new MutationObserver(this.onMutation),!((b=this.props.inputRef)===null||b===void 0)&&b.current){var S;this.mutationObserver.observe((S=this.props.inputRef)===null||S===void 0?void 0:S.current,{subtree:!0,childList:!0})}}deselectAllTokens(){this.setSelectedTokenIndexes([])}determineCaretPosInFilterQuery(){const{selectState:b}=this.props,{filterQuery:S}=b;if(this.caretPosInFilterQuery===-1||!S)return 0;const G=S==null?void 0:S.length;return typeof this.caretPosInFilterQuery=="number"&&this.caretPosInFilterQuery>G?G:this.caretPosInFilterQuery}doesMutationObserverExist(){return!!this.mutationObserver}removeMutationObserver(){var b;(b=this.mutationObserver)===null||b===void 0||b.disconnect(),this.mutationObserver=null}focus(){var b;const S=(b=this.props.inputRef)===null||b===void 0?void 0:b.current;S==null||S.focus()}forceRenderSelectContainer(){this.setState(()=>({selectContainerKey:Date.now()}))}runForceRenderSelectContainer(b){const{isLoading:S,throttleForceRenderSelectContainer:G}=this.props;G?(b&&this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel(),S||this.forceRenderSelectContainerThrottled()):this.forceRenderSelectContainer()}haveSelectedTokens(){var b;return!!(!((b=this.getSelectedTokenIndexes())===null||b===void 0)&&b.length)}isCaretAtStartOfFilterQuery(){var b;if(this.isCaretOutSideFilterQuery())return!1;const{selectState:S}=this.props,{filterQuery:G}=S;if(!G)return!0;const H=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection();let U=null;if(H){const{anchorOffset:F}=H;U=F}return U===0}isCaretOutSideFilterQuery(){var b,S;const G=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection();let H=null;if(G){const{anchorNode:U}=G;H=U}return!(!((S=this.filterQueryRef.current)===null||S===void 0)&&S.contains(H))}isRangeSelectionOfFilterQueryComplete(b){const S=this.getSelectedFilterQueryText();if(!S)return!1;const{selectState:G}=this.props,H=G.filterQuery;return!H||!b?!1:S.substr(0,b)===(H==null?void 0:H.substr(0,b))}isEntireFilterQuerySelected(){const{selectState:b}=this.props,S=this.getSelectedFilterQueryText();return!!S&&S===b.filterQuery}moveCursorAndScrollToFilterQuery(){this.scrollFilterQueryIntoView(),this.moveCursorToFilterQuery()}moveCursorToFilterQuery(){let{cursorAtStart:b}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cursorAtStart:!1};var S,G,H,U;const F=document.createRange(),Y=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();Y==null||Y.removeAllRanges();const Z=(G=this.filterQueryRef)===null||G===void 0?void 0:G.current,ee=(Z==null?void 0:Z.firstChild)||Z,j=b?0:(U=Z==null||(H=Z.textContent)===null||H===void 0?void 0:H.trim())===null||U===void 0?void 0:U.length;ee!==null&&typeof j=="number"&&F.setStart(ee,j),F.collapse(!0),Y==null||Y.addRange(F)}possiblyRepositionOptionsList(b){if(!this.measurePopoverEvent)return;const{selectState:S}=this.props,G=S.isExpanded&&!b.isExpanded,H=this.getInputHeight(),U=this.inputHeight!==H;if(G||U){var F;(F=this.props.windowRef.deref())===null||F===void 0||F.dispatchEvent(this.measurePopoverEvent)}}removeToken(b,S){const{selectState:G,setSelectState:H,isTokenEditable:U}=this.props,{selectedOptions:F,pendingQueries:Y,filterQuery:Z}=G,ee=Y?Y.length:0,j=F&&F[b]&&F[b].queryId,ne=j&&ee?Y==null?void 0:Y.filter(ue=>{let{queryId:he}=ue;return he!==j}):Y;H(()=>({selectedOptions:F==null?void 0:F.filter((ue,he)=>he!==b),selectedTokenIndexes:[],removalInitiator:S,removedItemIndex:b,pendingQueries:ne})),U&&this.state.isCurrentlyEditingToken&&this.updateFilterQueryValue(Z)}saveCaretPosInFilterQuery(){var b;const S=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection();this.caretPosInFilterQuery=S==null?void 0:S.anchorOffset}scrollFilterQueryIntoView(){const b=this.filterQueryRef.current;b&&b!=null&&b.scrollIntoView&&(b==null||b.scrollIntoView({block:"nearest"}))}scrollSelectedTokenIntoView(){const b=this.getSelectedTokenIndexes();if(!this.haveSelectedTokens())return;const S=this.getTokensAsArray();if(!(b!=null&&b.length))return;const G=b[b.length-1],H=S[G];H&&H.scrollIntoView&&H.scrollIntoView({block:"nearest"})}selectAllTokens(){var b;if(this.state.ignoreSelectAllTokensAfterMount){this.setState(()=>({ignoreSelectAllTokensAfterMount:!1}));return}const S=this.getTokensAsArray();if(S.length===0)return;const G=S[0],H=S[S.length-1],U=(b=this.props.windowRef.deref())===null||b===void 0?void 0:b.getSelection(),F=document.createRange();U==null||U.removeAllRanges(),F.setStartBefore(G),F.setEndAfter(H),U==null||U.addRange(F)}selectTextInNode(b){var S;if(!b)return;const G=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),H=document.createRange();this.ignoreSelectionChange=!0,G==null||G.removeAllRanges();const U=(0,M.cX)()?b:b.querySelector(".c-token__content");H.selectNode(U),this.ignoreSelectionChange=!0,G==null||G.addRange(H)}updateCaretPosInFilterQuery(){var b,S;const G=(b=this.filterQueryRef)===null||b===void 0?void 0:b.current;if(!G)return;const H=document.createRange(),U=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();U==null||U.removeAllRanges();const F=this.determineCaretPosInFilterQuery();typeof F=="number"&&H.setStart((G==null?void 0:G.firstChild)||G,F),H.collapse(!0),U==null||U.addRange(H)}renderFilterQuery(){const{selectState:b,isTokenEditable:S,size:G}=this.props,{filterQuery:H,isDisabled:U}=b,{isCurrentlyEditingToken:F,editTokenIndex:Y}=this.state,Z=U?void 0:this.onFilterQueryMouseDown,ee=(0,n.A)({"c-multi_select_input__filter_query":!0,[`c-multi_select_input__${G}_filter_query--edit`]:S&&F});return t.createElement("span",{className:ee,ref:this.filterQueryRef,onMouseDown:Z,key:Y},H)}renderInput(){const{selectState:b,selectDataQa:S,inputRef:G,ariaLabelledBy:H,ariaLabel:U,autoClogProps:F,iconType:Y,isTokenEditable:Z}=this.props,{selectId:ee,isDisabled:j,isExpanded:ge,isInvalid:ne}=b,ue=j?void 0:0,he=j?void 0:this.getAriaActiveDescendant(),be=!j,xe=be,Le=j?void 0:this.onFocus,fe=j?void 0:this.onBlur,se=j?void 0:this.onChange,Q=j?void 0:this.onPaste,k=j?void 0:this.onKeyDown,N=j?void 0:this.onKeyUp,$=j?void 0:this.onSelectionChange,W=j?void 0:this.onCut,q=j?void 0:this.onCompositionStart,re=j?void 0:this.onCompositionEnd,le=(0,n.A)({"c-multi_select_input__input":!0,"c-multi_select_input__input--with-icon":!!Y}),Ae=t.createElement("div",{role:"combobox","aria-disabled":j,"aria-autocomplete":"list","aria-expanded":ge,"aria-controls":(0,f.Es)(ee,"listbox"),"aria-activedescendant":he,"aria-labelledby":H,"aria-label":U,"aria-placeholder":this.getAriaPlaceholderText(),"aria-invalid":ne,id:ee,className:le,tabIndex:ue,contentEditable:be,suppressContentEditableWarning:xe,"data-qa":S?`${S}-input`:void 0,ref:G,onFocus:Le,onBlur:fe,onInput:se,onCompositionStart:q,onCompositionEnd:re,onPaste:Q,onKeyDown:k,onKeyUp:N,onSelect:$,onCut:W,"aria-multiline":!1},P(),Z&&this.state.isCurrentlyEditingToken?this.renderEditableTokens():t.createElement(t.Fragment,null,this.renderTokens(),this.renderFilterQuery()),P({contentEditable:!1}));return F?t.createElement(d.A,{autoClogProps:F,actionProps:C,elementType:E.ElementType.INPUT},Ae):Ae}renderLoadingIndicator(){const{isLoading:b,size:S}=this.props;return b?t.createElement(v.A,{className:"c-multi_select_input__spinner",color:"blue",size:S===p.hu.LARGE?p.hu.LARGE:p.hu.MEDIUM}):null}renderPlaceholder(){const{selectState:b,placeholderText:S,iconType:G}=this.props,{filterQuery:H,selectedOptions:U,isDisabled:F}=b;if(this.state.composing||H||U&&U.length>0)return null;const Y=F?void 0:this.onPlaceholderMouseDown,Z=(0,n.A)({"c-multi_select_input__placeholder":!0,"c-multi_select_input__placeholder--with-icon":!!G});return t.createElement("div",{"aria-hidden":"true",className:Z,onMouseDown:Y},S)}renderToken(b,S){let{icon:G,svgIcon:H,value:U,label:F,hoverText:Y,isLoading:Z,isError:ee,isMemberError:j,isTeamError:ge,isUnknown:ne,emailTeam:ue}=b;const{forceRealName:he,size:be,selectState:xe,customizeTokenProps:Le,disableIdParsing:fe}=this.props,se=this.getSelectedTokenIndexes(),Q=(se==null?void 0:se.indexOf(S))!==-1,{isDisabled:k,restrictedSelectedTokenIndexes:N,disabledSelectedTokenIndexes:$,invalidSelectedTokenIndexes:W}=xe,q=!!N&&(N==null?void 0:N.indexOf(S))!==-1,re=!!$&&($==null?void 0:$.indexOf(S))!==-1,le=!!W&&(W==null?void 0:W.indexOf(S))!==-1,Ae=k||re,Te=Ae?void 0:Ee=>this.onTokenMouseDown(Ee,S),Ne=Ae?void 0:()=>this.renderTokenRemoveIcon(S),pe=be;return t.createElement(t.Fragment,null,t.createElement(y.A,D({"data-qa":"multi_select_token_wrapper",className:"c-multi_select_input__token"},Te?{onMouseDown:Te}:{},{isDisabled:Ae,entityId:U,label:F,hoverText:Y,isLoading:Z,isError:ee,isMemberError:j,isTeamError:ge,isUnknown:ne},be?{size:pe}:{},{isSelected:Q},Ne?{renderIcon:Ne}:{},{forceRealName:he,icon:G,svgIcon:H,tabIndex:-1,contentEditable:!1},Le,{disableIdParsing:fe},ue?{emailTeam:ue}:{},{isRestricted:q,isInvalid:le})),"\xA0")}renderTokenRemoveIcon(b){return t.createElement(d.A,{actionProps:m,elementType:E.ElementType.BUTTON},t.createElement(I.A,{type:"times-medium",className:"c-multi_select_input__remove_token",id:"multi_select_input__remove_token","data-qa":"token_remove_icon","aria-hidden":"true",onMouseDown:(0,l.A)(S=>{this.onTokenRemoveMouseDown(S,b)})}))}renderTokens(){const{selectedOptions:b}=this.props.selectState;return b==null?void 0:b.map((S,G)=>t.createElement(t.Fragment,{key:S.key||S.value},this.renderToken(S,G)))}renderEditableTokens(){const{isCurrentlyEditingToken:b,editTokenIndex:S}=this.state,G=this.renderTokens()||[],H=this.renderFilterQuery();return b?G.splice(S,0,H):G==null||G.push(H),G}renderIcon(){const{iconType:b}=this.props;return b?t.createElement(I.A,{type:b,inline:!0}):null}render(){const{maxHeight:b,width:S,selectState:G,classPrefix:H,size:U}=this.props,{isDisabled:F,isInvalid:Y,selectedOptions:Z}=G,ee=Z==null?void 0:Z.length,j=(0,n.A)("c-multi_select_input",{"c-multi_select_input--disabled":F,"c-multi_select_input--focused":this.state.focused&&!F,"c-multi_select_input--large":U===p.hu.LARGE,"c-multi_select_input--invalid":Y,"c-multi_select_input--initial":!ee,[`${H}__multi_select_input`]:H,[h.E.large]:U===p.hu.LARGE}),ge=F?void 0:this.onInputContainerMouseDown;return t.createElement("div",{className:j,style:{width:S,maxHeight:b},onMouseDown:ge,key:this.state.selectContainerKey},this.renderIcon(),this.renderInput(),this.renderLoadingIndicator(),this.renderPlaceholder())}constructor(b){super(b),(0,g.v)(this,["onFocus","onBlur","onChange","onPaste","onKeyDown","onKeyUp","onInputContainerMouseDown","onFilterQueryMouseDown","onPlaceholderMouseDown","onSelectionChange","onCut","onMutation","onNodeRemoved","onNodeAdded","onCompositionStart","onCompositionEnd"]);var S;this.state={composing:!1,focused:!1,selectContainerKey:Date.now(),isCurrentlyEditingToken:!1,editTokenIndex:0,ignoreSelectAllTokensAfterMount:(S=b.ignoreSelectAllTokensAfterMount)!==null&&S!==void 0?S:!1},this.caretPosInFilterQuery=-1,this.ignoreSelectionChange=!1,this.updateSelectionOnKeyUp=!1,b.measurePopoverEventName&&(this.measurePopoverEvent=new Event(b.measurePopoverEventName));var G;this.forceRenderSelectContainerThrottled=(0,o.A)(this.forceRenderSelectContainer,(G=b.forceRenderSelectContainerThrottleRate)!==null&&G!==void 0?G:R,L),this.filterQueryRef=t.createRef()}},"MultiSelectInput");V.displayName="MultiSelectInput",V.defaultProps={inputRef:t.createRef(),maxHeight:96,placeholderText:void 0,onKeyDown:a.A,onKeyUp:a.A,size:p.hu.MEDIUM,width:300,isLoading:!1,classPrefix:void 0,selectDataQa:void 0,focusOnMount:!1,measurePopoverEventName:null,onSelectedItemsChange:a.A,onFilterQueryChange:a.A,onFilterQueryPaste:a.A,ariaLabelledBy:void 0,ariaLabel:void 0,expandOnFocus:!1,onTokenSelect:a.A,onInputFocused:a.A,forceRealName:void 0,onOptionsListClose:a.A,processOptions:K=>r.S.resolve(K),isTokenEditable:!1,hideFilterQueryOnBlur:!0,autoClogProps:void 0,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,hasKeyboardFocus:!1,onFocus:a.A,onBlur:a.A,onOptionsListClosedBlur:a.A,ignoreSelectAllTokensAfterMount:!1,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:R};const B=(0,_.A)((0,u.A)(V))},8274994582:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(6308822),s=e(735940183);const i=new s.Ay("form_inputs"),o=c(a=>{let{count:r,clientTheme:d,spinnerSize:u="large"}=a;return t.createElement("div",{className:"c-multi_select_helper_text c-multi_select_helper_text--loading"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container"},t.createElement(n.A,{color:d==="dark"?"white":"blue",size:u,inline:!0})),i.t("Loading {count, plural, =1 {# entry} other {# entries}}",{count:r}))},"MultiSelectLoadingText")},320706952:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(8683010724),s=e(735940183);const i=new s.Ay("form_inputs"),o=c(a=>{let{count:r}=a;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--unknown"},t.createElement(n.A,{name:"emoji-missing",variation:"filled",inline:!0})),i.t("{count, plural, =1 {# entry has} other {# entries have}} multiple matches. Select entry to resolve.",{count:r}))},"MultiSelectUnknownText")},581574686:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>C});var t=e(3134334389),n=e(5255740490),s=e(6696292586),i=e(7715417323),l=e(1641606663),o=e(6308822),a=e(3391133100),r=e(2219904496),d=e(5166368300),u=e(7193040700),_=e(8683010724),v=e(4426213732),h=e(735940183),f=e(429204216);function I(){return I=Object.assign||function(m){for(var O=1;O<arguments.length;O++){var P=arguments[O];for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(m[R]=P[R])}return m},I.apply(this,arguments)}c(I,"_extends");const p=new h.Ay("select"),y=1e4,g={ArrowLeft:!0,ArrowRight:!0},E={ArrowUp:!0,ArrowDown:!0},M={Backspace:!0,Delete:!0};let T=c(class extends t.Component{componentDidMount(){const{inputRef:O,focusOnMount:P,expandOnFocus:R}=this.props,L=O&&O.current;P&&(!this.state.hasFocus&&L&&L.focus(),R&&this.showOptionsList())}componentDidUpdate(O,P){const{inputRef:R,selectState:L,focusOnMount:V}=this.props,{selectedOption:B}=L,{selectState:K}=O,{selectedOption:b}=K,S=R&&R.current,{hasFocus:G,focusedViaMouse:H}=this.state;B&&G&&!H&&(B!==b||!P.hasFocus)&&setTimeout(()=>{S==null||S.select()},50),V&&O.focusOnMount!==V&&(this.state.hasFocus||S==null||S.focus())}componentWillUnmount(){this.blurTimeout&&clearTimeout(this.blurTimeout)}onClick(O){const{inputRef:P,selectState:R,onClick:L,expandOnClick:V,searchOnClick:B}=this.props,{isDisabled:K,isExpanded:b,selectedOption:S}=R;if(K)return;const G=P&&P.current;this.state.hasFocus||(this.setState(()=>({focusedViaMouse:!0})),G==null||G.focus()),(V||S)&&!b&&this.showOptionsList({searchOnClick:B}),L&&L(O)}onBlur(O){const{onBlur:P}=this.props;this.setState(()=>({hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1}),()=>{P&&P(O)})}onFocus(O){const{onFocus:P}=this.props;this.setState(()=>({hasFocus:!0}),()=>{P&&P(O)})}onInputChanged(O){const{selectState:P,setSelectState:R,expandOnClick:L,retainPreviousSelectionOnDelete:V}=this.props,{isExpanded:B,selectedOption:K}=P;if(this.backspaceOrDeletePressed&&O.length===0&&K){R(()=>({filterQuery:O,displayQuery:O,...V?{}:{selectedOption:null}}));return}B?!L&&!O&&R(()=>({isExpanded:!1})):this.showOptionsList(),R(()=>({filterQuery:O,displayQuery:O}))}onKeyPressedEnter(O){this.props.selectState.isExpanded?O.preventDefault():(this.showOptionsList(),O.stopPropagation())}onKeyPressedEscape(O){const{selectState:P,setSelectState:R,resultsInPopover:L,onEsc:V,onOptionsListClose:B}=this.props;P.isExpanded&&L&&(O.stopPropagation(),V&&V(),B&&B(),R(()=>({isExpanded:!1})))}onKeyPressedTab(){const{setSelectState:O,onOptionsListClose:P,selectState:R}=this.props;P&&P();const{activeRowIndex:L,initialActiveOption:V}=R;typeof L!="number"&&!V&&O(()=>({isExpanded:!1}))}onUpOrDownPressed(O){O.preventDefault(),this.props.selectState.isExpanded||(this.showOptionsList(),O.stopPropagation())}onWrapperKeyDown(O){const{key:P}=O;if(E[P]){this.onUpOrDownPressed(O);return}if(P==="Enter"){this.onKeyPressedEnter(O);return}if(P==="Escape"){this.onKeyPressedEscape(O);return}P==="Tab"&&this.onKeyPressedTab()}onInputKeyDown(O){const{key:P}=O,R=M[P],L=g[P],V=R||L||(0,f.A)(O);this.setState(()=>({cursorVisible:V})),this.backspaceOrDeletePressed=R}maybeRenderIconOrLoading(){const{showDropdownIcon:O,isLoading:P,size:R,expandOnClick:L}=this.props;return P?t.createElement(o.A,{className:"c-select_input__spinner",color:"blue",size:R===u.hu.LARGE?"large":"medium"}):!O||!L?null:t.createElement("span",{className:"c-select_input__icon"},t.createElement(_.A,{name:"caret-down",size:"20"}))}showOptionsList(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{searchOnClick:P}=O;this.updateOptionsListPosition(),this.props.setSelectState(()=>({isExpanded:!0,searchOnClick:P}))}updateOptionsListPosition(){const{selectState:O}=this.props,{isExpanded:P}=O;if(!P&&this.measurePopoverEvent){var R;(R=this.context.windowRef.deref())===null||R===void 0||R.dispatchEvent(this.measurePopoverEvent)}}renderInputContent(){const{selectState:O,renderSelectedOption:P,classPrefix:R,selectDataQa:L,hideSelectedOptionOnDropdownOpen:V}=this.props,{isExpanded:B,selectedOption:K}=O;if(this.state.cursorVisible||!K||B&&(V||O.filterQuery))return null;const b=(0,n.A)("c-select_input__content",{[`${R}__select_input_content`]:R});return t.createElement("div",{className:b,"data-qa":L?`${L}-input-content`:null},t.createElement("span",{className:"c-select_input__content_text"},P&&P(K)))}renderTextInput(){const{selectDataQa:O,inputRef:P,classPrefix:R,ariaLabelledBy:L,ariaDescribedBy:V,icon:B,maxCharacterLimit:K,size:b,selectState:S,autoClogProps:G,hideSelectedOptionOnDropdownOpen:H}=this.props,{activeRowIndex:U,filterQuery:F,isDisabled:Y,isExpanded:Z,isInvalid:ee,isRequired:j,selectedOption:ge,selectId:ne=""}=S;let ue;F||!Z&&ge||ge&&Z&&!H?ue=null:ue=this.props.placeholderText||p.t("Please select an option");const he=Z&&(0,s.A)(U)?(0,a.Es)(ne,`option_${U}`):null,be=!this.state.cursorVisible&&ge&&!Z,xe=(0,n.A)("c-select_input",{"c-select_input--offscreen":be,"c-select_input--invalid":ee,[`${R}__select_input`]:R}),Le=(0,a.Yk)([V,(0,a.Es)(ne,"initial-focus")]),se=!this.state.focusedViaMouse&&this.state.hasFocus&&!this.state.cursorVisible&&H?F||ge&&ge.label:F,Q={spellCheck:!1,className:xe,id:ne,name:ne,"aria-activedescendant":he,"aria-autocomplete":"list","aria-expanded":Z,"aria-owns":(0,a.Es)(ne,"listbox"),"aria-required":j,"aria-label":this.props["aria-label"],"aria-labelledby":L,"aria-describedby":Le,isInvalid:ee,autoComplete:"off",isDisabled:Y,onChange:this.onInputChanged,placeholder:ue,value:se||"","data-qa":O?`${O}-input`:null,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onInputKeyDown,role:"combobox",autoClogProps:G};return B||K?t.createElement(r.A,I({},Q,{icon:B,size:b,maxCharacterLimit:K,showError:!1,type:"text",inputRef:P,isInvalid:ee})):t.createElement(d.A,I({},Q,{ref:P}))}render(){const{icon:O,size:P,selectDataQa:R,width:L,classPrefix:V,showDropdownIcon:B,selectState:K}=this.props,{isInvalid:b}=K,S=(0,n.A)("c-select_input__wrapper",{[`c-select_input--${P}`]:P,"c-select_input--with_icon_right":B,"c-select_input--with_icon_left":!!O,"c-select_input--invalid":b,[`${V}__select_input_wrapper`]:V}),G=(0,n.A)("c-select_input__input_container",{[`${V}__select_input_container`]:V});return t.createElement("div",{role:"presentation",className:S,style:{width:L},onClick:this.onClick,onKeyDown:this.onWrapperKeyDown,"data-qa":R?`${R}-wrapper`:null},t.createElement("div",{className:G},this.renderTextInput(),this.renderInputContent()),t.createElement("div",{className:"c-select_input__icon_container"},this.maybeRenderIconOrLoading()))}constructor(O){super(O),(0,v.v)(this,["onClick","onFocus","onBlur","onUpOrDownPressed","onKeyPressedEnter","onKeyPressedEscape","onKeyPressedTab","onWrapperKeyDown","onInputKeyDown","onInputChanged","showOptionsList","updateOptionsListPosition"]),this.selectInputRef=t.createRef(),this.backspaceOrDeletePressed=!1,this.measurePopoverEvent=void 0,this.blurTimeout=void 0,this.state={hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1},O.measurePopoverEventName&&(this.measurePopoverEvent=new Event(O.measurePopoverEventName))}},"SelectInput");T.displayName="SelectInput",T.defaultProps={autoClogProps:void 0,inputRef:null,onClick:i.A,placeholderText:void 0,width:360,selectDataQa:void 0,showDropdownIcon:!0,icon:void 0,maxCharacterLimit:void 0,focusOnMount:!1,isLoading:!1,classPrefix:void 0,onFocus:i.A,onBlur:i.A,onEsc:i.A,resultsInPopover:!0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,onOptionsListClose:i.A,expandOnClick:!0,searchOnClick:!1,expandOnFocus:!0,hideSelectedOptionOnDropdownOpen:!0},T.contextType=l.Mn;const D={SelectInput:T},C=T},7074822529:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>N,oj:()=>Q});var t=e(3134334389),n=e(5255740490),s=e(45851552),i=e(6696292586),l=e(2003990933),o=e(5404505308),a=e(7715417323),r=e(3478664464),d=e(166097325),u=e(1699044291),_=e(3398586081),v=e(9268023148),h=e(9636077426),f=e(6882609392),I=e(3652828077),p=e(1641606663),y=e(6308822),g=e(3391133100),E=e(7193040700),M=e(1398359918),T=e(8786006583),D=e(3821598679);function C($){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,M.A)($,(re,le)=>{if(re.type==="divider")return{type:"divider"};if(re.options){const{options:Ae,label:Te,...Ne}=re,pe=`${re.label.toLowerCase()}${E.Sx}${(0,D.A)()}`,Ee=[{type:"heading",label:re.label,group:pe,optionsCount:re.options&&re.options.length||0,extras:Ne}].concat(re.options.map((oe,ce)=>{const ke={type:"option",option:oe,optgroup:pe};return ce===0&&(ke.isFirstChild=!0),ce===re.options.length-1&&(ke.isLastChild=!0),ke}));if(W){if($[le-1]&&$[le-1].value&&!$[le-1].options&&Ee.unshift({type:"divider"}),(0,T.A)($)===re)return Ee;Ee.push({type:"divider"})}return Ee}return{type:"option",option:re}})}c(C,"formatOptions");var m=e(4426213732),O;(function($){$[$.ELEMENT=1]="ELEMENT",$[$.ATTRIBUTE=2]="ATTRIBUTE",$[$.TEXT=3]="TEXT",$[$.CDATA_SECTION=4]="CDATA_SECTION",$[$.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",$[$.ENTITY=6]="ENTITY",$[$.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",$[$.COMMENT=8]="COMMENT",$[$.DOCUMENT=9]="DOCUMENT",$[$.DOCUMENT_TYPE=10]="DOCUMENT_TYPE",$[$.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",$[$.NOTATION=12]="NOTATION"})(O||(O={}));const P=new Set(["INPUT","TEXTAREA","SELECT"]),R=new Set([...P,"BUTTON"]),L="http://www.w3.org/1999/xhtml",V="http://www.w3.org/2000/svg";function B($){return($==null?void 0:$.nodeType)===O.TEXT}c(B,"isTextNode");function K($){return($==null?void 0:$.nodeType)===O.ELEMENT}c(K,"isElement");function b($){return K($)&&$.namespaceURI===L}c(b,"isHtmlElement");function S($){return K($)&&$.namespaceURI===V}c(S,"isSvgElement");function G($){return b($)||S($)}c(G,"isHtmlOrSvgElement");function H($){return b($)||S($)}c(H,"isElementCssInlineStyle");function U($){return Y($,"a")}c(U,"isAnchorElement");function F($){return b($)&&R.has($.tagName)}c(F,"isInteractiveElement");function Y($,W){return b($)&&$.localName===W}c(Y,"isHtmlElementWithTagName");function Z($){return B($)?$:null}c(Z,"asTextNode");function ee($){return K($)?$:null}c(ee,"asElement");function j($){return b($)?$:null}c(j,"asHtmlElement");function ge($,W){const q=$;return q.hasAttribute&&q.hasAttribute(W)}c(ge,"hasAttribute");function ne($,W){return ge($,`data-${W}`)}c(ne,"hasData");var ue=e(735940183),he=e(8359728598),be=e(8459143513),xe=e(4757466470);function Le(){return Le=Object.assign||function($){for(var W=1;W<arguments.length;W++){var q=arguments[W];for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&($[re]=q[re])}return $},Le.apply(this,arguments)}c(Le,"_extends");const fe=new ue.Ay("select"),se=c($=>{var W;return $.type!=="heading"&&$.type!=="divider"&&!(!($==null||(W=$.option)===null||W===void 0)&&W.nonInteractive)},"isKeyboardNavigableOption"),Q=c($=>{var W;return!$.isDisabled&&!(!($==null||(W=$.option)===null||W===void 0)&&W.nonInteractive)},"isSelectableOption");let k=c(class extends be.B{componentDidMount(){this.initKeyCommands();const{focusOnMount:W=!1,selectState:q,setSelectState:re,shouldIncludeActiveOption:le=!1}=this.props,{selectType:Ae}=q;Ae===E.US.BASIC&&W&&this.onOpen();const Te=this.getInitalActiveRowIndex(),Ne=this.list.current;re(()=>({activeRowIndex:Te,...le?{activeOption:this.getOptionFromList(Te)}:null})),Te!==-1&&Ne&&Ne.scrollToRow(Te),this.removeAriaAttrsFromGridNode()}componentWillUnmount(){const{focusOnMount:W=!1,preventScroll:q=!1}=this.props,{selectType:re}=this.props.selectState;this.keyCommands&&this.keyCommands.reset(),W&&re===E.US.BASIC&&this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:q})}componentDidUpdate(W){var q;const{selectState:re,setSelectState:le,shouldIncludeActiveOption:Ae=!1,dynamicHeight:Te=!1,optionsShallowEqualComparisonDepth:Ne=4,shouldRerenderOnOptionChange:pe=!1}=this.props,{filterQuery:Ee,options:oe,initialActiveOption:ce}=re,ke=!(0,xe.Ay)(W.selectState.options,oe,Ne),Ce=Ee!==W.selectState.filterQuery;if(ke||Ce){const Ue=typeof ce<"u"?this.getActiveRowIndex():this.getFirstSelectableRowIndex();le(()=>({activeRowIndex:Ue,...Ae?{activeOption:this.getOptionFromList(Ue)}:null}));const He=Ue||Ue===0;this.list.current&&He&&(this.list.current.forceUpdateGrid(),this.list.current.scrollToRow(Ue))}if(ke&&!Ce&&pe){var Me;(Me=this.list.current)===null||Me===void 0||Me.recomputeRowHeights()}if(Te&&(re==null?void 0:re.options)!==((q=W.selectState)===null||q===void 0?void 0:q.options)){var Se;(Se=this.cellMeasurerCache)===null||Se===void 0||Se.clearAll(),this.list.current&&this.list.current.recomputeRowHeights()}this.removeAriaAttrsFromGridNode()}getInitalActiveRowIndex(){const{selectState:W,multiSelectMode:q=!1}=this.props,{selectedOption:re,initialActiveOption:le}=W;return q||!re?this.getFirstSelectableRowIndex():le?this.getActiveRowIndex():(0,s.A)(this.getOptionsList(),Ae=>{var Te;return se(Ae)&&(Ae==null||(Te=Ae.option)===null||Te===void 0?void 0:Te.value)===re.value})}getActiveRowIndex(){const{selectState:W}=this.props,{initialActiveOption:q}=W;if(!q)return;const re=(0,s.A)(this.getOptionsList(),le=>{var Ae;return se(le)&&(le==null||(Ae=le.option)===null||Ae===void 0?void 0:Ae.value)===q.value});if(re>=0)return re}getCurrentActiveElement(){var W,q;return(q=(W=this.context.windowRef.deref())===null||W===void 0?void 0:W.document.activeElement)!==null&&q!==void 0?q:null}getFirstSelectableRowIndex(){const{selectState:W,multiSelectMode:q=!1,customOptionCompare:re,shouldAlwaysHaveActiveRow:le=!1}=this.props,{filterQuery:Ae}=W,Te=this.getOptionsList();let Ne;if((Ae||le)&&Te.length){const pe=(0,s.A)(Te,Ee=>se(Ee)&&!this.isOptionSelected(W,Ee.option,q,re),0);pe!==-1&&(Ne=pe)}return Ne}getRowHeight(W){var q;const{optionsRowHeight:re=E.bJ,headingRowHeight:le=null,dividerRowHeight:Ae=E.r3}=this.props;return W.option&&(0,i.A)(W.option.height)?Number(W.option.height):W.type&&W.type==="divider"?Ae:W.type==="heading"&&(0,i.A)((q=W.extras)===null||q===void 0?void 0:q.height)?Number(W.extras.height):W.type&&W.type==="heading"&&le!==null?le:re}getClassName(W,q){const{unstyled:re=!1}=this.props;return re&&q?(0,n.A)(q):(0,n.A)(q,W)}getOptionFromList(W){const q=this.getOptionsList();return(0,l.A)(q,`[${W}].option`,null)}getOptionsList(){const{multiSelectMode:W=!1,selectState:q,includeDividers:re=!0}=this.props,{options:le,isRequired:Ae,selectedOption:Te,filterQuery:Ne,minQueryLength:pe}=q;let Ee=[];return pe&&pe>0&&Te&&!Ne&&(Ee=[Te]),le&&(!W&&Te&&!Ae?Ee=[E.az,...le]:Ee=le),Ee=[...this.formatOptions(Ee,re)],Ee}getDataQaTag(W,q){const{selectDataQa:re=void 0,selectState:le}=this.props,{isRequired:Ae}=le,Te=W.value?W.value:W.label;let Ne="";typeof Te=="string"&&(Ne=Te.replace(/[^\w\s]/g,"").replace(/\s/g,"_").toLowerCase());const pe=Ae?q:q-1;return W.value?`${re}_option_${pe}`:`${re}_option_header_${Ne}`}getNextActiveRowIndex(W){const q=this.getOptionsList();if(q&&!q.length)return-1;const re=q.length-1;if(W===re)return-1;const le=(0,i.A)(W)?W+1:0,Ae=(0,s.A)(q,se,le);return Ae!==-1&&q[Ae]?Ae:-1}getPreviousActiveRowIndex(W){if(W===0)return-1;const q=this.getOptionsList();if(q&&!q.length)return-1;const re=q.length-1,le=(0,i.A)(W)?W-1:re,Ae=(0,o.A)(q,se,le);return Ae!==-1&&q[Ae]?Ae:-1}getArialabelForItem(W){var q,re,le,Ae;const{isFirstChild:Te,isLastChild:Ne,optgroup:pe}=W;if(!pe)return null;const Ee=fe.t("First item in group {group}, {value}",{group:pe&&pe.split(E.Sx).slice(0,-1).join("-"),value:typeof((q=W.option)===null||q===void 0?void 0:q.label)=="string"?(re=W.option)===null||re===void 0?void 0:re.label:""}),oe=fe.t("Last item in group {group}, {value}",{group:pe&&pe.split(E.Sx).slice(0,-1).join("-"),value:typeof((le=W.option)===null||le===void 0?void 0:le.label)=="string"?(Ae=W.option)===null||Ae===void 0?void 0:Ae.label:""});return Te?Ee:Ne?oe:null}getEmptyStateMessage(){const{emptyStateMessage:W,selectState:q}=this.props,{filterQuery:re,minQueryLength:le}=q;if(W)return W(re);if(le){if(!re)return fe.t("Type to search\u2026");if(re.length<le)return fe.t("Keep typing\u2026")}return fe.t("No items")}getContainerStyle(){return{position:"relative",overflow:"visible"}}getListStyle(W){return{padding:W?E.Hy:void 0,boxSizing:"content-box"}}onArrowDown(W){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(W))return;const{isExpanded:q,activeRowIndex:re}=this.props.selectState;q&&W.preventDefault();const le=this.getNextActiveRowIndex(re);(0,i.A)(le)&&le!==-1&&this.moveNext(le)}onArrowUp(W){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(W))return;const{isExpanded:q,activeRowIndex:re}=this.props.selectState;q&&W.preventDefault();const le=this.getPreviousActiveRowIndex(re);(0,i.A)(le)&&le!==-1&&this.movePrevious(le)}onEsc(W){const{shouldIncludeActiveOption:q=!1}=this.props;if(!this.props.selectState.isExpanded||!this.shouldInterceptKeyEvent(W))return;W.preventDefault();const{onOptionsListClose:re=a.A}=this.props;re&&re(),this.props.setSelectState(()=>({isExpanded:!1,activeRowIndex:void 0,...q?{activeOption:null}:null,filterQuery:"",displayQuery:""}))}onEnter(W){if(this.props.shouldDisableKeyPressedEnter||!this.shouldInterceptKeyEvent(W))return;W.preventDefault();const{activeRowIndex:q,initialActiveOption:re}=this.props.selectState,le=this.getOptionsList();let Ae;typeof q=="number"&&(Ae=le[q]&&le[q].option||le[q]),Ae=Ae||re,!(Ae&&!Q(Ae))&&(this.onOptionSelected(Ae),this.onClose(W))}onTab(W){const{selectState:q,disableSelectOnTab:re=!1}=this.props;if(re||!this.shouldInterceptKeyEvent(W)||!q.isExpanded)return;const{onKeyPressedTab:le=a.A}=this.props;if(le&&le!==a.A){le(event);return}const{activeRowIndex:Ae,initialActiveOption:Te}=q,Ne=this.getOptionsList();let pe;typeof Ae=="number"&&(pe=Ne[Ae]&&Ne[Ae].option||Ne[Ae]),pe=pe||Te,pe&&W.preventDefault(),!(pe&&!Q(pe))&&this.onOptionSelected(pe)}onShiftTab(W){if(!this.shouldInterceptKeyEvent(W))return;const{onKeyPressedShiftTab:q=a.A}=this.props;q&&q!==a.A&&q(W)}onMouseEnteredOption(W){const{shouldIncludeActiveOption:q=!1}=this.props;this.isMouseMoveEnabled&&(this.props.setSelectState(()=>({activeRowIndex:W,...q?{activeOption:this.getOptionFromList(W)}:null})),this.list.current&&this.list.current.forceUpdateGrid())}onMouseLeftOption(){const{shouldAlwaysHaveActiveRow:W=!1}=this.props;!this.isMouseMoveEnabled||W||this.clearActive()}onOptionClicked(W){this.onOptionSelected(W,!0)}onScroll(W){const{onScroll:q=a.A}=this.props;q&&q(W)}onOptionSelected(W){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{onOptionSelected:re=a.A,onOptionUnselected:le=a.A,selectState:Ae,setSelectState:Te,multiSelectMode:Ne=!1,inputRef:pe,customOptionCompare:Ee,shouldIncludeActiveOption:oe=!1,shouldOptionBeSelected:ce,shouldAllowUnselectInMultiSelectMode:ke=!1,shouldAllowUnselectInSingleSelectMode:Ce=!0,stayExpandedAfterSelection:Me=!1}=this.props;if(W&&Q(W)){if(ce&&ce(W)===!1){Te(()=>({activeRowIndex:void 0,filterQuery:"",isExpanded:!1}),()=>{re(W)});return}if(W.value===E.yk)this.onClearSelectedOption();else if(Ne){const{selectedOptions:Se,shouldRefocusInputAfterSelection:Ue}=Ae;if(!this.isOptionSelected(Ae,W,Ne,Ee)&&Se)Te(()=>({selectedOptions:[...Se,W],activeRowIndex:void 0,...oe?{activeOption:null}:null,filterQuery:"",isExpanded:Me}),()=>{re&&re(W)});else if(ke){const Ye=(0,r.A)(Se,[W],(J,ae)=>J.value===ae.value);Te(()=>({selectedOptions:Ye,activeRowIndex:void 0,...oe?{activeOption:null}:null,filterQuery:"",isExpanded:Me}),()=>{le&&le(W)})}!Ue&&!W.fromUnknown&&pe&&pe.current&&pe.current.focus()}else{const Se={isExpanded:!1,filterQuery:"",displayQuery:"",selectedOption:Ce?null:Ae.selectedOption};!(0,d.A)(Ae.selectedOption,W)&&(Se.selectedOption=W),Te(()=>({...Se}),()=>{re&&re(W,q)}),Ae.shouldRefocusInputAfterSelection&&pe&&pe.current&&pe.current.focus()}}}onOpen(){const{focusOnMount:W=!1,selectState:q}=this.props,{selectType:re}=q;!W&&re!==E.US.BASIC||(this.previousFocus=this.getCurrentActiveElement(),this.listBody&&this.listBody.current&&this.listBody.current.focus())}onClose(W){W.key==="Escape"&&this.onEsc(W);const{focusOnMount:q=!1,preventScroll:re=!1}=this.props,{selectType:le}=this.props.selectState;!q&&le!==E.US.BASIC||this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:re})}onClearSelectedOption(){const{selectState:W,setSelectState:q,onOptionSelected:re=a.A,multiSelectMode:le=!1,onMultiSelectClear:Ae=void 0}=this.props,{selectedOption:Te,selectedOptions:Ne}=W;let pe=!1;Te?(q(()=>({selectedOption:null,isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{re&&re({value:null})}),pe=!0):le&&Ne&&Ne.length&&(q(()=>({selectedOptions:[],isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{Ae&&Ae()}),pe=!0),this.list.current&&pe&&this.list.current.forceUpdateGrid()}clearDynamicRowHeight(W){var q;(q=this.cellMeasurerCache)===null||q===void 0||q.clear(W,0),this.list.current&&this.list.current.recomputeRowHeights(W)}clearActive(){const{shouldIncludeActiveOption:W=!1}=this.props;this.props.setSelectState(()=>({activeRowIndex:void 0,...W?{activeOption:null}:null})),this.list.current&&this.list.current.forceUpdateGrid()}enableMouseMove(){this.isMouseMoveEnabled=!0}focusNode(W){W&&this.getCurrentActiveElement()!==W&&W.focus()}isFirstItemUnselectable(){const W=this.getOptionsList();return!se(W[0])}initKeyCommands(){var W;if(this.keyCommands)return;const{shouldTokenizeOnComma:q,shouldTokenizeOnSpace:re,keyCommandShortcuts:le}=this.props,Ae=["enter"];q&&Ae.push("comma"),re&&Ae.push("space");const Te=[{keys:["down"],handler:this.onArrowDown},{keys:Ae,handler:this.onEnter,filter:pe=>pe.code.toLowerCase()==="comma"&&pe.key!==","},{keys:["up"],handler:this.onArrowUp},{keys:["tab"],handler:this.onTab},{keys:["shift+tab"],handler:this.onShiftTab}],Ne=le?Te.concat(le):Te;this.keyCommands=new f.A((W=this.context.windowRef.deref())===null||W===void 0?void 0:W.document),this.keyCommands.bindAll(Ne)}isOptionSelected(W,q,re,le){let{selectedOptions:Ae,selectedOption:Te}=W;return re&&(!Ae||Ae&&!Ae.length)||!re&&!Te?!1:re?!le&&q?Ae&&Ae.some(Ne=>Ne.value===q.value):Ae&&Ae.some(Ne=>le({selectedOption:Ne,listOption:q})):Te&&q&&Te.value===q.value}isOptionActive(W,q,re){let{activeRowIndex:le}=W;if(!le&&le!==0)return!1;const Te=q[le];return(Te&&Te.option?Te.option:Te)===re}moveNext(W){const{setSelectState:q,shouldIncludeActiveOption:re=!1}=this.props,le=this.getOptionFromList(W);if(!le)return;const Ae=this.list.current;if(!Ae)return;q(()=>({activeRowIndex:W,...re?{activeOption:le}:null,displayQuery:le==null?void 0:le.value})),this.debouncedEnableMouseMove(),Ae.forceUpdateGrid();const Te=W===1&&this.isFirstItemUnselectable()?0:W;Ae.scrollToRow(Te)}movePrevious(W){const{setSelectState:q,shouldIncludeActiveOption:re=!1}=this.props,le=this.getOptionFromList(W);if(!le)return;const Ae=this.list.current;if(!Ae)return;const Te=this.getOptionsList();if(!Te)return;if(q(()=>({activeRowIndex:W,...re?{activeOption:le}:null,displayQuery:le==null?void 0:le.value})),this.debouncedEnableMouseMove(),Ae.forceUpdateGrid(),(le==null?void 0:le.height)!==0){Ae.scrollToRow(W);return}const Ne=(0,u.A)(Te.slice(0,W)).findIndex(pe=>{var Ee;return(pe==null||(Ee=pe.option)===null||Ee===void 0?void 0:Ee.height)!==0});Ae.scrollToRow(W-Ne-1)}shouldInterceptKeyEvent(W){return!W.target||!K(W.target)?!1:!!(ge(W.target,"aria-autocomplete")||ge(W.target,"aria-haspopup")||this.listBody.current&&this.listBody.current.contains(W.target))}removeAriaAttrsFromGridNode(){const W=this.listBody.current,q=W&&W.querySelector(".ReactVirtualized__Grid");q&&(q.removeAttribute("aria-label"),q.removeAttribute("aria-readonly"))}renderEmptyState(){const{unstyled:W=!1,width:q,isLoading:re=!1,selectDataQa:le=void 0,includeWrapper:Ae=!0}=this.props;if(re)return t.createElement(t.Fragment,null);const Te=this.getEmptyStateMessage();if(Te===null)return t.createElement(t.Fragment,null);const Ne=W||!Ae?+q:+q-E.$_;return t.createElement("div",{"data-qa":le?`${le}-empty-state`:null,className:this.getClassName("c-select_options_list__empty_state"),style:{width:Ne}},t.createElement("div",{role:"alert",className:this.getClassName("c-select_options_list__option c-select_options_list__option--empty-state")},Te))}renderList(){const{maxListHeight:W,width:q,includePadding:re,unstyled:le=!1,useSlackScrollbar:Ae,dynamicHeight:Te=!1,forceMaxHeight:Ne,includeWrapper:pe=!0,classPrefix:Ee=void 0}=this.props,oe=this.getOptionsList(),ce=W||E.CK,ke=oe.map(He=>this.getRowHeight(He)||0).reduce((He,Ye)=>He+Ye,0),Ce=Ne||ke>=ce?ce:ke,Me=le||!pe?+q:+q-E.$_,Se=(0,n.A)("c-select_options_list__virtual_list",{"c-select_options_list__virtual_list--slack_scrollbar":Ae,[`${Ee}__virtual_list`]:!!Ee}),Ue=Te&&this.cellMeasurerCache?this.cellMeasurerCache.rowHeight:He=>{let{index:Ye}=He;return this.getRowHeight(oe[Ye])};return this.cellMeasurerCache?t.createElement(I.O,{className:Se,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(re),height:Ce,deferredMeasurementCache:this.cellMeasurerCache,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:oe?oe.length:0,rowHeight:Ue,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Me}):t.createElement(I.O,{className:Se,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(re),height:Ce,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:oe?oe.length:0,rowHeight:Ue,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Me})}renderListBody(){const{enableLoadingState:W=!0,isLoading:q=!1}=this.props;if(q&&W)return this.renderLoadingState();const re=this.getOptionsList();return!re||re&&!re.length?this.renderEmptyState():this.renderList()}renderLoadingState(){const{width:W}=this.props,q=fe.t("Loading results\u2026");return t.createElement("div",{className:this.getClassName("c-select_options_list__loading_state"),style:{width:W}},t.createElement(y.A,{size:"medium",inline:!0}),t.createElement("div",null,q))}renderRow(W){let{index:q,key:re,style:le,parent:Ae}=W;var Te;const{classPrefix:Ne=void 0,selectState:pe,multiSelectMode:Ee=!1,customOptionCompare:oe,unstyled:ce=!1,dynamicHeight:ke=!1,hideOptionsListCheckbox:Ce=!1}=this.props,{selectId:Me}=pe,Se=this.getOptionsList();let Ue;Se[q].option?Ue=Se[q].option:Ue=Se[q];const{isPlaceholder:He}=Ue,{activeRowIndex:Ye}=pe,{selectedOption:J,selectedOptions:ae}=pe;let Ve;typeof Ye=="number"&&(Ve=this.isOptionActive({activeRowIndex:Ye},Se,Ue));const Be=this.isOptionSelected({selectedOptions:ae,selectedOption:J},Ue,Ee,oe),Ke=Ue.value===E.yk,Re=Se[q].type==="heading",Fe=!!Se[q].optgroup,Ie=Se[q].type==="divider",ze=!!Ue.isDisabled,qe=!!Ue.nonInteractive,st=Be&&!Re&&!Ie,ut=Re||qe||Ie,tt=Se.filter(se),_t=(0,s.A)(tt,Tn=>Tn.option===Ue,0),yt=Ne?`${Ne}__option`:"",Kt=(0,n.A)("c-select_options_list__option",yt,(0,l.A)(Ue,"overrides.className",!1),{"c-select_options_list__option--active":Ve&&(0,l.A)(Ue,"overrides.useHoverStyles",!0),"c-select_options_list__option--placeholder":He,"c-select_options_list__option--selected":st,"c-select_options_list__option--disabled":ze,"c-select_options_list__group_header":Re,"c-select_options_list__group_option":Fe,"c-select_options_list__divider":Ie,"c-select_options_list__clear_option":Ke});let Qt=Ke?Ue.label:t.createElement("hr",{className:this.getClassName("c-select_options__divider")});!Ie&&!Ke&&(Qt=this.props.renderOption(Ue,{index:q,isActive:Ve,isGroupHeader:Re,isClearOption:Ke,isSelected:Be&&!Re&&!Ie,clearDynamicRowHeight:this.clearDynamicRowHeight}));let Jt;if(ce||!((Te=Ue.overrides)===null||Te===void 0)&&Te.unstyled)Jt=Qt;else{var Gt;Jt=t.createElement("span",{"data-qa":Ue.value,className:this.getClassName("c-select_options_list__option_label",{normal_wrap:(Gt=Ue.extras)===null||Gt===void 0?void 0:Gt.forceHeaderWrap})},Qt)}const wt=tt.length,Bt=_t===-1?void 0:_t+1,Wt=t.createElement("div",Le({"aria-hidden":ut?"true":null,"aria-selected":Be,"aria-label":Re?null:this.getArialabelForItem(Se[q]),className:this.getClassName(Kt,yt),"data-qa":Ie?void 0:this.getDataQaTag(Ue,q),id:(0,g.Es)(Me,`option_${q}`),key:re},le?{style:le}:{},{onClick:ze||qe?(0,_.A)(()=>this.onOptionSelected(Ue)):(0,_.A)(()=>{this.onOptionClicked(Ue)}),onMouseEnter:ze||qe?a.A:(0,_.A)(()=>{this.onMouseEnteredOption(q)}),onMouseLeave:ze||qe?a.A:this.onMouseLeftOption,role:"option",tabIndex:-1,"data-is-active":Ve?"true":void 0,ref:Ve?this.currentRow:null,optgroup:Fe?Se[q].optgroup:void 0,"aria-disabled":ze||null,"aria-setsize":wt,"aria-posinset":Bt}),st&&!Ce&&t.createElement("span",{className:"c-select_options_list__selected","aria-hidden":"true"}),Jt);return!ke||!this.cellMeasurerCache?Wt:t.createElement(h.dl,{cache:this.cellMeasurerCache,columnIndex:0,rowIndex:q,key:re,parent:Ae},Wt)}render(){const{className:W,ariaLabel:q,classPrefix:re=void 0,multiSelectMode:le=!1,selectDataQa:Ae=void 0,selectState:Te,dropdownContainer:Ne=void 0,footerBannerContent:pe}=this.props,{isExpanded:Ee,activeRowIndex:oe,selectId:ce,selectType:ke}=Te,Ce=(0,n.A)("c-select_options_list",{[`${re}_options_list`]:re}),Me=ke===E.US.BASIC&&Ee&&(0,i.A)(oe)?(0,g.Es)(ce,`option_${oe}`):void 0,Se=t.createElement("div",{className:Ce,ref:this.listBody,"data-qa":Ae?`${Ae}-options-list`:null,id:(0,g.Es)(ce,"listbox"),"aria-activedescendant":Me,"aria-label":q,"aria-multiselectable":!!le,role:"listbox",tabIndex:-1,onMouseMove:this.enableMouseMove},this.renderListBody()),{includeWrapper:Ue=!0}=this.props;if(!Ue)return Se;const He=(0,n.A)("c-select_options_list__wrapper",{[`${W}`]:W,[`${re}_options_list_wrapper`]:re});return t.createElement("div",Le({className:this.getClassName(He),"data-qa":Ae?`${Ae}-options-list-wrapper`:"sk-select-options-list-wrapper"},Ne?{ref:Ne}:{}),Se,pe&&t.createElement("div",{className:"c-select_options_list__footer_banner"},pe))}constructor(W){super(W),this.isMouseMoveEnabled=!1,(0,m.v)(this,["getOptionsList","getOptionFromList","onClearSelectedOption","onArrowDown","onArrowUp","onEnter","onTab","onShiftTab","onMouseLeftOption","onScroll","renderRow","clearDynamicRowHeight","initKeyCommands"]),this.listBody=t.createRef(),this.list=t.createRef(),this.currentRow=t.createRef(),this.keyCommands=void 0,this.previousFocus=null,this.cellMeasurerCache=void 0,this.formatOptions=(0,he.A)(C),this.enableMouseMove=this.enableMouseMove.bind(this),this.debouncedEnableMouseMove=(0,v.A)(this.enableMouseMove,200),this.debouncedOnScroll=(0,v.A)(this.onScroll.bind(this),200),E.az.label=fe.t("Clear selection");const{optionsRowHeight:q=E.bJ,dynamicHeight:re=!1}=W;re&&(this.cellMeasurerCache=new h.jS({defaultHeight:q,fixedWidth:!0}))}},"SelectOptionsList");k.displayName="SelectOptionsList",k.contextType=p.Mn;const N=k},4640201401:(x,A,e)=>{"use strict";e.d(A,{A:()=>M});var t=e(3134334389),n=e(7715417323),s=e(9268023148),i=e(5617110048),l=e(1641606663),o=e(5249175977),a=e(7074822529),r=e(7193040700),d=e(4426213732),u=e(1224315998),_=e(2790183459);function v(){return v=Object.assign||function(T){for(var D=1;D<arguments.length;D++){var C=arguments[D];for(var m in C)Object.prototype.hasOwnProperty.call(C,m)&&(T[m]=C[m])}return T},v.apply(this,arguments)}c(v,"_extends");const h={onClose:{action:u.UiAction.CLOSE},onOpen:{action:u.UiAction.OPEN}},f=50,I=50,p=12,y=4,g=32;let E=c(class extends t.Component{componentDidMount(){this.maybeInstallListener(),this.measureOptionsListAndSetState()}componentDidUpdate(){this.maybeInstallListener()}componentWillUnmount(){this.maybeUninstallListener()}isMouseEvent(D){return(D==null?void 0:D.type)==="click"}didClickInput(D){const{inputRef:C}=this.props;if(!(C!=null&&C.current)||!this.isMouseEvent(D))return;const m=D.clientX,O=D.clientY,P=C.current.getBoundingClientRect();return m>P.left&&m<P.right&&O>P.top&&O<P.bottom}onClose(D){var C;const{selectState:m,inputRef:O,onOptionsListClose:P,setSelectState:R}=this.props;if(m.isExpanded){if(D instanceof KeyboardEvent){var L;(L=this.optionsListRef.current)===null||L===void 0||L.onClose(D)}O==null||(C=O.current)===null||C===void 0||C.focus(),P==null||P(this.didClickInput(D)),R(()=>({isExpanded:!1,activeRowIndex:void 0,filterQuery:"",displayQuery:""}))}}getOptionsListBounds(){const{inputRef:D,inputContainerRef:C=null}=this.props,m=C||D;return m&&m.current?m.current.getBoundingClientRect():null}getPopoverPosition(D){let{top:C,bottom:m}=D;var O;const P=C,R=(((O=this.context.windowRef.deref())===null||O===void 0?void 0:O.innerHeight)||0)-m,{selectState:L,maxListHeight:V=r.CK}=this.props,{options:B}=L;let K=0;const b=c(G=>G.map(H=>this.getRowHeight(H)).reduce((H,U)=>H+U,0),"calculateRowHeight");if(B){const G=[];B.forEach(H=>{if(H.options){G.push(H.label),H.options.forEach(U=>G.push(U));return}G.push(H)}),K=b(G)}const S=Math.min(K,V);return R<S&&R<P?"top-left":"bottom-left"}getRowHeight(D){const{optionsRowHeight:C=r.bJ}=this.props;return D.type&&D.type==="divider"?r.r3:C}maybeInstallListener(){var D,C;if(this.listenerInstalled)return;(D=this.context.windowRef.deref())===null||D===void 0||D.addEventListener("resize",this.onResize),(C=this.context.windowRef.deref())===null||C===void 0||C.addEventListener("scroll",this.onScroll);const{measurePopoverEventName:m=null}=this.props;if(m){var O;(O=this.context.windowRef.deref())===null||O===void 0||O.addEventListener(m,this.measureOptionsListAndSetState)}this.listenerInstalled=!0}maybeUninstallListener(){const{measurePopoverEventName:D=null}=this.props;if(this.listenerInstalled){var C,m;if(this.onResize.cancel(),this.onScroll.cancel(),(C=this.context.windowRef.deref())===null||C===void 0||C.removeEventListener("resize",this.onResize),(m=this.context.windowRef.deref())===null||m===void 0||m.removeEventListener("scroll",this.onScroll),D){var O;(O=this.context.windowRef.deref())===null||O===void 0||O.removeEventListener(D,this.measureOptionsListAndSetState)}this.listenerInstalled=!1}}measureOptionsListAndSetState(){this.listenerInstalled&&this.setState(()=>({optionsListBounds:this.getOptionsListBounds()}))}render(){var D,C;const{popoverProps:m={},selectState:O,minOptionsListWidth:P=null,onOpen:R=n.A,onScrollablePage:L=!1,autoClogProps:V=void 0,maxListHeight:B=r.CK,shouldAllowUnselectInSingleSelectMode:K,shouldAllowUnselectInMultiSelectMode:b,stayExpandedAfterSelection:S,selectOptionsListRef:G}=this.props,{selectId:H}=O,U=this.state.optionsListBounds||{width:0,bottom:0,left:0},F=this.getPopoverPosition({top:U.top,bottom:U.bottom}),Y=F==="top-left",Z=((D=this.context.windowRef.deref())===null||D===void 0?void 0:D.innerWidth)||0;let ee=U.width;P&&U.width<P&&(ee=P);const j=U.left-p+ee;let ge=0;P&&j>Z&&(ge=P-U.width);const ue=(Y?U.top:(((C=this.context.windowRef.deref())===null||C===void 0?void 0:C.innerHeight)||0)-U.bottom)-g,he=Math.min(ue,B),be={...this.props,autoClogProps:V,width:ee+p*2,maxListHeight:he,shouldAllowUnselectInSingleSelectMode:K,shouldAllowUnselectInMultiSelectMode:b,stayExpandedAfterSelection:S},{pageYOffset:xe}=this.context.windowRef.deref()||{},Le={top:U.top+xe+y,bottom:U.bottom+xe-y,left:U.left-(p+ge),width:ee};let fe;if(L){var se;fe={height:(se=this.context.windowRef.deref())===null||se===void 0?void 0:se.document.body.scrollHeight}}return t.createElement(i.A,v({elementType:u.ElementType.DROPDOWN,actionProps:h},V?{autoClogProps:V}:{}),t.createElement(o.AM,v({position:F,allowanceX:-p,ref:this.popover},m,{onClose:this.onClose,isOpen:!!O.isExpanded,key:`${H}-popover`,shouldFocusAfterRender:!1,targetBounds:Le,ariaHideApp:!1,onOpen:R},typeof fe<"u"?{overlayStyle:fe}:{},{shouldPropagateOnClose:!0}),t.createElement(a.Ay,v({},be,{ref:(0,_.A)(this.optionsListRef,G)}))))}constructor(D){super(D),this.popover=t.createRef(),this.optionsListRef=t.createRef(),this.state={optionsListBounds:null},(0,d.v)(this,["measureOptionsListAndSetState","onClose"]),this.onResize=(0,s.A)(this.measureOptionsListAndSetState,f,{maxWait:f}),this.onScroll=(0,s.A)(this.measureOptionsListAndSetState,I,{maxWait:I}),this.listenerInstalled=null}},"SelectPopoverOptionsList");E.displayName="SelectPopoverOptionsList",E.contextType=l.Mn,E.defaultProps={includePadding:!0,window};const M=E},9573786552:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(166097325),s=e(3297051565),i=e.n(s);function l(){return l=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(a[u]=d[u])}return a},l.apply(this,arguments)}c(l,"_extends");function o(a){const r={showConfirmDialog:i().func,setSelectState:i().func.isRequired,selectedOptions:i().array,selectedOption:i().object},d={selectedOptions:[],selectedOption:null,showConfirmDialog:void 0};let u=c(class extends t.Component{setSelectState(v,h){const f=v();f.selectedOptions&&!(0,n.A)(f.selectedOptions,this.selectedOptions)||f.selectedOption&&!(0,n.A)(f.selectedOption,this.selectedOption)?(this.props.setSelectState(()=>({isExpanded:!1})),this.props.showConfirmDialog({onGo:()=>{this.props.setSelectState(v,h),this.selectedOptions=f.selectedOptions||this.selectedOptions,this.selectedOption=f.selectedOption||this.selectedOption}})):(this.props.setSelectState(v,h),this.selectedOptions=f.selectedOptions||this.selectedOptions,this.selectedOption=f.selectedOption||this.selectedOption)}render(){const{showConfirmDialog:v}=this.props,h=v?this.setSelectState:this.props.setSelectState;return t.createElement(a,l({},this.props,{setSelectState:h}))}constructor(v){super(v),this.setSelectState=this.setSelectState.bind(this),this.selectedOptions=v.selectedOptions,this.selectedOption=v.selectedOption}},"ConfirmSelectWrapper");return u.displayName="ConfirmSelectWrapper",u.propTypes=r,u.defaultProps=d,u}c(o,"withConfirm")},2742076544:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(166097325),s=e(9113979368),i=e(7715417323),l=e(9268023148),o=e(796111729);function a(){return a=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var v=arguments[_];for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(u[h]=v[h])}return u},a.apply(this,arguments)}c(a,"_extends");const r=(0,o.Wo)();function d(u){let _=c(class extends t.Component{componentDidMount(){const{searchOnClick:h,disableSearchOnMount:f,expandOnFocus:I,minQueryLength:p}=this.props,{filterQuery:y}=this.state;if(!h&&!f||I){const g=!p||y&&y.length>=p;y!==void 0&&g&&this.search(y)}}componentDidUpdate(h){const{isInvalid:f,selectedOption:I,selectedOptions:p,isDisabled:y,minQueryLength:g}=this.props,E={};h.isInvalid!==f&&(E.isInvalid=f),h.isDisabled!==y&&(E.isDisabled=y),(0,n.A)(h.selectedOption,I)||(E.selectedOption=I),(0,n.A)(h.selectedOptions,p)||(E.selectedOptions=p),(0,n.A)(h.minQueryLength,g)||(E.minQueryLength=g),(0,s.A)(E)||this.setSelectState(()=>E)}componentWillUnmount(){var h;(h=this.searchAbortController)===null||h===void 0||h.abort()}setSelectState(h,f){const I=h();if(I.filterQuery!==void 0&&I.filterQuery!==this.state.filterQuery||I.searchOnClick){var p;(p=this.searchAbortController)===null||p===void 0||p.abort(),!this.state.minQueryLength||I.filterQuery&&I.filterQuery.length>=this.state.minQueryLength?(this.setState(()=>({isLoading:!0,searchOnClick:!1})),this.search(I.filterQuery)):this.setState(()=>({isLoading:!1,options:[]}))}this.setState(()=>I,f)}search(h){const{search:f,onSearch:I=i.A,onSearchError:p=i.A,selectId:y,processOptions:g=c(M=>Promise.resolve(M),"processOptions")}=this.props;I(h),this.searchAbortController=new AbortController;const E=this.searchAbortController.signal;f(h,{abortSignal:E}).then(M=>{E.aborted||g(M,h).then(T=>{this.setSelectState(()=>({options:T})),this.setState(()=>({isLoading:!1}))})}).catch(M=>{E.aborted||(this.setState(()=>({isLoading:!1})),r.error(`Error when searching for select id: ${y}, error: ${M}`),p(M))})}render(){const h=this.props.inputRef||this.inputRef;return t.createElement(u,a({},this.props,{selectState:this.state,setSelectState:this.setSelectState,inputRef:h,isLoading:this.state.isLoading}))}constructor(h){super(h),this.inputRef=t.createRef(),this.setSelectState=this.setSelectState.bind(this),this.state={filterQuery:"",displayQuery:"",options:[],isExpanded:h.isExpanded,expandOnFocus:h.expandOnFocus,selectId:h.selectId,selectedOptions:h.selectedOptions||[],selectedOption:h.selectedOption||null,isRequired:h.isRequired,isLoading:!1,isDisabled:h.isDisabled,isInvalid:h.isInvalid,searchOnClick:h.searchOnClick,minQueryLength:h.minQueryLength},this.search=(0,l.A)(this.search,h.debounceWaitPeriod)}},"CustomSearchWrapper");return _.displayName="CustomSearchWrapper",_.defaultProps={isRequired:!0,selectedOptions:null,selectedOption:null,isExpanded:!1,expandOnFocus:!1,isDisabled:!1,isInvalid:!1,debounceWaitPeriod:50,minQueryLength:0,onSearch:i.A,onSearchError:i.A,searchOnClick:!1,disableSearchOnMount:!1,processOptions:v=>Promise.resolve(v),shouldAllowUnselectInMultiSelectMode:!1,disableIdParsing:!1,autoClogProps:void 0},_}c(d,"withCustomSearch")},3239909785:(x,A,e)=>{"use strict";e.d(A,{A:()=>ge});var t=e(9706240641),n=e(3134334389),s=e(7715417323),i=e(166097325),l=e(9113979368),o=e(9524650809),a=e(235108050),r=e(362134992),d=e(2208015175),u=e(8086952004),_=e(4360875129),v=e(2394306156),h=e(9746734072),f=e(2101927269),I=e(8840779375),p=e(9268023148),y=e(5950652755),g=e(3297051565),E=e.n(g),M=e(6422693406),T=e(9349021185),D=e(145735569),C=e(3708320478),m=e(6543729974),O=e(2170574487);function P(ne){return[...ne.filter(ue=>!ue.isError&&!ue.isUnknown),...ne.filter(ue=>!ue.isError&&ue.isUnknown),...ne.filter(ue=>ue.isError)]}c(P,"sortTokens");var R=e(9236644324),L=e(56548687),V=e(796111729),B=e(735940183),K=e(4327331459),b=e(3707193570),S=e(4862221402),G=e(9868740303),H=e(4342685672),U=e(4757466470),F=e(9391594207),Y=e(8847766420);function Z(){return Z=Object.assign||function(ne){for(var ue=1;ue<arguments.length;ue++){var he=arguments[ue];for(var be in he)Object.prototype.hasOwnProperty.call(he,be)&&(ne[be]=he[be])}return ne},Z.apply(this,arguments)}c(Z,"_extends");const ee=(0,V.Wo)(),j=new B.Ay("form_inputs");function ge(ne){const ue={searcherOptions:E().object.isRequired,selectId:E().string.isRequired,inputRef:E().object,isRequired:E().bool,selectedOptions:E().array,selectedOption:E().object,isExpanded:E().bool,isDisabled:E().bool,isInvalid:E().bool,focusOnMount:E().bool,searchOnPaste:E().bool,expandOnFocus:E().bool,expandOnClick:E().bool,searchBatchSize:E().number,debounceWaitPeriod:E().number,onFilterQueryPaste:E().func,onInputFocused:E().func,onSearch:E().func,onSearchError:E().func,onSearchResolved:E().func,onOptionsListClose:E().func,splitPastedQuery:E().func,processOptions:E().func,processSelectedOptions:E().func,clogger:E().object.isRequired,search:E().func.isRequired,teamId:E().string.isRequired,useSearcherSessions:E().bool,showConfirmDialog:E().func,restrictedSelectedTokenIndexes:E().array,disabledSelectedTokenIndexes:E().array,invalidSelectedTokenIndexes:E().array,useBulkSearch:E().bool},he={isRequired:!0,selectedOptions:null,selectedOption:null,inputRef:null,isExpanded:!1,isDisabled:!1,isInvalid:!1,focusOnMount:!1,searchOnPaste:!1,expandOnFocus:void 0,expandOnClick:void 0,searchBatchSize:1,debounceWaitPeriod:50,onFilterQueryPaste:s.A,onInputFocused:s.A,onSearch:s.A,onSearchError:s.A,onSearchResolved:s.A,onOptionsListClose:s.A,splitPastedQuery:O.I,processOptions:fe=>M.K.resolve(fe),processSelectedOptions:void 0,useSearcherSessions:!1,showConfirmDialog:void 0,restrictedSelectedTokenIndexes:[],disabledSelectedTokenIndexes:[],invalidSelectedTokenIndexes:[],useBulkSearch:!1};let be=c(class extends n.Component{componentDidMount(){this.props.focusOnMount&&this.setState(()=>({isLoading:!0})),this.searchQuery(this.state.filterQuery)}componentDidUpdate(se,Q){const{isDisabled:k,isInvalid:N,selectedOptions:$,selectedOption:W,searchOnPaste:q,expandOnFocus:re,expandOnClick:le,restrictedSelectedTokenIndexes:Ae,disabledSelectedTokenIndexes:Te,invalidSelectedTokenIndexes:Ne}=this.props,pe={};if(se.isInvalid!==N&&(pe.isInvalid=N),se.isDisabled!==k&&(pe.isDisabled=k),(0,i.A)(se.selectedOptions,$)||(pe.selectedOptions=$),(0,i.A)(se.selectedOption,W)||(pe.selectedOption=W),(se.expandOnFocus&&!re||se.expandOnClick&&!le)&&(pe.isExpanded=!1),this.wasUnknownTokenResolved(this.state.selectedOptions,Q.selectedOptions)){var oe,ce;const He=this.getNextUnknownTokenIndex();pe.selectedTokenIndexes=[He],(oe=this.inputRef)===null||oe===void 0||(ce=oe.current)===null||ce===void 0||ce.focus()}se.restrictedSelectedTokenIndexes!==Ae&&(pe.restrictedSelectedTokenIndexes=Ae),se.disabledSelectedTokenIndexes!==Te&&(pe.disabledSelectedTokenIndexes=Te),se.invalidSelectedTokenIndexes!==Ne&&(pe.invalidSelectedTokenIndexes=Ne);const{isLoading:ke,pendingQueries:Ce,selectedOptions:Me,pendingEscapeQueries:Se,filterQuery:Ue}=this.state;if(q&&!ke){if(!(0,l.A)(Ce))pe.isLoading=!0,pe.loadInBackground=!0,this.searchQueryObjects(Ce);else if(Q.isLoading){if(this.updateDisabled(!1),Se.length>0&&Ue===""){const He=(0,B.jd)(Se.map(Be=>Be.query),{noConj:!0}).join(""),Ye=Se[0],{options:J}=Ye,ae=c(Be=>Be.map(Ke=>{const{query:Re,options:Fe,...Ie}=Ke,ze=Fe?{options:ae(Fe)}:{};return{...Ie,...ze,query:He}}),"getUpdatedOptions"),Ve={...Ye,options:ae(J),query:He};pe.pendingEscapeQueries=[],pe.options=Ve.options,pe.filterQuery=He,pe.isExpanded=!0,pe.isLoading=!1}if(Me.length){const He=Me.filter(J=>J.isError||J.isUnknown).length,Ye=He?j.t("Loading complete. There {count, plural, =1 {is # unknown entry} other {are # unknown entries}}.",{count:He}):j.t("Loading complete.");this.updateAriaTextThrottled.cancel&&this.updateAriaTextThrottled.cancel(),this.updateAriaTextThrottled(Ye)}}}(0,l.A)(pe)||this.setSelectState(()=>pe)}componentWillUnmount(){this.updateAriaText.cancel&&this.updateAriaText.cancel(),this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),this._isMounted=!1}onFilterQueryPaste(se){var Q=this;return(0,t.coroutine)(function*(){const{searchOnPaste:k,searcherOptions:N,splitPastedQuery:$,processOptions:W}=Q.props;if(!k||!se&&!se.clipboardData)return;se.preventDefault();const q=se.clipboardData.getData("text/plain")?"text/plain":"Text",re=(0,R.i_)(se),le=re.text,Ae=$(le,{...N,fromMetadata:re.text!==se.clipboardData.getData(q)});Q.props.onFilterQueryPaste(Ae);const Te=[],Ne=[];yield M.K.all(Ae.map(pe=>{const Ee=Q.getQueryId();return(0,K.A)(pe)||(0,S.A)(pe)||(0,b.Ay)(pe)?W([{key:Ee,pasted:!0,fromMetadata:!0,value:pe,label:re.members?re.members[pe]:pe}]).then(oe=>(oe[0]&&Ne.push(oe[0]),M.K.resolve())):(Te.push({query:pe,queryId:Ee,pasted:!0}),Ne.push({label:pe,queryId:Ee,isLoading:!0,key:Ee,pasted:!0}),M.K.resolve())})),Q.setSelectState(pe=>({pendingQueries:pe.pendingQueries.concat(Te),selectedOptions:pe.selectedOptions.concat(Ne),filterQuery:""})),Q.updateDisabled(!(0,l.A)(Te)),Q.updateAriaTextThrottled.cancel&&Q.updateAriaTextThrottled.cancel()})()}onInputFocused(){this.props.onInputFocused(),!(this.props.expandOnClick||this.shouldExpandOnFocus())&&this.setState(()=>({isExpanded:!1,options:[]}))}onOptionsListClose(se){const{isLoading:Q,isExpanded:k,filterQuery:N}=this.state;!Q&&k&&N.length>0&&this.clogSearcherResults(),this.props.onOptionsListClose(se)}onTokenSelect(se){var Q=this;return(0,t.coroutine)(function*(){if(!(Q.props.expandOnClick||Q.shouldExpandOnFocus())){if(se&&!se.isUnknown)Q.setState(()=>({isExpanded:!1,options:[]}));else if(se){const k=yield Q.props.processOptions(se.resultOptions.map(N=>({...N,fromUnknown:!0})),se.label);Q.lastShownSearchDetails=se.searcher,Q.setState(()=>({isExpanded:!0,options:k}))}}})()}getQueryId(){return(0,o.A)("query__")}setSelectState(se,Q){var k=this;return(0,t.coroutine)(function*(){var N;const{processSelectedOptions:$}=k.props;let W=se(k.state);const{selectedOption:q,selectedOptions:re}=k.state;W.filterQuery!==void 0&&W.filterQuery!==k.state.filterQuery&&(W.isLoading=!0,W.loadInBackground=!1,k.searchQuery(W.filterQuery));const{searchOnPaste:le}=k.props;if(le&&W.selectedOptions){const Te=W.selectedOptions.map(pe=>{let{key:Ee}=pe;return Ee}),Ne=(0,a.A)((0,r.A)(Te.filter(pe=>Te.indexOf(pe)!==Te.lastIndexOf(pe))));(0,d.A)(Ne,pe=>{const Ee=(0,u.A)(W.selectedOptions,ce=>{let{key:ke,isUnknown:Ce}=ce;return ke===pe&&!Ce}),oe=(0,r.A)(W.selectedOptions.map(ce=>ce.key===pe?ce.isUnknown?Ee:null:ce));W.selectedOptions=oe})}if(W.selectedOptions!==void 0&&!(0,i.A)(W.selectedOptions,re)){const Te=W.selectedOptions.filter(pe=>{let{isLoading:Ee,isUnknown:oe}=pe;return!Ee&&!oe}),[Ne]=(0,_.A)(Te,re,"value");Ne&&k.clogSearcherResults(Ne)}W.selectedOption!==void 0&&W.selectedOption!==null&&((N=W.selectedOption)===null||N===void 0?void 0:N.value)!==(q==null?void 0:q.value)&&k.clogSearcherResults(W.selectedOption);const Ae=!!W.removalInitiator;if(W.selectedOptions&&!Ae&&$){if(W=(0,v.A)(W),W.isLoading!==void 0){const Te=W.isLoading;k.setState(()=>({isLoading:Te})),delete W.isLoading}W.selectedOptions=yield $(W.selectedOptions)}k.setState(()=>W,Q)})()}getNextUnknownTokenIndex(){return this.state.selectedOptions.findIndex(se=>se.isUnknown&&se.queryId)}wasUnknownTokenResolved(se,Q){const k=se.filter($=>$.isUnknown).length,N=Q.filter($=>$.isUnknown).length;return k<N}shouldExpandOnFocus(){const{expandOnFocus:se}=this.props,{selectedOptions:Q}=this.state,k=(0,m.A)(Q);return se&&!k}clogSearcherResults(se){if(this.lastShownSearchDetails===null)return;const{clogger:Q,selectId:k,useSearcherSessions:N,teamId:$}=this.props,{query:W,results:q}=this.lastShownSearchDetails,re={source:k,query:W,results:q};se?(re.selectedItemId=se.value,N?(0,G.A)({teamId:$,key:k}).clogSearcherAccept({clogger:Q,data:re}):(0,T.DC)({clogger:Q,data:re})):N?(0,G.A)({teamId:$,key:k}).clogSearcherReject({clogger:Q,data:re}):(0,T.Yb)({clogger:Q,data:re})}processSearchResults(se){const{searchOnPaste:Q,onSearchResolved:k,searcherOptions:N}=this.props,{escapeHatchEnabled:$,escapeHatchKeys:W}=N,q=this.state.selectedOptions.slice(0);Q&&se.forEach(re=>{let{queryId:le,options:Ae,searcher:Te}=re;const Ne=q.findIndex(oe=>oe.queryId===le),pe=q[Ne];let Ee=null;if(pe){this.lastShownSearchDetails=Te;let oe;Ae.length===1?(oe=Ae[0],$&&Te&&Te.results&&Te.results.length===0&&Te.pasted&&W&&W[oe.key]&&this.setState(ke=>({pendingEscapeQueries:[...ke.pendingEscapeQueries,{query:Te.query,options:[oe]}]})),this.clogSearcherResults(oe)):Ae.length?oe={isUnknown:!0}:(oe={isError:!0},this.clogSearcherResults()),Ee={...pe,...oe,resultOptions:Ae,searcher:Te,isLoading:!1},q[Ne]=Ee}k({result:Ae,selectedOption:Ee})}),this.setState(re=>{if((0,U.Ay)(re.selectedOptions,q,2)){const{options:le,searcher:Ae}=se[0];return this.lastShownSearchDetails=Ae,re.loadInBackground?null:{options:le}}return{selectedOptions:P(q)}})}runBatchedSearch(se){const Q=se.slice(0,this.props.searchBatchSize);if(se.length>1&&this.props.useBulkSearch){const N=Q.some(W=>!!W.pasted),$=Q.some(W=>!!W.initial);return this.runSingleSearch({query:Q,pasted:N,initial:$})}const k=Q.map(N=>{let{query:$,queryId:W,pasted:q,initial:re}=N;return this.runSingleSearch({query:$,queryId:W,pasted:q,initial:re})});return M.K.all(k)}runSingleSearch(se){let{query:Q,queryId:k,pasted:N,initial:$}=se;const{onSearch:W,onSearchError:q,processOptions:re,searcherOptions:le,selectId:Ae,useSearcherSessions:Te,teamId:Ne,useBulkSearch:pe}=this.props;let Ee,oe,ce=!1;const ke=k||this.getQueryId(),Ce=new Map;if((0,h.A)(Q)&&pe?(Ee=Q.map(Ue=>(Ce.set(Ue.queryId,Ue.query),{query:(0,O.t)(Ue.query,le),queryId:Ue.queryId})),ce=!0):oe=(0,O.t)(Q,le),oe&&W(Q)===!1)return re([],oe).then(Ue=>({queryId:ke,options:Ue,searcher:this.lastShownSearchDetails}));let Me;Te&&(!N||ce)?Me=(0,G.A)({teamId:Ne,key:$?ke:Ae}).search({query:ce?Ee:oe,options:{...le,sort:{source:Ae,...le.sort},returnMetadata:!0}}):Me=this.props.search({query:ce?Ee:oe,options:{...le,sort:{source:Ae,...le.sort},returnMetadata:!0}});var Se=this;return Me.then(function(){var Ue=(0,t.coroutine)(function*(He){Se.lastShownSearchDetails={query:ce?Ee:oe,results:He};const Ye=(He||[]).map((Ve,Be)=>{var Ke;return{key:ce?Ve.queryId:`${ke}_${Be}`,value:Ve.item.id,label:Ve.name||((Ke=Ve.item)===null||Ke===void 0?void 0:Ke.name)||(ce?Ce.get(Ve.queryId):Q),entity:Ve.item,matchData:Ve.subqueryScoresByMember}}),{selectedOption:J}=Se.state;oe===""&&J&&((0,u.A)(Ye,["value",J.value])||Ye.unshift(J));const ae=yield re(Ye,Q,{pasted:N});return{queryId:ke,options:ae,searcher:{...Se.lastShownSearchDetails,pasted:N}}});return function(He){return Ue.apply(this,arguments)}}()).catch(Ue=>{ee.error(`Error when searching for select id: ${Ae}, error: ${Ue}`),q(Ue);const He=[];return{queryId:ke,options:He,searcher:{query:ce?Ee:oe,results:He,pasted:N,isError:!0}}})}searchQuery(se){this._isMounted&&this.searchQueryObjects([{query:se}])}searchQueryObjects(se){if((0,l.A)(se))return;if(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.props.searchOnPaste){const{query:k,queryId:N}=se[0];this.searchPromise=this.runSingleSearch({query:k,queryId:N}).then($=>{let{options:W}=$;this.setSelectState(()=>({options:W})),this.setState(()=>({isLoading:!1}))});return}this.searchPromise=this.runBatchedSearch(se).then(k=>{let N=k;this.props.useBulkSearch&&(N=this.generateBulkSearchResultsArray(N)),this.processSearchResults(N);const $=N.map(W=>{let{queryId:q}=W;return q});this.setState(W=>({pendingQueries:W.pendingQueries.filter(re=>{let{queryId:le}=re;return!$.includes(le)}),isLoading:!1}))});const Q=j.t("Loading {count, plural, =1 {# more entry} other {# more entries}}",{count:se.length});this.updateAriaTextThrottled(Q)}updateAriaText(se){this.setState(Q=>Q.ariaText===se?null:{ariaText:se})}updateDisabled(se){this.setState(Q=>Q.isDisabled===se?null:{isDisabled:se})}generateBulkSearchResultsArray(se){var Q;if(!(!(se==null||(Q=se.options)===null||Q===void 0)&&Q.length))return se.splice(0);const{options:k,searcher:N}=se,{pasted:$,query:W,results:q}=N;return W.map(le=>({options:k.filter(Ae=>Ae.key===le.queryId),queryId:le.queryId,searcher:{pasted:$,query:le.query,results:q.filter(Ae=>Ae.queryId===le.queryId)}}))}render(){return n.createElement(n.Fragment,null,n.createElement(ne,Z({},this.props,{expandOnFocus:this.shouldExpandOnFocus(),inputRef:this.inputRef,selectState:this.state,setSelectState:this.setSelectState,onOptionsListClose:this.onOptionsListClose,onFilterQueryPaste:this.onFilterQueryPaste,onTokenSelect:this.onTokenSelect,onInputFocused:this.onInputFocused,isLoading:this.state.isLoading})),n.createElement(C.A,{message:this.state.ariaText}))}constructor(se){super(se),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.onOptionsListClose=this.onOptionsListClose.bind(this),this.onFilterQueryPaste=this.onFilterQueryPaste.bind(this),this.onTokenSelect=this.onTokenSelect.bind(this),this.onInputFocused=this.onInputFocused.bind(this);const{selectedOptions:Q,searchOnPaste:k}=se,N=(0,f.A)(Q,W=>(0,D.iC)(W));let $=[];k&&($=(0,r.A)((0,I.A)(N,W=>!W.label||!W.queryId?null:{query:W.label,queryId:W.queryId,initial:!0}))),this.state={filterQuery:"",options:[],isExpanded:se.isExpanded,selectId:se.selectId,selectedOptions:se.selectedOptions||[],selectedOption:se.selectedOption||null,isRequired:se.isRequired,isLoading:!1,isDisabled:se.isDisabled,isInvalid:se.isInvalid,pendingQueries:$||[],loadInBackground:!1,ariaText:"",shouldRefocusInputAfterSelection:!!se.showConfirmDialog,pendingEscapeQueries:[],selectedTokenIndexes:[],restrictedSelectedTokenIndexes:se.restrictedSelectedTokenIndexes||[],disabledSelectedTokenIndexes:se.disabledSelectedTokenIndexes||[],invalidSelectedTokenIndexes:se.invalidSelectedTokenIndexes||[]},this.searchQuery=(0,p.A)(this.searchQuery,se.debounceWaitPeriod),this.updateAriaTextThrottled=(0,y.A)(this.updateAriaText,3e4),this.lastShownSearchDetails=null,this.inputRef=se.inputRef||n.createRef(),this._isMounted=!0}},"SearcherSelectWrapper");be.displayName="SearcherSelectWrapper",be.propTypes=ue,be.defaultProps=he;const xe=c(fe=>({clogger:(0,L.e)({state:fe}),teamId:(0,Y.JY)(fe),useSearcherSessions:(0,H.nK)(fe)}),"mapStateToProps"),Le={search:function(){for(var fe=arguments.length,se=new Array(fe),Q=0;Q<fe;Q++)se[Q]=arguments[Q];return(0,T.$P)(...se)}};return(0,F.N)(xe,Le)(be)}c(ge,"withSearcher")},2602118042:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5846524816);function s(){return s=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(a[u]=d[u])}return a},s.apply(this,arguments)}c(s,"_extends");const i={textSelectLabel:void 0,minOptionsListWidth:null,ariaLabel:""};function l(a){return t.createElement(n.A,s({},a,{textSelect:!0}))}c(l,"TextSelect"),l.displayName="TextSelect",l.defaultProps=i;const o=l},2864323261:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(8003851355);const n=c(function(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;if(!a)return o;const{label:r,options:d}=a,u=new t.A(i,{fuzzyLimit:3,...l});if(!d)isFinite(u.normalizeAndScore(r))&&o.push(a);else{const _=[];d.forEach(v=>{const{label:h}=v;isFinite(u.normalizeAndScore(h))&&_.push(v)}),_.length&&o.push({label:a.label,options:_})}return o},"findMatches");function s(i,l){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return l?i.reduce((a,r)=>n(l,o,a,r),[]):i}c(s,"defaultFilter")},6543729974:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(9113979368),n=e(1703559452),s=e(145735569);function i(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,t.A)(l)?!1:(0,n.A)(l,o=>(0,s.hH)(o))}c(i,"__WEBPACK_DEFAULT_EXPORT__")},3650946343:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(9113979368),n=e(2101927269),s=e(4724591729),i=e(796111729);function l(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if((0,t.A)(o))return!1;const a=(0,n.A)(o,r=>(r&&!r.message&&(0,s.Cu)()&&(0,i.Wo)({label:"Invalid Error or Hint Object"}).error(`The following error or hint object is invalid: { id: ${r.id}, message: ${r.message}}`),r&&!!r.message));return!(0,t.A)(a)}c(l,"__WEBPACK_DEFAULT_EXPORT__")},2170574487:(x,A,e)=>{"use strict";e.d(A,{I:()=>a,t:()=>r});var t=e(3044566667);const n=[",","\uFF0C","\u3001",";","\uFF1B","|","\uFF5C","\\t","\\n","\\r"],s=new RegExp(`[${n}]`),i=new RegExp(`<(${t.gy})>`,"i"),l=new RegExp(`\\((${t.gy})\\)`,"i"),o=/(?=\s+[@\uFF20])/g;function a(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=[];return u.entities&&u.entities.members&&u.entities.members.matchEmailField&&(i.test(d)||l.test(d))?_=d.match(new RegExp(t.tN.CONTAINS_EMAIL,"gi")):s.test(d)?_=d.split(s):u.fromMetadata?_=d.split(/\s+/):u.entities&&u.entities.members&&o.test(d)&&(_=d.split(o)),(!_||!_.length)&&(_=d.split(/\s+/)),_.map(v=>v.trim()).filter(v=>Boolean(v))}c(a,"defaultSplitQuery");function r(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=d;return u.entities&&u.entities.members&&u.entities.members.matchEmailField&&t.tN.CONTAINS_EMAIL.test(d)&&(_=d.match(t.tN.CONTAINS_EMAIL)[0]),_}c(r,"parseQueryForSearch")},7772530643:(x,A,e)=>{"use strict";e.d(A,{k:()=>n});var t=e(2864323261);const n=c(function(i,l){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return l.filterQuery===void 0?l:{...l,options:(0,t.A)(i,l.filterQuery,o)}},"defaultFilter"),s=c((i,l)=>i.reduce((o,a)=>a(o),l),"applyTransforms")},1959847761:(x,A,e)=>{"use strict";e.d(A,{A:()=>s,e:()=>n.ex});var t=e(1211063534),n=e(5139334449);const s=t.A},1211063534:(x,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(5255740490),s=e(5950652755),i=e(7715417323),l=e(1641606663),o=e(8245211418),a=e(5139334449),r=e(6900724603);function d(){return d=Object.assign||function(E){for(var M=1;M<arguments.length;M++){var T=arguments[M];for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(E[D]=T[D])}return E},d.apply(this,arguments)}c(d,"_extends");const u=1,_=10,v=10,h=2,f=12,I=50;let p=c(class extends t.PureComponent{componentDidMount(){if(this.state.isOpen){var M;(M=this.context.windowRef.deref())===null||M===void 0||M.document.addEventListener("mousemove",this.onMouseMove)}}static getDerivedStateFromProps(M,T){return M.isOpen!==T.passedIsOpen?{isOpen:M.isOpen,passedIsOpen:M.isOpen}:null}componentDidUpdate(M){if(M.isOpen!==this.props.isOpen)if(this.state.isOpen){var T;this.forceUpdate(),(T=this.context.windowRef.deref())===null||T===void 0||T.document.addEventListener("mousemove",this.onMouseMove)}else{var D;(D=this.context.windowRef.deref())===null||D===void 0||D.document.removeEventListener("mousemove",this.onMouseMove)}this.state.isOpen||(this.initialTriggerBounds=void 0)}componentWillUnmount(){var M;(M=this.context.windowRef.deref())===null||M===void 0||M.document.removeEventListener("mousemove",this.onMouseMove)}onMouseMove(M){const T={x:M.clientX,y:M.clientY},D=this.mouseProgressingTowardsSubmenu(T);D!==this.state.mouseProgressingTowardsSubmenu&&(D?this.props.preventHighlightChange():this.state.highlightChangePrevented||this.props.allowHighlightChange()),this.setState(()=>({mouseCoordinates:T,mouseProgressingTowardsSubmenu:D}))}onSubmenuItemSelected(M,T){this.props.menuCallback(this.props.menuCallbackId,T)}getContentBounds(){return this.submenuContainer?this.submenuContainer.getBoundingClientRect():void 0}getSubmenuContainerStyle(){const M=this.getContentBounds(),T=this.getTriggerBounds(),D={...this.props.submenuStyle},C=this.context.windowRef.deref();if((M==null?void 0:M.width)===void 0||(T==null?void 0:T.left)===void 0||!C)return D;const m=T.right+M.width>C.innerWidth,O=T.left>M.width,P=this.props.forceLeft||m&&O;m&&!O?D.left=C.innerWidth-M.width-_:P?D.left=T.left-M.width+h:D.left=T.right-h;const L=T.top-f,V=L+M.height>C.innerHeight-v;return D.top=V?C.innerHeight-v-M.height:L,D}getTriggerBounds(){return this.initialTriggerBounds||(this.initialTriggerBounds=this.trigger?this.trigger.getBoundingClientRect():void 0),this.initialTriggerBounds||void 0}setSubmenuRef(M){this.submenuContainer=M}setTriggerRef(M){this.trigger=M}allowHighlightChange(){this.setState(M=>({...M,highlightChangePrevented:!1}))}closeSubmenu(){this.props.returnKBNav(),this.setState(()=>({isOpen:!1}),()=>{var M;(M=this.context.windowRef.deref())===null||M===void 0||M.document.removeEventListener("mousemove",this.onMouseMove)})}mouseProgressingTowardsSubmenu(M){const{mouseCoordinates:T}=this.state,D=this.getContentBounds();if(D){const{left:C,right:m,top:O,bottom:P}=D;if(M.x>=C&&M.x<=m&&M.y>=O&&M.y<=P)return!0;if(T){const L=Math.abs(m-T.x)>Math.abs(C-T.x),V={x:L?C:m,y:O-u},B={x:L?C:m,y:P+u},K={x:L?T.x-u:T.x+u,y:T.y};return(0,r._i)(M,K,V,B)}}return!1}preventHighlightChange(){this.setState(M=>({...M,highlightChangePrevented:!0}))}renderSubmenu(){if(!this.state.isOpen||this.props.disabled)return null;const M=this.props.renderSubmenu({onTriggerClose:this.closeSubmenu,onCloseSubmenu:this.closeSubmenu,onMenuItemSelected:this.onSubmenuItemSelected,kbNavActive:this.props.kbNavActive,preventHighlightChange:this.preventHighlightChange,allowHighlightChange:this.allowHighlightChange,isSubmenu:!0}),T=this.getSubmenuContainerStyle(),D=(0,n.A)("c-submenu__container",{"c-submenu__container--legacy":!this.props.renderLegacySubmenu});return t.createElement("div",{role:"presentation",className:D,ref:this.setSubmenuRef,style:T,"data-qa":"submenu_container"},M)}render(){const{menuCallback:M,menuCallbackId:T,...D}=this.props;return t.createElement("div",{role:"presentation",className:"c-submenu","data-qa":"submenu_trigger_wrapper",ref:this.setTriggerRef},t.createElement(o.A,d({},D,{withSubmenu:!0})),this.renderSubmenu())}constructor(M){super(M),this.state={isOpen:!1,passedIsOpen:!1,mouseCoordinates:void 0,mouseProgressingTowardsSubmenu:!1,highlightChangePrevented:!1},this.closeSubmenu=this.closeSubmenu.bind(this),this.setSubmenuRef=this.setSubmenuRef.bind(this),this.setTriggerRef=this.setTriggerRef.bind(this),this.onMouseMove=(0,s.A)(this.onMouseMove.bind(this),I),this.onSubmenuItemSelected=this.onSubmenuItemSelected.bind(this),this.preventHighlightChange=this.preventHighlightChange.bind(this),this.allowHighlightChange=this.allowHighlightChange.bind(this)}},"Submenu");p.displayName="Submenu",p.defaultProps={isOpen:!1,menuCallback:i.A,menuCallbackId:null,kbNavActive:!1,returnKBNav:i.A,preventHighlightChange:i.A,allowHighlightChange:i.A,renderLegacySubmenu:!0,forceLeft:!1,submenuStyle:void 0,disabled:!1,showFullCarat:!1,icon:null},p.contextType=l.Mn;const y={Submenu:p,SUBMENU_OVERLAP:h,MENU_VERTICAL_MARGIN:f,ALLOWANCE_X:_,ALLOWANCE_Y:v},g=(0,a.Ay)(p)},5139334449:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>u,ex:()=>d});var t=e(2208015175),n=e(3297051565),s=e.n(n),i=e(101973425),l=e(4724591729),o=e(796111729);const a="_isSlackSubmenuItem",r={...i.LN,kbNavActive:s().bool,stealKBNav:s().func,returnKBNav:s().func,preventHighlightChange:s().func,allowHighlightChange:s().func};function d(_){return!!_[a]}c(d,"isSubmenu");function u(_){if((0,l.Cu)()){const v=_.propTypes||{};let h;Object.defineProperty(_,"propTypes",{get:()=>h,set:f=>{const I=_.displayName||_.name||"Component";(0,t.A)(r,(p,y)=>{const g=f[y];g&&g!==p&&g!==p.isRequired&&(0,o.Wo)().warn(`${I}'s ${y} prop type doesn't match submenu`)}),h={...r,...f}}}),_.propTypes=v}return _[a]=!0,_[i.KJ]=!0,_}c(u,"wrapSubmenu")},4525741652:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490);function s(){return s=Object.assign||function(o){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(o[d]=r[d])}return o},s.apply(this,arguments)}c(s,"_extends");const l=(0,t.forwardRef)((o,a)=>{let{tabContent:r,fullHeight:d,className:u,role:_="tabpanel",...v}=o;const h=(0,n.A)(u,"c-tabs__tab_panel","c-tabs__tab_panel--active",{"c-tabs__tab_panel--full_height":d});return t.createElement("div",s({role:_,className:h,"data-qa":"tabs_content_container",ref:a},v),r)})},6130762911:(x,A,e)=>{"use strict";e.d(A,{T:()=>s});var t=e(3134334389);const n={isSelected:!1,hasMouseHover:!1,hasKeyboardFocus:!1,isUserAttentionOnTab:!1},s=(0,t.createContext)(n)},4986936311:(x,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3134334389),n=e(5255740490),s=e(8628145494),i=e(9268023148),l=e(4980558152),o=e(9508636131),a=e(5914783706),r=e(3749524846),d=e(9332393661),u=e(6084388622),_=e(1610251172),v=e(8683010724),h=e(6130762911),f=e(7239742441),I=e(698347924);function p(m){return/\.(jpe?g|png|gif|bmp)$/i.test(m)}c(p,"hasImageExtention");const y=p;function g(){return g=Object.assign||function(m){for(var O=1;O<arguments.length;O++){var P=arguments[O];for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(m[R]=P[R])}return m},g.apply(this,arguments)}c(g,"_extends");const E=c(m=>{let{icon:O,svgIcon:P,customIcon:R,className:L}=m;return t.createElement("div",{className:L,"data-qa":"tabs_item_render_icon"},!R&&O&&!P&&t.createElement(_.A,{type:O,size:"inherit",inline:!0}),!R&&P&&!O&&t.createElement(v.A,g({},P)),R&&R)},"TabsItemIcon");E.displayName="TabsItemIcon";const M=c(m=>m>=1e4?(0,f.$k)(m,{precision:4,decimal_places:0,lowercase:!0}):(0,I.Ay)(m),"formatNumber"),T=c(m=>{let{shouldFormatCount:O,titleCount:P,maxTitleCount:R}=m;if(!P)return P;const L=R&&P>R;let V=L?R:P;return O&&(V=M(V)),L?`${V}+`:V},"formatCount"),D=(0,t.forwardRef)((m,O)=>{let{label:P,onClick:R,title:L,isSelected:V,isFocused:B,focusOnMount:K,fullWidth:b,titleCount:S,maxTitleCount:G,icon:H,svgIcon:U,customIcon:F,formatCount:Y,isLoading:Z,isCountLoading:ee,isDisabled:j,iconPosition:ge="right",className:ne="",contextMenuAriaLabel:ue,contextMenuTemplate:he,ariaRole:be="tab",ariaHaspopup:xe=!1,...Le}=m;const fe=(0,o.A)(O),[se,Q]=(0,t.useState)(!1),k=(0,t.useContext)(r.A),N=(0,n.A)(ne,"c-tabs__tab","js-tab",{"c-tabs__tab--active":V,"c-tabs__tab--full_width":b}),$=P||L,W=typeof $=="string"&&y($)?t.createElement(d.A,{classes:"c-tabs__tab_image",image:$,ariaHidden:!0}):$,q=Le.id,re=(0,t.useCallback)(Se=>{R&&R(q,Se)},[q,R]),le=T({shouldFormatCount:Y,titleCount:S,maxTitleCount:G}),Ae=(0,s.A)(B)?V:B,Te=(0,a.A)(Ae);(0,t.useEffect)(()=>{if(!Ae)return;const Se=(0,s.A)(Te);if(Se&&K||!Se&&!Te){var Ue;(Ue=fe.current)===null||Ue===void 0||Ue.focus()}},[Ae,Te,K,fe]);const Ne=(0,t.useCallback)(()=>he,[he]),pe=(0,i.A)(()=>Q(!0),25),Ee=(0,i.A)(()=>Q(!1),25),oe=(0,t.useCallback)(()=>{Ee.cancel(),pe()},[pe,Ee]),ce=(0,t.useCallback)(()=>{pe.cancel(),Ee()},[pe,Ee]),ke=k&&(B??!1),Ce=(0,t.useMemo)(()=>({isSelected:V??!1,hasMouseHover:se,hasKeyboardFocus:ke,isUserAttentionOnTab:V||se||ke}),[ke,se,V]);let Me=t.createElement(u.Nm,g({},Le,{onClick:re,onMouseOver:oe,onMouseOut:ce,role:be,className:N,"aria-selected":V,"aria-haspopup":xe,tabIndex:Ae?0:-1,disabled:j,ref:fe}),Z?t.createElement("span",{className:"c-tabs__tab_placeholder","data-qa":"tabs_item_placeholder"}):t.createElement(t.Fragment,null,(!!H||!!U||!!F)&&ge==="left"&&t.createElement(E,{icon:H,svgIcon:U,customIcon:F,className:"c-tabs__tab_icon--left"}),t.createElement("span",{className:"c-tabs__tab_content"},W),Number.isFinite(S)&&t.createElement("span",{className:"c-tabs__tab_count","data-qa":"tabs_item_render_count"},le),ee&&t.createElement("span",{className:"c-tabs__tab_count_placeholder","data-qa":"tabs_item_render_count_placeholder"}),(!!H||!!U||!!F)&&ge==="right"&&t.createElement(E,{icon:H,svgIcon:U,customIcon:F,className:"c-tabs__tab_icon--right"})));return he&&(Me=t.createElement(l.A,{getTemplate:Ne,desktopAppOnly:!1,showSlackKitContextMenuOnDesktop:!0,width:"auto",menuAriaLabel:ue},Me)),t.createElement(h.T.Provider,{value:Ce},Me)});D.displayName="TabsItem";const C=D},2293211408:(x,A,e)=>{"use strict";e.d(A,{A:()=>j});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(3514831633),l=e(8773153312),o=e(8683010724),a=e(4986936311),r=e(2312625946);const d={name:"ellipsis-horizontal",variation:"filled"},_=(0,t.forwardRef)((ge,ne)=>{let{renderMenu:ue,position:he,label:be,id:xe,isSelected:Le,isFocused:fe}=ge;return t.createElement(i.cQ,{renderMenu:ue,position:he||"bottom-left"},t.createElement(r.Ay,{tip:be,position:"top",offsetY:6},t.createElement(a.A,{id:xe,"aria-label":be,isSelected:Le,isFocused:fe,className:"c-tabs__tab_overflow",svgIcon:d,ref:ne})))});var v=e(5238395322);const h=53,f=27;function I(ge){const ne=ge.ownerDocument.defaultView;if(!ne)return ge.offsetWidth;const ue=ne.getComputedStyle(ge),he=parseFloat(ue.getPropertyValue("margin-left"))+parseFloat(ue.getPropertyValue("margin-right"));return ge.offsetWidth+he}c(I,"getWidth");function p(ge){const ne=ge.ownerDocument.defaultView;if(!ne)return ge.offsetHeight;const ue=ne.getComputedStyle(ge),he=parseFloat(ue.getPropertyValue("margin-top"))+parseFloat(ue.getPropertyValue("margin-bottom"));return ge.offsetHeight+he}c(p,"getHeight");const y=c((ge,ne)=>{let{outerElement:ue,innerElement:he,threshold:be,totalTabsLength:xe,childElements:Le,containerSize:fe,isHorizontal:se}=ge;if(!ue||!he||!Le||xe===0)return;const Q=fe-be,k=se?I:p,N=Array.from(Le).map(le=>k(le));if((0,v.A)(N)<Q&&N.length===xe){ne(xe);return}let W=se?h:f,q=Q,re=1;N.forEach(le=>{W+=le,W<Q&&le<=q&&(re+=1),q-=le}),ne(re)},"recalculateVisibleTabs");var g=e(4525741652),E=e(8214116048),M=e(3078252698);const D=c(ge=>(0,M.A)(ge),"isReactNodeAString");var C=e(4426213732),m=e(1224315998),O=e(2790183459),P=e(4724591729),R=e(8017095033),L=e(796111729),V=e(5124217244),B=e(735940183),K=e(3821598679);function b(){return b=Object.assign||function(ge){for(var ne=1;ne<arguments.length;ne++){var ue=arguments[ne];for(var he in ue)Object.prototype.hasOwnProperty.call(ue,he)&&(ge[he]=ue[he])}return ge},b.apply(this,arguments)}c(b,"_extends");const S=new B.Ay("slack-kit"),G=85,H=52,U=["ArrowLeft"],F=["ArrowRight"],Y=U.concat("ArrowUp"),Z=F.concat("ArrowDown");let ee=c(class extends t.PureComponent{setVisibleTabs(ne){this.setState(()=>({numOfVisibleTabsShown:ne}))}onResize(){var ne,ue,he,be,xe,Le,fe,se,Q,k;const N=this.props.orientation===E.t4.Horizontal,$=N?(ne=this.tabsContainerRef)===null||ne===void 0||(ue=ne.current)===null||ue===void 0?void 0:ue.clientWidth:(he=this.tabsContainerRef)===null||he===void 0||(be=he.current)===null||be===void 0?void 0:be.clientHeight;if(!$)return;const W=N?G:H,q={outerElement:(xe=this.tabsContainerRef)===null||xe===void 0||(Le=xe.current)===null||Le===void 0?void 0:Le.getBoundingClientRect(),innerElement:(fe=this.lastVisibleTabRef)===null||fe===void 0||(se=fe.current)===null||se===void 0?void 0:se.getBoundingClientRect(),totalTabsLength:this.props.tabs.length,numOfVisibleTabsShown:this.state.numOfVisibleTabsShown,childElements:(Q=this.tabsContainerRef)===null||Q===void 0||(k=Q.current)===null||k===void 0?void 0:k.children};y({...q,threshold:W,containerSize:$,isHorizontal:N},this.setVisibleTabs),this.setState(()=>({isResizeCalculationCompleted:!0}),()=>{var re,le;return(le=(re=this.props).onTabsResized)===null||le===void 0?void 0:le.call(re)})}componentDidMount(){this._isMounted=!0;const{maxSize:ne}=this.props;if(ne&&!this.resizeListener){var ue;this.resizeListener=(0,V.A)(this.onResize),this.resizeListener.observe((ue=this.tabsContainerRef)===null||ue===void 0?void 0:ue.current)}}componentDidUpdate(ne,ue){var he;const{defaultTabId:be,tabs:xe,manualTabActivation:Le}=this.props;var fe;((fe=(he=ne.tabs)===null||he===void 0?void 0:he.length)!==null&&fe!==void 0?fe:0)!==xe.length&&this.updateSelectedTab(),be!==ne.defaultTabId&&be&&this.selectTab(be,void 0);const se=ue.numOfVisibleTabsShown!==this.state.numOfVisibleTabsShown,Q=ue.selectedTabId!==this.state.selectedTabId&&!Le;(se||Q)&&this.updateFocusedTabIndex(),this.focusWhenVisible&&(this.focusWhenVisible=!1,this.focus())}componentWillUnmount(){if(this._isMounted=!1,this.resizeListener){var ne;(ne=this.resizeListener)===null||ne===void 0||ne.disconnect(),this.resizeListener=null}}onFocus(ne){const{focusedTabIndex:ue}=this.state,he=this.getTabIndexById(ne.target.id);he!==ue&&this.focusTab(he);const{onFocus:be}=this.props;be==null||be(ne)}onBlur(ne){const{onBlur:ue}=this.props;ue==null||ue(ne)}onKeyDown(ne){const ue=ne.key;if(ne.shiftKey||ne.metaKey||ne.ctrlKey||ne.altKey)return;const be=this.props.orientation==="vertical",xe=be?Z:F,Le=be?Y:U;if(!["Home","End"].concat(xe,Le).includes(ue))return;const se=xe.includes(ue),Q=Le.includes(ue);ne.preventDefault(),se&&this.onNextArrow(ne),Q&&this.onPreviousArrow(ne),ue==="Home"&&this.onHome(ne),ue==="End"&&this.onEnd(ne)}isSelectedTabVisible(){return this.getVisibleTabIds().includes(this.state.selectedTabId)}getHiddenTabs(){const{tabs:ne}=this.props,{numOfVisibleTabsShown:ue}=this.state;return ne.slice(ue,ne.length)}getVisibleTabs(){var ne,ue;const{tabs:he,maxSize:be}=this.props;if(!!!be)return he;const Le=((ne=this)===null||ne===void 0||(ue=ne.state)===null||ue===void 0?void 0:ue.numOfVisibleTabsShown)||he.length;return he.length===Le?he:he.slice(0,Le).concat({id:this.overflowTabId})}getVisibleTabIds(){return this.getVisibleTabs().map(ne=>{let{id:ue}=ne;return ue})}getTabById(ne){var ue;return(ue=this.props.tabs)===null||ue===void 0?void 0:ue.find(he=>he.id===ne)}getTabIndexById(ne){return this.getVisibleTabIds().indexOf(ne)}onHome(ne){if(this.state.focusedTabIndex===0)return;const{onTabWillChange:ue,manualTabActivation:he,onTabChange:be}=this.props,xe=this.getVisibleTabIds(),Le=0;if(this.focusTab(Le),he)return;const fe=xe[Le];fe!==this.overflowTabId&&(ue==null?void 0:ue(fe))!==!1&&this.setState(()=>({selectedTabId:fe}),()=>{be==null||be(fe,ne)})}onEnd(ne){const ue=this.getVisibleTabIds(),he=ue.length-1;if(this.state.focusedTabIndex===he)return;const{onTabWillChange:be,manualTabActivation:xe,onTabChange:Le}=this.props;if(this.focusTab(he),xe)return;const fe=ue[he];fe!==this.overflowTabId&&(be==null?void 0:be(fe))!==!1&&this.setState(()=>({selectedTabId:fe}),()=>Le==null?void 0:Le(fe,ne))}onNextArrow(ne){const{onTabWillChange:ue,manualTabActivation:he,onTabChange:be}=this.props,xe=this.getVisibleTabIds(),Le=this.getTabIndexById(ne.target.id),fe=Le>=xe.length-1?0:Le+1;if(this.focusTab(fe),he)return;const se=xe[fe];se!==this.overflowTabId&&(ue==null?void 0:ue(se))!==!1&&this.setState(()=>({selectedTabId:se}),()=>be==null?void 0:be(se,ne))}onPreviousArrow(ne){const{onTabWillChange:ue,manualTabActivation:he,onTabChange:be}=this.props,xe=this.getVisibleTabIds(),Le=this.getTabIndexById(ne.target.id),fe=Le===0?xe.length-1:Le-1;if(this.focusTab(fe),he)return;const se=xe[fe];se!==this.overflowTabId&&(ue==null?void 0:ue(se))!==!1&&this.setState(()=>({selectedTabId:se}),()=>be==null?void 0:be(se,ne))}getNextTabId(){const{defaultTabId:ne,tabs:ue,currentTabId:he}=this.props,be=ne?this.getTabIndexById(ne):void 0,xe=he?this.getTabIndexById(he):void 0;return he&&xe?he:ne&&be?ne:ue[0].id}updateSelectedTab(){if(!this._isMounted||!this.props.tabs.length)return;const ne=this.getNextTabId();ne!==this.state.selectedTabId&&this.setState(()=>({selectedTabId:ne}))}focus(){if(this.isHidden)return this.focusWhenVisible=!0,!1;this.focusWhenVisible=!1;const{current:ne}=this.focusedTabRef;if(ne)return ne.focus(),!0;const ue=this.props.currentTabId||this.state.selectedTabId,he=this.getTabIndexById(ue)||0;return this.focusTab(he),!0}focusTab(ne){this.setState(()=>({focusedTabIndex:ne}))}selectTab(ne,ue){const{onTabWillChange:he,onTabChange:be}=this.props,xe=this.getTabById(ne);if(!xe)return null;if((he==null?void 0:he(ne))!==!1){if(xe.isExternalLink){var Le;return(Le=xe.onClick)===null||Le===void 0?void 0:Le.call(xe,ne,ue)}return this.setState(()=>({selectedTabId:ne}),()=>{if(be==null||be(ne,ue),this.props.focusOnFirstFocusableChildOnChange){const fe=this.panelRef&&this.panelRef.current,se=(0,R.Fp)(fe);se==null||se.focus()}}),null}}updateFocusedTabIndex(){const ne=this.isSelectedTabVisible()?this.state.selectedTabId:this.overflowTabId;this.setState(()=>({focusedTabIndex:this.getVisibleTabIds().indexOf(ne)}))}onTabClick(ne,ue){var he;const be=this.getTabById(ne);be&&(be.isExternalLink||this.selectTab(be.id,ue),be==null||(he=be.onClick)===null||he===void 0||he.call(be,be.id,ue))}get isHidden(){return!!this.props.maxSize&&!this.state.isResizeCalculationCompleted}renderOverflowTabLabel(ne){const ue=S.t("More\u2026",{fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"});if(this.isSelectedTabVisible())return ue;const he=this.getTabById(ne);if(!he)return ue;const be=he["aria-label"]||he.label||he.title;return!be||!D(be)?ue:S.t("More: {selectedTabLabel}",{selectedTabLabel:be,fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"})}renderTabsItem(ne,ue){const{tabs:he,fullWidthMenu:be,orientation:xe,iconPosition:Le,focusOnMount:fe}=this.props,se=this.state.focusedTabIndex===ue,Q=se?this.focusedTabRef:void 0,k=ne.autoClogProps?{...this.autoClogProps,...ne.autoClogProps,elementType:m.ElementType.TAB}:this.autoClogProps,N=ue===he.length-1?this.lastVisibleTabRef:void 0,$=N?(0,O.A)(Q,N):Q,W=this.props.currentTabId||this.state.selectedTabId,q=W===ne.id;return ne.id===this.overflowTabId?t.createElement(_,{renderMenu:this.renderOverflowMenu,position:"bottom-left",label:this.renderOverflowTabLabel(W),isSelected:!this.isSelectedTabVisible(),isFocused:se,ref:$,id:ne.id,key:ne.id}):t.createElement(a.A,{key:ne.id,id:ne.id,icon:ne.icon,svgIcon:ne.svgIcon,customIcon:ne.customIcon,label:ne.label||ne.title,onClick:this.onTabClick,autoClogProps:k,isSelected:q,isFocused:se,focusOnMount:fe,isDisabled:ne.isDisabled,fullWidth:be||xe==="vertical",titleCount:ne.titleCount,maxTitleCount:ne.maxTitleCount,"aria-label":ne["aria-label"],"aria-describedby":ne["aria-describedby"],"data-qa":ne["data-qa"]||"tabs_item","aria-haspopup":ne["aria-haspopup"],ref:$,formatCount:this.props.formatCount,isLoading:ne.isLoading,isCountLoading:ne.isCountLoading,iconPosition:Le,className:ne.className,contextMenuAriaLabel:ne.contextMenuAriaLabel,contextMenuTemplate:ne.contextMenuTemplate})}renderTabsItems(){return this.getVisibleTabs().map((ue,he)=>{typeof ue.label!="string"&&!t.isValidElement(ue.label)&&typeof ue.title!="string"&&!t.isValidElement(ue.title)&&!ue["aria-label"]&&((0,P.Cu)()||(0,P.b3)())&&(0,L.Wo)().error("Tabs requires either a label of type string, or an aria-label.");const be=this.renderTabsItem(ue,he);return ue.renderWrapper?t.createElement(t.Fragment,{key:ue.id},ue.renderWrapper(be)):be})}renderOverflowMenu(ne){var ue;const{selectedTabId:he}=this.state,be=(ue=this.getHiddenTabs())===null||ue===void 0?void 0:ue.map(xe=>({label:xe.label||xe.title,id:xe.id,click:Le=>this.onTabClick(xe.id,Le),key:xe.id,type:l.A.radio,checked:xe.id===he,icon:xe.svgIcon?t.createElement(o.A,b({size:"18"},xe.svgIcon)):null,className:"c-tabs__tab_overflow_menu_item"}));return t.createElement(i.a,b({width:"200px"},ne,{template:be}))}renderTabPanelLabel(ne){const ue=this.getTabById(ne);if(!ue)return;const he=ue["aria-label"]||ue.label||ue.title;if(D(he))return he}render(){var ne;const{fullHeight:ue,fullWidthMenu:he,className:be,orientation:xe,tabMenuClassnames:Le,tabPanelClassnames:fe,ariaLabel:se,currentTabId:Q,maxSize:k}=this.props,N=Q||this.state.selectedTabId;var $;const W=($=(ne=this.getTabById(N))===null||ne===void 0?void 0:ne.content)!==null&&$!==void 0?$:"",q=(0,n.A)(be,{"c-tabs__tab_container--full_height":ue,"c-tabs__tab_container--vertical":xe==="vertical","c-tabs__tab_menu--overflow_ellipsis":!!k}),re=(0,n.A)(Le,"c-tabs__tab_menu",{"c-tabs__tab_menu--full_width":he,"c-tabs__tab_menu--vertical":xe==="vertical","c-tabs__tab_menu--hidden":this.isHidden}),le=(0,n.A)(fe,{"c-tabs__tab_panel--vertical":xe==="vertical"});return t.createElement("div",{className:q,"data-qa":"tabs_full_height_class"},t.createElement("div",{role:"tablist",className:re,"data-qa":"tabs_full_width_class",onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,"aria-orientation":xe,"aria-label":se,ref:this.tabsContainerRef},this.renderTabsItems()),W&&t.createElement(g.A,{tabContent:W,fullHeight:ue,ref:this.panelRef,className:le,"aria-label":this.renderTabPanelLabel(N)}))}constructor(ne){var ue;super(ne),(0,C.v)(this,["onKeyDown","onFocus","onBlur","onTabClick","onResize","renderOverflowMenu","setVisibleTabs"]),this.focusedTabRef=t.createRef(),this.panelRef=t.createRef(),this.tabsContainerRef=t.createRef(),this.lastVisibleTabRef=t.createRef(),this.resizeListener=null,this._isMounted=!1,this.focusWhenVisible=!1,ne.autoClogProps&&(this.autoClogProps={...ne.autoClogProps,elementType:m.ElementType.TAB});const he=ne.currentTabId||ne.defaultTabId||((ue=ne.tabs[0])===null||ue===void 0?void 0:ue.id),be=this.getTabIndexById(he);this.state={selectedTabId:he,focusedTabIndex:be!==-1?be:0,numOfVisibleTabsShown:this.getVisibleTabs().length,isResizeCalculationCompleted:!1},this.overflowTabId=`sk-overflow-tab-${(0,K.A)()}`}},"Tabs");ee.displayName="Tabs",ee.defaultProps={onTabChange:s.A,orientation:"horizontal",iconPosition:"right",manualTabActivation:!1,focusOnFirstFocusableChildOnChange:!0};const j=ee},4275787242:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(3708320478),s=e(5733135148);const i=c(l=>{let{children:o,duration:a,svgIconProps:r,toastClasses:d,position:u,offsetX:_,offsetY:v,showCloseButton:h,onCloseComplete:f,shouldAutoFade:I,shouldSkipToastDismissal:p,closeButtonClasses:y,svgIconClassName:g,announceContentAsAssertive:E}=l;return t.createElement(s.Ay,{fadeDelay:a,svgIconClassName:g,svgIconProps:r,toastClasses:d,offsetX:_,offsetY:v,position:u,showCloseButton:h,onCloseComplete:f,shouldAutoFade:I,shouldSkipToastDismissal:p,closeButtonClasses:y},t.createElement(n.z,{assertive:E},o))},"Toast");i.displayName="Toast",i.defaultProps={duration:6e3}},2855755676:(x,A,e)=>{"use strict";e.d(A,{F:()=>t,n:()=>n});const t={small:"small",medium:"medium",large:"large"},n={small:22,medium:26,large:32}},561151542:(x,A,e)=>{"use strict";e.d(A,{A:()=>H,L:()=>S});var t=e(3134334389),n=e(5255740490),s=e(7715417323),i=e(126225536),l=e(1030162945),o=e(7969928607),a=e(1407713935),r=e(4559887502),d=e(8798294025),u=e(6839188756),_=e(6850680508),v=e(6216960938),h=e(2704661e3),f=e(2966224896),I=e(6308822),p=e(1610251172),y=e(7193040700),g=e(3267847539),E=e(8683010724),M=e(5484624422),T=e(2312625946),D=e(82287009),C=e(8040098042),m=e(6112179660),O=e(4327331459),P=e(3707193570),R=e(4862221402),L=e(9391594207),V=e(2235302340),B=e(9101533895),K=e(3677514771);function b(){return b=Object.assign||function(U){for(var F=1;F<arguments.length;F++){var Y=arguments[F];for(var Z in Y)Object.prototype.hasOwnProperty.call(Y,Z)&&(U[Z]=Y[Z])}return U},b.apply(this,arguments)}c(b,"_extends");let S=c(class extends t.Component{renderChannelToken(F){const{channel:Y,showMemberCounts:Z,isSelected:ee,channelHasNonUniqueName:j}=this.props;let ge;return(0,a.LI)(Y)?ge=t.createElement(v.Ay,{id:(0,d.e)(Y),className:"c-token_channel"}):(0,a.yz)(Y)?ge=t.createElement(h.A,{mpim:Y,className:"c-token_channel",isActive:ee}):ge=t.createElement(_.A,{channel:Y,className:"c-token_channel",displayFormerNames:!1,showFilledIcon:!0,showMemberCounts:Z,showTeamForLocalChannel:j}),t.createElement("span",{className:F,"data-qa":"token_channel"},ge)}renderContent(){const{isLoading:F,isUnknown:Y,isError:Z,isMemberError:ee,isTeamError:j,isInvalid:ge,channel:ne,memberId:ue,teamName:he,userGroupId:be,channelSection:xe,contentInnerClassName:Le,emailTeam:fe}=this.props;let se=(0,n.A)("c-token_content__inner",Le);return F&&!ge?(se+=" c-token_content__inner--loading",this.renderLoadingToken(se)):Y?(se+=" c-token_content__inner--unknown",this.renderUnknownToken(se)):Z?(se+=" c-token_content__inner--error",this.renderErrorToken(se)):fe?(se+=" c-token_content__inner--email_with_team_icon",this.renderEmailTokenWithTeamIcon(se)):ue&&ee?(se+=" c-token_content__inner--error",this.renderMemberErrorToken(se)):ue?(se+=" c-token_content__inner--member",this.renderMemberToken()):ne?this.renderChannelToken(se):he&&j?(se+=" c-token_content__inner--error",this.renderTeamErrorToken(se)):he?(se+=" c-token_content__inner--team",this.renderTeamToken(se)):xe?(se+=" c-token_content__inner--channel_section",this.renderChannelSectionToken(se)):be?(se+=" c-token_content__inner--usergroup",this.renderUserGroupToken(se)):this.renderPlainToken(se)}renderErrorToken(F){const{label:Y}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__error_icon_container"},t.createElement(E.A,{size:"18",name:"warning","data-qa":"token_error_icon"})),t.createElement("span",{className:(0,n.A)(F,"c-token_content__label"),"data-qa":"token_error"},Y))}renderLoadingToken(F){const{size:Y,label:Z}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__loading_icon_container"},t.createElement(I.A,b({},Y?{size:Y}:{},{"data-qa":"token_loading_icon"}))),t.createElement("span",{className:(0,n.A)(F,"c-token_content__label"),"data-qa":"token_loading"},Z))}renderMemberToken(){const{forceRealName:F,isDisabled:Y,memberId:Z,size:ee,hasNoAccess:j,forceAvatarPresenceIndicator:ge}=this.props;return t.createElement(v.Ay,{id:Z,isDeactivated:Y,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:F,showStatus:!1,className:"c-token--member c-token__avatar margin_right_25","data-qa":"token_member",tokenSize:ee,hasNoAccess:j,forceAvatarPresenceIndicator:ge})}renderMemberErrorToken(F){const{forceRealName:Y,isDisabled:Z,memberId:ee,size:j}=this.props;return t.createElement(v.Ay,{id:ee,isDeactivated:Z,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:Y,showStatus:!1,className:(0,n.A)(F,"c-token--member c-token__avatar"),"data-qa":"token_member",tokenSize:j})}renderIcon(){const{icon:F,svgIcon:Y}=this.props;return Y?t.createElement("span",{className:"c-token_content__icon"},t.createElement(E.A,b({"data-qa":"token_plain_icon",inline:!0,size:"inherit"},Y))):F?t.createElement(p.A,{"data-qa":"token_plain_icon",size:"inherit",className:"c-token_content__icon",type:F,inline:!0}):null}renderPlainToken(F){const{label:Y}=this.props;return t.createElement("span",{className:F},this.renderIcon(),t.createElement("span",{className:"c-token_content__label","data-qa":"token_plain_label"},t.createElement(o.A,{text:Y,inputIsEscaped:!0,emojiSize:l.lw.MEDIUM})))}renderEmailTokenWithTeamIcon(F){const{icon:Y,label:Z,emailTeam:ee}=this.props;return t.createElement("span",{className:F},Y&&t.createElement(p.A,{"data-qa":"token_email_with_team_icon_icon",size:"inherit",className:"c-token_content__icon margin_right_50",type:Y,inline:!0}),t.createElement("span",{className:"c-token_content__label margin_right_25","data-qa":"token_email_with_team_icon_content_label"},t.createElement(o.A,{text:Z,inputIsEscaped:!0,emojiSize:l.lw.MEDIUM})),ee&&t.createElement("span",{className:"c-member__secondary_content"},t.createElement(M.A,{team:ee,"data-qa":"token_email_with_team_icon",size:v.Cg,className:"c-member__team_icon"})))}renderTeamToken(F){const{teamId:Y,teamName:Z}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(M.A,{id:Y,size:26,className:"c-token__team_icon","data-qa":"token_team_icon"}),t.createElement("span",{className:(0,n.A)(F,"c-token_content__label"),"data-qa":"token_team_name"},Z))}renderTeamErrorToken(F){const{teamId:Y,teamName:Z}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(M.A,{id:Y,size:26,className:"c-token__team_icon","data-qa":"token_team_icon_error"}),t.createElement("span",{className:(0,n.A)(F,"c-token_content__label"),"data-qa":"token_team_name_error"},Z))}renderChannelSectionToken(F){const{channelSection:Y}=this.props;return Y?t.createElement("span",{className:(0,n.A)(F,"c-token_content__label")},t.createElement(i.A,{channelSection:Y})):null}renderUnknownToken(F){const{label:Y}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__unknown_icon_container"},t.createElement(E.A,{size:"18",name:"emoji-missing",variation:"filled","data-qa":"token_unknown_icon"})),t.createElement("span",{className:(0,n.A)(F,"c-token_content__label"),"data-qa":"token_unknown"},Y))}renderUserGroupToken(F){const{userGroupId:Y}=this.props;return t.createElement(f.A,{id:Y,showDescription:!1,className:(0,n.A)(F,"c-token_content__label")})}render(){const{isDisabled:F,isInvalid:Y,isError:Z,memberId:ee,isMemberError:j,isTeamError:ge,isUnknown:ne,isLoading:ue,isSelected:he,size:be,hoverText:xe,tabIndex:Le,contentEditable:fe,className:se,onMouseDown:Q,enableProfileHoverCard:k,customizeProfileHoverCardProps:N,isRestricted:$}=this.props,W=(0,n.A)("c-token",se,`c-token--${be}`,{"c-token--selected":he,"c-token--disabled":F,"c-token--invalid":Y,"c-token--restricted":$,"c-token--error":Z||j||ge,"c-token--unknown":ne,"c-token--loading":ue}),q=this.renderContent();let re=q;xe&&q?re=t.createElement(T.Ay,{tip:xe},q):ee&&k&&(re=(0,D.yN)({...N||{},memberId:ee,children:q}));const le=this.props.renderIcon(this.props);return t.createElement("span",{className:W,"data-id":this.props["data-id"],"data-qa":this.props["data-qa"],tabIndex:Le,contentEditable:fe,onMouseDown:Q},t.createElement("span",{className:"c-token__content","data-qa":"token_content"},re),le)}},"Token");S.displayName="Token",S.defaultProps={"data-qa":"select_token",isDisabled:!1,isInvalid:!1,isError:!1,isUnknown:!1,isLoading:!1,isSelected:!1,size:y.hu.MEDIUM,renderIcon:s.A,forceRealName:!1,contentEditable:!1,channelHasNonUniqueName:!1};const G=c((U,F)=>{const{entityId:Y,disableIdParsing:Z}=F;let ee;(0,O.A)(Y)&&!Z&&(ee=Y);let j,ge;if(((0,P.Ay)(Y)||(0,P.JV)(Y))&&!Z){const Le=(0,K._J)(U,Y);Le&&(j=Y,ge=(0,u.F1)(Le))}let ne;(0,m.A)(Y)&&!Z&&(ne=(0,V.xe)(U,Y));let ue;(0,R.A)(Y)&&!Z&&(ue=Y);const he=(0,B.OL)(U,Y),be=(0,B.MS)(U);let xe;return(0,C.A)(Y)&&he&&(xe=(0,r.i)(be,he)),{channel:he,memberId:ee,teamName:ge,teamId:j,userGroupId:ue,channelSection:ne,channelHasNonUniqueName:xe}},"mapStateToProps"),H=(0,g.nM)((0,L.N)(G,null)(S))},2312625946:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>R,PK:()=>y,Ws:()=>C,YU:()=>_.Y,n1:()=>g});var t=e(3134334389),n=e(862210999),s=e(4332857818),i=e(8646591923),l=e(9887985562),o=e(1641606663),a=e(7331519201),r=e(8157829725),d=e(8427910566),u=e(5249175977),_=e(1926356522),v=e(8214116048),h=e(2689960678),f=e(4954329752),I=e(3821598679);function p(){return p=Object.assign||function(V){for(var B=1;B<arguments.length;B++){var K=arguments[B];for(var b in K)Object.prototype.hasOwnProperty.call(K,b)&&(V[b]=K[b])}return V},p.apply(this,arguments)}c(p,"_extends");const y=300,g=60,E=3,M=3;let T=c(class{track(B){this.instance&&B!==this.instance&&this.instance.hide(),this.instance=B}stopTracking(B){B===this.instance&&(this.instance=void 0)}hideActive(){this.instance&&(this.instance.hide(),this.instance=void 0)}},"TooltipManager");const D=new T;function C(){D.hideActive()}c(C,"hideVisibleTooltip");function m(V){const B=c(K=>((K==null?void 0:K.offsetWidth)||0)<((K==null?void 0:K.scrollWidth)||0)||((K==null?void 0:K.offsetHeight)||0)<((K==null?void 0:K.scrollHeight)||0),"retIsTruncated");if(V!=null&&V.querySelector){const K=V.querySelector(".c-truncate");if(K)return B(K)}return B(V)}c(m,"isElementTruncated");function O(V,B){return V.width.toFixed(2)===(B==null?void 0:B.width.toFixed(2))&&V.height.toFixed(2)===(B==null?void 0:B.height.toFixed(2))&&V.left.toFixed(2)===(B==null?void 0:B.left.toFixed(2))&&V.right.toFixed(2)===(B==null?void 0:B.right.toFixed(2))&&V.top.toFixed(2)===(B==null?void 0:B.top.toFixed(2))&&V.bottom.toFixed(2)===(B==null?void 0:B.bottom.toFixed(2))}c(O,"areBoundsEqual");const P=t.forwardRef((V,B)=>{let{children:K,position:b=v.yX.Top,delay:S=150,shouldFade:G=!0,tip:H,tipClassName:U,tipArrowOffset:F,"data-qa":Y,status:Z=_.Y.Info,offsetX:ee=0,offsetY:j=0,zIndex:ge="menu",shouldForceVisible:ne=!1,shouldOnlyShowWhenTruncated:ue=!1,onShow:he,onHide:be,onClick:xe,maxWidth:Le,hideFromScreenReader:fe=!1,automaticallyPositionTip:se=!0,tipAnchorRef:Q,...k}=V;const N=t.Children.only(K),{windowRef:$}=(0,t.useContext)(o.Mn),W=(0,t.useRef)(),q=(0,t.useRef)(null),re=(0,t.useRef)(),le=(0,t.useRef)(!1),[Ae,Te]=(0,t.useState)(!1),[Ne,pe]=(0,t.useState)(!1),[Ee,oe]=(0,t.useState)(!1),[ce,ke]=(0,t.useState)(),Ce=(0,t.useContext)(d.A),Me=m(re.current),Se=Me||!ue,Ue=ne||Ae||Ne,He=!!ce&&Se,Ye=(0,t.useMemo)(()=>(0,f.P)(q,B),[B]),J=(0,t.useCallback)((Bt,Wt)=>se?{top:Bt,left:Wt}:void 0,[se]),ae=(0,t.useMemo)(()=>`sk-tooltip-${(0,I.A)()}`,[]),Ve=(0,t.useCallback)(()=>{oe(!0)},[]),[Be,Ke]=(0,a.i)(Ve),Re=(0,t.useMemo)(()=>({id:ae,hide:()=>{Ke(),le.current&&oe(!1),be==null||be()}}),[ae,Ke,be]),Fe=(0,t.useCallback)(()=>{Ke(),D.stopTracking(Re)},[Re,Ke]),Ie=(0,t.useCallback)(()=>{ne||Ce?oe(!0):Be(S),he==null||he({isTruncated:Me}),D.track(Re)},[ne,Ce,he,Me,Re,Be,S]),ze=(0,t.useCallback)(()=>{Fe(),Ee&&(oe(!1),be==null||be())},[Fe,Ee,be]),qe=(0,t.useCallback)(Bt=>{N.props.onKeyDown&&N.props.onKeyDown(Bt),Bt.which===i._f&&Ee&&Ce&&(Bt.nativeEvent.stopImmediatePropagation(),Bt.stopPropagation(),oe(!1))},[oe,Ee,Ce,N.props]),st=(0,t.useCallback)(Bt=>{N.props.onMouseEnter&&N.props.onMouseEnter(Bt),Te(!0),Ee||(W.current=Bt)},[N.props,Ee]),ut=(0,t.useCallback)(Bt=>{N.props.onFocus&&N.props.onFocus(Bt),Ce&&pe(!0)},[N.props,Ce]),tt=(0,t.useCallback)(Bt=>{N.props.onMouseLeave&&N.props.onMouseLeave(Bt),Te(!1),W.current=void 0},[N.props]),_t=(0,t.useCallback)(Bt=>{N.props.onBlur&&N.props.onBlur(Bt),pe(!1)},[N.props]);(0,t.useEffect)(c(function(){re.current||(re.current=(0,s.findDOMNode)(q.current))},"syncChildDOMNodeRef")),(0,t.useEffect)(()=>{const Bt=$.deref(),Wt=c(Tn=>{Tn.which===i._f&&ze()},"hoverEscHide");if(Bt)return Ae?(Bt.addEventListener("keydown",Wt),()=>{Bt.removeEventListener("keydown",Wt)}):()=>{Bt.removeEventListener("keydown",Wt)}},[Ae,$,ze]),(0,t.useEffect)(()=>(le.current=!0,()=>{le.current=!1}),[]),(0,r.A)(c(function(){let Wt=re.current;if(Q!=null&&Q.current&&(Wt=(0,s.findDOMNode)(Q.current)),Ue&&Wt){const Tn=ce,Ot=Wt.getClientRects();let Ft=Ot[0];if(W.current){const Xt=W.current,vn=Array.from(Ot).find(je=>Xt.clientY>=je.top&&Xt.clientY<=je.bottom&&Xt.clientX>=je.left&&Xt.clientX<=je.right);vn&&(Ft=vn)}if(!Ft)return;const rn=$.deref(),ln=rn?rn.scrollX||rn.pageXOffset:0,_n=rn?rn.scrollY||rn.pageYOffset:0,en={height:Ft.height,width:Ft.width,left:Ft.left+ln,right:Ft.right+ln,top:Ft.top+_n,bottom:Ft.bottom+_n};O(en,Tn)||ke(en)}},"maybeCalculateContentBounds"),[Ue,Q]),(0,r.A)(c(function(){He&&Ue?Ie():ze()},"showOrHideTooltip"),[He,Ue]);const yt=N.props["aria-label"],Kt=(0,t.useMemo)(()=>yt===H||fe?h.t0:{"aria-describedby":Ee?ae:void 0},[yt,fe,Ee,H,ae]),Qt=(0,t.useMemo)(()=>t.cloneElement(N,{...k,...N.props,...Kt,onClick:xe||N.props.onClick,onFocus:ut,onBlur:_t,onKeyDown:qe,onMouseEnter:st,onMouseLeave:tt,"data-sk":"tooltip_parent"}),[Kt,N,_t,xe,ut,qe,st,tt,k]),Jt=(0,t.useMemo)(()=>{if(F)return F;if(ce)return ce.width/2},[ce,F]),Gt=(0,t.useMemo)(()=>({position:b,arrowOffset:Jt,status:Z,className:U,"data-qa":Y,maxWidth:Le}),[Y,Le,b,Z,U,Jt]),wt=(0,t.useMemo)(()=>Ee?t.createElement(u.AM,{isOpen:Ee,position:b,targetBounds:ce,overlayClassName:"c-popover c-popover--no-pointer",offsetX:ee,offsetY:j,allowanceX:E,allowanceY:M,key:"tooltip-popover",zIndex:ge,shouldFocusAfterRender:!1,shouldFade:G,ariaHideApp:!1,tryOppositePosition:!0,id:ae,ariaRole:"tooltip",dataAttributes:{qa:"tooltip-popover"},disableOverlaysContextProvider:!0},Bt=>{let{position:Wt,top:Tn,left:Ot,targetBounds:Ft}=Bt;const rn=(0,n.A)(H)?H({hasKeyboardFocus:Ce}):H;return t.createElement(_.A,p({},Gt,{position:Wt,tipBounds:J(Tn,Ot),targetBounds:Ft}),rn)}):null,[Ee,ce,b,ee,j,ge,G,H,Ce,Gt,J,ae]);return t.createElement(t.Fragment,null,t.createElement(l.V,{ref:Ye},Qt),wt)});P.displayName="Tooltip";const R=P;Object.defineProperty({isElementTruncated:m,areBoundsEqual:O},"isElementTruncated",{get:()=>m,set:V=>{m=V}})},5184226701:(x,A,e)=>{"use strict";e.d(A,{BD:()=>t,Cz:()=>i,LH:()=>l,LX:()=>o,T0:()=>n,UC:()=>s});const t={SharedChannel:"shared_channel",SingleChannelGuest:"ultra_restricted",MultiChannelGuest:"restricted",Member:"regular",ExternalSharedWorkspaceMember:"external_shared_workspace_member"},n={User:"user_invite",UserGroup:"user_group_invite",Email:"email_invite",Member:"member"},s={OpenConfirmationScreen:"add_to_channel_open_confirmation_screen"},i={OpenInviteTypeExternal:"comprehensible_invites_open_invite_type_external",InviteTypeExternalDefaultActionDisallowed:"comprehensible_invites_invite_type_external_default_action_disallowed",OpenSharedChannelNoteExternal:"comprehensible_invites_open_shared_channel_note_external",OpenSharedChannelExternalLimitedExternal:"comprehensible_invites_open_shared_channel_external_limited_external",OpenInviteTypeInternal:"comprehensible_invites_open_invite_type_internal",InviteTypeInternalDefaultActionDisallowed:"comprehensible_invites_invite_type_internal_default_action_disallowed",OpenSharedChannelNoteInternal:"comprehensible_invites_open_shared_channel_note_internal",OpenSharedChannelExternalLimitedInternal:"comprehensible_invites_open_shared_channel_external_limited_internal"};class l{constructor(r){this.ok=r.ok,this.invitee=r.email,this.inviteeType=n.Email,this.accessType=r.inviteType||t.Member,this.error=r.error}}c(l,"InviteResult");function o(a){return a===t.Member||a===t.MultiChannelGuest||a===t.SingleChannelGuest}c(o,"isBaseInviteType")},9536443280:(x,A,e)=>{"use strict";e.d(A,{D:()=>t});var t;(function(n){n[n.available=0]="available",n[n.processing=1]="processing",n[n.none=2]="none"})(t||(t={}))},8178126019:(x,A,e)=>{"use strict";e.d(A,{Ao:()=>o.k,FQ:()=>l.q,IU:()=>r,Jg:()=>s.G,RW:()=>n.jB,YB:()=>u,fe:()=>t.T,iV:()=>d,mF:()=>i.I,on:()=>a,qU:()=>n.Sv});var t=e(1614054140),n=e(4349526263),s=e(5216556985),i=e(8485081141),l=e(6515569951),o=e(2164700852);const a={Generic:"generic",InternalInviteNotMember:"internal_not_member",InternalInviteNotMemberCanRequest:"internal_not_member_can_request",InternalInviteNoAccess:"internal_no_access",InternalInviteWasPreviouslyConnected:"internal_was_previously_connected",InternalInviteWasPreviouslyConnectedButNotMember:"internal_was_previously_connected_but_not_member",InvalidRecipientTeam:"invalid_recipient_team"};function r(_){return!!_&&!!_.channel}c(r,"isSharedChannelInvite");function d(_){return!!_&&!r(_)&&!u(_)}c(d,"isDirectMessageInvite");function u(_){return!!_&&!!_.shared_workspace}c(u,"isSharedWorkspaceInvite")},266169032:(x,A,e)=>{"use strict";e.d(A,{M:()=>t});const t={shareChannelCreate:"share_channel_create",channelInviteModal:"channel_invite_modal",scdmFreeStartTrialBanner:"scdm_free_start_trial_banner",messageLimitTrialOfferModal:"message_limit_trial_offer_modal",huddlesTrialEntryPointModal:"huddles_trial_entry_point_modal",slackConnectTrialEntryPointModal:"slack_connect_trial_entry_point_modal",canvasTrialOfferModal:"canvas_trial_offer_modal",workflowBuilderFreemiumTrialOfferModal:"unlimited_workflows_trial_offer_modal"}},1305633231:(x,A,e)=>{"use strict";e.d(A,{A:()=>Q});var t=e(6696292586),n=e(498506970),s=e(1835177371),i=e(8276911661),l=e(9101533895),o=e(8847766420),a=e(3037015781),r=e(9884588328),d=e(6495946979),u=e(9262712126),_=e(1407713935),v=e(5577180258),h=e(4282439381),f=e(6188550180),I=e(8389327410),p=e(8193414630),y=e(2756015265),g=e(972463850),E=e(4695291896),M=e(6345573615),T=e(8525228540);function D(k){if(k<=0)return"";let N="",$=k;for(;$>0;)$-=1,N=String.fromCharCode("a".charCodeAt(0)+$%26)+N,$=Math.floor($/26);return N}c(D,"convertNumberToLetterIncrement");const C=["","c","cc","ccc","cd","d","dc","dcc","dccc","cm","","x","xx","xxx","xl","l","lx","lxx","lxxx","xc","","i","ii","iii","iv","v","vi","vii","viii","ix"];function m(k){if(k<=0)return"";const N=k.toString().split("");let $="";for(let re=2;re>=0;re--){const le=parseInt(N.pop()||"0",10);$=(C[le+re*10]||"")+$}const W=N.join("")||"0",q=parseInt(W,10)+1;return Array(q).join("m")+$}c(m,"convertNumberToRomanNumeral");var O=e(735940183),P=e(5597384299),R=e(8983164438),L=e(6795568989),V=e(3695531806),B=e(2647703359),K=e(937317117),b=e(3574134525);const S=new O.Ay("channel_token"),G=new O.Ay("emoji"),H=c((k,N)=>N.text||"","textToText"),U=c((k,N)=>`@${N.range}`,"broadcastToText"),F=c((k,N)=>N.value||"","colorToText"),Y=c((k,N,$)=>{let{linkFormat:W}=$;const{text:q="",url:re=""}=N;if(!q&&!re)return"";if(!q)return re;switch(W){case"default":return q;case"prefer_url":return re;case"bracket":return`[ ${q}: ${re} ]`;default:(0,p.Kh)(W)}},"linkToText"),Z=c((k,N)=>{const $=(0,i.nv)(k,N.user_id);return`@${(0,u.Gt)($)||N.user_id}`},"userToText"),ee=c((k,N)=>{const $=(0,s.lJ)(k,N.usergroup_id);if($===!1)return(0,E.A)({userGroupHandle:"",isUnknown:!0,isNonExistent:!0});const W=(0,a.lv)($);var q;return(0,E.A)({userGroupHandle:W?"":(q=$.handle)!==null&&q!==void 0?q:"",isUnknown:(0,a.mX)($),isNonExistent:(0,a.lv)($)})},"userGroupToText"),j=c((k,N)=>{const $=(0,l.OL)(k,N.channel_id);var W;const q=(W=(0,r.SB)(k,$,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))!==null&&W!==void 0?W:"",re=(0,a.mX)($),le=(0,a.lv)($),Ae=(0,_.Zp)($),Te=(0,d.bl)($);return le||Ae&&!Te?`#${S.t("private-channel")}`:(0,M.A)({channelName:q,isUnknown:re,isNonExistent:le})},"channelToText"),ge=c((k,N,$)=>{let{convertEmoji:W}=$;const q=(0,f.A)(N,{state:k,localize:!1}),re=(0,T.bR)({state:k,locale:(0,O.Yp)(),name:q});return W==="phrase"?(0,y.A)(re||"",{state:k})||"":W==="unicode"&&(N!=null&&N.unicode)&&(0,L.d)(N.unicode)?(0,V.z)({codePointLikeString:N.unicode})||"":W==="unicode"&&!(N!=null&&N.unicode)?(0,g.A)(k,{messageText:q,teamId:(0,o.ZT)(k)}):re??""},"emojiToText"),ne=c((k,N)=>{const $=(0,K.Lp)(k,N.file_id);return(0,B.SB)($)||N.file_id},"fileToText"),ue=c((k,N,$)=>{let{convertEmoji:W}=$;const q=(0,f.A)({...N,type:I.Lv.EMOJI},{state:k,localize:!1}),re=(0,T.bR)({state:k,locale:(0,O.Yp)(),name:q});if(W==="phrase"){var le;return(le=(0,y.U)(re||"",N.size||0,{state:k}))!==null&&le!==void 0?le:""}var Ae;const Te=(Ae=W==="unicode"?(0,g.A)(k,{messageText:q,teamId:(0,o.ZT)(k)}):re)!==null&&Ae!==void 0?Ae:"";return(0,h.x)(k)?G.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:Te,size:N.size}):`${N.size} ${Te} emojis`},"emojiGroupToText"),he=c((k,N)=>!N.timestamp&&N.fallback?N.fallback:(0,P.Yq)(N.timestamp,N.format,{...N.fallback&&{fallbackString:N.fallback}}),"dateToText"),be=c((k,N)=>{const $=k.workflowBuilder.workflowEditor.variables.list,W=(0,b.x)($,N.id);return W?`@${W.label}`:N.id},"workflowTokenToText"),xe={[I.Lv.TEXT]:H,[I.Lv.USER]:Z,[I.Lv.USERGROUP]:ee,[I.Lv.CHANNEL]:j,[I.Lv.BROADCAST]:U,[I.Lv.DATE]:he,[I.Lv.COLOR]:F,[I.Lv.LINK]:Y,[I.Lv.EMOJI]:ge,[I.Lv.FILE]:ne,[I.Lv.CANVAS]:ne,[I.Lv._EMOJI_GROUP]:ue,[I.Lv.WORKFLOWTOKEN]:be};function Le(k){let{indent:N}=k;return!(0,t.A)(N)||N%3===0?"\u2022":N%3===1?"\u25E6":N%3===2?"\u25A0":"\u2022"}c(Le,"getUnorderedListCharacter");function fe(k){let{indent:N,incr:$}=k;return!(0,t.A)(N)||N%3===0?$:N%3===1?D($):N%3===2?m($):$}c(fe,"getOrderedListCharacter");function se(k,N){return(0,h.x)(k)?(0,v.A)((0,n.A)(N)):N}c(se,"maybeGroupEmojies");function Q(k,N){let{convertEmoji:$="text",linkFormat:W="default"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!N||!N.length)return"";const q=c(Ae=>{if(!Ae||!Ae.elements)return"";const Te=[];return Ae.elements.forEach(Ne=>{if(!Ne||!Ne.type)return;const pe=xe[Ne.type];var Ee;const oe=(Ee=pe==null?void 0:pe(k,Ne,{convertEmoji:$,linkFormat:W}))!==null&&Ee!==void 0?Ee:"";Te.push(oe)}),Te.join("")},"convertSection"),re=[];return se(k,N[0].elements).forEach(Ae=>{if(!(!Ae||!Ae.type))if((0,R.C)(Ae)){const Te=Ae.offset||0,Ne=Ae.indent||0;let pe=1+Te;Ae.elements.forEach(Ee=>{const oe=q(Ee);if(Ae.style==="ordered"){const ce=fe({indent:Ne,incr:pe});re.push(`${ce}. ${oe}.`),pe+=1}else{const ce=Le({indent:Ne});re.push(`${ce} ${oe}.`)}})}else re.push(q(Ae))}),re.join(`
`)}c(Q,"convertRichTextToPlainText")},6188550180:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(8389327410),n=e(8525228540),s=e(735940183),i=e(3829348308),l=e(6795568989);function o(a,r){let{state:d,localize:u}=r;if(!a||a.type!==t.Lv.EMOJI)return"";const _=a.skinTone||a.skin_tone,v=a.unicode;let h;return!v&&_?h=`:${a.name}::skin-tone-${_}:`:!_&&!v?h=`:${a.name}:`:v&&(0,l.d)(v)&&(h=`:${(0,i.qJ)(d,v)}:`),u?(0,n.bR)({state:d,locale:(0,s.Yp)(),name:h})||"":h}c(o,"getEmojiElementAsText")},411655882:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(362134992),n=e(9671714094),s=e(8933111773);function i(){return(0,t.A)(Object.entries(n.N).filter(l=>{let[o,a]=l;return a.is_enabled_by_default}).map(l=>{let[o,a]=l;return(0,s.A)(o)}))}c(i,"getAllBroadcastKeywords")},2229186:(x,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(362134992),n=e(9101533895),s=e(6113051341),i=e(1407713935),l=e(2350349607),o=e(9884588328),a=e(641827819),r=e(324756633),d=e(8933111773),u=e(2233365467),_=e(1190344069),v=e(9548888903),h=e(9280052135),f=e(3339229351);function I(p,y){const g=(0,n.OL)(p,y),E=(0,h.l)(p);if(!g)return[];const M=[];if((0,a.W)(p,y)&&M.push((0,d.A)("BKeveryone")),((0,l.V)(g)||(0,i.yz)(g))&&(!(0,s.N)(g)||(0,a.W)(p,y))&&(0,r.S)(p,y)&&(M.push((0,d.A)("BKchannel")),M.push((0,d.A)("BKhere"))),(0,_.hm)(p)&&(0,i.U_)(g))switch((0,u.dM)(g)){case v.hM.Account:M.push((0,d.A)("BKsf:accountteam",(0,o.SB)(p,g),!0));break;case v.hM.Opportunity:M.push((0,d.A)("BKsf:dealteam",(0,o.SB)(p,g),!0));break;default:break}if(E){const T=(0,n.Pu)(p,f.Q$);(g==null?void 0:g.id)===(T==null?void 0:T.id)&&M.push((0,d.A)("BKassistant:einstein",null,!1,!0))}return(0,t.A)(M)}c(I,"getBroadcastKeywordsForUser")},3342113153:(x,A,e)=>{"use strict";e.d(A,{Kx:()=>h,Zo:()=>I,_E:()=>p,cv:()=>f,e3:()=>v,gi:()=>d,zU:()=>u});var t=e(735940183),n=e(9101533895),s=e(1835177371),i=e(8276911661),l=e(4761125736),o=e(5605150493);const a=new t.Ay("channel_modal"),r=new t.Ay("ui_validation"),d={hasNameRequiredWarning:!1,hasMaxLengthWarning:!1,hasSpecialsWarning:!1,hasPunctuationWarning:!1,hasNameTakenWarning:!1,hasUnknownWarning:!1,hasRestriction:!1};function u(){return 80}c(u,"getMaxLength");const _=/[ .,;'`~!@#$%^&*+=)(\\/:"<>?|\u2018\u2019{}[\]]/;function v(y){return y?_.test(y.trim()):!1}c(v,"hasSpecialCharacters");function h(y){return y?y.replace(new RegExp(_,"g"),""):""}c(h,"replaceSpecialCharacters");function f(y){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:80,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const D=!g.trim(),C=(0,o.A)(g)>M,m=v(g),O=/^[-|_]+$/.test(g),P=/[A-Z]/.test(g);let R=!1;return g!==E&&y&&!T&&(R=!!((0,n.Os)(y,g)||(0,i.MV)(y,g)||(0,s.xw)(y,g))),{hasNameRequiredWarning:D,hasMaxLengthWarning:C,hasSpecialsWarning:m,hasPunctuationWarning:O,hasLowercaseWarning:P,hasNameTakenWarning:R}}c(f,"channelNameValidation");function I(y){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{maxChannelNameLength:E,workspaceName:M,experimentFriendlyChannelNamesGroupOn:T}=g;if(y){if(y.hasNameRequiredWarning)return a.t("Give your channel a name to continue. You can always change the name later.");if(y.hasMaxLengthWarning)return r.t("Channel names can\u2019t be longer than {maxLength} characters.",{maxLength:E});if(y.hasSpecialsWarning)return T?a.t("Channel names can\u2019t contain the punctuation you included."):a.t("Channel names can\u2019t contain spaces or punctuation. Use dashes to separate words.");if(y.hasPunctuationWarning)return a.t("Channel names can\u2019t contain spaces or punctuation. Use dashes to separate words.");if(y.hasNameTakenWarning)return M?r.t("That name is already taken by a channel, username, or user group in {workspaceName}.",{workspaceName:M}):a.t("That name is already taken by a channel, username, or user group in this workspace.");if(y.hasRestriction)return a.t("Your organization\u2019s settings have changed and may limit who can create channels. Contact an Admin or channel Owner to add people.");if(y.hasUnknownWarning)return a.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}}c(I,"getErrorStringFromChannelNameErrors");const p=c(y=>(0,l._Z)(y,"friendly_channel_names")==="on","isFriendlyChannelNamesEnabled")},755982243:(x,A,e)=>{"use strict";e.d(A,{w:()=>s});var t=e(3193155968);function n(i){var l;return(l=i.ownerDocument)===null||l===void 0?void 0:l.defaultView}c(n,"getWindowForElement");function s(i){return!t.TQ.includes(i)}c(s,"shouldViewNavigateInContext")},1236965385:(x,A,e)=>{"use strict";e.d(A,{$A:()=>o,ce:()=>l,hO:()=>s});var t=e(3134334389),n=e(1224315998);const s=c(a=>({action:n.UiAction.IMPRESSION,uiPage:window.location.href,...a}),"getAuthImpressionTrackParams"),i=c(a=>({action:n.UiAction.CLICK,uiPage:window.location.href,...a}),"getAuthClickTrackParams"),l=c(a=>({uiPage:window.location.href,...a}),"getAuthTrackParams");function o(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=(0,t.useRef)(null),d=(0,t.useCallback)(v=>h=>{if(r.current={track:h},a){var f;r==null||(f=r.current)===null||f===void 0||f.track(s(v))}},[r,a]),u=(0,t.useCallback)(v=>()=>{var h;r==null||(h=r.current)===null||h===void 0||h.track(i(v))},[r]),_=(0,t.useCallback)(v=>()=>{var h;r==null||(h=r.current)===null||h===void 0||h.track(l(v))},[r]);return{trackClog:r,trackClogAuthRef:d,clogAuthLoginClick:u,clogAuthLoginAction:_}}c(o,"useAuthClogger")},6089229811:(x,A,e)=>{"use strict";e.d(A,{LC:()=>n,av:()=>s,ev:()=>t});const t={NONE:"none",OPTIONAL_ID_ONLY:"optional_id_only",EXTENSIVE:"extensive",OPTIONAL_AND_REGIONAL_IDS:"optional_and_regional_ids"},n={AE_TRN:"ae_trn",AU_ABN:"au_abn",CA_BN:"ca_bn",CA_GST_HST:"ca_gst_hst",CA_QST:"ca_qst",CH_VAT:"ch_vat",CL_TIN:"cl_tin",ES_CIF:"es_cif",EU_VAT:"eu_vat",GE_VAT:"ge_vat",HK_BR:"hk_br",ID_NPWP:"id_npwp",IN_GST:"in_gst",JP_CN:"jp_cn",KR_BRN:"kr_brn",MX_RFC:"mx_rfc",MY_ITN:"my_itn",MY_SST:"my_sst",NO_VAT:"no_vat",NZ_GST:"nz_gst",RU_INN:"ru_inn",SA_VAT:"sa_vat",SG_GST:"sg_gst",SG_UEN:"sg_uen",TH_VAT:"th_vat",TR_TIN:"tr_tin",TW_VAT:"tw_vat",UNKNOWN:"unknown",ZA_VAT:"za_vat",UA_VAT:"ua_vat",KE_PIN:"ke_pin",EG_TIN:"eg_tin"},s=20},3246555800:(x,A,e)=>{"use strict";e.d(A,{FL:()=>a,HC:()=>f,Je:()=>v,KV:()=>I,L$:()=>d,P7:()=>_,RL:()=>u,Y3:()=>l,b6:()=>r,jM:()=>p,zb:()=>o});var t=e(6089229811),n=e(8086952004);function s(y,g,E,M){if(E&&M){var T,D;return y==null||(T=y[g])===null||T===void 0||(D=T.regional_overrides)===null||D===void 0?void 0:D[E]}return y==null?void 0:y[g]}c(s,"getTaxConfig");function i(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=s(y,g,E,M);var D;return(D=T==null?void 0:T.tax_id_form_variant)!==null&&D!==void 0?D:t.ev.NONE}c(i,"getTaxUiFormType");function l(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return i(y,g,E,M)===t.ev.EXTENSIVE}c(l,"shouldShowMultipartTaxUI");function o(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=i(y,g,E,M);return T===t.ev.EXTENSIVE||T===t.ev.OPTIONAL_ID_ONLY||T===t.ev.OPTIONAL_AND_REGIONAL_IDS}c(o,"shouldShowTaxIdInputField");function a(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return i(y,g,E,M)===t.ev.OPTIONAL_AND_REGIONAL_IDS}c(a,"shouldCollectRegionalTaxId");function r(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=i(y,g,E,M);return T===t.ev.OPTIONAL_ID_ONLY||T===t.ev.OPTIONAL_AND_REGIONAL_IDS}c(r,"isTaxIdOptional");function d(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=s(y,g,E,M);var D;return(D=T==null?void 0:T.stripe_tax_id_type)!==null&&D!==void 0?D:null}c(d,"getTaxIdType");function u(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=s(y,g,E,M);return T==null?void 0:T.tax_name}c(u,"getTaxName");function _(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=s(y,g,E,M);var D;const C=(D=T==null?void 0:T.tax_id_max_length)!==null&&D!==void 0?D:0;return Number.isInteger(C)&&C>0?C:t.av}c(_,"getTaxIdMaxLength");function v(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=s(y,g,E,M);var D;const C=(D=T==null?void 0:T.tax_id_examples)!==null&&D!==void 0?D:[];var m;return(m=C[0])!==null&&m!==void 0?m:""}c(v,"getTaxIdExample");function h(y,g,E,M){var T;const D=s(y,g,E,M),C=D==null||(T=D.tax_id_validation_regex)===null||T===void 0?void 0:T.replace(/\//g,"");return C?new RegExp(C,"i"):null}c(h,"getTaxIdValidator");function f(y,g,E,M){let T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const D=h(y,g,E,T);return!D||!M&&r(y,g,E,T)?!0:M&&D?D.test(M):!1}c(f,"isTaxIdValid");function I(y,g,E){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const T=s(y,g,E,M);return!!(T!=null&&T.should_ask_is_vat_registered)}c(I,"shouldAskIsVatRegistered");function p(y,g){return(0,n.A)(y,E=>E.iso_code===g)}c(p,"getCountryByCode")},3044566667:(x,A,e)=>{"use strict";e.d(A,{gy:()=>n,tN:()=>s,zQ:()=>t});const t={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"},n="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",s={EMAIL:new RegExp(`^${n}$`,"i"),CONTAINS_EMAIL:new RegExp(`${n}`,"i"),DOMAIN:/^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i}},2756015265:(x,A,e)=>{"use strict";e.d(A,{A:()=>d,U:()=>r});var t=e(735940183),n=e(5799716058),s=e(8525228540),i=e(9907843289),l=e(4282439381);const o=new t.Ay("emoji");function a(u,_){const v=(0,t.Yp)();return(0,s.WX)({state:u,locale:v,text:_})}c(a,"getLocalizedEmojiName");function r(u,_,v){let{state:h}=v;const f=a(h,u),I=(0,l.x)(h),p=f&&(0,n.Y)(f,_,I);return f?(0,i.DU)()?p:` ${p} `:I?o.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:u,size:_}):`${_} ${u} emojis`}c(r,"convertEmojiGroupNameToPhrase");function d(u,_){let{state:v}=_;const h=a(v,u),f=h&&(0,n.A)(h);return h?(0,i.DU)()?f:` ${f} `:u}c(d,"convertEmojiNameToPhrase")},6818330210:(x,A,e)=>{"use strict";e.d(A,{H:()=>s});var t=e(9113979368),n=e(9936232041);function s(i,l){if(!l||(0,t.A)(l))return{name:i};const o=(0,n.A)(i);if(!o)return{name:i};const{name:a,skinTone:r}=o,d=l[a];if(!d||(0,t.A)(d))return{name:i};const u=d.display_alias,_=u??a,v=r?`:${_}::skin-tone-${r}:`:`:${_}:`,h=d.display_url;return{name:v,url:h}}c(s,"getEmojiDisplayInfoFromMap")},2354051480:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3339229351);let n;const s=c(()=>{if(n)return n;const i=Object.keys(t.dq).map(l=>l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return n=new RegExp(`(^|\\s)(${i.join("|")})(?=$|[\\s|\\?\\.,!])`,"g"),n},"__WEBPACK_DEFAULT_EXPORT__")},7854655276:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3078252698),n=e(735940183);const s=new n.Ay("emoji");function i(l){const o=(0,t.A)(l)?l:l.toString(),a={1:()=>s.t("No skin tone"),2:()=>s.t("light skin tone"),3:()=>s.t("medium-light skin tone"),4:()=>s.t("medium skin tone"),5:()=>s.t("medium-dark skin tone"),6:()=>s.t("dark skin tone")},r={"2-3":()=>s.t("left light skin tone and right medium-light skin tone"),"2-4":()=>s.t("left light skin tone and right medium skin tone"),"2-5":()=>s.t("left light skin tone and right medium-dark skin tone"),"2-6":()=>s.t("left light skin tone and right dark skin tone"),"3-2":()=>s.t("left medium-light skin tone and right light skin tone"),"3-4":()=>s.t("left medium-light skin tone and right medium skin tone"),"3-5":()=>s.t("left medium-light skin tone and right medium-dark skin tone"),"3-6":()=>s.t("left medium-light skin tone and right dark skin tone"),"4-2":()=>s.t("left medium skin tone and right light skin tone"),"4-3":()=>s.t("left medium skin tone and right medium-light skin tone"),"4-5":()=>s.t("left medium skin tone and right medium-dark skin tone"),"4-6":()=>s.t("left medium skin tone and right dark skin tone"),"5-2":()=>s.t("left medium-dark skin tone and right light skin tone"),"5-3":()=>s.t("left medium-dark skin tone and right medium-light skin tone"),"5-4":()=>s.t("left medium-dark skin tone and right medium skin tone"),"5-6":()=>s.t("left medium-dark skin tone and right dark skin tone"),"6-2":()=>s.t("left dark skin tone and right light skin tone"),"6-3":()=>s.t("left dark skin tone and right medium-light skin tone"),"6-4":()=>s.t("left dark skin tone and right medium skin tone"),"6-5":()=>s.t("left dark skin tone and right medium-dark skin tone")},d=r[o]?r[o]():null;return d||a[o]&&a[o]()}c(i,"__WEBPACK_DEFAULT_EXPORT__")},5799716058:(x,A,e)=>{"use strict";e.d(A,{A:()=>a,Y:()=>o});var t=e(735940183),n=e(9936232041),s=e(7854655276);const i=/_|-/g,l=new t.Ay("emoji"),o=c(function(r,d){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!r||!d)return null;const{name:_,skinTone:v}=(0,n.A)(r)||{};if(!_)return u?l.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:r,size:d}):`${d} ${r} emojis`;const h=_.replace(i," "),f=u?l.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:h,size:d}):`${d} ${h} emojis`;if(!v)return f;const I=(0,s.A)(v);return I===""?f:u?l.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}} with {skinToneDescription}",{emojiName:h,size:d,skinToneDescription:I}):`${d} ${h} emojis with ${I}`},"makePhraseForEmojiGroup");function a(r){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)return r;const{name:u,skinTone:_}=(0,n.A)(r)||{};if(!u)return r;const v=u.replace(i," "),h=l.t("{emojiPhrase} emoji",{emojiPhrase:v});if(!_)return h===""?v:h;const f=(0,s.A)(_);return f===""?h===""?v:h:d?l.t("React with {emojiPhrase} emoji {skinToneDescription}",{emojiPhrase:v,skinToneDescription:f}):l.t("{emojiPhrase} emoji with {skinToneDescription}",{emojiPhrase:v,skinToneDescription:f})}c(a,"__WEBPACK_DEFAULT_EXPORT__")},3259512346:(x,A,e)=>{"use strict";e.d(A,{s:()=>s});var t=e(6089972488),n=e(571104883);function s(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.process&&window.process.versions&&window.process.versions.electron,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.navigator.userAgent;if(!(0,n.y3)(o)||!l)return!1;const a=(0,t.P)(i),r=(0,t.P)(l);return(0,t.Z)(r,a)>=0}c(s,"isElectronAndAtLeastVersion")},1033764764:(x,A,e)=>{"use strict";e.d(A,{UK:()=>r,Z$:()=>i,hZ:()=>o});const t=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],s=c(function(u,_,v){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(u===0)return 0;if(_===v)return parseFloat(u.toFixed(h));const I=f?1024:1e3,p=f?t:n,y=p.findIndex(E=>E.toLowerCase()===_.toLowerCase()),g=p.findIndex(E=>E.toLowerCase()===v.toLowerCase());if(y===-1)throw new Error(`Unknown currentType '${_}' passed to convertToSize`);if(g===-1)throw new Error(`Unknown desiredType '${v}' passed to convertToSize`);return y<g?parseFloat((u/I**(g-y)).toFixed(h)):parseFloat((u*I**(y-g)).toFixed(h))},"convertToSize"),i=c(function(u){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"B",v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(u===0)return{size:0,type:"B"};const f=h?1024:1e3,I=h?t:n;let p=Math.log(u)/Math.log(f);p<1&&(p=-Math.floor(Math.log(Math.abs(p))/Math.log(10)+1));const y=I.findIndex(E=>E.toLowerCase()===_.toLowerCase()),g=Math.max(Math.min(y+Math.floor(p),I.length-1),0);if(y===-1)throw new Error(`Unknown currentType '${_}' passed to convertToSize`);return{size:s(u,_,I[g],v,h),type:I[g]}},"convertToOptimumSize"),l=c(function(u){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(u,"B","KB",_,!1)},"convertBytesToKilobytes"),o=c(function(u){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(u,"B","MB",_,!1)},"convertBytesToMegabytes"),a=c(function(u){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(u,"B","GB",_,!1)},"convertBytesToGigabytes"),r=c(function(u){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(u,"KB","MB",_,!1)},"convertKilobytesToMegabytes"),d=c(function(u){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(u,"KB","GB",_,!1)},"convertKilobytesToGigabytes")},6333950786:(x,A,e)=>{"use strict";e.d(A,{A:()=>b});var t=e(6249041335),n=e(5342516244),s=e(1842363787),i=e(8847766420),l=e(6533394955),o=e(2047021170),a=e(6866036454),r=e(1317368584),d=e(3829348308),u=e(735940183),_=e(9846149684),v=e(8207536819),h=e(4862221402),f=e(8040098042),I=e(2414816894),p=e(1707481146),y=e(6106767915);function g(S,G,H){const U=[];return{text:S.replace(_.Y,(Y,Z,ee)=>{let j;if((0,I.A)(Z)?j=`<!${(0,y.A)(Z)}>`:(0,p.A)(Z)?j=G?(0,v.A)(ee):ee:(0,h.A)(Z)?j=`<!subteam^${Z}|${ee}>`:(0,f.A)(Z)?j=H?`<#${Z}|${ee.substr(1)}>`:void 0:j=`<@${Z}>`,!j)return Y;const ne=`mention-${U.length+1}-${Date.now()}`;return U.push({mention:j,placeholder:ne}),ne}),mentions:U}}c(g,"replaceFormatMentions");const E=/(^|\n)>(?![\W_](?:<|>|[|/\\[\]{}()Dpb](?=\s|$)))(([^\n]*)(\n>[^\n]*)*)/g;function M(S){const G=[];let H=0;return{text:S.replace(E,F=>{H+=1;const Y=`quoted-text-placeholder-${Date.now()}-${H}`;return G.push({match:F,placeholder:Y}),Y}),quotedSections:G}}c(M,"replaceQuotedText");var T=e(2354051480),D=e(3339229351);const C=/[-[\]{}()*+?.,\\^$|#\s]/g,m=/\n?(6\)|7\))/,O=c(S=>{let G=0;const H=[];let U=S.replace((0,T.A)(),(F,Y,Z,ee)=>{const j=G;G=ee+F.length;const ge=Z.indexOf("(")!==-1,ne=Z.indexOf(")")!==-1;if((ge||ne)&&H.indexOf(Z)===-1&&H.push(Z),ne&&!ge){const ue=S.substring(j,ee);if(ue.indexOf("(")!==-1&&ue.indexOf(")")===-1)return F}if(F===`
8)`){const ue=S.substring(0,ee);if(m.test(ue))return F}return D.dq[Z]?`${Y}:${D.dq[Z]}:`:F});if(H.length){const F=H.map(Z=>Z.replace(C,"\\$&")),Y=new RegExp(`(\\(.+)(${F.join("|")})(.+\\))`,"g");U=U.replace(Y,(Z,ee,j,ge)=>D.dq[j]?`${ee}:${D.dq[j]}:${ge}`:Z)}return U},"replace_emoticons_with_colons");var P=e(8525228540),R=e(9421999304),L=e(4797500022),V=e(9599231336);const B=/(^|\s|\{|\[|\(|&gt;|&lt;|\*|_|\/|"|\u201C|\u2018|')#([^~`!@#$%^&*()+=[\]{}\\|;:'"\u201D\u2019,.<>/?\s]+)/g,K=/(^|\S)( +)(\n|$)/gm;function b(S,G){let{isInternalMessage:H}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!S||!G)return"";const U=!H,F=(0,r.A)(S),Y=(0,o.ty)(S,"convert_emoticons"),Z=(0,a.A)(S),ee=(0,V.P)(S),j=!0;let ge=G,ne=[];ge=(0,n.A)(ge),ge=(0,s.kW)(ne,ge,{replace_pre:!0,replace_code:!0});const ue=g(ge,U,j);if(ge=ue.text,ge=ge.replace(K,"$1$3"),Y&&!ee){const be=M(ge);ge=be.text,ge=O(ge),be.quotedSections.forEach(xe=>{ge=ge.replace(xe.placeholder,()=>xe.match)})}if(U&&(ge=(0,s.wx)(ge,"CLEAN",{jumbomoji:F,allow_intra_word_formatting:!0})),ue.mentions.forEach(be=>{ge=ge.replace(be.placeholder,()=>be.mention)}),!u.EZ){const be=(0,i.ZT)(S);ge=(0,l.dispatchForTeamId)(be,(0,P.Z_)({text:ge,locale:(0,R.JK)()}))}const he=(0,d.CK)(S);return ne=ne.map(be=>{const xe={...be},Le=(0,_.A)(xe.str,{highlightWords:Z,shouldRenderEmojiAsText:ee,emojiNames:he,locale:(0,u.Yp)(),useChannelTagging:j});return xe.str=(0,L.A)(Le),U&&(xe.str=(0,s.wx)(xe.str,"CLEAN",{jumbomoji:F,allow_intra_word_formatting:!0})),xe}),ge=(0,s.Ki)(ne,ge),(0,t.A)(ge)}c(b,"clean_message_text_with_state")},972463850:(x,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3297051565),n=e.n(t),s=e(8509961938),i=e(3829348308);const l=c(function(a){let{messageText:r,teamId:d}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r||!d)return"";const u=(0,s.A)();return r.replace(u,_=>{const v=(0,i.Zc)(a,{text:_,teamId:d});return v||_})},"replaceTextEmojiWithNative"),o=l;l.propTypes={messageText:n().string,teamId:n().string}},5342516244:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});const t=c(n=>n?n.replace(/\u00A0/g," ").replace(/\u000D/g,`
`).replace(/\u000A/g,`
`):"","__WEBPACK_DEFAULT_EXPORT__")},3802883493:(x,A,e)=>{"use strict";e.d(A,{TU:()=>s});const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=10;function s(u,_){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(u!==null&&d(u,v,h),_!==null&&d(_,v,h),u!==null&&_!==null&&u>=_)throw new Error(`${u} >= ${_}`);if(u===null){if(_===null){const T=5*10**(h-1);return a(T,h)}const M=o(_,h);return M.toString()<_&&_.slice(h+1)!==""?a(M,h):a(M-1,h)}if(_===null){const M=o(u,h);return a(M+1,h)}const f=o(u,h),I=o(_,h),p=u.slice(h+1),y=_.slice(h+1);if(f===I){const M=l(p,y,v);return`${a(f,h)}.${M}`}const g=f+1;if(g<I)return a(g,h);const E=l(p,null,v);return`${a(f,h)}.${E}`}c(s,"generateKeyBetween");function i(u,_,v){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:n;if(v===0)return[];if(v===1)return[s(u,_,h,f)];if(_===null){let y=s(u,_,h,f);const g=[y];for(let E=0;E<v-1;E++)y=s(y,_,h,f),g.push(y);return g}if(u===null){let y=s(u,_,h,f);const g=[y];for(let E=0;E<v-1;E++)y=s(u,y,h,f),g.push(y);return g.reverse(),g}const I=Math.floor(v/2),p=s(u,_,h,f);return[...i(u,p,I,h,f),p,...i(p,_,v-I-1,h,f)]}c(i,"generateNKeysBetween");function l(u,_,v){const h=v[0];if(_!==null&&u>=_)throw new Error(`${u} >= ${_}`);if(u.slice(-1)===h||_&&_.slice(-1)===h)throw new Error("trailing zero");if(_){let p=0;for(;(u[p]||h)===_[p];)p+=1;if(p>0)return _.slice(0,p)+l(u.slice(p),_.slice(p),v)}const f=u?v.indexOf(u[0]):0,I=_!==null?v.indexOf(_[0]):v.length;if(I-f>1){const p=Math.round(.5*(f+I));return v[p]}return _&&_.length>1?_.slice(0,1):v[f]+l(u.slice(1),null,v)}c(l,"midpoint");function o(u,_){const v=u.slice(0,_);return Number(v)}c(o,"getIntegerPart");function a(u,_){if(u>=10**_)throw new Error(`Integer overflow at ${u} for fixed length ${_}`);if(u<0)throw new Error(`Integer underflow at ${u} for fixed length ${_}`);return u.toString().padStart(_,"0")}c(a,"formatInteger");function r(u,_){const v=u.length;if(v<_)throw new Error("Invalid integer portion, length too short");if(v===_){const h=u.indexOf(".");if(h>=0)throw new Error(`Unexpected . at position ${h} in string of exact length ${_}`);const f=Number(u);if(isNaN(f))throw new Error(`Invalid integer portion - not a valid integer ${u}`)}else if(u[_]!==".")throw new Error(`Expected . after int_fixed length ${_} and got ${u[_]}`)}c(r,"validateIntegerLength");function d(u,_,v){if(r(u,v),v!==u.length&&u.slice(v).endsWith(_[0]))throw new Error(`Fractional portion must not end with ${_[0]}`)}c(d,"validateOrderKey")},6900724603:(x,A,e)=>{"use strict";e.d(A,{_i:()=>i});function t(o,a,r,d){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const _=[d.x-a.x,d.y-a.y],v=[r.x-a.x,r.y-a.y],h=[o.x-a.x,o.y-a.y],f=_[0]*_[0]+_[1]*_[1],I=_[0]*v[0]+_[1]*v[1],p=_[0]*h[0]+_[1]*h[1],y=v[0]*v[0]+v[1]*v[1],g=v[0]*h[0]+v[1]*h[1],E=1/(f*y-I*I),M=(y*p-I*g)*E,T=(f*g-I*p)*E;return M>=-u&&T>=-u&&M+T<1+u}c(t,"isPointInTriangle");function n(o,a,r){const d=(r.x-a.x)**2+(r.y-a.y)**2,u=((o.x-a.x)*(r.x-a.x)+(o.y-a.y)*(r.y-a.y))/d;return u<0?(o.x-a.x)**2+(o.y-a.y)**2:u<=1?(a.x-o.x)**2+(a.y-o.y)**2-u**2*d:(o.x-r.x)**2+(o.y-r.y)**2}c(n,"distanceSquarePointToSegment");function s(o,a,r,d){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const _=Math.min(a.x,Math.min(r.x,d.x))-u,v=Math.max(a.x,Math.max(r.x,d.x))+u,h=Math.min(a.y,Math.min(r.y,d.y))-u,f=Math.max(a.y,Math.max(r.y,d.y))+u;return o.x>_&&o.x<v&&o.y>h&&o.y<f}c(s,"pointInTriangleBoundingBox");function i(o,a,r,d){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;if(!s(o,a,r,d,u))return!1;const _=u**2;return t(o,a,r,d,0)||n(o,a,r)<=_||n(o,r,d)<=_||n(o,d,a)<=_}c(i,"accurateIsPointInTriangle");const l={accurateIsPointInTriangle:i,isPointInTriangle:t}},8556787853:(x,A,e)=>{"use strict";e.d(A,{Ac:()=>h,Ay:()=>_,lF:()=>v});var t=e(9706240641),n=e.n(t),s=e(7174777686),i=e(2047021170),l=e(2364576462),o=e(3339229351),a=e(6839188756),r=e(3677514771),d=e(1631977342);const u=c((f,I,p)=>{const y=p?f*2:f,g=p?I*2:I,M=y>o.QI||g>o.Jo?Math.min(o.QI/y,o.Jo/g):1,T=Math.floor(y*M),D=Math.floor(g*M);return{width:T,height:D}},"getConstrainedMediaDimensions");function _(f){let{url:I,width:p,height:y,rotate:g,renderSvg:E,stopAnimations:M,sizeForRetina:T,convertIco:D,isEmoji:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!I)return null;const m=(0,a.Uz)((0,r.H7)(f));if(!m||I.indexOf(m)===0||I.indexOf("/img/")===0)return I;if(I.indexOf("https://")===0&&!C){const B=(0,l.yz)(I,!0),K=(0,d.QL)();if((0,s.A)(K,B)){if(M&&B==="slack-imgs.com"){const b=new URL(I),S=b.searchParams.has("o1")?`${b.searchParams.get("o1")}.gu`:"gu";return b.searchParams.set("o1",S),b.href}return I}}const O=new URL(m);O.searchParams.set("c",o.lW);const{width:P,height:R}=p&&y?u(p,y,T):{},L=[];return P&&R&&(L.push(`wi${P}`),L.push(`he${R}`),L.push("si")),g&&L.push("ro"),E&&L.push("sv2"),(M||!(0,i.ty)(f,"a11y_animations"))&&L.push("gu"),D&&L.push("ip"),L.length&&O.searchParams.set("o1",L.join(".")),O.searchParams.set("url",I),O.href}c(_,"getImgProxyUrl");const v=function(){var f=(0,t.coroutine)(function*(I){const p=new URL(I);try{return!!(yield fetch(`https://${p.hostname}/?url=${p.searchParams.get("url")}`,{method:"HEAD",mode:"cors"})).headers.get("x-slack-animated")}catch(y){if(y)return!1}return!1});return c(function(p){return f.apply(this,arguments)},"isImageAnimated")}(),h=c(f=>f.replace(".gu",""),"getAnimatedImgUrl")},6415587347:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>rs});var t=e(4063699741),n=e.n(t),s=e(7129884748),i=e.n(s),l=e(4840951141),o=e.n(l),a=e(9241168512),r=e.n(a),d=e(9602720019),u=e.n(d),_=e(9777215928),v=e.n(_),h=e(9833689275),f=e.n(h),I=e(2981982679),p=e.n(I),y=e(9267813754),g=e.n(y),E=e(3963460214),M=e.n(E),T=e(9948433110),D=e.n(T),C=e(2295488157),m=e.n(C),O=e(5908867676),P=e.n(O),R=e(4948097913),L=e.n(R),V=e(5156772208),B=e.n(V),K=e(3333214639),b=e.n(K),S=e(9825918216),G=e.n(S),H=e(1302153452),U=e.n(H),F=e(474239361),Y=e.n(F),Z=e(350135845),ee=e.n(Z),j=e(7428983508),ge=e.n(j),ne=e(1001408479),ue=e.n(ne),he=e(7331486018),be=e.n(he),xe=e(669259003),Le=e.n(xe),fe=e(1889110914),se=e.n(fe),Q=e(7183565897),k=e.n(Q),N=e(4814900690),$=e.n(N),W=e(3710970638),q=e.n(W),re=e(1023719767),le=e.n(re),Ae=e(4165874747),Te=e.n(Ae),Ne=e(3431559584),pe=e.n(Ne),Ee=e(2261459203),oe=e.n(Ee),ce=e(7272988726),ke=e.n(ce),Ce=e(2200759559),Me=e.n(Ce),Se=e(451984622),Ue=e.n(Se),He=e(77360885),Ye=e.n(He),J=e(7523979550),ae=e.n(J),Ve=e(4245237474),Be=e.n(Ve),Ke=e(1957386787),Re=e.n(Ke),Fe=e(8390767423),Ie=e.n(Fe),ze=e(983107878),qe=e.n(ze),st=e(3224273568),ut=e.n(st),tt=e(2979422297),_t=e.n(tt),yt=e(4923972147),Kt=e.n(yt),Qt=e(1060768686),Jt=e.n(Qt),Gt=e(5098468056),wt=e.n(Gt),Bt=e(6906793909),Wt=e.n(Bt),Tn=e(3708998647),Ot=e.n(Tn),Ft=e(2256285620),rn=e.n(Ft),ln=e(2316786074),_n=e.n(ln),en=e(3783723764),Xt=e(8840779375),vn=e(2604971659),je=e(4103274853),Rt=e(2208015175),hn=e(3339229351),Nn=e(397660785),rt=e(6363331542);function vt(as){return(0,en.A)((0,Xt.A)((0,vn.A)(as),jn=>parseInt(jn,10)),null,"desc")}c(vt,"makeOrderedIconSizes");function Mt(as){return(0,je.A)(as,jn=>vt(jn))}c(Mt,"makeOrderedNamedIconSizes");const Ct={24:_n(),32:Ot(),36:wt(),72:Kt(),192:ut()},Yt={24:rn(),32:Wt(),36:Jt(),72:_t(),192:qe()},In={fancy:{20:Ie(),24:Re(),32:Be(),36:ae(),48:Ye(),72:Ue(),192:Me(),360:ke(),512:oe(),1024:pe()},frowny:{20:Te(),24:le(),32:q(),36:$(),48:k(),72:se(),192:Le(),360:be(),512:ue(),1024:ge()},neutral:{20:ee(),24:Y(),32:U(),36:G(),48:b(),72:B(),192:L(),360:P(),512:m(),1024:D()},sad_surprise:{20:M(),24:g(),32:p(),36:f(),48:v(),72:u(),192:r(),360:o(),512:i(),1024:n()}},Un=24,En=vt(Yt),Bn=Mt(In),Mn="image_";function Vn(as){const jn=[];return(0,Rt.A)(as,(es,Qn)=>{if(Qn.indexOf(Mn)!==0)return;const ss=Qn.slice(Mn.length);jn.unshift(parseInt(ss,10))}),jn}c(Vn,"getSizeOptionsFromProfile");function rs(as){let{size:jn,teamOrEnterpriseId:es,memberId:Qn,avatarHash:ss,emoji:ft,isBot:pt=!1,botImages:Ht=!1,slackbotFeels:nn=null,isUserHidden:kn=!1}=as,xt,Dn,Fn=!1;if(!jn||!pt&&!kn&&(!es||!Qn||!ss)&&!ft)return{};if(ft)return{emoji:ft,isDefault:!1};if(kn){const wn=(0,rt.A)(jn,En),It=(0,rt.A)(jn*2,En);xt=Ct[wn||Un],Dn=Ct[It||Un],Fn=!0}else if(Qn===hn.Q$&&nn&&In[nn]){const wn=(0,rt.A)(jn,Bn[nn]),It=(0,rt.A)(jn*2,Bn[nn]);xt=In[nn][wn||Un],Dn=In[nn][It||Un]}else if(!pt||es&&Qn&&ss){const wn=(0,rt.A)(jn),It=(0,rt.A)(jn*2),Je=(0,Nn.Z)(es);xt=`${Je}${es}-${Qn}-${ss}-${wn}`,Dn=`${Je}${es}-${Qn}-${ss}-${It}`}else if(Ht){const wn=Vn(Ht),It=(0,rt.A)(jn,wn),Je=(0,rt.A)(jn*2,wn);xt=Ht[Mn+It],Dn=Ht[Mn+Je]}if(pt&&!xt&&!Dn&&!ft){const wn=(0,rt.A)(jn,En),It=(0,rt.A)(jn*2,En);xt=Yt[wn||Un],Dn=Yt[It||Un],Fn=!0}return{imageUrl:xt,imageUrl2x:Dn,emoji:ft,isDefault:Fn}}c(rs,"getMemberProfileImage")},92812954:(x,A,e)=>{"use strict";e.d(A,{d:()=>i});var t=e(8276911661),n=e(3792998666),s=e(5096647761);function i(l,o){if(!o)return"member";const a=(0,t.nv)(l,o);let r="member";return(0,s.g)(a)?r="external":(0,n.Ez)(a)&&!(0,n.Yd)(a)?r="ra":(0,n.Yd)(a)&&(r="ura"),r}c(i,"getMemberType")},5124217244:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(5950652755),n=e(6061527706);function s(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const o=c(a=>{!Array.isArray(a)||!a.length||requestAnimationFrame(()=>i(a))},"observer");return new n.A((0,t.A)(o,l))}c(s,"getResizeObserver")},3695531806:(x,A,e)=>{"use strict";e.d(A,{z:()=>n});var t=e(6795568989);const n=c(s=>{let{codePointLikeString:i}=s;if(!(0,t.d)(i))return;const l=16;return i.split("-").map(o=>String.fromCodePoint(parseInt(o,l))).join("")},"getUnicodeFromCodePointLikeString")},5770715593:(x,A,e)=>{"use strict";e.d(A,{C9:()=>a,Gl:()=>l,VQ:()=>o,XU:()=>n,dL:()=>s,rU:()=>i,x_:()=>r});var t=e(4761125736);const n=c(d=>{var u;return(u=(0,t._Z)(d,"help_shareables_tm")==="on")!==null&&u!==void 0?u:!1},"isHelpShareablesTmExperimentOn"),s=c(d=>{var u;return(u=(0,t._Z)(d,"help_articles_in_search")==="treatment")!==null&&u!==void 0?u:!1},"isHelpArticlesInSearchExperimentTreatment"),i=c(d=>{var u;return(u=(0,t._Z)(d,"help_smarticles")==="on")!==null&&u!==void 0?u:!1},"isHelpSmarticlesExperimentOn"),l=c(d=>{var u;return(u=(0,t._Z)(d,"help_navigation")==="on")!==null&&u!==void 0?u:!1},"isHelpNavigationExperimentOn"),o=c(d=>{var u;return(u=(0,t._Z)(d,"help_tour")==="treatment")!==null&&u!==void 0?u:!1},"isHelpTourExperimentTreatment"),a=c(d=>{var u;return(u=(0,t._Z)(d,"help_tips")==="on")!==null&&u!==void 0?u:!1},"isHelpTipsExperimentOn"),r=c(d=>{var u;return(u=(0,t._Z)(d,"help_slider_a11y_translations")==="on")!==null&&u!==void 0?u:!1},"isHelpSliderA11yTranslationsExperimentOn")},1251564078:(x,A,e)=>{"use strict";e.d(A,{v:()=>n});var t=e(9907843289);function n(s){const i=(0,t.Yp)().toLowerCase();return i==="en-us"?s:`/intl/${i}${s}`}c(n,"getLocalizedPath")},4240442510:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3193155968),n=e(735940183);const s=new n.Ay("view");function i(l){let{tab:o,experimentUnifiedFilesExplorerGroupOn:a,experimentAskSlackViewGroupOn:r}=l,d;switch(o){case t.k6.Home:d=s.t("Home");break;case t.k6.DMs:d=s.t("DMs");break;case t.k6.Activity:d=s.t("Activity");break;case t.k6.Later:d=s.t("Later");break;case t.k6.SalesHome:d=s.t("Sales");break;case t.k6.Search:d=s.t("Search");break;case t.k6.Canvases:d=s.t("Canvases",{fallbackHash:"e2d397a06197e996f48faa9c0abfd3a2a80d15de",fallbackHashNs:"search"});break;case t.k6.Files:d=s.t("Files",{ns:"search"});break;case t.k6.UnifiedFiles:d=a?s.t("Docs"):"Docs";break;case t.k6.Channels:d=s.t("Channels",{ns:"search"});break;case t.k6.People:d=s.t("People",{ns:"search"});break;case t.k6.Platform:d=s.t("Automations",{fallbackHash:"4186e4384191cd367f88423e6488c26e96a3807d",fallbackHashNs:"search"});break;case t.k6.ExternalConnections:d=s.t("External");break;case t.k6.Huddles:d=s.t("Huddles",{fallbackHash:"cfed893a3dc774c76cbd9efb20d641aad32eff33x`",fallbackHashNs:"search"});break;case t.k6.Assistant:d=r?s.t("Ask Slack"):"Ask Slack";break;case t.k6.Browse:d=s.t("More");break;case t.k6.Lists:d=s.t("Lists");break;case t.k6.Todos:d="To-dos";break;case t.k6.Solutions:d=s.t("Templates");break;case t.k6.Agents:d="Agentforce";break;case t.k6.SlackKitPlayground:d="Slack Kit Playground";break;case t.k6.BBM:d="";break;default:d="";break}return d}c(i,"getTabLabel")},6910192640:(x,A,e)=>{"use strict";e.d(A,{A:()=>C,o:()=>T});var t=e(8956161330),n=e(2384831516),s=e(3193155968),i=e(1552255081),l=e(6642124196),o=e(920478515),a=e(1340402138),r=e(6470070112),d=e(2584999337),u=e(7244076749),_=e(4626613428),v=e(5332875232),h=e(5624319675),f=e(853570700),I=e(1439563189),p=e(537208959),y=e(5868036555),g=e(6839188756),E=e(3677514771);const M={[s.k6.Home]:m=>!(0,a.R)(m),[s.k6.Search]:m=>(0,f.fn)(m),[s.k6.Activity]:m=>(0,_.Ty)(m)&&!(0,p.Dj)(m),[s.k6.DMs]:m=>(0,_.Ty)(m),[s.k6.UnifiedFiles]:m=>(0,d.a)(m)&&(0,_.Ty)(m),[s.k6.SlackKitPlayground]:m=>(0,u.b)()&&(0,_.Ty)(m),[s.k6.Solutions]:m=>(0,I.g)(m),[s.k6.Agents]:m=>(0,h.mr)(m)&&(0,_.Ty)(m),[s.k6.Later]:m=>(0,o.Bp)(m),[s.k6.Assistant]:m=>(0,y.We)(m)&&(0,_.Ty)(m),[s.k6.Canvases]:m=>(0,i.F)(m)&&!(0,a.R)(m)&&!(0,d.a)(m),[s.k6.Files]:m=>!(0,a.R)(m)&&(0,_.Ty)(m),[s.k6.Channels]:m=>!(0,a.R)(m)&&(0,_.Ty)(m),[s.k6.Platform]:()=>!0,[s.k6.People]:m=>!(0,a.R)(m)&&(0,_.Ty)(m),[s.k6.Huddles]:m=>(0,r.Wd)(m)&&!(0,v.LS)(m)&&!(0,a.R)(m),[s.k6.SalesHome]:m=>(0,t.hx)(m),[s.k6.Lists]:m=>((0,g.tc)((0,E.H7)(m))&&(0,l.isListsEnableFreemiumAccessEnabled)(m)||(0,l.teamHasFullListsAccess)(m))&&!(0,a.R)(m)&&!(0,d.a)(m),[s.k6.Todos]:m=>(0,l.isTodosEnabled)(m),[s.k6.ExternalConnections]:()=>!0},T=c(m=>(0,n.Mz)(O=>M[m](O)),"makeSelectVisibleTab"),C=c((m,O)=>T(O)(m),"getTabVisibility")},505908973:(x,A,e)=>{"use strict";e.d(A,{A:()=>b});var t=e(6644049054),n=e(352142497),s=e(5657872960),i=e(6642124196),l=e(3559837422),o=e(6839188756),a=e(3677514771),r=e(8956161330),d=e(1552255081),u=e(7274827479),_=e(4761125736),v=e(418103123),h=e(1190344069),f=e(9889493721),I=e(7069714209),p=e(2584999337),y=e(9280052135),g=e(7244076749),E=e(5332875232),M=e(2052624953),T=e(9132066222),D=e(8646192222),C=e(3875705815),m=e(6695353875),O=e(1439563189),P=e(3937186022),R=e(8005333273),L=e(5624319675),V=e(5868036555);const B={[n.D.KeyboardShortcuts]:()=>!0,[n.D.WhatsNew]:()=>!0,[n.D.RecentCanvases]:()=>!1,[n.D.CanvasesSharedWithYou]:S=>(0,_._Z)(S,"canvas_collection_prototype")==="on"&&(0,d.F)(S),[n.D.CanvasesCreatedByYou]:S=>(0,_._Z)(S,"canvas_collection_prototype")==="on"&&(0,d.F)(S),[n.D.BrowseCanvases]:S=>(0,d.F)(S),[n.D.FileFolder]:S=>(0,_._Z)(S,"file_folders_hardcoded")==="on"&&(0,d.F)(S),[n.D.RecentFiles]:()=>!0,[n.D.FilesCreatedByYou]:()=>!0,[n.D.FilesSharedWithYou]:()=>!0,[n.D.BrowseExternalWorkspace]:I.U,[n.D.BrowseChannels]:()=>!0,[n.D.BrowsePeople]:()=>!0,[n.D.ExternalOrganizations]:()=>!0,[n.D.ExternalOrganization]:()=>!0,[n.D.ExternalPeople]:()=>!1,[n.D.SlackConnectChannels]:()=>!1,[n.D.SlackConnectInvitations]:()=>!0,[n.D.BrowseUserGroups]:S=>!(0,l.sV)(S)&&(0,o.qR)((0,a.H7)(S)),[n.D.SlackConnect]:S=>(0,t.A)(S),[n.D.Channel]:()=>!0,[n.D.AppSpace]:()=>!0,[n.D.RecentPlatform]:S=>(0,f.MA)(S),[n.D.BrowseWorkflowsManagedByYou]:S=>(0,f.EH)(S),[n.D.BrowseYourWorkflowTemplates]:S=>(0,f.M7)(S),[n.D.BrowseShortcuts]:S=>(0,f.S0)(S),[n.D.BrowseWorkflowTemplates]:S=>(0,f.fh)(S),[n.D.BrowseApps]:S=>(0,f.pr)(S),[n.D.OrgDirectory]:()=>!0,[n.D.Page]:()=>!0,[n.D.Threads]:()=>!0,[n.D.Thread]:()=>!0,[n.D.Profile]:()=>!0,[n.D.FileDetails]:()=>!0,[n.D.Help]:()=>!0,[n.D.UserGroup]:()=>!0,[n.D.Feedback]:()=>!0,[n.D.List]:S=>(0,i.isListsEnabled)(S),[n.D.ListRecord]:S=>(0,i.isListsEnabled)(S),[n.D.ListRecordDetails]:S=>(0,i.isListsEnabled)(S),[n.D.ListRecordThread]:S=>(0,i.isListsEnabled)(S),[n.D.ListRecordHistory]:S=>(0,i.isListsEnabled)(S),[n.D.ListHistory]:S=>(0,i.isListsHistoryEnabled)(S),[n.D.DeletedLists]:S=>(0,i.isListsEnabled)(S),[n.D.Tasks]:S=>(0,i.isTodosEnabled)(S),[n.D.AssignedTasks]:S=>(0,i.isTodosEnabled)(S),[n.D.Reminders]:S=>(0,i.isTodosEnabled)(S),[n.D.Saved]:S=>(0,i.isTodosEnabled)(S),[n.D.ComposeList]:()=>!0,[n.D.Compose]:()=>!0,[n.D.QuipCommentThread]:()=>!0,[n.D.QuipCommentStream]:()=>!0,[n.D.QuipActivityHistory]:()=>!0,[n.D.QuipAutomationsOverview]:()=>!0,[n.D.Quip]:()=>!0,[n.D.Canvas]:()=>!0,[n.D.ChannelCanvas]:()=>!0,[n.D.CanvasBrowser]:S=>(0,d.F)(S),[n.D.DeletedCanvases]:S=>(0,d.F)(S),[n.D.PaidBenefits]:()=>!0,[n.D.Setup]:()=>!0,[n.D.SearchEmpty]:()=>!0,[n.D.AboutWorkspace]:()=>!1,[n.D.Unknown]:()=>!0,[n.D.MorePeopleSidebar]:()=>!0,[n.D.MoreCanvasesSidebar]:()=>!0,[n.D.MoreSolutionsSidebar]:S=>(0,O.g)(S),[n.D.AppPopout]:()=>!0,[n.D.ChannelList]:()=>!0,[n.D.BrowseFiles]:()=>!0,[n.D.BrowseUnifiedFiles]:S=>(0,p.a)(S),[n.D.DeletedUnifiedFiles]:S=>(0,p.a)(S),[n.D.SlackKitPlayground]:()=>(0,g.b)(),[n.D.Solutions]:S=>(0,O.g)(S),[n.D.Agents]:S=>(0,L.mr)(S),[n.D.PendingAgents]:S=>(0,L.mr)(S),[n.D.AgentConversation]:S=>(0,L.mr)(S),[n.D.MoreAgentsSidebar]:S=>(0,L.mr)(S),[n.D.SolutionsFiltered]:S=>(0,O.g)(S),[n.D.BrowseYourSolutions]:S=>(0,R.n)(S),[n.D.BrowseYourCompanySolutions]:S=>(0,R.n)(S),[n.D.BrowseLists]:S=>(0,i.teamHasFullListsAccess)(S),[n.D.DmsList]:()=>!0,[n.D.BrowseList]:()=>!0,[n.D.ActivityList]:()=>!0,[n.D.LaterList]:S=>(0,s.c)(S),[n.D.Search]:()=>!0,[n.D.MoreFilesSidebar]:()=>!0,[n.D.MoreListsSidebar]:()=>!0,[n.D.MoreTodosSidebar]:()=>!0,[n.D.UnifiedFilesSidebar]:S=>(0,p.a)(S),[n.D.MoreChannelsSidebar]:()=>!1,[n.D.Inbox]:()=>!1,[n.D.MorePlatformSidebar]:()=>!0,[n.D.MoreHuddlesSidebar]:()=>!0,[n.D.MoreExternalConnectionsSidebar]:()=>!0,[n.D.HelpBrowser]:()=>!0,[n.D.Huddle]:()=>!0,[n.D.BrowseHuddles]:S=>(0,E.LS)(S),[n.D.KeyboardShortcutsBrowser]:()=>!0,[n.D.WhatsNewBrowser]:()=>!0,[n.D.FeedbackBrowser]:()=>!0,[n.D.ExternalWorkspaceAllowedOrgPane]:()=>!1,[n.D.ExternalWorkspaceSidebar]:()=>!1,[n.D.ExternalWorkspacePeopleBrowser]:()=>!1,[n.D.ExternalWorkspaceChannelBrowser]:()=>!1,[n.D.PostEvent]:()=>!1,[n.D.AiSummaryDetails]:S=>(0,u._z)(S),[n.D.DailyDigest]:S=>(0,u.sS)(S),[n.D.MoreAiSummarySidebar]:S=>(0,u.M1)(S),[n.D.SearchSummary]:S=>(0,u.lQ)(S),[n.D.AssistantList]:S=>(0,y.l)(S),[n.D.Today]:S=>(0,v._)(S),[n.D.WorkObject]:S=>(0,P.H)(S),[n.D.TableauDetails]:S=>(0,P.H)(S),[n.D.Record]:S=>(0,h.hm)(S),[n.D.RecordChannelCreate]:S=>(0,h.hm)(S),[n.D.RecordChannelRelatedList]:()=>!0,[n.D.SalesAdministration]:()=>!0,[n.D.SalesBulkGrid]:()=>!0,[n.D.SalesHome]:S=>(0,r.hx)(S),[n.D.SalesLogActivity]:()=>!0,[n.D.SalesCreateRecord]:()=>!0,[n.D.SalesListViewBrowser]:()=>!0,[n.D.SalesSidebar]:()=>!0,[n.D.SalesNotifications]:()=>!0,[n.D.AssistantThread]:()=>!0,[n.D.ChannelFiles]:S=>(0,_._Z)(S,"channel_canvas_in_bbar")==="on",[n.D.AiApp]:S=>(0,M.wP)(S),[n.D.AboutAiApp]:S=>(0,M.wP)(S),[n.D.WorkflowDetails]:S=>(0,_._Z)(S,"workflow_progress_fe")==="on",[n.D.WorkflowEditor]:S=>(0,_._Z)(S,"wfb_in_client")==="on",[n.D.BookmarksFolder]:S=>(0,T.U6)(S),[n.D.ActionItems]:S=>(0,u.FV)(S),[n.D.BBMMain]:S=>(0,D.mL)(S)&&(0,C.V)(S),[n.D.BBMWorkspaceSwitcher]:S=>(0,D.mL)(S)&&(0,C.V)(S),[n.D.SearchInChannel]:S=>(0,m.k8)(S),[n.D.HuddleTranscriptDetails]:S=>(0,E.Bd)(S),[n.D.HuddlePageCanvas]:()=>!0,[n.D.BBMMore]:S=>(0,D.mL)(S)&&(0,C.V)(S),[n.D.AssistantHome]:S=>(0,V.We)(S)},b=c((S,G)=>B[G](S),"getViewTypeVisibility")},4900557724:(x,A,e)=>{"use strict";e.d(A,{BB:()=>r,GP:()=>d,Uf:()=>u});var t=e(9706240641),n=e.n(t),s=e(3398586081),i=e(7715417323),l=e(6422693406);const o={didTimeout:!0,timeRemaining:()=>0},a=(0,s.A)(()=>!!(window.requestIdleCallback&&window.cancelIdleCallback));function r(v,h){return a()?window.requestIdleCallback(v,h):window.setTimeout(()=>v(o))}c(r,"requestIdleCallback");function d(v){return a()?window.cancelIdleCallback(v):window.clearTimeout(v)}c(d,"cancelIdleCallback");function u(v){return new l.S(function(h,f){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.A;const p=r(function(){var y=(0,t.coroutine)(function*(g){try{const E=yield l.S.resolve(v(g));h(E)}catch(E){f(E)}});return function(g){return y.apply(this,arguments)}}());I(()=>{d(p)})})}c(u,"awaitIdleCallback");const _={IDLE_DEADLINE_FALLBACK:o}},5731054235:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(9636997165);let n=null;function s(){if(n===null){var i,l;n=(document==null||(i=document.documentElement)===null||i===void 0||(l=i.dataset)===null||l===void 0?void 0:l.app)===t.u.APP_POPOUTS}return n}c(s,"isAppPopouts")},8800777280:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n,s){return!n||!s?!1:s(n)?!0:t(n.parentElement||void 0,s)}c(t,"isContainedBy")},6045540917:(x,A,e)=>{"use strict";e.d(A,{h:()=>i});var t=e(8276911661),n=e(8170643398),s=e(3986753718);function i(l,o){if(!o)return!1;const a=(0,t.nv)(l,o);return!(0,n.zU)(a)&&!!o&&!!(0,s.t6)(l,o)}c(i,"isDnd")},6605261507:(x,A,e)=>{"use strict";e.d(A,{Dl:()=>i,Mk:()=>n,qF:()=>s});var t=e(1269024372);const n=["about","canvas"],s=["app","about","settings","chat"];function i(l){return n.indexOf(l)!==-1||s.indexOf(l)!==-1||Object.keys(t.e).indexOf(l)!==-1}c(i,"isValidTabRoute")},5587260451:(x,A,e)=>{"use strict";e.d(A,{L:()=>t,c:()=>n});const t=["invitations","contacts"];function n(s){return t.includes(s)}c(n,"isValidViewName")},2249017398:(x,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(9636997165);let n=null;function s(){if(n===null){var i,l;n=(document==null||(i=document.documentElement)===null||i===void 0||(l=i.dataset)===null||l===void 0?void 0:l.app)===t.u.WORKFLOW_BUILDER}return n}c(s,"isWorkflowBuilder")},1466694191:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});const t=/^(quip|Qp):F[A-Z0-9]{8,}-(Qpv:[a-z0-9:]{8,}&Qpvs:[0-9]{1,})?$/;function n(s){return s?t.test(s):!1}c(n,"looksLikeQuipHistoryId")},8305125093:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});const t=/^Wt[A-Z0-9]{7,}$/;function n(s){return t.test(s)}c(n,"looksLikeWorkflowTemplateId")},1269024372:(x,A,e)=>{"use strict";e.d(A,{e:()=>n,k:()=>s});var t=e(352142497);const n={recent:t.D.RecentPlatform,"workflows-managed-by-you":t.D.BrowseWorkflowsManagedByYou,workflows:t.D.BrowseShortcuts,"all-workflows":t.D.BrowseShortcuts,templates:t.D.BrowseWorkflowTemplates,apps:t.D.BrowseApps};function s(i){return n[i]}c(s,"maybeGetAutomationsTab")},264208541:(x,A,e)=>{"use strict";e.d(A,{Ey:()=>o,Hn:()=>a,gs:()=>r,mw:()=>u,nS:()=>d});var t=e(8665296019),n=e(1033764764),s;let i=!!(!(window==null||(s=window.performance)===null||s===void 0)&&s.memory);function l(){return i?window.performance.memory.jsHeapSizeLimit:null}c(l,"getMemoryLimit");function o(){return i?window.performance.memory.totalJSHeapSize:null}c(o,"getMemoryTotal");function a(){return i?window.performance.memory.usedJSHeapSize:null}c(a,"getMemoryUsed");function r(){return i}c(r,"supportsMemoryMeasurement");function d(v){const h=v/1e3/1e3;return`${h<100?h.toPrecision(3):Math.round(h)} MB`}c(d,"humanizeBytes");function u(v,h){const f=(0,t.A)(v,I=>{let{memory:p}=I;return p[h]||0});return Math.ceil((0,n.UK)(f))}c(u,"sumMemoryMetricsByKey"),Object.defineProperties({},{SUPPORTS_MEMORY_MEASUREMENT:{get:()=>i,set:v=>{i=v}}})},5737576046:(x,A,e)=>{"use strict";e.d(A,{Pw:()=>u,bC:()=>a,wn:()=>d,zC:()=>r});var t=e(1703559452),n=e(1022424641),s=e(796111729),i=e(168261570),l=e(8800777280);const o={};function a(_){let{channelId:v,functions:h,getInputInstance:f,threadTs:I,viewContext:p}=_;if(!f)throw new Error('Missing required "getInputInstance" param');const y=`${p}-${v}-${I}`;return o[y]&&(0,s.Ay)().warn(`Registering duplicate input (key: "${y}")`),o[y]={clear:()=>{var g,E;(g=f())===null||g===void 0||(E=g.clear)===null||E===void 0||E.call(g)},clearHistory:()=>{var g,E;(g=f())===null||g===void 0||(E=g.clearHistory)===null||E===void 0||E.call(g)},focus:()=>{var g,E;(g=f())===null||g===void 0||(E=g.focus)===null||E===void 0||E.call(g)},getContents:()=>{var g,E;return(g=f())===null||g===void 0||(E=g.getContents)===null||E===void 0?void 0:E.call(g)},getDisplayValue:()=>{var g,E;return(g=f())===null||g===void 0||(E=g.displayValue)===null||E===void 0?void 0:E.call(g)},getLength:()=>{var g,E;return(g=f())===null||g===void 0||(E=g.getLength)===null||E===void 0?void 0:E.call(g)},getSelection:()=>{var g,E;return(g=f())===null||g===void 0||(E=g.getSelection)===null||E===void 0?void 0:E.call(g)},getText:()=>{var g,E;return(g=f())===null||g===void 0||(E=g.value)===null||E===void 0?void 0:E.call(g)},hasFocus:()=>{var g,E;return(g=f())===null||g===void 0||(E=g.hasFocus)===null||E===void 0?void 0:E.call(g)},insertContentsAtCursor:function(){for(var g=arguments.length,E=new Array(g),M=0;M<g;M++)E[M]=arguments[M];var T,D;(T=f())===null||T===void 0||(D=T.insertContentsAtCursor)===null||D===void 0||D.call(T,...E)},isEmpty:()=>{var g,E;return!!(!((g=f())===null||g===void 0||(E=g.isEmpty)===null||E===void 0)&&E.call(g))},isEnabled:()=>{var g,E;return!!(!((g=f())===null||g===void 0||(E=g.isEnabled)===null||E===void 0)&&E.call(g))},prependContents:g=>{var E,M;(E=f())===null||E===void 0||(M=E.prependContents)===null||M===void 0||M.call(E,g)},setContents:function(){for(var g=arguments.length,E=new Array(g),M=0;M<g;M++)E[M]=arguments[M];var T,D;(T=f())===null||T===void 0||(D=T.setContents)===null||D===void 0||D.call(T,...E)},setCursor:function(){for(var g=arguments.length,E=new Array(g),M=0;M<g;M++)E[M]=arguments[M];var T,D;(T=f())===null||T===void 0||(D=T.setCursor)===null||D===void 0||D.call(T,...E)},setCursorAtEnd:()=>{var g,E;(g=f())===null||g===void 0||(E=g.setCursorAtEnd)===null||E===void 0||E.call(g)},setPlaceholder:g=>{var E,M;(E=f())===null||E===void 0||(M=E.setPlaceholder)===null||M===void 0||M.call(E,g)},setText:function(){for(var g=arguments.length,E=new Array(g),M=0;M<g;M++)E[M]=arguments[M];var T,D;(T=f())===null||T===void 0||(D=T.value)===null||D===void 0||D.call(T,...E)},...h},()=>{delete o[y]}}c(a,"registerInputAuto");function r(_){let{viewContext:v,channelId:h,threadTs:f}=_;return o[`${v}-${h}-${f||void 0}`]}c(r,"getInputProxy");function d(_){if(!_||!(0,i.A)(_))return null;let v,h,f;return(0,l.A)(_,p=>p.getAttribute("data-message-input")?(v=p.getAttribute("data-channel-id"),h=p.getAttribute("data-thread-ts"),f=p.getAttribute("data-view-context"),!0):!1)?r({viewContext:f,channelId:v,threadTs:h}):null}c(d,"getProxyForElement");function u(){let{channelId:_,threadTs:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const h=`${_}-${v}`,f=Object.keys(o);return(0,t.A)(f,I=>(0,n.A)(I,h))}c(u,"isInputRegistered")},662226046:(x,A,e)=>{"use strict";e.d(A,{R2:()=>I,bP:()=>p,ec:()=>T,fU:()=>M,p6:()=>m,qe:()=>D,x2:()=>P,yj:()=>O});var t=e(6858020025),n=e(3783303734),s=e(796111729),i=e(571104883),l=e(5795074931),o=e(8847766420),a=e(2872463257),r=e(3855029223);const d="notification:sent",u="notification:received",_="notification:opened",v="notification:quick_reply",h="notification:read_in_app",f=100;function I(R){try{return JSON.stringify(R)}catch(L){return(0,s.Wo)().warn("encodeNotificationTracePassthrough json stringify error",L),""}}c(I,"encodeNotificationTracePassthrough");function p(R){try{const{traceId:L,parentSpanId:V}=JSON.parse(R);return{traceId:L,parentSpanId:V}}catch(L){return(0,s.Wo)().warn("decodeNotificationTracePassthrough json parse error",L),{traceId:"",parentSpanId:""}}}c(p,"decodeNotificationTracePassthrough");function y(R){let{tracer:L,name:V,parentSpanId:B,traceId:K}=R;return L.createSpan({name:V,samplingOptions:{sampleType:a.nl.ALWAYS},options:{parentSpanId:B,traceId:K}})}c(y,"createSpan");function g(R){let{tracer:L,name:V,parentSpanId:B,traceId:K}=R;const b=y({tracer:L,name:V,parentSpanId:B,traceId:K});return b.close(),b}c(g,"createAndCloseSpan");function E(R,L){let{tracer:V,message:B}=L;const K=g({tracer:V,name:d}),b=(0,i.y3)()?"desktop":"browser",S=(0,l.WR)(R),G=(0,o.ZT)(R),H=(0,t.A)(B==null?void 0:B.ts,".",""),U=B==null?void 0:B.channel,F=`${S}-${U}-${H}`;return K.addTags({platform:b,encoded_user_id:S,encoded_team_id:G,encoded_channel_id:U,message_ts:H,notification_id:F}),K}c(E,"createAndCloseNotificationSentSpan");function M(R,L){let{message:V}=L;if(!V||!(V!=null&&V.ts)||!(V!=null&&V.channel))return;const B=(0,r.E)({state:R});let K,b;const S=[];if((V==null?void 0:V.type)==="desktop_notification"&&(V!=null&&V.trace_ctx))K=V.trace_ctx["x-b3-traceid"],b=V.trace_ctx["x-b3-spanid"];else{const H=E(R,{tracer:B,message:V});S.push(H),b=H.getId(),K=H.getTraceId()}const G=g({name:u,tracer:B,traceId:K,parentSpanId:b});return S.push(G),B.reportSpans(S),{traceId:K,parentSpanId:b}}c(M,"traceNotificationSentAndReceived");function T(R,L){let{notificationTracePassthroughData:V}=L;if(!V)return;const{traceId:B,parentSpanId:K}=V,b=(0,r.E)({state:R}),S=g({tracer:b,traceId:B,parentSpanId:K,name:_});b.reportSpans([S])}c(T,"traceNotificationOpened");function D(R,L){let{notificationTracePassthroughData:V,clientMsgId:B}=L;if(!V||!B)return;const{traceId:K,parentSpanId:b}=V,S=(0,r.E)({state:R}),G=g({tracer:S,traceId:K,parentSpanId:b,name:v});G.addTags({reply_message_client_message_id:B}),S.reportSpans([G])}c(D,"traceNotificationQuickReply");let C={};function m(R){return!!C[R]}c(m,"messageHasPendingNotificationTrace");function O(R,L){let{timestamp:V,notificationTracePassthroughData:B}=L;if(!B)return;(0,n.A)(C)>f&&((0,s.Ay)({state:R}).error("notification-tracing-utils: notificationTracePassThroughData exceeded maximum size"),C={});const{traceId:K,parentSpanId:b}=B,S=(0,r.E)({state:R}),G=y({tracer:S,traceId:K,parentSpanId:b,name:h});C[V]=G}c(O,"openNotificationReadSpan");function P(R,L){let{timestamp:V}=L;if(!V)return;const B=C[V];if(!B)return;const K=(0,r.E)({state:R});B.close(),K.reportSpans([B]),delete C[V]}c(P,"closeAndReportNotificationReadSpan")},1369898444:(x,A,e)=>{"use strict";e.d(A,{M:()=>l,W:()=>i});var t=e(2371143272),n=e(7002741921),s=e(4724591729);function i(o,a){const r={resources:[],frames:[],stacks:[],samples:[]},d=new Map,u=new Map,_=new Map;function v(y){if(_.has(y))return _.get(y);const g=r.resources.length;return r.resources.push(o.resources[y]),_.set(y,g),g}c(v,"mapResource");function h(y){if(u.has(y))return u.get(y);const g=o.frames[y],E=r.frames.length;return g.resourceId!=null?r.frames.push({...g,resourceId:v(g.resourceId)}):r.frames.push(g),u.set(y,E),E}c(h,"mapFrame");function f(y){if(d.has(y))return d.get(y);const g=o.stacks[y],E=g.parentId?f(g.parentId):void 0,M=h(g.frameId),T=r.stacks.length;return r.stacks.push(E!=null?{parentId:E,frameId:M}:{frameId:M}),d.set(y,T),T}c(f,"mapStack");function I(y){y.stackId==null?r.samples.push(y):r.samples.push({timestamp:y.timestamp,stackId:f(y.stackId)})}c(I,"addSample");let p=0;for(const{start:y,end:g}of a){for(;p<o.samples.length&&o.samples[p].timestamp<y;)p+=1;for(;p<o.samples.length&&o.samples[p].timestamp<=g;)I(o.samples[p]),p+=1}return r}c(i,"filterTrace");function l(){return!(0,s.b3)()&&(0,n.A)("self_profiling","enabled")&&!(0,t.b)()}c(l,"isProfilingEnabled")},8459143513:(x,A,e)=>{"use strict";e.d(A,{B:()=>s,I:()=>i.A});var t=e(3134334389),n=e(4757466470);let s=c(class extends t.Component{shouldComponentUpdate(o,a){return!(0,n.Ay)(o,this.props,2)||!(0,n.Ay)(a,this.state,2)}},"PureComponentDepth2");var i=e(1665466574)},7948868735:(x,A,e)=>{"use strict";e.d(A,{F:()=>s});var t=e(6422693406),n=e(4615579178);class s extends n.l{fetchData(){return t.S.resolve()}onCacheData(l){super.onCacheData(l);const o=1e3*60*60*4;this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=null,this.refreshTimer=setTimeout(()=>{this._callCacheGet()},this.timeoutMs+Math.random()*o)}getStaleWhileRevalidate(l){return this.isStaleOrUndefined()&&(this._callCacheGet(),this.cachedData===void 0)?l:this.cachedData}constructor(){super(()=>this.fetchData(),1008e5,!1),this.refreshTimer=null}}c(s,"AutocompleteCache")},4256321479:(x,A,e)=>{"use strict";e.d(A,{E:()=>a});var t=e(5276466411),n=e(7948868735),s=e(6533394955),i=e(474652310);class l extends n.F{handleFileDeletion(d){if(this.cachedData&&this.cachedData.length>0){const u=this.cachedData.filter(_=>!(d!=null&&d.includes(_.id)));this.cachedData=u}}fetchData(){return(0,s.dispatchForTeamId)(this.teamId,(0,t.z)({reason:"fetch-search-autocomplete-top-engaged-files"})).then(d=>((0,s.dispatchForTeamId)(this.teamId,(0,i.b)({files:d.files})),d.files))}constructor(d,u){super(),this.teamId=d,this.timeoutMs=u}}c(l,"AutocompleteTopEngagedFilesCache");const o={};function a(r){let{teamId:d}=r;const u=d||"_default",_=36e5;return o[u]||(o[u]=new l(d,_)),o[u]}c(a,"getAutocompleteTopEngagedFilesCache")},1948374838:(x,A,e)=>{"use strict";e.d(A,{X:()=>l});var t=e(2223860501),n=e(8847766420);let s=c(class{isStale(){return Date.now()-this.updatedDate>this.timeoutMs}isPrefixStale(){return Date.now()-this.prefixUpdatedDate>this.prefixTimeoutMs}clearIfStale(){this.isStale()&&(this.queryCache.clear(),this.updatedDate=Date.now())}clearPrefixIfStale(){this.isPrefixStale()&&(this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now())}contains(a){const r=this.queryCache.has(a);return this.clearIfStale(),r}containsPrefixOf(a){return this.clearPrefixIfStale(),this.prefixQueryCache.containsPrefix(a)}add(a){return this.clearIfStale(),this.queryCache.add(a)}addAsPrefix(a){return this.clearPrefixIfStale(),this.prefixQueryCache.add(a)}setRequestInFlight(){this.inFlightRequestStartTime=Date.now()}clearRequestInFlight(){delete this.inFlightRequestStartTime}isRequestInFlight(){return this.inFlightRequestStartTime?Date.now()-this.inFlightRequestStartTime<this.inFlightRequestTimeoutMs:!1}reset(){this.queryCache.clear(),this.updatedDate=Date.now(),this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now(),this.clearRequestInFlight()}constructor(){this.queryCache=new t.A,this.prefixQueryCache=new t.A,this.updatedDate=Date.now(),this.prefixUpdatedDate=Date.now(),this.timeoutMs=1e3*60*60*8,this.prefixTimeoutMs=1e3*60*15,this.inFlightRequestTimeoutMs=400}},"WorkflowTriggersAutocompleteQueryCache");const i={};function l(o){const a=(0,n.ZT)(o),d=(0,n.jV)(o)||a||"";return i[d]||(i[d]=new s),i[d]}c(l,"getWorkflowTriggersAutocompleteQueryCache")},8003851355:(x,A,e)=>{"use strict";e.d(A,{u:()=>s,A:()=>i});var t=e(7923609541),n=e(6312133237);const s=/[- _'.\u{2019}\u{200b}()/\uFF0F]/gu;let i=c(class xs{normalizeAndScore(o){const a=(0,n.B)(o);return a===this.normalizedQuery?0:this.score(a)}score(o){if(!o||this.queryNoSeparators.length>o.replace(s,"").length||!xs.containsAllLetters(o,this.queryNode)||!this.queryNode)return 1/0;const r=xs.lettersToGraph(o,this.options);if(!r)return 1/0;const d=xs.searchWordBoundariesOnly(r,this.queryNode,this.options);if(!d)return 1/0;const u=xs.countResult(d);return u>this.fuzzyLimit?1/0:u}static scoreOnce(o,a,r){const d=(0,n.B)(a),u=(0,n.B)(o);return new xs(d,r).score(u)}static lettersToGraph(o,a){const r=o.split(""),d=r.shift();return xs.lettersToGraphWorker(d,null,r,[],0,a)}static lettersToGraphWorker(o,a,r,d,u){let _=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(!o)return null;const v=(0,t.A)(o),h=xs.makeLetterNode(o,a,d,u,v);if(xs.shouldAddJump(a,h,_)){const I=_.fuzzyJumpLimit||5;d.length<I&&d.push(h)}const f=xs.lettersToGraphWorker(r.shift(),h,r,d,u+1,_);return f&&(h.next=f),h}static shouldAddJump(o,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.ignored?!1:!!(!o||o.ignored&&!a.ignored||r.fuzzyCJK&&(o.isCJK!==a.isCJK||a.isCJK))}static makeLetterNode(o,a,r,d,u){return{letter:o,ignored:o.match(s),next:null,prev:a,jumps:r,visited:!1,index:d,isCJK:u}}static queryToLinkedList(o){if(!o)return null;let a=o.split("");return a.length>1024&&(a=a.slice(0,1024)),xs.queryToLinkedListWorker(a,0)}static queryToLinkedListWorker(o,a){if(a>=o.length)return null;const r=o[a],d=!!(r.match(s)&&(a!==0||o.length>1));return{letter:r,isSeparator:d,isSpace:r===" ",next:xs.queryToLinkedListWorker(o,a+1),index:a}}static searchWordBoundariesOnly(o,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=xs.searchWordBoundariesOnlyWorker(o,a,0,r);return d||(d=o.jumps.reduce((u,_)=>u||_===o?u:xs.searchWordBoundariesOnlyWorker(_,a,1,r),null)),d}static searchWordBoundariesOnlyWorker(o,a,r){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!o||!a)return null;let u;if(!o.visited&&(o.letter===a.letter||o.ignored&&a.isSeparator)&&(u={node:o,count:r}),!u)return null;if(!a.next)return u;o.visited=!0;let _=xs.searchWordBoundariesOnlyWorker(o.next,a.next,0,d),v=a.next;for(;v.isSeparator&&v.next;)v=v.next;return _||(_=o.jumps.reduce((h,f)=>h||f.visited||f===o||(d.searchForwardOnly||d.substringsOnly)&&f.index<o.index||d.substringsOnly&&f.index>o.index+2?h:xs.searchWordBoundariesOnlyWorker(f,v,1,d),null)),o.visited=!1,_?(u.next=_,u):null}static countResult(o){return o?o.count+xs.countResult(o.next):0}static containsAllLetters(o,a){let r=a;for(;r;){if(!(r.isSeparator||o.includes(r.letter)))return!1;r=r.next}return!0}constructor(o,a={}){this.normalizedQuery=(0,n.B)(o),this.queryNode=xs.queryToLinkedList(this.normalizedQuery),this.options=a;var r;this.fuzzyLimit=(r=this.options.fuzzyLimit)!==null&&r!==void 0?r:1/0,this.queryNoSeparators=this.normalizedQuery.replace(s,"")}},"FuzzyMatcher")},8170659516:(x,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(9884588328),n=e(8921478798),s=e(8701485242),i=e(5795074931);function l(o){let{state:a,mpim:r,matchData:d}=o;const u=(0,i.WR)(a);let _=[];if((0,t.Ug)(r)&&(_=(0,t.Ug)(r).filter(p=>u!==p)),!d)return _;const v=!1,h=!1,f=[];d.forEach(p=>{p.map(g=>({name:(0,n.I)(a,g.id,v,h),...g})).sort((g,E)=>g.score<E.score?1:g.score>E.score?-1:(0,s.Ay)(g.name,E.name)).filter(g=>isFinite(g.score)).forEach(g=>{_.includes(g.id)&&(f.push(g.id),_.splice(_.indexOf(g.id),1))})});const I=_.map(p=>({id:p,name:(0,n.I)(a,p,v,h)})).sort((p,y)=>(0,s.Ay)(p.name,y.name)).map(p=>p.id);return[...f,...I]}c(l,"getMemberDisplayOrderForSearcherMPIM")},220244708:(x,A,e)=>{"use strict";e.d(A,{B:()=>i});var t=e(6495946979),n=e(8170643398),s=e(3730613858);function i(l,o,a){if((0,n.fy)(o))return(0,t.bl)(a);const r=(0,s.Ql)(l,a.id,o.id);return!!(r.isKnown&&r.isMember)}c(i,"isUserKnownToBeMemberOfChannel")},1072784641:(x,A,e)=>{"use strict";e.d(A,{A:()=>be});var t=e(7715417323),n=e(5729325965),s=e(1703559452),i=e(4249070636),l=e(5238395322),o=e(8086952004),a=e(2003990933),r=e(4874502712),d=e(3037015781),u=e(8496310524),_=e(7111365413),v=e(9884588328),h=e(1407713935),f=e(8798294025),I=e(395285811),p=e(3890290905);const y=c(xe=>xe&&(xe.displayName||xe.display_name||(0,p.Y)(xe)),"getEmojiDisplayName"),g=c(xe=>xe?(xe.aliases?[xe,...xe.aliases]:[xe]).map(fe=>({name:(0,p.Y)(fe),displayName:y(fe)})):null,"getAllEmojiNameObjects");var E=e(2647703359),M=e(102566929),T=e(5455782105),D=e(8170643398),C=e(9262712126),m=e(6120301420),O=e(3212336858),P=e(6839188756),R=e(2023092677),L=e(1033870301),V=e(796111729),B=e(8088280230);const K={china:["pinching_hand","pinching-hand"],dead:["older_adult"],dump:["hindu_temple"],fail:["family"],gross:["flag-progress-pride"],hi:["shit"],hit:["shit"],hitler:["white_flower"],it:["shit"],macht:["mannlichkeitssymbol"],sh:["shit"],shi:["shit"],shoot:["school_satchel"],s:["shit"],sit:["shit"],sith:["person_with_headscarf"],war:["man-wearing-turban"],whine:["menorah_with_nine_branches"],worst:["woman-wrestling"],wrong:["woman-rowing-boat"]};var b=e(1917953477),S=e(8003851355),G=e(9422011462),H=e(8518663094),U=e(2332798892);const F=c(xe=>(xe||"").split(/\s+/)[0],"getFirstWord"),Y=c(xe=>["/","\uFF0F"].includes((xe||"").charAt(0))?xe:`/${xe}`,"prependSlashToStr"),Z=c(xe=>((xe||"").split(/[^\S\n\r]+/g)||[]).length>1,"strHasSpace");var ee=e(8847766420),j=e(2762206868),ge=e(9101533895),ne=e(4761125736),ue=e(8276911661),he=e(3677514771);let be=c(class{filterMembers(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if((0,D.Zx)(k)||this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery){const q={item:k,score:0,id:k.id};return this.selfFirst&&(0,D.fy)(k)&&(q.isSelf=!0),Q.push(q),Q}const{score:N,scoreDetails:$}=this.scoreMember(k),W={item:k,score:N,scoreDetails:$,id:k.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(W.isExactMatch=this.isMemberExactMatch(k),W.exactMatchDetails=this.getMemberExactMatchDetails(k)),this.selfFirst&&(0,D.fy)(k)&&(W.isSelf=!0),N<=this.fuzzyLimit&&Q.push(W),Q},[])}scoreMember(Le){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;const se=1/0,Q={};if(this.queryIsMaybeSelf&&(0,D.fy)(Le))Q.self_score=0;else{const W=(0,C.j_)(Le),q=(0,C.sJ)(Le);Q.real_name=W?fe.score(W):se,Q.display_name=q?fe.score(q):se}if(this.shouldMatchEmail){const W=(0,C.ZL)(Le);Q.email=W?this.forwardOnlyMatcher.score(W):1/0}var k;const N=(k=(0,n.A)(Object.values(Q)))!==null&&k!==void 0?k:se,$=Object.entries(Q).reduce((W,q)=>{let[re,le]=q;return isFinite(le)&&(W[re]=le),W},{});return{score:N,scoreDetails:$}}filterChannels(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if((0,h.PC)(k)||(0,h.Zx)(k)||(0,I.jT)(k)||this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=(0,G.B)((0,v.SB)(Le,k,{publicChannelIncludeHashSign:!1})),$=this.matcher.score(N),W={item:k,score:$,id:k.id};this.preferExactMatch&&(W.isExactMatch=this.isChannelExactMatchPreNormalized(N));const q=this.options.entities&&this.options.entities.channels&&this.options.entities.channels.searchPreviousNames,re=k.previous_names&&k.previous_names.length;let le=!1;if(q&&re){var Ae;const Te=k==null||(Ae=k.previous_names)===null||Ae===void 0?void 0:Ae.map(Ee=>({score:this.matcher.normalizeAndScore(Ee),name:Ee}));W.previousNameScores=Te,le=(0,s.A)(Te,Ee=>Ee.score<=this.fuzzyLimit);const Ne=le&&$>this.fuzzyLimit;let pe;if(Ne){const Ee=(0,i.A)(Te,"score");pe=Ee&&Ee.name}W.bestPreviousNameMatch=pe}return $<=this.fuzzyLimit||le?Q.push(W):this.rawQuery===k.id&&Q.push({item:k,score:0,id:k.id}),Q},[])}filterTeams(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if((0,P.Zx)(k)||this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.matcher.normalizeAndScore((0,P.F1)(k)),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isTeamExactMatch(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}filterUserGroups(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if((0,R.Zx)(k)||this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.scoreUserGroupName(k),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isUsergroupExactMatch(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}scoreUserGroupName(Le){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,se=1/0,Q=1/0;const k=(0,R.TZ)(Le)||(0,R.ue)(Le).toLocaleLowerCase(),N=(0,R.x_)(Le,{includeAtSign:!1});return se=fe.normalizeAndScore(k),N&&(Q=fe.normalizeAndScore(N)),Math.min(se,Q)}getSubQueryMatchers(){return this.query.split(/[,| ]/).filter(fe=>!!fe).map(fe=>{const se=fe.charAt(0)==="@"?fe.substring(1):fe;return new S.A(se,{fuzzyLimit:this.fuzzyLimit})})}filterMpims(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=(0,v.Ug)(k);if(!N)return Q;const $=N.map(pe=>(0,ue.nv)(Le,pe)).filter(pe=>!(0,D.fy)(pe)&&!(0,D.Zx)(pe)),W={},q={},re=[];let le=0;const Ae=this.getSubQueryMatchers();for(const pe of Ae){const Ee=[];let oe=1/0;for(const ce of $){const{score:ke,scoreDetails:Ce}=this.scoreMember(ce,pe),Me=W==null?void 0:W[ce.id];ke<(Me!==void 0?Me:1/0)&&(W[ce.id]=ke,q[ce.id]={score_details:Ce}),Ee.push({id:ce.id,score:ke}),ke<oe&&(oe=ke)}re.push(Ee),le+=oe}let Te;isFinite(le)?Te=(0,l.A)(Object.values(W).filter(isFinite)):Te=le;const Ne={id:k.id,item:k,score:Te,scoreDetailsByMember:q,subqueryScoresByMember:re};return Te<=this.fuzzyLimit?Q.push(Ne):this.rawQuery===k.id&&Q.push({item:k,score:0,id:k.id}),Q},[])}filterIms(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;const N=(0,f.e)(k);if(!N)return Q;const $=(0,ue.nv)(Le,N);if((0,D.Zx)($))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const{score:W,scoreDetails:q}=this.scoreMember($),re={item:k,score:W,scoreDetails:q,id:k.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(re.isExactMatch=this.isMemberExactMatch($),re.exactMatchDetails=this.getMemberExactMatchDetails($)),W<=this.fuzzyLimit?Q.push(re):this.rawQuery===k.id&&Q.push({item:k,score:0,id:k.id}),Q},[])}filterViews(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.matcher.normalizeAndScore(k.name),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isViewOrModalExact(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}filterModals(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.matcher.normalizeAndScore(k.name),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isViewOrModalExact(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}filterAppActions(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if((0,d.GU)(k)||this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=(0,u.u)(k),$=(0,j.sO)(Le,k.app_id),W=!(0,d.GU)($)&&(0,_.fj)($),q=W?[`${N} ${W}`,`${W} ${N}`]:[N],re=q.map(Te=>this.matcher.normalizeAndScore(Te)),le=Math.min(...re),Ae={item:k,score:le,id:k.id};return this.preferExactMatch&&(Ae.isExactMatch=!!(this.query&&q.map(G.B).includes(this.query))),le<=this.fuzzyLimit&&Q.push(Ae),Q},[])}filterApps(Le,fe,se,Q){let k=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.A;const N={};return fe!=null&&fe.length&&fe.forEach($=>{const W=$.app_id;W&&!N[W]&&(N[W]={id:W,name:$.appName})}),se!=null&&se.length&&se.forEach($=>{const W=$==null?void 0:$.appId;W&&!N[W]&&(N[W]={id:W,name:$==null?void 0:$.appName})}),Q!=null&&Q.length&&Q.forEach($=>{const W=$.appId;W&&!N[W]&&(N[W]={id:W,name:$.appName})}),this.filterShortcuts(Le,Object.values(N),!1,k)}filterShortcuts(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.A;return fe.reduce((k,N)=>{if((0,d.GU)(N)||this.shouldFilterItem(N,Q))return k;if(!this.query&&this.allowEmptyQuery)return k.push({item:N,score:0,id:N.id}),k;const{score:$,scoreDetails:W,bestNameMatch:q,bestNameIsExactMatch:re}=this.scoreShortcut(N,se),le={item:N,id:N.id,score:$};if(se){le.firstWordOfRawQuery=F(this.query);const Ae=(0,U.A)(N,Y(le.firstWordOfRawQuery),{allowPartialMatches:!1});le.commandMatch=Ae&&this.isOpenedWithSlash,le.isExactMatch=le.commandMatch}return le.scoreDetails=W,le.bestNameMatch=q,le.bestNameIsExactMatch=re,le.isExactMatch=le.isExactMatch||re,($<=this.fuzzyLimit||le.commandMatch)&&k.push(le),k},[])}scoreShortcut(Le){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const Q=this.isQueryExactlySlash?[]:Le.aliases||[];let k=(0,G.B)((0,O.fK)(Le));const N={name:se.score(k),label:se.normalizeAndScore(Le.label),desc:se.normalizeAndScore((0,O.Hv)(Le)),app_name:se.normalizeAndScore((0,O.qA)(Le))};fe&&N.name!==void 0&&N.name>0&&(N.name-=1);let $,W,q;Q.forEach(Te=>{let Ne=(0,G.B)(Te);!this.query.startsWith("/")&&!this.query.startsWith("\uFF0F")&&(Ne=(0,b.O)(Ne));const pe=se.score(Ne);Ne=(0,b.O)(Ne),!q&&($===void 0||pe<$)&&($=pe,W=Ne),this.normalizedQuery===Ne&&(q=!0,W=Ne)}),$!==void 0&&isFinite($)&&(N.aliases=$);var re;const le=(re=(0,n.A)(Object.values(N)))!==null&&re!==void 0?re:1/0;k=(0,b.O)(k),!q&&isFinite(N.name)&&($===void 0||N.name<$)&&(W=k),this.normalizedQuery===k&&(q=!0,W=k);const Ae=Object.entries(N).reduce((Te,Ne)=>{let[pe,Ee]=Ne;return isFinite(Ee)&&(Te[pe]=Ee),Te},{});return{score:le,scoreDetails:Ae,bestNameMatch:W,bestNameIsExactMatch:q}}filterWorkflowTriggers(Le,fe){const se=(0,r.yq)(Le);return fe.reduce((Q,k)=>{if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.scoreWorkflowTrigger(k,this.matcher,se),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isTriggerExactMatch(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}scoreWorkflowTrigger(Le){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var Q;const k={name:fe.normalizeAndScore(Le.name),description:fe.normalizeAndScore(Le.description),appName:fe.normalizeAndScore((Q=Le.workflow.app)===null||Q===void 0?void 0:Q.name),...se?{shareUrl:fe.normalizeAndScore(Le.share_url)}:{}};var N;return(N=(0,n.A)(Object.values(k)))!==null&&N!==void 0?N:1/0}filterBroadcastKeywords(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.scoreBroadcastKeyword(k),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isBroadcastKeywordExactMatch(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}scoreBroadcastKeyword(Le){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,se=1/0,Q=1/0;const k=fe.normalizeAndScore(Le.name);return Le.id==="BKchannel"&&(se=fe.normalizeAndScore("group")),Le.ms_name!==Le.name&&(Q=fe.normalizeAndScore(Le.ms_name)),Math.min(k,Q,se)}filterEmoji(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const Q=[];return fe.forEach(k=>{if(this.shouldFilterItem(k,se))return;if(!this.query&&this.allowEmptyQuery){var N;Q.push({item:k,emojiScore:0,emojiMatchIndices:[],score:0,id:(N=k.id)!==null&&N!==void 0?N:k.name});return}var $;const W=($=g(k))!==null&&$!==void 0?$:[];let q=1/0,re,le,Ae,Te,Ne,pe;W.forEach(Me=>{let{name:Se,displayName:Ue}=Me;if(Se){const He=(0,G.B)(Se),Ye=this.scoreEmojiName(He);(Ye.score<q||q===1/0)&&(q=Ye.score,re=Ye.matchIndices,le=Se,Ae=Se,Ne=Ye.queryLengthRatio,pe=Ye.totalComboBreaks,Te=this.query===He||Se==="ok_hand"&&this.query==="ok")}if(Ue&&Ue!==Se){const He=(0,G.B)(Ue),Ye=this.scoreEmojiName(He);(Ye.score<q||q===1/0)&&(q=Ye.score,re=Ye.matchIndices,le=Ue,Ae=Se,Ne=Ye.queryLengthRatio,pe=Ye.totalComboBreaks,Te=this.query===He)}});const Ee=this.options&&this.options.entities&&this.options.entities.emoji&&this.options.entities.emoji.matchKeywords,oe=k.keywords,ce=!!(oe&&oe.length&&Array.isArray(oe));oe&&oe.length&&!Array.isArray(oe)&&(0,V.Ay)({state:Le}).error("https://slack.zendesk.com/agent/tickets/2393782",`Emoji keywords for ${k.name} is not an array - ${k.keywords}`);let ke=!1;if(q===1/0&&Ee&&ce&&(ke=k.keywords.some(Me=>this.matcher.normalizeAndScore(Me)<1/0),ke&&(le=k&&(k.displayName||k.name))),q!==1/0||ke){const Me=(0,o.A)(W,He=>{let{name:Ye}=He;return Ye===Ae}),Se=Me&&Me.displayName;var Ce;const Ue={item:k,score:q,emojiScore:q,emojiBestNameMatch:le,emojiBestNameMatchCanonical:Ae,emojiBestNameMatchLocalized:Se,emojiMatchIndices:re,emojiQueryLengthRatio:Ne,emojiTotalComboBreaks:pe,id:(Ce=k.id)!==null&&Ce!==void 0?Ce:k.name};this.preferExactMatch&&(Ue.isExactMatch=Te,Ue.isEmojiExactMatch=Te),Q.push(Ue)}}),Q}scoreEmojiName(Le){const fe={score:1/0,matchIndices:[],queryLengthRatio:0,totalComboBreaks:null};if(!Le)return fe;if(Le==="ok_hand"&&this.query==="ok")return{score:0,matchIndices:[0,1],queryLengthRatio:1,totalComboBreaks:0};if(K[this.query]&&K[this.query].indexOf(Le)!==-1)return fe;const se=this.query.length,Q=[];let k=2,N=5;se<3?(k=0,N=0):se===3?(k=1,N=1):se===4&&(k=1);let $=1/0,W=0,q=null,re=Le.indexOf(this.query);if(re===-1&&(re=Le.indexOf(this.query[0])),re!==-1){const le=/\s+/g,Ae=/[-]+/g,Te=this.query.replace(le,"").replace(Ae,"_"),Ne=Le.replace(Ae,"_"),pe=Te.split("");q=0;let Ee=0,oe=0,ce=!0;for(let ke=re;ke<Ne.length;ke++){if(Ne[ke]===pe[0]){if(ce=!0,Q.push(ke),pe.shift(),oe>Ee&&(Ee=oe),oe=0,pe.length===0)break}else ce&&(q+=1),ce=!1,oe+=1;if(q>k)return{score:$,matchIndices:Q,queryLengthRatio:W,totalComboBreaks:q};if(oe>N)return{score:$,matchIndices:Q,queryLengthRatio:W,totalComboBreaks:q}}if(pe.length>0)return fe;W=Te.length/Ne.length,$=1-W,q>0&&($+=q)}return{score:$,matchIndices:Q,queryLengthRatio:W,totalComboBreaks:q}}filterFiles(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const Q=(0,m.hq)(Le),k=(0,ee.Kc)(Le),N=(0,he._J)(Le,k),$=(0,T.k)(Le),W=N&&(0,P.qR)(N),q=!$&&!W,re=(0,ne._Z)(Le,"native_dlp_canvas")==="on";return fe.reduce((le,Ae)=>{var Te,Ne;if((0,d.GU)(Ae)||(0,E.sR)(Ae))return le;const pe=(Te=this.options)===null||Te===void 0||(Ne=Te.entities)===null||Ne===void 0?void 0:Ne.files,Ee=!!(pe!=null&&pe.includeChannelCanvases)||!!(pe!=null&&pe.onlyChannelCanvases);if(Ae&&(0,E.aD)(Ae)&&!Ee)return le;const oe=Ae&&(0,E.CA)(Ae),ce=Ae==null?void 0:Ae.user_team,ke=ce?(0,he._J)(Le,ce):null;var Ce;const Se=((Ce=(0,P.Ss)(ke??void 0))!==null&&Ce!==void 0?Ce:ce)!==k;if(oe&&(Se||q)||re&&(0,E.Sp)(Ae)||Ae&&Q&&(pe!=null&&pe.onlyChannelCanvases||q)&&(0,E.wL)(Ae)||this.shouldFilterItem(Ae,se))return le;if(!this.query&&this.allowEmptyQuery)return le.push({item:Ae,score:0,id:Ae.id}),le;const Ue=this.scoreFile(Le,Ae),He={item:Ae,score:Ue,id:Ae.id};return this.preferExactMatch&&(He.isExactMatch=this.isFileExactMatch(Ae)),Ue<=this.fuzzyLimit&&le.push(He),le},[])}scoreFile(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const Q=fe.name?se.normalizeAndScore(fe.name):1/0,k=fe.title&&fe.name!==fe.title?se.normalizeAndScore(fe.title):1/0,N=(0,B.A)({input:this.query}).length>0,$=fe.external_url&&N?se.normalizeAndScore(fe.external_url):1/0,W=fe.permalink&&N?se.normalizeAndScore(fe.permalink):1/0;let q=1/0;if((0,E.aD)(fe)){const re=(0,M.Iz)(fe),le=(0,ge.OL)(Le,re);if(le){const Ae=(0,G.B)((0,v.SB)(Le,le,{publicChannelIncludeHashSign:!1}));q=this.matcher.score(Ae)}}return Math.min(Q,k,$,W,q)}filterLists(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.scoreList(k),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isListExactMatch(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}scoreList(Le){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(Le.title)}filterListRecords(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se)||!k.name||!k.listTitle)return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:k,score:0,id:k.id}),Q;const N=this.scoreListRecord(k),$={item:k,score:N,id:k.id};return this.preferExactMatch&&($.isExactMatch=this.isListRecordExactMatch(k)),N<=this.fuzzyLimit&&Q.push($),Q},[])}scoreListRecord(Le){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(Le.name)}filterChannelSections(Le,fe){let se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return fe.reduce((Q,k)=>{if(this.shouldFilterItem(k,se))return Q;const N=(0,L.v2)(Le,k),$=this.matcher.normalizeAndScore(N),W={item:k,score:$,id:k.id};return!this.query&&this.allowEmptyQuery?(Q.push(W),Q):($<=this.fuzzyLimit&&Q.push(W),Q)},[])}shouldFilterItem(Le,fe){return fe(Le)===!1||this.filter(Le)===!1}getMemberExactMatchDetails(Le){const fe={},se=(0,C.j_)(Le),Q=(0,C.sJ)(Le);return fe.real_name=se===this.query,fe.display_name=Q===this.query,this.shouldMatchEmail&&(fe.email=(0,C.ZL)(Le)===this.query),fe}isMemberExactMatch(Le){return!this.query||!this.query.length?!1:(0,s.A)(this.getMemberExactMatchDetails(Le),Boolean)}isChannelExactMatchPreNormalized(Le){return!this.query||!this.query.length?!1:Le===this.query}isFileExactMatch(Le){if(!this.query||!this.query.length)return!1;var fe,se;return(0,G.B)(Le.name)===this.query||(0,G.B)(Le.title)===this.query||(0,G.B)((fe=Le.external_url)!==null&&fe!==void 0?fe:void 0)===this.query||(0,G.B)((se=Le.permalink)!==null&&se!==void 0?se:void 0)===this.query}isListExactMatch(Le){return!this.query||!this.query.length?!1:(0,G.B)(Le.title)===this.query}isListRecordExactMatch(Le){return!this.query||!this.query.length?!1:(0,G.B)(Le.name)===this.query}isTeamExactMatch(Le){return!this.query||!this.query.length?!1:(0,G.B)((0,P.F1)(Le))===this.query}isUsergroupExactMatch(Le){return!this.query||!this.query.length?!1:(0,G.B)((0,R.x_)(Le))===this.query||(0,G.B)((0,R.ue)(Le))===this.query}isTriggerExactMatch(Le){return!this.query||!this.query.length?!1:(0,G.B)(Le.name)===this.query}isBroadcastKeywordExactMatch(Le){return!this.query||!this.query.length?!1:(0,G.B)(Le.name)===this.query||(0,G.B)(Le.ms_name)===this.query}isViewOrModalExact(Le){return!this.query||!this.query.length?!1:(0,G.B)(Le.name)===this.query}filterHelpArticles(Le,fe){const Q=fe.reduce((k,N)=>{const $=(0,G.B)(N.title),W=this.substringMatcher.normalizeAndScore(N.title);return W>this.fuzzyLimit?k:k.concat({item:{...N,id:String(N.id)},score:W,isExactMatch:$===this.query,id:String(N.id)})},[]).sort((k,N)=>k.score-N.score);return Q.slice(0,Math.min(5,Q.length))}filterSalesListViews(Le,fe){return fe.reduce((Q,k)=>{const N=k.label;if(!N)return Q;const $=(0,G.B)(N),W=this.substringMatcher.normalizeAndScore($);if(W>this.fuzzyLimit)return Q;const q=k.id;return Q.concat({item:{...k,id:q,name:N},score:W,isExactMatch:$===this.query,id:q})},[])}constructor({query:Le="",options:fe={entities:{}}}){var se,Q,k,N,$,W,q,re,le,Ae,Te,Ne,pe;this.options=fe,this.rawQuery=Le,this.query=(0,G.B)(Le);var Ee;this.fuzzyLimit=(Ee=this.options.fuzzyLimit)!==null&&Ee!==void 0?Ee:3,this.allowEmptyQuery=!!this.options.allowEmptyQuery,this.preferExactMatch=!!(this.options.sort&&this.options.sort.preferExactMatch),this.avoidExactMatchForMembers=!!(!((se=this.options)===null||se===void 0||(Q=se.sort)===null||Q===void 0)&&Q.avoidExactMatchForMembers),this.selfFirst=!!(!((k=this.options)===null||k===void 0||(N=k.sort)===null||N===void 0)&&N.selfFirst),this.filter=this.options.filter||t.A,this.shouldMatchEmail=(0,a.A)(this.options,"entities.members.matchEmailField")||(0,a.A)(this.options,"entities.channels.matchEmailField"),this.queryIsMaybeSelf=(0,H.t)(Le),this.normalizedQuery=this.query,!(($=this.options)===null||$===void 0||(W=$.entities)===null||W===void 0||(q=W.shortcuts)===null||q===void 0)&&q.queryStartsWithSlash&&(this.query=Y(this.query)),this.matcher=new S.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK}),this.forwardOnlyMatcher=new S.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,searchForwardOnly:this.options.fuzzyEmailSearchForwardOnly}),this.substringMatcher=new S.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,substringsOnly:!0}),this.isOpenedWithSlash=!!(!((re=this.options)===null||re===void 0||(le=re.entities)===null||le===void 0||(Ae=le.shortcuts)===null||Ae===void 0)&&Ae.isOpenedWithSlash),this.isQueryExactlySlash=!!(!((Te=this.options)===null||Te===void 0||(Ne=Te.entities)===null||Ne===void 0||(pe=Ne.shortcuts)===null||pe===void 0)&&pe.isQueryExactlySlash)}},"SearcherMatcher")},6897117289:(x,A,e)=>{"use strict";e.d(A,{A:()=>D});var t=e(3367239067),n=e(1703559452),s=e(7264301376),i=e(129753175),l=e(9884588328),o=e(1407713935),a=e(6007206761),r=e(6495946979),d=e(8170643398),u=e(3534324375),_=e(6839188756),v=e(9190452268),h=e(8701485242),f=e(181849556),I=e(220244708);class p{preprocessText(m,O){if(typeof m!="string")throw new TypeError("Input text must be a string.");let P=m.replace(/\s+?/g,"").toLowerCase();return O&&(P=P.replace(/[-_]/g,"")),Array.from(P)}extractNGrams(m){if(!Array.isArray(m)||m.some(V=>typeof V!="string"))throw new TypeError("textChars must be an array of strings.");const O=new Map,P=m.length,[R,L]=this.ngramRange;for(let V=R;V<=L;V++)for(let B=0;B<=P-V;B++){const K=m.slice(B,B+V).join(""),b=B+1,S=O.get(K)||[];S.push(b),O.set(K,S)}return O}computeTermFrequencies(m){if(!(m instanceof Map))throw new TypeError("ngrams must be a Map.");const O=new Map;return m.forEach((P,R)=>{if(!Array.isArray(P)||P.some(V=>typeof V!="number"))throw new TypeError("Positions must be arrays of numbers.");const L=P.reduce((V,B)=>V+1/B,0);O.set(R,L)}),O}cosineSimilarity(m,O){if(!(m instanceof Map)||!(O instanceof Map))throw new TypeError("tfQuery and tfCandidate must be Map instances.");const P=new Set([...m.keys(),...O.keys()]);let R=0,L=0,V=0;return P.forEach(K=>{const b=m.get(K)||0,S=O.get(K)||0;R+=b*S,L+=b*b,V+=S*S}),L===0||V===0?0:R/(Math.sqrt(L)*Math.sqrt(V))}computeSimilarity(m,O){if(typeof m!="string"||typeof O!="string")return 0;const R=/[-_]/.test(m),L=this.preprocessText(m,!1),V=this.preprocessText(O,!R),B=this.extractNGrams(L),K=this.extractNGrams(V),b=this.computeTermFrequencies(B),S=this.computeTermFrequencies(K);return this.cosineSimilarity(b,S)}constructor(m=[2,3]){if(!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number"||m[0]>m[1]||m[0]<1)throw new Error("ngramRange must be an array of two numbers where minN >= 1 and minN <= maxN.");this.ngramRange=m}}c(p,"PositionAwareFuzzyMatcher");var y=e(5795074931),g=e(9101533895),E=e(4761125736),M=e(8276911661);const T={starredChannel:10,memberOfThisChannel:25,archivedChannel:-50,deactivatedMember:-50,mpimWithDeactivatedMember:-50,channelFromAnotherTeam:-15,notInChannel:-25,userGroupOrKeyword:-25,fuzzyMatch:50,emojiMatch:150,exactMatch:100,matchesPreviousName:-50,workflowAssociatedWithChannel:250,popularEmoji:1,isSelf:250};let D=c(class{sort(m,O){var P;const R=(0,v.Cy)({state:m});R.mark("modern-searcher-sorting-mark");const{members:L,channels:V,mpims:B,ims:K,teams:b,userGroups:S,emoji:G,broadcastKeywords:H,views:U,modals:F,appActions:Y,channelSections:Z,emails:ee,files:j,lists:ge,listRecords:ne,slashCommands:ue,slackGlobalActions:he,quipShortcutCommands:be,canvasAiSuggestions:xe,channelActions:Le,fakeGlobalActions:fe,callActions:se,apps:Q,helpArticles:k,workflowTriggers:N,salesListViews:$}=O,W={memberChannels:[],nonmemberChannels:[],archivedChannels:[]};V&&V.reduce((Ne,pe)=>(0,a.F)(pe.item)?(Ne.archivedChannels.push(pe),Ne):((0,r.bl)(pe.item)?Ne.memberChannels.push(pe):Ne.nonmemberChannels.push(pe),Ne),W);let q=[...L||[],...W.memberChannels,...B||[],...K||[],...G||[],...S||[],...H||[],...U||[],...F||[],...Y||[],...Z||[],...ee||[],...j||[],...ge||[],...ne||[],...se||[],...Le||[],...fe||[],...Q||[],...k||[],...N||[],...$||[]],re=[...W.nonmemberChannels,...b||[],...ue||[],...he||[],...be||[],...xe||[]],le=W.archivedChannels;const Ae=this.getSortFuzzyFunction(m,{localeAware:!0});this.options.flat||(q=this.precomputeMatchNames(m,q).sort(Ae),re=this.precomputeMatchNames(m,re).sort(Ae),le=this.precomputeMatchNames(m,le).sort(Ae));let Te=[...q,...re,...le];return this.options.flat&&Te.sort(Ae),this.options.preferExactMatch&&(Te=[...(0,t.A)(Te,pe=>pe.isExactMatch),...Te]),this.options.frecency&&(this.options.normalize=!0,R.mark("modern-searcher-frecency-sort-mark"),this.options.modelOnly?Te=(0,f.jW)(m,{query:this.query,list:Te,bonusPoints:this.getFrecencyBonusPointsFunction(m)}):Te=(0,f.Zh)(m,{query:this.query,list:Te,bonusPoints:this.getFrecencyBonusPointsFunction(m)}),R.measureAndClear("modern-searcher-frecency-sort-mark","modern-searcher-frecency-sort")),this.options.selfFirst&&!(!((P=Te[0])===null||P===void 0)&&P.isSelf)&&(Te=[...(0,t.A)(Te,pe=>pe.isSelf),...Te]),R.measureAndClear("modern-searcher-sorting-mark","modern-searcher-sorting"),Te}precomputeMatchNames(m,O){return O.map(P=>({...P,name:this.getNameForComparison(m,P)}))}getSortFuzzyFunction(m,O){let{localeAware:P}=O;return(R,L)=>{if((0,o.yz)(R.item)&&!(0,o.yz)(L.item))return 1;if((0,o.yz)(L.item)&&!(0,o.yz)(R.item)||(0,o.LI)(R.item)&&!(0,o.LI)(L.item))return-1;if((0,o.LI)(L.item)&&!(0,o.LI)(R.item))return 1;if(!(0,o.yz)(R.item)&&!(0,o.yz)(L.item)){const H=R.score-L.score;if(H!==0)return H}if((0,o.yz)(R.item)&&(0,o.yz)(L.item)){const H=R.score-L.score;if(H!==0)return H;var V,B;const U=((V=(0,l.N4)(R.item))!==null&&V!==void 0?V:0)-((B=(0,l.N4)(L.item))!==null&&B!==void 0?B:0);if(U!==0)return U}var K;const b=(K=R.name)!==null&&K!==void 0?K:"";var S;const G=(S=L.name)!==null&&S!==void 0?S:"";return P?(0,h.Ay)(b,G):b>G?1:G>b?-1:0}}getFrecencyBonusPointsFunction(m){return O=>{var P,R;const{item:L}=O,V=(0,E._Z)(m,"position_aware_fuzzy_match")==="treatment",B={};if((0,o.yz)(L)){if(B.isMpim=0,this.options.preferMpimsWithActiveMembers){const K=(0,l.Ug)(L);if(!K)return B;const b=K.map(S=>(0,M.nv)(m,S));(0,n.A)(b,S=>(0,d.oy)(S)||(0,d.eJ)(S))&&(B.isMpimWithDeactivatedMember=T.mpimWithDeactivatedMember)}return B}if(O.isExactMatch?(B.isExactMatch=T.exactMatch,O.isEmojiExactMatch&&(B.isEmojiExactMatch=T.exactMatch)):O.emojiScore?V?B.emojiScoreBonus=this.calculateContinuousFuzzyBonusPoints(O,T.emojiMatch):B.emojiScoreBonus=this.calculateNormalizedFuzzyBonusPoints(O,"emojiScore",T.emojiMatch):(0,a.F)(L)||(0,d.oy)(L)||(0,d.eJ)(L)||(V?B.fuzzyScoreBonus=this.calculateContinuousFuzzyBonusPoints(O,T.fuzzyMatch):B.fuzzyScoreBonus=this.calculateNormalizedFuzzyBonusPoints(O,"score",T.fuzzyMatch)),O.bestPreviousNameMatch&&(B.onlyMatchesPreviousName=T.matchesPreviousName),this.options.preferChannelMembers&&L.presence&&this.options.currentChannel&&(0,I.B)(m,L,this.options.currentChannel)&&(B.isMemberOfThisChannel=T.memberOfThisChannel),(0,o.jq)(L)&&(0,l.m2)(m,L)&&(B.isStarred=T.starredChannel),(0,d.NB)(L)){const K=(0,g.Pu)(m,L.id);K&&(0,l.m2)(m,K)&&(B.isStarred=T.starredChannel)}return L.is_emoji&&(L.name==="thumbsup"||L.name==="point_up")&&(B.isPopularEmojiVariant=T.popularEmoji),this.options.selfFirst&&(0,d.fy)(L)&&(B.isSelf=T.isSelf),this.options.preferChannelWorkflows&&L.type==="channel_action"&&L.channelId===((P=this.options)===null||P===void 0||(R=P.currentChannel)===null||R===void 0?void 0:R.id)&&(B.isWorkflowAssociatedWithChannel=T.workflowAssociatedWithChannel),((0,o.rW)(L)||(0,o.Zp)(L))&&((0,a.F)(L)&&(B.isArchived=T.archivedChannel),(0,o.rW)(L)&&this.options.preferChannelsUserBelongsTo&&!(0,a.F)(L)&&!(0,r.bl)(L)&&(B.isNotChannelMember=T.notInChannel),(0,y.u8)(m)&&(0,l.lo)(L)&&(B.isChannelFromAnotherTeam=T.channelFromAnotherTeam)),(0,d.NB)(L)&&((0,d.oy)(L)||(0,d.eJ)(L))&&(B.isDeactivatedMember=T.deactivatedMember),(L.is_usergroup||L.is_broadcast_keyword)&&(B.isUserGroupOrKeyword=T.userGroupOrKeyword),B}}calculateNormalizedFuzzyBonusPoints(m,O,P){const R=m[O];if(!(0,s.A)(R))return 0;const L=.5**R;return Math.round(P*L)}calculateContinuousFuzzyBonusPoints(m,O){return this.positionAwareFuzzyMatcher.computeSimilarity(this.query,m.item.name)*O}getNameForComparison(m,O){let P;const R=O.item;return(0,o.yz)(R)?P=R.name_normalized:(0,o.mz)(R)?P=(0,i.A)((0,l.SB)(m,R,{publicChannelIncludeHashSign:!1})):(0,d.NB)(R)?P=(0,u.sE)(m,R):R.is_usergroup?P=R.handle||R.name:R.team_name?P=(0,i.A)((0,_.F1)(R)):R.isEmail?P=(0,i.A)(R.value):R.title?P=R.title:P=R.name,P}constructor({query:m,options:O={}}){this.options=O,this.query=m,this.positionAwareFuzzyMatcher=new p([2,3])}},"SearcherSorter")},9868740303:(x,A,e)=>{"use strict";e.d(A,{A:()=>Te});var t=e(8571983633),n=e(9746734072),s=e(9113979368),i=e(897091071),l=e(7715417323),o=e(1703559452),a=e(2141441167),r=e(5503876160),d=e(6422693406),u=e(2664504268),_=e(7599421656),v=e(9349021185),h=e(9552526132),f=e(4423055085),I=e(5613323535),p=e(1197508738),y=e(5455782105),g=e(3212336858),E=e(9931116838),M=e(411655882),T=e(2229186),D=e(1224315998),C=e(2689960678),m=e(82287009),O=e(9190452268),P=e(5770715593),R=e(6617433054),L=e(4096483543),V=e(6471801899),B=e(1917953477),K=e(1072784641),b=e(6897117289),S=e(8956261571),G=e(8847766420),H=e(7260478587),U=e(4119164726),F=e(6533394955),Y=e(6451390137),Z=e(2854654447),ee=e(9107158149),j=e(7688940281),ge=e(2235302340),ne=e(9101533895),ue=e(6728717861),he=e(7600673124),be=e(3829348308),xe=e(4761125736),Le=e(937317117),fe=e(761034736),se=e(4224126550),Q=e(9706240641),k=e(6304789565),N=e(9174292896);const $=(0,k.Ay)("Fetch list records for lists mentions",function(){var Ne=(0,Q.coroutine)(function*(pe,Ee,oe){let{query:ce}=oe;const ke=(0,V.V3)(ce);if(!ke)return;const{listTitle:Ce}=ke,Me=(0,se.Mr)(Ee()),Se=(0,V.xL)(Me,Ce);if(!Se)return;const Ue=Se.id;yield pe((0,N.D)({listId:Ue}))});return function(pe,Ee,oe){return Ne.apply(this,arguments)}}());$.meta={name:"createThunk",key:"createThunkfetchForMentions",description:"Fetch list records for lists mentions"};var W=e(4525672255),q=e(8276911661),re=e(1835177371);class le{search(pe){let{query:Ee,options:oe}=pe;var ce;if(this.maybeStartSession(Ee),((0,t.A)(Ee)||!Ee.length)&&!oe.allowEmptyQuery)return d.S.resolve(C.Ml);if((0,n.A)(Ee))return this.bulkSearch({queryRecords:Ee,options:oe});const ke=(0,F.getStateByTeamId)(this.teamId),Ce=(0,O.Cy)({state:ke}),Me=(0,u.A)();Ce.mark(`modern-searcher-search-mark-${Me}`);const Se=(0,B.O)(Ee??"");I.LI.start({label:I.gC.Searcher,id:Me,options:{teamId:(0,G.ZT)(ke),tags:this.getTraceTags({query:Se,options:oe})}});const Ue=(ce=I.LI.get({label:I.gC.Searcher,id:Me}))===null||ce===void 0?void 0:ce.createChildSpan({name:"searcher:search"}),He=(0,v.aw)(oe,v.lp,Ee);if((0,s.A)(He))return d.S.resolve(C.Ml);if((0,p.x)(ke)!==ue.M9.ONLINE||!(oe!=null&&oe.allowEmptyQueryRemoteSearch)&&!Se.length&&(0,L.A)()&&(0,xe._Z)(ke,"searcher_local_empty_string")==="treatment"&&!oe.entities.lists)return d.S.resolve(this.searchLocal({query:Se,options:He,autoTraceId:Me,parentSpanId:Ue==null?void 0:Ue.getId()}));const Ye=this.fetchRemote({query:Se,options:He,autoTraceId:Me,parentSpanId:Ue==null?void 0:Ue.getId()}).then(J=>this.processFetchedEntities({query:Se,data:J,options:He,autoTraceId:Me,parentSpanId:Ue==null?void 0:Ue.getId()}));if(He.tiered){const J=this.searchLocal({query:Se,options:He,autoTraceId:Me,parentSpanId:Ue==null?void 0:Ue.getId()});return J.promise=Ye.finally(()=>{Ue==null||Ue.close(),I.LI.stop({label:I.gC.Searcher,id:Me})}),d.S.resolve(J).finally(()=>{Ce.measureAndClear(`modern-searcher-search-mark-${Me}`,"modern-searcher-search-tiered")})}return Ye.finally(()=>{Ce.measureAndClear(`modern-searcher-search-mark-${Me}`,"modern-searcher-search"),Ue==null||Ue.close(),I.LI.stop({label:I.gC.Searcher,id:Me})})}flattenResultsWithQueryId(pe){let{returnedResults:Ee,queryIds:oe}=pe;const ce=Ee;for(let ke=0;ke<Ee.length;ke++)for(let Ce=0;Ce<Ee[ke].length;Ce++)ce[ke][Ce].queryId=oe[ke];return(0,i.A)(ce)}bulkSearch(pe){let{queryRecords:Ee,options:oe}=pe;const ce=(0,F.getStateByTeamId)(this.teamId),ke=(0,O.Cy)({state:ce}),Ce=(0,u.A)();ke.mark(`modern-searcher-search-mark-${Ce}`);const Me=(0,v.aw)(oe,v.lp,"");if((0,s.A)(Me))return d.S.resolve(C.Ml);const Se=Ee.map(Ve=>Ve.query),Ue=Ee.map(Ve=>Ve.queryId),He=Se.map(Ve=>(0,B.O)(Ve));let Ye,J;if((0,p.x)(ce)!==ue.M9.ONLINE)return J=He.map(Ve=>this.searchLocal({query:Ve,options:Me})),Ye=this.flattenResultsWithQueryId({returnedResults:J,queryIds:Ue}),d.S.resolve(Ye);const ae=this.fetchRemote({query:He,options:Me}).then(Ve=>(J=Ve.map((Be,Ke)=>this.processFetchedEntities({query:He[Ke],data:Be,options:Me})),this.flattenResultsWithQueryId({returnedResults:J,queryIds:Ue})));return Me.tiered?(J=He.map(Ve=>this.searchLocal({query:Ve,options:Me})),Ye=this.flattenResultsWithQueryId({returnedResults:J,queryIds:Ue}),Ye.promise=ae,d.S.resolve(Ye).finally(()=>{ke.measureAndClear(`modern-searcher-search-mark-${Ce}`,"modern-searcher-search-tiered")})):ae.finally(()=>{ke.measureAndClear(`modern-searcher-search-mark-${Ce}`,"modern-searcher-search")})}searchLocal(pe){let{query:Ee,options:oe,autoTraceId:ce,parentSpanId:ke}=pe;var Ce;const Me=(0,F.getStateByTeamId)(this.teamId);let Se=ce;Se||(Se=(0,u.A)(),I.LI.start({label:I.gC.Searcher,id:Se,options:{teamId:(0,G.ZT)(Me),tags:this.getTraceTags({query:Ee,options:oe})}}));const Ue=(Ce=I.LI.get({label:I.gC.Searcher,id:Se}))===null||Ce===void 0?void 0:Ce.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:ke}});if(!Ee.length&&!oe.allowEmptyQuery)return[];const He=(0,v.aw)(oe,v.lp,Ee);if((0,s.A)(He))return[];const Ye=(0,B.O)(Ee),J=this.fetchLocal({query:Ee,options:He}),ae=this.processFetchedEntities({query:Ye,data:J,options:He,autoTraceId:Se,parentSpanId:Ue==null?void 0:Ue.getId()});return Ue==null||Ue.close(),ae}fetchRemote(pe){let{query:Ee,options:oe,autoTraceId:ce,parentSpanId:ke}=pe;var Ce;const Me=(0,F.getStateByTeamId)(this.teamId),Se=(Ce=I.LI.get({label:I.gC.Searcher,id:ce}))===null||Ce===void 0?void 0:Ce.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:ke}});this.pendingRequests.forEach(ze=>ze.cancel()),this.pendingRequests=[];const Ue=[],He=[],{channels:Ye,emoji:J,files:ae,lists:Ve,members:Be,teams:Ke,userGroups:Re,appActions:Fe,workflowTriggers:Ie}=oe.entities;if(Be){let ze;(0,n.A)(Ee)?ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.U7)({queries:Ee,options:oe})):ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.QH)({query:Ee,options:oe})),this.pendingRequests.push(ze),Be.runaway?He.push(ze):Ue.push(ze)}if(Ye&&!(0,n.A)(Ee)){const ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.J6)({query:Ee,options:oe}));this.pendingRequests.push(ze),Ye.runaway?He.push(ze):Ue.push(ze)}if(J&&!(0,n.A)(Ee)){const ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.LR)({query:Ee,options:oe}));this.pendingRequests.push(ze),J.runaway?He.push(ze):Ue.push(ze)}if(ae&&!(0,n.A)(Ee)&&((0,R.A)(Ee)||Ee.length>3)){const ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.cD)({query:Ee,options:oe}));this.pendingRequests.push(ze),ae.runaway?He.push(ze):Ue.push(ze)}if(Ve&&!(0,n.A)(Ee)){const ze=(0,F.dispatchForTeamId)(this.teamId,Ee.indexOf(">")<0?(0,W.E)({query:Ee}):$({query:Ee}));this.pendingRequests.push(ze),Ve.runaway?He.push(ze):Ue.push(ze)}if(Re){let ze;(0,n.A)(Ee)?ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.eR)({queries:Ee,options:oe})):ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.UC)({query:Ee,options:oe})),this.pendingRequests.push(ze),Re.runaway?He.push(ze):Ue.push(ze)}if(Ke&&((0,y.k)(Me)||Ke.onlyExternal||Ke.includeExternal)&&!(0,n.A)(Ee)){const ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.DF)({query:Ee,options:oe}));this.pendingRequests.push(ze),Ke.runaway?He.push(ze):Ue.push(ze)}if((0,E.e)(Me)&&Fe){const ze=(0,F.dispatchForTeamId)(this.teamId,(0,Z.G)()).timeout(2e3).catch(l.A);this.pendingRequests.push(ze),Fe.runaway?He.push(ze):Ue.push(ze)}if(Ie&&!(0,n.A)(Ee)){const ze=(0,F.dispatchForTeamId)(this.teamId,(0,v.fx)({query:Ee}));Ie.runaway?He.push(ze):Ue.push(ze)}return d.S.all(Ue).then(ze=>{let qe;if((0,n.A)(Ee))qe=Ee.map(_t=>this.fetchLocal({query:_t,options:oe})).map(_t=>{const yt={..._t};return yt.remoteIds=(0,v.jl)(ze),yt});else{if(qe=this.fetchLocal({query:Ee,options:oe}),qe.remoteIds=(0,v.jl)(ze),Be&&Be.onlyFromExternalWorkspaceId){var st,ut;qe.members=(ut=(st=ze.find(_t=>!!_t.members))===null||st===void 0?void 0:st.members)!==null&&ut!==void 0?ut:C.Ml}const tt=(0,o.A)((0,a.A)(qe),"length");if(He.length&&!tt)return d.S.all(He).then(()=>this.fetchLocal({query:Ee,options:oe}))}return Se==null||Se.close(),qe}).finally(()=>{this.pendingRequests=[]})}fetchLocal(pe){let{query:Ee,options:oe}=pe;const ce=(0,F.getStateByTeamId)(this.teamId);(0,v.ZD)(oe);const ke={},{members:Ce,channels:Me,teams:Se,userGroups:Ue,appActions:He,views:Ye,broadcastKeywords:J,emoji:ae,files:Ve,lists:Be,channelSections:Ke,emails:Re,modals:Fe,shortcuts:Ie,workflowTriggers:ze,helpArticles:qe,canvasAiSuggestions:st}=oe.entities;if(Me&&(Me.includePublic||Me.includePrivate)&&(ke.channels=(0,v.AC)(ce,oe)),Me&&Me.includeMpims&&(ke.mpims=(0,ne.FS)(ce)),Me&&Me.includeIms&&(ke.ims=(0,ne._B)(ce)),Ce&&(ke.members=Ce.onlyFromExternalWorkspaceId?C.Ml:(0,q.I_)(ce).filter(_t=>(0,ee.zP)(ce,_t.id)&&!(0,he.y)(ce,_t.id))),Se&&(ke.teams=(0,v.mi)(ce,oe)),Ue&&(ke.userGroups=(0,re.jJ)(ce)),He&&(ke.appActions=(0,_.B)(ce)?(0,Y.PL)(ce):(0,v.g2)(ce,He.channel)),Ve&&(ke.files=(0,Le.Gn)(ce)),Be&&(Ee.indexOf(">")<0?ke.lists=(0,se.C0)(ce):ke.listRecords=(0,se.vD)(ce,Ee)),Ye&&(ke.views=(0,v.mK)(ce)),Fe&&(ke.modals=(0,v.A$)(ce)),J){var ut;const _t=J.currentChannel?J.currentChannel.id:null;ke.broadcastKeywords=!((ut=oe.entities.broadcastKeywords)===null||ut===void 0)&&ut.includeAll||!_t?(0,M.A)():(0,T.A)(ce,_t)}if(ae&&(ke.emoji=(0,be.Gt)(ce)),Ke&&(ke.channelSections=(0,a.A)((0,ge.jV)(ce))),(Ie!=null&&Ie.slashCommands||Ie!=null&&Ie.fakeGlobalActions)&&!(Ie!=null&&Ie.isAnnounceOnly)&&(ke.slashCommands=(0,_.B)(ce)?(0,m.A_)(ce,Ie.channel,!!Ie.threadTs,!0).map(_t=>({..._t,id:(0,g.Bs)(_t),isSlashCommand:!0})):(0,v.lS)(ce,Ie.channel,Ie.threadTs)),Ie!=null&&Ie.slackGlobalActions&&(ke.slackGlobalActions=(0,m.Yk)(ce,Ie.channel,Ie.threadTs)),Ie!=null&&Ie.quipShortcutCommands&&(ke.quipShortcutCommands=(0,U.Aw)(ce,!!Ee)),Ie!=null&&Ie.channelActions&&(ke.channelActions=(0,j.fo)(ce,Ie.channel)),Ie!=null&&Ie.fakeGlobalActions&&(ke.fakeGlobalActions=(0,m.JL)(ce,Ie.channel,Ie.threadTs)),Ie!=null&&Ie.callActions&&(ke.callActions=(0,m.Uw)(ce,Ie.channel,Ie.threadTs,Ie.isAnnounceOnly)),ze){const _t=(0,m.NJ)(ce);ze.includeAutomated?ke.workflowTriggers=_t:ke.workflowTriggers=_t.filter(yt=>yt.type===h.M.Shortcut)}Re&&(ke.emails=(0,v.FF)(Ee));const tt=(0,P.dL)(ce);return qe&&tt&&(ke.helpArticles=(0,fe.Fb)(ce,"searcher/fetch_all_articles")),st&&(ke.canvasAiSuggestions=(0,H.rW)(ce,oe)),(0,v.S)(),ke}processFetchedEntities(pe){let{query:Ee,data:oe,options:ce,autoTraceId:ke,parentSpanId:Ce}=pe;var Me,Se,Ue;const He=(0,F.getStateByTeamId)(this.teamId),Ye=(Me=I.LI.get({label:I.gC.Searcher,id:ke}))===null||Me===void 0?void 0:Me.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:Ce}});(0,v.ZD)(ce);const J={},ae=new K.A({query:Ee,options:ce}),Ve=(0,O.Cy)({state:He});Ve.mark("modern-searcher-matching-mark");const Be=(Se=I.LI.get({label:I.gC.Searcher,id:ke}))===null||Se===void 0?void 0:Se.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:Ye==null?void 0:Ye.getId()}});if(oe.channels&&(J.channels=ae.filterChannels(He,oe.channels,(0,v.sr)(He,ce.entities.channels))),oe.members&&(J.members=ae.filterMembers(He,oe.members,(0,v.bE)(He,ce.entities.members))),oe.emails&&oe.members&&!(!(J==null||(Ue=J.members)===null||Ue===void 0)&&Ue.length)&&(J.emails=oe.emails),oe.mpims&&(J.mpims=ae.filterMpims(He,oe.mpims,(0,v.AQ)(He,ce.entities.channels))),oe.ims&&(J.ims=ae.filterIms(He,oe.ims,(0,v.EM)(He,ce.entities.channels))),oe.userGroups&&(J.userGroups=ae.filterUserGroups(He,oe.userGroups,(0,v.H9)(He,ce.entities.userGroups))),oe.teams&&(J.teams=ae.filterTeams(He,oe.teams,(0,v.A1)(He,ce.entities.teams))),oe.views&&(J.views=ae.filterViews(He,oe.views)),oe.modals&&(J.modals=ae.filterModals(He,oe.modals)),oe.appActions&&(J.appActions=ae.filterAppActions(He,oe.appActions)),oe.slashCommands&&(J.slashCommands=ae.filterShortcuts(He,oe.slashCommands,!0)),oe.slackGlobalActions&&(J.slackGlobalActions=ae.filterShortcuts(He,oe.slackGlobalActions)),oe.quipShortcutCommands&&(J.quipShortcutCommands=ae.filterShortcuts(He,oe.quipShortcutCommands)),oe.canvasAiSuggestions&&(J.canvasAiSuggestions=ae.filterShortcuts(He,oe.canvasAiSuggestions)),oe.channelActions&&(J.channelActions=ae.filterShortcuts(He,oe.channelActions)),oe.fakeGlobalActions&&(J.fakeGlobalActions=ae.filterShortcuts(He,oe.fakeGlobalActions)),oe.callActions&&(J.callActions=ae.filterShortcuts(He,oe.callActions)),oe.workflowTriggers&&(J.workflowTriggers=ae.filterWorkflowTriggers(He,oe.workflowTriggers)),oe.broadcastKeywords&&(J.broadcastKeywords=ae.filterBroadcastKeywords(He,oe.broadcastKeywords)),oe.emoji&&(J.emoji=ae.filterEmoji(He,oe.emoji)),oe.channelSections&&(J.channelSections=ae.filterChannelSections(He,oe.channelSections,_t=>{var yt,Kt;return!!(!((yt=ce.entities.channelSections)===null||yt===void 0||(Kt=yt.includeTypes)===null||Kt===void 0)&&Kt[_t.type])})),oe.files&&(J.files=ae.filterFiles(He,oe.files,(0,v.Do)(He,ce.entities.files))),oe.lists&&(J.lists=ae.filterLists(He,oe.lists)),oe.listRecords){var Ke;const{recordQuery:_t}=(Ke=(0,V.V3)(Ee))!==null&&Ke!==void 0?Ke:{},yt=new K.A({query:_t,options:ce});J.listRecords=yt.filterListRecords(He,oe.listRecords)}oe.helpArticles&&(J.helpArticles=ae.filterHelpArticles(He,oe.helpArticles)),Ve.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),Be==null||Be.close();const Re=(0,v.SI)(J,oe.remoteIds||{});let Fe=(0,i.A)(Object.values(Re));const Ie=500,ze=3;var qe;const st=Math.min(((qe=ce==null?void 0:ce.limit)!==null&&qe!==void 0?qe:1)*ze,Ie);if(ce.sort&&!ce.sort.bypassSorting){var ut;let _t=!1;Fe.length<st&&(_t=!0);const yt=new b.A({query:Ee,options:{modelOnly:_t,...ce.sort}}),Kt=(ut=I.LI.get({label:I.gC.Searcher,id:ke}))===null||ut===void 0?void 0:ut.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:Ye==null?void 0:Ye.getId()}});Fe=yt.sort(He,Re),Kt==null||Kt.close()}if(ce.sort&&ce.sort.frecency&&!ce.sort.bypassSorting){var tt;const _t=(tt=I.LI.get({label:I.gC.Searcher,id:ke}))===null||tt===void 0?void 0:tt.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:Ye==null?void 0:Ye.getId()}});Fe=new S.A({query:Ee,options:ce.sort,teamId:(0,G.ZT)(He),enterpriseId:(0,y.k)(He)&&(0,G.jV)(He)?(0,G.jV)(He):void 0}).sort(He,Fe.slice(0,st)),_t==null||_t.close()}return ce.limit&&(Fe=(0,r.A)(Fe,ce.limit)),ce.returnMetadata||(Fe=Fe.map(_t=>_t.item)),(0,v.S)(),Fe||[]}clogSearcherAccept(pe){let{clogger:Ee,data:oe}=pe;const{source:ce,query:ke,results:Ce,selectedItemId:Me,displayedItemIds:Se}=oe,Ue=15;if(!Me)return;const He=Se?Se.length:Ce.length,Ye=Se?Se.indexOf(Me):Ce.findIndex(st=>st.item.id===Me);if(Ye<0)return;const J=Ce.find(st=>st.item.id===Me);if(!J)return;const ae=J.type||"other",Ve=(0,n.A)(ke)?ke.map(st=>(0,B.O)(st)):(0,B.O)(ke),Be=J.source||"local";let Ke;J.type==="mpim"?Ke=J.scoreDetailsByMember:J.type==="member"?Ke={[Me]:{is_exact_match:J.isExactMatch,exact_match_details:J.exactMatchDetails,score_details:J.scoreDetails}}:J.type==="emoji"&&(Ke={[Me]:{is_exact_match:J.isExactMatch}});let Re=[];Ce.some(st=>st.featureVectorRaw)&&(Se?Re=Se.map(st=>{const ut=Ce.find(tt=>tt.item.id===st);return ut&&ut.featureVectorRaw.serialize()||""}):Re=Ce.map(st=>{var ut,tt;return st==null||(ut=st.featureVectorRaw)===null||ut===void 0||(tt=ut.serialize)===null||tt===void 0?void 0:tt.call(ut)}));let Ie;(0,n.A)(Ve)?Ie=Ve.reduce((st,ut)=>st+(0,v.Cs)((0,B.O)(ut)),0):Ie=(0,v.Cs)(Ve);var ze;const qe={source:ce,query_length:Ve.length?Ve.length:0,query_terms_length:Ie,results_length:He,selected_position:Ye,selected_type:ae,selected_source:Be,selected_match_details:Ke,feature_vector_list:Re.slice(0,Ue),session_length:Date.now()-((ze=this.sessionTs)!==null&&ze!==void 0?ze:0)};Ee.track(D.EventId.SEARCHER_ACCEPT,qe),this.endSession()}clogSearcherReject(pe){let{clogger:Ee,data:oe}=pe;const{source:ce,query:ke,results:Ce,displayedItemIds:Me}=oe,Se=Me!==void 0?Me.length:Ce.length,Ue=(0,n.A)(ke)?ke.map(ae=>(0,B.O)(ae)):(0,B.O)(ke);let He;(0,n.A)(Ue)?He=Ue.reduce((ae,Ve)=>ae+(0,v.Cs)((0,B.O)(Ve)),0):He=(0,v.Cs)(Ue);var Ye;const J={source:ce,query_length:Ue.length?Ue.length:0,query_terms_length:He,results_length:Se,session_length:Date.now()-((Ye=this.sessionTs)!==null&&Ye!==void 0?Ye:0)};Ee.track(D.EventId.SEARCHER_REJECT,J),this.endSession()}maybeStartSession(pe){!this.sessionId&&pe!==void 0&&pe.length&&(this.sessionTs=Date.now(),this.sessionId=(0,u.A)())}endSession(){this.sessionTs=null,this.sessionId=null}getTraceTags(pe){let{query:Ee,options:oe}=pe;var ce;const ke=oe.entities;return{source:(oe==null?void 0:oe.searchViewContext)||((ce=oe.sort)===null||ce===void 0?void 0:ce.source),tiered:oe.tiered,is_searcher_sessions:!0,entities:Object.keys(ke).filter(Ce=>!!ke[Ce]).sort().toString(),query_length:Ee.length}}constructor(pe){this.teamId=pe,this.pendingRequests=[],this.sessionId=null,this.sessionTs=null}}c(le,"Searcher");const Ae={};function Te(Ne){let{teamId:pe,key:Ee}=Ne;if(!pe)throw new Error("Searcher must be instantiated with a team id");return Ae[pe]&&!Ae[pe][Ee]&&(Ae[pe][Ee]=new le(pe)),Ae[pe]||(Ae[pe]={},Ae[pe][Ee]=new le(pe)),Ae[pe][Ee]}c(Te,"getSearcher"),(0,f.ul)("searcherObj",{search:(Ne,pe)=>new le(Ne).search(pe),searchLocal:(Ne,pe)=>{new le(Ne).searchLocal(pe)}})},4342685672:(x,A,e)=>{"use strict";e.d(A,{In:()=>s,KV:()=>n,nK:()=>i});var t=e(4761125736);const n="autocompleteFallback";function s(){return n}c(s,"getModelForSorter");function i(l){return(0,t._Z)(l,"searcher_sessions_phase_1")==="treatment"}c(i,"shouldUseSearcherSessions")},8956261571:(x,A,e)=>{"use strict";e.d(A,{A:()=>$n});var t=e(3367239067),n=e(1703559452),s=e(9816084745),i=e(5141066605),l=e(3037015781),o=e(9884588328),a=e(1407713935),r=e(6007206761),d=e(6495946979);function u(w){var de;const we=(de=w.actions)===null||de===void 0?void 0:de[0];if(!we)return 0;const Et=parseFloat(we.ts);return isNaN(Et)?0:Et}c(u,"getLatestActionTs");var _=e(8170643398),v=e(9262712126),h=e(5096647761),f=e(6536982570),I=e(9190452268),p=e(3879245650),y=e(735940183),g=e(4096483543),E=e(8040098042),M=e(4496040127),T=e(6422693406),D=e(1520110262),C=e(3707193570),m=e(7948868735),O=e(6533394955);const P=.014,R=.094,L=.148,V=.132,B=.179;class K extends m.F{fetchData(){return(0,C.Am)(this.teamId)?(0,O.dispatchForTeamId)(this.teamId,(0,D.yp)()).catch(de=>({exception:de})).then(de=>new b({topEmojis:de.top_emojis,topMpims:de.top_mpims,topChannels:de.top_channels,topUsers:de.top_users,emojiFeatures:de.emoji_features,mpimFeatures:de.mpim_features,channelFeatures:de.channel_features,userFeatures:de.user_features,mpimCtr:de.mpim_ctr,channelCtr:de.channel_ctr,userCtr:de.user_ctr,emojiCtr:de.emoji_ctr,otherCtr:de.other_ctr,defaultFeatureNames:de.default_features,topAppActions:de.top_app_actions,topGlobalActions:de.top_global_actions,topSlashCommands:de.top_slash_commands,topWorkflowTriggers:de.top_workflow_triggers,topChannelActions:de.top_channel_actions,appActionCtr:de.app_action_ctr,globalActionCtr:de.global_action_ctr,slashCommandCtr:de.slash_command_ctr,workflowTriggerCtr:de.workflow_trigger_ctr,channelActionCtr:de.channel_action_ctr,usersHasDmed:de.users_has_dmed})):T.S.resolve(new b)}getStaleWhileRevalidate(){return super.getStaleWhileRevalidate(new b)}constructor(de){super(),this.teamId=de}}c(K,"AutocompleteFeaturesCache");class b{getFeatures(de,we){const Et=this.topEntities[we],gn=this.featureNames[we]||this.featureNames.default,Zt=this.defaultEntityFeatures[we],cn=Et&&Et[de];if(cn&&gn){const qt={};for(let _s=0;_s<gn.length;_s++)qt[gn[_s]]=cn[_s];const Xn={team_ctr_90dd:Zt.team_ctr_90dd,user_ctr_30dd:Zt.user_ctr_30dd};for(const _s of Object.keys(Zt))Xn[_s]=qt[_s]||Zt[_s];return Xn}return Zt}getEntityCtr(de){return this.entityCtr[de]||this.otherEntityCtr}getUserDmChannelMetadata(de){return this.usersHasDmed?this.usersHasDmed[de]:null}constructor({topEmojis:de,topMpims:we,topChannels:Et,topUsers:gn,emojiFeatures:Zt,mpimFeatures:cn,channelFeatures:qt,userFeatures:Xn,mpimCtr:_s,channelCtr:Ts,userCtr:As,emojiCtr:Os,otherCtr:is,defaultFeatureNames:Is,topAppActions:dn,topGlobalActions:Yn,topSlashCommands:ht,topWorkflowTriggers:Rs,topChannelActions:ls,appActionCtr:Ms,globalActionCtr:Ds,slashCommandCtr:Ze,workflowTriggerCtr:Ut,channelActionCtr:Lt,usersHasDmed:it}={}){this.topEntities={emoji:de,mpim:we,channel:Et,member:gn,appAction:dn,globalAction:Yn,slashCommand:ht,workflowTrigger:Rs,channelAction:ls},this.featureNames={emoji:Zt,mpim:cn,channel:qt,member:Xn,default:Is},this.otherEntityCtr=is??B,this.entityCtr={mpim:_s??P,channel:Ts??L,member:As??V,emoji:Os??R,appAction:Ms??this.otherEntityCtr,globalAction:Ds??this.otherEntityCtr,slashCommand:Ze??this.otherEntityCtr,workflowTrigger:Ut??this.otherEntityCtr,channelAction:Lt??this.otherEntityCtr},this.defaultEntityFeatures={};for(const At of Object.keys(this.entityCtr))this.defaultEntityFeatures[At]={team_ctr_90dd:this.getEntityCtr(At),user_ctr_30dd:this.getEntityCtr(At)};this.usersHasDmed=it}}c(b,"AutocompleteFeatures");const S={};function G(w){let{teamId:de,enterpriseId:we}=w;const Et=we||de||"_default";return S[Et]||(S[Et]=new K(de)),S[Et]}c(G,"getAutocompleteFeaturesCache");var H=e(1041273904),U=e(5238395322),F=e(8571983633),Y=e(2774532222),Z=e(7110454183),ee=e(1022424641),j=e(8274921051),ge=e(4630136761),ne=e(4562579337),ue=e(796111729),he=e(3051657319),be=e(7715417323);class xe{writeNumericalFeature(de,we){!de||!isFinite(de)||(this.writeIdAndType(we,j.c.NUMERICAL),this.ensureCapacity(4),this.view.setFloat32(this.offset,de),this.offset+=4)}writeBinaryFeature(de,we){de&&this.writeIdAndType(we,j.c.BINARY)}writeTextFeature(de,we){if(!de)return;this.writeIdAndType(we,j.c.TEXT);const Et=unescape(encodeURIComponent(de));this.ensureCapacity(2+Et.length),this.view.setUint16(this.offset,Et.length),this.offset+=2,(0,he.A)(Et.length).forEach(gn=>{this.view.setUint8(this.offset,Et.charCodeAt(gn)),this.offset+=1})}writeNullFeature(){(0,be.A)()}writeIdAndType(de,we){this.ensureCapacity(2),this.view.setUint16(this.offset,de<<3|we),this.offset+=2}ensureCapacity(de){this.offset+de>this.buffer.byteLength&&this.resize(this.offset+de)}resize(de){if(this.buffer.byteLength>=de)return;const we=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(we).set(new Uint8Array(this.buffer)),this.buffer=we,this.view=new DataView(this.buffer)}serialize(){return btoa(String.fromCharCode(...new Uint8Array(this.buffer.slice(0,this.offset))))}constructor(){this.buffer=new ArrayBuffer(256),this.view=new DataView(this.buffer),this.offset=0}}c(xe,"BinaryFeatureVectorSerializer");var Le=e(3395271606);const fe=(0,Le.A)(j.Q);function se(w){return fe[w]}c(se,"getFeatureNameFromId");var Q=e(9150404500);const k={globalFeatures:["ID","FRECENCY","RAW_FRECENCY","FRECENCY_BONUS","FRECENCY_LOG_HIT_COUNT","FRECENCY_LOG_HIT_COUNT_SCALED","FRECENCY_HIT_COUNT","FRECENCY_WEIGHT_HIT_VISITS","FRECENCY_WEIGHT_ITEM_VISITS","FRECENCY_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT_SCALED","FRECENCY_HIT_VISITS_4H","FRECENCY_HIT_VISITS_1D","FRECENCY_HIT_VISITS_3D","FRECENCY_HIT_VISITS_1W","FRECENCY_HIT_VISITS_1M","FRECENCY_HIT_VISITS_90D","FRECENCY_ITEM_VISITS_4H","FRECENCY_ITEM_VISITS_1D","FRECENCY_ITEM_VISITS_3D","FRECENCY_ITEM_VISITS_1W","FRECENCY_ITEM_VISITS_1M","FRECENCY_ITEM_VISITS_90D","FUZZY_SCORE","FUZZY_SCORE_50","FUZZY_SCORE_25","FUZZY_SCORE_ALL","FUZZY_SCORE_SCALED_EXP","FUZZY_SCORE_SCALED_FLIPPED","FUZZY_SCORE_SCALED_SUBTRACT","NAV_EXACT_MATCH","NAV_EXACT_PREFIX_MATCH","NAV_NORMAL_MATCH","NAV_NORMAL_PREFIX_MATCH","NAV_NORMAL_MATCH_NO_USER","NAV_NORMAL_PREFIX_MATCH_NO_USER","NAV_QUERY_LENGTH","NAV_TEXT_LENGTH","NAV_QUERY_RATIO_LENGTH_STRING","EXACT_MATCH_LOG_RESULTS","USER_ENTITY_TYPE_CTR_30DD","NUM_RESULTS"],userFeatures:["TYPE_NAVIGATION_USER","USER_PRIORITY","USER_IS_ACTIVE","USER_IS_EXTERNAL","USER_IS_CURRENT_USER","MEMBER_OF_CURRENT_CHANNEL","CURRENT_USER_TEXTY","USER_SAME_TEAM","USER_IS_BOT","USER_DM_IS_UNREAD","USER_DM_IS_STARRED","USER_DM_READ_AGE_DECAY_7D","USER_DM_READ_AGE_DECAY_2H","USER_DM_READ_AGE_DECAY_7D_V2","USER_DM_READ_AGE_DECAY_2H_V2","USER_DM_LATEST_MSG_AGE_DECAY_7D","USER_DM_LATEST_MSG_AGE_DECAY_2H","USER_DM_LATEST_MSG_AGE_DECAY_7D_V2","USER_DM_LATEST_MSG_AGE_DECAY_2H_V2","USER_DM_IS_FROZEN","USER_DM_HAS_DRAFT","USER_DM_NULL","USER_DM_EMPTY","USER_DM_NOT_OPEN","USER_DM_OPEN","USER_DM_LATEST_OLDER_30D","USER_DM_LATEST_OLDER_90D","USER_DM_EMPTY_V2","USER_DM_LATEST_OLDER_30D_V2","USER_DM_LATEST_OLDER_90D_V2","USER_HAS_DMED","USER_DM_READ_AGE_DECAY_2H_V3","USER_DM_READ_AGE_DECAY_7D_V3","USER_DM_READ_OLDER_7D","USER_DM_READ_OLDER_30D","USER_DM_READ_OLDER_90D","USER_QUERY_RATIO_LENGTH_STRING","NAV_NORMAL_PREFIX_MATCH_USER","NAV_NORMAL_MATCH_USER","USER_FIRST_NAME_NORMAL_MATCH","USER_FIRST_NAME_NORMAL_PREFIX_MATCH","USER_FIRST_NAME_EXACT_MATCH","USER_FIRST_NAME_EXACT_PREFIX_MATCH","USER_LAST_NAME_NORMAL_MATCH","USER_LAST_NAME_NORMAL_PREFIX_MATCH","USER_LAST_NAME_EXACT_MATCH","USER_LAST_NAME_EXACT_PREFIX_MATCH","USER_EMAIL_MATCH","USER_EMAIL_ONLY_MATCH","QUERY_IS_SELF","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","USER_MPIM_READ_AGE_DECAY_7D","USER_MPIM_READ_AGE_DECAY_2H","USER_MPIM_LATEST_MSG_AGE_DECAY_7D","USER_MPIM_LATEST_MSG_AGE_DECAY_2H","USER_MPIM_FRECENCY_LOG_ITEM_COUNT","USER_MPIM_FRECENCY_LOG_HIT_COUNT"],channelFeatures:["TYPE_NAVIGATION_CHANNEL","CHANNEL_IS_MEMBER","CHANNEL_PRIORITY","CHANNEL_IS_STARRED","CHANNEL_IS_ARCHIVED","CHANNEL_IS_OTHER_TEAM","CHANNEL_IS_FROZEN","CHANNEL_HAS_DRAFT","CHANNEL_QUERY_RATIO_LENGTH_STRING","QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL","NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS","CHANNEL_IS_UNREAD","CHANNEL_READ_AGE_DECAY_2H","CHANNEL_READ_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_2H","CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH","CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH","ONLY_MATCHES_PREVIOUS_NAME","CHANNEL_TEAM_CTR_90DD","CHANNEL_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION"],mpimFeatures:["TYPE_NAVIGATION_MPIM","MPIM_IS_STARRED","MPIM_READ_AGE_DECAY_2H","MPIM_READ_AGE_DECAY_7D","MPIM_LATEST_MSG_AGE_DECAY_2H","MPIM_LATEST_MSG_AGE_DECAY_7D","MPIM_IS_UNREAD","MPIM_WITH_DEACTIVATED_USER","MPIM_PRIORITY","MPIM_QUERY_RATIO_LENGTH_STRING","MPIM_MEMBERS","MPIM_MEMBER_NAME_MATCHES","MPIM_MEMBER_ALL_MATCHES","MPIM_MATCHER_SCORE","MPIM_MATCHER_SCORE_0","MPIM_MATCHER_SCORE_1","MPIM_MATCHER_SCORE_2","MPIM_MATCHER_SCORE_3","MPIM_TEAM_CTR_90DD","MPIM_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D","MPIM_USERS_PCT_NON_EMPTY_DMS","MPIM_USERS_PCT_NON_NULL_DMS","MPIM_USERS_ALL_INTERNAL"],viewFeatures:["TYPE_NAVIGATION_VIEW"],fileFeatures:["TYPE_NAVIGATION_FILE","FILE_SUGGESTION_SCORE","FILE_AGE_DECAY_7D","FILE_AGE_DECAY_28D","FILE_AGE_DECAY_90D","FILE_FROM_CURRENT_USER","FILE_LOG_PUBLIC_SHARES","FILE_LOG_PRIVATE_SHARES","FILE_LOG_ACTIONS","FILE_LATEST_ACTION_AGE_DECAY_2H","FILE_LATEST_ACTION_AGE_DECAY_7D","FILE_LATEST_ACTION_AGE_DECAY_90D","FILE_LATEST_SHARE_AGE_DECAY_2H","FILE_LATEST_SHARE_AGE_DECAY_7D","FILE_LATEST_SHARE_AGE_DECAY_90D","FILE_CHANNEL_CTR","FILE_SUGGESTIONS_SEARCHER","FILE_USER_CTR","FILE_NAME_CONTAINS_QUERY_NORMALIZED","FILE_IS_CANVAS","FILE_HAS_DMS_WITH_CREATOR","FILE_HAS_DMS_WITH_CREATOR_V2","FILE_LATEST_VIEW_BY_USER_OLDER_90D"],linkFeatures:["TYPE_NAVIGATION_LINK"],modalFeatures:["TYPE_NAVIGATION_MODAL"],teamFeatures:["TYPE_NAVIGATION_TEAM"],emojiFeatures:["EMOJI_EXACT_MATCH","EMOJI_QUERY_LENGTH_RATIO","EMOJI_TOTAL_COMBO_BREAKS","EMOJI_COMBO_BREAK_0","EMOJI_COMBO_BREAK_1","EMOJI_COMBO_BREAK_2","EMOJI_COMBO_BREAK_3","TYPE_EMOJI","FRECENCY_HIT_VISIT_DECAY_2H","FRECENCY_HIT_VISIT_DECAY_7D","FRECENCY_ITEM_VISIT_DECAY_2H","FRECENCY_ITEM_VISIT_DECAY_7D","EMOJI_TEAM_CTR_90DD","EMOJI_USER_CTR_30DD"],broadcastKeywordFeatures:["IS_BROADCAST_KEYWORD","HERE_KEYWORD","HERE_KEYWORD_EXACT_MATCH","BROADCAST_KEYWORD_NORMAL_MATCH"],queryFeatures:["TYPE_QUERY","TYPE_USER_QUERY","TYPE_QUERY_HISTORY","ACTIVE_TOKEN_STRING","ACTIVE_TOKEN_MEMBER","ACTIVE_TOKEN_PHRASE","ACTIVE_TOKEN_QUERY_SUGGESTION","ACTIVE_TOKEN_FILTER_DURING","ACTIVE_TOKEN_FILTER_FROM","ACTIVE_TOKEN_FILTER_IN","ACTIVE_TOKEN_FILTER_TO","ACTIVE_TOKEN_FILTER_BEFORE","ACTIVE_TOKEN_FILTER_HAS","ACTIVE_TOKEN_FILTER_IS","ACTIVE_TOKEN_FILTER_ON","ACTIVE_TOKEN_FILTER_AFTER","ACTIVE_TOKEN_FILTER_WITH","QUERY_SUGGESTION_SCORE_V2","QUERY_FRECENCY_RAW","QUERY_FRECENCY_WEIGHT_HIT_VISITS","QUERY_FRECENCY_HIT_COUNT","QUERY_FRECENCY_WEIGHT_ITEM_VISITS","QUERY_FRECENCY_ITEM_COUNT","QUERY_FUZZY_SCORE","QUERY_FRECENCY_BONUS","QUERY_HISTORY_AGE_DECAY_30D","QUERY_HISTORY_LOG_INDEX","FILTER_USER_IS_ACTIVE","FILTER_USER_IS_CURRENT_USER","FILTER_USER_DM_IS_STARRED","FILTER_USER_DM_IS_UNREAD","FILTER_USER_DM_READ_AGE_DECAY_7D","FILTER_USER_DM_READ_AGE_DECAY_2H","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H","FILTER_USER_FIRST_NAME_NORMAL_MATCH","FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_LAST_NAME_NORMAL_MATCH","FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_PRIORITY","FILTER_CHANNEL_IS_ARCHIVED","FILTER_CHANNEL_IS_MEMBER","FILTER_CHANNEL_IS_STARRED","FILTER_CHANNEL_IS_UNREAD","FILTER_CHANNEL_READ_AGE_DECAY_7D","FILTER_CHANNEL_READ_AGE_DECAY_2H","FILTER_CHANNEL_PRIORITY","STRING_EXACT_MATCH","STRING_EXACT_PREFIX_MATCH","STRING_NORMAL_MATCH","STRING_NORMAL_PREFIX_MATCH","STRING_SAME_NUMBER_WORDS","EXCESS_STRING_LENGTH","SUGGESTION_TEXT_LENGTH","QUERY_LENGTH","QUERY_RATIO_LENGTH_STRING","QUERY_TOKEN_NORMAL_MATCH","QUERY_TOKEN_NORMAL_PREFIX_MATCH","QUERY_LOG_HIT_COUNT"],appActionFeatures:["TYPE_APP_ACTION","APP_ACTION_TEAM_CTR","APP_ACTION_USER_CTR","OS_APP_ACTION"],shortcutFeatures:["APP_NAME_PREFIX_MATCH","SHORTCUT_ENTITY_TYPE_CTR","BEST_NAME_MATCH_LOG_RESULTS"],slashCommandFeatures:["TYPE_SLASH_COMMAND","SLASH_COMMAND_TEAM_CTR","SLASH_COMMAND_USER_CTR"],globalActionFeatures:["TYPE_GLOBAL_ACTION","IS_INVITE_WORKSPACE","GLOBAL_ACTION_TEAM_CTR","GLOBAL_ACTION_USER_CTR"],channelActionFeatures:["TYPE_CHANNEL_ACTION","CHANNEL_ACTION_TEAM_CTR","CHANNEL_ACTION_USER_CTR"],appFeatures:["TYPE_APP"],messageFeatures:["TYPE_NAVIGATION_MESSAGE"],workflowTriggerFeatures:["TYPE_WORKFLOW_TRIGGER","WORKFLOW_TRIGGER_TEAM_CTR","WORKFLOW_TRIGGER_USER_CTR"],channelAssociatedWorkflowFeatures:["HAS_CHANNEL_ASSOCIATION"]};var N=e(9422011462);function $(w,de){return rn.fromSuggestion(w,de)}c($,"featureVectorForSuggestion");function W(){return(0,ue.Wo)({label:"SORTER-RANKING"})}c(W,"getLogger");function q(w){return Number.isInteger(w)}c(q,"isIntegerWithType");const re=60*60,le=24*re;var Ae,Te,Ne,pe,Ee,oe,ce,ke,Ce,Me,Se,Ue,He,Ye,J,ae,Ve,Be,Ke,Re,Fe,Ie,ze,qe,st,ut,tt,_t,yt,Kt,Qt,Jt,Gt,wt,Bt,Wt,Tn,Ot;const Ft={FRECENCY:w=>je({id:j.Q.FRECENCY,value:hn(w)}),TYPE_NAVIGATION_CHANNEL:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.TYPE_NAVIGATION_CHANNEL,value:we})},TYPE_NAVIGATION_FILE:w=>je({id:j.Q.TYPE_NAVIGATION_FILE,value:w.suggestionType===Q.fd.FILE_NAVIGATION}),TYPE_NAVIGATION_LINK:w=>je({id:j.Q.TYPE_NAVIGATION_LINK,value:w.suggestionType===Q.fd.LINK_NAVIGATION}),TYPE_NAVIGATION_MODAL:w=>je({id:j.Q.TYPE_NAVIGATION_MODAL,value:w.suggestionType===Q.fd.MODAL_NAVIGATION}),TYPE_NAVIGATION_MPIM:w=>je({id:j.Q.TYPE_NAVIGATION_MPIM,value:!!(0,a.yz)(w.item)}),TYPE_NAVIGATION_USER:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.TYPE_NAVIGATION_USER,value:we})},TYPE_QUERY:w=>je({id:j.Q.TYPE_QUERY,value:w.suggestionType===Q.fd.QUERY}),TYPE_QUERY_HISTORY:w=>je({id:j.Q.TYPE_QUERY_HISTORY,value:w.suggestionType===Q.fd.QUERY_HISTORY}),ACTIVE_TOKEN_FILTER_IN:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_IN,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_IN}),ACTIVE_TOKEN_FILTER_FROM:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_FROM,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_FROM}),ACTIVE_TOKEN_FILTER_TO:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_TO,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_TO}),ACTIVE_TOKEN_FILTER_BEFORE:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_BEFORE,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_BEFORE}),ACTIVE_TOKEN_FILTER_DURING:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_DURING,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_DURING}),ACTIVE_TOKEN_FILTER_ON:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_ON,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_ON}),ACTIVE_TOKEN_FILTER_AFTER:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_AFTER,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_AFTER}),ACTIVE_TOKEN_FILTER_HAS:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_HAS,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_HAS}),ACTIVE_TOKEN_FILTER_IS:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_IS,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_IS}),ACTIVE_TOKEN_FILTER_WITH:w=>je({id:j.Q.ACTIVE_TOKEN_FILTER_WITH,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.FILTER_WITH}),ACTIVE_TOKEN_MEMBER:w=>je({id:j.Q.ACTIVE_TOKEN_MEMBER,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.MEMBER}),ACTIVE_TOKEN_STRING:w=>je({id:j.Q.ACTIVE_TOKEN_STRING,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.STRING}),ACTIVE_TOKEN_PHRASE:w=>je({id:j.Q.ACTIVE_TOKEN_PHRASE,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.PHRASE}),STRING_EXACT_MATCH:w=>Rt({id:j.Q.STRING_EXACT_MATCH,suggestion:w,extractionFunction:as}),STRING_EXACT_PREFIX_MATCH:w=>Rt({id:j.Q.STRING_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:jn}),STRING_NORMAL_MATCH:w=>Rt({id:j.Q.STRING_NORMAL_MATCH,suggestion:w,extractionFunction:es}),STRING_NORMAL_PREFIX_MATCH:w=>Rt({id:j.Q.STRING_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn}),STRING_SAME_NUMBER_WORDS:w=>Rt({id:j.Q.STRING_SAME_NUMBER_WORDS,suggestion:w,extractionFunction:ss}),EXCESS_STRING_LENGTH:w=>Rt({id:j.Q.EXCESS_STRING_LENGTH,suggestion:w,extractionFunction:ft}),ID:w=>je({id:j.Q.ID,value:w.logId||w.id}),FILE_SUGGESTION_SCORE:w=>je({id:j.Q.FILE_SUGGESTION_SCORE,value:rt(w)}),ACTIVE_TOKEN_QUERY_SUGGESTION:w=>je({id:j.Q.ACTIVE_TOKEN_QUERY_SUGGESTION,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.API}),QUERY_SUGGESTION_SCORE_V2:w=>je({id:j.Q.QUERY_SUGGESTION_SCORE_V2,value:Nn(w)}),TYPE_NAVIGATION_TEAM:w=>je({id:j.Q.TYPE_NAVIGATION_TEAM,value:w&&w.suggestionType===Q.fd.TEAM_NAVIGATION}),TYPE_NAVIGATION_VIEW:w=>je({id:j.Q.TYPE_NAVIGATION_VIEW,value:w&&w.suggestionType===Q.fd.VIEW_NAVIGATION}),TYPE_USER_QUERY:w=>je({id:j.Q.TYPE_USER_QUERY,value:w&&w.suggestionType===Q.fd.QUERY_USER}),NAV_EXACT_MATCH:w=>Rt({id:j.Q.NAV_EXACT_MATCH,suggestion:w,extractionFunction:as,text:Ct(w)}),NAV_EXACT_PREFIX_MATCH:w=>Rt({id:j.Q.NAV_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:jn,text:Ct(w)}),NAV_NORMAL_MATCH:w=>Rt({id:j.Q.NAV_NORMAL_MATCH,suggestion:w,extractionFunction:es,text:Ct(w)}),CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH:(w,de)=>{let{itemIsChannel:we}=de;var Et,gn;return Rt({id:j.Q.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH,suggestion:w,extractionFunction:Zt=>{let{text:cn,query:qt}=Zt;return cn?(0,n.A)(cn.split(",").map(Xn=>as({text:Xn,query:qt}))):!1},text:we?(Et=w.item)===null||Et===void 0||(gn=Et.previous_names)===null||gn===void 0?void 0:gn.join(","):null})},CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH:(w,de)=>{let{itemIsChannel:we}=de;var Et,gn;return Rt({id:j.Q.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH,suggestion:w,extractionFunction:Zt=>{let{text:cn,query:qt}=Zt;return cn?(0,n.A)(cn.split(",").map(Xn=>jn({text:Xn,query:qt}))):!1},text:we?w==null||(Et=w.item)===null||Et===void 0||(gn=Et.previous_names)===null||gn===void 0?void 0:gn.join(","):null})},CHANNEL_IS_ARCHIVED:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_IS_ARCHIVED,value:we&&(0,r.F)(w.item)})},CHANNEL_IS_MEMBER:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_IS_MEMBER,value:we&&(0,d.bl)(w.item)})},CHANNEL_IS_STARRED:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_IS_STARRED,value:we&&w.isStarred})},MPIM_IS_STARRED:w=>je({id:j.Q.MPIM_IS_STARRED,value:(0,a.yz)(w.item)&&w.isStarred}),CHANNEL_IS_UNREAD:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_IS_UNREAD,value:we&&(0,o.KJ)(w.item)})},MPIM_IS_UNREAD:w=>je({id:j.Q.MPIM_IS_UNREAD,value:(0,a.yz)(w.item)&&(0,o.KJ)(w.item)}),CHANNEL_IS_OTHER_TEAM:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_IS_OTHER_TEAM,value:we&&(0,o.lo)(w.item)})},USER_IS_ACTIVE:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_IS_ACTIVE,value:we&&(0,_.ls)(w.item)})},USER_IS_EXTERNAL:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_IS_EXTERNAL,value:we&&(0,h.g)(w.item)})},USER_IS_BOT:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_IS_BOT,value:we&&(0,ne.A)(w.item)})},USER_SAME_TEAM:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_SAME_TEAM,value:we&&!!w.sameTeam})},USER_IS_CURRENT_USER:(w,de)=>{let{isCurrentUser:we}=de;return je({id:j.Q.USER_IS_CURRENT_USER,value:we})},USER_DM_IS_STARRED:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_IS_STARRED,value:we&&w.im&&w.imIsStarred})},USER_DM_IS_UNREAD:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_IS_UNREAD,value:we&&w.im&&(0,o.KJ)(w.im)})},CHANNEL_PRIORITY:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_PRIORITY,value:we&&(w==null?void 0:w.priority)})},CHANNEL_READ_AGE_DECAY_7D:(w,de)=>{let{itemIsChannel:we,now:Et}=de;return je({id:j.Q.CHANNEL_READ_AGE_DECAY_7D,value:we&&xt(Et,parseFloat((Ae=w.lastReadTs)!==null&&Ae!==void 0?Ae:""),7*le)||0})},CHANNEL_READ_AGE_DECAY_2H:(w,de)=>{let{itemIsChannel:we,now:Et}=de;return je({id:j.Q.CHANNEL_READ_AGE_DECAY_2H,value:we&&xt(Et,parseFloat((Te=w.lastReadTs)!==null&&Te!==void 0?Te:""),2*re)||0})},MPIM_READ_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_READ_AGE_DECAY_2H,value:(0,a.yz)(w.item)&&xt(we,parseFloat((Ne=w.lastReadTs)!==null&&Ne!==void 0?Ne:""),2*re)||0})},MPIM_READ_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_READ_AGE_DECAY_7D,value:(0,a.yz)(w.item)&&xt(we,parseFloat((pe=w.lastReadTs)!==null&&pe!==void 0?pe:""),7*le)||0})},USER_DM_READ_AGE_DECAY_7D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_AGE_DECAY_7D,value:we&&w.im&&xt(Et,parseFloat((Ee=w.lastReadTs)!==null&&Ee!==void 0?Ee:""),7*le)||0})},USER_DM_READ_AGE_DECAY_7D_V2:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_AGE_DECAY_7D_V2,value:we&&w.im&&xt(Et,parseFloat((oe=w.lastReadImTs)!==null&&oe!==void 0?oe:""),7*le)||0})},USER_DM_READ_AGE_DECAY_7D_V3:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_AGE_DECAY_7D_V3,value:we&&xt(Et,parseFloat((ce=rs(w))!==null&&ce!==void 0?ce:""),7*le)||0})},USER_DM_READ_AGE_DECAY_2H:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_AGE_DECAY_2H,value:we&&w.im&&xt(Et,parseFloat((ke=w.lastReadTs)!==null&&ke!==void 0?ke:""),2*re)||0})},USER_DM_READ_AGE_DECAY_2H_V2:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_AGE_DECAY_2H_V2,value:we&&w.im&&xt(Et,parseFloat((Ce=w.lastReadImTs)!==null&&Ce!==void 0?Ce:""),2*re)||0})},USER_DM_READ_AGE_DECAY_2H_V3:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_AGE_DECAY_2H_V3,value:we&&xt(Et,parseFloat((Me=rs(w))!==null&&Me!==void 0?Me:""),2*re)||0})},USER_DM_NULL:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_NULL,value:we&&!w.im})},USER_DM_EMPTY:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_EMPTY,value:we&&w.im&&!parseFloat((Se=w.latestTs)!==null&&Se!==void 0?Se:"")})},USER_DM_EMPTY_V2:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_EMPTY_V2,value:we&&w.im&&!parseFloat((Ue=w.latestImTs)!==null&&Ue!==void 0?Ue:"")})},USER_HAS_DMED:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_HAS_DMED,value:we&&!!parseFloat((He=rs(w))!==null&&He!==void 0?He:"")})},USER_DM_NOT_OPEN:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_NOT_OPEN,value:we&&w.im&&!(0,o.nT)(w.im)})},USER_DM_OPEN:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_OPEN,value:we&&w.im&&(0,o.nT)(w.im)})},USER_DM_LATEST_OLDER_30D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_OLDER_30D,value:we&&Fn(Et,parseFloat((Ye=w.latestTs)!==null&&Ye!==void 0?Ye:""),30*le)})},USER_DM_LATEST_OLDER_30D_V2:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_OLDER_30D_V2,value:we&&Fn(Et,parseFloat((J=w.latestImTs)!==null&&J!==void 0?J:""),30*le)})},USER_DM_LATEST_OLDER_90D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_OLDER_90D,value:we&&Fn(Et,parseFloat((ae=w.latestTs)!==null&&ae!==void 0?ae:""),90*le)})},USER_DM_LATEST_OLDER_90D_V2:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_OLDER_90D_V2,value:we&&Fn(Et,parseFloat((Ve=w.latestImTs)!==null&&Ve!==void 0?Ve:""),90*le)})},USER_DM_READ_OLDER_7D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_OLDER_7D,value:we&&Fn(Et,parseFloat((Be=rs(w))!==null&&Be!==void 0?Be:""),7*le)})},USER_DM_READ_OLDER_30D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_OLDER_30D,value:we&&Fn(Et,parseFloat((Ke=rs(w))!==null&&Ke!==void 0?Ke:""),30*le)})},USER_DM_READ_OLDER_90D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_READ_OLDER_90D,value:we&&Fn(Et,parseFloat((Re=rs(w))!==null&&Re!==void 0?Re:""),90*le)})},USER_MPIM_READ_AGE_DECAY_7D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_MPIM_READ_AGE_DECAY_7D,value:we&&w.mpimFeatures&&xt(Et,w.mpimFeatures.lastReadTs,7*le)||0})},USER_MPIM_READ_AGE_DECAY_2H:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_MPIM_READ_AGE_DECAY_2H,value:we&&w.mpimFeatures&&xt(Et,w.mpimFeatures.lastReadTs,2*re)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_7D,value:we&&w.mpimFeatures&&xt(Et,w.mpimFeatures.latestMsgTs,7*le)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_2H,value:we&&w.mpimFeatures&&xt(Et,w.mpimFeatures.latestMsgTs,2*re)||0})},USER_MPIM_FRECENCY_LOG_ITEM_COUNT:(w,de)=>{let{itemIsMember:we}=de;var Et;return je({id:j.Q.USER_MPIM_FRECENCY_LOG_ITEM_COUNT,value:we&&((Et=w.mpimFeatures)===null||Et===void 0?void 0:Et.itemCount)&&Math.log1p(w.mpimFeatures.itemCount)||0})},USER_MPIM_FRECENCY_LOG_HIT_COUNT:(w,de)=>{let{itemIsMember:we}=de;var Et;return je({id:j.Q.USER_MPIM_FRECENCY_LOG_HIT_COUNT,value:we&&((Et=w.mpimFeatures)===null||Et===void 0?void 0:Et.hitCount)&&Math.log1p(w.mpimFeatures.hitCount)||0})},QUERY_LENGTH:w=>Rt({id:j.Q.QUERY_LENGTH,suggestion:w,extractionFunction:nn}),NAV_QUERY_LENGTH:w=>Rt({id:j.Q.NAV_QUERY_LENGTH,suggestion:w,extractionFunction:nn,text:Ct(w)}),SUGGESTION_TEXT_LENGTH:w=>Rt({id:j.Q.SUGGESTION_TEXT_LENGTH,suggestion:w,extractionFunction:kn}),NAV_TEXT_LENGTH:w=>Rt({id:j.Q.NAV_TEXT_LENGTH,suggestion:w,extractionFunction:kn,text:Ct(w)}),RAW_FRECENCY:w=>je({id:j.Q.RAW_FRECENCY,value:w.rawFrecencyScore}),MPIM_PRIORITY:w=>je({id:j.Q.MPIM_PRIORITY,value:(0,a.yz)(w.item)&&(w==null?void 0:w.priority)}),QUERY_RATIO_LENGTH_STRING:w=>Rt({id:j.Q.QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:pt}),NAV_QUERY_RATIO_LENGTH_STRING:w=>Rt({id:j.Q.NAV_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:pt,text:Ct(w)}),USER_QUERY_RATIO_LENGTH_STRING:w=>Rt({id:j.Q.USER_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:pt,text:Yt(w,Q.fd.USER_NAVIGATION)}),CHANNEL_QUERY_RATIO_LENGTH_STRING:w=>Rt({id:j.Q.CHANNEL_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:pt,text:Yt(w,Q.fd.CHANNEL_NAVIGATION)}),MPIM_QUERY_RATIO_LENGTH_STRING:w=>Rt({id:j.Q.MPIM_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:pt,text:Yt(w,Q.fd.MPIM_NAVIGATION)}),MPIM_WITH_DEACTIVATED_USER:w=>je({id:j.Q.MPIM_WITH_DEACTIVATED_USER,value:(0,a.yz)(w.item)&&w.isMpimWithDeactivatedMember}),NAV_NORMAL_PREFIX_MATCH:w=>Rt({id:j.Q.NAV_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:Ct(w)}),FRECENCY_BONUS:w=>je({id:j.Q.FRECENCY_BONUS,value:(0,U.A)(Object.values(w.bonusPointMap||{}))||0}),USER_FIRST_NAME_EXACT_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_FIRST_NAME_EXACT_MATCH,suggestion:w,extractionFunction:as,text:we&&(0,_.XS)(w.item)})},USER_FIRST_NAME_EXACT_PREFIX_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_FIRST_NAME_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:jn,text:we&&(0,_.XS)(w.item)})},USER_FIRST_NAME_NORMAL_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_FIRST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:es,text:we&&(0,_.XS)(w.item)})},USER_FIRST_NAME_NORMAL_PREFIX_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:we&&(0,_.XS)(w.item)})},USER_LAST_NAME_EXACT_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_LAST_NAME_EXACT_MATCH,suggestion:w,extractionFunction:as,text:we&&(0,_.lQ)(w.item)})},USER_LAST_NAME_EXACT_PREFIX_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_LAST_NAME_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:jn,text:we&&(0,_.lQ)(w.item)})},USER_LAST_NAME_NORMAL_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_LAST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:es,text:we&&(0,_.lQ)(w.item)})},USER_LAST_NAME_NORMAL_PREFIX_MATCH:(w,de)=>{let{itemIsMember:we}=de;return Rt({id:j.Q.USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:we&&(0,_.lQ)(w.item)})},USER_EMAIL_MATCH:w=>{var de,we;return je({id:j.Q.USER_EMAIL_MATCH,value:((de=w.scoreDetails)===null||de===void 0?void 0:de.email)!==void 0?((we=w.scoreDetails)===null||we===void 0?void 0:we.email)>=0:!1})},USER_EMAIL_ONLY_MATCH:w=>{var de,we;return je({id:j.Q.USER_EMAIL_ONLY_MATCH,value:((de=w.scoreDetails)===null||de===void 0?void 0:de.email)!==void 0&&((we=w.scoreDetails)===null||we===void 0?void 0:we.email)>=0&&Object.keys((Fe=w.scoreDetails)!==null&&Fe!==void 0?Fe:{}).length===1})},USER_PRIORITY:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_PRIORITY,value:we&&w.im&&(w==null?void 0:w.priority)||0})},ONLY_MATCHES_PREVIOUS_NAME:w=>je({id:j.Q.ONLY_MATCHES_PREVIOUS_NAME,value:w.bestPreviousNameMatch?1:null}),FRECENCY_WEIGHT_HIT_VISITS:w=>je({id:j.Q.FRECENCY_WEIGHT_HIT_VISITS,value:w.weightHitVisits}),FRECENCY_HIT_VISITS_4H:w=>je({id:j.Q.FRECENCY_HIT_VISITS_4H,value:w.hitVisits4h}),FRECENCY_HIT_VISITS_1D:w=>je({id:j.Q.FRECENCY_HIT_VISITS_1D,value:w.hitVisits1d}),FRECENCY_HIT_VISITS_3D:w=>je({id:j.Q.FRECENCY_HIT_VISITS_3D,value:w.hitVisits3d}),FRECENCY_HIT_VISITS_1W:w=>je({id:j.Q.FRECENCY_HIT_VISITS_1W,value:w.hitVisits1w}),FRECENCY_HIT_VISITS_1M:w=>je({id:j.Q.FRECENCY_HIT_VISITS_1M,value:w.hitVisits1m}),FRECENCY_HIT_VISITS_90D:w=>je({id:j.Q.FRECENCY_HIT_VISITS_90D,value:w.hitVisits90d}),FRECENCY_ITEM_VISITS_4H:w=>je({id:j.Q.FRECENCY_ITEM_VISITS_4H,value:w.itemVisits4h}),FRECENCY_ITEM_VISITS_1D:w=>je({id:j.Q.FRECENCY_ITEM_VISITS_1D,value:w.itemVisits1d}),FRECENCY_ITEM_VISITS_3D:w=>je({id:j.Q.FRECENCY_ITEM_VISITS_3D,value:w.itemVisits3d}),FRECENCY_ITEM_VISITS_1W:w=>je({id:j.Q.FRECENCY_ITEM_VISITS_1W,value:w.itemVisits1w}),FRECENCY_ITEM_VISITS_1M:w=>je({id:j.Q.FRECENCY_ITEM_VISITS_1M,value:w.itemVisits1m}),FRECENCY_ITEM_VISITS_90D:w=>je({id:j.Q.FRECENCY_ITEM_VISITS_90D,value:w.itemVisits90d}),FRECENCY_HIT_COUNT:w=>je({id:j.Q.FRECENCY_HIT_COUNT,value:w.hitCount}),FRECENCY_WEIGHT_ITEM_VISITS:w=>je({id:j.Q.FRECENCY_WEIGHT_ITEM_VISITS,value:w.weightItemVisits}),FRECENCY_ITEM_COUNT:w=>je({id:j.Q.FRECENCY_ITEM_COUNT,value:w.itemCount}),NAV_NORMAL_MATCH_USER:w=>Rt({id:j.Q.NAV_NORMAL_MATCH_USER,suggestion:w,extractionFunction:de=>{let{text:we,normalizedQuery:Et}=de;return es({text:we,normalizedQuery:Et})&&!Qn({text:(0,_.XS)(w.item),normalizedQuery:Et})},text:Yt(w,Q.fd.USER_NAVIGATION)}),NAV_NORMAL_PREFIX_MATCH_USER:w=>Rt({id:j.Q.NAV_NORMAL_PREFIX_MATCH_USER,suggestion:w,extractionFunction:de=>{let{text:we,normalizedQuery:Et}=de;return Qn({text:we,normalizedQuery:Et})&&!Qn({text:(0,_.XS)(w.item),normalizedQuery:Et})},text:Yt(w,Q.fd.USER_NAVIGATION)}),NAV_NORMAL_MATCH_NO_USER:w=>Rt({id:j.Q.NAV_NORMAL_MATCH_NO_USER,suggestion:w,extractionFunction:es,text:In(w)}),NAV_NORMAL_PREFIX_MATCH_NO_USER:w=>Rt({id:j.Q.NAV_NORMAL_PREFIX_MATCH_NO_USER,suggestion:w,extractionFunction:Qn,text:In(w)}),CHANNEL_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{itemIsChannel:we,now:Et}=de;return je({id:j.Q.CHANNEL_LATEST_MSG_AGE_DECAY_7D,value:we&&xt(Et,parseFloat((Ie=w.latestTs)!==null&&Ie!==void 0?Ie:""),7*le)||0})},CHANNEL_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{itemIsChannel:we,now:Et}=de;return je({id:j.Q.CHANNEL_LATEST_MSG_AGE_DECAY_2H,value:we&&xt(Et,parseFloat((ze=w.latestTs)!==null&&ze!==void 0?ze:""),2*re)||0})},MPIM_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_LATEST_MSG_AGE_DECAY_2H,value:(0,a.yz)(w.item)&&xt(we,parseFloat((qe=w.latestTs)!==null&&qe!==void 0?qe:""),2*re)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H,value:(0,a.yz)(w.item)&&xt(we,w.maxLatestMsgTsOfAllMembers,2*re)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D,value:(0,a.yz)(w.item)&&xt(we,w.maxLatestMsgTsOfAllMembers,7*le)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H,value:(0,a.yz)(w.item)&&xt(we,w.avgLatestMsgTsOfAllMembers,2*re)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D,value:(0,a.yz)(w.item)&&xt(we,w.avgLatestMsgTsOfAllMembers,7*le)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H,value:(0,a.yz)(w.item)&&xt(we,w.maxLastReadTsOfAllMembers,2*re)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D,value:(0,a.yz)(w.item)&&xt(we,w.maxLastReadTsOfAllMembers,7*le)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H,value:(0,a.yz)(w.item)&&xt(we,w.avgLastReadTsOfAllMembers,2*re)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D,value:(0,a.yz)(w.item)&&xt(we,w.avgLastReadTsOfAllMembers,7*le)||0})},MPIM_USERS_PCT_NON_EMPTY_DMS:w=>je({id:j.Q.MPIM_USERS_PCT_NON_EMPTY_DMS,value:(0,a.yz)(w.item)&&w.pctNonEmptyDmsForAllMembers||0}),MPIM_USERS_PCT_NON_NULL_DMS:w=>je({id:j.Q.MPIM_USERS_PCT_NON_NULL_DMS,value:(0,a.yz)(w.item)&&w.pctNonNullDmsForAllMembers||0}),MPIM_USERS_ALL_INTERNAL:w=>je({id:j.Q.MPIM_USERS_ALL_INTERNAL,value:(0,a.yz)(w.item)&&w.isMpimWithOnlyInternalMembers}),MPIM_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.MPIM_LATEST_MSG_AGE_DECAY_7D,value:(0,a.yz)(w.item)&&xt(we,parseFloat((st=w.latestTs)!==null&&st!==void 0?st:""),7*le)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D,value:we&&w.im&&xt(Et,parseFloat((ut=w.latestTs)!==null&&ut!==void 0?ut:""),7*le)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2,value:we&&w.im&&xt(Et,parseFloat((tt=w.latestImTs)!==null&&tt!==void 0?tt:""),7*le)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H,value:we&&w.im&&xt(Et,parseFloat((_t=w.latestTs)!==null&&_t!==void 0?_t:""),2*re)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H_V2:(w,de)=>{let{itemIsMember:we,now:Et}=de;return je({id:j.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2,value:we&&w.im&&xt(Et,parseFloat((yt=w.latestImTs)!==null&&yt!==void 0?yt:""),2*re)||0})},FRECENCY_LOG_HIT_COUNT:w=>je({id:j.Q.FRECENCY_LOG_HIT_COUNT,value:Math.log1p((Kt=w.hitCount)!==null&&Kt!==void 0?Kt:0)||0}),FRECENCY_LOG_HIT_COUNT_SCALED:w=>je({id:j.Q.FRECENCY_LOG_HIT_COUNT_SCALED,value:w.logHitCountScaled}),FRECENCY_LOG_ITEM_COUNT:w=>je({id:j.Q.FRECENCY_LOG_ITEM_COUNT,value:Math.log1p((Qt=w.itemCount)!==null&&Qt!==void 0?Qt:0)||0}),FRECENCY_LOG_ITEM_COUNT_SCALED:w=>je({id:j.Q.FRECENCY_LOG_ITEM_COUNT_SCALED,value:w.logItemCountScaled}),QUERY_FRECENCY_RAW:w=>je({id:j.Q.QUERY_FRECENCY_RAW,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&w.scoringContext.frecencyScoreRaw}),QUERY_FRECENCY_WEIGHT_HIT_VISITS:w=>je({id:j.Q.QUERY_FRECENCY_WEIGHT_HIT_VISITS,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&w.scoringContext.frecencyWeightHitVisits}),QUERY_FRECENCY_HIT_COUNT:w=>je({id:j.Q.QUERY_FRECENCY_HIT_COUNT,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&w.scoringContext.frecencyHitCount}),QUERY_LOG_HIT_COUNT:w=>je({id:j.Q.QUERY_LOG_HIT_COUNT,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&wn(w.scoringContext.frecencyHitCount)||w.suggestionType===Q.fd.QUERY_HISTORY&&wn((Jt=w.count)!==null&&Jt!==void 0?Jt:0)||0}),QUERY_FRECENCY_WEIGHT_ITEM_VISITS:w=>je({id:j.Q.QUERY_FRECENCY_WEIGHT_ITEM_VISITS,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&w.scoringContext.frecencyWeightItemVisits}),QUERY_FRECENCY_ITEM_COUNT:w=>je({id:j.Q.QUERY_FRECENCY_ITEM_COUNT,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&w.scoringContext.frecencyItemCount}),QUERY_FUZZY_SCORE:w=>je({id:j.Q.QUERY_FUZZY_SCORE,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&w.scoringContext.fuzzyScore}),QUERY_FRECENCY_BONUS:w=>{var de;return je({id:j.Q.QUERY_FRECENCY_BONUS,value:(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER)&&(0,U.A)(Object.values(((de=w.scoringContext)===null||de===void 0?void 0:de.frecencyScoreBonus)||{}))||0})},QUERY_HISTORY_LOG_INDEX:w=>je({id:j.Q.QUERY_HISTORY_LOG_INDEX,value:w.suggestionType===Q.fd.QUERY_HISTORY&&wn(w.index)||0}),QUERY_HISTORY_AGE_DECAY_30D:(w,de)=>{let{now:we}=de;return je({id:j.Q.QUERY_HISTORY_AGE_DECAY_30D,value:w.suggestionType===Q.fd.QUERY_HISTORY&&xt(we,w.lastUpdateTs,30*le)||0})},FUZZY_SCORE:w=>je({id:j.Q.FUZZY_SCORE,value:w.score}),FUZZY_SCORE_SCALED_EXP:w=>je({id:j.Q.FUZZY_SCORE_SCALED_EXP,value:q(w.score)&&.5**Math.min(w.score,10)}),FUZZY_SCORE_SCALED_FLIPPED:w=>je({id:j.Q.FUZZY_SCORE_SCALED_FLIPPED,value:q(w.score)&&10-Math.min(w.score,10)}),FUZZY_SCORE_SCALED_SUBTRACT:w=>je({id:j.Q.FUZZY_SCORE_SCALED_SUBTRACT,value:q(w.score)&&Math.min(w.score,10)-1}),FUZZY_SCORE_50:w=>je({id:j.Q.FUZZY_SCORE_50,value:w.bonusPointMap&&w.bonusPointMap.fuzzyScoreBonus===50}),FUZZY_SCORE_25:w=>je({id:j.Q.FUZZY_SCORE_25,value:w.bonusPointMap&&w.bonusPointMap.fuzzyScoreBonus===25}),FUZZY_SCORE_ALL:w=>je({id:j.Q.FUZZY_SCORE_ALL,value:w.bonusPointMap&&w.bonusPointMap.fuzzyScoreBonus&&w.bonusPointMap.fuzzyScoreBonus<25}),FILTER_USER_IS_ACTIVE:w=>je({id:j.Q.FILTER_USER_IS_ACTIVE,value:w.lastSuggestionToken&&w.lastTokenMemberOrNull&&(0,_.ls)(w.lastTokenMemberOrNull)}),FILTER_USER_IS_CURRENT_USER:w=>je({id:j.Q.FILTER_USER_IS_CURRENT_USER,value:w.lastSuggestionToken&&w.lastTokenMemberOrNull&&(0,_.fy)(w.lastTokenMemberOrNull)}),FILTER_USER_DM_IS_STARRED:w=>je({id:j.Q.FILTER_USER_DM_IS_STARRED,value:w.lastTokenIm&&w.lastTokenImIsStarred}),FILTER_USER_DM_IS_UNREAD:w=>je({id:j.Q.FILTER_USER_DM_IS_UNREAD,value:w.lastTokenIm&&(0,o.KJ)(w.lastTokenIm)}),FILTER_USER_DM_READ_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILTER_USER_DM_READ_AGE_DECAY_7D,value:w.lastTokenIm&&xt(we,w.lastTokenImLastRead,7*le)||0})},FILTER_USER_DM_READ_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILTER_USER_DM_READ_AGE_DECAY_2H,value:w.lastTokenIm&&xt(we,w.lastTokenImLastRead,2*re)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D,value:w.lastTokenIm&&xt(we,parseFloat((Gt=w.lastTokenImLatest)!==null&&Gt!==void 0?Gt:""),7*le)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H,value:w.lastTokenIm&&xt(we,parseFloat((wt=w.lastTokenImLatest)!==null&&wt!==void 0?wt:""),2*re)||0})},FILTER_USER_FIRST_NAME_NORMAL_MATCH:w=>Rt({id:j.Q.FILTER_USER_FIRST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:es,text:Bn(w)}),FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH:w=>Rt({id:j.Q.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:Bn(w)}),FILTER_USER_LAST_NAME_NORMAL_MATCH:w=>Rt({id:j.Q.FILTER_USER_LAST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:es,text:Mn(w)}),FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH:w=>Rt({id:j.Q.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:Mn(w)}),FILTER_USER_PRIORITY:w=>je({id:j.Q.FILTER_USER_PRIORITY,value:w.lastTokenIm&&(w==null?void 0:w.priority)}),HERE_KEYWORD:w=>je({id:j.Q.HERE_KEYWORD,value:w.name==="here"}),HERE_KEYWORD_EXACT_MATCH:w=>je({id:j.Q.HERE_KEYWORD_EXACT_MATCH,value:w.name==="here"&&w.query==="here"}),IS_BROADCAST_KEYWORD:w=>je({id:j.Q.IS_BROADCAST_KEYWORD,value:!!(w.type&&w.type==="broadcastKeyword")}),BROADCAST_KEYWORD_NORMAL_MATCH:w=>je({id:j.Q.BROADCAST_KEYWORD_NORMAL_MATCH,value:!!(w.type&&w.type==="broadcastKeyword"&&es({text:(Bt=w.name)!==null&&Bt!==void 0?Bt:"",normalizedQuery:w.normalizedQuery}))}),EMOJI_EXACT_MATCH:w=>je({id:j.Q.EMOJI_EXACT_MATCH,value:w.bonusPointMap&&w.bonusPointMap.isEmojiExactMatch&&1}),QUERY_TOKEN_NORMAL_MATCH:w=>Rt({id:j.Q.QUERY_TOKEN_NORMAL_MATCH,suggestion:w,extractionFunction:es,text:Vn(w)}),QUERY_TOKEN_NORMAL_PREFIX_MATCH:w=>Rt({id:j.Q.QUERY_TOKEN_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:Vn(w)}),FILTER_CHANNEL_IS_ARCHIVED:w=>je({id:j.Q.FILTER_CHANNEL_IS_ARCHIVED,value:(0,r.F)(w.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_MEMBER:w=>je({id:j.Q.FILTER_CHANNEL_IS_MEMBER,value:(0,d.bl)(w.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_STARRED:w=>je({id:j.Q.FILTER_CHANNEL_IS_STARRED,value:w.lastTokenChannelIsStarred}),FILTER_CHANNEL_IS_UNREAD:w=>je({id:j.Q.FILTER_CHANNEL_IS_UNREAD,value:(0,o.KJ)(w.lastTokenChannelOrNull)}),FILTER_CHANNEL_READ_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILTER_CHANNEL_READ_AGE_DECAY_7D,value:xt(we,w.lastTokenChannelLastRead,7*le)})},FILTER_CHANNEL_READ_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILTER_CHANNEL_READ_AGE_DECAY_2H,value:xt(we,w.lastTokenChannelLastRead,2*re)})},FILTER_CHANNEL_PRIORITY:w=>je({id:j.Q.FILTER_CHANNEL_PRIORITY,value:w==null?void 0:w.priority}),CHANNEL_IS_FROZEN:(w,de)=>{let{itemIsChannel:we}=de;return je({id:j.Q.CHANNEL_IS_FROZEN,value:we&&(0,ge.Zz)(w.item)})},USER_DM_IS_FROZEN:(w,de)=>{let{itemIsMember:we}=de;return je({id:j.Q.USER_DM_IS_FROZEN,value:we&&w.im&&(0,ge.Zz)(w.im)})},CHANNEL_HAS_DRAFT:w=>je({id:j.Q.CHANNEL_HAS_DRAFT,value:w.hasDraft}),USER_DM_HAS_DRAFT:w=>je({id:j.Q.USER_DM_HAS_DRAFT,value:w.imHasDraft}),EMOJI_QUERY_LENGTH_RATIO:w=>je({id:j.Q.EMOJI_QUERY_LENGTH_RATIO,value:w.emojiQueryLengthRatio}),EMOJI_TOTAL_COMBO_BREAKS:w=>je({id:j.Q.EMOJI_TOTAL_COMBO_BREAKS,value:w.emojiTotalComboBreaks}),EMOJI_COMBO_BREAK_0:w=>je({id:j.Q.EMOJI_COMBO_BREAK_0,value:w.emojiTotalComboBreaks===0}),EMOJI_COMBO_BREAK_1:w=>je({id:j.Q.EMOJI_COMBO_BREAK_1,value:w.emojiTotalComboBreaks===1}),EMOJI_COMBO_BREAK_2:w=>je({id:j.Q.EMOJI_COMBO_BREAK_2,value:w.emojiTotalComboBreaks===2}),EMOJI_COMBO_BREAK_3:w=>je({id:j.Q.EMOJI_COMBO_BREAK_3,value:w.emojiTotalComboBreaks===3}),TYPE_APP_ACTION:w=>je({id:j.Q.TYPE_APP_ACTION,value:w.suggestionType===Q.fd.APP_ACTION}),OS_APP_ACTION:(w,de)=>{let{source:we}=de;return je({id:j.Q.OS_APP_ACTION,value:(we==null?void 0:we.startsWith("omniswitcher"))&&w.suggestionType===Q.fd.APP_ACTION})},TYPE_APP:w=>je({id:j.Q.TYPE_APP,value:w.suggestionType===Q.fd.APP}),TYPE_SLASH_COMMAND:w=>je({id:j.Q.TYPE_SLASH_COMMAND,value:w.suggestionType===Q.fd.SLASH_COMMAND}),TYPE_GLOBAL_ACTION:w=>je({id:j.Q.TYPE_GLOBAL_ACTION,value:w.suggestionType===Q.fd.GLOBAL_ACTION}),IS_INVITE_WORKSPACE:w=>je({id:j.Q.IS_INVITE_WORKSPACE,value:w.id==="slack-invite-to-workspace"}),TYPE_CHANNEL_ACTION:w=>je({id:j.Q.TYPE_CHANNEL_ACTION,value:w.suggestionType===Q.fd.CHANNEL_ACTION}),TYPE_WORKFLOW_TRIGGER:w=>je({id:j.Q.TYPE_WORKFLOW_TRIGGER,value:w.suggestionType===Q.fd.WORKFLOW_TRIGGER}),TYPE_NAVIGATION_MESSAGE:w=>je({id:j.Q.TYPE_NAVIGATION_MESSAGE,value:w.suggestionType===Q.fd.MESSAGE_NAVIGATION}),TYPE_EMOJI:w=>je({id:j.Q.TYPE_EMOJI,value:w.suggestionType===Q.fd.EMOJI}),HAS_CHANNEL_ASSOCIATION:w=>je({id:j.Q.HAS_CHANNEL_ASSOCIATION,value:w.associatedWithCurrentChannel}),MEMBER_OF_CURRENT_CHANNEL:w=>je({id:j.Q.MEMBER_OF_CURRENT_CHANNEL,value:w.isMemberOfCurrentChannel}),QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL:w=>Rt({id:j.Q.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL,suggestion:w,extractionFunction:Ht,text:Yt(w,Q.fd.CHANNEL_NAVIGATION)}),FRECENCY_HIT_VISIT_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FRECENCY_HIT_VISIT_DECAY_2H,value:xt(we,w.latestHitVisit,2*re)||0})},FRECENCY_HIT_VISIT_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FRECENCY_HIT_VISIT_DECAY_7D,value:xt(we,w.latestHitVisit,7*le)||0})},FRECENCY_ITEM_VISIT_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FRECENCY_ITEM_VISIT_DECAY_2H,value:xt(we,w.latestItemVisit,2*re)||0})},FRECENCY_ITEM_VISIT_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FRECENCY_ITEM_VISIT_DECAY_7D,value:xt(we,w.latestItemVisit,7*le)||0})},MPIM_MEMBERS:w=>je({id:j.Q.MPIM_MEMBERS,value:w.item.members.length}),MPIM_MEMBER_NAME_MATCHES:w=>je({id:j.Q.MPIM_MEMBER_NAME_MATCHES,value:w.scoreDetailsByMember&&Object.values(w.scoreDetailsByMember).filter(de=>((Wt=de.score_details.real_name)!==null&&Wt!==void 0?Wt:-1/0)>=0||((Tn=de.score_details.display_name)!==null&&Tn!==void 0?Tn:-1/0)>=0).length}),MPIM_MEMBER_ALL_MATCHES:w=>je({id:j.Q.MPIM_MEMBER_ALL_MATCHES,value:w.scoreDetailsByMember&&Object.keys(w.scoreDetailsByMember).length}),MPIM_MATCHER_SCORE:w=>je({id:j.Q.MPIM_MATCHER_SCORE,value:w.score}),MPIM_MATCHER_SCORE_0:w=>je({id:j.Q.MPIM_MATCHER_SCORE_0,value:w.score===0}),MPIM_MATCHER_SCORE_1:w=>je({id:j.Q.MPIM_MATCHER_SCORE_1,value:w.score===1}),MPIM_MATCHER_SCORE_2:w=>je({id:j.Q.MPIM_MATCHER_SCORE_2,value:w.score===2}),MPIM_MATCHER_SCORE_3:w=>je({id:j.Q.MPIM_MATCHER_SCORE_3,value:w.score===3}),EMOJI_TEAM_CTR_90DD:w=>{var de;return je({id:j.Q.EMOJI_TEAM_CTR_90DD,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},EMOJI_USER_CTR_30DD:w=>{var de;return je({id:j.Q.EMOJI_USER_CTR_30DD,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},MPIM_TEAM_CTR_90DD:w=>{var de;return je({id:j.Q.MPIM_TEAM_CTR_90DD,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},MPIM_USER_CTR_30DD:w=>{var de;return je({id:j.Q.MPIM_USER_CTR_30DD,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},CHANNEL_TEAM_CTR_90DD:w=>{var de;return je({id:j.Q.CHANNEL_TEAM_CTR_90DD,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},CHANNEL_USER_CTR_30DD:w=>{var de;return je({id:j.Q.CHANNEL_USER_CTR_30DD,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},USER_ENTITY_TYPE_CTR_30DD:w=>je({id:j.Q.USER_ENTITY_TYPE_CTR_30DD,value:w.entityTypeCtr}),NUM_RESULTS:w=>je({id:j.Q.NUM_RESULTS,value:w.numResults}),QUERY_IS_SELF:w=>{var de;return je({id:j.Q.QUERY_IS_SELF,value:((de=w.scoreDetails)===null||de===void 0?void 0:de.self_score)===0})},CURRENT_USER_TEXTY:(w,de)=>{let{isCurrentUser:we,source:Et}=de;return je({id:j.Q.CURRENT_USER_TEXTY,value:Et==="texty-autocomplete"&&we})},FILE_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_AGE_DECAY_7D,value:w.item&&xt(we,w.item.created,7*le)})},FILE_AGE_DECAY_28D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_AGE_DECAY_28D,value:w.item&&xt(we,w.item.created,28*le)})},FILE_AGE_DECAY_90D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_AGE_DECAY_90D,value:w.item&&xt(we,w.item.created,90*le)})},FILE_FROM_CURRENT_USER:w=>je({id:j.Q.FILE_FROM_CURRENT_USER,value:w.fromCurrentUser}),NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:w=>Rt({id:j.Q.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS,suggestion:w,extractionFunction:es,text:Yt(w,Q.fd.CHANNEL_NAVIGATION),multiplier:wn(w.numResults)}),FILE_LOG_PUBLIC_SHARES:w=>{var de,we;return je({id:j.Q.FILE_LOG_PUBLIC_SHARES,value:((de=w.item)===null||de===void 0||(we=de.shares)===null||we===void 0?void 0:we.public)&&wn(Object.keys(w.item.shares.public).length)})},FILE_LOG_PRIVATE_SHARES:w=>{var de,we;return je({id:j.Q.FILE_LOG_PRIVATE_SHARES,value:((de=w.item)===null||de===void 0||(we=de.shares)===null||we===void 0?void 0:we.private)&&wn(Object.keys(w.item.shares.private).length)})},FILE_LOG_ACTIONS:w=>{var de;return je({id:j.Q.FILE_LOG_ACTIONS,value:((de=w.item)===null||de===void 0?void 0:de.actions)&&wn(w.item.actions.length)})},FILE_LATEST_ACTION_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_ACTION_AGE_DECAY_2H,value:xt(we,w.latestActionTs,2*re)})},FILE_LATEST_ACTION_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_ACTION_AGE_DECAY_7D,value:xt(we,w.latestActionTs,7*le)})},FILE_LATEST_ACTION_AGE_DECAY_90D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_ACTION_AGE_DECAY_90D,value:xt(we,w.latestActionTs,90*le)})},FILE_LATEST_SHARE_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_SHARE_AGE_DECAY_2H,value:xt(we,w.latestShareTs,2*re)})},FILE_LATEST_SHARE_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_SHARE_AGE_DECAY_7D,value:xt(we,w.latestShareTs,7*le)})},FILE_LATEST_SHARE_AGE_DECAY_90D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_SHARE_AGE_DECAY_90D,value:xt(we,w.latestShareTs,90*le)})},FILE_CHANNEL_CTR:w=>je({id:j.Q.FILE_CHANNEL_CTR,value:w.fileChannelCtr}),FILE_SUGGESTIONS_SEARCHER:w=>je({id:j.Q.FILE_SUGGESTIONS_SEARCHER,value:w.fileSuggestionsFromSearcher}),FILE_USER_CTR:w=>je({id:j.Q.FILE_USER_CTR,value:w.fileUserCtr}),FILE_NAME_CONTAINS_QUERY_NORMALIZED:w=>Rt({id:j.Q.FILE_NAME_CONTAINS_QUERY_NORMALIZED,suggestion:w,extractionFunction:It,text:Yt(w,Q.fd.FILE_NAVIGATION)}),FILE_IS_CANVAS:w=>je({id:j.Q.FILE_IS_CANVAS,value:Un(w,"quip")}),FILE_HAS_DMS_WITH_CREATOR:w=>je({id:j.Q.FILE_HAS_DMS_WITH_CREATOR,value:w.hasNonNullDmsWithCreator}),FILE_HAS_DMS_WITH_CREATOR_V2:w=>je({id:j.Q.FILE_HAS_DMS_WITH_CREATOR_V2,value:w.hasNonNullLocalOrRemoteDmsWithCreator}),FILE_LATEST_VIEW_BY_USER_OLDER_90D:(w,de)=>{let{now:we}=de;return je({id:j.Q.FILE_LATEST_VIEW_BY_USER_OLDER_90D,value:Fn(we,parseFloat((Ot=w.lastReadTs)!==null&&Ot!==void 0?Ot:"")/1e3,90*le)})},APP_NAME_PREFIX_MATCH:w=>{var de;return Rt({id:j.Q.APP_NAME_PREFIX_MATCH,suggestion:w,extractionFunction:Qn,text:(de=w.item)===null||de===void 0?void 0:de.appName})},BEST_NAME_MATCH_LOG_RESULTS:w=>je({id:j.Q.BEST_NAME_MATCH_LOG_RESULTS,value:w.bestNameIsExactMatch&&wn(w.numResults)}),SLASH_COMMAND_USER_CTR:w=>{var de;return je({id:j.Q.SLASH_COMMAND_USER_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},WORKFLOW_TRIGGER_USER_CTR:w=>{var de;return je({id:j.Q.WORKFLOW_TRIGGER_USER_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},GLOBAL_ACTION_USER_CTR:w=>{var de;return je({id:j.Q.GLOBAL_ACTION_USER_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},CHANNEL_ACTION_USER_CTR:w=>{var de;return je({id:j.Q.CHANNEL_ACTION_USER_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},APP_ACTION_USER_CTR:w=>{var de;return je({id:j.Q.APP_ACTION_USER_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.user_ctr_30dd})},SLASH_COMMAND_TEAM_CTR:w=>{var de;return je({id:j.Q.SLASH_COMMAND_TEAM_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},WORKFLOW_TRIGGER_TEAM_CTR:w=>{var de;return je({id:j.Q.WORKFLOW_TRIGGER_TEAM_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},GLOBAL_ACTION_TEAM_CTR:w=>{var de;return je({id:j.Q.GLOBAL_ACTION_TEAM_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},CHANNEL_ACTION_TEAM_CTR:w=>{var de;return je({id:j.Q.CHANNEL_ACTION_TEAM_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},APP_ACTION_TEAM_CTR:w=>{var de;return je({id:j.Q.APP_ACTION_TEAM_CTR,value:(de=w.offlineFeatures)===null||de===void 0?void 0:de.team_ctr_90dd})},SHORTCUT_ENTITY_TYPE_CTR:w=>je({id:j.Q.SHORTCUT_ENTITY_TYPE_CTR,value:w.entityTypeCtr}),EXACT_MATCH_LOG_RESULTS:w=>je({id:j.Q.EXACT_MATCH_LOG_RESULTS,value:(w.isExactMatch?1:0)*wn(w.numResults)}),HISTORY_AGE_DECAY_2H:(w,de)=>{let{now:we}=de;return je({id:j.Q.HISTORY_AGE_DECAY_2H,value:xt(we,w.historyTs,2*re)})},HISTORY_AGE_DECAY_7D:(w,de)=>{let{now:we}=de;return je({id:j.Q.HISTORY_AGE_DECAY_7D,value:xt(we,w.historyTs,7*le)})},HISTORY_POSITION:w=>je({id:j.Q.HISTORY_POSITION,value:w.historyPosition})};class rn{serialize(){const de=new xe;this.featureList.forEach(Et=>vn({feature:Et,serializer:de}));const we=de.serialize();return`${this.featuresVersion}:${we}`}valueForFeature(de){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(de==null)return W().error(`Invalid feature id: ${de}`),null;const Et=this.featureList.find(gn=>gn.id===de);if(!(0,F.A)(Et))return we?Xt(Et)||"":en(Et)||0}static fromSuggestion(de,we){const Et=Date.now()/1e3,gn=!!(0,_.NB)(de.item),Zt=!!((0,a.rW)(de.item)||(0,a.Zp)(de.item)),cn=gn&&(0,_.fy)(de.item),qt={itemIsChannel:Zt,itemIsMember:gn,now:Et,isCurrentUser:cn,source:we};return new this(ln(de,we).map(Xn=>Ft[Xn]&&Ft[Xn](de,qt)||null))}constructor(de){this.featureList=de,this.featuresVersion="v8"}}c(rn,"SuggestionFeatureVector");function ln(w,de){return de==="slash-command-menu"?[...k.globalFeatures]:w.suggestionType===Q.fd.USER_NAVIGATION?[...k.globalFeatures,...k.userFeatures]:w.suggestionType===Q.fd.CHANNEL_NAVIGATION?[...k.globalFeatures,...k.channelFeatures]:w.suggestionType===Q.fd.MPIM_NAVIGATION?[...k.globalFeatures,...k.mpimFeatures]:w.suggestionType===Q.fd.VIEW_NAVIGATION?[...k.globalFeatures,...k.viewFeatures]:w.suggestionType===Q.fd.FILE_NAVIGATION?[...k.globalFeatures,...k.fileFeatures,...k.queryFeatures]:w.suggestionType===Q.fd.LINK_NAVIGATION?[...k.globalFeatures,...k.linkFeatures]:w.suggestionType===Q.fd.MODAL_NAVIGATION?[...k.globalFeatures,...k.modalFeatures]:w.suggestionType===Q.fd.TEAM_NAVIGATION?[...k.globalFeatures,...k.teamFeatures]:w.type==="emoji"?[...k.globalFeatures,...k.emojiFeatures]:w.type==="broadcastKeyword"?[...k.globalFeatures,...k.broadcastKeywordFeatures]:w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER?[...k.globalFeatures,...k.queryFeatures]:w.suggestionType===Q.fd.APP_ACTION?[...k.globalFeatures,...k.shortcutFeatures,...k.appActionFeatures]:w.suggestionType===Q.fd.SLASH_COMMAND?[...k.globalFeatures,...k.shortcutFeatures,...k.slashCommandFeatures]:w.suggestionType===Q.fd.GLOBAL_ACTION?[...k.globalFeatures,...k.shortcutFeatures,...k.globalActionFeatures]:w.suggestionType===Q.fd.CHANNEL_ACTION?[...k.globalFeatures,...k.shortcutFeatures,...k.channelActionFeatures]:w.suggestionType===Q.fd.WORKFLOW_TRIGGER?[...k.globalFeatures,...k.shortcutFeatures,...k.workflowTriggerFeatures]:w.suggestionType===Q.fd.APP?[...k.globalFeatures,...k.appFeatures]:w.suggestionType===Q.fd.MESSAGE_NAVIGATION?[...k.globalFeatures,...k.messageFeatures]:w.suggestionType===Q.fd.QUERY_HISTORY?[...k.globalFeatures,...k.queryFeatures]:k.globalFeatures}c(ln,"getFeaturesForExtraction");class _n{constructor({id:de,value:we}){de==null&&W().error(`Invalid feature id: ${de}`);const Et=se(de);Et||W().error(`Missing feature name for id: ${de}`),this.id=de,this.name=Et,this.valueOrNull=we}}c(_n,"Feature");function en(w){return typeof w.valueOrNull=="number"&&isFinite(w.valueOrNull)?w.valueOrNull:typeof w.valueOrNull=="boolean"&&w.valueOrNull?1:0}c(en,"getNumericValueForFeature");function Xt(w){return w.valueOrNull===null||w.valueOrNull===void 0?"":w.valueOrNull.toString()}c(Xt,"getStringValueForFeature");function vn(w){let{feature:de,serializer:we}=w;de.valueOrNull===null&&we.writeNullFeature(),typeof de.valueOrNull=="number"&&we.writeNumericalFeature(de.valueOrNull,de.id),typeof de.valueOrNull=="boolean"&&we.writeBinaryFeature(de.valueOrNull,de.id),typeof de.valueOrNull=="string"&&we.writeTextFeature(de.valueOrNull,de.id)}c(vn,"serializeFeature");function je(w){let{id:de,value:we}=w;const Et=(0,F.A)(we)?null:we;return new _n({id:de,value:Et})}c(je,"makeFeature");function Rt(w){let{id:de,suggestion:we,extractionFunction:Et,text:gn=Mt(we),multiplier:Zt=1}=w;if(!gn)return je({id:de,value:null});const cn=Et({text:gn,query:we.query||"",normalizedQuery:we.normalizedQuery||""}),qt=cn===!0?1:cn===!1?0:cn;return je({id:de,value:(qt??0)*Zt})}c(Rt,"makeTextFeature");function hn(w){let de=null;return(w.suggestionType===Q.fd.QUERY||w.suggestionType===Q.fd.QUERY_USER||w.suggestionType===Q.fd.CHANNEL_NAVIGATION||w.suggestionType===Q.fd.MPIM_NAVIGATION||w.suggestionType===Q.fd.USER_NAVIGATION||w.suggestionType===Q.fd.TEAM_NAVIGATION||w.suggestionType===Q.fd.VIEW_NAVIGATION||w.suggestionType===Q.fd.FILE_NAVIGATION)&&(de=w.frecencyScore),de}c(hn,"getFrecencyScoreForSuggestion");function Nn(w){let de=null;return w.suggestionType===Q.fd.QUERY&&w.lastSuggestionToken&&w.lastSuggestionToken.type===Q.S6.API&&(de=w.lastSuggestionToken.querySuggestionScore),de}c(Nn,"getQuerySuggestionScoreV2");function rt(w){let de=null;return w.suggestionType===Q.fd.FILE_NAVIGATION&&(de=w.rawScore),de}c(rt,"getFileSuggestionScore");function vt(w){return w&&w.lastSuggestionToken?w.lastSuggestionToken.toString():""}c(vt,"getLastSuggestionTokenString");function Mt(w){return En(w)?vt(w):w.suggestionType===Q.fd.FILE_NAVIGATION?w.name:null}c(Mt,"getTextOrNullFromQuerySuggestion");function Ct(w){return w.isNavigational||w.isAction||w.isApp?w.name:null}c(Ct,"getTextOrNullFromNavigationalSuggestion");function Yt(w,de){return w.suggestionType===de?w.name:null}c(Yt,"getTextOrNullFromSuggestionWithType");function In(w){return w.suggestionType===Q.fd.USER_NAVIGATION||(0,F.A)(w.name)?null:w.name}c(In,"getTextOrNullFromSuggestionNotUser");function Un(w,de){return w.suggestionType!==Q.fd.FILE_NAVIGATION?!1:w.fileType===de}c(Un,"isFileTypeMatch");function En(w){return w.lastSuggestionToken?w.lastSuggestionToken.type===Q.S6.STRING||w.lastSuggestionToken.type===Q.S6.PHRASE||w.lastSuggestionToken.type===Q.S6.API:!1}c(En,"isActiveTokenStringLike");function Bn(w){return w.lastTokenMemberOrNull&&w.lastTokenMemberOrNull.profile&&w.lastTokenMemberOrNull.profile.first_name}c(Bn,"getLastTokenUserFirstName");function Mn(w){return w.lastTokenMemberOrNull&&w.lastTokenMemberOrNull.profile&&w.lastTokenMemberOrNull.profile.last_name}c(Mn,"getLastTokenUserLastName");function Vn(w){return w.lastTokenMemberName||w.lastTokenChannelName||null}c(Vn,"lastTokenName");function rs(w){return w?w.im&&w.lastReadImTs?w.lastReadImTs:w.remoteImMetadata&&w.lastReadRemoteImMetadataTs?(w.lastReadRemoteImMetadataTs/1e6).toString():null:null}c(rs,"lastReadFromLocalClientElseCachedRemote");function as(w){let{text:de,query:we}=w;return de===we}c(as,"isExactMatch");function jn(w){let{text:de,query:we}=w;return!!(we&&de&&(0,Y.A)(de,we))}c(jn,"isPrefixMatch");function es(w){let{text:de,normalizedQuery:we}=w;return(0,N.B)(de).replace(/^[@#]/g,"")===we}c(es,"isNormalizedExactMatch");function Qn(w){let{text:de,normalizedQuery:we}=w;const Et=(0,N.B)(de).replace(/^[@#]/g,"");return!!(Et&&we&&(0,Y.A)(Et,we))}c(Qn,"isNormalizedPrefixMatch");function ss(w){let{text:de,query:we}=w;return(0,Z.A)(de).length+((0,ee.A)(de," ")?1:0)===(0,Z.A)(we).length}c(ss,"stringSameNumberWordsValueFromSuggestion");function ft(w){let{text:de,query:we}=w;return Math.max(0,de.length-we.length)}c(ft,"excessStringLengthValueFromSuggestion");function pt(w){let{text:de,query:we}=w;return de.length>0?we.length/de.length:0}c(pt,"queryRatioLengthValueFromSuggestion");function Ht(w){let{text:de,normalizedQuery:we}=w;return es({text:de,normalizedQuery:we})&&we.length>1?2**-we.length:null}c(Ht,"queryLengthDecayNormalMatch");function nn(w){let{normalizedQuery:de}=w;return de.length}c(nn,"queryLength");function kn(w){let{text:de}=w;return de.length}c(kn,"suggestionTextLength");function xt(w,de,we){if(de){var Et;return Math.min(1,Math.exp(Math.log(.5)/we*((Et=Dn(w,de))!==null&&Et!==void 0?Et:0)))}return 0}c(xt,"expAgeDecay");function Dn(w,de){return de?Math.max(0,w-de):null}c(Dn,"age");function Fn(w,de,we){if(!de)return!0;const Et=Dn(w,de);return!Et||Et>we}c(Fn,"ageLatestOlderOrMissing");function wn(w){return w>0?Math.log1p(w):0}c(wn,"log1pSafe");function It(w){let{text:de,normalizedQuery:we}=w;const Et=(0,N.B)(de).replace(/^[@#]/g,"");return Et&&we&&Et.includes(we)}c(It,"stringContainsQueryNormalized");class Je{score(de){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=0;const gn=de.featureList.length;for(let Zt=0;Zt<gn;Zt++)Et+=this._weightForFeature(de.featureList[Zt],we.source||null)*(en(de.featureList[Zt])||0);return Et}explain(de){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const Et=we.source||null,gn=de.featureList.map(qt=>({id:qt.id,name:qt.name,value:qt.valueOrNull,weight:this._weightForFeature(qt,Et),globalWeight:this._globalWeightForFeature(qt),score:this._weightForFeature(qt,Et)*en(qt)})),Zt=gn.filter(qt=>qt.score).sort((qt,Xn)=>Xn.score-qt.score),cn=gn.filter(qt=>qt.value&&!qt.score&&qt.name!=="ID");return{score:this.score(de,we),features:[...Zt,...cn],remoteModel:this.isRemote}}_globalWeightForFeature(de){return this.weights[de.name]||0}_weightForFeature(de){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Et=0;de.name==="USER_IS_EXTERNAL"&&(Et=-1);const gn=this.weights[de.name]||0,cn=we&&(we==="composer_page__destination"||we.startsWith("share"))?"WRITE":"READ",qt=this.weights[`${cn}_${de.name}`]||0;return gn+qt+Et}constructor(de,we=!1){this.isRemote=we,this.weights=de}}c(Je,"LinearModel");class X extends m.F{fetchData(){return(0,O.dispatchForTeamId)(this.teamId,(0,D.ej)({reason:"AutocompleteModelCache"})).catch(de=>({model:null,omniswitcherModel:null,exception:de})).then(de=>{const we={model:null,omniswitcherModel:null};if(de.model){const Et=(0,H.A)(Object.entries(de.model).map(gn=>{let[Zt,cn]=gn;return[Zt.toUpperCase(),cn]}));we.model=new Je(Et,!0)}else return null;if(de.omniswitcher_model){const Et=(0,H.A)(Object.entries(de.omniswitcher_model).map(gn=>{let[Zt,cn]=gn;return[Zt.toUpperCase(),cn]}));we.omniswitcherModel=new Je(Et,!0)}else we.omniswitcherModel=we.model;return we})}constructor(de){super(),this.teamId=de}}c(X,"AutocompleteModelCache");let _e=null;function ye(w){return _e||(_e=new X(w)),_e}c(ye,"getAutocompleteModelCache");var De=e(1917953477),Ge=e(220244708);const et=new Je({ACTIVE_TOKEN_FILTER_AFTER:-1.3342286966503,ACTIVE_TOKEN_FILTER_BEFORE:-1.5840743442206,ACTIVE_TOKEN_FILTER_DURING:-1.5067377681356,ACTIVE_TOKEN_FILTER_FROM:-.32097975590927,ACTIVE_TOKEN_FILTER_HAS:.12307720392367,ACTIVE_TOKEN_FILTER_IN:-.20437151727999,ACTIVE_TOKEN_FILTER_ON:-.2331890332635,ACTIVE_TOKEN_FILTER_TO:-.39179992363572,ACTIVE_TOKEN_FILTER_WITH:-2.6491467875516,ACTIVE_TOKEN_MEMBER:3.3152339724625,ACTIVE_TOKEN_PHRASE:1.6227243782418,ACTIVE_TOKEN_STRING:1.2377431959723,APP_NAME_PREFIX_MATCH:.41310546603391,CHANNEL_ACTION_TEAM_CTR:5.3683432201332,CHANNEL_ACTION_USER_CTR:-3.0316210543763,CHANNEL_IS_ARCHIVED:-.87858649301233,CHANNEL_IS_MEMBER:.77730174627333,CHANNEL_IS_OTHER_TEAM:-.61919041941926,CHANNEL_IS_STARRED:.42983549335324,CHANNEL_IS_UNREAD:.32493583671244,CHANNEL_READ_AGE_DECAY_7D:1.7862684517169,CURRENT_USER_TEXTY:-2.0962311707595,EMOJI_COMBO_BREAK_0:.034181103626295,EMOJI_COMBO_BREAK_1:-1.5404314842404,EMOJI_COMBO_BREAK_2:-2.2796470967609,EMOJI_EXACT_MATCH:.183283071987,EMOJI_QUERY_LENGTH_RATIO:1.0690358111219,EMOJI_USER_CTR_30DD:5.1931307714537,FILE_AGE_DECAY_7D:.094311459141267,FILE_AGE_DECAY_90D:-.068414601197763,FILE_FROM_CURRENT_USER:-.053638049001005,FILE_HAS_DMS_WITH_CREATOR:-.0061128361931085,FILE_IS_CANVAS:.3,FILE_LATEST_ACTION_AGE_DECAY_90D:.22470956185502,FILE_LATEST_VIEW_BY_USER_OLDER_90D:-1.5,FILE_LOG_ACTIONS:.31755825349717,FILE_LOG_PRIVATE_SHARES:.63647050316634,FILE_LOG_PUBLIC_SHARES:-.4105759438314,FILE_NAME_CONTAINS_QUERY_NORMALIZED:1,FILTER_USER_DM_READ_AGE_DECAY_2H:-.39943623618561,FILTER_USER_DM_READ_AGE_DECAY_7D:.8400841724556,FILTER_USER_IS_ACTIVE:.42798763518113,FILTER_USER_PRIORITY:.71416734958181,FRECENCY_BONUS:.0083562726103486,FRECENCY_LOG_HIT_COUNT_SCALED:1.0221320483578,FRECENCY_LOG_ITEM_COUNT_SCALED:.93494415431914,FRECENCY_WEIGHT_HIT_VISITS:.010783602348951,FRECENCY_WEIGHT_ITEM_VISITS:.019341183576389,FUZZY_SCORE_50:.95744512772969,FUZZY_SCORE_ALL:-2.1179514334905,GLOBAL_ACTION_USER_CTR:6.0311738732755,HERE_KEYWORD_EXACT_MATCH:2.8669041266612,HISTORY_AGE_DECAY_7D:.66414153833523,IS_BROADCAST_KEYWORD:3.4759283393419,MEMBER_OF_CURRENT_CHANNEL:3.3022467998568,MPIM_MATCHER_SCORE_0:-.02289922354073,MPIM_MATCHER_SCORE_1:-1.2162030026989,MPIM_MATCHER_SCORE_2:-2.3109629676003,MPIM_MATCHER_SCORE_3:-2.545746172366,MPIM_MEMBER_ALL_MATCHES:.040175375087294,MPIM_MEMBER_NAME_MATCHES:.071667207602181,MPIM_READ_AGE_DECAY_7D:2.0911081748312,MPIM_USER_CTR_30DD:10.134770283044,MPIM_WITH_DEACTIVATED_USER:-1.1657978882602,NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:.49306597435127,NAV_NORMAL_MATCH_USER:.83230837935037,NAV_NORMAL_PREFIX_MATCH_NO_USER:.4852904832645,NAV_NORMAL_PREFIX_MATCH_USER:-.12081821144909,ONLY_MATCHES_PREVIOUS_NAME:-1.248003231081,OS_APP_ACTION:-1.381807580371,QUERY_FRECENCY_BONUS:.011725693517502,QUERY_FRECENCY_RAW:.0071433931825349,QUERY_FRECENCY_WEIGHT_HIT_VISITS:.0047962209104509,QUERY_TOKEN_NORMAL_PREFIX_MATCH:.38593901851901,SLASH_COMMAND_USER_CTR:3.2204170381454,STRING_EXACT_PREFIX_MATCH:-.53245135333594,STRING_NORMAL_PREFIX_MATCH:-.4692069451129,TYPE_APP:-2.0995766663586,TYPE_APP_ACTION:-.15299090921826,TYPE_CHANNEL_ACTION:-.97398280475431,TYPE_GLOBAL_ACTION:.24313716972704,TYPE_NAVIGATION_CHANNEL:-.99949500941624,TYPE_NAVIGATION_FILE:-.60870055140391,TYPE_NAVIGATION_MODAL:-1.2540608783032,TYPE_NAVIGATION_MPIM:-.13640397661212,TYPE_NAVIGATION_TEAM:-.74505579518249,TYPE_NAVIGATION_USER:.19845685040217,TYPE_NAVIGATION_VIEW:-.06828592658814,TYPE_QUERY:-.34666651828357,TYPE_QUERY_HISTORY:-.89886675989568,TYPE_SLASH_COMMAND:-.18074491193454,TYPE_USER_QUERY:1.2730815188112,TYPE_WORKFLOW_TRIGGER:-1.2028127578536,USER_DM_EMPTY_V2:1.4226370781581,USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:.40074999941377,USER_DM_LATEST_OLDER_90D_V2:-1.2419114598606,USER_EMAIL_ONLY_MATCH:-1.2756812486684,USER_ENTITY_TYPE_CTR_30DD:3.7407446891213,USER_FIRST_NAME_NORMAL_MATCH:.36402719522123,USER_IS_ACTIVE:.58279556397075,USER_IS_BOT:-.76450720727465,USER_IS_EXTERNAL:.27225738168756,USER_LAST_NAME_NORMAL_MATCH:.19972040917946,USER_MPIM_READ_AGE_DECAY_7D:.56565249217787,USER_PRIORITY:.29699660378898,USER_SAME_TEAM:.17696933968657}),bt=new Je({FRECENCY_LOG_ITEM_COUNT:1}),sn=new Je({FRECENCY:1}),fn=new Je({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_WORKFLOW_TRIGGER:1,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_HIT_COUNT_SCALED:.45581873094776,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),Sn=new Je({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_LOG_HIT_COUNT_SCALED:4,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),dt=new Je({ACTIVE_TOKEN_QUERY_SUGGESTION:1,BM25_SCORE:1,CHANNEL_IS_MEMBER:0,EXCESS_STRING_LENGTH:1,FRECENCY:.01,MPIM_IS_STARRED:0,NAV_EXACT_MATCH:0,NAV_EXACT_PREFIX_MATCH:0,NAV_EXCESS_STRING_LENGTH:2.5,NAV_NORMAL_MATCH:0,QUERY_SUGGESTION_SCORE_V2:3,STRING_EXACT_PREFIX_MATCH:1,STRING_NORMAL_PREFIX_MATCH:1,TYPE_NAVIGATION_CHANNEL:4,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7,TYPE_NAVIGATION_USER:4,TYPE_QUERY:1,HERE_KEYWORD_EXACT_MATCH:5}),z=new Je({FRECENCY:.01,TYPE_NAVIGATION_USER:4,TYPE_NAVIGATION_CHANNEL:4,QUERY_SUGGESTION_SCORE_V2:3,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7}),ve={testing:dt,testing_2:z,frecency:sn,autocompleteFallback:et,shortcuts1:fn,shortcuts3:Sn,emojiFrequentlyUsed:bt};var Oe=e(5795074931),$e=e(5267557974),at=e(9101533895),Xe=e(4761125736),Nt=e(8719147933),$t=e(8276911661),Ln=e(6562711329);const xn=new y.Ay("search"),Jn="autocompleteFallback";let $n=c(class{sort(de,we){var Et;const gn=(0,I.Cy)({state:de});gn.mark("sorter-sort-mark");const Zt=this.prepSuggestions(de,we);this.extractFeatures(de,Zt);const cn=this.scoreItems(de,Zt),qt=((Et=this.options)===null||Et===void 0?void 0:Et.dryRun)===!0?cn:this.sortByScore(cn);gn.measureAndClear("sorter-sort-mark","sorter-sort");const Xn=2,_s=this.boostExactMatches(qt,Xn);return this.forceMatches(_s)}boostExactMatches(de,we){const Et=de.slice(0,we),gn=[],Zt=[];for(let cn=we;cn<de.length;cn++){const qt=de[cn];qt.isExactMatch||qt.bestNameIsExactMatch?gn.push(qt):Zt.push(qt)}return[...Et,...gn,...Zt]}forceMatches(de){var we,Et;return!((we=this.options)===null||we===void 0)&&we.selfFirst&&!(!((Et=de[0])===null||Et===void 0)&&Et.isSelf)?[...(0,t.A)(de,Zt=>Zt.isSelf),...de]:de}getModels(de,we){let Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const gn={model:ve[de],omniswitcherModel:ve[de]};if(!Et&&we){const cn=ye(we).getStaleWhileRevalidate(gn);return cn===null||cn.model===null||cn.model===void 0?gn:cn}return gn}getHistoryChannels(de){if((0,Xe._Z)(de,"sq_sorter_history")!=="treatment")return{};if(!(0,g.A)())return{};var we;const Et=[...(we=(0,Nt.t)((0,O.getStateForClientStore)()))!==null&&we!==void 0?we:[]];if(!Et)return{};for(let Zt=0;Zt<Et.length;Zt++)Et[Zt].position=Zt+1;const gn={};return Et.filter(Zt=>!(0,M.VA)()&&Zt.teamId!==this.teamId||!Zt.primaryView?!1:(0,E.A)(Zt.primaryView)).forEach(Zt=>{if(Zt.primaryView&&!(Zt.primaryView in gn)){var cn;gn[Zt.primaryView]={ts:Zt.ts/1e3,position:(cn=Zt==null?void 0:Zt.position)!==null&&cn!==void 0?cn:-1}}}),gn}prepSuggestions(de,we){var Et,gn,Zt;const cn=(0,N.B)((0,De.O)(this.query));if(!((Et=this.options)===null||Et===void 0)&&Et.currentChannel&&cn.length<=1&&!(0,a.yz)((gn=this.options)===null||gn===void 0?void 0:gn.currentChannel)&&!(0,a.LI)((Zt=this.options)===null||Zt===void 0?void 0:Zt.currentChannel)){const dn=we.filter(Yn=>Yn.type==="member"||(0,_.NB)(Yn.item)).map(Yn=>(Yn.item||Yn).id);(0,O.dispatchForTeamId)(this.teamId,(0,Ln.z)({channelId:this.options.currentChannel.id,userIds:dn}))}let qt=null;if((0,Xe._Z)(de,"snd_autocomplete_features_cache")==="treatment"&&this.teamId){var Xn;qt=G({teamId:this.teamId,enterpriseId:(Xn=this.enterpriseId)!==null&&Xn!==void 0?Xn:void 0}).getStaleWhileRevalidate()}const _s=we.length,Ts=(0,Oe.WR)(de),As=(0,$t.cA)(de),Os=(0,f.dQ)(As),is=this.getHistoryChannels(de),Is={};return we.forEach(dn=>{const Yn=dn.item;(dn.type==="mpim"||(0,a.yz)(dn.item))&&((0,o.Ug)(Yn)||[]).forEach(Rs=>{if(Rs!==Ts){const ls=Is[Rs]||{itemCount:0,hitCount:0},Ms=(0,o._V)(de,Yn),Ds=Ms?parseFloat(Ms):void 0,Ze=(0,$e.b)(de,Yn.id),Ut=Ze?parseFloat(Ze):void 0;Ds&&(ls.lastReadTs?ls.lastReadTs=Math.max(ls.lastReadTs,Ds):ls.lastReadTs=Ds),Ut&&(ls.latestMsgTs?ls.latestMsgTs=Math.max(ls.latestMsgTs,Ut):ls.latestMsgTs=Ut),ls.hitCount+=(dn==null?void 0:dn.hitCount)||0,ls.itemCount+=(dn==null?void 0:dn.itemCount)||0,Is[Rs]=ls}})}),we.map(dn=>{const Yn=dn.item||dn,ht={...dn,query:this.query,normalizedQuery:cn,id:Yn.id,suggestionType:Q.fd.UNKNOWN,numResults:_s};if(dn.type==="member"||(0,_.NB)(dn.item)){var Rs,ls,Ms;const Tt=Yn.id&&(0,at.Pu)(de,Yn.id),tn=Yn.id&&qt&&qt.getUserDmChannelMetadata(Yn.id);ht.remoteImMetadata=tn,ht.im=Tt,ht.latestImTs=Tt&&(0,$e.b)(de,Tt.id),ht.imHasDraft=Tt&&(0,o.yc)(de,Tt.id),ht.imIsStarred=Tt&&(0,o.m2)(de,Tt),ht.name=(0,v.Gt)(dn.item),ht.lastReadImTs=(0,o._V)(de,Tt),ht.lastReadRemoteImMetadataTs=tn==null?void 0:tn.last_read_abs,(0,f.dQ)(dn.item)===Os&&(ht.sameTeam=!0);let An;if(!((Rs=this.options)===null||Rs===void 0)&&Rs.currentChannel&&(An=this.options.currentChannel),An)if((0,a.yz)(An)){var Ds,Ze;ht.isMemberOfCurrentChannel=(Ze=An==null||(Ds=An.members)===null||Ds===void 0?void 0:Ds.includes(dn.item.id))!==null&&Ze!==void 0?Ze:!1}else(0,a.LI)(An)||(ht.isMemberOfCurrentChannel=(0,Ge.B)(de,Yn,An));ht.priority=(0,o.dh)(de,Tt),ht.suggestionType=Q.fd.USER_NAVIGATION,ht.isNavigational=!0,ht.historyTs=Tt&&((ls=is[Tt.id])===null||ls===void 0?void 0:ls.ts),ht.historyPosition=Tt&&((Ms=is[Tt.id])===null||Ms===void 0?void 0:Ms.position);const yn=Is[Yn.id];yn&&(ht.mpimFeatures=yn)}else ht.name=Yn.name||Yn.string;if(dn.type==="channel"||(0,a.jq)(dn.item)){var Ut,Lt;ht.suggestionType=Q.fd.CHANNEL_NAVIGATION,ht.isNavigational=!0,ht.isChannelMember=(0,a.rW)(Yn)&&!(0,r.F)(Yn)&&(0,d.bl)(Yn),ht.hasDraft=(0,o.yc)(de,Yn.id),ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"channel"),ht.historyTs=(Ut=is[Yn.id])===null||Ut===void 0?void 0:Ut.ts,ht.historyPosition=(Lt=is[Yn.id])===null||Lt===void 0?void 0:Lt.position,ht.latestTs=(0,$e.b)(de,Yn.id),ht.lastReadTs=(0,o._V)(de,Yn),ht.priority=(0,o.dh)(de,Yn),ht.isStarred=(0,o.m2)(de,Yn)}if(dn.type==="mpim"||(0,a.yz)(dn.item)){var it,At;ht.suggestionType=Q.fd.MPIM_NAVIGATION,ht.isNavigational=!0;const tn=((0,o.Ug)(Yn)||[]).map(Rn=>(0,$t.nv)(de,Rn));ht.isMpimWithDeactivatedMember=(0,n.A)(tn,Rn=>(0,_.oy)(Rn)||(0,_.eJ)(Rn)),ht.isMpimWithOnlyInternalMembers=(0,s.A)(tn,Rn=>!(0,h.g)(Rn)),ht.hasDraft=(0,o.yc)(de,Yn.id),ht.name=(0,o.Oi)(de,dn.item),ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"mpim"),ht.historyTs=(it=is[Yn.id])===null||it===void 0?void 0:it.ts,ht.historyPosition=(At=is[Yn.id])===null||At===void 0?void 0:At.position,ht.priority=(0,o.dh)(de,Yn),ht.maxLastReadTsOfAllMembers=null,ht.maxLatestMsgTsOfAllMembers=null;let An=0,yn=0,jt=0,ts=0,Hn=0;tn.forEach(Rn=>{if(Rn.id!==Ts){const ms=Rn.id?(0,at.Pu)(de,Rn.id):void 0,vs=ms&&(0,o._V)(de,ms),Zn=Rn.id&&qt&&qt.getUserDmChannelMetadata(Rn.id),Es=Zn&&Zn.last_read_abs/1e6,ks=ms||Zn,hs=vs?parseFloat(vs):Es;if(ks){if(Hn+=1,hs){jt+=1;var Cs;ht.maxLastReadTsOfAllMembers=Math.max((Cs=ht.maxLastReadTsOfAllMembers)!==null&&Cs!==void 0?Cs:-1/0,hs),An+=hs}const fs=(0,$e.b)(de,ms==null?void 0:ms.id),Bs=ms&&fs?parseFloat(fs):void 0;if(Bs){ts+=1;var us;ht.maxLatestMsgTsOfAllMembers=Math.max((us=ht.maxLatestMsgTsOfAllMembers)!==null&&us!==void 0?us:-1/0,Bs),yn+=Bs}}}}),ht.avgLastReadTsOfAllMembers=An===0?null:An/jt,ht.avgLatestMsgTsOfAllMembers=yn===0?null:yn/ts,ht.pctNonEmptyDmsForAllMembers=jt/(tn.length-1)*100,ht.pctNonNullDmsForAllMembers=Hn/(tn.length-1)*100}if(dn.type==="team"&&(ht.suggestionType=Q.fd.TEAM_NAVIGATION,ht.isNavigational=!0),dn.type==="view"&&(ht.suggestionType=Q.fd.VIEW_NAVIGATION,ht.isNavigational=!0),dn.type==="appAction"&&(ht.suggestionType=Q.fd.APP_ACTION,ht.isAction=!0,ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"appAction")),dn.type==="app"&&(ht.suggestionType=Q.fd.APP,ht.isApp=!0),dn.type==="emoji"&&(ht.name=ht.emojiBestNameMatch,ht.suggestionType=Q.fd.EMOJI,ht.isNavigational=!0,ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"emoji")),dn.type==="slashCommand"){var gt;ht.suggestionType=Q.fd.SLASH_COMMAND,ht.isApp=!0,ht.name=(gt=ht.name)===null||gt===void 0?void 0:gt.substring(1),ht.firstWordOfRawQuery&&(ht.query=ht.firstWordOfRawQuery,ht.normalizedQuery=ht.firstWordOfRawQuery),ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"slashCommand")}if(dn.type==="globalAction"&&(ht.suggestionType=Q.fd.GLOBAL_ACTION,ht.isApp=!0,ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"globalAction")),dn.type==="quipShortcutCommand"&&(ht.suggestionType=Q.fd.QUIP_SHORTCUT),dn.type==="canvasAiSuggestion"&&(ht.suggestionType=Q.fd.CANVAS_AI_SUGGESTION),dn.type==="channelAction"&&(ht.suggestionType=Q.fd.CHANNEL_ACTION,ht.isApp=!0,ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"channelAction")),dn.type==="workflowTrigger"&&(ht.suggestionType=Q.fd.WORKFLOW_TRIGGER,ht.isApp=!0,ht.offlineFeatures=qt&&qt.getFeatures(dn.item.id,"workflowTrigger")),dn.type==="file"){ht.suggestionType=Q.fd.FILE_NAVIGATION,ht.isNavigational=!0,ht.fileSuggestionsFromSearcher=!0;const Tt=ht.item;ht.id=Tt.id,ht.fileId=Tt.id,ht.logId=Tt.id,ht.fileType=Tt.highlight_type||Tt.filetype,ht.name=Tt.title,ht.fileTypeDescription=Tt.is_external?(0,i.A)(Tt,de):Tt.pretty_type,ht.fileTypeDescription==="Arugula"&&(ht.fileTypeDescription=xn.t("Post")),ht.fromCurrentUser=Tt.user===Ts;const tn=Tt.user&&(0,at.Pu)(de,Tt.user),An=Tt.user&&qt&&qt.getUserDmChannelMetadata(Tt.user);if(ht.hasNonNullDmsWithCreator=tn!==null,ht.hasNonNullLocalOrRemoteDmsWithCreator=tn!==null||An!==null,ht.lastReadTs=Tt.last_read,Tt.shares){const jt=Tt.shares.public&&Math.max(...Object.values(Tt.shares.public).flatMap(Hn=>Hn.map(Rn=>Rn.ts?parseFloat(Rn.ts):-1/0))),ts=Tt.shares.private&&Math.max(...Object.values(Tt.shares.private).flatMap(Hn=>Hn.map(Rn=>Rn.ts?parseFloat(Rn.ts):-1/0)));jt&&ts?ht.latestShareTs=jt>ts?jt:ts:ht.latestShareTs=jt||ts}const yn=u(Tt);if(yn&&(ht.latestActionTs=yn),qt){const jt=Tt.channels&&Array.isArray(Tt.channels)&&Tt.channels.length&&Math.max(...Tt.channels.map(Hn=>qt.getFeatures(Hn,"channel").user_ctr_30dd)),ts=Tt.groups&&Array.isArray(Tt.groups)&&Tt.groups.length&&Math.max(...Tt.groups.map(Hn=>qt.getFeatures(Hn,"mpim").user_ctr_30dd));jt>0&&ts>0?ht.fileChannelCtr=Math.max(jt,ts):jt>0?ht.fileChannelCtr=jt:ts>0&&(ht.fileChannelCtr=ts),Tt.user?ht.fileUserCtr=qt.getFeatures(Tt.user,"member").user_ctr_30dd:ht.fileUserCtr=qt.getEntityCtr("member")}}if(dn.type==="link"&&(ht.suggestionType=Q.fd.LINK_NAVIGATION,ht.isNavigational=!0,ht.name=dn.item.title||dn.item.url),dn.type==="modal"&&(ht.suggestionType=Q.fd.MODAL_NAVIGATION,ht.name=dn.item.name),dn.type==="queryHistory"&&(ht.suggestionType=Q.fd.QUERY_HISTORY,ht.is_type_query_history=!0,ht.id=(0,p.B)(dn.id||dn.name||dn.string),ht.logId=ht.id,ht.exact_string=dn.string),dn.type==="query"||dn.type==="queryUser"||dn.type==="queryHistory"){var Pt,Vt,an;ht.is_type_query_completion=!0,ht.lastSuggestionToken=!ht.suggestionTokenList||ht.suggestionTokenList.length<1?null:ht.suggestionTokenList[ht.suggestionTokenList.length-1],ht.frecencyScore=ht.lastSuggestionToken&&ht.lastSuggestionToken._frecencyScore,ht.scoringContext=((Pt=ht.lastSuggestionToken)===null||Pt===void 0?void 0:Pt._scoringContext)||{},ht.lastTokenMemberOrNull=null,ht.lastTokenChannelOrNull=null;const Tt=ht.lastSuggestionToken&&(ht.lastSuggestionToken.type===Q.S6.FILTER_FROM||ht.lastSuggestionToken.type===Q.S6.FILTER_TO||ht.lastSuggestionToken.type===Q.S6.FILTER_WITH),tn=ht.lastSuggestionToken&&ht.lastSuggestionToken.type===Q.S6.FILTER_IN;if(!((Vt=ht.lastSuggestionToken)===null||Vt===void 0)&&Vt._id&&(ht.lastTokenMemberOrNull=Tt&&(0,$t.nv)(de,ht.lastSuggestionToken._id),ht.lastTokenChannelOrNull=tn&&((0,at.OL)(de,ht.lastSuggestionToken._id)||(0,at.Pu)(de,ht.lastSuggestionToken._id)),ht.priority=ht.lastTokenChannelOrNull?(0,o.dh)(de,ht.lastTokenChannelOrNull):void 0),ht.lastSuggestionToken&&ht.lastSuggestionToken._name&&(ht.lastTokenMemberOrNull||(ht.lastTokenMemberOrNull=Tt&&(0,$t.H6)(de,ht.lastSuggestionToken._name)),ht.lastTokenChannelOrNull||(ht.lastTokenChannelOrNull=tn&&(0,at.Os)(de,ht.lastSuggestionToken._name))),(0,l.GU)(ht.lastTokenMemberOrNull)&&(ht.lastTokenMemberOrNull=null),ht.lastTokenMemberName=(0,v.Gt)(ht.lastTokenMemberOrNull)||void 0,(0,l.GU)(ht.lastTokenChannelOrNull))ht.lastTokenChannelOrNull=null;else{const yn=(0,o._V)(de,ht.lastTokenChannelOrNull);ht.lastTokenChannelLastRead=yn?parseFloat(yn):void 0,ht.lastTokenChannelIsStarred=(0,o.m2)(de,ht.lastTokenChannelOrNull)}ht.lastTokenChannelName=(0,o.SB)(de,ht.lastTokenChannelOrNull)||null,ht.lastTokenIm=ht.lastTokenMemberOrNull&&ht.lastTokenMemberOrNull.id?(0,at.Pu)(de,ht.lastTokenMemberOrNull.id):void 0,ht.lastTokenImLatest=(0,$e.b)(de,(an=ht.lastTokenIm)===null||an===void 0?void 0:an.id);const An=(0,o._V)(de,ht.lastTokenIm);An&&(ht.lastTokenImLastRead=An?parseFloat(An):void 0),ht.lastTokenIm&&(ht.priority=(0,o.dh)(de,ht.lastTokenIm)),ht.lastTokenImIsStarred=(0,o.m2)(de,ht.lastTokenIm)}if(dn.type==="query"&&(ht.suggestionType=Q.fd.QUERY),dn.type==="queryUser"&&(ht.suggestionType=Q.fd.QUERY_USER),dn.type==="queryHistory"&&(ht.suggestionType=Q.fd.QUERY_HISTORY),dn.type==="querySalesforce"&&(ht.suggestionType=Q.fd.QUERY_SALESFORCE),dn.type==="query"||dn.type==="queryUser"||dn.type==="queryHistory"||dn.type==="querySalesforce"){var Pn;ht.normalizedQuery=(0,N.B)((0,De.O)(ht.query)),ht.logId=((Pn=ht.lastSuggestionToken)===null||Pn===void 0?void 0:Pn.logId)||"";var mn;ht.name=((mn=ht.suggestionTokenList)!==null&&mn!==void 0?mn:[]).map(Tt=>Tt.toString()).join(" ")}return dn.type==="quickMessage"&&(ht.isNavigational=!0,ht.suggestionType=Q.fd.MESSAGE_NAVIGATION),ht.entityTypeCtr=qt?qt.getEntityCtr(dn.type):void 0,ht})}extractFeatures(de,we){we.forEach(Et=>{var gn;const Zt=$(Et,(gn=this.options)===null||gn===void 0?void 0:gn.source);this.featureVectors[Et.id]=Zt})}selectModelForScoring(){return this.model}scoreItems(de,we){var Et;const gn={source:(Et=this.options)===null||Et===void 0?void 0:Et.source},Zt=this.selectModelForScoring();return we.map(cn=>{var qt;const Xn=this.featureVectors[cn.id],_s=Zt.score(Xn,gn);let Ts;return!((qt=this.options)===null||qt===void 0)&&qt.explain&&(Ts=Zt.explain(Xn,gn)),{...cn,modelScore:_s,featureVectorRaw:Xn,explain:Ts}})}sortByScore(de){var we,Et;return de.sort((gn,Zt)=>((we=Zt==null?void 0:Zt.modelScore)!==null&&we!==void 0?we:0)-((Et=gn==null?void 0:gn.modelScore)!==null&&Et!==void 0?Et:0))}constructor({query:de,options:we={},teamId:Et=null,enterpriseId:gn=null}){this.query=de,this.options=we;let Zt=we.model;Zt===void 0&&(Zt=Jn);var cn;const qt=this.getModels(Zt,Et||gn,(cn=this.options.modelLocal)!==null&&cn!==void 0?cn:!1);this.model=qt.model,this.omniswitcherModel=qt.omniswitcherModel,this.teamId=Et,this.enterpriseId=gn,this.featureVectors={}}},"Sorter")},2332798892:(x,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(1703559452),n=e(7174777686),s=e(735940183);const i=["`","\xB4","\u02C6","\xA8","\u02DC"],l=new RegExp(`[${i.join("")}]$`);function o(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(l,"")}c(o,"trim_trailing_composition_char");const a={COMPOSITION_CHARS:i};var r=e(3212336858);function d(u,_){let{allowPartialMatches:v=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!_||!u)return!1;let h=_.toLowerCase().replace(/^\uFF0F/,"/");h=(0,s.dV)(h),h=o(h);const f=[(0,r.fK)(u),(0,r.Bs)(u),...(0,r.qc)(u)||[]];return(0,t.A)(f,I=>{const p=(0,s.dV)(I);return v?(0,n.A)(p,h):p===h})}c(d,"is_match_for_command")},8664881451:(x,A,e)=>{"use strict";e.d(A,{Dd:()=>p,Rj:()=>g,TQ:()=>y,ZH:()=>h,ds:()=>I,qG:()=>_});var t=e(9706240641),n=e.n(t),s=e(796111729),i=e(6673728906),l=e(571104883);const o={},a={},r={},d=(0,s.Wo)({label:"SOUND-PLAYBACK"});function u(E){return`${E}-repeat`}c(u,"createRepeatKey");const _=c(E=>{E&&y(E)},"addSoundToInMemoryCache"),v=function(){var E=(0,t.coroutine)(function*(M){try{if(!M||!("setSinkId"in M)||(0,l.gm)())return;const T=(0,i._o)();yield M.setSinkId(T)}catch(T){d.warn(`Failed to set sink id with reason: ${T}`)}});return c(function(T){return E.apply(this,arguments)},"maybeSetAudioSinkId")}(),h=function(){var E=(0,t.coroutine)(function*(M){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!M)return null;const D=p(M)||y(M);D.loop=!!T.loop,D.currentTime=0;var C;D.volume=(C=T.volume)!==null&&C!==void 0?C:1,yield v(D);try{yield D.play()}catch(m){d.warn(`Failed to play sound: ${M} with reason: ${m}`)}});return c(function(T){return E.apply(this,arguments)},"play")}(),f=function(){var E=(0,t.coroutine)(function*(M){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!M)return null;const D=u(M),C=c(()=>{a[D]-=1,a[D]>0&&(d.info(`lounge music looping: ${M}`),T.pause?r[D]=setTimeout(()=>{h(D)},T.pause):h(D))},"ended");T.repeat&&(a[D]=T.repeat);const m=p(D)||y(M,{ended:C,customCacheKey:D});m.currentTime=0,yield v(m);try{yield m.play()}catch(O){d.warn(`Failed to play repeated sound: ${M} with reason: ${O}`)}});return c(function(T){return E.apply(this,arguments)},"playRepeat")}();function I(E){let{logFailure:M}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{logFailure:!0};const T=p(E),D=u(E),C=p(D);if(!T&&!C){M&&d.warn(`Tried to stop sound, but no sound was playing matching url: ${E}. Available cached element urls are ${Object.keys(o).join(", ")}`);return}if(C){C.pause(),clearTimeout(r[D]),a[D]=0;const m=C.src;C.src="",C.src=m}if(T){T.pause();const m=T.src;T.src="",T.src=m}}c(I,"stop");function p(E){return o[E]}c(p,"getAudioElement");function y(E){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const T=new Audio(E);M.ended&&T.addEventListener("ended",M.ended);const D=M.customCacheKey||E;return o[D]=T,T}c(y,"createAudioElement");function g(E,M,T){if(!E||!M||!T)return;const D=p(E);D&&D.removeEventListener(M,T)}c(g,"removeAudioElementListener")},6106767915:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(2414816894);function n(s){return(0,t.A)(s)?s.replace(/^BK/,""):""}c(n,"getBroadcastKeyword")},2414816894:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(4897863105);function n(s){return(0,t.c)().indexOf(s)!==-1}c(n,"mentionIdIsKeyword")},1707481146:(x,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){return n==="UNVERIFIED"}c(t,"mentionIdIsUnverified")},6764196364:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6968387112);function n(){return`https://${(0,t.Xk)()}`}c(n,"getSlackRootUrl")},4252064756:(x,A,e)=>{"use strict";e.d(A,{A:()=>s,D:()=>i});var t=e(8234448831),n=e(6968387112);function s(l){return i((0,t.Ay)(l))}c(s,"isGantryUrl");function i(l){if(l.pathname==="/ssb/signin")return!1;const o=l.hostname,[a]=o.split(".");return a==="app"&&(0,n.Ed)(l)}c(i,"isGantryUrlFromUrlObject")},7216810781:(x,A,e)=>{"use strict";e.d(A,{z:()=>_});var t=e(3134334389),n=e(5255740490),s=e(4173072539),i=e(3694049677),l=e(2408732225),o=e(9874616273),a=e(5743225531),r=e(735940183),d=e(2786906754);const u=new r.Ay("shared_channel_invites"),_=c(v=>{let{invite:h,bottomMargin:f}=v;if(!h)return null;const{inviting_team:I,inviting_user:p,shared_workspace:y}=h,g=!!(0,d.qN)(window.location.search).is_link,E=t.createElement(l.n,{team:I,user:p,size:40,shouldRenderTeamBadge:!0,allowDefaultProfileImage:!0,allowTeamInitials:!0,isInteractive:!1,className:"margin_right_75",hideUserIcon:g}),M=t.createElement(i.A,{invitingUser:p}),T=t.createElement(s.A,{invitingTeam:I}),D=t.createElement(a.A,{id:y.id,team:y,bold:!0});return t.createElement("div",{className:(0,n.A)("p-accept_slack_connect_workspace_invite_header__header_container",{margin_bottom_200:f})},t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header__header_subcontainer"},t.createElement(o.A,{width:160,height:40,className:"margin_bottom_125"}),t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header padding_0"},E,t.createElement("span",null,g?u.rt("You were invited by {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:T,sharedWorkspaceName:D}):u.rt("You were invited by <strong>{invitingUserName}</strong> from {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:T,invitingUserName:M,sharedWorkspaceName:D})))))},"AcceptSlackConnectWorkspaceHeader");_.displayName="AcceptSlackConnectWorkspaceHeader"},1073393277:(x,A,e)=>{"use strict";e.d(A,{Sp:()=>I,a5:()=>p});var t=e(1764426410),n=e(4509434386),s=e(9733150292),i=e(3245843483),l=e(4923013394),o=e(252204565),a=e(5829624088);const r=".p-client_container_placeholder",d=".p-client_container_placeholder__nav",u=260,_=64,v=76;function h(g){let{name:E,hex:M,iaTheming:T,customTheme:D}=g;const C=(0,t.zK)({hex:M,name:E}),m=(T==null?void 0:T.mode)||"light",O=(T==null?void 0:T.brightness)||n.GK,P=(0,n.XW)({mode:(0,a.Gk)(T,T==null?void 0:T.mode),primary:T==null?void 0:T.primary,highlight1:T==null?void 0:T.highlight1,brightness:O,useCustomHex:D&&(T==null?void 0:T.useCustomHex)});let R;E.includes("Primary")?R=P.primary.shade:R=P.highlight1.shade;const L=n.sC.indexOf(R);return{shade:R,value:m==="light"?C.light[L].value:C.dark[L].value}}c(h,"generateCustomHEXChromeColors");function f(g){let{iaTheming:E,customTheme:M}=g;return!E.primary.custom||!t.$V.test(E.primary.custom)?null:h({name:"bootPrimary",hex:E.primary.custom.startsWith("#")?E.primary.custom:`#${E.primary.custom}`,iaTheming:E,customTheme:M})}c(f,"getBootPrimary");function I(g){let{teamId:E}=g;const M=(0,s._z)(E,"channelSidebarBackground"),T=parseInt((0,s.W6)("viewLayoutLastSidebarWidth"),10)||u,D=(0,s._z)(E,"textColor"),C=(0,s._z)(E,"topNavBackground")||M,m=(0,s._z)(E,"topNavTextColor")||D,O=document.querySelector(r),P=(0,s._z)(E,"iaTheming"),R=(0,s._z)(E,"customTheme"),L=(0,s._z)(E,"windowGradient"),V=(0,s._z)(E,"isCreatorInSetupFlow"),B=(0,s.W6)("viewLayoutIsWorkspaceSwitcherVisible"),K=B?_:0;if(!O)return;const b=O.querySelector(d);if(!M||V){p();return}if(b&&D&&M){const H=document.createElement("div");H.classList.add("p-ia4_client_container_placeholder--sidebar"),H.style.width=`${T}px`;const U=document.createElement("div");U.classList.add("p-ia4_client_container_placeholder--tab_rail");const F=document.createElement("div");if(F.classList.add("p-ia4_client_container_placeholder--content"),F.style.left=`${K+v+T}px`,O.appendChild(H),B&&(O.appendChild(U),H.classList.add("p-ia4_client_container_placeholder--sidebar_with_workspace_switcher"),P!=null&&P.sidebarInverted&&(H.style.boxShadow="-1px 0px 0px 0px rgba(255, 255, 255, 0.15)"),F.classList.add("p-ia4_client_container_placeholder--content_with_workspace_switcher")),O.appendChild(F),O.classList.add("p-ia4_client_container_placeholder--theme-background"),P){let Y="#ffffffB3";const Z="#1012148c";if(P.mode==="light"&&P.sidebarInverted&&(Y="#ffffff1A"),P.mode==="dark"){var S,G;Y=Z,(G=(S=window.document)===null||S===void 0?void 0:S.querySelector("body"))===null||G===void 0||G.classList.add(n.RD)}if(H.style.backgroundColor=Y,R&&P.useCustomHex){if(P.primary.custom){const ee="bootPrimary",j=f({iaTheming:P,customTheme:R});j&&O.style.setProperty(`--dt_color-plt-${ee}-${j.shade}`,j.value)}if(P.highlight1.custom){const ee="bootHighlight1",j=h({name:"bootHighlight1",hex:P.highlight1.custom.startsWith("#")?P.highlight1.custom:`#${P.highlight1.custom}`,iaTheming:P,customTheme:R});O.style.setProperty(`--dt_color-plt-${ee}-${j.shade}`,j.value)}}if(L){const ee=(0,n.Lp)({mode:(0,a.Gk)(P,P.mode),primary:P.primary,highlight1:P.highlight1,brightness:P.brightness,useCustomHex:R&&P.useCustomHex}).replace(/primary/g,"bootPrimary").replace(/highlight1/g,"bootHighlight1");O.style.background=ee}else{const ee="bootPrimary",j=f({iaTheming:P,customTheme:!!R}),ge=(0,a.Gk)(P,P.mode),ne=(0,n.VS)({mode:ge,role:ge==="light-inverted-sidebar"?"highlight1":"primary",brightness:(P==null?void 0:P.brightness)||n.GK});O.style.backgroundColor=R&&P.useCustomHex&&j?`rgb(var(--dt_color-plt-${ee}-${j.shade}))`:`rgb(var(--dt_color-plt-${P.primary.palette}-${ne}))`}}else if(H.style.backgroundColor=M,C){const Y=C,Z=(0,o.fl)(C,25);O.style.background=`radial-gradient(
						circle at 50% 50%,
						${Y} 20%,
						transparent 80%
					),
					conic-gradient(
            from 45deg at 50% 50%,
            ${Z} 0%,
            ${Y} 25%,
            ${Z} 50%,
            ${Y} 75%,
            ${Z} 100%
          )`}b.classList.add("p-ia4_client_container_placeholder--top-nav"),(0,l.ve)()&&C&&i.ea3.isAvailable()&&(0,i.ea3)((0,i.Xgz)(),{color:C,symbolColor:m})}O.style.opacity="1"}c(I,"renderBootPlaceholder");function p(){const g=document.querySelector(r);g&&g.remove()}c(p,"removeBootPlaceholder"),Object.defineProperty({removeBootPlaceholder:p},"removeBootPlaceholder",{get:()=>p,set:g=>{p=g}})},322730488:(x,A,e)=>{"use strict";var t=e(9706240641),n=e(8223354444),s=e(7031360717),i=e(1535672935),l=e(6533394955);function o(ot,mt){var ct,kt,un,Cn,pn,Kn;const os=(0,l.getClientStoreInstance)();if(os.dispatch((0,i.setWorkspaceFailedToBoot)(ot)),!(mt==null||(ct=mt.data)===null||ct===void 0)&&ct.active_migration){var cs,Gs;os.dispatch((0,i.setWorkspaceIsMigrating)({teamId:ot,migrationId:mt==null||(cs=mt.data)===null||cs===void 0?void 0:cs.migration_id,canViewMigrationStatus:mt==null||(Gs=mt.data)===null||Gs===void 0?void 0:Gs.can_view_migration_status})),(0,s.R8)("BOOT",`(${ot}) Workspace boot failed due to active migration`)}if((mt==null||(kt=mt.data)===null||kt===void 0?void 0:kt.error)==="accesslimited"&&os.dispatch((0,i.setWorkspaceIsAccessLimited)(ot)),(mt==null||(un=mt.data)===null||un===void 0?void 0:un.error)==="two_factor_setup_required"&&os.dispatch((0,i.setWorkspaceNeeds2FASetup)(ot)),(mt==null||(Cn=mt.data)===null||Cn===void 0?void 0:Cn.error)==="user_in_no_workspaces"&&os.dispatch((0,i.setUserNotMemberOfAnyWorkspaceInOrg)(ot)),(mt==null||(pn=mt.data)===null||pn===void 0?void 0:pn.error)==="mobile_login_required"&&os.dispatch((0,i.setUserRequiresMobileLogin)(ot)),(mt==null||(Kn=mt.data)===null||Kn===void 0?void 0:Kn.error)==="user_needs_to_accept_custom_tos"){var Xs;os.dispatch((0,i.setWorkspaceNeedsToAcceptCustomTOS)({teamId:ot,url:mt==null||(Xs=mt.data)===null||Xs===void 0?void 0:Xs.url}))}}c(o,"markTeamBootFailed");var a=e(6188550760),r=e(6329712420),d=e(9012396182);function u(ot){const mt=(0,l.getClientStoreInstance)();var ct;const kt=(ct=(0,d.getNavigateToUnbootedWorkspace)(mt.getState()))!==null&&ct!==void 0?ct:{},{bootingTeamId:un,navigateToRouteProps:Cn}=kt;return un===ot?((0,a._U)((Cn==null?void 0:Cn.routeName)||r.o,{teamId:ot,...(Cn==null?void 0:Cn.params)||{}},{reason:"delayed-unbooted-team-switch",...(Cn==null?void 0:Cn.options)||{}}),mt.dispatch((0,i.setNavigateToUnbootedWorkspace)({})),!0):!1}c(u,"maybeNavigateToUnbootedWorkspace");function _(ot,mt){if(!ot)throw new Error("Missing team id, cannot thin boot team.");o(ot,mt),u(ot)}c(_,"thinBootTeam");var v=e(1073393277),h=e(2212859256),f=e(1044468604),I=e(3945243579);const p={[f.F9.API]:y,[f.F9.BOOT_APP]:g,[f.F9.BOOT_TEAM]:E,[f.F9.DEFAULT]:M};function y(ot,mt,ct){var kt;const un=ct==null?void 0:ct.teamId;if(window.isReloading){(0,s.pq)("BOOT",`(${un}) Ongoing reload detected during Gantry API error handler; Halting error handler.`);return}f.XB[f.F9.API](ot,mt,{...ct,shouldDisplayErrorView:!1,shouldBeaconError:(ot==null||(kt=ot.data)===null||kt===void 0?void 0:kt.error)!=="user_needs_to_accept_custom_tos"}),_(un,ot),mt!=null&&mt.isForegroundTeam&&Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-render")]).then(e.bind(e,3020487052)).then(Cn=>{let{renderClient:pn}=Cn;(0,v.a5)(),(0,I.A)(),pn()})}c(y,"handleApiError");function g(ot,mt,ct){(0,v.a5)(),f.XB[f.F9.BOOT_APP](ot,mt,ct)}c(g,"handleBootAppError");function E(ot,mt,ct){if(ct){const{teamId:kt}=ct;(0,h.y)(kt)}(0,v.a5)(),f.XB[f.F9.BOOT_TEAM](ot,mt,ct)}c(E,"handleBootTeamError");function M(ot,mt,ct){(0,v.a5)(),f.XB[f.F9.DEFAULT](ot,mt,ct)}c(M,"handleDefaultError");const T={handleApiError:y,handleBootAppError:g,handleBootTeamError:E,handleDefaultError:M};var D=e(9113979368),C=e(1197598850),m=e(1092614768),O=e(2325478352),P=e(7530010356),R=e(796111729),L=e(2250002584),V=e(2872463257);const B="cse-api",K="cse-boot-api";function b(ot){return S.apply(this,arguments)}c(b,"fetchBootData");function S(){return S=(0,t.coroutine)(function*(ot){const{teamId:mt,userId:ct,isBootingWarm:kt}=ot,un=yield kt,Cn=un?"deferred-data":"initial-data";let pn=null;((0,O.EZ)()||(0,P.MA)())&&un&&(pn=yield(0,m.z6)({teamId:mt,userId:ct}));const Kn=C.V$.bind(null,{...ot,reason:Cn,minChannelUpdated:pn});return G(Kn,{teamId:mt,userId:ct,reason:Cn})}),S.apply(this,arguments)}c(S,"_fetchBootData");function G(ot){let mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const ct=(0,L.F)(),kt=ct.createTrace({traceName:B,tags:mt,samplingOptions:{sampleType:V.nl.ALWAYS}});if(!(kt!=null&&kt.traceFn))return(0,R.Wo)().warn("BOOT","Trace or traceFn is undefined; Unable to trace client.userBoot data fetch."),ot();const un=c((pn,Kn)=>{if((0,D.A)(Kn)){const os={state:V.$m.SUCCESS,message:"client_userBoot_empty"};pn==null||pn.addTags(os),pn==null||pn.close(),ct.reportTrace(kt)}else ct.clearTrace(kt)},"onResolve"),Cn=c((pn,Kn)=>{var os;const cs={state:V.$m.ERROR};Kn!=null&&Kn.status&&(cs.status=Kn.status),Kn!=null&&Kn.message&&(cs.message=Kn.message),!(Kn==null||(os=Kn.data)===null||os===void 0)&&os.error&&(cs.reason=Kn.data.error),pn==null||pn.addTags(cs),pn==null||pn.close(),ct.reportTrace(kt)},"onError");return kt.traceFn({name:K,onError:Cn,onResolve:un},ot)}c(G,"maybeTraceClientUserBootDataFetch"),Object.defineProperty({CSE_API_TRACE_LABEL:B,CLIENT_BOOT_SPAN_LABEL:K},"fetchBootData",{get:()=>b,set:ot=>{b=ot}});var U=e(229828696);function F(ot){return Y.apply(this,arguments)}c(F,"fetchChannelsData");function Y(){return Y=(0,t.coroutine)(function*(ot){if(!(0,U.X)())return;const{teamId:mt,userId:ct,isBootingWarm:kt}=ot,un=yield kt,Cn=un?"deferred-data":"initial-data";let pn=null;return((0,O.EZ)()||(0,P.MA)())&&un&&(pn=yield(0,m.z6)({teamId:mt,userId:ct})),(0,C.ee)({...ot,reason:Cn,minChannelUpdated:pn})}),Y.apply(this,arguments)}c(Y,"_fetchChannelsData");var Z=e(3398586081),ee=e(6422693406),j=e(9733150292),ge=e(4808464886);const ne=(0,Z.A)(be,ot=>ot.enterpriseId);function ue(ot){return he.apply(this,arguments)}c(ue,"maybeFetchEnterpriseData");function he(){return he=(0,t.coroutine)(function*(ot){return ot.enterpriseId?ne(ot):{}}),he.apply(this,arguments)}c(he,"_maybeFetchEnterpriseData");function be(ot){return xe.apply(this,arguments)}c(be,"fetchAllEnterpriseData");function xe(){return xe=(0,t.coroutine)(function*(ot){const{teamId:mt,enterpriseId:ct}=ot;var kt;let un=(kt=(0,j._z)(mt??"","enterprise_api_token"))!==null&&kt!==void 0?kt:"";if(mt&&(0,ge.ZN)(mt)&&!un){var Cn;un=(Cn=(0,j._z)(mt,"token"))!==null&&Cn!==void 0?Cn:""}const[pn,Kn]=yield ee.S.all([(0,C.YH)(ot),(0,C.O5)({...ot,token:un})]),os={enterprise_id:ct,page_needs_enterprise:!0,enterprise_api_token:un};return{enterpriseData:pn==null?void 0:pn.enterprise,enterprisePrefsData:Kn,enterpriseBootData:os}}),xe.apply(this,arguments)}c(xe,"_fetchAllEnterpriseData");const Le={resetMemoizedFetchEnterpriseDataCache:()=>{ne.cache.clear()}};var fe=e(3914849812),se=e(4892637646),Q=e(6998663753),k=e(9706702639),N=e(5313493085);function $(ot){let{params:mt,routeName:ct}=ot;const kt=mt.teamId||mt.teamOrEnterpriseId,{dispatch:un}=(0,l.getStoreInstanceByTeamId)(kt);un((0,N.M)({routeName:ct,routeParams:mt}))}c($,"channelCanvasListener");var W=e(9268451279),q=e(2805462396),re=e(4386248732),le=e(7765212398),Ae=e(9460580631);function Te(ot){let{params:mt,prevRouteInfo:ct,prevTeamId:kt}=ot;const un=ct==null?void 0:ct.params;if(!un||un.entityId!=="composer"||!un.draftId||un.draftId===(mt==null?void 0:mt.draftId))return!0;const{dispatch:Cn,getState:pn}=(0,l.getStoreInstanceByTeamId)(kt),Kn=pn(),os=(0,re.di)(un.draftId);if(!os)return!0;const cs=(0,le.YI)(Kn,os);return(0,W.v7)(cs,{trimWhitespace:!0})||(0,q.A)(Kn,cs)||Cn((0,Ae.A)({ids:[os],reason:"draftsListenerBefore"})),!0}c(Te,"draftsListenerBefore");var Ne=e(4446301238),pe=e(9884588328),Ee=e(1407713935),oe=e(8040098042),ce=e(9101533895),ke=e(7053828403);function Ce(ot,mt){return Me.apply(this,arguments)}c(Ce,"ensureChannel");function Me(){return Me=(0,t.coroutine)(function*(ot,mt){const ct=ot.getState(),kt=(0,ce.OL)(ct,mt,!1);return(0,Ee.hc)(kt)?kt:ot.dispatch((0,Ne.pX)({ids:[mt],reason:"sonic/route-listeners/ensure-channel",callSource:Ne.aI.EnsureChannel})).then(un=>{if(!un)return;const{channels:Cn,resolved:pn}=un;if(!(!pn||!pn.includes(mt)))return Cn[0]})}),Me.apply(this,arguments)}c(Me,"_ensureChannel");const Se=function(){var ot=(0,t.coroutine)(function*(mt){let{prevTeamId:ct,nextTeamId:kt,routeName:un,params:Cn={}}=mt;const pn=(0,l.getStoreInstanceByTeamId)(kt);if(!(0,oe.A)(Cn.entityId))return Promise.resolve(void 0);const Kn=Cn.entityId;return Ce(pn,Kn).then(os=>{if(os&&!(0,pe.lo)(os))return Promise.resolve(void 0);if(ct!==kt){const cs=(0,ke.EI)(pn.getState(),{mainView:!0});return cs===Kn?Promise.reject(new Error("fallback channel ID === target channel ID, can\u2019t switch workspaces")):((0,a._U)(un,{...Cn,entityId:cs},{shouldReplaceState:!0}),Promise.resolve(!1))}return os?Promise.reject(new Error("tried to switch to a channel from another team")):Promise.resolve(!1)})});return function(mt){return ot.apply(this,arguments)}}();var Ue=e(1530920905);function He(ot){let{nextTeamId:mt,prevTeamId:ct}=ot;const{dispatch:kt}=(0,l.getStoreInstanceByTeamId)(mt);ct!==mt&&kt((0,Ue.yh)({teamId:mt}))}c(He,"permissionsListener");var Ye=e(3614984351),J=e(9005797924),ae=e(4496040127);const Ve=c(ot=>{let{prevTeamId:mt,nextTeamId:ct}=ot;if(!(0,ae.VA)()||mt===ct||!ct)return!0;if((0,Ye.A)(ct,mt))return!1;const kt=(0,l.getStateForClientStore)();return(0,d.isWorkspaceExpired)(kt,ct)||(0,d.isWorkspacePendingAuth)(kt,ct)?((0,J.A)(ct),!1):!0},"maybe_finish_signin");var Be=e(4992650731);const Ke=c(ot=>{let{prevTeamId:mt,nextTeamId:ct,routeName:kt,params:un}=ot;if((0,ae.VA)()||mt===ct)return!0;const Cn=(0,a.M5)(kt,{...un,teamId:ct});if(!ct)return!0;const pn=(0,l.getStateForClientStore)(),Kn=(0,d.getWorkspacesMeta)(pn),os=Kn&&Kn[ct]&&Kn[ct].subdomain,cs=(0,ae.eb)(os)||`_team_${ct}`;return(0,Be.A)(Cn,cs),!1},"maybe_open_other_team_in_browser");var Re=e(8959118205),Fe=e(8834730594),Ie=e(4588963228),ze=e(497761763),qe=e(4327331459),st=e(3707193570),ut=e(4862221402),tt=e(6427150145);const _t=/^[\d]{13}$/;function yt(ot){return ot?_t.test(ot):!1}c(yt,"looksLikeLastReadTs");var Kt=e(1826991857),Qt=e(7174777686),Jt=e(7752506476);function Gt(ot){return(0,Qt.A)(Jt.M,ot)||ot===""}c(Gt,"looksLikeFlexpaneSectionId");var wt=e(6471801899),Bt=e(1233969417),Wt=e(2960290117);const Tn=[/^people[ -~]{1,27}$/,/^contacts[ -~]{1,27}$/,/^otherContacts[ -~]{1,27}$/,/^slackUsers[ -~]{1,27}$/];function Ot(ot){return Tn.some(mt=>mt.test(ot))}c(Ot,"looksLikeContactExternalId");var Ft=e(5084575109),rn=e(8414867410),ln=e(6605261507),_n=e(5587260451);const en=["received","sent"];function Xt(ot){return en.includes(ot)}c(Xt,"looksLikeInvitationsTabRouteParam");var vn=e(3468466741),je=e(8538260492),Rt=e(4425811520),hn=e(7770205178),Nn=e(9132066222),rt=e(8237194282),vt=e(8305125093);function Mt(ot){return!!Re.as[ot]}c(Mt,"isEntityRedirectKey");const Ct=c(ot=>Object.keys(Re.as).includes(ot),"isRedirectRoute"),Yt={entityId:ot=>(0,Fe.A)(ot)||(0,Ie.A)(ot)||(0,oe.A)(ot)||(0,ze.A)(ot)||(0,qe.A)(ot)||(0,st.Ay)(ot)||(0,ut.A)(ot)||(0,Ft.n)(ot)||(0,rn.bd)(ot)||Ct(ot)||(0,Wt.Ay)(ot)||(0,Rt.xL)(ot),appOrServiceId:ot=>(0,Ie.A)(ot)||(0,Fe.A)(ot),timestamp:tt.A,threadId:Kt.A,threadPageId:Kt.A,replyTs:tt.A,sectionId:Gt,tabId:ot=>(0,ln.Dl)(ot),viewName:ot=>(0,_n.c)(ot),listsViewName:wt.FO,draftId:re.ai,invitationsTabId:Xt,channelId:oe.A,channelFilesId:ot=>/^files-.+/.test(ot),searchQuery:ot=>/^search-.+/.test(ot),articleId:ot=>(0,Bt.A)(ot),tileEntityId:ot=>(0,oe.A)(ot)||(0,Ft.n)(ot)||(0,rn.bd)(ot),scTeamOrEnterpriseId:ot=>(0,st.Am)(ot),quipDocId:Wt.Ay,channelCanvasId:Wt.Ay,contactExternalId:Ot,itemId:vn.Ny,recordId:wt.pq,focusRecordId:wt.or,listViewId:wt._o,lastReadTs:yt,canvasOpenedFromId:ot=>(0,oe.A)(ot)||(0,qe.A)(ot)||ot===je.eE.QUIP_FILES,externalWorkspacePage:hn.W_,channelTabId:Nn.jK,salesforceRecordId:rt.V,workflowTemplateId:vt.A},In={[r.o]:{paths:["/"]},[Re._G]:{paths:["/:entityId","/:entityId/:timestamp","/:entityId/:tabId","/:entityId/:viewName","/:entityId/:viewName/:invitationsTabId","/:entityId/:listsViewName","/:entityId/:listsViewName/:focusRecordId","/:entityId/:listsViewName/:listViewId","/:entityId/:draftId","/:entityId/:threadPageId","/:entityId/:searchQuery","/:entityId/:channelFilesId","/:entityId/:scTeamOrEnterpriseId","/:entityId/:itemId","/:entityId/:channelCanvasId","/:entityId/:canvasOpenedFromId","/:entityId/:externalWorkspacePage","/:entityId/tabs/:channelTabId","/:entityId/:salesforceRecordId"]},[Re.lM]:{paths:["/:entityId/thread/:threadId","/:entityId/thread/:threadId/:replyTs","/:entityId/:timestamp/thread/:threadId","/:entityId/:viewName/thread/:threadId","/:entityId/:viewName/:invitationsTabId/thread/:threadId","/:entityId/:tabId/thread/:threadId","/:entityId/:draftId/thread/:threadId","/:entityId/:searchQuery/thread/:threadId","/:entityId/:channelFilesId/thread/:threadId","/:entityId/:scTeamOrEnterpriseId/thread/:threadId","/:entityId/:listsViewName/thread/:threadId","/:entityId/:canvasOpenedFromId/thread/:threadId"]},[Re.w7]:{paths:["/:entityId/messages/:channelId","/:entityId/messages/:channelId/:timestamp"]},[Re.Vy]:{paths:["/:entityId/channel_info","/:entityId/:timestamp/channel_info","/:entityId/:viewName/channel_info","/:entityId/:viewName/:invitationsTabId/channel_info","/:entityId/:tabId/channel_info","/:entityId/:draftId/channel_info","/:entityId/:threadPageId/channel_info","/:entityId/:searchQuery/channel_info","/:entityId/:channelFilesId/channel_info","/:entityId/:scTeamOrEnterpriseId/channel_info","/:entityId/:listsViewName/channel_info","/:entityId/:canvasOpenedFromId/channel_info"]},[Re.o6]:{paths:["/:entityId/inspect/:channelId","/:entityId/inspect/:channelId/:sectionId"]},[Re.p3]:{paths:["/:entityId/activity","/:entityId/:timestamp/activity","/:entityId/:viewName/activity","/:entityId/:viewName/:invitationsTabId/activity","/:entityId/:tabId/activity","/:entityId/:draftId/activity","/:entityId/:threadPageId/activity","/:entityId/:searchQuery/activity","/:entityId/:channelFilesId/activity","/:entityId/:scTeamOrEnterpriseId/activity","/:entityId/:canvasOpenedFromId/activity"]},[Re.W2]:{paths:["/:entityId/starred_items","/:entityId/:timestamp/starred_items","/:entityId/:viewName/starred_items","/:entityId/:viewName/:invitationsTabId/starred_items","/:entityId/:tabId/starred_items","/:entityId/:draftId/starred_items","/:entityId/:threadPageId/starred_items","/:entityId/:searchQuery/starred_items","/:entityId/:channelFilesId/starred_items","/:entityId/:scTeamOrEnterpriseId/starred_items","/:entityId/:listsViewName/starred_items","/:entityId/:canvasOpenedFromId/starred_items"]},[Re.ym]:{paths:["/:entityId/saved","/:entityId/:timestamp/saved","/:entityId/:viewName/saved","/:entityId/:viewName/:invitationsTabId/saved","/:entityId/:tabId/saved","/:entityId/:draftId/saved","/:entityId/:threadPageId/saved","/:entityId/:searchQuery/saved","/:entityId/:channelFilesId/saved","/:entityId/:scTeamOrEnterpriseId/saved","/:entityId/:listsViewName/saved","/:entityId/:canvasOpenedFromId/saved"]},[Re.fr]:{paths:["/:entityId/appspane","/:entityId/:timestamp/appspane","/:entityId/:viewName/appspane","/:entityId/:viewName/:invitationsTabId/appspane","/:entityId/:tabId/appspane","/:entityId/:draftId/appspane","/:entityId/:threadPageId/appspane","/:entityId/:searchQuery/appspane","/:entityId/:channelFilesId/appspane","/:entityId/:scTeamOrEnterpriseId/appspane","/:entityId/:listsViewName/appspane","/:entityId/:canvasOpenedFromId/appspane"]},[Re.M9]:{paths:["/:entityId/files","/:entityId/:timestamp/files","/:entityId/:viewName/files","/:entityId/:viewName/:invitationsTabId/files","/:entityId/:tabId/files","/:entityId/:draftId/files","/:entityId/:threadPageId/files","/:entityId/:searchQuery/files","/:entityId/:channelFilesId/files","/:entityId/:scTeamOrEnterpriseId/files","/:entityId/:listsViewName/files"]},[Re.T$]:{paths:["/:entityId/filespane","/:entityId/:timestamp/filespane","/:entityId/:viewName/filespane","/:entityId/:viewName/:invitationsTabId/filespane","/:entityId/:tabId/filespane","/:entityId/:draftId/filespane","/:entityId/:threadPageId/filespane","/:entityId/:searchQuery/filespane","/:entityId/:channelFilesId/filespane","/:entityId/:scTeamOrEnterpriseId/filespane","/:entityId/:listsViewName/filespane"]},[Re.De]:{paths:["/:entityId/files/:fileId","/:entityId/:timestamp/files/:fileId","/:entityId/:viewName/files/:fileId","/:entityId/:viewName/:invitationsTabId/files/:fileId","/:entityId/:tabId/files/:fileId","/:entityId/:draftId/files/:fileId","/:entityId/:threadPageId/files/:fileId","/:entityId/:searchQuery/files/:fileId","/:entityId/:channelFilesId/files/:fileId","/:entityId/:scTeamOrEnterpriseId/files/:fileId","/:entityId/:listsViewName/files/:fileId","/:entityId/:canvasOpenedFromId/files/:fileId"]},[Re.wA]:{paths:["/:entityId/comments/:quipDocId","/:entityId/:canvasOpenedFromId/comments/:quipDocId"]},[Re.li]:{paths:["/:entityId/history/:quipDocId","/:entityId/:canvasOpenedFromId/history/:quipDocId"]},[Re.mj]:{paths:["/:entityId/docs/:quipDocId","/:entityId/docs/:quipDocId/:lastReadTs","/:entityId/:timestamp/docs/:quipDocId","/:entityId/:viewName/docs/:quipDocId","/:entityId/:viewName/:invitationsTabId/docs/:quipDocId","/:entityId/:tabId/docs/:quipDocId","/:entityId/:draftId/docs/:quipDocId","/:entityId/:threadPageId/docs/:quipDocId","/:entityId/:searchQuery/docs/:quipDocId","/:entityId/:channelFilesId/docs/:quipDocId","/:entityId/:listsViewName/docs/:quipDocId"]},[Re.y0]:{paths:["/:entityId/files/type","/:entityId/:timestamp/files/type","/:entityId/:viewName/files/type","/:entityId/:viewName/:invitationsTabId/files/type","/:entityId/:tabId/files/type","/:entityId/:draftId/files/type","/:entityId/:threadPageId/files/type","/:entityId/:searchQuery/files/type","/:entityId/:channelFilesId/files/type","/:entityId/:scTeamOrEnterpriseId/files/type","/:entityId/:listsViewName/files/type"]},[Re.Nh]:{paths:["/:entityId/files/:memberId","/:entityId/:timestamp/files/:memberId","/:entityId/:viewName/files/memberId","/:entityId/:viewName/:invitationsTabId/files/memberId","/:entityId/:tabId/files/:memberId","/:entityId/:draftId/files/:memberId","/:entityId/:threadPageId/files/:memberId","/:entityId/:searchQuery/files/:memberId","/:entityId/:channelFilesId/files/:memberId","/:entityId/:scTeamOrEnterpriseId/files/:memberId","/:entityId/:listsViewName/files/:memberId","/:entityId/:canvasOpenedFromId/files/:memberId"]},[Re.$s]:{paths:["/:entityId/user_groups","/:entityId/:timestamp/user_groups","/:entityId/:viewName/user_groups","/:entityId/:viewName/:invitationsTabId/user_groups","/:entityId/:tabId/user_groups","/:entityId/:draftId/user_groups","/:entityId/:threadPageId/user_groups","/:entityId/:searchQuery/user_groups","/:entityId/:channelFilesId/user_groups","/:entityId/:scTeamOrEnterpriseId/user_groups","/:entityId/:listsViewName/user_groups","/:entityId/:canvasOpenedFromId/user_groups"]},[Re.Mu]:{paths:["/:entityId/user_groups/:userGroupId","/:entityId/:timestamp/user_groups/:userGroupId","/:entityId/:viewName/user_groups/:userGroupId","/:entityId/:viewName/:invitationsTabId/user_groups/:userGroupId","/:entityId/:tabId/user_groups/:userGroupId","/:entityId/:draftId/user_groups/:userGroupId","/:entityId/:threadPageId/user_groups/:userGroupId","/:entityId/:searchQuery/user_groups/:userGroupId","/:entityId/:channelFilesId/user_groups/:userGroupId","/:entityId/:scTeamOrEnterpriseId/user_groups/:userGroupId","/:entityId/:listsViewName/user_groups/:userGroupId","/:entityId/:canvasOpenedFromId/user_groups/:userGroupId"]},[Re.Ns]:{paths:["/:entityId/whats_new","/:entityId/:timestamp/whats_new","/:entityId/:viewName/whats_new","/:entityId/:viewName/:invitationsTabId/whats_new","/:entityId/:tabId/whats_new","/:entityId/:draftId/whats_new","/:entityId/:threadPageId/whats_new","/:entityId/:searchQuery/whats_new","/:entityId/:channelFilesId/whats_new","/:entityId/:scTeamOrEnterpriseId/whats_new","/:entityId/:listsViewName/whats_new","/:entityId/:canvasOpenedFromId/whats_new"]},[Re.IN]:{paths:["/:entityId/shortcuts","/:entityId/:timestamp/shortcuts","/:entityId/:viewName/shortcuts","/:entityId/:viewName/:invitationsTabId/shortcuts","/:entityId/:tabId/shortcuts","/:entityId/:draftId/shortcuts","/:entityId/:threadPageId/shortcuts","/:entityId/:searchQuery/shortcuts","/:entityId/:channelFilesId/shortcuts","/:entityId/:scTeamOrEnterpriseId/shortcuts","/:entityId/:listsViewName/shortcuts","/:entityId/:canvasOpenedFromId/shortcuts"]},[Re.Q$]:{paths:["/:entityId/user_profile/:memberId","/:entityId/:timestamp/user_profile/:memberId","/:entityId/:viewName/user_profile/:memberId","/:entityId/:viewName/:invitationsTabId/user_profile/:memberId","/:entityId/:tabId/user_profile/:memberId","/:entityId/:draftId/user_profile/:memberId","/:entityId/:threadPageId/user_profile/:memberId","/:entityId/:searchQuery/user_profile/:memberId","/:entityId/:channelFilesId/user_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/user_profile/:memberId","/:entityId/:listsViewName/user_profile/:memberId","/:entityId/:canvasOpenedFromId/user_profile/:memberId"]},[Re.E2]:{paths:["/:entityId/help","/:entityId/:timestamp/help","/:entityId/:viewName/help","/:entityId/:viewName/:invitationsTabId/help","/:entityId/:tabId/help","/:entityId/:draftId/help","/:entityId/:threadPageId/help","/:entityId/:searchQuery/help","/:entityId/:channelFilesId/help","/:entityId/:scTeamOrEnterpriseId/help","/:entityId/:listsViewName/help","/:entityId/:canvasOpenedFromId/help"]},[Re.vA]:{paths:["/:entityId/help/:articleId","/:entityId/:timestamp/help/:articleId","/:entityId/:viewName/help/:articleId","/:entityId/:viewName/:invitationsTabId/help/:articleId","/:entityId/:tabId/help/:articleId","/:entityId/:draftId/help/:articleId","/:entityId/:threadPageId/help/:articleId","/:entityId/:searchQuery/help/:articleId","/:entityId/:channelFilesId/help/:articleId","/:entityId/:scTeamOrEnterpriseId/help/:articleId","/:entityId/:listsViewName/help/:articleId","/:entityId/:canvasOpenedFromId/help/:articleId"]},[Re.Dn]:{paths:["/:entityId/rimeto_profile/:memberId","/:entityId/:timestamp/rimeto_profile/:memberId","/:entityId/:viewName/rimeto_profile/:memberId","/:entityId/:viewName/:invitationsTabId/rimeto_profile/:memberId","/:entityId/:tabId/rimeto_profile/:memberId","/:entityId/:searchQuery/rimeto_profile/:memberId","/:entityId/:draftId/rimeto_profile/:memberId","/:entityId/:threadPageId/rimeto_profile/:memberId","/:entityId/:channelFilesId/rimeto_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/rimeto_profile/:memberId","/:entityId/:listsViewName/rimeto_profile/:memberId","/:entityId/:canvasOpenedFromId/rimeto_profile/:memberId"]},[Re.Ie]:{paths:["/:entityId/feedback","/:entityId/:timestamp/feedback","/:entityId/:viewName/feedback","/:entityId/:viewName/:invitationsTabId/feedback","/:entityId/:tabId/feedback","/:entityId/:draftId/feedback","/:entityId/:threadPageId/feedback","/:entityId/:searchQuery/feedback","/:entityId/:channelFilesId/feedback","/:entityId/:scTeamOrEnterpriseId/feedback","/:entityId/:listsViewName/feedback","/:entityId/:canvasOpenedFromId/feedback"]},[Re.Bh]:{paths:["/:channelId/huddle"]},[Re.Mv]:{paths:["/:entityId/huddles_captions","/:entityId/:timestamp/huddles_captions","/:entityId/:viewName/huddles_captions","/:entityId/:viewName/:invitationsTabId/huddles_captions","/:entityId/:tabId/huddles_captions","/:entityId/:draftId/huddles_captions","/:entityId/:threadPageId/huddles_captions","/:entityId/:searchQuery/huddles_captions","/:entityId/:channelFilesId/huddles_captions","/:entityId/:scTeamOrEnterpriseId/huddles_captions","/:entityId/:listsViewName/huddles_captions","/:entityId/:canvasOpenedFromId/huddles_captions"]},[Re.d2]:{paths:["/:entityId/contact_profile/:contactExternalId","/:entityId/:timestamp/contact_profile/:contactExternalId","/:entityId/:viewName/contact_profile/:contactExternalId","/:entityId/:viewName/:invitationsTabId/contact_profile/:contactExternalId","/:entityId/:tabId/contact_profile/:contactExternalId","/:entityId/:draftId/contact_profile/:contactExternalId","/:entityId/:threadPageId/contact_profile/:contactExternalId","/:entityId/:searchQuery/contact_profile/:contactExternalId","/:entityId/:channelFilesId/contact_profile/:contactExternalId","/:entityId/:scTeamOrEnterpriseId/contact_profile/:contactExternalId","/:entityId/:listsViewName/contact_profile/:contactExternalId","/:entityId/:canvasOpenedFromId/contact_profile/:contactExternalId"]},[Re.p$]:{paths:["/:entityId/record/:recordId","/:entityId/:timestamp/record/:recordId","/:entityId/:viewName/record/:recordId","/:entityId/:viewName/:invitationsTabId/record/:recordId","/:entityId/:tabId/record/:recordId","/:entityId/:draftId/record/:recordId","/:entityId/:threadPageId/record/:recordId","/:entityId/:searchQuery/record/:recordId","/:entityId/:channelFilesId/record/:recordId","/:entityId/:scTeamOrEnterpriseId/record/:recordId","/:entityId/:listsViewName/record/:recordId","/:entityId/:canvasOpenedFromId/record/:recordId"]},[Re.td]:{paths:["/:entityId/:tabId/:workflowTemplateId"]}};function Un(){(0,a.S2)(Yt,In)}c(Un,"setRoutes");const En=c(ot=>{let{routeName:mt,params:ct={}}=ot;const{entityId:kt}=ct;return kt&&Mt(kt)?((0,a._U)(mt,{...ct,entityId:Re.as[kt]},{shouldReplaceState:!0}),!1):!0},"maybe_redirect_entity");var Bn=e(4338953270),Mn=e(109860581),Vn=e(3193155968),rs=e(7429662208);function as(ot){let{prevTeamId:mt,nextTeamId:ct}=ot;if(!ct||mt===ct)return;const kt=(0,l.getStoreInstanceByTeamId)(ct),un=kt.getState(),Cn=(0,rs.e6)(un),pn=(0,rs.Le)(un,{tab:Cn});kt.dispatch((0,Bn.C)({prevViewSet:void 0,prevTab:void 0,nextViewSet:pn,nextTab:Cn,windowId:Vn.N2,navigateParams:{},triggerType:Mn.w.TEAM_SWITCH}))}c(as,"maybeRunTeamSwitchNavigateListeners");var jn=e(6555262004),es=e(5078290763),Qn=e(4656278360),ss=e(2567914105),ft=e(9003400431),pt=e(8243624171);function Ht(ot){let{nextTeamId:mt,prevTeamId:ct}=ot;const{dispatch:kt,getState:un}=(0,l.getStoreInstanceByTeamId)(ct),Cn=un();return(0,ss.iS)(Cn)?new Promise((Kn,os)=>{kt((0,es.P)({openModalProps:{isStackable:!0},onConfirmClose:()=>{kt((0,Qn.U)(!1)),kt((0,ft.O)({closeAll:!0})),Kn()},onCancelClose:()=>{os()}}))}):(ct&&!(0,pt.Vq)({teamId:ct})&&kt(mt===ct?(0,ft.O)({closeNamed:jn.N}):(0,ft.O)({closeAll:!0})),!0)}c(Ht,"modalListenerBefore");var nn=e(6088404775);function kn(ot){const mt=(0,nn.h)();return mt!=null&&mt.onClose&&(mt==null||mt.onClose()),!0}c(kn,"pinsPopoverListenerAfter");var xt=e(3982416567),Dn=e(6304789565),Fn=e(1466694191),wn=e(6078549397),It=e(7307560139),Je=e(6822097892),X=e(4033441523);const _e=["comment_thread","activity_history","files","rimeto_profile","thread",Re.li,Re.lM,Re.De,Re.Dn,Re.Q$],ye=(0,Dn.Ay)("Post activity history routing side effects",(ot,mt,ct)=>{let{params:kt,prevRouteInfo:un,routeName:Cn}=ct;var pn;const Kn=kt==null?void 0:kt.entityId,os=un==null||(pn=un.params)===null||pn===void 0?void 0:pn.entityId,cs=Vn.N2;if(Cn===Re._G&&Kn&&(0,Fn.A)(Kn)){const{fileIdOrQuipThreadId:mo}=(0,wn.EX)(Kn);_e.includes(un==null?void 0:un.routeName)&&ot((0,Je.A)({fileId:mo,windowId:cs,source:X.f.QUIP_ACTIVITY_HISTORY_LISTENER,isFromCloseActivityHistory:!0}))}let Gs=Kn,Xs=os;(0,Wt.Ay)(os)&&(0,Wt.Ay)(Kn)&&(Gs=(0,wn.EX)(os).fileIdOrQuipThreadId,Xs=(0,wn.EX)(Kn).fileIdOrQuipThreadId),Gs!==Xs&&ot((0,It.NA)({windowId:cs}))});ye.meta={name:"createThunk",key:"createThunkpostQuipActivityHistoryRouting",description:"Post activity history routing side effects"};function De(ot){let{params:mt,prevRouteInfo:ct,routeName:kt,reason:un}=ot;const Cn=mt.teamId||mt.teamOrEnterpriseId,{dispatch:pn,getState:Kn}=(0,l.getStoreInstanceByTeamId)(Cn);(0,xt.O4)(Kn())&&pn(ye({routeName:kt,params:mt,prevRouteInfo:ct,reason:un}))}c(De,"quipActivityHistoryListener");const Ge=c(ot=>{let{nextTeamId:mt,routeName:ct,params:kt}=ot;const un={routeName:ct,params:kt};return mt&&(0,j.t2)(mt,"lastRoute",un),!0},"save_route_to_local_config");var et=e(210422728),bt=e(9551235052);function sn(ot){let{prevTeamId:mt}=ot;const ct=(0,l.getStoreInstanceByTeamId)(mt);return(0,bt.J)(ct.getState())&&(ct.dispatch((0,et.T)(!0)),k.g.delete("setNavigatedDuringWarmBoot")),Promise.resolve()}c(sn,"setNavigatedDuringWarmBoot");var fn=e(6495946979),Sn=e(8473952534),dt=e(8213251995),z=e(3977512448);function te(ot){let{nextTeamId:mt,prevRouteInfo:ct,params:kt}=ot;var un;const Cn=(0,l.getStoreInstanceByTeamId)(mt),pn=Cn.getState(),Kn=(0,dt.c8)(pn),os=(0,ce.OL)(pn,kt.entityId),cs=(ct==null||(un=ct.params)===null||un===void 0?void 0:un.entityId)||"";(cs===je.eE.CHANNELS||cs===z.b||cs===z.Z1)&&(kt!=null&&kt.entityId)&&os&&!(0,fn.bl)(os)&&Cn.dispatch((0,Sn.Tm)({channelId:kt.entityId,prevRoute:cs})),Kn&&(ct==null?void 0:ct.routeName)==="ROUTE_ENTITY"&&(0,oe.A)(cs)&&Cn.dispatch((0,Sn.Tm)({channelId:null,prevRoute:null}))}c(te,"setPreviewingFromChannelBrowserOrLaunchpad");var ve=e(1302213854);const Oe=c(ot=>{let{prevTeamId:mt,nextTeamId:ct}=ot;return mt!==ct?(0,l.dispatchForClientStore)((0,ve.Mb)(!0)):(0,l.dispatchForClientStore)((0,ve.Mb)(!1))},"set_should_log_team_switch_metrics");var $e=e(9143148823),at=e(8628205589),Xe=e(4529239752),Nt=e(9795506498);function $t(ot){let{nextTeamId:mt,uuid:ct,shouldReplaceState:kt,reason:un}=ot;var Cn;if(!mt||!ct)return;if(un!==a.GB)if(kt)(0,l.dispatchForClientStore)((0,at.HQ)({windowId:Vn.N2,entry:{id:ct,ts:Date.now(),teamId:mt,isIA4:!1}}));else{const cs=(0,Xe.XG)((0,l.getStateForClientStore)());cs>0&&(0,l.dispatchForClientStore)((0,at.$E)({windowId:Vn.N2,index:cs})),(0,l.dispatchForClientStore)((0,at.y2)({windowId:Vn.N2,entry:{id:ct,ts:Date.now(),teamId:mt,isIA4:!1}}))}const pn=(0,l.getStoreInstanceByTeamId)(mt),Kn=pn.getState();if(!((Cn=window.history.state)===null||Cn===void 0)&&Cn.isIA4)return;const os=(0,rs.Gl)(Kn);pn.dispatch((0,Nt.A)({windowId:Vn.N2,entry:os}))}c($t,"updateIA4History");var Ln=e(235108050);const xn=c(ot=>{let{prevTeamId:mt,nextTeamId:ct}=ot;if(mt===ct||!ct)return;const kt=(0,j.W6)("recentlyUsedTeamIds")||mt&&[mt]||[];kt.unshift(ct),(0,j.q9)("recentlyUsedTeamIds",(0,Ln.A)(kt)),(0,j.t2)(ct,"mostRecentlyUsedDate",new Date)},"update_recently_used_teams");var Jn=e(9399618736),$n;(function(ot){ot.JA_JP="ja-JP",ot.EN_US="en-US",ot.EN_GB="en-GB",ot.ES_ES="es-ES",ot.ES_LA="es-LA",ot.FR_FR="fr-FR",ot.DE_DE="de-DE",ot.PT_BR="pt-BR",ot.KO_KR="ko-KR",ot.IT_IT="it-IT",ot.ZH_CN="zh-CN",ot.ZH_TW="zh-TW"})($n||($n={}));const w=$n.EN_US;var de=e(4423055085),we=e(9421999304),Et=e(571104883),gn=e(9907843289),Zt=e(2554594353),cn=e(3080748521);function qt(ot){let{nextTeamId:mt,routeName:ct,params:kt}=ot;mt&&((0,l.dispatchForClientStore)((0,Zt.b)({teamId:mt,routeName:ct,params:kt,fromNavigation:!0})),(0,l.getStoreInstanceByTeamId)(mt)&&(0,l.dispatchForTeamId)(mt,(0,et.w)({routeName:ct,params:kt})))}c(qt,"syncRouteStoreWithUrl");function Xn(ot){return _s.apply(this,arguments)}c(Xn,"navigateToLastSavedRoute");function _s(){return _s=(0,t.coroutine)(function*(ot){let{prevTeamId:mt,nextTeamId:ct,navigationTimestamp:kt}=ot;const un=(0,l.getStateForClientStore)();if(!ct||(0,d.hasWorkspaceFailedToBoot)(un,ct)||(0,d.doesWorkspaceNeed2FASetup)(un,ct)||(0,d.isWorkspaceExpired)(un,ct)||(0,d.isWorkspacePendingAuth)(un,ct))return!0;const Cn=(0,l.getStoreInstanceByTeamId)(ct),pn=Cn&&Cn.getState(),Kn=(0,cn.MC)(pn),os=(0,cn.D8)(pn)||Re._G;if((0,Et.y3)()&&os===r.o)return!0;const cs=!mt;return yield(0,a._U)(os,{...Kn,teamId:ct},{reason:"navigateToLastSavedRoute",shouldReplaceState:cs,navigationTimestamp:kt}),!1}),_s.apply(this,arguments)}c(_s,"_navigateToLastSavedRoute");function Ts(ot){let{prevTeamId:mt,nextTeamId:ct}=ot;if(!mt||!ct||mt===ct)return;const kt=Os(ct);return Promise.resolve((0,we.xS)(kt,ct)).then(()=>{})}c(Ts,"ensureCorrectLocaleForTeam");function As(ot){let{prevTeamId:mt,nextTeamId:ct}=ot;if(!mt||!ct||mt===ct)return;const kt=Os(ct);if(kt)return(0,we.zI)(kt)}c(As,"ensureCorrectLocaleForExternalLibs");function Os(ot){const mt=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),ct=mt?mt[1]:(0,j._z)(ot,"user_locale");return ct&&(0,gn.YI)(ct)?ct:w}c(Os,"getLocaleForTeam");const is=(0,Q.A)(Is);function Is(){k.g.set("maybeOpenOtherTeamInBrowser",(0,a.Y8)(Ke)),k.g.set("modalListenerBefore",(0,a.Y8)(Ht)),k.g.set("maybeFinishSignin",(0,a.Y8)(Ve)),k.g.set("maybeRedirectEntity",(0,a.Y8)(En)),k.g.set("startTeamSwitchTiming",(0,a.Y8)($e.Ay)),k.g.set("navigateToLastSavedRoute",(0,a.Y8)(Xn,[r.o])),k.g.set("ensureChannel",(0,a.Y8)(Se,[])),k.g.set("draftsListenerBefore",(0,a.Y8)(Te)),k.g.set("ensureCorrectLocaleForExternalLibs",(0,a.Dd)(As)),k.g.set("updateIA4History",(0,a.Dd)($t)),k.g.set("maybeRunTeamSwitchNavigateListeners",(0,a.Dd)(as)),k.g.set("setNavigatedDuringWarmBoot",(0,a.Dd)(sn)),k.g.set("pinsPopoverListenerAfter",(0,a.Y8)(kn)),k.g.set("syncRouteStoreWithUrl",(0,a.Dd)(qt)),k.g.set("ensureCorrectLocaleForTeam",(0,a.Dd)(Ts)),k.g.set("setShouldLogTeamSwitchMetrics",(0,a.Dd)(Oe)),k.g.set("setLocalConfigForTeamWithKey",(0,a.Dd)(Ge)),k.g.set("updateRecentlyUsedTeams",(0,a.Dd)(xn)),k.g.set("maybeFetchClientPermissions",(0,a.Dd)(He)),k.g.set("maybeIncrementHistoryLength",(0,a.Dd)(Jn.Cu)),k.g.set("setPreviewingFromChannelBrowserOrLaunchpad",(0,a.Dd)(te)),k.g.set("channelCanvasListener",(0,a.Dd)($)),k.g.set("quipActivityHistoryListener",(0,a.Dd)(De))}c(Is,"registerRouteListenersInner"),(0,de.ul)("router.listeners",()=>[...k.g.entries()]);const dn={syncRouteStoreWithUrl:qt,navigateToLastSavedRoute:Xn,ensureCorrectLocaleForTeam:Ts,ensureCorrectLocaleForExternalLibs:As,getLocaleForTeam:Os};Object.defineProperty(dn,"syncRouteStoreWithUrl",{get:()=>qt,set:ot=>{qt=ot}}),Object.defineProperty(dn,"navigateToLastSavedRoute",{get:()=>Xn,set:ot=>{Xn=ot}}),Object.defineProperty(dn,"ensureCorrectLocaleForTeam",{get:()=>Ts,set:ot=>{Ts=ot}}),Object.defineProperty(dn,"ensureCorrectLocaleForExternalLibs",{get:()=>As,set:ot=>{As=ot}}),Object.defineProperty(dn,"getLocaleForTeam",{get:()=>Os,set:ot=>{Os=ot}});var Yn=e(3245843483);const ht=c(()=>({deviceId:Yn.iCQ}),"getSharedTracerTags");var Rs=e(6338445630);const ls=function(){var ot=(0,t.coroutine)(function*(){Yn.goh.isAvailable()&&(0,Yn.goh)().includes("DisableServiceWorker")&&(yield(0,Rs._E)())});return c(function(){return ot.apply(this,arguments)},"disableServiceWorkerForClientConfig")}(),Ms=function(){var ot=(0,t.coroutine)(function*(){(0,Et.X5)()===Et.h5.SAFARI&&(yield(0,Rs._E)())});return c(function(){return ot.apply(this,arguments)},"disableServiceWorkerForSafari")}(),Ds=function(){var ot=(0,t.coroutine)(function*(){yield Ms(),yield ls()});return c(function(){return ot.apply(this,arguments)},"maybeDisableServiceWorker")}();var Ze=e(1658558415),Ut=e(6869533831),Lt=e(6123258136),it=e(1319016163);function At(ot){return gt.apply(this,arguments)}c(At,"setupOtherTeamsToBoot");function gt(){return gt=(0,t.coroutine)(function*(ot){let{contextualInfo:mt}=ot;return{contextualInfo:mt,otherTeamsToBoot:(0,it.gv)()}}),gt.apply(this,arguments)}c(gt,"_setupOtherTeamsToBoot");var Pt=e(5695315324),Vt=e(723189278),an=e(4148579738),Pn=e(4172706442),mn=e(2664504268);let Tt;function tn(){return An.apply(this,arguments)}c(tn,"getClientIdForSelf");function An(){return An=(0,t.coroutine)(function*(){if(!Tt){const ot=(0,mn.A)();yield navigator.locks.request(ot,function(){var mt=(0,t.coroutine)(function*(ct){var kt,un;Tt=((un=(kt=(yield navigator.locks.query()).held)===null||kt===void 0?void 0:kt.find(Cn=>(ct==null?void 0:ct.name)===Cn.name))===null||un===void 0?void 0:un.clientId)||ot});return function(ct){return mt.apply(this,arguments)}}())}return Tt}),An.apply(this,arguments)}c(An,"_getClientIdForSelf");var yn=e(2878685908),jt=e(4518410378),ts=e(8957924187);const Hn=c(ot=>Boolean(!ot.id&&ot.method),"isNotificationMessage"),Rn=c(ot=>Boolean(ot.id&&ot.method),"isRequestMessage"),Cs=c(ot=>Boolean(ot.id&&Object.prototype.hasOwnProperty.call(ot,"result")),"isResultMessage"),us=c(ot=>Boolean(ot.id&&ot.error),"isErrorMessage");class ms{await(mt){var ct=this;return(0,t.coroutine)(function*(){return new Promise(kt=>{ct.once(mt,un=>kt(un))})})()}createRequester(mt,ct){const kt=ct||(()=>Promise.resolve());return un=>kt().then(()=>this.request({method:mt,params:un}))}notify(mt){this.isVerbose&&this.info(`(${this.id})`,"notifying",mt),this.bc.postMessage(mt)}on(mt,ct){let kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const un=Array.isArray(mt)?mt:[mt],Cn=c(pn=>{let{data:Kn}=pn;Kn!=null&&Kn.method&&un.includes(Kn.method)&&(ct(Kn),kt&&Cn.off())},"h");return Cn.off=()=>this.bc.removeEventListener("message",Cn),this.bc.addEventListener("message",Cn),Cn}once(mt,ct){return this.on(mt,ct,!0)}request(mt){var ct=this;return(0,t.coroutine)(function*(){const kt=mt.id?mt.id:(0,mn.A)(),un={...mt,id:kt};return ct.isVerbose&&ct.info("requesting",un),ct.bc.postMessage(un),new Promise((Cn,pn)=>{const Kn=c(os=>{let{data:cs}=os;(cs==null?void 0:cs.id)===kt&&(ct.bc.removeEventListener("message",Kn),Cs(cs)?Cn(cs.result):us(cs)&&(ct.error(`Method \`${mt.method}\` responded with error:`,{request:mt,response:cs}),pn(new Error(cs.error.message))))},"responseHandler");ct.bc.addEventListener("message",Kn)})})()}respond(mt,ct){this.bc.postMessage({...ct,id:mt.id})}respondTo(mt,ct){var kt=this;return this.on(mt,function(){var un=(0,t.coroutine)(function*(Cn){try{const pn=yield ct(Cn.params);kt.respond(Cn,{result:pn})}catch(pn){kt.respond(Cn,{error:{code:-1,message:(pn==null?void 0:pn.toString())||"Unknown error occurred",data:{method:Cn.method}}})}});return function(Cn){return un.apply(this,arguments)}}())}setVerbose(mt){return this.isVerbose===mt?this.isVerbose:(this.isVerbose=mt,this.isVerbose&&this.bc.addEventListener("message",ct=>{let{data:kt}=ct;this.info("received",kt)}),this.isVerbose)}constructor(mt,ct=!1){var kt=this;this.id=mt,this.bc=new BroadcastChannel(ts.kv),this.info=function(){for(var un=arguments.length,Cn=new Array(un),pn=0;pn<un;pn++)Cn[pn]=arguments[pn];return(0,s.pq)("SQLITE-RPC",`(${kt.id})`,...Cn)},this.error=function(){for(var un=arguments.length,Cn=new Array(un),pn=0;pn<un;pn++)Cn[pn]=arguments[pn];return(0,s.z3)("SQLITE-RPC",`(${kt.id})`,...Cn)},this.isVerbose=this.setVerbose(ct)}}c(ms,"RpcBroadcast");class vs{readObjects(mt){var ct=this;return(0,t.coroutine)(function*(){return yield ct.awaitDatabaseReady,ct.rpc.request({method:"Request.DatabaseProvider.readObjects",params:mt})})()}start(){this.rpc.notify({method:"Notification.ClientReady",params:{clientId:this.windowId}}),this.rpc.on("Notification.DatabasePending",()=>{this.awaitDatabaseReady=this.rpc.await("Notification.DatabaseReady")})}constructor(mt){if(jt.J.sqliteClient)throw new Error("Cannot have more than one SqliteClient per window.");this.windowId=(0,ts.OF)(mt),this.rpc=new ms(this.windowId),this.awaitDatabaseReady=this.rpc.await("Notification.DatabaseReady");const ct=c(kt=>this.rpc.createRequester(kt,()=>this.awaitDatabaseReady),"createRequester");this.initTables=ct("Request.DatabaseProvider.initTables"),this.clearAllObjects=ct("Request.DatabaseProvider.clearAllObjects"),this.clearTable=ct("Request.DatabaseProvider.clearTable"),this.deleteObjects=ct("Request.DatabaseProvider.deleteObjects"),this.writeObjects=ct("Request.DatabaseProvider.writeObjects"),jt.J.sqliteClient=this}}c(vs,"SqliteClient");function Zn(){return Es.apply(this,arguments)}c(Zn,"initSqliteWorker");function Es(){return Es=(0,t.coroutine)(function*(){if((0,yn.$i)()||(0,yn.b3)()||(0,yn.Cu)()){const mt=(yield e.e("sqlite-worker-dev").then(e.bind(e,8045688959))).default;return new mt}return new Worker("/sqlite.worker.js")}),Es.apply(this,arguments)}c(Es,"_initSqliteWorker");function ks(){return hs.apply(this,arguments)}c(ks,"initSqliteClient");function hs(){return hs=(0,t.coroutine)(function*(){if(!jt.J.sqliteClient){const ot=yield tn();new vs(ot).start()}return jt.J.sqliteClient}),hs.apply(this,arguments)}c(hs,"_initSqliteClient");var fs=e(4724591729),Bs=e(6968387112),js=e(8445020572),Us=e(504058561),Ws=e(3803432550),Fs=e(2371143272);Ds(),window.boot_html__initial_boot_duration=Date.now()-window.sonic_boot__phase_1_5__start,window.boot_render_start=Date.now();function Ks(ot){return ot.registerConfig({isPersistenceEnabled:!0,isMultiTeamEnabled:(0,ae.VA)()}),ot.registerErrorHandlers(p),ot.registerDynamicImportFns({data:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-data")]).then(e.bind(e,6097732015)),apis:()=>Promise.all([e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-async-client-boot-apis")]).then(e.bind(e,6959220389)),render:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-render")]).then(e.bind(e,3020487052)),deferred:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-deferred")]).then(e.bind(e,4893422024))}),ot.registerInitialApiCalls({experimentData:C.dC,featureFlagData:C.BG,clientBootData:b,viewData:fe.L$,allEnterpriseData:ue,featureAccessData:C.jH,clientChannelsData:F}),an.e.register(ht),(0,se.b)(ot),ot.hooks.beforeDynamicImportsStart.tap("Render Placeholder",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return(0,v.Sp)({teamId:kt.teamOrEnterpriseBootId}),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.beforeDynamicImportsStart.tap("[experiment:wasm_sqlite_spike] Start downloading the sqlite worker",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return(0,P.MA)()&&Zn(),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.afterDynamicImportsStart.tap("[experiment:wasm_sqlite_spike] Start the sqlite client",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return(0,P.MA)()&&(yield ks()),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.afterDynamicImportsStart.tap("Set routes",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return Un(),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.afterDynamicImportsStart.tap("Set up client store",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return(0,Ws.x)(kt.teamId),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.afterDynamicImportsStart.tap("Register route listeners",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return is(),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.afterDynamicImportsStart.tap("Update last active team ID in localConfig",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;const{teamId:un}=kt;return un?(un!==(0,j.W6)("lastActiveTeamId")&&(0,j.q9)("lastActiveTeamId",un),{contextualInfo:kt}):{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.beforeInitializeTeam.tap("Halt further boot if client is reloading",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return window.isReloading?((0,s.pq)("BOOT",`(${kt.teamId}) Ongoing reload detected; Cancelling boot.`),(0,Vt.A)()):{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.beforeInitializeTeam.tap("[experiment:wasm_sqlite_spike] Init tables for team and user",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;const{teamId:un,userId:Cn}=kt;if((0,P.MA)()&&un&&Cn){const pn=(0,Pn.s)(),Kn=2500;yield(0,n.wj)(pn.initTables({teamId:un,userId:Cn}),Kn).catch(()=>(0,s.pq)("BOOT",`Timed out waiting ${Kn}ms to init SQLite tables, moving on`))}return{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.beforeInitializeTeam.tap("Set tokens",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return(0,Lt.L)({contextualInfo:kt})});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.beforeInitializeTeam.tap(" Kick off objectStore fetch for minChannelUpdated ",function(){var mt=(0,t.coroutine)(function*(ct){let{contextualInfo:kt}=ct;return((0,O.EZ)()||(0,P.MA)())&&(0,m.z6)({teamId:kt.teamId,userId:kt.userId}),{contextualInfo:kt}});return function(ct){return mt.apply(this,arguments)}}()),ot.hooks.setupMultiTeam.tap("Set up all other teams to boot if in multi team mode",At),ot.run()}if(c(Ks,"boot"),!(0,Ze.A)()){const ot=(0,Ut.z4)(Pt.Y.CLIENT_V2);if(!(0,Us.z$)()&&(0,fs.KV)()&&(0,Fs.b)()){const mt=e(8904626639);mt.init({dsn:`https://4162106b525941d087e5f8f5e446ae9b@app.${(0,Bs.Xk)()}/apps/sentryproxy/5865811`,release:`webapp@${(0,js.HF)()}`,defaultIntegrations:!1,integrations:[mt.browserTracingIntegration({enableInp:!0}),mt.browserProfilingIntegration(),mt.httpContextIntegration()],sampleRate:1,tracesSampleRate:1,profilesSampleRate:1,tracePropagationTargets:[],replaysSessionSampleRate:0,replaysOnErrorSampleRate:0})}Ks(ot)}const Js={boot:Ks}},3914849812:(x,A,e)=>{"use strict";e.d(A,{L$:()=>h});var t=e(9706240641),n=e.n(t),s=e(1460808057),i=e(7031360717),l=e(5695315324),o=e(8187930033),a=e(8414867410),r=e(796111729),d=e(5084575109),u=e(8834730594),_=e(8040098042),v=e(2960290117);function h(E){return f.apply(this,arguments)}c(h,"maybeFetchMessagesData");function f(){return f=(0,t.coroutine)(function*(E){const{appName:M,bootQueue:T,token:D,teamId:C}=E;if(!D)return(0,r.Ay)({teamOrEnterpriseId:C,label:"BOOT"}).error(new Error("Token missing; Unable to fetch messages data.")),null;if(!C)return(0,r.Ay)({teamOrEnterpriseId:C,label:"BOOT"}).error(new Error("teamId missing; Unable to fetch messages data.")),null;const m=yield(0,s.E)({contextualInfo:E});return I({bootQueue:T,token:D,teamId:C,routeInfo:m,appName:M})}),f.apply(this,arguments)}c(f,"_maybeFetchMessagesData");function I(E){return p.apply(this,arguments)}c(I,"fetchMessagesDataForRoute");function p(){return p=(0,t.coroutine)(function*(E){let{bootQueue:M,token:T,teamId:D,routeInfo:C,appName:m}=E;var O;const P=C==null||(O=C.params)===null||O===void 0?void 0:O.entityId;return P&&(0,_.A)(P)&&!(0,d.n)(P)&&!(0,a.bd)(P)&&!(0,u.A)(P)&&!(0,v.Ay)(P)?((0,i.pq)("BOOT",`Booting into channel: ${P}`),y({appName:m,bootQueue:M,token:T,teamId:D,id:P})):!(0,d.n)(P)&&!(0,a.bd)(P)&&!(0,u.A)(P)&&!(0,v.Ay)(P)?((0,i.pq)("BOOT","Couldn't determine boot channel. Falling back to default channel"),y({appName:m,bootQueue:M,token:T,teamId:D})):null}),p.apply(this,arguments)}c(p,"_fetchMessagesDataForRoute");function y(E){let{bootQueue:M,token:T,teamId:D,id:C,appName:m}=E;const O={token:T,canonical_avatars:!0,no_user_profile:!0,ignore_replies:!0,no_self:!0,include_full_users:!0,include_use_case:!0,include_stories:!0,no_members:!0,include_mutation_timestamps:!0,count:28};C&&(O.channel=C),O.include_free_team_extra_messages=!0,m===l.Y.SINGLE_CHANNEL_CLIENT&&(O.is_single_channel_boot=1);const P=new o.Ay({method:"conversations.view",args:O,teamId:D});return M.q(P).catch(R=>((0,r.Ay)({teamOrEnterpriseId:D,label:"BOOT"}).error(new Error(`unable to fetch messages data ${R}`)),null))}c(y,"fetchMessagesData");const g={fetchMessagesData:y}},879418974:(x,A,e)=>{"use strict";e.d(A,{d:()=>i});var t=e(9884588328),n=e(8798294025),s=e(6113051341);function i(l){let{channels:o,selfId:a}=l;const r={};return o.some((d,u)=>{const _=d==null?void 0:d.id;return(0,s.N)(d)?(r.general=_,!0):((0,t.Ur)(d)&&(r.slackbot=_),a&&(0,n.e)(d)===a&&(r.self=_),u||(r.first=_),!1)}),r.general||r.slackbot||r.self||r.first}c(i,"getAnyChannelForRouting")},1460808057:(x,A,e)=>{"use strict";e.d(A,{E:()=>a});var t=e(9706240641),n=e.n(t),s=e(879418974),i=e(8959118205),l=e(1151228631),o=e(6533394955);function a(_){return r.apply(this,arguments)}c(a,"getRouteInfo");function r(){return r=(0,t.coroutine)(function*(_){let{contextualInfo:v,channels:h}=_;const{teamId:f,isForegroundTeam:I}=v,p=(0,o.getStoreInstanceByTeamId)(f),y=(0,l.Gf)({store:p,shouldSetFocus:I});return y||d({contextualInfo:v,channels:h})}),r.apply(this,arguments)}c(r,"_getRouteInfo");function d(_){let{contextualInfo:v,channels:h}=_;const{teamId:f}=v;if(!f)return null;const I=(0,l.lQ)(f);if(I)return I;if(h){const p=v.userId;return u({channels:h,selfId:p})}return null}c(d,"calculateRouteInfo");function u(_){let{channels:v,selfId:h}=_;if(!v.length)return null;const f={routeName:i._G,params:{}},I=(0,s.d)({channels:v,selfId:h});return I&&(f.params.entityId=I),f}c(u,"getRouteFromBootData")},2212859256:(x,A,e)=>{"use strict";e.d(A,{y:()=>l});var t=e(9706702639),n=e(7031360717),s=e(6533394955),i=e(1314103953);function l(o){if(!o)return;const a=(0,s.getStoreInstanceByTeamId)(o);a&&((0,n.pq)("BOOT",`(${o}) Boot complete`),t.g.delete("setNavigatedDuringWarmBoot"),a.dispatch((0,i.b)(!1)),a.dispatch((0,i.k)(!1)))}c(l,"markTeamBootCompleted")},4892637646:(x,A,e)=>{"use strict";e.d(A,{b:()=>a,h:()=>l});var t=e(9706240641),n=e.n(t),s=e(7906695911),i=e(2872463257);function l(u){return o.apply(this,arguments)}c(l,"collectInitialPageLoadMetrics");function o(){return o=(0,t.coroutine)(function*(u){let{contextualInfo:_}=u;const{getTraceMeta:v,isBootingWarm:h,appName:f}=_,{getTracer:I,tags:p}=v(),y=(yield h)?s.H.WARM:s.H.COLD,g=I().createTrace({traceName:s.S.BOOT_INITIAL_LOAD,tags:{boot_type:y,app_name:f,...p},autoCreateRootSpan:!1,samplingOptions:{sampleType:i.nl.ALWAYS}});g.startSpan(s.S.BOOT_INITIAL_LOAD,{setAsRootSpan:!0,startTime:performance.timing.fetchStart,closeTime:window.boot_render_start}),g.startSpan(s.S.BOOT_INITIAL_LOAD_HTML,{startTime:performance.timing.fetchStart,closeTime:performance.timing.fetchStart+window.sonic_boot__phase_1__duration}),g.startSpan(s.S.BOOT_INITIAL_LOAD_JS,{startTime:window.sonic_boot__phase_1_5__start,closeTime:window.sonic_boot__phase_1_5__start+window.boot_html__initial_boot_duration}),I().reportTrace(g)}),o.apply(this,arguments)}c(o,"_collectInitialPageLoadMetrics");function a(u){u.hooks.beforeDynamicImportsStart.addCallIntercept(_=>r(_)),u.hooks.renderApp.addCallIntercept(_=>d(_))}c(a,"setupBootMetricsTracing");function r(u){return _=>{const{getTracer:v,setTrace:h,rootTrace:f}=_.contextualInfo.getTraceMeta(),p=v().createTrace({traceName:s.S.BOOT_TIME_TO_START_RENDER,autoCreateRootSpan:!1,parentSpanId:f.getRootSpanId(),traceId:f.getTraceId()});return p.startSpan(s.S.BOOT_TIME_TO_START_RENDER,{setAsRootSpan:!0,startTimeMs:window.boot_render_start}),h(p),u(_)}}c(r,"startTimeToRenderTrace");function d(u){return function(){var _=(0,t.coroutine)(function*(v){const{isBootingWarm:h,getTraceMeta:f,isForegroundTeam:I}=v.contextualInfo,{getTracer:p,getTrace:y,setTrace:g,rootTrace:E}=f(),M=p(),T=y(),D=(yield h)?s.H.WARM:s.H.COLD;return T.addTags({boot_type:D,is_foreground_team:I}),M.reportTrace(T),g(E),u(v)});return function(v){return _.apply(this,arguments)}}()}c(d,"endTimeToRenderTrace")},7906695911:(x,A,e)=>{"use strict";e.d(A,{H:()=>n,S:()=>t});var t;(function(s){s.BOOT_INITIAL_LOAD="boot:initial_load",s.BOOT_INITIAL_LOAD_HTML="boot:initial_load:html",s.BOOT_INITIAL_LOAD_JS="boot:initial_load:js",s.BOOT_TIME_TO_START_RENDER="boot:time_to_start_render",s.BOOT_TIME_TO_MOUNT_CLIENT="boot:time_to_mount_client"})(t||(t={}));var n;(function(s){s.COLD="cold",s.WARM="warm"})(n||(n={}))},9706702639:(x,A,e)=>{"use strict";e.d(A,{g:()=>t});const t=new Map},1609960255:(x,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(7114008777);const n=c(s=>{let{selectedTab:i,unreadsFilterToggleSelected:l,experimentActivityDMsChannelGroupOn:o,experimentIsActivityThreadV2GroupOn:a,experimentIsVipInActivityGroupOn:r}=s;return r&&i===t.L.All?l?"priority_unreads_v1":"priority_reads_and_unreads_v1":o&&l&&i===t.L.Replies?"chrono_unreads":o&&!l&&i===t.L.Replies?"chrono_reads_and_unreads":a&&l&&i===t.L.Replies?"chrono_threads_unreads_v2":l&&i===t.L.Replies?"chrono_threads_unreads":a&&i===t.L.Replies?"chrono_threads_reads_and_unreads_v2":i===t.L.Replies?"chrono_threads_reads_and_unreads":l&&i===t.L.Vip?"chrono_priority_only_unreads_v1":i===t.L.Vip?"chrono_priority_only_reads_and_unreads_v1":o&&l?"experimental_all_chrono_unreads_v1":o&&i===t.L.All?"experimental_all_chrono_reads_and_unreads_v1":l?"chrono_unreads":"chrono_reads_and_unreads"},"getFetchMode")},4577150972:(x,A,e)=>{"use strict";e.d(A,{c:()=>r});var t=e(3398586081),n=e(1609960255),s=e(7114008777),i=e(7156540029),l=e(8352634987),o=e(7912281988),a=e(6533394955);const r=(0,t.A)(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.L.All,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new l.Ay({storeKey:"activityIA4",fetch:_=>(0,a.dispatchForTeamId)(_,(0,o.Q)({limit:i.Q1,filter:d,fetchNew:!0,mode:(0,n.A)({selectedTab:d,unreadsFilterToggleSelected:u})})),isEnabled:()=>!0,metricsName:"activity",markStaleAfterSlowReconnect:()=>!0})})},1247361162:(x,A,e)=>{"use strict";e.d(A,{$T:()=>E,ES:()=>d,Eg:()=>h,Gt:()=>p,KD:()=>f,cJ:()=>g,f7:()=>y,gW:()=>I,mt:()=>D,om:()=>T,rz:()=>u,sG:()=>_,ut:()=>v,yC:()=>M,yN:()=>C});var t=e(7114008777),n=e(6695353875),s=e(4577150972),i=e(5921578648),l=e(8161242485),o=e(8847766420);const a=c((m,O)=>{var P,R;const L=(0,n.kz)(O),V=m===t.L.Reactions?m:(0,i.S)({filter:m,isUnreadMode:!!(!(O==null||(P=O.activityIA4)===null||P===void 0)&&P.filterUnreads),isFilteringRevampToggledOn:L});return(R=O.activityIA4)===null||R===void 0?void 0:R[V]},"getActivityListForFilter"),r=(0,l.Ay)(m=>{var O,P,R;const L=(0,o.ZT)(m),V=(O=m.activityIA4)===null||O===void 0?void 0:O.all;return((m==null||(P=m.activityIA4)===null||P===void 0?void 0:P.selectedTabId)===t.L.All||!(!(m==null||(R=m.activityIA4)===null||R===void 0)&&R.selectedTabId))&&(V!=null&&V.length)&&(0,s.c)(t.L.All,!1).maybeRefetch(L,t.N),m&&m.activityIA4&&V});r.meta={name:"createSelector",key:"createSelectorgetReadAndUnreadActivityList",description:m=>{var O,P,R;const L=(0,o.ZT)(m),V=(O=m.activityIA4)===null||O===void 0?void 0:O.all;return((m==null||(P=m.activityIA4)===null||P===void 0?void 0:P.selectedTabId)===t.L.All||!(!(m==null||(R=m.activityIA4)===null||R===void 0)&&R.selectedTabId))&&(V!=null&&V.length)&&(0,s.c)(t.L.All,!1).maybeRefetch(L,t.N),m&&m.activityIA4&&V}};const d=(0,l.Ay)(m=>{var O,P;const R=(0,o.ZT)(m),L=a(t.L.All,m);if(((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.All||!(!(m==null||(P=m.activityIA4)===null||P===void 0)&&P.selectedTabId))&&(L!=null&&L.length)){var V;(0,s.c)(t.L.All,(V=m.activityIA4)===null||V===void 0?void 0:V.filterUnreads).maybeRefetch(R,t.N)}return m&&m.activityIA4&&L});d.meta={name:"createSelector",key:"createSelectorgetActivityList",description:m=>{var O,P;const R=(0,o.ZT)(m),L=a(t.L.All,m);if(((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.All||!(!(m==null||(P=m.activityIA4)===null||P===void 0)&&P.selectedTabId))&&(L!=null&&L.length)){var V;(0,s.c)(t.L.All,(V=m.activityIA4)===null||V===void 0?void 0:V.filterUnreads).maybeRefetch(R,t.N)}return m&&m.activityIA4&&L}};const u=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Mentions,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Mentions&&R.length){var L;(0,s.c)(t.L.Mentions,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});u.meta={name:"createSelector",key:"createSelectorgetActivityListMentions",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Mentions,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Mentions&&R.length){var L;(0,s.c)(t.L.Mentions,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const _=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Replies,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Replies&&R.length){var L;(0,s.c)(t.L.Replies,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});_.meta={name:"createSelector",key:"createSelectorgetActivityListReplies",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Replies,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Replies&&R.length){var L;(0,s.c)(t.L.Replies,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const v=(0,l.Ay)(m=>{var O,P,R;const L=(0,o.ZT)(m),V=a(t.L.Reactions,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Reactions&&(!(m==null||(P=m.activityIA4)===null||P===void 0||(R=P.reactions)===null||R===void 0)&&R.length)){var B;(0,s.c)(t.L.Reactions,(B=m.activityIA4)===null||B===void 0?void 0:B.filterUnreads).maybeRefetch(L,t.N)}return m&&m.activityIA4&&V});v.meta={name:"createSelector",key:"createSelectorgetActivityListReactions",description:m=>{var O,P,R;const L=(0,o.ZT)(m),V=a(t.L.Reactions,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Reactions&&(!(m==null||(P=m.activityIA4)===null||P===void 0||(R=P.reactions)===null||R===void 0)&&R.length)){var B;(0,s.c)(t.L.Reactions,(B=m.activityIA4)===null||B===void 0?void 0:B.filterUnreads).maybeRefetch(L,t.N)}return m&&m.activityIA4&&V}};const h=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m);if(!(m==null||(O=m.activityIA4)===null||O===void 0)&&O.filterUnreads){var R;(0,s.c)(t.L.Unreads,(R=m.activityIA4)===null||R===void 0?void 0:R.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&m.activityIA4.unreads});h.meta={name:"createSelector",key:"createSelectorgetActivityListUnreads",description:m=>{var O;const P=(0,o.ZT)(m);if(!(m==null||(O=m.activityIA4)===null||O===void 0)&&O.filterUnreads){var R;(0,s.c)(t.L.Unreads,(R=m.activityIA4)===null||R===void 0?void 0:R.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&m.activityIA4.unreads}};const f=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Apps,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Apps&&R.length){var L;(0,s.c)(t.L.Apps,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});f.meta={name:"createSelector",key:"createSelectorgetActivityListApps",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Apps,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Apps&&R.length){var L;(0,s.c)(t.L.Apps,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const I=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Channels,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Channels&&R.length){var L;(0,s.c)(t.L.Channels,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});I.meta={name:"createSelector",key:"createSelectorgetActivityListChannels",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Channels,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Channels&&R.length){var L;(0,s.c)(t.L.Channels,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const p=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Priority,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Priority&&R.length){var L;(0,s.c)(t.L.Priority,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});p.meta={name:"createSelector",key:"createSelectorgetActivityListPriority",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Priority,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Priority&&R.length){var L;(0,s.c)(t.L.Priority,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const y=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Vip,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Vip&&R.length){var L;(0,s.c)(t.L.Vip,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});y.meta={name:"createSelector",key:"createSelectorgetActivityListVip",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Vip,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Vip&&R.length){var L;(0,s.c)(t.L.Vip,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const g=(0,l.Ay)(m=>m&&m.activityIA4&&m.activityIA4.unreadVip);g.meta={name:"createSelector",key:"createSelectorgetActivityListUnreadVip",description:m=>m&&m.activityIA4&&m.activityIA4.unreadVip};const E=(0,l.Ay)(m=>m&&m.activityIA4&&m.activityIA4.unreadOther);E.meta={name:"createSelector",key:"createSelectorgetActivityListUnreadOther",description:m=>m&&m.activityIA4&&m.activityIA4.unreadOther};const M=(0,l.Ay)(m=>m&&m.activityIA4&&m.activityIA4.other);M.meta={name:"createSelector",key:"createSelectorgetActivityListOther",description:m=>m&&m.activityIA4&&m.activityIA4.other};const T=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.EverythingElse,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.EverythingElse&&R.length){var L;(0,s.c)(t.L.EverythingElse,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});T.meta={name:"createSelector",key:"createSelectorgetActivityListEverythingElse",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.EverythingElse,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.EverythingElse&&R.length){var L;(0,s.c)(t.L.EverythingElse,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const D=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.DMS,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.DMS&&R.length){var L;(0,s.c)(t.L.DMS,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});D.meta={name:"createSelector",key:"createSelectorgetActivityListDms",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.DMS,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.DMS&&R.length){var L;(0,s.c)(t.L.DMS,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}};const C=(0,l.Ay)(m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Invitations,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Invitations&&(R!=null&&R.length)){var L;(0,s.c)(t.L.Invitations,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R});C.meta={name:"createSelector",key:"createSelectorgetActivityListInvitations",description:m=>{var O;const P=(0,o.ZT)(m),R=a(t.L.Invitations,m);if((m==null||(O=m.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.Invitations&&(R!=null&&R.length)){var L;(0,s.c)(t.L.Invitations,(L=m.activityIA4)===null||L===void 0?void 0:L.filterUnreads).maybeRefetch(P,t.N)}return m&&m.activityIA4&&R}}},5921578648:(x,A,e)=>{"use strict";e.d(A,{S:()=>s});var t=e(5235917009),n=e(7114008777);const s=c(i=>{let{filter:l,isUnreadMode:o,isFilteringRevampToggledOn:a,mode:r}=i;return r==="chrono_priority_only_unreads_v1"?"unreadVip":r==="priority_reads_and_unreads_v1"?"other":r==="priority_unreads_v1"?"unreadOther":o&&l===n.L.EverythingElse?`unread${l.charAt(0).toUpperCase()+l.slice(1)}`:o&&a?`unread${(0,t.A)(l)}`:!a&&o?"unreads":l},"getFilterForSelectedMode")},2309387455:(x,A,e)=>{"use strict";e.d(A,{N:()=>n,v:()=>t});const t=c(s=>s&&"priority"in s,"isActivityFeedEntryVip"),n=c(s=>{var i;const l=(i=s.findIndex(d=>!(t(d)&&d.is_unread)))!==null&&i!==void 0?i:0,o=l===-1?s.length:l,a=s.slice(0,o),r=s.slice(o);return[a,r]},"getSeparateLists")},7912281988:(x,A,e)=>{"use strict";e.d(A,{Q:()=>P});var t=e(3290693121),n=e(537208959),s=e(7114008777),i=e(6422693406),l=e(9694536345),o=e(9648131521),a=e(3622175906),r=e(4798756512),d=e(6642124196),u=e(796111729),_=e(3855029223),v=e(6695353875),h=e(9006747218),f=e(4577150972),I=e(5921578648),p=e(2309387455),y=e(6845763719),g=e(5728184452),E=e(6304789565),M=e(8847766420),T=e(3694676182),D=e(1496122061),C=e(6111266013),m=e(3683482182);const O={"action-items":!0},P=(0,E.Ay)("Fetch user activity",function(R,L){let{limit:V,filter:B,mode:K,fetchNew:b,isUnreadMode:S,isInbox:G,types:H}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{limit:20,mode:"chrono_reads_and_unreads",filter:s.L.All,isInbox:!1};R((0,h.G3)(!0));const U=L(),F=(0,M.ZT)(U),Y=(0,y.F)(U),Z=(0,y.S1)(U),ee=(0,y.d5)(U),j=(0,y.hT)(U),ge=(0,v.UU)(U),ne=(0,v.kz)(U),ue=(0,t.a)(U),he=(0,v.zu)(U),be=(0,n.TF)(U),xe=(0,v.Ts)(U),Le=(0,d.isTodosLaterV2Enabled)(U),fe=(0,I.S)({filter:B,isUnreadMode:S!==void 0?S:j,isFilteringRevampToggledOn:ne,mode:K}),se=Y==null?void 0:Y[fe],Q=H||(0,g.TO)(fe,{experimentBundleAppsActivityWithBEGroupOn:ge,experimentIsActivityThreadV2GroupOn:be,experimentIsVipThreadsEnabledGroupOn:xe,experimentTodosLaterV2GroupOn:Le,isInbox:G,mode:K});return O!=null&&O[B]||!b&&!se?(R((0,h.G3)(!1)),i.S.resolve()):((0,f.c)(B,j).markObjectsAsFresh(F,[s.N]),R((0,o.X)({limit:V,reason:"fetchActivityFeed",types:Q,mode:K,cursor:b?void 0:se})).then(k=>{if(!k.items)return;if(he&&(K==="priority_reads_and_unreads_v1"||K==="priority_unreads_v1")){var N;const[q,re]=(0,p.N)(k.items);R((0,h.bl)({nextCursor:Y==null?void 0:Y.unreadVip,items:q,filter:"unreadVip",refreshItems:(ue||he)&&b})),R((0,h.bl)({nextCursor:k==null||(N=k.response_metadata)===null||N===void 0?void 0:N.next_cursor,items:re,filter:fe,refreshItems:(ue||he)&&b}))}else{var $;R((0,h.bl)({nextCursor:k==null||($=k.response_metadata)===null||$===void 0?void 0:$.next_cursor,items:k.items,filter:fe,refreshItems:(ue||he)&&b}))}if(K==="chrono_unreads"){const q=(0,y.cJ)(L()),re=(0,m.xY)(L());k.items.length!==q&&R((0,l.O)()).then(le=>{R((0,T.Q7)(le));const Ae=(0,_.E)({state:U}),Te=(0,u.Ay)({getState:L,label:"ACTIVITY_BADGING"});try{const Ne=Ae.createSpan({name:"ia4client_activity_badge:mismatch",samplingOptions:{sampleType:r.tS.ALWAYS},options:{tags:{num_unread_activity_items:k.items.length,old_activity_badge_count:q,new_channel_badges:JSON.stringify(le.channelBadges),old_channel_badges:JSON.stringify(re)}}});Ne.close(),Ae.reportSpans([Ne]),Te.info(`Activity badge mismatch. number of unread activity.feed items: ${k.items.length} activityBadgeCount: ${q}: counts.channelBadges: ${JSON.stringify(le==null?void 0:le.channelBadges)} old channelBadges: ${JSON.stringify(re)}`)}catch{}})}const W="slack-connect-fetch-invites-for-activity-feed";b&&!Z&&["all","invitations","unreadAll","unreadInvitations"].includes(B)&&k.items.some(q=>{let{item:re}=q;return g.Oi.includes(re.type)})&&R((0,C.p)({direction:a.D.Incoming,reason:W})).then(()=>R((0,h.xv)(!0))),b&&!ee&&["all","invitations","unreadAll","unreadInvitations"].includes(B)&&R((0,D.d)({reason:W})).then(()=>R((0,h.ae)(!0)))}).finally(()=>R((0,h.G3)(!1))))});P.meta={name:"createThunk",key:"createThunkfetchActivityFeed",description:"Fetch user activity"}},5728184452:(x,A,e)=>{"use strict";e.d(A,{Oi:()=>n,TO:()=>l,b8:()=>a,kV:()=>o});var t=e(6626377467);const n=["external_channel_invite","shared_workspace_invite","external_dm_invite"],s=["at_user","at_user_group","at_channel","at_everyone","keyword","list_record_assigned","list_user_mentioned"],i=["at_user","at_user_group","at_channel","at_everyone","keyword"],l=c((r,d)=>{let{experimentBundleAppsActivityWithBEGroupOn:u,experimentIsActivityThreadV2GroupOn:_,experimentIsVipThreadsEnabledGroupOn:v,experimentTodosLaterV2GroupOn:h,isInbox:f,mode:I}=d;const p=u?"bot_dm_bundle":"bot_dm";let y=[_?"thread_v2":"thread_reply","message_reaction","internal_channel_invite","list_record_edited",p,...s,...n];h&&y.push("saved_reminder");const g=r.toLowerCase();if(!(I==="experimental_all_chrono_unreads_v1"||I==="experimental_all_chrono_reads_and_unreads_v1"||I==="experimental_priority_unreads_v1"||I==="experimental_everything_else_reads_and_unreads_v1"||I==="experimental_everything_else_unreads_v1"))return(I==="chrono_priority_only_reads_and_unreads_v1"||I==="chrono_priority_only_unreads_v1")&&(y=i,v&&(g.includes("vip")||g.includes("all"))&&(y=[...i,"thread_v2","internal_channel_invite"])),g.includes("mentions")&&(y=s),g.includes("apps")&&(y=[p]),g.includes("replies")&&(y=void 0),f&&g.includes("replies")&&(y=["thread_v2"]),g.includes("reactions")&&(y=["message_reaction"]),g.includes("unreads")&&(y=[p,_?"thread_v2":"thread_reply","internal_channel_invite",...s,...n]),g.includes("invitations")&&(y=["internal_channel_invite",...n]),f&&g.includes("channels")&&(y=["experimental_channels"]),f&&g.includes("dms")&&(y=["experimental_dms"]),f&&y&&(g.includes("all")||g.includes("unreads"))&&(y.push("experimental_dms"),y.push("experimental_channels")),y},"getActivityTypes"),o=c(r=>(r==null?void 0:r.type)==="section_bundle"&&"section"in r,"isSectionBundle"),a=c(r=>{let{items:d}=r;return(0,t.A)(d,u=>{if("key"in u&&(u==null?void 0:u.type)==="non_collapsible_header")return`item-by-feed-key-${u==null?void 0:u.key}`;if("ts"in u&&(u==null?void 0:u.type)==="channel_bundle")return`channel-bundle-${u==null?void 0:u.ts}`;if(o(u)){var _;return`section-bundle-${u==null||(_=u.section)===null||_===void 0?void 0:_.channelSection.id}`}const{messageTs:v,type:h,threadTs:f,channelId:I,invite:p,key:y}=u;return h==="message_reaction"?`reaction-${v}`:h==="thread_reply"||h==="thread_v2"?`thread-${f}`:h==="external_channel_invite"?`external-channel-invite-${p}`:h==="external_dm_invite"?`external-dm-invite-${p}`:h==="shared_workspace_invite"?`shared-workspace-invite-${p}`:h==="im"?`im${I}`:h==="experimental_dms"?`im${I}`:h==="experimental_channels"?`im${I}`:y!==void 0?`item-by-feed-key-${y}`:`mention-${v}`})},"getUniqueActivityItems")},280697554:(x,A,e)=>{"use strict";e.d(A,{A:()=>bl});var t=e(1416482128),n=e(7763652800),s=e(796111729),i=e(4423055085),l=e(4724591729),o=e(8520727613),a=e(2791814261),r=e(1535672935),d=e(6304789565),u=e(6776011876),_=e(6533394955);const v=(0,d.Ay)("maybeDisableDebugger side effect handler",()=>{if((0,l.Yj)()||(0,l.Cu)()||(0,l.$i)())return;const me=(0,_.getStateForClientStore)();if((0,a.c)()&&!(0,o.A)(me,"disable_tinyspeck_slackdebug_enforcement","treatment")){(0,i.Jb)();return}(0,i.CP)()||(0,i.YF)()});v.meta={name:"createThunk",key:"createThunkmaybeDisableDebugger",description:"maybeDisableDebugger side effect handler"};const h=(0,u.kt)([r.setDidBootAllWorkspaces],v);var f=e(3571452446),I=e(3245843483),p;(function(me){me.DOGFOOD="dogfood",me.BETA="beta",me.PROD="prod"})(p||(p={}));var y;(function(me){me.BETA="beta",me.PROD="prod"})(y||(y={}));const g=c(me=>me!==p.PROD,"isPreRelease");var E;(function(me){me.NIGHTLY="nightly",me.ALPHA="alpha",me.ETA="eta",me.PILOT="pilot",me.BETA="beta",me.PROD="prod"})(E||(E={}));var M;(function(me){me.BETA="beta",me.PROD="prod"})(M||(M={}));const T=[E.ALPHA,E.ETA,E.BETA,E.PILOT,E.PROD],D=c(me=>me!==E.PROD,"release_channels_4_31_0_isPreRelease");var C=e(1583163054),m=e(571104883),O=e(4096483543),P=e(9012396182),R=e(3677514771);const L=(0,d.Ay)("maybeSetReleaseChannelOverrideHandler",(me,ie,Pe)=>{!(0,m.y3)()||!(0,I.g9M)()||K(ie)});L.meta={name:"createThunk",key:"createThunkmaybeSetReleaseChannelOverrideHandler",description:"maybeSetReleaseChannelOverrideHandler"};const V=(0,u.kt)([r.setDidBootAllWorkspaces],L),B="nightly-promotion-state";function K(me){const ie=(0,I.oQe)("environment","releaseChannel"),Pe=(0,I.oQe)("settings","releaseChannelOverride");let We=Pe;if(!We&&(ie==="beta"||ie==="alpha")&&(We=ie),We==="eta"&&(We=p.BETA),(0,O.A)()&&(0,m.dY)("4.31.150")){const nt=me();if((0,o.A)(nt,"ssb_dogfood_automatic_promotion","on")&&(0,a.c)()&&We!==C.zS)try{window.localStorage.getItem(B)!=="2"&&(We=C.zS,window.localStorage.setItem(B,"1"))}catch{}We==="alpha"&&(We=p.BETA)}We!==Pe&&((0,I.cGU)({name:"releaseChannelOverride",value:We}),I.NjF.cache&&I.NjF.cache.clear())}c(K,"maybeSetReleaseChannelOverride");const b=["domain","enterprise_id","enterprise_name","id","icon","name","url","variant"],S=(0,d.Ay)("Sync workspaces state with desktop",(me,ie)=>{if(!(0,m.y3)())return;const Pe=ie(),We=(0,P.getBootedWorkspaces)(Pe),nt=(0,P.getAllWorkspaces)(Pe);var Qe;const Dt=(Qe=(0,P.getWorkspacesMeta)(Pe))!==null&&Qe!==void 0?Qe:{},lt=We==null?void 0:We.reduce((on,Wn)=>{const qn=(0,_.getStateByTeamId)(Wn),zt={...(0,R._J)(qn,Wn,!1),...Dt==null?void 0:Dt[Wn]};return on[Wn]={...(0,f.A)(zt,b),order:nt.indexOf(Wn)},on},{});(0,I.CIW)(lt)});S.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktop",description:"Sync workspaces state with desktop"};const G=(0,d.Ay)("Sync workspaces state with desktop when a new team has booted",(me,ie)=>{if(!(0,m.y3)())return;const Pe=ie();(0,P.didBootAllWorkspaces)(Pe)&&me(S())});G.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktopOnAdditionalTeamBoot",description:"Sync workspaces state with desktop when a new team has booted"};const H=(0,u.kt)([r.setDidBootAllWorkspaces,r.setWorkspaceOrder],S),U=(0,u.kt)([r.setWorkspaceBooted],G);var F=e(4932704503),Y=e(1378315125);const Z="DESKTOP-SIDE-EFFECT",ee=(0,d.Ay)("logUpdateFromDesktop",(me,ie,Pe)=>{(0,s.Wo)().info(Z,"Update from desktop for keys ",Object.keys(Pe.payload))});ee.meta={name:"createThunk",key:"createThunklogUpdateFromDesktop",description:"logUpdateFromDesktop"};const j=(0,u.kt)([Y.Ez],ee),ge=(0,d.Ay)("maybeHandleWindowFocusEvent",(me,ie,Pe)=>{(0,O.A)()&&Pe.payload&&Pe.payload.windows&&me((0,F.pz)({isFocused:document.hasFocus()}))});ge.meta={name:"createThunk",key:"createThunkmaybeHandleWindowFocusEvent",description:"maybeHandleWindowFocusEvent"};const ne=(0,u.kt)([Y.Ez],ge);var ue=e(3398586081),he=e(8646192222),be=e(8439865561),xe=e(5105455463);(0,ue.A)(()=>{if((0,he.Nu)())try{window.matchMedia(xe.og).onchange=me=>{const ie=(0,_.getClientStoreInstance)();ie&&ie.dispatch((0,be.N)(me.matches))}}catch(me){(0,s.Wo)().warn("ACCESSIBILITY-STORE","window.matchMedia hook failed; system high contrast theme will not be updated.",me)}})();const fe=(0,d.Ay)("maybeUpdateShouldUseHighContrastColors",(me,ie,Pe)=>{if(!(0,he.Nu)()&&(0,he.hk)()){var We,nt;const Qe=Pe==null||(We=Pe.payload)===null||We===void 0||(nt=We.settings)===null||nt===void 0?void 0:nt.shouldUseHighContrastColors;Qe!==void 0&&me((0,be.N)(Qe))}});fe.meta={name:"createThunk",key:"createThunkmaybeUpdateShouldUseHighContrastColors",description:"maybeUpdateShouldUseHighContrastColors"};const se=(0,u.kt)([Y.Ez],fe);var Q=e(1703559452),k=e(1658558415),N=e(6917917245),$=e(8170643398),W=e(6839188756),q=e(5597384299),re=e(659648890),le=e(7002741921),Ae=e(8276911661),Te=e(9733150292);const Ne="workspace_switcher_awareness_v2",pe=(0,ue.A)(()=>(0,k.A)()?"treatment":(0,N.B9)(Ne)),Ee=(0,ue.A)(()=>(0,N.fW)(Ne)),oe=(0,ue.A)(()=>pe()===N.dw.Control),ce=(0,ue.A)(()=>{const me=Object.values((0,_.getStoreInstanceMap)());let ie=0;return(0,Q.A)(me,Pe=>{if(!Pe)return!1;const We=Pe.getState();return(0,W.qR)((0,R.H7)(We))&&(ie+=1),ie>1})}),ke=(0,ue.A)(()=>(0,P.getNumberOfWorkspaces)((0,_.getStateForClientStore)())>1),Ce=(0,ue.A)(()=>{const me=Object.values((0,_.getStoreInstanceMap)());let ie=0,Pe=0;return(0,Q.A)(me,We=>{if(!We)return!1;const nt=We.getState(),Qe=(0,Ae.cA)(nt),Dt=(0,$.yF)(Qe),lt=Dt&&(0,q.KR)((0,re.Ay)().toDate(),re.Ay.unix(Dt).toDate());return lt&&lt>30&&(Pe+=1),(0,W.qR)((0,R.H7)(nt))&&(ie+=1),ie>1&&Pe>0})}),Me=(0,ue.A)(()=>{const me=Object.values((0,_.getStoreInstanceMap)());return(0,Q.A)(me,ie=>{if(!ie)return!1;const Pe=ie.getState(),We=(0,Ae.cA)(Pe),nt=(0,$.yF)(We),Qe=nt&&(0,q.KR)((0,re.Ay)().toDate(),re.Ay.unix(nt).toDate());return!!(Qe&&Qe>30)})}),Se=(0,ue.A)(()=>{const me=Object.values((0,_.getStoreInstanceMap)());let ie=0;return(0,Q.A)(me,Pe=>{if(!Pe)return!1;const We=Pe.getState();return(0,W.qR)((0,R.H7)(We))&&(ie+=1),(0,W.tc)((0,R.H7)(We))&&(ie+=1),ie>1})}),Ue=c(()=>{(0,Te.q9)("hasSeenWorkspaceSwitcherAwareness",!0)},"markWorkspaceSwitcherAwarenessAsSeen"),He=c(()=>(0,Te.W6)("hasSeenWorkspaceSwitcherAwareness"),"hasSeenWorkspaceSwitcherAwareness"),Ye=c(me=>{let{toggleName:ie,toggleGroup:Pe}=me;return(0,le.A)(ie,Pe,!1)&&ke()&&!ce()&&Me()&&Se()},"isEligibleForWorkspaceSwitcherAwarenessV2"),J=c(()=>Ee()||Ce(),"isEligibleForWorkspaceSwitcherAwareness"),ae=c(()=>{He()&&(0,Te.q9)("hasSeenWorkspaceSwitcherAwareness",!1)},"workspaceSwitcherAwarenessCleanupCallback");var Ve=e(4766735965),Be=e(6290537170);const Ke=(0,d.Ay)("Opens workspace switcher if the user is part of experiment",(me,ie)=>{const Pe=ie();(0,m.y3)()&&!He()&&!(0,Be.v8)(Pe)&&J()&&(me((0,Ve.A)()),Ue())});Ke.meta={name:"createThunk",key:"createThunkmaybeToggleWorkspaceSwitcherForAwarenessThunk",description:"Opens workspace switcher if the user is part of experiment"};const Re=(0,u.kt)([r.setDidBootAllWorkspaces],Ke);var Fe=e(6766954308),Ie=e(2633701976),ze=e(2047021170);const qe=(0,d.Ay)("Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref",(me,ie)=>{var Pe;const We=ie(),nt=(0,P.getFocusedWorkspace)(We),Qe=(0,_.getStoreInstanceByTeamId)(nt),Dt=Qe==null||(Pe=Qe.getState)===null||Pe===void 0?void 0:Pe.call(Qe);if(!Dt||(0,Fe.gR)(We)!==void 0)return;const on=(0,ze.ty)(Dt,"a11y_read_out_incoming_dm");if(on!==void 0){me((0,Ie.p)(on));return}me((0,Ie.p)(!0))});qe.meta={name:"createThunk",key:"createThunkmaybeMigrateDmAnnouncementPref",description:"Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref"};const st=(0,u.kt)([r.setDidBootAllWorkspaces],qe);var ut=e(2517531287);const tt=(0,d.Ay)("Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs",(me,ie)=>{var Pe;const We=ie(),nt=(0,P.getFocusedWorkspace)(We),Qe=(0,_.getStoreInstanceByTeamId)(nt),Dt=Qe==null||(Pe=Qe.getState)===null||Pe===void 0?void 0:Pe.call(Qe);if(!Dt)return;if((0,Fe.u$)(We)===""){const Wn=(0,ze.ty)(Dt,"a11y_play_sound_for_incoming_dm_choice"),qn=Wn??"";me((0,ut.R)(qn))}if((0,Fe.kd)(We)===""){const Wn=(0,ze.ty)(Dt,"a11y_play_sound_for_sent_dm_choice"),qn=Wn??"";me((0,ut.r)(qn))}});tt.meta={name:"createThunk",key:"createThunkmaybeMigrateDmSoundPrefs",description:"Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs"};const _t=(0,u.kt)([r.setDidBootAllWorkspaces],tt);var yt=e(6422693406),Kt=e(3297051565),Qt=e.n(Kt),Jt=e(9113979368),Gt=e(5257368278),wt=e(5109269968),Bt=e(8161242485);const Wt=(0,Bt.Ay)(me=>me&&me.persistedApiCalls);Wt.meta={name:"createSelector",key:"createSelectorgetPersistedApiCalls",description:me=>me&&me.persistedApiCalls};var Tn=e(4294892493),Ot=e(1874577777);const Ft="OFFLINE",rn=(0,Gt.A)("Replay persisted API calls",function(me,ie){let Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wt(ie());const We=ie();if(!(0,Ot.A)(We)||(0,Jt.A)(Pe))return;const nt=(0,s.Ay)({state:We});nt.info(Ft,"replayPersistedApiCalls called after workspace booted");const Qe=Object.keys(Pe).sort().map(Dt=>Pe[Dt]);yt.K.each(Qe,Dt=>me((0,wt.apiCall)(Dt)).catch(lt=>{nt.error(Ft,`Error replaying ${Dt.method} (${Dt.persistKey})`,lt)}).finally(()=>{nt.info(Ft,`Clearing persisted payload for ${Dt.method} (${Dt.persistKey})`),me((0,Tn.M)(Dt.persistKey))}))});rn.meta={name:"createFetcher",key:"createFetcherreplayPersistedApiCalls",description:"Replay persisted API calls"},rn.propTypes=Qt().object;const ln=(0,d.Ay)("triggerReplayPersistedApiCalls",(me,ie,Pe)=>{const We=Pe.payload;(0,_.dispatchForTeamId)(We,rn())});ln.meta={name:"createThunk",key:"createThunktriggerReplayPersistedApiCalls",description:"triggerReplayPersistedApiCalls"};const _n=(0,u.kt)([r.setWorkspaceBooted],ln);var en=e(859310680),Xt=e(3855029223),vn=e(2872463257);const je=(0,d.Ay)("recordExperimentGroupsAsTrace side effect handler",(me,ie,Pe)=>{const We=(0,_.getStateForClientStore)(),nt=(0,P.getBootedWorkspaces)(We)||[];try{const Qe=vn.nl.ALWAYS;nt.forEach(Dt=>{const lt=(0,_.getStateByTeamId)(Dt),on=(0,en.xy)(lt),Wn=JSON.stringify(on),qn=(0,Xt.E)({state:lt}),Ss=qn.createSpan({name:"experiment_groups",options:{tags:{experiment_groups:Wn}},samplingOptions:{sampleType:Qe}});Ss.close(),qn.reportSpans([Ss])})}catch(Qe){(0,s.Wo)().warn("BOOT-TEAM","could not report experiment groups in trace",Qe)}});je.meta={name:"createThunk",key:"createThunkrecordExperimentGroupsAsTrace",description:"recordExperimentGroupsAsTrace side effect handler"};const Rt=(0,u.kt)([r.setDidBootAllWorkspaces],je);var hn=e(5613323535);const Nn=(0,d.Ay)("setAutoTracerTagProvider side effect handler",(me,ie,Pe)=>{hn.LI.isEnabled()&&hn.LI.setTagProvider(We=>We?(0,en.go)(We):{})});Nn.meta={name:"createThunk",key:"createThunksetAutoTracerTagProvider",description:"setAutoTracerTagProvider side effect handler"};const rt=(0,u.kt)([r.setDidBootAllWorkspaces],Nn);var vt=e(2763437247),Mt=e(1224315998),Ct=e(56548687),Yt=e(268083624),In=e(5795074931);const Un=(0,d.Ay)("Clog experiment related meta data for session toggles",(me,ie,Pe)=>{let{experimentNames:We}=Pe;const nt=(0,Yt.v8)(Yt.i$),Qe=(0,I.sST)(),Dt=(0,_.getClientStoreInstance)(),lt=(0,P.getFocusedWorkspace)(Dt.getState()),on=(0,P.getBootedWorkspaces)(Dt.getState()),Wn=on.join(","),qn=on.map(Ss=>{var zt;const On=(zt=(0,_.getStoreInstanceByTeamId)(Ss))===null||zt===void 0?void 0:zt.getState();return(0,In.WR)(On)}).join(",");We.forEach(Ss=>{const zt=(0,N.B9)(Ss);if(zt===vt.dw.Control||zt===vt.dw.Treatment||zt===vt.dw.On){var On;(0,Ct.e)({getState:(On=(0,_.getStoreInstanceByTeamId)(lt))===null||On===void 0?void 0:On.getState}).track(Mt.EventId.CLIENT_SESSION_TOGGLE_CLOG,{contexts:{experimentName:Ss,experimentGroup:zt,teamIds:Wn,userIds:qn,visitorCookie:nt,clientId:Qe}})}})});Un.meta={name:"createThunk",key:"createThunkclogDataForSessionToggles",description:"Clog experiment related meta data for session toggles"};var En=e(229828696),Bn=e(306687250),Mn=e(8073631078),Vn=e(5320724941),rs=e(9681594967),as=e(2325478352),jn=e(9272190578),es=e(6209625934),Qn=e(4761125736);function ss(me,ie){const Pe=Object.values((0,_.getStoreInstanceMap)());for(const We of Pe){if(!We)continue;const nt=We.getState(),Qe=(0,Qn.KK)(nt,me);Qe&&Qe.log_exposures&&ie===Qe.group&&(0,es.K)(me,Qe,nt)}}c(ss,"logExposuresForSession");function ft(me,ie){if((0,vt.SC)(me),ie)try{ie()}catch(Pe){(0,s.Wo)().error(`caught error from cleanupCallback: ${Pe}`)}}c(ft,"rollbackToggle");function pt(me){let{toggleName:ie,toggleGroup:Pe}=me;return(0,le.A)(ie,Pe,!1)}c(pt,"defaultToggleGroupMatcher");function Ht(me,ie){var Pe;const We=(Pe=ie==null?void 0:ie.customToggleGroupMatcher)!==null&&Pe!==void 0?Pe:pt,nt=(0,vt.M_)(me),Qe=nn(me,nt,We);if(nt===null&&Qe!==vt.dw.NoGroup){(0,vt.jc)(me,Qe);return}Qe===vt.dw.NoGroup?nt===vt.dw.Treatment||nt===vt.dw.On?(ft(me,ie==null?void 0:ie.cleanupCallback),(0,jn.As)({reason:`Rolling back ${me} toggle`,reasonKey:`rollback_${me}_toggle`})):(nt===vt.dw.Control||nt===vt.dw.Off)&&ft(me,ie==null?void 0:ie.cleanupCallback):Qe!==nt?(0,vt.jc)(me,Qe):Qe===nt&&ss(me,nt)}c(Ht,"setToggleGroupForNextSession");function nn(me,ie,Pe){const We=Pe({toggleName:me,toggleGroup:vt.dw.Treatment}),nt=Pe({toggleName:me,toggleGroup:vt.dw.Control}),Qe=Pe({toggleName:me,toggleGroup:vt.dw.On}),Dt=Pe({toggleName:me,toggleGroup:vt.dw.Off});return We&&nt?ie===vt.dw.Treatment?vt.dw.Treatment:ie===vt.dw.Control?vt.dw.Control:Math.random()<.5?vt.dw.Treatment:vt.dw.Control:Qe&&Dt?ie===vt.dw.On?vt.dw.On:ie===vt.dw.Off?vt.dw.Off:Math.random()<.5?vt.dw.On:vt.dw.Off:We?vt.dw.Treatment:nt?vt.dw.Control:Qe?vt.dw.On:Dt?vt.dw.Off:vt.dw.NoGroup}c(nn,"getCurrentToggleGroup");const kn={getCurrentToggleGroup:nn};(0,i.ul)("setToggleGroupForNextSession",me=>Ht(me));var xt=e(7530010356),Dn=e(2371143272);const Fn=c(()=>{try{rs.qV.deleteDatabase()}catch(me){rs.qV.getLogger().error(`caught error from deleteDatabase: ${me}`)}},"objectStoreCallback"),wn={[as.Wv]:{cleanupCallback:Fn},[Vn.f]:{},[Bn.z]:{},[Dn.i]:{},[En.H]:{},[Ne]:{cleanupCallback:ae,customToggleGroupMatcher:Ye},[xt.Dm]:{},...Mn.nD},It=(0,d.Ay)("setToggleGroupsForNextSession",(me,ie,Pe)=>{me(Un({experimentNames:Object.keys(wn)})),Object.entries(wn).forEach(We=>{let[nt,Qe]=We;Ht(nt,Qe)})});It.meta={name:"createThunk",key:"createThunksetToggleGroupsForNextSession",description:"setToggleGroupsForNextSession"};const Je=(0,u.kt)([r.setDidBootAllWorkspaces],It);var X=e(4250409994),_e=e(2766373332);const ye=(0,d.Ay)("maybeToggleGlobalMuteShortcutHandler",(me,ie,Pe)=>(0,_e.N$)(Pe.payload));ye.meta={name:"createThunk",key:"createThunkmaybeToggleGlobalMuteShortcutHandler",description:"maybeToggleGlobalMuteShortcutHandler"};const De=(0,u.kt)([X.Bk],ye);var Ge=e(8365110903),et=e(25586007);const bt=(0,d.Ay)("Transition the up_to_browse_kb_shortcut user pref to the new client pref",(me,ie)=>{var Pe;const We=ie(),nt=(0,P.getFocusedWorkspace)(We),Qe=(0,_.getStoreInstanceByTeamId)(nt),Dt=Qe==null||(Pe=Qe.getState)===null||Pe===void 0?void 0:Pe.call(Qe);if(!Dt||(0,Fe.jX)(We)!==void 0)return;const on=(0,ze.ty)(Dt,"up_to_browse_kb_shortcut"),{LIST:Wn,EDIT:qn}=et.v,Ss=on?Wn:qn;me((0,Ge.T)(Ss))});bt.meta={name:"createThunk",key:"createThunkmaybeTransitionUpToBrowsePreference",description:"Transition the up_to_browse_kb_shortcut user pref to the new client pref"};const sn=(0,u.kt)([r.setWorkspaceBooted],bt),fn=(0,d.Ay)("updateLocalConfigOrderedTeamIds side effect handler",(me,ie,Pe)=>{const We=(0,s.Wo)({label:Te.o7}),nt=(0,_.getStateForClientStore)(),Qe=(0,P.getAllWorkspaces)(nt);(!Qe||Qe.length===0)&&We.warn("Skipping update to orderedTeamIds, allWorkspaces is empty"),We.info(`Updating orderedTeamIds to ${Qe.join(",")}`),(0,Te.q9)("orderedTeamIds",Qe)});fn.meta={name:"createThunk",key:"createThunkupdateLocalConfigOrderedTeamIds",description:"updateLocalConfigOrderedTeamIds side effect handler"};const Sn=(0,u.kt)([r.addWorkspace],fn);var dt=e(2250002584);const z=(0,d.Ay)("recordWssRailVisibility side effect handler",(me,ie)=>{const Pe=(0,dt.F)(),We=ie(),nt=(0,Be.v8)(We)?1:0,Qe=Pe.createMetricsTrace({samplingOptions:{sampleType:vn.nl.SESSION}});Qe.store({name:"wss_rail:visible",value:nt}),Pe.reportTrace(Qe)});z.meta={name:"createThunk",key:"createThunkrecordWssRailVisibility",description:"recordWssRailVisibility side effect handler"};const te=(0,u.kt)([r.setDidBootAllWorkspaces],z);var ve=e(3875705815),Oe=e(4134037340),$e=e(2140362605);const at=(0,$e.Ay)("Set what zoom value was set in the client when in BBM");at.meta={name:"createAction",key:"createActionsetZoomInternal",description:"Set what zoom value was set in the client when in BBM"};const Xe="slack-zoom-bbm-setting",Nt=(0,d.Ay)("Set zoom value for client when in BBM",(me,ie,Pe)=>{const{error:We}=(0,s.Wo)();(0,Oe.A)(ie())||We(new Error("you must call setZoom for a client store"));try{(0,Te.q9)(Xe,Pe)}catch(nt){We(new Error(`failed to store zoom in local storage: ${nt}`))}me(at(Pe))});Nt.meta={name:"createThunk",key:"createThunksetZoom",description:"Set zoom value for client when in BBM"};var $t=e(6696292586);function Ln(){let me;return ie=>ie===me?!1:(me=ie,!0)}c(Ln,"getDidUpdate");const xn=Ln(),Jn=(0,d.Ay)("updateFromDesktop side effect handler",(me,ie,Pe)=>{var We;const nt=ie(),Qe=P.getFocusedWorkspace===null||P.getFocusedWorkspace===void 0?void 0:(0,P.getFocusedWorkspace)(nt);if(!Qe)return;const Dt=(0,_.getStateByTeamId)(Qe);if(!(0,ve.V)(Dt))return;const lt=(We=Pe.payload.settings)===null||We===void 0?void 0:We.zoomLevel;(0,$t.A)(lt)&&xn(lt)&&(0,_.dispatchForClientStore)(Nt(lt))});Jn.meta={name:"createThunk",key:"createThunkonUpdateFromDesktop",description:"updateFromDesktop side effect handler"};const $n=(0,u.kt)([Y.Ez],Jn);var w=e(2413251042),de=e(6303140164);const we=(0,d.Ay)("Set zoom value for client before starting BBM",(me,ie,Pe)=>{const{error:We}=(0,s.Wo)();(0,Oe.A)(ie())||We(new Error("you must call setZoom for a client store"));try{(0,Te.q9)(de.UY,Pe)}catch(nt){We(new Error(`failed to store zoom in local storage: ${nt}`))}me((0,w.x8)(Pe))});we.meta={name:"createThunk",key:"createThunksetZoom",description:"Set zoom value for client before starting BBM"};function Et(){let me;return ie=>ie===me?!1:(me=ie,!0)}c(Et,"side_effects_getDidUpdate");const gn=Et(),Zt=(0,d.Ay)("updateFromDesktop side effect handler",(me,ie,Pe)=>{var We;const nt=ie(),Qe=P.getFocusedWorkspace===null||P.getFocusedWorkspace===void 0?void 0:(0,P.getFocusedWorkspace)(nt);if(!Qe)return;const Dt=(0,_.getStateByTeamId)(Qe);if((0,ve.V)(Dt))return;const lt=(We=Pe.payload.settings)===null||We===void 0?void 0:We.zoomLevel;(0,$t.A)(lt)&&gn(lt)&&(0,_.dispatchForClientStore)(we(lt))});Zt.meta={name:"createThunk",key:"createThunkonUpdateFromDesktop",description:"updateFromDesktop side effect handler"};const cn=(0,u.kt)([Y.Ez],Zt),qt=[h,j,ne,_n,rt,se,Je,H,U,Rt,De,V,sn,_t,st,te,Sn,cn,Re,$n];var Xn=e(4900557724);const _s=50,Ts="recents";var As=e(8628205589),Os=e(2384831516);let is;function Is(me){is&&(0,Xn.GP)(is),is=(0,Xn.BB)(()=>{is=void 0,(0,Te.q9)(Ts,me)})}c(Is,"persistRecents");function dn(){var me;return(me=(0,Te.W6)(Ts))!==null&&me!==void 0?me:[]}c(dn,"loadRecents");const Yn=dn(),Rs=(0,Os.vy)({},Yn,{persistenceEnabled:!1,storeKey:"recents"}).on(As.y2,(me,ie)=>{let{entry:Pe}=ie;const We=[Pe,...me].slice(0,_s);return Is(We),We}).on(As.HQ,(me,ie)=>{let{entry:Pe}=ie;const We=[Pe,...me.slice(1)].slice(0,_s);return Is(We),We}).on(As.TP,me=>{const ie=me.slice(0,1);return Is(ie),ie});var ls=e(3193155968),Ms=e(9936094925);const Ds={[ls.N2]:{index:0,previousIndex:null,stack:[]}},Ze={persistenceEnabled:!1,storeKey:"mainWindowHistory"},Lt=(0,Os.vy)({},Ds,Ze).on(As.y2,(me,ie)=>{let{windowId:Pe,entry:We}=ie;return{...me,[Pe]:(0,Ms.wg)({windowState:me[Pe],entry:We})}}).on(As.jW,()=>Ds).on(As.cM,(me,ie)=>{let{windowId:Pe,index:We,previousIndex:nt}=ie;return{...me,[Pe]:(0,Ms.ds)({windowState:me[Pe],index:We,previousIndex:nt})}}).on(As.$E,(me,ie)=>{let{windowId:Pe,index:We}=ie;return{...me,[Pe]:(0,Ms.cB)({windowState:me[Pe],index:We})}}).on(As.HQ,(me,ie)=>{let{windowId:Pe,entry:We}=ie;return{...me,[Pe]:(0,Ms.w9)({windowState:me[Pe],entry:We})}});(0,i.ul)("mainWindowHistory",{getState:()=>(0,_.getStateForClientStore)().mainWindowHistory[ls.N2]});var it=e(7715417323);function At(){let{state:me,prevState:ie,workspaces:Pe=[],broadcastSelector:We=it.A,broadcastAction:nt=it.A}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Qe=We(me),Dt=We(ie);Qe!==Dt&&Pe.forEach(lt=>{(0,_.dispatchForTeamId)(lt,nt(Qe))})}c(At,"maybeBroadcastStateToWorkspaces");const gt=At;var Pt=e(1527536225);const Vt=(0,Pt.Ay)("Broadcast accessibility state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe);return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.VH)(lt),broadcastAction:lt=>(0,be.Jq)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.nQ)(lt),broadcastAction:lt=>(0,be.N)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.dF)(lt),broadcastAction:lt=>(0,be.KQ)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.jX)(lt),broadcastAction:lt=>(0,be.Tv)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.gb)(lt),broadcastAction:lt=>(0,be.C_)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.zm)(lt),broadcastAction:lt=>(0,be.XE)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.K9)(lt),broadcastAction:lt=>(0,be.Mq)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.u$)(lt),broadcastAction:lt=>(0,be.Sr)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.kd)(lt),broadcastAction:lt=>(0,be.mw)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.gR)(lt),broadcastAction:lt=>(0,be.Ap)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Fe.u)(lt),broadcastAction:lt=>(0,be.V_)(lt)}),nt});Vt.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityMiddleware",description:"Broadcast accessibility state to other stores"};const an=Vt;var Pn=e(1004520977),mn=e(9234290540);const Tt=(0,Pt.Ay)("Broadcast accessibility persistent state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe);return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,mn.i)(lt),broadcastAction:lt=>(0,Pn.w)(lt)}),nt});Tt.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityPersistentMiddleware",description:"Broadcast accessibility persistent state to other stores"};const tn=Tt;var An=e(3749529250);const yn=(0,Pt.Ay)("Broadcast big button mode state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe).filter(lt=>(0,he.mL)((0,_.getStateByTeamId)(lt)));return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,ve.V)(lt),broadcastAction:lt=>lt?(0,An.z)():(0,An.K)()}),nt});yn.meta={name:"createMiddleware",key:"createMiddlewarebroadcastBBMMiddleware",description:"Broadcast big button mode state to other stores"};var jt=e(2456103428),ts=e(6728717861);const Hn=(0,Pt.Ay)("Broadcast connectivity state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe);return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,ts.Pb)(lt),broadcastAction:lt=>(0,jt.p9)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,ts.XQ)(lt),broadcastAction:lt=>(0,jt.pm)(lt)}),nt});Hn.meta={name:"createMiddleware",key:"createMiddlewarebroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};const Rn=Hn;var Cs=e(848813706),us=e(5223893135),ms=e(5095654950);const vs=(0,Pt.Ay)("Broadcast fullscreen state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe).filter(lt=>(0,he.iB)((0,_.getStateByTeamId)(lt)));return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,us.V)(lt),broadcastAction:lt=>lt?(0,ms.J)():(0,Cs.sM)()}),nt});vs.meta={name:"createMiddleware",key:"createMiddlewarebroadcastFullscreenMiddleware",description:"Broadcast fullscreen state to other stores"};var Zn=e(4309043566);const Es=(0,Os.Ny)("Broadcasts overlays state from client store to workspace stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe);return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>lt.overlays,broadcastAction:Zn.l}),nt});Es.meta={name:"createMiddleware",key:"createMiddlewarebroadcastOverlaysMiddleware",description:"Broadcasts overlays state from client store to workspace stores"};var ks=e(9083290776);const hs=(0,Pt.Ay)("Broadcast workspaces state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe),lt=We&&(0,P.getBootedWorkspaces)(We),on=(0,P.getAllWorkspaces)(Qe),Wn=(0,P.getAllWorkspaces)(We),qn=!Wn||on.some((On,bn)=>On!==Wn[bn]),Ss=(0,P.getRecentlyFocusedWorkspaces)(Qe),zt=We&&(0,P.getRecentlyFocusedWorkspaces)(We);return(lt!==Dt||qn||zt!==Ss)&&fs(Dt,Ss),nt});hs.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};function fs(me,ie){const Pe=ie[0];Pe&&(me==null||me.forEach(We=>{(0,_.dispatchForTeamId)(We,(0,ks.K$)(ie)),(0,_.dispatchForTeamId)(We,(0,ks.fw)(ie))}),(0,I.ny2)(Pe))}c(fs,"broadcastFocusedWorkspaces");const Bs=hs;var js=e(252549317),Us=e(9042410435),Ws=e(8736071954),Fs=e(8719752487),Ks=e(5470425448),Js=e(5071086688),ot=e(6117529990);function mt(me){switch((0,Qn._Z)(me,"calls_transport_type")){case"udp":return["udp"];case"tls":return["tls"];case"tcp_tls":return["tcp","tls"];case"udp_tls":return["udp","tls"];case"disabled":default:return["udp","tcp","tls"]}}c(mt,"getAllowedTurnTransportTypes");var ct=e(5332875232);function kt(){return!(!("MediaStreamTrackProcessor"in globalThis)||!("MediaStreamTrackGenerator"in globalThis)||!("OffscreenCanvas"in globalThis)||!("ImageBitmap"in globalThis)||!("createImageBitmap"in globalThis))}c(kt,"isHuddlesBackgroundWorkerSupported");const un=(0,s.Wo)({label:"HUDDLE-INIT-OPTIONS"}),Cn=c((me,ie)=>{let{server:Pe,isPrejoin:We}=ie;if(!me){un.error("teamState is not defined. Returning empty init options");return}const nt={};return nt.serverConfig={...Pe,transportProtocols:mt(me)},nt.isPrejoin=We,nt.useChimeSdkExp=(0,ot.OV)(me),nt.useDevicesExp=(0,ct.ZI)(me),nt.useVideoUplinkPolicy=(0,ct.Jf)(me),nt.useH264BaselineScreenshare=(0,ot.OV)(me)&&(0,ct.RM)(me),nt.useH264Baseline=(0,ot.OV)(me)&&(0,ct.er)(me),nt.useAv1Screenshare=(0,ct.Cu)(me),nt.huddlesJukeboxEnabled=(0,ct.Eg)(me),nt.disableAudioRedundancy=(0,ct.JQ)(me),nt.useSimulcast=!1,nt.usePriorityDownlinkPolicy=!(0,m.gm)(),nt.disableVp9=(0,ct.lH)(me),nt.useHuddlesFilterWorker=kt()&&(0,ct.lz)(me),un.info("returning init options: ",nt),nt},"getSdkInitOptions");var pn=e(6246464105),Kn=e(8872167513),os=e(2709531527),cs=e(164795489),Gs=e(3300324857),Xs=e(4708000837),mo=e(1371073900),Io=e(2457673737),co=e(6664301844),sr=e(6310192986),so=e(7366481123),or=e(5253428843),Gn=e(3065433701),Bo=e(5378147939);const ra=(0,d.Ay)("Resolve a pending huddle",(me,ie,Pe)=>(0,Bo.A)().resolvePendingJoin(Pe));ra.meta={name:"createThunk",key:"createThunkresolvePendingHuddle",description:"Resolve a pending huddle"};const ar=ra;var uo=e(2778217221),rr=e(6694086724),gs=e(5286203919),ir=e(9548972574),lr=e(3474336343),cr=e(3263322402),ia=e(3977512448);const xo=(0,d.Ay)("update client huddle membership timers join",(me,ie)=>{const Pe=ie(),We=(0,s.Ay)({state:Pe}),nt=(0,_.getStateForClientStore)(),Qe=(0,gs.Ak)(nt),Dt=(0,lr.Wg)(Pe,{tip:ia.ml.Huddles});if(!Qe){We.warn(uo.o7,"no active huddle found, cannot update state to together or alone");return}const lt=(0,ir.Sx)(Pe);if(lt===0){(0,Bo.A)().setAloneInHuddle();return}lt>0&&(Dt&&me((0,cr._A)(!0)),(0,Bo.A)().setOthersInHuddle(),me((0,rr.e)({clearOnEndedCallback:!0,logContext:"on-peer-joined"})))});xo.meta={name:"createThunk",key:"createThunkupdateAloneOrTogetherInHuddle",description:"update client huddle membership timers join"};var Wo=e(9706240641),ns=e(3134334389),dr=e(4332857818),ur=e(862210999),_r=e(8645544190),mr=e(8921478798),la=e(1641606663),Co=e(735940183),hr=e(8847766420),zn=e(387328355),_o=e(6839101721),vr=e(5323669031),Mo=e(2825968873),fr=e(3094144240),Er=e(9477894139),Fo=e(2562405183),Ko=e(9391594207),oo=e(5255740490),pr=e(3534324375),ca=e(4954329752);let da=c(class extends ns.PureComponent{static getDerivedStateFromProps(ie,Pe){return ie.mediaStream!==Pe.currentMediaStream?ie.mediaStream&&Pe.currentMediaStream&&ie.mediaStream.id===Pe.currentMediaStream.id?{currentMediaStream:ie.mediaStream,isFlipped:ie.isFlipped,isCurrentMediaStreamReady:!1,prevMediaStream:void 0}:{prevMediaStream:ie.mediaStream?Pe.currentMediaStream:void 0,currentMediaStream:ie.mediaStream,isFlipped:ie.isFlipped,wasFlipped:Pe.isFlipped,isCurrentMediaStreamReady:!1}:null}componentDidMount(){this.setupMedia()}componentDidUpdate(){this.setupMedia()}componentWillUnmount(){const ie=this.videoRef.current,Pe=this.prevVideoRef.current;ie&&(ie.removeEventListener("canplay",this.onCanPlay),ie.removeEventListener("pause",this.onPause),ie.removeEventListener("resize",this.onResize)),Pe&&(Pe.removeEventListener("canplay",this.onCanPlay),Pe.removeEventListener("pause",this.onPause),Pe.removeEventListener("resize",this.onResize)),this.props.onVideoReady&&this.props.onVideoReady(!1)}onCanPlay(){const{currentMediaStream:ie}=this.state,Pe=ie&&ie.getVideoTracks()[0];this.isDataStopped&&Pe&&Pe.readyState==="live"&&(this.props.onVideoReady&&this.props.onVideoReady(!0),this.setState(()=>({isCurrentMediaStreamReady:!0})))}onPause(ie){this.state.currentMediaStream&&ie.target.srcObject instanceof MediaStream&&ie.target.srcObject.id===this.state.currentMediaStream.id&&(this.props.onVideoReady&&this.props.onVideoReady(!1),this.isDataStopped=!0)}setupMedia(){const{currentMediaStream:ie,prevMediaStream:Pe}=this.state,We=this.videoRef.current,nt=this.prevVideoRef.current;We&&(We.muted=!0,We.srcObject!==ie&&(We.addEventListener("canplay",this.onCanPlay),We.addEventListener("pause",this.onPause),We.addEventListener("resize",this.onResize),We.srcObject=ie||null)),nt&&(nt.muted=!0,nt.srcObject!==Pe&&(nt.removeEventListener("canplay",this.onCanPlay),nt.removeEventListener("pause",this.onPause),nt.removeEventListener("resize",this.onResize),nt.srcObject=Pe||null))}onResize(){const ie=this.videoRef.current;ie&&(this.props.isSharingScreen?ie.style.objectFit="contain":ie.style.objectFit=ie.videoWidth>ie.videoHeight?"cover":"contain")}render(){const{className:ie,isFlipped:Pe,refToForward:We}=this.props,{currentMediaStream:nt,prevMediaStream:Qe,isCurrentMediaStreamReady:Dt,wasFlipped:lt}=this.state;return ns.createElement(ns.Fragment,null,!Dt&&Qe&&ns.createElement("video",{key:Qe&&Qe.id,className:(0,oo.A)("p-calls_video",ie,{flipped:lt}),ref:this.prevVideoRef,autoPlay:!0}),ns.createElement("video",{className:(0,oo.A)("p-calls_video",ie,{flipped:Pe,hidden:!Dt}),ref:(0,ca.P)(this.videoRef,We),autoPlay:!0,key:nt&&nt.id}))}constructor(ie){super(ie),this.prevVideoRef=ns.createRef(),this.videoRef=ns.createRef(),this.isDataStopped=!0,this.state={isCurrentMediaStreamReady:!1,isFlipped:!1,wasFlipped:!1},this.onCanPlay=this.onCanPlay.bind(this),this.onPause=this.onPause.bind(this),this.onResize=this.onResize.bind(this)}},"CallsOriginalVideoElement");da.displayName="CallsOriginalVideoElement";function wo(){return wo=Object.assign||function(me){for(var ie=1;ie<arguments.length;ie++){var Pe=arguments[ie];for(var We in Pe)Object.prototype.hasOwnProperty.call(Pe,We)&&(me[We]=Pe[We])}return me},wo.apply(this,arguments)}c(wo,"_extends");const gr=c((me,ie)=>{const Pe=(0,zn.JZ)(me,ie.id);return{mediaStream:Pe.mediaStream,isFlipped:(0,zn.fy)(Pe)&&!Pe.isScreenshareEnabled,isSharingScreen:Pe.isScreenshareEnabled}},"mapStateToProps"),Ar=(0,Ko.N)(gr)(da),yr=ns.forwardRef((me,ie)=>ns.createElement(Ar,wo({},me,{refToForward:ie})));var Tr=e(4775127335),Ir=e(6308822),Ho=e(7299481592),Cr=e(5956851410),Mr=e(6909784049),Or=e(8558782493),ua=e(1975685771);function Dr(me,ie){const Pe=Math.min(ie.width,ie.height*me),We=Math.min(ie.height,ie.width/me);return{top:ie.top+(ie.height-We)/2,left:ie.left+(ie.width-Pe)/2,width:Pe,height:We}}c(Dr,"getLargestRectForAspectRatioCenteredWithinRect");let Vo=c(class extends ns.PureComponent{detectDifference(ie,Pe){return Math.abs(ie-Pe)>1}componentDidMount(){var ie;(0,Mo.tZ)("GUEST-DRAW-WINDOW").info("Guest draw window mounted"),(0,Or.k)(Mt.EventId.CALLS_GUEST_DRAW_ACTIVATED,{}),(ie=this.context.windowRef.deref())===null||ie===void 0||ie.addEventListener("resize",this.onResize),(0,ua.Z)(this.videoRef.current,"Expected videoRef to be bound after mounting")&&(this.props.addEventListeners&&this.props.addEventListeners(this.videoRef,this.onResize,!0),this.onResize(),this.resizeTimeout=window.setTimeout(()=>{this.onResize()},4e3),this.videoRef.current.dispatchEvent(new Event("resize")))}componentDidUpdate(ie){let{isVideoReady:Pe}=ie;!Pe&&this.props.isVideoReady&&this.onResize()}componentWillUnmount(){var ie;this.props.removeEventListeners&&this.props.removeEventListeners(this.videoRef,this.onResize,!0),(ie=this.context.windowRef.deref())===null||ie===void 0||ie.removeEventListener("resize",this.onResize),window.clearTimeout(this.resizeTimeout)}onResize(){if(!(0,ua.Z)(this.videoRef.current,"Expected videoRef to be bound on resize"))return;const ie=this.videoRef.current;!ie||ie.videoHeight===0||this.setState(()=>({videoRect:Dr(ie.videoWidth/ie.videoHeight,ie.getBoundingClientRect())}))}render(){const ie=ns.Children.only(this.props.children),Pe=ns.cloneElement(ie,{ref:(0,ca.N)(this.videoRef,ie)});return ns.createElement(ns.Fragment,null,Pe,this.state.videoRect&&ns.createElement(Cr.u,{ref:this.drawRenderRef,isHidden:!this.props.isScreenShareEnabled,targetRect:this.state.videoRect}),this.props.isDrawEnabled&&this.state.videoRect&&ns.createElement(Mr.o,{ref:this.drawTargetRef,targetRect:this.state.videoRect}))}constructor(ie){super(ie),this.videoRef=ns.createRef(),this.drawTargetRef=ns.createRef(),this.drawRenderRef=ns.createRef(),this.onResize=this.onResize.bind(this),this.state={}}},"GuestDraw");Vo.displayName="GuestDraw",Vo.contextType=la.Mn;const Pr=c((me,ie)=>{const Pe=(0,zn.gl)(me);if(!Pe)throw Error("Guest draw should not be mounted without an active peer");const We=(0,zn.JZ)(me,Pe);return{isDrawEnabled:!!We.isScreenshareEnabled&&!!We.isDrawEnabled,isScreenShareEnabled:!!We.isScreenshareEnabled}},"guest_draw_mapStateToProps"),_a=(0,Ko.N)(Pr)(Vo),Sr={isVideoReady:!1};let ma=c(class extends ns.PureComponent{onVideoReady(ie){this.setState(Pe=>({...Pe,isVideoReady:ie}))}renderVideo(){const{id:ie,renderVideo:Pe,tileId:We}=this.props;if(Pe)return Pe(this.isVideoEnabledAndReady());if(!ie){(0,Ho.M)("Cannot render video without a peer id");return}return ns.createElement(_a,{isVideoReady:this.state.isVideoReady},ns.createElement(yr,{id:ie,tileId:We,onVideoReady:this.onVideoReady,className:(0,oo.A)({hidden:!this.state.isVideoReady})}))}renderImage(){const{isSpinning:ie,prefCompliantUserName:Pe,member:We}=this.props;return ns.createElement("div",{className:(0,oo.A)({hidden:this.state.isVideoReady})},ns.createElement("div",{className:"p-active_speaker__member_image_wrapper"},ns.createElement(Tr.Ay,{className:(0,oo.A)({"p-active_speaker__member_image--spinning":ie}),size:180,userId:We&&We.id,isInteractive:!1,tabIndex:-1}),ie&&ns.createElement("div",{className:"p-active_speaker__member_image__spinner_wrapper"},ns.createElement(Ir.A,{color:"white"}))),ns.createElement("div",{className:"p-active_speaker__member_name"},Pe))}isVideoEnabledAndReady(){const{isVideoEnabled:ie,isVideoEnabledAndReady:Pe}=this.props;return Pe?Pe(ie):!!(ie&&this.state.isVideoReady)}render(){const{isVideoEnabled:ie}=this.props,Pe=(0,oo.A)("p-active_speaker",{"p-active_speaker--video_enabled":this.isVideoEnabledAndReady()});return ns.createElement("div",{"data-qa":"active-speaker",className:Pe},ie&&this.renderVideo(),!this.isVideoEnabledAndReady()&&this.renderImage())}constructor(ie){super(ie),this.state=Sr,this.onVideoReady=this.onVideoReady.bind(this)}},"ActiveSpeaker");ma.displayName="ActiveSpeaker";function Rr(me,ie){const Pe=(0,Ae.nv)(me,ie),We=(0,pr.sE)(me,Pe);return{member:Pe,prefCompliantUserName:We}}c(Rr,"mapCommonMemberState");const Lr=c((me,ie)=>{const Pe=(0,zn.JZ)(me,ie.id),We=Pe.isCameraEnabled,nt=Pe.isScreenshareEnabled,Qe=(0,zn.fy)(Pe)?(0,In.WR)(me):Pe.userId;return{tileId:ie.tileId,isVideoEnabled:We||nt,isSpinning:Pe.isConnected===!1,...Rr(me,Qe)}},"active_speaker_mapStateToProps"),br=(0,Ko.N)(Lr)(ma);var kr=e(1429018002);function jo(){return jo=Object.assign||function(me){for(var ie=1;ie<arguments.length;ie++){var Pe=arguments[ie];for(var We in Pe)Object.prototype.hasOwnProperty.call(Pe,We)&&(me[We]=Pe[We])}return me},jo.apply(this,arguments)}c(jo,"with_free_willy_guest_draw_extends");const ha=c(me=>c(class extends ns.PureComponent{addEventListeners(Pe,We,nt){Pe.current&&(Pe.current.addEventListener("canplay",We),nt&&Pe.current.addEventListener("resize",We))}removeEventListeners(Pe,We,nt){Pe.current&&(Pe.current.removeEventListener("canplay",We),nt&&Pe.current.removeEventListener("resize",We))}render(){return ns.createElement(me,jo({},this.props,{addEventListeners:this.addEventListeners,removeEventListeners:this.removeEventListeners}))}},"WithFreeWillyGuestDraw"),"withFreeWillyGuestDraw");ha.displayName="withFreeWillyGuestDraw";const Ur=ha;function Go(){return Go=Object.assign||function(me){for(var ie=1;ie<arguments.length;ie++){var Pe=arguments[ie];for(var We in Pe)Object.prototype.hasOwnProperty.call(Pe,We)&&(me[We]=Pe[We])}return me},Go.apply(this,arguments)}c(Go,"with_free_willy_active_speaker_extends");const Nr=Ur(_a),va=c(me=>c(class extends ns.PureComponent{isVideoEnabledAndReady(Pe){return Pe}renderVideo(Pe){const{id:We,tileId:nt}=this.props;if(!We){(0,Ho.M)("Cannot render video without a peer id");return}return ns.createElement(Nr,{isVideoReady:Pe},ns.createElement(kr.A,{id:We,tileId:nt,shouldAttachStream:!0,"data-qa":"free-willy-peer-video-element"}))}render(){return ns.createElement(me,Go({},this.props,{renderVideo:this.renderVideo,isVideoEnabledAndReady:this.isVideoEnabledAndReady}))}constructor(Pe){super(Pe),this.isVideoEnabledAndReady=this.isVideoEnabledAndReady.bind(this),this.renderVideo=this.renderVideo.bind(this)}},"WithFreeWillyActiveSpeaker"),"withFreeWillyActiveSpeaker");va.displayName="withFreeWillyActiveSpeaker";const Br=va;var xr=e(6122756707),Wr=e(6084388622),fa=e(1049642794),Fr=e(5043394918);const Kr=new Co.Ay("huddles"),Ea=c(()=>{const me=(0,xr.wA)(),ie=(0,Fo.d4)(We=>!!(0,zn.WQ)(We,"isMicrophoneEnabled")),Pe=(0,ns.useCallback)(()=>{me((0,fa.A)(!ie))},[ie,me]);return ns.createElement("div",{className:"p-huddle_screen_viewer__mic_button_container"},ns.createElement(Wr.Ay,{className:(0,oo.A)("p-huddle_screen_viewer__mic_button p-huddle_screen_viewer__mic_button--mute",{"p-huddle_screen_viewer__mic_button--active":ie}),onClick:Pe,type:"outline",role:"switch",size:"large","aria-label":Kr.t("Microphone"),"aria-checked":ie,disabled:!self},ns.createElement(Fr.A,{peerId:"self",isMicrophoneEnabled:ie,allowMuteIconAnimation:!0})))},"HuddleScreenViewerMicButton");Ea.displayName="HuddleScreenViewerMicButton";const wr=Ea,Hr=Br(br),Vr=new Co.Ay("huddles");function pa(me){const{peerId:ie,isError:Pe}=me,We=(0,Fo.d4)(zn.vz),nt=(0,Fo.d4)(Wn=>ie?(0,zn.JZ)(Wn,ie):null);let Qe;if(We){var Dt,lt;Qe=nt!=null&&nt.isScreenshareEnabled?nt==null||(Dt=nt.tileIds)===null||Dt===void 0||(lt=Dt.screenshare)===null||lt===void 0?void 0:lt.tileId:null}const on=ns.createElement("span",{className:"p-huddle_screen_viewer__error"},Vr.t("The screen share has ended."));return ns.createElement("div",{className:"p-huddle_screen_viewer__container"},ie&&!Pe&&ns.createElement(Hr,{id:ie,tileId:Qe}),Pe?on:ns.createElement(wr,null))}c(pa,"HuddleScreenViewer"),pa.displayName="HuddleScreenViewer";var jr=e(4385664584),Gr=e(9211483338);const Ps={childWindow:void 0,childWindowToken:void 0,container:void 0,containerTileId:void 0},Ul=null,ga=new Co.Ay("huddles"),zr=c(me=>{var ie;const Pe=me==null||(ie=me.document)===null||ie===void 0?void 0:ie.querySelectorAll(".p-huddle_screen_viewer__container"),We=Pe?Pe.length:0,nt=(0,Mo.tZ)("SCREENSHARE-VIEWER-APP");We>1?nt.info("Multiple containers rendered in viewing window. Shared stream may be hidden from view."):nt.info(`${We} containers rendered in viewing window.`)},"logRenderedApplicationsCount"),Oo=c(()=>{const{container:me,childWindow:ie}=Ps;me&&(dr.unmountComponentAtNode(me),Ps.containerTileId=void 0,Ps.container=void 0),ie&&(ie.removeEventListener("beforeunload",Oo),ie.close(),Ps.childWindow=void 0,Ps.childWindowToken=void 0)},"closeScreenShareWindow"),$r=(0,d.Ay)("Launch the window that renders screen share media",function(){var me=(0,Wo.coroutine)(function*(ie,Pe,We){var nt,Qe,Dt;const lt=Pe(),on=(0,s.Ay)({state:lt}),Wn=We!=null&&We.screenSharePeerId?We.screenSharePeerId:(0,zn.vN)(lt);let qn=!1;const{container:Ss,containerTileId:zt}=Ps;Wn||(on.warn(uo.o7,"lastRemoteScreensharePeerId is not found"),qn=!0);const On=(0,zn.JZ)(lt,Wn||""),bn=On.userId?(0,mr.I)(lt,On.userId):"";let ds=ga.t("Screen share");bn&&(ds=ga.t("{memberName} screen share",{memberName:(0,Co.nr)(bn)}));const ps={...fr.P,backgroundColor:"black",title:ds,type:"huddle-call-screen-share"},ys=(0,_.getStateForClientStore)();(0,gs.Ak)(ys)||(on.warn(uo.o7,"no active huddle found"),qn=!0);const Vs=(On==null||(nt=On.tileIds)===null||nt===void 0||(Qe=nt.screenshare)===null||Qe===void 0?void 0:Qe.tileId)||0;(0,_.dispatchForClientStore)((0,_o.cn)({tileId:Vs}))||(on.warn(uo.o7,"video tile does not have stream"),qn=!0);const to=!Ps.childWindow||Ps.childWindow.closed;if(to&&(0,m.y3)()){const{window:io,windowToken:yo}=yield(0,_r.wK)("",ps);Ps.childWindow=io,Ps.childWindowToken=yo}else to&&(Ps.childWindow=window.open("",ds,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=480")||void 0);if(!Ps.childWindow){on.warn(uo.o7,"No child window available. Exiting screen share window launch");return}const Qs=(0,hr.ZT)(lt);Ps.childWindow.document&&(Ps.childWindow.document.body.style.background="black");const go={windowRef:(0,Gr.O)(Ps.childWindow),windowToken:Ps.childWindowToken};if(to&&(Ps.childWindow.addEventListener("beforeunload",Oo),window.addEventListener("beforeunload",Oo)),!(Ss&&zt===Vs)||to){Ps.containerTileId=Vs;const io=(0,_.getStoreInstanceByTeamId)(Qs);Ps.container=yield(0,vr.s)(Ps.childWindow,ns.createElement(jr.A,{store:io},ns.createElement(la.Mn.Provider,{value:go},ns.createElement(Er.A,{shouldStopHuddle:!0},ns.createElement(pa,{peerId:Wn,isError:qn})))),{useContainer:!0})}const Ao=(Dt=Ps.childWindow)===null||Dt===void 0?void 0:Dt.browserWindowId;Ao?(0,I.hN0)(Ao):(0,ur.A)(Ps.childWindow.focus)&&Ps.childWindow.focus(),zr(Ps.childWindow)});return function(ie,Pe,We){return me.apply(this,arguments)}}());$r.meta={name:"createThunk",key:"createThunklaunchScreenShareWindow",description:"Launch the window that renders screen share media"};var Do=e(9712681361),Yr=e(5761207079);const Aa=(0,d.Ay)("alerts if a user joins the huddle and the current user has hidden that user",(me,ie,Pe)=>{let{userId:We}=Pe;const nt=ie();(0,Yr.a)(nt,We)&&me((0,so.Iw)(so.vT.HiddenUserJoinedHuddle))});Aa.meta={name:"createThunk",key:"createThunkmaybeAlertHiddenUserJoinedHuddle",description:"alerts if a user joins the huddle and the current user has hidden that user"};var Ns=e(462591818),ya=e(9640070512),Ta=e(2527782504),Ia=e(5954792826),ws=e(700984029),Po=e(1829947126),Qr=e(9009528296),Jr=e(1289024643),ho=e(9853754481),Ca=e(9372409576);const Ma=(0,d.Ay)("Send call analytics to the server",(me,ie,Pe)=>{const We=ie().activeCall;let nt;if(Pe&&Pe.callId?nt=Pe.callId:We&&We.id&&(nt=We.id),!nt){(0,Ho.M)("There should be an active call in progress in order to send analytics.");return}const Qe=Xr(new Ca.$.calls.analytics.Report(Pe.stats),ie()),Dt=Ca.$.calls.analytics.Report.encode(Qe).finish(),lt=String.fromCharCode(...Dt);return me((0,wt.apiCall)({method:"screenhero.rooms.postAnalytics",args:{room:nt,analytics:btoa(lt)},reason:"calls-analytics"}))});Ma.meta={name:"createThunk",key:"createThunksendAnalytics",description:"Send call analytics to the server"};function Xr(me,ie){const Pe=me;return Pe.recv=me.recv.map(We=>{if(We.peerId){const nt=(0,zn.C1)(ie,We.peerId);if(nt){const Qe=We;Qe.userId=nt.userId}}if(We.peerIdString){const nt=(0,zn.C1)(ie,We.peerIdString);if(nt){const Qe=We;Qe.userId=nt.userId}}return We}),Pe.recv=Pe.recv.filter(We=>!!We.userId),me}c(Xr,"mapPeerIdsToUserIds");var Zr=e(5046160032),Oa=e(8445020572),qr=e(4914127094),zo=e(8935621861),vo=e(415910655);const ei=(0,s.Wo)({label:"SEND-MEETING-EVENTS-LOGGER"}),Da="screenhero.rooms.proxyMeetingEvents",Pa=(0,d.Ay)("Send meeting events to the server",function(){var me=(0,Wo.coroutine)(function*(ie,Pe,We){let nt;try{nt=JSON.stringify(We.events)}catch(on){ei.error(on.message);return}const{metrics:Qe,teamId:Dt}=ti();if(We.isUnloading){const on={app:We.app,meeting_id:We.meetingId,media_region:We.mediaRegion,attendee_id:We.attendeeId,call_id:We.callId,ua:window.navigator.userAgent,event_type:"calls-chime-events",encoding:"none",events:nt,preferred_media_region:yield zo.A.getInstance().getNearestChimeMediaRegion(Dt),audio_connected_time:(Qe==null?void 0:Qe.audioConnectedTime)||0,first_presence_time:(Qe==null?void 0:Qe.firstPresenceTime)||0,rooms_join_time:(Qe==null?void 0:Qe.roomsJoinTime)||0,sdk_initialized_time:(Qe==null?void 0:Qe.sdkInitializedTime)||0,chime_attendee_presence_time:We.attendeePresenceDuration?We.attendeePresenceDuration:(Qe==null?void 0:Qe.attendeePresenceDuration)||0,chime_meeting_start_time:We.meetingStartDuration?We.meetingStartDuration:(Qe==null?void 0:Qe.meetingStartDuration)||0,chime_signaling_open_time:We.signalingOpenDuration?We.signalingOpenDuration:(Qe==null?void 0:Qe.signalingOpenDuration)||0,chime_ice_gathering_time:We.iceGatheringDuration?We.iceGatheringDuration:(Qe==null?void 0:Qe.iceGatheringDuration)||0,voice_focus_init_time:(Qe==null?void 0:Qe.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:(Qe==null?void 0:Qe.credentialsToVoiceFocusInitializedTime)||0};return(0,Zr.A)({apiUrl:"/api/",method:Da,token:(0,qr.F)(Pe()),versionTs:(0,Oa.HF)(),versionUid:(0,Oa.X3)(),args:on})?yt.S.resolve():yt.S.reject(new Error("sendMeetingEvents: beacon failed"))}const lt=We.isEnding?{app:We.app,meeting_id:We.meetingId,media_region:We.mediaRegion,attendee_id:We.attendeeId,events:nt,call_id:We.callId,preferred_media_region:yield zo.A.getInstance().getNearestChimeMediaRegion(Dt),audio_connected_time:(Qe==null?void 0:Qe.audioConnectedTime)||0,first_presence_time:(Qe==null?void 0:Qe.firstPresenceTime)||0,rooms_join_time:(Qe==null?void 0:Qe.roomsJoinTime)||0,sdk_initialized_time:(Qe==null?void 0:Qe.sdkInitializedTime)||0,chime_attendee_presence_time:We.attendeePresenceDuration?We.attendeePresenceDuration:(Qe==null?void 0:Qe.attendeePresenceDuration)||0,chime_meeting_start_time:We.meetingStartDuration?We.meetingStartDuration:(Qe==null?void 0:Qe.meetingStartDuration)||0,chime_signaling_open_time:We.signalingOpenDuration?We.signalingOpenDuration:(Qe==null?void 0:Qe.signalingOpenDuration)||0,chime_ice_gathering_time:We.iceGatheringDuration?We.iceGatheringDuration:(Qe==null?void 0:Qe.iceGatheringDuration)||0,voice_focus_init_time:(Qe==null?void 0:Qe.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:(Qe==null?void 0:Qe.credentialsToVoiceFocusInitializedTime)||0}:{app:We.app,meeting_id:We.meetingId,media_region:We.mediaRegion,attendee_id:We.attendeeId,events:nt,call_id:We.callId};return ie((0,wt.apiCall)({method:Da,args:lt,reason:"calls-chime-events"}))});return function(ie,Pe,We){return me.apply(this,arguments)}}());Pa.meta={name:"createThunk",key:"createThunksendMeetingEvents",description:"Send meeting events to the server"};function ti(){const me=(0,_.getStateForClientStore)(),{teamId:ie}=(0,gs.Qn)(me)||{};return{metrics:(0,vo.s2)(),teamId:ie}}c(ti,"getCallMetricsAndTeamId");const ni=(0,s.Wo)({label:"HANDLE-MEETING-EVENTS-LOGGER"}),Sa=(0,d.Ay)("Handle Chime meeting events",(me,ie,Pe)=>{let{events:We,callId:nt,meetingId:Qe,mediaRegion:Dt,attendeeId:lt,isUnloading:on,isEnding:Wn}=Pe;const qn=si(We);!(0,Jt.A)(qn)&&!on&&!Wn&&(0,vo.jm)(qn),me(Pa({events:We,app:"huddles",callId:nt,meetingId:Qe,mediaRegion:Dt,attendeeId:lt,isUnloading:on,isEnding:Wn,attendeePresenceDuration:qn.attendeePresenceDuration,signalingOpenDuration:qn.signalingOpenDuration,iceGatheringDuration:qn.iceGatheringDuration,meetingStartDuration:qn.meetingStartDuration}))});Sa.meta={name:"createThunk",key:"createThunkhandleMeetingEvents",description:"Handle Chime meeting events"};function si(me){const ie={};return me.forEach(Pe=>{let{message:We}=Pe;try{const on=JSON.parse(We);switch(on.name){case"attendeePresenceReceived":var nt;ie.attendeePresenceDuration=(nt=on.attributes)===null||nt===void 0?void 0:nt.attendeePresenceDurationMs;break;case"meetingStartSucceeded":var Qe,Dt,lt;ie.signalingOpenDuration=(Qe=on.attributes)===null||Qe===void 0?void 0:Qe.signalingOpenDurationMs,ie.iceGatheringDuration=(Dt=on.attributes)===null||Dt===void 0?void 0:Dt.iceGatheringDurationMs,ie.meetingStartDuration=(lt=on.attributes)===null||lt===void 0?void 0:lt.meetingStartDurationMs;break;default:break}}catch(on){ni.error("Invalid JSON in meeting event",on)}}),ie}c(si,"parseMeetingEventMetrics");const oi=Sa;var $s=e(6758774099),ai=e(4988306802);const Ra=(0,d.Ay)("Process AWS transcript event",(me,ie,Pe)=>{var We;if((0,co.VW)(Pe))return;const nt=Pe.results[0];if(!(nt!=null&&nt.resultId)||!(0,ai.TP)(ie()))return;const Qe=(We=nt.alternatives[0])===null||We===void 0?void 0:We.items;if(!(Qe!=null&&Qe.length)){me((0,$s.h2)({resultId:nt.resultId,transcriptions:[]}));return}const Dt=[];Qe.forEach(lt=>{var on;const Wn=Dt[Dt.length-1],qn=(0,Ia.l)((on=lt.attendee)===null||on===void 0?void 0:on.externalUserId);qn&&(lt.type===co.E9.PUNCTUATION?Wn&&(Wn.content=`${Wn.content}${lt.content}`,Wn.endTimeMs=lt.endTimeMs):Dt.push({memberId:qn,timestampMs:lt.startTimeMs,endTimeMs:lt.endTimeMs||Date.now(),content:lt.content}))}),me((0,$s.h2)({resultId:nt.resultId,transcriptions:Dt}))});Ra.meta={name:"createThunk",key:"createThunkprocessAwsTranscription",description:"Process AWS transcript event"};const ri=Ra;var ao=e(8783285437),ii=e(6155974509);const La=(0,d.Ay)("Maybe disable the screen share",function(){var me=(0,Wo.coroutine)(function*(ie,Pe){const We=(0,Mo.tZ)("CALLS-REDUX");Pe().peers.self.isScreenshareEnabled&&(We.info("Attempted to turn off screen sharing"),ie((0,zn.kT)({id:"self",isScreenshareEnabled:!1,selectedScreenId:void 0}))),(0,ii.a)()});return function(ie,Pe){return me.apply(this,arguments)}}());La.meta={name:"createThunk",key:"createThunkdisableScreenShareIfEnabled",description:"Maybe disable the screen share"};var ro=e(9190452268),Ls=e(9680914051),Zs=e(1990810649),ba=e(5145584581),li=e(9365970888),So=e(7592559649),$o=e(6251210828),ka=e(7439555287),ci=e(6470070112),di=e(8556787853);let ui=c(class{onPeerMuted(ie,Pe){this.dispatch((0,zn.kT)({id:ie,isMicrophoneEnabled:!Pe}))}onPeerJoined(ie,Pe){if(this.maybeRecordFirstPresenceTime(),Pe&&ie){this.dispatch((0,zn.Uu)({id:ie,userId:Pe,isMicrophoneEnabled:!0})),this.dispatch(xo());const We=(0,zn.Ng)(this.store.getState());(0,_.dispatchForClientStore)((0,X.Rr)({isDrawEnabled:We.isDrawEnabled||!1})),this.dispatch((0,$s.U$)({type:ao.v.JOIN,memberId:Pe,timestampMs:Date.now()})),this.maybeRemoveUserAsPending(Pe),this.dispatch(Aa({userId:Pe}))}}onPeerLeft(ie){var Pe;const We=(Pe=(0,zn.jB)(this.store.getState(),ie))===null||Pe===void 0?void 0:Pe.userId;We&&(this.callLogger.info(`Peer left the huddle. userId=${We} peerId=${ie}`),this.dispatch((0,$s.U$)({type:ao.v.LEAVE,memberId:We,timestampMs:Date.now()}))),this.dispatch((0,zn.xx)(ie)),this.dispatch(xo())}onSelfJoined(){const ie=this.recordTiming(Ls.qK);this.maybeRecordFirstPresenceTime(),this.dispatch(ar(ie)),(0,_.dispatchForClientStore)((0,X.wr)())}onSelfLeft(){this.dispatch((0,so.LL)(Gn.vT.HiddenUserJoinedHuddle))}onNewActiveSpeaker(ie){this.dispatch((0,zn.FX)(ie))}onPeerReacji(ie,Pe,We,nt,Qe){var Dt;const lt=this.store.getState(),Wn=(0,ct.hw)(lt)&&Qe?(0,di.Ay)(lt,{url:Qe}):void 0;this.dispatch((0,zn._x)({peerId:ie,emoji:Pe,isEmoji:We,reactionType:nt,emojiUrl:Wn}));const qn=(Dt=(0,zn.jB)(this.store.getState(),ie))===null||Dt===void 0?void 0:Dt.userId;qn&&this.dispatch((0,$s.U$)({type:ao.v.SEND_REACTION,memberId:qn,timestampMs:Date.now(),emoji:Pe}))}onPeerMuteRequest(ie,Pe){Pe===this.selfAttendeeId&&(this.dispatch((0,fa.A)(!1)),this.dispatch((0,Gn.CE)({alert:Gn.vT.PeerMuteRequest,peerId:ie})),this.callLogger.info(`Peer muted self microphone : peerId:${ie}`))}onError(ie,Pe){let We;Pe===co.b9[co.b9.AudioJoinedFromAnotherDevice]?We=Do.M6.AudioJoinedFromAnotherDevice:Pe===co.b9[co.b9.MeetingEnded]&&(We=(0,ci.ew)((0,ka.KA)().getState())?Do.M6.ChimeMeetingEndedFromTimeLimit:Do.M6.ChimeMeetingEnded),this.dispatch((0,or.A)({terminalState:We||ie})),this.callLogger.info(`tearDown executed: terminalState: ${ie}, statusCodeName: ${Pe} tearDownState: ${We}`)}onClogError(ie){}onMeetingSessionInitialized(){this.recordTiming(Ls.W_);const ie=(0,ro.Cy)({state:this.store.getState()}),Pe=ie.measure(Ls.Bq,Ls.CY);ie.count(Ls.CY,Pe),(0,vo.jm)({sdkInitializedTime:Pe})}onSelfPermissionUpdated(ie,Pe){this.callLogger.info(`Received permission update from type:${Pe}, isDenied: ${ie}`);let We;(0,m.y3)()?We=Pe===Ws.lW.Microphone?Gn.vT.NoSystemAudio:Gn.vT.NoSystemVideo:We=Pe===Ws.lW.Microphone?Gn.vT.NoBrowserAudioPermission:Gn.vT.NoBrowserVideoPermission,ie?this.dispatch((0,Gn.CE)({alert:We})):this.dispatch((0,Gn.Gu)(We))}onSelfVideoTileUpdate(ie){if(!ie.tileId)return;const Pe=(0,zn.Ng)(this.getState());if(!ie.isContent&&!Pe.isCameraEnabled)return;if(!(0,zn.vz)(this.getState()))this.dispatch((0,$s.U$)({type:ao.v.SCREENSHARE_START,memberId:(0,In.WR)(this.getState()),timestampMs:Date.now()})),this.dispatch((0,zn.kT)({id:"self",tileId:ie.tileId,isScreenshareEnabled:!!ie.isContent}));else if(ie.isContent){var nt,Qe;this.dispatch((0,$s.U$)({type:ao.v.SCREENSHARE_START,memberId:(0,In.WR)(this.getState()),timestampMs:Date.now()}));const Dt=(0,zn.JC)(this.getState());((nt=Pe.tileIds)===null||nt===void 0||(Qe=nt.screenshare)===null||Qe===void 0?void 0:Qe.tileId)!==ie.tileId&&Dt!==Zs.cM.Screenshare&&this.dispatch((0,ba.x)({peerId:"self",contentViewType:Zs.cM.None,contentViewConfig:{}})),this.dispatch((0,zn.kT)({id:"self",tileId:ie.tileId,isScreenshareEnabled:!!ie.isContent}))}else this.dispatch((0,zn.kT)({id:"self",tileId:ie.tileId,isCameraEnabled:!0}))}onPeerVideoTileUpdate(ie,Pe){if(!Pe.tileId)return;const We=Pe.boundExternalUserId&&(0,Ia.l)(Pe.boundExternalUserId);Pe.isContent&&We&&(this.callLogger.info(`Peer screenshare started: userId=${We}`),this.dispatch((0,$s.U$)({type:ao.v.SCREENSHARE_START,memberId:We,timestampMs:Date.now()}))),this.dispatch((0,zn.BD)({id:ie,tileId:Pe.tileId,isContent:Pe.isContent,isPaused:Pe.paused}))}onVideoTileRemoved(ie){var Pe,We;const nt=this.store.getState(),Qe=(0,zn.v2)(nt,ie);Qe&&(this.callLogger.info(`Peer screenshare stopped: userId=${Qe}`),this.dispatch((0,$s.U$)({type:ao.v.SCREENSHARE_STOP,memberId:Qe,timestampMs:Date.now()}))),this.dispatch((0,zn.Qr)({tileId:ie})),Oo();const Dt=(0,zn.Ng)(nt);((Pe=Dt.tileIds)===null||Pe===void 0||(We=Pe.screenshare)===null||We===void 0?void 0:We.tileId)===ie&&Dt.contentViewType===Zs.cM.Screenshare&&this.dispatch((0,ba.x)({peerId:"self",contentViewType:Zs.cM.None,contentViewConfig:{}}))}onVideoTileWillPause(ie){this.dispatch((0,zn.K3)({tileId:ie}))}onVideoTileWillUnpause(ie){this.dispatch((0,zn.XS)({tileId:ie}))}onDeviceAccessApproved(ie){switch(ie){case Ns.mT.MICROPHONE:{(0,m.y3)()?(this.dispatch((0,Gn.Gu)(Gn.vT.NoSystemAudio)),this.dispatch((0,ws.er)())):(this.dispatch((0,Gn.Gu)(Gn.vT.NoBrowserAudioPermission)),this.dispatch((0,ws.ZY)()));break}case Ns.mT.CAMERA:{(0,m.y3)()?(this.dispatch((0,Gn.Gu)(Gn.vT.NoSystemVideo)),this.dispatch((0,ws.NH)())):(this.dispatch((0,Gn.Gu)(Gn.vT.NoBrowserVideoPermission)),this.dispatch((0,ws.in)()));break}default:}}onCheckSystemMediaAccess(ie){switch(ie){case Ns.mT.MICROPHONE:{this.dispatch((0,ws.tG)()),this.dispatch((0,Gn.CE)({alert:Gn.vT.NoSystemAudio}));break}case Ns.mT.CAMERA:{this.dispatch((0,ws.Yr)()),this.dispatch((0,Gn.CE)({alert:Gn.vT.NoSystemVideo}));break}case Ns.mT.SCREEN:{this.dispatch((0,ws.J3)()),this.dispatch((0,Gn.CE)({alert:Gn.vT.NoSystemScreenShare}));break}default:}}onBrowserMediaDeviceAccessDenied(ie){switch(this.callLogger.error(`Self ${ie} device access denied`),ie){case Ns.mT.MICROPHONE:{this.dispatch((0,ws.cH)()),this.dispatch((0,Gn.CE)({alert:Gn.vT.NoBrowserAudioPermission}));break}case Ns.mT.CAMERA:{this.dispatch((0,ws.px)()),this.dispatch((0,Gn.CE)({alert:Gn.vT.NoBrowserVideoPermission}));break}default:}}onStartSessionTimeout(){}onSetNoMediaInput(ie){switch(ie){case Ns.mT.MICROPHONE:{this.dispatch((0,Gn.CE)({alert:Gn.vT.NoUserAudioStream}));break}case Ns.mT.CAMERA:{const Pe=(0,li.ly)(this.getState());if((0,_.dispatchForClientStore)((0,X.WM)({setVideoEnabled:!1})),!(0,m.y3)()&&Pe)break;this.dispatch((0,Gn.CE)({alert:Gn.vT.NoUserVideoStream}));break}default:}}onClearNoMediaInput(ie){switch(ie){case Ns.mT.MICROPHONE:{this.dispatch((0,Gn.Gu)(Gn.vT.NoUserAudioStream));break}case Ns.mT.CAMERA:{this.dispatch((0,Gn.Gu)(Gn.vT.NoUserVideoStream));break}default:}}onSetNoAudioOutput(ie){switch(ie){case Ns.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,Gn.CE)({alert:Gn.vT.NoAudioOutputAudioElementError}));break}case Ns.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,Gn.CE)({alert:Gn.vT.NoAudioOutputAudioLevelError}));break}default:}}onClearNoAudioOutput(ie){switch(ie){case Ns.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,Gn.Gu)(Gn.vT.NoAudioOutputAudioElementError));break}case Ns.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,Gn.Gu)(Gn.vT.NoAudioOutputAudioLevelError));break}default:}}onSelfConnected(){this.callLogger.info("Self connected to chime media server"),this.dispatch((0,zn.kT)({id:"self",isConnected:!0,noInternet:!1}))}onSelfDisconnected(){this.callLogger.info("Self disconnected from chime media server"),this.dispatch((0,zn.kT)({id:"self",isConnected:!1})),Js.A.publish({type:Ks.lx.NetworkDisconnect,update:{peerId:"self"}})}onSelfConnectionQualityChanged(ie,Pe){this.callLogger.info(`${ie} audio packet loss changed to: ${Pe}`)}onPeerConnected(ie){this.callLogger.info(`peer connnected to chime media server ${ie}`),this.dispatch((0,zn.E3)({id:ie,isConnected:!0}))}onPeerDisconnected(ie){this.callLogger.info(`peer disconnected from chime media server ${ie}`),this.dispatch((0,zn.E3)({id:ie,isConnected:!1}))}onPeerConnectionQualityChanged(ie,Pe,We){}onSelfMediaStreamChanged(ie){}onNewPeerMediaStream(ie,Pe){}onScreenThumbnails(ie){}onUpdatedSelfAudioLevel(ie){Po.A.publish("self",ie/ho.Ep),Qr.A.publish(ie/ho.Ep);const Pe=this.store.getState();(0,ct.Eg)(Pe)&&Po.A.publishAll("self",ie/ho.Ep)}onUpdatedPeerAudioLevels(ie){const Pe=this.store.getState();Object.entries(ie).forEach(nt=>{let[Qe,Dt]=nt;Po.A.publish(Qe,Dt/ho.Ep)}),(0,ct.Eg)(Pe)&&Object.entries(ie).forEach(nt=>{let[Qe,Dt]=nt;Po.A.publishAll(Qe,Dt/ho.Ep)})}onPeerCameraActive(ie,Pe){const We=ie==="self";this.callLogger.info(`${We?"Self":`Peer (${ie})`} camera turned ${Pe?"on":"off"}`),this.dispatch((0,zn.kT)({id:ie,isCameraEnabled:Pe}))}onPeerScreenShareActive(ie,Pe){const We=ie==="self";this.callLogger.info(`${We?"Self":`Peer (${ie})`} screenshare ${Pe?"started":"stopped"}`)}onPeerDrawMessage(ie,Pe){Gs.A.publish({id:ie,...Pe})}onPeerDrawEnabled(ie,Pe){this.dispatch((0,zn.kT)({id:ie,isDrawEnabled:Pe}))}onMediaStats(ie,Pe){this.dispatch(Ma({stats:ie,callId:Pe}))}onAppMetrics(ie){let{appMetrics:Pe,clientMetricReport:We,screenshareRtcStats:nt}=ie;const Qe=(0,sr.Ay)({state:this.getState(),appMetrics:Pe});Js.A.publish({type:Ks.lx.AppMetrics,update:{huddleStateSnapshot:Qe,clientMetricReport:We,screenshareRtcStats:nt}})}onDevicesUpdated(ie){this.dispatch((0,ws.Fb)(ie))}onOutputDeviceChanged(ie){this.callLogger.info(`Self audio output device changed: device: ${ie.id}`),this.dispatch((0,ws.AS)(ie))}onDeviceTypeBlocked(ie){}onTokenRefreshRequest(){}onScreenShareStopped(){this.dispatch(La());const Pe=(0,_.getClientStoreInstance)().getState(),We=(0,gs.Ak)(Pe);!We||(0,Jt.A)(We)||We.huddleState===Do.RJ.ENDING||this.dispatch((0,ya.H)({focusKey:Ta.Ay.HUDDLE_SIDEBAR_FOOTER}))}onScreenShareStarted(){this.callLogger.info("Self screenshare started"),this.dispatch((0,ya.H)({focusKey:Ta.Ay.HUDDLE_SIDEBAR_FOOTER}))}onSetNoOrLowInputAudioLevel(){Js.A.publish({type:Ks.lx.NoAudio,update:{direction:"send",noAudio:!0}})}onClearNoOrLowInputAudioLevel(){Js.A.publish({type:Ks.lx.NoAudio,update:{direction:"send",noAudio:!1}})}onSetNoOrLowOutputAudioLevel(){Js.A.publish({type:Ks.lx.NoAudio,update:{direction:"recv",noAudio:!0}})}onClearNoOrLowOutputAudioLevel(){Js.A.publish({type:Ks.lx.NoAudio,update:{direction:"recv",noAudio:!1}})}onAudioVideoDidStartConnecting(){this.recordTiming(Ls.dk)}onStart(){this.recordTiming(Ls.Nh)}onAudioVideoDidStart(){this.recordTiming(Ls.ck),(0,_.dispatchForClientStore)((0,X._U)(Date.now()))}onAudioVideoDidStop(){const ie=(0,_.getClientStoreInstance)(),Pe=(0,gs.cN)(ie==null?void 0:ie.getState()),We=Date.now(),nt=We-Pe;(0,_.dispatchForClientStore)((0,X.bV)(We)),(0,_.dispatchForClientStore)((0,X.qr)(nt))}onMaxTileSizeUpdated(ie){this.dispatch((0,zn.l$)(ie))}onInit(){this.recordTiming(Ls.cP)}onVoiceFocusLoaded(){const ie=(0,ro.Cy)({state:this.store.getState()}),Pe=ie.measure(Ls.aN,Ls.pz);ie.count(Ls.pz,Pe),this.recordTiming(Ls.qb)}onVoiceFocusStartLoading(){(0,ro.Cy)({state:this.store.getState()}).mark(Ls.aN)}recordTiming(ie){const Pe=(0,ro.Cy)({state:this.store.getState()}),We=Pe.measure(Ls.qr,ie);return Pe.count(ie,We),We}onMeetingEvents(ie,Pe,We,nt,Qe,Dt,lt){this.dispatch(oi({events:Qe,callId:nt,meetingId:ie,mediaRegion:Pe,attendeeId:We,isUnloading:Dt,isEnding:lt}))}onMaybeVoiceFocusInitialized(ie){const We=(0,ro.Cy)({state:this.store.getState()}).measure(Ls.Bq,Ls.bv);(0,vo.jm)({voiceFocusInitializedTime:ie,credentialsToVoiceFocusInitializedTime:We})}onScreenShareError(ie){switch(this.callLogger.error(`an error occurred while initiating a screenshare: type: ${ie}`),ie){case Ns.lD.NOT_FOUND_ERROR:{this.dispatch((0,Gn.CE)({alert:Gn.vT.SSNotFoundError}));break}case Ns.lD.NOT_READABLE_ERROR:{this.dispatch((0,Gn.CE)({alert:Gn.vT.SSNotReadableError}));break}case Ns.lD.ERROR:{this.dispatch((0,Gn.CE)({alert:Gn.vT.ScreenShareError}));break}default:break}}onNoiseSuppressionCPUThrottled(){this.dispatch((0,Gn.CE)({alert:Gn.vT.NoiseSuppressionCPUThrottled}))}onTranscriptionEvent(ie){this.dispatch(ri(ie))}setSelfAttendeeId(ie){this.selfAttendeeId=ie}maybeRecordFirstPresenceTime(){this.firstPresenceTimeMs>0||(this.firstPresenceTimeMs=this.recordTiming(Ls.dP),(0,vo.jm)({firstPresenceTime:this.firstPresenceTimeMs}))}onAudioInputTrackMuted(){this.dispatch((0,Gn.CE)({alert:Gn.vT.AudioInputTrackMuted}))}onAudioInputTrackUnMuted(){this.dispatch((0,Gn.Gu)(Gn.vT.AudioInputTrackMuted))}onJukeboxRequest(ie){if(!(0,ct.Eg)(this.getState()))return;const We=this.isDj(),Qe=(0,$o.Rl)(this.getState())[ie];!We||!Qe||((0,_.dispatchForClientStore)((0,X.bk)({song:Qe})),(0,_.dispatchForClientStore)((0,X._u)({song:Qe})),(0,_.dispatchForClientStore)((0,X.WY)(Qe)))}onJukeboxStopRequest(){!(0,ct.Eg)(this.getState())||!this.isDj()||((0,_.dispatchForClientStore)((0,X.JM)()),(0,_.dispatchForClientStore)((0,X._u)({song:void 0})))}isDj(){var ie;const Pe=(0,In.WR)(this.getState()),We=(0,_.getClientStoreInstance)(),nt=(ie=(0,gs.Qn)(We==null?void 0:We.getState()))===null||ie===void 0?void 0:ie.callId,Qe=(0,So.gV)(this.getState(),{callId:nt}),Dt=(0,So.gV)(this.getState(),{callId:nt,userId:Pe});return!Qe||!!Dt}maybeRemoveUserAsPending(ie){const Pe=(0,_.getClientStoreInstance)(),We=(0,gs.E9)(Pe==null?void 0:Pe.getState());We&&this.dispatch((0,Jr.r_)({callId:We,userId:ie}))}onContentShareDetailsUpdate(ie,Pe,We){this.dispatch((0,zn.kT)({id:ie,isDrawEnabled:Pe,contentShareSource:We}))}constructor(ie){this.firstPresenceTimeMs=0,this.callLogger=(0,Mo.Jt)("HUDDLE-DISPATCHER"),this.selfAttendeeId=void 0,this.dispatch=ie.dispatch,this.getState=ie.getState,this.store=ie}},"HuddleActionDispatcher");var _i=e(5741354339),fo=e(4066669727),qs=e(8778137680),mi=e(7434063642),Ua=e(4156857608);let St,Yo,eo;const hi="HUDDLE-SDK",vi="HUDDLE-CLIENT-MIDDLEWARE",Hs=(0,s.Wo)({label:vi}),Na=c(me=>{me.id==="self"&&(St==null||St.sendDrawMessage(me))},"onPeerDrawPublish");function Qo(me,ie,Pe,We){const nt=(0,gs.E9)(me),Qe=(0,gs.l4)(me),Dt=Qe?(0,_.getStoreInstanceByTeamId)(Qe):void 0,lt=Dt?Dt.getState():void 0,on=lt?(0,In.WR)(lt):void 0;nt&&on&&(Dt==null||Dt.dispatch(ie({user:on,channel:nt,fieldValue:Pe,experimentHuddlesMultiDeviceGroupOn:We})))}c(Qo,"maybeDispatchAwarenessUpdate");function Eo(me,ie,Pe){const We=(0,gs.E9)(me),nt=(0,gs.l4)(me),Qe=nt?(0,_.getStoreInstanceByTeamId)(nt):void 0,Dt=Qe?Qe.getState():void 0,lt=Dt?(0,In.WR)(Dt):void 0;We&&lt&&(Qe==null||Qe.dispatch(ie({user:lt,channel:We,experimentHuddlesMultiDeviceGroupOn:Pe})))}c(Eo,"maybeDispatchAwarenessRemove");const Ba=(0,Pt.Ay)("dispatches actions to huddles SDK",(me,ie,Pe)=>{const We=me.getState(),nt=c(()=>{const zt=(0,gs.l4)(We),On=(0,_.getStoreInstanceByTeamId)(zt);if(!On)return{};const bn=On==null?void 0:On.getState();if(!bn)return{};const ds=(0,zn.Ng)(bn)||{};return{huddlesVideoActive:(0,zn.vz)(bn),self:ds}},"getIsHuddlesVideoActive");switch(Pe.type){case X.kn.getType():{var Qe;const zt=Pe.payload;Yo=zt==null||(Qe=zt.audioOutputRef)===null||Qe===void 0?void 0:Qe.current,zo.A.getInstance().init();break}case X.Sd.getType():{const{huddlesVideoActive:zt,self:On}=nt();St&&St.hasSession()&&(zt?St.selfVideoEnabled(!0,!!(On!=null&&On.isScreenshareEnabled)):St.selfVideoEnabled(!0,!1));break}case X._I.getType():{const{huddlesVideoActive:zt,self:On}=nt();St&&St.hasSession()&&(zt?St.selfVideoEnabled(!1,!!(On!=null&&On.isScreenshareEnabled)):St.selfVideoEnabled(!1,!1));break}case X.qW.getType():{Hs.info("BOOT","user agent:",navigator.userAgent);const zt=Pe.payload;let On=zt.isStartMuted;if(!Yo){Hs.error("Missing audio output element");return}const{server:bn,roomId:ds}=zt.callResult,ps=bn.attendee.AttendeeId,ys=zt.waitForHuddleStart,bs=zt.isPrejoin;(0,_.dispatchForClientStore)((0,X.og)(bs));const Vs=bs?(0,gs.Qn)(We):(0,gs.Ak)(We),{teamId:na}=Vs||{},to=(0,P.getFocusedWorkspace)(We),Qs=(0,_.getStoreInstanceByTeamId)(na||to),go=Qs?Qs.getState():void 0;if(!go){Hs.error("team state not available while initializing huddlesSdk. Returning early");return}Hs.info("client-huddles-middleware: Dispatching resetPeersStore"),Qs.dispatch((0,zn.VL)({huddlesVideoActive:!0})),Qs.dispatch((0,mi.X6)()),On=On||(0,ze.ty)(go,"huddles_mute_by_default"),On&&(Hs.info("Start huddle as muted as specified in user prefs"),Qs.dispatch((0,zn.kT)({id:"self",isMicrophoneEnabled:!1}))),eo&&eo.stop(!0),(0,ka.Gc)(to),eo=new cs.w,eo.start(ds);const sa=(0,_i.u)();sa.then(no=>{no&&(Hs.info("Log reporter stopped"),eo==null||eo.stop(!0,!1),eo=void 0)});const Ao=new ui(Qs),{ttiTrace:io}=(0,Kn.A)().getAllTraceHandlers();St=new Fs.Y(Ao,Yo,hi),(0,pn.Y)({name:pn.R1.HuddlesSdk,ref:St});const yo=(0,Xs.Y)(bn.attendee.ExternalUserId),qa=Cn(go,{server:bn,isPrejoin:bs});if(!qa){Hs.error("sdk options not available. Returning early");return}const oa=[],No=na||to;if(yo&&No){const no=new fo.SV({teamId:No,peerId:ps,topicId:yo,isHuddlesAwarenessTimestampEnabled:(0,ct.gG)(Qs.getState())});oa.push(no);const er=new fo.MC({teamId:No});oa.push(er),fo.PL.watch(No,yo,no),(0,pn.Y)({name:pn.R1.ChimeChannelListener,ref:er}),(0,pn.Y)({name:pn.R1.ChimeChannelBroadcaster,ref:no})}St.initialize(qa,[Ns.mT.MICROPHONE],!!On,ys,sa,oa).then(()=>{const no=St==null?void 0:St.getMeetingMediaRegion();io==null||io.setMediaRegionTag(no),Js.A.publish({type:Ks.lx.SelectedMediaRegion,update:{mediaRegionSelected:no}}),St&&!bs&&(St==null||St.maybeBindAudioOutputElement(),St==null||St.setIncludeSelfAndNoneActiveSpeaker(!0,!0))}),Ao.setSelfAttendeeId(ps),Gs.A.subscribe(Na),Hs.info("User started huddle");break}case X.pl.getType():{const zt=Pe.payload;if(St){const{waitForHuddleEnd:On}=zt;St.shutdown(()=>{On.resolve()});const bn=(0,P.getFocusedWorkspace)(We),ds=(0,_.getStoreInstanceByTeamId)(bn);ds==null||ds.dispatch((0,so.LL)(so.vT.SpeakingWhenMuted));const ps=(0,ct.pL)(ds==null?void 0:ds.getState()),ys=(0,gs.E9)(We);ys&&(Eo(We,qs.RZ,ps),Eo(We,qs.Lm,ps),fo.PL.unwatch(ys)),Gs.A.unsubscribe(Na),Hs.info("User left huddle")}St=void 0,fo.PL.unwatchAll(),(0,pn.N5)();break}case X.I9.getType():{const zt=Pe.payload;if(St&&St.hasSession()&&(St.selfMicrophoneEnabled(zt),zt)){const On=(0,P.getFocusedWorkspace)(We),bn=(0,_.getStoreInstanceByTeamId)(On);bn==null||bn.dispatch((0,so.LL)(so.vT.SpeakingWhenMuted))}break}case X.nU.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.sendReacji(zt.emoji,zt.reactionType,zt.emojiUrl);break}case X.M4.getType():{const zt=Pe.payload;if(St&&St.hasSession()){const On=(0,gs.l4)(We),bn=(0,_.getStoreInstanceByTeamId)(On);if(!bn)return;const ds=(0,ct.pL)(bn.getState()),ps=(0,gs.E9)(We),ys=(0,In.WR)(bn.getState());if(ps){var Dt;if(((Dt=(0,So.Fb)(bn.getState(),ps,ys,ds?"self":void 0))===null||Dt===void 0?void 0:Dt.field_value)===zt)Eo(We,qs.RZ,ds),(0,gs.Rv)(We)&&zt!=="speaker"&&(bn==null||bn.dispatch((0,Ua.a)({emoji:"speaker",reactionType:Zs.o.Sticker})));else{Qo(We,qs.z7,zt,ds);const{huddleEventsTrace:Vs}=(0,Kn.A)().getAllTraceHandlers();Vs==null||Vs.update({name:os.p.REACTION,type:os.G.ONCE,tags:{reactionType:Zs.o.Sticker}})}}}break}case X.so.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.sendMuteRequest(zt);break}case X.ol.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.setAGC(zt);break}case X.HC.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.setNewPreferredDevice(zt==null?void 0:zt.id,zt==null?void 0:zt.type);break}case X.yR.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.setNoiseSuppression(zt);break}case X.Rb.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.setVideoBackgroundEffect(zt);break}case X.YA.getType():{const{huddlesVideoActive:zt,self:On}=nt(),bn=Pe.payload,ds=!!(On!=null&&On.isCameraEnabled);if(St&&St.hasSession()){var lt,on;const ps=(0,gs.l4)(We),ys=(0,_.getStoreInstanceByTeamId)(ps);zt?St.selfVideoEnabled(ds,!0,bn==null?void 0:bn.mediaSourceId,bn):St.selfVideoEnabled(!1,!0,bn==null?void 0:bn.mediaSourceId,bn);let bs=(bn==null||(lt=bn.mediaSourceId)===null||lt===void 0?void 0:lt.startsWith("screen:"))||!1;!(bn==null||(on=bn.mediaSourceId)===null||on===void 0)&&on.startsWith("window:")&&(0,js.LD)()&&(bs=!0),St.selfDrawEnabled((0,mo.A)()&&bs);const Vs=(0,js.k0)((bn==null?void 0:bn.mediaSourceId)||"");St.sendContentShareDetails(Vs),ys==null||ys.dispatch((0,zn.kT)({id:"self",isDrawEnabled:bs,isCameraEnabled:ds,contentShareSource:Vs}))}break}case X.QZ.getType():{const{huddlesVideoActive:zt,self:On}=nt(),bn=zt?On.isCameraEnabled:!1;if(St&&St.hasSession()){const ds=(0,gs.l4)(We),ps=(0,_.getStoreInstanceByTeamId)(ds);St.selfVideoEnabled(!!bn,!1),ps==null||ps.dispatch((0,zn.kT)({id:"self",isDrawEnabled:!1,contentShareSource:void 0}))}break}case ws.Oh.getType():return St&&St.hasSession()?St.getScreenThumbnails():yt.S.resolve(null);case X.nI.getType():{const zt=Pe.payload;if(St&&St.hasSession()){var Wn;const On=(0,gs.l4)(We),bn=(0,_.getStoreInstanceByTeamId)(On);if(!bn)return;const ds=(0,ct.pL)(bn.getState()),ps=(0,gs.E9)(We),ys=(0,In.WR)(bn.getState());if(!ps)return;const bs=(Wn=(0,So.Fb)(bn.getState(),ps,ys,ds?"self":void 0))===null||Wn===void 0?void 0:Wn.field_value;return(zt||bs==="speaker")&&(0,_.dispatchForClientStore)((0,Ua.a)({emoji:"speaker",reactionType:Zs.o.Sticker})),St.toggleAllIncomingVideo(zt)}return yt.S.resolve(null)}case X.WY.getType():{const zt=Pe.payload;if(St&&St.hasSession()){const On=(0,gs.l4)(We);if(!(0,_.getStoreInstanceByTeamId)(On))return;(0,gs.E9)(We)&&Qo(We,qs.yT,zt.key)}break}case X.Lx.getType():{const zt=Pe.payload;St&&St.hasSession()&&St.sendJukeboxRequest(zt.key);break}case X.OA.getType():{St&&St.hasSession()&&St.sendJukeboxStopRequest();break}case X.Db.getType():{St&&St.hasSession()&&St.sendRecordingStartNotification();break}case X.bk.getType():{const zt=Pe.payload;if(St&&St.hasSession()){const On=(0,gs.l4)(We),bn=(0,_.getStoreInstanceByTeamId)(On);if(!(0,ct.Eg)(bn.getState()))return;St.startContentShareJukebox({song:zt.song})}break}case X.JM.getType():{if(St&&St.hasSession()){const zt=(0,gs.l4)(We),On=(0,_.getStoreInstanceByTeamId)(zt);if(!On||!(0,ct.Eg)(On.getState()))return;St.selfStopJukebox(),Eo(We,qs.S)}break}case ws.e$.getType():{if(St&&St.hasSession()){const zt=Pe.payload.mediaResourceType;return St.maybeCheckSystemMediaAccess(zt)}return yt.S.resolve(null)}case _o.d2.getType():{if(St&&St.hasSession()){const{payload:{tileId:zt,videoRef:On,shouldAttachStream:bn}}=Pe;St.bindVideo(zt,On.current,bn)}break}case _o.gJ.getType():{if(St&&St.hasSession()){const{payload:{tileId:zt,videoRef:On,shouldDetachStream:bn}}=Pe;St.unbindVideo(zt,On.current,bn)}break}case _o.WY.getType():{if(St&&St.hasSession()){const{payload:{tileId:zt}}=Pe;St.pauseVideo(zt)}break}case _o.D8.getType():{if(St&&St.hasSession()){const{payload:{tileId:zt}}=Pe;St.unpauseVideo(zt)}break}case X.WM.getType():{const zt=Pe.payload;if(St&&St.hasSession()){const On=(0,gs.l4)(We),bn=(0,_.getStoreInstanceByTeamId)(On),ds=bn==null?void 0:bn.getState();if(!bn){Hs.info("client-huddles-middleware","no team store found when user toggles video");return}if(!ds){Hs.info("client-huddles-middleware","no team state found when user toggles video");return}const{huddlesVideoActive:ps}=nt(),ys=(0,zn.Ng)(ds);let bs;(zt==null?void 0:zt.setVideoEnabled)!==void 0?bs=zt.setVideoEnabled:bs=!(ys!=null&&ys.isCameraEnabled),bs?(Hs.info("client-huddles-middleware","user toggling ON video"),St.setCameraQuality(...(0,Io.cg)()),ps?St.maybeEnableSelfCamera({isScreenshareEnabled:ys.isScreenshareEnabled}):St.maybeEnableSelfCamera()):(Hs.info("client-huddles-middleware","user toggling OFF video"),ps?St.selfVideoEnabled(!1,!!(ys!=null&&ys.isScreenshareEnabled)):St.selfVideoEnabled(!1,!1),bn.dispatch((0,zn.kT)({id:"self",isCameraEnabled:!1})))}break}case _o.cn.getType():{if(St&&St.hasSession()){const{payload:{tileId:zt}}=Pe;return(St==null?void 0:St.videoTileHasStream(zt))||!1}return yt.S.resolve(!1)}case zn.xz.getType():{const{huddlesVideoActive:zt,self:On}=nt();St&&Pe.payload.isContent&&(zt?St.selfVideoEnabled(!!(On!=null&&On.isCameraEnabled),!1):St.selfVideoEnabled(!1,!1));break}case X.Dj.getType():{St!=null&&St.hasSession()&&(St==null||St.initVideoPermission());break}case X._H.getType():{if(St!=null&&St.hasSession()){const{videoElement:zt,deviceId:On}=Pe.payload;St.stopVideoPreviewForVideoInput(zt),St.setCameraQuality(...(0,Io.cg)()),St.requestPreviewStreamForDeviceId(On,Ws.lW.Camera,zt)}break}case X.yi.getType():{if(St!=null&&St.hasSession()){const zt=Pe.payload;St.stopVideoPreviewForVideoInput(zt)}break}case X.Rr.getType():{const{self:zt}=nt();if(St&&St.hasSession()){const On=(zt==null?void 0:zt.contentShareSource)||Us.R.Unknown;if(On!==Us.R.Unknown){const bn=(zt==null?void 0:zt.isDrawEnabled)||!1;St.selfDrawEnabled((0,mo.A)()&&bn),St.sendContentShareDetails(On);const ds=(0,_.getStoreInstanceByTeamId)(Pe.payload.teamId);ds==null||ds.dispatch((0,zn.kT)({id:"self",isDrawEnabled:bn}))}}break}case X.HF.getType():{const zt=Pe.payload.isHostDrawEnabled,On=(0,_.getStoreInstanceByTeamId)(Pe.payload.teamId);On==null||On.dispatch((0,zn.kT)({id:"self",isHostDrawEnabled:zt}));break}case X.B5.getType():{St==null||St.handleClientOffline();break}case X.f2.getType():{const zt=Pe.payload,{isStartMuted:On}=zt,{teamId:bn}=(0,gs.Ak)(We)||{},ds=(0,P.getFocusedWorkspace)(We),ps=(0,_.getStoreInstanceByTeamId)(bn||ds),{ttiTrace:ys}=(0,Kn.A)().getAllTraceHandlers();if(ys==null||ys.setMediaRegionTag(St==null?void 0:St.getMeetingMediaRegion()),ps&&On&&St)return St.completePrejoin(zt).then(()=>{ps.dispatch((0,zn.kT)({id:"self",isMicrophoneEnabled:!1}))});if(St)return St.completePrejoin({});break}case X.xq.getType():{const zt=Pe.payload.contentViewType,On=Pe.payload.contentViewConfig;if(St&&St.hasSession()&&(0,gs.E9)(We)){var qn;const ds=(0,gs.l4)(We),ps=(0,_.getStoreInstanceByTeamId)(ds);if(!ps)return;const ys=(0,ct.pL)(ps.getState());if(zt!==Zs.cM.Screenshare)Eo(We,qs.Lm,ys);else if(!(On==null||(qn=On.item)===null||qn===void 0)&&qn.id){let bs;if(On.item.id==="self")bs=(0,In.WR)(ps.getState());else{var Ss;bs=(Ss=(0,zn.jB)(ps.getState(),On.item.id))===null||Ss===void 0?void 0:Ss.userId}Qo(We,qs.fv,bs,ys)}}break}case X.wr.getType():{const zt=(0,gs.l4)(We),On=(0,_.getStoreInstanceByTeamId)(zt);if(!On)return;const bn=On.getState();if(!(0,ct.Rk)(bn))return;if(St&&St.hasSession()){const ds=(0,gs.J0)(We),ps=(0,$o.gW)(bn,{channelId:ds}),ys=(0,$o.zK)(bn,{channelId:ds});St.selfMicrophoneEnabled(ps),(0,_.dispatchForClientStore)((0,X.WM)({setVideoEnabled:ys}))}break}default:return ie(Pe)}return null});Ba.meta={name:"createMiddleware",key:"createMiddlewareclientHuddlesMiddleware",description:"dispatches actions to huddles SDK"};const fi=Ba;Object.defineProperty({huddlesSdk:St},"huddlesSdk",{get:()=>St,set:me=>{St=me}});var Ro=e(4653418008),Lo=e(3328068409);const xa=(0,Pt.Ay)("Broadcast client theme state to other stores",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe);return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Lo.to)(lt),broadcastAction:lt=>(0,Ro.yg)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Lo.FW)(lt),broadcastAction:lt=>(0,Ro.kl)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Lo.VD)(lt),broadcastAction:lt=>(0,Ro.LA)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Lo.pg)(lt),broadcastAction:lt=>(0,Ro.Th)(lt)}),nt});xa.meta={name:"createMiddleware",key:"createMiddlewarebroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};const Ei=xa;var pi=e(1201539379),gi=e(4172221507),Ai=e(7331033739),yi=e(8707579690),Ti=e(2779520532),Ii=e(7128275929),Ci=e(9341298);const Wa=(0,Pt.Ay)("Broadcast view layout state across all teams",(me,ie,Pe)=>{const We=me.getState(),nt=ie(Pe),Qe=me.getState(),Dt=(0,P.getBootedWorkspaces)(Qe);return gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>{var on,Wn;return`${lt==null||(on=lt.viewLayout)===null||on===void 0?void 0:on.sidebarWidthIntent}-${lt==null||(Wn=lt.viewLayout)===null||Wn===void 0?void 0:Wn.sidebarWidthMode}`},broadcastAction:lt=>{const on=lt.split("-");return(0,Ti.R)({sidebarWidthIntent:Number(on[0]),sidebarWidthMode:on[1]})}}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>{var on,Wn;return`${lt==null||(on=lt.viewLayout)===null||on===void 0?void 0:on.sidebarWideWidthIntent}-${lt==null||(Wn=lt.viewLayout)===null||Wn===void 0?void 0:Wn.sidebarWideWidthMode}`},broadcastAction:lt=>{const on=lt.split("-");return(0,Ci.q)({sidebarWideWidthIntent:Number(on[0]),sidebarWideWidthMode:on[1]})}}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>{var on,Wn;return`${lt==null||(on=lt.viewLayout)===null||on===void 0?void 0:on.sidebarExtraWideWidthIntent}-${lt==null||(Wn=lt.viewLayout)===null||Wn===void 0?void 0:Wn.sidebarExtraWideWidthMode}`},broadcastAction:lt=>{const on=lt.split("-");return(0,Ii.a)({sidebarExtraWideWidthIntent:Number(on[0]),sidebarExtraWideWidthMode:on[1]})}}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Be.Vo)(lt),broadcastAction:lt=>(0,gi.F)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Be.v8)(lt),broadcastAction:lt=>(0,pi.mV)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>(0,Be.r8)(lt),broadcastAction:lt=>(0,Ai.v)(lt)}),gt({state:Qe,prevState:We,workspaces:Dt,broadcastSelector:lt=>{var on,Wn;return`${lt==null||(on=lt.viewLayout)===null||on===void 0?void 0:on.secondaryWidthIntent}-${lt==null||(Wn=lt.viewLayout)===null||Wn===void 0?void 0:Wn.secondaryWidthMode}`},broadcastAction:lt=>{const on=lt.split("-");return(0,yi.J)({secondaryWidthIntent:Number(on[0]),secondaryWidthMode:on[1]})}}),nt});Wa.meta={name:"createMiddleware",key:"createMiddlewarebroadcastViewLayoutMiddleware",description:"Broadcast view layout state across all teams"};const Mi=Wa;var Oi=e(9524650809),Fa=e(1649982175),Ka=e(352142497),po=e(2870224675),Di=e(9932860381),wa=e(3034856104);const Pi=50;function Ha(){return(0,Oi.A)("tabSoda_")}c(Ha,"generateTabSodaTabId");function Si(){return{activeTab:void 0,tabs:{},tabOrder:[]}}c(Si,"getInitialState");function Ri(me,ie){if(me&&ie){var Pe,We,nt,Qe;const on=(Pe=me[me[ls.jf]])===null||Pe===void 0?void 0:Pe.primary,Wn=(We=me[me[ls.jf]])===null||We===void 0?void 0:We.secondary,qn=(nt=ie[ie[ls.jf]])===null||nt===void 0?void 0:nt.primary,Ss=(Qe=ie[ie[ls.jf]])===null||Qe===void 0?void 0:Qe.secondary;if(me.teamId===ie.teamId&&me[ls.jf]===ie[ls.jf]&&(on==null?void 0:on.id)===(qn==null?void 0:qn.id)&&(Wn==null?void 0:Wn.id)===(Ss==null?void 0:Ss.id)){var Dt,lt;return!((on==null?void 0:on.viewType)===Ka.D.Thread&&(qn==null?void 0:qn.viewType)===Ka.D.Thread&&(on==null||(Dt=on.params)===null||Dt===void 0?void 0:Dt.threadId)!==(qn==null||(lt=qn.params)===null||lt===void 0?void 0:lt.threadId))}}return!1}c(Ri,"areViewsSame");function Va(me){let{reducerState:ie,entry:Pe,eventType:We}=me,nt=ie.activeTab,Qe=[...ie.tabOrder];nt||(nt=Ha(),Qe.push(nt));const Dt=ie.tabs[nt]||[];let lt={...ie.tabs};if(lt[nt]=[Pe,...We==="replace"?Dt.slice(1):Dt].slice(0,Pi),!Dt.length){const on=ie.tabOrder.find(Wn=>{var qn;return Ri(Pe,(qn=ie.tabs[Wn])===null||qn===void 0?void 0:qn[0])});on&&nt!==on&&(Qe=ie.tabOrder.filter(Wn=>Wn!==nt),lt=(0,Fa.A)(ie.tabs,nt),nt=on)}return{activeTab:nt,tabs:lt,tabOrder:Qe}}c(Va,"getTabSodaStateFromWindowHistoryEvent");const Li=Si(),bi=(0,Os.vy)({},Li,{persistenceEnabled:!1,storeKey:"tabSoda"}).on(po.nz,(me,ie)=>{let{setAsActive:Pe}=ie;const We=Ha(),nt={...me.tabs,[We]:[]},Qe=[...me.tabOrder],Dt=me.activeTab?Qe.indexOf(me.activeTab):-1;return Qe.splice(Dt+1,0,We),{activeTab:Pe?We:me.activeTab,tabs:nt,tabOrder:Qe}}).on(po.yw,(me,ie)=>({...me,activeTab:ie})).on(po.oT,(me,ie)=>{const{activeTab:Pe,tabs:We,tabOrder:nt}=me;let Qe=Pe;ie===Pe&&(Qe=(0,Di.fe)(Pe,nt));const Dt=[...nt],lt=nt.indexOf(ie);Dt.splice(lt,1);const on={...We};return delete on[ie],{tabs:on,tabOrder:Dt,activeTab:Qe}}).on(po.ez,(me,ie)=>{const Pe=me.tabs[ie]||[],We={...me.tabs,[ie]:[...Pe.slice(1)]};return{...me,tabs:We}}).on(po.Uz,(me,ie)=>({...me,tabOrder:ie})).on(As.y2,(me,ie)=>{let{entry:Pe}=ie;return(0,wa.H)(Pe)?Va({eventType:"push",reducerState:me,entry:Pe}):me}).on(As.HQ,(me,ie)=>{let{entry:Pe}=ie;return(0,wa.H)(Pe)?Va({eventType:"replace",reducerState:me,entry:Pe}):me});var ki=e(6027162153),Ui=e(9087248458),Ni=e(5503876160),Ys=e(9139930183);const Bi={bootedWorkspaces:[],failedToBootWorkspaces:[],needs2FASetup:[],needsToAcceptCustomTOS:[],userNotMemberOfAnyWorkspaceInOrg:[],userRequiresMobileLogin:[],migratingWorkspaces:{},completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[],navigateToUnbootedWorkspace:{},removedWorkspaces:[]},xi="WORKSPACES",ja=16,Wi=(0,Ys.Ay)({},Bi,{storeKey:"workspaces",persistenceEnabled:!0}).on(r.initialize,(me,ie)=>Fi(me,ie)).on(r.setDidBootAllWorkspaces,me=>({...me,didBootAllWorkspaces:!0})).on(r.setWorkspaceOrder,(me,ie)=>Ki(me,ie)).on(r.setWorkspaceBooted,(me,ie)=>wi(me,ie)).on(r.setWorkspaceFailedToBoot,(me,ie)=>Hi(me,ie)).on(r.setWorkspaceNeeds2FASetup,(me,ie)=>Vi(me,ie)).on(r.setWorkspaceNeedsToAcceptCustomTOS,(me,ie)=>ji(me,ie)).on(r.setNavigateToUnbootedWorkspace,(me,ie)=>({...me,navigateToUnbootedWorkspace:ie})).on(r.setWorkspaceIsMigrating,(me,ie)=>Gi(me,ie)).on(r.setWorkspaceMigrationIsComplete,(me,ie)=>zi(me,ie)).on(r.setWorkspaceIsAccessLimited,(me,ie)=>$i(me,ie)).on(r.setUserNotMemberOfAnyWorkspaceInOrg,(me,ie)=>Yi(me,ie)).on(r.setUserRequiresMobileLogin,(me,ie)=>Qi(me,ie)).on(r.addWorkspace,function(me){let{id:ie,meta:Pe}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ie||!Pe)throw new Error("'id' and 'meta' are both required when adding a workspace");if(me.allWorkspaces.includes(ie))return(0,s.Wo)({label:xi}).warn(`Cannot add workspace; it is already present: ${ie}`),me;const{allWorkspaces:We,workspacesMeta:nt}=me;return{...me,allWorkspaces:[...We,ie],workspacesMeta:{...nt,[ie]:Pe}}}).on(r.updateWorkspaceMeta,function(me){let{id:ie,meta:Pe}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{workspacesMeta:We}=me;if(!We[ie])throw new Error(`Cannot update workspace meta for ${ie}; no such team`);return{...me,workspacesMeta:{...We,[ie]:Pe}}}).on(r.internalSetFocusedWorkspaceType,(me,ie)=>({...me,focusedWorkspace:ie,recentlyFocusedWorkspaces:Ji(me.recentlyFocusedWorkspaces,ie)})).on(r.internalRemoveWorkspaceType,(me,ie)=>({...me,allWorkspaces:(0,ki.A)(me.allWorkspaces,ie)})).on(r.addRemovedWorkspace,(me,ie)=>Xi(me,ie));function Fi(me){let{focusedWorkspace:ie,allWorkspaces:Pe,workspacesMeta:We}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(me.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!ie)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!Pe)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(Pe.indexOf(ie)<0)throw new Error(`workspaces-store:initialize ${ie} is not one of the valid workspaces: ${Pe}`);return{...me,focusedWorkspace:ie,allWorkspaces:Pe,workspacesMeta:We,recentlyFocusedWorkspaces:[ie]}}c(Fi,"initializeWorkspacesState");function Ki(me,ie){const Pe=me.allWorkspaces;if((0,Ui.A)(Pe,ie).length!==Pe.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return(0,Te.q9)("orderedTeamIds",ie),{...me,allWorkspaces:ie}}c(Ki,"updateWorkspaceOrder");function wi(me,ie){const Pe=me.bootedWorkspaces.includes(ie)?me.bootedWorkspaces:[...me.bootedWorkspaces,ie];return{...me,bootedWorkspaces:Pe}}c(wi,"updateWorkspaceBooted");function Hi(me,ie){if(!ie)return me;const Pe=me.failedToBootWorkspaces.includes(ie)?me.failedToBootWorkspaces:[...me.failedToBootWorkspaces,ie];return{...me,failedToBootWorkspaces:Pe}}c(Hi,"updateWorkspaceFailedToBoot");function Vi(me,ie){if(!ie)return me;const Pe=me.needs2FASetup.includes(ie)?me.needs2FASetup:[...me.needs2FASetup,ie];return{...me,needs2FASetup:Pe}}c(Vi,"updateWorkspaceNeeds2FASetup");function ji(me,ie){if(!ie)return me;const Pe=me.needsToAcceptCustomTOS.find(We=>{let{teamId:nt}=We;return ie.teamId===nt})?me.needsToAcceptCustomTOS:[...me.needsToAcceptCustomTOS,ie];return{...me,needsToAcceptCustomTOS:Pe}}c(ji,"updateWorkspaceNeedsToAcceptCustomTOS");function Gi(me,ie){let{teamId:Pe,migrationId:We,canViewMigrationStatus:nt}=ie;if(!Pe)return me;const{migratingWorkspaces:Qe}=me;return{...me,migratingWorkspaces:{...Qe,[Pe]:{migrationId:We,canViewMigrationStatus:nt}}}}c(Gi,"updateWorkspaceIsMigrating");function zi(me,ie){if(!ie)return me;const Pe=me.completedMigrationWorkspaces.includes(ie)?me.completedMigrationWorkspaces:[...me.completedMigrationWorkspaces,ie];return{...me,completedMigrationWorkspaces:Pe}}c(zi,"updateWorkspaceMigrationIsComplete");function $i(me,ie){if(!ie)return me;const Pe=me.accessLimitedWorkspaces.includes(ie)?me.accessLimitedWorkspaces:[...me.accessLimitedWorkspaces,ie];return{...me,accessLimitedWorkspaces:Pe}}c($i,"updateWorkspaceIsAccessLimited");function Yi(me,ie){if(!ie)return me;const Pe=me.userNotMemberOfAnyWorkspaceInOrg.includes(ie)?me.userNotMemberOfAnyWorkspaceInOrg:[...me.userNotMemberOfAnyWorkspaceInOrg,ie];return{...me,userNotMemberOfAnyWorkspaceInOrg:Pe}}c(Yi,"updateUserNotMemberOfAnyWorkspaceInOrg");function Qi(me,ie){if(!ie)return me;const Pe=me.userRequiresMobileLogin.includes(ie)?me.userRequiresMobileLogin:[...me.userRequiresMobileLogin,ie];return{...me,userRequiresMobileLogin:Pe}}c(Qi,"updateUserRequiresMobileLogin");function Ji(me,ie){const Pe=[ie,...me.filter(We=>We!==ie)];return Pe.length>ja?(0,Ni.A)(Pe,ja):Pe}c(Ji,"updateRecentlyFocusedWorkspaces");function Xi(me,ie){if(!ie)return me;const Pe=me.removedWorkspaces.includes(ie)?me.removedWorkspaces:[...me.removedWorkspaces,ie];return{...me,removedWorkspaces:Pe}}c(Xi,"updateRemovedWorkspaces");var Zi=e(7798793495),qi=e(8749931423),el=e(7206394193),tl=e(773865333),nl=e(7156104699),sl=e(8333842125),ol=e(582577127),al=e(2732935554),rl=e(3034787354);let Ga;try{var Jo;Ga=(Jo=(0,Te.W6)(Xe))!==null&&Jo!==void 0?Jo:void 0}catch{}const il={zoom:Ga},ll=(0,Ys.Ay)({},il,{storeKey:"bbmSettings",persistenceEnabled:!1}).on(at,(me,ie)=>({...me,zoom:ie}));var cl=e(4614661813);const Xo=(0,$e.Ay)("sets the client side effect map on the store");Xo.meta={name:"createAction",key:"createActionsetClientSideEffectsMap",description:"sets the client side effect map on the store"};const dl={clientSideEffectsMap:{}},ul=(0,Ys.Ay)({},dl,{storeKey:"clientSideEffects",persistenceEnabled:!1}).on(Xo,(me,ie)=>({...me,clientSideEffectsMap:ie}));var _l=e(5923036663),ml=e(6168781067),hl=e(7902571278),vl=e(56562029);const fl={isHuddlesEnabled:!1,channelToJoinCredentials:{},showDiscoveryBanner:!1,screenshareActivePanel:0,songPlaying:void 0,jukeboxLocalVolume:1,canRenderActiveInviteCardInSidebar:!0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1,unreadInvites:[],huddleJoinPreviewChannelId:void 0},El=(0,Ys.Ay)({},fl,{storeKey:"clientHuddles",persistenceEnabled:!1}).on(X.VU,(me,ie)=>me.isHuddlesEnabled?me:{...me,isHuddlesEnabled:ie}).on(X.xf,(me,ie)=>({...me,mostRecentHuddle:ie})).on(X.Rh,(me,ie)=>{const{mostRecentHuddle:Pe}=me;if(!Pe||ie.teamId&&ie.teamId!==Pe.teamId||ie.channelId&&ie.channelId!==Pe.channelId)return me;const We={...me,mostRecentHuddle:{...Pe,...ie}},nt=We.mostRecentHuddle;return nt&&(0,s.Wo)().info(uo.o7,`updateActiveHuddleReference huddleState ${nt.huddleState}, substate ${nt.huddleSubState}, optimisticState ${nt.optimisticHuddleState}`),We}).on(X.Jc,(me,ie)=>{const{mostRecentHuddle:Pe}=me;return!Pe||ie===Pe.channelId?me:{...me,mostRecentHuddle:{...Pe,channelId:ie}}}).on(X.hB,(me,ie)=>({...me,activeInvite:ie,unreadInvites:[...me.unreadInvites,{invite:ie,receivedTimestampMs:Date.now()}]})).on(X.fP,(me,ie)=>{let{teamId:Pe,markBeforeMs:We}=ie;const nt=me.unreadInvites.filter(Qe=>Qe.invite.teamId!==Pe||Qe.receivedTimestampMs>We);return me.unreadInvites.length===nt.length?me:{...me,unreadInvites:nt}}).on(X.u8,(me,ie)=>{var Pe;return{...me,unreadInvites:me.unreadInvites.filter(We=>We.invite.channelId!==ie),activeInvite:((Pe=me.activeInvite)===null||Pe===void 0?void 0:Pe.channelId)!==ie?me.activeInvite:void 0}}).on(X.Ko,(me,ie)=>me.forceMiniPanelVisible===ie?me:{...me,forceMiniPanelVisible:ie}).on(X.Yi,(me,ie)=>{let{channelId:Pe,joinCredentials:We,expiry:nt,fromInvite:Qe}=ie;var Dt;if(!Pe||!We)return me;const lt=me.channelToJoinCredentials;lt[Pe]={credentials:We,expiry:nt,fromInvite:Qe};const on=(Dt=me.activeInvite)===null||Dt===void 0?void 0:Dt.teamId;return on&&(0,ro.Cy)({state:(0,_.getStateByTeamId)(on)}).count(Ls.ir),{...me,channelToJoinCredentials:lt}}).on(X.WB,(me,ie)=>{let{channelId:Pe}=ie;if(!Pe)return me;if(me.channelToJoinCredentials[Pe]){var We;const nt=(We=me.activeInvite)===null||We===void 0?void 0:We.teamId;nt&&(0,ro.Cy)({state:(0,_.getStateByTeamId)(nt)}).count(Ls.sQ)}return{...me,channelToJoinCredentials:(0,Fa.A)(me.channelToJoinCredentials,[Pe])}}).on(X.aO,(me,ie)=>me.showDiscoveryBanner===ie?me:{...me,showDiscoveryBanner:ie}).on(X.Ag,(me,ie)=>me.isLoungeMusicPlaying===ie?me:{...me,isLoungeMusicPlaying:!!ie}).on(X._U,(me,ie)=>me.lastStartTs===ie?me:{...me,lastStartTs:ie}).on(X.bV,(me,ie)=>me.lastEndTs===ie?me:{...me,lastEndTs:ie}).on(X.qr,(me,ie)=>me.lastDurationTs===ie?me:{...me,lastDurationTs:ie}).on(X.Gx,(me,ie)=>me.screenshareActivePanel===ie?me:{...me,screenshareActivePanel:ie}).on(X.cx,me=>({...me,screenshareActivePanel:0,songPlaying:void 0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1,huddleJoinPreviewChannelId:void 0})).on(X._u,(me,ie)=>{let{song:Pe}=ie;return me.songPlaying===(Pe==null?void 0:Pe.key)?me:{...me,songPlaying:Pe==null?void 0:Pe.key}}).on(X.nw,(me,ie)=>me.canRenderActiveInviteCardInSidebar===ie?me:{...me,canRenderActiveInviteCardInSidebar:ie}).on(X.o9,(me,ie)=>me.isHuddleWindowFocused===ie?me:{...me,isHuddleWindowFocused:ie}).on(X.TK,(me,ie)=>me.isHuddleWindowOpen===ie?me:{...me,isHuddleWindowOpen:ie}).on(X.kg,(me,ie)=>me.isAudioOnlyModeEnabled===ie?me:{...me,isAudioOnlyModeEnabled:ie}).on(X.Hg,(me,ie)=>me.wasCameraEnabledWhenAudioOnlyModeWasActivated===ie?me:{...me,wasCameraEnabledWhenAudioOnlyModeWasActivated:ie}).on(X.t2,(me,ie)=>me.isHuddleMiniPlayerHidden===ie?me:{...me,isHuddleMiniPlayerHidden:!!ie}).on(X.og,(me,ie)=>me.wasJoinedFromPrejoin===ie?me:{...me,wasJoinedFromPrejoin:!!ie}).on(X._o,(me,ie)=>{let{channelId:Pe}=ie;return me.huddleJoinPreviewChannelId===Pe?me:{...me,huddleJoinPreviewChannelId:Pe}}),Kl=100,za="client-ia-history",pl=[...Object.values(ia.mH)||[]];var bo=e(1521690892);const gl=c(()=>{try{const me=localStorage.getItem(za);return me?JSON.parse(me):[]}catch(me){return(0,s.Wo)().error("Failed to read IA history from storage",me),[]}},"readStackFromStorage"),ko=c(me=>{try{localStorage.setItem(za,JSON.stringify(me))}catch(ie){(0,s.Wo)().error("Failed to write IA history to storage",ie)}},"writeStackToStorage"),Al=(0,Ys.Ay)({},{stack:gl()},{storeKey:"iaHistory",persistenceEnabled:!1}).on(bo.nb,(me,ie)=>{if(!ie||pl.includes(ie==null?void 0:ie.primaryView))return me;const Pe=1e3,We=[ie].concat(me.stack).slice(0,Pe);return window.setTimeout(()=>ko(We),0),{stack:We}}).on(bo.JG,(me,ie)=>{const Pe=me.stack.indexOf(ie);if(Pe===-1)return me;const We=me.stack.slice();return We.splice(Pe,1),window.setTimeout(()=>ko(We),0),{stack:We}}).on(bo.Si,me=>{if(!me.stack)return me;const ie=me.stack.slice(0,1);return window.setTimeout(()=>ko(ie),0),{stack:ie}}).on(bo.kM,()=>{const me=[];return ko(me),{stack:me}}),yl=!0,$a=(0,Ys.Ay)({},yl,{storeKey:"isClient",persistenceEnabled:!1});$a.meta={name:"createReducer",key:"createReducerisClientReducer"};const Tl=$a;let Ya;try{var Zo;Ya=(Zo=(0,Te.W6)(de.Vb))!==null&&Zo!==void 0?Zo:void 0}catch{}let Qa;try{var qo;Qa=(qo=(0,Te.W6)(de._J))!==null&&qo!==void 0?qo:void 0}catch{}let Ja;try{var ea;Ja=(ea=(0,Te.W6)(de.UY))!==null&&ea!==void 0?ea:void 0}catch{}const Il={invertedSidebar:Ya,peeksEnabledOnMouseEnter:Qa,zoom:Ja},Cl=(0,Ys.Ay)({},Il,{storeKey:"nonBBMSettings",persistenceEnabled:!1}).on(w.p$,(me,ie)=>({...me,invertedSidebar:ie})).on(w.rB,(me,ie)=>({...me,peeksEnabledOnMouseEnter:ie})).on(w.x8,(me,ie)=>({...me,zoom:ie}));var Ml=e(1838435986),Ol=e(3180420025),Uo=e(1302213854);const Dl={shouldLogAppBootMetrics:!0,shouldLogTeamSwitchMetrics:!1,shouldLogTTVMetrics:!0,shouldLogTTUMetrics:!0},Pl=(0,Ys.Ay)({},Dl,{storeKey:"telemetry",persistenceEnabled:!0}).on(Uo.C7,(me,ie)=>({...me,shouldLogAppBootMetrics:ie})).on(Uo.Mb,(me,ie)=>({...me,shouldLogTeamSwitchMetrics:ie})).on(Uo.Ln,(me,ie)=>({...me,shouldLogTTVMetrics:ie})).on(Uo.UM,(me,ie)=>({...me,shouldLogTTUMetrics:ie}));var ta=e(2696160384);const Xa={isDocked:!1,miniPlayerConfig:{fileId:""}},Sl=(0,Ys.Ay)({},Xa,{storeKey:"videoClips",persistenceEnabled:!1}).on(ta.FI,(me,ie)=>({...me,isDocked:ie})).on(ta.D_,(me,ie)=>{let{fileId:Pe,teamId:We,mediaId:nt,channelId:Qe,threadTs:Dt,timeElapsed:lt,isPlaying:on}=ie;return{...me,miniPlayerConfig:{fileId:Pe,teamId:We,mediaId:nt,channelId:Qe,threadTs:Dt,timeElapsed:lt,isPlaying:on}}}).on(ta.Sr,me=>({...me,...Xa}));var Rl=e(9813790040),Ll=e(4256476552);function Za(){let{extraMiddlewares:me=[],customEnhancers:ie=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Pe=(0,sl.A)({teamOrEnterpriseId:"client",middlewares:[...me,el.A,n.P,tl.A,Bs,Rn,Ei,Mi,an,tn,Es,vs,yn,nl.N,fi],customEnhancers:ie}),We=(0,qi.A)({workspaces:Wi,window:Ll.A,telemetry:Pl,connectivity:ml.A,accessibility:rl.A,accessibilityPersistent:al.A,desktop:hl.A,clientTheme:_l.A,iaHistory:Al,mainWindowHistory:Lt,isClient:Tl,isState:Zi.G,viewLayout:Rl.A,noop:Ml.A,clientHuddles:El,clientSideEffects:ul,recents:Rs,overlays:Ol.y,tabSoda:bi,fullscreen:vl.G,bbm:cl.Y,videoClips:Sl,nonBBMSettings:Cl,bbmSettings:ll});return(0,t.Yl)(We,Pe)}c(Za,"createClientStore");function bl(){const me=(0,_.getClientStoreInstance)();if(me)return(0,s.Wo)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),me;const ie=Za();(0,_.setClientStoreInstance)(ie);const{clientSideEffectsMap:Pe,sideEffectsMap:We}=(0,ol.g)(qt);if(Object.keys(We).length)throw new Error("Passed non-client side effects into client store. This is a programming error and the app will not work properly.");return ie.dispatch(Xo(Pe)),ie}c(bl,"configureClientStore");const jl={createClientStore:Za}},3803432550:(x,A,e)=>{"use strict";e.d(A,{x:()=>d});var t=e(8148939499),n=e(6508028729),s=e(4423055085),i=e(4496040127),l=e(280697554),o=e(1535672935),a=e(9012396182),r=e(6533394955);function d(_){if(!_||(0,r.getClientStoreInstance)())return;const v=(0,l.A)(),h=(0,i.VA)()?(0,t.A)():[_],f=(0,n.A)();v.dispatch((0,o.initialize)({focusedWorkspace:_,allWorkspaces:h,workspacesMeta:f})),u(v)}c(d,"initializeClientStore");function u(_){(0,s.ul)("clientStore",_),(0,s.zv)("teamIds",()=>{const h=_.getState();return a.getAllWorkspaces(h)}),(0,s.zv)("activeTeam",()=>{const h=_.getState(),f=a.getFocusedWorkspace(h);return window.slackDebug[f]}),(0,s.zv)("activeTeamId",()=>{const h=_.getState();return a.getFocusedWorkspace(h)}),(0,s.zv)("activeEnterprise",()=>{var h,f;const I=_.getState(),p=(h=a.getWorkspacesMeta(I))===null||h===void 0||(f=h[a.getFocusedWorkspace(I)])===null||f===void 0?void 0:f.enterprise_id;return window.slackDebug[p]});const v={};Object.keys(o).forEach(h=>{v[h]=function(){for(var f=arguments.length,I=new Array(f),p=0;p<f;p++)I[p]=arguments[p];return _.dispatch(o[h](...I))}}),Object.keys(a).forEach(h=>{v[h]=function(){for(var f=arguments.length,I=new Array(f),p=0;p<f;p++)I[p]=arguments[p];return a[h](_.getState(),...I)}}),(0,s.ul)("clientStore.workspaces",v)}c(u,"setupClientStoreDebugger")},2870224675:(x,A,e)=>{"use strict";e.d(A,{Uz:()=>o,ez:()=>s,nz:()=>n,oT:()=>l,yw:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Adds a new emtpy tab-soda tab");n.meta={name:"createAction",key:"createActiontabSodaAddNewTab",description:"Adds a new emtpy tab-soda tab"};const s=(0,t.Ay)("Removes the recent history entry from a tab soda tab");s.meta={name:"createAction",key:"createActiontabSodaPopHistoryForTab",description:"Removes the recent history entry from a tab soda tab"};const i=(0,t.Ay)("Select a tab by id");i.meta={name:"createAction",key:"createActiontabSodaSelectTab",description:"Select a tab by id"};const l=(0,t.Ay)("Remove a tab soda tab");l.meta={name:"createAction",key:"createActiontabSodaRemoveTab",description:"Remove a tab soda tab"};const o=(0,t.Ay)("Re-order tab soda tabs");o.meta={name:"createAction",key:"createActiontabSodaReorderTabs",description:"Re-order tab soda tabs"}},9932860381:(x,A,e)=>{"use strict";e.d(A,{Fp:()=>o,Xy:()=>l,fe:()=>i});var t=e(6471801899),n=e(8040098042),s=e(2960290117);function i(a,r){const d=r.indexOf(a),u=d<r.length-1?d+1:d-1;return u>=0?r[u]:void 0}c(i,"tabSodaGetNextActiveTab");function l(a){return(0,n.A)(a)||a==="thread"}c(l,"canOpenInTabSodaTab");function o(a){return(0,s.Ay)(a)||(0,t.pI)(a)||(0,t.or)(a)||(0,n.A)(a)||a==="thread"||a==="comment_thread"}c(o,"tabSodaCanViewBeEjected")},7176966205:(x,A,e)=>{"use strict";e.d(A,{$:()=>h});var t=e(5267010247),n=e(8822892075),s=e(395285811),i=e(2647703359),l=e(3634593162),o=e(3110884894),a=e(2823938397),r=e(8040098042),d=e(2870224675),u=e(6304789565),_=e(6533394955),v=e(937317117);const h=(0,u.Ay)("Opens a view in a new tab",function(f,I){let{viewId:p,params:y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const g=I(),E=(0,d.nz)({setAsActive:!0});if(!p)return(0,_.dispatchForClientStore)(E);if(p&&(0,r.A)(p))return(0,_.dispatchForClientStore)(E),f((0,t.o)((0,n.pr)(p)));if(p==="thread"&&(y!=null&&y.threadId)){const{channelId:M,threadTs:T}=(0,o.Sb)(y==null?void 0:y.threadId);if(M&&T){if((0,_.dispatchForClientStore)(E),(0,s.OR)(g,M)){const P=(0,l.l)(M),R=(0,v.Lp)(g,P);if(R&&(0,a.uz)(R)&&(0,i.DQ)(R))return f((0,t.o)((0,n.m3)({channelId:M,threadTs:T})))}const{replyTs:C,highlightRoot:m,dangerouslyOverrideRouting:O}=y;return f((0,t.o)((0,n.UX)({channelId:M,threadTs:T,replyTs:C,highlightRoot:m,dangerouslyOverrideRouting:O})))}}});h.meta={name:"createThunk",key:"createThunkmaybeOpenInTabSodaTab",description:"Opens a view in a new tab"}},4326266690:(x,A,e)=>{"use strict";e.d(A,{B:()=>l,fK:()=>i,lw:()=>a,ud:()=>o});var t=e(9932860381),n=e(2384831516),s=e(3193155968);const i=(0,n.Mz)(r=>r.tabSoda);i.meta={name:"createSelector",key:"createSelectorgetTabSoda",description:r=>r.tabSoda};const l=(0,n.Mz)(r=>{const d=i(r);return d.activeTab?d.tabs[d.activeTab]:[]});l.meta={name:"createSelector",key:"createSelectortabSodaGetRecentsForActiveTab",description:r=>{const d=i(r);return d.activeTab?d.tabs[d.activeTab]:[]}};const o=(0,n.Mz)(r=>{const d=i(r);return d.activeTab?d.tabs[d.activeTab].length<2:!1});o.meta={name:"createSelector",key:"createSelectortabSodaIsBackDisabledForActiveTab",description:r=>{const d=i(r);return d.activeTab?d.tabs[d.activeTab].length<2:!1}};const a=(0,n.Mz)((r,d)=>{var u,_,v;const f=(u=i(r).tabs[d])===null||u===void 0?void 0:u[0],I=f==null?void 0:f.teamId;if(!f||!I)return!1;const p=f==null?void 0:f[s.jf],y=f==null||(_=f[p])===null||_===void 0||(v=_[s.mq.Primary])===null||v===void 0?void 0:v.id;return!!y&&(0,t.Fp)(y)});a.meta={name:"createSelector",key:"createSelectortabSodaCanEjectTab",description:(r,d)=>{var u,_,v;const f=(u=i(r).tabs[d])===null||u===void 0?void 0:u[0],I=f==null?void 0:f.teamId;if(!f||!I)return!1;const p=f==null?void 0:f[s.jf],y=f==null||(_=f[p])===null||_===void 0||(v=_[s.mq.Primary])===null||v===void 0?void 0:v.id;return!!y&&(0,t.Fp)(y)}}},8620339321:(x,A,e)=>{"use strict";e.d(A,{UN:()=>v,oX:()=>f,wm:()=>h});var t=e(4338953270),n=e(109860581),s=e(2870224675),i=e(9932860381),l=e(6304789565),o=e(6533394955),a=e(9108490430),r=e(3193155968),d=e(9012396182),u=e(2554594353);const _=(0,l.Ay)("Update currently visible viewset as part of TabSoda tab switching",(I,p,y)=>{(0,o.dispatchForTeamId)(y.teamId,(0,a.cQ)(y)),d.getFocusedWorkspace&&u.b&&(0,d.getFocusedWorkspace)(p())!==y.teamId&&I((0,u.b)({teamId:y.teamId,fromNavigation:!0}));const{tabSoda:g}=p(),E=g.activeTab;if(E){const M=g.tabs[E][0],T=M[r.jf],D=M[T],C=y[r.jf],m=y[C];if(!m)return;(0,o.dispatchForTeamId)(y.teamId,(0,t.C)({prevViewSet:D,prevTab:T,nextViewSet:m,nextTab:C,windowId:r.N2,navigateParams:{},triggerType:n.w.HISTORY_NAVIGATION}))}});_.meta={name:"createThunk",key:"createThunkupdateVisibleView",description:"Update currently visible viewset as part of TabSoda tab switching"};const v=(0,l.Ay)("Switch current TabSoda tab",(I,p,y)=>{let{tabId:g}=y;const{tabSoda:E}=p();if(E.activeTab===g)return;const M=E.tabs[g][0];I(_(M)),I((0,s.yw)(g))});v.meta={name:"createThunk",key:"createThunktabSodaSwitchTab",description:"Switch current TabSoda tab"};const h=(0,l.Ay)("Close active TabSoda tab and switch to the nearest open tab",(I,p,y)=>{let{tabId:g}=y;const{tabSoda:E}=p(),M=E.activeTab,T=(0,i.fe)(M,E.tabOrder);if(g===M&&T){const D=E.tabs[T][0];I(_(D))}I((0,s.oT)(g))});h.meta={name:"createThunk",key:"createThunktabSodaCloseTab",description:"Close active TabSoda tab and switch to the nearest open tab"};const f=(0,l.Ay)("Go back in history in a currently active TabSoda tab",(I,p)=>{const{tabSoda:y}=p(),g=y.activeTab;if(y.tabs[g].length<2)return;const E=y.tabs[g][1];I(_(E)),I((0,s.ez)(g))});f.meta={name:"createThunk",key:"createThunktabSodaGoBackInActiveTab",description:"Go back in history in a currently active TabSoda tab"}},4766735965:(x,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(2664504268),n=e(9121100949),s=e(2527782504),i=e(2495064448),l=e(2689960678),o=e(735940183),a=e(4496040127),r=e(9012396182),d=e(6304789565),u=e(6533394955),_=e(8439865561),v=e(1201539379),h=e(6290537170),f=e(9733150292);const I=new o.Ay("team_picker"),p=(0,d.Ay)("Sets whether or not the protype full rail workspace switcher is showing",function(g,E){let{shouldTransitionFocus:M=!1,shouldAnnounceStateChange:T=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=arguments.length>3?arguments[3]:void 0;const C=E();if(!(0,a.VA)())return;const m=(0,u.getClientStoreInstance)().getState();var O;if(((O=(0,r.getAllWorkspaces)(m))!==null&&O!==void 0?O:l.Ml).length<=1)return;const R=(0,h.v8)(C),L=!R;(0,f.q9)(n.WU,L),g((0,v.mV)(L)),(0,u.dispatchForClientStore)((0,v.mV)(L));const V=I.t("Workspaces tablist expanded"),B=I.t("Workspaces tablist collapsed");if(T&&g((0,_.rl)({message:R?B:V,uuid:(0,t.A)()})),!M)return;const{transitionFocusTo:K}=(0,i.$P)(E(),D),b=R?s.Ay.WORKSPACE_SWITCHER_MENU_BUTTON:s.Ay.WORKSPACE_SWITCHER_TAB_LIST;K({focusKey:b})});p.meta={name:"createThunk",key:"createThunktoggleWorkspaceSwitcherVisibility",description:"Sets whether or not the protype full rail workspace switcher is showing"};const y=p},9143148823:(x,A,e)=>{"use strict";e.d(A,{Ay:()=>s,c:()=>n});let t=null;function n(){return t}c(n,"getLastTeamSwitchTimestamp");const s=c(l=>{let{prevTeamId:o,nextTeamId:a,navigationTimestamp:r}=l;return o===a||!r||(t=r),Promise.resolve()},"__WEBPACK_DEFAULT_EXPORT__");Object.defineProperty({lastTeamSwitchTimestamp:null},"lastTeamSwitchTimestamp",{get:()=>t,set:l=>{t=l}})},859310680:(x,A,e)=>{"use strict";e.d(A,{go:()=>Z,xy:()=>H});var t=e(8426925643),n=e(8073631078),s=e(9733150292),i=e(4588514760),l=e(4423055085),o=e(9421999304),a=e(9681594967),r=e(2325478352),d=e(6917917245),u=e(7770551414),_=e(6470070112),v=e(796111729),h=e(2250002584),f=e(5057176955),I=e(264208541),p=e(9012396182),y=e(8847766420),g=e(5583430912),E=e(6533394955),M=e(9101533895),T=e(7765212398),D=e(4761125736),C=e(8276911661),m=e(7115106069),O=e(8233775522);function P(){var ee,j;return{hardware_concurrency:(ee=window.navigator)===null||ee===void 0?void 0:ee.hardwareConcurrency,device_memory:(j=window.navigator)===null||j===void 0?void 0:j.deviceMemory}}c(P,"getDeviceStats");function R(){const ee=localStorage==null?void 0:localStorage.getItem("client_metrics_client_redux_size"),j=(0,I.Hn)(),ge=(0,I.Ey)(),ne=j&&ge?(j/ge).toPrecision(4):null;return{total_client_redux_size:ee,js_heap_used:j,js_heap_total:ge,js_heap_used_percentage:ne}}c(R,"getPerfMemoryStats");function L(){const ee=localStorage==null?void 0:localStorage.getItem("client_metrics_app_stats");if(!ee)return{};try{return JSON.parse(ee)}catch(j){return(0,v.Wo)().warn("Error parsing appStats in localStorage:",ee,j),{}}}c(L,"getDesktopAppStats");function V(){return{...(0,t.JP)(),num_started_sockets:(0,u.eK)(),object_store_redux_group:(0,d.B9)(r.Wv)}}c(V,"getClientStateTags");function B(ee,j){const ge=j.startSpan("add_tags:channels_info",{tags:{_auto_analytics:""}}),ne=Object.values((0,M.DM)(ee)).length,ue=Object.values((0,M.h3)(ee)).length,he=Object.values((0,M._B)(ee)).length,be=Object.values((0,M.FS)(ee)).length;return ge.close(),{num_channels_in_redux:ne,num_all_channels_user_is_in:ue,num_dms_user_is_in:he,num_group_dms_user_is_in:be}}c(B,"getChannelInfoTags");function K(ee,j){const ge=j.startSpan("add_tags:drafts_info",{tags:{_auto_analytics:""}}),ne=Object.keys((0,T.Hw)(ee)||{}).length,ue=(0,f.sZ)((0,T.my)(ee));return ge.close(),{num_drafts:ne,drafts_store_size:ue}}c(K,"getDraftsInfoTags");function b(ee){return{user_locale:(0,o.JK)({teamOrEnterpriseId:(0,y.JY)(ee)})}}c(b,"getLocaleTags");function S(ee){return{active_collab_instance_count:(0,g.Ui)(),open_quip_embed_instance_count:(0,m.oj)(ee).length,canvas_child_window_count:(0,i.CJ)()}}c(S,"getCanvasTags");const G=c(ee=>{const j=["selector_memo"],ge={};return j.forEach(ue=>{const he=(0,D._Z)(ee,ue,!1);he&&(ge[ue]=he)}),[...Object.keys(n.nD)].forEach(ue=>{const he=(0,d.B9)(ue);he!==d.dw.NoGroup&&(ge[ue]=he)}),ge},"getExperimentTagsForTraces"),H=c((ee,j)=>{const ge=j??[],ne={},ue=(0,D.Vs)(ee),he=Date.now()/1e3,be=60*60*24*7*4;for(const[xe,Le]of Object.entries(ue)){const{trigger:fe,schedule_ts:se}=Le;(ge.includes(xe)||fe&&se&&fe!=="finished"&&fe!=="force_debug"&&se>he-be)&&(ne[xe]=Le.group)}return ne},"getExperimentTags");function U(ee){return{num_members_in_redux:(0,C.I_)(ee).length}}c(U,"getMembersTags");function F(ee){const j=(0,s.W6)("lastColdBootTs"),ge=(0,O.pp)(ee);return{last_cold_boot_ts:j,boot_type:ge}}c(F,"getConfigTags");function Y(){return{is_in_active_huddle:(0,_.NZ)()}}c(Y,"getHuddleTags");function Z(ee){const j=(0,E.getStateForClientStore)();if(!j)return{};const ge=ee??(0,p.getFocusedWorkspace)(j),ne=(0,E.getStateByTeamId)(ge),ue=(0,h.F)(),he=ue.createTrace({traceName:"add_tags:performance_tracing_tags"}),be=(0,t.Kh)(ge),xe=V(),Le=B(ne,he),fe=K(ne,he),se=P(),Q=R(),k=L(),N=b(ne),$=U(ne),W=F(ne),q=a.qV.getTraceTags(),re=G(ne),le=S(ne),Ae=Y(),Te={...be,...xe,...Le,...fe,...se,...Q,...k,...N,...$,...W,...q,...re,...le,...Ae};return ue.reportTrace(he),Te}c(Z,"getPerformanceTracingTags"),(0,l.zv)("performanceTracingTags",Z)},3614984351:(x,A,e)=>{"use strict";e.d(A,{A:()=>Ve});var t=e(3134334389),n=e(6422693406),s=e(9733150292),i=e(4979734995),l=e(8157829725),o=e(581167618),a=e(9539184071),r=e(2308565927),d=e(6084388622),u=e(735940183);const _=new u.Ay("sign_in");function v(Be){const{isSSB:Ke,isSSBSignIn:Re,hasPromoOffer:Fe,shouldRedirect:Ie,redirectURL:ze,loggedInTeams:qe,entryPoint:st=""}=Be;return t.createElement("div",{className:"align_center","data-qa":"signedin_workspaces"},!Fe&&!Ke&&t.createElement("p",{className:"small_bottom_margin"},_.t("You're already signed in to {loggedInTeams, plural, =1 {this workspace} other {these workspaces}}:",{loggedInTeams:qe})),t.createElement("p",{className:"col span_4_of_6 margin_auto float_none"},qe.map((ut,tt)=>t.createElement(d.z9,{key:ut.id,"data-qa":`signedin_workspace_link_${tt+1}`,className:"team-signin-link small_margin","data-team-id":ut.id,autoClogProps:{elementName:"team_domain",elementValue:ut.id.toString(),entryPoint:st,onClick:{enableClogAction:!0}},href:Re?`${ut.url}ssb/signin_redirect`:`${ut.url}${Ie?`?redir=${ze}`:""}`,"aria-label":_.t("Go to {teamName} on Slack",{teamName:ut.name}),type:"outline"},ut.name))))}c(v,"SignedInWorkspaces");var h=e(1224315998),f=e(4481313819),I=e(8739505998),p=e(1610251172),y=e(6968387112),g;(function(Be){Be.INVALID_CODE="invalid_pin",Be.RATE_LIMITED="ratelimited",Be.SMS_RATE_LIMITED="two_factor_sms_rate_limited",Be.TOO_MANY_ATTEMPTS="two_factor_too_many_attempts",Be.INTERNAL_ERROR="internal_error"})(g||(g={}));var E;(function(Be){Be.SMS="sms",Be.APP="app",Be.EMAIL="email",Be.EMERGENCY="emergency"})(E||(E={}));var M;(function(Be){Be.REQUEST_CODE="request_primary",Be.REQUEST_BACKUP="request_backup",Be.SUBMIT_PRIMARY="submit_primary",Be.SUBMIT_BACKUP="submit_backup",Be.SUBMIT_EMERGENCY="submit_emergency"})(M||(M={}));const T=new u.Ay("sign_in"),D={elementName:"help_button",onClick:{enableClogAction:!0}},C=c(Be=>{const Ke=Be.action===M.REQUEST_BACKUP||Be.action===M.SUBMIT_BACKUP;return Ke&&Be.twoFactorBackupType===E.APP||!Ke&&Be.twoFactorType===E.APP},"currentMethodIsApp"),m=c(Be=>C(Be)?T.t("Problems with your authentication app?"):T.t("Problems with your code?"),"renderProblemsString"),O=c(Be=>C(Be)?t.createElement("div",{className:"subtle_silver small medium_top_margin"},t.createElement("p",{className:"no_bottom_margin"},T.t("Check your authentication app for your code.")),t.createElement("p",null,T.rt("<a>Having trouble finding your code?</a>",null,Ke=>{let{tag:Re,text:Fe}=Ke;return Re==="a"?t.createElement(I.A,{href:`https://${(0,y.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},Fe):null})),t.createElement("p",null,T.rt("If your app is unavailable, use a <a>backup code</a>.",null,Ke=>{let{tag:Re,text:Fe}=Ke;return Re==="a"?t.createElement(I.A,{href:`https://${(0,y.qF)()}/help/articles/204509068#troubleshoot-2fa`,target:"_blank"},Fe):null}))):t.createElement("p",{className:"align_left subtle_silver small"},T.rt("You can also try a backup code, if you have one. For other issues, read more about <a>two-factor authentication</a>, or contact your workspace administrator for help.",null,Ke=>{let{tag:Re,text:Fe}=Ke;return Re==="a"?t.createElement(I.A,{href:`https://${(0,y.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},Fe):null})),"renderProblems");O.displayName="renderProblems";const P=c(Be=>{const[Ke,Re]=(0,t.useState)(!1);return t.createElement("div",{className:"p-enter-code__help_button"},t.createElement(I.A,{tabIndex:0,className:"p-enter-code__get_help_link",onClick:()=>Re(!Ke),autoClogProps:D},t.createElement(p.A,{type:"question-circle"})," ",m(Be)),Ke&&t.createElement("div",{className:"send_code_block"},Be.children,t.createElement("div",{className:"col span_4_of_6 float_none margin_auto"},t.createElement("hr",{className:"medium_bottom_margin"}),O(Be))))},"GetHelpButton");P.displayName="GetHelpButton";var R=e(9867500491),L=e(5255740490),V=e(8646591923),B=e(219228829),K=e(3700949338);function b(){return b=Object.assign||function(Be){for(var Ke=1;Ke<arguments.length;Ke++){var Re=arguments[Ke];for(var Fe in Re)Object.prototype.hasOwnProperty.call(Re,Fe)&&(Be[Fe]=Re[Fe])}return Be},b.apply(this,arguments)}c(b,"_extends");let S=c(class extends t.Component{render(){const{ariaDescribedBy:Ke}=this.props;return t.createElement("div",{className:(0,L.A)("two_factor_input_item",{focused:this.props.hasFocus})},t.createElement("input",{autoComplete:this.props.autocomplete,ref:this.props.refToForward,type:"text",inputMode:"numeric",pattern:"\\d*",value:this.props.value,"aria-disabled":this.props.disabled,disabled:this.props.disabled,maxLength:1,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onPaste:this.onPaste,"aria-label":this.props.ariaLabel,"aria-describedby":Ke}))}constructor(...Ke){super(...Ke),this.onKeyDown=Re=>{switch(Re.keyCode){case V.G_:{Re.currentTarget.value||this.props.moveLeft();return}case V.UQ:return Re.preventDefault(),this.props.moveLeft();case V.LE:return Re.preventDefault(),this.props.moveRight();default:break}},this.onKeyPress=Re=>{!(0,K.A)(Re.which)&&Re.charCode&&!(0,B.A)(Re)&&Re.preventDefault()},this.onChange=Re=>{const Fe=Re.target.value;(/^[0-9]$/.test(Fe)||Fe==="")&&this.props.onChange(Fe)},this.onPaste=Re=>{Re.preventDefault();const Fe=window.clipboardData||Re.clipboardData,Ie=Fe.getData("text")||Fe.getData("text/plain"),ze=/\D/g,qe=Ie.replace(ze,"");this.props.onPaste(qe)}}},"TwoFactorDigitInput");S.displayName="TwoFactorDigitInput";const G=t.forwardRef((Be,Ke)=>t.createElement(S,b({},Be,{refToForward:Ke}))),H=new u.Ay("team_creation");let U=c(class extends t.Component{focusInput(Ke){const Re=this.inputRefs[Ke];Re!=null&&Re.current&&Re.current.focus()}moveLeft(Ke){Ke<=0||this.focusInput(Ke-1)}moveRight(Ke){Ke>=this.state.values.length-1||this.focusInput(Ke+1)}isComplete(Ke){return!Ke.some(Re=>!Re)}clear(){this.setState(Ke=>({values:Ke.values.map(()=>""),focusedInputIndex:0})),this.focusInput(0)}onChange(Ke,Re){const Fe=this.state.values.slice();Fe[Ke]=Re,this.setState(()=>({values:Fe}),()=>{Re&&!this.isComplete(this.state.values)&&this.moveRight(Ke)})}componentDidUpdate(Ke,Re){var Fe;if(this.state.focusedInputIndex!==-1&&document.activeElement!==((Fe=this.inputRefs[this.state.focusedInputIndex])===null||Fe===void 0?void 0:Fe.current)&&this.focusInput(this.state.focusedInputIndex),this.props.codeLength!==Ke.codeLength&&this.onCodeLengthChange(Re),!this.isComplete(Re.values)&&this.isComplete(this.state.values)||this.isComplete(this.state.values)&&Re.values.join("")!==this.state.values.join("")){const Ie=this.state.values.join("");this.props.onFillCode(Ie)}else Re.values.join(",")!==this.state.values.join(",")&&this.props.onChange()}componentDidMount(){this.focusInput(0)}renderInputs(Ke,Re){return this.state.values.slice(Ke,Re).map((Fe,Ie)=>{const ze=Ie+Ke;return t.createElement(G,{autocomplete:ze===0?"one-time-password":"off",key:ze,ref:this.inputRefs[ze],moveLeft:()=>this.moveLeft(ze),moveRight:()=>this.moveRight(ze),onChange:qe=>this.onChange(ze,qe),onPaste:this.onPaste,onFocus:()=>{this.setState(()=>({focusedInputIndex:ze}))},onBlur:()=>this.setState(()=>({focusedInputIndex:-1})),hasFocus:this.state.focusedInputIndex===ze,value:this.state.values[ze],ariaLabel:H.t("digit {inputIndex} of {numberOfInputs}",{inputIndex:ze+1,numberOfInputs:this.state.values.length}),ariaDescribedBy:this.props.ariaDescribedBy,disabled:this.props.disabled})})}render(){return t.createElement("div",{className:"display_flex align_items_center margin_bottom_50","data-qa":"confirmation_code_input"},t.createElement("div",{className:"display_flex"},this.renderInputs(0,this.props.codeLength)))}constructor(Ke){super(Ke),this.onPaste=Re=>{const Fe=this.state.focusedInputIndex;if(Fe===-1)return;const Ie=this.state.values.length-Fe,ze=Re.substring(0,Ie).split(""),qe=this.state.values.slice();ze.forEach((st,ut)=>{const tt=ut+Fe;qe[tt]=st}),this.setState(()=>({values:qe}),()=>{this.focusInput(Math.min(this.state.values.length-1,Fe+ze.length))})},this.onCodeLengthChange=Re=>{const Fe=(0,R.A)(this.props.codeLength,()=>"");Re.values.forEach((Ie,ze)=>{ze<Fe.length&&(Fe[ze]=Ie)}),this.setState(()=>({values:Fe})),this.inputRefs=Fe.map(()=>t.createRef())},this.state={values:(0,R.A)(Ke.codeLength,()=>""),focusedInputIndex:-1},this.inputRefs=this.state.values.map(()=>t.createRef())}},"TwoFactorCodeInput");U.displayName="TwoFactorCodeInput",U.defaultProps={isNumbersOnly:!0};const F=new u.Ay("sign_in");function Y(Be){let Ke=null;return Be.error===g.SMS_RATE_LIMITED?Ke=F.rt("Apologies! There were too many SMS message requests in a short period, so you\u2019ll have to wait a moment to try again."):Be.error===g.INVALID_CODE?Ke=F.rt("Your two-factor authentication code was incorrect. Please try again."):Be.error===g.RATE_LIMITED?Ke=F.rt("You\u2019ve been trying to log in too often. Wait a few minutes and try again."):Be.error===g.TOO_MANY_ATTEMPTS?Ke=F.rt("We\u2019ve detected too many failed attempts to enter a code. For safety we\u2019ve reset your password. Please check your email for further information.",{fallbackHash:"7773426b227dec3b18a254adf97a7e212e998276"}):Ke=F.rt("An unknown error occurred."),t.createElement(o.Ay,{className:"p-enter-code-error__alert",type:o.QE.boxed,icon:"lock-o",level:o.A_.error,align:o.AO.left,"data-qa":"2fa_code_error_alert"},t.createElement("span",null,Ke))}c(Y,"EnterCodeError");var Z=e(2562405183),ee=e(3328068409),j=e(1236965385);function ge(){return ge=Object.assign||function(Be){for(var Ke=1;Ke<arguments.length;Ke++){var Re=arguments[Ke];for(var Fe in Re)Object.prototype.hasOwnProperty.call(Re,Fe)&&(Be[Fe]=Re[Fe])}return Be},ge.apply(this,arguments)}c(ge,"enter_code_root_extends");const ne=new u.Ay("sign_in"),ue=5*60*1e3,he={elementName:"resend_button",onClick:{enableClogAction:!0}},be={elementName:"backup_button",onClick:{enableClogAction:!0}},xe={elementName:"emergency_backup_button",onClick:{enableClogAction:!0}},Le="two_factor_form",fe="enter-code",se=6;var Q;(function(Be){Be.Request="request_primary",Be.RequestBackup="request_backup",Be.SubmitPrimary="submit_primary",Be.SubmitBackup="submit_backup",Be.SubmitEmergency="submit_emergency",Be.None="none"})(Q||(Q={}));function k(Be){const[Ke,Re]=(0,t.useState)(Be.twoFactorType),[Fe,Ie]=(0,t.useState)("");var ze;const[qe,st]=(0,t.useState)((ze=Be.action)!==null&&ze!==void 0?ze:Q.None),[ut,tt]=(0,t.useState)(!1),[_t,yt]=(0,t.useState)(se),[Kt,Qt]=(0,t.useState)(!1),Jt=t.useRef(null),Gt=t.createRef(),wt=Be.submitOverride,{trackClogAuthRef:Bt,clogAuthLoginClick:Wt,trackClog:Tn}=(0,j.$A)(),Ot=Bt({eventId:h.EventId.AUTH_WORKSPACE_ENTER_CODE,uiPage:fe});(0,t.useEffect)(()=>{if(ut){var Mt,Ct;if((Mt=Tn.current)===null||Mt===void 0||(Ct=Mt.track)===null||Ct===void 0||Ct.call(Mt,{elementName:Le,elementValue:qe}),Wt({eventId:h.EventId.AUTH_WORKSPACE_ENTER_CODE,elementName:Le,uiPage:fe,elementValue:qe})(),wt&&Gt.current)tt(!1),Qt(!0),wt(Fe,qe,Be.magicLogin).then(()=>{var In;(In=Jt.current)===null||In===void 0||In.clear(),Qt(!1)});else{var Yt;(Yt=Gt.current)===null||Yt===void 0||Yt.submit()}}},[qe,ut,Gt,Tn,Fe,wt,Be.magicLogin,Wt]),(0,t.useEffect)(()=>{(Be.error===g.RATE_LIMITED||Be.error===g.TOO_MANY_ATTEMPTS)&&Qt(!0),Be.error===g.RATE_LIMITED&&setTimeout(()=>{Qt(!1)},ue)},[Be.error]);const Ft=Ke===E.EMERGENCY,rn=qe===Q.RequestBackup||qe===Q.SubmitBackup,ln=!Ft&&(rn&&Be.twoFactorBackupType===E.SMS||!rn&&Be.twoFactorType===E.SMS||Be.twoFactorType===E.EMAIL),_n=Be.twoFactorType===E.EMAIL,en=Be.twoFactorType===E.SMS?ne.rt("Send Code to Primary Phone"):ne.rt("Use Authentication App"),Xt=Be.twoFactorBackupType===E.SMS?ne.rt("Send Code to Backup Phone"):ne.rt("Use Backup Authentication App"),vn=c(()=>t.createElement(d.$n,{type:"outline",onClick:()=>{st(rn?Q.RequestBackup:Q.Request),tt(!0)},autoClogProps:he},rn?ne.rt("Resend Code to Backup Phone"):ne.rt("Resend Code")),"ResendButton"),je=c(()=>t.createElement(d.$n,{type:"outline",onClick:()=>{st(rn?Q.Request:Q.RequestBackup),tt(!0)},autoClogProps:be},rn?en:Xt),"BackupButton");je.displayName="BackupButton";const Rt=c(()=>{let Mt;return Ft?Mt=rn?Xt:en:Mt=ne.rt("Use Emergency Backup Code",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"}),t.createElement(d.$n,{type:"outline",onClick:()=>{Ft?(Re(Be.twoFactorType),yt(se)):(Re(E.EMERGENCY),yt(Be.emergencyCodeLength))},autoClogProps:xe},Mt)},"EmergencyButton");Rt.displayName="EmergencyButton";const hn=c(()=>Be.twoFactorType===E.EMAIL?Be.isClientApp?ne.rt("We don\u2019t recognize this device",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):ne.rt("We don\u2019t recognize this browser",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):ne.rt("Enter your authentication code"),"GetHeader"),Nn=c(()=>{if(Ft)return ne.rt("Check the list of emergency backup codes provided when setting up 2FA.",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"});if(rn)return Be.twoFactorBackupType===E.APP?ne.rt("Check your authentication app for your code."):ne.rt("We\u2019ve sent an authentication code to your backup phone <br></br> for signing into <strong>{teamName}</strong>.",{teamName:Be.teamName});switch(Be.twoFactorType){case E.APP:return ne.rt("Check your authentication app for your code.");case E.EMAIL:return ne.rt("We hate to be a bother, but we need to do our due diligence to keep your account safe. Please enter the code we\u2019ve just sent to {emailAddress} below to complete your sign-in.",{teamName:Be.teamName,emailAddress:Be.emailAddress,fallbackHash:"482df38f5efc61b851c499bff4080846e0f2b65b"});default:return ne.rt("We\u2019ve sent an authentication code to your phone for signing into <strong>{teamName}</strong>.",{teamName:Be.teamName})}},"GetSubheader"),rt=c(Mt=>{let Ct;Ft?Ct=Q.SubmitEmergency:Ct=rn?Q.SubmitBackup:Q.SubmitPrimary,Ie(Mt),st(Ct),tt(!0)},"onFillCode"),vt=(0,Z.d4)(ee.to);return t.createElement(f.A,{eventId:h.EventId.TWO_FACTOR_AUTH,uiPage:fe,trackClogRef:Ot},t.createElement(a.A,{clientTheme:vt},t.createElement(r.A,{heading:hn(),subHeading:Nn(),subHeadingClassName:"p-enter_code_app__view_sub_header"},Be.codeResent&&t.createElement(o.Ay,{className:"p-enter-code-error__alert",type:o.QE.boxed,icon:"paper-plane",level:o.A_.info,align:o.AO.left,"data-qa":"2fa_code_resent_alert"},_n?ne.rt("We\u2019ve sent a fresh code to {emailAddress} for signing into <strong>{teamName}</strong>.",{teamName:Be.teamName,emailAddress:Be.emailAddress,fallbackHash:"ed10973da08d5a9563d5aa07b51e6771457ef6b0",fallbackHashNs:"find_team"}):ne.rt("We\u2019ve sent a fresh code to your phone for signing into <strong>{teamName}</strong>.",{teamName:Be.teamName})),Be.error&&t.createElement(Y,{error:Be.error}),t.createElement("form",{ref:Gt,className:"p-enter_code",method:"POST"},t.createElement("div",{className:"p-enter_code__input_container"},t.createElement("fieldset",{className:"p-enter_code__input_fieldset"},t.createElement("legend",{className:"offscreen"},ne.rt("{codeLength}-digit confirmation code",{codeLength:_t,fallbackHash:"0279e13b54733feec1317a9d5a3f36bfe1b56e30"})),t.createElement(U,{ref:Jt,onFillCode:rt,onChange:()=>{},hideDash:!0,error:Be.error,disabled:Kt,codeLength:_t}),t.createElement("input",{type:"hidden",name:"2fa_magiclogin",value:Be.magicLogin}),Be.redir.length>0&&t.createElement("input",{type:"hidden",name:"redir",value:Be.redir}),t.createElement("input",{type:"hidden",name:"remember",value:Be.remember?"1":"0"}),t.createElement("input",{type:"hidden",name:"has_remember",value:Be.hasRemember}),t.createElement("input",{type:"hidden",name:"2fa_code",value:Fe}),t.createElement("input",{type:"hidden",name:"2fa_action",value:qe})))),t.createElement(P,ge({},Be),t.createElement("div",{className:"p-enter-code__button"},ln&&t.createElement(vn,null),Be.twoFactorBackupType&&!Ft&&t.createElement(je,null),!_n&&t.createElement(Rt,null))),Be.loggedInTeams.length>0&&t.createElement("div",{className:"p-enter-code__logged_in_teams"},t.createElement(v,ge({},Be))))))}c(k,"EnterCodeRoot");var N=e(6329712420),$=e(4979382452),W=e(3602521375),q=e(4636370173),re=e(2465132699),le=e(8523371695),Ae=e(3606117573),Te=e(8029613601),Ne=e(4947127560),pe=e(9310872914),Ee=e(6533394955),oe=e(3051824855);function ce(){return ce=Object.assign||function(Be){for(var Ke=1;Ke<arguments.length;Ke++){var Re=arguments[Ke];for(var Fe in Re)Object.prototype.hasOwnProperty.call(Re,Fe)&&(Be[Fe]=Re[Fe])}return Be},ce.apply(this,arguments)}c(ce,"enter_2fa_code_modal_extends");const ke=new u.Ay("2fa_modal"),Ce={enter2faCodeModal:"enter_2fa_code_modal",cancelButton:"enter_2fa_code_modal_cancel_button"},Me={isSSB:!0,isSSBSignIn:!0,hasPromoOffer:!1,shouldRedirect:!1,redirectURL:"",loggedInTeams:[],remember:!1,hasRemember:"",children:void 0,isOpen:!0};function Se(Be,Ke){const Re=(0,s.vS)();if(Be!==void 0){const Ie=Re[Be].two_factor_magic_login;Ie!==void 0&&Ie.token&&(Ie.token=Ke),(0,s.q9)("pendingAuthTeams",Re)}}c(Se,"updateLocalConfig2fa");function Ue(Be){const Ke=(0,s.vS)();if(Be!==void 0){const Re=Ke[Be];Re.two_factor_magic_login=void 0,(0,s.q9)("pendingAuthTeams",Ke)}}c(Ue,"clearLocalConfig2faMagicLogin");function He(Be){let{magicLogin:Ke,teamId:Re,type:Fe,backupType:Ie,emergencyLength:ze,emailAddress:qe,teamName:st,currentTeamId:ut,isOpen:tt,closeModal:_t}=Be;const[yt,Kt]=(0,t.useState)(Ke),[Qt,Jt]=(0,t.useState)(null),[Gt,wt]=(0,t.useState)(!1),Bt=ut?(0,Ee.getStoreInstanceByTeamId)(ut):void 0,Wt=(0,t.useCallback)((Ot,Ft,rn)=>{const ln={magic_token:rn,ssb:!0,two_factor_native_supported_v2:!0,two_factor_pin:Ot,two_factor_is_backup:Ft===M.REQUEST_BACKUP||Ft===M.SUBMIT_BACKUP};return Ft===M.REQUEST_CODE||Ft===M.REQUEST_BACKUP?(ln.two_factor_pin="",wt(!0)):wt(!1),new n.S(_n=>{(0,i.j)("auth.loginMagic",ln,(en,Xt)=>{if(en&&Xt.refreshed_magic_login){var vn;Kt(Xt.refreshed_magic_login),Se(Re,Xt.refreshed_magic_login),!((vn=Xt.reason)===null||vn===void 0)&&vn.match(/^missing_/)||Jt(Xt.reason),_n(en)}else en&&Xt.team?(0,pe.A)({currentTeamStore:Bt,newWorkspaceId:Re,navigateToRouteProps:{routeName:N.o},shouldAutoSignIn:!0}).then(()=>{_t(),_n(en)}):(Ue(Re),(0,pe.A)({currentTeamStore:Bt,newWorkspaceId:Re,navigateToRouteProps:{routeName:N.o}}).then(()=>{_t(),_n(en)}))})})},[Re,Bt,_t]);(0,l.A)(()=>{Wt("",M.SUBMIT_PRIMARY,yt??"")},[]);const Tn=ke.t("Finish signing into {teamName}",{teamName:st,fallbackHash:"e27938a88eacaa79d651d3aeb0bc39d128f0dd6c",fallbackHashNs:"team_picker"});return t.createElement($.A,{isOpen:tt,contentLabel:"two_factor",maxWidth:"800px",centered:!0,closeModal:_t,dataQa:Ce.enter2faCodeModal},t.createElement(Te.A,null,t.createElement(Ne.A,{title:Tn})),t.createElement(q.A,null,t.createElement(re.A,null,t.createElement("div",{id:"enter-code-app-root"},t.createElement(k,ce({},Me,{teamName:st,error:Qt,action:null,magicLogin:yt||"",twoFactorType:Fe,twoFactorBackupType:Ie,emailAddress:qe,codeResent:Gt,redir:"",emergencyCodeLength:ze,isClientApp:!0,submitOverride:Wt}))))),t.createElement(le.A,null,t.createElement(Ae.A,null,t.createElement(W.A,{type:"outline","data-qa":Ce.cancelButton,"aria-label":ke.t("Cancel")},ke.t("Cancel")))))}c(He,"TwoFAModal"),He.displayName="TwoFAModal";const Ye=(0,oe.e)(He);var J=e(796111729),ae=e(9012396182);function Ve(Be,Ke){const Re=(0,Ee.getStateForClientStore)();if(!(0,ae.isWorkspacePendingTwoFactor)(Re,Be))return!1;const Fe=(0,ae.getWorkspacesMeta)(Re),Ie=Fe==null?void 0:Fe[Be],{two_factor_magic_login:ze,name:qe}=Ie,{token:st,user_2fa_type:ut,user_2fa_backup_type:tt,user_emergency_code_length:_t,email:yt}=ze;let Kt;return Ke?Kt=(0,Ee.getStoreInstanceByTeamId)(Ke):Kt=(0,Ee.getStoreInstanceByTeamId)((0,ae.getFocusedWorkspace)(Re)),Kt?(Kt.dispatch(Ye({magicLogin:st,teamId:Be,type:ut,backupType:tt,emergencyLength:_t,teamName:qe,currentTeamId:Ke,emailAddress:yt})),!0):((0,J.Wo)().error("TWO_FACTOR_SSB",`${Be} is pending 2fa, but no store for ${Ke}, falling back to openSignIn()`),!1)}c(Ve,"maybeRenderTwoFactorModal")},4626613428:(x,A,e)=>{"use strict";e.d(A,{S4:()=>I,Ty:()=>B,ez:()=>f,lf:()=>V});var t=e(6839188756),n=e(2689960678),s=e(6323355797),i=e(1247361162),l=e(8161242485),o=e(9186462665),a=e(2047021170),r=e(7268021173),d=e(6827180593),u=e(772817784),_=e(117899263),v=e(3265910753),h=e(3677514771),f;(function(K){K.HAS_MENTIONS="has_mentions",K.HAS_SLACK_CONNECT_INVITE="has_slack_connect_invite",K.HAS_THREADS="has_threads",K.IS_ENTERPRISE="is_enterprise",K.IS_EXISTING_JOINER="is_existing_joiner",K.IS_IN_ACTIVATE_SOLUTIONS_TRIAL_ENTRYPOINTS="is_in_activate_solutions_trial_entrypoints",K.IS_IN_REVERSE_TRIAL="is_in_reverse_trial",K.IS_IN_SOLUTIONS_ONBOARDING_TRIAL="is_in_solutions_onboarding_trial",K.IS_IN_ACTIVATE_SOLUTIONS_GALLERY_TRIAL="is_in_activate_solutions_gallery_trial",K.IS_IN_TRIAL="is_in_trial",K.IS_ONBOARDING_COMPLETED="is_onboarding_completed",K.IS_OVER_TWO_WEEKS_OLD="is_over_two_weeks_old",K.IS_USER_PREF_ENABLED="is_user_pref_enabled"})(f||(f={}));const I="should_show_ia4_tabs",p={reason:f.IS_ENTERPRISE,shouldShowTabs:!0},y={reason:f.IS_EXISTING_JOINER,shouldShowTabs:!0},g={reason:f.IS_USER_PREF_ENABLED,shouldShowTabs:!0},E={reason:f.HAS_MENTIONS,shouldShowTabs:!0},M={reason:f.HAS_THREADS,shouldShowTabs:!0},T={reason:f.HAS_SLACK_CONNECT_INVITE,shouldShowTabs:!0},D={reason:f.IS_IN_ACTIVATE_SOLUTIONS_GALLERY_TRIAL,shouldShowTabs:!0},C={reason:f.IS_IN_TRIAL,shouldShowTabs:!0},m={reason:f.IS_IN_SOLUTIONS_ONBOARDING_TRIAL,shouldShowTabs:!0},O={reason:f.IS_IN_REVERSE_TRIAL,shouldShowTabs:!0},P={reason:f.IS_ONBOARDING_COMPLETED,shouldShowTabs:!0},R={shouldShowTabs:!0,reason:f.IS_OVER_TWO_WEEKS_OLD},L={shouldShowTabs:!1},V=(0,l.Ay)(K=>{const b=(0,h.H7)(K);if((0,t.r7)(b))return p;const G=(0,u.w)(K);if(!(0,_._)(K)&&G)return y;if((0,a.ty)(K,I))return g;var F;if(((F=(0,i.rz)(K))!==null&&F!==void 0?F:n.Ml).length>0)return E;var Z;return((Z=(0,i.sG)(K))!==null&&Z!==void 0?Z:n.Ml).length>0?M:(0,o.RU)(K)?T:(0,r.iH)(K)?(0,r.G)(K,s.ZO.SolutionsGalleryPromo)?D:(0,v.Pz)(K)?m:(0,r.G)(K,s.ZO.GoldenGateTrial,s.zG.ReverseTrialDay0)?O:C:(0,a.ty)(K,"onboarding_complete")?P:(0,d.H)(K)>=14?R:L});V.meta={name:"createSelector",key:"createSelectorshouldShowTabsWithReason",description:K=>{const b=(0,h.H7)(K);if((0,t.r7)(b))return p;const G=(0,u.w)(K);if(!(0,_._)(K)&&G)return y;if((0,a.ty)(K,I))return g;var F;if(((F=(0,i.rz)(K))!==null&&F!==void 0?F:n.Ml).length>0)return E;var Z;return((Z=(0,i.sG)(K))!==null&&Z!==void 0?Z:n.Ml).length>0?M:(0,o.RU)(K)?T:(0,r.iH)(K)?(0,r.G)(K,s.ZO.SolutionsGalleryPromo)?D:(0,v.Pz)(K)?m:(0,r.G)(K,s.ZO.GoldenGateTrial,s.zG.ReverseTrialDay0)?O:C:(0,a.ty)(K,"onboarding_complete")?P:(0,d.H)(K)>=14?R:L}};const B=(0,l.Ay)(K=>V(K).shouldShowTabs);B.meta={name:"createSelector",key:"createSelectorshouldShowTabs",description:K=>V(K).shouldShowTabs}},7968796288:(x,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(2664504268),n=e(8481284327);const i=c(()=>(0,n.A)(()=>(0,t.A)()),"useUniqueId")},7798793495:(x,A,e)=>{"use strict";e.d(A,{G:()=>n});var t=e(9139930183);const n=(0,t.Ay)({},!0,{persistenceEnabled:!1,storeKey:"isState"});n.meta={name:"createReducer",key:"createReducerisStateReducer"}},9121100949:(x,A,e)=>{"use strict";e.d(A,{$D:()=>u,OR:()=>o,RC:()=>h,Ts:()=>r,WU:()=>v,gN:()=>a,jG:()=>_,jr:()=>f,jt:()=>l,ke:()=>t,qD:()=>d,r1:()=>i,ts:()=>n,u1:()=>s});const t="viewLayoutSidebarWidthIntent",n="viewLayoutSidebarWidthMode",s="viewLayoutSidebarWideWidthIntent",i="viewLayoutSidebarWideWidthMode",l="viewLayoutSidebarExtraWideWidthIntent",o="viewLayoutSidebarExtraWideWidthMode",a="viewLayoutSecondaryWidthIntent",r="viewLayoutSecondaryWidthMode",d="viewLayoutSplitWidthIntent",u="viewLayoutSplitWidthMode",_="viewLayoutIsSidebarVisible",v="viewLayoutIsWorkspaceSwitcherVisible",h="viewLayoutCompactModeEnabled",f="viewLayoutLastSidebarWidth"}},x=>{var A=c(t=>x(x.s=t),"__webpack_exec__");x.O(0,["gantry-v2-vendors","gantry-v2-vendors-client","gantry-v2-shared","client-boot-styles"],()=>A(322730488));var e=x.O()}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/client-boot.47699335ca2ad8967efe.min.js.map